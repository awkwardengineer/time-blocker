(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(l){if(l.ep)return;l.ep=!0;const f=a(l);fetch(l.href,f)}})();const mf="production",ce=!mf.toLowerCase().startsWith("prod");var Gu=Array.isArray,yf=Array.prototype.indexOf,fs=Array.from,or=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,Uu=Object.getOwnPropertyDescriptors,gf=Object.prototype,_f=Array.prototype,ds=Object.getPrototypeOf,du=Object.isExtensible;const ma=()=>{};function bf(e){for(var r=0;r<e.length;r++)e[r]()}function Hu(){var e,r,a=new Promise((s,l)=>{e=s,r=l});return{promise:a,resolve:e,reject:r}}const At=2,hs=4,vs=8,wf=1<<24,Nn=16,Kn=32,Dr=64,Na=128,dn=512,Rt=1024,Yt=2048,Bn=4096,$t=8192,Pn=16384,ps=32768,Vr=65536,ya=1<<17,Vu=1<<18,Jr=1<<19,Ef=1<<20,sr=32768,Go=1<<21,Ka=1<<22,er=1<<23,Ln=Symbol("$state"),xf=Symbol("legacy props"),Tf=Symbol(""),Wu=Symbol("proxy path"),jr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Af(){if(ce){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function hu(){if(ce){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function kf(){if(ce){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Df(e){if(ce){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function If(){if(ce){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Sf(e){if(ce){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function Of(){if(ce){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Cf(e){if(ce){const r=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Rf(e){if(ce){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Pf(){if(ce){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Lf(){if(ce){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Mf(){if(ce){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Nf(){if(ce){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Yu=1,qu=2,Zu=4,Kf=8,Bf=16,Ff=1,jf=4,zf=8,Gf=16,Uf=1,Hf=2,It=Symbol(),Vf=Symbol("filename"),Wf="http://www.w3.org/1999/xhtml";var Qu="font-weight: bold",Xu="font-weight: normal";function Ro(e){ce?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Qu,Xu):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Yf(){ce?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Qu,Xu):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function $u(e){return e===this.v}function Ju(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function el(e){return!Ju(e,this.v)}let qf=!1;function yn(e,r){return e.label=r,tl(e.v,r),e}function tl(e,r){return e?.[Wu]?.(r),e}function Zf(e){const r=new Error,a=Qf();return a.length===0?null:(a.unshift(`
`),or(r,"stack",{value:a.join(`
`)}),or(r,"name",{value:e}),r)}function Qf(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const a=r.split(`
`),s=[];for(let l=0;l<a.length;l++){const f=a[l],h=f.replaceAll("\\","/");if(f.trim()!=="Error"){if(f.includes("validate_each_keys"))return[];h.includes("svelte/src/internal")||h.includes("node_modules/.vite")||s.push(f)}}return s}let Ht=null;function Wr(e){Ht=e}let Ti=null;function ga(e){Ti=e}let Ci=null;function vu(e){Ci=e}function Ir(e,r=!1,a){Ht={p:Ht,i:!1,c:null,e:null,s:e,x:null,l:null},ce&&(Ht.function=a,Ci=a)}function Sr(e){var r=Ht,a=r.e;if(a!==null){r.e=null;for(var s of a)yl(s)}return r.i=!0,Ht=r.p,ce&&(Ci=Ht?.function??null),{}}function nl(){return!0}let br=[];function rl(){var e=br;br=[],bf(e)}function ei(e){if(br.length===0&&!bi){var r=br;queueMicrotask(()=>{r===br&&rl()})}br.push(e)}function Xf(){for(;br.length>0;)rl()}const Uo=new WeakMap;function il(e){var r=Fe;if(r===null)return Be.f|=er,e;if(ce&&e instanceof Error&&!Uo.has(e)&&Uo.set(e,$f(e,r)),(r.f&ps)===0){if((r.f&Na)===0)throw ce&&!r.parent&&e instanceof Error&&al(e),e;r.b.error(e)}else Yr(e,r)}function Yr(e,r){for(;r!==null;){if((r.f&Na)!==0)try{r.b.error(e);return}catch(a){e=a}r=r.parent}throw ce&&e instanceof Error&&al(e),e}function $f(e,r){const a=wr(e,"message");if(!(a&&!a.configurable)){for(var s=gs?"  ":"	",l=`
${s}in ${r.fn?.name||"<unknown>"}`,f=r.ctx;f!==null;)l+=`
${s}in ${f.function?.[Vf].split("/").pop()}`,f=f.p;return{message:e.message+`
${l}
`,stack:e.stack?.split(`
`).filter(h=>!h.includes("svelte/src/internal")).join(`
`)}}}function al(e){const r=Uo.get(e);r&&(or(e,"message",{value:r.message}),or(e,"stack",{value:r.stack}))}const sa=new Set;let ze=null,fa=null,an=null,nn=[],Ba=null,Ho=!1,bi=!1;class En{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){nn=[],fa=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of r)this.#o(s,a);this.is_fork||this.#c(),this.is_deferred()?(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects)):(fa=this,ze=null,pu(a.render_effects),pu(a.effects),fa=null,this.#u?.resolve()),an=null}#o(r,a){r.f^=Rt;for(var s=r.first;s!==null;){var l=s.f,f=(l&(Kn|Dr))!==0,h=f&&(l&Rt)!==0,y=h||(l&$t)!==0||this.skipped_effects.has(s);if((s.f&Na)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[],block_effects:[]}),!y&&s.fn!==null){f?s.f^=Rt:(l&hs)!==0?a.effects.push(s):Pi(s)&&((s.f&Nn)!==0&&a.block_effects.push(s),Di(s));var g=s.first;if(g!==null){s=g;continue}}var w=s.parent;for(s=s.next;s===null&&w!==null;)w===a.effect&&(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects),a=a.parent),s=w.next,w=w.parent}}#s(r){for(const a of r)((a.f&Yt)!==0?this.#a:this.#i).push(a),this.#l(a.deps),Pt(a,Rt)}#l(r){if(r!==null)for(const a of r)(a.f&At)===0||(a.f&sr)===0||(a.f^=sr,this.#l(a.deps))}capture(r,a){this.previous.has(r)||this.previous.set(r,a),(r.f&er)===0&&(this.current.set(r,r.v),an?.set(r,r.v))}activate(){ze=this,this.apply()}deactivate(){ze===this&&(ze=null,an=null)}flush(){if(this.activate(),nn.length>0){if(ol(),ze!==null&&ze!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(sa.size>1){this.previous.clear();var r=an,a=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const f of sa){if(f===this){a=!1;continue}const h=[];for(const[g,w]of this.current){if(f.current.has(g))if(a&&w!==f.current.get(g))f.current.set(g,w);else continue;h.push(g)}if(h.length===0)continue;const y=[...f.current.keys()].filter(g=>!this.current.has(g));if(y.length>0){var l=nn;nn=[];const g=new Set,w=new Map;for(const E of h)sl(E,y,g,w);if(nn.length>0){ze=f,f.apply();for(const E of nn)f.#o(E,s);f.deactivate()}nn=l}}ze=null,an=r}this.committed=!0,sa.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)Pt(r,Yt),Ar(r);for(const r of this.#i)Pt(r,Bn),Ar(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=Hu()).promise}static ensure(){if(ze===null){const r=ze=new En;sa.add(ze),bi||En.enqueue(()=>{ze===r&&r.flush()})}return ze}static enqueue(r){ei(r)}apply(){}}function Jf(e){var r=bi;bi=!0;try{for(var a;;){if(Xf(),nn.length===0&&(ze?.flush(),nn.length===0))return Ba=null,a;ol()}}finally{bi=r}}function ol(){var e=nr;Ho=!0;var r=ce?new Set:null;try{var a=0;for(wa(!0);nn.length>0;){var s=En.ensure();if(a++>1e3){if(ce){var l=new Map;for(const h of s.current.keys())for(const[y,g]of h.updated??[]){var f=l.get(y);f||(f={error:g.error,count:0},l.set(y,f)),f.count+=g.count}for(const h of l.values())h.error&&console.error(h.error)}ed()}if(s.process(nn),tr.clear(),ce)for(const h of s.current.keys())r.add(h)}}finally{if(Ho=!1,wa(e),Ba=null,ce)for(const h of r)h.updated=null}}function ed(){try{Of()}catch(e){ce&&or(e,"stack",{value:""}),Yr(e,Ba)}}let On=null;function pu(e){var r=e.length;if(r!==0){for(var a=0;a<r;){var s=e[a++];if((s.f&(Pn|$t))===0&&Pi(s)&&(On=new Set,Di(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?wl(s):s.fn=null),On?.size>0)){tr.clear();for(const l of On){if((l.f&(Pn|$t))!==0)continue;const f=[l];let h=l.parent;for(;h!==null;)On.has(h)&&(On.delete(h),f.push(h)),h=h.parent;for(let y=f.length-1;y>=0;y--){const g=f[y];(g.f&(Pn|$t))===0&&Di(g)}}On.clear()}}On=null}}function sl(e,r,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const l of e.reactions){const f=l.f;(f&At)!==0?sl(l,r,a,s):(f&(Ka|Nn))!==0&&(f&Yt)===0&&ul(l,r,s)&&(Pt(l,Yt),Ar(l))}}function ul(e,r,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const l of e.deps){if(r.includes(l))return!0;if((l.f&At)!==0&&ul(l,r,a))return a.set(l,!0),!0}return a.set(e,!1),!1}function Ar(e){for(var r=Ba=e;r.parent!==null;){r=r.parent;var a=r.f;if(Ho&&r===Fe&&(a&Nn)!==0&&(a&Vu)===0)return;if((a&(Dr|Kn))!==0){if((a&Rt)===0)return;r.f^=Rt}}nn.push(r)}function td(e){let r=0,a=kr(0),s;return ce&&yn(a,"createSubscriber version"),()=>{Ai()&&(p(a),za(()=>(r===0&&(s=ti(()=>e(()=>wi(a)))),r+=1,()=>{ei(()=>{r-=1,r===0&&(s?.(),s=void 0,wi(a))})})))}}var nd=Vr|Jr|Na;function rd(e,r,a){new id(e,r,a)}class id{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#_=td(()=>(this.#d=kr(this.#f),ce&&yn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,a,s){this.#t=r,this.#n=a,this.#u=s,this.parent=Fe.b,this.#e=!!this.#n.pending,this.#a=bs(()=>{Fe.b=this;{var l=this.#y();try{this.#i=rn(()=>s(l))}catch(f){this.error(f)}this.#h>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},nd)}#b(){try{this.#i=rn(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=rn(()=>r(this.#t)),En.enqueue(()=>{var a=this.#y();this.#i=this.#p(()=>(En.ensure(),rn(()=>this.#u(a)))),this.#h>0?this.#m():(Gr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#y(){var r=this.#t;return this.#e&&(this.#c=ur(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var a=Fe,s=Be,l=Ht;fn(this.#a),Ut(this.#a),Wr(this.#a.ctx);try{return r()}catch(f){return il(f),null}finally{fn(a),Ut(s),Wr(l)}}#m(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Tl(this.#i,this.#l)),this.#o===null&&(this.#o=rn(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#e=!1,this.#o&&Gr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&Zr(this.#d,this.#f)}get_effect_pending(){return this.#_(),p(this.#d)}error(r){var a=this.#n.onerror;let s=this.#n.failed;if(this.#v||!a&&!s)throw r;this.#i&&(Vt(this.#i),this.#i=null),this.#o&&(Vt(this.#o),this.#o=null),this.#s&&(Vt(this.#s),this.#s=null);var l=!1,f=!1;const h=()=>{if(l){Yf();return}l=!0,f&&Nf(),En.ensure(),this.#f=0,this.#s!==null&&Gr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,rn(()=>this.#u(this.#t)))),this.#h>0?this.#m():this.#e=!1};var y=Be;try{Ut(null),f=!0,a?.(r,h),f=!1}catch(g){Yr(g,this.#a&&this.#a.parent)}finally{Ut(y)}s&&ei(()=>{this.#s=this.#p(()=>{En.ensure(),this.#v=!0;try{return rn(()=>{s(this.#t,()=>r,()=>h)})}catch(g){return Yr(g,this.#a.parent),null}finally{this.#v=!1}})})}}function da(e,r){return r}function ad(e,r,a){for(var s=[],l=r.length,f=0;f<l;f++)ws(r[f].e,s,!0);El(s,()=>{var h=s.length===0&&a!==null;if(h){var y=a,g=y.parentNode;_d(g),g.append(y),e.items.clear(),gn(e,r[0].prev,r[l-1].next)}for(var w=0;w<l;w++){var E=r[w];h||(e.items.delete(E.k),gn(e,E.prev,E.next)),Vt(E.e,!h)}e.first===r[0]&&(e.first=r[0].prev)})}function Er(e,r,a,s,l,f=null){var h=e,y=new Map,g=null,w=(r&Zu)!==0,E=(r&Yu)!==0,D=(r&qu)!==0;if(w){var b=e;h=b.appendChild(ur())}var T=null,R=ll(()=>{var W=a();return Gu(W)?W:W==null?[]:fs(W)}),M,N=!0;function P(){od(Z,M,h,r,s),T!==null&&(M.length===0?(T.fragment?(h.before(T.fragment),T.fragment=null):Es(T.effect),H.first=T.effect):Gr(T.effect,()=>{T=null}))}var H=bs(()=>{M=p(R);for(var W=M.length,te=new Set,ae=ze,ve=null,me=ml(),de=0;de<W;de+=1){var xe=M[de],we=s(xe,de),ke=N?null:y.get(we);ke?(E&&Zr(ke.v,xe),D?Zr(ke.i,de):ke.i=de,me&&ae.skipped_effects.delete(ke.e)):(ke=sd(N?h:null,ve,xe,we,de,l,r,a),N&&(ke.o=!0,ve===null?g=ke:ve.next=ke,ve=ke),y.set(we,ke)),te.add(we)}if(W===0&&f&&!T)if(N)T={fragment:null,effect:rn(()=>f(h))};else{var it=document.createDocumentFragment(),He=ur();it.append(He),T={fragment:it,effect:rn(()=>f(He))}}if(!N)if(me){for(const[lt,vt]of y)te.has(lt)||ae.skipped_effects.add(vt.e);ae.oncommit(P),ae.ondiscard(()=>{})}else P();p(R)}),Z={effect:H,items:y,first:g};N=!1}function od(e,r,a,s,l){var f=(s&Kf)!==0,h=r.length,y=e.items,g=e.first,w,E=null,D,b=[],T=[],R,M,N,P;if(f)for(P=0;P<h;P+=1)R=r[P],M=l(R,P),N=y.get(M),N.o&&(N.a?.measure(),(D??=new Set).add(N));for(P=0;P<h;P+=1){if(R=r[P],M=l(R,P),N=y.get(M),e.first??=N,!N.o){N.o=!0;var H=E?E.next:g;gn(e,E,N),gn(e,N,H),Po(N,H,a),E=N,b=[],T=[],g=E.next;continue}if((N.e.f&$t)!==0&&(Es(N.e),f&&(N.a?.unfix(),(D??=new Set).delete(N))),N!==g){if(w!==void 0&&w.has(N)){if(b.length<T.length){var Z=T[0],W;E=Z.prev;var te=b[0],ae=b[b.length-1];for(W=0;W<b.length;W+=1)Po(b[W],Z,a);for(W=0;W<T.length;W+=1)w.delete(T[W]);gn(e,te.prev,ae.next),gn(e,E,te),gn(e,ae,Z),g=Z,E=ae,P-=1,b=[],T=[]}else w.delete(N),Po(N,g,a),gn(e,N.prev,N.next),gn(e,N,E===null?e.first:E.next),gn(e,E,N),E=N;continue}for(b=[],T=[];g!==null&&g.k!==M;)(g.e.f&$t)===0&&(w??=new Set).add(g),T.push(g),g=g.next;if(g===null)continue;N=g}b.push(N),E=N,g=N.next}if(g!==null||w!==void 0){for(var ve=w===void 0?[]:fs(w);g!==null;)(g.e.f&$t)===0&&ve.push(g),g=g.next;var me=ve.length;if(me>0){var de=(s&Zu)!==0&&h===0?a:null;if(f){for(P=0;P<me;P+=1)ve[P].a?.measure();for(P=0;P<me;P+=1)ve[P].a?.fix()}ad(e,ve,de)}}f&&ei(()=>{if(D!==void 0)for(N of D)N.a?.apply()})}function sd(e,r,a,s,l,f,h,y){var g=(h&Yu)!==0,w=(h&Bf)===0,E=g?w?fl(a,!1,!1):kr(a):a,D=(h&qu)===0?l:kr(l);ce&&g&&(E.trace=()=>{var R=typeof D=="number"?l:D.v;y()[R]});var b={i:D,v:E,k:s,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var T=document.createDocumentFragment();T.append(e=ur())}return b.e=rn(()=>f(e,E,D,y)),r!==null&&(r.next=b),b}finally{}}function Po(e,r,a){for(var s=e.next?e.next.e.nodes_start:a,l=r?r.e.nodes_start:a,f=e.e.nodes_start;f!==null&&f!==s;){var h=Ri(f);l.before(f),f=h}}function gn(e,r,a){r===null?(e.first=a,e.effect.first=a&&a.e):(r.e===e.effect.last&&a!==null&&(e.effect.last=a.e),r.e.next&&(r.e.next.prev=null),r.next=a,r.e.next=a&&a.e),a===null?e.effect.last=r&&r.e:(a.e===e.effect.last&&r===null&&(e.effect.last=a.e.prev),a.e.prev&&(a.e.prev.next=null),a.prev=r,a.e.prev=r&&r.e)}function ud(e,r,a,s){const l=Fa;if(a.length===0&&e.length===0){s(r.map(l));return}var f=ze,h=Fe,y=ld();function g(){Promise.all(a.map(w=>fd(w))).then(w=>{y();try{s([...r.map(l),...w])}catch(E){(h.f&Pn)===0&&Yr(E,h)}f?.deactivate(),_a()}).catch(w=>{Yr(w,h)})}e.length>0?Promise.all(e).then(()=>{y();try{return g()}finally{f?.deactivate(),_a()}}):g()}function ld(){var e=Fe,r=Be,a=Ht,s=ze;if(ce)var l=Ti;return function(h=!0){fn(e),Ut(r),Wr(a),h&&s?.activate(),ce&&ga(l)}}function _a(){fn(null),Ut(null),Wr(null),ce&&ga(null)}const cd=new Set;function Fa(e){var r=At|Yt,a=Be!==null&&(Be.f&At)!==0?Be:null;return Fe!==null&&(Fe.f|=Jr),{ctx:Ht,deps:null,effects:null,equals:$u,f:r,fn:e,reactions:null,rv:0,v:It,wv:0,parent:a??Fe,ac:null}}function fd(e,r){let a=Fe;a===null&&Af();var s=a.b,l=void 0,f=kr(It),h=!Be,y=new Map;return Ad(()=>{var g=Hu();l=g.promise;try{Promise.resolve(e()).then(g.resolve,g.reject).then(()=>{w===ze&&w.committed&&w.deactivate(),_a()})}catch(b){g.reject(b),_a()}var w=ze;if(h){var E=!s.is_pending();s.update_pending_count(1),w.increment(E),y.get(w)?.reject(jr),y.delete(w),y.set(w,g)}const D=(b,T=void 0)=>{if(w.activate(),T)T!==jr&&(f.f|=er,Zr(f,T));else{(f.f&er)!==0&&(f.f^=er),Zr(f,b);for(const[R,M]of y){if(y.delete(R),R===w)break;M.reject(jr)}}h&&(s.update_pending_count(-1),w.decrement(E))};g.promise.then(D,b=>D(null,b||"unknown"))}),_s(()=>{for(const g of y.values())g.reject(jr)}),ce&&(f.f|=Ka),new Promise(g=>{function w(E){function D(){E===l?g(f):w(l)}E.then(D,D)}w(l)})}function Ot(e){const r=Fa(e);return Al(r),r}function ll(e){const r=Fa(e);return r.equals=el,r}function Vo(e){var r=e.effects;if(r!==null){e.effects=null;for(var a=0;a<r.length;a+=1)Vt(r[a])}}let Lo=[];function dd(e){for(var r=e.parent;r!==null;){if((r.f&At)===0)return(r.f&Pn)===0?r:null;r=r.parent}return null}function ms(e){var r,a=Fe;if(fn(dd(e)),ce){let s=qr;mu(new Set);try{Lo.includes(e)&&kf(),Lo.push(e),e.f&=~sr,Vo(e),r=Wo(e)}finally{fn(a),mu(s),Lo.pop()}}else try{e.f&=~sr,Vo(e),r=Wo(e)}finally{fn(a)}return r}function cl(e){var r=ms(e);if(e.equals(r)||(ze?.is_fork||(e.v=r),e.wv=Dl()),!Or)if(an!==null)(Ai()||ze?.is_fork)&&an.set(e,r);else{var a=(e.f&dn)===0?Bn:Rt;Pt(e,a)}}let qr=new Set;const tr=new Map;function mu(e){qr=e}let ys=!1;function hd(){ys=!0}function kr(e,r){var a={f:0,v:e,reactions:null,equals:$u,rv:0,wv:0};return a}function ye(e,r){const a=kr(e);return Al(a),a}function fl(e,r=!1,a=!0){const s=kr(e);return r||(s.equals=el),s}function I(e,r,a=!1){Be!==null&&(!xn||(Be.f&ya)!==0)&&nl()&&(Be.f&(At|Nn|Ka|ya))!==0&&!Mn?.includes(e)&&Mf();let s=a?Xt(r):r;return ce&&tl(s,e.label),Zr(e,s)}function Zr(e,r){if(!e.equals(r)){var a=e.v;Or?tr.set(e,r):tr.set(e,a),e.v=r;var s=En.ensure();if(s.capture(e,a),ce){if(Fe!==null){e.updated??=new Map;const l=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:l}),l>5){const f=Zf("updated at");if(f!==null){let h=e.updated.get(f.stack);h||(h={error:f,count:0},e.updated.set(f.stack,h)),h.count++}}}Fe!==null&&(e.set_during_effect=!0)}(e.f&At)!==0&&((e.f&Yt)!==0&&ms(e),Pt(e,(e.f&dn)!==0?Rt:Bn)),e.wv=Dl(),hl(e,Yt),Fe!==null&&(Fe.f&Rt)!==0&&(Fe.f&(Kn|Dr))===0&&(en===null?Id([e]):en.push(e)),!s.is_fork&&qr.size>0&&!ys&&dl()}return r}function dl(){ys=!1;var e=nr;wa(!0);const r=Array.from(qr);try{for(const a of r)(a.f&Rt)!==0&&Pt(a,Bn),Pi(a)&&Di(a)}finally{wa(e)}qr.clear()}function wi(e){I(e,e.v+1)}function hl(e,r){var a=e.reactions;if(a!==null)for(var s=a.length,l=0;l<s;l++){var f=a[l],h=f.f;if(ce&&(h&ya)!==0){qr.add(f);continue}var y=(h&Yt)===0;if(y&&Pt(f,r),(h&At)!==0){var g=f;an?.delete(g),(h&sr)===0&&(h&dn&&(f.f|=sr),hl(g,Bn))}else y&&((h&Nn)!==0&&On!==null&&On.add(f),Ar(f))}}const vd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Xt(e){if(typeof e!="object"||e===null||Ln in e)return e;const r=ds(e);if(r!==gf&&r!==_f)return e;var a=new Map,s=Gu(e),l=ye(0),f=xr,h=E=>{if(xr===f)return E();var D=Be,b=xr;Ut(null),bu(f);var T=E();return Ut(D),bu(b),T};s&&(a.set("length",ye(e.length)),ce&&(e=md(e)));var y="";let g=!1;function w(E){if(!g){g=!0,y=E,yn(l,`${y} version`);for(const[D,b]of a)yn(b,yr(y,D));g=!1}}return new Proxy(e,{defineProperty(E,D,b){(!("value"in b)||b.configurable===!1||b.enumerable===!1||b.writable===!1)&&Pf();var T=a.get(D);return T===void 0?T=h(()=>{var R=ye(b.value);return a.set(D,R),ce&&typeof D=="string"&&yn(R,yr(y,D)),R}):I(T,b.value,!0),!0},deleteProperty(E,D){var b=a.get(D);if(b===void 0){if(D in E){const T=h(()=>ye(It));a.set(D,T),wi(l),ce&&yn(T,yr(y,D))}}else I(b,It),wi(l);return!0},get(E,D,b){if(D===Ln)return e;if(ce&&D===Wu)return w;var T=a.get(D),R=D in E;if(T===void 0&&(!R||wr(E,D)?.writable)&&(T=h(()=>{var N=Xt(R?E[D]:It),P=ye(N);return ce&&yn(P,yr(y,D)),P}),a.set(D,T)),T!==void 0){var M=p(T);return M===It?void 0:M}return Reflect.get(E,D,b)},getOwnPropertyDescriptor(E,D){var b=Reflect.getOwnPropertyDescriptor(E,D);if(b&&"value"in b){var T=a.get(D);T&&(b.value=p(T))}else if(b===void 0){var R=a.get(D),M=R?.v;if(R!==void 0&&M!==It)return{enumerable:!0,configurable:!0,value:M,writable:!0}}return b},has(E,D){if(D===Ln)return!0;var b=a.get(D),T=b!==void 0&&b.v!==It||Reflect.has(E,D);if(b!==void 0||Fe!==null&&(!T||wr(E,D)?.writable)){b===void 0&&(b=h(()=>{var M=T?Xt(E[D]):It,N=ye(M);return ce&&yn(N,yr(y,D)),N}),a.set(D,b));var R=p(b);if(R===It)return!1}return T},set(E,D,b,T){var R=a.get(D),M=D in E;if(s&&D==="length")for(var N=b;N<R.v;N+=1){var P=a.get(N+"");P!==void 0?I(P,It):N in E&&(P=h(()=>ye(It)),a.set(N+"",P),ce&&yn(P,yr(y,N)))}if(R===void 0)(!M||wr(E,D)?.writable)&&(R=h(()=>ye(void 0)),ce&&yn(R,yr(y,D)),I(R,Xt(b)),a.set(D,R));else{M=R.v!==It;var H=h(()=>Xt(b));I(R,H)}var Z=Reflect.getOwnPropertyDescriptor(E,D);if(Z?.set&&Z.set.call(T,b),!M){if(s&&typeof D=="string"){var W=a.get("length"),te=Number(D);Number.isInteger(te)&&te>=W.v&&I(W,te+1)}wi(l)}return!0},ownKeys(E){p(l);var D=Reflect.ownKeys(E).filter(R=>{var M=a.get(R);return M===void 0||M.v!==It});for(var[b,T]of a)T.v!==It&&!(b in E)&&D.push(b);return D},setPrototypeOf(){Lf()}})}function yr(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:vd.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function Mo(e){try{if(e!==null&&typeof e=="object"&&Ln in e)return e[Ln]}catch{}return e}const pd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function md(e){return new Proxy(e,{get(r,a,s){var l=Reflect.get(r,a,s);return pd.has(a)?function(...f){hd();var h=l.apply(this,f);return dl(),h}:l}})}function yd(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:a,lastIndexOf:s,includes:l}=e;e.indexOf=function(f,h){const y=a.call(this,f,h);if(y===-1){for(let g=h??0;g<this.length;g+=1)if(Mo(this[g])===f){Ro("array.indexOf(...)");break}}return y},e.lastIndexOf=function(f,h){const y=s.call(this,f,h??this.length-1);if(y===-1){for(let g=0;g<=(h??this.length-1);g+=1)if(Mo(this[g])===f){Ro("array.lastIndexOf(...)");break}}return y},e.includes=function(f,h){const y=l.call(this,f,h);if(!y){for(let g=0;g<this.length;g+=1)if(Mo(this[g])===f){Ro("array.includes(...)");break}}return y},Array.__svelte_cleanup=()=>{e.indexOf=a,e.lastIndexOf=s,e.includes=l}}var yu,gs,vl,pl;function gd(){if(yu===void 0){yu=window,gs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,a=Text.prototype;vl=wr(r,"firstChild").get,pl=wr(r,"nextSibling").get,du(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),du(a)&&(a.__t=void 0),ce&&(e.__svelte_meta=null,yd())}}function ur(e=""){return document.createTextNode(e)}function ba(e){return vl.call(e)}function Ri(e){return pl.call(e)}function Ae(e,r){return ba(e)}function Tt(e,r=!1){{var a=ba(e);return a instanceof Comment&&a.data===""?Ri(a):a}}function Re(e,r=1,a=!1){let s=e;for(;r--;)s=Ri(s);return s}function _d(e){e.textContent=""}function ml(){return!1}let gu=!1;function bd(){gu||(gu=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function ja(e){var r=Be,a=Fe;Ut(null),fn(null);try{return e()}finally{Ut(r),fn(a)}}function wd(e,r,a,s=a){e.addEventListener(r,()=>ja(a));const l=e.__on_r;l?e.__on_r=()=>{l(),s(!0)}:e.__on_r=()=>s(!0),bd()}function Ed(e){Fe===null&&(Be===null&&Sf(e),If()),Or&&Df(e)}function xd(e,r){var a=r.last;a===null?r.last=r.first=e:(a.next=e,e.prev=a,r.last=e)}function Fn(e,r,a){var s=Fe;if(ce)for(;s!==null&&(s.f&ya)!==0;)s=s.parent;s!==null&&(s.f&$t)!==0&&(e|=$t);var l={ctx:Ht,deps:null,nodes_start:null,nodes_end:null,f:e|Yt|dn,first:null,fn:r,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(ce&&(l.component_function=Ci),a)try{Di(l),l.f|=ps}catch(y){throw Vt(l),y}else r!==null&&Ar(l);var f=l;if(a&&f.deps===null&&f.teardown===null&&f.nodes_start===null&&f.first===f.last&&(f.f&Jr)===0&&(f=f.first,(e&Nn)!==0&&(e&Vr)!==0&&f!==null&&(f.f|=Vr)),f!==null&&(f.parent=s,s!==null&&xd(f,s),Be!==null&&(Be.f&At)!==0&&(e&Dr)===0)){var h=Be;(h.effects??=[]).push(f)}return l}function Ai(){return Be!==null&&!xn}function _s(e){const r=Fn(vs,null,!1);return Pt(r,Rt),r.teardown=e,r}function rt(e){Ed("$effect"),ce&&or(e,"name",{value:"$effect"});var r=Fe.f,a=!Be&&(r&Kn)!==0&&(r&ps)===0;if(a){var s=Ht;(s.e??=[]).push(e)}else return yl(e)}function yl(e){return Fn(hs|Ef,e,!1)}function Td(e){En.ensure();const r=Fn(Dr|Jr,e,!0);return(a={})=>new Promise(s=>{a.outro?Gr(r,()=>{Vt(r),s(void 0)}):(Vt(r),s(void 0))})}function gl(e){return Fn(hs,e,!1)}function Ad(e){return Fn(Ka|Jr,e,!0)}function za(e,r=0){return Fn(vs|r,e,!0)}function st(e,r=[],a=[],s=[]){ud(s,r,a,l=>{Fn(vs,()=>e(...l.map(p)),!0)})}function bs(e,r=0){var a=Fn(Nn|r,e,!0);return ce&&(a.dev_stack=Ti),a}function rn(e){return Fn(Kn|Jr,e,!0)}function _l(e){var r=e.teardown;if(r!==null){const a=Or,s=Be;_u(!0),Ut(null);try{r.call(null)}finally{_u(a),Ut(s)}}}function bl(e,r=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const l=a.ac;l!==null&&ja(()=>{l.abort(jr)});var s=a.next;(a.f&Dr)!==0?a.parent=null:Vt(a,r),a=s}}function kd(e){for(var r=e.first;r!==null;){var a=r.next;(r.f&Kn)===0&&Vt(r),r=a}}function Vt(e,r=!0){var a=!1;(r||(e.f&Vu)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Dd(e.nodes_start,e.nodes_end),a=!0),bl(e,r&&!a),Ea(e,0),Pt(e,Pn);var s=e.transitions;if(s!==null)for(const f of s)f.stop();_l(e);var l=e.parent;l!==null&&l.first!==null&&wl(e),ce&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Dd(e,r){for(;e!==null;){var a=e===r?null:Ri(e);e.remove(),e=a}}function wl(e){var r=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),r!==null&&(r.first===e&&(r.first=s),r.last===e&&(r.last=a))}function Gr(e,r,a=!0){var s=[];ws(e,s,!0),El(s,()=>{a&&Vt(e),r&&r()})}function El(e,r){var a=e.length;if(a>0){var s=()=>--a||r();for(var l of e)l.out(s)}else r()}function ws(e,r,a){if((e.f&$t)===0){if(e.f^=$t,e.transitions!==null)for(const h of e.transitions)(h.is_global||a)&&r.push(h);for(var s=e.first;s!==null;){var l=s.next,f=(s.f&Vr)!==0||(s.f&Kn)!==0&&(e.f&Nn)!==0;ws(s,r,f?a:!1),s=l}}}function Es(e){xl(e,!0)}function xl(e,r){if((e.f&$t)!==0){e.f^=$t,(e.f&Rt)===0&&(Pt(e,Yt),Ar(e));for(var a=e.first;a!==null;){var s=a.next,l=(a.f&Vr)!==0||(a.f&Kn)!==0;xl(a,l?r:!1),a=s}if(e.transitions!==null)for(const f of e.transitions)(f.is_global||r)&&f.in()}}function Tl(e,r){for(var a=e.nodes_start,s=e.nodes_end;a!==null;){var l=a===s?null:Ri(a);r.append(a),a=l}}let nr=!1;function wa(e){nr=e}let Or=!1;function _u(e){Or=e}let Be=null,xn=!1;function Ut(e){Be=e}let Fe=null;function fn(e){Fe=e}let Mn=null;function Al(e){Be!==null&&(Mn===null?Mn=[e]:Mn.push(e))}let Nt=null,Qt=0,en=null;function Id(e){en=e}let kl=1,ki=0,xr=ki;function bu(e){xr=e}function Dl(){return++kl}function Pi(e){var r=e.f;if((r&Yt)!==0)return!0;if(r&At&&(e.f&=~sr),(r&Bn)!==0){var a=e.deps;if(a!==null)for(var s=a.length,l=0;l<s;l++){var f=a[l];if(Pi(f)&&cl(f),f.wv>e.wv)return!0}(r&dn)!==0&&an===null&&Pt(e,Rt)}return!1}function Il(e,r,a=!0){var s=e.reactions;if(s!==null&&!Mn?.includes(e))for(var l=0;l<s.length;l++){var f=s[l];(f.f&At)!==0?Il(f,r,!1):r===f&&(a?Pt(f,Yt):(f.f&Rt)!==0&&Pt(f,Bn),Ar(f))}}function Wo(e){var r=Nt,a=Qt,s=en,l=Be,f=Mn,h=Ht,y=xn,g=xr,w=e.f;Nt=null,Qt=0,en=null,Be=(w&(Kn|Dr))===0?e:null,Mn=null,Wr(e.ctx),xn=!1,xr=++ki,e.ac!==null&&(ja(()=>{e.ac.abort(jr)}),e.ac=null);try{e.f|=Go;var E=e.fn,D=E(),b=e.deps;if(Nt!==null){var T;if(Ea(e,Qt),b!==null&&Qt>0)for(b.length=Qt+Nt.length,T=0;T<Nt.length;T++)b[Qt+T]=Nt[T];else e.deps=b=Nt;if(nr&&Ai()&&(e.f&dn)!==0)for(T=Qt;T<b.length;T++)(b[T].reactions??=[]).push(e)}else b!==null&&Qt<b.length&&(Ea(e,Qt),b.length=Qt);if(nl()&&en!==null&&!xn&&b!==null&&(e.f&(At|Bn|Yt))===0)for(T=0;T<en.length;T++)Il(en[T],e);return l!==null&&l!==e&&(ki++,en!==null&&(s===null?s=en:s.push(...en))),(e.f&er)!==0&&(e.f^=er),D}catch(R){return il(R)}finally{e.f^=Go,Nt=r,Qt=a,en=s,Be=l,Mn=f,Wr(h),xn=y,xr=g}}function Sd(e,r){let a=r.reactions;if(a!==null){var s=yf.call(a,e);if(s!==-1){var l=a.length-1;l===0?a=r.reactions=null:(a[s]=a[l],a.pop())}}a===null&&(r.f&At)!==0&&(Nt===null||!Nt.includes(r))&&(Pt(r,Bn),(r.f&dn)!==0&&(r.f^=dn,r.f&=~sr),Vo(r),Ea(r,0))}function Ea(e,r){var a=e.deps;if(a!==null)for(var s=r;s<a.length;s++)Sd(e,a[s])}function Di(e){var r=e.f;if((r&Pn)===0){Pt(e,Rt);var a=Fe,s=nr;if(Fe=e,nr=!0,ce){var l=Ci;vu(e.component_function);var f=Ti;ga(e.dev_stack??Ti)}try{(r&(Nn|wf))!==0?kd(e):bl(e),_l(e);var h=Wo(e);e.teardown=typeof h=="function"?h:null,e.wv=kl;var y;ce&&qf&&(e.f&Yt)!==0&&e.deps}finally{nr=s,Fe=a,ce&&(vu(l),ga(f))}}}async function Xn(){await Promise.resolve(),Jf()}function p(e){var r=e.f,a=(r&At)!==0;if(Be!==null&&!xn){var s=Fe!==null&&(Fe.f&Pn)!==0;if(!s&&!Mn?.includes(e)){var l=Be.deps;if((Be.f&Go)!==0)e.rv<ki&&(e.rv=ki,Nt===null&&l!==null&&l[Qt]===e?Qt++:Nt===null?Nt=[e]:Nt.includes(e)||Nt.push(e));else{(Be.deps??=[]).push(e);var f=e.reactions;f===null?e.reactions=[Be]:f.includes(Be)||f.push(Be)}}}if(ce&&cd.delete(e),Or){if(tr.has(e))return tr.get(e);if(a){var h=e,y=h.v;return((h.f&Rt)===0&&h.reactions!==null||Ol(h))&&(y=ms(h)),tr.set(h,y),y}}else a&&(!an?.has(e)||ze?.is_fork&&!Ai())&&(h=e,Pi(h)&&cl(h),nr&&Ai()&&(h.f&dn)===0&&Sl(h));if(an?.has(e))return an.get(e);if((e.f&er)!==0)throw e.v;return e.v}function Sl(e){if(e.deps!==null){e.f^=dn;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&At)!==0&&(r.f&dn)===0&&Sl(r)}}function Ol(e){if(e.v===It)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(tr.has(r)||(r.f&At)!==0&&Ol(r))return!0;return!1}function ti(e){var r=xn;try{return xn=!0,e()}finally{xn=r}}const Od=-7169;function Pt(e,r){e.f=e.f&Od|r}function Cd(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ln in e)Yo(e);else if(!Array.isArray(e))for(let r in e){const a=e[r];typeof a=="object"&&a&&Ln in a&&Yo(a)}}}function Yo(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Yo(e[s],r)}catch{}const a=ds(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=Uu(a);for(let l in s){const f=s[l].get;if(f)try{f.call(e)}catch{}}}}}const Rd=["touchstart","touchmove"];function Pd(e){return Rd.includes(e)}const Cl=new Set,qo=new Set;function Ld(e,r,a,s={}){function l(f){if(s.capture||gi.call(r,f),!f.cancelBubble)return ja(()=>a?.call(this,f))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ei(()=>{r.addEventListener(e,l,s)}):r.addEventListener(e,l,s),l}function Rn(e,r,a,s,l){var f={capture:s,passive:l},h=Ld(e,r,a,f);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&_s(()=>{r.removeEventListener(e,h,f)})}function ni(e){for(var r=0;r<e.length;r++)Cl.add(e[r]);for(var a of qo)a(e)}let wu=null;function gi(e){var r=this,a=r.ownerDocument,s=e.type,l=e.composedPath?.()||[],f=l[0]||e.target;wu=e;var h=0,y=wu===e&&e.__root;if(y){var g=l.indexOf(y);if(g!==-1&&(r===document||r===window)){e.__root=r;return}var w=l.indexOf(r);if(w===-1)return;g<=w&&(h=g)}if(f=l[h]||e.target,f!==r){or(e,"currentTarget",{configurable:!0,get(){return f||a}});var E=Be,D=Fe;Ut(null),fn(null);try{for(var b,T=[];f!==null;){var R=f.assignedSlot||f.parentNode||f.host||null;try{var M=f["__"+s];M!=null&&(!f.disabled||e.target===f)&&M.call(f,e)}catch(N){b?T.push(N):b=N}if(e.cancelBubble||R===r||R===null)break;f=R}if(b){for(let N of T)queueMicrotask(()=>{throw N});throw b}}finally{e.__root=r,delete e.currentTarget,Ut(E),fn(D)}}}function Md(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function Zo(e,r){var a=Fe;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=r)}function Pe(e,r){var a=(r&Uf)!==0,s=(r&Hf)!==0,l,f=!e.startsWith("<!>");return()=>{l===void 0&&(l=Md(f?e:"<!>"+e),a||(l=ba(l)));var h=s||gs?document.importNode(l,!0):l.cloneNode(!0);if(a){var y=ba(h),g=h.lastChild;Zo(y,g)}else Zo(h,h);return h}}function rr(){var e=document.createDocumentFragment(),r=document.createComment(""),a=ur();return e.append(r,a),Zo(r,a),e}function Te(e,r){e!==null&&e.before(r)}function $n(e,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Nd(e,r){return Kd(e,r)}const Fr=new Map;function Kd(e,{target:r,anchor:a,props:s={},events:l,context:f,intro:h=!0}){gd();var y=new Set,g=D=>{for(var b=0;b<D.length;b++){var T=D[b];if(!y.has(T)){y.add(T);var R=Pd(T);r.addEventListener(T,gi,{passive:R});var M=Fr.get(T);M===void 0?(document.addEventListener(T,gi,{passive:R}),Fr.set(T,1)):Fr.set(T,M+1)}}};g(fs(Cl)),qo.add(g);var w=void 0,E=Td(()=>{var D=a??r.appendChild(ur());return rd(D,{pending:()=>{}},b=>{if(f){Ir({});var T=Ht;T.c=f}l&&(s.$$events=l),w=e(b,s)||{},f&&Sr()}),()=>{for(var b of y){r.removeEventListener(b,gi);var T=Fr.get(b);--T===0?(document.removeEventListener(b,gi),Fr.delete(b)):Fr.set(b,T)}qo.delete(g),D!==a&&D.parentNode?.removeChild(D)}});return Bd.set(w,E),w}let Bd=new WeakMap;class Fd{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,a=!0){this.anchor=r,this.#u=a}#a=()=>{var r=ze;if(this.#e.has(r)){var a=this.#e.get(r),s=this.#t.get(a);if(s)Es(s),this.#n.delete(a);else{var l=this.#r.get(a);l&&(this.#t.set(a,l.effect),this.#r.delete(a),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[f,h]of this.#e){if(this.#e.delete(f),f===r)break;const y=this.#r.get(h);y&&(Vt(y.effect),this.#r.delete(h))}for(const[f,h]of this.#t){if(f===a||this.#n.has(f))continue;const y=()=>{if(Array.from(this.#e.values()).includes(f)){var w=document.createDocumentFragment();Tl(h,w),w.append(ur()),this.#r.set(f,{effect:h,fragment:w})}else Vt(h);this.#n.delete(f),this.#t.delete(f)};this.#u||!s?(this.#n.add(f),Gr(h,y,!1)):y()}}};#i=r=>{this.#e.delete(r);const a=Array.from(this.#e.values());for(const[s,l]of this.#r)a.includes(s)||(Vt(l.effect),this.#r.delete(s))};ensure(r,a){var s=ze,l=ml();if(a&&!this.#t.has(r)&&!this.#r.has(r))if(l){var f=document.createDocumentFragment(),h=ur();f.append(h),this.#r.set(r,{effect:rn(()=>a(h)),fragment:f})}else this.#t.set(r,rn(()=>a(this.anchor)));if(this.#e.set(s,r),l){for(const[y,g]of this.#t)y===r?s.skipped_effects.delete(g):s.skipped_effects.add(g);for(const[y,g]of this.#r)y===r?s.skipped_effects.delete(g.effect):s.skipped_effects.add(g.effect);s.oncommit(this.#a),s.ondiscard(this.#i)}else this.#a()}}function ut(e,r,a=!1){var s=new Fd(e),l=a?Vr:0;function f(h,y){s.ensure(h,y)}bs(()=>{var h=!1;r((y,g=!0)=>{h=!0,f(g,y)}),h||f(!1,null)},l)}function Qo(e,r,a){gl(()=>{var s=ti(()=>r(e,a?.())||{});if(a&&s?.update){var l=!1,f={};za(()=>{var h=a();Cd(h),l&&Ju(f,h)&&(f=h,s.update(h))}),l=!0}if(s?.destroy)return()=>s.destroy()})}function Rl(e){var r,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(r=0;r<l;r++)e[r]&&(a=Rl(e[r]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function jd(){for(var e,r,a=0,s="",l=arguments.length;a<l;a++)(e=arguments[a])&&(r=Rl(e))&&(s&&(s+=" "),s+=r);return s}function Pl(e){return typeof e=="object"?jd(e):e??""}function zd(e,r,a){var s=e==null?"":""+e;return r&&(s=s?s+" "+r:r),s===""?null:s}function Gd(e,r){return e==null?null:String(e)}function Ei(e,r,a,s,l,f){var h=e.__className;if(h!==a||h===void 0){var y=zd(a,s);y==null?e.removeAttribute("class"):e.className=y,e.__className=a}return f}function ir(e,r,a,s){var l=e.__style;if(l!==r){var f=Gd(r);f==null?e.removeAttribute("style"):e.style.cssText=f,e.__style=r}return s}const Ud=Symbol("is custom element"),Hd=Symbol("is html");function Vd(e,r){var a=xs(e);a.value===(a.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Ll(e,r){var a=xs(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function yt(e,r,a,s){var l=xs(e);l[r]!==(l[r]=a)&&(r==="loading"&&(e[Tf]=a),a==null?e.removeAttribute(r):typeof a!="string"&&Wd(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function xs(e){return e.__attributes??={[Ud]:e.nodeName.includes("-"),[Hd]:e.namespaceURI===Wf}}var Eu=new Map;function Wd(e){var r=e.getAttribute("is")||e.nodeName,a=Eu.get(r);if(a)return a;Eu.set(r,a=[]);for(var s,l=e,f=Element.prototype;f!==l;){s=Uu(l);for(var h in s)s[h].set&&a.push(h);l=ds(l)}return a}function Ts(e,r,a=r){var s=new WeakSet;wd(e,"input",async l=>{ce&&e.type==="checkbox"&&hu();var f=l?e.defaultValue:e.value;if(f=No(e)?Ko(f):f,a(f),ze!==null&&s.add(ze),await Xn(),f!==(f=r())){var h=e.selectionStart,y=e.selectionEnd,g=e.value.length;if(e.value=f??"",y!==null){var w=e.value.length;h===y&&y===g&&w>g?(e.selectionStart=w,e.selectionEnd=w):(e.selectionStart=h,e.selectionEnd=Math.min(y,w))}}}),ti(r)==null&&e.value&&(a(No(e)?Ko(e.value):e.value),ze!==null&&s.add(ze)),za(()=>{ce&&e.type==="checkbox"&&hu();var l=r();if(e===document.activeElement){var f=fa??ze;if(s.has(f))return}No(e)&&l===Ko(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function No(e){var r=e.type;return r==="number"||r==="range"}function Ko(e){return e===""?null:+e}function xu(e,r){return e===r||e?.[Ln]===r}function Tn(e={},r,a,s){return gl(()=>{var l,f;return za(()=>{l=f,f=[],ti(()=>{e!==a(...f)&&(r(e,...f),l&&xu(a(...l),e)&&r(null,...l))})}),()=>{ei(()=>{f&&xu(a(...f),e)&&r(null,...f)})}}),e}function Ml(e,r,a){if(e==null)return r(void 0),ma;const s=ti(()=>e.subscribe(r,a));return s.unsubscribe?()=>s.unsubscribe():s}function Yd(e){let r;return Ml(e,a=>r=a)(),r}let ua=!1,Xo=Symbol();function xa(e,r,a){const s=a[r]??={store:null,source:fl(void 0),unsubscribe:ma};if(ce&&(s.source.label=r),s.store!==e&&!(Xo in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=ma;else{var l=!0;s.unsubscribe=Ml(e,f=>{l?s.source.v=f:I(s.source,f)}),l=!1}return e&&Xo in a?Yd(e):p(s.source)}function Ta(e,r,a){let s=a[r];return s&&s.store!==e&&(s.unsubscribe(),s.unsubscribe=ma),e}function As(){const e={};function r(){_s(()=>{for(var a in e)e[a].unsubscribe();or(e,Xo,{enumerable:!1,value:!0})})}return[e,r]}function qd(e){var r=ua;try{return ua=!1,[e(),ua]}finally{ua=r}}function Cn(e,r,a,s){var l=(a&zf)!==0,f=(a&Gf)!==0,h=s,y=!0,g=()=>(y&&(y=!1,h=f?ti(s):s),h),w;if(l){var E=Ln in e||xf in e;w=wr(e,r)?.set??(E&&r in e?H=>e[r]=H:void 0)}var D,b=!1;l?[D,b]=qd(()=>e[r]):D=e[r],D===void 0&&s!==void 0&&(D=g(),w&&(Cf(r),w(D)));var T;if(T=()=>{var H=e[r];return H===void 0?g():(y=!0,H)},(a&jf)===0)return T;if(w){var R=e.$$legacy;return(function(H,Z){return arguments.length>0?((!Z||R||b)&&w(Z?T():H),H):T()})}var M=!1,N=((a&Ff)!==0?Fa:ll)(()=>(M=!1,T()));ce&&(N.label=r),l&&p(N);var P=Fe;return(function(H,Z){if(arguments.length>0){const W=Z?p(N):l?Xt(H):H;return I(N,W),M=!0,h!==void 0&&(h=W),H}return Or&&M||(P.f&Pn)!==0?N.v:p(N)})}if(ce){let e=function(r){if(!(r in globalThis)){let a;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(a!==void 0)return a;Rf(r)},set:s=>{a=s}})}};var Dp=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const Zd="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Zd);var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ha={exports:{}},$d=ha.exports,Tu;function Jd(){return Tu||(Tu=1,(function(e,r){(function(a,s){e.exports=s()})($d,(function(){var a=function(t,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u])},a(t,n)};function s(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var l=function(){return l=Object.assign||function(n){for(var i,o=1,u=arguments.length;o<u;o++){i=arguments[o];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(n[c]=i[c])}return n},l.apply(this,arguments)};function f(t,n,i){for(var o=0,u=n.length,c;o<u;o++)(c||!(o in n))&&(c||(c=Array.prototype.slice.call(n,0,o)),c[o]=n[o]);return t.concat(c||Array.prototype.slice.call(n))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Qd,y=Object.keys,g=Array.isArray;typeof Promise<"u"&&!h.Promise&&(h.Promise=Promise);function w(t,n){return typeof n!="object"||y(n).forEach(function(i){t[i]=n[i]}),t}var E=Object.getPrototypeOf,D={}.hasOwnProperty;function b(t,n){return D.call(t,n)}function T(t,n){typeof n=="function"&&(n=n(E(t))),(typeof Reflect>"u"?y:Reflect.ownKeys)(n).forEach(function(i){M(t,i,n[i])})}var R=Object.defineProperty;function M(t,n,i,o){R(t,n,w(i&&b(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function N(t){return{from:function(n){return t.prototype=Object.create(n.prototype),M(t.prototype,"constructor",t),{extend:T.bind(null,t.prototype)}}}}var P=Object.getOwnPropertyDescriptor;function H(t,n){var i=P(t,n),o;return i||(o=E(t))&&H(o,n)}var Z=[].slice;function W(t,n,i){return Z.call(t,n,i)}function te(t,n){return n(t)}function ae(t){if(!t)throw new Error("Assertion Failed")}function ve(t){h.setImmediate?setImmediate(t):setTimeout(t,0)}function me(t,n){return t.reduce(function(i,o,u){var c=n(o,u);return c&&(i[c[0]]=c[1]),i},{})}function de(t,n){if(typeof n=="string"&&b(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],o=0,u=n.length;o<u;++o){var c=de(t,n[o]);i.push(c)}return i}var d=n.indexOf(".");if(d!==-1){var v=t[n.substr(0,d)];return v==null?void 0:de(v,n.substr(d+1))}}function xe(t,n,i){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){ae(typeof i!="string"&&"length"in i);for(var o=0,u=n.length;o<u;++o)xe(t,n[o],i[o])}else{var c=n.indexOf(".");if(c!==-1){var d=n.substr(0,c),v=n.substr(c+1);if(v==="")i===void 0?g(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=i;else{var m=t[d];(!m||!b(t,d))&&(m=t[d]={}),xe(m,v,i)}}else i===void 0?g(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function we(t,n){typeof n=="string"?xe(t,n,void 0):"length"in n&&[].map.call(n,function(i){xe(t,i,void 0)})}function ke(t){var n={};for(var i in t)b(t,i)&&(n[i]=t[i]);return n}var it=[].concat;function He(t){return it.apply([],t)}var lt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(He([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return h[t]}),vt=new Set(lt.map(function(t){return h[t]}));function je(t){var n={};for(var i in t)if(b(t,i)){var o=t[i];n[i]=!o||typeof o!="object"||vt.has(o.constructor)?o:je(o)}return n}function Bt(t){for(var n in t)if(b(t,n))return!1;return!0}var We=null;function Qe(t){We=new WeakMap;var n=ct(t);return We=null,n}function ct(t){if(!t||typeof t!="object")return t;var n=We.get(t);if(n)return n;if(g(t)){n=[],We.set(t,n);for(var i=0,o=t.length;i<o;++i)n.push(ct(t[i]))}else if(vt.has(t.constructor))n=t;else{var u=E(t);n=u===Object.prototype?{}:Object.create(u),We.set(t,n);for(var c in t)b(t,c)&&(n[c]=ct(t[c]))}return n}var Ft={}.toString;function sn(t){return Ft.call(t).slice(8,-1)}var _t=typeof Symbol<"u"?Symbol.iterator:"@@iterator",et=typeof _t=="symbol"?function(t){var n;return t!=null&&(n=t[_t])&&n.apply(t)}:function(){return null};function Ye(t,n){var i=t.indexOf(n);return i>=0&&t.splice(i,1),i>=0}var bt={};function Lt(t){var n,i,o,u;if(arguments.length===1){if(g(t))return t.slice();if(this===bt&&typeof t=="string")return[t];if(u=et(t)){for(i=[];o=u.next(),!o.done;)i.push(o.value);return i}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(i=new Array(n);n--;)i[n]=t[n];return i}return[t]}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var An=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},cr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ft=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],wt=cr.concat(ft),kn={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Y(t,n){this.name=t,this.message=n}N(Y).from(Error).extend({toString:function(){return this.name+": "+this.message}});function V(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,o,u){return u.indexOf(i)===o}).join(`
`)}function ne(t,n,i,o){this.failures=n,this.failedKeys=o,this.successCount=i,this.message=V(t,n)}N(ne).from(Y);function ge(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=V(t,this.failures)}N(ge).from(Y);var _e=wt.reduce(function(t,n){return t[n]=n+"Error",t},{}),Ve=Y,$=wt.reduce(function(t,n){var i=n+"Error";function o(u,c){this.name=i,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=kn[n]||i,this.inner=null)}return N(o).from(Ve),t[n]=o,t},{});$.Syntax=SyntaxError,$.Type=TypeError,$.Range=RangeError;var qe=ft.reduce(function(t,n){return t[n+"Error"]=$[n],t},{});function se(t,n){if(!t||t instanceof Y||t instanceof TypeError||t instanceof SyntaxError||!t.name||!qe[t.name])return t;var i=new qe[t.name](n||t.message,t);return"stack"in t&&M(i,"stack",{get:function(){return this.inner.stack}}),i}var Ce=wt.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=$[n]),t},{});Ce.ModifyError=ne,Ce.DexieError=Y,Ce.BulkError=ge;function Q(){}function Le(t){return t}function Ze(t,n){return t==null||t===Le?n:function(i){return n(t(i))}}function F(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function B(t,n){return t===Q?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?F(o,this.onsuccess):o),u&&(this.onerror=this.onerror?F(u,this.onerror):u),c!==void 0?c:i}}function L(t,n){return t===Q?n:function(){t.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?F(i,this.onsuccess):i),o&&(this.onerror=this.onerror?F(o,this.onerror):o)}}function ue(t,n){return t===Q?n:function(i){var o=t.apply(this,arguments);w(i,o);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?F(u,this.onsuccess):u),c&&(this.onerror=this.onerror?F(c,this.onerror):c),o===void 0?d===void 0?void 0:d:w(o,d)}}function oe(t,n){return t===Q?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Ge(t,n){return t===Q?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return i.then(function(){return n.apply(o,c)})}return n.apply(this,arguments)}}var Ee=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function le(t,n){Ee=t}var Se={},Xe=100,tt=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,E(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,E(n),t]})(),Me=tt[0],Ue=tt[1],Cr=tt[2],dt=Ue&&Ue.then,qt=Me&&Me.constructor,ri=!!Cr;function hn(){queueMicrotask(nc)}var Mt=function(t,n){ai.push([t,n]),jn&&(hn(),jn=!1)},ii=!0,jn=!0,Dn=[],Rr=[],Xa=Le,zn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Q,pgp:!1,env:{},finalize:Q},fe=zn,ai=[],fr=0,Ki=[];function ee(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=fe;if(typeof t!="function"){if(t!==Se)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ja(this,this._value);return}this._state=null,this._value=null,++n.ref,Ps(this,t)}var $a={get:function(){var t=fe,n=zi;function i(o,u){var c=this,d=!t.global&&(t!==fe||n!==zi),v=d&&!Un(),m=new ee(function(_,k){eo(c,new Rs(Ns(o,t,d,v),Ns(u,t,d,v),_,k,t))});return this._consoleTask&&(m._consoleTask=this._consoleTask),m}return i.prototype=Se,i},set:function(t){M(this,"then",t&&t.prototype===Se?$a:{get:function(){return t},set:$a.set})}};T(ee.prototype,{then:$a,_then:function(t,n){eo(this,new Rs(null,null,t,n,fe))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],i=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?i(o):Bi(o)}):this.then(null,function(o){return o&&o.name===n?i(o):Bi(o)})},finally:function(t){return this.then(function(n){return ee.resolve(t()).then(function(){return n})},function(n){return ee.resolve(t()).then(function(){return Bi(n)})})},timeout:function(t,n){var i=this;return t<1/0?new ee(function(o,u){var c=setTimeout(function(){return u(new $.Timeout(n))},t);i.then(o,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(ee.prototype,Symbol.toStringTag,"Dexie.Promise"),zn.env=Ms();function Rs(t,n,i,o,u){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=o,this.psd=u}T(ee,{all:function(){var t=Lt.apply(null,arguments).map(Gi);return new ee(function(n,i){t.length===0&&n([]);var o=t.length;t.forEach(function(u,c){return ee.resolve(u).then(function(d){t[c]=d,--o||n(t)},i)})})},resolve:function(t){if(t instanceof ee)return t;if(t&&typeof t.then=="function")return new ee(function(i,o){t.then(i,o)});var n=new ee(Se,!0,t);return n},reject:Bi,race:function(){var t=Lt.apply(null,arguments).map(Gi);return new ee(function(n,i){t.map(function(o){return ee.resolve(o).then(n,i)})})},PSD:{get:function(){return fe},set:function(t){return fe=t}},totalEchoes:{get:function(){return zi}},newPSD:Gn,usePSD:dr,scheduler:{get:function(){return Mt},set:function(t){Mt=t}},rejectionMapper:{get:function(){return Xa},set:function(t){Xa=t}},follow:function(t,n){return new ee(function(i,o){return Gn(function(u,c){var d=fe;d.unhandleds=[],d.onunhandled=c,d.finalize=F(function(){var v=this;rc(function(){v.unhandleds.length===0?u():c(v.unhandleds[0])})},d.finalize),t()},n,i,o)})}}),qt&&(qt.allSettled&&M(ee,"allSettled",function(){var t=Lt.apply(null,arguments).map(Gi);return new ee(function(n){t.length===0&&n([]);var i=t.length,o=new Array(i);t.forEach(function(u,c){return ee.resolve(u).then(function(d){return o[c]={status:"fulfilled",value:d}},function(d){return o[c]={status:"rejected",reason:d}}).then(function(){return--i||n(o)})})})}),qt.any&&typeof AggregateError<"u"&&M(ee,"any",function(){var t=Lt.apply(null,arguments).map(Gi);return new ee(function(n,i){t.length===0&&i(new AggregateError([]));var o=t.length,u=new Array(o);t.forEach(function(c,d){return ee.resolve(c).then(function(v){return n(v)},function(v){u[d]=v,--o||i(new AggregateError(u))})})})}),qt.withResolvers&&(ee.withResolvers=qt.withResolvers));function Ps(t,n){try{n(function(i){if(t._state===null){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&Pr();i&&typeof i.then=="function"?Ps(t,function(u,c){i instanceof ee?i._then(u,c):i.then(u,c)}):(t._state=!0,t._value=i,Ls(t)),o&&Lr()}},Ja.bind(null,t))}catch(i){Ja(t,i)}}function Ja(t,n){if(Rr.push(n),t._state===null){var i=t._lib&&Pr();n=Xa(n),t._state=!1,t._value=n,ic(t),Ls(t),i&&Lr()}}function Ls(t){var n=t._listeners;t._listeners=[];for(var i=0,o=n.length;i<o;++i)eo(t,n[i]);var u=t._PSD;--u.ref||u.finalize(),fr===0&&(++fr,Mt(function(){--fr===0&&to()},[]))}function eo(t,n){if(t._state===null){t._listeners.push(n);return}var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++fr,Mt(tc,[i,t,n])}function tc(t,n,i){try{var o,u=n._value;!n._state&&Rr.length&&(Rr=[]),o=Ee&&n._consoleTask?n._consoleTask.run(function(){return t(u)}):t(u),!n._state&&Rr.indexOf(u)===-1&&ac(n),i.resolve(o)}catch(c){i.reject(c)}finally{--fr===0&&to(),--i.psd.ref||i.psd.finalize()}}function nc(){dr(zn,function(){Pr()&&Lr()})}function Pr(){var t=ii;return ii=!1,jn=!1,t}function Lr(){var t,n,i;do for(;ai.length>0;)for(t=ai,ai=[],i=t.length,n=0;n<i;++n){var o=t[n];o[0].apply(null,o[1])}while(ai.length>0);ii=!0,jn=!0}function to(){var t=Dn;Dn=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=Ki.slice(0),i=n.length;i;)n[--i]()}function rc(t){function n(){t(),Ki.splice(Ki.indexOf(n),1)}Ki.push(n),++fr,Mt(function(){--fr===0&&to()},[])}function ic(t){Dn.some(function(n){return n._value===t._value})||Dn.push(t)}function ac(t){for(var n=Dn.length;n;)if(Dn[--n]._value===t._value){Dn.splice(n,1);return}}function Bi(t){return new ee(Se,!1,t)}function $e(t,n){var i=fe;return function(){var o=Pr(),u=fe;try{return Hn(i,!0),t.apply(this,arguments)}catch(c){n&&n(c)}finally{Hn(u,!1),o&&Lr()}}}var mt={awaits:0,echoes:0,id:0},oc=0,Fi=[],ji=0,zi=0,sc=0;function Gn(t,n,i,o){var u=fe,c=Object.create(u);c.parent=u,c.ref=0,c.global=!1,c.id=++sc,zn.env,c.env=ri?{Promise:ee,PromiseProp:{value:ee,configurable:!0,writable:!0},all:ee.all,race:ee.race,allSettled:ee.allSettled,any:ee.any,resolve:ee.resolve,reject:ee.reject}:{},n&&w(c,n),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=dr(c,t,i,o);return c.ref===0&&c.finalize(),d}function Mr(){return mt.id||(mt.id=++oc),++mt.awaits,mt.echoes+=Xe,mt.id}function Un(){return mt.awaits?(--mt.awaits===0&&(mt.id=0),mt.echoes=mt.awaits*Xe,!0):!1}(""+dt).indexOf("[native code]")===-1&&(Mr=Un=Q);function Gi(t){return mt.echoes&&t&&t.constructor===qt?(Mr(),t.then(function(n){return Un(),n},function(n){return Un(),at(n)})):t}function uc(t){++zi,(!mt.echoes||--mt.echoes===0)&&(mt.echoes=mt.awaits=mt.id=0),Fi.push(fe),Hn(t,!0)}function lc(){var t=Fi[Fi.length-1];Fi.pop(),Hn(t,!1)}function Hn(t,n){var i=fe;if((n?mt.echoes&&(!ji++||t!==fe):ji&&(!--ji||t!==fe))&&queueMicrotask(n?uc.bind(null,t):lc),t!==fe&&(fe=t,i===zn&&(zn.env=Ms()),ri)){var o=zn.env.Promise,u=t.env;(i.global||t.global)&&(Object.defineProperty(h,"Promise",u.PromiseProp),o.all=u.all,o.race=u.race,o.resolve=u.resolve,o.reject=u.reject,u.allSettled&&(o.allSettled=u.allSettled),u.any&&(o.any=u.any))}}function Ms(){var t=h.Promise;return ri?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function dr(t,n,i,o,u){var c=fe;try{return Hn(t,!0),n(i,o,u)}finally{Hn(c,!1)}}function Ns(t,n,i,o){return typeof t!="function"?t:function(){var u=fe;i&&Mr(),Hn(n,!0);try{return t.apply(this,arguments)}finally{Hn(u,!1),o&&queueMicrotask(Un)}}}function no(t){Promise===qt&&mt.echoes===0?ji===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var at=ee.reject;function ro(t,n,i,o){if(!t.idbdb||!t._state.openComplete&&!fe.letThrough&&!t._vip){if(t._state.openComplete)return at(new $.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return at(new $.DatabaseClosed);t.open().catch(Q)}return t._state.dbReadyPromise.then(function(){return ro(t,n,i,o)})}else{var u=t._createTransaction(n,i,t._dbSchema);try{u.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===_e.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return ro(t,n,i,o)})):at(c)}return u._promise(n,function(c,d){return Gn(function(){return fe.trans=u,o(c,d,u)})}).then(function(c){if(n==="readwrite")try{u.idbtrans.commit()}catch{}return n==="readonly"?c:u._completion.then(function(){return c})})}}var Ks="4.2.1",hr="",io=-1/0,In="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bs="String expected.",Nr=[],Ui="__dbnames",ao="readonly",oo="readwrite";function vr(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var Fs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Hi(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=Qe(n),delete n[t]),n}:function(n){return n}}function js(){throw $.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ne(t,n){try{var i=zs(t),o=zs(n);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return fc(Gs(t),Gs(n));case"Array":return cc(t,n)}}catch{}return NaN}function cc(t,n){for(var i=t.length,o=n.length,u=i<o?i:o,c=0;c<u;++c){var d=Ne(t[c],n[c]);if(d!==0)return d}return i===o?0:i<o?-1:1}function fc(t,n){for(var i=t.length,o=n.length,u=i<o?i:o,c=0;c<u;++c)if(t[c]!==n[c])return t[c]<n[c]?-1:1;return i===o?0:i<o?-1:1}function zs(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var i=sn(t);return i==="ArrayBuffer"?"binary":i}function Gs(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Vi(t,n,i){var o=t.schema.yProps;return o?(n&&i.numFailures>0&&(n=n.filter(function(u,c){return!i.failures[c]})),Promise.all(o.map(function(u){var c=u.updatesTable;return n?t.db.table(c).where("k").anyOf(n).delete():t.db.table(c).clear()})).then(function(){return i})):i}var oi=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var i,o=this["@@propmod"];if(o.add!==void 0){var u=o.add;if(g(u))return f(f([],g(n)?n:[],!0),u).sort();if(typeof u=="number")return(Number(n)||0)+u;if(typeof u=="bigint")try{return BigInt(n)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(o.remove!==void 0){var c=o.remove;if(g(c))return g(n)?n.filter(function(v){return!c.includes(v)}).sort():[];if(typeof c=="number")return Number(n)-c;if(typeof c=="bigint")try{return BigInt(n)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}var d=(i=o.replacePrefix)===null||i===void 0?void 0:i[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function Us(t,n){for(var i=y(n),o=i.length,u=!1,c=0;c<o;++c){var d=i[c],v=n[d],m=de(t,d);v instanceof oi?(xe(t,d,v.execute(m)),u=!0):m!==v&&(xe(t,d,v),u=!0)}return u}var Hs=(function(){function t(){}return t.prototype._trans=function(n,i,o){var u=this._tx||fe.trans,c=this.name,d=Ee&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function v(k,x,C){if(!C.schema[c])throw new $.NotFound("Table "+c+" not part of transaction");return i(C.idbtrans,C)}var m=Pr();try{var _=u&&u.db._novip===this.db._novip?u===fe.trans?u._promise(n,v,o):Gn(function(){return u._promise(n,v,o)},{trans:u,transless:fe.transless||fe}):ro(this.db,n,[this.name],v);return d&&(_._consoleTask=d,_=_.catch(function(k){return console.trace(k),at(k)})),_}finally{m&&Lr()}},t.prototype.get=function(n,i){var o=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?at(new $.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return o.core.get({trans:u,key:n}).then(function(c){return o.hook.reading.fire(c)})}).then(i)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(g(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=y(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&i.every(function(C){return k.keyPath.indexOf(C)>=0})){for(var x=0;x<i.length;++x)if(i.indexOf(k.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(k,x){return k.keyPath.length-x.keyPath.length})[0];if(o&&this.db._maxKey!==hr){var u=o.keyPath.slice(0,i.length);return this.where(u).equals(u.map(function(k){return n[k]}))}!o&&Ee&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var c=this.schema.idxByName;function d(k,x){return Ne(k,x)===0}var v=i.reduce(function(k,x){var C=k[0],q=k[1],A=c[x],S=n[x];return[C||A,C||!A?vr(q,A&&A.multi?function(O){var K=de(O,x);return g(K)&&K.some(function(z){return d(S,z)})}:function(O){return d(S,de(O,x))}):q]},[null,null]),m=v[0],_=v[1];return m?this.where(m.name).equals(n[m.keyPath]).filter(_):o?this.filter(_):this.where(i).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,g(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var i=this,o=i.db,u=i.name;this.schema.mappedClass=n,n.prototype instanceof js&&(n=(function(m){s(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return Object.defineProperty(_.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),_.prototype.table=function(){return u},_})(n));for(var c=new Set,d=n.prototype;d;d=E(d))Object.getOwnPropertyNames(d).forEach(function(m){return c.add(m)});var v=function(m){if(!m)return m;var _=Object.create(n.prototype);for(var k in m)if(!c.has(k))try{_[k]=m[k]}catch{}return _};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),n},t.prototype.defineClass=function(){function n(i){w(this,i)}return this.mapToClass(n)},t.prototype.add=function(n,i){var o=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,v=n;return d&&c&&(v=Hi(d)(n)),this._trans("readwrite",function(m){return o.core.mutate({trans:m,type:"add",keys:i!=null?[i]:null,values:[v]})}).then(function(m){return m.numFailures?ee.reject(m.failures[0]):m.lastResult}).then(function(m){if(d)try{xe(n,d,m)}catch{}return m})},t.prototype.upsert=function(n,i){var o=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return o.core.get({trans:c,key:n}).then(function(d){var v=d??{};return Us(v,i),u&&xe(v,u,n),o.core.mutate({trans:c,type:"put",values:[v],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[i]}}).then(function(m){return m.numFailures?ee.reject(m.failures[0]):!!d})})})},t.prototype.update=function(n,i){if(typeof n=="object"&&!g(n)){var o=de(n,this.schema.primKey.keyPath);return o===void 0?at(new $.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(n).modify(i)},t.prototype.put=function(n,i){var o=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,v=n;return d&&c&&(v=Hi(d)(n)),this._trans("readwrite",function(m){return o.core.mutate({trans:m,type:"put",values:[v],keys:i!=null?[i]:null})}).then(function(m){return m.numFailures?ee.reject(m.failures[0]):m.lastResult}).then(function(m){if(d)try{xe(n,d,m)}catch{}return m})},t.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(u){return Vi(i,[n],u)}).then(function(u){return u.numFailures?ee.reject(u.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:Fs}).then(function(o){return Vi(n,null,o)})}).then(function(i){return i.numFailures?ee.reject(i.failures[0]):void 0})},t.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:n,trans:o}).then(function(u){return u.map(function(c){return i.hook.reading.fire(c)})})})},t.prototype.bulkAdd=function(n,i,o){var u=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var m=u.schema.primKey,_=m.auto,k=m.keyPath;if(k&&c)throw new $.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,C=k&&_?n.map(Hi(k)):n;return u.core.mutate({trans:v,type:"add",keys:c,values:C,wantResults:d}).then(function(q){var A=q.numFailures,S=q.results,O=q.lastResult,K=q.failures,z=d?S:O;if(A===0)return z;throw new ge("".concat(u.name,".bulkAdd(): ").concat(A," of ").concat(x," operations failed"),K)})})},t.prototype.bulkPut=function(n,i,o){var u=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var m=u.schema.primKey,_=m.auto,k=m.keyPath;if(k&&c)throw new $.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,C=k&&_?n.map(Hi(k)):n;return u.core.mutate({trans:v,type:"put",keys:c,values:C,wantResults:d}).then(function(q){var A=q.numFailures,S=q.results,O=q.lastResult,K=q.failures,z=d?S:O;if(A===0)return z;throw new ge("".concat(u.name,".bulkPut(): ").concat(A," of ").concat(x," operations failed"),K)})})},t.prototype.bulkUpdate=function(n){var i=this,o=this.core,u=n.map(function(v){return v.key}),c=n.map(function(v){return v.changes}),d=[];return this._trans("readwrite",function(v){return o.getMany({trans:v,keys:u,cache:"clone"}).then(function(m){var _=[],k=[];n.forEach(function(C,q){var A=C.key,S=C.changes,O=m[q];if(O){for(var K=0,z=Object.keys(S);K<z.length;K++){var G=z[K],U=S[G];if(G===i.schema.primKey.keyPath){if(Ne(U,A)!==0)throw new $.Constraint("Cannot update primary key in bulkUpdate()")}else xe(O,G,U)}d.push(q),_.push(A),k.push(O)}});var x=_.length;return o.mutate({trans:v,type:"put",keys:_,values:k,updates:{keys:u,changeSpecs:c}}).then(function(C){var q=C.numFailures,A=C.failures;if(q===0)return x;for(var S=0,O=Object.keys(A);S<O.length;S++){var K=O[S],z=d[Number(K)];if(z!=null){var G=A[K];delete A[K],A[z]=G}}throw new ge("".concat(i.name,".bulkUpdate(): ").concat(q," of ").concat(x," operations failed"),A)})})})},t.prototype.bulkDelete=function(n){var i=this,o=n.length;return this._trans("readwrite",function(u){return i.core.mutate({trans:u,type:"delete",keys:n}).then(function(c){return Vi(i,n,c)})}).then(function(u){var c=u.numFailures,d=u.lastResult,v=u.failures;if(c===0)return d;throw new ge("".concat(i.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),v)})},t})();function si(t){var n={},i=function(v,m){if(m){for(var _=arguments.length,k=new Array(_-1);--_;)k[_-1]=arguments[_];return n[v].subscribe.apply(null,k),t}else if(typeof v=="string")return n[v]};i.addEventType=c;for(var o=1,u=arguments.length;o<u;++o)c(arguments[o]);return i;function c(v,m,_){if(typeof v=="object")return d(v);m||(m=oe),_||(_=Q);var k={subscribers:[],fire:_,subscribe:function(x){k.subscribers.indexOf(x)===-1&&(k.subscribers.push(x),k.fire=m(k.fire,x))},unsubscribe:function(x){k.subscribers=k.subscribers.filter(function(C){return C!==x}),k.fire=k.subscribers.reduce(m,_)}};return n[v]=i[v]=k,k}function d(v){y(v).forEach(function(m){var _=v[m];if(g(_))c(m,v[m][0],v[m][1]);else if(_==="asap")var k=c(m,Le,function(){for(var C=arguments.length,q=new Array(C);C--;)q[C]=arguments[C];k.subscribers.forEach(function(A){ve(function(){A.apply(null,q)})})});else throw new $.InvalidArgument("Invalid event config")})}}function ui(t,n){return N(n).from({prototype:t}),n}function dc(t){return ui(Hs.prototype,function(i,o,u){this.db=t,this._tx=u,this.name=i,this.schema=o,this.hook=t._allTables[i]?t._allTables[i].hook:si(null,{creating:[B,Q],reading:[Ze,Le],updating:[ue,Q],deleting:[L,Q]})})}function Kr(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function so(t,n){t.filter=vr(t.filter,n)}function uo(t,n,i){var o=t.replayFilter;t.replayFilter=o?function(){return vr(o(),n())}:n,t.justLimit=i&&!o}function hc(t,n){t.isMatch=vr(t.isMatch,n)}function Wi(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new $.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function Vs(t,n,i){var o=Wi(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function Yi(t,n,i,o){var u=t.replayFilter?vr(t.filter,t.replayFilter()):t.filter;if(t.or){var c={},d=function(v,m,_){if(!u||u(m,_,function(C){return m.stop(C)},function(C){return m.fail(C)})){var k=m.primaryKey,x=""+k;x==="[object ArrayBuffer]"&&(x=""+new Uint8Array(k)),b(c,x)||(c[x]=!0,n(v,m,_))}};return Promise.all([t.or._iterate(d,i),Ws(Vs(t,o,i),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return Ws(Vs(t,o,i),vr(t.algorithm,u),n,!t.keysOnly&&t.valueMapper)}function Ws(t,n,i,o){var u=o?function(d,v,m){return i(o(d),v,m)}:i,c=$e(u);return t.then(function(d){if(d)return d.start(function(){var v=function(){return d.continue()};(!n||n(d,function(m){return v=m},function(m){d.stop(m),v=Q},function(m){d.fail(m),v=Q}))&&c(d.value,d,function(m){return v=m}),v()})})}var vc=(function(){function t(){}return t.prototype._read=function(n,i){var o=this._ctx;return o.error?o.table._trans(null,at.bind(null,o.error)):o.table._trans("readonly",n).then(i)},t.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,at.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=vr(i.algorithm,n)},t.prototype._iterate=function(n,i){return Yi(this._ctx,n,i,this._ctx.table.core)},t.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&w(o,n),i._ctx=o,i},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var i=this._ctx;return this._read(function(o){return Yi(i,n,o,i.table.core)})},t.prototype.count=function(n){var i=this;return this._read(function(o){var u=i._ctx,c=u.table.core;if(Kr(u,!0))return c.count({trans:o,query:{index:Wi(u,c.schema),range:u.range}}).then(function(v){return Math.min(v,u.limit)});var d=0;return Yi(u,function(){return++d,!1},o,c).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,i){var o=n.split(".").reverse(),u=o[0],c=o.length-1;function d(_,k){return k?d(_[o[k]],k-1):_[u]}var v=this._ctx.dir==="next"?1:-1;function m(_,k){var x=d(_,c),C=d(k,c);return Ne(x,C)*v}return this.toArray(function(_){return _.sort(m)}).then(i)},t.prototype.toArray=function(n){var i=this;return this._read(function(o){var u=i._ctx;if(u.dir==="next"&&Kr(u,!0)&&u.limit>0){var c=u.valueMapper,d=Wi(u,u.table.core.schema);return u.table.core.query({trans:o,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(m){var _=m.result;return c?_.map(c):_})}else{var v=[];return Yi(u,function(m){return v.push(m)},o,u.table.core).then(function(){return v})}},n)},t.prototype.offset=function(n){var i=this._ctx;return n<=0?this:(i.offset+=n,Kr(i)?uo(i,function(){var o=n;return function(u,c){return o===0?!0:o===1?(--o,!1):(c(function(){u.advance(o),o=0}),!1)}}):uo(i,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),uo(this._ctx,function(){var i=n;return function(o,u,c){return--i<=0&&u(c),i>=0}},!0),this},t.prototype.until=function(n,i){return so(this._ctx,function(o,u,c){return n(o.value)?(u(c),i):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return so(this._ctx,function(i){return n(i.value)}),hc(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,u){n(u.key,u)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,u){n(u.primaryKey,u)})},t.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(u,c){o.push(c.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&Kr(i,!0)&&i.limit>0)return this._read(function(u){var c=Wi(i,i.table.core.schema);return i.table.core.query({trans:u,values:!1,limit:i.limit,query:{index:c,range:i.range}})}).then(function(u){var c=u.result;return c}).then(n);i.keysOnly=!i.isMatch;var o=[];return this.each(function(u,c){o.push(c.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,i=n.index&&n.table.schema.idxByName[n.index];if(!i||!i.multi)return this;var o={};return so(this._ctx,function(u){var c=u.primaryKey.toString(),d=b(o,c);return o[c]=!0,!d}),this},t.prototype.modify=function(n){var i=this,o=this._ctx;return this._write(function(u){var c;typeof n=="function"?c=n:c=function(K){return Us(K,n)};var d=o.table.core,v=d.schema.primaryKey,m=v.outbound,_=v.extractKey,k=200,x=i.db._options.modifyChunkSize;x&&(typeof x=="object"?k=x[d.name]||x["*"]||200:k=x);var C=[],q=0,A=[],S=function(K,z){var G=z.failures,U=z.numFailures;q+=K-U;for(var j=0,X=y(G);j<X.length;j++){var re=X[j];C.push(G[re])}},O=n===Ys;return i.clone().primaryKeys().then(function(K){var z=Kr(o)&&o.limit===1/0&&(typeof n!="function"||O)&&{index:o.index,range:o.range},G=function(U){var j=Math.min(k,K.length-U),X=K.slice(U,U+j);return(O?Promise.resolve([]):d.getMany({trans:u,keys:X,cache:"immutable"})).then(function(re){var J=[],pe=[],Oe=m?[]:null,ie=O?X:[];if(!O)for(var De=0;De<j;++De){var be=re[De],Ke={value:Qe(be),primKey:K[U+De]};c.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?ie.push(K[U+De]):!m&&Ne(_(be),_(Ke.value))!==0?(ie.push(K[U+De]),J.push(Ke.value)):(pe.push(Ke.value),m&&Oe.push(K[U+De])))}return Promise.resolve(J.length>0&&d.mutate({trans:u,type:"add",values:J}).then(function(he){for(var nt in he.failures)ie.splice(parseInt(nt),1);S(J.length,he)})).then(function(){return(pe.length>0||z&&typeof n=="object")&&d.mutate({trans:u,type:"put",keys:Oe,values:pe,criteria:z,changeSpec:typeof n!="function"&&n,isAdditionalChunk:U>0}).then(function(he){return S(pe.length,he)})}).then(function(){return(ie.length>0||z&&O)&&d.mutate({trans:u,type:"delete",keys:ie,criteria:z,isAdditionalChunk:U>0}).then(function(he){return Vi(o.table,ie,he)}).then(function(he){return S(ie.length,he)})}).then(function(){return K.length>U+j&&G(U+k)})})};return G(0).then(function(){if(C.length>0)throw new ne("Error modifying one or more objects",C,q,A);return K.length})})})},t.prototype.delete=function(){var n=this._ctx,i=n.range;return Kr(n)&&!n.table.schema.yProps&&(n.isPrimKey||i.type===3)?this._write(function(o){var u=n.table.core.schema.primaryKey,c=i;return n.table.core.count({trans:o,query:{index:u,range:c}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(v){var m=v.failures,_=v.numFailures;if(_)throw new ne("Could not delete some values",Object.keys(m).map(function(k){return m[k]}),d-_);return d-_})})}):this.modify(Ys)},t})(),Ys=function(t,n){return n.value=null};function pc(t){return ui(vc.prototype,function(i,o){this.db=t;var u=Fs,c=null;if(o)try{u=o()}catch(_){c=_}var d=i._ctx,v=d.table,m=v.hook.reading.fire;this._ctx={table:v,index:d.index,isPrimKey:!d.index||v.schema.primKey.keyPath&&d.index===v.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:d.or,valueMapper:m!==Le?m:null}})}function mc(t,n){return t<n?-1:t===n?0:1}function yc(t,n){return t>n?-1:t===n?0:1}function Zt(t,n,i){var o=t instanceof Zs?new t.Collection(t):t;return o._ctx.error=i?new i(n):new TypeError(n),o}function Br(t){return new t.Collection(t,function(){return qs("")}).limit(0)}function gc(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function _c(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function bc(t,n,i,o,u,c){for(var d=Math.min(t.length,o.length),v=-1,m=0;m<d;++m){var _=n[m];if(_!==o[m])return u(t[m],i[m])<0?t.substr(0,m)+i[m]+i.substr(m+1):u(t[m],o[m])<0?t.substr(0,m)+o[m]+i.substr(m+1):v>=0?t.substr(0,v)+n[v]+i.substr(v+1):null;u(t[m],_)<0&&(v=m)}return d<o.length&&c==="next"?t+i.substr(t.length):d<t.length&&c==="prev"?t.substr(0,i.length):v<0?null:t.substr(0,v)+o[v]+i.substr(v+1)}function qi(t,n,i,o){var u,c,d,v,m,_,k,x=i.length;if(!i.every(function(S){return typeof S=="string"}))return Zt(t,Bs);function C(S){u=gc(S),c=_c(S),d=S==="next"?mc:yc;var O=i.map(function(K){return{lower:c(K),upper:u(K)}}).sort(function(K,z){return d(K.lower,z.lower)});v=O.map(function(K){return K.upper}),m=O.map(function(K){return K.lower}),_=S,k=S==="next"?"":o}C("next");var q=new t.Collection(t,function(){return Vn(v[0],m[x-1]+o)});q._ondirectionchange=function(S){C(S)};var A=0;return q._addAlgorithm(function(S,O,K){var z=S.key;if(typeof z!="string")return!1;var G=c(z);if(n(G,m,A))return!0;for(var U=null,j=A;j<x;++j){var X=bc(z,G,v[j],m[j],d,_);X===null&&U===null?A=j+1:(U===null||d(U,X)>0)&&(U=X)}return O(U!==null?function(){S.continue(U+k)}:K),!1}),q}function Vn(t,n,i,o){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:o}}function qs(t){return{type:1,lower:t,upper:t}}var Zs=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,i,o,u){o=o!==!1,u=u===!0;try{return this._cmp(n,i)>0||this._cmp(n,i)===0&&(o||u)&&!(o&&u)?Br(this):new this.Collection(this,function(){return Vn(n,i,!o,!u)})}catch{return Zt(this,In)}},t.prototype.equals=function(n){return n==null?Zt(this,In):new this.Collection(this,function(){return qs(n)})},t.prototype.above=function(n){return n==null?Zt(this,In):new this.Collection(this,function(){return Vn(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?Zt(this,In):new this.Collection(this,function(){return Vn(n,void 0,!1)})},t.prototype.below=function(n){return n==null?Zt(this,In):new this.Collection(this,function(){return Vn(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?Zt(this,In):new this.Collection(this,function(){return Vn(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?Zt(this,Bs):this.between(n,n+hr,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):qi(this,function(i,o){return i.indexOf(o[0])===0},[n],hr)},t.prototype.equalsIgnoreCase=function(n){return qi(this,function(i,o){return i===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=Lt.apply(bt,arguments);return n.length===0?Br(this):qi(this,function(i,o){return o.indexOf(i)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=Lt.apply(bt,arguments);return n.length===0?Br(this):qi(this,function(i,o){return o.some(function(u){return i.indexOf(u)===0})},n,hr)},t.prototype.anyOf=function(){var n=this,i=Lt.apply(bt,arguments),o=this._cmp;try{i.sort(o)}catch{return Zt(this,In)}if(i.length===0)return Br(this);var u=new this.Collection(this,function(){return Vn(i[0],i[i.length-1])});u._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,i.sort(o)};var c=0;return u._addAlgorithm(function(d,v,m){for(var _=d.key;o(_,i[c])>0;)if(++c,c===i.length)return v(m),!1;return o(_,i[c])===0?!0:(v(function(){d.continue(i[c])}),!1)}),u},t.prototype.notEqual=function(n){return this.inAnyRange([[io,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=Lt.apply(bt,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Zt(this,In)}var i=n.reduce(function(o,u){return o?o.concat([[o[o.length-1][1],u]]):[[io,u]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,i){var o=this,u=this._cmp,c=this._ascending,d=this._descending,v=this._min,m=this._max;if(n.length===0)return Br(this);if(!n.every(function(j){return j[0]!==void 0&&j[1]!==void 0&&c(j[0],j[1])<=0}))return Zt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$.InvalidArgument);var _=!i||i.includeLowers!==!1,k=i&&i.includeUppers===!0;function x(j,X){for(var re=0,J=j.length;re<J;++re){var pe=j[re];if(u(X[0],pe[1])<0&&u(X[1],pe[0])>0){pe[0]=v(pe[0],X[0]),pe[1]=m(pe[1],X[1]);break}}return re===J&&j.push(X),j}var C=c;function q(j,X){return C(j[0],X[0])}var A;try{A=n.reduce(x,[]),A.sort(q)}catch{return Zt(this,In)}var S=0,O=k?function(j){return c(j,A[S][1])>0}:function(j){return c(j,A[S][1])>=0},K=_?function(j){return d(j,A[S][0])>0}:function(j){return d(j,A[S][0])>=0};function z(j){return!O(j)&&!K(j)}var G=O,U=new this.Collection(this,function(){return Vn(A[0][0],A[A.length-1][1],!_,!k)});return U._ondirectionchange=function(j){j==="next"?(G=O,C=c):(G=K,C=d),A.sort(q)},U._addAlgorithm(function(j,X,re){for(var J=j.key;G(J);)if(++S,S===A.length)return X(re),!1;return z(J)?!0:(o._cmp(J,A[S][1])===0||o._cmp(J,A[S][0])===0||X(function(){C===c?j.continue(A[S][0]):j.continue(A[S][1])}),!1)}),U},t.prototype.startsWithAnyOf=function(){var n=Lt.apply(bt,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?Br(this):this.inAnyRange(n.map(function(i){return[i,i+hr]})):Zt(this,"startsWithAnyOf() only works with strings")},t})();function wc(t){return ui(Zs.prototype,function(i,o,u){if(this.db=t,this._ctx={table:i,index:o===":id"?null:o,or:u},this._cmp=this._ascending=Ne,this._descending=function(c,d){return Ne(d,c)},this._max=function(c,d){return Ne(c,d)>0?c:d},this._min=function(c,d){return Ne(c,d)<0?c:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new $.MissingAPI})}function vn(t){return $e(function(n){return li(n),t(n.target.error),!1})}function li(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ci="storagemutated",lo="x-storagemutated-1",Wn=si(null,ci),Ec=(function(){function t(){}return t.prototype._lock=function(){return ae(!fe.global),++this._reculock,this._reculock===1&&!fe.global&&(fe.lockOwnerFor=this),this},t.prototype._unlock=function(){if(ae(!fe.global),--this._reculock===0)for(fe.global||(fe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{dr(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&fe.lockOwnerFor!==this},t.prototype.create=function(n){var i=this;if(!this.mode)return this;var o=this.db.idbdb,u=this.db._state.dbOpenError;if(ae(!this.idbtrans),!n&&!o)switch(u&&u.name){case"DatabaseClosedError":throw new $.DatabaseClosed(u);case"MissingAPIError":throw new $.MissingAPI(u.message,u);default:throw new $.OpenFailed(u)}if(!this.active)throw new $.TransactionInactive;return ae(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=$e(function(c){li(c),i._reject(n.error)}),n.onabort=$e(function(c){li(c),i.active&&i._reject(new $.Abort(n.error)),i.active=!1,i.on("abort").fire(c)}),n.oncomplete=$e(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&Wn.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,i,o){var u=this;if(n==="readwrite"&&this.mode!=="readwrite")return at(new $.ReadOnly("Transaction is readonly"));if(!this.active)return at(new $.TransactionInactive);if(this._locked())return new ee(function(d,v){u._blockedFuncs.push([function(){u._promise(n,i,o).then(d,v)},fe])});if(o)return Gn(function(){var d=new ee(function(v,m){u._lock();var _=i(v,m,u);_&&_.then&&_.then(v,m)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var c=new ee(function(d,v){var m=i(d,v,u);m&&m.then&&m.then(d,v)});return c._lib=!0,c},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var i=this._root(),o=ee.resolve(n);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var u=i.idbtrans.objectStore(i.storeNames[0]);(function d(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(u.get(-1/0).onsuccess=d)})()}var c=i._waitingFor;return new ee(function(d,v){o.then(function(m){return i._waitingQueue.push($e(d.bind(null,m)))},function(m){return i._waitingQueue.push($e(v.bind(null,m)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new $.Abort))},t.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(b(i,n))return i[n];var o=this.schema[n];if(!o)throw new $.NotFound("Table "+n+" not part of transaction");var u=new this.db.Table(n,o,this);return u.core=this.db.core.table(n),i[n]=u,u},t})();function xc(t){return ui(Ec.prototype,function(i,o,u,c,d){var v=this;i!=="readonly"&&o.forEach(function(m){var _,k=(_=u[m])===null||_===void 0?void 0:_.yProps;k&&(o=o.concat(k.map(function(x){return x.updatesTable})))}),this.db=t,this.mode=i,this.storeNames=o,this.schema=u,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=si(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ee(function(m,_){v._resolve=m,v._reject=_}),this._completion.then(function(){v.active=!1,v.on.complete.fire()},function(m){var _=v.active;return v.active=!1,v.on.error.fire(m),v.parent?v.parent._reject(m):_&&v.idbtrans&&v.idbtrans.abort(),at(m)})})}function co(t,n,i,o,u,c,d,v){return{name:t,keyPath:n,unique:i,multi:o,auto:u,compound:c,src:(i&&!d?"&":"")+(o?"*":"")+(u?"++":"")+Qs(n),type:v}}function Qs(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function fo(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:me(i,function(o){return[o.name,o]})}}function Tc(t){return t.length===1?t[0]:t}var fi=function(t){try{return t.only([[]]),fi=function(){return[[]]},[[]]}catch{return fi=function(){return hr},hr}};function ho(t){return t==null?function(){}:typeof t=="string"?Ac(t):function(n){return de(n,t)}}function Ac(t){var n=t.split(".");return n.length===1?function(i){return i[t]}:function(i){return de(i,t)}}function Xs(t){return[].slice.call(t)}var kc=0;function di(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Dc(t,n,i){function o(x,C){var q=Xs(x.objectStoreNames);return{schema:{name:x.name,tables:q.map(function(A){return C.objectStore(A)}).map(function(A){var S=A.keyPath,O=A.autoIncrement,K=g(S),z=S==null,G={},U={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:z,compound:K,keyPath:S,autoIncrement:O,unique:!0,extractKey:ho(S)},indexes:Xs(A.indexNames).map(function(j){return A.index(j)}).map(function(j){var X=j.name,re=j.unique,J=j.multiEntry,pe=j.keyPath,Oe=g(pe),ie={name:X,compound:Oe,keyPath:pe,unique:re,multiEntry:J,extractKey:ho(pe)};return G[di(pe)]=ie,ie}),getIndexByKeyPath:function(j){return G[di(j)]}};return G[":id"]=U.primaryKey,S!=null&&(G[di(S)]=U.primaryKey),U})},hasGetAll:q.length>0&&"getAll"in C.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function u(x){if(x.type===3)return null;if(x.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var C=x.lower,q=x.upper,A=x.lowerOpen,S=x.upperOpen,O=C===void 0?q===void 0?null:n.upperBound(q,!!S):q===void 0?n.lowerBound(C,!!A):n.bound(C,q,!!A,!!S);return O}function c(x){var C=x.name;function q(O){var K=O.trans,z=O.type,G=O.keys,U=O.values,j=O.range;return new Promise(function(X,re){X=$e(X);var J=K.objectStore(C),pe=J.keyPath==null,Oe=z==="put"||z==="add";if(!Oe&&z!=="delete"&&z!=="deleteRange")throw new Error("Invalid operation type: "+z);var ie=(G||U||{length:1}).length;if(G&&U&&G.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(ie===0)return X({numFailures:0,failures:{},results:[],lastResult:void 0});var De,be=[],Ke=[],he=0,nt=function(mn){++he,li(mn)};if(z==="deleteRange"){if(j.type===4)return X({numFailures:he,failures:Ke,results:[],lastResult:void 0});j.type===3?be.push(De=J.clear()):be.push(De=J.delete(u(j)))}else{var Dt=Oe?pe?[U,G]:[U,null]:[G,null],pn=Dt[0],jt=Dt[1];if(Oe)for(var Jt=0;Jt<ie;++Jt)be.push(De=jt&&jt[Jt]!==void 0?J[z](pn[Jt],jt[Jt]):J[z](pn[Jt])),De.onerror=nt;else for(var Jt=0;Jt<ie;++Jt)be.push(De=J[z](pn[Jt])),De.onerror=nt}var Zn=function(mn){var pi=mn.target.result;be.forEach(function(un,oa){return un.error!=null&&(Ke[oa]=un.error)}),X({numFailures:he,failures:Ke,results:z==="delete"?G:be.map(function(un){return un.result}),lastResult:pi})};De.onerror=function(mn){nt(mn),Zn(mn)},De.onsuccess=Zn})}function A(O){var K=O.trans,z=O.values,G=O.query,U=O.reverse,j=O.unique;return new Promise(function(X,re){X=$e(X);var J=G.index,pe=G.range,Oe=K.objectStore(C),ie=J.isPrimaryKey?Oe:Oe.index(J.name),De=U?j?"prevunique":"prev":j?"nextunique":"next",be=z||!("openKeyCursor"in ie)?ie.openCursor(u(pe),De):ie.openKeyCursor(u(pe),De);be.onerror=vn(re),be.onsuccess=$e(function(Ke){var he=be.result;if(!he){X(null);return}he.___id=++kc,he.done=!1;var nt=he.continue.bind(he),Dt=he.continuePrimaryKey;Dt&&(Dt=Dt.bind(he));var pn=he.advance.bind(he),jt=function(){throw new Error("Cursor not started")},Jt=function(){throw new Error("Cursor not stopped")};he.trans=K,he.stop=he.continue=he.continuePrimaryKey=he.advance=jt,he.fail=$e(re),he.next=function(){var Zn=this,mn=1;return this.start(function(){return mn--?Zn.continue():Zn.stop()}).then(function(){return Zn})},he.start=function(Zn){var mn=new Promise(function(un,oa){un=$e(un),be.onerror=vn(oa),he.fail=oa,he.stop=function(pf){he.stop=he.continue=he.continuePrimaryKey=he.advance=Jt,un(pf)}}),pi=function(){if(be.result)try{Zn()}catch(un){he.fail(un)}else he.done=!0,he.start=function(){throw new Error("Cursor behind last entry")},he.stop()};return be.onsuccess=$e(function(un){be.onsuccess=pi,pi()}),he.continue=nt,he.continuePrimaryKey=Dt,he.advance=pn,pi(),mn},X(he)},re)})}function S(O){return function(K){return new Promise(function(z,G){z=$e(z);var U=K.trans,j=K.values,X=K.limit,re=K.query,J=X===1/0?void 0:X,pe=re.index,Oe=re.range,ie=U.objectStore(C),De=pe.isPrimaryKey?ie:ie.index(pe.name),be=u(Oe);if(X===0)return z({result:[]});if(O){var Ke=j?De.getAll(be,J):De.getAllKeys(be,J);Ke.onsuccess=function(pn){return z({result:pn.target.result})},Ke.onerror=vn(G)}else{var he=0,nt=j||!("openKeyCursor"in De)?De.openCursor(be):De.openKeyCursor(be),Dt=[];nt.onsuccess=function(pn){var jt=nt.result;if(!jt)return z({result:Dt});if(Dt.push(j?jt.value:jt.primaryKey),++he===X)return z({result:Dt});jt.continue()},nt.onerror=vn(G)}})}}return{name:C,schema:x,mutate:q,getMany:function(O){var K=O.trans,z=O.keys;return new Promise(function(G,U){G=$e(G);for(var j=K.objectStore(C),X=z.length,re=new Array(X),J=0,pe=0,Oe,ie=function(he){var nt=he.target;(re[nt._pos]=nt.result)!=null,++pe===J&&G(re)},De=vn(U),be=0;be<X;++be){var Ke=z[be];Ke!=null&&(Oe=j.get(z[be]),Oe._pos=be,Oe.onsuccess=ie,Oe.onerror=De,++J)}J===0&&G(re)})},get:function(O){var K=O.trans,z=O.key;return new Promise(function(G,U){G=$e(G);var j=K.objectStore(C),X=j.get(z);X.onsuccess=function(re){return G(re.target.result)},X.onerror=vn(U)})},query:S(m),openCursor:A,count:function(O){var K=O.query,z=O.trans,G=K.index,U=K.range;return new Promise(function(j,X){var re=z.objectStore(C),J=G.isPrimaryKey?re:re.index(G.name),pe=u(U),Oe=pe?J.count(pe):J.count();Oe.onsuccess=$e(function(ie){return j(ie.target.result)}),Oe.onerror=vn(X)})}}}var d=o(t,i),v=d.schema,m=d.hasGetAll,_=v.tables.map(function(x){return c(x)}),k={};return _.forEach(function(x){return k[x.name]=x}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(x){var C=k[x];if(!C)throw new Error("Table '".concat(x,"' not found"));return k[x]},MIN_KEY:-1/0,MAX_KEY:fi(n),schema:v}}function Ic(t,n){return n.reduce(function(i,o){var u=o.create;return l(l({},i),u(i))},t)}function Sc(t,n,i,o){var u=i.IDBKeyRange;i.indexedDB;var c=Ic(Dc(n,u,o),t.dbcore);return{dbcore:c}}function Zi(t,n){var i=n.db,o=Sc(t._middlewares,i,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(u){var c=u.name;t.core.schema.tables.some(function(d){return d.name===c})&&(u.core=t.core.table(c),t[c]instanceof t.Table&&(t[c].core=u.core))})}function Qi(t,n,i,o){i.forEach(function(u){var c=o[u];n.forEach(function(d){var v=H(d,u);(!v||"value"in v&&v.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?M(d,u,{get:function(){return this.table(u)},set:function(m){R(this,u,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new t.Table(u,c))})})}function vo(t,n){n.forEach(function(i){for(var o in i)i[o]instanceof t.Table&&delete i[o]})}function Oc(t,n){return t._cfg.version-n._cfg.version}function Cc(t,n,i,o){var u=t._dbSchema;i.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=fo("$meta",Js("")[0],[]),t._storeNames.push("$meta"));var c=t._createTransaction("readwrite",t._storeNames,u);c.create(i),c._completion.catch(o);var d=c._reject.bind(c),v=fe.transless||fe;Gn(function(){if(fe.trans=c,fe.transless=v,n===0)y(u).forEach(function(m){mo(i,m,u[m].primKey,u[m].indexes)}),Zi(t,i),ee.follow(function(){return t.on.populate.fire(c)}).catch(d);else return Zi(t,i),Pc(t,c,n).then(function(m){return Lc(t,m,c,i)}).catch(d)})}function Rc(t,n){$s(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=$i(t,t.idbdb,n);Ji(t,t._dbSchema,n);for(var o=po(i,t._dbSchema),u=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=n.objectStore(_.name);_.add.forEach(function(x){Ee&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(x.src)),Xi(k,x)})},c=0,d=o.change;c<d.length;c++){var v=d[c],m=u(v);if(typeof m=="object")return m.value}}function Pc(t,n,i){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??i}):ee.resolve(i)}function Lc(t,n,i,o){var u=[],c=t._versions,d=t._dbSchema=$i(t,t.idbdb,o),v=c.filter(function(_){return _._cfg.version>=n});if(v.length===0)return ee.resolve();v.forEach(function(_){u.push(function(){var k=d,x=_._cfg.dbschema;Ji(t,k,o),Ji(t,x,o),d=t._dbSchema=x;var C=po(k,x);C.add.forEach(function(z){mo(o,z[0],z[1].primKey,z[1].indexes)}),C.change.forEach(function(z){if(z.recreate)throw new $.Upgrade("Not yet support for changing primary key");var G=o.objectStore(z.name);z.add.forEach(function(U){return Xi(G,U)}),z.change.forEach(function(U){G.deleteIndex(U.name),Xi(G,U)}),z.del.forEach(function(U){return G.deleteIndex(U)})});var q=_._cfg.contentUpgrade;if(q&&_._cfg.version>n){Zi(t,o),i._memoizedTables={};var A=ke(x);C.del.forEach(function(z){A[z]=k[z]}),vo(t,[t.Transaction.prototype]),Qi(t,[t.Transaction.prototype],y(A),A),i.schema=A;var S=An(q);S&&Mr();var O,K=ee.follow(function(){if(O=q(i),O&&S){var z=Un.bind(null,null);O.then(z,z)}});return O&&typeof O.then=="function"?ee.resolve(O):K.then(function(){return O})}}),u.push(function(k){var x=_._cfg.dbschema;Mc(x,k),vo(t,[t.Transaction.prototype]),Qi(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),i.schema=t._dbSchema}),u.push(function(k){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===_._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(x){return x!=="$meta"})):k.objectStore("$meta").put(_._cfg.version,"version"))})});function m(){return u.length?ee.resolve(u.shift()(i.idbtrans)).then(m):ee.resolve()}return m().then(function(){$s(d,o)})}function po(t,n){var i={del:[],add:[],change:[]},o;for(o in t)n[o]||i.del.push(o);for(o in n){var u=t[o],c=n[o];if(!u)i.add.push([o,c]);else{var d={name:o,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)d.recreate=!0,i.change.push(d);else{var v=u.idxByName,m=c.idxByName,_=void 0;for(_ in v)m[_]||d.del.push(_);for(_ in m){var k=v[_],x=m[_];k?k.src!==x.src&&d.change.push(x):d.add.push(x)}(d.del.length>0||d.add.length>0||d.change.length>0)&&i.change.push(d)}}}return i}function mo(t,n,i,o){var u=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(c){return Xi(u,c)}),u}function $s(t,n){y(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(Ee&&console.debug("Dexie: Creating missing table",i),mo(n,i,t[i].primKey,t[i].indexes))})}function Mc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(i){return t[i]==null&&n.db.deleteObjectStore(i)})}function Xi(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function $i(t,n,i){var o={},u=W(n.objectStoreNames,0);return u.forEach(function(c){for(var d=i.objectStore(c),v=d.keyPath,m=co(Qs(v),v||"",!0,!1,!!d.autoIncrement,v&&typeof v!="string",!0),_=[],k=0;k<d.indexNames.length;++k){var x=d.index(d.indexNames[k]);v=x.keyPath;var C=co(x.name,v,!!x.unique,!!x.multiEntry,!1,v&&typeof v!="string",!1);_.push(C)}o[c]=fo(c,m,_)}),o}function Nc(t,n,i){t.verno=n.version/10;var o=t._dbSchema=$i(t,n,i);t._storeNames=W(n.objectStoreNames,0),Qi(t,[t._allTables],y(o),o)}function Kc(t,n){var i=$i(t,t.idbdb,n),o=po(i,t._dbSchema);return!(o.add.length||o.change.some(function(u){return u.add.length||u.change.length}))}function Ji(t,n,i){for(var o=i.db.objectStoreNames,u=0;u<o.length;++u){var c=o[u],d=i.objectStore(c);t._hasGetAll="getAll"in d;for(var v=0;v<d.indexNames.length;++v){var m=d.indexNames[v],_=d.index(m).keyPath,k=typeof _=="string"?_:"["+W(_).join("+")+"]";if(n[c]){var x=n[c].idxByName[k];x&&(x.name=m,delete n[c].idxByName[k],n[c].idxByName[m]=x)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Js(t){return t.split(",").map(function(n,i){var o,u=n.split(":"),c=(o=u[1])===null||o===void 0?void 0:o.trim();n=u[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),v=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return co(d,v||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),g(v),i===0,c)})}var Bc=(function(){function t(){}return t.prototype._createTableSchema=function(n,i,o){return fo(n,i,o)},t.prototype._parseIndexSyntax=function(n){return Js(n)},t.prototype._parseStoresSpec=function(n,i){var o=this;y(n).forEach(function(u){if(n[u]!==null){var c=o._parseIndexSyntax(n[u]),d=c.shift();if(!d)throw new $.Schema("Invalid schema for table "+u+": "+n[u]);if(d.unique=!0,d.multi)throw new $.Schema("Primary key cannot be multiEntry*");c.forEach(function(m){if(m.auto)throw new $.Schema("Only primary key can be marked as autoIncrement (++)");if(!m.keyPath)throw new $.Schema("Index must have a name and cannot be an empty string")});var v=o._createTableSchema(u,d,c);i[u]=v}})},t.prototype.stores=function(n){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?w(this._cfg.storesSource,n):n;var o=i._versions,u={},c={};return o.forEach(function(d){w(u,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(u,c)}),i._dbSchema=c,vo(i,[i._allTables,i,i.Transaction.prototype]),Qi(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],y(c),c),i._storeNames=y(c),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=Ge(this._cfg.contentUpgrade||Q,n),this},t})();function Fc(t){return ui(Bc.prototype,function(i){this.db=t,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function yo(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new Sn(Ui,{addons:[],indexedDB:t,IDBKeyRange:n}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function go(t){return t&&typeof t.databases=="function"}function jc(t){var n=t.indexedDB,i=t.IDBKeyRange;return go(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(u){return u.name}).filter(function(u){return u!==Ui})}):yo(n,i).toCollection().primaryKeys()}function zc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!go(i)&&n!==Ui&&yo(i,o).put({name:n}).catch(Q)}function Gc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!go(i)&&n!==Ui&&yo(i,o).delete(n).catch(Q)}function _o(t){return Gn(function(){return fe.letThrough=!0,t()})}function Uc(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var bo;function wo(t){return!("from"in t)}var kt=function(t,n){if(this)w(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var i=new kt;return t&&"d"in t&&w(i,t),i}};T(kt.prototype,(bo={add:function(t){return vi(this,t),this},addKey:function(t){return hi(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return hi(n,i,i)}),this},hasKey:function(t){var n=ea(this).next(t).value;return n&&Ne(n.from,t)<=0&&Ne(n.to,t)>=0}},bo[_t]=function(){return ea(this)},bo));function hi(t,n,i){var o=Ne(n,i);if(!isNaN(o)){if(o>0)throw RangeError();if(wo(t))return w(t,{from:n,to:i,d:1});var u=t.l,c=t.r;if(Ne(i,t.from)<0)return u?hi(u,n,i):t.l={from:n,to:i,d:1,l:null,r:null},tu(t);if(Ne(n,t.to)>0)return c?hi(c,n,i):t.r={from:n,to:i,d:1,l:null,r:null},tu(t);Ne(n,t.from)<0&&(t.from=n,t.l=null,t.d=c?c.d+1:1),Ne(i,t.to)>0&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;u&&!t.l&&vi(t,u),c&&d&&vi(t,c)}}function vi(t,n){function i(o,u){var c=u.from,d=u.to,v=u.l,m=u.r;hi(o,c,d),v&&i(o,v),m&&i(o,m)}wo(n)||i(t,n)}function eu(t,n){var i=ea(n),o=i.next();if(o.done)return!1;for(var u=o.value,c=ea(t),d=c.next(u.from),v=d.value;!o.done&&!d.done;){if(Ne(v.from,u.to)<=0&&Ne(v.to,u.from)>=0)return!0;Ne(u.from,v.from)<0?u=(o=i.next(v.from)).value:v=(d=c.next(u.from)).value}return!1}function ea(t){var n=wo(t)?null:{s:0,n:t};return{next:function(i){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&Ne(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||Ne(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function tu(t){var n,i,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),u=o>1?"r":o<-1?"l":"";if(u){var c=u==="r"?"l":"r",d=l({},t),v=t[u];t.from=v.from,t.to=v.to,t[u]=v[u],d[u]=v[c],t[c]=d,d.d=nu(d)}t.d=nu(t)}function nu(t){var n=t.r,i=t.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function ta(t,n){return y(n).forEach(function(i){t[i]?vi(t[i],n[i]):t[i]=je(n[i])}),t}function Eo(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&eu(n[i],t[i])})}var pr={},xo={},To=!1;function na(t,n){ta(xo,t),To||(To=!0,setTimeout(function(){To=!1;var i=xo;xo={},Ao(i,!1)},0))}function Ao(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var o=0,u=Object.values(pr);o<u.length;o++){var c=u[o];ru(c,t,i,n)}else for(var d in t){var v=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(v){var m=v[1],_=v[2],c=pr["idb://".concat(m,"/").concat(_)];c&&ru(c,t,i,n)}}i.forEach(function(k){return k()})}function ru(t,n,i,o){for(var u=[],c=0,d=Object.entries(t.queries.query);c<d.length;c++){for(var v=d[c],m=v[0],_=v[1],k=[],x=0,C=_;x<C.length;x++){var q=C[x];Eo(n,q.obsSet)?q.subscribers.forEach(function(K){return i.add(K)}):o&&k.push(q)}o&&u.push([m,k])}if(o)for(var A=0,S=u;A<S.length;A++){var O=S[A],m=O[0],k=O[1];t.queries.query[m]=k}}function Hc(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?at(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,u=Math.round(t.verno*10),c=!1;function d(){if(n.openCanceller!==o)throw new $.DatabaseClosed("db.open() was cancelled")}var v=n.dbReadyResolve,m=null,_=!1,k=function(){return new ee(function(x,C){if(d(),!i)throw new $.MissingAPI;var q=t.name,A=n.autoSchema||!u?i.open(q):i.open(q,u);if(!A)throw new $.MissingAPI;A.onerror=vn(C),A.onblocked=$e(t._fireOnBlocked),A.onupgradeneeded=$e(function(S){if(m=A.transaction,n.autoSchema&&!t._options.allowEmptyDB){A.onerror=li,m.abort(),A.result.close();var O=i.deleteDatabase(q);O.onsuccess=O.onerror=$e(function(){C(new $.NoSuchDatabase("Database ".concat(q," doesnt exist")))})}else{m.onerror=vn(C);var K=S.oldVersion>Math.pow(2,62)?0:S.oldVersion;_=K<1,t.idbdb=A.result,c&&Rc(t,m),Cc(t,K/10,m,C)}},C),A.onsuccess=$e(function(){m=null;var S=t.idbdb=A.result,O=W(S.objectStoreNames);if(O.length>0)try{var K=S.transaction(Tc(O),"readonly");if(n.autoSchema)Nc(t,S,K);else if(Ji(t,t._dbSchema,K),!Kc(t,K)&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),S.close(),u=S.version+1,c=!0,x(k());Zi(t,K)}catch{}Nr.push(t),S.onversionchange=$e(function(z){n.vcFired=!0,t.on("versionchange").fire(z)}),S.onclose=$e(function(){t.close({disableAutoOpen:!1})}),_&&zc(t._deps,q),x()},C)}).catch(function(x){switch(x?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(u>0)return u=0,k();break}return ee.reject(x)})};return ee.race([o,(typeof navigator>"u"?ee.resolve():Uc()).then(k)]).then(function(){return d(),n.onReadyBeingFired=[],ee.resolve(_o(function(){return t.on.ready.fire(t.vip)})).then(function x(){if(n.onReadyBeingFired.length>0){var C=n.onReadyBeingFired.reduce(Ge,Q);return n.onReadyBeingFired=[],ee.resolve(_o(function(){return C(t.vip)})).then(x)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(x){n.dbOpenError=x;try{m&&m.abort()}catch{}return o===n.openCanceller&&t._close(),at(x)}).finally(function(){n.openComplete=!0,v()}).then(function(){if(_){var x={};t.tables.forEach(function(C){C.schema.indexes.forEach(function(q){q.name&&(x["idb://".concat(t.name,"/").concat(C.name,"/").concat(q.name)]=new kt(-1/0,[[[]]]))}),x["idb://".concat(t.name,"/").concat(C.name,"/")]=x["idb://".concat(t.name,"/").concat(C.name,"/:dels")]=new kt(-1/0,[[[]]])}),Wn(ci).fire(x),Ao(x,!0)}return t})}function ko(t){var n=function(d){return t.next(d)},i=function(d){return t.throw(d)},o=c(n),u=c(i);function c(d){return function(v){var m=d(v),_=m.value;return m.done?_:!_||typeof _.then!="function"?g(_)?Promise.all(_).then(o,u):o(_):_.then(o,u)}}return c(n)()}function Vc(t,n,i){var o=arguments.length;if(o<2)throw new $.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];i=u.pop();var c=He(u);return[t,c,i]}function iu(t,n,i,o,u){return ee.resolve().then(function(){var c=fe.transless||fe,d=t._createTransaction(n,i,t._dbSchema,o);d.explicit=!0;var v={trans:d,transless:c};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(x){return x.name===_e.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return iu(t,n,i,null,u)})):at(x)}var m=An(u);m&&Mr();var _,k=ee.follow(function(){if(_=u.call(d,d),_)if(m){var x=Un.bind(null,null);_.then(x,x)}else typeof _.next=="function"&&typeof _.throw=="function"&&(_=ko(_))},v);return(_&&typeof _.then=="function"?ee.resolve(_).then(function(x){return d.active?x:at(new $.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):k.then(function(){return _})).then(function(x){return o&&d._resolve(),d._completion.then(function(){return x})}).catch(function(x){return d._reject(x),at(x)})})}function ra(t,n,i){for(var o=g(t)?t.slice():[t],u=0;u<i;++u)o.push(n);return o}function Wc(t){return l(l({},t),{table:function(n){var i=t.table(n),o=i.schema,u={},c=[];function d(S,O,K){var z=di(S),G=u[z]=u[z]||[],U=S==null?0:typeof S=="string"?1:S.length,j=O>0,X=l(l({},K),{name:j?"".concat(z,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:j,keyTail:O,keyLength:U,extractKey:ho(S),unique:!j&&K.unique});if(G.push(X),X.isPrimaryKey||c.push(X),U>1){var re=U===2?S[0]:S.slice(0,U-1);d(re,O+1,K)}return G.sort(function(J,pe){return J.keyTail-pe.keyTail}),X}var v=d(o.primaryKey.keyPath,0,o.primaryKey);u[":id"]=[v];for(var m=0,_=o.indexes;m<_.length;m++){var k=_[m];d(k.keyPath,0,k)}function x(S){var O=u[di(S)];return O&&O[0]}function C(S,O){return{type:S.type===1?2:S.type,lower:ra(S.lower,S.lowerOpen?t.MAX_KEY:t.MIN_KEY,O),lowerOpen:!0,upper:ra(S.upper,S.upperOpen?t.MIN_KEY:t.MAX_KEY,O),upperOpen:!0}}function q(S){var O=S.query.index;return O.isVirtual?l(l({},S),{query:{index:O.lowLevelIndex,range:C(S.query.range,O.keyTail)}}):S}var A=l(l({},i),{schema:l(l({},o),{primaryKey:v,indexes:c,getIndexByKeyPath:x}),count:function(S){return i.count(q(S))},query:function(S){return i.query(q(S))},openCursor:function(S){var O=S.query.index,K=O.keyTail,z=O.isVirtual,G=O.keyLength;if(!z)return i.openCursor(S);function U(j){function X(J){J!=null?j.continue(ra(J,S.reverse?t.MAX_KEY:t.MIN_KEY,K)):S.unique?j.continue(j.key.slice(0,G).concat(S.reverse?t.MIN_KEY:t.MAX_KEY,K)):j.continue()}var re=Object.create(j,{continue:{value:X},continuePrimaryKey:{value:function(J,pe){j.continuePrimaryKey(ra(J,t.MAX_KEY,K),pe)}},primaryKey:{get:function(){return j.primaryKey}},key:{get:function(){var J=j.key;return G===1?J[0]:J.slice(0,G)}},value:{get:function(){return j.value}}});return re}return i.openCursor(q(S)).then(function(j){return j&&U(j)})}});return A}})}var Yc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Wc};function Do(t,n,i,o){return i=i||{},o=o||"",y(t).forEach(function(u){if(!b(n,u))i[o+u]=void 0;else{var c=t[u],d=n[u];if(typeof c=="object"&&typeof d=="object"&&c&&d){var v=sn(c),m=sn(d);v!==m?i[o+u]=n[u]:v==="Object"?Do(c,d,i,o+u+"."):c!==d&&(i[o+u]=n[u])}else c!==d&&(i[o+u]=n[u])}}),y(n).forEach(function(u){b(t,u)||(i[o+u]=n[u])}),i}function Io(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var qc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return l(l({},t),{table:function(n){var i=t.table(n),o=i.schema.primaryKey,u=l(l({},i),{mutate:function(c){var d=fe.trans,v=d.table(n).hook,m=v.deleting,_=v.creating,k=v.updating;switch(c.type){case"add":if(_.fire===Q)break;return d._promise("readwrite",function(){return x(c)},!0);case"put":if(_.fire===Q&&k.fire===Q)break;return d._promise("readwrite",function(){return x(c)},!0);case"delete":if(m.fire===Q)break;return d._promise("readwrite",function(){return x(c)},!0);case"deleteRange":if(m.fire===Q)break;return d._promise("readwrite",function(){return C(c)},!0)}return i.mutate(c);function x(A){var S=fe.trans,O=A.keys||Io(o,A);if(!O)throw new Error("Keys missing");return A=A.type==="add"||A.type==="put"?l(l({},A),{keys:O}):l({},A),A.type!=="delete"&&(A.values=f([],A.values)),A.keys&&(A.keys=f([],A.keys)),Zc(i,A,O).then(function(K){var z=O.map(function(G,U){var j=K[U],X={onerror:null,onsuccess:null};if(A.type==="delete")m.fire.call(X,G,j,S);else if(A.type==="add"||j===void 0){var re=_.fire.call(X,G,A.values[U],S);G==null&&re!=null&&(G=re,A.keys[U]=G,o.outbound||xe(A.values[U],o.keyPath,G))}else{var J=Do(j,A.values[U]),pe=k.fire.call(X,J,G,j,S);if(pe){var Oe=A.values[U];Object.keys(pe).forEach(function(ie){b(Oe,ie)?Oe[ie]=pe[ie]:xe(Oe,ie,pe[ie])})}}return X});return i.mutate(A).then(function(G){for(var U=G.failures,j=G.results,X=G.numFailures,re=G.lastResult,J=0;J<O.length;++J){var pe=j?j[J]:O[J],Oe=z[J];pe==null?Oe.onerror&&Oe.onerror(U[J]):Oe.onsuccess&&Oe.onsuccess(A.type==="put"&&K[J]?A.values[J]:pe)}return{failures:U,results:j,numFailures:X,lastResult:re}}).catch(function(G){return z.forEach(function(U){return U.onerror&&U.onerror(G)}),Promise.reject(G)})})}function C(A){return q(A.trans,A.range,1e4)}function q(A,S,O){return i.query({trans:A,values:!1,query:{index:o,range:S},limit:O}).then(function(K){var z=K.result;return x({type:"delete",keys:z,trans:A}).then(function(G){return G.numFailures>0?Promise.reject(G.failures[0]):z.length<O?{failures:[],numFailures:0,lastResult:void 0}:q(A,l(l({},S),{lower:z[z.length-1],lowerOpen:!0}),O)})})}}});return u}})}};function Zc(t,n,i){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:i,cache:"immutable"})}function au(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var o=[],u=0,c=0;u<n.keys.length&&c<t.length;++u)Ne(n.keys[u],t[c])===0&&(o.push(i?Qe(n.values[u]):n.values[u]),++c);return o.length===t.length?o:null}catch{return null}}var Qc={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return l(l({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var u=au(o.keys,o.trans._cache,o.cache==="clone");return u?ee.resolve(u):i.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?Qe(c):c},c})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function ou(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function su(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Xc={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new kt(t.MIN_KEY,t.MAX_KEY);return l(l({},t),{transaction:function(o,u,c){if(fe.subscr&&u!=="readonly")throw new $.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(fe.querier));return t.transaction(o,u,c)},table:function(o){var u=t.table(o),c=u.schema,d=c.primaryKey,v=c.indexes,m=d.extractKey,_=d.outbound,k=d.autoIncrement&&v.filter(function(A){return A.compound&&A.keyPath.includes(d.keyPath)}),x=l(l({},u),{mutate:function(A){var S,O,K=A.trans,z=A.mutatedParts||(A.mutatedParts={}),G=function(be){var Ke="idb://".concat(n,"/").concat(o,"/").concat(be);return z[Ke]||(z[Ke]=new kt)},U=G(""),j=G(":dels"),X=A.type,re=A.type==="deleteRange"?[A.range]:A.type==="delete"?[A.keys]:A.values.length<50?[Io(d,A).filter(function(be){return be}),A.values]:[],J=re[0],pe=re[1],Oe=A.trans._cache;if(g(J)){U.addKeys(J);var ie=X==="delete"||J.length===pe.length?au(J,Oe):null;ie||j.addKeys(J),(ie||pe)&&$c(G,c,ie,pe)}else if(J){var De={from:(S=J.lower)!==null&&S!==void 0?S:t.MIN_KEY,to:(O=J.upper)!==null&&O!==void 0?O:t.MAX_KEY};j.add(De),U.add(De)}else U.add(i),j.add(i),c.indexes.forEach(function(be){return G(be.name).add(i)});return u.mutate(A).then(function(be){return J&&(A.type==="add"||A.type==="put")&&(U.addKeys(be.results),k&&k.forEach(function(Ke){for(var he=A.values.map(function(jt){return Ke.extractKey(jt)}),nt=Ke.keyPath.findIndex(function(jt){return jt===d.keyPath}),Dt=0,pn=be.results.length;Dt<pn;++Dt)he[Dt][nt]=be.results[Dt];G(Ke.name).addKeys(he)})),K.mutatedParts=ta(K.mutatedParts||{},z),be})}}),C=function(A){var S,O,K=A.query,z=K.index,G=K.range;return[z,new kt((S=G.lower)!==null&&S!==void 0?S:t.MIN_KEY,(O=G.upper)!==null&&O!==void 0?O:t.MAX_KEY)]},q={get:function(A){return[d,new kt(A.key)]},getMany:function(A){return[d,new kt().addKeys(A.keys)]},count:C,query:C,openCursor:C};return y(q).forEach(function(A){x[A]=function(S){var O=fe.subscr,K=!!O,z=ou(fe,u)&&su(A,S),G=z?S.obsSet={}:O;if(K){var U=function(ie){var De="idb://".concat(n,"/").concat(o,"/").concat(ie);return G[De]||(G[De]=new kt)},j=U(""),X=U(":dels"),re=q[A](S),J=re[0],pe=re[1];if(A==="query"&&J.isPrimaryKey&&!S.values?X.add(pe):U(J.name||"").add(pe),!J.isPrimaryKey)if(A==="count")X.add(i);else{var Oe=A==="query"&&_&&S.values&&u.query(l(l({},S),{values:!1}));return u[A].apply(this,arguments).then(function(ie){if(A==="query"){if(_&&S.values)return Oe.then(function(he){var nt=he.result;return j.addKeys(nt),ie});var De=S.values?ie.result.map(m):ie.result;S.values?j.addKeys(De):X.addKeys(De)}else if(A==="openCursor"){var be=ie,Ke=S.values;return be&&Object.create(be,{key:{get:function(){return X.addKey(be.primaryKey),be.key}},primaryKey:{get:function(){var he=be.primaryKey;return X.addKey(he),he}},value:{get:function(){return Ke&&j.addKey(be.primaryKey),be.value}}})}return ie})}}return u[A].apply(this,arguments)}}),x}})}};function $c(t,n,i,o){function u(c){var d=t(c.name||"");function v(_){return _!=null?c.extractKey(_):null}var m=function(_){return c.multiEntry&&g(_)?_.forEach(function(k){return d.addKey(k)}):d.addKey(_)};(i||o).forEach(function(_,k){var x=i&&v(i[k]),C=o&&v(o[k]);Ne(x,C)!==0&&(x!=null&&m(x),C!=null&&m(C))})}n.indexes.forEach(u)}function uu(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(i.numFailures===o)return null;var u=l({},n);return g(u.keys)&&(u.keys=u.keys.filter(function(c,d){return!(d in i.failures)})),"values"in u&&g(u.values)&&(u.values=u.values.filter(function(c,d){return!(d in i.failures)})),u}function Jc(t,n){return n.lower===void 0?!0:n.lowerOpen?Ne(t,n.lower)>0:Ne(t,n.lower)>=0}function ef(t,n){return n.upper===void 0?!0:n.upperOpen?Ne(t,n.upper)<0:Ne(t,n.upper)<=0}function So(t,n){return Jc(t,n)&&ef(t,n)}function lu(t,n,i,o,u,c){if(!i||i.length===0)return t;var d=n.query.index,v=d.multiEntry,m=n.query.range,_=o.schema.primaryKey,k=_.extractKey,x=d.extractKey,C=(d.lowLevelIndex||d).extractKey,q=i.reduce(function(A,S){var O=A,K=[];if(S.type==="add"||S.type==="put")for(var z=new kt,G=S.values.length-1;G>=0;--G){var U=S.values[G],j=k(U);if(!z.hasKey(j)){var X=x(U);(v&&g(X)?X.some(function(ie){return So(ie,m)}):So(X,m))&&(z.addKey(j),K.push(U))}}switch(S.type){case"add":{var re=new kt().addKeys(n.values?A.map(function(ie){return k(ie)}):A);O=A.concat(n.values?K.filter(function(ie){var De=k(ie);return re.hasKey(De)?!1:(re.addKey(De),!0)}):K.map(function(ie){return k(ie)}).filter(function(ie){return re.hasKey(ie)?!1:(re.addKey(ie),!0)}));break}case"put":{var J=new kt().addKeys(S.values.map(function(ie){return k(ie)}));O=A.filter(function(ie){return!J.hasKey(n.values?k(ie):ie)}).concat(n.values?K:K.map(function(ie){return k(ie)}));break}case"delete":var pe=new kt().addKeys(S.keys);O=A.filter(function(ie){return!pe.hasKey(n.values?k(ie):ie)});break;case"deleteRange":var Oe=S.range;O=A.filter(function(ie){return!So(k(ie),Oe)});break}return O},t);return q===t?t:(q.sort(function(A,S){return Ne(C(A),C(S))||Ne(k(A),k(S))}),n.limit&&n.limit<1/0&&(q.length>n.limit?q.length=n.limit:t.length===n.limit&&q.length<n.limit&&(u.dirty=!0)),c?Object.freeze(q):q)}function cu(t,n){return Ne(t.lower,n.lower)===0&&Ne(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function tf(t,n,i,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var u=Ne(t,n);if(u===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return u}function nf(t,n,i,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var u=Ne(t,n);if(u===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return u}function rf(t,n){return tf(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&nf(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function af(t,n,i,o){var u=pr["idb://".concat(t,"/").concat(n)];if(!u)return[];var c=u.queries[i];if(!c)return[null,!1,u,null];var d=o.query?o.query.index.name:null,v=c[d||""];if(!v)return[null,!1,u,null];switch(i){case"query":var m=v.find(function(x){return x.req.limit===o.limit&&x.req.values===o.values&&cu(x.req.query.range,o.query.range)});if(m)return[m,!0,u,v];var _=v.find(function(x){var C="limit"in x.req?x.req.limit:1/0;return C>=o.limit&&(o.values?x.req.values:!0)&&rf(x.req.query.range,o.query.range)});return[_,!1,u,v];case"count":var k=v.find(function(x){return cu(x.req.query.range,o.query.range)});return[k,!!k,u,v]}}function of(t,n,i,o){t.subscribers.add(i),o.addEventListener("abort",function(){t.subscribers.delete(i),t.subscribers.size===0&&sf(t,n)})}function sf(t,n){setTimeout(function(){t.subscribers.size===0&&Ye(n,t)},3e3)}var uf={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,i=l(l({},t),{transaction:function(o,u,c){var d=t.transaction(o,u,c);if(u==="readwrite"){var v=new AbortController,m=v.signal,_=function(k){return function(){if(v.abort(),u==="readwrite"){for(var x=new Set,C=0,q=o;C<q.length;C++){var A=q[C],S=pr["idb://".concat(n,"/").concat(A)];if(S){var O=t.table(A),K=S.optimisticOps.filter(function(Ke){return Ke.trans===d});if(d._explicit&&k&&d.mutatedParts)for(var z=0,G=Object.values(S.queries.query);z<G.length;z++)for(var U=G[z],j=0,X=U.slice();j<X.length;j++){var re=X[j];Eo(re.obsSet,d.mutatedParts)&&(Ye(U,re),re.subscribers.forEach(function(Ke){return x.add(Ke)}))}else if(K.length>0){S.optimisticOps=S.optimisticOps.filter(function(Ke){return Ke.trans!==d});for(var J=0,pe=Object.values(S.queries.query);J<pe.length;J++)for(var U=pe[J],Oe=0,ie=U.slice();Oe<ie.length;Oe++){var re=ie[Oe];if(re.res!=null&&d.mutatedParts)if(k&&!re.dirty){var De=Object.isFrozen(re.res),be=lu(re.res,re.req,K,O,re,De);re.dirty?(Ye(U,re),re.subscribers.forEach(function(nt){return x.add(nt)})):be!==re.res&&(re.res=be,re.promise=ee.resolve({result:be}))}else re.dirty&&Ye(U,re),re.subscribers.forEach(function(nt){return x.add(nt)})}}}}x.forEach(function(Ke){return Ke()})}}};d.addEventListener("abort",_(!1),{signal:m}),d.addEventListener("error",_(!1),{signal:m}),d.addEventListener("complete",_(!0),{signal:m})}return d},table:function(o){var u=t.table(o),c=u.schema.primaryKey,d=l(l({},u),{mutate:function(v){var m=fe.trans;if(c.outbound||m.db._options.cache==="disabled"||m.explicit||m.idbtrans.mode!=="readwrite")return u.mutate(v);var _=pr["idb://".concat(n,"/").concat(o)];if(!_)return u.mutate(v);var k=u.mutate(v);return(v.type==="add"||v.type==="put")&&(v.values.length>=50||Io(c,v).some(function(x){return x==null}))?k.then(function(x){var C=l(l({},v),{values:v.values.map(function(A,S){var O;if(x.failures[S])return A;var K=!((O=c.keyPath)===null||O===void 0)&&O.includes(".")?Qe(A):l({},A);return xe(K,c.keyPath,x.results[S]),K})}),q=uu(_,C,x);_.optimisticOps.push(q),queueMicrotask(function(){return v.mutatedParts&&na(v.mutatedParts)})}):(_.optimisticOps.push(v),v.mutatedParts&&na(v.mutatedParts),k.then(function(x){if(x.numFailures>0){Ye(_.optimisticOps,v);var C=uu(_,v,x);C&&_.optimisticOps.push(C),v.mutatedParts&&na(v.mutatedParts)}}),k.catch(function(){Ye(_.optimisticOps,v),v.mutatedParts&&na(v.mutatedParts)})),k},query:function(v){var m;if(!ou(fe,u)||!su("query",v))return u.query(v);var _=((m=fe.trans)===null||m===void 0?void 0:m.db._options.cache)==="immutable",k=fe,x=k.requery,C=k.signal,q=af(n,o,"query",v),A=q[0],S=q[1],O=q[2],K=q[3];if(A&&S)A.obsSet=v.obsSet;else{var z=u.query(v).then(function(G){var U=G.result;if(A&&(A.res=U),_){for(var j=0,X=U.length;j<X;++j)Object.freeze(U[j]);Object.freeze(U)}else G.result=Qe(U);return G}).catch(function(G){return K&&A&&Ye(K,A),Promise.reject(G)});A={obsSet:v.obsSet,promise:z,subscribers:new Set,type:"query",req:v,dirty:!1},K?K.push(A):(K=[A],O||(O=pr["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),O.queries.query[v.query.index.name||""]=K)}return of(A,K,x,C),A.promise.then(function(G){return{result:lu(G.result,v,O?.optimisticOps,u,A,_)}})}});return d}});return i}};function ia(t,n){return new Proxy(t,{get:function(i,o,u){return o==="db"?n:Reflect.get(i,o,u)}})}var Sn=(function(){function t(n,i){var o=this;this._middlewares={},this.verno=0;var u=t.dependencies;this._options=i=l({addons:t.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var c=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Q,dbReadyPromise:null,cancelOpen:Q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};d.dbReadyPromise=new ee(function(m){d.dbReadyResolve=m}),d.openCanceller=new ee(function(m,_){d.cancelOpen=_}),this._state=d,this.name=n,this.on=si(this,"populate","blocked","versionchange","close",{ready:[Ge,Q]}),this.once=function(m,_){var k=function(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];o.on(m).unsubscribe(k),_.apply(o,x)};return o.on(m,k)},this.on.ready.subscribe=te(this.on.ready.subscribe,function(m){return function(_,k){t.vip(function(){var x=o._state;if(x.openComplete)x.dbOpenError||ee.resolve().then(_),k&&m(_);else if(x.onReadyBeingFired)x.onReadyBeingFired.push(_),k&&m(_);else{m(_);var C=o;k||m(function q(){C.on.ready.unsubscribe(_),C.on.ready.unsubscribe(q)})}})}}),this.Collection=pc(this),this.Table=dc(this),this.Transaction=xc(this),this.Version=Fc(this),this.WhereClause=wc(this),this.on("versionchange",function(m){m.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(m){!m.newVersion||m.newVersion<m.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(m.oldVersion/10))}),this._maxKey=fi(i.IDBKeyRange),this._createTransaction=function(m,_,k,x){return new o.Transaction(m,_,k,o._options.chromeTransactionDurability,x)},this._fireOnBlocked=function(m){o.on("blocked").fire(m),Nr.filter(function(_){return _.name===o.name&&_!==o&&!_._state.vcFired}).map(function(_){return _.on("versionchange").fire(m)})},this.use(Qc),this.use(uf),this.use(Xc),this.use(Yc),this.use(qc);var v=new Proxy(this,{get:function(m,_,k){if(_==="_vip")return!0;if(_==="table")return function(C){return ia(o.table(C),v)};var x=Reflect.get(m,_,k);return x instanceof Hs?ia(x,v):_==="tables"?x.map(function(C){return ia(C,v)}):_==="_createTransaction"?function(){var C=x.apply(this,arguments);return ia(C,v)}:x}});this.vip=v,c.forEach(function(m){return m(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new $.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new $.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,o=i.filter(function(u){return u._cfg.version===n})[0];return o||(o=new this.Version(n),i.push(o),i.sort(Oc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||fe.letThrough||this._vip)?n():new ee(function(o,u){if(i._state.openComplete)return u(new $.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){u(new $.DatabaseClosed);return}i.open().catch(Q)}i._state.dbReadyPromise.then(o,u)}).then(n)},t.prototype.use=function(n){var i=n.stack,o=n.create,u=n.level,c=n.name;c&&this.unuse({stack:i,name:c});var d=this._middlewares[i]||(this._middlewares[i]=[]);return d.push({stack:i,create:o,level:u??10,name:c}),d.sort(function(v,m){return v.level-m.level}),this},t.prototype.unuse=function(n){var i=n.stack,o=n.name,u=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(c){return u?c.create!==u:o?c.name!==o:!1})),this},t.prototype.open=function(){var n=this;return dr(zn,function(){return Hc(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=Nr.indexOf(this);if(i>=0&&Nr.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new ee(function(o){n.dbReadyResolve=o}),n.openCanceller=new ee(function(o,u){n.cancelOpen=u}))},t.prototype.close=function(n){var i=n===void 0?{disableAutoOpen:!0}:n,o=i.disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new $.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new $.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},t.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",u=this._state;return new ee(function(c,d){var v=function(){i.close(n);var m=i._deps.indexedDB.deleteDatabase(i.name);m.onsuccess=$e(function(){Gc(i._deps,i.name),c()}),m.onerror=vn(d),m.onblocked=i._fireOnBlocked};if(o)throw new $.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(v):v()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return y(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=Vc.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,i,o){var u=this,c=fe.trans;(!c||c.db!==this||n.indexOf("!")!==-1)&&(c=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var v,m;try{if(m=i.map(function(k){var x=k instanceof u.Table?k.name:k;if(typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),n=="r"||n===ao)v=ao;else if(n=="rw"||n==oo)v=oo;else throw new $.InvalidArgument("Invalid transaction mode: "+n);if(c){if(c.mode===ao&&v===oo)if(d)c=null;else throw new $.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c&&m.forEach(function(k){if(c&&c.storeNames.indexOf(k)===-1)if(d)c=null;else throw new $.SubTransaction("Table "+k+" not included in parent transaction.")}),d&&c&&!c.active&&(c=null)}}catch(k){return c?c._promise(null,function(x,C){C(k)}):at(k)}var _=iu.bind(null,this,v,m,c,o);return c?c._promise(v,_,"lock"):fe.trans?dr(fe.transless,function(){return u._whenReady(_)}):this._whenReady(_)},t.prototype.table=function(n){if(!b(this._allTables,n))throw new $.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),lf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",cf=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,i,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:i,complete:o}:n)},t.prototype[lf]=function(){return this},t})(),aa;try{aa={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{aa={indexedDB:null,IDBKeyRange:null}}function fu(t){var n=!1,i,o=new cf(function(u){var c=An(t);function d(K){var z=Pr();try{c&&Mr();var G=Gn(t,K);return c&&(G=G.finally(Un)),G}finally{z&&Lr()}}var v=!1,m,_={},k={},x={get closed(){return v},unsubscribe:function(){v||(v=!0,m&&m.abort(),C&&Wn.storagemutated.unsubscribe(S))}};u.start&&u.start(x);var C=!1,q=function(){return no(O)};function A(){return Eo(k,_)}var S=function(K){ta(_,K),A()&&q()},O=function(){if(!(v||!aa.indexedDB)){_={};var K={};m&&m.abort(),m=new AbortController;var z={subscr:K,signal:m.signal,requery:q,querier:t,trans:null},G=d(z);Promise.resolve(G).then(function(U){n=!0,i=U,!(v||z.signal.aborted)&&(_={},k=K,!Bt(k)&&!C&&(Wn(ci,S),C=!0),no(function(){return!v&&u.next&&u.next(U)}))},function(U){n=!1,["DatabaseClosedError","AbortError"].includes(U?.name)||v||no(function(){v||u.error&&u.error(U)})})}};return setTimeout(q,0),x});return o.hasValue=function(){return n},o.getValue=function(){return i},o}var mr=Sn;T(mr,l(l({},Ce),{delete:function(t){var n=new mr(t,{addons:[]});return n.delete()},exists:function(t){return new mr(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return jc(mr.dependencies).then(t)}catch{return at(new $.MissingAPI)}},defineClass:function(){function t(n){w(this,n)}return t},ignoreTransaction:function(t){return fe.trans?dr(fe.transless,t):t()},vip:_o,async:function(t){return function(){try{var n=ko(t.apply(this,arguments));return!n||typeof n.then!="function"?ee.resolve(n):n}catch(i){return at(i)}}},spawn:function(t,n,i){try{var o=ko(t.apply(i,n||[]));return!o||typeof o.then!="function"?ee.resolve(o):o}catch(u){return at(u)}},currentTransaction:{get:function(){return fe.trans||null}},waitFor:function(t,n){var i=ee.resolve(typeof t=="function"?mr.ignoreTransaction(t):t).timeout(n||6e4);return fe.trans?fe.trans.waitFor(i):i},Promise:ee,debug:{get:function(){return Ee},set:function(t){le(t)}},derive:N,extend:w,props:T,override:te,Events:si,on:Wn,liveQuery:fu,extendObservabilitySet:ta,getByKeyPath:de,setByKeyPath:xe,delByKeyPath:we,shallowClone:ke,deepClone:Qe,getObjectDiff:Do,cmp:Ne,asap:ve,minKey:io,addons:[],connections:Nr,errnames:_e,dependencies:aa,cache:pr,semVer:Ks,version:Ks.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,i*2)})})),mr.maxKey=fi(mr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Wn(ci,function(t){if(!Yn){var n;n=new CustomEvent(lo,{detail:t}),Yn=!0,dispatchEvent(n),Yn=!1}}),addEventListener(lo,function(t){var n=t.detail;Yn||Oo(n)}));function Oo(t){var n=Yn;try{Yn=!0,Wn.storagemutated.fire(t),Ao(t,!0)}finally{Yn=n}}var Yn=!1,qn,Co=function(){};typeof BroadcastChannel<"u"&&(Co=function(){qn=new BroadcastChannel(lo),qn.onmessage=function(t){return t.data&&Oo(t.data)}},Co(),typeof qn.unref=="function"&&qn.unref(),Wn(ci,function(t){Yn||qn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Sn.disableBfCache&&t.persisted){Ee&&console.debug("Dexie: handling persisted pagehide"),qn?.close();for(var n=0,i=Nr;n<i.length;n++){var o=i[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!Sn.disableBfCache&&t.persisted&&(Ee&&console.debug("Dexie: handling persisted pageshow"),Co(),Oo({all:new kt(-1/0,[[]])}))}));function ff(t){return new oi({add:t})}function df(t){return new oi({remove:t})}function hf(t,n){return new oi({replacePrefix:[t,n]})}ee.rejectionMapper=se,le(Ee);var vf=Object.freeze({__proto__:null,Dexie:Sn,liveQuery:fu,Entity:js,cmp:Ne,PropModification:oi,replacePrefix:hf,add:ff,remove:df,default:Sn,RangeSet:kt,mergeRanges:vi,rangesOverlap:eu});return l(Sn,vf,{default:Sn}),Sn}))})(ha)),ha.exports}var eh=Jd();const $o=Xd(eh),Au=Symbol.for("Dexie"),Aa=globalThis[Au]||(globalThis[Au]=$o);if($o.semVer!==Aa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${$o.semVer} and ${Aa.semVer}`);const{liveQuery:ka,mergeRanges:yp,rangesOverlap:gp,RangeSet:_p,cmp:bp,Entity:wp,PropModification:Ep,replacePrefix:xp,add:Tp,remove:Ap,DexieYProvider:kp}=Aa;function ku(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),a.push.apply(a,s)}return a}function Da(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ku(Object(a),!0).forEach(function(s){Qr(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ku(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function zr(e){"@babel/helpers - typeof";return zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zr(e)}function Qr(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function th(e,r){if(e==null)return{};var a={},s=Object.keys(e),l,f;for(f=0;f<s.length;f++)l=s[f],!(r.indexOf(l)>=0)&&(a[l]=e[l]);return a}function nh(e,r){if(e==null)return{};var a=th(e,r),s,l;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(l=0;l<f.length;l++)s=f[l],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function rh(e,r){return ah(e)||sh(e,r)||ks(e,r)||lh()}function on(e){return ih(e)||oh(e)||ks(e)||uh()}function ih(e){if(Array.isArray(e))return Jo(e)}function ah(e){if(Array.isArray(e))return e}function oh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sh(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var s=[],l=!0,f=!1,h,y;try{for(a=a.call(e);!(l=(h=a.next()).done)&&(s.push(h.value),!(r&&s.length===r));l=!0);}catch(g){f=!0,y=g}finally{try{!l&&a.return!=null&&a.return()}finally{if(f)throw y}}return s}}function ks(e,r){if(e){if(typeof e=="string")return Jo(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Jo(e,r)}}function Jo(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=e[a];return s}function uh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Li(e,r){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=ks(e))||r){a&&(e=a);var s=0,l=function(){};return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,h=!1,y;return{s:function(){a=a.call(e)},n:function(){var g=a.next();return f=g.done,g},e:function(g){h=!0,y=g},f:function(){try{!f&&a.return!=null&&a.return()}finally{if(h)throw y}}}}var ch="finalize",fh="consider";function Xr(e,r,a){e.dispatchEvent(new CustomEvent(ch,{detail:{items:r,info:a}}))}function lr(e,r,a){e.dispatchEvent(new CustomEvent(fh,{detail:{items:r,info:a}}))}var Ga="draggedEntered",Mi="draggedLeft",Ua="draggedOverIndex",Ds="draggedLeftDocument",Ia={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function dh(e,r,a){e.dispatchEvent(new CustomEvent(Ga,{detail:{indexObj:r,draggedEl:a}}))}function hh(e,r,a){e.dispatchEvent(new CustomEvent(Mi,{detail:{draggedEl:r,type:Ia.LEFT_FOR_ANOTHER,theOtherDz:a}}))}function vh(e,r){e.dispatchEvent(new CustomEvent(Mi,{detail:{draggedEl:r,type:Ia.OUTSIDE_OF_ANY}}))}function ph(e,r,a){e.dispatchEvent(new CustomEvent(Ua,{detail:{indexObj:r,draggedEl:a}}))}function mh(e){window.dispatchEvent(new CustomEvent(Ds,{detail:{draggedEl:e}}))}var Kt={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Ga,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Ua,DRAGGED_LEFT:Mi,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Wt={POINTER:"pointer",KEYBOARD:"keyboard"},Ha="isDndShadowItem",Va="data-is-dnd-shadow-item-internal",yh="data-is-dnd-shadow-item-hint",Nl="id:dnd-shadow-placeholder-0000",gh="dnd-action-dragged-el",pt="id",es=0;function Kl(){es++}function Bl(){if(es===0)throw new Error("Bug! trying to decrement when there are no dropzones");es--}var Is=typeof window>"u";function ts(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,s=r?wh(e):e.getBoundingClientRect(),l=getComputedStyle(e),f=l.transform;if(f){var h,y,g,w;if(f.startsWith("matrix3d("))a=f.slice(9,-1).split(/, /),h=+a[0],y=+a[5],g=+a[12],w=+a[13];else if(f.startsWith("matrix("))a=f.slice(7,-1).split(/, /),h=+a[0],y=+a[3],g=+a[4],w=+a[5];else return s;var E=l.transformOrigin,D=s.x-g-(1-h)*parseFloat(E),b=s.y-w-(1-y)*parseFloat(E.slice(E.indexOf(" ")+1)),T=h?s.width/h:e.offsetWidth,R=y?s.height/y:e.offsetHeight;return{x:D,y:b,width:T,height:R,top:b,right:D+T,bottom:b+R,left:D}}else return s}function Fl(e){var r=ts(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function jl(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function zl(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function _h(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function Wa(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function Ii(e){return zl(jl(e))}function Du(e,r){var a=Ii(e),s=Fl(r);return Wa(a,s)}function Iu(e,r){var a=Ii(e),s=Ii(r);return _h(a,s)}function bh(e){var r=jl(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function wh(e){for(var r=e.getBoundingClientRect(),a={top:r.top,bottom:r.bottom,left:r.left,right:r.right},s=!1,l=!1,f=e.parentElement;f&&f!==document.body;){var h=window.getComputedStyle(f),y=h.overflowY,g=h.overflowX,w=y==="scroll"||y==="auto",E=g==="scroll"||g==="auto";if(w||E){var D=f.getBoundingClientRect();if(w){var b=Math.max(a.top,D.top),T=Math.min(a.bottom,D.bottom);(b!==a.top||T!==a.bottom)&&(s=!0),a.top=b,a.bottom=T}if(E){var R=Math.max(a.left,D.left),M=Math.min(a.right,D.right);(R!==a.left||M!==a.right)&&(l=!0),a.left=R,a.right=M}}f=f.parentElement}return s||l?{top:a.top,bottom:a.bottom,left:a.left,right:a.right,width:Math.max(0,a.right-a.left),height:Math.max(0,a.bottom-a.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var Ur;function Ss(){Ur=new Map}Ss();function Eh(e){var r=Array.from(e.children).findIndex(function(a){return a.getAttribute(Va)});if(r>=0)return Ur.has(e)||Ur.set(e,new Map),Ur.get(e).set(r,Fl(e.children[r])),r}function xh(e,r){if(!Du(e,r))return null;var a=r.children;if(a.length===0)return{index:0,isProximityBased:!0};for(var s=Eh(r),l=0;l<a.length;l++)if(Du(e,a[l])){var f=Ur.has(r)&&Ur.get(r).get(l);return f&&!Wa(Ii(e),f)?{index:s,isProximityBased:!1}:{index:l,isProximityBased:!1}}for(var h=Number.MAX_VALUE,y=void 0,g=0;g<a.length;g++){var w=Iu(e,a[g]);w<h&&(h=w,y=g)}if(a.length>0){var E=a.length,D=a[E-1],b=D.cloneNode(!1);b.style.visibility="hidden",b.style.pointerEvents="none",r.appendChild(b);var T=Iu(e,b);T<h&&(y=E),r.removeChild(b)}return{index:y,isProximityBased:!0}}function mi(e){return JSON.stringify(e,null,2)}function Sa(e){if(!e)throw new Error("cannot get depth of a falsy node");return Gl(e,0)}function Gl(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?Gl(e.parentElement,r+1):r-1}function Th(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var a in e)if(!{}.hasOwnProperty.call(r,a)||r[a]!==e[a])return!1;return!0}function Ah(e,r){if(e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}var kh=200,Su=10,ns;function Dh(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kh,s=arguments.length>3?arguments[3]:void 0,l,f,h=!1,y,g=Array.from(r).sort(function(E,D){return Sa(D)-Sa(E)});function w(){var E=Ii(e),D=s.multiScrollIfNeeded();if(!D&&y&&Math.abs(y.x-E.x)<Su&&Math.abs(y.y-E.y)<Su){ns=window.setTimeout(w,a);return}if(bh(e)){mh(e);return}y=E;var b=!1,T=Li(g),R;try{for(T.s();!(R=T.n()).done;){var M=R.value;D&&Ss();var N=xh(e,M);if(N!==null){var P=N.index;b=!0,M!==l?(l&&hh(l,e,M),dh(M,N,e),l=M):P!==f&&(ph(M,N,e),f=P);break}}}catch(H){T.e(H)}finally{T.f()}!b&&h&&l?(vh(l,e),l=void 0,f=void 0,h=!1):h=!0,ns=window.setTimeout(w,a)}w()}function Ih(){clearTimeout(ns),Ss()}var yi=30;function Sh(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function a(f){var h=e,y=h.directionObj,g=h.stepPx;y&&(f.scrollBy(y.x*g,y.y*g),window.requestAnimationFrame(function(){return a(f)}))}function s(f){return yi-f}function l(f,h){if(!h)return!1;var y=Oh(f,h),g=!!e.directionObj;if(y===null)return g&&r(),!1;var w=!1,E=!1;return h.scrollHeight>h.clientHeight&&(y.bottom<yi?(w=!0,e.directionObj={x:0,y:1},e.stepPx=s(y.bottom)):y.top<yi&&(w=!0,e.directionObj={x:0,y:-1},e.stepPx=s(y.top)),!g&&w)||h.scrollWidth>h.clientWidth&&(y.right<yi?(E=!0,e.directionObj={x:1,y:0},e.stepPx=s(y.right)):y.left<yi&&(E=!0,e.directionObj={x:-1,y:0},e.stepPx=s(y.left)),!g&&E)?(a(h),!0):(r(),!1)}return{scrollIfNeeded:l,resetScrolling:r}}function Oh(e,r){var a=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return Wa(e,a)?{top:e.y-a.top,bottom:a.bottom-e.y,left:e.x-a.left,right:a.right-e.x}:null}function Ch(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=Ph(e),s=Array.from(a).sort(function(g,w){return Sa(w)-Sa(g)}),l=Sh(),f=l.scrollIfNeeded,h=l.resetScrolling;function y(){var g=r();if(!g||!s)return!1;for(var w=s.filter(function(b){return Wa(g,b.getBoundingClientRect())||b===document.scrollingElement}),E=0;E<w.length;E++){var D=f(g,w[E]);if(D)return!0}return!1}return{multiScrollIfNeeded:a.size>0?y:function(){return!1},destroy:function(){return h()}}}function Rh(e){if(!e)return[];for(var r=[],a=e;a;){var s=window.getComputedStyle(a),l=s.overflow;l.split(" ").some(function(f){return f.includes("auto")||f.includes("scroll")})&&r.push(a),a=a.parentElement}return r}function Ph(e){var r=new Set,a=Li(e),s;try{for(a.s();!(s=a.n()).done;){var l=s.value;Rh(l).forEach(function(f){return r.add(f)})}}catch(f){a.e(f)}finally{a.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function Lh(e){var r=e.cloneNode(!0),a=[],s=e.tagName==="SELECT",l=s?[e]:on(e.querySelectorAll("select")),f=Li(l),h;try{for(f.s();!(h=f.n()).done;){var y=h.value;a.push(y.value)}}catch(Z){f.e(Z)}finally{f.f()}if(l.length>0)for(var g=s?[r]:on(r.querySelectorAll("select")),w=0;w<g.length;w++){var E=g[w],D=a[w],b=E.querySelector('option[value="'.concat(D,'"'));b&&b.setAttribute("selected",!0)}var T=e.tagName==="CANVAS",R=T?[e]:on(e.querySelectorAll("canvas"));if(R.length>0)for(var M=T?[r]:on(r.querySelectorAll("canvas")),N=0;N<M.length;N++){var P=R[N],H=M[N];H.width=P.width,H.height=P.height,P.width>0&&P.height>0&&H.getContext("2d").drawImage(P,0,0)}return r}var Si=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Mh=Qr({},Si.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Ul(e){if(!Si[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Si)));return Mh[e]}var Nh=.2;function gr(e){return"".concat(e," ").concat(Nh,"s ease")}function Kh(e,r){var a=e.getBoundingClientRect(),s=Lh(e);Hl(e,s),s.id=gh,s.style.position="fixed";var l=a.top,f=a.left;if(s.style.top="".concat(l,"px"),s.style.left="".concat(f,"px"),r){var h=zl(a);l-=h.y-r.y,f-=h.x-r.x,window.setTimeout(function(){s.style.top="".concat(l,"px"),s.style.left="".concat(f,"px")},0)}return s.style.margin="0",s.style.boxSizing="border-box",s.style.height="".concat(a.height,"px"),s.style.width="".concat(a.width,"px"),s.style.transition="".concat(gr("top"),", ").concat(gr("left"),", ").concat(gr("background-color"),", ").concat(gr("opacity"),", ").concat(gr("color")," "),window.setTimeout(function(){return s.style.transition+=", ".concat(gr("width"),", ").concat(gr("height"))},0),s.style.zIndex="9999",s.style.cursor="grabbing",s}function Bh(e){e.style.cursor="grab"}function Fh(e,r,a,s){Hl(r,e);var l=r.getBoundingClientRect(),f=e.getBoundingClientRect(),h=l.width-f.width,y=l.height-f.height;if(h||y){var g={left:(a-f.left)/f.width,top:(s-f.top)/f.height};Ul(Si.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(l.height,"px"),e.style.width="".concat(l.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-g.left*h,"px"),e.style.top="".concat(parseFloat(e.style.top)-g.top*y,"px")}}function Hl(e,r){var a=window.getComputedStyle(e);Array.from(a).filter(function(s){return s.startsWith("background")||s.startsWith("padding")||s.startsWith("font")||s.startsWith("text")||s.startsWith("align")||s.startsWith("justify")||s.startsWith("display")||s.startsWith("flex")||s.startsWith("border")||s==="opacity"||s==="color"||s==="list-style-type"||Ul(Si.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(s==="width"||s==="height")}).forEach(function(s){return r.style.setProperty(s,a.getPropertyValue(s),a.getPropertyPriority(s))})}function jh(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Vl(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function zh(e){e.style.visibility="hidden",e.setAttribute(Va,"true")}function Gh(e){e.style.visibility="",e.removeAttribute(Va)}function va(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(f){s.style[f]=l[f]}),a(s).forEach(function(f){return s.classList.add(f)})})}function Oa(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(f){s.style[f]=""}),a(s).forEach(function(f){return s.classList.contains(f)&&s.classList.remove(f)})})}function Uh(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var a=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=a}}var Hh="--any--",Vh=100,Wh=20,la=3,Yh=80,Ou={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Cu="data-is-dnd-original-dragged-item",zt,gt,Gt,Ya,Je,qa,ar,xt,_n,St,Qn=!1,Os=!1,Cs,Ni=!1,pa=[],xi,bn,_i=!1,cn=new Map,ot=new Map,Bo=new WeakMap;function qh(e,r){cn.has(r)||cn.set(r,new Set),cn.get(r).has(e)||(cn.get(r).add(e),Kl())}function Ru(e,r){cn.get(r).delete(e),Bl(),cn.get(r).size===0&&cn.delete(r)}function Zh(){var e=cn.get(Ya),r=Li(e),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;s.addEventListener(Ga,Wl),s.addEventListener(Mi,Yl),s.addEventListener(Ua,ql)}}catch(h){r.e(h)}finally{r.f()}window.addEventListener(Ds,$r);var l=Math.max.apply(Math,on(Array.from(e.keys()).map(function(h){return ot.get(h).dropAnimationDurationMs}))),f=l===0?Wh:Math.max(l,Vh);xi=Ch(e,function(){return St}),Dh(gt,e,f*1.07,xi)}function Qh(){var e=cn.get(Ya),r=Li(e),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;s.removeEventListener(Ga,Wl),s.removeEventListener(Mi,Yl),s.removeEventListener(Ua,ql)}}catch(l){r.e(l)}finally{r.f()}window.removeEventListener(Ds,$r),xi&&(xi.destroy(),xi=void 0),Ih()}function Za(e){return e.findIndex(function(r){return!!r[Ha]})}function Xh(e){var r;return Da(Da({},e),{},(r={},Qr(r,Ha,!0),Qr(r,pt,Nl),r))}function Wl(e){var r=ot.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==Je)){if(Ni=!1,a=a.filter(function(y){return y[pt]!==ar[pt]&&y[pt]!==Nl}),Je!==e.currentTarget){var l=ot.get(Je).items,f=l.filter(function(y){return!y[Ha]});lr(Je,f,{trigger:Kt.DRAGGED_ENTERED_ANOTHER,id:Gt[pt],source:Wt.POINTER})}var h=e.detail.indexObj.index;xt=e.currentTarget,a.splice(h,0,ar),lr(e.currentTarget,a,{trigger:Kt.DRAGGED_ENTERED,id:Gt[pt],source:Wt.POINTER})}}function Yl(e){if(Qn){var r=ot.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==Je&&e.currentTarget!==xt)){var l=on(a),f=Za(l);f!==-1&&l.splice(f,1);var h=xt;xt=void 0;var y=e.detail,g=y.type,w=y.theOtherDz;if(g===Ia.OUTSIDE_OF_ANY||g===Ia.LEFT_FOR_ANOTHER&&w!==Je&&ot.get(w).dropFromOthersDisabled){Ni=!0,xt=Je;var E=h===Je?l:on(ot.get(Je).items);E.splice(qa,0,ar),lr(Je,E,{trigger:Kt.DRAGGED_LEFT_ALL,id:Gt[pt],source:Wt.POINTER})}lr(e.currentTarget,l,{trigger:Kt.DRAGGED_LEFT,id:Gt[pt],source:Wt.POINTER})}}}function ql(e){var r=ot.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==Je)){var l=on(a);Ni=!1;var f=e.detail.indexObj.index,h=Za(l);h!==-1&&l.splice(h,1),l.splice(f,0,ar),lr(e.currentTarget,l,{trigger:Kt.DRAGGED_OVER_INDEX,id:Gt[pt],source:Wt.POINTER})}}function Ca(e){e.preventDefault();var r=e.touches?e.touches[0]:e;St={x:r.clientX,y:r.clientY},gt.style.transform="translate3d(".concat(St.x-_n.x,"px, ").concat(St.y-_n.y,"px, 0)")}function $r(){Os=!0,window.removeEventListener("mousemove",Ca),window.removeEventListener("touchmove",Ca),window.removeEventListener("mouseup",$r),window.removeEventListener("touchend",$r),Qh(),Bh(gt),xt||(xt=Je);var e=ot.get(xt),r=e.items,a=e.type;Oa(cn.get(a),function(f){return ot.get(f).dropTargetStyle},function(f){return ot.get(f).dropTargetClasses});var s=Za(r);s===-1&&xt===Je&&(s=qa),r=r.map(function(f){return f[Ha]?Gt:f});function l(){Cs(),Xr(xt,r,{trigger:Ni?Kt.DROPPED_OUTSIDE_OF_ANY:Kt.DROPPED_INTO_ZONE,id:Gt[pt],source:Wt.POINTER}),xt!==Je&&Xr(Je,ot.get(Je).items,{trigger:Kt.DROPPED_INTO_ANOTHER,id:Gt[pt],source:Wt.POINTER});var f=Array.from(xt.children).find(function(h){return h.getAttribute(Va)});f&&Gh(f),ev()}ot.get(xt).dropAnimationDisabled?l():$h(s,l)}function $h(e,r){var a=e>-1?ts(xt.children[e],!1):ts(xt,!1),s={x:a.left-parseFloat(gt.style.left),y:a.top-parseFloat(gt.style.top)},l=ot.get(xt),f=l.dropAnimationDurationMs,h="transform ".concat(f,"ms ease");gt.style.transition=gt.style.transition?gt.style.transition+","+h:h,gt.style.transform="translate3d(".concat(s.x,"px, ").concat(s.y,"px, 0)"),window.setTimeout(r,f)}function Jh(e,r){pa.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){Vl(e),document.body.appendChild(e)})}function ev(){gt&&gt.remove&&gt.remove(),zt&&zt.remove&&zt.remove(),gt=void 0,zt=void 0,Gt=void 0,Ya=void 0,Je=void 0,qa=void 0,ar=void 0,xt=void 0,_n=void 0,St=void 0,Qn=!1,Os=!1,Cs=void 0,Ni=!1,bn&&clearTimeout(bn),bn=void 0,_i=!1,pa.length&&(pa.forEach(function(e){var r=e.dz,a=e.destroy;a(),r.remove()}),pa=[])}function tv(e,r){var a=!1,s={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Ou,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},l=new Map;function f(){window.addEventListener("mousemove",g,{passive:!1}),window.addEventListener("touchmove",g,{passive:!1,capture:!1}),window.addEventListener("mouseup",y,{passive:!1}),window.addEventListener("touchend",y,{passive:!1})}function h(){window.removeEventListener("mousemove",g),window.removeEventListener("touchmove",g),window.removeEventListener("mouseup",y),window.removeEventListener("touchend",y),bn&&(clearTimeout(bn),bn=void 0,_i=!1)}function y(b){if(h(),zt=void 0,_n=void 0,St=void 0,b.type==="touchend"){var T=new Event("click",{bubbles:!0,cancelable:!0});b.target.dispatchEvent(T)}}function g(b){var T=!!b.touches,R=T?b.touches[0]:b;if(T&&s.delayTouchStartMs>0&&!_i){St={x:R.clientX,y:R.clientY},(Math.abs(St.x-_n.x)>=la||Math.abs(St.y-_n.y)>=la)&&(bn&&(clearTimeout(bn),bn=void 0),y(b));return}b.preventDefault(),St={x:R.clientX,y:R.clientY},(Math.abs(St.x-_n.x)>=la||Math.abs(St.y-_n.y)>=la)&&(h(),E())}function w(b){if(!(b.target!==b.currentTarget&&(b.target.value!==void 0||b.target.isContentEditable))&&!b.button&&!Qn){var T=!!b.touches,R=T&&s.delayTouchStartMs>0;R||b.preventDefault(),b.stopPropagation();var M=T?b.touches[0]:b;_n={x:M.clientX,y:M.clientY},St=Da({},_n),zt=b.currentTarget,R&&(_i=!1,bn=window.setTimeout(function(){zt&&(_i=!0,h(),E())},s.delayTouchStartMs)),f()}}function E(){Qn=!0;var b=l.get(zt);qa=b,Je=zt.parentElement;var T=Je.closest("dialog")||Je.closest("[popover]")||Je.getRootNode(),R=T.body||T,M=s.items,N=s.type,P=s.centreDraggedOnCursor,H=on(M);Gt=H[b],Ya=N,ar=Xh(Gt),gt=Kh(zt,P&&St),R.appendChild(gt);function Z(){zt.parentElement?window.requestAnimationFrame(Z):(zt.setAttribute(Cu,!0),R.appendChild(zt),Zh(),Vl(zt),ar[pt]=Gt[pt],gt.focus())}window.requestAnimationFrame(Z),va(Array.from(cn.get(s.type)).filter(function(W){return W===Je||!ot.get(W).dropFromOthersDisabled}),function(W){return ot.get(W).dropTargetStyle},function(W){return ot.get(W).dropTargetClasses}),H.splice(b,1,ar),Cs=Uh(Je),lr(Je,H,{trigger:Kt.DRAG_STARTED,id:Gt[pt],source:Wt.POINTER}),window.addEventListener("mousemove",Ca,{passive:!1}),window.addEventListener("touchmove",Ca,{passive:!1,capture:!1}),window.addEventListener("mouseup",$r,{passive:!1}),window.addEventListener("touchend",$r,{passive:!1})}function D(b){var T=b.items,R=T===void 0?void 0:T,M=b.flipDurationMs,N=M===void 0?0:M,P=b.type,H=P===void 0?Hh:P,Z=b.dragDisabled,W=Z===void 0?!1:Z,te=b.morphDisabled,ae=te===void 0?!1:te,ve=b.dropFromOthersDisabled,me=ve===void 0?!1:ve,de=b.dropTargetStyle,xe=de===void 0?Ou:de,we=b.dropTargetClasses,ke=we===void 0?[]:we,it=b.transformDraggedElement,He=it===void 0?function(){}:it,lt=b.centreDraggedOnCursor,vt=lt===void 0?!1:lt,je=b.dropAnimationDisabled,Bt=je===void 0?!1:je,We=b.delayTouchStart,Qe=We===void 0?!1:We;s.dropAnimationDurationMs=N;var ct=0;Qe===!0?ct=Yh:typeof Qe=="number"&&isFinite(Qe)&&Qe>=0&&(ct=Qe),s.delayTouchStartMs=ct,s.type&&H!==s.type&&Ru(e,s.type),s.type=H,s.items=on(R),s.dragDisabled=W,s.morphDisabled=ae,s.transformDraggedElement=He,s.centreDraggedOnCursor=vt,s.dropAnimationDisabled=Bt,a&&Qn&&!Os&&(!Th(xe,s.dropTargetStyle)||!Ah(ke,s.dropTargetClasses))&&(Oa([e],function(){return s.dropTargetStyle},function(){return ke}),va([e],function(){return xe},function(){return ke})),s.dropTargetStyle=xe,s.dropTargetClasses=on(ke);function Ft(Ye,bt){return ot.get(Ye)?ot.get(Ye)[bt]:s[bt]}a&&Qn&&s.dropFromOthersDisabled!==me&&(me?Oa([e],function(Ye){return Ft(Ye,"dropTargetStyle")},function(Ye){return Ft(Ye,"dropTargetClasses")}):va([e],function(Ye){return Ft(Ye,"dropTargetStyle")},function(Ye){return Ft(Ye,"dropTargetClasses")})),s.dropFromOthersDisabled=me,ot.set(e,s),qh(e,H);for(var sn=Qn?Za(s.items):-1,_t=0;_t<e.children.length;_t++){var et=e.children[_t];if(jh(et,W),_t===sn){ae||Fh(gt,et,St.x,St.y),s.transformDraggedElement(gt,Gt,_t),zh(et);continue}et.removeEventListener("mousedown",Bo.get(et)),et.removeEventListener("touchstart",Bo.get(et)),W||(et.addEventListener("mousedown",w),et.addEventListener("touchstart",w),Bo.set(et,w)),l.set(et,_t),a||(a=!0)}}return D(r),{update:function(T){D(T)},destroy:function(){function T(){Ru(e,ot.get(e).type),ot.delete(e)}Qn&&!e.closest("[".concat(Cu,"]"))?Jh(e,T):T()}}}var ca,rs={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Zl=(ca={},Qr(ca,rs.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Qr(ca,rs.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),ca),nv="dnd-action-aria-alert",ht;function is(){ht||(ht=document.createElement("div"),(function(){ht.id=nv,ht.style.position="fixed",ht.style.bottom="0",ht.style.left="0",ht.style.zIndex="-5",ht.style.opacity="0",ht.style.height="0",ht.style.width="0",ht.setAttribute("role","alert")})(),document.body.prepend(ht),Object.entries(Zl).forEach(function(e){var r=rh(e,2),a=r[0],s=r[1];return document.body.prepend(av(a,s))}))}function rv(){return Is?null:(document.readyState==="complete"?is():window.addEventListener("DOMContentLoaded",is),Da({},rs))}function iv(){Is||!ht||(Object.keys(Zl).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),ht.remove(),ht=void 0)}function av(e,r){var a=document.createElement("div");return a.id=e,a.innerHTML="<p>".concat(r,"</p>"),a.style.display="none",a.style.position="fixed",a.style.zIndex="-5",a}function Hr(e){if(!Is){ht||is(),ht.innerHTML="";var r=document.createTextNode(e);ht.appendChild(r),ht.style.display="none",ht.style.display="inline"}}var ov="--any--",Pu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},tn=!1,as,Ct,Tr="",_r,wn,Jn="",Ra=new WeakSet,Lu=new WeakMap,Mu=new WeakMap,os=new Map,Et=new Map,ln=new Map,Pa;function sv(e,r){ln.size===0&&(Pa=rv(),window.addEventListener("keydown",Ql),window.addEventListener("click",Xl)),ln.has(r)||ln.set(r,new Set),ln.get(r).has(e)||(ln.get(r).add(e),Kl())}function Nu(e,r){Ct===e&&Oi(),ln.get(r).delete(e),Bl(),ln.get(r).size===0&&ln.delete(r),ln.size===0&&(window.removeEventListener("keydown",Ql),window.removeEventListener("click",Xl),Pa=void 0,iv())}function Ql(e){if(tn)switch(e.key){case"Escape":{Oi();break}}}function Xl(){tn&&(Ra.has(document.activeElement)||Oi())}function uv(e){if(tn){var r=e.currentTarget;if(r!==Ct){Tr=r.getAttribute("aria-label")||"";var a=Et.get(Ct),s=a.items,l=s.find(function(D){return D[pt]===wn}),f=s.indexOf(l),h=s.splice(f,1)[0],y=Et.get(r),g=y.items,w=y.autoAriaDisabled;r.getBoundingClientRect().top<Ct.getBoundingClientRect().top||r.getBoundingClientRect().left<Ct.getBoundingClientRect().left?(g.push(h),w||Hr("Moved item ".concat(Jn," to the end of the list ").concat(Tr))):(g.unshift(h),w||Hr("Moved item ".concat(Jn," to the beginning of the list ").concat(Tr)));var E=Ct;Xr(E,s,{trigger:Kt.DROPPED_INTO_ANOTHER,id:wn,source:Wt.KEYBOARD}),Xr(r,g,{trigger:Kt.DROPPED_INTO_ZONE,id:wn,source:Wt.KEYBOARD}),Ct=r}}}function $l(){os.forEach(function(e,r){var a=e.update;return a(Et.get(r))})}function Oi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Et.get(Ct).autoAriaDisabled||Hr("Stopped dragging item ".concat(Jn)),Ra.has(document.activeElement)&&document.activeElement.blur(),e&&lr(Ct,Et.get(Ct).items,{trigger:Kt.DRAG_STOPPED,id:wn,source:Wt.KEYBOARD}),Oa(ln.get(as),function(r){return Et.get(r).dropTargetStyle},function(r){return Et.get(r).dropTargetClasses}),_r=null,wn=null,Jn="",as=null,Ct=null,Tr="",tn=!1,$l()}function lv(e,r){var a={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Pu,dropTargetClasses:[],autoAriaDisabled:!1};function s(E,D,b){E.length<=1||E.splice(b,1,E.splice(D,1,E[b])[0])}function l(E){switch(E.key){case"Enter":case" ":{if((E.target.disabled!==void 0||E.target.href||E.target.isContentEditable)&&!Ra.has(E.target))return;E.preventDefault(),E.stopPropagation(),tn?Oi():f(E);break}case"ArrowDown":case"ArrowRight":{if(!tn)return;E.preventDefault(),E.stopPropagation();var D=Et.get(e),b=D.items,T=Array.from(e.children),R=T.indexOf(E.currentTarget);R<T.length-1&&(a.autoAriaDisabled||Hr("Moved item ".concat(Jn," to position ").concat(R+2," in the list ").concat(Tr)),s(b,R,R+1),Xr(e,b,{trigger:Kt.DROPPED_INTO_ZONE,id:wn,source:Wt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!tn)return;E.preventDefault(),E.stopPropagation();var M=Et.get(e),N=M.items,P=Array.from(e.children),H=P.indexOf(E.currentTarget);H>0&&(a.autoAriaDisabled||Hr("Moved item ".concat(Jn," to position ").concat(H," in the list ").concat(Tr)),s(N,H,H-1),Xr(e,N,{trigger:Kt.DROPPED_INTO_ZONE,id:wn,source:Wt.KEYBOARD}));break}}}function f(E){y(E.currentTarget),Ct=e,as=a.type,tn=!0;var D=Array.from(ln.get(a.type)).filter(function(T){return T===Ct||!Et.get(T).dropFromOthersDisabled});if(va(D,function(T){return Et.get(T).dropTargetStyle},function(T){return Et.get(T).dropTargetClasses}),!a.autoAriaDisabled){var b="Started dragging item ".concat(Jn,". Use the arrow keys to move it within its list ").concat(Tr);D.length>1&&(b+=", or tab to another list in order to move the item into it"),Hr(b)}lr(e,Et.get(e).items,{trigger:Kt.DRAG_STARTED,id:wn,source:Wt.KEYBOARD}),$l()}function h(E){tn&&E.currentTarget!==_r&&(E.stopPropagation(),Oi(!1),f(E))}function y(E){var D=Et.get(e),b=D.items,T=Array.from(e.children),R=T.indexOf(E);_r=E,_r.tabIndex=a.zoneItemTabIndex,wn=b[R][pt],Jn=T[R].getAttribute("aria-label")||""}function g(E){var D=E.items,b=D===void 0?[]:D,T=E.type,R=T===void 0?ov:T,M=E.dragDisabled,N=M===void 0?!1:M,P=E.zoneTabIndex,H=P===void 0?0:P,Z=E.zoneItemTabIndex,W=Z===void 0?0:Z,te=E.dropFromOthersDisabled,ae=te===void 0?!1:te,ve=E.dropTargetStyle,me=ve===void 0?Pu:ve,de=E.dropTargetClasses,xe=de===void 0?[]:de,we=E.autoAriaDisabled,ke=we===void 0?!1:we;a.items=on(b),a.dragDisabled=N,a.dropFromOthersDisabled=ae,a.zoneTabIndex=H,a.zoneItemTabIndex=W,a.dropTargetStyle=me,a.dropTargetClasses=xe,a.autoAriaDisabled=ke,a.type&&R!==a.type&&Nu(e,a.type),a.type=R,sv(e,R),ke||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",N?Pa.DND_ZONE_DRAG_DISABLED:Pa.DND_ZONE_ACTIVE)),Et.set(e,a),tn?e.tabIndex=e===Ct||_r.contains(e)||a.dropFromOthersDisabled||Ct&&a.type!==Et.get(Ct).type?-1:0:e.tabIndex=a.zoneTabIndex,e.addEventListener("focus",uv);for(var it=function(vt){var je=e.children[vt];Ra.add(je),je.tabIndex=tn?-1:a.zoneItemTabIndex,ke||je.setAttribute("role","listitem"),je.removeEventListener("keydown",Lu.get(je)),je.removeEventListener("click",Mu.get(je)),N||(je.addEventListener("keydown",l),Lu.set(je,l),je.addEventListener("click",h),Mu.set(je,h)),tn&&a.items[vt][pt]===wn&&(_r=je,_r.tabIndex=a.zoneItemTabIndex,je.focus())},He=0;He<e.children.length;He++)it(He)}g(r);var w={update:function(D){g(D)},destroy:function(){Nu(e,a.type),Et.delete(e),os.delete(e)}};return os.set(e,w),w}var cv=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function ss(e,r){if(fv(e))return{update:function(){},destroy:function(){}};Ku(r);var a=tv(e,r),s=lv(e,r);return{update:function(f){Ku(f),a.update(f),s.update(f)},destroy:function(){a.destroy(),s.destroy()}}}function fv(e){return!!e.closest("[".concat(yh,'="true"]'))}function Ku(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var a=e.zoneTabIndex,s=e.zoneItemTabIndex;e.dropTargetStyle;var l=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var f=e.delayTouchStart;e.dropAnimationDisabled;var h=nh(e,cv);if(Object.keys(h).length>0&&console.warn("dndzone will ignore unknown options",h),!r)throw new Error("no 'items' key provided to dndzone");var y=r.find(function(E){return!{}.hasOwnProperty.call(E,pt)});if(y)throw new Error("missing '".concat(pt,"' property for item ").concat(mi(y)));if(l&&!Array.isArray(l))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(zr(l),", ").concat(mi(l)));if(a&&!Bu(a))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(zr(a),", ").concat(mi(a)));if(s&&!Bu(s))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(zr(s),", ").concat(mi(s)));if(f!==void 0&&f!==!1){var g=f===!0,w=typeof f=="number"&&isFinite(f)&&f>=0;if(!g&&!w)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(zr(f),", ").concat(mi(f)))}}function Bu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}const Ie=new Aa("TaskPlannerDB");Ie.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Ie.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));Ie.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));Ie.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify(r=>{r.archivedAt===void 0&&(r.archivedAt=null)}));Ie.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify((r,a)=>{r.columnIndex===void 0&&(r.columnIndex=r.order%5)}));function Qa(e){return e.length===0?0:Math.max(...e.map(a=>a.order))+1}async function dv(){return(await Ie.lists.orderBy("order").toArray()).filter(r=>r.archivedAt==null)}async function hv(){return await Ie.lists.orderBy("order").toArray()}async function Fu(e,r=null){const a=e.trim();if(a==="")throw new Error("List name cannot be empty or whitespace-only");const s=await Ie.lists.orderBy("order").toArray(),l=Qa(s),f=5;let h;return r!==null&&r>=0&&r<f?h=r:h=l%f,await Ie.lists.add({name:a,order:l,archivedAt:null,columnIndex:h})}async function vv(e=null){const r=await Ie.lists.orderBy("order").toArray(),a=Qa(r),s=5;let l;return e!==null&&e>=0&&e<s?l=e:l=a%s,await Ie.lists.add({name:null,order:a,archivedAt:null,columnIndex:l})}async function pv(e,r){const a=r.trim();if(a==="")throw new Error("List name cannot be empty");return await Ie.lists.update(e,{name:a})}async function Fo(e){return await Ie.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function mv(){return(await Ie.tasks.where("status").equals("archived").toArray()).sort((r,a)=>{const s=r.archivedAt||0,l=a.archivedAt||0;return l!==s?l-s:(a.order||0)-(r.order||0)})}async function yv(e,r,a=null){let s=e;e===null&&(s=await vv(a));const l=await Ie.tasks.where("listId").equals(s).filter(g=>g.status!=="archived").sortBy("order"),f=Qa(l),h=r===""?"":r.trim();return await Ie.tasks.add({text:h,listId:s,order:f,status:"unchecked"})}async function gv(e,r){const a=r===""?"":r.trim();return await Ie.tasks.update(e,{text:a})}async function ju(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const a={status:r};return r==="archived"?a.archivedAt=Date.now():r!=="archived"&&(a.archivedAt=null),await Ie.tasks.update(e,a)}async function _v(e){const r=await Ie.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const a=await Ie.lists.get(r.listId);if(!a)throw new Error(`Task's list ${r.listId} not found`);let s=!1;a.archivedAt!=null&&(await wv(r.listId),s=!0);const l=await Ie.tasks.where("listId").equals(r.listId).filter(y=>y.status!=="archived"&&y.id!==e).sortBy("order"),f=Qa(l);return{taskUpdated:await Ie.tasks.update(e,{status:"checked",order:f}),listRestored:s}}async function jo(e,r){if(!r||r.length===0)return;const a=r.map(y=>y.id),l=(await Ie.tasks.bulkGet(a)).filter(y=>y!==void 0);if(l.length===0)return;const f=l.filter(y=>y.listId!==e),h=new Set(f.map(y=>y.listId));await Ie.transaction("rw",Ie.tasks,async()=>{for(let y=0;y<r.length;y++){const g=r[y].id,w=l.find(D=>D.id===g);if(!w)continue;const E={order:y};w.listId!==e&&(E.listId=e),await Ie.tasks.update(g,E)}for(const y of h){const g=await Ie.tasks.where("listId").equals(y).filter(w=>w.status!=="archived").sortBy("order");for(let w=0;w<g.length;w++)await Ie.tasks.update(g[w].id,{order:w})}})}async function bv(e){const r=Date.now();return await Ie.lists.update(e,{archivedAt:r})}async function wv(e){return await Ie.lists.update(e,{archivedAt:null})}async function Ev(e){const r=Date.now(),a=await Ie.tasks.where("listId").equals(e).filter(l=>l.status==="unchecked"||l.status==="checked").toArray(),s=a.map(l=>Ie.tasks.update(l.id,{status:"archived",archivedAt:r}));return await Promise.all(s),a.length}async function zu(e,r){if(!r||r.length===0)return;if(e<0||e>=5)throw new Error(`Invalid column index: ${e}`);const a=r.map(y=>y.id),s=await Ie.lists.bulkGet(a);if(s.filter(y=>!y).length>0)throw new Error("Cannot update order: some lists do not exist");const f=s.filter(y=>y!==void 0),h=f.filter(y=>(y.columnIndex??0)!==e);new Set(h.map(y=>y.columnIndex??0)),await Ie.transaction("rw",Ie.lists,async()=>{const y=new Set;for(let b=0;b<r.length;b++){const T=r[b].id,R=f.find(P=>P.id===T);if(!R)continue;const M={order:b},N=R.columnIndex??0;N!==e&&(M.columnIndex=e,y.add(N)),await Ie.lists.update(T,M)}const w=(await Ie.lists.orderBy("order").toArray()).filter(b=>b.archivedAt==null),E=Array(5).fill(null).map(()=>[]);for(const b of w){const T=b.columnIndex??0,R=T>=5?4:T;E[R].push(b)}const D=new Set([e,...y]);for(const b of D){const T=E[b];T.sort((R,M)=>(R.order??0)-(M.order??0));for(let R=0;R<T.length;R++)await Ie.lists.update(T[R].id,{order:R})}})}const La=160,Jl=150,us=1056,xv=816,Ma=16;var Tv=Pe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),Av=Pe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function kv(e,r){Ir(r,!0);let a=ye(Xt(r.taskText||"")),s=ye(!1),l=ye(null),f=ye(null),h=Ot(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const M=24,N=24,P=Ma,Z=M+N+P+8-8,W=10,te=r.taskPosition.top-Z,ae=r.taskPosition.left-Ma+W,ve=r.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${te}px; left: ${ae}px; width: ${ve}px;`});rt(()=>{r.isOpen&&(I(a,r.taskText||"",!0),I(s,!1))}),rt(()=>{r.isOpen&&p(l)&&setTimeout(()=>{p(l)?.focus(),p(l)?.select(),p(l)instanceof HTMLTextAreaElement&&(p(l).style.height="auto",p(l).style.height=`${Math.min(p(l).scrollHeight,La)}px`)},0)}),rt(()=>{if(p(l)&&p(l)instanceof HTMLTextAreaElement){const M=()=>{p(l).style.height="auto",p(l).style.height=`${Math.min(p(l).scrollHeight,La)}px`};return p(l).addEventListener("input",M),()=>{p(l).removeEventListener("input",M)}}});function y(){const M=p(a)??"",N=M.trim();if(N===""&&M.length>0){r.onSave(r.taskId,""),I(s,!1);return}if(M===""||N===""){I(s,!0);return}r.onSave(r.taskId,N),I(s,!1)}function g(){I(a,r.taskText||"",!0),I(s,!1),r.onCancel()}function w(M){M.target===M.currentTarget&&g()}function E(M){if(M.key==="Tab"){if(!p(f))return;const N=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),P=Array.from(p(f).querySelectorAll(N)).filter(ae=>!(!(ae instanceof HTMLElement)||ae.hasAttribute("disabled")||ae.getAttribute("aria-hidden")==="true"));if(P.length===0)return;const H=document.activeElement,Z=P.indexOf(H);let W;M.shiftKey?Z<=0?W=P.length-1:W=Z-1:Z===-1||Z===P.length-1?W=0:W=Z+1,M.preventDefault(),M.stopPropagation();const te=P[W];te&&te instanceof HTMLElement&&te.focus()}else M.key==="Escape"?g():M.key==="Enter"&&!M.shiftKey&&document.activeElement===p(l)&&(M.preventDefault(),y())}function D(){r.onArchive&&r.onArchive(r.taskId)}var b=rr(),T=Tt(b);{var R=M=>{var N=Av();N.__click=w,N.__keydown=E;var P=Ae(N);P.__click=we=>we.stopPropagation();var H=Re(Ae(P),2),Z=Ae(H);Tn(Z,we=>I(l,we),()=>p(l));var W=Re(Z,2);{var te=we=>{var ke=Tv();Te(we,ke)};ut(W,we=>{p(s)&&we(te)})}var ae=Re(H,2),ve=Ae(ae);ve.__click=D;var me=Re(ve,2),de=Ae(me);de.__click=g;var xe=Re(de,2);xe.__click=y,Tn(P,we=>I(f,we),()=>p(f)),st(we=>{ir(P,we),ir(Z,`width: ${Jl}px;`),yt(Z,"aria-describedby",p(s)?"validation-message":void 0),xe.disabled=p(s),yt(xe,"aria-label",p(s)?"Save disabled: task cannot be empty":"Save task changes")},[()=>p(h)()]),Ts(Z,()=>p(a),we=>I(a,we)),Te(M,N)};ut(T,M=>{r.isOpen&&M(R)})}Te(e,b),Sr()}ni(["click","keydown"]);var Dv=Pe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),Iv=Pe('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-red-600 border border-red-300 rounded hover:bg-red-50" aria-label="Archive this list">Archive</button> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div>',1),Sv=Pe('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-gray-600">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel archiving">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700" aria-label="Confirm archive list">Archive</button></div>',1),Ov=Pe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed box-border" role="document"><!></div></div>');function Cv(e,r){Ir(r,!0);let a=ye(Xt(r.listName||"")),s=ye(!1),l=ye(null),f=ye(null),h=ye("edit"),y=Ot(()=>()=>{if(!r.listPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const H=24,Z=24,W=Ma,ae=H+Z+W+8-8,ve=r.listPosition.top-ae,me=r.listPosition.left-Ma,de=Math.max(r.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${ve}px; left: ${me}px; width: ${de}px; max-width: ${de}px; box-sizing: border-box;`});rt(()=>{r.isOpen&&(I(a,r.listName||"",!0),I(s,!1),I(h,"edit"))}),rt(()=>{r.isOpen&&p(l)&&setTimeout(()=>{p(l)?.focus(),p(l)?.select()},0)});function g(){const Z=(p(a)??"").trim();if(Z===""){I(s,!0);return}r.onSave(r.listId,Z),I(s,!1)}function w(){I(a,r.listName||"",!0),I(s,!1),r.onCancel()}function E(H){H.target===H.currentTarget&&w()}function D(H){if(H.key==="Tab"){if(!p(f))return;const Z=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),W=Array.from(p(f).querySelectorAll(Z)).filter(de=>!(!(de instanceof HTMLElement)||de.hasAttribute("disabled")||de.getAttribute("aria-hidden")==="true"));if(W.length===0)return;const te=document.activeElement,ae=W.indexOf(te);let ve;H.shiftKey?ae<=0?ve=W.length-1:ve=ae-1:ae===-1||ae===W.length-1?ve=0:ve=ae+1,H.preventDefault(),H.stopPropagation();const me=W[ve];me&&me instanceof HTMLElement&&me.focus()}else H.key==="Escape"?p(h)==="confirm-archive"?R():w():H.key==="Enter"&&!H.shiftKey&&p(h)==="edit"&&H.target===p(l)&&(H.preventDefault(),g())}function b(){I(h,"confirm-archive")}function T(){r.onArchive(r.listId),w()}function R(){I(h,"edit")}var M=rr(),N=Tt(M);{var P=H=>{var Z=Ov();Z.__click=E,Z.__keydown=D;var W=Ae(Z);W.__click=me=>me.stopPropagation();var te=Ae(W);{var ae=me=>{var de=Iv(),xe=Re(Tt(de),2),we=Ae(xe);Tn(we,We=>I(l,We),()=>p(l));var ke=Re(we,2);{var it=We=>{var Qe=Dv();Te(We,Qe)};ut(ke,We=>{p(s)&&We(it)})}var He=Re(xe,2),lt=Ae(He);lt.__click=b;var vt=Re(lt,2),je=Ae(vt);je.__click=w;var Bt=Re(je,2);Bt.__click=g,st(()=>{yt(we,"aria-describedby",p(s)?"validation-message":void 0),Bt.disabled=p(s),yt(Bt,"aria-label",p(s)?"Save disabled: list name cannot be empty":"Save list name changes")}),Ts(we,()=>p(a),We=>I(a,We)),Te(me,de)},ve=me=>{var de=rr(),xe=Tt(de);{var we=ke=>{var it=Sv(),He=Re(Tt(it),4),lt=Ae(He);lt.__click=R;var vt=Re(lt,2);vt.__click=T,Te(ke,it)};ut(xe,ke=>{p(h)==="confirm-archive"&&ke(we)},!0)}Te(me,de)};ut(te,me=>{p(h)==="edit"?me(ae):me(ve,!1)})}Tn(W,me=>I(f,me),()=>p(f)),st(me=>ir(W,me),[()=>p(y)()]),Te(H,Z)};ut(N,H=>{r.isOpen&&H(P)})}Te(e,M),Sr()}ni(["click","keydown"]);var Rv=Pe('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea class="flex-1 break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div>',1),Pv=Pe('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1" role="button" tabindex="0"> </span>',1),Lv=Pe('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-full print:hidden add-task-container add-task-button mt-2 svelte-jtbpvm"><!></div>');function zo(e,r){Ir(r,!0);let a=Cn(r,"isInputActive",11,!1),s=Cn(r,"inputValue",3,""),l=Cn(r,"buttonText",3,"Add Task"),f=Cn(r,"placeholder",3,"Add new task..."),h=Cn(r,"marginLeft",3,!1),y=Cn(r,"containerElement",15,null),g=Cn(r,"textareaElement",15,null),w=ye(null),E=ye(null);rt(()=>{y(p(E)),g(p(w))}),rt(()=>{a()&&p(w)&&setTimeout(()=>{p(w)?.focus(),p(w)instanceof HTMLTextAreaElement&&(p(w).style.height="auto",p(w).style.height=`${Math.min(p(w).scrollHeight,La)}px`)},0)}),rt(()=>{if(p(w)&&p(w)instanceof HTMLTextAreaElement){const P=()=>{p(w).style.height="auto",p(w).style.height=`${Math.min(p(w).scrollHeight,La)}px`};return p(w).addEventListener("input",P),()=>{p(w).removeEventListener("input",P)}}});function D(P){P.key==="Enter"&&!P.shiftKey?(P.preventDefault(),r.onSave?.()):P.key==="Escape"?r.onEscape?.(P):P.key==="Tab"&&r.onSave?.({closeAfterSave:!0})}function b(P){(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),r.onActivate?.())}var T=Lv(),R=Ae(T);{var M=P=>{var H=Rv(),Z=Re(Tt(H),4),W=Ae(Z);W.__input=ae=>r.onInputChange?.(ae.currentTarget.value),W.__keydown=D,Tn(W,ae=>I(w,ae),()=>p(w));var te=Re(W,2);te.__click=function(...ae){r.onSave?.apply(this,ae)},st(()=>{yt(W,"placeholder",f()),Vd(W,s())}),Te(P,H)},N=P=>{var H=Pv(),Z=Re(Tt(H),4);Z.__click=function(...te){r.onActivate?.apply(this,te)},Z.__keydown=b;var W=Ae(Z);st(()=>{yt(Z,"aria-label",r.ariaLabel||l()),$n(W,l())}),Te(P,H)};ut(R,P=>{a()?P(M):P(N,!1)})}Tn(T,P=>I(E,P),()=>p(E)),st(()=>ir(T,h()?"margin-left: 1.5rem;":"")),Te(e,T),Sr()}ni(["input","keydown","click"]);function ec(e,r,a={}){const{ignoreElements:s=[],shouldClose:l=()=>!0,checkIgnoreClick:f=null}=a;function h(g){const w=typeof e=="function"?e():e;if(w&&!w.contains(g.target)&&!(f&&f(g))){for(const E of s){let D=null;if(typeof E=="function"?D=E():D=E,D&&D.contains(g.target))return}l()&&r()}}const y=setTimeout(()=>{document.addEventListener("click",h)},0);return()=>{clearTimeout(y),document.removeEventListener("click",h)}}function ls(e){return e===""}function Mv(e){return e.trim()===""&&e.length>0}function cs(e){const r=e.trim(),a=Mv(e);return{text:a?"":r,isBlank:a}}var Nv=Pe('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),Kv=Pe('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-full m-0 list-none svelte-k6mizj"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),Bv=Pe('<div class="empty-list-add-task-wrapper svelte-k6mizj"><!></div>'),Fv=Pe('<div class="task-list-wrapper m-0 p-0 svelte-k6mizj"><ul></ul> <!></div>'),jv=Pe("<p>Loading tasks...</p> <!>",1),zv=Pe('<div class="flex flex-col gap-1 m-0 p-0 svelte-k6mizj"><div class="flex items-center gap-2 m-0 p-0"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder list" tabindex="-1" aria-hidden="true"></span> <h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 p-0 leading-none svelte-k6mizj"> </h2></div> <!></div> <!> <!>',1);function Gv(e,r){Ir(r,!0);const a=()=>xa(p(y),"$tasksQuery",s),[s,l]=As();let f=Cn(r,"allLists",19,()=>[]),h=Cn(r,"stableLists",19,()=>[]),y=ye(null),g=ye(Xt([])),w=ye(!1),E=ye(!1),D=ye(null),b=ye(""),T=ye(null),R=ye(null),M=ye(null),N=ye(!1),P=ye(null),H=ye(null),Z=ye(null),W=ye(null),te=ye(null),ae=ye(null),ve=ye(!1),me=ye(!1),de=ye(null),xe=ye(null);function we(F){return Array.isArray(F)?[...F].sort((B,L)=>{const ue=B?.columnIndex??0,oe=L?.columnIndex??0;if(ue!==oe)return ue-oe;const Ge=B?.order??0,Ee=L?.order??0;if(Ge!==Ee)return Ge-Ee;const le=B?.id??0,Se=L?.id??0;return le-Se}):[]}function ke(F,B,L){const ue=we(B);if(!ue.length)return null;const oe=ue.findIndex(Ge=>Ge.id===F);return oe===-1?null:L==="next"?oe>=ue.length-1?null:ue[oe+1].id:L==="prev"?oe<=0?null:ue[oe-1].id:null}rt(()=>{h().some(B=>B.id===r.listId)&&r.listId?(!p(y)||p(xe)!==r.listId)&&(Ta(I(y,ka(()=>Fo(r.listId)),!0),"$tasksQuery",s),I(xe,r.listId,!0)):(Ta(I(y,null),"$tasksQuery",s),I(xe,null))}),rt(()=>{a()&&Array.isArray(a())&&I(g,a().filter(F=>F.status==="unchecked"||F.status==="checked"),!0)}),rt(()=>{if(!p(Z))return;function F(B){const L=B.target;if((B.key==="Enter"||B.key===" ")&&L instanceof HTMLElement&&L.tagName==="H2"&&L.hasAttribute("role")&&L.getAttribute("role")==="button"){const ue=p(Z)?.querySelector('h2[role="button"]');if(ue&&L===ue){B.preventDefault(),B.stopImmediatePropagation();const oe=L.getBoundingClientRect();I(P,{top:oe.top,left:oe.left,width:oe.width,height:oe.height},!0),I(H,L,!0),I(N,!0)}}}return p(Z).addEventListener("keydown",F,!0),()=>{p(Z)&&p(Z).removeEventListener("keydown",F,!0)}}),rt(()=>{if(!p(W))return;function F(B){const L=B.target;if((B.key==="Enter"||B.key===" ")&&L instanceof HTMLElement&&L.hasAttribute("role")&&L.getAttribute("role")==="button"){const ue=p(W)?.querySelector('span[role="button"]');ue&&L===ue&&(B.preventDefault(),B.stopImmediatePropagation(),We())}}return p(W).addEventListener("keydown",F,!0),()=>{p(W)&&p(W).removeEventListener("keydown",F,!0)}}),rt(()=>{if(!p(M))return;async function F(B){const L=B.target;if((B.key==="Enter"||B.key===" ")&&L instanceof HTMLElement&&L.hasAttribute("data-no-drag")){B.preventDefault(),B.stopImmediatePropagation();const ue=L.closest("li[data-id]");if(ue){const oe=parseInt(ue.getAttribute("data-id")),Ge=p(g).find(Ee=>Ee.id===oe);if(Ge){const Ee=L.getBoundingClientRect();I(T,{top:Ee.top,left:Ee.left,width:Ee.width,height:Ee.height},!0),I(R,L,!0),I(D,oe,!0),I(b,Ge.text,!0),I(E,!0)}}return}if(B.key==="ArrowDown"||B.key==="ArrowUp"){const ue=document.activeElement;if(!ue)return;const oe=ue.closest("li[data-id]");if(!oe||!p(M).contains(oe))return;const Ge=oe.getAttribute("data-id");if(!Ge)return;const Ee=parseInt(Ge);if(!p(g).find(Me=>Me.id===Ee))return;const Se=p(g).findIndex(Me=>Me.id===Ee),Xe=Se===0,tt=Se===p(g).length-1;if(B.key==="ArrowDown"&&tt){B.preventDefault(),B.stopImmediatePropagation();const Me=ke(r.listId,f(),"next");Me!=null&&await it(Ee,Me)}else if(B.key==="ArrowUp"&&Xe){B.preventDefault(),B.stopImmediatePropagation();const Me=ke(r.listId,f(),"prev");Me!=null&&await He(Ee,Me)}}}return p(M).addEventListener("keydown",F,!0),()=>{p(M).removeEventListener("keydown",F,!0)}});async function it(F,B){try{const L=await Fo(B),ue=[{id:F},...L];await jo(B,ue)}catch(L){console.error("Error moving task to next list:",L)}}async function He(F,B){try{const ue=[...await Fo(B),{id:F}];await jo(B,ue)}catch(L){console.error("Error moving task to previous list:",L)}}function lt(F){I(g,F.detail.items.filter(B=>B&&typeof B.id=="number"),!0)}function vt(F,B){const L=F.key,ue=F.currentTarget,oe=F.target;!(ue instanceof HTMLElement)||ue!==oe||(L==="Enter"||L===" "?p(me)?(I(me,!1),I(de,B,!0),I(ae,ue,!0),I(ve,!0)):(I(me,!0),I(de,B,!0)):L==="Escape"&&p(me)&&(I(me,!1),I(de,B,!0),I(ae,ue,!0),I(ve,!0)))}function je(F,B){const L=F.currentTarget;p(me)&&p(de)===B&&(I(me,!1),I(ae,L,!0),I(ve,!0))}rt(()=>{if(!p(M))return;async function F(B){const L=B.key;if(L==="Tab"&&p(ve)&&p(ae)){if(B.preventDefault(),B.stopImmediatePropagation(),B.stopPropagation(),I(ve,!1),typeof document<"u"){let Me=p(ae);if((!(Me instanceof HTMLElement)||!document.contains(Me))&&p(W)){const Ue=p(W).querySelector('span[role="button"]');Ue&&Ue instanceof HTMLElement&&(Me=Ue)}Me&&Me instanceof HTMLElement&&Me.focus()}return}if(L!=="ArrowDown"&&L!=="ArrowUp")return;const ue=document.activeElement;if(!ue)return;const oe=ue.closest("li[data-id]");if(!oe||!p(M).contains(oe))return;const Ge=oe.getAttribute("data-id");if(!Ge)return;const Ee=parseInt(Ge);if(!p(g).find(Me=>Me.id===Ee))return;const Se=p(g).findIndex(Me=>Me.id===Ee),Xe=Se===0,tt=Se===p(g).length-1;if(L==="ArrowDown"&&tt){B.preventDefault(),B.stopImmediatePropagation(),B.stopPropagation();const Me=ke(r.listId,f(),"next");Me!=null&&await it(Ee,Me)}else if(L==="ArrowUp"&&Xe){B.preventDefault(),B.stopImmediatePropagation(),B.stopPropagation();const Me=ke(r.listId,f(),"prev");Me!=null&&await He(Ee,Me)}}return document.addEventListener("keydown",F,!0),()=>{document.removeEventListener("keydown",F,!0)}});async function Bt(F){const B=F.detail.items.filter(L=>L&&typeof L.id=="number");I(g,B,!0);try{await jo(r.listId,B)}catch(L){console.error("Error updating task order:",L)}}function We(){I(w,!0)}async function Qe(F){if(F.key==="Escape"){if(I(ve,!0),p(W)){const B=p(W).querySelector('span[role="button"]');B&&B instanceof HTMLElement?I(ae,B,!0):I(ae,null)}else I(ae,null);I(w,!1),r.onInputChange(""),await Xn(),await Xn(),await new Promise(B=>requestAnimationFrame(B)),await new Promise(B=>setTimeout(B,200))}}rt(()=>{if(p(w))return ec(()=>p(te),()=>{p(w)&&(I(w,!1),r.onInputChange(""))},{ignoreElements:[],checkIgnoreClick:F=>{if(!p(W))return!1;const B=p(W).querySelector("button");return!!(B&&B.contains(F.target))},shouldClose:()=>p(te)&&p(te).value.trim()!==""?!1:!r.newTaskInput||r.newTaskInput.trim()===""})});async function ct(F={}){const B=F&&typeof F=="object"&&F.closeAfterSave===!0;let L=r.newTaskInput||"";if(p(te)&&(L=(p(te).value||"").toString()),L=(L||"").toString(),ls(L)){I(w,!1),r.onInputChange(""),await Xn(),await Xn(),await new Promise(oe=>requestAnimationFrame(oe)),await new Promise(oe=>setTimeout(oe,200));return}const{text:ue}=cs(L);try{await yv(r.listId,ue),r.onInputChange(""),B&&I(w,!1)}catch(oe){console.error("Error creating task:",oe)}}async function Ft(F,B){try{await ju(F,B==="unchecked"?"checked":"unchecked")}catch(L){console.error("Error updating task status:",L)}}async function sn(F){await ju(F,"archived")}function _t(){if(!p(M))return null;const F=p(M).querySelector("li[data-id]");if(F){const B=F.querySelector('span[role="button"]');if(B&&B instanceof HTMLElement)return B}return null}function et(F=20,B=10){if(!p(Z))return;const L=(ue=0)=>{if(p(W)){const oe=p(W).querySelector('span[role="button"]');if(oe&&oe instanceof HTMLElement){oe.focus();return}}ue<F&&setTimeout(()=>L(ue+1),B)};L()}async function Ye(F){try{if(await sn(F),p(D)===F){const B=p(R);I(E,!1),I(D,null),I(b,""),I(T,null),I(R,null),await Xn(),await new Promise(L=>setTimeout(L,10)),setTimeout(()=>{const L=(ue=0)=>{const oe=_t();oe?oe.focus():ue<20?setTimeout(()=>L(ue+1),10):et(40,10)};L()},20)}}catch(B){console.error("Error archiving task:",B)}}function bt(F,B,L){const ue=L?.currentTarget||L?.target;if(ue){const oe=ue.getBoundingClientRect();I(T,{top:oe.top,left:oe.left,width:oe.width,height:oe.height},!0),I(R,ue,!0)}I(D,F,!0),I(b,B,!0),I(E,!0)}function Lt(F,B,L){const ue=L.key;if(ue==="Enter"||ue===" "){L.preventDefault(),L.stopImmediatePropagation();const oe=L.currentTarget;if(oe){const Ge=oe.getBoundingClientRect();I(T,{top:Ge.top,left:Ge.left,width:Ge.width,height:Ge.height},!0),I(R,oe,!0),I(D,F,!0),I(b,B,!0),I(E,!0)}}else if(ue==="Escape"){L.preventDefault(),L.stopImmediatePropagation();const oe=L.currentTarget;oe&&oe instanceof HTMLElement&&(I(ae,oe,!0),I(ve,!0),oe.blur())}}async function An(F,B){try{await gv(F,B),I(E,!1);const L=p(R);I(D,null),I(b,""),I(T,null),I(R,null),L&&L instanceof HTMLElement&&setTimeout(()=>{L.focus()},0)}catch(L){console.error("Error updating task text:",L)}}function cr(){const F=p(R);I(E,!1),I(D,null),I(b,""),I(T,null),I(R,null),F&&F instanceof HTMLElement&&setTimeout(()=>{F.focus()},0)}async function ft(F){p(R),await Ye(F),setTimeout(()=>{if(typeof document>"u")return;const B=document.activeElement;p(Z)&&(!B||!p(Z).contains(B))&&et(20,10)},10)}function wt(F){const B=F?.currentTarget||F?.target;if(B){const L=B.getBoundingClientRect();I(P,{top:L.top,left:L.left,width:L.width,height:L.height},!0),I(H,B,!0)}I(N,!0)}function kn(F){if(F.key==="Enter"||F.key===" "){F.preventDefault(),F.stopPropagation(),F.stopImmediatePropagation();const B=F.currentTarget;if(B){const L=B.getBoundingClientRect();I(P,{top:L.top,left:L.left,width:L.width,height:L.height},!0),I(H,B,!0),I(N,!0)}}}async function Y(F,B){try{await pv(F,B),I(N,!1);const L=p(H);I(P,null),I(H,null),L&&L instanceof HTMLElement&&setTimeout(()=>{L.focus()},0)}catch(L){console.error("Error updating list name:",L)}}function V(){const F=p(H);I(N,!1),I(P,null),I(H,null),F&&F instanceof HTMLElement&&setTimeout(()=>{F.focus()},0)}async function ne(F){try{await Ev(F),await bv(F)}catch(B){console.error("Error archiving list:",B)}}var ge=zv(),_e=Tt(ge),Ve=Ae(_e),$=Re(Ae(Ve),2);$.__click=wt,$.__keydown=kn;var qe=Ae($),se=Re(Ve,2);{var Ce=F=>{var B=Fv(),L=Ae(B);Er(L,21,()=>p(g),Ee=>Ee.id,(Ee,le)=>{var Se=Kv(),Xe=Re(Ae(Se),2);Xe.__change=()=>Ft(p(le).id,p(le).status),Xe.__keydown=dt=>{(dt.key==="Enter"||dt.key===" ")&&(dt.preventDefault(),dt.stopPropagation(),Ft(p(le).id,p(le).status))};var tt=Re(Xe,2);tt.__click=dt=>bt(p(le).id,p(le).text,dt),tt.__keydown=dt=>Lt(p(le).id,p(le).text,dt);var Me=Ae(tt),Ue=Re(tt,2);{var Cr=dt=>{var qt=Nv();qt.__click=()=>Ye(p(le).id),st(()=>yt(qt,"aria-label",`Archive task: ${p(le).text||"blank task"}`)),Te(dt,qt)};ut(Ue,dt=>{p(le).status==="checked"&&dt(Cr)})}st(()=>{yt(Se,"data-id",p(le).id),Ll(Xe,p(le).status==="checked"),yt(Xe,"aria-label",`Mark task "${p(le).text||"blank task"}" as ${p(le).status==="checked"?"unchecked":"checked"}`),Ei(tt,1,Pl(p(le).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1":"cursor-pointer hover:underline break-words flex-1")),yt(tt,"aria-label",`Edit task: ${p(le).text||"blank task"}`),$n(Me,p(le).text||"")}),Rn("keydown",Se,dt=>vt(dt,p(le).id),!0),Rn("blur",Se,dt=>je(dt,p(le).id)),Te(Ee,Se)}),Tn(L,Ee=>I(M,Ee),()=>p(M)),Qo(L,(Ee,le)=>ss?.(Ee,le),()=>({items:p(g),type:"task",zoneTabIndex:-1}));var ue=Re(L,2);{var oe=Ee=>{var le=Bv(),Se=Ae(le);zo(Se,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:ct,onEscape:Qe,onActivate:We,buttonText:"Add your first task",placeholder:"Add new task...",get ariaLabel(){return`Add your first task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return p(w)},set isInputActive(Xe){I(w,Xe,!0)},get containerElement(){return p(W)},set containerElement(Xe){I(W,Xe,!0)},get textareaElement(){return p(te)},set textareaElement(Xe){I(te,Xe,!0)}}),Te(Ee,le)},Ge=Ee=>{zo(Ee,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:ct,onEscape:Qe,onActivate:We,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return p(w)},set isInputActive(le){I(w,le,!0)},get containerElement(){return p(W)},set containerElement(le){I(W,le,!0)},get textareaElement(){return p(te)},set textareaElement(le){I(te,le,!0)}})};ut(ue,Ee=>{p(g).length===0?Ee(oe):Ee(Ge,!1)})}st(()=>Ei(L,1,`space-y-2 m-0 p-0 list-none ${p(g).length===0?"empty-drop-zone min-h-[24px]":""}`,"svelte-k6mizj")),Rn("consider",L,lt),Rn("finalize",L,Bt),Te(F,B)},Q=F=>{var B=jv(),L=Re(Tt(B),2);zo(L,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:ct,onEscape:Qe,onActivate:We,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return p(w)},set isInputActive(ue){I(w,ue,!0)},get containerElement(){return p(W)},set containerElement(ue){I(W,ue,!0)},get textareaElement(){return p(te)},set textareaElement(ue){I(te,ue,!0)}}),Te(F,B)};ut(se,F=>{p(y)&&a()!==void 0?F(Ce):F(Q,!1)})}Tn(_e,F=>I(Z,F),()=>p(Z));var Le=Re(_e,2);kv(Le,{get isOpen(){return p(E)},get taskId(){return p(D)},get taskText(){return p(b)},get taskPosition(){return p(T)},onSave:An,onCancel:cr,onArchive:ft});var Ze=Re(Le,2);Cv(Ze,{get isOpen(){return p(N)},get listId(){return r.listId},get listName(){return r.listName},get listPosition(){return p(P)},onSave:Y,onCancel:V,onArchive:ne}),st(()=>{yt(_e,"data-list-id",r.listId),yt($,"aria-label",`Rename list: ${r.listName}`),$n(qe,r.listName)}),Te(e,ge),Sr(),l()}ni(["click","keydown","change"]);var Uv=Pe("<p>Loading...</p>"),Hv=Pe("<p>Loading data...</p>"),Vv=Pe("<p>No archived lists or tasks</p>"),Wv=Pe('<span class="text-sm text-gray-500"> </span>'),Yv=Pe('<span class="text-xs bg-gray-200 px-2 py-1 rounded">[List Archived]</span> <!>',1),qv=Pe('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),Zv=Pe('<p class="text-sm text-gray-500 italic">No archived tasks</p>'),Qv=Pe('<li class="flex items-center gap-3 flex-wrap"><span class="line-through"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button></li>'),Xv=Pe('<div class="mb-4"><h4 class="text-sm font-medium text-gray-600 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),$v=Pe('<div class="border-b border-gray-200 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <div class="border-b border-gray-200 pb-4"><!></div>',1),Jv=Pe('<div class="grid grid-cols-2 gap-4"></div>'),ep=Pe('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function tp(e,r){Ir(r,!0);const a=()=>xa(p(y),"$listsQuery",l),s=()=>xa(p(h),"$archivedTasksQuery",l),[l,f]=As();let h=ye(null),y=ye(null);rt(()=>{Ta(I(h,ka(()=>mv()),!0),"$archivedTasksQuery",l),Ta(I(y,ka(()=>hv()),!0),"$listsQuery",l)});function g(P){return P?new Date(P).toDateString():null}function w(P){return P?new Date(P).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let E=Ot(()=>{const P=p(h)?s():null,H=p(y)?a():null;if(!H||!Array.isArray(H))return[];const Z={};if(P&&Array.isArray(P))for(const te of P)Z[te.listId]||(Z[te.listId]=[]),Z[te.listId].push(te);const W=[];for(const te of H){const ae=te.archivedAt!=null,ve=Z[te.id]&&Z[te.id].length>0;if(ae||ve){const me=Z[te.id]||[],de={};for(const xe of me){const we=g(xe.archivedAt)||"Unknown";de[we]||(de[we]=[]),de[we].push(xe)}W.push({list:te,listArchiveDate:te.archivedAt?g(te.archivedAt):null,tasksByDate:de,hasTasks:me.length>0})}}return W.sort((te,ae)=>{if(te.list.order!==ae.list.order)return te.list.order-ae.list.order;const ve=te.list.name??"Unnamed list",me=ae.list.name??"Unnamed list";return ve.localeCompare(me)}),W});function D(P){return P.sort((H,Z)=>{if(H==="Unknown")return 1;if(Z==="Unknown")return-1;const W=new Date(H).getTime();return new Date(Z).getTime()-W})}async function b(P){try{(await _v(P)).listRestored&&console.log("Task and its list have been restored")}catch(H){console.error("Error restoring task:",H)}}var T=ep(),R=Re(Ae(T),2);{var M=P=>{var H=Uv();Te(P,H)},N=P=>{var H=rr(),Z=Tt(H);{var W=ae=>{var ve=Hv();Te(ae,ve)},te=ae=>{var ve=rr(),me=Tt(ve);{var de=we=>{var ke=Vv();Te(we,ke)},xe=we=>{var ke=Jv();Er(ke,21,()=>p(E),da,(it,He)=>{const lt=Ot(()=>p(He).list),vt=Ot(()=>p(lt).name??"Unnamed list"),je=Ot(()=>p(lt).archivedAt!=null),Bt=Ot(()=>p(He).listArchiveDate);var We=$v(),Qe=Tt(We),ct=Ae(Qe),Ft=Ae(ct),sn=Ae(Ft),_t=Re(Ft,2);{var et=ft=>{var wt=Yv(),kn=Re(Tt(wt),2);{var Y=V=>{var ne=Wv(),ge=Ae(ne);st(_e=>$n(ge,`- ${_e??""}`),[()=>w(p(Bt))]),Te(V,ne)};ut(kn,V=>{p(Bt)&&V(Y)})}Te(ft,wt)},Ye=ft=>{var wt=qv();Te(ft,wt)};ut(_t,ft=>{p(je)?ft(et):ft(Ye,!1)})}var bt=Re(Qe,2),Lt=Ae(bt);{var An=ft=>{var wt=Zv();Te(ft,wt)},cr=ft=>{var wt=rr(),kn=Tt(wt);Er(kn,17,()=>D(Object.keys(p(He).tasksByDate)),da,(Y,V)=>{const ne=Ot(()=>p(He).tasksByDate[p(V)]);var ge=Xv(),_e=Ae(ge),Ve=Ae(_e),$=Re(_e,2);Er($,21,()=>p(ne),da,(qe,se)=>{var Ce=Qv(),Q=Ae(Ce),Le=Ae(Q),Ze=Re(Q,2);Ze.__click=()=>b(p(se).id),st(()=>$n(Le,p(se).text)),Te(qe,Ce)}),st(qe=>$n(Ve,qe),[()=>p(V)==="Unknown"?"Unknown Date":w(p(V))]),Te(Y,ge)}),Te(ft,wt)};ut(Lt,ft=>{p(He).hasTasks?ft(cr,!1):ft(An)})}st(()=>$n(sn,p(vt))),Te(it,We)}),Te(we,ke)};ut(me,we=>{p(E).length===0?we(de):we(xe,!1)},!0)}Te(ae,ve)};ut(Z,ae=>{!s()||!a()?ae(W):ae(te,!1)},!0)}Te(P,H)};ut(R,P=>{!p(h)||!p(y)?P(M):P(N,!1)})}st(()=>ir(T,`width: ${us}px;`)),Te(e,T),Sr(),f()}ni(["click"]);var np=Pe("<p>Loading...</p>"),rp=Pe('<div class="flex flex-col mb-6 svelte-1n46o8q" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),ip=Pe('<div class="flex flex-col mb-6 svelte-1n46o8q"></div>'),ap=Pe('<div class="empty-drop-zone min-h-[48px]"></div>'),op=Pe('<h2><div class="flex items-center gap-2"><input type="text" class="create-list-input cursor-pointer hover:underline svelte-1n46o8q" placeholder="List name..." aria-label="Enter list name"/> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" aria-label="Create list">Save</button></div></h2>'),sp=Pe('<h2 role="button" tabindex="0" aria-label="Create new list">Create new list</h2>'),up=Pe('<div class="flex flex-col min-w-0 border-r border-gray-300 last:border-r-0 pt-0 svelte-1n46o8q"><div class="flex flex-col pt-0"><!> <!></div> <!></div>'),lp=Pe('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" disabled class="cursor-pointer opacity-50" aria-hidden="true" tabindex="-1"/> <span> </span></li>'),cp=Pe('<div class="grid grid-cols-5 gap-4 w-full"></div> <div class="relative print:hidden"><ul class="m-0 p-0 list-none min-h-0 pb-2"></ul></div>',1),fp=Pe('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><div class="w-full h-full p-4 overflow-auto"><!></div></div></div> <!></main>');function dp(e,r){Ir(r,!0);const a=()=>xa(f,"$lists",s),[s,l]=As();let f=ka(()=>dv()),h=Ot(()=>a()||[]),y=ye(Xt([])),g=ye(Xt({})),w=ye(null),E=ye(""),D=ye(null),b=ye(Xt([])),T=ye(null),R=ye(Xt({active:!1,listId:null})),M=ye(null),N=ye(!1);rt(()=>{if(a()&&Array.isArray(a())&&a().length>0&&Object.keys(p(g)).length===0){const Y={};for(const V of a())Y[V.id]="";I(g,Y,!0)}}),rt(()=>{if(a()&&Array.isArray(a())&&a().length>0){const Y={...p(g)};let V=!1;for(const ne of a())ne.id in Y||(Y[ne.id]="",V=!0);V&&I(g,Y,!0)}});let P=ye(0);rt(()=>{if(a()&&Array.isArray(a())){const Y=a().map(V=>({id:V.id,name:V.name,order:V.order,columnIndex:V.columnIndex}));Y.length!==p(P)&&(console.log("[DRAG] draggableLists updated from liveQuery:",{previousCount:p(P),newCount:Y.length}),I(P,Y.length,!0)),I(y,Y,!0)}else p(P)>0&&(console.log("[DRAG] draggableLists cleared (no lists)"),I(P,0)),I(y,[],!0)});const H=5;let Z=Ot(()=>()=>{if(!p(y)||p(y).length===0)return Array(H).fill(null).map(()=>[]);const Y=Array(H).fill(null).map(()=>[]),V=H-1;for(const ne of p(y)){let ge=ne.columnIndex??0;ge>=H&&(ge=V),Y[ge].push(ne)}for(let ne=0;ne<Y.length;ne++)Y[ne].sort((ge,_e)=>(ge.order??0)-(_e.order??0));return Y});function W(Y){const V=p(Z)();if(!V||V.length===0)return null;for(let ne=0;ne<V.length;ne++){const ge=V[ne];if(!Array.isArray(ge))continue;const _e=ge.findIndex(Ve=>Ve.id===Y);if(_e!==-1)return{columnIndex:ne,index:_e}}return null}async function te(Y,V){const ne=p(Z)();if(!ne||ne.length===0)return;const ge=W(Y);if(!ge)return;const{columnIndex:_e,index:Ve}=ge;let $=_e,qe=Ve;if(V==="up"){if(Ve===0)return;qe=Ve-1}else if(V==="down"){const L=ne[_e]||[];if(Ve===L.length-1)return;qe=Ve+1}else if(V==="left"){if(_e===0)return;$=_e-1,qe=(ne[$]||[]).length}else if(V==="right"){if(_e===H-1)return;$=_e+1,qe=(ne[$]||[]).length}else return;const se=ne.map(L=>Array.isArray(L)?[...L]:[]),Ce=se[_e];if(!Ce||Ce.length===0)return;const[Q]=Ce.splice(Ve,1);if(!Q)return;const Le=se[$];if(!Le)return;const Ze=Math.min(Math.max(qe,0),Le.length);V==="left"||V==="right"?Le.splice(Ze,0,{...Q,columnIndex:$}):Le.splice(Ze,0,Q);const F=[];for(let L=0;L<se.length;L++){const ue=se[L]||[];for(let oe=0;oe<ue.length;oe++){const Ge=ue[oe];F.push({...Ge,columnIndex:L,order:oe})}}I(y,F,!0);const B=(se[$]||[]).map(L=>({id:L.id}));try{await zu($,B)}catch(L){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",L)}p(R).active&&p(R).listId===Y&&await ve(Y)}function ae(Y){return p(R).active===!0&&p(R).listId===Y}async function ve(Y){if(typeof document>"u")return;await Xn();const V=Array.from(document.querySelectorAll(`[data-id="${Y}"]`));let ne=V.find(ge=>ge instanceof HTMLElement&&ge.getAttribute("role")==="group");ne||(ne=V.find(ge=>ge instanceof HTMLElement&&ge.tagName==="DIV")),ne instanceof HTMLElement&&ne.focus()}function me(Y){I(N,!1),I(R,{active:!0,listId:Y},!0)}function de(){p(R).listId!=null&&(I(M,p(R).listId,!0),I(N,!0)),I(R,{active:!1,listId:null},!0)}function xe(){if(typeof document>"u")return;const Y=document.activeElement;Y&&Y instanceof HTMLElement&&Y.blur()}function we(Y,V){const ne=Y.currentTarget,ge=Y.target,_e=Y.key;if(!ae(V)){(_e==="Enter"||_e===" ")&&ne instanceof HTMLElement&&ne===ge&&(Y.preventDefault(),Y.stopPropagation(),Y.stopImmediatePropagation(),V!=null&&me(V));return}}rt(()=>{if(typeof document>"u")return;function Y(V){const ne=V.key,ge=p(R).active===!0,_e=p(R).listId;if(!ge&&ne==="Tab"&&p(N)&&p(M)!=null){V.preventDefault(),V.stopPropagation(),V.stopImmediatePropagation(),I(N,!1),ve(p(M));return}if(!(!ge||_e==null)){if(ne==="ArrowUp"){V.preventDefault(),V.stopPropagation(),V.stopImmediatePropagation(),te(_e,"up");return}if(ne==="ArrowDown"){V.preventDefault(),V.stopPropagation(),V.stopImmediatePropagation(),te(_e,"down");return}if(ne==="ArrowLeft"){V.preventDefault(),V.stopPropagation(),V.stopImmediatePropagation(),te(_e,"left");return}if(ne==="ArrowRight"){V.preventDefault(),V.stopPropagation(),V.stopImmediatePropagation(),te(_e,"right");return}if(ne==="Escape"||ne==="Enter"||ne===" "){V.preventDefault(),V.stopPropagation(),V.stopImmediatePropagation(),de(),xe();return}if(ne==="Tab"){V.preventDefault(),V.stopPropagation(),V.stopImmediatePropagation(),de(),xe();return}}}return document.addEventListener("keydown",Y,!0),()=>{document.removeEventListener("keydown",Y,!0)}});function ke(Y,V){p(g)[Y]=V}function it(){window.print()}function He(Y){I(w,Y,!0)}function lt(Y,V){(Y.key==="Enter"||Y.key===" ")&&(Y.preventDefault(),Y.stopPropagation(),He(V))}function vt(Y){Y.key==="Escape"&&(I(w,null),I(E,""))}rt(()=>{if(p(w)!==null)return ec(p(D),()=>{p(w)!==null&&(I(w,null),I(E,""))},{ignoreElements:[],checkIgnoreClick:Y=>{const V=Y.target.closest("button");return V&&V.textContent?.trim()==="Save"},shouldClose:()=>!p(E)||p(E).trim()===""})}),rt(()=>{p(w)!==null&&p(D)&&setTimeout(()=>{p(D)?.focus()},0)});async function je(Y){const V=p(E)||"";if(ls(V)){I(w,null),I(E,"");return}const{text:ne,isBlank:ge}=cs(V);if(ge){I(w,null),I(E,"");return}try{await Fu(ne,Y),I(E,""),await Xn(),p(D)&&setTimeout(()=>{p(D)?.focus()},0)}catch(_e){console.error("Error creating list:",_e)}}async function Bt(Y){const V=p(E)||"";if(ls(V)){I(w,null),I(E,"");return}const{text:ne,isBlank:ge}=cs(V);if(ge){I(w,null),I(E,"");return}try{await Fu(ne,Y),I(E,""),I(w,null)}catch(_e){console.error("Error creating list on Tab:",_e)}}function We(Y){I(b,Y.detail.items,!0)}async function Qe(Y){I(b,Y.detail.items,!0),I(b,[],!0)}function ct(Y){return Y&&(Y.isDndShadowItem===!0||typeof Y.id=="string"&&Y.id.startsWith("id:dnd-shadow-placeholder-"))}function Ft(Y,V){console.log("[DRAG] ===== CONSIDER EVENT ====="),console.log("[DRAG] consider - column:",V),console.log("[DRAG] consider - event.detail.items count:",Y.detail.items?.length||0);const ne=Y.detail.items||[],ge=ne.filter(se=>ct(se)),_e=ne.filter(se=>!ct(se));console.log("[DRAG] consider - placeholders detected:",ge.length),ge.length>0&&console.log("[DRAG] consider - placeholder items:",ge.map(se=>({id:se.id,isDndShadowItem:se.isDndShadowItem}))),console.log("[DRAG] consider - valid items:",_e.length);const Ve=p(y).filter(se=>(se.columnIndex??0)===V);console.log("[DRAG] consider - current lists in column",V+" (before update):",Ve.map(se=>({id:se.id,name:se.name,columnIndex:se.columnIndex}))),console.log("[DRAG] consider - newColumnItems IDs:",ne.map(se=>({id:se.id,isPlaceholder:ct(se)})));const $=_e.every(se=>{const Ce=p(y).find(Q=>Q.id===se.id);return Ce&&(Ce.columnIndex??0)===V});console.log("[DRAG] consider - isSameColumnReorder:",$);for(const se of _e){const Ce=p(y).find(Q=>Q.id===se.id);if(Ce){const Q=Ce.columnIndex??0;Q!==V&&console.log("[DRAG] consider - CROSS-COLUMN MOVE DETECTED:",{listId:se.id,listName:se.name,oldColumn:Q,newColumn:V})}else console.log("[DRAG] consider - NEW ITEM IN COLUMN (possibly from another column):",{listId:se.id,listName:se.name,column:V})}const qe=p(y).filter(se=>(se.columnIndex??0)!==V);for(let se=0;se<ne.length;se++){const Ce=ne[se],Q=p(y).find(Ze=>Ze.id===Ce.id),Le=Q?{...Q,...Ce,columnIndex:V,order:se}:{...Ce,columnIndex:V,order:se};qe.push(Le)}console.log("[DRAG] consider - updated draggableLists count:",qe.length),console.log("[DRAG] consider - updated lists in column",V+":",qe.filter(se=>(se.columnIndex??0)===V).map(se=>({id:se.id,name:se.name,columnIndex:se.columnIndex}))),I(y,qe,!0);try{const se=p(Z)().map((Ce,Q)=>({columnIndex:Q,listCount:Ce.length,listIds:Ce.map(Le=>Le.id)}));console.log("[DRAG] consider - listsByColumn state (after update):",se)}catch(se){console.warn("[DRAG] consider - error logging listsByColumn:",se)}console.log("[DRAG] ===== END CONSIDER EVENT =====")}async function sn(Y,V){console.log("[DRAG] ===== FINALIZE EVENT ====="),console.log("[DRAG] finalize - column where drop occurred:",V),console.log("[DRAG] finalize - event.detail.items count:",Y.detail.items?.length||0);const ne=(Y.detail.items||[]).filter(Q=>!ct(Q)),ge=(Y.detail.items||[]).filter(Q=>ct(Q));console.log("[DRAG] finalize - placeholders filtered out:",ge.length),ge.length>0&&console.warn("[DRAG] finalize - WARNING: Placeholders still present in finalize!",ge.length),console.log("[DRAG] finalize - valid items (after filtering placeholders):",ne.length),console.log("[DRAG] finalize - valid items details:",ne.map(Q=>({id:Q.id,name:Q.name,order:Q.order,columnIndex:Q.columnIndex})));const _e=[];let Ve=!1;for(const Q of ne){const Le=(a()||[]).find(Ze=>Ze.id===Q.id);if(Le){const Ze=Le.columnIndex??0;Ze!==V&&(Ve=!0,_e.push({listId:Q.id,listName:Q.name,oldColumn:Ze,newColumn:V}))}else{const Ze=p(y).find(F=>F.id===Q.id);Ze&&(Ze.columnIndex??0)!==V&&(Ve=!0)}}_e.length>0&&console.log("[DRAG] finalize - COLUMN CHANGES DETECTED:",_e);const qe=(a()||[]).filter(Q=>(Q.columnIndex??0)===V).length,se=ne.length;if(se<qe&&!Ve){console.log("[DRAG] finalize - SKIPPING database update (source column that lost items)",{originalCount:qe,currentCount:se,hasItemsFromOtherColumns:Ve}),console.log("[DRAG] ===== END FINALIZE EVENT =====");return}if(ne.length===0&&!Ve&&qe>0){console.log("[DRAG] finalize - SKIPPING database update (empty column that lost all items)"),console.log("[DRAG] ===== END FINALIZE EVENT =====");return}try{console.log("[DRAG] finalize - updating database with updateListOrderWithColumn..."),await zu(V,ne),console.log("[DRAG] finalize - database update successful"),console.log("[DRAG] finalize - waiting for $effect to sync draggableLists from liveQuery...")}catch(Q){console.error("[DRAG] finalize - ERROR updating list order:",Q)}console.log("[DRAG] ===== END FINALIZE EVENT =====")}var _t=fp(),et=Ae(_t),Ye=Ae(et);Ye.__click=it;var bt=Re(et,2),Lt=Ae(bt),An=Ae(Lt),cr=Ae(An);{var ft=Y=>{var V=np();Te(Y,V)},wt=Y=>{var V=rr(),ne=Tt(V);{var ge=_e=>{var Ve=cp(),$=Tt(Ve);Er($,21,()=>p(Z)(),da,(Ce,Q,Le)=>{var Ze=up();yt(Ze,"data-column-index",Le);var F=Ae(Ze),B=Ae(F);Er(B,19,()=>p(Q),le=>le.id,(le,Se)=>{const Xe=Ot(()=>ct(p(Se))),tt=Ot(()=>p(h).find(hn=>hn.id===p(Se).id)),Me=Ot(()=>!p(tt)&&!p(Xe)?p(Se):null),Ue=Ot(()=>p(tt)||p(Me));var Cr=rr(),dt=Tt(Cr);{var qt=hn=>{var Mt=rp(),ii=Ae(Mt);{let jn=Ot(()=>p(Ue).name??"Unnamed list"),Dn=Ot(()=>p(g)[p(Ue).id]||"");Gv(ii,{get listId(){return p(Ue).id},get listName(){return p(jn)},get newTaskInput(){return p(Dn)},onInputChange:Rr=>ke(p(Ue).id,Rr),get allLists(){return a()},get stableLists(){return p(h)}})}st(()=>{yt(Mt,"data-id",p(Se).id),yt(Mt,"aria-label",`List: ${p(Ue).name??"Unnamed list"}`),yt(Mt,"aria-pressed",p(R).active&&p(R).listId===p(Ue).id?"true":"false")}),Rn("keydown",Mt,jn=>we(jn,p(Ue).id),!0),Te(hn,Mt)},ri=hn=>{var Mt=ip();st(()=>yt(Mt,"data-id",p(Se).id)),Te(hn,Mt)};ut(dt,hn=>{p(Ue)?hn(qt):hn(ri,!1)})}Te(le,Cr)});var L=Re(B,2);{var ue=le=>{var Se=ap();Te(le,Se)};ut(L,le=>{p(Q).length===0&&le(ue)})}Qo(F,(le,Se)=>ss?.(le,Se),()=>({items:p(Q),type:"list",zoneTabIndex:-1}));var oe=Re(F,2);{var Ge=le=>{var Se=op(),Xe=Ae(Se),tt=Ae(Xe);tt.__keydown=Ue=>{Ue.key==="Enter"&&!Ue.shiftKey?(Ue.preventDefault(),je(Le)):Ue.key==="Escape"?vt(Ue):Ue.key==="Tab"&&Bt(Le)},Tn(tt,Ue=>I(D,Ue),()=>p(D));var Me=Re(tt,2);Me.__click=()=>je(Le),st(()=>Ei(Se,1,`print:hidden m-0 p-0 create-list-wrapper ${p(Q).length===0?"create-list-empty-column":""}`,"svelte-1n46o8q")),Ts(tt,()=>p(E),Ue=>I(E,Ue)),Te(le,Se)},Ee=le=>{var Se=sp();Se.__click=()=>He(Le),Se.__keydown=Xe=>lt(Xe,Le),st(()=>Ei(Se,1,`cursor-pointer hover:underline print:hidden m-0 p-0 create-list-wrapper ${p(Q).length===0?"create-list-empty-column":""}`,"svelte-1n46o8q")),Te(le,Se)};ut(oe,le=>{p(w)===Le?le(Ge):le(Ee,!1)})}Rn("consider",F,le=>Ft(le,Le)),Rn("finalize",F,le=>sn(le,Le)),Te(Ce,Ze)});var qe=Re($,2),se=Ae(qe);Er(se,21,()=>p(b),Ce=>Ce.id,(Ce,Q)=>{var Le=lp(),Ze=Re(Ae(Le),2),F=Re(Ze,2),B=Ae(F);st(()=>{yt(Le,"data-id",p(Q).id),Ll(Ze,p(Q).status==="checked"),Ei(F,1,Pl(p(Q).status==="checked"?"line-through break-words":"break-words")),ir(F,`width: ${Jl}px;`),$n(B,p(Q).text||"")}),Te(Ce,Le)}),Tn(se,Ce=>I(T,Ce),()=>p(T)),Qo(se,(Ce,Q)=>ss?.(Ce,Q),()=>({items:p(b),type:"task"})),Rn("consider",se,We),Rn("finalize",se,Qe),Te(_e,Ve)};ut(ne,_e=>{Array.isArray(a())&&_e(ge)},!0)}Te(Y,V)};ut(cr,Y=>{a()===void 0||a()===null?Y(ft):Y(wt,!1)})}var kn=Re(bt,2);tp(kn,{}),st(()=>{ir(et,`width: ${us}px;`),ir(bt,`width: ${us}px; height: ${xv}px;`)}),Te(e,_t),Sr(),l()}ni(["click","keydown"]);const hp=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],vp=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function pp(){try{if(await Ie.lists.count()>0)return;await Ie.lists.bulkAdd(hp),await Ie.tasks.bulkAdd(vp),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await pp().catch(console.error),Nd(dp,{target:document.getElementById("app")})))();
