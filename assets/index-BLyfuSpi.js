(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const c of f)if(c.type==="childList")for(const v of c.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function a(f){const c={};return f.integrity&&(c.integrity=f.integrity),f.referrerPolicy&&(c.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?c.credentials="include":f.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(f){if(f.ep)return;f.ep=!0;const c=a(f);fetch(f.href,c)}})();const Lf="production",Z=!Lf.toLowerCase().startsWith("prod");var nu=Array.isArray,Bf=Array.prototype.indexOf,yo=Array.from,pn=Object.defineProperty,Xn=Object.getOwnPropertyDescriptor,ru=Object.getOwnPropertyDescriptors,jf=Object.prototype,zf=Array.prototype,mo=Object.getPrototypeOf,Ss=Object.isExtensible;const ki=()=>{};function $f(e){for(var r=0;r<e.length;r++)e[r]()}function iu(){var e,r,a=new Promise((u,f)=>{e=u,r=f});return{promise:a,resolve:e,reject:r}}const Ue=2,go=4,_o=8,Uf=1<<24,Gt=16,Ht=32,Kn=64,Gi=128,Tt=512,Ze=1024,ft=2048,Yt=4096,ht=8192,un=16384,bo=32768,rr=65536,Ii=1<<17,au=1<<18,cr=1<<19,Vf=1<<20,yn=32768,qa=1<<21,Hi=1<<22,ln=1<<23,fn=Symbol("$state"),Wf=Symbol(""),ou=Symbol("proxy path"),Hn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Gf(){if(Z){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Hf(){if(Z){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Yf(e){if(Z){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Zf(){if(Z){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function qf(e){if(Z){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function Qf(){if(Z){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xf(e){if(Z){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Jf(){if(Z){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ec(){if(Z){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function tc(){if(Z){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function nc(){if(Z){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const su=1,uu=2,lu=4,rc=8,ic=16,ac=1,oc=2,Ge=Symbol(),sc=Symbol("filename"),uc="http://www.w3.org/1999/xhtml";var fu="font-weight: bold",cu="font-weight: normal";function Wa(e){Z?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,fu,cu):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function lc(){Z?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",fu,cu):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function du(e){return e===this.v}function hu(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function vu(e){return!hu(e,this.v)}let fc=!1;function It(e,r){return e.label=r,pu(e.v,r),e}function pu(e,r){return e?.[ou]?.(r),e}function cc(e){const r=new Error,a=dc();return a.length===0?null:(a.unshift(`
`),pn(r,"stack",{value:a.join(`
`)}),pn(r,"name",{value:e}),r)}function dc(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const a=r.split(`
`),u=[];for(let f=0;f<a.length;f++){const c=a[f],v=c.replaceAll("\\","/");if(c.trim()!=="Error"){if(c.includes("validate_each_keys"))return[];v.includes("svelte/src/internal")||v.includes("node_modules/.vite")||u.push(c)}}return u}let st=null;function ir(e){st=e}let Mr=null;function Ci(e){Mr=e}let zr=null;function ks(e){zr=e}function $r(e,r=!1,a){st={p:st,i:!1,c:null,e:null,s:e,x:null,l:null},Z&&(st.function=a,zr=a)}function Ur(e){var r=st,a=r.e;if(a!==null){r.e=null;for(var u of a)Iu(u)}return r.i=!0,st=r.p,Z&&(zr=st?.function??null),{}}function yu(){return!0}let Yn=[];function hc(){var e=Yn;Yn=[],$f(e)}function dr(e){if(Yn.length===0){var r=Yn;queueMicrotask(()=>{r===Yn&&hc()})}Yn.push(e)}const Qa=new WeakMap;function mu(e){var r=pe;if(r===null)return ce.f|=ln,e;if(Z&&e instanceof Error&&!Qa.has(e)&&Qa.set(e,vc(e,r)),(r.f&bo)===0){if((r.f&Gi)===0)throw Z&&!r.parent&&e instanceof Error&&gu(e),e;r.b.error(e)}else ar(e,r)}function ar(e,r){for(;r!==null;){if((r.f&Gi)!==0)try{r.b.error(e);return}catch(a){e=a}r=r.parent}throw Z&&e instanceof Error&&gu(e),e}function vc(e,r){const a=Xn(e,"message");if(!(a&&!a.configurable)){for(var u=Ao?"  ":"	",f=`
${u}in ${r.fn?.name||"<unknown>"}`,c=r.ctx;c!==null;)f+=`
${u}in ${c.function?.[sc].split("/").pop()}`,c=c.p;return{message:e.message+`
${f}
`,stack:e.stack?.split(`
`).filter(v=>!v.includes("svelte/src/internal")).join(`
`)}}}function gu(e){const r=Qa.get(e);r&&(pn(e,"message",{value:r.message}),pn(e,"stack",{value:r.stack}))}const xi=new Set;let xe=null,gt=null,Rt=[],wo=null,Xa=!1;class Ft{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){Rt=[],this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const u of r)this.#o(u,a);this.is_fork||this.#f(),this.is_deferred()?(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects)):(xe=null,Is(a.render_effects),Is(a.effects),this.#u?.resolve()),gt=null}#o(r,a){r.f^=Ze;for(var u=r.first;u!==null;){var f=u.f,c=(f&(Ht|Kn))!==0,v=c&&(f&Ze)!==0,g=v||(f&ht)!==0||this.skipped_effects.has(u);if((u.f&Gi)!==0&&u.b?.is_pending()&&(a={parent:a,effect:u,effects:[],render_effects:[],block_effects:[]}),!g&&u.fn!==null){c?u.f^=Ze:(f&go)!==0?a.effects.push(u):Wr(u)&&((u.f&Gt)!==0&&a.block_effects.push(u),Kr(u));var m=u.first;if(m!==null){u=m;continue}}var A=u.parent;for(u=u.next;u===null&&A!==null;)A===a.effect&&(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects),a=a.parent),u=A.next,A=A.parent}}#s(r){for(const a of r)((a.f&ft)!==0?this.#a:this.#i).push(a),this.#l(a.deps),qe(a,Ze)}#l(r){if(r!==null)for(const a of r)(a.f&Ue)===0||(a.f&yn)===0||(a.f^=yn,this.#l(a.deps))}capture(r,a){this.previous.has(r)||this.previous.set(r,a),(r.f&ln)===0&&(this.current.set(r,r.v),gt?.set(r,r.v))}activate(){xe=this,this.apply()}deactivate(){xe===this&&(xe=null,gt=null)}flush(){if(this.activate(),Rt.length>0){if(pc(),xe!==null&&xe!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#f(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#c()}#c(){if(xi.size>1){this.previous.clear();var r=gt,a=!0,u={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of xi){if(c===this){a=!1;continue}const v=[];for(const[m,A]of this.current){if(c.current.has(m))if(a&&A!==c.current.get(m))c.current.set(m,A);else continue;v.push(m)}if(v.length===0)continue;const g=[...c.current.keys()].filter(m=>!this.current.has(m));if(g.length>0){var f=Rt;Rt=[];const m=new Set,A=new Map;for(const x of v)_u(x,g,m,A);if(Rt.length>0){xe=c,c.apply();for(const x of Rt)c.#o(x,u);c.deactivate()}Rt=f}}xe=null,gt=r}this.committed=!0,xi.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)qe(r,ft),Nn(r);for(const r of this.#i)qe(r,Yt),Nn(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=iu()).promise}static ensure(){if(xe===null){const r=xe=new Ft;xi.add(xe),Ft.enqueue(()=>{xe===r&&r.flush()})}return xe}static enqueue(r){dr(r)}apply(){}}function pc(){var e=dn;Xa=!0;var r=Z?new Set:null;try{var a=0;for(Mi(!0);Rt.length>0;){var u=Ft.ensure();if(a++>1e3){if(Z){var f=new Map;for(const v of u.current.keys())for(const[g,m]of v.updated??[]){var c=f.get(g);c||(c={error:m.error,count:0},f.set(g,c)),c.count+=m.count}for(const v of f.values())v.error&&console.error(v.error)}yc()}if(u.process(Rt),cn.clear(),Z)for(const v of u.current.keys())r.add(v)}}finally{if(Xa=!1,Mi(e),wo=null,Z)for(const v of r)v.updated=null}}function yc(){try{Qf()}catch(e){Z&&pn(e,"stack",{value:""}),ar(e,wo)}}let Vt=null;function Is(e){var r=e.length;if(r!==0){for(var a=0;a<r;){var u=e[a++];if((u.f&(un|ht))===0&&Wr(u)&&(Vt=new Set,Kr(u),u.deps===null&&u.first===null&&u.nodes_start===null&&(u.teardown===null&&u.ac===null?Mu(u):u.fn=null),Vt?.size>0)){cn.clear();for(const f of Vt){if((f.f&(un|ht))!==0)continue;const c=[f];let v=f.parent;for(;v!==null;)Vt.has(v)&&(Vt.delete(v),c.push(v)),v=v.parent;for(let g=c.length-1;g>=0;g--){const m=c[g];(m.f&(un|ht))===0&&Kr(m)}}Vt.clear()}}Vt=null}}function _u(e,r,a,u){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const f of e.reactions){const c=f.f;(c&Ue)!==0?_u(f,r,a,u):(c&(Hi|Gt))!==0&&(c&ft)===0&&bu(f,r,u)&&(qe(f,ft),Nn(f))}}function bu(e,r,a){const u=a.get(e);if(u!==void 0)return u;if(e.deps!==null)for(const f of e.deps){if(r.includes(f))return!0;if((f.f&Ue)!==0&&bu(f,r,a))return a.set(f,!0),!0}return a.set(e,!1),!1}function Nn(e){for(var r=wo=e;r.parent!==null;){r=r.parent;var a=r.f;if(Xa&&r===pe&&(a&Gt)!==0&&(a&au)===0)return;if((a&(Kn|Ht))!==0){if((a&Ze)===0)return;r.f^=Ze}}Rt.push(r)}function mc(e){let r=0,a=Fn(0),u;return Z&&It(a,"createSubscriber version"),()=>{Nr()&&(Q(a),ko(()=>(r===0&&(u=Yi(()=>e(()=>Rr(a)))),r+=1,()=>{dr(()=>{r-=1,r===0&&(u?.(),u=void 0,Rr(a))})})))}}var gc=rr|cr|Gi;function _c(e,r,a){new bc(e,r,a)}class bc{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#f=null;#c=0;#h=0;#v=!1;#d=null;#_=mc(()=>(this.#d=Fn(this.#c),Z&&It(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,a,u){this.#t=r,this.#n=a,this.#u=u,this.parent=pe.b,this.#e=!!this.#n.pending,this.#a=Io(()=>{pe.b=this;{var f=this.#m();try{this.#i=mt(()=>u(f))}catch(c){this.error(c)}this.#h>0?this.#y():this.#e=!1}return()=>{this.#f?.remove()}},gc)}#b(){try{this.#i=mt(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=mt(()=>r(this.#t)),Ft.enqueue(()=>{var a=this.#m();this.#i=this.#p(()=>(Ft.ensure(),mt(()=>this.#u(a)))),this.#h>0?this.#y():(Jn(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#m(){var r=this.#t;return this.#e&&(this.#f=mn(),this.#t.before(this.#f),r=this.#f),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var a=pe,u=ce,f=st;xt(this.#a),ot(this.#a),ir(this.#a.ctx);try{return r()}catch(c){return mu(c),null}finally{xt(a),ot(u),ir(f)}}#y(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#f),Ku(this.#i,this.#l)),this.#o===null&&(this.#o=mt(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#e=!1,this.#o&&Jn(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#c+=r,this.#d&&sr(this.#d,this.#c)}get_effect_pending(){return this.#_(),Q(this.#d)}error(r){var a=this.#n.onerror;let u=this.#n.failed;if(this.#v||!a&&!u)throw r;this.#i&&(ut(this.#i),this.#i=null),this.#o&&(ut(this.#o),this.#o=null),this.#s&&(ut(this.#s),this.#s=null);var f=!1,c=!1;const v=()=>{if(f){lc();return}f=!0,c&&nc(),Ft.ensure(),this.#c=0,this.#s!==null&&Jn(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,mt(()=>this.#u(this.#t)))),this.#h>0?this.#y():this.#e=!1};var g=ce;try{ot(null),c=!0,a?.(r,v),c=!1}catch(m){ar(m,this.#a&&this.#a.parent)}finally{ot(g)}u&&dr(()=>{this.#s=this.#p(()=>{Ft.ensure(),this.#v=!0;try{return mt(()=>{u(this.#t,()=>r,()=>v)})}catch(m){return ar(m,this.#a.parent),null}finally{this.#v=!1}})})}}function wu(e,r){return r}function wc(e,r,a){for(var u=[],f=r.length,c=0;c<f;c++)Co(r[c].e,u,!0);Nu(u,()=>{var v=u.length===0&&a!==null;if(v){var g=a,m=g.parentNode;Fc(m),m.append(g),e.items.clear(),Ct(e,r[0].prev,r[f-1].next)}for(var A=0;A<f;A++){var x=r[A];v||(e.items.delete(x.k),Ct(e,x.prev,x.next)),ut(x.e,!v)}e.first===r[0]&&(e.first=r[0].prev)})}function Eo(e,r,a,u,f,c=null){var v=e,g=new Map,m=null,A=(r&lu)!==0,x=(r&su)!==0,k=(r&uu)!==0;if(A){var b=e;v=b.appendChild(mn())}var D=null,F=Sc(()=>{var J=a();return nu(J)?J:J==null?[]:yo(J)}),L,N=!0;function W(){Ec(ae,L,v,r,u),D!==null&&(L.length===0?(D.fragment?(v.before(D.fragment),D.fragment=null):Ro(D.effect),ie.first=D.effect):Jn(D.effect,()=>{D=null}))}var ie=Io(()=>{L=Q(F);for(var J=L.length,oe=new Set,ue=xe,me=null,_e=ku(),le=0;le<J;le+=1){var V=L[le],te=u(V,le),ee=N?null:g.get(te);ee?(x&&sr(ee.v,V),k?sr(ee.i,le):ee.i=le,_e&&ue.skipped_effects.delete(ee.e)):(ee=xc(N?v:null,me,V,te,le,f,r,a),N&&(ee.o=!0,me===null?m=ee:me.next=ee,me=ee),g.set(te,ee)),oe.add(te)}if(J===0&&c&&!D)if(N)D={fragment:null,effect:mt(()=>c(v))};else{var ve=document.createDocumentFragment(),de=mn();ve.append(de),D={fragment:ve,effect:mt(()=>c(de))}}if(!N)if(_e){for(const[Te,be]of g)oe.has(Te)||ue.skipped_effects.add(be.e);ue.oncommit(W),ue.ondiscard(()=>{})}else W();Q(F)}),ae={effect:ie,items:g,first:m};N=!1}function Ec(e,r,a,u,f){var c=(u&rc)!==0,v=r.length,g=e.items,m=e.first,A,x=null,k,b=[],D=[],F,L,N,W;if(c)for(W=0;W<v;W+=1)F=r[W],L=f(F,W),N=g.get(L),N.o&&(N.a?.measure(),(k??=new Set).add(N));for(W=0;W<v;W+=1){if(F=r[W],L=f(F,W),N=g.get(L),e.first??=N,!N.o){N.o=!0;var ie=x?x.next:m;Ct(e,x,N),Ct(e,N,ie),Ga(N,ie,a),x=N,b=[],D=[],m=x.next;continue}if((N.e.f&ht)!==0&&(Ro(N.e),c&&(N.a?.unfix(),(k??=new Set).delete(N))),N!==m){if(A!==void 0&&A.has(N)){if(b.length<D.length){var ae=D[0],J;x=ae.prev;var oe=b[0],ue=b[b.length-1];for(J=0;J<b.length;J+=1)Ga(b[J],ae,a);for(J=0;J<D.length;J+=1)A.delete(D[J]);Ct(e,oe.prev,ue.next),Ct(e,x,oe),Ct(e,ue,ae),m=ae,x=ue,W-=1,b=[],D=[]}else A.delete(N),Ga(N,m,a),Ct(e,N.prev,N.next),Ct(e,N,x===null?e.first:x.next),Ct(e,x,N),x=N;continue}for(b=[],D=[];m!==null&&m.k!==L;)(m.e.f&ht)===0&&(A??=new Set).add(m),D.push(m),m=m.next;if(m===null)continue;N=m}b.push(N),x=N,m=N.next}if(m!==null||A!==void 0){for(var me=A===void 0?[]:yo(A);m!==null;)(m.e.f&ht)===0&&me.push(m),m=m.next;var _e=me.length;if(_e>0){var le=(u&lu)!==0&&v===0?a:null;if(c){for(W=0;W<_e;W+=1)me[W].a?.measure();for(W=0;W<_e;W+=1)me[W].a?.fix()}wc(e,me,le)}}c&&dr(()=>{if(k!==void 0)for(N of k)N.a?.apply()})}function xc(e,r,a,u,f,c,v,g){var m=(v&su)!==0,A=(v&ic)===0,x=m?A?Tu(a,!1,!1):Fn(a):a,k=(v&uu)===0?f:Fn(f);Z&&m&&(x.trace=()=>{var F=typeof k=="number"?f:k.v;g()[F]});var b={i:k,v:x,k:u,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var D=document.createDocumentFragment();D.append(e=mn())}return b.e=mt(()=>c(e,x,k,g)),r!==null&&(r.next=b),b}finally{}}function Ga(e,r,a){for(var u=e.next?e.next.e.nodes_start:a,f=r?r.e.nodes_start:a,c=e.e.nodes_start;c!==null&&c!==u;){var v=Vr(c);f.before(c),c=v}}function Ct(e,r,a){r===null?(e.first=a,e.effect.first=a&&a.e):(r.e===e.effect.last&&a!==null&&(e.effect.last=a.e),r.e.next&&(r.e.next.prev=null),r.next=a,r.e.next=a&&a.e),a===null?e.effect.last=r&&r.e:(a.e===e.effect.last&&r===null&&(e.effect.last=a.e.prev),a.e.prev&&(a.e.prev.next=null),a.prev=r,a.e.prev=r&&r.e)}function Tc(e,r,a,u){const f=xo;if(a.length===0&&e.length===0){u(r.map(f));return}var c=xe,v=pe,g=Dc();function m(){Promise.all(a.map(A=>Oc(A))).then(A=>{g();try{u([...r.map(f),...A])}catch(x){(v.f&un)===0&&ar(x,v)}c?.deactivate(),Ri()}).catch(A=>{ar(A,v)})}e.length>0?Promise.all(e).then(()=>{g();try{return m()}finally{c?.deactivate(),Ri()}}):m()}function Dc(){var e=pe,r=ce,a=st,u=xe;if(Z)var f=Mr;return function(v=!0){xt(e),ot(r),ir(a),v&&u?.activate(),Z&&Ci(f)}}function Ri(){xt(null),ot(null),ir(null),Z&&Ci(null)}const Ac=new Set;function xo(e){var r=Ue|ft,a=ce!==null&&(ce.f&Ue)!==0?ce:null;return pe!==null&&(pe.f|=cr),{ctx:st,deps:null,effects:null,equals:du,f:r,fn:e,reactions:null,rv:0,v:Ge,wv:0,parent:a??pe,ac:null}}function Oc(e,r){let a=pe;a===null&&Gf();var u=a.b,f=void 0,c=Fn(Ge),v=!ce,g=new Map;return jc(()=>{var m=iu();f=m.promise;try{Promise.resolve(e()).then(m.resolve,m.reject).then(()=>{A===xe&&A.committed&&A.deactivate(),Ri()})}catch(b){m.reject(b),Ri()}var A=xe;if(v){var x=!u.is_pending();u.update_pending_count(1),A.increment(x),g.get(A)?.reject(Hn),g.delete(A),g.set(A,m)}const k=(b,D=void 0)=>{if(A.activate(),D)D!==Hn&&(c.f|=ln,sr(c,D));else{(c.f&ln)!==0&&(c.f^=ln),sr(c,b);for(const[F,L]of g){if(g.delete(F),F===A)break;L.reject(Hn)}}v&&(u.update_pending_count(-1),A.decrement(x))};m.promise.then(k,b=>k(null,b||"unknown"))}),So(()=>{for(const m of g.values())m.reject(Hn)}),Z&&(c.f|=Hi),new Promise(m=>{function A(x){function k(){x===f?m(c):A(f)}x.then(k,k)}A(f)})}function Eu(e){const r=xo(e);return Lu(r),r}function Sc(e){const r=xo(e);return r.equals=vu,r}function Ja(e){var r=e.effects;if(r!==null){e.effects=null;for(var a=0;a<r.length;a+=1)ut(r[a])}}let Ha=[];function kc(e){for(var r=e.parent;r!==null;){if((r.f&Ue)===0)return(r.f&un)===0?r:null;r=r.parent}return null}function To(e){var r,a=pe;if(xt(kc(e)),Z){let u=or;Cs(new Set);try{Ha.includes(e)&&Hf(),Ha.push(e),e.f&=~yn,Ja(e),r=eo(e)}finally{xt(a),Cs(u),Ha.pop()}}else try{e.f&=~yn,Ja(e),r=eo(e)}finally{xt(a)}return r}function xu(e){var r=To(e);if(e.equals(r)||(xe?.is_fork||(e.v=r),e.wv=ju()),!hr)if(gt!==null)(Nr()||xe?.is_fork)&&gt.set(e,r);else{var a=(e.f&Tt)===0?Yt:Ze;qe(e,a)}}let or=new Set;const cn=new Map;function Cs(e){or=e}let Do=!1;function Ic(){Do=!0}function Fn(e,r){var a={f:0,v:e,reactions:null,equals:du,rv:0,wv:0};return a}function je(e,r){const a=Fn(e);return Lu(a),a}function Tu(e,r=!1,a=!0){const u=Fn(e);return r||(u.equals=vu),u}function ge(e,r,a=!1){ce!==null&&(!Kt||(ce.f&Ii)!==0)&&yu()&&(ce.f&(Ue|Gt|Hi|Ii))!==0&&!Wt?.includes(e)&&tc();let u=a?Cn(r):r;return Z&&pu(u,e.label),sr(e,u)}function sr(e,r){if(!e.equals(r)){var a=e.v;hr?cn.set(e,r):cn.set(e,a),e.v=r;var u=Ft.ensure();if(u.capture(e,a),Z){if(pe!==null){e.updated??=new Map;const f=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:f}),f>5){const c=cc("updated at");if(c!==null){let v=e.updated.get(c.stack);v||(v={error:c,count:0},e.updated.set(c.stack,v)),v.count++}}}pe!==null&&(e.set_during_effect=!0)}(e.f&Ue)!==0&&((e.f&ft)!==0&&To(e),qe(e,(e.f&Tt)!==0?Ze:Yt)),e.wv=ju(),Au(e,ft),pe!==null&&(pe.f&Ze)!==0&&(pe.f&(Ht|Kn))===0&&(pt===null?Uc([e]):pt.push(e)),!u.is_fork&&or.size>0&&!Do&&Du()}return r}function Du(){Do=!1;var e=dn;Mi(!0);const r=Array.from(or);try{for(const a of r)(a.f&Ze)!==0&&qe(a,Yt),Wr(a)&&Kr(a)}finally{Mi(e)}or.clear()}function Rr(e){ge(e,e.v+1)}function Au(e,r){var a=e.reactions;if(a!==null)for(var u=a.length,f=0;f<u;f++){var c=a[f],v=c.f;if(Z&&(v&Ii)!==0){or.add(c);continue}var g=(v&ft)===0;if(g&&qe(c,r),(v&Ue)!==0){var m=c;gt?.delete(m),(v&yn)===0&&(v&Tt&&(c.f|=yn),Au(m,Yt))}else g&&((v&Gt)!==0&&Vt!==null&&Vt.add(c),Nn(c))}}const Cc=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Cn(e){if(typeof e!="object"||e===null||fn in e)return e;const r=mo(e);if(r!==jf&&r!==zf)return e;var a=new Map,u=nu(e),f=je(0),c=Pn,v=x=>{if(Pn===c)return x();var k=ce,b=Pn;ot(null),Ms(c);var D=x();return ot(k),Ms(b),D};u&&(a.set("length",je(e.length)),Z&&(e=Pc(e)));var g="";let m=!1;function A(x){if(!m){m=!0,g=x,It(f,`${g} version`);for(const[k,b]of a)It(b,Sn(g,k));m=!1}}return new Proxy(e,{defineProperty(x,k,b){(!("value"in b)||b.configurable===!1||b.enumerable===!1||b.writable===!1)&&Jf();var D=a.get(k);return D===void 0?D=v(()=>{var F=je(b.value);return a.set(k,F),Z&&typeof k=="string"&&It(F,Sn(g,k)),F}):ge(D,b.value,!0),!0},deleteProperty(x,k){var b=a.get(k);if(b===void 0){if(k in x){const D=v(()=>je(Ge));a.set(k,D),Rr(f),Z&&It(D,Sn(g,k))}}else ge(b,Ge),Rr(f);return!0},get(x,k,b){if(k===fn)return e;if(Z&&k===ou)return A;var D=a.get(k),F=k in x;if(D===void 0&&(!F||Xn(x,k)?.writable)&&(D=v(()=>{var N=Cn(F?x[k]:Ge),W=je(N);return Z&&It(W,Sn(g,k)),W}),a.set(k,D)),D!==void 0){var L=Q(D);return L===Ge?void 0:L}return Reflect.get(x,k,b)},getOwnPropertyDescriptor(x,k){var b=Reflect.getOwnPropertyDescriptor(x,k);if(b&&"value"in b){var D=a.get(k);D&&(b.value=Q(D))}else if(b===void 0){var F=a.get(k),L=F?.v;if(F!==void 0&&L!==Ge)return{enumerable:!0,configurable:!0,value:L,writable:!0}}return b},has(x,k){if(k===fn)return!0;var b=a.get(k),D=b!==void 0&&b.v!==Ge||Reflect.has(x,k);if(b!==void 0||pe!==null&&(!D||Xn(x,k)?.writable)){b===void 0&&(b=v(()=>{var L=D?Cn(x[k]):Ge,N=je(L);return Z&&It(N,Sn(g,k)),N}),a.set(k,b));var F=Q(b);if(F===Ge)return!1}return D},set(x,k,b,D){var F=a.get(k),L=k in x;if(u&&k==="length")for(var N=b;N<F.v;N+=1){var W=a.get(N+"");W!==void 0?ge(W,Ge):N in x&&(W=v(()=>je(Ge)),a.set(N+"",W),Z&&It(W,Sn(g,N)))}if(F===void 0)(!L||Xn(x,k)?.writable)&&(F=v(()=>je(void 0)),Z&&It(F,Sn(g,k)),ge(F,Cn(b)),a.set(k,F));else{L=F.v!==Ge;var ie=v(()=>Cn(b));ge(F,ie)}var ae=Reflect.getOwnPropertyDescriptor(x,k);if(ae?.set&&ae.set.call(D,b),!L){if(u&&typeof k=="string"){var J=a.get("length"),oe=Number(k);Number.isInteger(oe)&&oe>=J.v&&ge(J,oe+1)}Rr(f)}return!0},ownKeys(x){Q(f);var k=Reflect.ownKeys(x).filter(F=>{var L=a.get(F);return L===void 0||L.v!==Ge});for(var[b,D]of a)D.v!==Ge&&!(b in x)&&k.push(b);return k},setPrototypeOf(){ec()}})}function Sn(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:Cc.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function Ya(e){try{if(e!==null&&typeof e=="object"&&fn in e)return e[fn]}catch{}return e}const Rc=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Pc(e){return new Proxy(e,{get(r,a,u){var f=Reflect.get(r,a,u);return Rc.has(a)?function(...c){Ic();var v=f.apply(this,c);return Du(),v}:f}})}function Mc(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:a,lastIndexOf:u,includes:f}=e;e.indexOf=function(c,v){const g=a.call(this,c,v);if(g===-1){for(let m=v??0;m<this.length;m+=1)if(Ya(this[m])===c){Wa("array.indexOf(...)");break}}return g},e.lastIndexOf=function(c,v){const g=u.call(this,c,v??this.length-1);if(g===-1){for(let m=0;m<=(v??this.length-1);m+=1)if(Ya(this[m])===c){Wa("array.lastIndexOf(...)");break}}return g},e.includes=function(c,v){const g=f.call(this,c,v);if(!g){for(let m=0;m<this.length;m+=1)if(Ya(this[m])===c){Wa("array.includes(...)");break}}return g},Array.__svelte_cleanup=()=>{e.indexOf=a,e.lastIndexOf=u,e.includes=f}}var Rs,Ao,Ou,Su;function Nc(){if(Rs===void 0){Rs=window,Ao=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,a=Text.prototype;Ou=Xn(r,"firstChild").get,Su=Xn(r,"nextSibling").get,Ss(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ss(a)&&(a.__t=void 0),Z&&(e.__svelte_meta=null,Mc())}}function mn(e=""){return document.createTextNode(e)}function Pi(e){return Ou.call(e)}function Vr(e){return Su.call(e)}function Oe(e,r){return Pi(e)}function Rn(e,r=!1){{var a=Pi(e);return a instanceof Comment&&a.data===""?Vr(a):a}}function $e(e,r=1,a=!1){let u=e;for(;r--;)u=Vr(u);return u}function Fc(e){e.textContent=""}function ku(){return!1}function Oo(e){var r=ce,a=pe;ot(null),xt(null);try{return e()}finally{ot(r),xt(a)}}function Kc(e){pe===null&&(ce===null&&qf(e),Zf()),hr&&Yf(e)}function Lc(e,r){var a=r.last;a===null?r.last=r.first=e:(a.next=e,e.prev=a,r.last=e)}function Zt(e,r,a){var u=pe;if(Z)for(;u!==null&&(u.f&Ii)!==0;)u=u.parent;u!==null&&(u.f&ht)!==0&&(e|=ht);var f={ctx:st,deps:null,nodes_start:null,nodes_end:null,f:e|ft|Tt,first:null,fn:r,last:null,next:null,parent:u,b:u&&u.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(Z&&(f.component_function=zr),a)try{Kr(f),f.f|=bo}catch(g){throw ut(f),g}else r!==null&&Nn(f);var c=f;if(a&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&cr)===0&&(c=c.first,(e&Gt)!==0&&(e&rr)!==0&&c!==null&&(c.f|=rr)),c!==null&&(c.parent=u,u!==null&&Lc(c,u),ce!==null&&(ce.f&Ue)!==0&&(e&Kn)===0)){var v=ce;(v.effects??=[]).push(c)}return f}function Nr(){return ce!==null&&!Kt}function So(e){const r=Zt(_o,null,!1);return qe(r,Ze),r.teardown=e,r}function Zn(e){Kc("$effect"),Z&&pn(e,"name",{value:"$effect"});var r=pe.f,a=!ce&&(r&Ht)!==0&&(r&bo)===0;if(a){var u=st;(u.e??=[]).push(e)}else return Iu(e)}function Iu(e){return Zt(go|Vf,e,!1)}function Bc(e){Ft.ensure();const r=Zt(Kn|cr,e,!0);return(a={})=>new Promise(u=>{a.outro?Jn(r,()=>{ut(r),u(void 0)}):(ut(r),u(void 0))})}function Cu(e){return Zt(go,e,!1)}function jc(e){return Zt(Hi|cr,e,!0)}function ko(e,r=0){return Zt(_o|r,e,!0)}function qn(e,r=[],a=[],u=[]){Tc(u,r,a,f=>{Zt(_o,()=>e(...f.map(Q)),!0)})}function Io(e,r=0){var a=Zt(Gt|r,e,!0);return Z&&(a.dev_stack=Mr),a}function mt(e){return Zt(Ht|cr,e,!0)}function Ru(e){var r=e.teardown;if(r!==null){const a=hr,u=ce;Ps(!0),ot(null);try{r.call(null)}finally{Ps(a),ot(u)}}}function Pu(e,r=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const f=a.ac;f!==null&&Oo(()=>{f.abort(Hn)});var u=a.next;(a.f&Kn)!==0?a.parent=null:ut(a,r),a=u}}function zc(e){for(var r=e.first;r!==null;){var a=r.next;(r.f&Ht)===0&&ut(r),r=a}}function ut(e,r=!0){var a=!1;(r||(e.f&au)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&($c(e.nodes_start,e.nodes_end),a=!0),Pu(e,r&&!a),Ni(e,0),qe(e,un);var u=e.transitions;if(u!==null)for(const c of u)c.stop();Ru(e);var f=e.parent;f!==null&&f.first!==null&&Mu(e),Z&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function $c(e,r){for(;e!==null;){var a=e===r?null:Vr(e);e.remove(),e=a}}function Mu(e){var r=e.parent,a=e.prev,u=e.next;a!==null&&(a.next=u),u!==null&&(u.prev=a),r!==null&&(r.first===e&&(r.first=u),r.last===e&&(r.last=a))}function Jn(e,r,a=!0){var u=[];Co(e,u,!0),Nu(u,()=>{a&&ut(e),r&&r()})}function Nu(e,r){var a=e.length;if(a>0){var u=()=>--a||r();for(var f of e)f.out(u)}else r()}function Co(e,r,a){if((e.f&ht)===0){if(e.f^=ht,e.transitions!==null)for(const v of e.transitions)(v.is_global||a)&&r.push(v);for(var u=e.first;u!==null;){var f=u.next,c=(u.f&rr)!==0||(u.f&Ht)!==0&&(e.f&Gt)!==0;Co(u,r,c?a:!1),u=f}}}function Ro(e){Fu(e,!0)}function Fu(e,r){if((e.f&ht)!==0){e.f^=ht,(e.f&Ze)===0&&(qe(e,ft),Nn(e));for(var a=e.first;a!==null;){var u=a.next,f=(a.f&rr)!==0||(a.f&Ht)!==0;Fu(a,f?r:!1),a=u}if(e.transitions!==null)for(const c of e.transitions)(c.is_global||r)&&c.in()}}function Ku(e,r){for(var a=e.nodes_start,u=e.nodes_end;a!==null;){var f=a===u?null:Vr(a);r.append(a),a=f}}let dn=!1;function Mi(e){dn=e}let hr=!1;function Ps(e){hr=e}let ce=null,Kt=!1;function ot(e){ce=e}let pe=null;function xt(e){pe=e}let Wt=null;function Lu(e){ce!==null&&(Wt===null?Wt=[e]:Wt.push(e))}let Je=null,dt=0,pt=null;function Uc(e){pt=e}let Bu=1,Fr=0,Pn=Fr;function Ms(e){Pn=e}function ju(){return++Bu}function Wr(e){var r=e.f;if((r&ft)!==0)return!0;if(r&Ue&&(e.f&=~yn),(r&Yt)!==0){var a=e.deps;if(a!==null)for(var u=a.length,f=0;f<u;f++){var c=a[f];if(Wr(c)&&xu(c),c.wv>e.wv)return!0}(r&Tt)!==0&&gt===null&&qe(e,Ze)}return!1}function zu(e,r,a=!0){var u=e.reactions;if(u!==null&&!Wt?.includes(e))for(var f=0;f<u.length;f++){var c=u[f];(c.f&Ue)!==0?zu(c,r,!1):r===c&&(a?qe(c,ft):(c.f&Ze)!==0&&qe(c,Yt),Nn(c))}}function eo(e){var r=Je,a=dt,u=pt,f=ce,c=Wt,v=st,g=Kt,m=Pn,A=e.f;Je=null,dt=0,pt=null,ce=(A&(Ht|Kn))===0?e:null,Wt=null,ir(e.ctx),Kt=!1,Pn=++Fr,e.ac!==null&&(Oo(()=>{e.ac.abort(Hn)}),e.ac=null);try{e.f|=qa;var x=e.fn,k=x(),b=e.deps;if(Je!==null){var D;if(Ni(e,dt),b!==null&&dt>0)for(b.length=dt+Je.length,D=0;D<Je.length;D++)b[dt+D]=Je[D];else e.deps=b=Je;if(dn&&Nr()&&(e.f&Tt)!==0)for(D=dt;D<b.length;D++)(b[D].reactions??=[]).push(e)}else b!==null&&dt<b.length&&(Ni(e,dt),b.length=dt);if(yu()&&pt!==null&&!Kt&&b!==null&&(e.f&(Ue|Yt|ft))===0)for(D=0;D<pt.length;D++)zu(pt[D],e);return f!==null&&f!==e&&(Fr++,pt!==null&&(u===null?u=pt:u.push(...pt))),(e.f&ln)!==0&&(e.f^=ln),k}catch(F){return mu(F)}finally{e.f^=qa,Je=r,dt=a,pt=u,ce=f,Wt=c,ir(v),Kt=g,Pn=m}}function Vc(e,r){let a=r.reactions;if(a!==null){var u=Bf.call(a,e);if(u!==-1){var f=a.length-1;f===0?a=r.reactions=null:(a[u]=a[f],a.pop())}}a===null&&(r.f&Ue)!==0&&(Je===null||!Je.includes(r))&&(qe(r,Yt),(r.f&Tt)!==0&&(r.f^=Tt,r.f&=~yn),Ja(r),Ni(r,0))}function Ni(e,r){var a=e.deps;if(a!==null)for(var u=r;u<a.length;u++)Vc(e,a[u])}function Kr(e){var r=e.f;if((r&un)===0){qe(e,Ze);var a=pe,u=dn;if(pe=e,dn=!0,Z){var f=zr;ks(e.component_function);var c=Mr;Ci(e.dev_stack??Mr)}try{(r&(Gt|Uf))!==0?zc(e):Pu(e),Ru(e);var v=eo(e);e.teardown=typeof v=="function"?v:null,e.wv=Bu;var g;Z&&fc&&(e.f&ft)!==0&&e.deps}finally{dn=u,pe=a,Z&&(ks(f),Ci(c))}}}function Q(e){var r=e.f,a=(r&Ue)!==0;if(ce!==null&&!Kt){var u=pe!==null&&(pe.f&un)!==0;if(!u&&!Wt?.includes(e)){var f=ce.deps;if((ce.f&qa)!==0)e.rv<Fr&&(e.rv=Fr,Je===null&&f!==null&&f[dt]===e?dt++:Je===null?Je=[e]:Je.includes(e)||Je.push(e));else{(ce.deps??=[]).push(e);var c=e.reactions;c===null?e.reactions=[ce]:c.includes(ce)||c.push(ce)}}}if(Z&&Ac.delete(e),hr){if(cn.has(e))return cn.get(e);if(a){var v=e,g=v.v;return((v.f&Ze)===0&&v.reactions!==null||Uu(v))&&(g=To(v)),cn.set(v,g),g}}else a&&(!gt?.has(e)||xe?.is_fork&&!Nr())&&(v=e,Wr(v)&&xu(v),dn&&Nr()&&(v.f&Tt)===0&&$u(v));if(gt?.has(e))return gt.get(e);if((e.f&ln)!==0)throw e.v;return e.v}function $u(e){if(e.deps!==null){e.f^=Tt;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&Ue)!==0&&(r.f&Tt)===0&&$u(r)}}function Uu(e){if(e.v===Ge)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(cn.has(r)||(r.f&Ue)!==0&&Uu(r))return!0;return!1}function Yi(e){var r=Kt;try{return Kt=!0,e()}finally{Kt=r}}const Wc=-7169;function qe(e,r){e.f=e.f&Wc|r}function Gc(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(fn in e)to(e);else if(!Array.isArray(e))for(let r in e){const a=e[r];typeof a=="object"&&a&&fn in a&&to(a)}}}function to(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let u in e)try{to(e[u],r)}catch{}const a=mo(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const u=ru(a);for(let f in u){const c=u[f].get;if(c)try{c.call(e)}catch{}}}}}const Hc=["touchstart","touchmove"];function Yc(e){return Hc.includes(e)}const Vu=new Set,no=new Set;function Zc(e,r,a,u={}){function f(c){if(u.capture||Ir.call(r,c),!c.cancelBubble)return Oo(()=>a?.call(this,c))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?dr(()=>{r.addEventListener(e,f,u)}):r.addEventListener(e,f,u),f}function Ns(e,r,a,u,f){var c={capture:u,passive:f},v=Zc(e,r,a,c);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&So(()=>{r.removeEventListener(e,v,c)})}function Zi(e){for(var r=0;r<e.length;r++)Vu.add(e[r]);for(var a of no)a(e)}let Fs=null;function Ir(e){var r=this,a=r.ownerDocument,u=e.type,f=e.composedPath?.()||[],c=f[0]||e.target;Fs=e;var v=0,g=Fs===e&&e.__root;if(g){var m=f.indexOf(g);if(m!==-1&&(r===document||r===window)){e.__root=r;return}var A=f.indexOf(r);if(A===-1)return;m<=A&&(v=m)}if(c=f[v]||e.target,c!==r){pn(e,"currentTarget",{configurable:!0,get(){return c||a}});var x=ce,k=pe;ot(null),xt(null);try{for(var b,D=[];c!==null;){var F=c.assignedSlot||c.parentNode||c.host||null;try{var L=c["__"+u];L!=null&&(!c.disabled||e.target===c)&&L.call(c,e)}catch(N){b?D.push(N):b=N}if(e.cancelBubble||F===r||F===null)break;c=F}if(b){for(let N of D)queueMicrotask(()=>{throw N});throw b}}finally{e.__root=r,delete e.currentTarget,ot(x),xt(k)}}}function qc(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function ro(e,r){var a=pe;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=r)}function Qe(e,r){var a=(r&ac)!==0,u=(r&oc)!==0,f,c=!e.startsWith("<!>");return()=>{f===void 0&&(f=qc(c?e:"<!>"+e),a||(f=Pi(f)));var v=u||Ao?document.importNode(f,!0):f.cloneNode(!0);if(a){var g=Pi(v),m=v.lastChild;ro(g,m)}else ro(v,v);return v}}function er(){var e=document.createDocumentFragment(),r=document.createComment(""),a=mn();return e.append(r,a),ro(r,a),e}function Ae(e,r){e!==null&&e.before(r)}function hn(e,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Qc(e,r){return Xc(e,r)}const Gn=new Map;function Xc(e,{target:r,anchor:a,props:u={},events:f,context:c,intro:v=!0}){Nc();var g=new Set,m=k=>{for(var b=0;b<k.length;b++){var D=k[b];if(!g.has(D)){g.add(D);var F=Yc(D);r.addEventListener(D,Ir,{passive:F});var L=Gn.get(D);L===void 0?(document.addEventListener(D,Ir,{passive:F}),Gn.set(D,1)):Gn.set(D,L+1)}}};m(yo(Vu)),no.add(m);var A=void 0,x=Bc(()=>{var k=a??r.appendChild(mn());return _c(k,{pending:()=>{}},b=>{if(c){$r({});var D=st;D.c=c}f&&(u.$$events=f),A=e(b,u)||{},c&&Ur()}),()=>{for(var b of g){r.removeEventListener(b,Ir);var D=Gn.get(b);--D===0?(document.removeEventListener(b,Ir),Gn.delete(b)):Gn.set(b,D)}no.delete(m),k!==a&&k.parentNode?.removeChild(k)}});return Jc.set(A,x),A}let Jc=new WeakMap;class ed{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,a=!0){this.anchor=r,this.#u=a}#a=()=>{var r=xe;if(this.#e.has(r)){var a=this.#e.get(r),u=this.#t.get(a);if(u)Ro(u),this.#n.delete(a);else{var f=this.#r.get(a);f&&(this.#t.set(a,f.effect),this.#r.delete(a),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),u=f.effect)}for(const[c,v]of this.#e){if(this.#e.delete(c),c===r)break;const g=this.#r.get(v);g&&(ut(g.effect),this.#r.delete(v))}for(const[c,v]of this.#t){if(c===a||this.#n.has(c))continue;const g=()=>{if(Array.from(this.#e.values()).includes(c)){var A=document.createDocumentFragment();Ku(v,A),A.append(mn()),this.#r.set(c,{effect:v,fragment:A})}else ut(v);this.#n.delete(c),this.#t.delete(c)};this.#u||!u?(this.#n.add(c),Jn(v,g,!1)):g()}}};#i=r=>{this.#e.delete(r);const a=Array.from(this.#e.values());for(const[u,f]of this.#r)a.includes(u)||(ut(f.effect),this.#r.delete(u))};ensure(r,a){var u=xe,f=ku();if(a&&!this.#t.has(r)&&!this.#r.has(r))if(f){var c=document.createDocumentFragment(),v=mn();c.append(v),this.#r.set(r,{effect:mt(()=>a(v)),fragment:c})}else this.#t.set(r,mt(()=>a(this.anchor)));if(this.#e.set(u,r),f){for(const[g,m]of this.#t)g===r?u.skipped_effects.delete(m):u.skipped_effects.add(m);for(const[g,m]of this.#r)g===r?u.skipped_effects.delete(m.effect):u.skipped_effects.add(m.effect);u.oncommit(this.#a),u.ondiscard(this.#i)}else this.#a()}}function Lt(e,r,a=!1){var u=new ed(e),f=a?rr:0;function c(v,g){u.ensure(v,g)}Io(()=>{var v=!1;r((g,m=!0)=>{v=!0,c(m,g)}),v||c(!1,null)},f)}function td(e,r,a){Cu(()=>{var u=Yi(()=>r(e,a?.())||{});if(a&&u?.update){var f=!1,c={};ko(()=>{var v=a();Gc(v),f&&hu(c,v)&&(c=v,u.update(v))}),f=!0}if(u?.destroy)return()=>u.destroy()})}function Wu(e){var r,a,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e)){var f=e.length;for(r=0;r<f;r++)e[r]&&(a=Wu(e[r]))&&(u&&(u+=" "),u+=a)}else for(a in e)e[a]&&(u&&(u+=" "),u+=a);return u}function nd(){for(var e,r,a=0,u="",f=arguments.length;a<f;a++)(e=arguments[a])&&(r=Wu(e))&&(u&&(u+=" "),u+=r);return u}function rd(e){return typeof e=="object"?nd(e):e??""}function id(e,r,a){var u=e==null?"":""+e;return u===""?null:u}function ad(e,r,a,u,f,c){var v=e.__className;if(v!==a||v===void 0){var g=id(a);g==null?e.removeAttribute("class"):e.className=g,e.__className=a}return c}const od=Symbol("is custom element"),sd=Symbol("is html");function ud(e,r){var a=Po(e);a.value===(a.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function ld(e,r){var a=Po(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function Ks(e,r,a,u){var f=Po(e);f[r]!==(f[r]=a)&&(r==="loading"&&(e[Wf]=a),a==null?e.removeAttribute(r):typeof a!="string"&&fd(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function Po(e){return e.__attributes??={[od]:e.nodeName.includes("-"),[sd]:e.namespaceURI===uc}}var Ls=new Map;function fd(e){var r=e.getAttribute("is")||e.nodeName,a=Ls.get(r);if(a)return a;Ls.set(r,a=[]);for(var u,f=e,c=Element.prototype;c!==f;){u=ru(f);for(var v in u)u[v].set&&a.push(v);f=mo(f)}return a}function Bs(e,r){return e===r||e?.[fn]===r}function cd(e={},r,a,u){return Cu(()=>{var f,c;return ko(()=>{f=c,c=[],Yi(()=>{e!==a(...c)&&(r(e,...c),f&&Bs(a(...f),e)&&r(null,...f))})}),()=>{dr(()=>{c&&Bs(a(...c),e)&&r(null,...c)})}}),e}function Gu(e,r,a){if(e==null)return r(void 0),ki;const u=Yi(()=>e.subscribe(r,a));return u.unsubscribe?()=>u.unsubscribe():u}function dd(e){let r;return Gu(e,a=>r=a)(),r}let io=Symbol();function Fi(e,r,a){const u=a[r]??={store:null,source:Tu(void 0),unsubscribe:ki};if(Z&&(u.source.label=r),u.store!==e&&!(io in a))if(u.unsubscribe(),u.store=e??null,e==null)u.source.v=void 0,u.unsubscribe=ki;else{var f=!0;u.unsubscribe=Gu(e,c=>{f?u.source.v=c:ge(u.source,c)}),f=!1}return e&&io in a?dd(e):Q(u.source)}function ao(e,r,a){let u=a[r];return u&&u.store!==e&&(u.unsubscribe(),u.unsubscribe=ki),e}function Mo(){const e={};function r(){So(()=>{for(var a in e)e[a].unsubscribe();pn(e,io,{enumerable:!1,value:!0})})}return[e,r]}if(Z){let e=function(r){if(!(r in globalThis)){let a;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(a!==void 0)return a;Xf(r)},set:u=>{a=u}})}};var mv=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const hd="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(hd);var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ai={exports:{}},yd=Ai.exports,js;function md(){return js||(js=1,(function(e,r){(function(a,u){e.exports=u()})(yd,(function(){var a=function(t,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},a(t,n)};function u(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var f=function(){return f=Object.assign||function(n){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},f.apply(this,arguments)};function c(t,n,i){for(var o=0,s=n.length,l;o<s;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return t.concat(l||Array.prototype.slice.call(n))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:vd,g=Object.keys,m=Array.isArray;typeof Promise<"u"&&!v.Promise&&(v.Promise=Promise);function A(t,n){return typeof n!="object"||g(n).forEach(function(i){t[i]=n[i]}),t}var x=Object.getPrototypeOf,k={}.hasOwnProperty;function b(t,n){return k.call(t,n)}function D(t,n){typeof n=="function"&&(n=n(x(t))),(typeof Reflect>"u"?g:Reflect.ownKeys)(n).forEach(function(i){L(t,i,n[i])})}var F=Object.defineProperty;function L(t,n,i,o){F(t,n,A(i&&b(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function N(t){return{from:function(n){return t.prototype=Object.create(n.prototype),L(t.prototype,"constructor",t),{extend:D.bind(null,t.prototype)}}}}var W=Object.getOwnPropertyDescriptor;function ie(t,n){var i=W(t,n),o;return i||(o=x(t))&&ie(o,n)}var ae=[].slice;function J(t,n,i){return ae.call(t,n,i)}function oe(t,n){return n(t)}function ue(t){if(!t)throw new Error("Assertion Failed")}function me(t){v.setImmediate?setImmediate(t):setTimeout(t,0)}function _e(t,n){return t.reduce(function(i,o,s){var l=n(o,s);return l&&(i[l[0]]=l[1]),i},{})}function le(t,n){if(typeof n=="string"&&b(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],o=0,s=n.length;o<s;++o){var l=le(t,n[o]);i.push(l)}return i}var d=n.indexOf(".");if(d!==-1){var h=t[n.substr(0,d)];return h==null?void 0:le(h,n.substr(d+1))}}function V(t,n,i){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){ue(typeof i!="string"&&"length"in i);for(var o=0,s=n.length;o<s;++o)V(t,n[o],i[o])}else{var l=n.indexOf(".");if(l!==-1){var d=n.substr(0,l),h=n.substr(l+1);if(h==="")i===void 0?m(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=i;else{var p=t[d];(!p||!b(t,d))&&(p=t[d]={}),V(p,h,i)}}else i===void 0?m(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function te(t,n){typeof n=="string"?V(t,n,void 0):"length"in n&&[].map.call(n,function(i){V(t,i,void 0)})}function ee(t){var n={};for(var i in t)b(t,i)&&(n[i]=t[i]);return n}var ve=[].concat;function de(t){return ve.apply([],t)}var Te="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(de([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return v[t]}),be=new Set(Te.map(function(t){return v[t]}));function he(t){var n={};for(var i in t)if(b(t,i)){var o=t[i];n[i]=!o||typeof o!="object"||be.has(o.constructor)?o:he(o)}return n}function Ne(t){for(var n in t)if(b(t,n))return!1;return!0}var Xe=null;function Pe(t){Xe=new WeakMap;var n=tt(t);return Xe=null,n}function tt(t){if(!t||typeof t!="object")return t;var n=Xe.get(t);if(n)return n;if(m(t)){n=[],Xe.set(t,n);for(var i=0,o=t.length;i<o;++i)n.push(tt(t[i]))}else if(be.has(t.constructor))n=t;else{var s=x(t);n=s===Object.prototype?{}:Object.create(s),Xe.set(t,n);for(var l in t)b(t,l)&&(n[l]=tt(t[l]))}return n}var Dt={}.toString;function Bt(t){return Dt.call(t).slice(8,-1)}var nt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Le=typeof nt=="symbol"?function(t){var n;return t!=null&&(n=t[nt])&&n.apply(t)}:function(){return null};function Se(t,n){var i=t.indexOf(n);return i>=0&&t.splice(i,1),i>=0}var jt={};function zt(t){var n,i,o,s;if(arguments.length===1){if(m(t))return t.slice();if(this===jt&&typeof t=="string")return[t];if(s=Le(t)){for(i=[];o=s.next(),!o.done;)i.push(o.value);return i}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(i=new Array(n);n--;)i[n]=t[n];return i}return[t]}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var ia=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},cl=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],zo=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],aa=cl.concat(zo),dl={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ln(t,n){this.name=t,this.message=n}N(Ln).from(Error).extend({toString:function(){return this.name+": "+this.message}});function $o(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,o,s){return s.indexOf(i)===o}).join(`
`)}function Zr(t,n,i,o){this.failures=n,this.failedKeys=o,this.successCount=i,this.message=$o(t,n)}N(Zr).from(Ln);function Bn(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=$o(t,this.failures)}N(Bn).from(Ln);var oa=aa.reduce(function(t,n){return t[n]=n+"Error",t},{}),hl=Ln,Y=aa.reduce(function(t,n){var i=n+"Error";function o(s,l){this.name=i,s?typeof s=="string"?(this.message="".concat(s).concat(l?`
 `+l:""),this.inner=l||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=dl[n]||i,this.inner=null)}return N(o).from(hl),t[n]=o,t},{});Y.Syntax=SyntaxError,Y.Type=TypeError,Y.Range=RangeError;var Uo=zo.reduce(function(t,n){return t[n+"Error"]=Y[n],t},{});function vl(t,n){if(!t||t instanceof Ln||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Uo[t.name])return t;var i=new Uo[t.name](n||t.message,t);return"stack"in t&&L(i,"stack",{get:function(){return this.inner.stack}}),i}var qr=aa.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=Y[n]),t},{});qr.ModifyError=Zr,qr.DexieError=Ln,qr.BulkError=Bn;function ye(){}function vr(t){return t}function pl(t,n){return t==null||t===vr?n:function(i){return n(t(i))}}function _n(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function yl(t,n){return t===ye?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var l=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?_n(o,this.onsuccess):o),s&&(this.onerror=this.onerror?_n(s,this.onerror):s),l!==void 0?l:i}}function ml(t,n){return t===ye?n:function(){t.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?_n(i,this.onsuccess):i),o&&(this.onerror=this.onerror?_n(o,this.onerror):o)}}function gl(t,n){return t===ye?n:function(i){var o=t.apply(this,arguments);A(i,o);var s=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?_n(s,this.onsuccess):s),l&&(this.onerror=this.onerror?_n(l,this.onerror):l),o===void 0?d===void 0?void 0:d:A(o,d)}}function _l(t,n){return t===ye?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function sa(t,n){return t===ye?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return i.then(function(){return n.apply(o,l)})}return n.apply(this,arguments)}}var At=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Vo(t,n){At=t}var pr={},Wo=100,ua=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,x(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,x(n),t]})(),Go=ua[0],Ho=ua[1],bl=ua[2],wl=Ho&&Ho.then,bn=Go&&Go.constructor,la=!!bl;function El(){queueMicrotask(Tl)}var yr=function(t,n){mr.push([t,n]),Qr&&(El(),Qr=!1)},fa=!0,Qr=!0,wn=[],Xr=[],ca=vr,qt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ye,pgp:!1,env:{},finalize:ye},G=qt,mr=[],En=0,Jr=[];function z(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=G;if(typeof t!="function"){if(t!==pr)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ha(this,this._value);return}this._state=null,this._value=null,++n.ref,Zo(this,t)}var da={get:function(){var t=G,n=ri;function i(o,s){var l=this,d=!t.global&&(t!==G||n!==ri),h=d&&!Xt(),p=new z(function(y,E){va(l,new Yo(Xo(o,t,d,h),Xo(s,t,d,h),y,E,t))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return i.prototype=pr,i},set:function(t){L(this,"then",t&&t.prototype===pr?da:{get:function(){return t},set:da.set})}};D(z.prototype,{then:da,_then:function(t,n){va(this,new Yo(null,null,t,n,G))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],i=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?i(o):ei(o)}):this.then(null,function(o){return o&&o.name===n?i(o):ei(o)})},finally:function(t){return this.then(function(n){return z.resolve(t()).then(function(){return n})},function(n){return z.resolve(t()).then(function(){return ei(n)})})},timeout:function(t,n){var i=this;return t<1/0?new z(function(o,s){var l=setTimeout(function(){return s(new Y.Timeout(n))},t);i.then(o,s).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(z.prototype,Symbol.toStringTag,"Dexie.Promise"),qt.env=Qo();function Yo(t,n,i,o,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=o,this.psd=s}D(z,{all:function(){var t=zt.apply(null,arguments).map(ii);return new z(function(n,i){t.length===0&&n([]);var o=t.length;t.forEach(function(s,l){return z.resolve(s).then(function(d){t[l]=d,--o||n(t)},i)})})},resolve:function(t){if(t instanceof z)return t;if(t&&typeof t.then=="function")return new z(function(i,o){t.then(i,o)});var n=new z(pr,!0,t);return n},reject:ei,race:function(){var t=zt.apply(null,arguments).map(ii);return new z(function(n,i){t.map(function(o){return z.resolve(o).then(n,i)})})},PSD:{get:function(){return G},set:function(t){return G=t}},totalEchoes:{get:function(){return ri}},newPSD:Qt,usePSD:xn,scheduler:{get:function(){return yr},set:function(t){yr=t}},rejectionMapper:{get:function(){return ca},set:function(t){ca=t}},follow:function(t,n){return new z(function(i,o){return Qt(function(s,l){var d=G;d.unhandleds=[],d.onunhandled=l,d.finalize=_n(function(){var h=this;Dl(function(){h.unhandleds.length===0?s():l(h.unhandleds[0])})},d.finalize),t()},n,i,o)})}}),bn&&(bn.allSettled&&L(z,"allSettled",function(){var t=zt.apply(null,arguments).map(ii);return new z(function(n){t.length===0&&n([]);var i=t.length,o=new Array(i);t.forEach(function(s,l){return z.resolve(s).then(function(d){return o[l]={status:"fulfilled",value:d}},function(d){return o[l]={status:"rejected",reason:d}}).then(function(){return--i||n(o)})})})}),bn.any&&typeof AggregateError<"u"&&L(z,"any",function(){var t=zt.apply(null,arguments).map(ii);return new z(function(n,i){t.length===0&&i(new AggregateError([]));var o=t.length,s=new Array(o);t.forEach(function(l,d){return z.resolve(l).then(function(h){return n(h)},function(h){s[d]=h,--o||i(new AggregateError(s))})})})}),bn.withResolvers&&(z.withResolvers=bn.withResolvers));function Zo(t,n){try{n(function(i){if(t._state===null){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&jn();i&&typeof i.then=="function"?Zo(t,function(s,l){i instanceof z?i._then(s,l):i.then(s,l)}):(t._state=!0,t._value=i,qo(t)),o&&zn()}},ha.bind(null,t))}catch(i){ha(t,i)}}function ha(t,n){if(Xr.push(n),t._state===null){var i=t._lib&&jn();n=ca(n),t._state=!1,t._value=n,Al(t),qo(t),i&&zn()}}function qo(t){var n=t._listeners;t._listeners=[];for(var i=0,o=n.length;i<o;++i)va(t,n[i]);var s=t._PSD;--s.ref||s.finalize(),En===0&&(++En,yr(function(){--En===0&&pa()},[]))}function va(t,n){if(t._state===null){t._listeners.push(n);return}var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++En,yr(xl,[i,t,n])}function xl(t,n,i){try{var o,s=n._value;!n._state&&Xr.length&&(Xr=[]),o=At&&n._consoleTask?n._consoleTask.run(function(){return t(s)}):t(s),!n._state&&Xr.indexOf(s)===-1&&Ol(n),i.resolve(o)}catch(l){i.reject(l)}finally{--En===0&&pa(),--i.psd.ref||i.psd.finalize()}}function Tl(){xn(qt,function(){jn()&&zn()})}function jn(){var t=fa;return fa=!1,Qr=!1,t}function zn(){var t,n,i;do for(;mr.length>0;)for(t=mr,mr=[],i=t.length,n=0;n<i;++n){var o=t[n];o[0].apply(null,o[1])}while(mr.length>0);fa=!0,Qr=!0}function pa(){var t=wn;wn=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=Jr.slice(0),i=n.length;i;)n[--i]()}function Dl(t){function n(){t(),Jr.splice(Jr.indexOf(n),1)}Jr.push(n),++En,yr(function(){--En===0&&pa()},[])}function Al(t){wn.some(function(n){return n._value===t._value})||wn.push(t)}function Ol(t){for(var n=wn.length;n;)if(wn[--n]._value===t._value){wn.splice(n,1);return}}function ei(t){return new z(pr,!1,t)}function we(t,n){var i=G;return function(){var o=jn(),s=G;try{return Jt(i,!0),t.apply(this,arguments)}catch(l){n&&n(l)}finally{Jt(s,!1),o&&zn()}}}var Fe={awaits:0,echoes:0,id:0},Sl=0,ti=[],ni=0,ri=0,kl=0;function Qt(t,n,i,o){var s=G,l=Object.create(s);l.parent=s,l.ref=0,l.global=!1,l.id=++kl,qt.env,l.env=la?{Promise:z,PromiseProp:{value:z,configurable:!0,writable:!0},all:z.all,race:z.race,allSettled:z.allSettled,any:z.any,resolve:z.resolve,reject:z.reject}:{},n&&A(l,n),++s.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=xn(l,t,i,o);return l.ref===0&&l.finalize(),d}function $n(){return Fe.id||(Fe.id=++Sl),++Fe.awaits,Fe.echoes+=Wo,Fe.id}function Xt(){return Fe.awaits?(--Fe.awaits===0&&(Fe.id=0),Fe.echoes=Fe.awaits*Wo,!0):!1}(""+wl).indexOf("[native code]")===-1&&($n=Xt=ye);function ii(t){return Fe.echoes&&t&&t.constructor===bn?($n(),t.then(function(n){return Xt(),n},function(n){return Xt(),ke(n)})):t}function Il(t){++ri,(!Fe.echoes||--Fe.echoes===0)&&(Fe.echoes=Fe.awaits=Fe.id=0),ti.push(G),Jt(t,!0)}function Cl(){var t=ti[ti.length-1];ti.pop(),Jt(t,!1)}function Jt(t,n){var i=G;if((n?Fe.echoes&&(!ni++||t!==G):ni&&(!--ni||t!==G))&&queueMicrotask(n?Il.bind(null,t):Cl),t!==G&&(G=t,i===qt&&(qt.env=Qo()),la)){var o=qt.env.Promise,s=t.env;(i.global||t.global)&&(Object.defineProperty(v,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function Qo(){var t=v.Promise;return la?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function xn(t,n,i,o,s){var l=G;try{return Jt(t,!0),n(i,o,s)}finally{Jt(l,!1)}}function Xo(t,n,i,o){return typeof t!="function"?t:function(){var s=G;i&&$n(),Jt(n,!0);try{return t.apply(this,arguments)}finally{Jt(s,!1),o&&queueMicrotask(Xt)}}}function ya(t){Promise===bn&&Fe.echoes===0?ni===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var ke=z.reject;function ma(t,n,i,o){if(!t.idbdb||!t._state.openComplete&&!G.letThrough&&!t._vip){if(t._state.openComplete)return ke(new Y.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return ke(new Y.DatabaseClosed);t.open().catch(ye)}return t._state.dbReadyPromise.then(function(){return ma(t,n,i,o)})}else{var s=t._createTransaction(n,i,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(l){return l.name===oa.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return ma(t,n,i,o)})):ke(l)}return s._promise(n,function(l,d){return Qt(function(){return G.trans=s,o(l,d,s)})}).then(function(l){if(n==="readwrite")try{s.idbtrans.commit()}catch{}return n==="readonly"?l:s._completion.then(function(){return l})})}}var Jo="4.2.1",Tn="",ga=-1/0,$t="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",es="String expected.",Un=[],ai="__dbnames",_a="readonly",ba="readwrite";function Dn(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var ts={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function oi(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=Pe(n),delete n[t]),n}:function(n){return n}}function ns(){throw Y.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function se(t,n){try{var i=rs(t),o=rs(n);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return Pl(is(t),is(n));case"Array":return Rl(t,n)}}catch{}return NaN}function Rl(t,n){for(var i=t.length,o=n.length,s=i<o?i:o,l=0;l<s;++l){var d=se(t[l],n[l]);if(d!==0)return d}return i===o?0:i<o?-1:1}function Pl(t,n){for(var i=t.length,o=n.length,s=i<o?i:o,l=0;l<s;++l)if(t[l]!==n[l])return t[l]<n[l]?-1:1;return i===o?0:i<o?-1:1}function rs(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var i=Bt(t);return i==="ArrayBuffer"?"binary":i}function is(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function si(t,n,i){var o=t.schema.yProps;return o?(n&&i.numFailures>0&&(n=n.filter(function(s,l){return!i.failures[l]})),Promise.all(o.map(function(s){var l=s.updatesTable;return n?t.db.table(l).where("k").anyOf(n).delete():t.db.table(l).clear()})).then(function(){return i})):i}var gr=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var i,o=this["@@propmod"];if(o.add!==void 0){var s=o.add;if(m(s))return c(c([],m(n)?n:[],!0),s).sort();if(typeof s=="number")return(Number(n)||0)+s;if(typeof s=="bigint")try{return BigInt(n)+s}catch{return BigInt(0)+s}throw new TypeError("Invalid term ".concat(s))}if(o.remove!==void 0){var l=o.remove;if(m(l))return m(n)?n.filter(function(h){return!l.includes(h)}).sort():[];if(typeof l=="number")return Number(n)-l;if(typeof l=="bigint")try{return BigInt(n)-l}catch{return BigInt(0)-l}throw new TypeError("Invalid subtrahend ".concat(l))}var d=(i=o.replacePrefix)===null||i===void 0?void 0:i[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function as(t,n){for(var i=g(n),o=i.length,s=!1,l=0;l<o;++l){var d=i[l],h=n[d],p=le(t,d);h instanceof gr?(V(t,d,h.execute(p)),s=!0):p!==h&&(V(t,d,h),s=!0)}return s}var os=(function(){function t(){}return t.prototype._trans=function(n,i,o){var s=this._tx||G.trans,l=this.name,d=At&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function h(E,_,S){if(!S.schema[l])throw new Y.NotFound("Table "+l+" not part of transaction");return i(S.idbtrans,S)}var p=jn();try{var y=s&&s.db._novip===this.db._novip?s===G.trans?s._promise(n,h,o):Qt(function(){return s._promise(n,h,o)},{trans:s,transless:G.transless||G}):ma(this.db,n,[this.name],h);return d&&(y._consoleTask=d,y=y.catch(function(E){return console.trace(E),ke(E)})),y}finally{p&&zn()}},t.prototype.get=function(n,i){var o=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?ke(new Y.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:n}).then(function(l){return o.hook.reading.fire(l)})}).then(i)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(m(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=g(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(E){if(E.compound&&i.every(function(S){return E.keyPath.indexOf(S)>=0})){for(var _=0;_<i.length;++_)if(i.indexOf(E.keyPath[_])===-1)return!1;return!0}return!1}).sort(function(E,_){return E.keyPath.length-_.keyPath.length})[0];if(o&&this.db._maxKey!==Tn){var s=o.keyPath.slice(0,i.length);return this.where(s).equals(s.map(function(E){return n[E]}))}!o&&At&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var l=this.schema.idxByName;function d(E,_){return se(E,_)===0}var h=i.reduce(function(E,_){var S=E[0],K=E[1],w=l[_],T=n[_];return[S||w,S||!w?Dn(K,w&&w.multi?function(O){var I=le(O,_);return m(I)&&I.some(function(R){return d(T,R)})}:function(O){return d(T,le(O,_))}):K]},[null,null]),p=h[0],y=h[1];return p?this.where(p.name).equals(n[p.keyPath]).filter(y):o?this.filter(y):this.where(i).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,m(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var i=this,o=i.db,s=i.name;this.schema.mappedClass=n,n.prototype instanceof ns&&(n=(function(p){u(y,p);function y(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(y.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),y.prototype.table=function(){return s},y})(n));for(var l=new Set,d=n.prototype;d;d=x(d))Object.getOwnPropertyNames(d).forEach(function(p){return l.add(p)});var h=function(p){if(!p)return p;var y=Object.create(n.prototype);for(var E in p)if(!l.has(E))try{y[E]=p[E]}catch{}return y};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=h,this.hook("reading",h),n},t.prototype.defineClass=function(){function n(i){A(this,i)}return this.mapToClass(n)},t.prototype.add=function(n,i){var o=this,s=this.schema.primKey,l=s.auto,d=s.keyPath,h=n;return d&&l&&(h=oi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"add",keys:i!=null?[i]:null,values:[h]})}).then(function(p){return p.numFailures?z.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{V(n,d,p)}catch{}return p})},t.prototype.upsert=function(n,i){var o=this,s=this.schema.primKey.keyPath;return this._trans("readwrite",function(l){return o.core.get({trans:l,key:n}).then(function(d){var h=d??{};return as(h,i),s&&V(h,s,n),o.core.mutate({trans:l,type:"put",values:[h],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[i]}}).then(function(p){return p.numFailures?z.reject(p.failures[0]):!!d})})})},t.prototype.update=function(n,i){if(typeof n=="object"&&!m(n)){var o=le(n,this.schema.primKey.keyPath);return o===void 0?ke(new Y.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(n).modify(i)},t.prototype.put=function(n,i){var o=this,s=this.schema.primKey,l=s.auto,d=s.keyPath,h=n;return d&&l&&(h=oi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"put",values:[h],keys:i!=null?[i]:null})}).then(function(p){return p.numFailures?z.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{V(n,d,p)}catch{}return p})},t.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(s){return si(i,[n],s)}).then(function(s){return s.numFailures?z.reject(s.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:ts}).then(function(o){return si(n,null,o)})}).then(function(i){return i.numFailures?z.reject(i.failures[0]):void 0})},t.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:n,trans:o}).then(function(s){return s.map(function(l){return i.hook.reading.fire(l)})})})},t.prototype.bulkAdd=function(n,i,o){var s=this,l=Array.isArray(i)?i:void 0;o=o||(l?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=s.schema.primKey,y=p.auto,E=p.keyPath;if(E&&l)throw new Y.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var _=n.length,S=E&&y?n.map(oi(E)):n;return s.core.mutate({trans:h,type:"add",keys:l,values:S,wantResults:d}).then(function(K){var w=K.numFailures,T=K.results,O=K.lastResult,I=K.failures,R=d?T:O;if(w===0)return R;throw new Bn("".concat(s.name,".bulkAdd(): ").concat(w," of ").concat(_," operations failed"),I)})})},t.prototype.bulkPut=function(n,i,o){var s=this,l=Array.isArray(i)?i:void 0;o=o||(l?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=s.schema.primKey,y=p.auto,E=p.keyPath;if(E&&l)throw new Y.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var _=n.length,S=E&&y?n.map(oi(E)):n;return s.core.mutate({trans:h,type:"put",keys:l,values:S,wantResults:d}).then(function(K){var w=K.numFailures,T=K.results,O=K.lastResult,I=K.failures,R=d?T:O;if(w===0)return R;throw new Bn("".concat(s.name,".bulkPut(): ").concat(w," of ").concat(_," operations failed"),I)})})},t.prototype.bulkUpdate=function(n){var i=this,o=this.core,s=n.map(function(h){return h.key}),l=n.map(function(h){return h.changes}),d=[];return this._trans("readwrite",function(h){return o.getMany({trans:h,keys:s,cache:"clone"}).then(function(p){var y=[],E=[];n.forEach(function(S,K){var w=S.key,T=S.changes,O=p[K];if(O){for(var I=0,R=Object.keys(T);I<R.length;I++){var P=R[I],M=T[P];if(P===i.schema.primKey.keyPath){if(se(M,w)!==0)throw new Y.Constraint("Cannot update primary key in bulkUpdate()")}else V(O,P,M)}d.push(K),y.push(w),E.push(O)}});var _=y.length;return o.mutate({trans:h,type:"put",keys:y,values:E,updates:{keys:s,changeSpecs:l}}).then(function(S){var K=S.numFailures,w=S.failures;if(K===0)return _;for(var T=0,O=Object.keys(w);T<O.length;T++){var I=O[T],R=d[Number(I)];if(R!=null){var P=w[I];delete w[I],w[R]=P}}throw new Bn("".concat(i.name,".bulkUpdate(): ").concat(K," of ").concat(_," operations failed"),w)})})})},t.prototype.bulkDelete=function(n){var i=this,o=n.length;return this._trans("readwrite",function(s){return i.core.mutate({trans:s,type:"delete",keys:n}).then(function(l){return si(i,n,l)})}).then(function(s){var l=s.numFailures,d=s.lastResult,h=s.failures;if(l===0)return d;throw new Bn("".concat(i.name,".bulkDelete(): ").concat(l," of ").concat(o," operations failed"),h)})},t})();function _r(t){var n={},i=function(h,p){if(p){for(var y=arguments.length,E=new Array(y-1);--y;)E[y-1]=arguments[y];return n[h].subscribe.apply(null,E),t}else if(typeof h=="string")return n[h]};i.addEventType=l;for(var o=1,s=arguments.length;o<s;++o)l(arguments[o]);return i;function l(h,p,y){if(typeof h=="object")return d(h);p||(p=_l),y||(y=ye);var E={subscribers:[],fire:y,subscribe:function(_){E.subscribers.indexOf(_)===-1&&(E.subscribers.push(_),E.fire=p(E.fire,_))},unsubscribe:function(_){E.subscribers=E.subscribers.filter(function(S){return S!==_}),E.fire=E.subscribers.reduce(p,y)}};return n[h]=i[h]=E,E}function d(h){g(h).forEach(function(p){var y=h[p];if(m(y))l(p,h[p][0],h[p][1]);else if(y==="asap")var E=l(p,vr,function(){for(var S=arguments.length,K=new Array(S);S--;)K[S]=arguments[S];E.subscribers.forEach(function(w){me(function(){w.apply(null,K)})})});else throw new Y.InvalidArgument("Invalid event config")})}}function br(t,n){return N(n).from({prototype:t}),n}function Ml(t){return br(os.prototype,function(i,o,s){this.db=t,this._tx=s,this.name=i,this.schema=o,this.hook=t._allTables[i]?t._allTables[i].hook:_r(null,{creating:[yl,ye],reading:[pl,vr],updating:[gl,ye],deleting:[ml,ye]})})}function Vn(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function wa(t,n){t.filter=Dn(t.filter,n)}function Ea(t,n,i){var o=t.replayFilter;t.replayFilter=o?function(){return Dn(o(),n())}:n,t.justLimit=i&&!o}function Nl(t,n){t.isMatch=Dn(t.isMatch,n)}function ui(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new Y.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function ss(t,n,i){var o=ui(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function li(t,n,i,o){var s=t.replayFilter?Dn(t.filter,t.replayFilter()):t.filter;if(t.or){var l={},d=function(h,p,y){if(!s||s(p,y,function(S){return p.stop(S)},function(S){return p.fail(S)})){var E=p.primaryKey,_=""+E;_==="[object ArrayBuffer]"&&(_=""+new Uint8Array(E)),b(l,_)||(l[_]=!0,n(h,p,y))}};return Promise.all([t.or._iterate(d,i),us(ss(t,o,i),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return us(ss(t,o,i),Dn(t.algorithm,s),n,!t.keysOnly&&t.valueMapper)}function us(t,n,i,o){var s=o?function(d,h,p){return i(o(d),h,p)}:i,l=we(s);return t.then(function(d){if(d)return d.start(function(){var h=function(){return d.continue()};(!n||n(d,function(p){return h=p},function(p){d.stop(p),h=ye},function(p){d.fail(p),h=ye}))&&l(d.value,d,function(p){return h=p}),h()})})}var Fl=(function(){function t(){}return t.prototype._read=function(n,i){var o=this._ctx;return o.error?o.table._trans(null,ke.bind(null,o.error)):o.table._trans("readonly",n).then(i)},t.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,ke.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=Dn(i.algorithm,n)},t.prototype._iterate=function(n,i){return li(this._ctx,n,i,this._ctx.table.core)},t.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&A(o,n),i._ctx=o,i},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var i=this._ctx;return this._read(function(o){return li(i,n,o,i.table.core)})},t.prototype.count=function(n){var i=this;return this._read(function(o){var s=i._ctx,l=s.table.core;if(Vn(s,!0))return l.count({trans:o,query:{index:ui(s,l.schema),range:s.range}}).then(function(h){return Math.min(h,s.limit)});var d=0;return li(s,function(){return++d,!1},o,l).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,i){var o=n.split(".").reverse(),s=o[0],l=o.length-1;function d(y,E){return E?d(y[o[E]],E-1):y[s]}var h=this._ctx.dir==="next"?1:-1;function p(y,E){var _=d(y,l),S=d(E,l);return se(_,S)*h}return this.toArray(function(y){return y.sort(p)}).then(i)},t.prototype.toArray=function(n){var i=this;return this._read(function(o){var s=i._ctx;if(s.dir==="next"&&Vn(s,!0)&&s.limit>0){var l=s.valueMapper,d=ui(s,s.table.core.schema);return s.table.core.query({trans:o,limit:s.limit,values:!0,query:{index:d,range:s.range}}).then(function(p){var y=p.result;return l?y.map(l):y})}else{var h=[];return li(s,function(p){return h.push(p)},o,s.table.core).then(function(){return h})}},n)},t.prototype.offset=function(n){var i=this._ctx;return n<=0?this:(i.offset+=n,Vn(i)?Ea(i,function(){var o=n;return function(s,l){return o===0?!0:o===1?(--o,!1):(l(function(){s.advance(o),o=0}),!1)}}):Ea(i,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),Ea(this._ctx,function(){var i=n;return function(o,s,l){return--i<=0&&s(l),i>=0}},!0),this},t.prototype.until=function(n,i){return wa(this._ctx,function(o,s,l){return n(o.value)?(s(l),i):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return wa(this._ctx,function(i){return n(i.value)}),Nl(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){n(s.key,s)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){n(s.primaryKey,s)})},t.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,l){o.push(l.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&Vn(i,!0)&&i.limit>0)return this._read(function(s){var l=ui(i,i.table.core.schema);return i.table.core.query({trans:s,values:!1,limit:i.limit,query:{index:l,range:i.range}})}).then(function(s){var l=s.result;return l}).then(n);i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,l){o.push(l.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,i=n.index&&n.table.schema.idxByName[n.index];if(!i||!i.multi)return this;var o={};return wa(this._ctx,function(s){var l=s.primaryKey.toString(),d=b(o,l);return o[l]=!0,!d}),this},t.prototype.modify=function(n){var i=this,o=this._ctx;return this._write(function(s){var l;typeof n=="function"?l=n:l=function(I){return as(I,n)};var d=o.table.core,h=d.schema.primaryKey,p=h.outbound,y=h.extractKey,E=200,_=i.db._options.modifyChunkSize;_&&(typeof _=="object"?E=_[d.name]||_["*"]||200:E=_);var S=[],K=0,w=[],T=function(I,R){var P=R.failures,M=R.numFailures;K+=I-M;for(var C=0,B=g(P);C<B.length;C++){var $=B[C];S.push(P[$])}},O=n===ls;return i.clone().primaryKeys().then(function(I){var R=Vn(o)&&o.limit===1/0&&(typeof n!="function"||O)&&{index:o.index,range:o.range},P=function(M){var C=Math.min(E,I.length-M),B=I.slice(M,M+C);return(O?Promise.resolve([]):d.getMany({trans:s,keys:B,cache:"immutable"})).then(function($){var j=[],q=[],re=p?[]:null,U=O?B:[];if(!O)for(var ne=0;ne<C;++ne){var X=$[ne],fe={value:Pe(X),primKey:I[M+ne]};l.call(fe,fe.value,fe)!==!1&&(fe.value==null?U.push(I[M+ne]):!p&&se(y(X),y(fe.value))!==0?(U.push(I[M+ne]),j.push(fe.value)):(q.push(fe.value),p&&re.push(I[M+ne])))}return Promise.resolve(j.length>0&&d.mutate({trans:s,type:"add",values:j}).then(function(H){for(var De in H.failures)U.splice(parseInt(De),1);T(j.length,H)})).then(function(){return(q.length>0||R&&typeof n=="object")&&d.mutate({trans:s,type:"put",keys:re,values:q,criteria:R,changeSpec:typeof n!="function"&&n,isAdditionalChunk:M>0}).then(function(H){return T(q.length,H)})}).then(function(){return(U.length>0||R&&O)&&d.mutate({trans:s,type:"delete",keys:U,criteria:R,isAdditionalChunk:M>0}).then(function(H){return si(o.table,U,H)}).then(function(H){return T(U.length,H)})}).then(function(){return I.length>M+C&&P(M+E)})})};return P(0).then(function(){if(S.length>0)throw new Zr("Error modifying one or more objects",S,K,w);return I.length})})})},t.prototype.delete=function(){var n=this._ctx,i=n.range;return Vn(n)&&!n.table.schema.yProps&&(n.isPrimKey||i.type===3)?this._write(function(o){var s=n.table.core.schema.primaryKey,l=i;return n.table.core.count({trans:o,query:{index:s,range:l}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:l}).then(function(h){var p=h.failures,y=h.numFailures;if(y)throw new Zr("Could not delete some values",Object.keys(p).map(function(E){return p[E]}),d-y);return d-y})})}):this.modify(ls)},t})(),ls=function(t,n){return n.value=null};function Kl(t){return br(Fl.prototype,function(i,o){this.db=t;var s=ts,l=null;if(o)try{s=o()}catch(y){l=y}var d=i._ctx,h=d.table,p=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:s,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:l,or:d.or,valueMapper:p!==vr?p:null}})}function Ll(t,n){return t<n?-1:t===n?0:1}function Bl(t,n){return t>n?-1:t===n?0:1}function ct(t,n,i){var o=t instanceof cs?new t.Collection(t):t;return o._ctx.error=i?new i(n):new TypeError(n),o}function Wn(t){return new t.Collection(t,function(){return fs("")}).limit(0)}function jl(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function zl(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function $l(t,n,i,o,s,l){for(var d=Math.min(t.length,o.length),h=-1,p=0;p<d;++p){var y=n[p];if(y!==o[p])return s(t[p],i[p])<0?t.substr(0,p)+i[p]+i.substr(p+1):s(t[p],o[p])<0?t.substr(0,p)+o[p]+i.substr(p+1):h>=0?t.substr(0,h)+n[h]+i.substr(h+1):null;s(t[p],y)<0&&(h=p)}return d<o.length&&l==="next"?t+i.substr(t.length):d<t.length&&l==="prev"?t.substr(0,i.length):h<0?null:t.substr(0,h)+o[h]+i.substr(h+1)}function fi(t,n,i,o){var s,l,d,h,p,y,E,_=i.length;if(!i.every(function(T){return typeof T=="string"}))return ct(t,es);function S(T){s=jl(T),l=zl(T),d=T==="next"?Ll:Bl;var O=i.map(function(I){return{lower:l(I),upper:s(I)}}).sort(function(I,R){return d(I.lower,R.lower)});h=O.map(function(I){return I.upper}),p=O.map(function(I){return I.lower}),y=T,E=T==="next"?"":o}S("next");var K=new t.Collection(t,function(){return en(h[0],p[_-1]+o)});K._ondirectionchange=function(T){S(T)};var w=0;return K._addAlgorithm(function(T,O,I){var R=T.key;if(typeof R!="string")return!1;var P=l(R);if(n(P,p,w))return!0;for(var M=null,C=w;C<_;++C){var B=$l(R,P,h[C],p[C],d,y);B===null&&M===null?w=C+1:(M===null||d(M,B)>0)&&(M=B)}return O(M!==null?function(){T.continue(M+E)}:I),!1}),K}function en(t,n,i,o){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:o}}function fs(t){return{type:1,lower:t,upper:t}}var cs=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,i,o,s){o=o!==!1,s=s===!0;try{return this._cmp(n,i)>0||this._cmp(n,i)===0&&(o||s)&&!(o&&s)?Wn(this):new this.Collection(this,function(){return en(n,i,!o,!s)})}catch{return ct(this,$t)}},t.prototype.equals=function(n){return n==null?ct(this,$t):new this.Collection(this,function(){return fs(n)})},t.prototype.above=function(n){return n==null?ct(this,$t):new this.Collection(this,function(){return en(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?ct(this,$t):new this.Collection(this,function(){return en(n,void 0,!1)})},t.prototype.below=function(n){return n==null?ct(this,$t):new this.Collection(this,function(){return en(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?ct(this,$t):new this.Collection(this,function(){return en(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?ct(this,es):this.between(n,n+Tn,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):fi(this,function(i,o){return i.indexOf(o[0])===0},[n],Tn)},t.prototype.equalsIgnoreCase=function(n){return fi(this,function(i,o){return i===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=zt.apply(jt,arguments);return n.length===0?Wn(this):fi(this,function(i,o){return o.indexOf(i)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=zt.apply(jt,arguments);return n.length===0?Wn(this):fi(this,function(i,o){return o.some(function(s){return i.indexOf(s)===0})},n,Tn)},t.prototype.anyOf=function(){var n=this,i=zt.apply(jt,arguments),o=this._cmp;try{i.sort(o)}catch{return ct(this,$t)}if(i.length===0)return Wn(this);var s=new this.Collection(this,function(){return en(i[0],i[i.length-1])});s._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,i.sort(o)};var l=0;return s._addAlgorithm(function(d,h,p){for(var y=d.key;o(y,i[l])>0;)if(++l,l===i.length)return h(p),!1;return o(y,i[l])===0?!0:(h(function(){d.continue(i[l])}),!1)}),s},t.prototype.notEqual=function(n){return this.inAnyRange([[ga,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=zt.apply(jt,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return ct(this,$t)}var i=n.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[ga,s]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,i){var o=this,s=this._cmp,l=this._ascending,d=this._descending,h=this._min,p=this._max;if(n.length===0)return Wn(this);if(!n.every(function(C){return C[0]!==void 0&&C[1]!==void 0&&l(C[0],C[1])<=0}))return ct(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Y.InvalidArgument);var y=!i||i.includeLowers!==!1,E=i&&i.includeUppers===!0;function _(C,B){for(var $=0,j=C.length;$<j;++$){var q=C[$];if(s(B[0],q[1])<0&&s(B[1],q[0])>0){q[0]=h(q[0],B[0]),q[1]=p(q[1],B[1]);break}}return $===j&&C.push(B),C}var S=l;function K(C,B){return S(C[0],B[0])}var w;try{w=n.reduce(_,[]),w.sort(K)}catch{return ct(this,$t)}var T=0,O=E?function(C){return l(C,w[T][1])>0}:function(C){return l(C,w[T][1])>=0},I=y?function(C){return d(C,w[T][0])>0}:function(C){return d(C,w[T][0])>=0};function R(C){return!O(C)&&!I(C)}var P=O,M=new this.Collection(this,function(){return en(w[0][0],w[w.length-1][1],!y,!E)});return M._ondirectionchange=function(C){C==="next"?(P=O,S=l):(P=I,S=d),w.sort(K)},M._addAlgorithm(function(C,B,$){for(var j=C.key;P(j);)if(++T,T===w.length)return B($),!1;return R(j)?!0:(o._cmp(j,w[T][1])===0||o._cmp(j,w[T][0])===0||B(function(){S===l?C.continue(w[T][0]):C.continue(w[T][1])}),!1)}),M},t.prototype.startsWithAnyOf=function(){var n=zt.apply(jt,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?Wn(this):this.inAnyRange(n.map(function(i){return[i,i+Tn]})):ct(this,"startsWithAnyOf() only works with strings")},t})();function Ul(t){return br(cs.prototype,function(i,o,s){if(this.db=t,this._ctx={table:i,index:o===":id"?null:o,or:s},this._cmp=this._ascending=se,this._descending=function(l,d){return se(d,l)},this._max=function(l,d){return se(l,d)>0?l:d},this._min=function(l,d){return se(l,d)<0?l:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new Y.MissingAPI})}function Ot(t){return we(function(n){return wr(n),t(n.target.error),!1})}function wr(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Er="storagemutated",xa="x-storagemutated-1",tn=_r(null,Er),Vl=(function(){function t(){}return t.prototype._lock=function(){return ue(!G.global),++this._reculock,this._reculock===1&&!G.global&&(G.lockOwnerFor=this),this},t.prototype._unlock=function(){if(ue(!G.global),--this._reculock===0)for(G.global||(G.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{xn(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&G.lockOwnerFor!==this},t.prototype.create=function(n){var i=this;if(!this.mode)return this;var o=this.db.idbdb,s=this.db._state.dbOpenError;if(ue(!this.idbtrans),!n&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new Y.DatabaseClosed(s);case"MissingAPIError":throw new Y.MissingAPI(s.message,s);default:throw new Y.OpenFailed(s)}if(!this.active)throw new Y.TransactionInactive;return ue(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=we(function(l){wr(l),i._reject(n.error)}),n.onabort=we(function(l){wr(l),i.active&&i._reject(new Y.Abort(n.error)),i.active=!1,i.on("abort").fire(l)}),n.oncomplete=we(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&tn.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,i,o){var s=this;if(n==="readwrite"&&this.mode!=="readwrite")return ke(new Y.ReadOnly("Transaction is readonly"));if(!this.active)return ke(new Y.TransactionInactive);if(this._locked())return new z(function(d,h){s._blockedFuncs.push([function(){s._promise(n,i,o).then(d,h)},G])});if(o)return Qt(function(){var d=new z(function(h,p){s._lock();var y=i(h,p,s);y&&y.then&&y.then(h,p)});return d.finally(function(){return s._unlock()}),d._lib=!0,d});var l=new z(function(d,h){var p=i(d,h,s);p&&p.then&&p.then(d,h)});return l._lib=!0,l},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var i=this._root(),o=z.resolve(n);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var s=i.idbtrans.objectStore(i.storeNames[0]);(function d(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(s.get(-1/0).onsuccess=d)})()}var l=i._waitingFor;return new z(function(d,h){o.then(function(p){return i._waitingQueue.push(we(d.bind(null,p)))},function(p){return i._waitingQueue.push(we(h.bind(null,p)))}).finally(function(){i._waitingFor===l&&(i._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Y.Abort))},t.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(b(i,n))return i[n];var o=this.schema[n];if(!o)throw new Y.NotFound("Table "+n+" not part of transaction");var s=new this.db.Table(n,o,this);return s.core=this.db.core.table(n),i[n]=s,s},t})();function Wl(t){return br(Vl.prototype,function(i,o,s,l,d){var h=this;i!=="readonly"&&o.forEach(function(p){var y,E=(y=s[p])===null||y===void 0?void 0:y.yProps;E&&(o=o.concat(E.map(function(_){return _.updatesTable})))}),this.db=t,this.mode=i,this.storeNames=o,this.schema=s,this.chromeTransactionDurability=l,this.idbtrans=null,this.on=_r(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new z(function(p,y){h._resolve=p,h._reject=y}),this._completion.then(function(){h.active=!1,h.on.complete.fire()},function(p){var y=h.active;return h.active=!1,h.on.error.fire(p),h.parent?h.parent._reject(p):y&&h.idbtrans&&h.idbtrans.abort(),ke(p)})})}function Ta(t,n,i,o,s,l,d,h){return{name:t,keyPath:n,unique:i,multi:o,auto:s,compound:l,src:(i&&!d?"&":"")+(o?"*":"")+(s?"++":"")+ds(n),type:h}}function ds(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Da(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:_e(i,function(o){return[o.name,o]})}}function Gl(t){return t.length===1?t[0]:t}var xr=function(t){try{return t.only([[]]),xr=function(){return[[]]},[[]]}catch{return xr=function(){return Tn},Tn}};function Aa(t){return t==null?function(){}:typeof t=="string"?Hl(t):function(n){return le(n,t)}}function Hl(t){var n=t.split(".");return n.length===1?function(i){return i[t]}:function(i){return le(i,t)}}function hs(t){return[].slice.call(t)}var Yl=0;function Tr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Zl(t,n,i){function o(_,S){var K=hs(_.objectStoreNames);return{schema:{name:_.name,tables:K.map(function(w){return S.objectStore(w)}).map(function(w){var T=w.keyPath,O=w.autoIncrement,I=m(T),R=T==null,P={},M={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:R,compound:I,keyPath:T,autoIncrement:O,unique:!0,extractKey:Aa(T)},indexes:hs(w.indexNames).map(function(C){return w.index(C)}).map(function(C){var B=C.name,$=C.unique,j=C.multiEntry,q=C.keyPath,re=m(q),U={name:B,compound:re,keyPath:q,unique:$,multiEntry:j,extractKey:Aa(q)};return P[Tr(q)]=U,U}),getIndexByKeyPath:function(C){return P[Tr(C)]}};return P[":id"]=M.primaryKey,T!=null&&(P[Tr(T)]=M.primaryKey),M})},hasGetAll:K.length>0&&"getAll"in S.objectStore(K[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function s(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=_.lower,K=_.upper,w=_.lowerOpen,T=_.upperOpen,O=S===void 0?K===void 0?null:n.upperBound(K,!!T):K===void 0?n.lowerBound(S,!!w):n.bound(S,K,!!w,!!T);return O}function l(_){var S=_.name;function K(O){var I=O.trans,R=O.type,P=O.keys,M=O.values,C=O.range;return new Promise(function(B,$){B=we(B);var j=I.objectStore(S),q=j.keyPath==null,re=R==="put"||R==="add";if(!re&&R!=="delete"&&R!=="deleteRange")throw new Error("Invalid operation type: "+R);var U=(P||M||{length:1}).length;if(P&&M&&P.length!==M.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});var ne,X=[],fe=[],H=0,De=function(kt){++H,wr(kt)};if(R==="deleteRange"){if(C.type===4)return B({numFailures:H,failures:fe,results:[],lastResult:void 0});C.type===3?X.push(ne=j.clear()):X.push(ne=j.delete(s(C)))}else{var We=re?q?[M,P]:[M,null]:[P,null],St=We[0],rt=We[1];if(re)for(var vt=0;vt<U;++vt)X.push(ne=rt&&rt[vt]!==void 0?j[R](St[vt],rt[vt]):j[R](St[vt])),ne.onerror=De;else for(var vt=0;vt<U;++vt)X.push(ne=j[R](St[vt])),ne.onerror=De}var an=function(kt){var Or=kt.target.result;X.forEach(function(bt,Ei){return bt.error!=null&&(fe[Ei]=bt.error)}),B({numFailures:H,failures:fe,results:R==="delete"?P:X.map(function(bt){return bt.result}),lastResult:Or})};ne.onerror=function(kt){De(kt),an(kt)},ne.onsuccess=an})}function w(O){var I=O.trans,R=O.values,P=O.query,M=O.reverse,C=O.unique;return new Promise(function(B,$){B=we(B);var j=P.index,q=P.range,re=I.objectStore(S),U=j.isPrimaryKey?re:re.index(j.name),ne=M?C?"prevunique":"prev":C?"nextunique":"next",X=R||!("openKeyCursor"in U)?U.openCursor(s(q),ne):U.openKeyCursor(s(q),ne);X.onerror=Ot($),X.onsuccess=we(function(fe){var H=X.result;if(!H){B(null);return}H.___id=++Yl,H.done=!1;var De=H.continue.bind(H),We=H.continuePrimaryKey;We&&(We=We.bind(H));var St=H.advance.bind(H),rt=function(){throw new Error("Cursor not started")},vt=function(){throw new Error("Cursor not stopped")};H.trans=I,H.stop=H.continue=H.continuePrimaryKey=H.advance=rt,H.fail=we($),H.next=function(){var an=this,kt=1;return this.start(function(){return kt--?an.continue():an.stop()}).then(function(){return an})},H.start=function(an){var kt=new Promise(function(bt,Ei){bt=we(bt),X.onerror=Ot(Ei),H.fail=Ei,H.stop=function(Kf){H.stop=H.continue=H.continuePrimaryKey=H.advance=vt,bt(Kf)}}),Or=function(){if(X.result)try{an()}catch(bt){H.fail(bt)}else H.done=!0,H.start=function(){throw new Error("Cursor behind last entry")},H.stop()};return X.onsuccess=we(function(bt){X.onsuccess=Or,Or()}),H.continue=De,H.continuePrimaryKey=We,H.advance=St,Or(),kt},B(H)},$)})}function T(O){return function(I){return new Promise(function(R,P){R=we(R);var M=I.trans,C=I.values,B=I.limit,$=I.query,j=B===1/0?void 0:B,q=$.index,re=$.range,U=M.objectStore(S),ne=q.isPrimaryKey?U:U.index(q.name),X=s(re);if(B===0)return R({result:[]});if(O){var fe=C?ne.getAll(X,j):ne.getAllKeys(X,j);fe.onsuccess=function(St){return R({result:St.target.result})},fe.onerror=Ot(P)}else{var H=0,De=C||!("openKeyCursor"in ne)?ne.openCursor(X):ne.openKeyCursor(X),We=[];De.onsuccess=function(St){var rt=De.result;if(!rt)return R({result:We});if(We.push(C?rt.value:rt.primaryKey),++H===B)return R({result:We});rt.continue()},De.onerror=Ot(P)}})}}return{name:S,schema:_,mutate:K,getMany:function(O){var I=O.trans,R=O.keys;return new Promise(function(P,M){P=we(P);for(var C=I.objectStore(S),B=R.length,$=new Array(B),j=0,q=0,re,U=function(H){var De=H.target;($[De._pos]=De.result)!=null,++q===j&&P($)},ne=Ot(M),X=0;X<B;++X){var fe=R[X];fe!=null&&(re=C.get(R[X]),re._pos=X,re.onsuccess=U,re.onerror=ne,++j)}j===0&&P($)})},get:function(O){var I=O.trans,R=O.key;return new Promise(function(P,M){P=we(P);var C=I.objectStore(S),B=C.get(R);B.onsuccess=function($){return P($.target.result)},B.onerror=Ot(M)})},query:T(p),openCursor:w,count:function(O){var I=O.query,R=O.trans,P=I.index,M=I.range;return new Promise(function(C,B){var $=R.objectStore(S),j=P.isPrimaryKey?$:$.index(P.name),q=s(M),re=q?j.count(q):j.count();re.onsuccess=we(function(U){return C(U.target.result)}),re.onerror=Ot(B)})}}}var d=o(t,i),h=d.schema,p=d.hasGetAll,y=h.tables.map(function(_){return l(_)}),E={};return y.forEach(function(_){return E[_.name]=_}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(_){var S=E[_];if(!S)throw new Error("Table '".concat(_,"' not found"));return E[_]},MIN_KEY:-1/0,MAX_KEY:xr(n),schema:h}}function ql(t,n){return n.reduce(function(i,o){var s=o.create;return f(f({},i),s(i))},t)}function Ql(t,n,i,o){var s=i.IDBKeyRange;i.indexedDB;var l=ql(Zl(n,s,o),t.dbcore);return{dbcore:l}}function ci(t,n){var i=n.db,o=Ql(t._middlewares,i,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(s){var l=s.name;t.core.schema.tables.some(function(d){return d.name===l})&&(s.core=t.core.table(l),t[l]instanceof t.Table&&(t[l].core=s.core))})}function di(t,n,i,o){i.forEach(function(s){var l=o[s];n.forEach(function(d){var h=ie(d,s);(!h||"value"in h&&h.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?L(d,s,{get:function(){return this.table(s)},set:function(p){F(this,s,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):d[s]=new t.Table(s,l))})})}function Oa(t,n){n.forEach(function(i){for(var o in i)i[o]instanceof t.Table&&delete i[o]})}function Xl(t,n){return t._cfg.version-n._cfg.version}function Jl(t,n,i,o){var s=t._dbSchema;i.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=Da("$meta",ps("")[0],[]),t._storeNames.push("$meta"));var l=t._createTransaction("readwrite",t._storeNames,s);l.create(i),l._completion.catch(o);var d=l._reject.bind(l),h=G.transless||G;Qt(function(){if(G.trans=l,G.transless=h,n===0)g(s).forEach(function(p){ka(i,p,s[p].primKey,s[p].indexes)}),ci(t,i),z.follow(function(){return t.on.populate.fire(l)}).catch(d);else return ci(t,i),tf(t,l,n).then(function(p){return nf(t,p,l,i)}).catch(d)})}function ef(t,n){vs(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=vi(t,t.idbdb,n);pi(t,t._dbSchema,n);for(var o=Sa(i,t._dbSchema),s=function(y){if(y.change.length||y.recreate)return console.warn("Unable to patch indexes of table ".concat(y.name," because it has changes on the type of index or primary key.")),{value:void 0};var E=n.objectStore(y.name);y.add.forEach(function(_){At&&console.debug("Dexie upgrade patch: Creating missing index ".concat(y.name,".").concat(_.src)),hi(E,_)})},l=0,d=o.change;l<d.length;l++){var h=d[l],p=s(h);if(typeof p=="object")return p.value}}function tf(t,n,i){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??i}):z.resolve(i)}function nf(t,n,i,o){var s=[],l=t._versions,d=t._dbSchema=vi(t,t.idbdb,o),h=l.filter(function(y){return y._cfg.version>=n});if(h.length===0)return z.resolve();h.forEach(function(y){s.push(function(){var E=d,_=y._cfg.dbschema;pi(t,E,o),pi(t,_,o),d=t._dbSchema=_;var S=Sa(E,_);S.add.forEach(function(R){ka(o,R[0],R[1].primKey,R[1].indexes)}),S.change.forEach(function(R){if(R.recreate)throw new Y.Upgrade("Not yet support for changing primary key");var P=o.objectStore(R.name);R.add.forEach(function(M){return hi(P,M)}),R.change.forEach(function(M){P.deleteIndex(M.name),hi(P,M)}),R.del.forEach(function(M){return P.deleteIndex(M)})});var K=y._cfg.contentUpgrade;if(K&&y._cfg.version>n){ci(t,o),i._memoizedTables={};var w=ee(_);S.del.forEach(function(R){w[R]=E[R]}),Oa(t,[t.Transaction.prototype]),di(t,[t.Transaction.prototype],g(w),w),i.schema=w;var T=ia(K);T&&$n();var O,I=z.follow(function(){if(O=K(i),O&&T){var R=Xt.bind(null,null);O.then(R,R)}});return O&&typeof O.then=="function"?z.resolve(O):I.then(function(){return O})}}),s.push(function(E){var _=y._cfg.dbschema;rf(_,E),Oa(t,[t.Transaction.prototype]),di(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),i.schema=t._dbSchema}),s.push(function(E){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===y._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(_){return _!=="$meta"})):E.objectStore("$meta").put(y._cfg.version,"version"))})});function p(){return s.length?z.resolve(s.shift()(i.idbtrans)).then(p):z.resolve()}return p().then(function(){vs(d,o)})}function Sa(t,n){var i={del:[],add:[],change:[]},o;for(o in t)n[o]||i.del.push(o);for(o in n){var s=t[o],l=n[o];if(!s)i.add.push([o,l]);else{var d={name:o,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||s.primKey.auto!==l.primKey.auto)d.recreate=!0,i.change.push(d);else{var h=s.idxByName,p=l.idxByName,y=void 0;for(y in h)p[y]||d.del.push(y);for(y in p){var E=h[y],_=p[y];E?E.src!==_.src&&d.change.push(_):d.add.push(_)}(d.del.length>0||d.add.length>0||d.change.length>0)&&i.change.push(d)}}}return i}function ka(t,n,i,o){var s=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(l){return hi(s,l)}),s}function vs(t,n){g(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(At&&console.debug("Dexie: Creating missing table",i),ka(n,i,t[i].primKey,t[i].indexes))})}function rf(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(i){return t[i]==null&&n.db.deleteObjectStore(i)})}function hi(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function vi(t,n,i){var o={},s=J(n.objectStoreNames,0);return s.forEach(function(l){for(var d=i.objectStore(l),h=d.keyPath,p=Ta(ds(h),h||"",!0,!1,!!d.autoIncrement,h&&typeof h!="string",!0),y=[],E=0;E<d.indexNames.length;++E){var _=d.index(d.indexNames[E]);h=_.keyPath;var S=Ta(_.name,h,!!_.unique,!!_.multiEntry,!1,h&&typeof h!="string",!1);y.push(S)}o[l]=Da(l,p,y)}),o}function af(t,n,i){t.verno=n.version/10;var o=t._dbSchema=vi(t,n,i);t._storeNames=J(n.objectStoreNames,0),di(t,[t._allTables],g(o),o)}function of(t,n){var i=vi(t,t.idbdb,n),o=Sa(i,t._dbSchema);return!(o.add.length||o.change.some(function(s){return s.add.length||s.change.length}))}function pi(t,n,i){for(var o=i.db.objectStoreNames,s=0;s<o.length;++s){var l=o[s],d=i.objectStore(l);t._hasGetAll="getAll"in d;for(var h=0;h<d.indexNames.length;++h){var p=d.indexNames[h],y=d.index(p).keyPath,E=typeof y=="string"?y:"["+J(y).join("+")+"]";if(n[l]){var _=n[l].idxByName[E];_&&(_.name=p,delete n[l].idxByName[E],n[l].idxByName[p]=_)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function ps(t){return t.split(",").map(function(n,i){var o,s=n.split(":"),l=(o=s[1])===null||o===void 0?void 0:o.trim();n=s[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return Ta(d,h||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),m(h),i===0,l)})}var sf=(function(){function t(){}return t.prototype._createTableSchema=function(n,i,o){return Da(n,i,o)},t.prototype._parseIndexSyntax=function(n){return ps(n)},t.prototype._parseStoresSpec=function(n,i){var o=this;g(n).forEach(function(s){if(n[s]!==null){var l=o._parseIndexSyntax(n[s]),d=l.shift();if(!d)throw new Y.Schema("Invalid schema for table "+s+": "+n[s]);if(d.unique=!0,d.multi)throw new Y.Schema("Primary key cannot be multiEntry*");l.forEach(function(p){if(p.auto)throw new Y.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new Y.Schema("Index must have a name and cannot be an empty string")});var h=o._createTableSchema(s,d,l);i[s]=h}})},t.prototype.stores=function(n){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?A(this._cfg.storesSource,n):n;var o=i._versions,s={},l={};return o.forEach(function(d){A(s,d._cfg.storesSource),l=d._cfg.dbschema={},d._parseStoresSpec(s,l)}),i._dbSchema=l,Oa(i,[i._allTables,i,i.Transaction.prototype]),di(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],g(l),l),i._storeNames=g(l),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=sa(this._cfg.contentUpgrade||ye,n),this},t})();function uf(t){return br(sf.prototype,function(i){this.db=t,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ia(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new Ut(ai,{addons:[],indexedDB:t,IDBKeyRange:n}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function Ca(t){return t&&typeof t.databases=="function"}function lf(t){var n=t.indexedDB,i=t.IDBKeyRange;return Ca(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(s){return s.name}).filter(function(s){return s!==ai})}):Ia(n,i).toCollection().primaryKeys()}function ff(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!Ca(i)&&n!==ai&&Ia(i,o).put({name:n}).catch(ye)}function cf(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!Ca(i)&&n!==ai&&Ia(i,o).delete(n).catch(ye)}function Ra(t){return Qt(function(){return G.letThrough=!0,t()})}function df(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var Pa;function Ma(t){return!("from"in t)}var Ve=function(t,n){if(this)A(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var i=new Ve;return t&&"d"in t&&A(i,t),i}};D(Ve.prototype,(Pa={add:function(t){return Ar(this,t),this},addKey:function(t){return Dr(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return Dr(n,i,i)}),this},hasKey:function(t){var n=yi(this).next(t).value;return n&&se(n.from,t)<=0&&se(n.to,t)>=0}},Pa[nt]=function(){return yi(this)},Pa));function Dr(t,n,i){var o=se(n,i);if(!isNaN(o)){if(o>0)throw RangeError();if(Ma(t))return A(t,{from:n,to:i,d:1});var s=t.l,l=t.r;if(se(i,t.from)<0)return s?Dr(s,n,i):t.l={from:n,to:i,d:1,l:null,r:null},ms(t);if(se(n,t.to)>0)return l?Dr(l,n,i):t.r={from:n,to:i,d:1,l:null,r:null},ms(t);se(n,t.from)<0&&(t.from=n,t.l=null,t.d=l?l.d+1:1),se(i,t.to)>0&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;s&&!t.l&&Ar(t,s),l&&d&&Ar(t,l)}}function Ar(t,n){function i(o,s){var l=s.from,d=s.to,h=s.l,p=s.r;Dr(o,l,d),h&&i(o,h),p&&i(o,p)}Ma(n)||i(t,n)}function ys(t,n){var i=yi(n),o=i.next();if(o.done)return!1;for(var s=o.value,l=yi(t),d=l.next(s.from),h=d.value;!o.done&&!d.done;){if(se(h.from,s.to)<=0&&se(h.to,s.from)>=0)return!0;se(s.from,h.from)<0?s=(o=i.next(h.from)).value:h=(d=l.next(s.from)).value}return!1}function yi(t){var n=Ma(t)?null:{s:0,n:t};return{next:function(i){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&se(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||se(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function ms(t){var n,i,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),s=o>1?"r":o<-1?"l":"";if(s){var l=s==="r"?"l":"r",d=f({},t),h=t[s];t.from=h.from,t.to=h.to,t[s]=h[s],d[s]=h[l],t[l]=d,d.d=gs(d)}t.d=gs(t)}function gs(t){var n=t.r,i=t.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function mi(t,n){return g(n).forEach(function(i){t[i]?Ar(t[i],n[i]):t[i]=he(n[i])}),t}function Na(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&ys(n[i],t[i])})}var An={},Fa={},Ka=!1;function gi(t,n){mi(Fa,t),Ka||(Ka=!0,setTimeout(function(){Ka=!1;var i=Fa;Fa={},La(i,!1)},0))}function La(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var o=0,s=Object.values(An);o<s.length;o++){var l=s[o];_s(l,t,i,n)}else for(var d in t){var h=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(h){var p=h[1],y=h[2],l=An["idb://".concat(p,"/").concat(y)];l&&_s(l,t,i,n)}}i.forEach(function(E){return E()})}function _s(t,n,i,o){for(var s=[],l=0,d=Object.entries(t.queries.query);l<d.length;l++){for(var h=d[l],p=h[0],y=h[1],E=[],_=0,S=y;_<S.length;_++){var K=S[_];Na(n,K.obsSet)?K.subscribers.forEach(function(I){return i.add(I)}):o&&E.push(K)}o&&s.push([p,E])}if(o)for(var w=0,T=s;w<T.length;w++){var O=T[w],p=O[0],E=O[1];t.queries.query[p]=E}}function hf(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?ke(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,s=Math.round(t.verno*10),l=!1;function d(){if(n.openCanceller!==o)throw new Y.DatabaseClosed("db.open() was cancelled")}var h=n.dbReadyResolve,p=null,y=!1,E=function(){return new z(function(_,S){if(d(),!i)throw new Y.MissingAPI;var K=t.name,w=n.autoSchema||!s?i.open(K):i.open(K,s);if(!w)throw new Y.MissingAPI;w.onerror=Ot(S),w.onblocked=we(t._fireOnBlocked),w.onupgradeneeded=we(function(T){if(p=w.transaction,n.autoSchema&&!t._options.allowEmptyDB){w.onerror=wr,p.abort(),w.result.close();var O=i.deleteDatabase(K);O.onsuccess=O.onerror=we(function(){S(new Y.NoSuchDatabase("Database ".concat(K," doesnt exist")))})}else{p.onerror=Ot(S);var I=T.oldVersion>Math.pow(2,62)?0:T.oldVersion;y=I<1,t.idbdb=w.result,l&&ef(t,p),Jl(t,I/10,p,S)}},S),w.onsuccess=we(function(){p=null;var T=t.idbdb=w.result,O=J(T.objectStoreNames);if(O.length>0)try{var I=T.transaction(Gl(O),"readonly");if(n.autoSchema)af(t,T,I);else if(pi(t,t._dbSchema,I),!of(t,I)&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),T.close(),s=T.version+1,l=!0,_(E());ci(t,I)}catch{}Un.push(t),T.onversionchange=we(function(R){n.vcFired=!0,t.on("versionchange").fire(R)}),T.onclose=we(function(){t.close({disableAutoOpen:!1})}),y&&ff(t._deps,K),_()},S)}).catch(function(_){switch(_?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),E();break;case"VersionError":if(s>0)return s=0,E();break}return z.reject(_)})};return z.race([o,(typeof navigator>"u"?z.resolve():df()).then(E)]).then(function(){return d(),n.onReadyBeingFired=[],z.resolve(Ra(function(){return t.on.ready.fire(t.vip)})).then(function _(){if(n.onReadyBeingFired.length>0){var S=n.onReadyBeingFired.reduce(sa,ye);return n.onReadyBeingFired=[],z.resolve(Ra(function(){return S(t.vip)})).then(_)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(_){n.dbOpenError=_;try{p&&p.abort()}catch{}return o===n.openCanceller&&t._close(),ke(_)}).finally(function(){n.openComplete=!0,h()}).then(function(){if(y){var _={};t.tables.forEach(function(S){S.schema.indexes.forEach(function(K){K.name&&(_["idb://".concat(t.name,"/").concat(S.name,"/").concat(K.name)]=new Ve(-1/0,[[[]]]))}),_["idb://".concat(t.name,"/").concat(S.name,"/")]=_["idb://".concat(t.name,"/").concat(S.name,"/:dels")]=new Ve(-1/0,[[[]]])}),tn(Er).fire(_),La(_,!0)}return t})}function Ba(t){var n=function(d){return t.next(d)},i=function(d){return t.throw(d)},o=l(n),s=l(i);function l(d){return function(h){var p=d(h),y=p.value;return p.done?y:!y||typeof y.then!="function"?m(y)?Promise.all(y).then(o,s):o(y):y.then(o,s)}}return l(n)()}function vf(t,n,i){var o=arguments.length;if(o<2)throw new Y.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];i=s.pop();var l=de(s);return[t,l,i]}function bs(t,n,i,o,s){return z.resolve().then(function(){var l=G.transless||G,d=t._createTransaction(n,i,t._dbSchema,o);d.explicit=!0;var h={trans:d,transless:l};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(_){return _.name===oa.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return bs(t,n,i,null,s)})):ke(_)}var p=ia(s);p&&$n();var y,E=z.follow(function(){if(y=s.call(d,d),y)if(p){var _=Xt.bind(null,null);y.then(_,_)}else typeof y.next=="function"&&typeof y.throw=="function"&&(y=Ba(y))},h);return(y&&typeof y.then=="function"?z.resolve(y).then(function(_){return d.active?_:ke(new Y.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return y})).then(function(_){return o&&d._resolve(),d._completion.then(function(){return _})}).catch(function(_){return d._reject(_),ke(_)})})}function _i(t,n,i){for(var o=m(t)?t.slice():[t],s=0;s<i;++s)o.push(n);return o}function pf(t){return f(f({},t),{table:function(n){var i=t.table(n),o=i.schema,s={},l=[];function d(T,O,I){var R=Tr(T),P=s[R]=s[R]||[],M=T==null?0:typeof T=="string"?1:T.length,C=O>0,B=f(f({},I),{name:C?"".concat(R,"(virtual-from:").concat(I.name,")"):I.name,lowLevelIndex:I,isVirtual:C,keyTail:O,keyLength:M,extractKey:Aa(T),unique:!C&&I.unique});if(P.push(B),B.isPrimaryKey||l.push(B),M>1){var $=M===2?T[0]:T.slice(0,M-1);d($,O+1,I)}return P.sort(function(j,q){return j.keyTail-q.keyTail}),B}var h=d(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[h];for(var p=0,y=o.indexes;p<y.length;p++){var E=y[p];d(E.keyPath,0,E)}function _(T){var O=s[Tr(T)];return O&&O[0]}function S(T,O){return{type:T.type===1?2:T.type,lower:_i(T.lower,T.lowerOpen?t.MAX_KEY:t.MIN_KEY,O),lowerOpen:!0,upper:_i(T.upper,T.upperOpen?t.MIN_KEY:t.MAX_KEY,O),upperOpen:!0}}function K(T){var O=T.query.index;return O.isVirtual?f(f({},T),{query:{index:O.lowLevelIndex,range:S(T.query.range,O.keyTail)}}):T}var w=f(f({},i),{schema:f(f({},o),{primaryKey:h,indexes:l,getIndexByKeyPath:_}),count:function(T){return i.count(K(T))},query:function(T){return i.query(K(T))},openCursor:function(T){var O=T.query.index,I=O.keyTail,R=O.isVirtual,P=O.keyLength;if(!R)return i.openCursor(T);function M(C){function B(j){j!=null?C.continue(_i(j,T.reverse?t.MAX_KEY:t.MIN_KEY,I)):T.unique?C.continue(C.key.slice(0,P).concat(T.reverse?t.MIN_KEY:t.MAX_KEY,I)):C.continue()}var $=Object.create(C,{continue:{value:B},continuePrimaryKey:{value:function(j,q){C.continuePrimaryKey(_i(j,t.MAX_KEY,I),q)}},primaryKey:{get:function(){return C.primaryKey}},key:{get:function(){var j=C.key;return P===1?j[0]:j.slice(0,P)}},value:{get:function(){return C.value}}});return $}return i.openCursor(K(T)).then(function(C){return C&&M(C)})}});return w}})}var yf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:pf};function ja(t,n,i,o){return i=i||{},o=o||"",g(t).forEach(function(s){if(!b(n,s))i[o+s]=void 0;else{var l=t[s],d=n[s];if(typeof l=="object"&&typeof d=="object"&&l&&d){var h=Bt(l),p=Bt(d);h!==p?i[o+s]=n[s]:h==="Object"?ja(l,d,i,o+s+"."):l!==d&&(i[o+s]=n[s])}else l!==d&&(i[o+s]=n[s])}}),g(n).forEach(function(s){b(t,s)||(i[o+s]=n[s])}),i}function za(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var mf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return f(f({},t),{table:function(n){var i=t.table(n),o=i.schema.primaryKey,s=f(f({},i),{mutate:function(l){var d=G.trans,h=d.table(n).hook,p=h.deleting,y=h.creating,E=h.updating;switch(l.type){case"add":if(y.fire===ye)break;return d._promise("readwrite",function(){return _(l)},!0);case"put":if(y.fire===ye&&E.fire===ye)break;return d._promise("readwrite",function(){return _(l)},!0);case"delete":if(p.fire===ye)break;return d._promise("readwrite",function(){return _(l)},!0);case"deleteRange":if(p.fire===ye)break;return d._promise("readwrite",function(){return S(l)},!0)}return i.mutate(l);function _(w){var T=G.trans,O=w.keys||za(o,w);if(!O)throw new Error("Keys missing");return w=w.type==="add"||w.type==="put"?f(f({},w),{keys:O}):f({},w),w.type!=="delete"&&(w.values=c([],w.values)),w.keys&&(w.keys=c([],w.keys)),gf(i,w,O).then(function(I){var R=O.map(function(P,M){var C=I[M],B={onerror:null,onsuccess:null};if(w.type==="delete")p.fire.call(B,P,C,T);else if(w.type==="add"||C===void 0){var $=y.fire.call(B,P,w.values[M],T);P==null&&$!=null&&(P=$,w.keys[M]=P,o.outbound||V(w.values[M],o.keyPath,P))}else{var j=ja(C,w.values[M]),q=E.fire.call(B,j,P,C,T);if(q){var re=w.values[M];Object.keys(q).forEach(function(U){b(re,U)?re[U]=q[U]:V(re,U,q[U])})}}return B});return i.mutate(w).then(function(P){for(var M=P.failures,C=P.results,B=P.numFailures,$=P.lastResult,j=0;j<O.length;++j){var q=C?C[j]:O[j],re=R[j];q==null?re.onerror&&re.onerror(M[j]):re.onsuccess&&re.onsuccess(w.type==="put"&&I[j]?w.values[j]:q)}return{failures:M,results:C,numFailures:B,lastResult:$}}).catch(function(P){return R.forEach(function(M){return M.onerror&&M.onerror(P)}),Promise.reject(P)})})}function S(w){return K(w.trans,w.range,1e4)}function K(w,T,O){return i.query({trans:w,values:!1,query:{index:o,range:T},limit:O}).then(function(I){var R=I.result;return _({type:"delete",keys:R,trans:w}).then(function(P){return P.numFailures>0?Promise.reject(P.failures[0]):R.length<O?{failures:[],numFailures:0,lastResult:void 0}:K(w,f(f({},T),{lower:R[R.length-1],lowerOpen:!0}),O)})})}}});return s}})}};function gf(t,n,i){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:i,cache:"immutable"})}function ws(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var o=[],s=0,l=0;s<n.keys.length&&l<t.length;++s)se(n.keys[s],t[l])===0&&(o.push(i?Pe(n.values[s]):n.values[s]),++l);return o.length===t.length?o:null}catch{return null}}var _f={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return f(f({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var s=ws(o.keys,o.trans._cache,o.cache==="clone");return s?z.resolve(s):i.getMany(o).then(function(l){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?Pe(l):l},l})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function Es(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function xs(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var bf={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new Ve(t.MIN_KEY,t.MAX_KEY);return f(f({},t),{transaction:function(o,s,l){if(G.subscr&&s!=="readonly")throw new Y.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(G.querier));return t.transaction(o,s,l)},table:function(o){var s=t.table(o),l=s.schema,d=l.primaryKey,h=l.indexes,p=d.extractKey,y=d.outbound,E=d.autoIncrement&&h.filter(function(w){return w.compound&&w.keyPath.includes(d.keyPath)}),_=f(f({},s),{mutate:function(w){var T,O,I=w.trans,R=w.mutatedParts||(w.mutatedParts={}),P=function(X){var fe="idb://".concat(n,"/").concat(o,"/").concat(X);return R[fe]||(R[fe]=new Ve)},M=P(""),C=P(":dels"),B=w.type,$=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[za(d,w).filter(function(X){return X}),w.values]:[],j=$[0],q=$[1],re=w.trans._cache;if(m(j)){M.addKeys(j);var U=B==="delete"||j.length===q.length?ws(j,re):null;U||C.addKeys(j),(U||q)&&wf(P,l,U,q)}else if(j){var ne={from:(T=j.lower)!==null&&T!==void 0?T:t.MIN_KEY,to:(O=j.upper)!==null&&O!==void 0?O:t.MAX_KEY};C.add(ne),M.add(ne)}else M.add(i),C.add(i),l.indexes.forEach(function(X){return P(X.name).add(i)});return s.mutate(w).then(function(X){return j&&(w.type==="add"||w.type==="put")&&(M.addKeys(X.results),E&&E.forEach(function(fe){for(var H=w.values.map(function(rt){return fe.extractKey(rt)}),De=fe.keyPath.findIndex(function(rt){return rt===d.keyPath}),We=0,St=X.results.length;We<St;++We)H[We][De]=X.results[We];P(fe.name).addKeys(H)})),I.mutatedParts=mi(I.mutatedParts||{},R),X})}}),S=function(w){var T,O,I=w.query,R=I.index,P=I.range;return[R,new Ve((T=P.lower)!==null&&T!==void 0?T:t.MIN_KEY,(O=P.upper)!==null&&O!==void 0?O:t.MAX_KEY)]},K={get:function(w){return[d,new Ve(w.key)]},getMany:function(w){return[d,new Ve().addKeys(w.keys)]},count:S,query:S,openCursor:S};return g(K).forEach(function(w){_[w]=function(T){var O=G.subscr,I=!!O,R=Es(G,s)&&xs(w,T),P=R?T.obsSet={}:O;if(I){var M=function(U){var ne="idb://".concat(n,"/").concat(o,"/").concat(U);return P[ne]||(P[ne]=new Ve)},C=M(""),B=M(":dels"),$=K[w](T),j=$[0],q=$[1];if(w==="query"&&j.isPrimaryKey&&!T.values?B.add(q):M(j.name||"").add(q),!j.isPrimaryKey)if(w==="count")B.add(i);else{var re=w==="query"&&y&&T.values&&s.query(f(f({},T),{values:!1}));return s[w].apply(this,arguments).then(function(U){if(w==="query"){if(y&&T.values)return re.then(function(H){var De=H.result;return C.addKeys(De),U});var ne=T.values?U.result.map(p):U.result;T.values?C.addKeys(ne):B.addKeys(ne)}else if(w==="openCursor"){var X=U,fe=T.values;return X&&Object.create(X,{key:{get:function(){return B.addKey(X.primaryKey),X.key}},primaryKey:{get:function(){var H=X.primaryKey;return B.addKey(H),H}},value:{get:function(){return fe&&C.addKey(X.primaryKey),X.value}}})}return U})}}return s[w].apply(this,arguments)}}),_}})}};function wf(t,n,i,o){function s(l){var d=t(l.name||"");function h(y){return y!=null?l.extractKey(y):null}var p=function(y){return l.multiEntry&&m(y)?y.forEach(function(E){return d.addKey(E)}):d.addKey(y)};(i||o).forEach(function(y,E){var _=i&&h(i[E]),S=o&&h(o[E]);se(_,S)!==0&&(_!=null&&p(_),S!=null&&p(S))})}n.indexes.forEach(s)}function Ts(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(i.numFailures===o)return null;var s=f({},n);return m(s.keys)&&(s.keys=s.keys.filter(function(l,d){return!(d in i.failures)})),"values"in s&&m(s.values)&&(s.values=s.values.filter(function(l,d){return!(d in i.failures)})),s}function Ef(t,n){return n.lower===void 0?!0:n.lowerOpen?se(t,n.lower)>0:se(t,n.lower)>=0}function xf(t,n){return n.upper===void 0?!0:n.upperOpen?se(t,n.upper)<0:se(t,n.upper)<=0}function $a(t,n){return Ef(t,n)&&xf(t,n)}function Ds(t,n,i,o,s,l){if(!i||i.length===0)return t;var d=n.query.index,h=d.multiEntry,p=n.query.range,y=o.schema.primaryKey,E=y.extractKey,_=d.extractKey,S=(d.lowLevelIndex||d).extractKey,K=i.reduce(function(w,T){var O=w,I=[];if(T.type==="add"||T.type==="put")for(var R=new Ve,P=T.values.length-1;P>=0;--P){var M=T.values[P],C=E(M);if(!R.hasKey(C)){var B=_(M);(h&&m(B)?B.some(function(U){return $a(U,p)}):$a(B,p))&&(R.addKey(C),I.push(M))}}switch(T.type){case"add":{var $=new Ve().addKeys(n.values?w.map(function(U){return E(U)}):w);O=w.concat(n.values?I.filter(function(U){var ne=E(U);return $.hasKey(ne)?!1:($.addKey(ne),!0)}):I.map(function(U){return E(U)}).filter(function(U){return $.hasKey(U)?!1:($.addKey(U),!0)}));break}case"put":{var j=new Ve().addKeys(T.values.map(function(U){return E(U)}));O=w.filter(function(U){return!j.hasKey(n.values?E(U):U)}).concat(n.values?I:I.map(function(U){return E(U)}));break}case"delete":var q=new Ve().addKeys(T.keys);O=w.filter(function(U){return!q.hasKey(n.values?E(U):U)});break;case"deleteRange":var re=T.range;O=w.filter(function(U){return!$a(E(U),re)});break}return O},t);return K===t?t:(K.sort(function(w,T){return se(S(w),S(T))||se(E(w),E(T))}),n.limit&&n.limit<1/0&&(K.length>n.limit?K.length=n.limit:t.length===n.limit&&K.length<n.limit&&(s.dirty=!0)),l?Object.freeze(K):K)}function As(t,n){return se(t.lower,n.lower)===0&&se(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function Tf(t,n,i,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var s=se(t,n);if(s===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return s}function Df(t,n,i,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var s=se(t,n);if(s===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return s}function Af(t,n){return Tf(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&Df(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function Of(t,n,i,o){var s=An["idb://".concat(t,"/").concat(n)];if(!s)return[];var l=s.queries[i];if(!l)return[null,!1,s,null];var d=o.query?o.query.index.name:null,h=l[d||""];if(!h)return[null,!1,s,null];switch(i){case"query":var p=h.find(function(_){return _.req.limit===o.limit&&_.req.values===o.values&&As(_.req.query.range,o.query.range)});if(p)return[p,!0,s,h];var y=h.find(function(_){var S="limit"in _.req?_.req.limit:1/0;return S>=o.limit&&(o.values?_.req.values:!0)&&Af(_.req.query.range,o.query.range)});return[y,!1,s,h];case"count":var E=h.find(function(_){return As(_.req.query.range,o.query.range)});return[E,!!E,s,h]}}function Sf(t,n,i,o){t.subscribers.add(i),o.addEventListener("abort",function(){t.subscribers.delete(i),t.subscribers.size===0&&kf(t,n)})}function kf(t,n){setTimeout(function(){t.subscribers.size===0&&Se(n,t)},3e3)}var If={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,i=f(f({},t),{transaction:function(o,s,l){var d=t.transaction(o,s,l);if(s==="readwrite"){var h=new AbortController,p=h.signal,y=function(E){return function(){if(h.abort(),s==="readwrite"){for(var _=new Set,S=0,K=o;S<K.length;S++){var w=K[S],T=An["idb://".concat(n,"/").concat(w)];if(T){var O=t.table(w),I=T.optimisticOps.filter(function(fe){return fe.trans===d});if(d._explicit&&E&&d.mutatedParts)for(var R=0,P=Object.values(T.queries.query);R<P.length;R++)for(var M=P[R],C=0,B=M.slice();C<B.length;C++){var $=B[C];Na($.obsSet,d.mutatedParts)&&(Se(M,$),$.subscribers.forEach(function(fe){return _.add(fe)}))}else if(I.length>0){T.optimisticOps=T.optimisticOps.filter(function(fe){return fe.trans!==d});for(var j=0,q=Object.values(T.queries.query);j<q.length;j++)for(var M=q[j],re=0,U=M.slice();re<U.length;re++){var $=U[re];if($.res!=null&&d.mutatedParts)if(E&&!$.dirty){var ne=Object.isFrozen($.res),X=Ds($.res,$.req,I,O,$,ne);$.dirty?(Se(M,$),$.subscribers.forEach(function(De){return _.add(De)})):X!==$.res&&($.res=X,$.promise=z.resolve({result:X}))}else $.dirty&&Se(M,$),$.subscribers.forEach(function(De){return _.add(De)})}}}}_.forEach(function(fe){return fe()})}}};d.addEventListener("abort",y(!1),{signal:p}),d.addEventListener("error",y(!1),{signal:p}),d.addEventListener("complete",y(!0),{signal:p})}return d},table:function(o){var s=t.table(o),l=s.schema.primaryKey,d=f(f({},s),{mutate:function(h){var p=G.trans;if(l.outbound||p.db._options.cache==="disabled"||p.explicit||p.idbtrans.mode!=="readwrite")return s.mutate(h);var y=An["idb://".concat(n,"/").concat(o)];if(!y)return s.mutate(h);var E=s.mutate(h);return(h.type==="add"||h.type==="put")&&(h.values.length>=50||za(l,h).some(function(_){return _==null}))?E.then(function(_){var S=f(f({},h),{values:h.values.map(function(w,T){var O;if(_.failures[T])return w;var I=!((O=l.keyPath)===null||O===void 0)&&O.includes(".")?Pe(w):f({},w);return V(I,l.keyPath,_.results[T]),I})}),K=Ts(y,S,_);y.optimisticOps.push(K),queueMicrotask(function(){return h.mutatedParts&&gi(h.mutatedParts)})}):(y.optimisticOps.push(h),h.mutatedParts&&gi(h.mutatedParts),E.then(function(_){if(_.numFailures>0){Se(y.optimisticOps,h);var S=Ts(y,h,_);S&&y.optimisticOps.push(S),h.mutatedParts&&gi(h.mutatedParts)}}),E.catch(function(){Se(y.optimisticOps,h),h.mutatedParts&&gi(h.mutatedParts)})),E},query:function(h){var p;if(!Es(G,s)||!xs("query",h))return s.query(h);var y=((p=G.trans)===null||p===void 0?void 0:p.db._options.cache)==="immutable",E=G,_=E.requery,S=E.signal,K=Of(n,o,"query",h),w=K[0],T=K[1],O=K[2],I=K[3];if(w&&T)w.obsSet=h.obsSet;else{var R=s.query(h).then(function(P){var M=P.result;if(w&&(w.res=M),y){for(var C=0,B=M.length;C<B;++C)Object.freeze(M[C]);Object.freeze(M)}else P.result=Pe(M);return P}).catch(function(P){return I&&w&&Se(I,w),Promise.reject(P)});w={obsSet:h.obsSet,promise:R,subscribers:new Set,type:"query",req:h,dirty:!1},I?I.push(w):(I=[w],O||(O=An["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),O.queries.query[h.query.index.name||""]=I)}return Sf(w,I,_,S),w.promise.then(function(P){return{result:Ds(P.result,h,O?.optimisticOps,s,w,y)}})}});return d}});return i}};function bi(t,n){return new Proxy(t,{get:function(i,o,s){return o==="db"?n:Reflect.get(i,o,s)}})}var Ut=(function(){function t(n,i){var o=this;this._middlewares={},this.verno=0;var s=t.dependencies;this._options=i=f({addons:t.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var l=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ye,dbReadyPromise:null,cancelOpen:ye,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};d.dbReadyPromise=new z(function(p){d.dbReadyResolve=p}),d.openCanceller=new z(function(p,y){d.cancelOpen=y}),this._state=d,this.name=n,this.on=_r(this,"populate","blocked","versionchange","close",{ready:[sa,ye]}),this.once=function(p,y){var E=function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];o.on(p).unsubscribe(E),y.apply(o,_)};return o.on(p,E)},this.on.ready.subscribe=oe(this.on.ready.subscribe,function(p){return function(y,E){t.vip(function(){var _=o._state;if(_.openComplete)_.dbOpenError||z.resolve().then(y),E&&p(y);else if(_.onReadyBeingFired)_.onReadyBeingFired.push(y),E&&p(y);else{p(y);var S=o;E||p(function K(){S.on.ready.unsubscribe(y),S.on.ready.unsubscribe(K)})}})}}),this.Collection=Kl(this),this.Table=Ml(this),this.Transaction=Wl(this),this.Version=uf(this),this.WhereClause=Ul(this),this.on("versionchange",function(p){p.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=xr(i.IDBKeyRange),this._createTransaction=function(p,y,E,_){return new o.Transaction(p,y,E,o._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(p){o.on("blocked").fire(p),Un.filter(function(y){return y.name===o.name&&y!==o&&!y._state.vcFired}).map(function(y){return y.on("versionchange").fire(p)})},this.use(_f),this.use(If),this.use(bf),this.use(yf),this.use(mf);var h=new Proxy(this,{get:function(p,y,E){if(y==="_vip")return!0;if(y==="table")return function(S){return bi(o.table(S),h)};var _=Reflect.get(p,y,E);return _ instanceof os?bi(_,h):y==="tables"?_.map(function(S){return bi(S,h)}):y==="_createTransaction"?function(){var S=_.apply(this,arguments);return bi(S,h)}:_}});this.vip=h,l.forEach(function(p){return p(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new Y.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new Y.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,o=i.filter(function(s){return s._cfg.version===n})[0];return o||(o=new this.Version(n),i.push(o),i.sort(Xl),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?n():new z(function(o,s){if(i._state.openComplete)return s(new Y.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){s(new Y.DatabaseClosed);return}i.open().catch(ye)}i._state.dbReadyPromise.then(o,s)}).then(n)},t.prototype.use=function(n){var i=n.stack,o=n.create,s=n.level,l=n.name;l&&this.unuse({stack:i,name:l});var d=this._middlewares[i]||(this._middlewares[i]=[]);return d.push({stack:i,create:o,level:s??10,name:l}),d.sort(function(h,p){return h.level-p.level}),this},t.prototype.unuse=function(n){var i=n.stack,o=n.name,s=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(l){return s?l.create!==s:o?l.name!==o:!1})),this},t.prototype.open=function(){var n=this;return xn(qt,function(){return hf(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=Un.indexOf(this);if(i>=0&&Un.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new z(function(o){n.dbReadyResolve=o}),n.openCanceller=new z(function(o,s){n.cancelOpen=s}))},t.prototype.close=function(n){var i=n===void 0?{disableAutoOpen:!0}:n,o=i.disableAutoOpen,s=this._state;o?(s.isBeingOpened&&s.cancelOpen(new Y.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new Y.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},t.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",s=this._state;return new z(function(l,d){var h=function(){i.close(n);var p=i._deps.indexedDB.deleteDatabase(i.name);p.onsuccess=we(function(){cf(i._deps,i.name),l()}),p.onerror=Ot(d),p.onblocked=i._fireOnBlocked};if(o)throw new Y.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(h):h()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return g(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=vf.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,i,o){var s=this,l=G.trans;(!l||l.db!==this||n.indexOf("!")!==-1)&&(l=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var h,p;try{if(p=i.map(function(E){var _=E instanceof s.Table?E.name:E;if(typeof _!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),n=="r"||n===_a)h=_a;else if(n=="rw"||n==ba)h=ba;else throw new Y.InvalidArgument("Invalid transaction mode: "+n);if(l){if(l.mode===_a&&h===ba)if(d)l=null;else throw new Y.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l&&p.forEach(function(E){if(l&&l.storeNames.indexOf(E)===-1)if(d)l=null;else throw new Y.SubTransaction("Table "+E+" not included in parent transaction.")}),d&&l&&!l.active&&(l=null)}}catch(E){return l?l._promise(null,function(_,S){S(E)}):ke(E)}var y=bs.bind(null,this,h,p,l,o);return l?l._promise(h,y,"lock"):G.trans?xn(G.transless,function(){return s._whenReady(y)}):this._whenReady(y)},t.prototype.table=function(n){if(!b(this._allTables,n))throw new Y.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),Cf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Rf=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,i,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:i,complete:o}:n)},t.prototype[Cf]=function(){return this},t})(),wi;try{wi={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{wi={indexedDB:null,IDBKeyRange:null}}function Os(t){var n=!1,i,o=new Rf(function(s){var l=ia(t);function d(I){var R=jn();try{l&&$n();var P=Qt(t,I);return l&&(P=P.finally(Xt)),P}finally{R&&zn()}}var h=!1,p,y={},E={},_={get closed(){return h},unsubscribe:function(){h||(h=!0,p&&p.abort(),S&&tn.storagemutated.unsubscribe(T))}};s.start&&s.start(_);var S=!1,K=function(){return ya(O)};function w(){return Na(E,y)}var T=function(I){mi(y,I),w()&&K()},O=function(){if(!(h||!wi.indexedDB)){y={};var I={};p&&p.abort(),p=new AbortController;var R={subscr:I,signal:p.signal,requery:K,querier:t,trans:null},P=d(R);Promise.resolve(P).then(function(M){n=!0,i=M,!(h||R.signal.aborted)&&(y={},E=I,!Ne(E)&&!S&&(tn(Er,T),S=!0),ya(function(){return!h&&s.next&&s.next(M)}))},function(M){n=!1,["DatabaseClosedError","AbortError"].includes(M?.name)||h||ya(function(){h||s.error&&s.error(M)})})}};return setTimeout(K,0),_});return o.hasValue=function(){return n},o.getValue=function(){return i},o}var On=Ut;D(On,f(f({},qr),{delete:function(t){var n=new On(t,{addons:[]});return n.delete()},exists:function(t){return new On(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return lf(On.dependencies).then(t)}catch{return ke(new Y.MissingAPI)}},defineClass:function(){function t(n){A(this,n)}return t},ignoreTransaction:function(t){return G.trans?xn(G.transless,t):t()},vip:Ra,async:function(t){return function(){try{var n=Ba(t.apply(this,arguments));return!n||typeof n.then!="function"?z.resolve(n):n}catch(i){return ke(i)}}},spawn:function(t,n,i){try{var o=Ba(t.apply(i,n||[]));return!o||typeof o.then!="function"?z.resolve(o):o}catch(s){return ke(s)}},currentTransaction:{get:function(){return G.trans||null}},waitFor:function(t,n){var i=z.resolve(typeof t=="function"?On.ignoreTransaction(t):t).timeout(n||6e4);return G.trans?G.trans.waitFor(i):i},Promise:z,debug:{get:function(){return At},set:function(t){Vo(t)}},derive:N,extend:A,props:D,override:oe,Events:_r,on:tn,liveQuery:Os,extendObservabilitySet:mi,getByKeyPath:le,setByKeyPath:V,delByKeyPath:te,shallowClone:ee,deepClone:Pe,getObjectDiff:ja,cmp:se,asap:me,minKey:ga,addons:[],connections:Un,errnames:oa,dependencies:wi,cache:An,semVer:Jo,version:Jo.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,i*2)})})),On.maxKey=xr(On.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(tn(Er,function(t){if(!nn){var n;n=new CustomEvent(xa,{detail:t}),nn=!0,dispatchEvent(n),nn=!1}}),addEventListener(xa,function(t){var n=t.detail;nn||Ua(n)}));function Ua(t){var n=nn;try{nn=!0,tn.storagemutated.fire(t),La(t,!0)}finally{nn=n}}var nn=!1,rn,Va=function(){};typeof BroadcastChannel<"u"&&(Va=function(){rn=new BroadcastChannel(xa),rn.onmessage=function(t){return t.data&&Ua(t.data)}},Va(),typeof rn.unref=="function"&&rn.unref(),tn(Er,function(t){nn||rn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Ut.disableBfCache&&t.persisted){At&&console.debug("Dexie: handling persisted pagehide"),rn?.close();for(var n=0,i=Un;n<i.length;n++){var o=i[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!Ut.disableBfCache&&t.persisted&&(At&&console.debug("Dexie: handling persisted pageshow"),Va(),Ua({all:new Ve(-1/0,[[]])}))}));function Pf(t){return new gr({add:t})}function Mf(t){return new gr({remove:t})}function Nf(t,n){return new gr({replacePrefix:[t,n]})}z.rejectionMapper=vl,Vo(At);var Ff=Object.freeze({__proto__:null,Dexie:Ut,liveQuery:Os,Entity:ns,cmp:se,PropModification:gr,replacePrefix:Nf,add:Pf,remove:Mf,default:Ut,RangeSet:Ve,mergeRanges:Ar,rangesOverlap:ys});return f(Ut,Ff,{default:Ut}),Ut}))})(Ai)),Ai.exports}var gd=md();const oo=pd(gd),zs=Symbol.for("Dexie"),Ki=globalThis[zs]||(globalThis[zs]=oo);if(oo.semVer!==Ki.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${oo.semVer} and ${Ki.semVer}`);const{liveQuery:Li,mergeRanges:sv,rangesOverlap:uv,RangeSet:lv,cmp:fv,Entity:cv,PropModification:dv,replacePrefix:hv,add:vv,remove:pv,DexieYProvider:yv}=Ki,Re=new Ki("TaskPlannerDB");Re.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Re.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));Re.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));async function Hu(){return await Re.lists.orderBy("order").toArray()}async function _d(e){return await Re.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function bd(){return(await Re.tasks.where("status").equals("archived").toArray()).sort((r,a)=>{const u=r.archivedAt||0,f=a.archivedAt||0;return f!==u?f-u:(a.order||0)-(r.order||0)})}async function wd(e,r){const a=await Re.tasks.where("listId").equals(e).filter(g=>g.status!=="archived").sortBy("order"),f=(a.length>0?Math.max(...a.map(g=>g.order)):-1)+1,c=r===""?"":r.trim();return await Re.tasks.add({text:c,listId:e,order:f,status:"unchecked"})}async function $s(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const a={status:r};return r==="archived"?a.archivedAt=Date.now():r!=="archived"&&(a.archivedAt=null),await Re.tasks.update(e,a)}async function Ed(e){const r=await Re.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const a=await Re.tasks.where("listId").equals(r.listId).filter(c=>c.status!=="archived"&&c.id!==e).sortBy("order"),f=(a.length>0?Math.max(...a.map(c=>c.order)):-1)+1;return await Re.tasks.update(e,{status:"checked",order:f})}async function xd(e,r){if(!r||r.length===0)return;const a=r.map(v=>v.id);if((await Re.tasks.bulkGet(a)).filter(v=>!v||v.listId!==e).length>0)throw new Error(`Cannot update order: some tasks do not belong to list ${e}`);const c=r.map((v,g)=>({id:v.id,order:g}));await Re.transaction("rw",Re.tasks,async()=>{for(const v of c)await Re.tasks.update(v.id,{order:v.order})})}async function Td(e){await Re.tasks.delete(e)}function Us(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),a.push.apply(a,u)}return a}function Bi(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Us(Object(a),!0).forEach(function(u){ur(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Us(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function Qn(e){"@babel/helpers - typeof";return Qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qn(e)}function ur(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Dd(e,r){if(e==null)return{};var a={},u=Object.keys(e),f,c;for(c=0;c<u.length;c++)f=u[c],!(r.indexOf(f)>=0)&&(a[f]=e[f]);return a}function Ad(e,r){if(e==null)return{};var a=Dd(e,r),u,f;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(f=0;f<c.length;f++)u=c[f],!(r.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(a[u]=e[u])}return a}function Od(e,r){return kd(e)||Cd(e,r)||No(e,r)||Pd()}function _t(e){return Sd(e)||Id(e)||No(e)||Rd()}function Sd(e){if(Array.isArray(e))return so(e)}function kd(e){if(Array.isArray(e))return e}function Id(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cd(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var u=[],f=!0,c=!1,v,g;try{for(a=a.call(e);!(f=(v=a.next()).done)&&(u.push(v.value),!(r&&u.length===r));f=!0);}catch(m){c=!0,g=m}finally{try{!f&&a.return!=null&&a.return()}finally{if(c)throw g}}return u}}function No(e,r){if(e){if(typeof e=="string")return so(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return so(e,r)}}function so(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=e[a];return u}function Rd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gr(e,r){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=No(e))||r){a&&(e=a);var u=0,f=function(){};return{s:f,n:function(){return u>=e.length?{done:!0}:{done:!1,value:e[u++]}},e:function(m){throw m},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,v=!1,g;return{s:function(){a=a.call(e)},n:function(){var m=a.next();return c=m.done,m},e:function(m){v=!0,g=m},f:function(){try{!c&&a.return!=null&&a.return()}finally{if(v)throw g}}}}var Md="finalize",Nd="consider";function lr(e,r,a){e.dispatchEvent(new CustomEvent(Md,{detail:{items:r,info:a}}))}function gn(e,r,a){e.dispatchEvent(new CustomEvent(Nd,{detail:{items:r,info:a}}))}var qi="draggedEntered",Hr="draggedLeft",Qi="draggedOverIndex",Fo="draggedLeftDocument",ji={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function Fd(e,r,a){e.dispatchEvent(new CustomEvent(qi,{detail:{indexObj:r,draggedEl:a}}))}function Kd(e,r,a){e.dispatchEvent(new CustomEvent(Hr,{detail:{draggedEl:r,type:ji.LEFT_FOR_ANOTHER,theOtherDz:a}}))}function Ld(e,r){e.dispatchEvent(new CustomEvent(Hr,{detail:{draggedEl:r,type:ji.OUTSIDE_OF_ANY}}))}function Bd(e,r,a){e.dispatchEvent(new CustomEvent(Qi,{detail:{indexObj:r,draggedEl:a}}))}function jd(e){window.dispatchEvent(new CustomEvent(Fo,{detail:{draggedEl:e}}))}var et={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:qi,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Qi,DRAGGED_LEFT:Hr,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},lt={POINTER:"pointer",KEYBOARD:"keyboard"},Xi="isDndShadowItem",Ji="data-is-dnd-shadow-item-internal",zd="data-is-dnd-shadow-item-hint",Yu="id:dnd-shadow-placeholder-0000",$d="dnd-action-dragged-el",Me="id",uo=0;function Zu(){uo++}function qu(){if(uo===0)throw new Error("Bug! trying to decrement when there are no dropzones");uo--}var Ko=typeof window>"u";function lo(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,u=r?Wd(e):e.getBoundingClientRect(),f=getComputedStyle(e),c=f.transform;if(c){var v,g,m,A;if(c.startsWith("matrix3d("))a=c.slice(9,-1).split(/, /),v=+a[0],g=+a[5],m=+a[12],A=+a[13];else if(c.startsWith("matrix("))a=c.slice(7,-1).split(/, /),v=+a[0],g=+a[3],m=+a[4],A=+a[5];else return u;var x=f.transformOrigin,k=u.x-m-(1-v)*parseFloat(x),b=u.y-A-(1-g)*parseFloat(x.slice(x.indexOf(" ")+1)),D=v?u.width/v:e.offsetWidth,F=g?u.height/g:e.offsetHeight;return{x:k,y:b,width:D,height:F,top:b,right:k+D,bottom:b+F,left:k}}else return u}function Qu(e){var r=lo(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Xu(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Ju(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Ud(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function ea(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function Lr(e){return Ju(Xu(e))}function Vs(e,r){var a=Lr(e),u=Qu(r);return ea(a,u)}function Ws(e,r){var a=Lr(e),u=Lr(r);return Ud(a,u)}function Vd(e){var r=Xu(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function Wd(e){for(var r=e.getBoundingClientRect(),a={top:r.top,bottom:r.bottom,left:r.left,right:r.right},u=!1,f=!1,c=e.parentElement;c&&c!==document.body;){var v=window.getComputedStyle(c),g=v.overflowY,m=v.overflowX,A=g==="scroll"||g==="auto",x=m==="scroll"||m==="auto";if(A||x){var k=c.getBoundingClientRect();if(A){var b=Math.max(a.top,k.top),D=Math.min(a.bottom,k.bottom);(b!==a.top||D!==a.bottom)&&(u=!0),a.top=b,a.bottom=D}if(x){var F=Math.max(a.left,k.left),L=Math.min(a.right,k.right);(F!==a.left||L!==a.right)&&(f=!0),a.left=F,a.right=L}}c=c.parentElement}return u||f?{top:a.top,bottom:a.bottom,left:a.left,right:a.right,width:Math.max(0,a.right-a.left),height:Math.max(0,a.bottom-a.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var tr;function Lo(){tr=new Map}Lo();function Gd(e){var r=Array.from(e.children).findIndex(function(a){return a.getAttribute(Ji)});if(r>=0)return tr.has(e)||tr.set(e,new Map),tr.get(e).set(r,Qu(e.children[r])),r}function Hd(e,r){if(!Vs(e,r))return null;var a=r.children;if(a.length===0)return{index:0,isProximityBased:!0};for(var u=Gd(r),f=0;f<a.length;f++)if(Vs(e,a[f])){var c=tr.has(r)&&tr.get(r).get(f);return c&&!ea(Lr(e),c)?{index:u,isProximityBased:!1}:{index:f,isProximityBased:!1}}for(var v=Number.MAX_VALUE,g=void 0,m=0;m<a.length;m++){var A=Ws(e,a[m]);A<v&&(v=A,g=m)}if(a.length>0){var x=a.length,k=a[x-1],b=k.cloneNode(!1);b.style.visibility="hidden",b.style.pointerEvents="none",r.appendChild(b);var D=Ws(e,b);D<v&&(g=x),r.removeChild(b)}return{index:g,isProximityBased:!0}}function Sr(e){return JSON.stringify(e,null,2)}function zi(e){if(!e)throw new Error("cannot get depth of a falsy node");return el(e,0)}function el(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?el(e.parentElement,r+1):r-1}function Yd(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var a in e)if(!{}.hasOwnProperty.call(r,a)||r[a]!==e[a])return!1;return!0}function Zd(e,r){if(e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}var qd=200,Gs=10,fo;function Qd(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qd,u=arguments.length>3?arguments[3]:void 0,f,c,v=!1,g,m=Array.from(r).sort(function(x,k){return zi(k)-zi(x)});function A(){var x=Lr(e),k=u.multiScrollIfNeeded();if(!k&&g&&Math.abs(g.x-x.x)<Gs&&Math.abs(g.y-x.y)<Gs){fo=window.setTimeout(A,a);return}if(Vd(e)){jd(e);return}g=x;var b=!1,D=Gr(m),F;try{for(D.s();!(F=D.n()).done;){var L=F.value;k&&Lo();var N=Hd(e,L);if(N!==null){var W=N.index;b=!0,L!==f?(f&&Kd(f,e,L),Fd(L,N,e),f=L):W!==c&&(Bd(L,N,e),c=W);break}}}catch(ie){D.e(ie)}finally{D.f()}!b&&v&&f?(Ld(f,e),f=void 0,c=void 0,v=!1):v=!0,fo=window.setTimeout(A,a)}A()}function Xd(){clearTimeout(fo),Lo()}var kr=30;function Jd(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function a(c){var v=e,g=v.directionObj,m=v.stepPx;g&&(c.scrollBy(g.x*m,g.y*m),window.requestAnimationFrame(function(){return a(c)}))}function u(c){return kr-c}function f(c,v){if(!v)return!1;var g=eh(c,v),m=!!e.directionObj;if(g===null)return m&&r(),!1;var A=!1,x=!1;return v.scrollHeight>v.clientHeight&&(g.bottom<kr?(A=!0,e.directionObj={x:0,y:1},e.stepPx=u(g.bottom)):g.top<kr&&(A=!0,e.directionObj={x:0,y:-1},e.stepPx=u(g.top)),!m&&A)||v.scrollWidth>v.clientWidth&&(g.right<kr?(x=!0,e.directionObj={x:1,y:0},e.stepPx=u(g.right)):g.left<kr&&(x=!0,e.directionObj={x:-1,y:0},e.stepPx=u(g.left)),!m&&x)?(a(v),!0):(r(),!1)}return{scrollIfNeeded:f,resetScrolling:r}}function eh(e,r){var a=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return ea(e,a)?{top:e.y-a.top,bottom:a.bottom-e.y,left:e.x-a.left,right:a.right-e.x}:null}function th(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=rh(e),u=Array.from(a).sort(function(m,A){return zi(A)-zi(m)}),f=Jd(),c=f.scrollIfNeeded,v=f.resetScrolling;function g(){var m=r();if(!m||!u)return!1;for(var A=u.filter(function(b){return ea(m,b.getBoundingClientRect())||b===document.scrollingElement}),x=0;x<A.length;x++){var k=c(m,A[x]);if(k)return!0}return!1}return{multiScrollIfNeeded:a.size>0?g:function(){return!1},destroy:function(){return v()}}}function nh(e){if(!e)return[];for(var r=[],a=e;a;){var u=window.getComputedStyle(a),f=u.overflow;f.split(" ").some(function(c){return c.includes("auto")||c.includes("scroll")})&&r.push(a),a=a.parentElement}return r}function rh(e){var r=new Set,a=Gr(e),u;try{for(a.s();!(u=a.n()).done;){var f=u.value;nh(f).forEach(function(c){return r.add(c)})}}catch(c){a.e(c)}finally{a.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function ih(e){var r=e.cloneNode(!0),a=[],u=e.tagName==="SELECT",f=u?[e]:_t(e.querySelectorAll("select")),c=Gr(f),v;try{for(c.s();!(v=c.n()).done;){var g=v.value;a.push(g.value)}}catch(ae){c.e(ae)}finally{c.f()}if(f.length>0)for(var m=u?[r]:_t(r.querySelectorAll("select")),A=0;A<m.length;A++){var x=m[A],k=a[A],b=x.querySelector('option[value="'.concat(k,'"'));b&&b.setAttribute("selected",!0)}var D=e.tagName==="CANVAS",F=D?[e]:_t(e.querySelectorAll("canvas"));if(F.length>0)for(var L=D?[r]:_t(r.querySelectorAll("canvas")),N=0;N<L.length;N++){var W=F[N],ie=L[N];ie.width=W.width,ie.height=W.height,W.width>0&&W.height>0&&ie.getContext("2d").drawImage(W,0,0)}return r}var Br=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),ah=ur({},Br.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function tl(e){if(!Br[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Br)));return ah[e]}var oh=.2;function kn(e){return"".concat(e," ").concat(oh,"s ease")}function sh(e,r){var a=e.getBoundingClientRect(),u=ih(e);nl(e,u),u.id=$d,u.style.position="fixed";var f=a.top,c=a.left;if(u.style.top="".concat(f,"px"),u.style.left="".concat(c,"px"),r){var v=Ju(a);f-=v.y-r.y,c-=v.x-r.x,window.setTimeout(function(){u.style.top="".concat(f,"px"),u.style.left="".concat(c,"px")},0)}return u.style.margin="0",u.style.boxSizing="border-box",u.style.height="".concat(a.height,"px"),u.style.width="".concat(a.width,"px"),u.style.transition="".concat(kn("top"),", ").concat(kn("left"),", ").concat(kn("background-color"),", ").concat(kn("opacity"),", ").concat(kn("color")," "),window.setTimeout(function(){return u.style.transition+=", ".concat(kn("width"),", ").concat(kn("height"))},0),u.style.zIndex="9999",u.style.cursor="grabbing",u}function uh(e){e.style.cursor="grab"}function lh(e,r,a,u){nl(r,e);var f=r.getBoundingClientRect(),c=e.getBoundingClientRect(),v=f.width-c.width,g=f.height-c.height;if(v||g){var m={left:(a-c.left)/c.width,top:(u-c.top)/c.height};tl(Br.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(f.height,"px"),e.style.width="".concat(f.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-m.left*v,"px"),e.style.top="".concat(parseFloat(e.style.top)-m.top*g,"px")}}function nl(e,r){var a=window.getComputedStyle(e);Array.from(a).filter(function(u){return u.startsWith("background")||u.startsWith("padding")||u.startsWith("font")||u.startsWith("text")||u.startsWith("align")||u.startsWith("justify")||u.startsWith("display")||u.startsWith("flex")||u.startsWith("border")||u==="opacity"||u==="color"||u==="list-style-type"||tl(Br.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(u==="width"||u==="height")}).forEach(function(u){return r.style.setProperty(u,a.getPropertyValue(u),a.getPropertyPriority(u))})}function fh(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function rl(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function ch(e){e.style.visibility="hidden",e.setAttribute(Ji,"true")}function dh(e){e.style.visibility="",e.removeAttribute(Ji)}function Oi(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(u){var f=r(u);Object.keys(f).forEach(function(c){u.style[c]=f[c]}),a(u).forEach(function(c){return u.classList.add(c)})})}function $i(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(u){var f=r(u);Object.keys(f).forEach(function(c){u.style[c]=""}),a(u).forEach(function(c){return u.classList.contains(c)&&u.classList.remove(c)})})}function hh(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var a=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=a}}var vh="--any--",ph=100,yh=20,Ti=3,mh=80,Hs={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Ys="data-is-dnd-original-dragged-item",it,Ke,at,ta,Ee,na,vn,ze,Pt,He,on=!1,Bo=!1,jo,Yr=!1,Si=[],Pr,Mt,Cr=!1,Et=new Map,Ie=new Map,Za=new WeakMap;function gh(e,r){Et.has(r)||Et.set(r,new Set),Et.get(r).has(e)||(Et.get(r).add(e),Zu())}function Zs(e,r){Et.get(r).delete(e),qu(),Et.get(r).size===0&&Et.delete(r)}function _h(){var e=Et.get(ta),r=Gr(e),a;try{for(r.s();!(a=r.n()).done;){var u=a.value;u.addEventListener(qi,il),u.addEventListener(Hr,al),u.addEventListener(Qi,ol)}}catch(v){r.e(v)}finally{r.f()}window.addEventListener(Fo,fr);var f=Math.max.apply(Math,_t(Array.from(e.keys()).map(function(v){return Ie.get(v).dropAnimationDurationMs}))),c=f===0?yh:Math.max(f,ph);Pr=th(e,function(){return He}),Qd(Ke,e,c*1.07,Pr)}function bh(){var e=Et.get(ta),r=Gr(e),a;try{for(r.s();!(a=r.n()).done;){var u=a.value;u.removeEventListener(qi,il),u.removeEventListener(Hr,al),u.removeEventListener(Qi,ol)}}catch(f){r.e(f)}finally{r.f()}window.removeEventListener(Fo,fr),Pr&&(Pr.destroy(),Pr=void 0),Xd()}function ra(e){return e.findIndex(function(r){return!!r[Xi]})}function wh(e){var r;return Bi(Bi({},e),{},(r={},ur(r,Xi,!0),ur(r,Me,Yu),r))}function il(e){var r=Ie.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==Ee)){if(Yr=!1,a=a.filter(function(g){return g[Me]!==vn[Me]&&g[Me]!==Yu}),Ee!==e.currentTarget){var f=Ie.get(Ee).items,c=f.filter(function(g){return!g[Xi]});gn(Ee,c,{trigger:et.DRAGGED_ENTERED_ANOTHER,id:at[Me],source:lt.POINTER})}var v=e.detail.indexObj.index;ze=e.currentTarget,a.splice(v,0,vn),gn(e.currentTarget,a,{trigger:et.DRAGGED_ENTERED,id:at[Me],source:lt.POINTER})}}function al(e){if(on){var r=Ie.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==Ee&&e.currentTarget!==ze)){var f=_t(a),c=ra(f);c!==-1&&f.splice(c,1);var v=ze;ze=void 0;var g=e.detail,m=g.type,A=g.theOtherDz;if(m===ji.OUTSIDE_OF_ANY||m===ji.LEFT_FOR_ANOTHER&&A!==Ee&&Ie.get(A).dropFromOthersDisabled){Yr=!0,ze=Ee;var x=v===Ee?f:_t(Ie.get(Ee).items);x.splice(na,0,vn),gn(Ee,x,{trigger:et.DRAGGED_LEFT_ALL,id:at[Me],source:lt.POINTER})}gn(e.currentTarget,f,{trigger:et.DRAGGED_LEFT,id:at[Me],source:lt.POINTER})}}}function ol(e){var r=Ie.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==Ee)){var f=_t(a);Yr=!1;var c=e.detail.indexObj.index,v=ra(f);v!==-1&&f.splice(v,1),f.splice(c,0,vn),gn(e.currentTarget,f,{trigger:et.DRAGGED_OVER_INDEX,id:at[Me],source:lt.POINTER})}}function Ui(e){e.preventDefault();var r=e.touches?e.touches[0]:e;He={x:r.clientX,y:r.clientY},Ke.style.transform="translate3d(".concat(He.x-Pt.x,"px, ").concat(He.y-Pt.y,"px, 0)")}function fr(){Bo=!0,window.removeEventListener("mousemove",Ui),window.removeEventListener("touchmove",Ui),window.removeEventListener("mouseup",fr),window.removeEventListener("touchend",fr),bh(),uh(Ke),ze||(ze=Ee);var e=Ie.get(ze),r=e.items,a=e.type;$i(Et.get(a),function(c){return Ie.get(c).dropTargetStyle},function(c){return Ie.get(c).dropTargetClasses});var u=ra(r);u===-1&&ze===Ee&&(u=na),r=r.map(function(c){return c[Xi]?at:c});function f(){jo(),lr(ze,r,{trigger:Yr?et.DROPPED_OUTSIDE_OF_ANY:et.DROPPED_INTO_ZONE,id:at[Me],source:lt.POINTER}),ze!==Ee&&lr(Ee,Ie.get(Ee).items,{trigger:et.DROPPED_INTO_ANOTHER,id:at[Me],source:lt.POINTER});var c=Array.from(ze.children).find(function(v){return v.getAttribute(Ji)});c&&dh(c),Th()}Ie.get(ze).dropAnimationDisabled?f():Eh(u,f)}function Eh(e,r){var a=e>-1?lo(ze.children[e],!1):lo(ze,!1),u={x:a.left-parseFloat(Ke.style.left),y:a.top-parseFloat(Ke.style.top)},f=Ie.get(ze),c=f.dropAnimationDurationMs,v="transform ".concat(c,"ms ease");Ke.style.transition=Ke.style.transition?Ke.style.transition+","+v:v,Ke.style.transform="translate3d(".concat(u.x,"px, ").concat(u.y,"px, 0)"),window.setTimeout(r,c)}function xh(e,r){Si.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){rl(e),document.body.appendChild(e)})}function Th(){Ke&&Ke.remove&&Ke.remove(),it&&it.remove&&it.remove(),Ke=void 0,it=void 0,at=void 0,ta=void 0,Ee=void 0,na=void 0,vn=void 0,ze=void 0,Pt=void 0,He=void 0,on=!1,Bo=!1,jo=void 0,Yr=!1,Mt&&clearTimeout(Mt),Mt=void 0,Cr=!1,Si.length&&(Si.forEach(function(e){var r=e.dz,a=e.destroy;a(),r.remove()}),Si=[])}function Dh(e,r){var a=!1,u={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Hs,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},f=new Map;function c(){window.addEventListener("mousemove",m,{passive:!1}),window.addEventListener("touchmove",m,{passive:!1,capture:!1}),window.addEventListener("mouseup",g,{passive:!1}),window.addEventListener("touchend",g,{passive:!1})}function v(){window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",g),window.removeEventListener("touchend",g),Mt&&(clearTimeout(Mt),Mt=void 0,Cr=!1)}function g(b){if(v(),it=void 0,Pt=void 0,He=void 0,b.type==="touchend"){var D=new Event("click",{bubbles:!0,cancelable:!0});b.target.dispatchEvent(D)}}function m(b){var D=!!b.touches,F=D?b.touches[0]:b;if(D&&u.delayTouchStartMs>0&&!Cr){He={x:F.clientX,y:F.clientY},(Math.abs(He.x-Pt.x)>=Ti||Math.abs(He.y-Pt.y)>=Ti)&&(Mt&&(clearTimeout(Mt),Mt=void 0),g(b));return}b.preventDefault(),He={x:F.clientX,y:F.clientY},(Math.abs(He.x-Pt.x)>=Ti||Math.abs(He.y-Pt.y)>=Ti)&&(v(),x())}function A(b){if(!(b.target!==b.currentTarget&&(b.target.value!==void 0||b.target.isContentEditable))&&!b.button&&!on){var D=!!b.touches,F=D&&u.delayTouchStartMs>0;F||b.preventDefault(),b.stopPropagation();var L=D?b.touches[0]:b;Pt={x:L.clientX,y:L.clientY},He=Bi({},Pt),it=b.currentTarget,F&&(Cr=!1,Mt=window.setTimeout(function(){it&&(Cr=!0,v(),x())},u.delayTouchStartMs)),c()}}function x(){on=!0;var b=f.get(it);na=b,Ee=it.parentElement;var D=Ee.closest("dialog")||Ee.closest("[popover]")||Ee.getRootNode(),F=D.body||D,L=u.items,N=u.type,W=u.centreDraggedOnCursor,ie=_t(L);at=ie[b],ta=N,vn=wh(at),Ke=sh(it,W&&He),F.appendChild(Ke);function ae(){it.parentElement?window.requestAnimationFrame(ae):(it.setAttribute(Ys,!0),F.appendChild(it),_h(),rl(it),vn[Me]=at[Me],Ke.focus())}window.requestAnimationFrame(ae),Oi(Array.from(Et.get(u.type)).filter(function(J){return J===Ee||!Ie.get(J).dropFromOthersDisabled}),function(J){return Ie.get(J).dropTargetStyle},function(J){return Ie.get(J).dropTargetClasses}),ie.splice(b,1,vn),jo=hh(Ee),gn(Ee,ie,{trigger:et.DRAG_STARTED,id:at[Me],source:lt.POINTER}),window.addEventListener("mousemove",Ui,{passive:!1}),window.addEventListener("touchmove",Ui,{passive:!1,capture:!1}),window.addEventListener("mouseup",fr,{passive:!1}),window.addEventListener("touchend",fr,{passive:!1})}function k(b){var D=b.items,F=D===void 0?void 0:D,L=b.flipDurationMs,N=L===void 0?0:L,W=b.type,ie=W===void 0?vh:W,ae=b.dragDisabled,J=ae===void 0?!1:ae,oe=b.morphDisabled,ue=oe===void 0?!1:oe,me=b.dropFromOthersDisabled,_e=me===void 0?!1:me,le=b.dropTargetStyle,V=le===void 0?Hs:le,te=b.dropTargetClasses,ee=te===void 0?[]:te,ve=b.transformDraggedElement,de=ve===void 0?function(){}:ve,Te=b.centreDraggedOnCursor,be=Te===void 0?!1:Te,he=b.dropAnimationDisabled,Ne=he===void 0?!1:he,Xe=b.delayTouchStart,Pe=Xe===void 0?!1:Xe;u.dropAnimationDurationMs=N;var tt=0;Pe===!0?tt=mh:typeof Pe=="number"&&isFinite(Pe)&&Pe>=0&&(tt=Pe),u.delayTouchStartMs=tt,u.type&&ie!==u.type&&Zs(e,u.type),u.type=ie,u.items=_t(F),u.dragDisabled=J,u.morphDisabled=ue,u.transformDraggedElement=de,u.centreDraggedOnCursor=be,u.dropAnimationDisabled=Ne,a&&on&&!Bo&&(!Yd(V,u.dropTargetStyle)||!Zd(ee,u.dropTargetClasses))&&($i([e],function(){return u.dropTargetStyle},function(){return ee}),Oi([e],function(){return V},function(){return ee})),u.dropTargetStyle=V,u.dropTargetClasses=_t(ee);function Dt(Se,jt){return Ie.get(Se)?Ie.get(Se)[jt]:u[jt]}a&&on&&u.dropFromOthersDisabled!==_e&&(_e?$i([e],function(Se){return Dt(Se,"dropTargetStyle")},function(Se){return Dt(Se,"dropTargetClasses")}):Oi([e],function(Se){return Dt(Se,"dropTargetStyle")},function(Se){return Dt(Se,"dropTargetClasses")})),u.dropFromOthersDisabled=_e,Ie.set(e,u),gh(e,ie);for(var Bt=on?ra(u.items):-1,nt=0;nt<e.children.length;nt++){var Le=e.children[nt];if(fh(Le,J),nt===Bt){ue||lh(Ke,Le,He.x,He.y),u.transformDraggedElement(Ke,at,nt),ch(Le);continue}Le.removeEventListener("mousedown",Za.get(Le)),Le.removeEventListener("touchstart",Za.get(Le)),J||(Le.addEventListener("mousedown",A),Le.addEventListener("touchstart",A),Za.set(Le,A)),f.set(Le,nt),a||(a=!0)}}return k(r),{update:function(D){k(D)},destroy:function(){function D(){Zs(e,Ie.get(e).type),Ie.delete(e)}on&&!e.closest("[".concat(Ys,"]"))?xh(e,D):D()}}}var Di,co={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},sl=(Di={},ur(Di,co.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),ur(Di,co.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Di),Ah="dnd-action-aria-alert",Ce;function ho(){Ce||(Ce=document.createElement("div"),(function(){Ce.id=Ah,Ce.style.position="fixed",Ce.style.bottom="0",Ce.style.left="0",Ce.style.zIndex="-5",Ce.style.opacity="0",Ce.style.height="0",Ce.style.width="0",Ce.setAttribute("role","alert")})(),document.body.prepend(Ce),Object.entries(sl).forEach(function(e){var r=Od(e,2),a=r[0],u=r[1];return document.body.prepend(kh(a,u))}))}function Oh(){return Ko?null:(document.readyState==="complete"?ho():window.addEventListener("DOMContentLoaded",ho),Bi({},co))}function Sh(){Ko||!Ce||(Object.keys(sl).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),Ce.remove(),Ce=void 0)}function kh(e,r){var a=document.createElement("div");return a.id=e,a.innerHTML="<p>".concat(r,"</p>"),a.style.display="none",a.style.position="fixed",a.style.zIndex="-5",a}function nr(e){if(!Ko){Ce||ho(),Ce.innerHTML="";var r=document.createTextNode(e);Ce.appendChild(r),Ce.style.display="none",Ce.style.display="inline"}}var Ih="--any--",qs={outline:"rgba(255, 255, 102, 0.7) solid 2px"},yt=!1,vo,Ye,Mn="",In,Nt,sn="",Vi=new WeakSet,Qs=new WeakMap,Xs=new WeakMap,po=new Map,Be=new Map,wt=new Map,Wi;function Ch(e,r){wt.size===0&&(Wi=Oh(),window.addEventListener("keydown",ul),window.addEventListener("click",ll)),wt.has(r)||wt.set(r,new Set),wt.get(r).has(e)||(wt.get(r).add(e),Zu())}function Js(e,r){Ye===e&&jr(),wt.get(r).delete(e),qu(),wt.get(r).size===0&&wt.delete(r),wt.size===0&&(window.removeEventListener("keydown",ul),window.removeEventListener("click",ll),Wi=void 0,Sh())}function ul(e){if(yt)switch(e.key){case"Escape":{jr();break}}}function ll(){yt&&(Vi.has(document.activeElement)||jr())}function Rh(e){if(yt){var r=e.currentTarget;if(r!==Ye){Mn=r.getAttribute("aria-label")||"";var a=Be.get(Ye),u=a.items,f=u.find(function(k){return k[Me]===Nt}),c=u.indexOf(f),v=u.splice(c,1)[0],g=Be.get(r),m=g.items,A=g.autoAriaDisabled;r.getBoundingClientRect().top<Ye.getBoundingClientRect().top||r.getBoundingClientRect().left<Ye.getBoundingClientRect().left?(m.push(v),A||nr("Moved item ".concat(sn," to the end of the list ").concat(Mn))):(m.unshift(v),A||nr("Moved item ".concat(sn," to the beginning of the list ").concat(Mn)));var x=Ye;lr(x,u,{trigger:et.DROPPED_INTO_ANOTHER,id:Nt,source:lt.KEYBOARD}),lr(r,m,{trigger:et.DROPPED_INTO_ZONE,id:Nt,source:lt.KEYBOARD}),Ye=r}}}function fl(){po.forEach(function(e,r){var a=e.update;return a(Be.get(r))})}function jr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Be.get(Ye).autoAriaDisabled||nr("Stopped dragging item ".concat(sn)),Vi.has(document.activeElement)&&document.activeElement.blur(),e&&gn(Ye,Be.get(Ye).items,{trigger:et.DRAG_STOPPED,id:Nt,source:lt.KEYBOARD}),$i(wt.get(vo),function(r){return Be.get(r).dropTargetStyle},function(r){return Be.get(r).dropTargetClasses}),In=null,Nt=null,sn="",vo=null,Ye=null,Mn="",yt=!1,fl()}function Ph(e,r){var a={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:qs,dropTargetClasses:[],autoAriaDisabled:!1};function u(x,k,b){x.length<=1||x.splice(b,1,x.splice(k,1,x[b])[0])}function f(x){switch(x.key){case"Enter":case" ":{if((x.target.disabled!==void 0||x.target.href||x.target.isContentEditable)&&!Vi.has(x.target))return;x.preventDefault(),x.stopPropagation(),yt?jr():c(x);break}case"ArrowDown":case"ArrowRight":{if(!yt)return;x.preventDefault(),x.stopPropagation();var k=Be.get(e),b=k.items,D=Array.from(e.children),F=D.indexOf(x.currentTarget);F<D.length-1&&(a.autoAriaDisabled||nr("Moved item ".concat(sn," to position ").concat(F+2," in the list ").concat(Mn)),u(b,F,F+1),lr(e,b,{trigger:et.DROPPED_INTO_ZONE,id:Nt,source:lt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!yt)return;x.preventDefault(),x.stopPropagation();var L=Be.get(e),N=L.items,W=Array.from(e.children),ie=W.indexOf(x.currentTarget);ie>0&&(a.autoAriaDisabled||nr("Moved item ".concat(sn," to position ").concat(ie," in the list ").concat(Mn)),u(N,ie,ie-1),lr(e,N,{trigger:et.DROPPED_INTO_ZONE,id:Nt,source:lt.KEYBOARD}));break}}}function c(x){g(x.currentTarget),Ye=e,vo=a.type,yt=!0;var k=Array.from(wt.get(a.type)).filter(function(D){return D===Ye||!Be.get(D).dropFromOthersDisabled});if(Oi(k,function(D){return Be.get(D).dropTargetStyle},function(D){return Be.get(D).dropTargetClasses}),!a.autoAriaDisabled){var b="Started dragging item ".concat(sn,". Use the arrow keys to move it within its list ").concat(Mn);k.length>1&&(b+=", or tab to another list in order to move the item into it"),nr(b)}gn(e,Be.get(e).items,{trigger:et.DRAG_STARTED,id:Nt,source:lt.KEYBOARD}),fl()}function v(x){yt&&x.currentTarget!==In&&(x.stopPropagation(),jr(!1),c(x))}function g(x){var k=Be.get(e),b=k.items,D=Array.from(e.children),F=D.indexOf(x);In=x,In.tabIndex=a.zoneItemTabIndex,Nt=b[F][Me],sn=D[F].getAttribute("aria-label")||""}function m(x){var k=x.items,b=k===void 0?[]:k,D=x.type,F=D===void 0?Ih:D,L=x.dragDisabled,N=L===void 0?!1:L,W=x.zoneTabIndex,ie=W===void 0?0:W,ae=x.zoneItemTabIndex,J=ae===void 0?0:ae,oe=x.dropFromOthersDisabled,ue=oe===void 0?!1:oe,me=x.dropTargetStyle,_e=me===void 0?qs:me,le=x.dropTargetClasses,V=le===void 0?[]:le,te=x.autoAriaDisabled,ee=te===void 0?!1:te;a.items=_t(b),a.dragDisabled=N,a.dropFromOthersDisabled=ue,a.zoneTabIndex=ie,a.zoneItemTabIndex=J,a.dropTargetStyle=_e,a.dropTargetClasses=V,a.autoAriaDisabled=ee,a.type&&F!==a.type&&Js(e,a.type),a.type=F,Ch(e,F),ee||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",N?Wi.DND_ZONE_DRAG_DISABLED:Wi.DND_ZONE_ACTIVE)),Be.set(e,a),yt?e.tabIndex=e===Ye||In.contains(e)||a.dropFromOthersDisabled||Ye&&a.type!==Be.get(Ye).type?-1:0:e.tabIndex=a.zoneTabIndex,e.addEventListener("focus",Rh);for(var ve=function(be){var he=e.children[be];Vi.add(he),he.tabIndex=yt?-1:a.zoneItemTabIndex,ee||he.setAttribute("role","listitem"),he.removeEventListener("keydown",Qs.get(he)),he.removeEventListener("click",Xs.get(he)),N||(he.addEventListener("keydown",f),Qs.set(he,f),he.addEventListener("click",v),Xs.set(he,v)),yt&&a.items[be][Me]===Nt&&(In=he,In.tabIndex=a.zoneItemTabIndex,he.focus())},de=0;de<e.children.length;de++)ve(de)}m(r);var A={update:function(k){m(k)},destroy:function(){Js(e,a.type),Be.delete(e),po.delete(e)}};return po.set(e,A),A}var Mh=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Nh(e,r){if(Fh(e))return{update:function(){},destroy:function(){}};eu(r);var a=Dh(e,r),u=Ph(e,r);return{update:function(c){eu(c),a.update(c),u.update(c)},destroy:function(){a.destroy(),u.destroy()}}}function Fh(e){return!!e.closest("[".concat(zd,'="true"]'))}function eu(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var a=e.zoneTabIndex,u=e.zoneItemTabIndex;e.dropTargetStyle;var f=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var c=e.delayTouchStart;e.dropAnimationDisabled;var v=Ad(e,Mh);if(Object.keys(v).length>0&&console.warn("dndzone will ignore unknown options",v),!r)throw new Error("no 'items' key provided to dndzone");var g=r.find(function(x){return!{}.hasOwnProperty.call(x,Me)});if(g)throw new Error("missing '".concat(Me,"' property for item ").concat(Sr(g)));if(f&&!Array.isArray(f))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Qn(f),", ").concat(Sr(f)));if(a&&!tu(a))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Qn(a),", ").concat(Sr(a)));if(u&&!tu(u))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Qn(u),", ").concat(Sr(u)));if(c!==void 0&&c!==!1){var m=c===!0,A=typeof c=="number"&&isFinite(c)&&c>=0;if(!m&&!A)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(Qn(c),", ").concat(Sr(c)))}}function tu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}var Kh=Qe("<p> </p>"),Lh=Qe('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),Bh=Qe('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder"></span> <input type="checkbox" class="cursor-pointer"/> <span> </span> <!></li>'),jh=Qe('<ul class="space-y-2"></ul>'),zh=Qe("<p>Loading tasks...</p>"),$h=Qe('<div class="flex gap-2"><input type="text" placeholder="Add new task..." class="print:hidden svelte-k6mizj"/> <button class="print:hidden">Save</button></div>'),Uh=Qe('<button class="add-task-button svelte-k6mizj" style="visibility: visible;">Add Task</button>'),Vh=Qe('<div><h2> </h2> <!> <div class="task-input-container svelte-k6mizj"><!></div></div>');function Wh(e,r){$r(r,!0);const a=()=>Fi(Q(c),"$tasksQuery",u),[u,f]=Mo();let c=je(null),v=je(Cn([])),g=je(!1),m=je(null);Zn(()=>{r.listId&&!Q(c)&&ao(ge(c,Li(()=>_d(r.listId)),!0),"$tasksQuery",u)}),Zn(()=>{a()&&Array.isArray(a())&&ge(v,a().filter(V=>V.status==="unchecked"||V.status==="checked"),!0)});function A(V){ge(v,V.detail.items,!0)}async function x(V){ge(v,V.detail.items,!0);try{await xd(r.listId,V.detail.items)}catch(te){console.error("Error updating task order:",te)}}function k(){ge(g,!0)}function b(V){V.key==="Escape"&&(ge(g,!1),r.onInputChange(""))}Zn(()=>{if(!Q(g))return;function V(ee){const ve=document.querySelector(`[data-list-id="${r.listId}"] .task-input-container`);if(!ve)return;const de=ve.querySelector("button");if(de&&de.contains(ee.target))return;const Te=ve.querySelector("input");Te&&Te.contains(ee.target)||(!r.newTaskInput||r.newTaskInput.trim()==="")&&(ge(g,!1),r.onInputChange(""))}const te=setTimeout(()=>{document.addEventListener("click",V)},0);return()=>{clearTimeout(te),document.removeEventListener("click",V)}}),Zn(()=>{Q(g)&&Q(m)&&setTimeout(()=>{Q(m)?.focus()},0)});async function D(){const V=r.newTaskInput||"";if(V===""){ge(g,!1),r.onInputChange("");return}const te=V.trim(),ee=te===""&&V.length>0;let ve;ee?ve="":ve=te;try{await wd(r.listId,ve),r.onInputChange("")}catch(de){console.error("Error creating task:",de)}}async function F(V,te){try{await $s(V,te==="unchecked"?"checked":"unchecked")}catch(ee){console.error("Error updating task status:",ee)}}async function L(V){try{await $s(V,"archived")}catch(te){console.error("Error archiving task:",te)}}var N=Vh(),W=Oe(N),ie=Oe(W),ae=$e(W,2);{var J=V=>{var te=er(),ee=Rn(te);{var ve=Te=>{var be=Kh(),he=Oe(be);qn(()=>hn(he,`No tasks yet for ${r.listName??""}. Add your first task.`)),Ae(Te,be)},de=Te=>{var be=jh();Eo(be,21,()=>Q(v),he=>he.id,(he,Ne)=>{var Xe=Bh(),Pe=$e(Oe(Xe),2);Pe.__change=()=>F(Q(Ne).id,Q(Ne).status);var tt=$e(Pe,2),Dt=Oe(tt),Bt=$e(tt,2);{var nt=Le=>{var Se=Lh();Se.__click=()=>L(Q(Ne).id),Ae(Le,Se)};Lt(Bt,Le=>{Q(Ne).status==="checked"&&Le(nt)})}qn(()=>{Ks(Xe,"data-id",Q(Ne).id),ld(Pe,Q(Ne).status==="checked"),ad(tt,1,rd(Q(Ne).status==="checked"?"line-through flex-1":"flex-1")),hn(Dt,Q(Ne).text)}),Ae(he,Xe)}),td(be,(he,Ne)=>Nh?.(he,Ne),()=>({items:Q(v),type:`list-${r.listId}`})),Ns("consider",be,A),Ns("finalize",be,x),Ae(Te,be)};Lt(ee,Te=>{a().length===0?Te(ve):Te(de,!1)})}Ae(V,te)},oe=V=>{var te=zh();Ae(V,te)};Lt(ae,V=>{Q(c)&&a()!==void 0?V(J):V(oe,!1)})}var ue=$e(ae,2),me=Oe(ue);{var _e=V=>{var te=$h(),ee=Oe(te);ee.__input=de=>r.onInputChange(de.target.value),ee.__keydown=de=>{de.key==="Enter"?(de.preventDefault(),D()):de.key==="Escape"&&b(de)},cd(ee,de=>ge(m,de),()=>Q(m));var ve=$e(ee,2);ve.__click=D,qn(()=>ud(ee,r.newTaskInput)),Ae(V,te)},le=V=>{var te=Uh();te.__click=k,Ae(V,te)};Lt(me,V=>{Q(g)?V(_e):V(le,!1)})}qn(()=>{Ks(N,"data-list-id",r.listId),hn(ie,r.listName)}),Ae(e,N),Ur(),f()}Zi(["change","click","input","keydown"]);var Gh=Qe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border border-gray-200 max-w-md w-full mx-4"><h3 id="modal-title" class="text-lg font-semibold mb-4"> </h3> <p class="mb-6 text-sm text-gray-600"> </p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete</button></div></div></div>');function Hh(e,r){$r(r,!0);function a(){r.onConfirm()}function u(){r.onCancel()}function f(A){A.target===A.currentTarget&&u()}function c(A){A.key==="Escape"&&u()}var v=er(),g=Rn(v);{var m=A=>{var x=Gh();x.__click=f,x.__keydown=c;var k=Oe(x),b=Oe(k),D=Oe(b),F=$e(b,2),L=Oe(F),N=$e(F,2),W=Oe(N);W.__click=u;var ie=$e(W,2);ie.__click=a,qn(()=>{hn(D,r.title),hn(L,r.message)}),Ae(A,x)};Lt(g,A=>{r.isOpen&&A(m)})}Ae(e,v),Ur()}Zi(["click","keydown"]);var Yh=Qe("<p>No archived tasks</p>"),Zh=Qe('<li class="flex items-center gap-3 mb-2"><span class="line-through"> </span> <span class="text-sm text-gray-500"> </span> <span class="text-sm text-gray-400"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button> <button class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm">Delete</button></li>'),qh=Qe("<ul></ul>"),Qh=Qe('<div class="w-[1056px] mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div> <!>',1);function Xh(e,r){$r(r,!0);const a=()=>Fi(Q(g),"$listsQuery",f),u=()=>Fi(Q(v),"$archivedTasksQuery",f),[f,c]=Mo();let v=je(null),g=je(null),m=je(!1),A=je(null);Zn(()=>{ao(ge(v,Li(()=>bd()),!0),"$archivedTasksQuery",f),ao(ge(g,Li(()=>Hu()),!0),"$listsQuery",f)});function x(oe){if(!a())return"Unknown List";const ue=a().find(me=>me.id===oe);return ue?ue.name:"Unknown List"}function k(oe){return oe?new Date(oe).toLocaleString():"Unknown"}async function b(oe){try{await Ed(oe)}catch(ue){console.error("Error restoring task:",ue)}}function D(oe,ue){ge(A,{id:oe,text:ue},!0),ge(m,!0)}async function F(){if(Q(A))try{await Td(Q(A).id),ge(m,!1),ge(A,null)}catch(oe){console.error("Error deleting task:",oe)}}function L(){ge(m,!1),ge(A,null)}var N=Qh(),W=Rn(N),ie=$e(Oe(W),2);{var ae=oe=>{var ue=er(),me=Rn(ue);{var _e=V=>{var te=Yh();Ae(V,te)},le=V=>{var te=qh();Eo(te,5,u,wu,(ee,ve)=>{var de=Zh(),Te=Oe(de),be=Oe(Te),he=$e(Te,2),Ne=Oe(he),Xe=$e(he,2),Pe=Oe(Xe),tt=$e(Xe,2);tt.__click=()=>b(Q(ve).id);var Dt=$e(tt,2);Dt.__click=()=>D(Q(ve).id,Q(ve).text),qn((Bt,nt)=>{hn(be,Q(ve).text),hn(Ne,`(${Bt??""})`),hn(Pe,`Archived: ${nt??""}`)},[()=>x(Q(ve).listId),()=>k(Q(ve).archivedAt)]),Ae(ee,de)}),Ae(V,te)};Lt(me,V=>{u().length===0?V(_e):V(le,!1)})}Ae(oe,ue)};Lt(ie,oe=>{Q(v)&&u()&&oe(ae)})}var J=$e(W,2);{let oe=Eu(()=>Q(A)?`Are you sure you want to permanently delete "${Q(A).text}"? This action cannot be undone.`:"");Hh(J,{get isOpen(){return Q(m)},title:"Delete Task",get message(){return Q(oe)},onConfirm:F,onCancel:L})}Ae(e,N),Ur(),c()}Zi(["click"]);var Jh=Qe("<p>Loading...</p>"),ev=Qe("<p>No lists found</p>"),tv=Qe('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="w-[1056px] flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="w-[1056px] h-[816px] bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><div class="w-full h-full p-4 overflow-auto"><!></div></div></div> <!></main>');function nv(e,r){$r(r,!0);const a=()=>Fi(c,"$lists",u),[u,f]=Mo();let c=Li(()=>Hu()),v=je(Cn({}));Zn(()=>{if(a()&&Array.isArray(a())&&a().length>0&&Object.keys(Q(v)).length===0){const ae={};for(const J of a())ae[J.id]="";ge(v,ae,!0)}});function g(ae,J){Q(v)[ae]=J}function m(){window.print()}var A=tv(),x=Oe(A),k=Oe(x);k.__click=m;var b=$e(x,2),D=Oe(b),F=Oe(D),L=Oe(F);{var N=ae=>{var J=Jh();Ae(ae,J)},W=ae=>{var J=er(),oe=Rn(J);{var ue=_e=>{var le=ev();Ae(_e,le)},me=_e=>{var le=er(),V=Rn(le);{var te=ee=>{var ve=er(),de=Rn(ve);Eo(de,1,a,wu,(Te,be)=>{{let he=Eu(()=>Q(v)[Q(be).id]||"");Wh(Te,{get listId(){return Q(be).id},get listName(){return Q(be).name},get newTaskInput(){return Q(he)},onInputChange:Ne=>g(Q(be).id,Ne)})}}),Ae(ee,ve)};Lt(V,ee=>{Array.isArray(a())&&ee(te)},!0)}Ae(_e,le)};Lt(oe,_e=>{Array.isArray(a())&&a().length===0?_e(ue):_e(me,!1)},!0)}Ae(ae,J)};Lt(L,ae=>{a()===void 0||a()===null?ae(N):ae(W,!1)})}var ie=$e(b,2);Xh(ie,{}),Ae(e,A),Ur(),f()}Zi(["click"]);const rv=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],iv=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function av(){try{if(await Re.lists.count()>0)return;await Re.lists.bulkAdd(rv),await Re.tasks.bulkAdd(iv),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await av().catch(console.error),Qc(nv,{target:document.getElementById("app")})))();
