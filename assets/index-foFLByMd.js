(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function a(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(l){if(l.ep)return;l.ep=!0;const f=a(l);fetch(l.href,f)}})();const bf="production",te=!bf.toLowerCase().startsWith("prod");var Bu=Array.isArray,wf=Array.prototype.indexOf,is=Array.from,Kn=Object.defineProperty,ir=Object.getOwnPropertyDescriptor,ju=Object.getOwnPropertyDescriptors,Ef=Object.prototype,xf=Array.prototype,as=Object.getPrototypeOf,cu=Object.isExtensible;const na=()=>{};function Tf(e){for(var r=0;r<e.length;r++)e[r]()}function zu(){var e,r,a=new Promise((s,l)=>{e=s,r=l});return{promise:a,resolve:e,reject:r}}const rt=2,os=4,ss=8,kf=1<<24,mn=16,gn=32,cr=64,xa=128,Zt=512,dt=1024,Dt=2048,_n=4096,Ct=8192,hn=16384,us=32768,Ar=65536,ra=1<<17,Vu=1<<18,Fr=1<<19,Df=1<<20,Bn=32768,Mo=1<<21,Ta=1<<22,Mn=1<<23,vn=Symbol("$state"),Af=Symbol("legacy props"),If=Symbol(""),Uu=Symbol("proxy path"),Er=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Sf(){if(te){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function fu(){if(te){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Of(){if(te){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Cf(e){if(te){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Pf(){if(te){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Rf(e){if(te){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function Mf(){if(te){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Lf(e){if(te){const r=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Nf(e){if(te){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Ff(){if(te){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Kf(){if(te){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Bf(){if(te){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function jf(){if(te){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Hu=1,Wu=2,Gu=4,zf=8,Vf=16,Uf=1,Hf=4,Wf=8,Gf=16,Yf=1,qf=2,ut=Symbol(),Zf=Symbol("filename"),Qf="http://www.w3.org/1999/xhtml";var Yu="font-weight: bold",qu="font-weight: normal";function To(e){te?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Yu,qu):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Xf(){te?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Yu,qu):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Zu(e){return e===this.v}function Qu(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Xu(e){return!Qu(e,this.v)}let $f=!1;function en(e,r){return e.label=r,$u(e.v,r),e}function $u(e,r){return e?.[Uu]?.(r),e}function Jf(e){const r=new Error,a=ed();return a.length===0?null:(a.unshift(`
`),Kn(r,"stack",{value:a.join(`
`)}),Kn(r,"name",{value:e}),r)}function ed(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const a=r.split(`
`),s=[];for(let l=0;l<a.length;l++){const f=a[l],v=f.replaceAll("\\","/");if(f.trim()!=="Error"){if(f.includes("validate_each_keys"))return[];v.includes("svelte/src/internal")||v.includes("node_modules/.vite")||s.push(f)}}return s}let xt=null;function Ir(e){xt=e}let ui=null;function ia(e){ui=e}let yi=null;function du(e){yi=e}function Vn(e,r=!1,a){xt={p:xt,i:!1,c:null,e:null,s:e,x:null,l:null},te&&(xt.function=a,yi=a)}function Un(e){var r=xt,a=r.e;if(a!==null){r.e=null;for(var s of a)pl(s)}return r.i=!0,xt=r.p,te&&(yi=xt?.function??null),{}}function Ju(){return!0}let rr=[];function el(){var e=rr;rr=[],Tf(e)}function Kr(e){if(rr.length===0&&!ai){var r=rr;queueMicrotask(()=>{r===rr&&el()})}rr.push(e)}function td(){for(;rr.length>0;)el()}const Lo=new WeakMap;function tl(e){var r=Ce;if(r===null)return Se.f|=Mn,e;if(te&&e instanceof Error&&!Lo.has(e)&&Lo.set(e,nd(e,r)),(r.f&us)===0){if((r.f&xa)===0)throw te&&!r.parent&&e instanceof Error&&nl(e),e;r.b.error(e)}else Sr(e,r)}function Sr(e,r){for(;r!==null;){if((r.f&xa)!==0)try{r.b.error(e);return}catch(a){e=a}r=r.parent}throw te&&e instanceof Error&&nl(e),e}function nd(e,r){const a=ir(e,"message");if(!(a&&!a.configurable)){for(var s=fs?"  ":"	",l=`
${s}in ${r.fn?.name||"<unknown>"}`,f=r.ctx;f!==null;)l+=`
${s}in ${f.function?.[Zf].split("/").pop()}`,f=f.p;return{message:e.message+`
${l}
`,stack:e.stack?.split(`
`).filter(v=>!v.includes("svelte/src/internal")).join(`
`)}}}function nl(e){const r=Lo.get(e);r&&(Kn(e,"message",{value:r.message}),Kn(e,"stack",{value:r.stack}))}const qi=new Set;let Pe=null,$i=null,Ft=null,Lt=[],ka=null,No=!1,ai=!1;class on{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){Lt=[],$i=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of r)this.#o(s,a);this.is_fork||this.#c(),this.is_deferred()?(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects)):($i=this,Pe=null,hu(a.render_effects),hu(a.effects),$i=null,this.#u?.resolve()),Ft=null}#o(r,a){r.f^=dt;for(var s=r.first;s!==null;){var l=s.f,f=(l&(gn|cr))!==0,v=f&&(l&dt)!==0,y=v||(l&Ct)!==0||this.skipped_effects.has(s);if((s.f&xa)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[],block_effects:[]}),!y&&s.fn!==null){f?s.f^=dt:(l&os)!==0?a.effects.push(s):gi(s)&&((s.f&mn)!==0&&a.block_effects.push(s),di(s));var m=s.first;if(m!==null){s=m;continue}}var x=s.parent;for(s=s.next;s===null&&x!==null;)x===a.effect&&(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects),a=a.parent),s=x.next,x=x.parent}}#s(r){for(const a of r)((a.f&Dt)!==0?this.#a:this.#i).push(a),this.#l(a.deps),vt(a,dt)}#l(r){if(r!==null)for(const a of r)(a.f&rt)===0||(a.f&Bn)===0||(a.f^=Bn,this.#l(a.deps))}capture(r,a){this.previous.has(r)||this.previous.set(r,a),(r.f&Mn)===0&&(this.current.set(r,r.v),Ft?.set(r,r.v))}activate(){Pe=this,this.apply()}deactivate(){Pe===this&&(Pe=null,Ft=null)}flush(){if(this.activate(),Lt.length>0){if(rl(),Pe!==null&&Pe!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(qi.size>1){this.previous.clear();var r=Ft,a=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const f of qi){if(f===this){a=!1;continue}const v=[];for(const[m,x]of this.current){if(f.current.has(m))if(a&&x!==f.current.get(m))f.current.set(m,x);else continue;v.push(m)}if(v.length===0)continue;const y=[...f.current.keys()].filter(m=>!this.current.has(m));if(y.length>0){var l=Lt;Lt=[];const m=new Set,x=new Map;for(const w of v)il(w,y,m,x);if(Lt.length>0){Pe=f,f.apply();for(const w of Lt)f.#o(w,s);f.deactivate()}Lt=l}}Pe=null,Ft=r}this.committed=!0,qi.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)vt(r,Dt),ur(r);for(const r of this.#i)vt(r,_n),ur(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=zu()).promise}static ensure(){if(Pe===null){const r=Pe=new on;qi.add(Pe),ai||on.enqueue(()=>{Pe===r&&r.flush()})}return Pe}static enqueue(r){Kr(r)}apply(){}}function rd(e){var r=ai;ai=!0;try{for(var a;;){if(td(),Lt.length===0&&(Pe?.flush(),Lt.length===0))return ka=null,a;rl()}}finally{ai=r}}function rl(){var e=Nn;No=!0;var r=te?new Set:null;try{var a=0;for(ua(!0);Lt.length>0;){var s=on.ensure();if(a++>1e3){if(te){var l=new Map;for(const v of s.current.keys())for(const[y,m]of v.updated??[]){var f=l.get(y);f||(f={error:m.error,count:0},l.set(y,f)),f.count+=m.count}for(const v of l.values())v.error&&console.error(v.error)}id()}if(s.process(Lt),Ln.clear(),te)for(const v of s.current.keys())r.add(v)}}finally{if(No=!1,ua(e),ka=null,te)for(const v of r)v.updated=null}}function id(){try{Mf()}catch(e){te&&Kn(e,"stack",{value:""}),Sr(e,ka)}}let dn=null;function hu(e){var r=e.length;if(r!==0){for(var a=0;a<r;){var s=e[a++];if((s.f&(hn|Ct))===0&&gi(s)&&(dn=new Set,di(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?_l(s):s.fn=null),dn?.size>0)){Ln.clear();for(const l of dn){if((l.f&(hn|Ct))!==0)continue;const f=[l];let v=l.parent;for(;v!==null;)dn.has(v)&&(dn.delete(v),f.push(v)),v=v.parent;for(let y=f.length-1;y>=0;y--){const m=f[y];(m.f&(hn|Ct))===0&&di(m)}}dn.clear()}}dn=null}}function il(e,r,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const l of e.reactions){const f=l.f;(f&rt)!==0?il(l,r,a,s):(f&(Ta|mn))!==0&&(f&Dt)===0&&al(l,r,s)&&(vt(l,Dt),ur(l))}}function al(e,r,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const l of e.deps){if(r.includes(l))return!0;if((l.f&rt)!==0&&al(l,r,a))return a.set(l,!0),!0}return a.set(e,!1),!1}function ur(e){for(var r=ka=e;r.parent!==null;){r=r.parent;var a=r.f;if(No&&r===Ce&&(a&mn)!==0&&(a&Vu)===0)return;if((a&(cr|gn))!==0){if((a&dt)===0)return;r.f^=dt}}Lt.push(r)}function ad(e){let r=0,a=lr(0),s;return te&&en(a,"createSubscriber version"),()=>{ci()&&(b(a),Ia(()=>(r===0&&(s=Br(()=>e(()=>oi(a)))),r+=1,()=>{Kr(()=>{r-=1,r===0&&(s?.(),s=void 0,oi(a))})})))}}var od=Ar|Fr|xa;function sd(e,r,a){new ud(e,r,a)}class ud{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#_=ad(()=>(this.#d=lr(this.#f),te&&en(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,a,s){this.#t=r,this.#n=a,this.#u=s,this.parent=Ce.b,this.#e=!!this.#n.pending,this.#a=hs(()=>{Ce.b=this;{var l=this.#m();try{this.#i=Nt(()=>s(l))}catch(f){this.error(f)}this.#h>0?this.#y():this.#e=!1}return()=>{this.#c?.remove()}},od)}#b(){try{this.#i=Nt(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=Nt(()=>r(this.#t)),on.enqueue(()=>{var a=this.#m();this.#i=this.#p(()=>(on.ensure(),Nt(()=>this.#u(a)))),this.#h>0?this.#y():(Tr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#m(){var r=this.#t;return this.#e&&(this.#c=jn(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var a=Ce,s=Se,l=xt;Yt(this.#a),Et(this.#a),Ir(this.#a.ctx);try{return r()}catch(f){return tl(f),null}finally{Yt(a),Et(s),Ir(l)}}#y(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),El(this.#i,this.#l)),this.#o===null&&(this.#o=Nt(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#e=!1,this.#o&&Tr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&Cr(this.#d,this.#f)}get_effect_pending(){return this.#_(),b(this.#d)}error(r){var a=this.#n.onerror;let s=this.#n.failed;if(this.#v||!a&&!s)throw r;this.#i&&(Tt(this.#i),this.#i=null),this.#o&&(Tt(this.#o),this.#o=null),this.#s&&(Tt(this.#s),this.#s=null);var l=!1,f=!1;const v=()=>{if(l){Xf();return}l=!0,f&&jf(),on.ensure(),this.#f=0,this.#s!==null&&Tr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,Nt(()=>this.#u(this.#t)))),this.#h>0?this.#y():this.#e=!1};var y=Se;try{Et(null),f=!0,a?.(r,v),f=!1}catch(m){Sr(m,this.#a&&this.#a.parent)}finally{Et(y)}s&&Kr(()=>{this.#s=this.#p(()=>{on.ensure(),this.#v=!0;try{return Nt(()=>{s(this.#t,()=>r,()=>v)})}catch(m){return Sr(m,this.#a.parent),null}finally{this.#v=!1}})})}}function ol(e,r){return r}function ld(e,r,a){for(var s=[],l=r.length,f=0;f<l;f++)vs(r[f].e,s,!0);bl(s,()=>{var v=s.length===0&&a!==null;if(v){var y=a,m=y.parentNode;xd(m),m.append(y),e.items.clear(),tn(e,r[0].prev,r[l-1].next)}for(var x=0;x<l;x++){var w=r[x];v||(e.items.delete(w.k),tn(e,w.prev,w.next)),Tt(w.e,!v)}e.first===r[0]&&(e.first=r[0].prev)})}function aa(e,r,a,s,l,f=null){var v=e,y=new Map,m=null,x=(r&Gu)!==0,w=(r&Hu)!==0,A=(r&Wu)!==0;if(x){var g=e;v=g.appendChild(jn())}var k=null,P=sl(()=>{var Z=a();return Bu(Z)?Z:Z==null?[]:is(Z)}),L,R=!0;function j(){cd(J,L,v,r,s),k!==null&&(L.length===0?(k.fragment?(v.before(k.fragment),k.fragment=null):ps(k.effect),q.first=k.effect):Tr(k.effect,()=>{k=null}))}var q=hs(()=>{L=b(P);for(var Z=L.length,oe=new Set,ce=Pe,Ee=null,xe=vl(),Te=0;Te<Z;Te+=1){var he=L[Te],we=s(he,Te),ke=R?null:y.get(we);ke?(w&&Cr(ke.v,he),A?Cr(ke.i,Te):ke.i=Te,xe&&ce.skipped_effects.delete(ke.e)):(ke=fd(R?v:null,Ee,he,we,Te,l,r,a),R&&(ke.o=!0,Ee===null?m=ke:Ee.next=ke,Ee=ke),y.set(we,ke)),oe.add(we)}if(Z===0&&f&&!k)if(R)k={fragment:null,effect:Nt(()=>f(v))};else{var Ye=document.createDocumentFragment(),qe=jn();Ye.append(qe),k={fragment:Ye,effect:Nt(()=>f(qe))}}if(!R)if(xe){for(const[gt,it]of y)oe.has(gt)||ce.skipped_effects.add(it.e);ce.oncommit(j),ce.ondiscard(()=>{})}else j();b(P)}),J={effect:q,items:y,first:m};R=!1}function cd(e,r,a,s,l){var f=(s&zf)!==0,v=r.length,y=e.items,m=e.first,x,w=null,A,g=[],k=[],P,L,R,j;if(f)for(j=0;j<v;j+=1)P=r[j],L=l(P,j),R=y.get(L),R.o&&(R.a?.measure(),(A??=new Set).add(R));for(j=0;j<v;j+=1){if(P=r[j],L=l(P,j),R=y.get(L),e.first??=R,!R.o){R.o=!0;var q=w?w.next:m;tn(e,w,R),tn(e,R,q),ko(R,q,a),w=R,g=[],k=[],m=w.next;continue}if((R.e.f&Ct)!==0&&(ps(R.e),f&&(R.a?.unfix(),(A??=new Set).delete(R))),R!==m){if(x!==void 0&&x.has(R)){if(g.length<k.length){var J=k[0],Z;w=J.prev;var oe=g[0],ce=g[g.length-1];for(Z=0;Z<g.length;Z+=1)ko(g[Z],J,a);for(Z=0;Z<k.length;Z+=1)x.delete(k[Z]);tn(e,oe.prev,ce.next),tn(e,w,oe),tn(e,ce,J),m=J,w=ce,j-=1,g=[],k=[]}else x.delete(R),ko(R,m,a),tn(e,R.prev,R.next),tn(e,R,w===null?e.first:w.next),tn(e,w,R),w=R;continue}for(g=[],k=[];m!==null&&m.k!==L;)(m.e.f&Ct)===0&&(x??=new Set).add(m),k.push(m),m=m.next;if(m===null)continue;R=m}g.push(R),w=R,m=R.next}if(m!==null||x!==void 0){for(var Ee=x===void 0?[]:is(x);m!==null;)(m.e.f&Ct)===0&&Ee.push(m),m=m.next;var xe=Ee.length;if(xe>0){var Te=(s&Gu)!==0&&v===0?a:null;if(f){for(j=0;j<xe;j+=1)Ee[j].a?.measure();for(j=0;j<xe;j+=1)Ee[j].a?.fix()}ld(e,Ee,Te)}}f&&Kr(()=>{if(A!==void 0)for(R of A)R.a?.apply()})}function fd(e,r,a,s,l,f,v,y){var m=(v&Hu)!==0,x=(v&Vf)===0,w=m?x?ll(a,!1,!1):lr(a):a,A=(v&Wu)===0?l:lr(l);te&&m&&(w.trace=()=>{var P=typeof A=="number"?l:A.v;y()[P]});var g={i:A,v:w,k:s,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var k=document.createDocumentFragment();k.append(e=jn())}return g.e=Nt(()=>f(e,w,A,y)),r!==null&&(r.next=g),g}finally{}}function ko(e,r,a){for(var s=e.next?e.next.e.nodes_start:a,l=r?r.e.nodes_start:a,f=e.e.nodes_start;f!==null&&f!==s;){var v=mi(f);l.before(f),f=v}}function tn(e,r,a){r===null?(e.first=a,e.effect.first=a&&a.e):(r.e===e.effect.last&&a!==null&&(e.effect.last=a.e),r.e.next&&(r.e.next.prev=null),r.next=a,r.e.next=a&&a.e),a===null?e.effect.last=r&&r.e:(a.e===e.effect.last&&r===null&&(e.effect.last=a.e.prev),a.e.prev&&(a.e.prev.next=null),a.prev=r,a.e.prev=r&&r.e)}function dd(e,r,a,s){const l=Da;if(a.length===0&&e.length===0){s(r.map(l));return}var f=Pe,v=Ce,y=hd();function m(){Promise.all(a.map(x=>pd(x))).then(x=>{y();try{s([...r.map(l),...x])}catch(w){(v.f&hn)===0&&Sr(w,v)}f?.deactivate(),oa()}).catch(x=>{Sr(x,v)})}e.length>0?Promise.all(e).then(()=>{y();try{return m()}finally{f?.deactivate(),oa()}}):m()}function hd(){var e=Ce,r=Se,a=xt,s=Pe;if(te)var l=ui;return function(v=!0){Yt(e),Et(r),Ir(a),v&&s?.activate(),te&&ia(l)}}function oa(){Yt(null),Et(null),Ir(null),te&&ia(null)}const vd=new Set;function Da(e){var r=rt|Dt,a=Se!==null&&(Se.f&rt)!==0?Se:null;return Ce!==null&&(Ce.f|=Fr),{ctx:xt,deps:null,effects:null,equals:Zu,f:r,fn:e,reactions:null,rv:0,v:ut,wv:0,parent:a??Ce,ac:null}}function pd(e,r){let a=Ce;a===null&&Sf();var s=a.b,l=void 0,f=lr(ut),v=!Se,y=new Map;return Sd(()=>{var m=zu();l=m.promise;try{Promise.resolve(e()).then(m.resolve,m.reject).then(()=>{x===Pe&&x.committed&&x.deactivate(),oa()})}catch(g){m.reject(g),oa()}var x=Pe;if(v){var w=!s.is_pending();s.update_pending_count(1),x.increment(w),y.get(x)?.reject(Er),y.delete(x),y.set(x,m)}const A=(g,k=void 0)=>{if(x.activate(),k)k!==Er&&(f.f|=Mn,Cr(f,k));else{(f.f&Mn)!==0&&(f.f^=Mn),Cr(f,g);for(const[P,L]of y){if(y.delete(P),P===x)break;L.reject(Er)}}v&&(s.update_pending_count(-1),x.decrement(w))};m.promise.then(A,g=>A(null,g||"unknown"))}),ds(()=>{for(const m of y.values())m.reject(Er)}),te&&(f.f|=Ta),new Promise(m=>{function x(w){function A(){w===l?m(f):x(l)}w.then(A,A)}x(l)})}function li(e){const r=Da(e);return xl(r),r}function sl(e){const r=Da(e);return r.equals=Xu,r}function Fo(e){var r=e.effects;if(r!==null){e.effects=null;for(var a=0;a<r.length;a+=1)Tt(r[a])}}let Do=[];function yd(e){for(var r=e.parent;r!==null;){if((r.f&rt)===0)return(r.f&hn)===0?r:null;r=r.parent}return null}function ls(e){var r,a=Ce;if(Yt(yd(e)),te){let s=Or;vu(new Set);try{Do.includes(e)&&Of(),Do.push(e),e.f&=~Bn,Fo(e),r=Ko(e)}finally{Yt(a),vu(s),Do.pop()}}else try{e.f&=~Bn,Fo(e),r=Ko(e)}finally{Yt(a)}return r}function ul(e){var r=ls(e);if(e.equals(r)||(Pe?.is_fork||(e.v=r),e.wv=kl()),!fr)if(Ft!==null)(ci()||Pe?.is_fork)&&Ft.set(e,r);else{var a=(e.f&Zt)===0?_n:dt;vt(e,a)}}let Or=new Set;const Ln=new Map;function vu(e){Or=e}let cs=!1;function md(){cs=!0}function lr(e,r){var a={f:0,v:e,reactions:null,equals:Zu,rv:0,wv:0};return a}function fe(e,r){const a=lr(e);return xl(a),a}function ll(e,r=!1,a=!0){const s=lr(e);return r||(s.equals=Xu),s}function C(e,r,a=!1){Se!==null&&(!sn||(Se.f&ra)!==0)&&Ju()&&(Se.f&(rt|mn|Ta|ra))!==0&&!pn?.includes(e)&&Bf();let s=a?Wt(r):r;return te&&$u(s,e.label),Cr(e,s)}function Cr(e,r){if(!e.equals(r)){var a=e.v;fr?Ln.set(e,r):Ln.set(e,a),e.v=r;var s=on.ensure();if(s.capture(e,a),te){if(Ce!==null){e.updated??=new Map;const l=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:l}),l>5){const f=Jf("updated at");if(f!==null){let v=e.updated.get(f.stack);v||(v={error:f,count:0},e.updated.set(f.stack,v)),v.count++}}}Ce!==null&&(e.set_during_effect=!0)}(e.f&rt)!==0&&((e.f&Dt)!==0&&ls(e),vt(e,(e.f&Zt)!==0?dt:_n)),e.wv=kl(),fl(e,Dt),Ce!==null&&(Ce.f&dt)!==0&&(Ce.f&(gn|cr))===0&&(Rt===null?Pd([e]):Rt.push(e)),!s.is_fork&&Or.size>0&&!cs&&cl()}return r}function cl(){cs=!1;var e=Nn;ua(!0);const r=Array.from(Or);try{for(const a of r)(a.f&dt)!==0&&vt(a,_n),gi(a)&&di(a)}finally{ua(e)}Or.clear()}function oi(e){C(e,e.v+1)}function fl(e,r){var a=e.reactions;if(a!==null)for(var s=a.length,l=0;l<s;l++){var f=a[l],v=f.f;if(te&&(v&ra)!==0){Or.add(f);continue}var y=(v&Dt)===0;if(y&&vt(f,r),(v&rt)!==0){var m=f;Ft?.delete(m),(v&Bn)===0&&(v&Zt&&(f.f|=Bn),fl(m,_n))}else y&&((v&mn)!==0&&dn!==null&&dn.add(f),ur(f))}}const gd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Wt(e){if(typeof e!="object"||e===null||vn in e)return e;const r=as(e);if(r!==Ef&&r!==xf)return e;var a=new Map,s=Bu(e),l=fe(0),f=ar,v=w=>{if(ar===f)return w();var A=Se,g=ar;Et(null),gu(f);var k=w();return Et(A),gu(g),k};s&&(a.set("length",fe(e.length)),te&&(e=bd(e)));var y="";let m=!1;function x(w){if(!m){m=!0,y=w,en(l,`${y} version`);for(const[A,g]of a)en(g,er(y,A));m=!1}}return new Proxy(e,{defineProperty(w,A,g){(!("value"in g)||g.configurable===!1||g.enumerable===!1||g.writable===!1)&&Ff();var k=a.get(A);return k===void 0?k=v(()=>{var P=fe(g.value);return a.set(A,P),te&&typeof A=="string"&&en(P,er(y,A)),P}):C(k,g.value,!0),!0},deleteProperty(w,A){var g=a.get(A);if(g===void 0){if(A in w){const k=v(()=>fe(ut));a.set(A,k),oi(l),te&&en(k,er(y,A))}}else C(g,ut),oi(l);return!0},get(w,A,g){if(A===vn)return e;if(te&&A===Uu)return x;var k=a.get(A),P=A in w;if(k===void 0&&(!P||ir(w,A)?.writable)&&(k=v(()=>{var R=Wt(P?w[A]:ut),j=fe(R);return te&&en(j,er(y,A)),j}),a.set(A,k)),k!==void 0){var L=b(k);return L===ut?void 0:L}return Reflect.get(w,A,g)},getOwnPropertyDescriptor(w,A){var g=Reflect.getOwnPropertyDescriptor(w,A);if(g&&"value"in g){var k=a.get(A);k&&(g.value=b(k))}else if(g===void 0){var P=a.get(A),L=P?.v;if(P!==void 0&&L!==ut)return{enumerable:!0,configurable:!0,value:L,writable:!0}}return g},has(w,A){if(A===vn)return!0;var g=a.get(A),k=g!==void 0&&g.v!==ut||Reflect.has(w,A);if(g!==void 0||Ce!==null&&(!k||ir(w,A)?.writable)){g===void 0&&(g=v(()=>{var L=k?Wt(w[A]):ut,R=fe(L);return te&&en(R,er(y,A)),R}),a.set(A,g));var P=b(g);if(P===ut)return!1}return k},set(w,A,g,k){var P=a.get(A),L=A in w;if(s&&A==="length")for(var R=g;R<P.v;R+=1){var j=a.get(R+"");j!==void 0?C(j,ut):R in w&&(j=v(()=>fe(ut)),a.set(R+"",j),te&&en(j,er(y,R)))}if(P===void 0)(!L||ir(w,A)?.writable)&&(P=v(()=>fe(void 0)),te&&en(P,er(y,A)),C(P,Wt(g)),a.set(A,P));else{L=P.v!==ut;var q=v(()=>Wt(g));C(P,q)}var J=Reflect.getOwnPropertyDescriptor(w,A);if(J?.set&&J.set.call(k,g),!L){if(s&&typeof A=="string"){var Z=a.get("length"),oe=Number(A);Number.isInteger(oe)&&oe>=Z.v&&C(Z,oe+1)}oi(l)}return!0},ownKeys(w){b(l);var A=Reflect.ownKeys(w).filter(P=>{var L=a.get(P);return L===void 0||L.v!==ut});for(var[g,k]of a)k.v!==ut&&!(g in w)&&A.push(g);return A},setPrototypeOf(){Kf()}})}function er(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:gd.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function Ao(e){try{if(e!==null&&typeof e=="object"&&vn in e)return e[vn]}catch{}return e}const _d=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function bd(e){return new Proxy(e,{get(r,a,s){var l=Reflect.get(r,a,s);return _d.has(a)?function(...f){md();var v=l.apply(this,f);return cl(),v}:l}})}function wd(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:a,lastIndexOf:s,includes:l}=e;e.indexOf=function(f,v){const y=a.call(this,f,v);if(y===-1){for(let m=v??0;m<this.length;m+=1)if(Ao(this[m])===f){To("array.indexOf(...)");break}}return y},e.lastIndexOf=function(f,v){const y=s.call(this,f,v??this.length-1);if(y===-1){for(let m=0;m<=(v??this.length-1);m+=1)if(Ao(this[m])===f){To("array.lastIndexOf(...)");break}}return y},e.includes=function(f,v){const y=l.call(this,f,v);if(!y){for(let m=0;m<this.length;m+=1)if(Ao(this[m])===f){To("array.includes(...)");break}}return y},Array.__svelte_cleanup=()=>{e.indexOf=a,e.lastIndexOf=s,e.includes=l}}var pu,fs,dl,hl;function Ed(){if(pu===void 0){pu=window,fs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,a=Text.prototype;dl=ir(r,"firstChild").get,hl=ir(r,"nextSibling").get,cu(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),cu(a)&&(a.__t=void 0),te&&(e.__svelte_meta=null,wd())}}function jn(e=""){return document.createTextNode(e)}function sa(e){return dl.call(e)}function mi(e){return hl.call(e)}function me(e,r){return sa(e)}function Bt(e,r=!1){{var a=sa(e);return a instanceof Comment&&a.data===""?mi(a):a}}function ge(e,r=1,a=!1){let s=e;for(;r--;)s=mi(s);return s}function xd(e){e.textContent=""}function vl(){return!1}let yu=!1;function Td(){yu||(yu=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function Aa(e){var r=Se,a=Ce;Et(null),Yt(null);try{return e()}finally{Et(r),Yt(a)}}function kd(e,r,a,s=a){e.addEventListener(r,()=>Aa(a));const l=e.__on_r;l?e.__on_r=()=>{l(),s(!0)}:e.__on_r=()=>s(!0),Td()}function Dd(e){Ce===null&&(Se===null&&Rf(e),Pf()),fr&&Cf(e)}function Ad(e,r){var a=r.last;a===null?r.last=r.first=e:(a.next=e,e.prev=a,r.last=e)}function bn(e,r,a){var s=Ce;if(te)for(;s!==null&&(s.f&ra)!==0;)s=s.parent;s!==null&&(s.f&Ct)!==0&&(e|=Ct);var l={ctx:xt,deps:null,nodes_start:null,nodes_end:null,f:e|Dt|Zt,first:null,fn:r,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(te&&(l.component_function=yi),a)try{di(l),l.f|=us}catch(y){throw Tt(l),y}else r!==null&&ur(l);var f=l;if(a&&f.deps===null&&f.teardown===null&&f.nodes_start===null&&f.first===f.last&&(f.f&Fr)===0&&(f=f.first,(e&mn)!==0&&(e&Ar)!==0&&f!==null&&(f.f|=Ar)),f!==null&&(f.parent=s,s!==null&&Ad(f,s),Se!==null&&(Se.f&rt)!==0&&(e&cr)===0)){var v=Se;(v.effects??=[]).push(f)}return l}function ci(){return Se!==null&&!sn}function ds(e){const r=bn(ss,null,!1);return vt(r,dt),r.teardown=e,r}function Ge(e){Dd("$effect"),te&&Kn(e,"name",{value:"$effect"});var r=Ce.f,a=!Se&&(r&gn)!==0&&(r&us)===0;if(a){var s=xt;(s.e??=[]).push(e)}else return pl(e)}function pl(e){return bn(os|Df,e,!1)}function Id(e){on.ensure();const r=bn(cr|Fr,e,!0);return(a={})=>new Promise(s=>{a.outro?Tr(r,()=>{Tt(r),s(void 0)}):(Tt(r),s(void 0))})}function yl(e){return bn(os,e,!1)}function Sd(e){return bn(Ta|Fr,e,!0)}function Ia(e,r=0){return bn(ss|r,e,!0)}function ht(e,r=[],a=[],s=[]){dd(s,r,a,l=>{bn(ss,()=>e(...l.map(b)),!0)})}function hs(e,r=0){var a=bn(mn|r,e,!0);return te&&(a.dev_stack=ui),a}function Nt(e){return bn(gn|Fr,e,!0)}function ml(e){var r=e.teardown;if(r!==null){const a=fr,s=Se;mu(!0),Et(null);try{r.call(null)}finally{mu(a),Et(s)}}}function gl(e,r=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const l=a.ac;l!==null&&Aa(()=>{l.abort(Er)});var s=a.next;(a.f&cr)!==0?a.parent=null:Tt(a,r),a=s}}function Od(e){for(var r=e.first;r!==null;){var a=r.next;(r.f&gn)===0&&Tt(r),r=a}}function Tt(e,r=!0){var a=!1;(r||(e.f&Vu)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Cd(e.nodes_start,e.nodes_end),a=!0),gl(e,r&&!a),la(e,0),vt(e,hn);var s=e.transitions;if(s!==null)for(const f of s)f.stop();ml(e);var l=e.parent;l!==null&&l.first!==null&&_l(e),te&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Cd(e,r){for(;e!==null;){var a=e===r?null:mi(e);e.remove(),e=a}}function _l(e){var r=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),r!==null&&(r.first===e&&(r.first=s),r.last===e&&(r.last=a))}function Tr(e,r,a=!0){var s=[];vs(e,s,!0),bl(s,()=>{a&&Tt(e),r&&r()})}function bl(e,r){var a=e.length;if(a>0){var s=()=>--a||r();for(var l of e)l.out(s)}else r()}function vs(e,r,a){if((e.f&Ct)===0){if(e.f^=Ct,e.transitions!==null)for(const v of e.transitions)(v.is_global||a)&&r.push(v);for(var s=e.first;s!==null;){var l=s.next,f=(s.f&Ar)!==0||(s.f&gn)!==0&&(e.f&mn)!==0;vs(s,r,f?a:!1),s=l}}}function ps(e){wl(e,!0)}function wl(e,r){if((e.f&Ct)!==0){e.f^=Ct,(e.f&dt)===0&&(vt(e,Dt),ur(e));for(var a=e.first;a!==null;){var s=a.next,l=(a.f&Ar)!==0||(a.f&gn)!==0;wl(a,l?r:!1),a=s}if(e.transitions!==null)for(const f of e.transitions)(f.is_global||r)&&f.in()}}function El(e,r){for(var a=e.nodes_start,s=e.nodes_end;a!==null;){var l=a===s?null:mi(a);r.append(a),a=l}}let Nn=!1;function ua(e){Nn=e}let fr=!1;function mu(e){fr=e}let Se=null,sn=!1;function Et(e){Se=e}let Ce=null;function Yt(e){Ce=e}let pn=null;function xl(e){Se!==null&&(pn===null?pn=[e]:pn.push(e))}let yt=null,It=0,Rt=null;function Pd(e){Rt=e}let Tl=1,fi=0,ar=fi;function gu(e){ar=e}function kl(){return++Tl}function gi(e){var r=e.f;if((r&Dt)!==0)return!0;if(r&rt&&(e.f&=~Bn),(r&_n)!==0){var a=e.deps;if(a!==null)for(var s=a.length,l=0;l<s;l++){var f=a[l];if(gi(f)&&ul(f),f.wv>e.wv)return!0}(r&Zt)!==0&&Ft===null&&vt(e,dt)}return!1}function Dl(e,r,a=!0){var s=e.reactions;if(s!==null&&!pn?.includes(e))for(var l=0;l<s.length;l++){var f=s[l];(f.f&rt)!==0?Dl(f,r,!1):r===f&&(a?vt(f,Dt):(f.f&dt)!==0&&vt(f,_n),ur(f))}}function Ko(e){var r=yt,a=It,s=Rt,l=Se,f=pn,v=xt,y=sn,m=ar,x=e.f;yt=null,It=0,Rt=null,Se=(x&(gn|cr))===0?e:null,pn=null,Ir(e.ctx),sn=!1,ar=++fi,e.ac!==null&&(Aa(()=>{e.ac.abort(Er)}),e.ac=null);try{e.f|=Mo;var w=e.fn,A=w(),g=e.deps;if(yt!==null){var k;if(la(e,It),g!==null&&It>0)for(g.length=It+yt.length,k=0;k<yt.length;k++)g[It+k]=yt[k];else e.deps=g=yt;if(Nn&&ci()&&(e.f&Zt)!==0)for(k=It;k<g.length;k++)(g[k].reactions??=[]).push(e)}else g!==null&&It<g.length&&(la(e,It),g.length=It);if(Ju()&&Rt!==null&&!sn&&g!==null&&(e.f&(rt|_n|Dt))===0)for(k=0;k<Rt.length;k++)Dl(Rt[k],e);return l!==null&&l!==e&&(fi++,Rt!==null&&(s===null?s=Rt:s.push(...Rt))),(e.f&Mn)!==0&&(e.f^=Mn),A}catch(P){return tl(P)}finally{e.f^=Mo,yt=r,It=a,Rt=s,Se=l,pn=f,Ir(v),sn=y,ar=m}}function Rd(e,r){let a=r.reactions;if(a!==null){var s=wf.call(a,e);if(s!==-1){var l=a.length-1;l===0?a=r.reactions=null:(a[s]=a[l],a.pop())}}a===null&&(r.f&rt)!==0&&(yt===null||!yt.includes(r))&&(vt(r,_n),(r.f&Zt)!==0&&(r.f^=Zt,r.f&=~Bn),Fo(r),la(r,0))}function la(e,r){var a=e.deps;if(a!==null)for(var s=r;s<a.length;s++)Rd(e,a[s])}function di(e){var r=e.f;if((r&hn)===0){vt(e,dt);var a=Ce,s=Nn;if(Ce=e,Nn=!0,te){var l=yi;du(e.component_function);var f=ui;ia(e.dev_stack??ui)}try{(r&(mn|kf))!==0?Od(e):gl(e),ml(e);var v=Ko(e);e.teardown=typeof v=="function"?v:null,e.wv=Tl;var y;te&&$f&&(e.f&Dt)!==0&&e.deps}finally{Nn=s,Ce=a,te&&(du(l),ia(f))}}}async function ca(){await Promise.resolve(),rd()}function b(e){var r=e.f,a=(r&rt)!==0;if(Se!==null&&!sn){var s=Ce!==null&&(Ce.f&hn)!==0;if(!s&&!pn?.includes(e)){var l=Se.deps;if((Se.f&Mo)!==0)e.rv<fi&&(e.rv=fi,yt===null&&l!==null&&l[It]===e?It++:yt===null?yt=[e]:yt.includes(e)||yt.push(e));else{(Se.deps??=[]).push(e);var f=e.reactions;f===null?e.reactions=[Se]:f.includes(Se)||f.push(Se)}}}if(te&&vd.delete(e),fr){if(Ln.has(e))return Ln.get(e);if(a){var v=e,y=v.v;return((v.f&dt)===0&&v.reactions!==null||Il(v))&&(y=ls(v)),Ln.set(v,y),y}}else a&&(!Ft?.has(e)||Pe?.is_fork&&!ci())&&(v=e,gi(v)&&ul(v),Nn&&ci()&&(v.f&Zt)===0&&Al(v));if(Ft?.has(e))return Ft.get(e);if((e.f&Mn)!==0)throw e.v;return e.v}function Al(e){if(e.deps!==null){e.f^=Zt;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&rt)!==0&&(r.f&Zt)===0&&Al(r)}}function Il(e){if(e.v===ut)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(Ln.has(r)||(r.f&rt)!==0&&Il(r))return!0;return!1}function Br(e){var r=sn;try{return sn=!0,e()}finally{sn=r}}const Md=-7169;function vt(e,r){e.f=e.f&Md|r}function Ld(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(vn in e)Bo(e);else if(!Array.isArray(e))for(let r in e){const a=e[r];typeof a=="object"&&a&&vn in a&&Bo(a)}}}function Bo(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Bo(e[s],r)}catch{}const a=as(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=ju(a);for(let l in s){const f=s[l].get;if(f)try{f.call(e)}catch{}}}}}const Nd=["touchstart","touchmove"];function Fd(e){return Nd.includes(e)}const Sl=new Set,jo=new Set;function Kd(e,r,a,s={}){function l(f){if(s.capture||ni.call(r,f),!f.cancelBubble)return Aa(()=>a?.call(this,f))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Kr(()=>{r.addEventListener(e,l,s)}):r.addEventListener(e,l,s),l}function fa(e,r,a,s,l){var f={capture:s,passive:l},v=Kd(e,r,a,f);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&ds(()=>{r.removeEventListener(e,v,f)})}function dr(e){for(var r=0;r<e.length;r++)Sl.add(e[r]);for(var a of jo)a(e)}let _u=null;function ni(e){var r=this,a=r.ownerDocument,s=e.type,l=e.composedPath?.()||[],f=l[0]||e.target;_u=e;var v=0,y=_u===e&&e.__root;if(y){var m=l.indexOf(y);if(m!==-1&&(r===document||r===window)){e.__root=r;return}var x=l.indexOf(r);if(x===-1)return;m<=x&&(v=m)}if(f=l[v]||e.target,f!==r){Kn(e,"currentTarget",{configurable:!0,get(){return f||a}});var w=Se,A=Ce;Et(null),Yt(null);try{for(var g,k=[];f!==null;){var P=f.assignedSlot||f.parentNode||f.host||null;try{var L=f["__"+s];L!=null&&(!f.disabled||e.target===f)&&L.call(f,e)}catch(R){g?k.push(R):g=R}if(e.cancelBubble||P===r||P===null)break;f=P}if(g){for(let R of k)queueMicrotask(()=>{throw R});throw g}}finally{e.__root=r,delete e.currentTarget,Et(w),Yt(A)}}}function Bd(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function zo(e,r){var a=Ce;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=r)}function Ne(e,r){var a=(r&Yf)!==0,s=(r&qf)!==0,l,f=!e.startsWith("<!>");return()=>{l===void 0&&(l=Bd(f?e:"<!>"+e),a||(l=sa(l)));var v=s||fs?document.importNode(l,!0):l.cloneNode(!0);if(a){var y=sa(v),m=v.lastChild;zo(y,m)}else zo(v,v);return v}}function Pr(){var e=document.createDocumentFragment(),r=document.createComment(""),a=jn();return e.append(r,a),zo(r,a),e}function Oe(e,r){e!==null&&e.before(r)}function yn(e,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function jd(e,r){return zd(e,r)}const wr=new Map;function zd(e,{target:r,anchor:a,props:s={},events:l,context:f,intro:v=!0}){Ed();var y=new Set,m=A=>{for(var g=0;g<A.length;g++){var k=A[g];if(!y.has(k)){y.add(k);var P=Fd(k);r.addEventListener(k,ni,{passive:P});var L=wr.get(k);L===void 0?(document.addEventListener(k,ni,{passive:P}),wr.set(k,1)):wr.set(k,L+1)}}};m(is(Sl)),jo.add(m);var x=void 0,w=Id(()=>{var A=a??r.appendChild(jn());return sd(A,{pending:()=>{}},g=>{if(f){Vn({});var k=xt;k.c=f}l&&(s.$$events=l),x=e(g,s)||{},f&&Un()}),()=>{for(var g of y){r.removeEventListener(g,ni);var k=wr.get(g);--k===0?(document.removeEventListener(g,ni),wr.delete(g)):wr.set(g,k)}jo.delete(m),A!==a&&A.parentNode?.removeChild(A)}});return Vd.set(x,w),x}let Vd=new WeakMap;class Ud{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,a=!0){this.anchor=r,this.#u=a}#a=()=>{var r=Pe;if(this.#e.has(r)){var a=this.#e.get(r),s=this.#t.get(a);if(s)ps(s),this.#n.delete(a);else{var l=this.#r.get(a);l&&(this.#t.set(a,l.effect),this.#r.delete(a),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[f,v]of this.#e){if(this.#e.delete(f),f===r)break;const y=this.#r.get(v);y&&(Tt(y.effect),this.#r.delete(v))}for(const[f,v]of this.#t){if(f===a||this.#n.has(f))continue;const y=()=>{if(Array.from(this.#e.values()).includes(f)){var x=document.createDocumentFragment();El(v,x),x.append(jn()),this.#r.set(f,{effect:v,fragment:x})}else Tt(v);this.#n.delete(f),this.#t.delete(f)};this.#u||!s?(this.#n.add(f),Tr(v,y,!1)):y()}}};#i=r=>{this.#e.delete(r);const a=Array.from(this.#e.values());for(const[s,l]of this.#r)a.includes(s)||(Tt(l.effect),this.#r.delete(s))};ensure(r,a){var s=Pe,l=vl();if(a&&!this.#t.has(r)&&!this.#r.has(r))if(l){var f=document.createDocumentFragment(),v=jn();f.append(v),this.#r.set(r,{effect:Nt(()=>a(v)),fragment:f})}else this.#t.set(r,Nt(()=>a(this.anchor)));if(this.#e.set(s,r),l){for(const[y,m]of this.#t)y===r?s.skipped_effects.delete(m):s.skipped_effects.add(m);for(const[y,m]of this.#r)y===r?s.skipped_effects.delete(m.effect):s.skipped_effects.add(m.effect);s.oncommit(this.#a),s.ondiscard(this.#i)}else this.#a()}}function ft(e,r,a=!1){var s=new Ud(e),l=a?Ar:0;function f(v,y){s.ensure(v,y)}hs(()=>{var v=!1;r((y,m=!0)=>{v=!0,f(m,y)}),v||f(!1,null)},l)}function Ol(e,r,a){yl(()=>{var s=Br(()=>r(e,a?.())||{});if(a&&s?.update){var l=!1,f={};Ia(()=>{var v=a();Ld(v),l&&Qu(f,v)&&(f=v,s.update(v))}),l=!0}if(s?.destroy)return()=>s.destroy()})}function Cl(e){var r,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(r=0;r<l;r++)e[r]&&(a=Cl(e[r]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Hd(){for(var e,r,a=0,s="",l=arguments.length;a<l;a++)(e=arguments[a])&&(r=Cl(e))&&(s&&(s+=" "),s+=r);return s}function Pl(e){return typeof e=="object"?Hd(e):e??""}function Wd(e,r,a){var s=e==null?"":""+e;return r&&(s=s?s+" "+r:r),s===""?null:s}function Gd(e,r){return e==null?null:String(e)}function Vo(e,r,a,s,l,f){var v=e.__className;if(v!==a||v===void 0){var y=Wd(a,s);y==null?e.removeAttribute("class"):e.className=y,e.__className=a}return f}function Ot(e,r,a,s){var l=e.__style;if(l!==r){var f=Gd(r);f==null?e.removeAttribute("style"):e.style.cssText=f,e.__style=r}return s}const Yd=Symbol("is custom element"),qd=Symbol("is html");function Rl(e,r){var a=ys(e);a.value===(a.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Ml(e,r){var a=ys(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function St(e,r,a,s){var l=ys(e);l[r]!==(l[r]=a)&&(r==="loading"&&(e[If]=a),a==null?e.removeAttribute(r):typeof a!="string"&&Zd(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function ys(e){return e.__attributes??={[Yd]:e.nodeName.includes("-"),[qd]:e.namespaceURI===Qf}}var bu=new Map;function Zd(e){var r=e.getAttribute("is")||e.nodeName,a=bu.get(r);if(a)return a;bu.set(r,a=[]);for(var s,l=e,f=Element.prototype;f!==l;){s=ju(l);for(var v in s)s[v].set&&a.push(v);l=as(l)}return a}function ms(e,r,a=r){var s=new WeakSet;kd(e,"input",async l=>{te&&e.type==="checkbox"&&fu();var f=l?e.defaultValue:e.value;if(f=Io(e)?So(f):f,a(f),Pe!==null&&s.add(Pe),await ca(),f!==(f=r())){var v=e.selectionStart,y=e.selectionEnd,m=e.value.length;if(e.value=f??"",y!==null){var x=e.value.length;v===y&&y===m&&x>m?(e.selectionStart=x,e.selectionEnd=x):(e.selectionStart=v,e.selectionEnd=Math.min(y,x))}}}),Br(r)==null&&e.value&&(a(Io(e)?So(e.value):e.value),Pe!==null&&s.add(Pe)),Ia(()=>{te&&e.type==="checkbox"&&fu();var l=r();if(e===document.activeElement){var f=$i??Pe;if(s.has(f))return}Io(e)&&l===So(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function Io(e){var r=e.type;return r==="number"||r==="range"}function So(e){return e===""?null:+e}function wu(e,r){return e===r||e?.[vn]===r}function qt(e={},r,a,s){return yl(()=>{var l,f;return Ia(()=>{l=f,f=[],Br(()=>{e!==a(...f)&&(r(e,...f),l&&wu(a(...l),e)&&r(null,...l))})}),()=>{Kr(()=>{f&&wu(a(...f),e)&&r(null,...f)})}}),e}function Ll(e,r,a){if(e==null)return r(void 0),na;const s=Br(()=>e.subscribe(r,a));return s.unsubscribe?()=>s.unsubscribe():s}function Qd(e){let r;return Ll(e,a=>r=a)(),r}let Zi=!1,Uo=Symbol();function da(e,r,a){const s=a[r]??={store:null,source:ll(void 0),unsubscribe:na};if(te&&(s.source.label=r),s.store!==e&&!(Uo in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=na;else{var l=!0;s.unsubscribe=Ll(e,f=>{l?s.source.v=f:C(s.source,f)}),l=!1}return e&&Uo in a?Qd(e):b(s.source)}function Ho(e,r,a){let s=a[r];return s&&s.store!==e&&(s.unsubscribe(),s.unsubscribe=na),e}function gs(){const e={};function r(){ds(()=>{for(var a in e)e[a].unsubscribe();Kn(e,Uo,{enumerable:!1,value:!0})})}return[e,r]}function Xd(e){var r=Zi;try{return Zi=!1,[e(),Zi]}finally{Zi=r}}function Cn(e,r,a,s){var l=(a&Wf)!==0,f=(a&Gf)!==0,v=s,y=!0,m=()=>(y&&(y=!1,v=f?Br(s):s),v),x;if(l){var w=vn in e||Af in e;x=ir(e,r)?.set??(w&&r in e?q=>e[r]=q:void 0)}var A,g=!1;l?[A,g]=Xd(()=>e[r]):A=e[r],A===void 0&&s!==void 0&&(A=m(),x&&(Lf(r),x(A)));var k;if(k=()=>{var q=e[r];return q===void 0?m():(y=!0,q)},(a&Hf)===0)return k;if(x){var P=e.$$legacy;return(function(q,J){return arguments.length>0?((!J||P||g)&&x(J?k():q),q):k()})}var L=!1,R=((a&Uf)!==0?Da:sl)(()=>(L=!1,k()));te&&(R.label=r),l&&b(R);var j=Ce;return(function(q,J){if(arguments.length>0){const Z=J?b(R):l?Wt(q):q;return C(R,Z),L=!0,v!==void 0&&(v=Z),q}return fr&&L||(j.f&hn)!==0?R.v:b(R)})}if(te){let e=function(r){if(!(r in globalThis)){let a;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(a!==void 0)return a;Nf(r)},set:s=>{a=s}})}};var pp=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const $d="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add($d);var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ji={exports:{}},th=Ji.exports,Eu;function nh(){return Eu||(Eu=1,(function(e,r){(function(a,s){e.exports=s()})(th,(function(){var a=function(t,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u])},a(t,n)};function s(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var l=function(){return l=Object.assign||function(n){for(var i,o=1,u=arguments.length;o<u;o++){i=arguments[o];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(n[c]=i[c])}return n},l.apply(this,arguments)};function f(t,n,i){for(var o=0,u=n.length,c;o<u;o++)(c||!(o in n))&&(c||(c=Array.prototype.slice.call(n,0,o)),c[o]=n[o]);return t.concat(c||Array.prototype.slice.call(n))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Jd,y=Object.keys,m=Array.isArray;typeof Promise<"u"&&!v.Promise&&(v.Promise=Promise);function x(t,n){return typeof n!="object"||y(n).forEach(function(i){t[i]=n[i]}),t}var w=Object.getPrototypeOf,A={}.hasOwnProperty;function g(t,n){return A.call(t,n)}function k(t,n){typeof n=="function"&&(n=n(w(t))),(typeof Reflect>"u"?y:Reflect.ownKeys)(n).forEach(function(i){L(t,i,n[i])})}var P=Object.defineProperty;function L(t,n,i,o){P(t,n,x(i&&g(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function R(t){return{from:function(n){return t.prototype=Object.create(n.prototype),L(t.prototype,"constructor",t),{extend:k.bind(null,t.prototype)}}}}var j=Object.getOwnPropertyDescriptor;function q(t,n){var i=j(t,n),o;return i||(o=w(t))&&q(o,n)}var J=[].slice;function Z(t,n,i){return J.call(t,n,i)}function oe(t,n){return n(t)}function ce(t){if(!t)throw new Error("Assertion Failed")}function Ee(t){v.setImmediate?setImmediate(t):setTimeout(t,0)}function xe(t,n){return t.reduce(function(i,o,u){var c=n(o,u);return c&&(i[c[0]]=c[1]),i},{})}function Te(t,n){if(typeof n=="string"&&g(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],o=0,u=n.length;o<u;++o){var c=Te(t,n[o]);i.push(c)}return i}var d=n.indexOf(".");if(d!==-1){var h=t[n.substr(0,d)];return h==null?void 0:Te(h,n.substr(d+1))}}function he(t,n,i){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){ce(typeof i!="string"&&"length"in i);for(var o=0,u=n.length;o<u;++o)he(t,n[o],i[o])}else{var c=n.indexOf(".");if(c!==-1){var d=n.substr(0,c),h=n.substr(c+1);if(h==="")i===void 0?m(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=i;else{var p=t[d];(!p||!g(t,d))&&(p=t[d]={}),he(p,h,i)}}else i===void 0?m(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function we(t,n){typeof n=="string"?he(t,n,void 0):"length"in n&&[].map.call(n,function(i){he(t,i,void 0)})}function ke(t){var n={};for(var i in t)g(t,i)&&(n[i]=t[i]);return n}var Ye=[].concat;function qe(t){return Ye.apply([],t)}var gt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(qe([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return v[t]}),it=new Set(gt.map(function(t){return v[t]}));function Me(t){var n={};for(var i in t)if(g(t,i)){var o=t[i];n[i]=!o||typeof o!="object"||it.has(o.constructor)?o:Me(o)}return n}function un(t){for(var n in t)if(g(t,n))return!1;return!0}var pt=null;function Qe(t){pt=new WeakMap;var n=ee(t);return pt=null,n}function ee(t){if(!t||typeof t!="object")return t;var n=pt.get(t);if(n)return n;if(m(t)){n=[],pt.set(t,n);for(var i=0,o=t.length;i<o;++i)n.push(ee(t[i]))}else if(it.has(t.constructor))n=t;else{var u=w(t);n=u===Object.prototype?{}:Object.create(u),pt.set(t,n);for(var c in t)g(t,c)&&(n[c]=ee(t[c]))}return n}var _e={}.toString;function Ve(t){return _e.call(t).slice(8,-1)}var Fe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ke=typeof Fe=="symbol"?function(t){var n;return t!=null&&(n=t[Fe])&&n.apply(t)}:function(){return null};function Ie(t,n){var i=t.indexOf(n);return i>=0&&t.splice(i,1),i>=0}var et={};function at(t){var n,i,o,u;if(arguments.length===1){if(m(t))return t.slice();if(this===et&&typeof t=="string")return[t];if(u=Ke(t)){for(i=[];o=u.next(),!o.done;)i.push(o.value);return i}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(i=new Array(n);n--;)i[n]=t[n];return i}return[t]}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var jt=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Hn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Wn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],wn=Hn.concat(Wn),hr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function zt(t,n){this.name=t,this.message=n}R(zt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function vr(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,o,u){return u.indexOf(i)===o}).join(`
`)}function U(t,n,i,o){this.failures=n,this.failedKeys=o,this.successCount=i,this.message=vr(t,n)}R(U).from(zt);function V(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=vr(t,this.failures)}R(V).from(zt);var W=wn.reduce(function(t,n){return t[n]=n+"Error",t},{}),be=zt,H=wn.reduce(function(t,n){var i=n+"Error";function o(u,c){this.name=i,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=hr[n]||i,this.inner=null)}return R(o).from(be),t[n]=o,t},{});H.Syntax=SyntaxError,H.Type=TypeError,H.Range=RangeError;var pe=Wn.reduce(function(t,n){return t[n+"Error"]=H[n],t},{});function ae(t,n){if(!t||t instanceof zt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!pe[t.name])return t;var i=new pe[t.name](n||t.message,t);return"stack"in t&&L(i,"stack",{get:function(){return this.inner.stack}}),i}var se=wn.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=H[n]),t},{});se.ModifyError=U,se.DexieError=zt,se.BulkError=V;function ne(){}function Be(t){return t}function de(t,n){return t==null||t===Be?n:function(i){return n(t(i))}}function Le(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function Vt(t,n){return t===ne?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Le(o,this.onsuccess):o),u&&(this.onerror=this.onerror?Le(u,this.onerror):u),c!==void 0?c:i}}function Ka(t,n){return t===ne?n:function(){t.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Le(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Le(o,this.onerror):o)}}function ln(t,n){return t===ne?n:function(i){var o=t.apply(this,arguments);x(i,o);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?Le(u,this.onsuccess):u),c&&(this.onerror=this.onerror?Le(c,this.onerror):c),o===void 0?d===void 0?void 0:d:x(o,d)}}function jr(t,n){return t===ne?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Ba(t,n){return t===ne?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return i.then(function(){return n.apply(o,c)})}return n.apply(this,arguments)}}var Qt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ds(t,n){Qt=t}var zr={},As=100,ja=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,w(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,w(n),t]})(),Is=ja[0],Ss=ja[1],nc=ja[2],rc=Ss&&Ss.then,Gn=Is&&Is.constructor,za=!!nc;function ic(){queueMicrotask(oc)}var Vr=function(t,n){Ur.push([t,n]),Ei&&(ic(),Ei=!1)},Va=!0,Ei=!0,Yn=[],xi=[],Ua=Be,En={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ne,pgp:!1,env:{},finalize:ne},re=En,Ur=[],qn=0,Ti=[];function Q(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=re;if(typeof t!="function"){if(t!==zr)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Wa(this,this._value);return}this._state=null,this._value=null,++n.ref,Cs(this,t)}var Ha={get:function(){var t=re,n=Ii;function i(o,u){var c=this,d=!t.global&&(t!==re||n!==Ii),h=d&&!Tn(),p=new Q(function(_,D){Ga(c,new Os(Ms(o,t,d,h),Ms(u,t,d,h),_,D,t))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return i.prototype=zr,i},set:function(t){L(this,"then",t&&t.prototype===zr?Ha:{get:function(){return t},set:Ha.set})}};k(Q.prototype,{then:Ha,_then:function(t,n){Ga(this,new Os(null,null,t,n,re))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],i=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?i(o):ki(o)}):this.then(null,function(o){return o&&o.name===n?i(o):ki(o)})},finally:function(t){return this.then(function(n){return Q.resolve(t()).then(function(){return n})},function(n){return Q.resolve(t()).then(function(){return ki(n)})})},timeout:function(t,n){var i=this;return t<1/0?new Q(function(o,u){var c=setTimeout(function(){return u(new H.Timeout(n))},t);i.then(o,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(Q.prototype,Symbol.toStringTag,"Dexie.Promise"),En.env=Rs();function Os(t,n,i,o,u){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=o,this.psd=u}k(Q,{all:function(){var t=at.apply(null,arguments).map(Si);return new Q(function(n,i){t.length===0&&n([]);var o=t.length;t.forEach(function(u,c){return Q.resolve(u).then(function(d){t[c]=d,--o||n(t)},i)})})},resolve:function(t){if(t instanceof Q)return t;if(t&&typeof t.then=="function")return new Q(function(i,o){t.then(i,o)});var n=new Q(zr,!0,t);return n},reject:ki,race:function(){var t=at.apply(null,arguments).map(Si);return new Q(function(n,i){t.map(function(o){return Q.resolve(o).then(n,i)})})},PSD:{get:function(){return re},set:function(t){return re=t}},totalEchoes:{get:function(){return Ii}},newPSD:xn,usePSD:Zn,scheduler:{get:function(){return Vr},set:function(t){Vr=t}},rejectionMapper:{get:function(){return Ua},set:function(t){Ua=t}},follow:function(t,n){return new Q(function(i,o){return xn(function(u,c){var d=re;d.unhandleds=[],d.onunhandled=c,d.finalize=Le(function(){var h=this;sc(function(){h.unhandleds.length===0?u():c(h.unhandleds[0])})},d.finalize),t()},n,i,o)})}}),Gn&&(Gn.allSettled&&L(Q,"allSettled",function(){var t=at.apply(null,arguments).map(Si);return new Q(function(n){t.length===0&&n([]);var i=t.length,o=new Array(i);t.forEach(function(u,c){return Q.resolve(u).then(function(d){return o[c]={status:"fulfilled",value:d}},function(d){return o[c]={status:"rejected",reason:d}}).then(function(){return--i||n(o)})})})}),Gn.any&&typeof AggregateError<"u"&&L(Q,"any",function(){var t=at.apply(null,arguments).map(Si);return new Q(function(n,i){t.length===0&&i(new AggregateError([]));var o=t.length,u=new Array(o);t.forEach(function(c,d){return Q.resolve(c).then(function(h){return n(h)},function(h){u[d]=h,--o||i(new AggregateError(u))})})})}),Gn.withResolvers&&(Q.withResolvers=Gn.withResolvers));function Cs(t,n){try{n(function(i){if(t._state===null){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&pr();i&&typeof i.then=="function"?Cs(t,function(u,c){i instanceof Q?i._then(u,c):i.then(u,c)}):(t._state=!0,t._value=i,Ps(t)),o&&yr()}},Wa.bind(null,t))}catch(i){Wa(t,i)}}function Wa(t,n){if(xi.push(n),t._state===null){var i=t._lib&&pr();n=Ua(n),t._state=!1,t._value=n,uc(t),Ps(t),i&&yr()}}function Ps(t){var n=t._listeners;t._listeners=[];for(var i=0,o=n.length;i<o;++i)Ga(t,n[i]);var u=t._PSD;--u.ref||u.finalize(),qn===0&&(++qn,Vr(function(){--qn===0&&Ya()},[]))}function Ga(t,n){if(t._state===null){t._listeners.push(n);return}var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++qn,Vr(ac,[i,t,n])}function ac(t,n,i){try{var o,u=n._value;!n._state&&xi.length&&(xi=[]),o=Qt&&n._consoleTask?n._consoleTask.run(function(){return t(u)}):t(u),!n._state&&xi.indexOf(u)===-1&&lc(n),i.resolve(o)}catch(c){i.reject(c)}finally{--qn===0&&Ya(),--i.psd.ref||i.psd.finalize()}}function oc(){Zn(En,function(){pr()&&yr()})}function pr(){var t=Va;return Va=!1,Ei=!1,t}function yr(){var t,n,i;do for(;Ur.length>0;)for(t=Ur,Ur=[],i=t.length,n=0;n<i;++n){var o=t[n];o[0].apply(null,o[1])}while(Ur.length>0);Va=!0,Ei=!0}function Ya(){var t=Yn;Yn=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=Ti.slice(0),i=n.length;i;)n[--i]()}function sc(t){function n(){t(),Ti.splice(Ti.indexOf(n),1)}Ti.push(n),++qn,Vr(function(){--qn===0&&Ya()},[])}function uc(t){Yn.some(function(n){return n._value===t._value})||Yn.push(t)}function lc(t){for(var n=Yn.length;n;)if(Yn[--n]._value===t._value){Yn.splice(n,1);return}}function ki(t){return new Q(zr,!1,t)}function je(t,n){var i=re;return function(){var o=pr(),u=re;try{return kn(i,!0),t.apply(this,arguments)}catch(c){n&&n(c)}finally{kn(u,!1),o&&yr()}}}var $e={awaits:0,echoes:0,id:0},cc=0,Di=[],Ai=0,Ii=0,fc=0;function xn(t,n,i,o){var u=re,c=Object.create(u);c.parent=u,c.ref=0,c.global=!1,c.id=++fc,En.env,c.env=za?{Promise:Q,PromiseProp:{value:Q,configurable:!0,writable:!0},all:Q.all,race:Q.race,allSettled:Q.allSettled,any:Q.any,resolve:Q.resolve,reject:Q.reject}:{},n&&x(c,n),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=Zn(c,t,i,o);return c.ref===0&&c.finalize(),d}function mr(){return $e.id||($e.id=++cc),++$e.awaits,$e.echoes+=As,$e.id}function Tn(){return $e.awaits?(--$e.awaits===0&&($e.id=0),$e.echoes=$e.awaits*As,!0):!1}(""+rc).indexOf("[native code]")===-1&&(mr=Tn=ne);function Si(t){return $e.echoes&&t&&t.constructor===Gn?(mr(),t.then(function(n){return Tn(),n},function(n){return Tn(),He(n)})):t}function dc(t){++Ii,(!$e.echoes||--$e.echoes===0)&&($e.echoes=$e.awaits=$e.id=0),Di.push(re),kn(t,!0)}function hc(){var t=Di[Di.length-1];Di.pop(),kn(t,!1)}function kn(t,n){var i=re;if((n?$e.echoes&&(!Ai++||t!==re):Ai&&(!--Ai||t!==re))&&queueMicrotask(n?dc.bind(null,t):hc),t!==re&&(re=t,i===En&&(En.env=Rs()),za)){var o=En.env.Promise,u=t.env;(i.global||t.global)&&(Object.defineProperty(v,"Promise",u.PromiseProp),o.all=u.all,o.race=u.race,o.resolve=u.resolve,o.reject=u.reject,u.allSettled&&(o.allSettled=u.allSettled),u.any&&(o.any=u.any))}}function Rs(){var t=v.Promise;return za?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Zn(t,n,i,o,u){var c=re;try{return kn(t,!0),n(i,o,u)}finally{kn(c,!1)}}function Ms(t,n,i,o){return typeof t!="function"?t:function(){var u=re;i&&mr(),kn(n,!0);try{return t.apply(this,arguments)}finally{kn(u,!1),o&&queueMicrotask(Tn)}}}function qa(t){Promise===Gn&&$e.echoes===0?Ai===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var He=Q.reject;function Za(t,n,i,o){if(!t.idbdb||!t._state.openComplete&&!re.letThrough&&!t._vip){if(t._state.openComplete)return He(new H.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return He(new H.DatabaseClosed);t.open().catch(ne)}return t._state.dbReadyPromise.then(function(){return Za(t,n,i,o)})}else{var u=t._createTransaction(n,i,t._dbSchema);try{u.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===W.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Za(t,n,i,o)})):He(c)}return u._promise(n,function(c,d){return xn(function(){return re.trans=u,o(c,d,u)})}).then(function(c){if(n==="readwrite")try{u.idbtrans.commit()}catch{}return n==="readonly"?c:u._completion.then(function(){return c})})}}var Ls="4.2.1",Qn="",Qa=-1/0,cn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ns="String expected.",gr=[],Oi="__dbnames",Xa="readonly",$a="readwrite";function Xn(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var Fs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ci(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=Qe(n),delete n[t]),n}:function(n){return n}}function Ks(){throw H.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function De(t,n){try{var i=Bs(t),o=Bs(n);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return pc(js(t),js(n));case"Array":return vc(t,n)}}catch{}return NaN}function vc(t,n){for(var i=t.length,o=n.length,u=i<o?i:o,c=0;c<u;++c){var d=De(t[c],n[c]);if(d!==0)return d}return i===o?0:i<o?-1:1}function pc(t,n){for(var i=t.length,o=n.length,u=i<o?i:o,c=0;c<u;++c)if(t[c]!==n[c])return t[c]<n[c]?-1:1;return i===o?0:i<o?-1:1}function Bs(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var i=Ve(t);return i==="ArrayBuffer"?"binary":i}function js(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Pi(t,n,i){var o=t.schema.yProps;return o?(n&&i.numFailures>0&&(n=n.filter(function(u,c){return!i.failures[c]})),Promise.all(o.map(function(u){var c=u.updatesTable;return n?t.db.table(c).where("k").anyOf(n).delete():t.db.table(c).clear()})).then(function(){return i})):i}var Hr=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var i,o=this["@@propmod"];if(o.add!==void 0){var u=o.add;if(m(u))return f(f([],m(n)?n:[],!0),u).sort();if(typeof u=="number")return(Number(n)||0)+u;if(typeof u=="bigint")try{return BigInt(n)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(o.remove!==void 0){var c=o.remove;if(m(c))return m(n)?n.filter(function(h){return!c.includes(h)}).sort():[];if(typeof c=="number")return Number(n)-c;if(typeof c=="bigint")try{return BigInt(n)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}var d=(i=o.replacePrefix)===null||i===void 0?void 0:i[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function zs(t,n){for(var i=y(n),o=i.length,u=!1,c=0;c<o;++c){var d=i[c],h=n[d],p=Te(t,d);h instanceof Hr?(he(t,d,h.execute(p)),u=!0):p!==h&&(he(t,d,h),u=!0)}return u}var Vs=(function(){function t(){}return t.prototype._trans=function(n,i,o){var u=this._tx||re.trans,c=this.name,d=Qt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function h(D,E,O){if(!O.schema[c])throw new H.NotFound("Table "+c+" not part of transaction");return i(O.idbtrans,O)}var p=pr();try{var _=u&&u.db._novip===this.db._novip?u===re.trans?u._promise(n,h,o):xn(function(){return u._promise(n,h,o)},{trans:u,transless:re.transless||re}):Za(this.db,n,[this.name],h);return d&&(_._consoleTask=d,_=_.catch(function(D){return console.trace(D),He(D)})),_}finally{p&&yr()}},t.prototype.get=function(n,i){var o=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?He(new H.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return o.core.get({trans:u,key:n}).then(function(c){return o.hook.reading.fire(c)})}).then(i)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(m(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=y(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&i.every(function(O){return D.keyPath.indexOf(O)>=0})){for(var E=0;E<i.length;++E)if(i.indexOf(D.keyPath[E])===-1)return!1;return!0}return!1}).sort(function(D,E){return D.keyPath.length-E.keyPath.length})[0];if(o&&this.db._maxKey!==Qn){var u=o.keyPath.slice(0,i.length);return this.where(u).equals(u.map(function(D){return n[D]}))}!o&&Qt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var c=this.schema.idxByName;function d(D,E){return De(D,E)===0}var h=i.reduce(function(D,E){var O=D[0],z=D[1],T=c[E],I=n[E];return[O||T,O||!T?Xn(z,T&&T.multi?function(S){var M=Te(S,E);return m(M)&&M.some(function(F){return d(I,F)})}:function(S){return d(I,Te(S,E))}):z]},[null,null]),p=h[0],_=h[1];return p?this.where(p.name).equals(n[p.keyPath]).filter(_):o?this.filter(_):this.where(i).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,m(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var i=this,o=i.db,u=i.name;this.schema.mappedClass=n,n.prototype instanceof Ks&&(n=(function(p){s(_,p);function _(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(_.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),_.prototype.table=function(){return u},_})(n));for(var c=new Set,d=n.prototype;d;d=w(d))Object.getOwnPropertyNames(d).forEach(function(p){return c.add(p)});var h=function(p){if(!p)return p;var _=Object.create(n.prototype);for(var D in p)if(!c.has(D))try{_[D]=p[D]}catch{}return _};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=h,this.hook("reading",h),n},t.prototype.defineClass=function(){function n(i){x(this,i)}return this.mapToClass(n)},t.prototype.add=function(n,i){var o=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,h=n;return d&&c&&(h=Ci(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"add",keys:i!=null?[i]:null,values:[h]})}).then(function(p){return p.numFailures?Q.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{he(n,d,p)}catch{}return p})},t.prototype.upsert=function(n,i){var o=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return o.core.get({trans:c,key:n}).then(function(d){var h=d??{};return zs(h,i),u&&he(h,u,n),o.core.mutate({trans:c,type:"put",values:[h],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[i]}}).then(function(p){return p.numFailures?Q.reject(p.failures[0]):!!d})})})},t.prototype.update=function(n,i){if(typeof n=="object"&&!m(n)){var o=Te(n,this.schema.primKey.keyPath);return o===void 0?He(new H.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(n).modify(i)},t.prototype.put=function(n,i){var o=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,h=n;return d&&c&&(h=Ci(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"put",values:[h],keys:i!=null?[i]:null})}).then(function(p){return p.numFailures?Q.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{he(n,d,p)}catch{}return p})},t.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(u){return Pi(i,[n],u)}).then(function(u){return u.numFailures?Q.reject(u.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:Fs}).then(function(o){return Pi(n,null,o)})}).then(function(i){return i.numFailures?Q.reject(i.failures[0]):void 0})},t.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:n,trans:o}).then(function(u){return u.map(function(c){return i.hook.reading.fire(c)})})})},t.prototype.bulkAdd=function(n,i,o){var u=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=u.schema.primKey,_=p.auto,D=p.keyPath;if(D&&c)throw new H.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var E=n.length,O=D&&_?n.map(Ci(D)):n;return u.core.mutate({trans:h,type:"add",keys:c,values:O,wantResults:d}).then(function(z){var T=z.numFailures,I=z.results,S=z.lastResult,M=z.failures,F=d?I:S;if(T===0)return F;throw new V("".concat(u.name,".bulkAdd(): ").concat(T," of ").concat(E," operations failed"),M)})})},t.prototype.bulkPut=function(n,i,o){var u=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=u.schema.primKey,_=p.auto,D=p.keyPath;if(D&&c)throw new H.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var E=n.length,O=D&&_?n.map(Ci(D)):n;return u.core.mutate({trans:h,type:"put",keys:c,values:O,wantResults:d}).then(function(z){var T=z.numFailures,I=z.results,S=z.lastResult,M=z.failures,F=d?I:S;if(T===0)return F;throw new V("".concat(u.name,".bulkPut(): ").concat(T," of ").concat(E," operations failed"),M)})})},t.prototype.bulkUpdate=function(n){var i=this,o=this.core,u=n.map(function(h){return h.key}),c=n.map(function(h){return h.changes}),d=[];return this._trans("readwrite",function(h){return o.getMany({trans:h,keys:u,cache:"clone"}).then(function(p){var _=[],D=[];n.forEach(function(O,z){var T=O.key,I=O.changes,S=p[z];if(S){for(var M=0,F=Object.keys(I);M<F.length;M++){var K=F[M],B=I[K];if(K===i.schema.primKey.keyPath){if(De(B,T)!==0)throw new H.Constraint("Cannot update primary key in bulkUpdate()")}else he(S,K,B)}d.push(z),_.push(T),D.push(S)}});var E=_.length;return o.mutate({trans:h,type:"put",keys:_,values:D,updates:{keys:u,changeSpecs:c}}).then(function(O){var z=O.numFailures,T=O.failures;if(z===0)return E;for(var I=0,S=Object.keys(T);I<S.length;I++){var M=S[I],F=d[Number(M)];if(F!=null){var K=T[M];delete T[M],T[F]=K}}throw new V("".concat(i.name,".bulkUpdate(): ").concat(z," of ").concat(E," operations failed"),T)})})})},t.prototype.bulkDelete=function(n){var i=this,o=n.length;return this._trans("readwrite",function(u){return i.core.mutate({trans:u,type:"delete",keys:n}).then(function(c){return Pi(i,n,c)})}).then(function(u){var c=u.numFailures,d=u.lastResult,h=u.failures;if(c===0)return d;throw new V("".concat(i.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),h)})},t})();function Wr(t){var n={},i=function(h,p){if(p){for(var _=arguments.length,D=new Array(_-1);--_;)D[_-1]=arguments[_];return n[h].subscribe.apply(null,D),t}else if(typeof h=="string")return n[h]};i.addEventType=c;for(var o=1,u=arguments.length;o<u;++o)c(arguments[o]);return i;function c(h,p,_){if(typeof h=="object")return d(h);p||(p=jr),_||(_=ne);var D={subscribers:[],fire:_,subscribe:function(E){D.subscribers.indexOf(E)===-1&&(D.subscribers.push(E),D.fire=p(D.fire,E))},unsubscribe:function(E){D.subscribers=D.subscribers.filter(function(O){return O!==E}),D.fire=D.subscribers.reduce(p,_)}};return n[h]=i[h]=D,D}function d(h){y(h).forEach(function(p){var _=h[p];if(m(_))c(p,h[p][0],h[p][1]);else if(_==="asap")var D=c(p,Be,function(){for(var O=arguments.length,z=new Array(O);O--;)z[O]=arguments[O];D.subscribers.forEach(function(T){Ee(function(){T.apply(null,z)})})});else throw new H.InvalidArgument("Invalid event config")})}}function Gr(t,n){return R(n).from({prototype:t}),n}function yc(t){return Gr(Vs.prototype,function(i,o,u){this.db=t,this._tx=u,this.name=i,this.schema=o,this.hook=t._allTables[i]?t._allTables[i].hook:Wr(null,{creating:[Vt,ne],reading:[de,Be],updating:[ln,ne],deleting:[Ka,ne]})})}function _r(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function Ja(t,n){t.filter=Xn(t.filter,n)}function eo(t,n,i){var o=t.replayFilter;t.replayFilter=o?function(){return Xn(o(),n())}:n,t.justLimit=i&&!o}function mc(t,n){t.isMatch=Xn(t.isMatch,n)}function Ri(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new H.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function Us(t,n,i){var o=Ri(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function Mi(t,n,i,o){var u=t.replayFilter?Xn(t.filter,t.replayFilter()):t.filter;if(t.or){var c={},d=function(h,p,_){if(!u||u(p,_,function(O){return p.stop(O)},function(O){return p.fail(O)})){var D=p.primaryKey,E=""+D;E==="[object ArrayBuffer]"&&(E=""+new Uint8Array(D)),g(c,E)||(c[E]=!0,n(h,p,_))}};return Promise.all([t.or._iterate(d,i),Hs(Us(t,o,i),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return Hs(Us(t,o,i),Xn(t.algorithm,u),n,!t.keysOnly&&t.valueMapper)}function Hs(t,n,i,o){var u=o?function(d,h,p){return i(o(d),h,p)}:i,c=je(u);return t.then(function(d){if(d)return d.start(function(){var h=function(){return d.continue()};(!n||n(d,function(p){return h=p},function(p){d.stop(p),h=ne},function(p){d.fail(p),h=ne}))&&c(d.value,d,function(p){return h=p}),h()})})}var gc=(function(){function t(){}return t.prototype._read=function(n,i){var o=this._ctx;return o.error?o.table._trans(null,He.bind(null,o.error)):o.table._trans("readonly",n).then(i)},t.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,He.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=Xn(i.algorithm,n)},t.prototype._iterate=function(n,i){return Mi(this._ctx,n,i,this._ctx.table.core)},t.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&x(o,n),i._ctx=o,i},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var i=this._ctx;return this._read(function(o){return Mi(i,n,o,i.table.core)})},t.prototype.count=function(n){var i=this;return this._read(function(o){var u=i._ctx,c=u.table.core;if(_r(u,!0))return c.count({trans:o,query:{index:Ri(u,c.schema),range:u.range}}).then(function(h){return Math.min(h,u.limit)});var d=0;return Mi(u,function(){return++d,!1},o,c).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,i){var o=n.split(".").reverse(),u=o[0],c=o.length-1;function d(_,D){return D?d(_[o[D]],D-1):_[u]}var h=this._ctx.dir==="next"?1:-1;function p(_,D){var E=d(_,c),O=d(D,c);return De(E,O)*h}return this.toArray(function(_){return _.sort(p)}).then(i)},t.prototype.toArray=function(n){var i=this;return this._read(function(o){var u=i._ctx;if(u.dir==="next"&&_r(u,!0)&&u.limit>0){var c=u.valueMapper,d=Ri(u,u.table.core.schema);return u.table.core.query({trans:o,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(p){var _=p.result;return c?_.map(c):_})}else{var h=[];return Mi(u,function(p){return h.push(p)},o,u.table.core).then(function(){return h})}},n)},t.prototype.offset=function(n){var i=this._ctx;return n<=0?this:(i.offset+=n,_r(i)?eo(i,function(){var o=n;return function(u,c){return o===0?!0:o===1?(--o,!1):(c(function(){u.advance(o),o=0}),!1)}}):eo(i,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),eo(this._ctx,function(){var i=n;return function(o,u,c){return--i<=0&&u(c),i>=0}},!0),this},t.prototype.until=function(n,i){return Ja(this._ctx,function(o,u,c){return n(o.value)?(u(c),i):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return Ja(this._ctx,function(i){return n(i.value)}),mc(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,u){n(u.key,u)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,u){n(u.primaryKey,u)})},t.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(u,c){o.push(c.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&_r(i,!0)&&i.limit>0)return this._read(function(u){var c=Ri(i,i.table.core.schema);return i.table.core.query({trans:u,values:!1,limit:i.limit,query:{index:c,range:i.range}})}).then(function(u){var c=u.result;return c}).then(n);i.keysOnly=!i.isMatch;var o=[];return this.each(function(u,c){o.push(c.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,i=n.index&&n.table.schema.idxByName[n.index];if(!i||!i.multi)return this;var o={};return Ja(this._ctx,function(u){var c=u.primaryKey.toString(),d=g(o,c);return o[c]=!0,!d}),this},t.prototype.modify=function(n){var i=this,o=this._ctx;return this._write(function(u){var c;typeof n=="function"?c=n:c=function(M){return zs(M,n)};var d=o.table.core,h=d.schema.primaryKey,p=h.outbound,_=h.extractKey,D=200,E=i.db._options.modifyChunkSize;E&&(typeof E=="object"?D=E[d.name]||E["*"]||200:D=E);var O=[],z=0,T=[],I=function(M,F){var K=F.failures,B=F.numFailures;z+=M-B;for(var N=0,G=y(K);N<G.length;N++){var X=G[N];O.push(K[X])}},S=n===Ws;return i.clone().primaryKeys().then(function(M){var F=_r(o)&&o.limit===1/0&&(typeof n!="function"||S)&&{index:o.index,range:o.range},K=function(B){var N=Math.min(D,M.length-B),G=M.slice(B,B+N);return(S?Promise.resolve([]):d.getMany({trans:u,keys:G,cache:"immutable"})).then(function(X){var Y=[],ue=[],ye=p?[]:null,$=S?G:[];if(!S)for(var ve=0;ve<N;++ve){var le=X[ve],Ae={value:Qe(le),primKey:M[B+ve]};c.call(Ae,Ae.value,Ae)!==!1&&(Ae.value==null?$.push(M[B+ve]):!p&&De(_(le),_(Ae.value))!==0?($.push(M[B+ve]),Y.push(Ae.value)):(ue.push(Ae.value),p&&ye.push(M[B+ve])))}return Promise.resolve(Y.length>0&&d.mutate({trans:u,type:"add",values:Y}).then(function(ie){for(var Ue in ie.failures)$.splice(parseInt(Ue),1);I(Y.length,ie)})).then(function(){return(ue.length>0||F&&typeof n=="object")&&d.mutate({trans:u,type:"put",keys:ye,values:ue,criteria:F,changeSpec:typeof n!="function"&&n,isAdditionalChunk:B>0}).then(function(ie){return I(ue.length,ie)})}).then(function(){return($.length>0||F&&S)&&d.mutate({trans:u,type:"delete",keys:$,criteria:F,isAdditionalChunk:B>0}).then(function(ie){return Pi(o.table,$,ie)}).then(function(ie){return I($.length,ie)})}).then(function(){return M.length>B+N&&K(B+D)})})};return K(0).then(function(){if(O.length>0)throw new U("Error modifying one or more objects",O,z,T);return M.length})})})},t.prototype.delete=function(){var n=this._ctx,i=n.range;return _r(n)&&!n.table.schema.yProps&&(n.isPrimKey||i.type===3)?this._write(function(o){var u=n.table.core.schema.primaryKey,c=i;return n.table.core.count({trans:o,query:{index:u,range:c}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(h){var p=h.failures,_=h.numFailures;if(_)throw new U("Could not delete some values",Object.keys(p).map(function(D){return p[D]}),d-_);return d-_})})}):this.modify(Ws)},t})(),Ws=function(t,n){return n.value=null};function _c(t){return Gr(gc.prototype,function(i,o){this.db=t;var u=Fs,c=null;if(o)try{u=o()}catch(_){c=_}var d=i._ctx,h=d.table,p=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:d.or,valueMapper:p!==Be?p:null}})}function bc(t,n){return t<n?-1:t===n?0:1}function wc(t,n){return t>n?-1:t===n?0:1}function At(t,n,i){var o=t instanceof Ys?new t.Collection(t):t;return o._ctx.error=i?new i(n):new TypeError(n),o}function br(t){return new t.Collection(t,function(){return Gs("")}).limit(0)}function Ec(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function xc(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function Tc(t,n,i,o,u,c){for(var d=Math.min(t.length,o.length),h=-1,p=0;p<d;++p){var _=n[p];if(_!==o[p])return u(t[p],i[p])<0?t.substr(0,p)+i[p]+i.substr(p+1):u(t[p],o[p])<0?t.substr(0,p)+o[p]+i.substr(p+1):h>=0?t.substr(0,h)+n[h]+i.substr(h+1):null;u(t[p],_)<0&&(h=p)}return d<o.length&&c==="next"?t+i.substr(t.length):d<t.length&&c==="prev"?t.substr(0,i.length):h<0?null:t.substr(0,h)+o[h]+i.substr(h+1)}function Li(t,n,i,o){var u,c,d,h,p,_,D,E=i.length;if(!i.every(function(I){return typeof I=="string"}))return At(t,Ns);function O(I){u=Ec(I),c=xc(I),d=I==="next"?bc:wc;var S=i.map(function(M){return{lower:c(M),upper:u(M)}}).sort(function(M,F){return d(M.lower,F.lower)});h=S.map(function(M){return M.upper}),p=S.map(function(M){return M.lower}),_=I,D=I==="next"?"":o}O("next");var z=new t.Collection(t,function(){return Dn(h[0],p[E-1]+o)});z._ondirectionchange=function(I){O(I)};var T=0;return z._addAlgorithm(function(I,S,M){var F=I.key;if(typeof F!="string")return!1;var K=c(F);if(n(K,p,T))return!0;for(var B=null,N=T;N<E;++N){var G=Tc(F,K,h[N],p[N],d,_);G===null&&B===null?T=N+1:(B===null||d(B,G)>0)&&(B=G)}return S(B!==null?function(){I.continue(B+D)}:M),!1}),z}function Dn(t,n,i,o){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:o}}function Gs(t){return{type:1,lower:t,upper:t}}var Ys=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,i,o,u){o=o!==!1,u=u===!0;try{return this._cmp(n,i)>0||this._cmp(n,i)===0&&(o||u)&&!(o&&u)?br(this):new this.Collection(this,function(){return Dn(n,i,!o,!u)})}catch{return At(this,cn)}},t.prototype.equals=function(n){return n==null?At(this,cn):new this.Collection(this,function(){return Gs(n)})},t.prototype.above=function(n){return n==null?At(this,cn):new this.Collection(this,function(){return Dn(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?At(this,cn):new this.Collection(this,function(){return Dn(n,void 0,!1)})},t.prototype.below=function(n){return n==null?At(this,cn):new this.Collection(this,function(){return Dn(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?At(this,cn):new this.Collection(this,function(){return Dn(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?At(this,Ns):this.between(n,n+Qn,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Li(this,function(i,o){return i.indexOf(o[0])===0},[n],Qn)},t.prototype.equalsIgnoreCase=function(n){return Li(this,function(i,o){return i===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=at.apply(et,arguments);return n.length===0?br(this):Li(this,function(i,o){return o.indexOf(i)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=at.apply(et,arguments);return n.length===0?br(this):Li(this,function(i,o){return o.some(function(u){return i.indexOf(u)===0})},n,Qn)},t.prototype.anyOf=function(){var n=this,i=at.apply(et,arguments),o=this._cmp;try{i.sort(o)}catch{return At(this,cn)}if(i.length===0)return br(this);var u=new this.Collection(this,function(){return Dn(i[0],i[i.length-1])});u._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,i.sort(o)};var c=0;return u._addAlgorithm(function(d,h,p){for(var _=d.key;o(_,i[c])>0;)if(++c,c===i.length)return h(p),!1;return o(_,i[c])===0?!0:(h(function(){d.continue(i[c])}),!1)}),u},t.prototype.notEqual=function(n){return this.inAnyRange([[Qa,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=at.apply(et,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return At(this,cn)}var i=n.reduce(function(o,u){return o?o.concat([[o[o.length-1][1],u]]):[[Qa,u]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,i){var o=this,u=this._cmp,c=this._ascending,d=this._descending,h=this._min,p=this._max;if(n.length===0)return br(this);if(!n.every(function(N){return N[0]!==void 0&&N[1]!==void 0&&c(N[0],N[1])<=0}))return At(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",H.InvalidArgument);var _=!i||i.includeLowers!==!1,D=i&&i.includeUppers===!0;function E(N,G){for(var X=0,Y=N.length;X<Y;++X){var ue=N[X];if(u(G[0],ue[1])<0&&u(G[1],ue[0])>0){ue[0]=h(ue[0],G[0]),ue[1]=p(ue[1],G[1]);break}}return X===Y&&N.push(G),N}var O=c;function z(N,G){return O(N[0],G[0])}var T;try{T=n.reduce(E,[]),T.sort(z)}catch{return At(this,cn)}var I=0,S=D?function(N){return c(N,T[I][1])>0}:function(N){return c(N,T[I][1])>=0},M=_?function(N){return d(N,T[I][0])>0}:function(N){return d(N,T[I][0])>=0};function F(N){return!S(N)&&!M(N)}var K=S,B=new this.Collection(this,function(){return Dn(T[0][0],T[T.length-1][1],!_,!D)});return B._ondirectionchange=function(N){N==="next"?(K=S,O=c):(K=M,O=d),T.sort(z)},B._addAlgorithm(function(N,G,X){for(var Y=N.key;K(Y);)if(++I,I===T.length)return G(X),!1;return F(Y)?!0:(o._cmp(Y,T[I][1])===0||o._cmp(Y,T[I][0])===0||G(function(){O===c?N.continue(T[I][0]):N.continue(T[I][1])}),!1)}),B},t.prototype.startsWithAnyOf=function(){var n=at.apply(et,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?br(this):this.inAnyRange(n.map(function(i){return[i,i+Qn]})):At(this,"startsWithAnyOf() only works with strings")},t})();function kc(t){return Gr(Ys.prototype,function(i,o,u){if(this.db=t,this._ctx={table:i,index:o===":id"?null:o,or:u},this._cmp=this._ascending=De,this._descending=function(c,d){return De(d,c)},this._max=function(c,d){return De(c,d)>0?c:d},this._min=function(c,d){return De(c,d)<0?c:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new H.MissingAPI})}function Xt(t){return je(function(n){return Yr(n),t(n.target.error),!1})}function Yr(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var qr="storagemutated",to="x-storagemutated-1",An=Wr(null,qr),Dc=(function(){function t(){}return t.prototype._lock=function(){return ce(!re.global),++this._reculock,this._reculock===1&&!re.global&&(re.lockOwnerFor=this),this},t.prototype._unlock=function(){if(ce(!re.global),--this._reculock===0)for(re.global||(re.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{Zn(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&re.lockOwnerFor!==this},t.prototype.create=function(n){var i=this;if(!this.mode)return this;var o=this.db.idbdb,u=this.db._state.dbOpenError;if(ce(!this.idbtrans),!n&&!o)switch(u&&u.name){case"DatabaseClosedError":throw new H.DatabaseClosed(u);case"MissingAPIError":throw new H.MissingAPI(u.message,u);default:throw new H.OpenFailed(u)}if(!this.active)throw new H.TransactionInactive;return ce(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=je(function(c){Yr(c),i._reject(n.error)}),n.onabort=je(function(c){Yr(c),i.active&&i._reject(new H.Abort(n.error)),i.active=!1,i.on("abort").fire(c)}),n.oncomplete=je(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&An.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,i,o){var u=this;if(n==="readwrite"&&this.mode!=="readwrite")return He(new H.ReadOnly("Transaction is readonly"));if(!this.active)return He(new H.TransactionInactive);if(this._locked())return new Q(function(d,h){u._blockedFuncs.push([function(){u._promise(n,i,o).then(d,h)},re])});if(o)return xn(function(){var d=new Q(function(h,p){u._lock();var _=i(h,p,u);_&&_.then&&_.then(h,p)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var c=new Q(function(d,h){var p=i(d,h,u);p&&p.then&&p.then(d,h)});return c._lib=!0,c},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var i=this._root(),o=Q.resolve(n);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var u=i.idbtrans.objectStore(i.storeNames[0]);(function d(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(u.get(-1/0).onsuccess=d)})()}var c=i._waitingFor;return new Q(function(d,h){o.then(function(p){return i._waitingQueue.push(je(d.bind(null,p)))},function(p){return i._waitingQueue.push(je(h.bind(null,p)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new H.Abort))},t.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(g(i,n))return i[n];var o=this.schema[n];if(!o)throw new H.NotFound("Table "+n+" not part of transaction");var u=new this.db.Table(n,o,this);return u.core=this.db.core.table(n),i[n]=u,u},t})();function Ac(t){return Gr(Dc.prototype,function(i,o,u,c,d){var h=this;i!=="readonly"&&o.forEach(function(p){var _,D=(_=u[p])===null||_===void 0?void 0:_.yProps;D&&(o=o.concat(D.map(function(E){return E.updatesTable})))}),this.db=t,this.mode=i,this.storeNames=o,this.schema=u,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=Wr(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Q(function(p,_){h._resolve=p,h._reject=_}),this._completion.then(function(){h.active=!1,h.on.complete.fire()},function(p){var _=h.active;return h.active=!1,h.on.error.fire(p),h.parent?h.parent._reject(p):_&&h.idbtrans&&h.idbtrans.abort(),He(p)})})}function no(t,n,i,o,u,c,d,h){return{name:t,keyPath:n,unique:i,multi:o,auto:u,compound:c,src:(i&&!d?"&":"")+(o?"*":"")+(u?"++":"")+qs(n),type:h}}function qs(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ro(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:xe(i,function(o){return[o.name,o]})}}function Ic(t){return t.length===1?t[0]:t}var Zr=function(t){try{return t.only([[]]),Zr=function(){return[[]]},[[]]}catch{return Zr=function(){return Qn},Qn}};function io(t){return t==null?function(){}:typeof t=="string"?Sc(t):function(n){return Te(n,t)}}function Sc(t){var n=t.split(".");return n.length===1?function(i){return i[t]}:function(i){return Te(i,t)}}function Zs(t){return[].slice.call(t)}var Oc=0;function Qr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Cc(t,n,i){function o(E,O){var z=Zs(E.objectStoreNames);return{schema:{name:E.name,tables:z.map(function(T){return O.objectStore(T)}).map(function(T){var I=T.keyPath,S=T.autoIncrement,M=m(I),F=I==null,K={},B={name:T.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:F,compound:M,keyPath:I,autoIncrement:S,unique:!0,extractKey:io(I)},indexes:Zs(T.indexNames).map(function(N){return T.index(N)}).map(function(N){var G=N.name,X=N.unique,Y=N.multiEntry,ue=N.keyPath,ye=m(ue),$={name:G,compound:ye,keyPath:ue,unique:X,multiEntry:Y,extractKey:io(ue)};return K[Qr(ue)]=$,$}),getIndexByKeyPath:function(N){return K[Qr(N)]}};return K[":id"]=B.primaryKey,I!=null&&(K[Qr(I)]=B.primaryKey),B})},hasGetAll:z.length>0&&"getAll"in O.objectStore(z[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function u(E){if(E.type===3)return null;if(E.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var O=E.lower,z=E.upper,T=E.lowerOpen,I=E.upperOpen,S=O===void 0?z===void 0?null:n.upperBound(z,!!I):z===void 0?n.lowerBound(O,!!T):n.bound(O,z,!!T,!!I);return S}function c(E){var O=E.name;function z(S){var M=S.trans,F=S.type,K=S.keys,B=S.values,N=S.range;return new Promise(function(G,X){G=je(G);var Y=M.objectStore(O),ue=Y.keyPath==null,ye=F==="put"||F==="add";if(!ye&&F!=="delete"&&F!=="deleteRange")throw new Error("Invalid operation type: "+F);var $=(K||B||{length:1}).length;if(K&&B&&K.length!==B.length)throw new Error("Given keys array must have same length as given values array.");if($===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});var ve,le=[],Ae=[],ie=0,Ue=function(Jt){++ie,Yr(Jt)};if(F==="deleteRange"){if(N.type===4)return G({numFailures:ie,failures:Ae,results:[],lastResult:void 0});N.type===3?le.push(ve=Y.clear()):le.push(ve=Y.delete(u(N)))}else{var st=ye?ue?[B,K]:[B,null]:[K,null],$t=st[0],_t=st[1];if(ye)for(var Pt=0;Pt<$;++Pt)le.push(ve=_t&&_t[Pt]!==void 0?Y[F]($t[Pt],_t[Pt]):Y[F]($t[Pt])),ve.onerror=Ue;else for(var Pt=0;Pt<$;++Pt)le.push(ve=Y[F]($t[Pt])),ve.onerror=Ue}var On=function(Jt){var Jr=Jt.target.result;le.forEach(function(Ut,Yi){return Ut.error!=null&&(Ae[Yi]=Ut.error)}),G({numFailures:ie,failures:Ae,results:F==="delete"?K:le.map(function(Ut){return Ut.result}),lastResult:Jr})};ve.onerror=function(Jt){Ue(Jt),On(Jt)},ve.onsuccess=On})}function T(S){var M=S.trans,F=S.values,K=S.query,B=S.reverse,N=S.unique;return new Promise(function(G,X){G=je(G);var Y=K.index,ue=K.range,ye=M.objectStore(O),$=Y.isPrimaryKey?ye:ye.index(Y.name),ve=B?N?"prevunique":"prev":N?"nextunique":"next",le=F||!("openKeyCursor"in $)?$.openCursor(u(ue),ve):$.openKeyCursor(u(ue),ve);le.onerror=Xt(X),le.onsuccess=je(function(Ae){var ie=le.result;if(!ie){G(null);return}ie.___id=++Oc,ie.done=!1;var Ue=ie.continue.bind(ie),st=ie.continuePrimaryKey;st&&(st=st.bind(ie));var $t=ie.advance.bind(ie),_t=function(){throw new Error("Cursor not started")},Pt=function(){throw new Error("Cursor not stopped")};ie.trans=M,ie.stop=ie.continue=ie.continuePrimaryKey=ie.advance=_t,ie.fail=je(X),ie.next=function(){var On=this,Jt=1;return this.start(function(){return Jt--?On.continue():On.stop()}).then(function(){return On})},ie.start=function(On){var Jt=new Promise(function(Ut,Yi){Ut=je(Ut),le.onerror=Xt(Yi),ie.fail=Yi,ie.stop=function(_f){ie.stop=ie.continue=ie.continuePrimaryKey=ie.advance=Pt,Ut(_f)}}),Jr=function(){if(le.result)try{On()}catch(Ut){ie.fail(Ut)}else ie.done=!0,ie.start=function(){throw new Error("Cursor behind last entry")},ie.stop()};return le.onsuccess=je(function(Ut){le.onsuccess=Jr,Jr()}),ie.continue=Ue,ie.continuePrimaryKey=st,ie.advance=$t,Jr(),Jt},G(ie)},X)})}function I(S){return function(M){return new Promise(function(F,K){F=je(F);var B=M.trans,N=M.values,G=M.limit,X=M.query,Y=G===1/0?void 0:G,ue=X.index,ye=X.range,$=B.objectStore(O),ve=ue.isPrimaryKey?$:$.index(ue.name),le=u(ye);if(G===0)return F({result:[]});if(S){var Ae=N?ve.getAll(le,Y):ve.getAllKeys(le,Y);Ae.onsuccess=function($t){return F({result:$t.target.result})},Ae.onerror=Xt(K)}else{var ie=0,Ue=N||!("openKeyCursor"in ve)?ve.openCursor(le):ve.openKeyCursor(le),st=[];Ue.onsuccess=function($t){var _t=Ue.result;if(!_t)return F({result:st});if(st.push(N?_t.value:_t.primaryKey),++ie===G)return F({result:st});_t.continue()},Ue.onerror=Xt(K)}})}}return{name:O,schema:E,mutate:z,getMany:function(S){var M=S.trans,F=S.keys;return new Promise(function(K,B){K=je(K);for(var N=M.objectStore(O),G=F.length,X=new Array(G),Y=0,ue=0,ye,$=function(ie){var Ue=ie.target;(X[Ue._pos]=Ue.result)!=null,++ue===Y&&K(X)},ve=Xt(B),le=0;le<G;++le){var Ae=F[le];Ae!=null&&(ye=N.get(F[le]),ye._pos=le,ye.onsuccess=$,ye.onerror=ve,++Y)}Y===0&&K(X)})},get:function(S){var M=S.trans,F=S.key;return new Promise(function(K,B){K=je(K);var N=M.objectStore(O),G=N.get(F);G.onsuccess=function(X){return K(X.target.result)},G.onerror=Xt(B)})},query:I(p),openCursor:T,count:function(S){var M=S.query,F=S.trans,K=M.index,B=M.range;return new Promise(function(N,G){var X=F.objectStore(O),Y=K.isPrimaryKey?X:X.index(K.name),ue=u(B),ye=ue?Y.count(ue):Y.count();ye.onsuccess=je(function($){return N($.target.result)}),ye.onerror=Xt(G)})}}}var d=o(t,i),h=d.schema,p=d.hasGetAll,_=h.tables.map(function(E){return c(E)}),D={};return _.forEach(function(E){return D[E.name]=E}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(E){var O=D[E];if(!O)throw new Error("Table '".concat(E,"' not found"));return D[E]},MIN_KEY:-1/0,MAX_KEY:Zr(n),schema:h}}function Pc(t,n){return n.reduce(function(i,o){var u=o.create;return l(l({},i),u(i))},t)}function Rc(t,n,i,o){var u=i.IDBKeyRange;i.indexedDB;var c=Pc(Cc(n,u,o),t.dbcore);return{dbcore:c}}function Ni(t,n){var i=n.db,o=Rc(t._middlewares,i,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(u){var c=u.name;t.core.schema.tables.some(function(d){return d.name===c})&&(u.core=t.core.table(c),t[c]instanceof t.Table&&(t[c].core=u.core))})}function Fi(t,n,i,o){i.forEach(function(u){var c=o[u];n.forEach(function(d){var h=q(d,u);(!h||"value"in h&&h.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?L(d,u,{get:function(){return this.table(u)},set:function(p){P(this,u,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new t.Table(u,c))})})}function ao(t,n){n.forEach(function(i){for(var o in i)i[o]instanceof t.Table&&delete i[o]})}function Mc(t,n){return t._cfg.version-n._cfg.version}function Lc(t,n,i,o){var u=t._dbSchema;i.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=ro("$meta",Xs("")[0],[]),t._storeNames.push("$meta"));var c=t._createTransaction("readwrite",t._storeNames,u);c.create(i),c._completion.catch(o);var d=c._reject.bind(c),h=re.transless||re;xn(function(){if(re.trans=c,re.transless=h,n===0)y(u).forEach(function(p){so(i,p,u[p].primKey,u[p].indexes)}),Ni(t,i),Q.follow(function(){return t.on.populate.fire(c)}).catch(d);else return Ni(t,i),Fc(t,c,n).then(function(p){return Kc(t,p,c,i)}).catch(d)})}function Nc(t,n){Qs(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=Bi(t,t.idbdb,n);ji(t,t._dbSchema,n);for(var o=oo(i,t._dbSchema),u=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=n.objectStore(_.name);_.add.forEach(function(E){Qt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(E.src)),Ki(D,E)})},c=0,d=o.change;c<d.length;c++){var h=d[c],p=u(h);if(typeof p=="object")return p.value}}function Fc(t,n,i){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??i}):Q.resolve(i)}function Kc(t,n,i,o){var u=[],c=t._versions,d=t._dbSchema=Bi(t,t.idbdb,o),h=c.filter(function(_){return _._cfg.version>=n});if(h.length===0)return Q.resolve();h.forEach(function(_){u.push(function(){var D=d,E=_._cfg.dbschema;ji(t,D,o),ji(t,E,o),d=t._dbSchema=E;var O=oo(D,E);O.add.forEach(function(F){so(o,F[0],F[1].primKey,F[1].indexes)}),O.change.forEach(function(F){if(F.recreate)throw new H.Upgrade("Not yet support for changing primary key");var K=o.objectStore(F.name);F.add.forEach(function(B){return Ki(K,B)}),F.change.forEach(function(B){K.deleteIndex(B.name),Ki(K,B)}),F.del.forEach(function(B){return K.deleteIndex(B)})});var z=_._cfg.contentUpgrade;if(z&&_._cfg.version>n){Ni(t,o),i._memoizedTables={};var T=ke(E);O.del.forEach(function(F){T[F]=D[F]}),ao(t,[t.Transaction.prototype]),Fi(t,[t.Transaction.prototype],y(T),T),i.schema=T;var I=jt(z);I&&mr();var S,M=Q.follow(function(){if(S=z(i),S&&I){var F=Tn.bind(null,null);S.then(F,F)}});return S&&typeof S.then=="function"?Q.resolve(S):M.then(function(){return S})}}),u.push(function(D){var E=_._cfg.dbschema;Bc(E,D),ao(t,[t.Transaction.prototype]),Fi(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),i.schema=t._dbSchema}),u.push(function(D){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===_._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(E){return E!=="$meta"})):D.objectStore("$meta").put(_._cfg.version,"version"))})});function p(){return u.length?Q.resolve(u.shift()(i.idbtrans)).then(p):Q.resolve()}return p().then(function(){Qs(d,o)})}function oo(t,n){var i={del:[],add:[],change:[]},o;for(o in t)n[o]||i.del.push(o);for(o in n){var u=t[o],c=n[o];if(!u)i.add.push([o,c]);else{var d={name:o,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)d.recreate=!0,i.change.push(d);else{var h=u.idxByName,p=c.idxByName,_=void 0;for(_ in h)p[_]||d.del.push(_);for(_ in p){var D=h[_],E=p[_];D?D.src!==E.src&&d.change.push(E):d.add.push(E)}(d.del.length>0||d.add.length>0||d.change.length>0)&&i.change.push(d)}}}return i}function so(t,n,i,o){var u=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(c){return Ki(u,c)}),u}function Qs(t,n){y(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(Qt&&console.debug("Dexie: Creating missing table",i),so(n,i,t[i].primKey,t[i].indexes))})}function Bc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(i){return t[i]==null&&n.db.deleteObjectStore(i)})}function Ki(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Bi(t,n,i){var o={},u=Z(n.objectStoreNames,0);return u.forEach(function(c){for(var d=i.objectStore(c),h=d.keyPath,p=no(qs(h),h||"",!0,!1,!!d.autoIncrement,h&&typeof h!="string",!0),_=[],D=0;D<d.indexNames.length;++D){var E=d.index(d.indexNames[D]);h=E.keyPath;var O=no(E.name,h,!!E.unique,!!E.multiEntry,!1,h&&typeof h!="string",!1);_.push(O)}o[c]=ro(c,p,_)}),o}function jc(t,n,i){t.verno=n.version/10;var o=t._dbSchema=Bi(t,n,i);t._storeNames=Z(n.objectStoreNames,0),Fi(t,[t._allTables],y(o),o)}function zc(t,n){var i=Bi(t,t.idbdb,n),o=oo(i,t._dbSchema);return!(o.add.length||o.change.some(function(u){return u.add.length||u.change.length}))}function ji(t,n,i){for(var o=i.db.objectStoreNames,u=0;u<o.length;++u){var c=o[u],d=i.objectStore(c);t._hasGetAll="getAll"in d;for(var h=0;h<d.indexNames.length;++h){var p=d.indexNames[h],_=d.index(p).keyPath,D=typeof _=="string"?_:"["+Z(_).join("+")+"]";if(n[c]){var E=n[c].idxByName[D];E&&(E.name=p,delete n[c].idxByName[D],n[c].idxByName[p]=E)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Xs(t){return t.split(",").map(function(n,i){var o,u=n.split(":"),c=(o=u[1])===null||o===void 0?void 0:o.trim();n=u[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return no(d,h||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),m(h),i===0,c)})}var Vc=(function(){function t(){}return t.prototype._createTableSchema=function(n,i,o){return ro(n,i,o)},t.prototype._parseIndexSyntax=function(n){return Xs(n)},t.prototype._parseStoresSpec=function(n,i){var o=this;y(n).forEach(function(u){if(n[u]!==null){var c=o._parseIndexSyntax(n[u]),d=c.shift();if(!d)throw new H.Schema("Invalid schema for table "+u+": "+n[u]);if(d.unique=!0,d.multi)throw new H.Schema("Primary key cannot be multiEntry*");c.forEach(function(p){if(p.auto)throw new H.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new H.Schema("Index must have a name and cannot be an empty string")});var h=o._createTableSchema(u,d,c);i[u]=h}})},t.prototype.stores=function(n){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?x(this._cfg.storesSource,n):n;var o=i._versions,u={},c={};return o.forEach(function(d){x(u,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(u,c)}),i._dbSchema=c,ao(i,[i._allTables,i,i.Transaction.prototype]),Fi(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],y(c),c),i._storeNames=y(c),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=Ba(this._cfg.contentUpgrade||ne,n),this},t})();function Uc(t){return Gr(Vc.prototype,function(i){this.db=t,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function uo(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new fn(Oi,{addons:[],indexedDB:t,IDBKeyRange:n}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function lo(t){return t&&typeof t.databases=="function"}function Hc(t){var n=t.indexedDB,i=t.IDBKeyRange;return lo(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(u){return u.name}).filter(function(u){return u!==Oi})}):uo(n,i).toCollection().primaryKeys()}function Wc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!lo(i)&&n!==Oi&&uo(i,o).put({name:n}).catch(ne)}function Gc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!lo(i)&&n!==Oi&&uo(i,o).delete(n).catch(ne)}function co(t){return xn(function(){return re.letThrough=!0,t()})}function Yc(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var fo;function ho(t){return!("from"in t)}var ot=function(t,n){if(this)x(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var i=new ot;return t&&"d"in t&&x(i,t),i}};k(ot.prototype,(fo={add:function(t){return $r(this,t),this},addKey:function(t){return Xr(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return Xr(n,i,i)}),this},hasKey:function(t){var n=zi(this).next(t).value;return n&&De(n.from,t)<=0&&De(n.to,t)>=0}},fo[Fe]=function(){return zi(this)},fo));function Xr(t,n,i){var o=De(n,i);if(!isNaN(o)){if(o>0)throw RangeError();if(ho(t))return x(t,{from:n,to:i,d:1});var u=t.l,c=t.r;if(De(i,t.from)<0)return u?Xr(u,n,i):t.l={from:n,to:i,d:1,l:null,r:null},Js(t);if(De(n,t.to)>0)return c?Xr(c,n,i):t.r={from:n,to:i,d:1,l:null,r:null},Js(t);De(n,t.from)<0&&(t.from=n,t.l=null,t.d=c?c.d+1:1),De(i,t.to)>0&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;u&&!t.l&&$r(t,u),c&&d&&$r(t,c)}}function $r(t,n){function i(o,u){var c=u.from,d=u.to,h=u.l,p=u.r;Xr(o,c,d),h&&i(o,h),p&&i(o,p)}ho(n)||i(t,n)}function $s(t,n){var i=zi(n),o=i.next();if(o.done)return!1;for(var u=o.value,c=zi(t),d=c.next(u.from),h=d.value;!o.done&&!d.done;){if(De(h.from,u.to)<=0&&De(h.to,u.from)>=0)return!0;De(u.from,h.from)<0?u=(o=i.next(h.from)).value:h=(d=c.next(u.from)).value}return!1}function zi(t){var n=ho(t)?null:{s:0,n:t};return{next:function(i){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&De(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||De(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function Js(t){var n,i,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),u=o>1?"r":o<-1?"l":"";if(u){var c=u==="r"?"l":"r",d=l({},t),h=t[u];t.from=h.from,t.to=h.to,t[u]=h[u],d[u]=h[c],t[c]=d,d.d=eu(d)}t.d=eu(t)}function eu(t){var n=t.r,i=t.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function Vi(t,n){return y(n).forEach(function(i){t[i]?$r(t[i],n[i]):t[i]=Me(n[i])}),t}function vo(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&$s(n[i],t[i])})}var $n={},po={},yo=!1;function Ui(t,n){Vi(po,t),yo||(yo=!0,setTimeout(function(){yo=!1;var i=po;po={},mo(i,!1)},0))}function mo(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var o=0,u=Object.values($n);o<u.length;o++){var c=u[o];tu(c,t,i,n)}else for(var d in t){var h=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(h){var p=h[1],_=h[2],c=$n["idb://".concat(p,"/").concat(_)];c&&tu(c,t,i,n)}}i.forEach(function(D){return D()})}function tu(t,n,i,o){for(var u=[],c=0,d=Object.entries(t.queries.query);c<d.length;c++){for(var h=d[c],p=h[0],_=h[1],D=[],E=0,O=_;E<O.length;E++){var z=O[E];vo(n,z.obsSet)?z.subscribers.forEach(function(M){return i.add(M)}):o&&D.push(z)}o&&u.push([p,D])}if(o)for(var T=0,I=u;T<I.length;T++){var S=I[T],p=S[0],D=S[1];t.queries.query[p]=D}}function qc(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?He(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,u=Math.round(t.verno*10),c=!1;function d(){if(n.openCanceller!==o)throw new H.DatabaseClosed("db.open() was cancelled")}var h=n.dbReadyResolve,p=null,_=!1,D=function(){return new Q(function(E,O){if(d(),!i)throw new H.MissingAPI;var z=t.name,T=n.autoSchema||!u?i.open(z):i.open(z,u);if(!T)throw new H.MissingAPI;T.onerror=Xt(O),T.onblocked=je(t._fireOnBlocked),T.onupgradeneeded=je(function(I){if(p=T.transaction,n.autoSchema&&!t._options.allowEmptyDB){T.onerror=Yr,p.abort(),T.result.close();var S=i.deleteDatabase(z);S.onsuccess=S.onerror=je(function(){O(new H.NoSuchDatabase("Database ".concat(z," doesnt exist")))})}else{p.onerror=Xt(O);var M=I.oldVersion>Math.pow(2,62)?0:I.oldVersion;_=M<1,t.idbdb=T.result,c&&Nc(t,p),Lc(t,M/10,p,O)}},O),T.onsuccess=je(function(){p=null;var I=t.idbdb=T.result,S=Z(I.objectStoreNames);if(S.length>0)try{var M=I.transaction(Ic(S),"readonly");if(n.autoSchema)jc(t,I,M);else if(ji(t,t._dbSchema,M),!zc(t,M)&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),I.close(),u=I.version+1,c=!0,E(D());Ni(t,M)}catch{}gr.push(t),I.onversionchange=je(function(F){n.vcFired=!0,t.on("versionchange").fire(F)}),I.onclose=je(function(){t.close({disableAutoOpen:!1})}),_&&Wc(t._deps,z),E()},O)}).catch(function(E){switch(E?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(u>0)return u=0,D();break}return Q.reject(E)})};return Q.race([o,(typeof navigator>"u"?Q.resolve():Yc()).then(D)]).then(function(){return d(),n.onReadyBeingFired=[],Q.resolve(co(function(){return t.on.ready.fire(t.vip)})).then(function E(){if(n.onReadyBeingFired.length>0){var O=n.onReadyBeingFired.reduce(Ba,ne);return n.onReadyBeingFired=[],Q.resolve(co(function(){return O(t.vip)})).then(E)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(E){n.dbOpenError=E;try{p&&p.abort()}catch{}return o===n.openCanceller&&t._close(),He(E)}).finally(function(){n.openComplete=!0,h()}).then(function(){if(_){var E={};t.tables.forEach(function(O){O.schema.indexes.forEach(function(z){z.name&&(E["idb://".concat(t.name,"/").concat(O.name,"/").concat(z.name)]=new ot(-1/0,[[[]]]))}),E["idb://".concat(t.name,"/").concat(O.name,"/")]=E["idb://".concat(t.name,"/").concat(O.name,"/:dels")]=new ot(-1/0,[[[]]])}),An(qr).fire(E),mo(E,!0)}return t})}function go(t){var n=function(d){return t.next(d)},i=function(d){return t.throw(d)},o=c(n),u=c(i);function c(d){return function(h){var p=d(h),_=p.value;return p.done?_:!_||typeof _.then!="function"?m(_)?Promise.all(_).then(o,u):o(_):_.then(o,u)}}return c(n)()}function Zc(t,n,i){var o=arguments.length;if(o<2)throw new H.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];i=u.pop();var c=qe(u);return[t,c,i]}function nu(t,n,i,o,u){return Q.resolve().then(function(){var c=re.transless||re,d=t._createTransaction(n,i,t._dbSchema,o);d.explicit=!0;var h={trans:d,transless:c};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(E){return E.name===W.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return nu(t,n,i,null,u)})):He(E)}var p=jt(u);p&&mr();var _,D=Q.follow(function(){if(_=u.call(d,d),_)if(p){var E=Tn.bind(null,null);_.then(E,E)}else typeof _.next=="function"&&typeof _.throw=="function"&&(_=go(_))},h);return(_&&typeof _.then=="function"?Q.resolve(_).then(function(E){return d.active?E:He(new H.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return _})).then(function(E){return o&&d._resolve(),d._completion.then(function(){return E})}).catch(function(E){return d._reject(E),He(E)})})}function Hi(t,n,i){for(var o=m(t)?t.slice():[t],u=0;u<i;++u)o.push(n);return o}function Qc(t){return l(l({},t),{table:function(n){var i=t.table(n),o=i.schema,u={},c=[];function d(I,S,M){var F=Qr(I),K=u[F]=u[F]||[],B=I==null?0:typeof I=="string"?1:I.length,N=S>0,G=l(l({},M),{name:N?"".concat(F,"(virtual-from:").concat(M.name,")"):M.name,lowLevelIndex:M,isVirtual:N,keyTail:S,keyLength:B,extractKey:io(I),unique:!N&&M.unique});if(K.push(G),G.isPrimaryKey||c.push(G),B>1){var X=B===2?I[0]:I.slice(0,B-1);d(X,S+1,M)}return K.sort(function(Y,ue){return Y.keyTail-ue.keyTail}),G}var h=d(o.primaryKey.keyPath,0,o.primaryKey);u[":id"]=[h];for(var p=0,_=o.indexes;p<_.length;p++){var D=_[p];d(D.keyPath,0,D)}function E(I){var S=u[Qr(I)];return S&&S[0]}function O(I,S){return{type:I.type===1?2:I.type,lower:Hi(I.lower,I.lowerOpen?t.MAX_KEY:t.MIN_KEY,S),lowerOpen:!0,upper:Hi(I.upper,I.upperOpen?t.MIN_KEY:t.MAX_KEY,S),upperOpen:!0}}function z(I){var S=I.query.index;return S.isVirtual?l(l({},I),{query:{index:S.lowLevelIndex,range:O(I.query.range,S.keyTail)}}):I}var T=l(l({},i),{schema:l(l({},o),{primaryKey:h,indexes:c,getIndexByKeyPath:E}),count:function(I){return i.count(z(I))},query:function(I){return i.query(z(I))},openCursor:function(I){var S=I.query.index,M=S.keyTail,F=S.isVirtual,K=S.keyLength;if(!F)return i.openCursor(I);function B(N){function G(Y){Y!=null?N.continue(Hi(Y,I.reverse?t.MAX_KEY:t.MIN_KEY,M)):I.unique?N.continue(N.key.slice(0,K).concat(I.reverse?t.MIN_KEY:t.MAX_KEY,M)):N.continue()}var X=Object.create(N,{continue:{value:G},continuePrimaryKey:{value:function(Y,ue){N.continuePrimaryKey(Hi(Y,t.MAX_KEY,M),ue)}},primaryKey:{get:function(){return N.primaryKey}},key:{get:function(){var Y=N.key;return K===1?Y[0]:Y.slice(0,K)}},value:{get:function(){return N.value}}});return X}return i.openCursor(z(I)).then(function(N){return N&&B(N)})}});return T}})}var Xc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Qc};function _o(t,n,i,o){return i=i||{},o=o||"",y(t).forEach(function(u){if(!g(n,u))i[o+u]=void 0;else{var c=t[u],d=n[u];if(typeof c=="object"&&typeof d=="object"&&c&&d){var h=Ve(c),p=Ve(d);h!==p?i[o+u]=n[u]:h==="Object"?_o(c,d,i,o+u+"."):c!==d&&(i[o+u]=n[u])}else c!==d&&(i[o+u]=n[u])}}),y(n).forEach(function(u){g(t,u)||(i[o+u]=n[u])}),i}function bo(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var $c={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return l(l({},t),{table:function(n){var i=t.table(n),o=i.schema.primaryKey,u=l(l({},i),{mutate:function(c){var d=re.trans,h=d.table(n).hook,p=h.deleting,_=h.creating,D=h.updating;switch(c.type){case"add":if(_.fire===ne)break;return d._promise("readwrite",function(){return E(c)},!0);case"put":if(_.fire===ne&&D.fire===ne)break;return d._promise("readwrite",function(){return E(c)},!0);case"delete":if(p.fire===ne)break;return d._promise("readwrite",function(){return E(c)},!0);case"deleteRange":if(p.fire===ne)break;return d._promise("readwrite",function(){return O(c)},!0)}return i.mutate(c);function E(T){var I=re.trans,S=T.keys||bo(o,T);if(!S)throw new Error("Keys missing");return T=T.type==="add"||T.type==="put"?l(l({},T),{keys:S}):l({},T),T.type!=="delete"&&(T.values=f([],T.values)),T.keys&&(T.keys=f([],T.keys)),Jc(i,T,S).then(function(M){var F=S.map(function(K,B){var N=M[B],G={onerror:null,onsuccess:null};if(T.type==="delete")p.fire.call(G,K,N,I);else if(T.type==="add"||N===void 0){var X=_.fire.call(G,K,T.values[B],I);K==null&&X!=null&&(K=X,T.keys[B]=K,o.outbound||he(T.values[B],o.keyPath,K))}else{var Y=_o(N,T.values[B]),ue=D.fire.call(G,Y,K,N,I);if(ue){var ye=T.values[B];Object.keys(ue).forEach(function($){g(ye,$)?ye[$]=ue[$]:he(ye,$,ue[$])})}}return G});return i.mutate(T).then(function(K){for(var B=K.failures,N=K.results,G=K.numFailures,X=K.lastResult,Y=0;Y<S.length;++Y){var ue=N?N[Y]:S[Y],ye=F[Y];ue==null?ye.onerror&&ye.onerror(B[Y]):ye.onsuccess&&ye.onsuccess(T.type==="put"&&M[Y]?T.values[Y]:ue)}return{failures:B,results:N,numFailures:G,lastResult:X}}).catch(function(K){return F.forEach(function(B){return B.onerror&&B.onerror(K)}),Promise.reject(K)})})}function O(T){return z(T.trans,T.range,1e4)}function z(T,I,S){return i.query({trans:T,values:!1,query:{index:o,range:I},limit:S}).then(function(M){var F=M.result;return E({type:"delete",keys:F,trans:T}).then(function(K){return K.numFailures>0?Promise.reject(K.failures[0]):F.length<S?{failures:[],numFailures:0,lastResult:void 0}:z(T,l(l({},I),{lower:F[F.length-1],lowerOpen:!0}),S)})})}}});return u}})}};function Jc(t,n,i){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:i,cache:"immutable"})}function ru(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var o=[],u=0,c=0;u<n.keys.length&&c<t.length;++u)De(n.keys[u],t[c])===0&&(o.push(i?Qe(n.values[u]):n.values[u]),++c);return o.length===t.length?o:null}catch{return null}}var ef={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return l(l({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var u=ru(o.keys,o.trans._cache,o.cache==="clone");return u?Q.resolve(u):i.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?Qe(c):c},c})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function iu(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function au(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var tf={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new ot(t.MIN_KEY,t.MAX_KEY);return l(l({},t),{transaction:function(o,u,c){if(re.subscr&&u!=="readonly")throw new H.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(re.querier));return t.transaction(o,u,c)},table:function(o){var u=t.table(o),c=u.schema,d=c.primaryKey,h=c.indexes,p=d.extractKey,_=d.outbound,D=d.autoIncrement&&h.filter(function(T){return T.compound&&T.keyPath.includes(d.keyPath)}),E=l(l({},u),{mutate:function(T){var I,S,M=T.trans,F=T.mutatedParts||(T.mutatedParts={}),K=function(le){var Ae="idb://".concat(n,"/").concat(o,"/").concat(le);return F[Ae]||(F[Ae]=new ot)},B=K(""),N=K(":dels"),G=T.type,X=T.type==="deleteRange"?[T.range]:T.type==="delete"?[T.keys]:T.values.length<50?[bo(d,T).filter(function(le){return le}),T.values]:[],Y=X[0],ue=X[1],ye=T.trans._cache;if(m(Y)){B.addKeys(Y);var $=G==="delete"||Y.length===ue.length?ru(Y,ye):null;$||N.addKeys(Y),($||ue)&&nf(K,c,$,ue)}else if(Y){var ve={from:(I=Y.lower)!==null&&I!==void 0?I:t.MIN_KEY,to:(S=Y.upper)!==null&&S!==void 0?S:t.MAX_KEY};N.add(ve),B.add(ve)}else B.add(i),N.add(i),c.indexes.forEach(function(le){return K(le.name).add(i)});return u.mutate(T).then(function(le){return Y&&(T.type==="add"||T.type==="put")&&(B.addKeys(le.results),D&&D.forEach(function(Ae){for(var ie=T.values.map(function(_t){return Ae.extractKey(_t)}),Ue=Ae.keyPath.findIndex(function(_t){return _t===d.keyPath}),st=0,$t=le.results.length;st<$t;++st)ie[st][Ue]=le.results[st];K(Ae.name).addKeys(ie)})),M.mutatedParts=Vi(M.mutatedParts||{},F),le})}}),O=function(T){var I,S,M=T.query,F=M.index,K=M.range;return[F,new ot((I=K.lower)!==null&&I!==void 0?I:t.MIN_KEY,(S=K.upper)!==null&&S!==void 0?S:t.MAX_KEY)]},z={get:function(T){return[d,new ot(T.key)]},getMany:function(T){return[d,new ot().addKeys(T.keys)]},count:O,query:O,openCursor:O};return y(z).forEach(function(T){E[T]=function(I){var S=re.subscr,M=!!S,F=iu(re,u)&&au(T,I),K=F?I.obsSet={}:S;if(M){var B=function($){var ve="idb://".concat(n,"/").concat(o,"/").concat($);return K[ve]||(K[ve]=new ot)},N=B(""),G=B(":dels"),X=z[T](I),Y=X[0],ue=X[1];if(T==="query"&&Y.isPrimaryKey&&!I.values?G.add(ue):B(Y.name||"").add(ue),!Y.isPrimaryKey)if(T==="count")G.add(i);else{var ye=T==="query"&&_&&I.values&&u.query(l(l({},I),{values:!1}));return u[T].apply(this,arguments).then(function($){if(T==="query"){if(_&&I.values)return ye.then(function(ie){var Ue=ie.result;return N.addKeys(Ue),$});var ve=I.values?$.result.map(p):$.result;I.values?N.addKeys(ve):G.addKeys(ve)}else if(T==="openCursor"){var le=$,Ae=I.values;return le&&Object.create(le,{key:{get:function(){return G.addKey(le.primaryKey),le.key}},primaryKey:{get:function(){var ie=le.primaryKey;return G.addKey(ie),ie}},value:{get:function(){return Ae&&N.addKey(le.primaryKey),le.value}}})}return $})}}return u[T].apply(this,arguments)}}),E}})}};function nf(t,n,i,o){function u(c){var d=t(c.name||"");function h(_){return _!=null?c.extractKey(_):null}var p=function(_){return c.multiEntry&&m(_)?_.forEach(function(D){return d.addKey(D)}):d.addKey(_)};(i||o).forEach(function(_,D){var E=i&&h(i[D]),O=o&&h(o[D]);De(E,O)!==0&&(E!=null&&p(E),O!=null&&p(O))})}n.indexes.forEach(u)}function ou(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(i.numFailures===o)return null;var u=l({},n);return m(u.keys)&&(u.keys=u.keys.filter(function(c,d){return!(d in i.failures)})),"values"in u&&m(u.values)&&(u.values=u.values.filter(function(c,d){return!(d in i.failures)})),u}function rf(t,n){return n.lower===void 0?!0:n.lowerOpen?De(t,n.lower)>0:De(t,n.lower)>=0}function af(t,n){return n.upper===void 0?!0:n.upperOpen?De(t,n.upper)<0:De(t,n.upper)<=0}function wo(t,n){return rf(t,n)&&af(t,n)}function su(t,n,i,o,u,c){if(!i||i.length===0)return t;var d=n.query.index,h=d.multiEntry,p=n.query.range,_=o.schema.primaryKey,D=_.extractKey,E=d.extractKey,O=(d.lowLevelIndex||d).extractKey,z=i.reduce(function(T,I){var S=T,M=[];if(I.type==="add"||I.type==="put")for(var F=new ot,K=I.values.length-1;K>=0;--K){var B=I.values[K],N=D(B);if(!F.hasKey(N)){var G=E(B);(h&&m(G)?G.some(function($){return wo($,p)}):wo(G,p))&&(F.addKey(N),M.push(B))}}switch(I.type){case"add":{var X=new ot().addKeys(n.values?T.map(function($){return D($)}):T);S=T.concat(n.values?M.filter(function($){var ve=D($);return X.hasKey(ve)?!1:(X.addKey(ve),!0)}):M.map(function($){return D($)}).filter(function($){return X.hasKey($)?!1:(X.addKey($),!0)}));break}case"put":{var Y=new ot().addKeys(I.values.map(function($){return D($)}));S=T.filter(function($){return!Y.hasKey(n.values?D($):$)}).concat(n.values?M:M.map(function($){return D($)}));break}case"delete":var ue=new ot().addKeys(I.keys);S=T.filter(function($){return!ue.hasKey(n.values?D($):$)});break;case"deleteRange":var ye=I.range;S=T.filter(function($){return!wo(D($),ye)});break}return S},t);return z===t?t:(z.sort(function(T,I){return De(O(T),O(I))||De(D(T),D(I))}),n.limit&&n.limit<1/0&&(z.length>n.limit?z.length=n.limit:t.length===n.limit&&z.length<n.limit&&(u.dirty=!0)),c?Object.freeze(z):z)}function uu(t,n){return De(t.lower,n.lower)===0&&De(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function of(t,n,i,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var u=De(t,n);if(u===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return u}function sf(t,n,i,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var u=De(t,n);if(u===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return u}function uf(t,n){return of(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&sf(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function lf(t,n,i,o){var u=$n["idb://".concat(t,"/").concat(n)];if(!u)return[];var c=u.queries[i];if(!c)return[null,!1,u,null];var d=o.query?o.query.index.name:null,h=c[d||""];if(!h)return[null,!1,u,null];switch(i){case"query":var p=h.find(function(E){return E.req.limit===o.limit&&E.req.values===o.values&&uu(E.req.query.range,o.query.range)});if(p)return[p,!0,u,h];var _=h.find(function(E){var O="limit"in E.req?E.req.limit:1/0;return O>=o.limit&&(o.values?E.req.values:!0)&&uf(E.req.query.range,o.query.range)});return[_,!1,u,h];case"count":var D=h.find(function(E){return uu(E.req.query.range,o.query.range)});return[D,!!D,u,h]}}function cf(t,n,i,o){t.subscribers.add(i),o.addEventListener("abort",function(){t.subscribers.delete(i),t.subscribers.size===0&&ff(t,n)})}function ff(t,n){setTimeout(function(){t.subscribers.size===0&&Ie(n,t)},3e3)}var df={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,i=l(l({},t),{transaction:function(o,u,c){var d=t.transaction(o,u,c);if(u==="readwrite"){var h=new AbortController,p=h.signal,_=function(D){return function(){if(h.abort(),u==="readwrite"){for(var E=new Set,O=0,z=o;O<z.length;O++){var T=z[O],I=$n["idb://".concat(n,"/").concat(T)];if(I){var S=t.table(T),M=I.optimisticOps.filter(function(Ae){return Ae.trans===d});if(d._explicit&&D&&d.mutatedParts)for(var F=0,K=Object.values(I.queries.query);F<K.length;F++)for(var B=K[F],N=0,G=B.slice();N<G.length;N++){var X=G[N];vo(X.obsSet,d.mutatedParts)&&(Ie(B,X),X.subscribers.forEach(function(Ae){return E.add(Ae)}))}else if(M.length>0){I.optimisticOps=I.optimisticOps.filter(function(Ae){return Ae.trans!==d});for(var Y=0,ue=Object.values(I.queries.query);Y<ue.length;Y++)for(var B=ue[Y],ye=0,$=B.slice();ye<$.length;ye++){var X=$[ye];if(X.res!=null&&d.mutatedParts)if(D&&!X.dirty){var ve=Object.isFrozen(X.res),le=su(X.res,X.req,M,S,X,ve);X.dirty?(Ie(B,X),X.subscribers.forEach(function(Ue){return E.add(Ue)})):le!==X.res&&(X.res=le,X.promise=Q.resolve({result:le}))}else X.dirty&&Ie(B,X),X.subscribers.forEach(function(Ue){return E.add(Ue)})}}}}E.forEach(function(Ae){return Ae()})}}};d.addEventListener("abort",_(!1),{signal:p}),d.addEventListener("error",_(!1),{signal:p}),d.addEventListener("complete",_(!0),{signal:p})}return d},table:function(o){var u=t.table(o),c=u.schema.primaryKey,d=l(l({},u),{mutate:function(h){var p=re.trans;if(c.outbound||p.db._options.cache==="disabled"||p.explicit||p.idbtrans.mode!=="readwrite")return u.mutate(h);var _=$n["idb://".concat(n,"/").concat(o)];if(!_)return u.mutate(h);var D=u.mutate(h);return(h.type==="add"||h.type==="put")&&(h.values.length>=50||bo(c,h).some(function(E){return E==null}))?D.then(function(E){var O=l(l({},h),{values:h.values.map(function(T,I){var S;if(E.failures[I])return T;var M=!((S=c.keyPath)===null||S===void 0)&&S.includes(".")?Qe(T):l({},T);return he(M,c.keyPath,E.results[I]),M})}),z=ou(_,O,E);_.optimisticOps.push(z),queueMicrotask(function(){return h.mutatedParts&&Ui(h.mutatedParts)})}):(_.optimisticOps.push(h),h.mutatedParts&&Ui(h.mutatedParts),D.then(function(E){if(E.numFailures>0){Ie(_.optimisticOps,h);var O=ou(_,h,E);O&&_.optimisticOps.push(O),h.mutatedParts&&Ui(h.mutatedParts)}}),D.catch(function(){Ie(_.optimisticOps,h),h.mutatedParts&&Ui(h.mutatedParts)})),D},query:function(h){var p;if(!iu(re,u)||!au("query",h))return u.query(h);var _=((p=re.trans)===null||p===void 0?void 0:p.db._options.cache)==="immutable",D=re,E=D.requery,O=D.signal,z=lf(n,o,"query",h),T=z[0],I=z[1],S=z[2],M=z[3];if(T&&I)T.obsSet=h.obsSet;else{var F=u.query(h).then(function(K){var B=K.result;if(T&&(T.res=B),_){for(var N=0,G=B.length;N<G;++N)Object.freeze(B[N]);Object.freeze(B)}else K.result=Qe(B);return K}).catch(function(K){return M&&T&&Ie(M,T),Promise.reject(K)});T={obsSet:h.obsSet,promise:F,subscribers:new Set,type:"query",req:h,dirty:!1},M?M.push(T):(M=[T],S||(S=$n["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),S.queries.query[h.query.index.name||""]=M)}return cf(T,M,E,O),T.promise.then(function(K){return{result:su(K.result,h,S?.optimisticOps,u,T,_)}})}});return d}});return i}};function Wi(t,n){return new Proxy(t,{get:function(i,o,u){return o==="db"?n:Reflect.get(i,o,u)}})}var fn=(function(){function t(n,i){var o=this;this._middlewares={},this.verno=0;var u=t.dependencies;this._options=i=l({addons:t.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var c=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ne,dbReadyPromise:null,cancelOpen:ne,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};d.dbReadyPromise=new Q(function(p){d.dbReadyResolve=p}),d.openCanceller=new Q(function(p,_){d.cancelOpen=_}),this._state=d,this.name=n,this.on=Wr(this,"populate","blocked","versionchange","close",{ready:[Ba,ne]}),this.once=function(p,_){var D=function(){for(var E=[],O=0;O<arguments.length;O++)E[O]=arguments[O];o.on(p).unsubscribe(D),_.apply(o,E)};return o.on(p,D)},this.on.ready.subscribe=oe(this.on.ready.subscribe,function(p){return function(_,D){t.vip(function(){var E=o._state;if(E.openComplete)E.dbOpenError||Q.resolve().then(_),D&&p(_);else if(E.onReadyBeingFired)E.onReadyBeingFired.push(_),D&&p(_);else{p(_);var O=o;D||p(function z(){O.on.ready.unsubscribe(_),O.on.ready.unsubscribe(z)})}})}}),this.Collection=_c(this),this.Table=yc(this),this.Transaction=Ac(this),this.Version=Uc(this),this.WhereClause=kc(this),this.on("versionchange",function(p){p.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=Zr(i.IDBKeyRange),this._createTransaction=function(p,_,D,E){return new o.Transaction(p,_,D,o._options.chromeTransactionDurability,E)},this._fireOnBlocked=function(p){o.on("blocked").fire(p),gr.filter(function(_){return _.name===o.name&&_!==o&&!_._state.vcFired}).map(function(_){return _.on("versionchange").fire(p)})},this.use(ef),this.use(df),this.use(tf),this.use(Xc),this.use($c);var h=new Proxy(this,{get:function(p,_,D){if(_==="_vip")return!0;if(_==="table")return function(O){return Wi(o.table(O),h)};var E=Reflect.get(p,_,D);return E instanceof Vs?Wi(E,h):_==="tables"?E.map(function(O){return Wi(O,h)}):_==="_createTransaction"?function(){var O=E.apply(this,arguments);return Wi(O,h)}:E}});this.vip=h,c.forEach(function(p){return p(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new H.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new H.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,o=i.filter(function(u){return u._cfg.version===n})[0];return o||(o=new this.Version(n),i.push(o),i.sort(Mc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||re.letThrough||this._vip)?n():new Q(function(o,u){if(i._state.openComplete)return u(new H.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){u(new H.DatabaseClosed);return}i.open().catch(ne)}i._state.dbReadyPromise.then(o,u)}).then(n)},t.prototype.use=function(n){var i=n.stack,o=n.create,u=n.level,c=n.name;c&&this.unuse({stack:i,name:c});var d=this._middlewares[i]||(this._middlewares[i]=[]);return d.push({stack:i,create:o,level:u??10,name:c}),d.sort(function(h,p){return h.level-p.level}),this},t.prototype.unuse=function(n){var i=n.stack,o=n.name,u=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(c){return u?c.create!==u:o?c.name!==o:!1})),this},t.prototype.open=function(){var n=this;return Zn(En,function(){return qc(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=gr.indexOf(this);if(i>=0&&gr.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new Q(function(o){n.dbReadyResolve=o}),n.openCanceller=new Q(function(o,u){n.cancelOpen=u}))},t.prototype.close=function(n){var i=n===void 0?{disableAutoOpen:!0}:n,o=i.disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new H.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new H.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},t.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",u=this._state;return new Q(function(c,d){var h=function(){i.close(n);var p=i._deps.indexedDB.deleteDatabase(i.name);p.onsuccess=je(function(){Gc(i._deps,i.name),c()}),p.onerror=Xt(d),p.onblocked=i._fireOnBlocked};if(o)throw new H.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(h):h()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return y(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=Zc.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,i,o){var u=this,c=re.trans;(!c||c.db!==this||n.indexOf("!")!==-1)&&(c=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var h,p;try{if(p=i.map(function(D){var E=D instanceof u.Table?D.name:D;if(typeof E!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return E}),n=="r"||n===Xa)h=Xa;else if(n=="rw"||n==$a)h=$a;else throw new H.InvalidArgument("Invalid transaction mode: "+n);if(c){if(c.mode===Xa&&h===$a)if(d)c=null;else throw new H.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c&&p.forEach(function(D){if(c&&c.storeNames.indexOf(D)===-1)if(d)c=null;else throw new H.SubTransaction("Table "+D+" not included in parent transaction.")}),d&&c&&!c.active&&(c=null)}}catch(D){return c?c._promise(null,function(E,O){O(D)}):He(D)}var _=nu.bind(null,this,h,p,c,o);return c?c._promise(h,_,"lock"):re.trans?Zn(re.transless,function(){return u._whenReady(_)}):this._whenReady(_)},t.prototype.table=function(n){if(!g(this._allTables,n))throw new H.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),hf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",vf=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,i,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:i,complete:o}:n)},t.prototype[hf]=function(){return this},t})(),Gi;try{Gi={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{Gi={indexedDB:null,IDBKeyRange:null}}function lu(t){var n=!1,i,o=new vf(function(u){var c=jt(t);function d(M){var F=pr();try{c&&mr();var K=xn(t,M);return c&&(K=K.finally(Tn)),K}finally{F&&yr()}}var h=!1,p,_={},D={},E={get closed(){return h},unsubscribe:function(){h||(h=!0,p&&p.abort(),O&&An.storagemutated.unsubscribe(I))}};u.start&&u.start(E);var O=!1,z=function(){return qa(S)};function T(){return vo(D,_)}var I=function(M){Vi(_,M),T()&&z()},S=function(){if(!(h||!Gi.indexedDB)){_={};var M={};p&&p.abort(),p=new AbortController;var F={subscr:M,signal:p.signal,requery:z,querier:t,trans:null},K=d(F);Promise.resolve(K).then(function(B){n=!0,i=B,!(h||F.signal.aborted)&&(_={},D=M,!un(D)&&!O&&(An(qr,I),O=!0),qa(function(){return!h&&u.next&&u.next(B)}))},function(B){n=!1,["DatabaseClosedError","AbortError"].includes(B?.name)||h||qa(function(){h||u.error&&u.error(B)})})}};return setTimeout(z,0),E});return o.hasValue=function(){return n},o.getValue=function(){return i},o}var Jn=fn;k(Jn,l(l({},se),{delete:function(t){var n=new Jn(t,{addons:[]});return n.delete()},exists:function(t){return new Jn(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Hc(Jn.dependencies).then(t)}catch{return He(new H.MissingAPI)}},defineClass:function(){function t(n){x(this,n)}return t},ignoreTransaction:function(t){return re.trans?Zn(re.transless,t):t()},vip:co,async:function(t){return function(){try{var n=go(t.apply(this,arguments));return!n||typeof n.then!="function"?Q.resolve(n):n}catch(i){return He(i)}}},spawn:function(t,n,i){try{var o=go(t.apply(i,n||[]));return!o||typeof o.then!="function"?Q.resolve(o):o}catch(u){return He(u)}},currentTransaction:{get:function(){return re.trans||null}},waitFor:function(t,n){var i=Q.resolve(typeof t=="function"?Jn.ignoreTransaction(t):t).timeout(n||6e4);return re.trans?re.trans.waitFor(i):i},Promise:Q,debug:{get:function(){return Qt},set:function(t){Ds(t)}},derive:R,extend:x,props:k,override:oe,Events:Wr,on:An,liveQuery:lu,extendObservabilitySet:Vi,getByKeyPath:Te,setByKeyPath:he,delByKeyPath:we,shallowClone:ke,deepClone:Qe,getObjectDiff:_o,cmp:De,asap:Ee,minKey:Qa,addons:[],connections:gr,errnames:W,dependencies:Gi,cache:$n,semVer:Ls,version:Ls.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,i*2)})})),Jn.maxKey=Zr(Jn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(An(qr,function(t){if(!In){var n;n=new CustomEvent(to,{detail:t}),In=!0,dispatchEvent(n),In=!1}}),addEventListener(to,function(t){var n=t.detail;In||Eo(n)}));function Eo(t){var n=In;try{In=!0,An.storagemutated.fire(t),mo(t,!0)}finally{In=n}}var In=!1,Sn,xo=function(){};typeof BroadcastChannel<"u"&&(xo=function(){Sn=new BroadcastChannel(to),Sn.onmessage=function(t){return t.data&&Eo(t.data)}},xo(),typeof Sn.unref=="function"&&Sn.unref(),An(qr,function(t){In||Sn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!fn.disableBfCache&&t.persisted){Qt&&console.debug("Dexie: handling persisted pagehide"),Sn?.close();for(var n=0,i=gr;n<i.length;n++){var o=i[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!fn.disableBfCache&&t.persisted&&(Qt&&console.debug("Dexie: handling persisted pageshow"),xo(),Eo({all:new ot(-1/0,[[]])}))}));function pf(t){return new Hr({add:t})}function yf(t){return new Hr({remove:t})}function mf(t,n){return new Hr({replacePrefix:[t,n]})}Q.rejectionMapper=ae,Ds(Qt);var gf=Object.freeze({__proto__:null,Dexie:fn,liveQuery:lu,Entity:Ks,cmp:De,PropModification:Hr,replacePrefix:mf,add:pf,remove:yf,default:fn,RangeSet:ot,mergeRanges:$r,rangesOverlap:$s});return l(fn,gf,{default:fn}),fn}))})(Ji)),Ji.exports}var rh=nh();const Wo=eh(rh),xu=Symbol.for("Dexie"),ha=globalThis[xu]||(globalThis[xu]=Wo);if(Wo.semVer!==ha.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Wo.semVer} and ${ha.semVer}`);const{liveQuery:va,mergeRanges:ap,rangesOverlap:op,RangeSet:sp,cmp:up,Entity:lp,PropModification:cp,replacePrefix:fp,add:dp,remove:hp,DexieYProvider:vp}=ha;function Tu(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),a.push.apply(a,s)}return a}function pa(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Tu(Object(a),!0).forEach(function(s){Rr(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tu(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xr(e){"@babel/helpers - typeof";return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xr(e)}function Rr(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function ih(e,r){if(e==null)return{};var a={},s=Object.keys(e),l,f;for(f=0;f<s.length;f++)l=s[f],!(r.indexOf(l)>=0)&&(a[l]=e[l]);return a}function ah(e,r){if(e==null)return{};var a=ih(e,r),s,l;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(l=0;l<f.length;l++)s=f[l],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function oh(e,r){return uh(e)||ch(e,r)||_s(e,r)||dh()}function Kt(e){return sh(e)||lh(e)||_s(e)||fh()}function sh(e){if(Array.isArray(e))return Go(e)}function uh(e){if(Array.isArray(e))return e}function lh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ch(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var s=[],l=!0,f=!1,v,y;try{for(a=a.call(e);!(l=(v=a.next()).done)&&(s.push(v.value),!(r&&s.length===r));l=!0);}catch(m){f=!0,y=m}finally{try{!l&&a.return!=null&&a.return()}finally{if(f)throw y}}return s}}function _s(e,r){if(e){if(typeof e=="string")return Go(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Go(e,r)}}function Go(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=e[a];return s}function fh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _i(e,r){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_s(e))||r){a&&(e=a);var s=0,l=function(){};return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(m){throw m},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,v=!1,y;return{s:function(){a=a.call(e)},n:function(){var m=a.next();return f=m.done,m},e:function(m){v=!0,y=m},f:function(){try{!f&&a.return!=null&&a.return()}finally{if(v)throw y}}}}var hh="finalize",vh="consider";function Mr(e,r,a){e.dispatchEvent(new CustomEvent(hh,{detail:{items:r,info:a}}))}function zn(e,r,a){e.dispatchEvent(new CustomEvent(vh,{detail:{items:r,info:a}}))}var Sa="draggedEntered",bi="draggedLeft",Oa="draggedOverIndex",bs="draggedLeftDocument",ya={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function ph(e,r,a){e.dispatchEvent(new CustomEvent(Sa,{detail:{indexObj:r,draggedEl:a}}))}function yh(e,r,a){e.dispatchEvent(new CustomEvent(bi,{detail:{draggedEl:r,type:ya.LEFT_FOR_ANOTHER,theOtherDz:a}}))}function mh(e,r){e.dispatchEvent(new CustomEvent(bi,{detail:{draggedEl:r,type:ya.OUTSIDE_OF_ANY}}))}function gh(e,r,a){e.dispatchEvent(new CustomEvent(Oa,{detail:{indexObj:r,draggedEl:a}}))}function _h(e){window.dispatchEvent(new CustomEvent(bs,{detail:{draggedEl:e}}))}var mt={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Sa,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Oa,DRAGGED_LEFT:bi,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},kt={POINTER:"pointer",KEYBOARD:"keyboard"},Ca="isDndShadowItem",Pa="data-is-dnd-shadow-item-internal",bh="data-is-dnd-shadow-item-hint",Nl="id:dnd-shadow-placeholder-0000",wh="dnd-action-dragged-el",Xe="id",Yo=0;function Fl(){Yo++}function Kl(){if(Yo===0)throw new Error("Bug! trying to decrement when there are no dropzones");Yo--}var ws=typeof window>"u";function qo(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,s=r?Th(e):e.getBoundingClientRect(),l=getComputedStyle(e),f=l.transform;if(f){var v,y,m,x;if(f.startsWith("matrix3d("))a=f.slice(9,-1).split(/, /),v=+a[0],y=+a[5],m=+a[12],x=+a[13];else if(f.startsWith("matrix("))a=f.slice(7,-1).split(/, /),v=+a[0],y=+a[3],m=+a[4],x=+a[5];else return s;var w=l.transformOrigin,A=s.x-m-(1-v)*parseFloat(w),g=s.y-x-(1-y)*parseFloat(w.slice(w.indexOf(" ")+1)),k=v?s.width/v:e.offsetWidth,P=y?s.height/y:e.offsetHeight;return{x:A,y:g,width:k,height:P,top:g,right:A+k,bottom:g+P,left:A}}else return s}function Bl(e){var r=qo(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function jl(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function zl(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Eh(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function Ra(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function hi(e){return zl(jl(e))}function ku(e,r){var a=hi(e),s=Bl(r);return Ra(a,s)}function Du(e,r){var a=hi(e),s=hi(r);return Eh(a,s)}function xh(e){var r=jl(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function Th(e){for(var r=e.getBoundingClientRect(),a={top:r.top,bottom:r.bottom,left:r.left,right:r.right},s=!1,l=!1,f=e.parentElement;f&&f!==document.body;){var v=window.getComputedStyle(f),y=v.overflowY,m=v.overflowX,x=y==="scroll"||y==="auto",w=m==="scroll"||m==="auto";if(x||w){var A=f.getBoundingClientRect();if(x){var g=Math.max(a.top,A.top),k=Math.min(a.bottom,A.bottom);(g!==a.top||k!==a.bottom)&&(s=!0),a.top=g,a.bottom=k}if(w){var P=Math.max(a.left,A.left),L=Math.min(a.right,A.right);(P!==a.left||L!==a.right)&&(l=!0),a.left=P,a.right=L}}f=f.parentElement}return s||l?{top:a.top,bottom:a.bottom,left:a.left,right:a.right,width:Math.max(0,a.right-a.left),height:Math.max(0,a.bottom-a.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var kr;function Es(){kr=new Map}Es();function kh(e){var r=Array.from(e.children).findIndex(function(a){return a.getAttribute(Pa)});if(r>=0)return kr.has(e)||kr.set(e,new Map),kr.get(e).set(r,Bl(e.children[r])),r}function Dh(e,r){if(!ku(e,r))return null;var a=r.children;if(a.length===0)return{index:0,isProximityBased:!0};for(var s=kh(r),l=0;l<a.length;l++)if(ku(e,a[l])){var f=kr.has(r)&&kr.get(r).get(l);return f&&!Ra(hi(e),f)?{index:s,isProximityBased:!1}:{index:l,isProximityBased:!1}}for(var v=Number.MAX_VALUE,y=void 0,m=0;m<a.length;m++){var x=Du(e,a[m]);x<v&&(v=x,y=m)}if(a.length>0){var w=a.length,A=a[w-1],g=A.cloneNode(!1);g.style.visibility="hidden",g.style.pointerEvents="none",r.appendChild(g);var k=Du(e,g);k<v&&(y=w),r.removeChild(g)}return{index:y,isProximityBased:!0}}function ei(e){return JSON.stringify(e,null,2)}function ma(e){if(!e)throw new Error("cannot get depth of a falsy node");return Vl(e,0)}function Vl(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?Vl(e.parentElement,r+1):r-1}function Ah(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var a in e)if(!{}.hasOwnProperty.call(r,a)||r[a]!==e[a])return!1;return!0}function Ih(e,r){if(e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}var Sh=200,Au=10,Zo;function Oh(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Sh,s=arguments.length>3?arguments[3]:void 0,l,f,v=!1,y,m=Array.from(r).sort(function(w,A){return ma(A)-ma(w)});function x(){var w=hi(e),A=s.multiScrollIfNeeded();if(!A&&y&&Math.abs(y.x-w.x)<Au&&Math.abs(y.y-w.y)<Au){Zo=window.setTimeout(x,a);return}if(xh(e)){_h(e);return}y=w;var g=!1,k=_i(m),P;try{for(k.s();!(P=k.n()).done;){var L=P.value;A&&Es();var R=Dh(e,L);if(R!==null){var j=R.index;g=!0,L!==l?(l&&yh(l,e,L),ph(L,R,e),l=L):j!==f&&(gh(L,R,e),f=j);break}}}catch(q){k.e(q)}finally{k.f()}!g&&v&&l?(mh(l,e),l=void 0,f=void 0,v=!1):v=!0,Zo=window.setTimeout(x,a)}x()}function Ch(){clearTimeout(Zo),Es()}var ti=30;function Ph(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function a(f){var v=e,y=v.directionObj,m=v.stepPx;y&&(f.scrollBy(y.x*m,y.y*m),window.requestAnimationFrame(function(){return a(f)}))}function s(f){return ti-f}function l(f,v){if(!v)return!1;var y=Rh(f,v),m=!!e.directionObj;if(y===null)return m&&r(),!1;var x=!1,w=!1;return v.scrollHeight>v.clientHeight&&(y.bottom<ti?(x=!0,e.directionObj={x:0,y:1},e.stepPx=s(y.bottom)):y.top<ti&&(x=!0,e.directionObj={x:0,y:-1},e.stepPx=s(y.top)),!m&&x)||v.scrollWidth>v.clientWidth&&(y.right<ti?(w=!0,e.directionObj={x:1,y:0},e.stepPx=s(y.right)):y.left<ti&&(w=!0,e.directionObj={x:-1,y:0},e.stepPx=s(y.left)),!m&&w)?(a(v),!0):(r(),!1)}return{scrollIfNeeded:l,resetScrolling:r}}function Rh(e,r){var a=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return Ra(e,a)?{top:e.y-a.top,bottom:a.bottom-e.y,left:e.x-a.left,right:a.right-e.x}:null}function Mh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=Nh(e),s=Array.from(a).sort(function(m,x){return ma(x)-ma(m)}),l=Ph(),f=l.scrollIfNeeded,v=l.resetScrolling;function y(){var m=r();if(!m||!s)return!1;for(var x=s.filter(function(g){return Ra(m,g.getBoundingClientRect())||g===document.scrollingElement}),w=0;w<x.length;w++){var A=f(m,x[w]);if(A)return!0}return!1}return{multiScrollIfNeeded:a.size>0?y:function(){return!1},destroy:function(){return v()}}}function Lh(e){if(!e)return[];for(var r=[],a=e;a;){var s=window.getComputedStyle(a),l=s.overflow;l.split(" ").some(function(f){return f.includes("auto")||f.includes("scroll")})&&r.push(a),a=a.parentElement}return r}function Nh(e){var r=new Set,a=_i(e),s;try{for(a.s();!(s=a.n()).done;){var l=s.value;Lh(l).forEach(function(f){return r.add(f)})}}catch(f){a.e(f)}finally{a.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function Fh(e){var r=e.cloneNode(!0),a=[],s=e.tagName==="SELECT",l=s?[e]:Kt(e.querySelectorAll("select")),f=_i(l),v;try{for(f.s();!(v=f.n()).done;){var y=v.value;a.push(y.value)}}catch(J){f.e(J)}finally{f.f()}if(l.length>0)for(var m=s?[r]:Kt(r.querySelectorAll("select")),x=0;x<m.length;x++){var w=m[x],A=a[x],g=w.querySelector('option[value="'.concat(A,'"'));g&&g.setAttribute("selected",!0)}var k=e.tagName==="CANVAS",P=k?[e]:Kt(e.querySelectorAll("canvas"));if(P.length>0)for(var L=k?[r]:Kt(r.querySelectorAll("canvas")),R=0;R<L.length;R++){var j=P[R],q=L[R];q.width=j.width,q.height=j.height,j.width>0&&j.height>0&&q.getContext("2d").drawImage(j,0,0)}return r}var vi=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Kh=Rr({},vi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Ul(e){if(!vi[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(vi)));return Kh[e]}var Bh=.2;function tr(e){return"".concat(e," ").concat(Bh,"s ease")}function jh(e,r){var a=e.getBoundingClientRect(),s=Fh(e);Hl(e,s),s.id=wh,s.style.position="fixed";var l=a.top,f=a.left;if(s.style.top="".concat(l,"px"),s.style.left="".concat(f,"px"),r){var v=zl(a);l-=v.y-r.y,f-=v.x-r.x,window.setTimeout(function(){s.style.top="".concat(l,"px"),s.style.left="".concat(f,"px")},0)}return s.style.margin="0",s.style.boxSizing="border-box",s.style.height="".concat(a.height,"px"),s.style.width="".concat(a.width,"px"),s.style.transition="".concat(tr("top"),", ").concat(tr("left"),", ").concat(tr("background-color"),", ").concat(tr("opacity"),", ").concat(tr("color")," "),window.setTimeout(function(){return s.style.transition+=", ".concat(tr("width"),", ").concat(tr("height"))},0),s.style.zIndex="9999",s.style.cursor="grabbing",s}function zh(e){e.style.cursor="grab"}function Vh(e,r,a,s){Hl(r,e);var l=r.getBoundingClientRect(),f=e.getBoundingClientRect(),v=l.width-f.width,y=l.height-f.height;if(v||y){var m={left:(a-f.left)/f.width,top:(s-f.top)/f.height};Ul(vi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(l.height,"px"),e.style.width="".concat(l.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-m.left*v,"px"),e.style.top="".concat(parseFloat(e.style.top)-m.top*y,"px")}}function Hl(e,r){var a=window.getComputedStyle(e);Array.from(a).filter(function(s){return s.startsWith("background")||s.startsWith("padding")||s.startsWith("font")||s.startsWith("text")||s.startsWith("align")||s.startsWith("justify")||s.startsWith("display")||s.startsWith("flex")||s.startsWith("border")||s==="opacity"||s==="color"||s==="list-style-type"||Ul(vi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(s==="width"||s==="height")}).forEach(function(s){return r.style.setProperty(s,a.getPropertyValue(s),a.getPropertyPriority(s))})}function Uh(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Wl(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function Hh(e){e.style.visibility="hidden",e.setAttribute(Pa,"true")}function Wh(e){e.style.visibility="",e.removeAttribute(Pa)}function ea(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(f){s.style[f]=l[f]}),a(s).forEach(function(f){return s.classList.add(f)})})}function ga(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(f){s.style[f]=""}),a(s).forEach(function(f){return s.classList.contains(f)&&s.classList.remove(f)})})}function Gh(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var a=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=a}}var Yh="--any--",qh=100,Zh=20,Qi=3,Qh=80,Iu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Su="data-is-dnd-original-dragged-item",bt,Je,wt,Ma,ze,La,Fn,nt,nn,lt,Pn=!1,xs=!1,Ts,wi=!1,ta=[],si,rn,ri=!1,Gt=new Map,We=new Map,Oo=new WeakMap;function Xh(e,r){Gt.has(r)||Gt.set(r,new Set),Gt.get(r).has(e)||(Gt.get(r).add(e),Fl())}function Ou(e,r){Gt.get(r).delete(e),Kl(),Gt.get(r).size===0&&Gt.delete(r)}function $h(){var e=Gt.get(Ma),r=_i(e),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;s.addEventListener(Sa,Gl),s.addEventListener(bi,Yl),s.addEventListener(Oa,ql)}}catch(v){r.e(v)}finally{r.f()}window.addEventListener(bs,Lr);var l=Math.max.apply(Math,Kt(Array.from(e.keys()).map(function(v){return We.get(v).dropAnimationDurationMs}))),f=l===0?Zh:Math.max(l,qh);si=Mh(e,function(){return lt}),Oh(Je,e,f*1.07,si)}function Jh(){var e=Gt.get(Ma),r=_i(e),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;s.removeEventListener(Sa,Gl),s.removeEventListener(bi,Yl),s.removeEventListener(Oa,ql)}}catch(l){r.e(l)}finally{r.f()}window.removeEventListener(bs,Lr),si&&(si.destroy(),si=void 0),Ch()}function Na(e){return e.findIndex(function(r){return!!r[Ca]})}function ev(e){var r;return pa(pa({},e),{},(r={},Rr(r,Ca,!0),Rr(r,Xe,Nl),r))}function Gl(e){var r=We.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==ze)){if(wi=!1,a=a.filter(function(y){return y[Xe]!==Fn[Xe]&&y[Xe]!==Nl}),ze!==e.currentTarget){var l=We.get(ze).items,f=l.filter(function(y){return!y[Ca]});zn(ze,f,{trigger:mt.DRAGGED_ENTERED_ANOTHER,id:wt[Xe],source:kt.POINTER})}var v=e.detail.indexObj.index;nt=e.currentTarget,a.splice(v,0,Fn),zn(e.currentTarget,a,{trigger:mt.DRAGGED_ENTERED,id:wt[Xe],source:kt.POINTER})}}function Yl(e){if(Pn){var r=We.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==ze&&e.currentTarget!==nt)){var l=Kt(a),f=Na(l);f!==-1&&l.splice(f,1);var v=nt;nt=void 0;var y=e.detail,m=y.type,x=y.theOtherDz;if(m===ya.OUTSIDE_OF_ANY||m===ya.LEFT_FOR_ANOTHER&&x!==ze&&We.get(x).dropFromOthersDisabled){wi=!0,nt=ze;var w=v===ze?l:Kt(We.get(ze).items);w.splice(La,0,Fn),zn(ze,w,{trigger:mt.DRAGGED_LEFT_ALL,id:wt[Xe],source:kt.POINTER})}zn(e.currentTarget,l,{trigger:mt.DRAGGED_LEFT,id:wt[Xe],source:kt.POINTER})}}}function ql(e){var r=We.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==ze)){var l=Kt(a);wi=!1;var f=e.detail.indexObj.index,v=Na(l);v!==-1&&l.splice(v,1),l.splice(f,0,Fn),zn(e.currentTarget,l,{trigger:mt.DRAGGED_OVER_INDEX,id:wt[Xe],source:kt.POINTER})}}function _a(e){e.preventDefault();var r=e.touches?e.touches[0]:e;lt={x:r.clientX,y:r.clientY},Je.style.transform="translate3d(".concat(lt.x-nn.x,"px, ").concat(lt.y-nn.y,"px, 0)")}function Lr(){xs=!0,window.removeEventListener("mousemove",_a),window.removeEventListener("touchmove",_a),window.removeEventListener("mouseup",Lr),window.removeEventListener("touchend",Lr),Jh(),zh(Je),nt||(nt=ze);var e=We.get(nt),r=e.items,a=e.type;ga(Gt.get(a),function(f){return We.get(f).dropTargetStyle},function(f){return We.get(f).dropTargetClasses});var s=Na(r);s===-1&&nt===ze&&(s=La),r=r.map(function(f){return f[Ca]?wt:f});function l(){Ts(),Mr(nt,r,{trigger:wi?mt.DROPPED_OUTSIDE_OF_ANY:mt.DROPPED_INTO_ZONE,id:wt[Xe],source:kt.POINTER}),nt!==ze&&Mr(ze,We.get(ze).items,{trigger:mt.DROPPED_INTO_ANOTHER,id:wt[Xe],source:kt.POINTER});var f=Array.from(nt.children).find(function(v){return v.getAttribute(Pa)});f&&Wh(f),rv()}We.get(nt).dropAnimationDisabled?l():tv(s,l)}function tv(e,r){var a=e>-1?qo(nt.children[e],!1):qo(nt,!1),s={x:a.left-parseFloat(Je.style.left),y:a.top-parseFloat(Je.style.top)},l=We.get(nt),f=l.dropAnimationDurationMs,v="transform ".concat(f,"ms ease");Je.style.transition=Je.style.transition?Je.style.transition+","+v:v,Je.style.transform="translate3d(".concat(s.x,"px, ").concat(s.y,"px, 0)"),window.setTimeout(r,f)}function nv(e,r){ta.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){Wl(e),document.body.appendChild(e)})}function rv(){Je&&Je.remove&&Je.remove(),bt&&bt.remove&&bt.remove(),Je=void 0,bt=void 0,wt=void 0,Ma=void 0,ze=void 0,La=void 0,Fn=void 0,nt=void 0,nn=void 0,lt=void 0,Pn=!1,xs=!1,Ts=void 0,wi=!1,rn&&clearTimeout(rn),rn=void 0,ri=!1,ta.length&&(ta.forEach(function(e){var r=e.dz,a=e.destroy;a(),r.remove()}),ta=[])}function iv(e,r){var a=!1,s={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Iu,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},l=new Map;function f(){window.addEventListener("mousemove",m,{passive:!1}),window.addEventListener("touchmove",m,{passive:!1,capture:!1}),window.addEventListener("mouseup",y,{passive:!1}),window.addEventListener("touchend",y,{passive:!1})}function v(){window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",y),window.removeEventListener("touchend",y),rn&&(clearTimeout(rn),rn=void 0,ri=!1)}function y(g){if(v(),bt=void 0,nn=void 0,lt=void 0,g.type==="touchend"){var k=new Event("click",{bubbles:!0,cancelable:!0});g.target.dispatchEvent(k)}}function m(g){var k=!!g.touches,P=k?g.touches[0]:g;if(k&&s.delayTouchStartMs>0&&!ri){lt={x:P.clientX,y:P.clientY},(Math.abs(lt.x-nn.x)>=Qi||Math.abs(lt.y-nn.y)>=Qi)&&(rn&&(clearTimeout(rn),rn=void 0),y(g));return}g.preventDefault(),lt={x:P.clientX,y:P.clientY},(Math.abs(lt.x-nn.x)>=Qi||Math.abs(lt.y-nn.y)>=Qi)&&(v(),w())}function x(g){if(!(g.target!==g.currentTarget&&(g.target.value!==void 0||g.target.isContentEditable))&&!g.button&&!Pn){var k=!!g.touches,P=k&&s.delayTouchStartMs>0;P||g.preventDefault(),g.stopPropagation();var L=k?g.touches[0]:g;nn={x:L.clientX,y:L.clientY},lt=pa({},nn),bt=g.currentTarget,P&&(ri=!1,rn=window.setTimeout(function(){bt&&(ri=!0,v(),w())},s.delayTouchStartMs)),f()}}function w(){Pn=!0;var g=l.get(bt);La=g,ze=bt.parentElement;var k=ze.closest("dialog")||ze.closest("[popover]")||ze.getRootNode(),P=k.body||k,L=s.items,R=s.type,j=s.centreDraggedOnCursor,q=Kt(L);wt=q[g],Ma=R,Fn=ev(wt),Je=jh(bt,j&&lt),P.appendChild(Je);function J(){bt.parentElement?window.requestAnimationFrame(J):(bt.setAttribute(Su,!0),P.appendChild(bt),$h(),Wl(bt),Fn[Xe]=wt[Xe],Je.focus())}window.requestAnimationFrame(J),ea(Array.from(Gt.get(s.type)).filter(function(Z){return Z===ze||!We.get(Z).dropFromOthersDisabled}),function(Z){return We.get(Z).dropTargetStyle},function(Z){return We.get(Z).dropTargetClasses}),q.splice(g,1,Fn),Ts=Gh(ze),zn(ze,q,{trigger:mt.DRAG_STARTED,id:wt[Xe],source:kt.POINTER}),window.addEventListener("mousemove",_a,{passive:!1}),window.addEventListener("touchmove",_a,{passive:!1,capture:!1}),window.addEventListener("mouseup",Lr,{passive:!1}),window.addEventListener("touchend",Lr,{passive:!1})}function A(g){var k=g.items,P=k===void 0?void 0:k,L=g.flipDurationMs,R=L===void 0?0:L,j=g.type,q=j===void 0?Yh:j,J=g.dragDisabled,Z=J===void 0?!1:J,oe=g.morphDisabled,ce=oe===void 0?!1:oe,Ee=g.dropFromOthersDisabled,xe=Ee===void 0?!1:Ee,Te=g.dropTargetStyle,he=Te===void 0?Iu:Te,we=g.dropTargetClasses,ke=we===void 0?[]:we,Ye=g.transformDraggedElement,qe=Ye===void 0?function(){}:Ye,gt=g.centreDraggedOnCursor,it=gt===void 0?!1:gt,Me=g.dropAnimationDisabled,un=Me===void 0?!1:Me,pt=g.delayTouchStart,Qe=pt===void 0?!1:pt;s.dropAnimationDurationMs=R;var ee=0;Qe===!0?ee=Qh:typeof Qe=="number"&&isFinite(Qe)&&Qe>=0&&(ee=Qe),s.delayTouchStartMs=ee,s.type&&q!==s.type&&Ou(e,s.type),s.type=q,s.items=Kt(P),s.dragDisabled=Z,s.morphDisabled=ce,s.transformDraggedElement=qe,s.centreDraggedOnCursor=it,s.dropAnimationDisabled=un,a&&Pn&&!xs&&(!Ah(he,s.dropTargetStyle)||!Ih(ke,s.dropTargetClasses))&&(ga([e],function(){return s.dropTargetStyle},function(){return ke}),ea([e],function(){return he},function(){return ke})),s.dropTargetStyle=he,s.dropTargetClasses=Kt(ke);function _e(Ie,et){return We.get(Ie)?We.get(Ie)[et]:s[et]}a&&Pn&&s.dropFromOthersDisabled!==xe&&(xe?ga([e],function(Ie){return _e(Ie,"dropTargetStyle")},function(Ie){return _e(Ie,"dropTargetClasses")}):ea([e],function(Ie){return _e(Ie,"dropTargetStyle")},function(Ie){return _e(Ie,"dropTargetClasses")})),s.dropFromOthersDisabled=xe,We.set(e,s),Xh(e,q);for(var Ve=Pn?Na(s.items):-1,Fe=0;Fe<e.children.length;Fe++){var Ke=e.children[Fe];if(Uh(Ke,Z),Fe===Ve){ce||Vh(Je,Ke,lt.x,lt.y),s.transformDraggedElement(Je,wt,Fe),Hh(Ke);continue}Ke.removeEventListener("mousedown",Oo.get(Ke)),Ke.removeEventListener("touchstart",Oo.get(Ke)),Z||(Ke.addEventListener("mousedown",x),Ke.addEventListener("touchstart",x),Oo.set(Ke,x)),l.set(Ke,Fe),a||(a=!0)}}return A(r),{update:function(k){A(k)},destroy:function(){function k(){Ou(e,We.get(e).type),We.delete(e)}Pn&&!e.closest("[".concat(Su,"]"))?nv(e,k):k()}}}var Xi,Qo={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Zl=(Xi={},Rr(Xi,Qo.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Rr(Xi,Qo.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Xi),av="dnd-action-aria-alert",Ze;function Xo(){Ze||(Ze=document.createElement("div"),(function(){Ze.id=av,Ze.style.position="fixed",Ze.style.bottom="0",Ze.style.left="0",Ze.style.zIndex="-5",Ze.style.opacity="0",Ze.style.height="0",Ze.style.width="0",Ze.setAttribute("role","alert")})(),document.body.prepend(Ze),Object.entries(Zl).forEach(function(e){var r=oh(e,2),a=r[0],s=r[1];return document.body.prepend(uv(a,s))}))}function ov(){return ws?null:(document.readyState==="complete"?Xo():window.addEventListener("DOMContentLoaded",Xo),pa({},Qo))}function sv(){ws||!Ze||(Object.keys(Zl).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),Ze.remove(),Ze=void 0)}function uv(e,r){var a=document.createElement("div");return a.id=e,a.innerHTML="<p>".concat(r,"</p>"),a.style.display="none",a.style.position="fixed",a.style.zIndex="-5",a}function Dr(e){if(!ws){Ze||Xo(),Ze.innerHTML="";var r=document.createTextNode(e);Ze.appendChild(r),Ze.style.display="none",Ze.style.display="inline"}}var lv="--any--",Cu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Mt=!1,$o,ct,or="",nr,an,Rn="",ba=new WeakSet,Pu=new WeakMap,Ru=new WeakMap,Jo=new Map,tt=new Map,Ht=new Map,wa;function cv(e,r){Ht.size===0&&(wa=ov(),window.addEventListener("keydown",Ql),window.addEventListener("click",Xl)),Ht.has(r)||Ht.set(r,new Set),Ht.get(r).has(e)||(Ht.get(r).add(e),Fl())}function Mu(e,r){ct===e&&pi(),Ht.get(r).delete(e),Kl(),Ht.get(r).size===0&&Ht.delete(r),Ht.size===0&&(window.removeEventListener("keydown",Ql),window.removeEventListener("click",Xl),wa=void 0,sv())}function Ql(e){if(Mt)switch(e.key){case"Escape":{pi();break}}}function Xl(){Mt&&(ba.has(document.activeElement)||pi())}function fv(e){if(Mt){var r=e.currentTarget;if(r!==ct){or=r.getAttribute("aria-label")||"";var a=tt.get(ct),s=a.items,l=s.find(function(A){return A[Xe]===an}),f=s.indexOf(l),v=s.splice(f,1)[0],y=tt.get(r),m=y.items,x=y.autoAriaDisabled;r.getBoundingClientRect().top<ct.getBoundingClientRect().top||r.getBoundingClientRect().left<ct.getBoundingClientRect().left?(m.push(v),x||Dr("Moved item ".concat(Rn," to the end of the list ").concat(or))):(m.unshift(v),x||Dr("Moved item ".concat(Rn," to the beginning of the list ").concat(or)));var w=ct;Mr(w,s,{trigger:mt.DROPPED_INTO_ANOTHER,id:an,source:kt.KEYBOARD}),Mr(r,m,{trigger:mt.DROPPED_INTO_ZONE,id:an,source:kt.KEYBOARD}),ct=r}}}function $l(){Jo.forEach(function(e,r){var a=e.update;return a(tt.get(r))})}function pi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;tt.get(ct).autoAriaDisabled||Dr("Stopped dragging item ".concat(Rn)),ba.has(document.activeElement)&&document.activeElement.blur(),e&&zn(ct,tt.get(ct).items,{trigger:mt.DRAG_STOPPED,id:an,source:kt.KEYBOARD}),ga(Ht.get($o),function(r){return tt.get(r).dropTargetStyle},function(r){return tt.get(r).dropTargetClasses}),nr=null,an=null,Rn="",$o=null,ct=null,or="",Mt=!1,$l()}function dv(e,r){var a={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Cu,dropTargetClasses:[],autoAriaDisabled:!1};function s(w,A,g){w.length<=1||w.splice(g,1,w.splice(A,1,w[g])[0])}function l(w){switch(w.key){case"Enter":case" ":{if((w.target.disabled!==void 0||w.target.href||w.target.isContentEditable)&&!ba.has(w.target))return;w.preventDefault(),w.stopPropagation(),Mt?pi():f(w);break}case"ArrowDown":case"ArrowRight":{if(!Mt)return;w.preventDefault(),w.stopPropagation();var A=tt.get(e),g=A.items,k=Array.from(e.children),P=k.indexOf(w.currentTarget);P<k.length-1&&(a.autoAriaDisabled||Dr("Moved item ".concat(Rn," to position ").concat(P+2," in the list ").concat(or)),s(g,P,P+1),Mr(e,g,{trigger:mt.DROPPED_INTO_ZONE,id:an,source:kt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Mt)return;w.preventDefault(),w.stopPropagation();var L=tt.get(e),R=L.items,j=Array.from(e.children),q=j.indexOf(w.currentTarget);q>0&&(a.autoAriaDisabled||Dr("Moved item ".concat(Rn," to position ").concat(q," in the list ").concat(or)),s(R,q,q-1),Mr(e,R,{trigger:mt.DROPPED_INTO_ZONE,id:an,source:kt.KEYBOARD}));break}}}function f(w){y(w.currentTarget),ct=e,$o=a.type,Mt=!0;var A=Array.from(Ht.get(a.type)).filter(function(k){return k===ct||!tt.get(k).dropFromOthersDisabled});if(ea(A,function(k){return tt.get(k).dropTargetStyle},function(k){return tt.get(k).dropTargetClasses}),!a.autoAriaDisabled){var g="Started dragging item ".concat(Rn,". Use the arrow keys to move it within its list ").concat(or);A.length>1&&(g+=", or tab to another list in order to move the item into it"),Dr(g)}zn(e,tt.get(e).items,{trigger:mt.DRAG_STARTED,id:an,source:kt.KEYBOARD}),$l()}function v(w){Mt&&w.currentTarget!==nr&&(w.stopPropagation(),pi(!1),f(w))}function y(w){var A=tt.get(e),g=A.items,k=Array.from(e.children),P=k.indexOf(w);nr=w,nr.tabIndex=a.zoneItemTabIndex,an=g[P][Xe],Rn=k[P].getAttribute("aria-label")||""}function m(w){var A=w.items,g=A===void 0?[]:A,k=w.type,P=k===void 0?lv:k,L=w.dragDisabled,R=L===void 0?!1:L,j=w.zoneTabIndex,q=j===void 0?0:j,J=w.zoneItemTabIndex,Z=J===void 0?0:J,oe=w.dropFromOthersDisabled,ce=oe===void 0?!1:oe,Ee=w.dropTargetStyle,xe=Ee===void 0?Cu:Ee,Te=w.dropTargetClasses,he=Te===void 0?[]:Te,we=w.autoAriaDisabled,ke=we===void 0?!1:we;a.items=Kt(g),a.dragDisabled=R,a.dropFromOthersDisabled=ce,a.zoneTabIndex=q,a.zoneItemTabIndex=Z,a.dropTargetStyle=xe,a.dropTargetClasses=he,a.autoAriaDisabled=ke,a.type&&P!==a.type&&Mu(e,a.type),a.type=P,cv(e,P),ke||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",R?wa.DND_ZONE_DRAG_DISABLED:wa.DND_ZONE_ACTIVE)),tt.set(e,a),Mt?e.tabIndex=e===ct||nr.contains(e)||a.dropFromOthersDisabled||ct&&a.type!==tt.get(ct).type?-1:0:e.tabIndex=a.zoneTabIndex,e.addEventListener("focus",fv);for(var Ye=function(it){var Me=e.children[it];ba.add(Me),Me.tabIndex=Mt?-1:a.zoneItemTabIndex,ke||Me.setAttribute("role","listitem"),Me.removeEventListener("keydown",Pu.get(Me)),Me.removeEventListener("click",Ru.get(Me)),R||(Me.addEventListener("keydown",l),Pu.set(Me,l),Me.addEventListener("click",v),Ru.set(Me,v)),Mt&&a.items[it][Xe]===an&&(nr=Me,nr.tabIndex=a.zoneItemTabIndex,Me.focus())},qe=0;qe<e.children.length;qe++)Ye(qe)}m(r);var x={update:function(A){m(A)},destroy:function(){Mu(e,a.type),tt.delete(e),Jo.delete(e)}};return Jo.set(e,x),x}var hv=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Jl(e,r){if(vv(e))return{update:function(){},destroy:function(){}};Lu(r);var a=iv(e,r),s=dv(e,r);return{update:function(f){Lu(f),a.update(f),s.update(f)},destroy:function(){a.destroy(),s.destroy()}}}function vv(e){return!!e.closest("[".concat(bh,'="true"]'))}function Lu(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var a=e.zoneTabIndex,s=e.zoneItemTabIndex;e.dropTargetStyle;var l=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var f=e.delayTouchStart;e.dropAnimationDisabled;var v=ah(e,hv);if(Object.keys(v).length>0&&console.warn("dndzone will ignore unknown options",v),!r)throw new Error("no 'items' key provided to dndzone");var y=r.find(function(w){return!{}.hasOwnProperty.call(w,Xe)});if(y)throw new Error("missing '".concat(Xe,"' property for item ").concat(ei(y)));if(l&&!Array.isArray(l))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(xr(l),", ").concat(ei(l)));if(a&&!Nu(a))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(xr(a),", ").concat(ei(a)));if(s&&!Nu(s))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(xr(s),", ").concat(ei(s)));if(f!==void 0&&f!==!1){var m=f===!0,x=typeof f=="number"&&isFinite(f)&&f>=0;if(!m&&!x)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(xr(f),", ").concat(ei(f)))}}function Nu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}const Re=new ha("TaskPlannerDB");Re.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Re.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));Re.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));function Fa(e){return e.length===0?0:Math.max(...e.map(a=>a.order))+1}async function ec(){return await Re.lists.orderBy("order").toArray()}async function pv(e){const r=e.trim();if(r==="")throw new Error("List name cannot be empty or whitespace-only");const a=await Re.lists.orderBy("order").toArray(),s=Fa(a);return await Re.lists.add({name:r,order:s})}async function ks(){const e=await Re.lists.orderBy("order").toArray(),r=Fa(e);return await Re.lists.add({name:null,order:r})}async function yv(e,r){const a=r.trim();if(a==="")throw new Error("List name cannot be empty");return await Re.lists.update(e,{name:a})}async function Co(e){return await Re.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function mv(){return(await Re.tasks.where("status").equals("archived").toArray()).sort((r,a)=>{const s=r.archivedAt||0,l=a.archivedAt||0;return l!==s?l-s:(a.order||0)-(r.order||0)})}async function tc(e,r){let a=e;e===null&&(a=await ks());const s=await Re.tasks.where("listId").equals(a).filter(y=>y.status!=="archived").sortBy("order"),l=Fa(s),f=r===""?"":r.trim();return await Re.tasks.add({text:f,listId:a,order:l,status:"unchecked"})}async function gv(e,r){const a=r===""?"":r.trim();return await Re.tasks.update(e,{text:a})}async function Fu(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const a={status:r};return r==="archived"?a.archivedAt=Date.now():r!=="archived"&&(a.archivedAt=null),await Re.tasks.update(e,a)}async function _v(e){const r=await Re.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const a=await Re.tasks.where("listId").equals(r.listId).filter(l=>l.status!=="archived"&&l.id!==e).sortBy("order"),s=Fa(a);return await Re.tasks.update(e,{status:"checked",order:s})}async function ii(e,r){if(!r||r.length===0)return;const a=r.map(y=>y.id),l=(await Re.tasks.bulkGet(a)).filter(y=>y!==void 0);if(l.length===0)return;const f=l.filter(y=>y.listId!==e),v=new Set(f.map(y=>y.listId));await Re.transaction("rw",Re.tasks,async()=>{for(let y=0;y<r.length;y++){const m=r[y].id,x=l.find(A=>A.id===m);if(!x)continue;const w={order:y};x.listId!==e&&(w.listId=e),await Re.tasks.update(m,w)}for(const y of v){const m=await Re.tasks.where("listId").equals(y).filter(x=>x.status!=="archived").sortBy("order");for(let x=0;x<m.length;x++)await Re.tasks.update(m[x].id,{order:x})}})}async function bv(e){await Re.tasks.delete(e)}const Nr=160,sr=150,es=1056,wv=816,Ea=16,Ku=25,Po=10;var Ev=Ne('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),xv=Ne('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function Tv(e,r){Vn(r,!0);let a=fe(Wt(r.taskText||"")),s=fe(!1),l=fe(null),f=fe(null),v=li(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const L=24,R=24,j=Ea,J=L+R+j+8-8,Z=10,oe=r.taskPosition.top-J,ce=r.taskPosition.left-Ea+Z,Ee=r.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${oe}px; left: ${ce}px; width: ${Ee}px;`});Ge(()=>{r.isOpen&&(C(a,r.taskText||"",!0),C(s,!1))}),Ge(()=>{r.isOpen&&b(l)&&setTimeout(()=>{b(l)?.focus(),b(l)?.select(),b(l)instanceof HTMLTextAreaElement&&(b(l).style.height="auto",b(l).style.height=`${Math.min(b(l).scrollHeight,Nr)}px`)},0)}),Ge(()=>{if(b(l)&&b(l)instanceof HTMLTextAreaElement){const L=()=>{b(l).style.height="auto",b(l).style.height=`${Math.min(b(l).scrollHeight,Nr)}px`};return b(l).addEventListener("input",L),()=>{b(l).removeEventListener("input",L)}}});function y(){const L=b(a)??"",R=L.trim();if(R===""&&L.length>0){r.onSave(r.taskId,""),C(s,!1);return}if(L===""||R===""){C(s,!0);return}r.onSave(r.taskId,R),C(s,!1)}function m(){C(a,r.taskText||"",!0),C(s,!1),r.onCancel()}function x(L){L.target===L.currentTarget&&m()}function w(L){L.key==="Escape"?m():L.key==="Enter"&&!L.shiftKey&&document.activeElement===b(l)&&(L.preventDefault(),y())}function A(){r.onArchive&&r.onArchive(r.taskId)}var g=Pr(),k=Bt(g);{var P=L=>{var R=xv();R.__click=x,R.__keydown=w;var j=me(R);j.__click=we=>we.stopPropagation();var q=ge(me(j),2),J=me(q);J.__keydown=w,qt(J,we=>C(l,we),()=>b(l));var Z=ge(J,2);{var oe=we=>{var ke=Ev();Oe(we,ke)};ft(Z,we=>{b(s)&&we(oe)})}var ce=ge(q,2),Ee=me(ce);Ee.__click=A;var xe=ge(Ee,2),Te=me(xe);Te.__click=m;var he=ge(Te,2);he.__click=y,qt(j,we=>C(f,we),()=>b(f)),ht(we=>{Ot(j,we),Ot(J,`width: ${sr}px;`),St(J,"aria-describedby",b(s)?"validation-message":void 0),he.disabled=b(s),St(he,"aria-label",b(s)?"Save disabled: task cannot be empty":"Save task changes")},[()=>b(v)()]),ms(J,()=>b(a),we=>C(a,we)),Oe(L,R)};ft(k,L=>{r.isOpen&&L(P)})}Oe(e,g),Un()}dr(["click","keydown"]);var kv=Ne('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),Dv=Ne('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-8e0jqh" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div>');function Av(e,r){Vn(r,!0);let a=fe(Wt(r.listName||"")),s=fe(!1),l=fe(null),f=fe(null),v=li(()=>()=>{if(!r.listPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const P=24,L=24,R=Ea,q=P+L+R+8-8,J=r.listPosition.top-q,Z=r.listPosition.left-Ea,oe=Math.max(r.listPosition.width+48,300);return`background-color: white; z-index: 10000; top: ${J}px; left: ${Z}px; width: ${oe}px;`});Ge(()=>{r.isOpen&&(C(a,r.listName||"",!0),C(s,!1))}),Ge(()=>{r.isOpen&&b(l)&&setTimeout(()=>{b(l)?.focus(),b(l)?.select()},0)});function y(){const L=(b(a)??"").trim();if(L===""){C(s,!0);return}r.onSave(r.listId,L),C(s,!1)}function m(){C(a,r.listName||"",!0),C(s,!1),r.onCancel()}function x(P){P.target===P.currentTarget&&m()}function w(P){P.key==="Escape"?m():P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),y())}var A=Pr(),g=Bt(A);{var k=P=>{var L=Dv();L.__click=x,L.__keydown=w;var R=me(L);R.__click=xe=>xe.stopPropagation();var j=ge(me(R),2),q=me(j);q.__keydown=w,qt(q,xe=>C(l,xe),()=>b(l));var J=ge(q,2);{var Z=xe=>{var Te=kv();Oe(xe,Te)};ft(J,xe=>{b(s)&&xe(Z)})}var oe=ge(j,2),ce=me(oe);ce.__click=m;var Ee=ge(ce,2);Ee.__click=y,qt(R,xe=>C(f,xe),()=>b(f)),ht(xe=>{Ot(R,xe),St(q,"aria-describedby",b(s)?"validation-message":void 0),Ee.disabled=b(s),St(Ee,"aria-label",b(s)?"Save disabled: list name cannot be empty":"Save list name changes")},[()=>b(v)()]),ms(q,()=>b(a),xe=>C(a,xe)),Oe(P,L)};ft(g,P=>{r.isOpen&&P(k)})}Oe(e,A),Un()}dr(["click","keydown"]);var Iv=Ne('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea class="flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div>',1),Sv=Ne('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words" role="button" tabindex="0"> </span>',1),Ov=Ne('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden add-task-container add-task-button mt-2"><!></div>');function Ro(e,r){Vn(r,!0);let a=Cn(r,"isInputActive",11,!1),s=Cn(r,"inputValue",3,""),l=Cn(r,"buttonText",3,"Add Task"),f=Cn(r,"placeholder",3,"Add new task..."),v=Cn(r,"marginLeft",3,!1),y=Cn(r,"containerElement",15,null),m=Cn(r,"textareaElement",15,null),x=fe(null),w=fe(null);Ge(()=>{y(b(w)),m(b(x))}),Ge(()=>{a()&&b(x)&&setTimeout(()=>{b(x)?.focus(),b(x)instanceof HTMLTextAreaElement&&(b(x).style.height="auto",b(x).style.height=`${Math.min(b(x).scrollHeight,Nr)}px`)},0)}),Ge(()=>{if(b(x)&&b(x)instanceof HTMLTextAreaElement){const j=()=>{b(x).style.height="auto",b(x).style.height=`${Math.min(b(x).scrollHeight,Nr)}px`};return b(x).addEventListener("input",j),()=>{b(x).removeEventListener("input",j)}}});function A(j){j.key==="Enter"&&!j.shiftKey?(j.preventDefault(),r.onSave?.()):j.key==="Escape"&&r.onEscape?.(j)}function g(j){(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),r.onActivate?.())}var k=Ov(),P=me(k);{var L=j=>{var q=Iv(),J=ge(Bt(q),4),Z=me(J);Z.__input=ce=>r.onInputChange?.(ce.currentTarget.value),Z.__keydown=A,qt(Z,ce=>C(x,ce),()=>b(x));var oe=ge(Z,2);oe.__click=function(...ce){r.onSave?.apply(this,ce)},ht(()=>{St(Z,"placeholder",f()),Rl(Z,s()),Ot(Z,`width: ${sr}px;`)}),Oe(j,q)},R=j=>{var q=Sv(),J=ge(Bt(q),4);J.__click=function(...oe){r.onActivate?.apply(this,oe)},J.__keydown=g;var Z=me(J);ht(()=>{Ot(J,`width: ${sr}px;`),St(J,"aria-label",r.ariaLabel||l()),yn(Z,l())}),Oe(j,q)};ft(P,j=>{a()?j(L):j(R,!1)})}qt(k,j=>C(w,j),()=>b(w)),ht(()=>Ot(k,v()?"margin-left: 1.5rem;":"")),Oe(e,k),Un()}dr(["input","keydown","click"]);function ts(e,r,a={}){const{ignoreElements:s=[],shouldClose:l=()=>!0,checkIgnoreClick:f=null}=a;function v(m){const x=typeof e=="function"?e():e;if(x&&!x.contains(m.target)&&!(f&&f(m))){for(const w of s){let A=null;if(typeof w=="function"?A=w():A=w,A&&A.contains(m.target))return}l()&&r()}}const y=setTimeout(()=>{document.addEventListener("click",v)},0);return()=>{clearTimeout(y),document.removeEventListener("click",v)}}function ns(e){return e===""}function Cv(e){return e.trim()===""&&e.length>0}function rs(e){const r=e.trim(),a=Cv(e);return{text:a?"":r,isBlank:a}}var Pv=Ne('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),Rv=Ne('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),Mv=Ne('<div class="task-list-wrapper svelte-k6mizj"><ul></ul> <!></div>'),Lv=Ne("<p>Loading tasks...</p> <!>",1),Nv=Ne('<div><h2 role="button" tabindex="0" class="cursor-pointer hover:underline"> </h2> <!></div> <!> <!>',1);function Fv(e,r){Vn(r,!0);const a=()=>da(b(v),"$tasksQuery",s),[s,l]=gs();let f=Cn(r,"allLists",19,()=>[]),v=fe(null),y=fe(Wt([])),m=fe(!1),x=fe(!1),w=fe(null),A=fe(""),g=fe(null),k=fe(null),P=fe(null),L=fe(!1),R=fe(null),j=fe(null),q=fe(null),J=fe(null),Z=fe(null);Ge(()=>{r.listId&&!b(v)&&Ho(C(v,va(()=>Co(r.listId)),!0),"$tasksQuery",s)}),Ge(()=>{a()&&Array.isArray(a())&&C(y,a().filter(U=>U.status==="unchecked"||U.status==="checked"),!0)}),Ge(()=>{if(!b(P))return;async function U(V){const W=V.target;if((V.key==="Enter"||V.key===" ")&&W instanceof HTMLElement&&W.hasAttribute("data-no-drag")){V.preventDefault(),V.stopImmediatePropagation();const be=W.closest("li[data-id]");if(be){const H=parseInt(be.getAttribute("data-id")),pe=b(y).find(ae=>ae.id===H);if(pe){const ae=W.getBoundingClientRect();C(g,{top:ae.top,left:ae.left,width:ae.width,height:ae.height},!0),C(k,W,!0),C(w,H,!0),C(A,pe.text,!0),C(x,!0)}}return}if(V.key==="ArrowDown"||V.key==="ArrowUp"){const be=document.activeElement;if(!be)return;const H=be.closest("li[data-id]");if(!H||!b(P).contains(H))return;const pe=H.getAttribute("data-id");if(!pe)return;const ae=parseInt(pe);if(!b(y).find(Le=>Le.id===ae))return;const ne=b(y).findIndex(Le=>Le.id===ae),Be=ne===0,de=ne===b(y).length-1;if(V.key==="ArrowDown"&&de){V.preventDefault(),V.stopImmediatePropagation();const Le=f().findIndex(Vt=>Vt.id===r.listId);if(Le<f().length-1){const Vt=f()[Le+1].id;await oe(ae,Vt)}else await Ee(ae)}else if(V.key==="ArrowUp"&&Be){V.preventDefault(),V.stopImmediatePropagation();const Le=f().findIndex(Vt=>Vt.id===r.listId);if(Le>0){const Vt=f()[Le-1].id;await ce(ae,Vt)}}}}return b(P).addEventListener("keydown",U,!0),()=>{b(P).removeEventListener("keydown",U,!0)}});async function oe(U,V){try{const W=await Co(V),be=[{id:U},...W];await ii(V,be)}catch(W){console.error("Error moving task to next list:",W)}}async function ce(U,V){try{const be=[...await Co(V),{id:U}];await ii(V,be)}catch(W){console.error("Error moving task to previous list:",W)}}async function Ee(U){try{const V=await ks();await ii(V,[{id:U}])}catch(V){console.error("Error moving task to new list:",V)}}function xe(U){C(y,U.detail.items,!0)}Ge(()=>{if(!b(P))return;async function U(V){if(V.key!=="ArrowDown"&&V.key!=="ArrowUp")return;const W=document.activeElement;if(!W)return;const be=W.closest("li[data-id]");if(!be||!b(P).contains(be))return;const H=be.getAttribute("data-id");if(!H)return;const pe=parseInt(H);if(!b(y).find(de=>de.id===pe))return;const se=b(y).findIndex(de=>de.id===pe),ne=se===0,Be=se===b(y).length-1;if(V.key==="ArrowDown"&&Be){V.preventDefault(),V.stopImmediatePropagation(),V.stopPropagation();const de=f().findIndex(Le=>Le.id===r.listId);if(de<f().length-1){const Le=f()[de+1].id;await oe(pe,Le)}else await Ee(pe)}else if(V.key==="ArrowUp"&&ne){V.preventDefault(),V.stopImmediatePropagation(),V.stopPropagation();const de=f().findIndex(Le=>Le.id===r.listId);if(de>0){const Le=f()[de-1].id;await ce(pe,Le)}}}return document.addEventListener("keydown",U,!0),()=>{document.removeEventListener("keydown",U,!0)}});async function Te(U){C(y,U.detail.items,!0);try{await ii(r.listId,U.detail.items)}catch(V){console.error("Error updating task order:",V)}}function he(){C(m,!0)}function we(U){U.key==="Escape"&&(C(m,!1),r.onInputChange(""))}Ge(()=>{if(b(m))return ts(()=>b(Z),()=>{b(m)&&(C(m,!1),r.onInputChange(""))},{ignoreElements:[],checkIgnoreClick:U=>{if(!b(J))return!1;const V=b(J).querySelector("button");return!!(V&&V.contains(U.target))},shouldClose:()=>b(Z)&&b(Z).value.trim()!==""?!1:!r.newTaskInput||r.newTaskInput.trim()===""})});async function ke(){let U=r.newTaskInput||"";if(b(Z)&&(U=(b(Z).value||"").toString()),U=(U||"").toString(),ns(U)){C(m,!1),r.onInputChange(""),await ca(),await new Promise(W=>setTimeout(W,10));return}const{text:V}=rs(U);try{await tc(r.listId,V),r.onInputChange("")}catch(W){console.error("Error creating task:",W)}}async function Ye(U,V){try{await Fu(U,V==="unchecked"?"checked":"unchecked")}catch(W){console.error("Error updating task status:",W)}}async function qe(U){await Fu(U,"archived")}function gt(){if(!b(P))return null;const U=b(P).querySelector("li[data-id]");if(U){const V=U.querySelector('span[role="button"]');if(V&&V instanceof HTMLElement)return V}return null}function it(U=20,V=10){if(!b(q))return;const W=(be=0)=>{if(b(J)){const H=b(J).querySelector('span[role="button"]');if(H&&H instanceof HTMLElement){H.focus();return}}be<U&&setTimeout(()=>W(be+1),V)};W()}async function Me(U){try{if(await qe(U),b(w)===U){const V=b(k);C(x,!1),C(w,null),C(A,""),C(g,null),C(k,null),await ca(),await new Promise(W=>setTimeout(W,10)),setTimeout(()=>{const W=(be=0)=>{const H=gt();H?H.focus():be<20?setTimeout(()=>W(be+1),10):it(40,10)};W()},20)}}catch(V){console.error("Error archiving task:",V)}}function un(U,V,W){const be=W?.currentTarget||W?.target;if(be){const H=be.getBoundingClientRect();C(g,{top:H.top,left:H.left,width:H.width,height:H.height},!0),C(k,be,!0)}C(w,U,!0),C(A,V,!0),C(x,!0)}function pt(U,V,W){if(W.key==="Enter"||W.key===" "){W.preventDefault(),W.stopImmediatePropagation();const be=W.currentTarget;if(be){const H=be.getBoundingClientRect();C(g,{top:H.top,left:H.left,width:H.width,height:H.height},!0),C(k,be,!0),C(w,U,!0),C(A,V,!0),C(x,!0)}}}async function Qe(U,V){try{await gv(U,V),C(x,!1);const W=b(k);C(w,null),C(A,""),C(g,null),C(k,null),W&&W instanceof HTMLElement&&setTimeout(()=>{W.focus()},0)}catch(W){console.error("Error updating task text:",W)}}function ee(){const U=b(k);C(x,!1),C(w,null),C(A,""),C(g,null),C(k,null),U&&U instanceof HTMLElement&&setTimeout(()=>{U.focus()},0)}async function _e(U){b(k),await Me(U),setTimeout(()=>{const V=document.activeElement;b(q)&&(!V||!b(q).contains(V))&&it(20,10)},10)}function Ve(U){const V=U?.currentTarget||U?.target;if(V){const W=V.getBoundingClientRect();C(R,{top:W.top,left:W.left,width:W.width,height:W.height},!0),C(j,V,!0)}C(L,!0)}function Fe(U){if(U.key==="Enter"||U.key===" "){U.preventDefault(),U.stopPropagation();const V=U.currentTarget;if(V){const W=V.getBoundingClientRect();C(R,{top:W.top,left:W.left,width:W.width,height:W.height},!0),C(j,V,!0),C(L,!0)}}}async function Ke(U,V){try{await yv(U,V),C(L,!1);const W=b(j);C(R,null),C(j,null),W&&W instanceof HTMLElement&&setTimeout(()=>{W.focus()},0)}catch(W){console.error("Error updating list name:",W)}}function Ie(){const U=b(j);C(L,!1),C(R,null),C(j,null),U&&U instanceof HTMLElement&&setTimeout(()=>{U.focus()},0)}var et=Nv(),at=Bt(et),jt=me(at);jt.__click=Ve,jt.__keydown=Fe;var Hn=me(jt),Wn=ge(jt,2);{var wn=U=>{var V=Mv(),W=me(V);aa(W,21,()=>b(y),ae=>ae.id,(ae,se)=>{var ne=Rv(),Be=ge(me(ne),2);Be.__change=()=>Ye(b(se).id,b(se).status);var de=ge(Be,2);de.__click=ln=>un(b(se).id,b(se).text,ln),de.__keydown=ln=>pt(b(se).id,b(se).text,ln);var Le=me(de),Vt=ge(de,2);{var Ka=ln=>{var jr=Pv();jr.__click=()=>Me(b(se).id),ht(()=>St(jr,"aria-label",`Archive task: ${b(se).text||"blank task"}`)),Oe(ln,jr)};ft(Vt,ln=>{b(se).status==="checked"&&ln(Ka)})}ht(()=>{St(ne,"data-id",b(se).id),Ml(Be,b(se).status==="checked"),St(Be,"aria-label",`Mark task "${b(se).text||"blank task"}" as ${b(se).status==="checked"?"unchecked":"checked"}`),Vo(de,1,Pl(b(se).status==="checked"?"line-through cursor-pointer hover:underline break-words":"cursor-pointer hover:underline break-words")),Ot(de,`width: ${sr}px;`),St(de,"aria-label",`Edit task: ${b(se).text||"blank task"}`),yn(Le,b(se).text||"")}),Oe(ae,ne)}),qt(W,ae=>C(P,ae),()=>b(P)),Ol(W,(ae,se)=>Jl?.(ae,se),()=>({items:b(y),type:"task"}));var be=ge(W,2);{var H=ae=>{Ro(ae,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:ke,onEscape:we,onActivate:he,buttonText:"Add your first task",placeholder:"Add new task...",get ariaLabel(){return`Add your first task to ${r.listName??""}`},marginLeft:!0,get isInputActive(){return b(m)},set isInputActive(se){C(m,se,!0)},get containerElement(){return b(J)},set containerElement(se){C(J,se,!0)},get textareaElement(){return b(Z)},set textareaElement(se){C(Z,se,!0)}})},pe=ae=>{Ro(ae,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:ke,onEscape:we,onActivate:he,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!0,get isInputActive(){return b(m)},set isInputActive(se){C(m,se,!0)},get containerElement(){return b(J)},set containerElement(se){C(J,se,!0)},get textareaElement(){return b(Z)},set textareaElement(se){C(Z,se,!0)}})};ft(be,ae=>{b(y).length===0?ae(H):ae(pe,!1)})}ht(()=>Vo(W,1,`space-y-2 ${b(y).length===0?"empty-drop-zone":""}`,"svelte-k6mizj")),fa("consider",W,xe),fa("finalize",W,Te),Oe(U,V)},hr=U=>{var V=Lv(),W=ge(Bt(V),2);Ro(W,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:ke,onEscape:we,onActivate:he,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!0,get isInputActive(){return b(m)},set isInputActive(be){C(m,be,!0)},get containerElement(){return b(J)},set containerElement(be){C(J,be,!0)},get textareaElement(){return b(Z)},set textareaElement(be){C(Z,be,!0)}}),Oe(U,V)};ft(Wn,U=>{b(v)&&a()!==void 0?U(wn):U(hr,!1)})}qt(at,U=>C(q,U),()=>b(q));var zt=ge(at,2);Tv(zt,{get isOpen(){return b(x)},get taskId(){return b(w)},get taskText(){return b(A)},get taskPosition(){return b(g)},onSave:Qe,onCancel:ee,onArchive:_e});var vr=ge(zt,2);Av(vr,{get isOpen(){return b(L)},get listId(){return r.listId},get listName(){return r.listName},get listPosition(){return b(R)},onSave:Ke,onCancel:Ie}),ht(()=>{St(at,"data-list-id",r.listId),St(jt,"aria-label",`Rename list: ${r.listName}`),yn(Hn,r.listName)}),Oe(e,et),Un(),l()}dr(["click","keydown","change"]);var Kv=Ne('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border border-gray-200 max-w-md w-full mx-4"><h3 id="modal-title" class="text-lg font-semibold mb-4"> </h3> <p class="mb-6 text-sm text-gray-600"> </p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete</button></div></div></div>');function Bv(e,r){Vn(r,!0);function a(){r.onConfirm()}function s(){r.onCancel()}function l(x){x.target===x.currentTarget&&s()}function f(x){x.key==="Escape"&&s()}var v=Pr(),y=Bt(v);{var m=x=>{var w=Kv();w.__click=l,w.__keydown=f;var A=me(w),g=me(A),k=me(g),P=ge(g,2),L=me(P),R=ge(P,2),j=me(R);j.__click=s;var q=ge(j,2);q.__click=a,ht(()=>{yn(k,r.title),yn(L,r.message)}),Oe(x,w)};ft(y,x=>{r.isOpen&&x(m)})}Oe(e,v),Un()}dr(["click","keydown"]);var jv=Ne("<p>No archived tasks</p>"),zv=Ne('<li class="flex items-center gap-3 mb-2"><span class="line-through"> </span> <span class="text-sm text-gray-500"> </span> <span class="text-sm text-gray-400"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button> <button class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm">Delete</button></li>'),Vv=Ne("<ul></ul>"),Uv=Ne('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div> <!>',1);function Hv(e,r){Vn(r,!0);const a=()=>da(b(y),"$listsQuery",l),s=()=>da(b(v),"$archivedTasksQuery",l),[l,f]=gs();let v=fe(null),y=fe(null),m=fe(!1),x=fe(null);Ge(()=>{Ho(C(v,va(()=>mv()),!0),"$archivedTasksQuery",l),Ho(C(y,va(()=>ec()),!0),"$listsQuery",l)});function w(oe){if(!a())return"Unknown List";const ce=a().find(Ee=>Ee.id===oe);return ce?ce.name:"Unknown List"}function A(oe){return oe?new Date(oe).toLocaleString():"Unknown"}async function g(oe){try{await _v(oe)}catch(ce){console.error("Error restoring task:",ce)}}function k(oe,ce){C(x,{id:oe,text:ce},!0),C(m,!0)}async function P(){if(b(x))try{await bv(b(x).id),C(m,!1),C(x,null)}catch(oe){console.error("Error deleting task:",oe)}}function L(){C(m,!1),C(x,null)}var R=Uv(),j=Bt(R),q=ge(me(j),2);{var J=oe=>{var ce=Pr(),Ee=Bt(ce);{var xe=he=>{var we=jv();Oe(he,we)},Te=he=>{var we=Vv();aa(we,5,s,ol,(ke,Ye)=>{var qe=zv(),gt=me(qe),it=me(gt),Me=ge(gt,2),un=me(Me),pt=ge(Me,2),Qe=me(pt),ee=ge(pt,2);ee.__click=()=>g(b(Ye).id);var _e=ge(ee,2);_e.__click=()=>k(b(Ye).id,b(Ye).text),ht((Ve,Fe)=>{yn(it,b(Ye).text),yn(un,`(${Ve??""})`),yn(Qe,`Archived: ${Fe??""}`)},[()=>w(b(Ye).listId),()=>A(b(Ye).archivedAt)]),Oe(ke,qe)}),Oe(he,we)};ft(Ee,he=>{s().length===0?he(xe):he(Te,!1)})}Oe(oe,ce)};ft(q,oe=>{b(v)&&s()&&oe(J)})}var Z=ge(j,2);{let oe=li(()=>b(x)?`Are you sure you want to permanently delete "${b(x).text}"? This action cannot be undone.`:"");Bv(Z,{get isOpen(){return b(m)},title:"Delete Task",get message(){return b(oe)},onConfirm:P,onCancel:L})}ht(()=>Ot(j,`width: ${es}px;`)),Oe(e,R),Un(),f()}dr(["click"]);var Wv=Ne("<p>Loading...</p>"),Gv=Ne("<p>No lists found</p>"),Yv=Ne('<h2 class="mt-4 print:hidden"><div class="flex items-center gap-2"><input type="text" class="create-list-input cursor-pointer hover:underline svelte-1n46o8q" placeholder="List name..." aria-label="Enter list name"/> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" aria-label="Create list">Save</button></div></h2>'),qv=Ne('<h2 role="button" tabindex="0" class="cursor-pointer hover:underline print:hidden mt-4" aria-label="Create new list">Create new list</h2>'),Zv=Ne('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" disabled class="cursor-pointer opacity-50" aria-hidden="true" tabindex="-1"/> <span> </span></li>'),Qv=Ne('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden mt-2" style="margin-left: 1.5rem;"><span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea placeholder="Add new task..." class="flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div></div>'),Xv=Ne('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden mt-2" style="margin-left: 1.5rem;"><span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words" role="button" tabindex="0" aria-label="Add a task">Add a task</span></div>'),$v=Ne('<!> <!> <div class="create-list-drop-zone print:hidden svelte-1n46o8q"><ul class="create-list-drop-zone-ul svelte-1n46o8q"></ul></div> <!>',1),Jv=Ne('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><div class="w-full h-full p-4 overflow-auto"><!></div></div></div> <!></main>');function ep(e,r){Vn(r,!0);const a=()=>da(f,"$lists",s),[s,l]=gs();let f=va(()=>ec()),v=fe(Wt({})),y=fe(!1),m=fe(""),x=fe(null),w=fe(!1),A=fe(""),g=fe(null),k=fe(Wt([])),P=fe(null);Ge(()=>{if(a()&&Array.isArray(a())&&a().length>0&&Object.keys(b(v)).length===0){const ee={};for(const _e of a())ee[_e.id]="";C(v,ee,!0)}}),Ge(()=>{if(a()&&Array.isArray(a())&&a().length>0){const ee={...b(v)};let _e=!1;for(const Ve of a())Ve.id in ee||(ee[Ve.id]="",_e=!0);_e&&C(v,ee,!0)}});function L(ee,_e){b(v)[ee]=_e}function R(){window.print()}async function j(ee){await ca();for(let _e=0;_e<Ku;_e++){const Ve=document.querySelector(`[data-list-id="${ee}"]`);if(!Ve){await new Promise(Ie=>setTimeout(Ie,Po));continue}const Fe=Ve.querySelector(".add-task-container");if(!Fe){await new Promise(Ie=>setTimeout(Ie,Po));continue}const Ke=Fe.querySelector('span[role="button"]');if(!Ke||!(Ke instanceof HTMLElement)){await new Promise(Ie=>setTimeout(Ie,Po));continue}Ke.click();return}console.warn(`Could not activate Add Task input for list ${ee} after ${Ku} attempts`)}function q(){C(y,!0)}function J(ee){(ee.key==="Enter"||ee.key===" ")&&(ee.preventDefault(),ee.stopPropagation(),q())}function Z(ee){ee.key==="Escape"&&(C(y,!1),C(m,""))}Ge(()=>{if(b(y))return ts(b(x),()=>{b(y)&&(C(y,!1),C(m,""))},{checkIgnoreClick:ee=>{const _e=ee.target.closest("button");return _e&&_e.textContent?.trim()==="Save"},shouldClose:()=>!b(m)||b(m).trim()===""})}),Ge(()=>{b(y)&&b(x)&&setTimeout(()=>{b(x)?.focus()},0)});async function oe(){const ee=b(m)||"";if(ns(ee)){C(y,!1),C(m,"");return}const{text:_e,isBlank:Ve}=rs(ee);if(Ve){C(y,!1),C(m,"");return}try{const Fe=await pv(_e);C(m,""),C(y,!1),await j(Fe)}catch(Fe){console.error("Error creating list:",Fe)}}function ce(){C(w,!0)}function Ee(ee){ee.key==="Escape"&&(C(w,!1),C(A,""))}Ge(()=>{if(b(w))return ts(b(g),()=>{b(w)&&(C(w,!1),C(A,""))},{checkIgnoreClick:ee=>{const _e=ee.target.closest("button");return _e&&_e.textContent?.trim()==="Save"},shouldClose:()=>!b(A)||b(A).trim()===""})}),Ge(()=>{b(w)&&b(g)&&setTimeout(()=>{b(g)?.focus(),b(g)instanceof HTMLTextAreaElement&&(b(g).style.height="auto",b(g).style.height=`${Math.min(b(g).scrollHeight,Nr)}px`)},0)}),Ge(()=>{if(b(g)&&b(g)instanceof HTMLTextAreaElement){const ee=()=>{b(g).style.height="auto",b(g).style.height=`${Math.min(b(g).scrollHeight,Nr)}px`};return b(g).addEventListener("input",ee),()=>{b(g).removeEventListener("input",ee)}}});async function xe(){const ee=b(A)||"";if(ns(ee)){C(w,!1),C(A,"");return}const{text:_e}=rs(ee);try{const Ve=await tc(null,_e);C(A,""),C(w,!1);const Ke=(await Re.tasks.get(Ve))?.listId;Ke&&await j(Ke)}catch(Ve){console.error("Error creating task in unnamed list:",Ve)}}function Te(ee){C(k,ee.detail.items,!0)}async function he(ee){if(C(k,ee.detail.items,!0),ee.detail.items&&ee.detail.items.length>0)try{const _e=await ks();await ii(_e,ee.detail.items),C(k,[],!0)}catch(_e){console.error("Error creating list from dropped task:",_e),C(k,[],!0)}}var we=Jv(),ke=me(we),Ye=me(ke);Ye.__click=R;var qe=ge(ke,2),gt=me(qe),it=me(gt),Me=me(it);{var un=ee=>{var _e=Wv();Oe(ee,_e)},pt=ee=>{var _e=Pr(),Ve=Bt(_e);{var Fe=Ie=>{var et=Gv();Oe(Ie,et)},Ke=Ie=>{var et=Pr(),at=Bt(et);{var jt=Hn=>{var Wn=$v(),wn=Bt(Wn);aa(wn,1,a,ol,(pe,ae)=>{{let se=li(()=>b(ae).name??"Unnamed list"),ne=li(()=>b(v)[b(ae).id]||"");Fv(pe,{get listId(){return b(ae).id},get listName(){return b(se)},get newTaskInput(){return b(ne)},onInputChange:Be=>L(b(ae).id,Be),get allLists(){return a()}})}});var hr=ge(wn,2);{var zt=pe=>{var ae=Yv(),se=me(ae),ne=me(se);ne.__keydown=de=>{de.key==="Enter"&&!de.shiftKey?(de.preventDefault(),oe()):de.key==="Escape"&&Z(de)},qt(ne,de=>C(x,de),()=>b(x));var Be=ge(ne,2);Be.__click=oe,ms(ne,()=>b(m),de=>C(m,de)),Oe(pe,ae)},vr=pe=>{var ae=qv();ae.__click=q,ae.__keydown=J,Oe(pe,ae)};ft(hr,pe=>{b(y)?pe(zt):pe(vr,!1)})}var U=ge(hr,2),V=me(U);aa(V,21,()=>b(k),pe=>pe.id,(pe,ae)=>{var se=Zv(),ne=ge(me(se),2),Be=ge(ne,2),de=me(Be);ht(()=>{St(se,"data-id",b(ae).id),Ml(ne,b(ae).status==="checked"),Vo(Be,1,Pl(b(ae).status==="checked"?"line-through break-words":"break-words")),Ot(Be,`width: ${sr}px;`),yn(de,b(ae).text||"")}),Oe(pe,se)}),qt(V,pe=>C(P,pe),()=>b(P)),Ol(V,(pe,ae)=>Jl?.(pe,ae),()=>({items:b(k),type:"task"}));var W=ge(U,2);{var be=pe=>{var ae=Qv(),se=ge(me(ae),4),ne=me(se);ne.__input=de=>C(A,de.currentTarget.value,!0),ne.__keydown=de=>{de.key==="Enter"&&!de.shiftKey?(de.preventDefault(),xe()):de.key==="Escape"&&Ee(de)},qt(ne,de=>C(g,de),()=>b(g));var Be=ge(ne,2);Be.__click=xe,ht(()=>{Rl(ne,b(A)),Ot(ne,`width: ${sr}px;`)}),Oe(pe,ae)},H=pe=>{var ae=Xv(),se=ge(me(ae),4);se.__click=ce,se.__keydown=ne=>{(ne.key==="Enter"||ne.key===" ")&&(ne.preventDefault(),ce())},ht(()=>Ot(se,`width: ${sr}px;`)),Oe(pe,ae)};ft(W,pe=>{b(w)?pe(be):pe(H,!1)})}fa("consider",V,Te),fa("finalize",V,he),Oe(Hn,Wn)};ft(at,Hn=>{Array.isArray(a())&&Hn(jt)},!0)}Oe(Ie,et)};ft(Ve,Ie=>{Array.isArray(a())&&a().length===0?Ie(Fe):Ie(Ke,!1)},!0)}Oe(ee,_e)};ft(Me,ee=>{a()===void 0||a()===null?ee(un):ee(pt,!1)})}var Qe=ge(qe,2);Hv(Qe,{}),ht(()=>{Ot(ke,`width: ${es}px;`),Ot(qe,`width: ${es}px; height: ${wv}px;`)}),Oe(e,we),Un(),l()}dr(["click","keydown","input"]);const tp=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],np=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function rp(){try{if(await Re.lists.count()>0)return;await Re.lists.bulkAdd(tp),await Re.tasks.bulkAdd(np),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await rp().catch(console.error),jd(ep,{target:document.getElementById("app")})))();
