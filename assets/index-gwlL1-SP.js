(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(l){if(l.ep)return;l.ep=!0;const f=a(l);fetch(l.href,f)}})();const _f="production",ie=!_f.toLowerCase().startsWith("prod");var Uu=Array.isArray,bf=Array.prototype.indexOf,cs=Array.from,Qn=Object.defineProperty,vr=Object.getOwnPropertyDescriptor,Vu=Object.getOwnPropertyDescriptors,wf=Object.prototype,Ef=Array.prototype,fs=Object.getPrototypeOf,vu=Object.isExtensible;const ca=()=>{};function xf(e){for(var r=0;r<e.length;r++)e[r]()}function Hu(){var e,r,a=new Promise((s,l)=>{e=s,r=l});return{promise:a,resolve:e,reject:r}}const vt=2,ds=4,vs=8,Tf=1<<24,Sn=16,On=32,_r=64,Sa=128,cn=512,xt=1024,jt=2048,Cn=4096,Yt=8192,An=16384,hs=32768,Fr=65536,fa=1<<17,Wu=1<<18,Wr=1<<19,kf=1<<20,Xn=32768,Bo=1<<21,Oa=1<<22,Wn=1<<23,Dn=Symbol("$state"),Af=Symbol("legacy props"),Df=Symbol(""),Gu=Symbol("proxy path"),Or=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function If(){if(ie){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function hu(){if(ie){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Sf(){if(ie){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Of(e){if(ie){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Cf(){if(ie){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Pf(e){if(ie){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function Rf(){if(ie){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Lf(e){if(ie){const r=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Mf(e){if(ie){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Nf(){if(ie){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ff(){if(ie){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Kf(){if(ie){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Bf(){if(ie){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Yu=1,qu=2,Zu=4,jf=8,zf=16,Uf=1,Vf=4,Hf=8,Wf=16,Gf=1,Yf=2,bt=Symbol(),qf=Symbol("filename"),Zf="http://www.w3.org/1999/xhtml";var Qu="font-weight: bold",Xu="font-weight: normal";function Io(e){ie?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Qu,Xu):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Qf(){ie?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Qu,Xu):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function $u(e){return e===this.v}function Ju(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function el(e){return!Ju(e,this.v)}let Xf=!1;function hn(e,r){return e.label=r,tl(e.v,r),e}function tl(e,r){return e?.[Gu]?.(r),e}function $f(e){const r=new Error,a=Jf();return a.length===0?null:(a.unshift(`
`),Qn(r,"stack",{value:a.join(`
`)}),Qn(r,"name",{value:e}),r)}function Jf(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const a=r.split(`
`),s=[];for(let l=0;l<a.length;l++){const f=a[l],h=f.replaceAll("\\","/");if(f.trim()!=="Error"){if(f.includes("validate_each_keys"))return[];h.includes("svelte/src/internal")||h.includes("node_modules/.vite")||s.push(f)}}return s}let Ft=null;function Kr(e){Ft=e}let yi=null;function da(e){yi=e}let xi=null;function pu(e){xi=e}function br(e,r=!1,a){Ft={p:Ft,i:!1,c:null,e:null,s:e,x:null,l:null},ie&&(Ft.function=a,xi=a)}function wr(e){var r=Ft,a=r.e;if(a!==null){r.e=null;for(var s of a)ml(s)}return r.i=!0,Ft=r.p,ie&&(xi=Ft?.function??null),{}}function nl(){return!0}let dr=[];function rl(){var e=dr;dr=[],xf(e)}function Gr(e){if(dr.length===0&&!di){var r=dr;queueMicrotask(()=>{r===dr&&rl()})}dr.push(e)}function ed(){for(;dr.length>0;)rl()}const jo=new WeakMap;function il(e){var r=Le;if(r===null)return Pe.f|=Wn,e;if(ie&&e instanceof Error&&!jo.has(e)&&jo.set(e,td(e,r)),(r.f&hs)===0){if((r.f&Sa)===0)throw ie&&!r.parent&&e instanceof Error&&al(e),e;r.b.error(e)}else Br(e,r)}function Br(e,r){for(;r!==null;){if((r.f&Sa)!==0)try{r.b.error(e);return}catch(a){e=a}r=r.parent}throw ie&&e instanceof Error&&al(e),e}function td(e,r){const a=vr(e,"message");if(!(a&&!a.configurable)){for(var s=ms?"  ":"	",l=`
${s}in ${r.fn?.name||"<unknown>"}`,f=r.ctx;f!==null;)l+=`
${s}in ${f.function?.[qf].split("/").pop()}`,f=f.p;return{message:e.message+`
${l}
`,stack:e.stack?.split(`
`).filter(h=>!h.includes("svelte/src/internal")).join(`
`)}}}function al(e){const r=jo.get(e);r&&(Qn(e,"message",{value:r.message}),Qn(e,"stack",{value:r.stack}))}const na=new Set;let Ne=null,oa=null,en=null,$t=[],Ca=null,zo=!1,di=!1;class _n{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){$t=[],oa=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of r)this.#o(s,a);this.is_fork||this.#c(),this.is_deferred()?(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects)):(oa=this,Ne=null,yu(a.render_effects),yu(a.effects),oa=null,this.#u?.resolve()),en=null}#o(r,a){r.f^=xt;for(var s=r.first;s!==null;){var l=s.f,f=(l&(On|_r))!==0,h=f&&(l&xt)!==0,g=h||(l&Yt)!==0||this.skipped_effects.has(s);if((s.f&Sa)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[],block_effects:[]}),!g&&s.fn!==null){f?s.f^=xt:(l&ds)!==0?a.effects.push(s):ki(s)&&((s.f&Sn)!==0&&a.block_effects.push(s),_i(s));var y=s.first;if(y!==null){s=y;continue}}var E=s.parent;for(s=s.next;s===null&&E!==null;)E===a.effect&&(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects),a=a.parent),s=E.next,E=E.parent}}#s(r){for(const a of r)((a.f&jt)!==0?this.#a:this.#i).push(a),this.#l(a.deps),Tt(a,xt)}#l(r){if(r!==null)for(const a of r)(a.f&vt)===0||(a.f&Xn)===0||(a.f^=Xn,this.#l(a.deps))}capture(r,a){this.previous.has(r)||this.previous.set(r,a),(r.f&Wn)===0&&(this.current.set(r,r.v),en?.set(r,r.v))}activate(){Ne=this,this.apply()}deactivate(){Ne===this&&(Ne=null,en=null)}flush(){if(this.activate(),$t.length>0){if(ol(),Ne!==null&&Ne!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(na.size>1){this.previous.clear();var r=en,a=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const f of na){if(f===this){a=!1;continue}const h=[];for(const[y,E]of this.current){if(f.current.has(y))if(a&&E!==f.current.get(y))f.current.set(y,E);else continue;h.push(y)}if(h.length===0)continue;const g=[...f.current.keys()].filter(y=>!this.current.has(y));if(g.length>0){var l=$t;$t=[];const y=new Set,E=new Map;for(const x of h)sl(x,g,y,E);if($t.length>0){Ne=f,f.apply();for(const x of $t)f.#o(x,s);f.deactivate()}$t=l}}Ne=null,en=r}this.committed=!0,na.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)Tt(r,jt),mr(r);for(const r of this.#i)Tt(r,Cn),mr(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=Hu()).promise}static ensure(){if(Ne===null){const r=Ne=new _n;na.add(Ne),di||_n.enqueue(()=>{Ne===r&&r.flush()})}return Ne}static enqueue(r){Gr(r)}apply(){}}function nd(e){var r=di;di=!0;try{for(var a;;){if(ed(),$t.length===0&&(Ne?.flush(),$t.length===0))return Ca=null,a;ol()}}finally{di=r}}function ol(){var e=Yn;zo=!0;var r=ie?new Set:null;try{var a=0;for(pa(!0);$t.length>0;){var s=_n.ensure();if(a++>1e3){if(ie){var l=new Map;for(const h of s.current.keys())for(const[g,y]of h.updated??[]){var f=l.get(g);f||(f={error:y.error,count:0},l.set(g,f)),f.count+=y.count}for(const h of l.values())h.error&&console.error(h.error)}rd()}if(s.process($t),Gn.clear(),ie)for(const h of s.current.keys())r.add(h)}}finally{if(zo=!1,pa(e),Ca=null,ie)for(const h of r)h.updated=null}}function rd(){try{Rf()}catch(e){ie&&Qn(e,"stack",{value:""}),Br(e,Ca)}}let xn=null;function yu(e){var r=e.length;if(r!==0){for(var a=0;a<r;){var s=e[a++];if((s.f&(An|Yt))===0&&ki(s)&&(xn=new Set,_i(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?wl(s):s.fn=null),xn?.size>0)){Gn.clear();for(const l of xn){if((l.f&(An|Yt))!==0)continue;const f=[l];let h=l.parent;for(;h!==null;)xn.has(h)&&(xn.delete(h),f.push(h)),h=h.parent;for(let g=f.length-1;g>=0;g--){const y=f[g];(y.f&(An|Yt))===0&&_i(y)}}xn.clear()}}xn=null}}function sl(e,r,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const l of e.reactions){const f=l.f;(f&vt)!==0?sl(l,r,a,s):(f&(Oa|Sn))!==0&&(f&jt)===0&&ul(l,r,s)&&(Tt(l,jt),mr(l))}}function ul(e,r,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const l of e.deps){if(r.includes(l))return!0;if((l.f&vt)!==0&&ul(l,r,a))return a.set(l,!0),!0}return a.set(e,!1),!1}function mr(e){for(var r=Ca=e;r.parent!==null;){r=r.parent;var a=r.f;if(zo&&r===Le&&(a&Sn)!==0&&(a&Wu)===0)return;if((a&(_r|On))!==0){if((a&xt)===0)return;r.f^=xt}}$t.push(r)}function id(e){let r=0,a=gr(0),s;return ie&&hn(a,"createSubscriber version"),()=>{mi()&&(m(a),La(()=>(r===0&&(s=Yr(()=>e(()=>vi(a)))),r+=1,()=>{Gr(()=>{r-=1,r===0&&(s?.(),s=void 0,vi(a))})})))}}var ad=Fr|Wr|Sa;function od(e,r,a){new sd(e,r,a)}class sd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#v=0;#h=!1;#d=null;#_=id(()=>(this.#d=gr(this.#f),ie&&hn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,a,s){this.#t=r,this.#n=a,this.#u=s,this.parent=Le.b,this.#e=!!this.#n.pending,this.#a=_s(()=>{Le.b=this;{var l=this.#m();try{this.#i=Jt(()=>s(l))}catch(f){this.error(f)}this.#v>0?this.#y():this.#e=!1}return()=>{this.#c?.remove()}},ad)}#b(){try{this.#i=Jt(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=Jt(()=>r(this.#t)),_n.enqueue(()=>{var a=this.#m();this.#i=this.#p(()=>(_n.ensure(),Jt(()=>this.#u(a)))),this.#v>0?this.#y():(Lr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#m(){var r=this.#t;return this.#e&&(this.#c=$n(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var a=Le,s=Pe,l=Ft;ln(this.#a),Nt(this.#a),Kr(this.#a.ctx);try{return r()}catch(f){return il(f),null}finally{ln(a),Nt(s),Kr(l)}}#y(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Tl(this.#i,this.#l)),this.#o===null&&(this.#o=Jt(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#v+=r,this.#v===0&&(this.#e=!1,this.#o&&Lr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&zr(this.#d,this.#f)}get_effect_pending(){return this.#_(),m(this.#d)}error(r){var a=this.#n.onerror;let s=this.#n.failed;if(this.#h||!a&&!s)throw r;this.#i&&(Kt(this.#i),this.#i=null),this.#o&&(Kt(this.#o),this.#o=null),this.#s&&(Kt(this.#s),this.#s=null);var l=!1,f=!1;const h=()=>{if(l){Qf();return}l=!0,f&&Bf(),_n.ensure(),this.#f=0,this.#s!==null&&Lr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#h=!1,Jt(()=>this.#u(this.#t)))),this.#v>0?this.#y():this.#e=!1};var g=Pe;try{Nt(null),f=!0,a?.(r,h),f=!1}catch(y){Br(y,this.#a&&this.#a.parent)}finally{Nt(g)}s&&Gr(()=>{this.#s=this.#p(()=>{_n.ensure(),this.#h=!0;try{return Jt(()=>{s(this.#t,()=>r,()=>h)})}catch(y){return Br(y,this.#a.parent),null}finally{this.#h=!1}})})}}function So(e,r){return r}function ud(e,r,a){for(var s=[],l=r.length,f=0;f<l;f++)bs(r[f].e,s,!0);El(s,()=>{var h=s.length===0&&a!==null;if(h){var g=a,y=g.parentNode;Ed(y),y.append(g),e.items.clear(),pn(e,r[0].prev,r[l-1].next)}for(var E=0;E<l;E++){var x=r[E];h||(e.items.delete(x.k),pn(e,x.prev,x.next)),Kt(x.e,!h)}e.first===r[0]&&(e.first=r[0].prev)})}function Rr(e,r,a,s,l,f=null){var h=e,g=new Map,y=null,E=(r&Zu)!==0,x=(r&Yu)!==0,D=(r&qu)!==0;if(E){var b=e;h=b.appendChild($n())}var T=null,R=ll(()=>{var G=a();return Uu(G)?G:G==null?[]:cs(G)}),M,N=!0;function F(){ld(Z,M,h,r,s),T!==null&&(M.length===0?(T.fragment?(h.before(T.fragment),T.fragment=null):ws(T.effect),H.first=T.effect):Lr(T.effect,()=>{T=null}))}var H=_s(()=>{M=m(R);for(var G=M.length,ne=new Set,se=Ne,me=null,ye=yl(),ce=0;ce<G;ce+=1){var ge=M[ce],fe=s(ge,ce),Ee=N?null:g.get(fe);Ee?(x&&zr(Ee.v,ge),D?zr(Ee.i,ce):Ee.i=ce,ye&&se.skipped_effects.delete(Ee.e)):(Ee=cd(N?h:null,me,ge,fe,ce,l,r,a),N&&(Ee.o=!0,me===null?y=Ee:me.next=Ee,me=Ee),g.set(fe,Ee)),ne.add(fe)}if(G===0&&f&&!T)if(N)T={fragment:null,effect:Jt(()=>f(h))};else{var Ve=document.createDocumentFragment(),Fe=$n();Ve.append(Fe),T={fragment:Ve,effect:Jt(()=>f(Fe))}}if(!N)if(ye){for(const[et,tt]of g)ne.has(et)||se.skipped_effects.add(tt.e);se.oncommit(F),se.ondiscard(()=>{})}else F();m(R)}),Z={effect:H,items:g,first:y};N=!1}function ld(e,r,a,s,l){var f=(s&jf)!==0,h=r.length,g=e.items,y=e.first,E,x=null,D,b=[],T=[],R,M,N,F;if(f)for(F=0;F<h;F+=1)R=r[F],M=l(R,F),N=g.get(M),N.o&&(N.a?.measure(),(D??=new Set).add(N));for(F=0;F<h;F+=1){if(R=r[F],M=l(R,F),N=g.get(M),e.first??=N,!N.o){N.o=!0;var H=x?x.next:y;pn(e,x,N),pn(e,N,H),Oo(N,H,a),x=N,b=[],T=[],y=x.next;continue}if((N.e.f&Yt)!==0&&(ws(N.e),f&&(N.a?.unfix(),(D??=new Set).delete(N))),N!==y){if(E!==void 0&&E.has(N)){if(b.length<T.length){var Z=T[0],G;x=Z.prev;var ne=b[0],se=b[b.length-1];for(G=0;G<b.length;G+=1)Oo(b[G],Z,a);for(G=0;G<T.length;G+=1)E.delete(T[G]);pn(e,ne.prev,se.next),pn(e,x,ne),pn(e,se,Z),y=Z,x=se,F-=1,b=[],T=[]}else E.delete(N),Oo(N,y,a),pn(e,N.prev,N.next),pn(e,N,x===null?e.first:x.next),pn(e,x,N),x=N;continue}for(b=[],T=[];y!==null&&y.k!==M;)(y.e.f&Yt)===0&&(E??=new Set).add(y),T.push(y),y=y.next;if(y===null)continue;N=y}b.push(N),x=N,y=N.next}if(y!==null||E!==void 0){for(var me=E===void 0?[]:cs(E);y!==null;)(y.e.f&Yt)===0&&me.push(y),y=y.next;var ye=me.length;if(ye>0){var ce=(s&Zu)!==0&&h===0?a:null;if(f){for(F=0;F<ye;F+=1)me[F].a?.measure();for(F=0;F<ye;F+=1)me[F].a?.fix()}ud(e,me,ce)}}f&&Gr(()=>{if(D!==void 0)for(N of D)N.a?.apply()})}function cd(e,r,a,s,l,f,h,g){var y=(h&Yu)!==0,E=(h&zf)===0,x=y?E?fl(a,!1,!1):gr(a):a,D=(h&qu)===0?l:gr(l);ie&&y&&(x.trace=()=>{var R=typeof D=="number"?l:D.v;g()[R]});var b={i:D,v:x,k:s,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var T=document.createDocumentFragment();T.append(e=$n())}return b.e=Jt(()=>f(e,x,D,g)),r!==null&&(r.next=b),b}finally{}}function Oo(e,r,a){for(var s=e.next?e.next.e.nodes_start:a,l=r?r.e.nodes_start:a,f=e.e.nodes_start;f!==null&&f!==s;){var h=Ti(f);l.before(f),f=h}}function pn(e,r,a){r===null?(e.first=a,e.effect.first=a&&a.e):(r.e===e.effect.last&&a!==null&&(e.effect.last=a.e),r.e.next&&(r.e.next.prev=null),r.next=a,r.e.next=a&&a.e),a===null?e.effect.last=r&&r.e:(a.e===e.effect.last&&r===null&&(e.effect.last=a.e.prev),a.e.prev&&(a.e.prev.next=null),a.prev=r,a.e.prev=r&&r.e)}function fd(e,r,a,s){const l=Pa;if(a.length===0&&e.length===0){s(r.map(l));return}var f=Ne,h=Le,g=dd();function y(){Promise.all(a.map(E=>hd(E))).then(E=>{g();try{s([...r.map(l),...E])}catch(x){(h.f&An)===0&&Br(x,h)}f?.deactivate(),va()}).catch(E=>{Br(E,h)})}e.length>0?Promise.all(e).then(()=>{g();try{return y()}finally{f?.deactivate(),va()}}):y()}function dd(){var e=Le,r=Pe,a=Ft,s=Ne;if(ie)var l=yi;return function(h=!0){ln(e),Nt(r),Kr(a),h&&s?.activate(),ie&&da(l)}}function va(){ln(null),Nt(null),Kr(null),ie&&da(null)}const vd=new Set;function Pa(e){var r=vt|jt,a=Pe!==null&&(Pe.f&vt)!==0?Pe:null;return Le!==null&&(Le.f|=Wr),{ctx:Ft,deps:null,effects:null,equals:$u,f:r,fn:e,reactions:null,rv:0,v:bt,wv:0,parent:a??Le,ac:null}}function hd(e,r){let a=Le;a===null&&If();var s=a.b,l=void 0,f=gr(bt),h=!Pe,g=new Map;return Id(()=>{var y=Hu();l=y.promise;try{Promise.resolve(e()).then(y.resolve,y.reject).then(()=>{E===Ne&&E.committed&&E.deactivate(),va()})}catch(b){y.reject(b),va()}var E=Ne;if(h){var x=!s.is_pending();s.update_pending_count(1),E.increment(x),g.get(E)?.reject(Or),g.delete(E),g.set(E,y)}const D=(b,T=void 0)=>{if(E.activate(),T)T!==Or&&(f.f|=Wn,zr(f,T));else{(f.f&Wn)!==0&&(f.f^=Wn),zr(f,b);for(const[R,M]of g){if(g.delete(R),R===E)break;M.reject(Or)}}h&&(s.update_pending_count(-1),E.decrement(x))};y.promise.then(D,b=>D(null,b||"unknown"))}),gs(()=>{for(const y of g.values())y.reject(Or)}),ie&&(f.f|=Oa),new Promise(y=>{function E(x){function D(){x===l?y(f):E(l)}x.then(D,D)}E(l)})}function Wt(e){const r=Pa(e);return kl(r),r}function ll(e){const r=Pa(e);return r.equals=el,r}function Uo(e){var r=e.effects;if(r!==null){e.effects=null;for(var a=0;a<r.length;a+=1)Kt(r[a])}}let Co=[];function pd(e){for(var r=e.parent;r!==null;){if((r.f&vt)===0)return(r.f&An)===0?r:null;r=r.parent}return null}function ps(e){var r,a=Le;if(ln(pd(e)),ie){let s=jr;mu(new Set);try{Co.includes(e)&&Sf(),Co.push(e),e.f&=~Xn,Uo(e),r=Vo(e)}finally{ln(a),mu(s),Co.pop()}}else try{e.f&=~Xn,Uo(e),r=Vo(e)}finally{ln(a)}return r}function cl(e){var r=ps(e);if(e.equals(r)||(Ne?.is_fork||(e.v=r),e.wv=Dl()),!Er)if(en!==null)(mi()||Ne?.is_fork)&&en.set(e,r);else{var a=(e.f&cn)===0?Cn:xt;Tt(e,a)}}let jr=new Set;const Gn=new Map;function mu(e){jr=e}let ys=!1;function yd(){ys=!0}function gr(e,r){var a={f:0,v:e,reactions:null,equals:$u,rv:0,wv:0};return a}function pe(e,r){const a=gr(e);return kl(a),a}function fl(e,r=!1,a=!0){const s=gr(e);return r||(s.equals=el),s}function O(e,r,a=!1){Pe!==null&&(!bn||(Pe.f&fa)!==0)&&nl()&&(Pe.f&(vt|Sn|Oa|fa))!==0&&!In?.includes(e)&&Kf();let s=a?tn(r):r;return ie&&tl(s,e.label),zr(e,s)}function zr(e,r){if(!e.equals(r)){var a=e.v;Er?Gn.set(e,r):Gn.set(e,a),e.v=r;var s=_n.ensure();if(s.capture(e,a),ie){if(Le!==null){e.updated??=new Map;const l=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:l}),l>5){const f=$f("updated at");if(f!==null){let h=e.updated.get(f.stack);h||(h={error:f,count:0},e.updated.set(f.stack,h)),h.count++}}}Le!==null&&(e.set_during_effect=!0)}(e.f&vt)!==0&&((e.f&jt)!==0&&ps(e),Tt(e,(e.f&cn)!==0?xt:Cn)),e.wv=Dl(),vl(e,jt),Le!==null&&(Le.f&xt)!==0&&(Le.f&(On|_r))===0&&(Qt===null?Cd([e]):Qt.push(e)),!s.is_fork&&jr.size>0&&!ys&&dl()}return r}function dl(){ys=!1;var e=Yn;pa(!0);const r=Array.from(jr);try{for(const a of r)(a.f&xt)!==0&&Tt(a,Cn),ki(a)&&_i(a)}finally{pa(e)}jr.clear()}function vi(e){O(e,e.v+1)}function vl(e,r){var a=e.reactions;if(a!==null)for(var s=a.length,l=0;l<s;l++){var f=a[l],h=f.f;if(ie&&(h&fa)!==0){jr.add(f);continue}var g=(h&jt)===0;if(g&&Tt(f,r),(h&vt)!==0){var y=f;en?.delete(y),(h&Xn)===0&&(h&cn&&(f.f|=Xn),vl(y,Cn))}else g&&((h&Sn)!==0&&xn!==null&&xn.add(f),mr(f))}}const md=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function tn(e){if(typeof e!="object"||e===null||Dn in e)return e;const r=fs(e);if(r!==wf&&r!==Ef)return e;var a=new Map,s=Uu(e),l=pe(0),f=hr,h=x=>{if(hr===f)return x();var D=Pe,b=hr;Nt(null),wu(f);var T=x();return Nt(D),wu(b),T};s&&(a.set("length",pe(e.length)),ie&&(e=_d(e)));var g="";let y=!1;function E(x){if(!y){y=!0,g=x,hn(l,`${g} version`);for(const[D,b]of a)hn(b,ur(g,D));y=!1}}return new Proxy(e,{defineProperty(x,D,b){(!("value"in b)||b.configurable===!1||b.enumerable===!1||b.writable===!1)&&Nf();var T=a.get(D);return T===void 0?T=h(()=>{var R=pe(b.value);return a.set(D,R),ie&&typeof D=="string"&&hn(R,ur(g,D)),R}):O(T,b.value,!0),!0},deleteProperty(x,D){var b=a.get(D);if(b===void 0){if(D in x){const T=h(()=>pe(bt));a.set(D,T),vi(l),ie&&hn(T,ur(g,D))}}else O(b,bt),vi(l);return!0},get(x,D,b){if(D===Dn)return e;if(ie&&D===Gu)return E;var T=a.get(D),R=D in x;if(T===void 0&&(!R||vr(x,D)?.writable)&&(T=h(()=>{var N=tn(R?x[D]:bt),F=pe(N);return ie&&hn(F,ur(g,D)),F}),a.set(D,T)),T!==void 0){var M=m(T);return M===bt?void 0:M}return Reflect.get(x,D,b)},getOwnPropertyDescriptor(x,D){var b=Reflect.getOwnPropertyDescriptor(x,D);if(b&&"value"in b){var T=a.get(D);T&&(b.value=m(T))}else if(b===void 0){var R=a.get(D),M=R?.v;if(R!==void 0&&M!==bt)return{enumerable:!0,configurable:!0,value:M,writable:!0}}return b},has(x,D){if(D===Dn)return!0;var b=a.get(D),T=b!==void 0&&b.v!==bt||Reflect.has(x,D);if(b!==void 0||Le!==null&&(!T||vr(x,D)?.writable)){b===void 0&&(b=h(()=>{var M=T?tn(x[D]):bt,N=pe(M);return ie&&hn(N,ur(g,D)),N}),a.set(D,b));var R=m(b);if(R===bt)return!1}return T},set(x,D,b,T){var R=a.get(D),M=D in x;if(s&&D==="length")for(var N=b;N<R.v;N+=1){var F=a.get(N+"");F!==void 0?O(F,bt):N in x&&(F=h(()=>pe(bt)),a.set(N+"",F),ie&&hn(F,ur(g,N)))}if(R===void 0)(!M||vr(x,D)?.writable)&&(R=h(()=>pe(void 0)),ie&&hn(R,ur(g,D)),O(R,tn(b)),a.set(D,R));else{M=R.v!==bt;var H=h(()=>tn(b));O(R,H)}var Z=Reflect.getOwnPropertyDescriptor(x,D);if(Z?.set&&Z.set.call(T,b),!M){if(s&&typeof D=="string"){var G=a.get("length"),ne=Number(D);Number.isInteger(ne)&&ne>=G.v&&O(G,ne+1)}vi(l)}return!0},ownKeys(x){m(l);var D=Reflect.ownKeys(x).filter(R=>{var M=a.get(R);return M===void 0||M.v!==bt});for(var[b,T]of a)T.v!==bt&&!(b in x)&&D.push(b);return D},setPrototypeOf(){Ff()}})}function ur(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:md.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function Po(e){try{if(e!==null&&typeof e=="object"&&Dn in e)return e[Dn]}catch{}return e}const gd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function _d(e){return new Proxy(e,{get(r,a,s){var l=Reflect.get(r,a,s);return gd.has(a)?function(...f){yd();var h=l.apply(this,f);return dl(),h}:l}})}function bd(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:a,lastIndexOf:s,includes:l}=e;e.indexOf=function(f,h){const g=a.call(this,f,h);if(g===-1){for(let y=h??0;y<this.length;y+=1)if(Po(this[y])===f){Io("array.indexOf(...)");break}}return g},e.lastIndexOf=function(f,h){const g=s.call(this,f,h??this.length-1);if(g===-1){for(let y=0;y<=(h??this.length-1);y+=1)if(Po(this[y])===f){Io("array.lastIndexOf(...)");break}}return g},e.includes=function(f,h){const g=l.call(this,f,h);if(!g){for(let y=0;y<this.length;y+=1)if(Po(this[y])===f){Io("array.includes(...)");break}}return g},Array.__svelte_cleanup=()=>{e.indexOf=a,e.lastIndexOf=s,e.includes=l}}var gu,ms,hl,pl;function wd(){if(gu===void 0){gu=window,ms=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,a=Text.prototype;hl=vr(r,"firstChild").get,pl=vr(r,"nextSibling").get,vu(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),vu(a)&&(a.__t=void 0),ie&&(e.__svelte_meta=null,bd())}}function $n(e=""){return document.createTextNode(e)}function ha(e){return hl.call(e)}function Ti(e){return pl.call(e)}function de(e,r){return ha(e)}function dt(e,r=!1){{var a=ha(e);return a instanceof Comment&&a.data===""?Ti(a):a}}function we(e,r=1,a=!1){let s=e;for(;r--;)s=Ti(s);return s}function Ed(e){e.textContent=""}function yl(){return!1}let _u=!1;function xd(){_u||(_u=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function Ra(e){var r=Pe,a=Le;Nt(null),ln(null);try{return e()}finally{Nt(r),ln(a)}}function Td(e,r,a,s=a){e.addEventListener(r,()=>Ra(a));const l=e.__on_r;l?e.__on_r=()=>{l(),s(!0)}:e.__on_r=()=>s(!0),xd()}function kd(e){Le===null&&(Pe===null&&Pf(e),Cf()),Er&&Of(e)}function Ad(e,r){var a=r.last;a===null?r.last=r.first=e:(a.next=e,e.prev=a,r.last=e)}function Pn(e,r,a){var s=Le;if(ie)for(;s!==null&&(s.f&fa)!==0;)s=s.parent;s!==null&&(s.f&Yt)!==0&&(e|=Yt);var l={ctx:Ft,deps:null,nodes_start:null,nodes_end:null,f:e|jt|cn,first:null,fn:r,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(ie&&(l.component_function=xi),a)try{_i(l),l.f|=hs}catch(g){throw Kt(l),g}else r!==null&&mr(l);var f=l;if(a&&f.deps===null&&f.teardown===null&&f.nodes_start===null&&f.first===f.last&&(f.f&Wr)===0&&(f=f.first,(e&Sn)!==0&&(e&Fr)!==0&&f!==null&&(f.f|=Fr)),f!==null&&(f.parent=s,s!==null&&Ad(f,s),Pe!==null&&(Pe.f&vt)!==0&&(e&_r)===0)){var h=Pe;(h.effects??=[]).push(f)}return l}function mi(){return Pe!==null&&!bn}function gs(e){const r=Pn(vs,null,!1);return Tt(r,xt),r.teardown=e,r}function qe(e){kd("$effect"),ie&&Qn(e,"name",{value:"$effect"});var r=Le.f,a=!Pe&&(r&On)!==0&&(r&hs)===0;if(a){var s=Ft;(s.e??=[]).push(e)}else return ml(e)}function ml(e){return Pn(ds|kf,e,!1)}function Dd(e){_n.ensure();const r=Pn(_r|Wr,e,!0);return(a={})=>new Promise(s=>{a.outro?Lr(r,()=>{Kt(r),s(void 0)}):(Kt(r),s(void 0))})}function gl(e){return Pn(ds,e,!1)}function Id(e){return Pn(Oa|Wr,e,!0)}function La(e,r=0){return Pn(vs|r,e,!0)}function Ze(e,r=[],a=[],s=[]){fd(s,r,a,l=>{Pn(vs,()=>e(...l.map(m)),!0)})}function _s(e,r=0){var a=Pn(Sn|r,e,!0);return ie&&(a.dev_stack=yi),a}function Jt(e){return Pn(On|Wr,e,!0)}function _l(e){var r=e.teardown;if(r!==null){const a=Er,s=Pe;bu(!0),Nt(null);try{r.call(null)}finally{bu(a),Nt(s)}}}function bl(e,r=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const l=a.ac;l!==null&&Ra(()=>{l.abort(Or)});var s=a.next;(a.f&_r)!==0?a.parent=null:Kt(a,r),a=s}}function Sd(e){for(var r=e.first;r!==null;){var a=r.next;(r.f&On)===0&&Kt(r),r=a}}function Kt(e,r=!0){var a=!1;(r||(e.f&Wu)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Od(e.nodes_start,e.nodes_end),a=!0),bl(e,r&&!a),ya(e,0),Tt(e,An);var s=e.transitions;if(s!==null)for(const f of s)f.stop();_l(e);var l=e.parent;l!==null&&l.first!==null&&wl(e),ie&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Od(e,r){for(;e!==null;){var a=e===r?null:Ti(e);e.remove(),e=a}}function wl(e){var r=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),r!==null&&(r.first===e&&(r.first=s),r.last===e&&(r.last=a))}function Lr(e,r,a=!0){var s=[];bs(e,s,!0),El(s,()=>{a&&Kt(e),r&&r()})}function El(e,r){var a=e.length;if(a>0){var s=()=>--a||r();for(var l of e)l.out(s)}else r()}function bs(e,r,a){if((e.f&Yt)===0){if(e.f^=Yt,e.transitions!==null)for(const h of e.transitions)(h.is_global||a)&&r.push(h);for(var s=e.first;s!==null;){var l=s.next,f=(s.f&Fr)!==0||(s.f&On)!==0&&(e.f&Sn)!==0;bs(s,r,f?a:!1),s=l}}}function ws(e){xl(e,!0)}function xl(e,r){if((e.f&Yt)!==0){e.f^=Yt,(e.f&xt)===0&&(Tt(e,jt),mr(e));for(var a=e.first;a!==null;){var s=a.next,l=(a.f&Fr)!==0||(a.f&On)!==0;xl(a,l?r:!1),a=s}if(e.transitions!==null)for(const f of e.transitions)(f.is_global||r)&&f.in()}}function Tl(e,r){for(var a=e.nodes_start,s=e.nodes_end;a!==null;){var l=a===s?null:Ti(a);r.append(a),a=l}}let Yn=!1;function pa(e){Yn=e}let Er=!1;function bu(e){Er=e}let Pe=null,bn=!1;function Nt(e){Pe=e}let Le=null;function ln(e){Le=e}let In=null;function kl(e){Pe!==null&&(In===null?In=[e]:In.push(e))}let St=null,Ht=0,Qt=null;function Cd(e){Qt=e}let Al=1,gi=0,hr=gi;function wu(e){hr=e}function Dl(){return++Al}function ki(e){var r=e.f;if((r&jt)!==0)return!0;if(r&vt&&(e.f&=~Xn),(r&Cn)!==0){var a=e.deps;if(a!==null)for(var s=a.length,l=0;l<s;l++){var f=a[l];if(ki(f)&&cl(f),f.wv>e.wv)return!0}(r&cn)!==0&&en===null&&Tt(e,xt)}return!1}function Il(e,r,a=!0){var s=e.reactions;if(s!==null&&!In?.includes(e))for(var l=0;l<s.length;l++){var f=s[l];(f.f&vt)!==0?Il(f,r,!1):r===f&&(a?Tt(f,jt):(f.f&xt)!==0&&Tt(f,Cn),mr(f))}}function Vo(e){var r=St,a=Ht,s=Qt,l=Pe,f=In,h=Ft,g=bn,y=hr,E=e.f;St=null,Ht=0,Qt=null,Pe=(E&(On|_r))===0?e:null,In=null,Kr(e.ctx),bn=!1,hr=++gi,e.ac!==null&&(Ra(()=>{e.ac.abort(Or)}),e.ac=null);try{e.f|=Bo;var x=e.fn,D=x(),b=e.deps;if(St!==null){var T;if(ya(e,Ht),b!==null&&Ht>0)for(b.length=Ht+St.length,T=0;T<St.length;T++)b[Ht+T]=St[T];else e.deps=b=St;if(Yn&&mi()&&(e.f&cn)!==0)for(T=Ht;T<b.length;T++)(b[T].reactions??=[]).push(e)}else b!==null&&Ht<b.length&&(ya(e,Ht),b.length=Ht);if(nl()&&Qt!==null&&!bn&&b!==null&&(e.f&(vt|Cn|jt))===0)for(T=0;T<Qt.length;T++)Il(Qt[T],e);return l!==null&&l!==e&&(gi++,Qt!==null&&(s===null?s=Qt:s.push(...Qt))),(e.f&Wn)!==0&&(e.f^=Wn),D}catch(R){return il(R)}finally{e.f^=Bo,St=r,Ht=a,Qt=s,Pe=l,In=f,Kr(h),bn=g,hr=y}}function Pd(e,r){let a=r.reactions;if(a!==null){var s=bf.call(a,e);if(s!==-1){var l=a.length-1;l===0?a=r.reactions=null:(a[s]=a[l],a.pop())}}a===null&&(r.f&vt)!==0&&(St===null||!St.includes(r))&&(Tt(r,Cn),(r.f&cn)!==0&&(r.f^=cn,r.f&=~Xn),Uo(r),ya(r,0))}function ya(e,r){var a=e.deps;if(a!==null)for(var s=r;s<a.length;s++)Pd(e,a[s])}function _i(e){var r=e.f;if((r&An)===0){Tt(e,xt);var a=Le,s=Yn;if(Le=e,Yn=!0,ie){var l=xi;pu(e.component_function);var f=yi;da(e.dev_stack??yi)}try{(r&(Sn|Tf))!==0?Sd(e):bl(e),_l(e);var h=Vo(e);e.teardown=typeof h=="function"?h:null,e.wv=Al;var g;ie&&Xf&&(e.f&jt)!==0&&e.deps}finally{Yn=s,Le=a,ie&&(pu(l),da(f))}}}async function fr(){await Promise.resolve(),nd()}function m(e){var r=e.f,a=(r&vt)!==0;if(Pe!==null&&!bn){var s=Le!==null&&(Le.f&An)!==0;if(!s&&!In?.includes(e)){var l=Pe.deps;if((Pe.f&Bo)!==0)e.rv<gi&&(e.rv=gi,St===null&&l!==null&&l[Ht]===e?Ht++:St===null?St=[e]:St.includes(e)||St.push(e));else{(Pe.deps??=[]).push(e);var f=e.reactions;f===null?e.reactions=[Pe]:f.includes(Pe)||f.push(Pe)}}}if(ie&&vd.delete(e),Er){if(Gn.has(e))return Gn.get(e);if(a){var h=e,g=h.v;return((h.f&xt)===0&&h.reactions!==null||Ol(h))&&(g=ps(h)),Gn.set(h,g),g}}else a&&(!en?.has(e)||Ne?.is_fork&&!mi())&&(h=e,ki(h)&&cl(h),Yn&&mi()&&(h.f&cn)===0&&Sl(h));if(en?.has(e))return en.get(e);if((e.f&Wn)!==0)throw e.v;return e.v}function Sl(e){if(e.deps!==null){e.f^=cn;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&vt)!==0&&(r.f&cn)===0&&Sl(r)}}function Ol(e){if(e.v===bt)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(Gn.has(r)||(r.f&vt)!==0&&Ol(r))return!0;return!1}function Yr(e){var r=bn;try{return bn=!0,e()}finally{bn=r}}const Rd=-7169;function Tt(e,r){e.f=e.f&Rd|r}function Ld(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Dn in e)Ho(e);else if(!Array.isArray(e))for(let r in e){const a=e[r];typeof a=="object"&&a&&Dn in a&&Ho(a)}}}function Ho(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Ho(e[s],r)}catch{}const a=fs(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=Vu(a);for(let l in s){const f=s[l].get;if(f)try{f.call(e)}catch{}}}}}const Md=["touchstart","touchmove"];function Nd(e){return Md.includes(e)}const Cl=new Set,Wo=new Set;function Fd(e,r,a,s={}){function l(f){if(s.capture||li.call(r,f),!f.cancelBubble)return Ra(()=>a?.call(this,f))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Gr(()=>{r.addEventListener(e,l,s)}):r.addEventListener(e,l,s),l}function Cr(e,r,a,s,l){var f={capture:s,passive:l},h=Fd(e,r,a,f);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&gs(()=>{r.removeEventListener(e,h,f)})}function qr(e){for(var r=0;r<e.length;r++)Cl.add(e[r]);for(var a of Wo)a(e)}let Eu=null;function li(e){var r=this,a=r.ownerDocument,s=e.type,l=e.composedPath?.()||[],f=l[0]||e.target;Eu=e;var h=0,g=Eu===e&&e.__root;if(g){var y=l.indexOf(g);if(y!==-1&&(r===document||r===window)){e.__root=r;return}var E=l.indexOf(r);if(E===-1)return;y<=E&&(h=y)}if(f=l[h]||e.target,f!==r){Qn(e,"currentTarget",{configurable:!0,get(){return f||a}});var x=Pe,D=Le;Nt(null),ln(null);try{for(var b,T=[];f!==null;){var R=f.assignedSlot||f.parentNode||f.host||null;try{var M=f["__"+s];M!=null&&(!f.disabled||e.target===f)&&M.call(f,e)}catch(N){b?T.push(N):b=N}if(e.cancelBubble||R===r||R===null)break;f=R}if(b){for(let N of T)queueMicrotask(()=>{throw N});throw b}}finally{e.__root=r,delete e.currentTarget,Nt(x),ln(D)}}}function Kd(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function Go(e,r){var a=Le;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=r)}function ke(e,r){var a=(r&Gf)!==0,s=(r&Yf)!==0,l,f=!e.startsWith("<!>");return()=>{l===void 0&&(l=Kd(f?e:"<!>"+e),a||(l=ha(l)));var h=s||ms?document.importNode(l,!0):l.cloneNode(!0);if(a){var g=ha(h),y=h.lastChild;Go(g,y)}else Go(h,h);return h}}function qn(){var e=document.createDocumentFragment(),r=document.createComment(""),a=$n();return e.append(r,a),Go(r,a),e}function ve(e,r){e!==null&&e.before(r)}function Vn(e,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Bd(e,r){return jd(e,r)}const Sr=new Map;function jd(e,{target:r,anchor:a,props:s={},events:l,context:f,intro:h=!0}){wd();var g=new Set,y=D=>{for(var b=0;b<D.length;b++){var T=D[b];if(!g.has(T)){g.add(T);var R=Nd(T);r.addEventListener(T,li,{passive:R});var M=Sr.get(T);M===void 0?(document.addEventListener(T,li,{passive:R}),Sr.set(T,1)):Sr.set(T,M+1)}}};y(cs(Cl)),Wo.add(y);var E=void 0,x=Dd(()=>{var D=a??r.appendChild($n());return od(D,{pending:()=>{}},b=>{if(f){br({});var T=Ft;T.c=f}l&&(s.$$events=l),E=e(b,s)||{},f&&wr()}),()=>{for(var b of g){r.removeEventListener(b,li);var T=Sr.get(b);--T===0?(document.removeEventListener(b,li),Sr.delete(b)):Sr.set(b,T)}Wo.delete(y),D!==a&&D.parentNode?.removeChild(D)}});return zd.set(E,x),E}let zd=new WeakMap;class Ud{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,a=!0){this.anchor=r,this.#u=a}#a=()=>{var r=Ne;if(this.#e.has(r)){var a=this.#e.get(r),s=this.#t.get(a);if(s)ws(s),this.#n.delete(a);else{var l=this.#r.get(a);l&&(this.#t.set(a,l.effect),this.#r.delete(a),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[f,h]of this.#e){if(this.#e.delete(f),f===r)break;const g=this.#r.get(h);g&&(Kt(g.effect),this.#r.delete(h))}for(const[f,h]of this.#t){if(f===a||this.#n.has(f))continue;const g=()=>{if(Array.from(this.#e.values()).includes(f)){var E=document.createDocumentFragment();Tl(h,E),E.append($n()),this.#r.set(f,{effect:h,fragment:E})}else Kt(h);this.#n.delete(f),this.#t.delete(f)};this.#u||!s?(this.#n.add(f),Lr(h,g,!1)):g()}}};#i=r=>{this.#e.delete(r);const a=Array.from(this.#e.values());for(const[s,l]of this.#r)a.includes(s)||(Kt(l.effect),this.#r.delete(s))};ensure(r,a){var s=Ne,l=yl();if(a&&!this.#t.has(r)&&!this.#r.has(r))if(l){var f=document.createDocumentFragment(),h=$n();f.append(h),this.#r.set(r,{effect:Jt(()=>a(h)),fragment:f})}else this.#t.set(r,Jt(()=>a(this.anchor)));if(this.#e.set(s,r),l){for(const[g,y]of this.#t)g===r?s.skipped_effects.delete(y):s.skipped_effects.add(y);for(const[g,y]of this.#r)g===r?s.skipped_effects.delete(y.effect):s.skipped_effects.add(y.effect);s.oncommit(this.#a),s.ondiscard(this.#i)}else this.#a()}}function ze(e,r,a=!1){var s=new Ud(e),l=a?Fr:0;function f(h,g){s.ensure(h,g)}_s(()=>{var h=!1;r((g,y=!0)=>{h=!0,f(y,g)}),h||f(!1,null)},l)}function Yo(e,r,a){gl(()=>{var s=Yr(()=>r(e,a?.())||{});if(a&&s?.update){var l=!1,f={};La(()=>{var h=a();Ld(h),l&&Ju(f,h)&&(f=h,s.update(h))}),l=!0}if(s?.destroy)return()=>s.destroy()})}function Pl(e){var r,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(r=0;r<l;r++)e[r]&&(a=Pl(e[r]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Vd(){for(var e,r,a=0,s="",l=arguments.length;a<l;a++)(e=arguments[a])&&(r=Pl(e))&&(s&&(s+=" "),s+=r);return s}function Rl(e){return typeof e=="object"?Vd(e):e??""}function Hd(e,r,a){var s=e==null?"":""+e;return r&&(s=s?s+" "+r:r),s===""?null:s}function Wd(e,r){return e==null?null:String(e)}function qo(e,r,a,s,l,f){var h=e.__className;if(h!==a||h===void 0){var g=Hd(a,s);g==null?e.removeAttribute("class"):e.className=g,e.__className=a}return f}function Ot(e,r,a,s){var l=e.__style;if(l!==r){var f=Wd(r);f==null?e.removeAttribute("style"):e.style.cssText=f,e.__style=r}return s}const Gd=Symbol("is custom element"),Yd=Symbol("is html");function Ll(e,r){var a=Es(e);a.value===(a.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Ml(e,r){var a=Es(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function Lt(e,r,a,s){var l=Es(e);l[r]!==(l[r]=a)&&(r==="loading"&&(e[Df]=a),a==null?e.removeAttribute(r):typeof a!="string"&&qd(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function Es(e){return e.__attributes??={[Gd]:e.nodeName.includes("-"),[Yd]:e.namespaceURI===Zf}}var xu=new Map;function qd(e){var r=e.getAttribute("is")||e.nodeName,a=xu.get(r);if(a)return a;xu.set(r,a=[]);for(var s,l=e,f=Element.prototype;f!==l;){s=Vu(l);for(var h in s)s[h].set&&a.push(h);l=fs(l)}return a}function hi(e,r,a=r){var s=new WeakSet;Td(e,"input",async l=>{ie&&e.type==="checkbox"&&hu();var f=l?e.defaultValue:e.value;if(f=Ro(e)?Lo(f):f,a(f),Ne!==null&&s.add(Ne),await fr(),f!==(f=r())){var h=e.selectionStart,g=e.selectionEnd,y=e.value.length;if(e.value=f??"",g!==null){var E=e.value.length;h===g&&g===y&&E>y?(e.selectionStart=E,e.selectionEnd=E):(e.selectionStart=h,e.selectionEnd=Math.min(g,E))}}}),Yr(r)==null&&e.value&&(a(Ro(e)?Lo(e.value):e.value),Ne!==null&&s.add(Ne)),La(()=>{ie&&e.type==="checkbox"&&hu();var l=r();if(e===document.activeElement){var f=oa??Ne;if(s.has(f))return}Ro(e)&&l===Lo(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function Ro(e){var r=e.type;return r==="number"||r==="range"}function Lo(e){return e===""?null:+e}function Tu(e,r){return e===r||e?.[Dn]===r}function Gt(e={},r,a,s){return gl(()=>{var l,f;return La(()=>{l=f,f=[],Yr(()=>{e!==a(...f)&&(r(e,...f),l&&Tu(a(...l),e)&&r(null,...l))})}),()=>{Gr(()=>{f&&Tu(a(...f),e)&&r(null,...f)})}}),e}function Nl(e,r,a){if(e==null)return r(void 0),ca;const s=Yr(()=>e.subscribe(r,a));return s.unsubscribe?()=>s.unsubscribe():s}function Zd(e){let r;return Nl(e,a=>r=a)(),r}let ra=!1,Zo=Symbol();function ma(e,r,a){const s=a[r]??={store:null,source:fl(void 0),unsubscribe:ca};if(ie&&(s.source.label=r),s.store!==e&&!(Zo in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=ca;else{var l=!0;s.unsubscribe=Nl(e,f=>{l?s.source.v=f:O(s.source,f)}),l=!1}return e&&Zo in a?Zd(e):m(s.source)}function ga(e,r,a){let s=a[r];return s&&s.store!==e&&(s.unsubscribe(),s.unsubscribe=ca),e}function xs(){const e={};function r(){gs(()=>{for(var a in e)e[a].unsubscribe();Qn(e,Zo,{enumerable:!1,value:!0})})}return[e,r]}function Qd(e){var r=ra;try{return ra=!1,[e(),ra]}finally{ra=r}}function Tn(e,r,a,s){var l=(a&Hf)!==0,f=(a&Wf)!==0,h=s,g=!0,y=()=>(g&&(g=!1,h=f?Yr(s):s),h),E;if(l){var x=Dn in e||Af in e;E=vr(e,r)?.set??(x&&r in e?H=>e[r]=H:void 0)}var D,b=!1;l?[D,b]=Qd(()=>e[r]):D=e[r],D===void 0&&s!==void 0&&(D=y(),E&&(Lf(r),E(D)));var T;if(T=()=>{var H=e[r];return H===void 0?y():(g=!0,H)},(a&Vf)===0)return T;if(E){var R=e.$$legacy;return(function(H,Z){return arguments.length>0?((!Z||R||b)&&E(Z?T():H),H):T()})}var M=!1,N=((a&Uf)!==0?Pa:ll)(()=>(M=!1,T()));ie&&(N.label=r),l&&m(N);var F=Le;return(function(H,Z){if(arguments.length>0){const G=Z?m(N):l?tn(H):H;return O(N,G),M=!0,h!==void 0&&(h=G),H}return Er&&M||(F.f&An)!==0?N.v:m(N)})}if(ie){let e=function(r){if(!(r in globalThis)){let a;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(a!==void 0)return a;Mf(r)},set:s=>{a=s}})}};var Pp=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const Xd="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Xd);var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sa={exports:{}},ev=sa.exports,ku;function tv(){return ku||(ku=1,(function(e,r){(function(a,s){e.exports=s()})(ev,(function(){var a=function(t,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u])},a(t,n)};function s(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var l=function(){return l=Object.assign||function(n){for(var i,o=1,u=arguments.length;o<u;o++){i=arguments[o];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(n[c]=i[c])}return n},l.apply(this,arguments)};function f(t,n,i){for(var o=0,u=n.length,c;o<u;o++)(c||!(o in n))&&(c||(c=Array.prototype.slice.call(n,0,o)),c[o]=n[o]);return t.concat(c||Array.prototype.slice.call(n))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$d,g=Object.keys,y=Array.isArray;typeof Promise<"u"&&!h.Promise&&(h.Promise=Promise);function E(t,n){return typeof n!="object"||g(n).forEach(function(i){t[i]=n[i]}),t}var x=Object.getPrototypeOf,D={}.hasOwnProperty;function b(t,n){return D.call(t,n)}function T(t,n){typeof n=="function"&&(n=n(x(t))),(typeof Reflect>"u"?g:Reflect.ownKeys)(n).forEach(function(i){M(t,i,n[i])})}var R=Object.defineProperty;function M(t,n,i,o){R(t,n,E(i&&b(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function N(t){return{from:function(n){return t.prototype=Object.create(n.prototype),M(t.prototype,"constructor",t),{extend:T.bind(null,t.prototype)}}}}var F=Object.getOwnPropertyDescriptor;function H(t,n){var i=F(t,n),o;return i||(o=x(t))&&H(o,n)}var Z=[].slice;function G(t,n,i){return Z.call(t,n,i)}function ne(t,n){return n(t)}function se(t){if(!t)throw new Error("Assertion Failed")}function me(t){h.setImmediate?setImmediate(t):setTimeout(t,0)}function ye(t,n){return t.reduce(function(i,o,u){var c=n(o,u);return c&&(i[c[0]]=c[1]),i},{})}function ce(t,n){if(typeof n=="string"&&b(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],o=0,u=n.length;o<u;++o){var c=ce(t,n[o]);i.push(c)}return i}var d=n.indexOf(".");if(d!==-1){var v=t[n.substr(0,d)];return v==null?void 0:ce(v,n.substr(d+1))}}function ge(t,n,i){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){se(typeof i!="string"&&"length"in i);for(var o=0,u=n.length;o<u;++o)ge(t,n[o],i[o])}else{var c=n.indexOf(".");if(c!==-1){var d=n.substr(0,c),v=n.substr(c+1);if(v==="")i===void 0?y(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=i;else{var p=t[d];(!p||!b(t,d))&&(p=t[d]={}),ge(p,v,i)}}else i===void 0?y(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function fe(t,n){typeof n=="string"?ge(t,n,void 0):"length"in n&&[].map.call(n,function(i){ge(t,i,void 0)})}function Ee(t){var n={};for(var i in t)b(t,i)&&(n[i]=t[i]);return n}var Ve=[].concat;function Fe(t){return Ve.apply([],t)}var et="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Fe([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return h[t]}),tt=new Set(et.map(function(t){return h[t]}));function Me(t){var n={};for(var i in t)if(b(t,i)){var o=t[i];n[i]=!o||typeof o!="object"||tt.has(o.constructor)?o:Me(o)}return n}function kt(t){for(var n in t)if(b(t,n))return!1;return!0}var Ke=null;function We(t){Ke=new WeakMap;var n=zt(t);return Ke=null,n}function zt(t){if(!t||typeof t!="object")return t;var n=Ke.get(t);if(n)return n;if(y(t)){n=[],Ke.set(t,n);for(var i=0,o=t.length;i<o;++i)n.push(zt(t[i]))}else if(tt.has(t.constructor))n=t;else{var u=x(t);n=u===Object.prototype?{}:Object.create(u),Ke.set(t,n);for(var c in t)b(t,c)&&(n[c]=zt(t[c]))}return n}var Ut={}.toString;function rn(t){return Ut.call(t).slice(8,-1)}var ht=typeof Symbol<"u"?Symbol.iterator:"@@iterator",rt=typeof ht=="symbol"?function(t){var n;return t!=null&&(n=t[ht])&&n.apply(t)}:function(){return null};function Y(t,n){var i=t.indexOf(n);return i>=0&&t.splice(i,1),i>=0}var _e={};function Re(t){var n,i,o,u;if(arguments.length===1){if(y(t))return t.slice();if(this===_e&&typeof t=="string")return[t];if(u=rt(t)){for(i=[];o=u.next(),!o.done;)i.push(o.value);return i}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(i=new Array(n);n--;)i[n]=t[n];return i}return[t]}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var lt=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},At=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Se=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ge=At.concat(Se),Dt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pt(t,n){this.name=t,this.message=n}N(pt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function at(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,o,u){return u.indexOf(i)===o}).join(`
`)}function yt(t,n,i,o){this.failures=n,this.failedKeys=o,this.successCount=i,this.message=at(t,n)}N(yt).from(pt);function Qe(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=at(t,this.failures)}N(Qe).from(pt);var mt=Ge.reduce(function(t,n){return t[n]=n+"Error",t},{}),Xe=pt,S=Ge.reduce(function(t,n){var i=n+"Error";function o(u,c){this.name=i,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=Dt[n]||i,this.inner=null)}return N(o).from(Xe),t[n]=o,t},{});S.Syntax=SyntaxError,S.Type=TypeError,S.Range=RangeError;var U=Se.reduce(function(t,n){return t[n+"Error"]=S[n],t},{});function V(t,n){if(!t||t instanceof pt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!U[t.name])return t;var i=new U[t.name](n||t.message,t);return"stack"in t&&M(i,"stack",{get:function(){return this.inner.stack}}),i}var he=Ge.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=S[n]),t},{});he.ModifyError=yt,he.DexieError=pt,he.BulkError=Qe;function $(){}function He(t){return t}function re(t,n){return t==null||t===He?n:function(i){return n(t(i))}}function J(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function Be(t,n){return t===$?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?J(o,this.onsuccess):o),u&&(this.onerror=this.onerror?J(u,this.onerror):u),c!==void 0?c:i}}function De(t,n){return t===$?n:function(){t.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?J(i,this.onsuccess):i),o&&(this.onerror=this.onerror?J(o,this.onerror):o)}}function Ce(t,n){return t===$?n:function(i){var o=t.apply(this,arguments);E(i,o);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?J(u,this.onsuccess):u),c&&(this.onerror=this.onerror?J(c,this.onerror):c),o===void 0?d===void 0?void 0:d:E(o,d)}}function be(t,n){return t===$?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function It(t,n){return t===$?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return i.then(function(){return n.apply(o,c)})}return n.apply(this,arguments)}}var ot=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qt(t,n){ot=t}var an={},Si=100,Ha=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,x(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,x(n),t]})(),Cs=Ha[0],Ps=Ha[1],tc=Ha[2],nc=Ps&&Ps.then,er=Cs&&Cs.constructor,Wa=!!tc;function rc(){queueMicrotask(ac)}var Zr=function(t,n){Qr.push([t,n]),Oi&&(rc(),Oi=!1)},Ga=!0,Oi=!0,tr=[],Ci=[],Ya=He,Rn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:$,pgp:!1,env:{},finalize:$},ae=Rn,Qr=[],nr=0,Pi=[];function X(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=ae;if(typeof t!="function"){if(t!==an)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Za(this,this._value);return}this._state=null,this._value=null,++n.ref,Ls(this,t)}var qa={get:function(){var t=ae,n=Ni;function i(o,u){var c=this,d=!t.global&&(t!==ae||n!==Ni),v=d&&!Mn(),p=new X(function(_,A){Qa(c,new Rs(Fs(o,t,d,v),Fs(u,t,d,v),_,A,t))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return i.prototype=an,i},set:function(t){M(this,"then",t&&t.prototype===an?qa:{get:function(){return t},set:qa.set})}};T(X.prototype,{then:qa,_then:function(t,n){Qa(this,new Rs(null,null,t,n,ae))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],i=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?i(o):Ri(o)}):this.then(null,function(o){return o&&o.name===n?i(o):Ri(o)})},finally:function(t){return this.then(function(n){return X.resolve(t()).then(function(){return n})},function(n){return X.resolve(t()).then(function(){return Ri(n)})})},timeout:function(t,n){var i=this;return t<1/0?new X(function(o,u){var c=setTimeout(function(){return u(new S.Timeout(n))},t);i.then(o,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(X.prototype,Symbol.toStringTag,"Dexie.Promise"),Rn.env=Ns();function Rs(t,n,i,o,u){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=o,this.psd=u}T(X,{all:function(){var t=Re.apply(null,arguments).map(Fi);return new X(function(n,i){t.length===0&&n([]);var o=t.length;t.forEach(function(u,c){return X.resolve(u).then(function(d){t[c]=d,--o||n(t)},i)})})},resolve:function(t){if(t instanceof X)return t;if(t&&typeof t.then=="function")return new X(function(i,o){t.then(i,o)});var n=new X(an,!0,t);return n},reject:Ri,race:function(){var t=Re.apply(null,arguments).map(Fi);return new X(function(n,i){t.map(function(o){return X.resolve(o).then(n,i)})})},PSD:{get:function(){return ae},set:function(t){return ae=t}},totalEchoes:{get:function(){return Ni}},newPSD:Ln,usePSD:rr,scheduler:{get:function(){return Zr},set:function(t){Zr=t}},rejectionMapper:{get:function(){return Ya},set:function(t){Ya=t}},follow:function(t,n){return new X(function(i,o){return Ln(function(u,c){var d=ae;d.unhandleds=[],d.onunhandled=c,d.finalize=J(function(){var v=this;oc(function(){v.unhandleds.length===0?u():c(v.unhandleds[0])})},d.finalize),t()},n,i,o)})}}),er&&(er.allSettled&&M(X,"allSettled",function(){var t=Re.apply(null,arguments).map(Fi);return new X(function(n){t.length===0&&n([]);var i=t.length,o=new Array(i);t.forEach(function(u,c){return X.resolve(u).then(function(d){return o[c]={status:"fulfilled",value:d}},function(d){return o[c]={status:"rejected",reason:d}}).then(function(){return--i||n(o)})})})}),er.any&&typeof AggregateError<"u"&&M(X,"any",function(){var t=Re.apply(null,arguments).map(Fi);return new X(function(n,i){t.length===0&&i(new AggregateError([]));var o=t.length,u=new Array(o);t.forEach(function(c,d){return X.resolve(c).then(function(v){return n(v)},function(v){u[d]=v,--o||i(new AggregateError(u))})})})}),er.withResolvers&&(X.withResolvers=er.withResolvers));function Ls(t,n){try{n(function(i){if(t._state===null){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&xr();i&&typeof i.then=="function"?Ls(t,function(u,c){i instanceof X?i._then(u,c):i.then(u,c)}):(t._state=!0,t._value=i,Ms(t)),o&&Tr()}},Za.bind(null,t))}catch(i){Za(t,i)}}function Za(t,n){if(Ci.push(n),t._state===null){var i=t._lib&&xr();n=Ya(n),t._state=!1,t._value=n,sc(t),Ms(t),i&&Tr()}}function Ms(t){var n=t._listeners;t._listeners=[];for(var i=0,o=n.length;i<o;++i)Qa(t,n[i]);var u=t._PSD;--u.ref||u.finalize(),nr===0&&(++nr,Zr(function(){--nr===0&&Xa()},[]))}function Qa(t,n){if(t._state===null){t._listeners.push(n);return}var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++nr,Zr(ic,[i,t,n])}function ic(t,n,i){try{var o,u=n._value;!n._state&&Ci.length&&(Ci=[]),o=ot&&n._consoleTask?n._consoleTask.run(function(){return t(u)}):t(u),!n._state&&Ci.indexOf(u)===-1&&uc(n),i.resolve(o)}catch(c){i.reject(c)}finally{--nr===0&&Xa(),--i.psd.ref||i.psd.finalize()}}function ac(){rr(Rn,function(){xr()&&Tr()})}function xr(){var t=Ga;return Ga=!1,Oi=!1,t}function Tr(){var t,n,i;do for(;Qr.length>0;)for(t=Qr,Qr=[],i=t.length,n=0;n<i;++n){var o=t[n];o[0].apply(null,o[1])}while(Qr.length>0);Ga=!0,Oi=!0}function Xa(){var t=tr;tr=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=Pi.slice(0),i=n.length;i;)n[--i]()}function oc(t){function n(){t(),Pi.splice(Pi.indexOf(n),1)}Pi.push(n),++nr,Zr(function(){--nr===0&&Xa()},[])}function sc(t){tr.some(function(n){return n._value===t._value})||tr.push(t)}function uc(t){for(var n=tr.length;n;)if(tr[--n]._value===t._value){tr.splice(n,1);return}}function Ri(t){return new X(an,!1,t)}function je(t,n){var i=ae;return function(){var o=xr(),u=ae;try{return Nn(i,!0),t.apply(this,arguments)}catch(c){n&&n(c)}finally{Nn(u,!1),o&&Tr()}}}var st={awaits:0,echoes:0,id:0},lc=0,Li=[],Mi=0,Ni=0,cc=0;function Ln(t,n,i,o){var u=ae,c=Object.create(u);c.parent=u,c.ref=0,c.global=!1,c.id=++cc,Rn.env,c.env=Wa?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject}:{},n&&E(c,n),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=rr(c,t,i,o);return c.ref===0&&c.finalize(),d}function kr(){return st.id||(st.id=++lc),++st.awaits,st.echoes+=Si,st.id}function Mn(){return st.awaits?(--st.awaits===0&&(st.id=0),st.echoes=st.awaits*Si,!0):!1}(""+nc).indexOf("[native code]")===-1&&(kr=Mn=$);function Fi(t){return st.echoes&&t&&t.constructor===er?(kr(),t.then(function(n){return Mn(),n},function(n){return Mn(),$e(n)})):t}function fc(t){++Ni,(!st.echoes||--st.echoes===0)&&(st.echoes=st.awaits=st.id=0),Li.push(ae),Nn(t,!0)}function dc(){var t=Li[Li.length-1];Li.pop(),Nn(t,!1)}function Nn(t,n){var i=ae;if((n?st.echoes&&(!Mi++||t!==ae):Mi&&(!--Mi||t!==ae))&&queueMicrotask(n?fc.bind(null,t):dc),t!==ae&&(ae=t,i===Rn&&(Rn.env=Ns()),Wa)){var o=Rn.env.Promise,u=t.env;(i.global||t.global)&&(Object.defineProperty(h,"Promise",u.PromiseProp),o.all=u.all,o.race=u.race,o.resolve=u.resolve,o.reject=u.reject,u.allSettled&&(o.allSettled=u.allSettled),u.any&&(o.any=u.any))}}function Ns(){var t=h.Promise;return Wa?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function rr(t,n,i,o,u){var c=ae;try{return Nn(t,!0),n(i,o,u)}finally{Nn(c,!1)}}function Fs(t,n,i,o){return typeof t!="function"?t:function(){var u=ae;i&&kr(),Nn(n,!0);try{return t.apply(this,arguments)}finally{Nn(u,!1),o&&queueMicrotask(Mn)}}}function $a(t){Promise===er&&st.echoes===0?Mi===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var $e=X.reject;function Ja(t,n,i,o){if(!t.idbdb||!t._state.openComplete&&!ae.letThrough&&!t._vip){if(t._state.openComplete)return $e(new S.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return $e(new S.DatabaseClosed);t.open().catch($)}return t._state.dbReadyPromise.then(function(){return Ja(t,n,i,o)})}else{var u=t._createTransaction(n,i,t._dbSchema);try{u.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===mt.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Ja(t,n,i,o)})):$e(c)}return u._promise(n,function(c,d){return Ln(function(){return ae.trans=u,o(c,d,u)})}).then(function(c){if(n==="readwrite")try{u.idbtrans.commit()}catch{}return n==="readonly"?c:u._completion.then(function(){return c})})}}var Ks="4.2.1",ir="",eo=-1/0,wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bs="String expected.",Ar=[],Ki="__dbnames",to="readonly",no="readwrite";function ar(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var js={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Bi(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=We(n),delete n[t]),n}:function(n){return n}}function zs(){throw S.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ie(t,n){try{var i=Us(t),o=Us(n);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return hc(Vs(t),Vs(n));case"Array":return vc(t,n)}}catch{}return NaN}function vc(t,n){for(var i=t.length,o=n.length,u=i<o?i:o,c=0;c<u;++c){var d=Ie(t[c],n[c]);if(d!==0)return d}return i===o?0:i<o?-1:1}function hc(t,n){for(var i=t.length,o=n.length,u=i<o?i:o,c=0;c<u;++c)if(t[c]!==n[c])return t[c]<n[c]?-1:1;return i===o?0:i<o?-1:1}function Us(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var i=rn(t);return i==="ArrayBuffer"?"binary":i}function Vs(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function ji(t,n,i){var o=t.schema.yProps;return o?(n&&i.numFailures>0&&(n=n.filter(function(u,c){return!i.failures[c]})),Promise.all(o.map(function(u){var c=u.updatesTable;return n?t.db.table(c).where("k").anyOf(n).delete():t.db.table(c).clear()})).then(function(){return i})):i}var Xr=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var i,o=this["@@propmod"];if(o.add!==void 0){var u=o.add;if(y(u))return f(f([],y(n)?n:[],!0),u).sort();if(typeof u=="number")return(Number(n)||0)+u;if(typeof u=="bigint")try{return BigInt(n)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(o.remove!==void 0){var c=o.remove;if(y(c))return y(n)?n.filter(function(v){return!c.includes(v)}).sort():[];if(typeof c=="number")return Number(n)-c;if(typeof c=="bigint")try{return BigInt(n)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}var d=(i=o.replacePrefix)===null||i===void 0?void 0:i[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function Hs(t,n){for(var i=g(n),o=i.length,u=!1,c=0;c<o;++c){var d=i[c],v=n[d],p=ce(t,d);v instanceof Xr?(ge(t,d,v.execute(p)),u=!0):p!==v&&(ge(t,d,v),u=!0)}return u}var Ws=(function(){function t(){}return t.prototype._trans=function(n,i,o){var u=this._tx||ae.trans,c=this.name,d=ot&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function v(A,w,P){if(!P.schema[c])throw new S.NotFound("Table "+c+" not part of transaction");return i(P.idbtrans,P)}var p=xr();try{var _=u&&u.db._novip===this.db._novip?u===ae.trans?u._promise(n,v,o):Ln(function(){return u._promise(n,v,o)},{trans:u,transless:ae.transless||ae}):Ja(this.db,n,[this.name],v);return d&&(_._consoleTask=d,_=_.catch(function(A){return console.trace(A),$e(A)})),_}finally{p&&Tr()}},t.prototype.get=function(n,i){var o=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?$e(new S.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return o.core.get({trans:u,key:n}).then(function(c){return o.hook.reading.fire(c)})}).then(i)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(y(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=g(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(A){if(A.compound&&i.every(function(P){return A.keyPath.indexOf(P)>=0})){for(var w=0;w<i.length;++w)if(i.indexOf(A.keyPath[w])===-1)return!1;return!0}return!1}).sort(function(A,w){return A.keyPath.length-w.keyPath.length})[0];if(o&&this.db._maxKey!==ir){var u=o.keyPath.slice(0,i.length);return this.where(u).equals(u.map(function(A){return n[A]}))}!o&&ot&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var c=this.schema.idxByName;function d(A,w){return Ie(A,w)===0}var v=i.reduce(function(A,w){var P=A[0],W=A[1],k=c[w],I=n[w];return[P||k,P||!k?ar(W,k&&k.multi?function(C){var L=ce(C,w);return y(L)&&L.some(function(B){return d(I,B)})}:function(C){return d(I,ce(C,w))}):W]},[null,null]),p=v[0],_=v[1];return p?this.where(p.name).equals(n[p.keyPath]).filter(_):o?this.filter(_):this.where(i).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,y(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var i=this,o=i.db,u=i.name;this.schema.mappedClass=n,n.prototype instanceof zs&&(n=(function(p){s(_,p);function _(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(_.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),_.prototype.table=function(){return u},_})(n));for(var c=new Set,d=n.prototype;d;d=x(d))Object.getOwnPropertyNames(d).forEach(function(p){return c.add(p)});var v=function(p){if(!p)return p;var _=Object.create(n.prototype);for(var A in p)if(!c.has(A))try{_[A]=p[A]}catch{}return _};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),n},t.prototype.defineClass=function(){function n(i){E(this,i)}return this.mapToClass(n)},t.prototype.add=function(n,i){var o=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,v=n;return d&&c&&(v=Bi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"add",keys:i!=null?[i]:null,values:[v]})}).then(function(p){return p.numFailures?X.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{ge(n,d,p)}catch{}return p})},t.prototype.upsert=function(n,i){var o=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return o.core.get({trans:c,key:n}).then(function(d){var v=d??{};return Hs(v,i),u&&ge(v,u,n),o.core.mutate({trans:c,type:"put",values:[v],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[i]}}).then(function(p){return p.numFailures?X.reject(p.failures[0]):!!d})})})},t.prototype.update=function(n,i){if(typeof n=="object"&&!y(n)){var o=ce(n,this.schema.primKey.keyPath);return o===void 0?$e(new S.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(n).modify(i)},t.prototype.put=function(n,i){var o=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,v=n;return d&&c&&(v=Bi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"put",values:[v],keys:i!=null?[i]:null})}).then(function(p){return p.numFailures?X.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{ge(n,d,p)}catch{}return p})},t.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(u){return ji(i,[n],u)}).then(function(u){return u.numFailures?X.reject(u.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:js}).then(function(o){return ji(n,null,o)})}).then(function(i){return i.numFailures?X.reject(i.failures[0]):void 0})},t.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:n,trans:o}).then(function(u){return u.map(function(c){return i.hook.reading.fire(c)})})})},t.prototype.bulkAdd=function(n,i,o){var u=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var p=u.schema.primKey,_=p.auto,A=p.keyPath;if(A&&c)throw new S.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var w=n.length,P=A&&_?n.map(Bi(A)):n;return u.core.mutate({trans:v,type:"add",keys:c,values:P,wantResults:d}).then(function(W){var k=W.numFailures,I=W.results,C=W.lastResult,L=W.failures,B=d?I:C;if(k===0)return B;throw new Qe("".concat(u.name,".bulkAdd(): ").concat(k," of ").concat(w," operations failed"),L)})})},t.prototype.bulkPut=function(n,i,o){var u=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var p=u.schema.primKey,_=p.auto,A=p.keyPath;if(A&&c)throw new S.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var w=n.length,P=A&&_?n.map(Bi(A)):n;return u.core.mutate({trans:v,type:"put",keys:c,values:P,wantResults:d}).then(function(W){var k=W.numFailures,I=W.results,C=W.lastResult,L=W.failures,B=d?I:C;if(k===0)return B;throw new Qe("".concat(u.name,".bulkPut(): ").concat(k," of ").concat(w," operations failed"),L)})})},t.prototype.bulkUpdate=function(n){var i=this,o=this.core,u=n.map(function(v){return v.key}),c=n.map(function(v){return v.changes}),d=[];return this._trans("readwrite",function(v){return o.getMany({trans:v,keys:u,cache:"clone"}).then(function(p){var _=[],A=[];n.forEach(function(P,W){var k=P.key,I=P.changes,C=p[W];if(C){for(var L=0,B=Object.keys(I);L<B.length;L++){var j=B[L],z=I[j];if(j===i.schema.primKey.keyPath){if(Ie(z,k)!==0)throw new S.Constraint("Cannot update primary key in bulkUpdate()")}else ge(C,j,z)}d.push(W),_.push(k),A.push(C)}});var w=_.length;return o.mutate({trans:v,type:"put",keys:_,values:A,updates:{keys:u,changeSpecs:c}}).then(function(P){var W=P.numFailures,k=P.failures;if(W===0)return w;for(var I=0,C=Object.keys(k);I<C.length;I++){var L=C[I],B=d[Number(L)];if(B!=null){var j=k[L];delete k[L],k[B]=j}}throw new Qe("".concat(i.name,".bulkUpdate(): ").concat(W," of ").concat(w," operations failed"),k)})})})},t.prototype.bulkDelete=function(n){var i=this,o=n.length;return this._trans("readwrite",function(u){return i.core.mutate({trans:u,type:"delete",keys:n}).then(function(c){return ji(i,n,c)})}).then(function(u){var c=u.numFailures,d=u.lastResult,v=u.failures;if(c===0)return d;throw new Qe("".concat(i.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),v)})},t})();function $r(t){var n={},i=function(v,p){if(p){for(var _=arguments.length,A=new Array(_-1);--_;)A[_-1]=arguments[_];return n[v].subscribe.apply(null,A),t}else if(typeof v=="string")return n[v]};i.addEventType=c;for(var o=1,u=arguments.length;o<u;++o)c(arguments[o]);return i;function c(v,p,_){if(typeof v=="object")return d(v);p||(p=be),_||(_=$);var A={subscribers:[],fire:_,subscribe:function(w){A.subscribers.indexOf(w)===-1&&(A.subscribers.push(w),A.fire=p(A.fire,w))},unsubscribe:function(w){A.subscribers=A.subscribers.filter(function(P){return P!==w}),A.fire=A.subscribers.reduce(p,_)}};return n[v]=i[v]=A,A}function d(v){g(v).forEach(function(p){var _=v[p];if(y(_))c(p,v[p][0],v[p][1]);else if(_==="asap")var A=c(p,He,function(){for(var P=arguments.length,W=new Array(P);P--;)W[P]=arguments[P];A.subscribers.forEach(function(k){me(function(){k.apply(null,W)})})});else throw new S.InvalidArgument("Invalid event config")})}}function Jr(t,n){return N(n).from({prototype:t}),n}function pc(t){return Jr(Ws.prototype,function(i,o,u){this.db=t,this._tx=u,this.name=i,this.schema=o,this.hook=t._allTables[i]?t._allTables[i].hook:$r(null,{creating:[Be,$],reading:[re,He],updating:[Ce,$],deleting:[De,$]})})}function Dr(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function ro(t,n){t.filter=ar(t.filter,n)}function io(t,n,i){var o=t.replayFilter;t.replayFilter=o?function(){return ar(o(),n())}:n,t.justLimit=i&&!o}function yc(t,n){t.isMatch=ar(t.isMatch,n)}function zi(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new S.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function Gs(t,n,i){var o=zi(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function Ui(t,n,i,o){var u=t.replayFilter?ar(t.filter,t.replayFilter()):t.filter;if(t.or){var c={},d=function(v,p,_){if(!u||u(p,_,function(P){return p.stop(P)},function(P){return p.fail(P)})){var A=p.primaryKey,w=""+A;w==="[object ArrayBuffer]"&&(w=""+new Uint8Array(A)),b(c,w)||(c[w]=!0,n(v,p,_))}};return Promise.all([t.or._iterate(d,i),Ys(Gs(t,o,i),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return Ys(Gs(t,o,i),ar(t.algorithm,u),n,!t.keysOnly&&t.valueMapper)}function Ys(t,n,i,o){var u=o?function(d,v,p){return i(o(d),v,p)}:i,c=je(u);return t.then(function(d){if(d)return d.start(function(){var v=function(){return d.continue()};(!n||n(d,function(p){return v=p},function(p){d.stop(p),v=$},function(p){d.fail(p),v=$}))&&c(d.value,d,function(p){return v=p}),v()})})}var mc=(function(){function t(){}return t.prototype._read=function(n,i){var o=this._ctx;return o.error?o.table._trans(null,$e.bind(null,o.error)):o.table._trans("readonly",n).then(i)},t.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,$e.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=ar(i.algorithm,n)},t.prototype._iterate=function(n,i){return Ui(this._ctx,n,i,this._ctx.table.core)},t.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&E(o,n),i._ctx=o,i},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var i=this._ctx;return this._read(function(o){return Ui(i,n,o,i.table.core)})},t.prototype.count=function(n){var i=this;return this._read(function(o){var u=i._ctx,c=u.table.core;if(Dr(u,!0))return c.count({trans:o,query:{index:zi(u,c.schema),range:u.range}}).then(function(v){return Math.min(v,u.limit)});var d=0;return Ui(u,function(){return++d,!1},o,c).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,i){var o=n.split(".").reverse(),u=o[0],c=o.length-1;function d(_,A){return A?d(_[o[A]],A-1):_[u]}var v=this._ctx.dir==="next"?1:-1;function p(_,A){var w=d(_,c),P=d(A,c);return Ie(w,P)*v}return this.toArray(function(_){return _.sort(p)}).then(i)},t.prototype.toArray=function(n){var i=this;return this._read(function(o){var u=i._ctx;if(u.dir==="next"&&Dr(u,!0)&&u.limit>0){var c=u.valueMapper,d=zi(u,u.table.core.schema);return u.table.core.query({trans:o,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(p){var _=p.result;return c?_.map(c):_})}else{var v=[];return Ui(u,function(p){return v.push(p)},o,u.table.core).then(function(){return v})}},n)},t.prototype.offset=function(n){var i=this._ctx;return n<=0?this:(i.offset+=n,Dr(i)?io(i,function(){var o=n;return function(u,c){return o===0?!0:o===1?(--o,!1):(c(function(){u.advance(o),o=0}),!1)}}):io(i,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),io(this._ctx,function(){var i=n;return function(o,u,c){return--i<=0&&u(c),i>=0}},!0),this},t.prototype.until=function(n,i){return ro(this._ctx,function(o,u,c){return n(o.value)?(u(c),i):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return ro(this._ctx,function(i){return n(i.value)}),yc(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,u){n(u.key,u)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,u){n(u.primaryKey,u)})},t.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(u,c){o.push(c.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&Dr(i,!0)&&i.limit>0)return this._read(function(u){var c=zi(i,i.table.core.schema);return i.table.core.query({trans:u,values:!1,limit:i.limit,query:{index:c,range:i.range}})}).then(function(u){var c=u.result;return c}).then(n);i.keysOnly=!i.isMatch;var o=[];return this.each(function(u,c){o.push(c.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,i=n.index&&n.table.schema.idxByName[n.index];if(!i||!i.multi)return this;var o={};return ro(this._ctx,function(u){var c=u.primaryKey.toString(),d=b(o,c);return o[c]=!0,!d}),this},t.prototype.modify=function(n){var i=this,o=this._ctx;return this._write(function(u){var c;typeof n=="function"?c=n:c=function(L){return Hs(L,n)};var d=o.table.core,v=d.schema.primaryKey,p=v.outbound,_=v.extractKey,A=200,w=i.db._options.modifyChunkSize;w&&(typeof w=="object"?A=w[d.name]||w["*"]||200:A=w);var P=[],W=0,k=[],I=function(L,B){var j=B.failures,z=B.numFailures;W+=L-z;for(var K=0,q=g(j);K<q.length;K++){var ee=q[K];P.push(j[ee])}},C=n===qs;return i.clone().primaryKeys().then(function(L){var B=Dr(o)&&o.limit===1/0&&(typeof n!="function"||C)&&{index:o.index,range:o.range},j=function(z){var K=Math.min(A,L.length-z),q=L.slice(z,z+K);return(C?Promise.resolve([]):d.getMany({trans:u,keys:q,cache:"immutable"})).then(function(ee){var Q=[],ue=[],Te=p?[]:null,te=C?q:[];if(!C)for(var xe=0;xe<K;++xe){var le=ee[xe],Oe={value:We(le),primKey:L[z+xe]};c.call(Oe,Oe.value,Oe)!==!1&&(Oe.value==null?te.push(L[z+xe]):!p&&Ie(_(le),_(Oe.value))!==0?(te.push(L[z+xe]),Q.push(Oe.value)):(ue.push(Oe.value),p&&Te.push(L[z+xe])))}return Promise.resolve(Q.length>0&&d.mutate({trans:u,type:"add",values:Q}).then(function(oe){for(var Ye in oe.failures)te.splice(parseInt(Ye),1);I(Q.length,oe)})).then(function(){return(ue.length>0||B&&typeof n=="object")&&d.mutate({trans:u,type:"put",keys:Te,values:ue,criteria:B,changeSpec:typeof n!="function"&&n,isAdditionalChunk:z>0}).then(function(oe){return I(ue.length,oe)})}).then(function(){return(te.length>0||B&&C)&&d.mutate({trans:u,type:"delete",keys:te,criteria:B,isAdditionalChunk:z>0}).then(function(oe){return ji(o.table,te,oe)}).then(function(oe){return I(te.length,oe)})}).then(function(){return L.length>z+K&&j(z+A)})})};return j(0).then(function(){if(P.length>0)throw new yt("Error modifying one or more objects",P,W,k);return L.length})})})},t.prototype.delete=function(){var n=this._ctx,i=n.range;return Dr(n)&&!n.table.schema.yProps&&(n.isPrimKey||i.type===3)?this._write(function(o){var u=n.table.core.schema.primaryKey,c=i;return n.table.core.count({trans:o,query:{index:u,range:c}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(v){var p=v.failures,_=v.numFailures;if(_)throw new yt("Could not delete some values",Object.keys(p).map(function(A){return p[A]}),d-_);return d-_})})}):this.modify(qs)},t})(),qs=function(t,n){return n.value=null};function gc(t){return Jr(mc.prototype,function(i,o){this.db=t;var u=js,c=null;if(o)try{u=o()}catch(_){c=_}var d=i._ctx,v=d.table,p=v.hook.reading.fire;this._ctx={table:v,index:d.index,isPrimKey:!d.index||v.schema.primKey.keyPath&&d.index===v.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:d.or,valueMapper:p!==He?p:null}})}function _c(t,n){return t<n?-1:t===n?0:1}function bc(t,n){return t>n?-1:t===n?0:1}function Vt(t,n,i){var o=t instanceof Qs?new t.Collection(t):t;return o._ctx.error=i?new i(n):new TypeError(n),o}function Ir(t){return new t.Collection(t,function(){return Zs("")}).limit(0)}function wc(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function Ec(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function xc(t,n,i,o,u,c){for(var d=Math.min(t.length,o.length),v=-1,p=0;p<d;++p){var _=n[p];if(_!==o[p])return u(t[p],i[p])<0?t.substr(0,p)+i[p]+i.substr(p+1):u(t[p],o[p])<0?t.substr(0,p)+o[p]+i.substr(p+1):v>=0?t.substr(0,v)+n[v]+i.substr(v+1):null;u(t[p],_)<0&&(v=p)}return d<o.length&&c==="next"?t+i.substr(t.length):d<t.length&&c==="prev"?t.substr(0,i.length):v<0?null:t.substr(0,v)+o[v]+i.substr(v+1)}function Vi(t,n,i,o){var u,c,d,v,p,_,A,w=i.length;if(!i.every(function(I){return typeof I=="string"}))return Vt(t,Bs);function P(I){u=wc(I),c=Ec(I),d=I==="next"?_c:bc;var C=i.map(function(L){return{lower:c(L),upper:u(L)}}).sort(function(L,B){return d(L.lower,B.lower)});v=C.map(function(L){return L.upper}),p=C.map(function(L){return L.lower}),_=I,A=I==="next"?"":o}P("next");var W=new t.Collection(t,function(){return Fn(v[0],p[w-1]+o)});W._ondirectionchange=function(I){P(I)};var k=0;return W._addAlgorithm(function(I,C,L){var B=I.key;if(typeof B!="string")return!1;var j=c(B);if(n(j,p,k))return!0;for(var z=null,K=k;K<w;++K){var q=xc(B,j,v[K],p[K],d,_);q===null&&z===null?k=K+1:(z===null||d(z,q)>0)&&(z=q)}return C(z!==null?function(){I.continue(z+A)}:L),!1}),W}function Fn(t,n,i,o){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:o}}function Zs(t){return{type:1,lower:t,upper:t}}var Qs=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,i,o,u){o=o!==!1,u=u===!0;try{return this._cmp(n,i)>0||this._cmp(n,i)===0&&(o||u)&&!(o&&u)?Ir(this):new this.Collection(this,function(){return Fn(n,i,!o,!u)})}catch{return Vt(this,wn)}},t.prototype.equals=function(n){return n==null?Vt(this,wn):new this.Collection(this,function(){return Zs(n)})},t.prototype.above=function(n){return n==null?Vt(this,wn):new this.Collection(this,function(){return Fn(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?Vt(this,wn):new this.Collection(this,function(){return Fn(n,void 0,!1)})},t.prototype.below=function(n){return n==null?Vt(this,wn):new this.Collection(this,function(){return Fn(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?Vt(this,wn):new this.Collection(this,function(){return Fn(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?Vt(this,Bs):this.between(n,n+ir,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Vi(this,function(i,o){return i.indexOf(o[0])===0},[n],ir)},t.prototype.equalsIgnoreCase=function(n){return Vi(this,function(i,o){return i===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=Re.apply(_e,arguments);return n.length===0?Ir(this):Vi(this,function(i,o){return o.indexOf(i)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=Re.apply(_e,arguments);return n.length===0?Ir(this):Vi(this,function(i,o){return o.some(function(u){return i.indexOf(u)===0})},n,ir)},t.prototype.anyOf=function(){var n=this,i=Re.apply(_e,arguments),o=this._cmp;try{i.sort(o)}catch{return Vt(this,wn)}if(i.length===0)return Ir(this);var u=new this.Collection(this,function(){return Fn(i[0],i[i.length-1])});u._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,i.sort(o)};var c=0;return u._addAlgorithm(function(d,v,p){for(var _=d.key;o(_,i[c])>0;)if(++c,c===i.length)return v(p),!1;return o(_,i[c])===0?!0:(v(function(){d.continue(i[c])}),!1)}),u},t.prototype.notEqual=function(n){return this.inAnyRange([[eo,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=Re.apply(_e,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Vt(this,wn)}var i=n.reduce(function(o,u){return o?o.concat([[o[o.length-1][1],u]]):[[eo,u]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,i){var o=this,u=this._cmp,c=this._ascending,d=this._descending,v=this._min,p=this._max;if(n.length===0)return Ir(this);if(!n.every(function(K){return K[0]!==void 0&&K[1]!==void 0&&c(K[0],K[1])<=0}))return Vt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",S.InvalidArgument);var _=!i||i.includeLowers!==!1,A=i&&i.includeUppers===!0;function w(K,q){for(var ee=0,Q=K.length;ee<Q;++ee){var ue=K[ee];if(u(q[0],ue[1])<0&&u(q[1],ue[0])>0){ue[0]=v(ue[0],q[0]),ue[1]=p(ue[1],q[1]);break}}return ee===Q&&K.push(q),K}var P=c;function W(K,q){return P(K[0],q[0])}var k;try{k=n.reduce(w,[]),k.sort(W)}catch{return Vt(this,wn)}var I=0,C=A?function(K){return c(K,k[I][1])>0}:function(K){return c(K,k[I][1])>=0},L=_?function(K){return d(K,k[I][0])>0}:function(K){return d(K,k[I][0])>=0};function B(K){return!C(K)&&!L(K)}var j=C,z=new this.Collection(this,function(){return Fn(k[0][0],k[k.length-1][1],!_,!A)});return z._ondirectionchange=function(K){K==="next"?(j=C,P=c):(j=L,P=d),k.sort(W)},z._addAlgorithm(function(K,q,ee){for(var Q=K.key;j(Q);)if(++I,I===k.length)return q(ee),!1;return B(Q)?!0:(o._cmp(Q,k[I][1])===0||o._cmp(Q,k[I][0])===0||q(function(){P===c?K.continue(k[I][0]):K.continue(k[I][1])}),!1)}),z},t.prototype.startsWithAnyOf=function(){var n=Re.apply(_e,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?Ir(this):this.inAnyRange(n.map(function(i){return[i,i+ir]})):Vt(this,"startsWithAnyOf() only works with strings")},t})();function Tc(t){return Jr(Qs.prototype,function(i,o,u){if(this.db=t,this._ctx={table:i,index:o===":id"?null:o,or:u},this._cmp=this._ascending=Ie,this._descending=function(c,d){return Ie(d,c)},this._max=function(c,d){return Ie(c,d)>0?c:d},this._min=function(c,d){return Ie(c,d)<0?c:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new S.MissingAPI})}function fn(t){return je(function(n){return ei(n),t(n.target.error),!1})}function ei(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ti="storagemutated",ao="x-storagemutated-1",Kn=$r(null,ti),kc=(function(){function t(){}return t.prototype._lock=function(){return se(!ae.global),++this._reculock,this._reculock===1&&!ae.global&&(ae.lockOwnerFor=this),this},t.prototype._unlock=function(){if(se(!ae.global),--this._reculock===0)for(ae.global||(ae.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{rr(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&ae.lockOwnerFor!==this},t.prototype.create=function(n){var i=this;if(!this.mode)return this;var o=this.db.idbdb,u=this.db._state.dbOpenError;if(se(!this.idbtrans),!n&&!o)switch(u&&u.name){case"DatabaseClosedError":throw new S.DatabaseClosed(u);case"MissingAPIError":throw new S.MissingAPI(u.message,u);default:throw new S.OpenFailed(u)}if(!this.active)throw new S.TransactionInactive;return se(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=je(function(c){ei(c),i._reject(n.error)}),n.onabort=je(function(c){ei(c),i.active&&i._reject(new S.Abort(n.error)),i.active=!1,i.on("abort").fire(c)}),n.oncomplete=je(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&Kn.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,i,o){var u=this;if(n==="readwrite"&&this.mode!=="readwrite")return $e(new S.ReadOnly("Transaction is readonly"));if(!this.active)return $e(new S.TransactionInactive);if(this._locked())return new X(function(d,v){u._blockedFuncs.push([function(){u._promise(n,i,o).then(d,v)},ae])});if(o)return Ln(function(){var d=new X(function(v,p){u._lock();var _=i(v,p,u);_&&_.then&&_.then(v,p)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var c=new X(function(d,v){var p=i(d,v,u);p&&p.then&&p.then(d,v)});return c._lib=!0,c},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var i=this._root(),o=X.resolve(n);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var u=i.idbtrans.objectStore(i.storeNames[0]);(function d(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(u.get(-1/0).onsuccess=d)})()}var c=i._waitingFor;return new X(function(d,v){o.then(function(p){return i._waitingQueue.push(je(d.bind(null,p)))},function(p){return i._waitingQueue.push(je(v.bind(null,p)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new S.Abort))},t.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(b(i,n))return i[n];var o=this.schema[n];if(!o)throw new S.NotFound("Table "+n+" not part of transaction");var u=new this.db.Table(n,o,this);return u.core=this.db.core.table(n),i[n]=u,u},t})();function Ac(t){return Jr(kc.prototype,function(i,o,u,c,d){var v=this;i!=="readonly"&&o.forEach(function(p){var _,A=(_=u[p])===null||_===void 0?void 0:_.yProps;A&&(o=o.concat(A.map(function(w){return w.updatesTable})))}),this.db=t,this.mode=i,this.storeNames=o,this.schema=u,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=$r(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X(function(p,_){v._resolve=p,v._reject=_}),this._completion.then(function(){v.active=!1,v.on.complete.fire()},function(p){var _=v.active;return v.active=!1,v.on.error.fire(p),v.parent?v.parent._reject(p):_&&v.idbtrans&&v.idbtrans.abort(),$e(p)})})}function oo(t,n,i,o,u,c,d,v){return{name:t,keyPath:n,unique:i,multi:o,auto:u,compound:c,src:(i&&!d?"&":"")+(o?"*":"")+(u?"++":"")+Xs(n),type:v}}function Xs(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function so(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:ye(i,function(o){return[o.name,o]})}}function Dc(t){return t.length===1?t[0]:t}var ni=function(t){try{return t.only([[]]),ni=function(){return[[]]},[[]]}catch{return ni=function(){return ir},ir}};function uo(t){return t==null?function(){}:typeof t=="string"?Ic(t):function(n){return ce(n,t)}}function Ic(t){var n=t.split(".");return n.length===1?function(i){return i[t]}:function(i){return ce(i,t)}}function $s(t){return[].slice.call(t)}var Sc=0;function ri(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Oc(t,n,i){function o(w,P){var W=$s(w.objectStoreNames);return{schema:{name:w.name,tables:W.map(function(k){return P.objectStore(k)}).map(function(k){var I=k.keyPath,C=k.autoIncrement,L=y(I),B=I==null,j={},z={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:B,compound:L,keyPath:I,autoIncrement:C,unique:!0,extractKey:uo(I)},indexes:$s(k.indexNames).map(function(K){return k.index(K)}).map(function(K){var q=K.name,ee=K.unique,Q=K.multiEntry,ue=K.keyPath,Te=y(ue),te={name:q,compound:Te,keyPath:ue,unique:ee,multiEntry:Q,extractKey:uo(ue)};return j[ri(ue)]=te,te}),getIndexByKeyPath:function(K){return j[ri(K)]}};return j[":id"]=z.primaryKey,I!=null&&(j[ri(I)]=z.primaryKey),z})},hasGetAll:W.length>0&&"getAll"in P.objectStore(W[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function u(w){if(w.type===3)return null;if(w.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var P=w.lower,W=w.upper,k=w.lowerOpen,I=w.upperOpen,C=P===void 0?W===void 0?null:n.upperBound(W,!!I):W===void 0?n.lowerBound(P,!!k):n.bound(P,W,!!k,!!I);return C}function c(w){var P=w.name;function W(C){var L=C.trans,B=C.type,j=C.keys,z=C.values,K=C.range;return new Promise(function(q,ee){q=je(q);var Q=L.objectStore(P),ue=Q.keyPath==null,Te=B==="put"||B==="add";if(!Te&&B!=="delete"&&B!=="deleteRange")throw new Error("Invalid operation type: "+B);var te=(j||z||{length:1}).length;if(j&&z&&j.length!==z.length)throw new Error("Given keys array must have same length as given values array.");if(te===0)return q({numFailures:0,failures:{},results:[],lastResult:void 0});var xe,le=[],Oe=[],oe=0,Ye=function(vn){++oe,ei(vn)};if(B==="deleteRange"){if(K.type===4)return q({numFailures:oe,failures:Oe,results:[],lastResult:void 0});K.type===3?le.push(xe=Q.clear()):le.push(xe=Q.delete(u(K)))}else{var _t=Te?ue?[z,j]:[z,null]:[j,null],dn=_t[0],Pt=_t[1];if(Te)for(var Zt=0;Zt<te;++Zt)le.push(xe=Pt&&Pt[Zt]!==void 0?Q[B](dn[Zt],Pt[Zt]):Q[B](dn[Zt])),xe.onerror=Ye;else for(var Zt=0;Zt<te;++Zt)le.push(xe=Q[B](dn[Zt])),xe.onerror=Ye}var zn=function(vn){var oi=vn.target.result;le.forEach(function(on,ta){return on.error!=null&&(Oe[ta]=on.error)}),q({numFailures:oe,failures:Oe,results:B==="delete"?j:le.map(function(on){return on.result}),lastResult:oi})};xe.onerror=function(vn){Ye(vn),zn(vn)},xe.onsuccess=zn})}function k(C){var L=C.trans,B=C.values,j=C.query,z=C.reverse,K=C.unique;return new Promise(function(q,ee){q=je(q);var Q=j.index,ue=j.range,Te=L.objectStore(P),te=Q.isPrimaryKey?Te:Te.index(Q.name),xe=z?K?"prevunique":"prev":K?"nextunique":"next",le=B||!("openKeyCursor"in te)?te.openCursor(u(ue),xe):te.openKeyCursor(u(ue),xe);le.onerror=fn(ee),le.onsuccess=je(function(Oe){var oe=le.result;if(!oe){q(null);return}oe.___id=++Sc,oe.done=!1;var Ye=oe.continue.bind(oe),_t=oe.continuePrimaryKey;_t&&(_t=_t.bind(oe));var dn=oe.advance.bind(oe),Pt=function(){throw new Error("Cursor not started")},Zt=function(){throw new Error("Cursor not stopped")};oe.trans=L,oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=Pt,oe.fail=je(ee),oe.next=function(){var zn=this,vn=1;return this.start(function(){return vn--?zn.continue():zn.stop()}).then(function(){return zn})},oe.start=function(zn){var vn=new Promise(function(on,ta){on=je(on),le.onerror=fn(ta),oe.fail=ta,oe.stop=function(gf){oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=Zt,on(gf)}}),oi=function(){if(le.result)try{zn()}catch(on){oe.fail(on)}else oe.done=!0,oe.start=function(){throw new Error("Cursor behind last entry")},oe.stop()};return le.onsuccess=je(function(on){le.onsuccess=oi,oi()}),oe.continue=Ye,oe.continuePrimaryKey=_t,oe.advance=dn,oi(),vn},q(oe)},ee)})}function I(C){return function(L){return new Promise(function(B,j){B=je(B);var z=L.trans,K=L.values,q=L.limit,ee=L.query,Q=q===1/0?void 0:q,ue=ee.index,Te=ee.range,te=z.objectStore(P),xe=ue.isPrimaryKey?te:te.index(ue.name),le=u(Te);if(q===0)return B({result:[]});if(C){var Oe=K?xe.getAll(le,Q):xe.getAllKeys(le,Q);Oe.onsuccess=function(dn){return B({result:dn.target.result})},Oe.onerror=fn(j)}else{var oe=0,Ye=K||!("openKeyCursor"in xe)?xe.openCursor(le):xe.openKeyCursor(le),_t=[];Ye.onsuccess=function(dn){var Pt=Ye.result;if(!Pt)return B({result:_t});if(_t.push(K?Pt.value:Pt.primaryKey),++oe===q)return B({result:_t});Pt.continue()},Ye.onerror=fn(j)}})}}return{name:P,schema:w,mutate:W,getMany:function(C){var L=C.trans,B=C.keys;return new Promise(function(j,z){j=je(j);for(var K=L.objectStore(P),q=B.length,ee=new Array(q),Q=0,ue=0,Te,te=function(oe){var Ye=oe.target;(ee[Ye._pos]=Ye.result)!=null,++ue===Q&&j(ee)},xe=fn(z),le=0;le<q;++le){var Oe=B[le];Oe!=null&&(Te=K.get(B[le]),Te._pos=le,Te.onsuccess=te,Te.onerror=xe,++Q)}Q===0&&j(ee)})},get:function(C){var L=C.trans,B=C.key;return new Promise(function(j,z){j=je(j);var K=L.objectStore(P),q=K.get(B);q.onsuccess=function(ee){return j(ee.target.result)},q.onerror=fn(z)})},query:I(p),openCursor:k,count:function(C){var L=C.query,B=C.trans,j=L.index,z=L.range;return new Promise(function(K,q){var ee=B.objectStore(P),Q=j.isPrimaryKey?ee:ee.index(j.name),ue=u(z),Te=ue?Q.count(ue):Q.count();Te.onsuccess=je(function(te){return K(te.target.result)}),Te.onerror=fn(q)})}}}var d=o(t,i),v=d.schema,p=d.hasGetAll,_=v.tables.map(function(w){return c(w)}),A={};return _.forEach(function(w){return A[w.name]=w}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(w){var P=A[w];if(!P)throw new Error("Table '".concat(w,"' not found"));return A[w]},MIN_KEY:-1/0,MAX_KEY:ni(n),schema:v}}function Cc(t,n){return n.reduce(function(i,o){var u=o.create;return l(l({},i),u(i))},t)}function Pc(t,n,i,o){var u=i.IDBKeyRange;i.indexedDB;var c=Cc(Oc(n,u,o),t.dbcore);return{dbcore:c}}function Hi(t,n){var i=n.db,o=Pc(t._middlewares,i,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(u){var c=u.name;t.core.schema.tables.some(function(d){return d.name===c})&&(u.core=t.core.table(c),t[c]instanceof t.Table&&(t[c].core=u.core))})}function Wi(t,n,i,o){i.forEach(function(u){var c=o[u];n.forEach(function(d){var v=H(d,u);(!v||"value"in v&&v.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?M(d,u,{get:function(){return this.table(u)},set:function(p){R(this,u,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new t.Table(u,c))})})}function lo(t,n){n.forEach(function(i){for(var o in i)i[o]instanceof t.Table&&delete i[o]})}function Rc(t,n){return t._cfg.version-n._cfg.version}function Lc(t,n,i,o){var u=t._dbSchema;i.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=so("$meta",eu("")[0],[]),t._storeNames.push("$meta"));var c=t._createTransaction("readwrite",t._storeNames,u);c.create(i),c._completion.catch(o);var d=c._reject.bind(c),v=ae.transless||ae;Ln(function(){if(ae.trans=c,ae.transless=v,n===0)g(u).forEach(function(p){fo(i,p,u[p].primKey,u[p].indexes)}),Hi(t,i),X.follow(function(){return t.on.populate.fire(c)}).catch(d);else return Hi(t,i),Nc(t,c,n).then(function(p){return Fc(t,p,c,i)}).catch(d)})}function Mc(t,n){Js(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=Yi(t,t.idbdb,n);qi(t,t._dbSchema,n);for(var o=co(i,t._dbSchema),u=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var A=n.objectStore(_.name);_.add.forEach(function(w){ot&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(w.src)),Gi(A,w)})},c=0,d=o.change;c<d.length;c++){var v=d[c],p=u(v);if(typeof p=="object")return p.value}}function Nc(t,n,i){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??i}):X.resolve(i)}function Fc(t,n,i,o){var u=[],c=t._versions,d=t._dbSchema=Yi(t,t.idbdb,o),v=c.filter(function(_){return _._cfg.version>=n});if(v.length===0)return X.resolve();v.forEach(function(_){u.push(function(){var A=d,w=_._cfg.dbschema;qi(t,A,o),qi(t,w,o),d=t._dbSchema=w;var P=co(A,w);P.add.forEach(function(B){fo(o,B[0],B[1].primKey,B[1].indexes)}),P.change.forEach(function(B){if(B.recreate)throw new S.Upgrade("Not yet support for changing primary key");var j=o.objectStore(B.name);B.add.forEach(function(z){return Gi(j,z)}),B.change.forEach(function(z){j.deleteIndex(z.name),Gi(j,z)}),B.del.forEach(function(z){return j.deleteIndex(z)})});var W=_._cfg.contentUpgrade;if(W&&_._cfg.version>n){Hi(t,o),i._memoizedTables={};var k=Ee(w);P.del.forEach(function(B){k[B]=A[B]}),lo(t,[t.Transaction.prototype]),Wi(t,[t.Transaction.prototype],g(k),k),i.schema=k;var I=lt(W);I&&kr();var C,L=X.follow(function(){if(C=W(i),C&&I){var B=Mn.bind(null,null);C.then(B,B)}});return C&&typeof C.then=="function"?X.resolve(C):L.then(function(){return C})}}),u.push(function(A){var w=_._cfg.dbschema;Kc(w,A),lo(t,[t.Transaction.prototype]),Wi(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),i.schema=t._dbSchema}),u.push(function(A){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===_._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(w){return w!=="$meta"})):A.objectStore("$meta").put(_._cfg.version,"version"))})});function p(){return u.length?X.resolve(u.shift()(i.idbtrans)).then(p):X.resolve()}return p().then(function(){Js(d,o)})}function co(t,n){var i={del:[],add:[],change:[]},o;for(o in t)n[o]||i.del.push(o);for(o in n){var u=t[o],c=n[o];if(!u)i.add.push([o,c]);else{var d={name:o,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)d.recreate=!0,i.change.push(d);else{var v=u.idxByName,p=c.idxByName,_=void 0;for(_ in v)p[_]||d.del.push(_);for(_ in p){var A=v[_],w=p[_];A?A.src!==w.src&&d.change.push(w):d.add.push(w)}(d.del.length>0||d.add.length>0||d.change.length>0)&&i.change.push(d)}}}return i}function fo(t,n,i,o){var u=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(c){return Gi(u,c)}),u}function Js(t,n){g(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(ot&&console.debug("Dexie: Creating missing table",i),fo(n,i,t[i].primKey,t[i].indexes))})}function Kc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(i){return t[i]==null&&n.db.deleteObjectStore(i)})}function Gi(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Yi(t,n,i){var o={},u=G(n.objectStoreNames,0);return u.forEach(function(c){for(var d=i.objectStore(c),v=d.keyPath,p=oo(Xs(v),v||"",!0,!1,!!d.autoIncrement,v&&typeof v!="string",!0),_=[],A=0;A<d.indexNames.length;++A){var w=d.index(d.indexNames[A]);v=w.keyPath;var P=oo(w.name,v,!!w.unique,!!w.multiEntry,!1,v&&typeof v!="string",!1);_.push(P)}o[c]=so(c,p,_)}),o}function Bc(t,n,i){t.verno=n.version/10;var o=t._dbSchema=Yi(t,n,i);t._storeNames=G(n.objectStoreNames,0),Wi(t,[t._allTables],g(o),o)}function jc(t,n){var i=Yi(t,t.idbdb,n),o=co(i,t._dbSchema);return!(o.add.length||o.change.some(function(u){return u.add.length||u.change.length}))}function qi(t,n,i){for(var o=i.db.objectStoreNames,u=0;u<o.length;++u){var c=o[u],d=i.objectStore(c);t._hasGetAll="getAll"in d;for(var v=0;v<d.indexNames.length;++v){var p=d.indexNames[v],_=d.index(p).keyPath,A=typeof _=="string"?_:"["+G(_).join("+")+"]";if(n[c]){var w=n[c].idxByName[A];w&&(w.name=p,delete n[c].idxByName[A],n[c].idxByName[p]=w)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function eu(t){return t.split(",").map(function(n,i){var o,u=n.split(":"),c=(o=u[1])===null||o===void 0?void 0:o.trim();n=u[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),v=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return oo(d,v||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),y(v),i===0,c)})}var zc=(function(){function t(){}return t.prototype._createTableSchema=function(n,i,o){return so(n,i,o)},t.prototype._parseIndexSyntax=function(n){return eu(n)},t.prototype._parseStoresSpec=function(n,i){var o=this;g(n).forEach(function(u){if(n[u]!==null){var c=o._parseIndexSyntax(n[u]),d=c.shift();if(!d)throw new S.Schema("Invalid schema for table "+u+": "+n[u]);if(d.unique=!0,d.multi)throw new S.Schema("Primary key cannot be multiEntry*");c.forEach(function(p){if(p.auto)throw new S.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new S.Schema("Index must have a name and cannot be an empty string")});var v=o._createTableSchema(u,d,c);i[u]=v}})},t.prototype.stores=function(n){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?E(this._cfg.storesSource,n):n;var o=i._versions,u={},c={};return o.forEach(function(d){E(u,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(u,c)}),i._dbSchema=c,lo(i,[i._allTables,i,i.Transaction.prototype]),Wi(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],g(c),c),i._storeNames=g(c),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=It(this._cfg.contentUpgrade||$,n),this},t})();function Uc(t){return Jr(zc.prototype,function(i){this.db=t,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function vo(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new En(Ki,{addons:[],indexedDB:t,IDBKeyRange:n}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function ho(t){return t&&typeof t.databases=="function"}function Vc(t){var n=t.indexedDB,i=t.IDBKeyRange;return ho(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(u){return u.name}).filter(function(u){return u!==Ki})}):vo(n,i).toCollection().primaryKeys()}function Hc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!ho(i)&&n!==Ki&&vo(i,o).put({name:n}).catch($)}function Wc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!ho(i)&&n!==Ki&&vo(i,o).delete(n).catch($)}function po(t){return Ln(function(){return ae.letThrough=!0,t()})}function Gc(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var yo;function mo(t){return!("from"in t)}var gt=function(t,n){if(this)E(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var i=new gt;return t&&"d"in t&&E(i,t),i}};T(gt.prototype,(yo={add:function(t){return ai(this,t),this},addKey:function(t){return ii(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return ii(n,i,i)}),this},hasKey:function(t){var n=Zi(this).next(t).value;return n&&Ie(n.from,t)<=0&&Ie(n.to,t)>=0}},yo[ht]=function(){return Zi(this)},yo));function ii(t,n,i){var o=Ie(n,i);if(!isNaN(o)){if(o>0)throw RangeError();if(mo(t))return E(t,{from:n,to:i,d:1});var u=t.l,c=t.r;if(Ie(i,t.from)<0)return u?ii(u,n,i):t.l={from:n,to:i,d:1,l:null,r:null},nu(t);if(Ie(n,t.to)>0)return c?ii(c,n,i):t.r={from:n,to:i,d:1,l:null,r:null},nu(t);Ie(n,t.from)<0&&(t.from=n,t.l=null,t.d=c?c.d+1:1),Ie(i,t.to)>0&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;u&&!t.l&&ai(t,u),c&&d&&ai(t,c)}}function ai(t,n){function i(o,u){var c=u.from,d=u.to,v=u.l,p=u.r;ii(o,c,d),v&&i(o,v),p&&i(o,p)}mo(n)||i(t,n)}function tu(t,n){var i=Zi(n),o=i.next();if(o.done)return!1;for(var u=o.value,c=Zi(t),d=c.next(u.from),v=d.value;!o.done&&!d.done;){if(Ie(v.from,u.to)<=0&&Ie(v.to,u.from)>=0)return!0;Ie(u.from,v.from)<0?u=(o=i.next(v.from)).value:v=(d=c.next(u.from)).value}return!1}function Zi(t){var n=mo(t)?null:{s:0,n:t};return{next:function(i){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&Ie(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||Ie(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function nu(t){var n,i,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),u=o>1?"r":o<-1?"l":"";if(u){var c=u==="r"?"l":"r",d=l({},t),v=t[u];t.from=v.from,t.to=v.to,t[u]=v[u],d[u]=v[c],t[c]=d,d.d=ru(d)}t.d=ru(t)}function ru(t){var n=t.r,i=t.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function Qi(t,n){return g(n).forEach(function(i){t[i]?ai(t[i],n[i]):t[i]=Me(n[i])}),t}function go(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&tu(n[i],t[i])})}var or={},_o={},bo=!1;function Xi(t,n){Qi(_o,t),bo||(bo=!0,setTimeout(function(){bo=!1;var i=_o;_o={},wo(i,!1)},0))}function wo(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var o=0,u=Object.values(or);o<u.length;o++){var c=u[o];iu(c,t,i,n)}else for(var d in t){var v=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(v){var p=v[1],_=v[2],c=or["idb://".concat(p,"/").concat(_)];c&&iu(c,t,i,n)}}i.forEach(function(A){return A()})}function iu(t,n,i,o){for(var u=[],c=0,d=Object.entries(t.queries.query);c<d.length;c++){for(var v=d[c],p=v[0],_=v[1],A=[],w=0,P=_;w<P.length;w++){var W=P[w];go(n,W.obsSet)?W.subscribers.forEach(function(L){return i.add(L)}):o&&A.push(W)}o&&u.push([p,A])}if(o)for(var k=0,I=u;k<I.length;k++){var C=I[k],p=C[0],A=C[1];t.queries.query[p]=A}}function Yc(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?$e(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,u=Math.round(t.verno*10),c=!1;function d(){if(n.openCanceller!==o)throw new S.DatabaseClosed("db.open() was cancelled")}var v=n.dbReadyResolve,p=null,_=!1,A=function(){return new X(function(w,P){if(d(),!i)throw new S.MissingAPI;var W=t.name,k=n.autoSchema||!u?i.open(W):i.open(W,u);if(!k)throw new S.MissingAPI;k.onerror=fn(P),k.onblocked=je(t._fireOnBlocked),k.onupgradeneeded=je(function(I){if(p=k.transaction,n.autoSchema&&!t._options.allowEmptyDB){k.onerror=ei,p.abort(),k.result.close();var C=i.deleteDatabase(W);C.onsuccess=C.onerror=je(function(){P(new S.NoSuchDatabase("Database ".concat(W," doesnt exist")))})}else{p.onerror=fn(P);var L=I.oldVersion>Math.pow(2,62)?0:I.oldVersion;_=L<1,t.idbdb=k.result,c&&Mc(t,p),Lc(t,L/10,p,P)}},P),k.onsuccess=je(function(){p=null;var I=t.idbdb=k.result,C=G(I.objectStoreNames);if(C.length>0)try{var L=I.transaction(Dc(C),"readonly");if(n.autoSchema)Bc(t,I,L);else if(qi(t,t._dbSchema,L),!jc(t,L)&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),I.close(),u=I.version+1,c=!0,w(A());Hi(t,L)}catch{}Ar.push(t),I.onversionchange=je(function(B){n.vcFired=!0,t.on("versionchange").fire(B)}),I.onclose=je(function(){t.close({disableAutoOpen:!1})}),_&&Hc(t._deps,W),w()},P)}).catch(function(w){switch(w?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),A();break;case"VersionError":if(u>0)return u=0,A();break}return X.reject(w)})};return X.race([o,(typeof navigator>"u"?X.resolve():Gc()).then(A)]).then(function(){return d(),n.onReadyBeingFired=[],X.resolve(po(function(){return t.on.ready.fire(t.vip)})).then(function w(){if(n.onReadyBeingFired.length>0){var P=n.onReadyBeingFired.reduce(It,$);return n.onReadyBeingFired=[],X.resolve(po(function(){return P(t.vip)})).then(w)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(w){n.dbOpenError=w;try{p&&p.abort()}catch{}return o===n.openCanceller&&t._close(),$e(w)}).finally(function(){n.openComplete=!0,v()}).then(function(){if(_){var w={};t.tables.forEach(function(P){P.schema.indexes.forEach(function(W){W.name&&(w["idb://".concat(t.name,"/").concat(P.name,"/").concat(W.name)]=new gt(-1/0,[[[]]]))}),w["idb://".concat(t.name,"/").concat(P.name,"/")]=w["idb://".concat(t.name,"/").concat(P.name,"/:dels")]=new gt(-1/0,[[[]]])}),Kn(ti).fire(w),wo(w,!0)}return t})}function Eo(t){var n=function(d){return t.next(d)},i=function(d){return t.throw(d)},o=c(n),u=c(i);function c(d){return function(v){var p=d(v),_=p.value;return p.done?_:!_||typeof _.then!="function"?y(_)?Promise.all(_).then(o,u):o(_):_.then(o,u)}}return c(n)()}function qc(t,n,i){var o=arguments.length;if(o<2)throw new S.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];i=u.pop();var c=Fe(u);return[t,c,i]}function au(t,n,i,o,u){return X.resolve().then(function(){var c=ae.transless||ae,d=t._createTransaction(n,i,t._dbSchema,o);d.explicit=!0;var v={trans:d,transless:c};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(w){return w.name===mt.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return au(t,n,i,null,u)})):$e(w)}var p=lt(u);p&&kr();var _,A=X.follow(function(){if(_=u.call(d,d),_)if(p){var w=Mn.bind(null,null);_.then(w,w)}else typeof _.next=="function"&&typeof _.throw=="function"&&(_=Eo(_))},v);return(_&&typeof _.then=="function"?X.resolve(_).then(function(w){return d.active?w:$e(new S.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return _})).then(function(w){return o&&d._resolve(),d._completion.then(function(){return w})}).catch(function(w){return d._reject(w),$e(w)})})}function $i(t,n,i){for(var o=y(t)?t.slice():[t],u=0;u<i;++u)o.push(n);return o}function Zc(t){return l(l({},t),{table:function(n){var i=t.table(n),o=i.schema,u={},c=[];function d(I,C,L){var B=ri(I),j=u[B]=u[B]||[],z=I==null?0:typeof I=="string"?1:I.length,K=C>0,q=l(l({},L),{name:K?"".concat(B,"(virtual-from:").concat(L.name,")"):L.name,lowLevelIndex:L,isVirtual:K,keyTail:C,keyLength:z,extractKey:uo(I),unique:!K&&L.unique});if(j.push(q),q.isPrimaryKey||c.push(q),z>1){var ee=z===2?I[0]:I.slice(0,z-1);d(ee,C+1,L)}return j.sort(function(Q,ue){return Q.keyTail-ue.keyTail}),q}var v=d(o.primaryKey.keyPath,0,o.primaryKey);u[":id"]=[v];for(var p=0,_=o.indexes;p<_.length;p++){var A=_[p];d(A.keyPath,0,A)}function w(I){var C=u[ri(I)];return C&&C[0]}function P(I,C){return{type:I.type===1?2:I.type,lower:$i(I.lower,I.lowerOpen?t.MAX_KEY:t.MIN_KEY,C),lowerOpen:!0,upper:$i(I.upper,I.upperOpen?t.MIN_KEY:t.MAX_KEY,C),upperOpen:!0}}function W(I){var C=I.query.index;return C.isVirtual?l(l({},I),{query:{index:C.lowLevelIndex,range:P(I.query.range,C.keyTail)}}):I}var k=l(l({},i),{schema:l(l({},o),{primaryKey:v,indexes:c,getIndexByKeyPath:w}),count:function(I){return i.count(W(I))},query:function(I){return i.query(W(I))},openCursor:function(I){var C=I.query.index,L=C.keyTail,B=C.isVirtual,j=C.keyLength;if(!B)return i.openCursor(I);function z(K){function q(Q){Q!=null?K.continue($i(Q,I.reverse?t.MAX_KEY:t.MIN_KEY,L)):I.unique?K.continue(K.key.slice(0,j).concat(I.reverse?t.MIN_KEY:t.MAX_KEY,L)):K.continue()}var ee=Object.create(K,{continue:{value:q},continuePrimaryKey:{value:function(Q,ue){K.continuePrimaryKey($i(Q,t.MAX_KEY,L),ue)}},primaryKey:{get:function(){return K.primaryKey}},key:{get:function(){var Q=K.key;return j===1?Q[0]:Q.slice(0,j)}},value:{get:function(){return K.value}}});return ee}return i.openCursor(W(I)).then(function(K){return K&&z(K)})}});return k}})}var Qc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Zc};function xo(t,n,i,o){return i=i||{},o=o||"",g(t).forEach(function(u){if(!b(n,u))i[o+u]=void 0;else{var c=t[u],d=n[u];if(typeof c=="object"&&typeof d=="object"&&c&&d){var v=rn(c),p=rn(d);v!==p?i[o+u]=n[u]:v==="Object"?xo(c,d,i,o+u+"."):c!==d&&(i[o+u]=n[u])}else c!==d&&(i[o+u]=n[u])}}),g(n).forEach(function(u){b(t,u)||(i[o+u]=n[u])}),i}function To(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var Xc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return l(l({},t),{table:function(n){var i=t.table(n),o=i.schema.primaryKey,u=l(l({},i),{mutate:function(c){var d=ae.trans,v=d.table(n).hook,p=v.deleting,_=v.creating,A=v.updating;switch(c.type){case"add":if(_.fire===$)break;return d._promise("readwrite",function(){return w(c)},!0);case"put":if(_.fire===$&&A.fire===$)break;return d._promise("readwrite",function(){return w(c)},!0);case"delete":if(p.fire===$)break;return d._promise("readwrite",function(){return w(c)},!0);case"deleteRange":if(p.fire===$)break;return d._promise("readwrite",function(){return P(c)},!0)}return i.mutate(c);function w(k){var I=ae.trans,C=k.keys||To(o,k);if(!C)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?l(l({},k),{keys:C}):l({},k),k.type!=="delete"&&(k.values=f([],k.values)),k.keys&&(k.keys=f([],k.keys)),$c(i,k,C).then(function(L){var B=C.map(function(j,z){var K=L[z],q={onerror:null,onsuccess:null};if(k.type==="delete")p.fire.call(q,j,K,I);else if(k.type==="add"||K===void 0){var ee=_.fire.call(q,j,k.values[z],I);j==null&&ee!=null&&(j=ee,k.keys[z]=j,o.outbound||ge(k.values[z],o.keyPath,j))}else{var Q=xo(K,k.values[z]),ue=A.fire.call(q,Q,j,K,I);if(ue){var Te=k.values[z];Object.keys(ue).forEach(function(te){b(Te,te)?Te[te]=ue[te]:ge(Te,te,ue[te])})}}return q});return i.mutate(k).then(function(j){for(var z=j.failures,K=j.results,q=j.numFailures,ee=j.lastResult,Q=0;Q<C.length;++Q){var ue=K?K[Q]:C[Q],Te=B[Q];ue==null?Te.onerror&&Te.onerror(z[Q]):Te.onsuccess&&Te.onsuccess(k.type==="put"&&L[Q]?k.values[Q]:ue)}return{failures:z,results:K,numFailures:q,lastResult:ee}}).catch(function(j){return B.forEach(function(z){return z.onerror&&z.onerror(j)}),Promise.reject(j)})})}function P(k){return W(k.trans,k.range,1e4)}function W(k,I,C){return i.query({trans:k,values:!1,query:{index:o,range:I},limit:C}).then(function(L){var B=L.result;return w({type:"delete",keys:B,trans:k}).then(function(j){return j.numFailures>0?Promise.reject(j.failures[0]):B.length<C?{failures:[],numFailures:0,lastResult:void 0}:W(k,l(l({},I),{lower:B[B.length-1],lowerOpen:!0}),C)})})}}});return u}})}};function $c(t,n,i){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:i,cache:"immutable"})}function ou(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var o=[],u=0,c=0;u<n.keys.length&&c<t.length;++u)Ie(n.keys[u],t[c])===0&&(o.push(i?We(n.values[u]):n.values[u]),++c);return o.length===t.length?o:null}catch{return null}}var Jc={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return l(l({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var u=ou(o.keys,o.trans._cache,o.cache==="clone");return u?X.resolve(u):i.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?We(c):c},c})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function su(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function uu(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var ef={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new gt(t.MIN_KEY,t.MAX_KEY);return l(l({},t),{transaction:function(o,u,c){if(ae.subscr&&u!=="readonly")throw new S.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ae.querier));return t.transaction(o,u,c)},table:function(o){var u=t.table(o),c=u.schema,d=c.primaryKey,v=c.indexes,p=d.extractKey,_=d.outbound,A=d.autoIncrement&&v.filter(function(k){return k.compound&&k.keyPath.includes(d.keyPath)}),w=l(l({},u),{mutate:function(k){var I,C,L=k.trans,B=k.mutatedParts||(k.mutatedParts={}),j=function(le){var Oe="idb://".concat(n,"/").concat(o,"/").concat(le);return B[Oe]||(B[Oe]=new gt)},z=j(""),K=j(":dels"),q=k.type,ee=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[To(d,k).filter(function(le){return le}),k.values]:[],Q=ee[0],ue=ee[1],Te=k.trans._cache;if(y(Q)){z.addKeys(Q);var te=q==="delete"||Q.length===ue.length?ou(Q,Te):null;te||K.addKeys(Q),(te||ue)&&tf(j,c,te,ue)}else if(Q){var xe={from:(I=Q.lower)!==null&&I!==void 0?I:t.MIN_KEY,to:(C=Q.upper)!==null&&C!==void 0?C:t.MAX_KEY};K.add(xe),z.add(xe)}else z.add(i),K.add(i),c.indexes.forEach(function(le){return j(le.name).add(i)});return u.mutate(k).then(function(le){return Q&&(k.type==="add"||k.type==="put")&&(z.addKeys(le.results),A&&A.forEach(function(Oe){for(var oe=k.values.map(function(Pt){return Oe.extractKey(Pt)}),Ye=Oe.keyPath.findIndex(function(Pt){return Pt===d.keyPath}),_t=0,dn=le.results.length;_t<dn;++_t)oe[_t][Ye]=le.results[_t];j(Oe.name).addKeys(oe)})),L.mutatedParts=Qi(L.mutatedParts||{},B),le})}}),P=function(k){var I,C,L=k.query,B=L.index,j=L.range;return[B,new gt((I=j.lower)!==null&&I!==void 0?I:t.MIN_KEY,(C=j.upper)!==null&&C!==void 0?C:t.MAX_KEY)]},W={get:function(k){return[d,new gt(k.key)]},getMany:function(k){return[d,new gt().addKeys(k.keys)]},count:P,query:P,openCursor:P};return g(W).forEach(function(k){w[k]=function(I){var C=ae.subscr,L=!!C,B=su(ae,u)&&uu(k,I),j=B?I.obsSet={}:C;if(L){var z=function(te){var xe="idb://".concat(n,"/").concat(o,"/").concat(te);return j[xe]||(j[xe]=new gt)},K=z(""),q=z(":dels"),ee=W[k](I),Q=ee[0],ue=ee[1];if(k==="query"&&Q.isPrimaryKey&&!I.values?q.add(ue):z(Q.name||"").add(ue),!Q.isPrimaryKey)if(k==="count")q.add(i);else{var Te=k==="query"&&_&&I.values&&u.query(l(l({},I),{values:!1}));return u[k].apply(this,arguments).then(function(te){if(k==="query"){if(_&&I.values)return Te.then(function(oe){var Ye=oe.result;return K.addKeys(Ye),te});var xe=I.values?te.result.map(p):te.result;I.values?K.addKeys(xe):q.addKeys(xe)}else if(k==="openCursor"){var le=te,Oe=I.values;return le&&Object.create(le,{key:{get:function(){return q.addKey(le.primaryKey),le.key}},primaryKey:{get:function(){var oe=le.primaryKey;return q.addKey(oe),oe}},value:{get:function(){return Oe&&K.addKey(le.primaryKey),le.value}}})}return te})}}return u[k].apply(this,arguments)}}),w}})}};function tf(t,n,i,o){function u(c){var d=t(c.name||"");function v(_){return _!=null?c.extractKey(_):null}var p=function(_){return c.multiEntry&&y(_)?_.forEach(function(A){return d.addKey(A)}):d.addKey(_)};(i||o).forEach(function(_,A){var w=i&&v(i[A]),P=o&&v(o[A]);Ie(w,P)!==0&&(w!=null&&p(w),P!=null&&p(P))})}n.indexes.forEach(u)}function lu(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(i.numFailures===o)return null;var u=l({},n);return y(u.keys)&&(u.keys=u.keys.filter(function(c,d){return!(d in i.failures)})),"values"in u&&y(u.values)&&(u.values=u.values.filter(function(c,d){return!(d in i.failures)})),u}function nf(t,n){return n.lower===void 0?!0:n.lowerOpen?Ie(t,n.lower)>0:Ie(t,n.lower)>=0}function rf(t,n){return n.upper===void 0?!0:n.upperOpen?Ie(t,n.upper)<0:Ie(t,n.upper)<=0}function ko(t,n){return nf(t,n)&&rf(t,n)}function cu(t,n,i,o,u,c){if(!i||i.length===0)return t;var d=n.query.index,v=d.multiEntry,p=n.query.range,_=o.schema.primaryKey,A=_.extractKey,w=d.extractKey,P=(d.lowLevelIndex||d).extractKey,W=i.reduce(function(k,I){var C=k,L=[];if(I.type==="add"||I.type==="put")for(var B=new gt,j=I.values.length-1;j>=0;--j){var z=I.values[j],K=A(z);if(!B.hasKey(K)){var q=w(z);(v&&y(q)?q.some(function(te){return ko(te,p)}):ko(q,p))&&(B.addKey(K),L.push(z))}}switch(I.type){case"add":{var ee=new gt().addKeys(n.values?k.map(function(te){return A(te)}):k);C=k.concat(n.values?L.filter(function(te){var xe=A(te);return ee.hasKey(xe)?!1:(ee.addKey(xe),!0)}):L.map(function(te){return A(te)}).filter(function(te){return ee.hasKey(te)?!1:(ee.addKey(te),!0)}));break}case"put":{var Q=new gt().addKeys(I.values.map(function(te){return A(te)}));C=k.filter(function(te){return!Q.hasKey(n.values?A(te):te)}).concat(n.values?L:L.map(function(te){return A(te)}));break}case"delete":var ue=new gt().addKeys(I.keys);C=k.filter(function(te){return!ue.hasKey(n.values?A(te):te)});break;case"deleteRange":var Te=I.range;C=k.filter(function(te){return!ko(A(te),Te)});break}return C},t);return W===t?t:(W.sort(function(k,I){return Ie(P(k),P(I))||Ie(A(k),A(I))}),n.limit&&n.limit<1/0&&(W.length>n.limit?W.length=n.limit:t.length===n.limit&&W.length<n.limit&&(u.dirty=!0)),c?Object.freeze(W):W)}function fu(t,n){return Ie(t.lower,n.lower)===0&&Ie(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function af(t,n,i,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var u=Ie(t,n);if(u===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return u}function of(t,n,i,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var u=Ie(t,n);if(u===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return u}function sf(t,n){return af(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&of(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function uf(t,n,i,o){var u=or["idb://".concat(t,"/").concat(n)];if(!u)return[];var c=u.queries[i];if(!c)return[null,!1,u,null];var d=o.query?o.query.index.name:null,v=c[d||""];if(!v)return[null,!1,u,null];switch(i){case"query":var p=v.find(function(w){return w.req.limit===o.limit&&w.req.values===o.values&&fu(w.req.query.range,o.query.range)});if(p)return[p,!0,u,v];var _=v.find(function(w){var P="limit"in w.req?w.req.limit:1/0;return P>=o.limit&&(o.values?w.req.values:!0)&&sf(w.req.query.range,o.query.range)});return[_,!1,u,v];case"count":var A=v.find(function(w){return fu(w.req.query.range,o.query.range)});return[A,!!A,u,v]}}function lf(t,n,i,o){t.subscribers.add(i),o.addEventListener("abort",function(){t.subscribers.delete(i),t.subscribers.size===0&&cf(t,n)})}function cf(t,n){setTimeout(function(){t.subscribers.size===0&&Y(n,t)},3e3)}var ff={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,i=l(l({},t),{transaction:function(o,u,c){var d=t.transaction(o,u,c);if(u==="readwrite"){var v=new AbortController,p=v.signal,_=function(A){return function(){if(v.abort(),u==="readwrite"){for(var w=new Set,P=0,W=o;P<W.length;P++){var k=W[P],I=or["idb://".concat(n,"/").concat(k)];if(I){var C=t.table(k),L=I.optimisticOps.filter(function(Oe){return Oe.trans===d});if(d._explicit&&A&&d.mutatedParts)for(var B=0,j=Object.values(I.queries.query);B<j.length;B++)for(var z=j[B],K=0,q=z.slice();K<q.length;K++){var ee=q[K];go(ee.obsSet,d.mutatedParts)&&(Y(z,ee),ee.subscribers.forEach(function(Oe){return w.add(Oe)}))}else if(L.length>0){I.optimisticOps=I.optimisticOps.filter(function(Oe){return Oe.trans!==d});for(var Q=0,ue=Object.values(I.queries.query);Q<ue.length;Q++)for(var z=ue[Q],Te=0,te=z.slice();Te<te.length;Te++){var ee=te[Te];if(ee.res!=null&&d.mutatedParts)if(A&&!ee.dirty){var xe=Object.isFrozen(ee.res),le=cu(ee.res,ee.req,L,C,ee,xe);ee.dirty?(Y(z,ee),ee.subscribers.forEach(function(Ye){return w.add(Ye)})):le!==ee.res&&(ee.res=le,ee.promise=X.resolve({result:le}))}else ee.dirty&&Y(z,ee),ee.subscribers.forEach(function(Ye){return w.add(Ye)})}}}}w.forEach(function(Oe){return Oe()})}}};d.addEventListener("abort",_(!1),{signal:p}),d.addEventListener("error",_(!1),{signal:p}),d.addEventListener("complete",_(!0),{signal:p})}return d},table:function(o){var u=t.table(o),c=u.schema.primaryKey,d=l(l({},u),{mutate:function(v){var p=ae.trans;if(c.outbound||p.db._options.cache==="disabled"||p.explicit||p.idbtrans.mode!=="readwrite")return u.mutate(v);var _=or["idb://".concat(n,"/").concat(o)];if(!_)return u.mutate(v);var A=u.mutate(v);return(v.type==="add"||v.type==="put")&&(v.values.length>=50||To(c,v).some(function(w){return w==null}))?A.then(function(w){var P=l(l({},v),{values:v.values.map(function(k,I){var C;if(w.failures[I])return k;var L=!((C=c.keyPath)===null||C===void 0)&&C.includes(".")?We(k):l({},k);return ge(L,c.keyPath,w.results[I]),L})}),W=lu(_,P,w);_.optimisticOps.push(W),queueMicrotask(function(){return v.mutatedParts&&Xi(v.mutatedParts)})}):(_.optimisticOps.push(v),v.mutatedParts&&Xi(v.mutatedParts),A.then(function(w){if(w.numFailures>0){Y(_.optimisticOps,v);var P=lu(_,v,w);P&&_.optimisticOps.push(P),v.mutatedParts&&Xi(v.mutatedParts)}}),A.catch(function(){Y(_.optimisticOps,v),v.mutatedParts&&Xi(v.mutatedParts)})),A},query:function(v){var p;if(!su(ae,u)||!uu("query",v))return u.query(v);var _=((p=ae.trans)===null||p===void 0?void 0:p.db._options.cache)==="immutable",A=ae,w=A.requery,P=A.signal,W=uf(n,o,"query",v),k=W[0],I=W[1],C=W[2],L=W[3];if(k&&I)k.obsSet=v.obsSet;else{var B=u.query(v).then(function(j){var z=j.result;if(k&&(k.res=z),_){for(var K=0,q=z.length;K<q;++K)Object.freeze(z[K]);Object.freeze(z)}else j.result=We(z);return j}).catch(function(j){return L&&k&&Y(L,k),Promise.reject(j)});k={obsSet:v.obsSet,promise:B,subscribers:new Set,type:"query",req:v,dirty:!1},L?L.push(k):(L=[k],C||(C=or["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),C.queries.query[v.query.index.name||""]=L)}return lf(k,L,w,P),k.promise.then(function(j){return{result:cu(j.result,v,C?.optimisticOps,u,k,_)}})}});return d}});return i}};function Ji(t,n){return new Proxy(t,{get:function(i,o,u){return o==="db"?n:Reflect.get(i,o,u)}})}var En=(function(){function t(n,i){var o=this;this._middlewares={},this.verno=0;var u=t.dependencies;this._options=i=l({addons:t.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var c=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:$,dbReadyPromise:null,cancelOpen:$,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};d.dbReadyPromise=new X(function(p){d.dbReadyResolve=p}),d.openCanceller=new X(function(p,_){d.cancelOpen=_}),this._state=d,this.name=n,this.on=$r(this,"populate","blocked","versionchange","close",{ready:[It,$]}),this.once=function(p,_){var A=function(){for(var w=[],P=0;P<arguments.length;P++)w[P]=arguments[P];o.on(p).unsubscribe(A),_.apply(o,w)};return o.on(p,A)},this.on.ready.subscribe=ne(this.on.ready.subscribe,function(p){return function(_,A){t.vip(function(){var w=o._state;if(w.openComplete)w.dbOpenError||X.resolve().then(_),A&&p(_);else if(w.onReadyBeingFired)w.onReadyBeingFired.push(_),A&&p(_);else{p(_);var P=o;A||p(function W(){P.on.ready.unsubscribe(_),P.on.ready.unsubscribe(W)})}})}}),this.Collection=gc(this),this.Table=pc(this),this.Transaction=Ac(this),this.Version=Uc(this),this.WhereClause=Tc(this),this.on("versionchange",function(p){p.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=ni(i.IDBKeyRange),this._createTransaction=function(p,_,A,w){return new o.Transaction(p,_,A,o._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(p){o.on("blocked").fire(p),Ar.filter(function(_){return _.name===o.name&&_!==o&&!_._state.vcFired}).map(function(_){return _.on("versionchange").fire(p)})},this.use(Jc),this.use(ff),this.use(ef),this.use(Qc),this.use(Xc);var v=new Proxy(this,{get:function(p,_,A){if(_==="_vip")return!0;if(_==="table")return function(P){return Ji(o.table(P),v)};var w=Reflect.get(p,_,A);return w instanceof Ws?Ji(w,v):_==="tables"?w.map(function(P){return Ji(P,v)}):_==="_createTransaction"?function(){var P=w.apply(this,arguments);return Ji(P,v)}:w}});this.vip=v,c.forEach(function(p){return p(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new S.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new S.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,o=i.filter(function(u){return u._cfg.version===n})[0];return o||(o=new this.Version(n),i.push(o),i.sort(Rc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||ae.letThrough||this._vip)?n():new X(function(o,u){if(i._state.openComplete)return u(new S.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){u(new S.DatabaseClosed);return}i.open().catch($)}i._state.dbReadyPromise.then(o,u)}).then(n)},t.prototype.use=function(n){var i=n.stack,o=n.create,u=n.level,c=n.name;c&&this.unuse({stack:i,name:c});var d=this._middlewares[i]||(this._middlewares[i]=[]);return d.push({stack:i,create:o,level:u??10,name:c}),d.sort(function(v,p){return v.level-p.level}),this},t.prototype.unuse=function(n){var i=n.stack,o=n.name,u=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(c){return u?c.create!==u:o?c.name!==o:!1})),this},t.prototype.open=function(){var n=this;return rr(Rn,function(){return Yc(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=Ar.indexOf(this);if(i>=0&&Ar.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new X(function(o){n.dbReadyResolve=o}),n.openCanceller=new X(function(o,u){n.cancelOpen=u}))},t.prototype.close=function(n){var i=n===void 0?{disableAutoOpen:!0}:n,o=i.disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new S.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new S.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},t.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",u=this._state;return new X(function(c,d){var v=function(){i.close(n);var p=i._deps.indexedDB.deleteDatabase(i.name);p.onsuccess=je(function(){Wc(i._deps,i.name),c()}),p.onerror=fn(d),p.onblocked=i._fireOnBlocked};if(o)throw new S.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(v):v()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return g(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=qc.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,i,o){var u=this,c=ae.trans;(!c||c.db!==this||n.indexOf("!")!==-1)&&(c=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var v,p;try{if(p=i.map(function(A){var w=A instanceof u.Table?A.name:A;if(typeof w!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return w}),n=="r"||n===to)v=to;else if(n=="rw"||n==no)v=no;else throw new S.InvalidArgument("Invalid transaction mode: "+n);if(c){if(c.mode===to&&v===no)if(d)c=null;else throw new S.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c&&p.forEach(function(A){if(c&&c.storeNames.indexOf(A)===-1)if(d)c=null;else throw new S.SubTransaction("Table "+A+" not included in parent transaction.")}),d&&c&&!c.active&&(c=null)}}catch(A){return c?c._promise(null,function(w,P){P(A)}):$e(A)}var _=au.bind(null,this,v,p,c,o);return c?c._promise(v,_,"lock"):ae.trans?rr(ae.transless,function(){return u._whenReady(_)}):this._whenReady(_)},t.prototype.table=function(n){if(!b(this._allTables,n))throw new S.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),df=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",vf=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,i,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:i,complete:o}:n)},t.prototype[df]=function(){return this},t})(),ea;try{ea={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{ea={indexedDB:null,IDBKeyRange:null}}function du(t){var n=!1,i,o=new vf(function(u){var c=lt(t);function d(L){var B=xr();try{c&&kr();var j=Ln(t,L);return c&&(j=j.finally(Mn)),j}finally{B&&Tr()}}var v=!1,p,_={},A={},w={get closed(){return v},unsubscribe:function(){v||(v=!0,p&&p.abort(),P&&Kn.storagemutated.unsubscribe(I))}};u.start&&u.start(w);var P=!1,W=function(){return $a(C)};function k(){return go(A,_)}var I=function(L){Qi(_,L),k()&&W()},C=function(){if(!(v||!ea.indexedDB)){_={};var L={};p&&p.abort(),p=new AbortController;var B={subscr:L,signal:p.signal,requery:W,querier:t,trans:null},j=d(B);Promise.resolve(j).then(function(z){n=!0,i=z,!(v||B.signal.aborted)&&(_={},A=L,!kt(A)&&!P&&(Kn(ti,I),P=!0),$a(function(){return!v&&u.next&&u.next(z)}))},function(z){n=!1,["DatabaseClosedError","AbortError"].includes(z?.name)||v||$a(function(){v||u.error&&u.error(z)})})}};return setTimeout(W,0),w});return o.hasValue=function(){return n},o.getValue=function(){return i},o}var sr=En;T(sr,l(l({},he),{delete:function(t){var n=new sr(t,{addons:[]});return n.delete()},exists:function(t){return new sr(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Vc(sr.dependencies).then(t)}catch{return $e(new S.MissingAPI)}},defineClass:function(){function t(n){E(this,n)}return t},ignoreTransaction:function(t){return ae.trans?rr(ae.transless,t):t()},vip:po,async:function(t){return function(){try{var n=Eo(t.apply(this,arguments));return!n||typeof n.then!="function"?X.resolve(n):n}catch(i){return $e(i)}}},spawn:function(t,n,i){try{var o=Eo(t.apply(i,n||[]));return!o||typeof o.then!="function"?X.resolve(o):o}catch(u){return $e(u)}},currentTransaction:{get:function(){return ae.trans||null}},waitFor:function(t,n){var i=X.resolve(typeof t=="function"?sr.ignoreTransaction(t):t).timeout(n||6e4);return ae.trans?ae.trans.waitFor(i):i},Promise:X,debug:{get:function(){return ot},set:function(t){qt(t)}},derive:N,extend:E,props:T,override:ne,Events:$r,on:Kn,liveQuery:du,extendObservabilitySet:Qi,getByKeyPath:ce,setByKeyPath:ge,delByKeyPath:fe,shallowClone:Ee,deepClone:We,getObjectDiff:xo,cmp:Ie,asap:me,minKey:eo,addons:[],connections:Ar,errnames:mt,dependencies:ea,cache:or,semVer:Ks,version:Ks.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,i*2)})})),sr.maxKey=ni(sr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Kn(ti,function(t){if(!Bn){var n;n=new CustomEvent(ao,{detail:t}),Bn=!0,dispatchEvent(n),Bn=!1}}),addEventListener(ao,function(t){var n=t.detail;Bn||Ao(n)}));function Ao(t){var n=Bn;try{Bn=!0,Kn.storagemutated.fire(t),wo(t,!0)}finally{Bn=n}}var Bn=!1,jn,Do=function(){};typeof BroadcastChannel<"u"&&(Do=function(){jn=new BroadcastChannel(ao),jn.onmessage=function(t){return t.data&&Ao(t.data)}},Do(),typeof jn.unref=="function"&&jn.unref(),Kn(ti,function(t){Bn||jn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!En.disableBfCache&&t.persisted){ot&&console.debug("Dexie: handling persisted pagehide"),jn?.close();for(var n=0,i=Ar;n<i.length;n++){var o=i[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!En.disableBfCache&&t.persisted&&(ot&&console.debug("Dexie: handling persisted pageshow"),Do(),Ao({all:new gt(-1/0,[[]])}))}));function hf(t){return new Xr({add:t})}function pf(t){return new Xr({remove:t})}function yf(t,n){return new Xr({replacePrefix:[t,n]})}X.rejectionMapper=V,qt(ot);var mf=Object.freeze({__proto__:null,Dexie:En,liveQuery:du,Entity:zs,cmp:Ie,PropModification:Xr,replacePrefix:yf,add:hf,remove:pf,default:En,RangeSet:gt,mergeRanges:ai,rangesOverlap:tu});return l(En,mf,{default:En}),En}))})(sa)),sa.exports}var nv=tv();const Qo=Jd(nv),Au=Symbol.for("Dexie"),_a=globalThis[Au]||(globalThis[Au]=Qo);if(Qo.semVer!==_a.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Qo.semVer} and ${_a.semVer}`);const{liveQuery:ba,mergeRanges:Ep,rangesOverlap:xp,RangeSet:Tp,cmp:kp,Entity:Ap,PropModification:Dp,replacePrefix:Ip,add:Sp,remove:Op,DexieYProvider:Cp}=_a;function Du(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),a.push.apply(a,s)}return a}function wa(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Du(Object(a),!0).forEach(function(s){Ur(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Du(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Pr(e){"@babel/helpers - typeof";return Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pr(e)}function Ur(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function rv(e,r){if(e==null)return{};var a={},s=Object.keys(e),l,f;for(f=0;f<s.length;f++)l=s[f],!(r.indexOf(l)>=0)&&(a[l]=e[l]);return a}function iv(e,r){if(e==null)return{};var a=rv(e,r),s,l;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(l=0;l<f.length;l++)s=f[l],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function av(e,r){return sv(e)||lv(e,r)||Ts(e,r)||fv()}function nn(e){return ov(e)||uv(e)||Ts(e)||cv()}function ov(e){if(Array.isArray(e))return Xo(e)}function sv(e){if(Array.isArray(e))return e}function uv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lv(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var s=[],l=!0,f=!1,h,g;try{for(a=a.call(e);!(l=(h=a.next()).done)&&(s.push(h.value),!(r&&s.length===r));l=!0);}catch(y){f=!0,g=y}finally{try{!l&&a.return!=null&&a.return()}finally{if(f)throw g}}return s}}function Ts(e,r){if(e){if(typeof e=="string")return Xo(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xo(e,r)}}function Xo(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=e[a];return s}function cv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ai(e,r){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Ts(e))||r){a&&(e=a);var s=0,l=function(){};return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,h=!1,g;return{s:function(){a=a.call(e)},n:function(){var y=a.next();return f=y.done,y},e:function(y){h=!0,g=y},f:function(){try{!f&&a.return!=null&&a.return()}finally{if(h)throw g}}}}var dv="finalize",vv="consider";function Vr(e,r,a){e.dispatchEvent(new CustomEvent(dv,{detail:{items:r,info:a}}))}function Jn(e,r,a){e.dispatchEvent(new CustomEvent(vv,{detail:{items:r,info:a}}))}var Ma="draggedEntered",Di="draggedLeft",Na="draggedOverIndex",ks="draggedLeftDocument",Ea={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function hv(e,r,a){e.dispatchEvent(new CustomEvent(Ma,{detail:{indexObj:r,draggedEl:a}}))}function pv(e,r,a){e.dispatchEvent(new CustomEvent(Di,{detail:{draggedEl:r,type:Ea.LEFT_FOR_ANOTHER,theOtherDz:a}}))}function yv(e,r){e.dispatchEvent(new CustomEvent(Di,{detail:{draggedEl:r,type:Ea.OUTSIDE_OF_ANY}}))}function mv(e,r,a){e.dispatchEvent(new CustomEvent(Na,{detail:{indexObj:r,draggedEl:a}}))}function gv(e){window.dispatchEvent(new CustomEvent(ks,{detail:{draggedEl:e}}))}var Ct={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Ma,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Na,DRAGGED_LEFT:Di,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Bt={POINTER:"pointer",KEYBOARD:"keyboard"},Fa="isDndShadowItem",Ka="data-is-dnd-shadow-item-internal",_v="data-is-dnd-shadow-item-hint",Fl="id:dnd-shadow-placeholder-0000",bv="dnd-action-dragged-el",it="id",$o=0;function Kl(){$o++}function Bl(){if($o===0)throw new Error("Bug! trying to decrement when there are no dropzones");$o--}var As=typeof window>"u";function Jo(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,s=r?xv(e):e.getBoundingClientRect(),l=getComputedStyle(e),f=l.transform;if(f){var h,g,y,E;if(f.startsWith("matrix3d("))a=f.slice(9,-1).split(/, /),h=+a[0],g=+a[5],y=+a[12],E=+a[13];else if(f.startsWith("matrix("))a=f.slice(7,-1).split(/, /),h=+a[0],g=+a[3],y=+a[4],E=+a[5];else return s;var x=l.transformOrigin,D=s.x-y-(1-h)*parseFloat(x),b=s.y-E-(1-g)*parseFloat(x.slice(x.indexOf(" ")+1)),T=h?s.width/h:e.offsetWidth,R=g?s.height/g:e.offsetHeight;return{x:D,y:b,width:T,height:R,top:b,right:D+T,bottom:b+R,left:D}}else return s}function jl(e){var r=Jo(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function zl(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Ul(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function wv(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function Ba(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function bi(e){return Ul(zl(e))}function Iu(e,r){var a=bi(e),s=jl(r);return Ba(a,s)}function Su(e,r){var a=bi(e),s=bi(r);return wv(a,s)}function Ev(e){var r=zl(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function xv(e){for(var r=e.getBoundingClientRect(),a={top:r.top,bottom:r.bottom,left:r.left,right:r.right},s=!1,l=!1,f=e.parentElement;f&&f!==document.body;){var h=window.getComputedStyle(f),g=h.overflowY,y=h.overflowX,E=g==="scroll"||g==="auto",x=y==="scroll"||y==="auto";if(E||x){var D=f.getBoundingClientRect();if(E){var b=Math.max(a.top,D.top),T=Math.min(a.bottom,D.bottom);(b!==a.top||T!==a.bottom)&&(s=!0),a.top=b,a.bottom=T}if(x){var R=Math.max(a.left,D.left),M=Math.min(a.right,D.right);(R!==a.left||M!==a.right)&&(l=!0),a.left=R,a.right=M}}f=f.parentElement}return s||l?{top:a.top,bottom:a.bottom,left:a.left,right:a.right,width:Math.max(0,a.right-a.left),height:Math.max(0,a.bottom-a.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var Mr;function Ds(){Mr=new Map}Ds();function Tv(e){var r=Array.from(e.children).findIndex(function(a){return a.getAttribute(Ka)});if(r>=0)return Mr.has(e)||Mr.set(e,new Map),Mr.get(e).set(r,jl(e.children[r])),r}function kv(e,r){if(!Iu(e,r))return null;var a=r.children;if(a.length===0)return{index:0,isProximityBased:!0};for(var s=Tv(r),l=0;l<a.length;l++)if(Iu(e,a[l])){var f=Mr.has(r)&&Mr.get(r).get(l);return f&&!Ba(bi(e),f)?{index:s,isProximityBased:!1}:{index:l,isProximityBased:!1}}for(var h=Number.MAX_VALUE,g=void 0,y=0;y<a.length;y++){var E=Su(e,a[y]);E<h&&(h=E,g=y)}if(a.length>0){var x=a.length,D=a[x-1],b=D.cloneNode(!1);b.style.visibility="hidden",b.style.pointerEvents="none",r.appendChild(b);var T=Su(e,b);T<h&&(g=x),r.removeChild(b)}return{index:g,isProximityBased:!0}}function si(e){return JSON.stringify(e,null,2)}function xa(e){if(!e)throw new Error("cannot get depth of a falsy node");return Vl(e,0)}function Vl(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?Vl(e.parentElement,r+1):r-1}function Av(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var a in e)if(!{}.hasOwnProperty.call(r,a)||r[a]!==e[a])return!1;return!0}function Dv(e,r){if(e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}var Iv=200,Ou=10,es;function Sv(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Iv,s=arguments.length>3?arguments[3]:void 0,l,f,h=!1,g,y=Array.from(r).sort(function(x,D){return xa(D)-xa(x)});function E(){var x=bi(e),D=s.multiScrollIfNeeded();if(!D&&g&&Math.abs(g.x-x.x)<Ou&&Math.abs(g.y-x.y)<Ou){es=window.setTimeout(E,a);return}if(Ev(e)){gv(e);return}g=x;var b=!1,T=Ai(y),R;try{for(T.s();!(R=T.n()).done;){var M=R.value;D&&Ds();var N=kv(e,M);if(N!==null){var F=N.index;b=!0,M!==l?(l&&pv(l,e,M),hv(M,N,e),l=M):F!==f&&(mv(M,N,e),f=F);break}}}catch(H){T.e(H)}finally{T.f()}!b&&h&&l?(yv(l,e),l=void 0,f=void 0,h=!1):h=!0,es=window.setTimeout(E,a)}E()}function Ov(){clearTimeout(es),Ds()}var ui=30;function Cv(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function a(f){var h=e,g=h.directionObj,y=h.stepPx;g&&(f.scrollBy(g.x*y,g.y*y),window.requestAnimationFrame(function(){return a(f)}))}function s(f){return ui-f}function l(f,h){if(!h)return!1;var g=Pv(f,h),y=!!e.directionObj;if(g===null)return y&&r(),!1;var E=!1,x=!1;return h.scrollHeight>h.clientHeight&&(g.bottom<ui?(E=!0,e.directionObj={x:0,y:1},e.stepPx=s(g.bottom)):g.top<ui&&(E=!0,e.directionObj={x:0,y:-1},e.stepPx=s(g.top)),!y&&E)||h.scrollWidth>h.clientWidth&&(g.right<ui?(x=!0,e.directionObj={x:1,y:0},e.stepPx=s(g.right)):g.left<ui&&(x=!0,e.directionObj={x:-1,y:0},e.stepPx=s(g.left)),!y&&x)?(a(h),!0):(r(),!1)}return{scrollIfNeeded:l,resetScrolling:r}}function Pv(e,r){var a=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return Ba(e,a)?{top:e.y-a.top,bottom:a.bottom-e.y,left:e.x-a.left,right:a.right-e.x}:null}function Rv(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=Mv(e),s=Array.from(a).sort(function(y,E){return xa(E)-xa(y)}),l=Cv(),f=l.scrollIfNeeded,h=l.resetScrolling;function g(){var y=r();if(!y||!s)return!1;for(var E=s.filter(function(b){return Ba(y,b.getBoundingClientRect())||b===document.scrollingElement}),x=0;x<E.length;x++){var D=f(y,E[x]);if(D)return!0}return!1}return{multiScrollIfNeeded:a.size>0?g:function(){return!1},destroy:function(){return h()}}}function Lv(e){if(!e)return[];for(var r=[],a=e;a;){var s=window.getComputedStyle(a),l=s.overflow;l.split(" ").some(function(f){return f.includes("auto")||f.includes("scroll")})&&r.push(a),a=a.parentElement}return r}function Mv(e){var r=new Set,a=Ai(e),s;try{for(a.s();!(s=a.n()).done;){var l=s.value;Lv(l).forEach(function(f){return r.add(f)})}}catch(f){a.e(f)}finally{a.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function Nv(e){var r=e.cloneNode(!0),a=[],s=e.tagName==="SELECT",l=s?[e]:nn(e.querySelectorAll("select")),f=Ai(l),h;try{for(f.s();!(h=f.n()).done;){var g=h.value;a.push(g.value)}}catch(Z){f.e(Z)}finally{f.f()}if(l.length>0)for(var y=s?[r]:nn(r.querySelectorAll("select")),E=0;E<y.length;E++){var x=y[E],D=a[E],b=x.querySelector('option[value="'.concat(D,'"'));b&&b.setAttribute("selected",!0)}var T=e.tagName==="CANVAS",R=T?[e]:nn(e.querySelectorAll("canvas"));if(R.length>0)for(var M=T?[r]:nn(r.querySelectorAll("canvas")),N=0;N<M.length;N++){var F=R[N],H=M[N];H.width=F.width,H.height=F.height,F.width>0&&F.height>0&&H.getContext("2d").drawImage(F,0,0)}return r}var wi=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Fv=Ur({},wi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Hl(e){if(!wi[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(wi)));return Fv[e]}var Kv=.2;function lr(e){return"".concat(e," ").concat(Kv,"s ease")}function Bv(e,r){var a=e.getBoundingClientRect(),s=Nv(e);Wl(e,s),s.id=bv,s.style.position="fixed";var l=a.top,f=a.left;if(s.style.top="".concat(l,"px"),s.style.left="".concat(f,"px"),r){var h=Ul(a);l-=h.y-r.y,f-=h.x-r.x,window.setTimeout(function(){s.style.top="".concat(l,"px"),s.style.left="".concat(f,"px")},0)}return s.style.margin="0",s.style.boxSizing="border-box",s.style.height="".concat(a.height,"px"),s.style.width="".concat(a.width,"px"),s.style.transition="".concat(lr("top"),", ").concat(lr("left"),", ").concat(lr("background-color"),", ").concat(lr("opacity"),", ").concat(lr("color")," "),window.setTimeout(function(){return s.style.transition+=", ".concat(lr("width"),", ").concat(lr("height"))},0),s.style.zIndex="9999",s.style.cursor="grabbing",s}function jv(e){e.style.cursor="grab"}function zv(e,r,a,s){Wl(r,e);var l=r.getBoundingClientRect(),f=e.getBoundingClientRect(),h=l.width-f.width,g=l.height-f.height;if(h||g){var y={left:(a-f.left)/f.width,top:(s-f.top)/f.height};Hl(wi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(l.height,"px"),e.style.width="".concat(l.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-y.left*h,"px"),e.style.top="".concat(parseFloat(e.style.top)-y.top*g,"px")}}function Wl(e,r){var a=window.getComputedStyle(e);Array.from(a).filter(function(s){return s.startsWith("background")||s.startsWith("padding")||s.startsWith("font")||s.startsWith("text")||s.startsWith("align")||s.startsWith("justify")||s.startsWith("display")||s.startsWith("flex")||s.startsWith("border")||s==="opacity"||s==="color"||s==="list-style-type"||Hl(wi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(s==="width"||s==="height")}).forEach(function(s){return r.style.setProperty(s,a.getPropertyValue(s),a.getPropertyPriority(s))})}function Uv(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Gl(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function Vv(e){e.style.visibility="hidden",e.setAttribute(Ka,"true")}function Hv(e){e.style.visibility="",e.removeAttribute(Ka)}function ua(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(f){s.style[f]=l[f]}),a(s).forEach(function(f){return s.classList.add(f)})})}function Ta(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(f){s.style[f]=""}),a(s).forEach(function(f){return s.classList.contains(f)&&s.classList.remove(f)})})}function Wv(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var a=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=a}}var Gv="--any--",Yv=100,qv=20,ia=3,Zv=80,Cu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Pu="data-is-dnd-original-dragged-item",Rt,ut,Mt,ja,Ue,za,Zn,ft,yn,wt,Un=!1,Is=!1,Ss,Ii=!1,la=[],pi,mn,ci=!1,un=new Map,Je=new Map,Mo=new WeakMap;function Qv(e,r){un.has(r)||un.set(r,new Set),un.get(r).has(e)||(un.get(r).add(e),Kl())}function Ru(e,r){un.get(r).delete(e),Bl(),un.get(r).size===0&&un.delete(r)}function Xv(){var e=un.get(ja),r=Ai(e),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;s.addEventListener(Ma,Yl),s.addEventListener(Di,ql),s.addEventListener(Na,Zl)}}catch(h){r.e(h)}finally{r.f()}window.addEventListener(ks,Hr);var l=Math.max.apply(Math,nn(Array.from(e.keys()).map(function(h){return Je.get(h).dropAnimationDurationMs}))),f=l===0?qv:Math.max(l,Yv);pi=Rv(e,function(){return wt}),Sv(ut,e,f*1.07,pi)}function $v(){var e=un.get(ja),r=Ai(e),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;s.removeEventListener(Ma,Yl),s.removeEventListener(Di,ql),s.removeEventListener(Na,Zl)}}catch(l){r.e(l)}finally{r.f()}window.removeEventListener(ks,Hr),pi&&(pi.destroy(),pi=void 0),Ov()}function Ua(e){return e.findIndex(function(r){return!!r[Fa]})}function Jv(e){var r;return wa(wa({},e),{},(r={},Ur(r,Fa,!0),Ur(r,it,Fl),r))}function Yl(e){var r=Je.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==Ue)){if(Ii=!1,a=a.filter(function(g){return g[it]!==Zn[it]&&g[it]!==Fl}),Ue!==e.currentTarget){var l=Je.get(Ue).items,f=l.filter(function(g){return!g[Fa]});Jn(Ue,f,{trigger:Ct.DRAGGED_ENTERED_ANOTHER,id:Mt[it],source:Bt.POINTER})}var h=e.detail.indexObj.index;ft=e.currentTarget,a.splice(h,0,Zn),Jn(e.currentTarget,a,{trigger:Ct.DRAGGED_ENTERED,id:Mt[it],source:Bt.POINTER})}}function ql(e){if(Un){var r=Je.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==Ue&&e.currentTarget!==ft)){var l=nn(a),f=Ua(l);f!==-1&&l.splice(f,1);var h=ft;ft=void 0;var g=e.detail,y=g.type,E=g.theOtherDz;if(y===Ea.OUTSIDE_OF_ANY||y===Ea.LEFT_FOR_ANOTHER&&E!==Ue&&Je.get(E).dropFromOthersDisabled){Ii=!0,ft=Ue;var x=h===Ue?l:nn(Je.get(Ue).items);x.splice(za,0,Zn),Jn(Ue,x,{trigger:Ct.DRAGGED_LEFT_ALL,id:Mt[it],source:Bt.POINTER})}Jn(e.currentTarget,l,{trigger:Ct.DRAGGED_LEFT,id:Mt[it],source:Bt.POINTER})}}}function Zl(e){var r=Je.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==Ue)){var l=nn(a);Ii=!1;var f=e.detail.indexObj.index,h=Ua(l);h!==-1&&l.splice(h,1),l.splice(f,0,Zn),Jn(e.currentTarget,l,{trigger:Ct.DRAGGED_OVER_INDEX,id:Mt[it],source:Bt.POINTER})}}function ka(e){e.preventDefault();var r=e.touches?e.touches[0]:e;wt={x:r.clientX,y:r.clientY},ut.style.transform="translate3d(".concat(wt.x-yn.x,"px, ").concat(wt.y-yn.y,"px, 0)")}function Hr(){Is=!0,window.removeEventListener("mousemove",ka),window.removeEventListener("touchmove",ka),window.removeEventListener("mouseup",Hr),window.removeEventListener("touchend",Hr),$v(),jv(ut),ft||(ft=Ue);var e=Je.get(ft),r=e.items,a=e.type;Ta(un.get(a),function(f){return Je.get(f).dropTargetStyle},function(f){return Je.get(f).dropTargetClasses});var s=Ua(r);s===-1&&ft===Ue&&(s=za),r=r.map(function(f){return f[Fa]?Mt:f});function l(){Ss(),Vr(ft,r,{trigger:Ii?Ct.DROPPED_OUTSIDE_OF_ANY:Ct.DROPPED_INTO_ZONE,id:Mt[it],source:Bt.POINTER}),ft!==Ue&&Vr(Ue,Je.get(Ue).items,{trigger:Ct.DROPPED_INTO_ANOTHER,id:Mt[it],source:Bt.POINTER});var f=Array.from(ft.children).find(function(h){return h.getAttribute(Ka)});f&&Hv(f),nh()}Je.get(ft).dropAnimationDisabled?l():eh(s,l)}function eh(e,r){var a=e>-1?Jo(ft.children[e],!1):Jo(ft,!1),s={x:a.left-parseFloat(ut.style.left),y:a.top-parseFloat(ut.style.top)},l=Je.get(ft),f=l.dropAnimationDurationMs,h="transform ".concat(f,"ms ease");ut.style.transition=ut.style.transition?ut.style.transition+","+h:h,ut.style.transform="translate3d(".concat(s.x,"px, ").concat(s.y,"px, 0)"),window.setTimeout(r,f)}function th(e,r){la.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){Gl(e),document.body.appendChild(e)})}function nh(){ut&&ut.remove&&ut.remove(),Rt&&Rt.remove&&Rt.remove(),ut=void 0,Rt=void 0,Mt=void 0,ja=void 0,Ue=void 0,za=void 0,Zn=void 0,ft=void 0,yn=void 0,wt=void 0,Un=!1,Is=!1,Ss=void 0,Ii=!1,mn&&clearTimeout(mn),mn=void 0,ci=!1,la.length&&(la.forEach(function(e){var r=e.dz,a=e.destroy;a(),r.remove()}),la=[])}function rh(e,r){var a=!1,s={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Cu,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},l=new Map;function f(){window.addEventListener("mousemove",y,{passive:!1}),window.addEventListener("touchmove",y,{passive:!1,capture:!1}),window.addEventListener("mouseup",g,{passive:!1}),window.addEventListener("touchend",g,{passive:!1})}function h(){window.removeEventListener("mousemove",y),window.removeEventListener("touchmove",y),window.removeEventListener("mouseup",g),window.removeEventListener("touchend",g),mn&&(clearTimeout(mn),mn=void 0,ci=!1)}function g(b){if(h(),Rt=void 0,yn=void 0,wt=void 0,b.type==="touchend"){var T=new Event("click",{bubbles:!0,cancelable:!0});b.target.dispatchEvent(T)}}function y(b){var T=!!b.touches,R=T?b.touches[0]:b;if(T&&s.delayTouchStartMs>0&&!ci){wt={x:R.clientX,y:R.clientY},(Math.abs(wt.x-yn.x)>=ia||Math.abs(wt.y-yn.y)>=ia)&&(mn&&(clearTimeout(mn),mn=void 0),g(b));return}b.preventDefault(),wt={x:R.clientX,y:R.clientY},(Math.abs(wt.x-yn.x)>=ia||Math.abs(wt.y-yn.y)>=ia)&&(h(),x())}function E(b){if(!(b.target!==b.currentTarget&&(b.target.value!==void 0||b.target.isContentEditable))&&!b.button&&!Un){var T=!!b.touches,R=T&&s.delayTouchStartMs>0;R||b.preventDefault(),b.stopPropagation();var M=T?b.touches[0]:b;yn={x:M.clientX,y:M.clientY},wt=wa({},yn),Rt=b.currentTarget,R&&(ci=!1,mn=window.setTimeout(function(){Rt&&(ci=!0,h(),x())},s.delayTouchStartMs)),f()}}function x(){Un=!0;var b=l.get(Rt);za=b,Ue=Rt.parentElement;var T=Ue.closest("dialog")||Ue.closest("[popover]")||Ue.getRootNode(),R=T.body||T,M=s.items,N=s.type,F=s.centreDraggedOnCursor,H=nn(M);Mt=H[b],ja=N,Zn=Jv(Mt),ut=Bv(Rt,F&&wt),R.appendChild(ut);function Z(){Rt.parentElement?window.requestAnimationFrame(Z):(Rt.setAttribute(Pu,!0),R.appendChild(Rt),Xv(),Gl(Rt),Zn[it]=Mt[it],ut.focus())}window.requestAnimationFrame(Z),ua(Array.from(un.get(s.type)).filter(function(G){return G===Ue||!Je.get(G).dropFromOthersDisabled}),function(G){return Je.get(G).dropTargetStyle},function(G){return Je.get(G).dropTargetClasses}),H.splice(b,1,Zn),Ss=Wv(Ue),Jn(Ue,H,{trigger:Ct.DRAG_STARTED,id:Mt[it],source:Bt.POINTER}),window.addEventListener("mousemove",ka,{passive:!1}),window.addEventListener("touchmove",ka,{passive:!1,capture:!1}),window.addEventListener("mouseup",Hr,{passive:!1}),window.addEventListener("touchend",Hr,{passive:!1})}function D(b){var T=b.items,R=T===void 0?void 0:T,M=b.flipDurationMs,N=M===void 0?0:M,F=b.type,H=F===void 0?Gv:F,Z=b.dragDisabled,G=Z===void 0?!1:Z,ne=b.morphDisabled,se=ne===void 0?!1:ne,me=b.dropFromOthersDisabled,ye=me===void 0?!1:me,ce=b.dropTargetStyle,ge=ce===void 0?Cu:ce,fe=b.dropTargetClasses,Ee=fe===void 0?[]:fe,Ve=b.transformDraggedElement,Fe=Ve===void 0?function(){}:Ve,et=b.centreDraggedOnCursor,tt=et===void 0?!1:et,Me=b.dropAnimationDisabled,kt=Me===void 0?!1:Me,Ke=b.delayTouchStart,We=Ke===void 0?!1:Ke;s.dropAnimationDurationMs=N;var zt=0;We===!0?zt=Zv:typeof We=="number"&&isFinite(We)&&We>=0&&(zt=We),s.delayTouchStartMs=zt,s.type&&H!==s.type&&Ru(e,s.type),s.type=H,s.items=nn(R),s.dragDisabled=G,s.morphDisabled=se,s.transformDraggedElement=Fe,s.centreDraggedOnCursor=tt,s.dropAnimationDisabled=kt,a&&Un&&!Is&&(!Av(ge,s.dropTargetStyle)||!Dv(Ee,s.dropTargetClasses))&&(Ta([e],function(){return s.dropTargetStyle},function(){return Ee}),ua([e],function(){return ge},function(){return Ee})),s.dropTargetStyle=ge,s.dropTargetClasses=nn(Ee);function Ut(Y,_e){return Je.get(Y)?Je.get(Y)[_e]:s[_e]}a&&Un&&s.dropFromOthersDisabled!==ye&&(ye?Ta([e],function(Y){return Ut(Y,"dropTargetStyle")},function(Y){return Ut(Y,"dropTargetClasses")}):ua([e],function(Y){return Ut(Y,"dropTargetStyle")},function(Y){return Ut(Y,"dropTargetClasses")})),s.dropFromOthersDisabled=ye,Je.set(e,s),Qv(e,H);for(var rn=Un?Ua(s.items):-1,ht=0;ht<e.children.length;ht++){var rt=e.children[ht];if(Uv(rt,G),ht===rn){se||zv(ut,rt,wt.x,wt.y),s.transformDraggedElement(ut,Mt,ht),Vv(rt);continue}rt.removeEventListener("mousedown",Mo.get(rt)),rt.removeEventListener("touchstart",Mo.get(rt)),G||(rt.addEventListener("mousedown",E),rt.addEventListener("touchstart",E),Mo.set(rt,E)),l.set(rt,ht),a||(a=!0)}}return D(r),{update:function(T){D(T)},destroy:function(){function T(){Ru(e,Je.get(e).type),Je.delete(e)}Un&&!e.closest("[".concat(Pu,"]"))?th(e,T):T()}}}var aa,ts={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Ql=(aa={},Ur(aa,ts.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Ur(aa,ts.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),aa),ih="dnd-action-aria-alert",nt;function ns(){nt||(nt=document.createElement("div"),(function(){nt.id=ih,nt.style.position="fixed",nt.style.bottom="0",nt.style.left="0",nt.style.zIndex="-5",nt.style.opacity="0",nt.style.height="0",nt.style.width="0",nt.setAttribute("role","alert")})(),document.body.prepend(nt),Object.entries(Ql).forEach(function(e){var r=av(e,2),a=r[0],s=r[1];return document.body.prepend(sh(a,s))}))}function ah(){return As?null:(document.readyState==="complete"?ns():window.addEventListener("DOMContentLoaded",ns),wa({},ts))}function oh(){As||!nt||(Object.keys(Ql).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),nt.remove(),nt=void 0)}function sh(e,r){var a=document.createElement("div");return a.id=e,a.innerHTML="<p>".concat(r,"</p>"),a.style.display="none",a.style.position="fixed",a.style.zIndex="-5",a}function Nr(e){if(!As){nt||ns(),nt.innerHTML="";var r=document.createTextNode(e);nt.appendChild(r),nt.style.display="none",nt.style.display="inline"}}var uh="--any--",Lu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Xt=!1,rs,Et,pr="",cr,gn,Hn="",Aa=new WeakSet,Mu=new WeakMap,Nu=new WeakMap,is=new Map,ct=new Map,sn=new Map,Da;function lh(e,r){sn.size===0&&(Da=ah(),window.addEventListener("keydown",Xl),window.addEventListener("click",$l)),sn.has(r)||sn.set(r,new Set),sn.get(r).has(e)||(sn.get(r).add(e),Kl())}function Fu(e,r){Et===e&&Ei(),sn.get(r).delete(e),Bl(),sn.get(r).size===0&&sn.delete(r),sn.size===0&&(window.removeEventListener("keydown",Xl),window.removeEventListener("click",$l),Da=void 0,oh())}function Xl(e){if(Xt)switch(e.key){case"Escape":{Ei();break}}}function $l(){Xt&&(Aa.has(document.activeElement)||Ei())}function ch(e){if(Xt){var r=e.currentTarget;if(r!==Et){pr=r.getAttribute("aria-label")||"";var a=ct.get(Et),s=a.items,l=s.find(function(D){return D[it]===gn}),f=s.indexOf(l),h=s.splice(f,1)[0],g=ct.get(r),y=g.items,E=g.autoAriaDisabled;r.getBoundingClientRect().top<Et.getBoundingClientRect().top||r.getBoundingClientRect().left<Et.getBoundingClientRect().left?(y.push(h),E||Nr("Moved item ".concat(Hn," to the end of the list ").concat(pr))):(y.unshift(h),E||Nr("Moved item ".concat(Hn," to the beginning of the list ").concat(pr)));var x=Et;Vr(x,s,{trigger:Ct.DROPPED_INTO_ANOTHER,id:gn,source:Bt.KEYBOARD}),Vr(r,y,{trigger:Ct.DROPPED_INTO_ZONE,id:gn,source:Bt.KEYBOARD}),Et=r}}}function Jl(){is.forEach(function(e,r){var a=e.update;return a(ct.get(r))})}function Ei(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;ct.get(Et).autoAriaDisabled||Nr("Stopped dragging item ".concat(Hn)),Aa.has(document.activeElement)&&document.activeElement.blur(),e&&Jn(Et,ct.get(Et).items,{trigger:Ct.DRAG_STOPPED,id:gn,source:Bt.KEYBOARD}),Ta(sn.get(rs),function(r){return ct.get(r).dropTargetStyle},function(r){return ct.get(r).dropTargetClasses}),cr=null,gn=null,Hn="",rs=null,Et=null,pr="",Xt=!1,Jl()}function fh(e,r){var a={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Lu,dropTargetClasses:[],autoAriaDisabled:!1};function s(x,D,b){x.length<=1||x.splice(b,1,x.splice(D,1,x[b])[0])}function l(x){switch(x.key){case"Enter":case" ":{if((x.target.disabled!==void 0||x.target.href||x.target.isContentEditable)&&!Aa.has(x.target))return;x.preventDefault(),x.stopPropagation(),Xt?Ei():f(x);break}case"ArrowDown":case"ArrowRight":{if(!Xt)return;x.preventDefault(),x.stopPropagation();var D=ct.get(e),b=D.items,T=Array.from(e.children),R=T.indexOf(x.currentTarget);R<T.length-1&&(a.autoAriaDisabled||Nr("Moved item ".concat(Hn," to position ").concat(R+2," in the list ").concat(pr)),s(b,R,R+1),Vr(e,b,{trigger:Ct.DROPPED_INTO_ZONE,id:gn,source:Bt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Xt)return;x.preventDefault(),x.stopPropagation();var M=ct.get(e),N=M.items,F=Array.from(e.children),H=F.indexOf(x.currentTarget);H>0&&(a.autoAriaDisabled||Nr("Moved item ".concat(Hn," to position ").concat(H," in the list ").concat(pr)),s(N,H,H-1),Vr(e,N,{trigger:Ct.DROPPED_INTO_ZONE,id:gn,source:Bt.KEYBOARD}));break}}}function f(x){g(x.currentTarget),Et=e,rs=a.type,Xt=!0;var D=Array.from(sn.get(a.type)).filter(function(T){return T===Et||!ct.get(T).dropFromOthersDisabled});if(ua(D,function(T){return ct.get(T).dropTargetStyle},function(T){return ct.get(T).dropTargetClasses}),!a.autoAriaDisabled){var b="Started dragging item ".concat(Hn,". Use the arrow keys to move it within its list ").concat(pr);D.length>1&&(b+=", or tab to another list in order to move the item into it"),Nr(b)}Jn(e,ct.get(e).items,{trigger:Ct.DRAG_STARTED,id:gn,source:Bt.KEYBOARD}),Jl()}function h(x){Xt&&x.currentTarget!==cr&&(x.stopPropagation(),Ei(!1),f(x))}function g(x){var D=ct.get(e),b=D.items,T=Array.from(e.children),R=T.indexOf(x);cr=x,cr.tabIndex=a.zoneItemTabIndex,gn=b[R][it],Hn=T[R].getAttribute("aria-label")||""}function y(x){var D=x.items,b=D===void 0?[]:D,T=x.type,R=T===void 0?uh:T,M=x.dragDisabled,N=M===void 0?!1:M,F=x.zoneTabIndex,H=F===void 0?0:F,Z=x.zoneItemTabIndex,G=Z===void 0?0:Z,ne=x.dropFromOthersDisabled,se=ne===void 0?!1:ne,me=x.dropTargetStyle,ye=me===void 0?Lu:me,ce=x.dropTargetClasses,ge=ce===void 0?[]:ce,fe=x.autoAriaDisabled,Ee=fe===void 0?!1:fe;a.items=nn(b),a.dragDisabled=N,a.dropFromOthersDisabled=se,a.zoneTabIndex=H,a.zoneItemTabIndex=G,a.dropTargetStyle=ye,a.dropTargetClasses=ge,a.autoAriaDisabled=Ee,a.type&&R!==a.type&&Fu(e,a.type),a.type=R,lh(e,R),Ee||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",N?Da.DND_ZONE_DRAG_DISABLED:Da.DND_ZONE_ACTIVE)),ct.set(e,a),Xt?e.tabIndex=e===Et||cr.contains(e)||a.dropFromOthersDisabled||Et&&a.type!==ct.get(Et).type?-1:0:e.tabIndex=a.zoneTabIndex,e.addEventListener("focus",ch);for(var Ve=function(tt){var Me=e.children[tt];Aa.add(Me),Me.tabIndex=Xt?-1:a.zoneItemTabIndex,Ee||Me.setAttribute("role","listitem"),Me.removeEventListener("keydown",Mu.get(Me)),Me.removeEventListener("click",Nu.get(Me)),N||(Me.addEventListener("keydown",l),Mu.set(Me,l),Me.addEventListener("click",h),Nu.set(Me,h)),Xt&&a.items[tt][it]===gn&&(cr=Me,cr.tabIndex=a.zoneItemTabIndex,Me.focus())},Fe=0;Fe<e.children.length;Fe++)Ve(Fe)}y(r);var E={update:function(D){y(D)},destroy:function(){Fu(e,a.type),ct.delete(e),is.delete(e)}};return is.set(e,E),E}var dh=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function as(e,r){if(vh(e))return{update:function(){},destroy:function(){}};Ku(r);var a=rh(e,r),s=fh(e,r);return{update:function(f){Ku(f),a.update(f),s.update(f)},destroy:function(){a.destroy(),s.destroy()}}}function vh(e){return!!e.closest("[".concat(_v,'="true"]'))}function Ku(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var a=e.zoneTabIndex,s=e.zoneItemTabIndex;e.dropTargetStyle;var l=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var f=e.delayTouchStart;e.dropAnimationDisabled;var h=iv(e,dh);if(Object.keys(h).length>0&&console.warn("dndzone will ignore unknown options",h),!r)throw new Error("no 'items' key provided to dndzone");var g=r.find(function(x){return!{}.hasOwnProperty.call(x,it)});if(g)throw new Error("missing '".concat(it,"' property for item ").concat(si(g)));if(l&&!Array.isArray(l))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Pr(l),", ").concat(si(l)));if(a&&!Bu(a))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Pr(a),", ").concat(si(a)));if(s&&!Bu(s))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Pr(s),", ").concat(si(s)));if(f!==void 0&&f!==!1){var y=f===!0,E=typeof f=="number"&&isFinite(f)&&f>=0;if(!y&&!E)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(Pr(f),", ").concat(si(f)))}}function Bu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}const Ae=new _a("TaskPlannerDB");Ae.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Ae.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));Ae.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));Ae.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify(r=>{r.archivedAt===void 0&&(r.archivedAt=null)}));function Va(e){return e.length===0?0:Math.max(...e.map(a=>a.order))+1}async function hh(){return(await Ae.lists.orderBy("order").toArray()).filter(r=>r.archivedAt==null)}async function ph(){return await Ae.lists.orderBy("order").toArray()}async function yh(e){const r=e.trim();if(r==="")throw new Error("List name cannot be empty or whitespace-only");const a=await Ae.lists.orderBy("order").toArray(),s=Va(a);return await Ae.lists.add({name:r,order:s,archivedAt:null})}async function Os(){const e=await Ae.lists.orderBy("order").toArray(),r=Va(e);return await Ae.lists.add({name:null,order:r,archivedAt:null})}async function mh(e,r){const a=r.trim();if(a==="")throw new Error("List name cannot be empty");return await Ae.lists.update(e,{name:a})}async function No(e){return await Ae.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function gh(){return(await Ae.tasks.where("status").equals("archived").toArray()).sort((r,a)=>{const s=r.archivedAt||0,l=a.archivedAt||0;return l!==s?l-s:(a.order||0)-(r.order||0)})}async function ec(e,r){let a=e;e===null&&(a=await Os());const s=await Ae.tasks.where("listId").equals(a).filter(g=>g.status!=="archived").sortBy("order"),l=Va(s),f=r===""?"":r.trim();return await Ae.tasks.add({text:f,listId:a,order:l,status:"unchecked"})}async function _h(e,r){const a=r===""?"":r.trim();return await Ae.tasks.update(e,{text:a})}async function ju(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const a={status:r};return r==="archived"?a.archivedAt=Date.now():r!=="archived"&&(a.archivedAt=null),await Ae.tasks.update(e,a)}async function bh(e){const r=await Ae.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const a=await Ae.lists.get(r.listId);if(!a)throw new Error(`Task's list ${r.listId} not found`);let s=!1;a.archivedAt!=null&&(await Eh(r.listId),s=!0);const l=await Ae.tasks.where("listId").equals(r.listId).filter(g=>g.status!=="archived"&&g.id!==e).sortBy("order"),f=Va(l);return{taskUpdated:await Ae.tasks.update(e,{status:"checked",order:f}),listRestored:s}}async function fi(e,r){if(!r||r.length===0)return;const a=r.map(g=>g.id),l=(await Ae.tasks.bulkGet(a)).filter(g=>g!==void 0);if(l.length===0)return;const f=l.filter(g=>g.listId!==e),h=new Set(f.map(g=>g.listId));await Ae.transaction("rw",Ae.tasks,async()=>{for(let g=0;g<r.length;g++){const y=r[g].id,E=l.find(D=>D.id===y);if(!E)continue;const x={order:g};E.listId!==e&&(x.listId=e),await Ae.tasks.update(y,x)}for(const g of h){const y=await Ae.tasks.where("listId").equals(g).filter(E=>E.status!=="archived").sortBy("order");for(let E=0;E<y.length;E++)await Ae.tasks.update(y[E].id,{order:E})}})}async function wh(e){const r=Date.now();return await Ae.lists.update(e,{archivedAt:r})}async function Eh(e){return await Ae.lists.update(e,{archivedAt:null})}async function xh(e){const r=Date.now(),a=await Ae.tasks.where("listId").equals(e).filter(l=>l.status==="unchecked"||l.status==="checked").toArray(),s=a.map(l=>Ae.tasks.update(l.id,{status:"archived",archivedAt:r}));return await Promise.all(s),a.length}async function Th(e){if(!e||e.length===0)return;const r=e.map(f=>f.id);if((await Ae.lists.bulkGet(r)).filter(f=>!f).length>0)throw new Error("Cannot update order: some lists do not exist");const l=e.map((f,h)=>({id:f.id,order:h}));await Ae.transaction("rw",Ae.lists,async()=>{for(const f of l)await Ae.lists.update(f.id,{order:f.order})})}const yr=160,kn=150,os=1056,kh=816,Ia=16,zu=25,Fo=10;var Ah=ke('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),Dh=ke('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function Ih(e,r){br(r,!0);let a=pe(tn(r.taskText||"")),s=pe(!1),l=pe(null),f=pe(null),h=Wt(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const M=24,N=24,F=Ia,Z=M+N+F+8-8,G=10,ne=r.taskPosition.top-Z,se=r.taskPosition.left-Ia+G,me=r.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${ne}px; left: ${se}px; width: ${me}px;`});qe(()=>{r.isOpen&&(O(a,r.taskText||"",!0),O(s,!1))}),qe(()=>{r.isOpen&&m(l)&&setTimeout(()=>{m(l)?.focus(),m(l)?.select(),m(l)instanceof HTMLTextAreaElement&&(m(l).style.height="auto",m(l).style.height=`${Math.min(m(l).scrollHeight,yr)}px`)},0)}),qe(()=>{if(m(l)&&m(l)instanceof HTMLTextAreaElement){const M=()=>{m(l).style.height="auto",m(l).style.height=`${Math.min(m(l).scrollHeight,yr)}px`};return m(l).addEventListener("input",M),()=>{m(l).removeEventListener("input",M)}}});function g(){const M=m(a)??"",N=M.trim();if(N===""&&M.length>0){r.onSave(r.taskId,""),O(s,!1);return}if(M===""||N===""){O(s,!0);return}r.onSave(r.taskId,N),O(s,!1)}function y(){O(a,r.taskText||"",!0),O(s,!1),r.onCancel()}function E(M){M.target===M.currentTarget&&y()}function x(M){M.key==="Escape"?y():M.key==="Enter"&&!M.shiftKey&&document.activeElement===m(l)&&(M.preventDefault(),g())}function D(){r.onArchive&&r.onArchive(r.taskId)}var b=qn(),T=dt(b);{var R=M=>{var N=Dh();N.__click=E,N.__keydown=x;var F=de(N);F.__click=fe=>fe.stopPropagation();var H=we(de(F),2),Z=de(H);Z.__keydown=x,Gt(Z,fe=>O(l,fe),()=>m(l));var G=we(Z,2);{var ne=fe=>{var Ee=Ah();ve(fe,Ee)};ze(G,fe=>{m(s)&&fe(ne)})}var se=we(H,2),me=de(se);me.__click=D;var ye=we(me,2),ce=de(ye);ce.__click=y;var ge=we(ce,2);ge.__click=g,Gt(F,fe=>O(f,fe),()=>m(f)),Ze(fe=>{Ot(F,fe),Ot(Z,`width: ${kn}px;`),Lt(Z,"aria-describedby",m(s)?"validation-message":void 0),ge.disabled=m(s),Lt(ge,"aria-label",m(s)?"Save disabled: task cannot be empty":"Save task changes")},[()=>m(h)()]),hi(Z,()=>m(a),fe=>O(a,fe)),ve(M,N)};ze(T,M=>{r.isOpen&&M(R)})}ve(e,b),wr()}qr(["click","keydown"]);var Sh=ke('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),Oh=ke('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-red-600 border border-red-300 rounded hover:bg-red-50" aria-label="Archive this list">Archive</button> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div>',1),Ch=ke('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-gray-600">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel archiving">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700" aria-label="Confirm archive list">Archive</button></div>',1),Ph=ke('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed box-border" role="document"><!></div></div>');function Rh(e,r){br(r,!0);let a=pe(tn(r.listName||"")),s=pe(!1),l=pe(null),f=pe(null),h=pe("edit"),g=Wt(()=>()=>{if(!r.listPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const H=24,Z=24,G=Ia,se=H+Z+G+8-8,me=r.listPosition.top-se,ye=r.listPosition.left-Ia,ce=Math.max(r.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${me}px; left: ${ye}px; width: ${ce}px; max-width: ${ce}px; box-sizing: border-box;`});qe(()=>{r.isOpen&&(O(a,r.listName||"",!0),O(s,!1),O(h,"edit"))}),qe(()=>{r.isOpen&&m(l)&&setTimeout(()=>{m(l)?.focus(),m(l)?.select()},0)});function y(){const Z=(m(a)??"").trim();if(Z===""){O(s,!0);return}r.onSave(r.listId,Z),O(s,!1)}function E(){O(a,r.listName||"",!0),O(s,!1),r.onCancel()}function x(H){H.target===H.currentTarget&&E()}function D(H){H.key==="Escape"?m(h)==="confirm-archive"?R():E():H.key==="Enter"&&!H.shiftKey&&m(h)==="edit"&&(H.preventDefault(),y())}function b(){O(h,"confirm-archive")}function T(){r.onArchive(r.listId),E()}function R(){O(h,"edit")}var M=qn(),N=dt(M);{var F=H=>{var Z=Ph();Z.__click=x,Z.__keydown=D;var G=de(Z);G.__click=ye=>ye.stopPropagation();var ne=de(G);{var se=ye=>{var ce=Oh(),ge=we(dt(ce),2),fe=de(ge);fe.__keydown=D,Gt(fe,Ke=>O(l,Ke),()=>m(l));var Ee=we(fe,2);{var Ve=Ke=>{var We=Sh();ve(Ke,We)};ze(Ee,Ke=>{m(s)&&Ke(Ve)})}var Fe=we(ge,2),et=de(Fe);et.__click=b;var tt=we(et,2),Me=de(tt);Me.__click=E;var kt=we(Me,2);kt.__click=y,Ze(()=>{Lt(fe,"aria-describedby",m(s)?"validation-message":void 0),kt.disabled=m(s),Lt(kt,"aria-label",m(s)?"Save disabled: list name cannot be empty":"Save list name changes")}),hi(fe,()=>m(a),Ke=>O(a,Ke)),ve(ye,ce)},me=ye=>{var ce=qn(),ge=dt(ce);{var fe=Ee=>{var Ve=Ch(),Fe=we(dt(Ve),4),et=de(Fe);et.__click=R;var tt=we(et,2);tt.__click=T,ve(Ee,Ve)};ze(ge,Ee=>{m(h)==="confirm-archive"&&Ee(fe)},!0)}ve(ye,ce)};ze(ne,ye=>{m(h)==="edit"?ye(se):ye(me,!1)})}Gt(G,ye=>O(f,ye),()=>m(f)),Ze(ye=>Ot(G,ye),[()=>m(g)()]),ve(H,Z)};ze(N,H=>{r.isOpen&&H(F)})}ve(e,M),wr()}qr(["click","keydown"]);var Lh=ke('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea class="flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div>',1),Mh=ke('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words" role="button" tabindex="0"> </span>',1),Nh=ke('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden add-task-container add-task-button mt-2"><!></div>');function Ko(e,r){br(r,!0);let a=Tn(r,"isInputActive",11,!1),s=Tn(r,"inputValue",3,""),l=Tn(r,"buttonText",3,"Add Task"),f=Tn(r,"placeholder",3,"Add new task..."),h=Tn(r,"marginLeft",3,!1),g=Tn(r,"containerElement",15,null),y=Tn(r,"textareaElement",15,null),E=pe(null),x=pe(null);qe(()=>{g(m(x)),y(m(E))}),qe(()=>{a()&&m(E)&&setTimeout(()=>{m(E)?.focus(),m(E)instanceof HTMLTextAreaElement&&(m(E).style.height="auto",m(E).style.height=`${Math.min(m(E).scrollHeight,yr)}px`)},0)}),qe(()=>{if(m(E)&&m(E)instanceof HTMLTextAreaElement){const F=()=>{m(E).style.height="auto",m(E).style.height=`${Math.min(m(E).scrollHeight,yr)}px`};return m(E).addEventListener("input",F),()=>{m(E).removeEventListener("input",F)}}});function D(F){F.key==="Enter"&&!F.shiftKey?(F.preventDefault(),r.onSave?.()):F.key==="Escape"&&r.onEscape?.(F)}function b(F){(F.key==="Enter"||F.key===" ")&&(F.preventDefault(),r.onActivate?.())}var T=Nh(),R=de(T);{var M=F=>{var H=Lh(),Z=we(dt(H),4),G=de(Z);G.__input=se=>r.onInputChange?.(se.currentTarget.value),G.__keydown=D,Gt(G,se=>O(E,se),()=>m(E));var ne=we(G,2);ne.__click=function(...se){r.onSave?.apply(this,se)},Ze(()=>{Lt(G,"placeholder",f()),Ll(G,s()),Ot(G,`width: ${kn}px;`)}),ve(F,H)},N=F=>{var H=Mh(),Z=we(dt(H),4);Z.__click=function(...ne){r.onActivate?.apply(this,ne)},Z.__keydown=b;var G=de(Z);Ze(()=>{Ot(Z,`width: ${kn}px;`),Lt(Z,"aria-label",r.ariaLabel||l()),Vn(G,l())}),ve(F,H)};ze(R,F=>{a()?F(M):F(N,!1)})}Gt(T,F=>O(x,F),()=>m(x)),Ze(()=>Ot(T,h()?"margin-left: 1.5rem;":"")),ve(e,T),wr()}qr(["input","keydown","click"]);function ss(e,r,a={}){const{ignoreElements:s=[],shouldClose:l=()=>!0,checkIgnoreClick:f=null}=a;function h(y){const E=typeof e=="function"?e():e;if(E&&!E.contains(y.target)&&!(f&&f(y))){for(const x of s){let D=null;if(typeof x=="function"?D=x():D=x,D&&D.contains(y.target))return}l()&&r()}}const g=setTimeout(()=>{document.addEventListener("click",h)},0);return()=>{clearTimeout(g),document.removeEventListener("click",h)}}function us(e){return e===""}function Fh(e){return e.trim()===""&&e.length>0}function ls(e){const r=e.trim(),a=Fh(e);return{text:a?"":r,isBlank:a}}var Kh=ke('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),Bh=ke('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),jh=ke('<div class="task-list-wrapper svelte-k6mizj"><ul></ul> <!></div>'),zh=ke("<p>Loading tasks...</p> <!>",1),Uh=ke('<div style="margin: 0; padding: 0;"><div class="flex items-center gap-2" style="margin: 0; padding: 0;"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder list" tabindex="-1" aria-hidden="true"></span> <h2 role="button" tabindex="0" class="cursor-pointer hover:underline" style="margin: 0; padding: 0;"> </h2></div> <!></div> <!> <!>',1);function Vh(e,r){br(r,!0);const a=()=>ma(m(g),"$tasksQuery",s),[s,l]=xs();let f=Tn(r,"allLists",19,()=>[]),h=Tn(r,"stableLists",19,()=>[]),g=pe(null),y=pe(tn([])),E=pe(!1),x=pe(!1),D=pe(null),b=pe(""),T=pe(null),R=pe(null),M=pe(null),N=pe(!1),F=pe(null),H=pe(null),Z=pe(null),G=pe(null),ne=pe(null),se=pe(null);qe(()=>{h().some(U=>U.id===r.listId)&&r.listId?(!m(g)||m(se)!==r.listId)&&(ga(O(g,ba(()=>No(r.listId)),!0),"$tasksQuery",s),O(se,r.listId,!0)):(ga(O(g,null),"$tasksQuery",s),O(se,null))}),qe(()=>{a()&&Array.isArray(a())&&O(y,a().filter(S=>S.status==="unchecked"||S.status==="checked"),!0)}),qe(()=>{if(!m(M))return;async function S(U){const V=U.target;if((U.key==="Enter"||U.key===" ")&&V instanceof HTMLElement&&V.hasAttribute("data-no-drag")){U.preventDefault(),U.stopImmediatePropagation();const he=V.closest("li[data-id]");if(he){const $=parseInt(he.getAttribute("data-id")),He=m(y).find(re=>re.id===$);if(He){const re=V.getBoundingClientRect();O(T,{top:re.top,left:re.left,width:re.width,height:re.height},!0),O(R,V,!0),O(D,$,!0),O(b,He.text,!0),O(x,!0)}}return}if(U.key==="ArrowDown"||U.key==="ArrowUp"){const he=document.activeElement;if(!he)return;const $=he.closest("li[data-id]");if(!$||!m(M).contains($))return;const He=$.getAttribute("data-id");if(!He)return;const re=parseInt(He);if(!m(y).find(be=>be.id===re))return;const Be=m(y).findIndex(be=>be.id===re),De=Be===0,Ce=Be===m(y).length-1;if(U.key==="ArrowDown"&&Ce){U.preventDefault(),U.stopImmediatePropagation();const be=f().findIndex(It=>It.id===r.listId);if(be<f().length-1){const It=f()[be+1].id;await me(re,It)}else await ce(re)}else if(U.key==="ArrowUp"&&De){U.preventDefault(),U.stopImmediatePropagation();const be=f().findIndex(It=>It.id===r.listId);if(be>0){const It=f()[be-1].id;await ye(re,It)}}}}return m(M).addEventListener("keydown",S,!0),()=>{m(M).removeEventListener("keydown",S,!0)}});async function me(S,U){try{const V=await No(U),he=[{id:S},...V];await fi(U,he)}catch(V){console.error("Error moving task to next list:",V)}}async function ye(S,U){try{const he=[...await No(U),{id:S}];await fi(U,he)}catch(V){console.error("Error moving task to previous list:",V)}}async function ce(S){try{const U=await Os();await fi(U,[{id:S}])}catch(U){console.error("Error moving task to new list:",U)}}function ge(S){O(y,S.detail.items,!0)}qe(()=>{if(!m(M))return;async function S(U){if(U.key!=="ArrowDown"&&U.key!=="ArrowUp")return;const V=document.activeElement;if(!V)return;const he=V.closest("li[data-id]");if(!he||!m(M).contains(he))return;const $=he.getAttribute("data-id");if(!$)return;const He=parseInt($);if(!m(y).find(Ce=>Ce.id===He))return;const J=m(y).findIndex(Ce=>Ce.id===He),Be=J===0,De=J===m(y).length-1;if(U.key==="ArrowDown"&&De){U.preventDefault(),U.stopImmediatePropagation(),U.stopPropagation();const Ce=f().findIndex(be=>be.id===r.listId);if(Ce<f().length-1){const be=f()[Ce+1].id;await me(He,be)}else await ce(He)}else if(U.key==="ArrowUp"&&Be){U.preventDefault(),U.stopImmediatePropagation(),U.stopPropagation();const Ce=f().findIndex(be=>be.id===r.listId);if(Ce>0){const be=f()[Ce-1].id;await ye(He,be)}}}return document.addEventListener("keydown",S,!0),()=>{document.removeEventListener("keydown",S,!0)}});async function fe(S){O(y,S.detail.items,!0);try{await fi(r.listId,S.detail.items)}catch(U){console.error("Error updating task order:",U)}}function Ee(){O(E,!0)}async function Ve(S){S.key==="Escape"&&(O(E,!1),r.onInputChange(""),await fr(),await fr(),await new Promise(U=>requestAnimationFrame(U)),await new Promise(U=>setTimeout(U,200)))}qe(()=>{if(m(E))return ss(()=>m(ne),()=>{m(E)&&(O(E,!1),r.onInputChange(""))},{ignoreElements:[],checkIgnoreClick:S=>{if(!m(G))return!1;const U=m(G).querySelector("button");return!!(U&&U.contains(S.target))},shouldClose:()=>m(ne)&&m(ne).value.trim()!==""?!1:!r.newTaskInput||r.newTaskInput.trim()===""})});async function Fe(){let S=r.newTaskInput||"";if(m(ne)&&(S=(m(ne).value||"").toString()),S=(S||"").toString(),us(S)){O(E,!1),r.onInputChange(""),await fr(),await fr(),await new Promise(V=>requestAnimationFrame(V)),await new Promise(V=>setTimeout(V,200));return}const{text:U}=ls(S);try{await ec(r.listId,U),r.onInputChange("")}catch(V){console.error("Error creating task:",V)}}async function et(S,U){try{await ju(S,U==="unchecked"?"checked":"unchecked")}catch(V){console.error("Error updating task status:",V)}}async function tt(S){await ju(S,"archived")}function Me(){if(!m(M))return null;const S=m(M).querySelector("li[data-id]");if(S){const U=S.querySelector('span[role="button"]');if(U&&U instanceof HTMLElement)return U}return null}function kt(S=20,U=10){if(!m(Z))return;const V=(he=0)=>{if(m(G)){const $=m(G).querySelector('span[role="button"]');if($&&$ instanceof HTMLElement){$.focus();return}}he<S&&setTimeout(()=>V(he+1),U)};V()}async function Ke(S){try{if(await tt(S),m(D)===S){const U=m(R);O(x,!1),O(D,null),O(b,""),O(T,null),O(R,null),await fr(),await new Promise(V=>setTimeout(V,10)),setTimeout(()=>{const V=(he=0)=>{const $=Me();$?$.focus():he<20?setTimeout(()=>V(he+1),10):kt(40,10)};V()},20)}}catch(U){console.error("Error archiving task:",U)}}function We(S,U,V){const he=V?.currentTarget||V?.target;if(he){const $=he.getBoundingClientRect();O(T,{top:$.top,left:$.left,width:$.width,height:$.height},!0),O(R,he,!0)}O(D,S,!0),O(b,U,!0),O(x,!0)}function zt(S,U,V){if(V.key==="Enter"||V.key===" "){V.preventDefault(),V.stopImmediatePropagation();const he=V.currentTarget;if(he){const $=he.getBoundingClientRect();O(T,{top:$.top,left:$.left,width:$.width,height:$.height},!0),O(R,he,!0),O(D,S,!0),O(b,U,!0),O(x,!0)}}}async function Ut(S,U){try{await _h(S,U),O(x,!1);const V=m(R);O(D,null),O(b,""),O(T,null),O(R,null),V&&V instanceof HTMLElement&&setTimeout(()=>{V.focus()},0)}catch(V){console.error("Error updating task text:",V)}}function rn(){const S=m(R);O(x,!1),O(D,null),O(b,""),O(T,null),O(R,null),S&&S instanceof HTMLElement&&setTimeout(()=>{S.focus()},0)}async function ht(S){m(R),await Ke(S),setTimeout(()=>{if(typeof document>"u")return;const U=document.activeElement;m(Z)&&(!U||!m(Z).contains(U))&&kt(20,10)},10)}function rt(S){const U=S?.currentTarget||S?.target;if(U){const V=U.getBoundingClientRect();O(F,{top:V.top,left:V.left,width:V.width,height:V.height},!0),O(H,U,!0)}O(N,!0)}function Y(S){if(S.key==="Enter"||S.key===" "){S.preventDefault(),S.stopPropagation(),S.stopImmediatePropagation();const U=S.currentTarget;if(U){const V=U.getBoundingClientRect();O(F,{top:V.top,left:V.left,width:V.width,height:V.height},!0),O(H,U,!0),O(N,!0)}}}async function _e(S,U){try{await mh(S,U),O(N,!1);const V=m(H);O(F,null),O(H,null),V&&V instanceof HTMLElement&&setTimeout(()=>{V.focus()},0)}catch(V){console.error("Error updating list name:",V)}}function Re(){const S=m(H);O(N,!1),O(F,null),O(H,null),S&&S instanceof HTMLElement&&setTimeout(()=>{S.focus()},0)}async function lt(S){try{await xh(S),await wh(S)}catch(U){console.error("Error archiving list:",U)}}var At=Uh(),Se=dt(At),Ge=de(Se),Dt=we(de(Ge),2);Dt.__click=rt,Dt.__keydown=Y;var pt=de(Dt),at=we(Ge,2);{var yt=S=>{var U=jh(),V=de(U);Rr(V,21,()=>m(y),re=>re.id,(re,J)=>{var Be=Bh(),De=we(de(Be),2);De.__change=()=>et(m(J).id,m(J).status);var Ce=we(De,2);Ce.__click=qt=>We(m(J).id,m(J).text,qt),Ce.__keydown=qt=>zt(m(J).id,m(J).text,qt);var be=de(Ce),It=we(Ce,2);{var ot=qt=>{var an=Kh();an.__click=()=>Ke(m(J).id),Ze(()=>Lt(an,"aria-label",`Archive task: ${m(J).text||"blank task"}`)),ve(qt,an)};ze(It,qt=>{m(J).status==="checked"&&qt(ot)})}Ze(()=>{Lt(Be,"data-id",m(J).id),Ml(De,m(J).status==="checked"),Lt(De,"aria-label",`Mark task "${m(J).text||"blank task"}" as ${m(J).status==="checked"?"unchecked":"checked"}`),qo(Ce,1,Rl(m(J).status==="checked"?"line-through cursor-pointer hover:underline break-words":"cursor-pointer hover:underline break-words")),Ot(Ce,`width: ${kn}px;`),Lt(Ce,"aria-label",`Edit task: ${m(J).text||"blank task"}`),Vn(be,m(J).text||"")}),ve(re,Be)}),Gt(V,re=>O(M,re),()=>m(M)),Yo(V,(re,J)=>as?.(re,J),()=>({items:m(y),type:"task"}));var he=we(V,2);{var $=re=>{Ko(re,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:Fe,onEscape:Ve,onActivate:Ee,buttonText:"Add your first task",placeholder:"Add new task...",get ariaLabel(){return`Add your first task to ${r.listName??""}`},marginLeft:!0,get isInputActive(){return m(E)},set isInputActive(J){O(E,J,!0)},get containerElement(){return m(G)},set containerElement(J){O(G,J,!0)},get textareaElement(){return m(ne)},set textareaElement(J){O(ne,J,!0)}})},He=re=>{Ko(re,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:Fe,onEscape:Ve,onActivate:Ee,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!0,get isInputActive(){return m(E)},set isInputActive(J){O(E,J,!0)},get containerElement(){return m(G)},set containerElement(J){O(G,J,!0)},get textareaElement(){return m(ne)},set textareaElement(J){O(ne,J,!0)}})};ze(he,re=>{m(y).length===0?re($):re(He,!1)})}Ze(()=>qo(V,1,`space-y-2 ${m(y).length===0?"empty-drop-zone":""}`,"svelte-k6mizj")),Cr("consider",V,ge),Cr("finalize",V,fe),ve(S,U)},Qe=S=>{var U=zh(),V=we(dt(U),2);Ko(V,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:Fe,onEscape:Ve,onActivate:Ee,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!0,get isInputActive(){return m(E)},set isInputActive(he){O(E,he,!0)},get containerElement(){return m(G)},set containerElement(he){O(G,he,!0)},get textareaElement(){return m(ne)},set textareaElement(he){O(ne,he,!0)}}),ve(S,U)};ze(at,S=>{m(g)&&a()!==void 0?S(yt):S(Qe,!1)})}Gt(Se,S=>O(Z,S),()=>m(Z));var mt=we(Se,2);Ih(mt,{get isOpen(){return m(x)},get taskId(){return m(D)},get taskText(){return m(b)},get taskPosition(){return m(T)},onSave:Ut,onCancel:rn,onArchive:ht});var Xe=we(mt,2);Rh(Xe,{get isOpen(){return m(N)},get listId(){return r.listId},get listName(){return r.listName},get listPosition(){return m(F)},onSave:_e,onCancel:Re,onArchive:lt}),Ze(()=>{Lt(Se,"data-list-id",r.listId),Lt(Dt,"aria-label",`Rename list: ${r.listName}`),Vn(pt,r.listName)}),ve(e,At),wr(),l()}qr(["click","keydown","change"]);var Hh=ke("<p>Loading...</p>"),Wh=ke("<p>Loading data...</p>"),Gh=ke("<p>No archived lists or tasks</p>"),Yh=ke('<span class="text-sm text-gray-500"> </span>'),qh=ke('<span class="text-xs bg-gray-200 px-2 py-1 rounded">[List Archived]</span> <!>',1),Zh=ke('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),Qh=ke('<p class="text-sm text-gray-500 italic">No archived tasks</p>'),Xh=ke('<li class="flex items-center gap-3 flex-wrap"><span class="line-through"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button></li>'),$h=ke('<div class="mb-4"><h4 class="text-sm font-medium text-gray-600 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),Jh=ke('<div class="border-b border-gray-200 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <div class="border-b border-gray-200 pb-4"><!></div>',1),ep=ke('<div class="grid grid-cols-2 gap-4"></div>'),tp=ke('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function np(e,r){br(r,!0);const a=()=>ma(m(g),"$listsQuery",l),s=()=>ma(m(h),"$archivedTasksQuery",l),[l,f]=xs();let h=pe(null),g=pe(null);qe(()=>{ga(O(h,ba(()=>gh()),!0),"$archivedTasksQuery",l),ga(O(g,ba(()=>ph()),!0),"$listsQuery",l)});function y(F){return F?new Date(F).toDateString():null}function E(F){return F?new Date(F).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let x=Wt(()=>{const F=m(h)?s():null,H=m(g)?a():null;if(!H||!Array.isArray(H))return[];const Z={};if(F&&Array.isArray(F))for(const ne of F)Z[ne.listId]||(Z[ne.listId]=[]),Z[ne.listId].push(ne);const G=[];for(const ne of H){const se=ne.archivedAt!=null,me=Z[ne.id]&&Z[ne.id].length>0;if(se||me){const ye=Z[ne.id]||[],ce={};for(const ge of ye){const fe=y(ge.archivedAt)||"Unknown";ce[fe]||(ce[fe]=[]),ce[fe].push(ge)}G.push({list:ne,listArchiveDate:ne.archivedAt?y(ne.archivedAt):null,tasksByDate:ce,hasTasks:ye.length>0})}}return G.sort((ne,se)=>{if(ne.list.order!==se.list.order)return ne.list.order-se.list.order;const me=ne.list.name??"Unnamed list",ye=se.list.name??"Unnamed list";return me.localeCompare(ye)}),G});function D(F){return F.sort((H,Z)=>{if(H==="Unknown")return 1;if(Z==="Unknown")return-1;const G=new Date(H).getTime();return new Date(Z).getTime()-G})}async function b(F){try{(await bh(F)).listRestored&&console.log("Task and its list have been restored")}catch(H){console.error("Error restoring task:",H)}}var T=tp(),R=we(de(T),2);{var M=F=>{var H=Hh();ve(F,H)},N=F=>{var H=qn(),Z=dt(H);{var G=se=>{var me=Wh();ve(se,me)},ne=se=>{var me=qn(),ye=dt(me);{var ce=fe=>{var Ee=Gh();ve(fe,Ee)},ge=fe=>{var Ee=ep();Rr(Ee,21,()=>m(x),So,(Ve,Fe)=>{const et=Wt(()=>m(Fe).list),tt=Wt(()=>m(et).name??"Unnamed list"),Me=Wt(()=>m(et).archivedAt!=null),kt=Wt(()=>m(Fe).listArchiveDate);var Ke=Jh(),We=dt(Ke),zt=de(We),Ut=de(zt),rn=de(Ut),ht=we(Ut,2);{var rt=Se=>{var Ge=qh(),Dt=we(dt(Ge),2);{var pt=at=>{var yt=Yh(),Qe=de(yt);Ze(mt=>Vn(Qe,`- ${mt??""}`),[()=>E(m(kt))]),ve(at,yt)};ze(Dt,at=>{m(kt)&&at(pt)})}ve(Se,Ge)},Y=Se=>{var Ge=Zh();ve(Se,Ge)};ze(ht,Se=>{m(Me)?Se(rt):Se(Y,!1)})}var _e=we(We,2),Re=de(_e);{var lt=Se=>{var Ge=Qh();ve(Se,Ge)},At=Se=>{var Ge=qn(),Dt=dt(Ge);Rr(Dt,17,()=>D(Object.keys(m(Fe).tasksByDate)),So,(pt,at)=>{const yt=Wt(()=>m(Fe).tasksByDate[m(at)]);var Qe=$h(),mt=de(Qe),Xe=de(mt),S=we(mt,2);Rr(S,21,()=>m(yt),So,(U,V)=>{var he=Xh(),$=de(he),He=de($),re=we($,2);re.__click=()=>b(m(V).id),Ze(()=>Vn(He,m(V).text)),ve(U,he)}),Ze(U=>Vn(Xe,U),[()=>m(at)==="Unknown"?"Unknown Date":E(m(at))]),ve(pt,Qe)}),ve(Se,Ge)};ze(Re,Se=>{m(Fe).hasTasks?Se(At,!1):Se(lt)})}Ze(()=>Vn(rn,m(tt))),ve(Ve,Ke)}),ve(fe,Ee)};ze(ye,fe=>{m(x).length===0?fe(ce):fe(ge,!1)},!0)}ve(se,me)};ze(Z,se=>{!s()||!a()?se(G):se(ne,!1)},!0)}ve(F,H)};ze(R,F=>{!m(h)||!m(g)?F(M):F(N,!1)})}Ze(()=>Ot(T,`width: ${os}px;`)),ve(e,T),wr(),f()}qr(["click"]);var rp=ke("<p>Loading...</p>"),ip=ke('<h2><div class="flex items-center gap-2"><input type="text" class="create-list-input cursor-pointer hover:underline svelte-1n46o8q" placeholder="List name..." aria-label="Enter list name"/> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" aria-label="Create list">Save</button></div></h2>'),ap=ke('<h2 role="button" tabindex="0" class="cursor-pointer hover:underline" aria-label="Create your first list">Create Your First List</h2>'),op=ke('<div class="mt-4"><span class="inline-block px-4 py-2 bg-gray-100 border border-gray-300 rounded cursor-pointer hover:bg-gray-200 text-sm" role="button" tabindex="0" aria-label="Add your first task">Add your first task</span></div>'),sp=ke('<div class="mt-4"><textarea class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none" placeholder="Add new task..." aria-label="Enter task text"></textarea></div>'),up=ke('<div class="print:hidden"><!> <!></div>'),lp=ke('<div class="list-item-wrapper svelte-1n46o8q"><!></div>'),cp=ke('<h2 class="mt-4 print:hidden"><div class="flex items-center gap-2"><input type="text" class="create-list-input cursor-pointer hover:underline svelte-1n46o8q" placeholder="List name..." aria-label="Enter list name"/> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" aria-label="Create list">Save</button></div></h2>'),fp=ke('<h2 role="button" tabindex="0" class="cursor-pointer hover:underline print:hidden mt-4" aria-label="Create new list">Create new list</h2>'),dp=ke('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" disabled class="cursor-pointer opacity-50" aria-hidden="true" tabindex="-1"/> <span> </span></li>'),vp=ke('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden mt-2" style="margin-left: 1.5rem;"><span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea placeholder="Add new task..." class="flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div></div>'),hp=ke('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden mt-2" style="margin-left: 1.5rem;"><span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words" role="button" tabindex="0" aria-label="Add your first task">Add your first task</span></div>'),pp=ke('<div></div> <!> <div class="create-list-drop-zone print:hidden svelte-1n46o8q"><ul class="create-list-drop-zone-ul svelte-1n46o8q"></ul></div> <!>',1),yp=ke('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><div class="w-full h-full p-4 overflow-auto"><!></div></div></div> <!></main>');function mp(e,r){br(r,!0);const a=()=>ma(f,"$lists",s),[s,l]=xs();let f=ba(()=>hh()),h=Wt(()=>a()||[]),g=pe(tn([])),y=pe(tn({})),E=pe(!1),x=pe(""),D=pe(null),b=pe(!1),T=pe(""),R=pe(null),M=pe(tn([])),N=pe(null);qe(()=>{if(a()&&Array.isArray(a())&&a().length>0&&Object.keys(m(y)).length===0){const Y={};for(const _e of a())Y[_e.id]="";O(y,Y,!0)}}),qe(()=>{if(a()&&Array.isArray(a())&&a().length>0){const Y={...m(y)};let _e=!1;for(const Re of a())Re.id in Y||(Y[Re.id]="",_e=!0);_e&&O(y,Y,!0)}}),qe(()=>{a()&&Array.isArray(a())?O(g,a().map(Y=>({id:Y.id,name:Y.name,order:Y.order})),!0):O(g,[],!0)});function F(Y,_e){m(y)[Y]=_e}function H(){window.print()}async function Z(Y){await fr();for(let _e=0;_e<zu;_e++){const Re=document.querySelector(`[data-list-id="${Y}"]`);if(!Re){await new Promise(Se=>setTimeout(Se,Fo));continue}const lt=Re.querySelector(".add-task-container");if(!lt){await new Promise(Se=>setTimeout(Se,Fo));continue}const At=lt.querySelector('span[role="button"]');if(!At||!(At instanceof HTMLElement)){await new Promise(Se=>setTimeout(Se,Fo));continue}At.click();return}console.warn(`Could not activate Add Task input for list ${Y} after ${zu} attempts`)}function G(){O(E,!0)}function ne(Y){(Y.key==="Enter"||Y.key===" ")&&(Y.preventDefault(),Y.stopPropagation(),G())}function se(Y){Y.key==="Escape"&&(O(E,!1),O(x,""))}qe(()=>{if(m(E))return ss(m(D),()=>{m(E)&&(O(E,!1),O(x,""))},{checkIgnoreClick:Y=>{const _e=Y.target.closest("button");return _e&&_e.textContent?.trim()==="Save"},shouldClose:()=>!m(x)||m(x).trim()===""})}),qe(()=>{m(E)&&m(D)&&setTimeout(()=>{m(D)?.focus()},0)});async function me(){const Y=m(x)||"";if(us(Y)){O(E,!1),O(x,"");return}const{text:_e,isBlank:Re}=ls(Y);if(Re){O(E,!1),O(x,"");return}try{const lt=await yh(_e);O(x,""),O(E,!1),await Z(lt)}catch(lt){console.error("Error creating list:",lt)}}function ye(){O(b,!0)}function ce(Y){Y.key==="Escape"&&(O(b,!1),O(T,""))}qe(()=>{if(m(b))return ss(m(R),()=>{m(b)&&(O(b,!1),O(T,""))},{checkIgnoreClick:Y=>{const _e=Y.target.closest("button");return _e&&_e.textContent?.trim()==="Save"},shouldClose:()=>!m(T)||m(T).trim()===""})}),qe(()=>{m(b)&&m(R)&&setTimeout(()=>{m(R)?.focus(),m(R)instanceof HTMLTextAreaElement&&(m(R).style.height="auto",m(R).style.height=`${Math.min(m(R).scrollHeight,yr)}px`)},0)}),qe(()=>{if(m(R)&&m(R)instanceof HTMLTextAreaElement){const Y=()=>{m(R).style.height="auto",m(R).style.height=`${Math.min(m(R).scrollHeight,yr)}px`};return m(R).addEventListener("input",Y),()=>{m(R).removeEventListener("input",Y)}}});async function ge(){const Y=m(T)||"";if(us(Y)){O(b,!1),O(T,"");return}const{text:_e}=ls(Y);try{const Re=await ec(null,_e);O(T,""),O(b,!1);const At=(await Ae.tasks.get(Re))?.listId;At&&await Z(At)}catch(Re){console.error("Error creating task in unnamed list:",Re)}}function fe(Y){O(M,Y.detail.items,!0)}async function Ee(Y){if(O(M,Y.detail.items,!0),Y.detail.items&&Y.detail.items.length>0)try{const _e=await Os();await fi(_e,Y.detail.items),O(M,[],!0)}catch(_e){console.error("Error creating list from dropped task:",_e),O(M,[],!0)}}function Ve(Y){return Y&&(Y.isDndShadowItem===!0||typeof Y.id=="string"&&Y.id.startsWith("id:dnd-shadow-placeholder-"))}function Fe(Y){O(g,Y.detail.items,!0)}async function et(Y){const _e=Y.detail.items.filter(Re=>!Ve(Re));O(g,_e,!0);try{await Th(_e)}catch(Re){console.error("Error updating list order:",Re)}}var tt=yp(),Me=de(tt),kt=de(Me);kt.__click=H;var Ke=we(Me,2),We=de(Ke),zt=de(We),Ut=de(zt);{var rn=Y=>{var _e=rp();ve(Y,_e)},ht=Y=>{var _e=qn(),Re=dt(_e);{var lt=Se=>{var Ge=up(),Dt=de(Ge);{var pt=Xe=>{var S=ip(),U=de(S),V=de(U);V.__keydown=$=>{$.key==="Enter"&&!$.shiftKey?($.preventDefault(),me()):$.key==="Escape"&&se($)},Gt(V,$=>O(D,$),()=>m(D));var he=we(V,2);he.__click=me,hi(V,()=>m(x),$=>O(x,$)),ve(Xe,S)},at=Xe=>{var S=ap();S.__click=G,S.__keydown=ne,ve(Xe,S)};ze(Dt,Xe=>{m(E)?Xe(pt):Xe(at,!1)})}var yt=we(Dt,2);{var Qe=Xe=>{var S=op(),U=de(S);U.__click=ye,U.__keydown=V=>{(V.key==="Enter"||V.key===" ")&&(V.preventDefault(),ye())},Ze(()=>Ot(U,`width: ${kn}px;`)),ve(Xe,S)},mt=Xe=>{var S=sp(),U=de(S);U.__keydown=V=>{V.key==="Enter"&&!V.shiftKey?(V.preventDefault(),ge()):V.key==="Escape"&&ce(V)},Gt(U,V=>O(R,V),()=>m(R)),Ze(()=>Ot(U,`width: ${kn}px; max-height: ${yr}px;`)),hi(U,()=>m(T),V=>O(T,V)),ve(Xe,S)};ze(yt,Xe=>{m(b)?Xe(mt,!1):Xe(Qe)})}ve(Se,Ge)},At=Se=>{var Ge=qn(),Dt=dt(Ge);{var pt=at=>{var yt=pp(),Qe=dt(yt);Rr(Qe,21,()=>m(g),re=>re.id,(re,J)=>{const Be=Wt(()=>Ve(m(J))),De=Wt(()=>m(Be)?m(h).find(ot=>ot.id===m(J).id):m(J));var Ce=lp(),be=de(Ce);{var It=ot=>{{let qt=Wt(()=>m(De).name??"Unnamed list"),an=Wt(()=>m(y)[m(De).id]||"");Vh(ot,{get listId(){return m(De).id},get listName(){return m(qt)},get newTaskInput(){return m(an)},onInputChange:Si=>F(m(De).id,Si),get allLists(){return a()},get stableLists(){return m(h)}})}};ze(be,ot=>{m(De)&&ot(It)})}Ze(()=>Lt(Ce,"data-id",m(J).id)),ve(re,Ce)}),Yo(Qe,(re,J)=>as?.(re,J),()=>({items:m(g),type:"list"}));var mt=we(Qe,2);{var Xe=re=>{var J=cp(),Be=de(J),De=de(Be);De.__keydown=be=>{be.key==="Enter"&&!be.shiftKey?(be.preventDefault(),me()):be.key==="Escape"&&se(be)},Gt(De,be=>O(D,be),()=>m(D));var Ce=we(De,2);Ce.__click=me,hi(De,()=>m(x),be=>O(x,be)),ve(re,J)},S=re=>{var J=fp();J.__click=G,J.__keydown=ne,ve(re,J)};ze(mt,re=>{m(E)?re(Xe):re(S,!1)})}var U=we(mt,2),V=de(U);Rr(V,21,()=>m(M),re=>re.id,(re,J)=>{var Be=dp(),De=we(de(Be),2),Ce=we(De,2),be=de(Ce);Ze(()=>{Lt(Be,"data-id",m(J).id),Ml(De,m(J).status==="checked"),qo(Ce,1,Rl(m(J).status==="checked"?"line-through break-words":"break-words")),Ot(Ce,`width: ${kn}px;`),Vn(be,m(J).text||"")}),ve(re,Be)}),Gt(V,re=>O(N,re),()=>m(N)),Yo(V,(re,J)=>as?.(re,J),()=>({items:m(M),type:"task"}));var he=we(U,2);{var $=re=>{var J=vp(),Be=we(de(J),4),De=de(Be);De.__input=be=>O(T,be.currentTarget.value,!0),De.__keydown=be=>{be.key==="Enter"&&!be.shiftKey?(be.preventDefault(),ge()):be.key==="Escape"&&ce(be)},Gt(De,be=>O(R,be),()=>m(R));var Ce=we(De,2);Ce.__click=ge,Ze(()=>{Ll(De,m(T)),Ot(De,`width: ${kn}px;`)}),ve(re,J)},He=re=>{var J=hp(),Be=we(de(J),4);Be.__click=ye,Be.__keydown=De=>{(De.key==="Enter"||De.key===" ")&&(De.preventDefault(),ye())},Ze(()=>Ot(Be,`width: ${kn}px;`)),ve(re,J)};ze(he,re=>{m(b)?re($):re(He,!1)})}Cr("consider",Qe,Fe),Cr("finalize",Qe,et),Cr("consider",V,fe),Cr("finalize",V,Ee),ve(at,yt)};ze(Dt,at=>{Array.isArray(a())&&at(pt)},!0)}ve(Se,Ge)};ze(Re,Se=>{Array.isArray(a())&&a().length===0?Se(lt):Se(At,!1)},!0)}ve(Y,_e)};ze(Ut,Y=>{a()===void 0||a()===null?Y(rn):Y(ht,!1)})}var rt=we(Ke,2);np(rt,{}),Ze(()=>{Ot(Me,`width: ${os}px;`),Ot(Ke,`width: ${os}px; height: ${kh}px;`)}),ve(e,tt),wr(),l()}qr(["click","keydown","input"]);const gp=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],_p=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function bp(){try{if(await Ae.lists.count()>0)return;await Ae.lists.bulkAdd(gp),await Ae.tasks.bulkAdd(_p),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await bp().catch(console.error),Bd(mp,{target:document.getElementById("app")})))();
