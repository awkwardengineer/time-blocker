(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(l){if(l.ep)return;l.ep=!0;const f=a(l);fetch(l.href,f)}})();const pf="production",ie=!pf.toLowerCase().startsWith("prod");var Fu=Array.isArray,mf=Array.prototype.indexOf,as=Array.from,qn=Object.defineProperty,fr=Object.getOwnPropertyDescriptor,Bu=Object.getOwnPropertyDescriptors,yf=Object.prototype,gf=Array.prototype,os=Object.getPrototypeOf,lu=Object.isExtensible;const ca=()=>{};function _f(e){for(var r=0;r<e.length;r++)e[r]()}function Ku(){var e,r,a=new Promise((s,l)=>{e=s,r=l});return{promise:a,resolve:e,reject:r}}const yt=2,ss=4,us=8,bf=1<<24,Dn=16,In=32,gr=64,Oa=128,sn=512,At=1024,jt=2048,Sn=4096,Ht=8192,Tn=16384,ls=32768,Mr=65536,fa=1<<17,ju=1<<18,Ur=1<<19,wf=1<<20,Zn=32768,Fo=1<<21,Ca=1<<22,Un=1<<23,kn=Symbol("$state"),Ef=Symbol("legacy props"),xf=Symbol(""),zu=Symbol("proxy path"),Sr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Tf(){if(ie){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function cu(){if(ie){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function kf(){if(ie){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Af(e){if(ie){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Df(){if(ie){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function If(e){if(ie){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function Sf(){if(ie){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Of(e){if(ie){const r=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Cf(e){if(ie){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Rf(){if(ie){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Pf(){if(ie){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Lf(){if(ie){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Mf(){if(ie){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Gu=1,Uu=2,Vu=4,Nf=8,Ff=16,Bf=1,Kf=4,jf=8,zf=16,Gf=1,Uf=2,wt=Symbol(),Vf=Symbol("filename"),Hf="http://www.w3.org/1999/xhtml";var Hu="font-weight: bold",Wu="font-weight: normal";function Io(e){ie?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Hu,Wu):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Wf(){ie?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Hu,Wu):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Yu(e){return e===this.v}function qu(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Zu(e){return!qu(e,this.v)}let Yf=!1;function dn(e,r){return e.label=r,Qu(e.v,r),e}function Qu(e,r){return e?.[zu]?.(r),e}function qf(e){const r=new Error,a=Zf();return a.length===0?null:(a.unshift(`
`),qn(r,"stack",{value:a.join(`
`)}),qn(r,"name",{value:e}),r)}function Zf(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const a=r.split(`
`),s=[];for(let l=0;l<a.length;l++){const f=a[l],h=f.replaceAll("\\","/");if(f.trim()!=="Error"){if(f.includes("validate_each_keys"))return[];h.includes("svelte/src/internal")||h.includes("node_modules/.vite")||s.push(f)}}return s}let Ft=null;function Nr(e){Ft=e}let pi=null;function da(e){pi=e}let Ei=null;function fu(e){Ei=e}function _r(e,r=!1,a){Ft={p:Ft,i:!1,c:null,e:null,s:e,x:null,l:null},ie&&(Ft.function=a,Ei=a)}function br(e){var r=Ft,a=r.e;if(a!==null){r.e=null;for(var s of a)dl(s)}return r.i=!0,Ft=r.p,ie&&(Ei=Ft?.function??null),{}}function Xu(){return!0}let cr=[];function $u(){var e=cr;cr=[],_f(e)}function Vr(e){if(cr.length===0&&!fi){var r=cr;queueMicrotask(()=>{r===cr&&$u()})}cr.push(e)}function Qf(){for(;cr.length>0;)$u()}const Bo=new WeakMap;function Ju(e){var r=Fe;if(r===null)return Le.f|=Un,e;if(ie&&e instanceof Error&&!Bo.has(e)&&Bo.set(e,Xf(e,r)),(r.f&ls)===0){if((r.f&Oa)===0)throw ie&&!r.parent&&e instanceof Error&&el(e),e;r.b.error(e)}else Fr(e,r)}function Fr(e,r){for(;r!==null;){if((r.f&Oa)!==0)try{r.b.error(e);return}catch(a){e=a}r=r.parent}throw ie&&e instanceof Error&&el(e),e}function Xf(e,r){const a=fr(e,"message");if(!(a&&!a.configurable)){for(var s=ds?"  ":"	",l=`
${s}in ${r.fn?.name||"<unknown>"}`,f=r.ctx;f!==null;)l+=`
${s}in ${f.function?.[Vf].split("/").pop()}`,f=f.p;return{message:e.message+`
${l}
`,stack:e.stack?.split(`
`).filter(h=>!h.includes("svelte/src/internal")).join(`
`)}}}function el(e){const r=Bo.get(e);r&&(qn(e,"message",{value:r.message}),qn(e,"stack",{value:r.stack}))}const ta=new Set;let Ke=null,aa=null,Xt=null,Zt=[],Ra=null,Ko=!1,fi=!1;class yn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){Zt=[],aa=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of r)this.#o(s,a);this.is_fork||this.#c(),this.is_deferred()?(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects)):(aa=this,Ke=null,du(a.render_effects),du(a.effects),aa=null,this.#u?.resolve()),Xt=null}#o(r,a){r.f^=At;for(var s=r.first;s!==null;){var l=s.f,f=(l&(In|gr))!==0,h=f&&(l&At)!==0,m=h||(l&Ht)!==0||this.skipped_effects.has(s);if((s.f&Oa)!==0&&s.b?.is_pending()&&(a={parent:a,effect:s,effects:[],render_effects:[],block_effects:[]}),!m&&s.fn!==null){f?s.f^=At:(l&ss)!==0?a.effects.push(s):Ti(s)&&((s.f&Dn)!==0&&a.block_effects.push(s),gi(s));var g=s.first;if(g!==null){s=g;continue}}var x=s.parent;for(s=s.next;s===null&&x!==null;)x===a.effect&&(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects),a=a.parent),s=x.next,x=x.parent}}#s(r){for(const a of r)((a.f&jt)!==0?this.#a:this.#i).push(a),this.#l(a.deps),Dt(a,At)}#l(r){if(r!==null)for(const a of r)(a.f&yt)===0||(a.f&Zn)===0||(a.f^=Zn,this.#l(a.deps))}capture(r,a){this.previous.has(r)||this.previous.set(r,a),(r.f&Un)===0&&(this.current.set(r,r.v),Xt?.set(r,r.v))}activate(){Ke=this,this.apply()}deactivate(){Ke===this&&(Ke=null,Xt=null)}flush(){if(this.activate(),Zt.length>0){if(tl(),Ke!==null&&Ke!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(ta.size>1){this.previous.clear();var r=Xt,a=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const f of ta){if(f===this){a=!1;continue}const h=[];for(const[g,x]of this.current){if(f.current.has(g))if(a&&x!==f.current.get(g))f.current.set(g,x);else continue;h.push(g)}if(h.length===0)continue;const m=[...f.current.keys()].filter(g=>!this.current.has(g));if(m.length>0){var l=Zt;Zt=[];const g=new Set,x=new Map;for(const E of h)nl(E,m,g,x);if(Zt.length>0){Ke=f,f.apply();for(const E of Zt)f.#o(E,s);f.deactivate()}Zt=l}}Ke=null,Xt=r}this.committed=!0,ta.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)Dt(r,jt),mr(r);for(const r of this.#i)Dt(r,Sn),mr(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=Ku()).promise}static ensure(){if(Ke===null){const r=Ke=new yn;ta.add(Ke),fi||yn.enqueue(()=>{Ke===r&&r.flush()})}return Ke}static enqueue(r){Vr(r)}apply(){}}function $f(e){var r=fi;fi=!0;try{for(var a;;){if(Qf(),Zt.length===0&&(Ke?.flush(),Zt.length===0))return Ra=null,a;tl()}}finally{fi=r}}function tl(){var e=Hn;Ko=!0;var r=ie?new Set:null;try{var a=0;for(pa(!0);Zt.length>0;){var s=yn.ensure();if(a++>1e3){if(ie){var l=new Map;for(const h of s.current.keys())for(const[m,g]of h.updated??[]){var f=l.get(m);f||(f={error:g.error,count:0},l.set(m,f)),f.count+=g.count}for(const h of l.values())h.error&&console.error(h.error)}Jf()}if(s.process(Zt),Vn.clear(),ie)for(const h of s.current.keys())r.add(h)}}finally{if(Ko=!1,pa(e),Ra=null,ie)for(const h of r)h.updated=null}}function Jf(){try{Sf()}catch(e){ie&&qn(e,"stack",{value:""}),Fr(e,Ra)}}let En=null;function du(e){var r=e.length;if(r!==0){for(var a=0;a<r;){var s=e[a++];if((s.f&(Tn|Ht))===0&&Ti(s)&&(En=new Set,gi(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?ml(s):s.fn=null),En?.size>0)){Vn.clear();for(const l of En){if((l.f&(Tn|Ht))!==0)continue;const f=[l];let h=l.parent;for(;h!==null;)En.has(h)&&(En.delete(h),f.push(h)),h=h.parent;for(let m=f.length-1;m>=0;m--){const g=f[m];(g.f&(Tn|Ht))===0&&gi(g)}}En.clear()}}En=null}}function nl(e,r,a,s){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const l of e.reactions){const f=l.f;(f&yt)!==0?nl(l,r,a,s):(f&(Ca|Dn))!==0&&(f&jt)===0&&rl(l,r,s)&&(Dt(l,jt),mr(l))}}function rl(e,r,a){const s=a.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const l of e.deps){if(r.includes(l))return!0;if((l.f&yt)!==0&&rl(l,r,a))return a.set(l,!0),!0}return a.set(e,!1),!1}function mr(e){for(var r=Ra=e;r.parent!==null;){r=r.parent;var a=r.f;if(Ko&&r===Fe&&(a&Dn)!==0&&(a&ju)===0)return;if((a&(gr|In))!==0){if((a&At)===0)return;r.f^=At}}Zt.push(r)}function ed(e){let r=0,a=yr(0),s;return ie&&dn(a,"createSubscriber version"),()=>{mi()&&(y(a),Ma(()=>(r===0&&(s=Hr(()=>e(()=>di(a)))),r+=1,()=>{Vr(()=>{r-=1,r===0&&(s?.(),s=void 0,di(a))})})))}}var td=Mr|Ur|Oa;function nd(e,r,a){new rd(e,r,a)}class rd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#_=ed(()=>(this.#d=yr(this.#f),ie&&dn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,a,s){this.#t=r,this.#n=a,this.#u=s,this.parent=Fe.b,this.#e=!!this.#n.pending,this.#a=vs(()=>{Fe.b=this;{var l=this.#y();try{this.#i=Qt(()=>s(l))}catch(f){this.error(f)}this.#h>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},td)}#b(){try{this.#i=Qt(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=Qt(()=>r(this.#t)),yn.enqueue(()=>{var a=this.#y();this.#i=this.#p(()=>(yn.ensure(),Qt(()=>this.#u(a)))),this.#h>0?this.#m():(Rr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#y(){var r=this.#t;return this.#e&&(this.#c=Qn(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var a=Fe,s=Le,l=Ft;on(this.#a),Nt(this.#a),Nr(this.#a.ctx);try{return r()}catch(f){return Ju(f),null}finally{on(a),Nt(s),Nr(l)}}#m(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),_l(this.#i,this.#l)),this.#o===null&&(this.#o=Qt(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#e=!1,this.#o&&Rr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&Kr(this.#d,this.#f)}get_effect_pending(){return this.#_(),y(this.#d)}error(r){var a=this.#n.onerror;let s=this.#n.failed;if(this.#v||!a&&!s)throw r;this.#i&&(Bt(this.#i),this.#i=null),this.#o&&(Bt(this.#o),this.#o=null),this.#s&&(Bt(this.#s),this.#s=null);var l=!1,f=!1;const h=()=>{if(l){Wf();return}l=!0,f&&Mf(),yn.ensure(),this.#f=0,this.#s!==null&&Rr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,Qt(()=>this.#u(this.#t)))),this.#h>0?this.#m():this.#e=!1};var m=Le;try{Nt(null),f=!0,a?.(r,h),f=!1}catch(g){Fr(g,this.#a&&this.#a.parent)}finally{Nt(m)}s&&Vr(()=>{this.#s=this.#p(()=>{yn.ensure(),this.#v=!0;try{return Qt(()=>{s(this.#t,()=>r,()=>h)})}catch(g){return Fr(g,this.#a.parent),null}finally{this.#v=!1}})})}}function oa(e,r){return r}function id(e,r,a){for(var s=[],l=r.length,f=0;f<l;f++)ps(r[f].e,s,!0);yl(s,()=>{var h=s.length===0&&a!==null;if(h){var m=a,g=m.parentNode;gd(g),g.append(m),e.items.clear(),hn(e,r[0].prev,r[l-1].next)}for(var x=0;x<l;x++){var E=r[x];h||(e.items.delete(E.k),hn(e,E.prev,E.next)),Bt(E.e,!h)}e.first===r[0]&&(e.first=r[0].prev)})}function dr(e,r,a,s,l,f=null){var h=e,m=new Map,g=null,x=(r&Vu)!==0,E=(r&Gu)!==0,D=(r&Uu)!==0;if(x){var b=e;h=b.appendChild(Qn())}var T=null,N=il(()=>{var W=a();return Fu(W)?W:W==null?[]:as(W)}),P,F=!0;function M(){ad(Y,P,h,r,s),T!==null&&(P.length===0?(T.fragment?(h.before(T.fragment),T.fragment=null):ms(T.effect),U.first=T.effect):Rr(T.effect,()=>{T=null}))}var U=vs(()=>{P=y(N);for(var W=P.length,ne=new Set,ue=Ke,Ee=null,_e=fl(),de=0;de<W;de+=1){var be=P[de],ve=s(be,de),pe=F?null:m.get(ve);pe?(E&&Kr(pe.v,be),D?Kr(pe.i,de):pe.i=de,_e&&ue.skipped_effects.delete(pe.e)):(pe=od(F?h:null,Ee,be,ve,de,l,r,a),F&&(pe.o=!0,Ee===null?g=pe:Ee.next=pe,Ee=pe),m.set(ve,pe)),ne.add(ve)}if(W===0&&f&&!T)if(F)T={fragment:null,effect:Qt(()=>f(h))};else{var Xe=document.createDocumentFragment(),ze=Qn();Xe.append(ze),T={fragment:Xe,effect:Qt(()=>f(ze))}}if(!F)if(_e){for(const[$e,tt]of m)ne.has($e)||ue.skipped_effects.add(tt.e);ue.oncommit(M),ue.ondiscard(()=>{})}else M();y(N)}),Y={effect:U,items:m,first:g};F=!1}function ad(e,r,a,s,l){var f=(s&Nf)!==0,h=r.length,m=e.items,g=e.first,x,E=null,D,b=[],T=[],N,P,F,M;if(f)for(M=0;M<h;M+=1)N=r[M],P=l(N,M),F=m.get(P),F.o&&(F.a?.measure(),(D??=new Set).add(F));for(M=0;M<h;M+=1){if(N=r[M],P=l(N,M),F=m.get(P),e.first??=F,!F.o){F.o=!0;var U=E?E.next:g;hn(e,E,F),hn(e,F,U),So(F,U,a),E=F,b=[],T=[],g=E.next;continue}if((F.e.f&Ht)!==0&&(ms(F.e),f&&(F.a?.unfix(),(D??=new Set).delete(F))),F!==g){if(x!==void 0&&x.has(F)){if(b.length<T.length){var Y=T[0],W;E=Y.prev;var ne=b[0],ue=b[b.length-1];for(W=0;W<b.length;W+=1)So(b[W],Y,a);for(W=0;W<T.length;W+=1)x.delete(T[W]);hn(e,ne.prev,ue.next),hn(e,E,ne),hn(e,ue,Y),g=Y,E=ue,M-=1,b=[],T=[]}else x.delete(F),So(F,g,a),hn(e,F.prev,F.next),hn(e,F,E===null?e.first:E.next),hn(e,E,F),E=F;continue}for(b=[],T=[];g!==null&&g.k!==P;)(g.e.f&Ht)===0&&(x??=new Set).add(g),T.push(g),g=g.next;if(g===null)continue;F=g}b.push(F),E=F,g=F.next}if(g!==null||x!==void 0){for(var Ee=x===void 0?[]:as(x);g!==null;)(g.e.f&Ht)===0&&Ee.push(g),g=g.next;var _e=Ee.length;if(_e>0){var de=(s&Vu)!==0&&h===0?a:null;if(f){for(M=0;M<_e;M+=1)Ee[M].a?.measure();for(M=0;M<_e;M+=1)Ee[M].a?.fix()}id(e,Ee,de)}}f&&Vr(()=>{if(D!==void 0)for(F of D)F.a?.apply()})}function od(e,r,a,s,l,f,h,m){var g=(h&Gu)!==0,x=(h&Ff)===0,E=g?x?ol(a,!1,!1):yr(a):a,D=(h&Uu)===0?l:yr(l);ie&&g&&(E.trace=()=>{var N=typeof D=="number"?l:D.v;m()[N]});var b={i:D,v:E,k:s,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var T=document.createDocumentFragment();T.append(e=Qn())}return b.e=Qt(()=>f(e,E,D,m)),r!==null&&(r.next=b),b}finally{}}function So(e,r,a){for(var s=e.next?e.next.e.nodes_start:a,l=r?r.e.nodes_start:a,f=e.e.nodes_start;f!==null&&f!==s;){var h=xi(f);l.before(f),f=h}}function hn(e,r,a){r===null?(e.first=a,e.effect.first=a&&a.e):(r.e===e.effect.last&&a!==null&&(e.effect.last=a.e),r.e.next&&(r.e.next.prev=null),r.next=a,r.e.next=a&&a.e),a===null?e.effect.last=r&&r.e:(a.e===e.effect.last&&r===null&&(e.effect.last=a.e.prev),a.e.prev&&(a.e.prev.next=null),a.prev=r,a.e.prev=r&&r.e)}function sd(e,r,a,s){const l=Pa;if(a.length===0&&e.length===0){s(r.map(l));return}var f=Ke,h=Fe,m=ud();function g(){Promise.all(a.map(x=>cd(x))).then(x=>{m();try{s([...r.map(l),...x])}catch(E){(h.f&Tn)===0&&Fr(E,h)}f?.deactivate(),ha()}).catch(x=>{Fr(x,h)})}e.length>0?Promise.all(e).then(()=>{m();try{return g()}finally{f?.deactivate(),ha()}}):g()}function ud(){var e=Fe,r=Le,a=Ft,s=Ke;if(ie)var l=pi;return function(h=!0){on(e),Nt(r),Nr(a),h&&s?.activate(),ie&&da(l)}}function ha(){on(null),Nt(null),Nr(null),ie&&da(null)}const ld=new Set;function Pa(e){var r=yt|jt,a=Le!==null&&(Le.f&yt)!==0?Le:null;return Fe!==null&&(Fe.f|=Ur),{ctx:Ft,deps:null,effects:null,equals:Yu,f:r,fn:e,reactions:null,rv:0,v:wt,wv:0,parent:a??Fe,ac:null}}function cd(e,r){let a=Fe;a===null&&Tf();var s=a.b,l=void 0,f=yr(wt),h=!Le,m=new Map;return Td(()=>{var g=Ku();l=g.promise;try{Promise.resolve(e()).then(g.resolve,g.reject).then(()=>{x===Ke&&x.committed&&x.deactivate(),ha()})}catch(b){g.reject(b),ha()}var x=Ke;if(h){var E=!s.is_pending();s.update_pending_count(1),x.increment(E),m.get(x)?.reject(Sr),m.delete(x),m.set(x,g)}const D=(b,T=void 0)=>{if(x.activate(),T)T!==Sr&&(f.f|=Un,Kr(f,T));else{(f.f&Un)!==0&&(f.f^=Un),Kr(f,b);for(const[N,P]of m){if(m.delete(N),N===x)break;P.reject(Sr)}}h&&(s.update_pending_count(-1),x.decrement(E))};g.promise.then(D,b=>D(null,b||"unknown"))}),hs(()=>{for(const g of m.values())g.reject(Sr)}),ie&&(f.f|=Ca),new Promise(g=>{function x(E){function D(){E===l?g(f):x(l)}E.then(D,D)}x(l)})}function xt(e){const r=Pa(e);return bl(r),r}function il(e){const r=Pa(e);return r.equals=Zu,r}function jo(e){var r=e.effects;if(r!==null){e.effects=null;for(var a=0;a<r.length;a+=1)Bt(r[a])}}let Oo=[];function fd(e){for(var r=e.parent;r!==null;){if((r.f&yt)===0)return(r.f&Tn)===0?r:null;r=r.parent}return null}function cs(e){var r,a=Fe;if(on(fd(e)),ie){let s=Br;hu(new Set);try{Oo.includes(e)&&kf(),Oo.push(e),e.f&=~Zn,jo(e),r=zo(e)}finally{on(a),hu(s),Oo.pop()}}else try{e.f&=~Zn,jo(e),r=zo(e)}finally{on(a)}return r}function al(e){var r=cs(e);if(e.equals(r)||(Ke?.is_fork||(e.v=r),e.wv=El()),!wr)if(Xt!==null)(mi()||Ke?.is_fork)&&Xt.set(e,r);else{var a=(e.f&sn)===0?Sn:At;Dt(e,a)}}let Br=new Set;const Vn=new Map;function hu(e){Br=e}let fs=!1;function dd(){fs=!0}function yr(e,r){var a={f:0,v:e,reactions:null,equals:Yu,rv:0,wv:0};return a}function ye(e,r){const a=yr(e);return bl(a),a}function ol(e,r=!1,a=!0){const s=yr(e);return r||(s.equals=Zu),s}function R(e,r,a=!1){Le!==null&&(!gn||(Le.f&fa)!==0)&&Xu()&&(Le.f&(yt|Dn|Ca|fa))!==0&&!An?.includes(e)&&Lf();let s=a?$t(r):r;return ie&&Qu(s,e.label),Kr(e,s)}function Kr(e,r){if(!e.equals(r)){var a=e.v;wr?Vn.set(e,r):Vn.set(e,a),e.v=r;var s=yn.ensure();if(s.capture(e,a),ie){if(Fe!==null){e.updated??=new Map;const l=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:l}),l>5){const f=qf("updated at");if(f!==null){let h=e.updated.get(f.stack);h||(h={error:f,count:0},e.updated.set(f.stack,h)),h.count++}}}Fe!==null&&(e.set_during_effect=!0)}(e.f&yt)!==0&&((e.f&jt)!==0&&cs(e),Dt(e,(e.f&sn)!==0?At:Sn)),e.wv=El(),ul(e,jt),Fe!==null&&(Fe.f&At)!==0&&(Fe.f&(In|gr))===0&&(Yt===null?Dd([e]):Yt.push(e)),!s.is_fork&&Br.size>0&&!fs&&sl()}return r}function sl(){fs=!1;var e=Hn;pa(!0);const r=Array.from(Br);try{for(const a of r)(a.f&At)!==0&&Dt(a,Sn),Ti(a)&&gi(a)}finally{pa(e)}Br.clear()}function di(e){R(e,e.v+1)}function ul(e,r){var a=e.reactions;if(a!==null)for(var s=a.length,l=0;l<s;l++){var f=a[l],h=f.f;if(ie&&(h&fa)!==0){Br.add(f);continue}var m=(h&jt)===0;if(m&&Dt(f,r),(h&yt)!==0){var g=f;Xt?.delete(g),(h&Zn)===0&&(h&sn&&(f.f|=Zn),ul(g,Sn))}else m&&((h&Dn)!==0&&En!==null&&En.add(f),mr(f))}}const hd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function $t(e){if(typeof e!="object"||e===null||kn in e)return e;const r=os(e);if(r!==yf&&r!==gf)return e;var a=new Map,s=Fu(e),l=ye(0),f=hr,h=E=>{if(hr===f)return E();var D=Le,b=hr;Nt(null),yu(f);var T=E();return Nt(D),yu(b),T};s&&(a.set("length",ye(e.length)),ie&&(e=pd(e)));var m="";let g=!1;function x(E){if(!g){g=!0,m=E,dn(l,`${m} version`);for(const[D,b]of a)dn(b,or(m,D));g=!1}}return new Proxy(e,{defineProperty(E,D,b){(!("value"in b)||b.configurable===!1||b.enumerable===!1||b.writable===!1)&&Rf();var T=a.get(D);return T===void 0?T=h(()=>{var N=ye(b.value);return a.set(D,N),ie&&typeof D=="string"&&dn(N,or(m,D)),N}):R(T,b.value,!0),!0},deleteProperty(E,D){var b=a.get(D);if(b===void 0){if(D in E){const T=h(()=>ye(wt));a.set(D,T),di(l),ie&&dn(T,or(m,D))}}else R(b,wt),di(l);return!0},get(E,D,b){if(D===kn)return e;if(ie&&D===zu)return x;var T=a.get(D),N=D in E;if(T===void 0&&(!N||fr(E,D)?.writable)&&(T=h(()=>{var F=$t(N?E[D]:wt),M=ye(F);return ie&&dn(M,or(m,D)),M}),a.set(D,T)),T!==void 0){var P=y(T);return P===wt?void 0:P}return Reflect.get(E,D,b)},getOwnPropertyDescriptor(E,D){var b=Reflect.getOwnPropertyDescriptor(E,D);if(b&&"value"in b){var T=a.get(D);T&&(b.value=y(T))}else if(b===void 0){var N=a.get(D),P=N?.v;if(N!==void 0&&P!==wt)return{enumerable:!0,configurable:!0,value:P,writable:!0}}return b},has(E,D){if(D===kn)return!0;var b=a.get(D),T=b!==void 0&&b.v!==wt||Reflect.has(E,D);if(b!==void 0||Fe!==null&&(!T||fr(E,D)?.writable)){b===void 0&&(b=h(()=>{var P=T?$t(E[D]):wt,F=ye(P);return ie&&dn(F,or(m,D)),F}),a.set(D,b));var N=y(b);if(N===wt)return!1}return T},set(E,D,b,T){var N=a.get(D),P=D in E;if(s&&D==="length")for(var F=b;F<N.v;F+=1){var M=a.get(F+"");M!==void 0?R(M,wt):F in E&&(M=h(()=>ye(wt)),a.set(F+"",M),ie&&dn(M,or(m,F)))}if(N===void 0)(!P||fr(E,D)?.writable)&&(N=h(()=>ye(void 0)),ie&&dn(N,or(m,D)),R(N,$t(b)),a.set(D,N));else{P=N.v!==wt;var U=h(()=>$t(b));R(N,U)}var Y=Reflect.getOwnPropertyDescriptor(E,D);if(Y?.set&&Y.set.call(T,b),!P){if(s&&typeof D=="string"){var W=a.get("length"),ne=Number(D);Number.isInteger(ne)&&ne>=W.v&&R(W,ne+1)}di(l)}return!0},ownKeys(E){y(l);var D=Reflect.ownKeys(E).filter(N=>{var P=a.get(N);return P===void 0||P.v!==wt});for(var[b,T]of a)T.v!==wt&&!(b in E)&&D.push(b);return D},setPrototypeOf(){Pf()}})}function or(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:hd.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function Co(e){try{if(e!==null&&typeof e=="object"&&kn in e)return e[kn]}catch{}return e}const vd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function pd(e){return new Proxy(e,{get(r,a,s){var l=Reflect.get(r,a,s);return vd.has(a)?function(...f){dd();var h=l.apply(this,f);return sl(),h}:l}})}function md(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:a,lastIndexOf:s,includes:l}=e;e.indexOf=function(f,h){const m=a.call(this,f,h);if(m===-1){for(let g=h??0;g<this.length;g+=1)if(Co(this[g])===f){Io("array.indexOf(...)");break}}return m},e.lastIndexOf=function(f,h){const m=s.call(this,f,h??this.length-1);if(m===-1){for(let g=0;g<=(h??this.length-1);g+=1)if(Co(this[g])===f){Io("array.lastIndexOf(...)");break}}return m},e.includes=function(f,h){const m=l.call(this,f,h);if(!m){for(let g=0;g<this.length;g+=1)if(Co(this[g])===f){Io("array.includes(...)");break}}return m},Array.__svelte_cleanup=()=>{e.indexOf=a,e.lastIndexOf=s,e.includes=l}}var vu,ds,ll,cl;function yd(){if(vu===void 0){vu=window,ds=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,a=Text.prototype;ll=fr(r,"firstChild").get,cl=fr(r,"nextSibling").get,lu(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),lu(a)&&(a.__t=void 0),ie&&(e.__svelte_meta=null,md())}}function Qn(e=""){return document.createTextNode(e)}function va(e){return ll.call(e)}function xi(e){return cl.call(e)}function ge(e,r){return va(e)}function kt(e,r=!1){{var a=va(e);return a instanceof Comment&&a.data===""?xi(a):a}}function Se(e,r=1,a=!1){let s=e;for(;r--;)s=xi(s);return s}function gd(e){e.textContent=""}function fl(){return!1}let pu=!1;function _d(){pu||(pu=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function La(e){var r=Le,a=Fe;Nt(null),on(null);try{return e()}finally{Nt(r),on(a)}}function bd(e,r,a,s=a){e.addEventListener(r,()=>La(a));const l=e.__on_r;l?e.__on_r=()=>{l(),s(!0)}:e.__on_r=()=>s(!0),_d()}function wd(e){Fe===null&&(Le===null&&If(e),Df()),wr&&Af(e)}function Ed(e,r){var a=r.last;a===null?r.last=r.first=e:(a.next=e,e.prev=a,r.last=e)}function On(e,r,a){var s=Fe;if(ie)for(;s!==null&&(s.f&fa)!==0;)s=s.parent;s!==null&&(s.f&Ht)!==0&&(e|=Ht);var l={ctx:Ft,deps:null,nodes_start:null,nodes_end:null,f:e|jt|sn,first:null,fn:r,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(ie&&(l.component_function=Ei),a)try{gi(l),l.f|=ls}catch(m){throw Bt(l),m}else r!==null&&mr(l);var f=l;if(a&&f.deps===null&&f.teardown===null&&f.nodes_start===null&&f.first===f.last&&(f.f&Ur)===0&&(f=f.first,(e&Dn)!==0&&(e&Mr)!==0&&f!==null&&(f.f|=Mr)),f!==null&&(f.parent=s,s!==null&&Ed(f,s),Le!==null&&(Le.f&yt)!==0&&(e&gr)===0)){var h=Le;(h.effects??=[]).push(f)}return l}function mi(){return Le!==null&&!gn}function hs(e){const r=On(us,null,!1);return Dt(r,At),r.teardown=e,r}function Ye(e){wd("$effect"),ie&&qn(e,"name",{value:"$effect"});var r=Fe.f,a=!Le&&(r&In)!==0&&(r&ls)===0;if(a){var s=Ft;(s.e??=[]).push(e)}else return dl(e)}function dl(e){return On(ss|wf,e,!1)}function xd(e){yn.ensure();const r=On(gr|Ur,e,!0);return(a={})=>new Promise(s=>{a.outro?Rr(r,()=>{Bt(r),s(void 0)}):(Bt(r),s(void 0))})}function hl(e){return On(ss,e,!1)}function Td(e){return On(Ca|Ur,e,!0)}function Ma(e,r=0){return On(us|r,e,!0)}function lt(e,r=[],a=[],s=[]){sd(s,r,a,l=>{On(us,()=>e(...l.map(y)),!0)})}function vs(e,r=0){var a=On(Dn|r,e,!0);return ie&&(a.dev_stack=pi),a}function Qt(e){return On(In|Ur,e,!0)}function vl(e){var r=e.teardown;if(r!==null){const a=wr,s=Le;mu(!0),Nt(null);try{r.call(null)}finally{mu(a),Nt(s)}}}function pl(e,r=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const l=a.ac;l!==null&&La(()=>{l.abort(Sr)});var s=a.next;(a.f&gr)!==0?a.parent=null:Bt(a,r),a=s}}function kd(e){for(var r=e.first;r!==null;){var a=r.next;(r.f&In)===0&&Bt(r),r=a}}function Bt(e,r=!0){var a=!1;(r||(e.f&ju)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Ad(e.nodes_start,e.nodes_end),a=!0),pl(e,r&&!a),ma(e,0),Dt(e,Tn);var s=e.transitions;if(s!==null)for(const f of s)f.stop();vl(e);var l=e.parent;l!==null&&l.first!==null&&ml(e),ie&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Ad(e,r){for(;e!==null;){var a=e===r?null:xi(e);e.remove(),e=a}}function ml(e){var r=e.parent,a=e.prev,s=e.next;a!==null&&(a.next=s),s!==null&&(s.prev=a),r!==null&&(r.first===e&&(r.first=s),r.last===e&&(r.last=a))}function Rr(e,r,a=!0){var s=[];ps(e,s,!0),yl(s,()=>{a&&Bt(e),r&&r()})}function yl(e,r){var a=e.length;if(a>0){var s=()=>--a||r();for(var l of e)l.out(s)}else r()}function ps(e,r,a){if((e.f&Ht)===0){if(e.f^=Ht,e.transitions!==null)for(const h of e.transitions)(h.is_global||a)&&r.push(h);for(var s=e.first;s!==null;){var l=s.next,f=(s.f&Mr)!==0||(s.f&In)!==0&&(e.f&Dn)!==0;ps(s,r,f?a:!1),s=l}}}function ms(e){gl(e,!0)}function gl(e,r){if((e.f&Ht)!==0){e.f^=Ht,(e.f&At)===0&&(Dt(e,jt),mr(e));for(var a=e.first;a!==null;){var s=a.next,l=(a.f&Mr)!==0||(a.f&In)!==0;gl(a,l?r:!1),a=s}if(e.transitions!==null)for(const f of e.transitions)(f.is_global||r)&&f.in()}}function _l(e,r){for(var a=e.nodes_start,s=e.nodes_end;a!==null;){var l=a===s?null:xi(a);r.append(a),a=l}}let Hn=!1;function pa(e){Hn=e}let wr=!1;function mu(e){wr=e}let Le=null,gn=!1;function Nt(e){Le=e}let Fe=null;function on(e){Fe=e}let An=null;function bl(e){Le!==null&&(An===null?An=[e]:An.push(e))}let St=null,Vt=0,Yt=null;function Dd(e){Yt=e}let wl=1,yi=0,hr=yi;function yu(e){hr=e}function El(){return++wl}function Ti(e){var r=e.f;if((r&jt)!==0)return!0;if(r&yt&&(e.f&=~Zn),(r&Sn)!==0){var a=e.deps;if(a!==null)for(var s=a.length,l=0;l<s;l++){var f=a[l];if(Ti(f)&&al(f),f.wv>e.wv)return!0}(r&sn)!==0&&Xt===null&&Dt(e,At)}return!1}function xl(e,r,a=!0){var s=e.reactions;if(s!==null&&!An?.includes(e))for(var l=0;l<s.length;l++){var f=s[l];(f.f&yt)!==0?xl(f,r,!1):r===f&&(a?Dt(f,jt):(f.f&At)!==0&&Dt(f,Sn),mr(f))}}function zo(e){var r=St,a=Vt,s=Yt,l=Le,f=An,h=Ft,m=gn,g=hr,x=e.f;St=null,Vt=0,Yt=null,Le=(x&(In|gr))===0?e:null,An=null,Nr(e.ctx),gn=!1,hr=++yi,e.ac!==null&&(La(()=>{e.ac.abort(Sr)}),e.ac=null);try{e.f|=Fo;var E=e.fn,D=E(),b=e.deps;if(St!==null){var T;if(ma(e,Vt),b!==null&&Vt>0)for(b.length=Vt+St.length,T=0;T<St.length;T++)b[Vt+T]=St[T];else e.deps=b=St;if(Hn&&mi()&&(e.f&sn)!==0)for(T=Vt;T<b.length;T++)(b[T].reactions??=[]).push(e)}else b!==null&&Vt<b.length&&(ma(e,Vt),b.length=Vt);if(Xu()&&Yt!==null&&!gn&&b!==null&&(e.f&(yt|Sn|jt))===0)for(T=0;T<Yt.length;T++)xl(Yt[T],e);return l!==null&&l!==e&&(yi++,Yt!==null&&(s===null?s=Yt:s.push(...Yt))),(e.f&Un)!==0&&(e.f^=Un),D}catch(N){return Ju(N)}finally{e.f^=Fo,St=r,Vt=a,Yt=s,Le=l,An=f,Nr(h),gn=m,hr=g}}function Id(e,r){let a=r.reactions;if(a!==null){var s=mf.call(a,e);if(s!==-1){var l=a.length-1;l===0?a=r.reactions=null:(a[s]=a[l],a.pop())}}a===null&&(r.f&yt)!==0&&(St===null||!St.includes(r))&&(Dt(r,Sn),(r.f&sn)!==0&&(r.f^=sn,r.f&=~Zn),jo(r),ma(r,0))}function ma(e,r){var a=e.deps;if(a!==null)for(var s=r;s<a.length;s++)Id(e,a[s])}function gi(e){var r=e.f;if((r&Tn)===0){Dt(e,At);var a=Fe,s=Hn;if(Fe=e,Hn=!0,ie){var l=Ei;fu(e.component_function);var f=pi;da(e.dev_stack??pi)}try{(r&(Dn|bf))!==0?kd(e):pl(e),vl(e);var h=zo(e);e.teardown=typeof h=="function"?h:null,e.wv=wl;var m;ie&&Yf&&(e.f&jt)!==0&&e.deps}finally{Hn=s,Fe=a,ie&&(fu(l),da(f))}}}async function lr(){await Promise.resolve(),$f()}function y(e){var r=e.f,a=(r&yt)!==0;if(Le!==null&&!gn){var s=Fe!==null&&(Fe.f&Tn)!==0;if(!s&&!An?.includes(e)){var l=Le.deps;if((Le.f&Fo)!==0)e.rv<yi&&(e.rv=yi,St===null&&l!==null&&l[Vt]===e?Vt++:St===null?St=[e]:St.includes(e)||St.push(e));else{(Le.deps??=[]).push(e);var f=e.reactions;f===null?e.reactions=[Le]:f.includes(Le)||f.push(Le)}}}if(ie&&ld.delete(e),wr){if(Vn.has(e))return Vn.get(e);if(a){var h=e,m=h.v;return((h.f&At)===0&&h.reactions!==null||kl(h))&&(m=cs(h)),Vn.set(h,m),m}}else a&&(!Xt?.has(e)||Ke?.is_fork&&!mi())&&(h=e,Ti(h)&&al(h),Hn&&mi()&&(h.f&sn)===0&&Tl(h));if(Xt?.has(e))return Xt.get(e);if((e.f&Un)!==0)throw e.v;return e.v}function Tl(e){if(e.deps!==null){e.f^=sn;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&yt)!==0&&(r.f&sn)===0&&Tl(r)}}function kl(e){if(e.v===wt)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(Vn.has(r)||(r.f&yt)!==0&&kl(r))return!0;return!1}function Hr(e){var r=gn;try{return gn=!0,e()}finally{gn=r}}const Sd=-7169;function Dt(e,r){e.f=e.f&Sd|r}function Od(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(kn in e)Go(e);else if(!Array.isArray(e))for(let r in e){const a=e[r];typeof a=="object"&&a&&kn in a&&Go(a)}}}function Go(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Go(e[s],r)}catch{}const a=os(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const s=Bu(a);for(let l in s){const f=s[l].get;if(f)try{f.call(e)}catch{}}}}}const Cd=["touchstart","touchmove"];function Rd(e){return Cd.includes(e)}const Al=new Set,Uo=new Set;function Pd(e,r,a,s={}){function l(f){if(s.capture||ui.call(r,f),!f.cancelBubble)return La(()=>a?.call(this,f))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Vr(()=>{r.addEventListener(e,l,s)}):r.addEventListener(e,l,s),l}function Or(e,r,a,s,l){var f={capture:s,passive:l},h=Pd(e,r,a,f);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&hs(()=>{r.removeEventListener(e,h,f)})}function Wr(e){for(var r=0;r<e.length;r++)Al.add(e[r]);for(var a of Uo)a(e)}let gu=null;function ui(e){var r=this,a=r.ownerDocument,s=e.type,l=e.composedPath?.()||[],f=l[0]||e.target;gu=e;var h=0,m=gu===e&&e.__root;if(m){var g=l.indexOf(m);if(g!==-1&&(r===document||r===window)){e.__root=r;return}var x=l.indexOf(r);if(x===-1)return;g<=x&&(h=g)}if(f=l[h]||e.target,f!==r){qn(e,"currentTarget",{configurable:!0,get(){return f||a}});var E=Le,D=Fe;Nt(null),on(null);try{for(var b,T=[];f!==null;){var N=f.assignedSlot||f.parentNode||f.host||null;try{var P=f["__"+s];P!=null&&(!f.disabled||e.target===f)&&P.call(f,e)}catch(F){b?T.push(F):b=F}if(e.cancelBubble||N===r||N===null)break;f=N}if(b){for(let F of T)queueMicrotask(()=>{throw F});throw b}}finally{e.__root=r,delete e.currentTarget,Nt(E),on(D)}}}function Ld(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function Vo(e,r){var a=Fe;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=r)}function Ce(e,r){var a=(r&Gf)!==0,s=(r&Uf)!==0,l,f=!e.startsWith("<!>");return()=>{l===void 0&&(l=Ld(f?e:"<!>"+e),a||(l=va(l)));var h=s||ds?document.importNode(l,!0):l.cloneNode(!0);if(a){var m=va(h),g=h.lastChild;Vo(m,g)}else Vo(h,h);return h}}function vr(){var e=document.createDocumentFragment(),r=document.createComment(""),a=Qn();return e.append(r,a),Vo(r,a),e}function we(e,r){e!==null&&e.before(r)}function zn(e,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function Md(e,r){return Nd(e,r)}const Ir=new Map;function Nd(e,{target:r,anchor:a,props:s={},events:l,context:f,intro:h=!0}){yd();var m=new Set,g=D=>{for(var b=0;b<D.length;b++){var T=D[b];if(!m.has(T)){m.add(T);var N=Rd(T);r.addEventListener(T,ui,{passive:N});var P=Ir.get(T);P===void 0?(document.addEventListener(T,ui,{passive:N}),Ir.set(T,1)):Ir.set(T,P+1)}}};g(as(Al)),Uo.add(g);var x=void 0,E=xd(()=>{var D=a??r.appendChild(Qn());return nd(D,{pending:()=>{}},b=>{if(f){_r({});var T=Ft;T.c=f}l&&(s.$$events=l),x=e(b,s)||{},f&&br()}),()=>{for(var b of m){r.removeEventListener(b,ui);var T=Ir.get(b);--T===0?(document.removeEventListener(b,ui),Ir.delete(b)):Ir.set(b,T)}Uo.delete(g),D!==a&&D.parentNode?.removeChild(D)}});return Fd.set(x,E),x}let Fd=new WeakMap;class Bd{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,a=!0){this.anchor=r,this.#u=a}#a=()=>{var r=Ke;if(this.#e.has(r)){var a=this.#e.get(r),s=this.#t.get(a);if(s)ms(s),this.#n.delete(a);else{var l=this.#r.get(a);l&&(this.#t.set(a,l.effect),this.#r.delete(a),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[f,h]of this.#e){if(this.#e.delete(f),f===r)break;const m=this.#r.get(h);m&&(Bt(m.effect),this.#r.delete(h))}for(const[f,h]of this.#t){if(f===a||this.#n.has(f))continue;const m=()=>{if(Array.from(this.#e.values()).includes(f)){var x=document.createDocumentFragment();_l(h,x),x.append(Qn()),this.#r.set(f,{effect:h,fragment:x})}else Bt(h);this.#n.delete(f),this.#t.delete(f)};this.#u||!s?(this.#n.add(f),Rr(h,m,!1)):m()}}};#i=r=>{this.#e.delete(r);const a=Array.from(this.#e.values());for(const[s,l]of this.#r)a.includes(s)||(Bt(l.effect),this.#r.delete(s))};ensure(r,a){var s=Ke,l=fl();if(a&&!this.#t.has(r)&&!this.#r.has(r))if(l){var f=document.createDocumentFragment(),h=Qn();f.append(h),this.#r.set(r,{effect:Qt(()=>a(h)),fragment:f})}else this.#t.set(r,Qt(()=>a(this.anchor)));if(this.#e.set(s,r),l){for(const[m,g]of this.#t)m===r?s.skipped_effects.delete(g):s.skipped_effects.add(g);for(const[m,g]of this.#r)m===r?s.skipped_effects.delete(g.effect):s.skipped_effects.add(g.effect);s.oncommit(this.#a),s.ondiscard(this.#i)}else this.#a()}}function ot(e,r,a=!1){var s=new Bd(e),l=a?Mr:0;function f(h,m){s.ensure(h,m)}vs(()=>{var h=!1;r((m,g=!0)=>{h=!0,f(g,m)}),h||f(!1,null)},l)}function Ho(e,r,a){hl(()=>{var s=Hr(()=>r(e,a?.())||{});if(a&&s?.update){var l=!1,f={};Ma(()=>{var h=a();Od(h),l&&qu(f,h)&&(f=h,s.update(h))}),l=!0}if(s?.destroy)return()=>s.destroy()})}function Dl(e){var r,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(r=0;r<l;r++)e[r]&&(a=Dl(e[r]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Kd(){for(var e,r,a=0,s="",l=arguments.length;a<l;a++)(e=arguments[a])&&(r=Dl(e))&&(s&&(s+=" "),s+=r);return s}function Il(e){return typeof e=="object"?Kd(e):e??""}function jd(e,r,a){var s=e==null?"":""+e;return r&&(s=s?s+" "+r:r),s===""?null:s}function zd(e,r){return e==null?null:String(e)}function hi(e,r,a,s,l,f){var h=e.__className;if(h!==a||h===void 0){var m=jd(a,s);m==null?e.removeAttribute("class"):e.className=m,e.__className=a}return f}function Wn(e,r,a,s){var l=e.__style;if(l!==r){var f=zd(r);f==null?e.removeAttribute("style"):e.style.cssText=f,e.__style=r}return s}const Gd=Symbol("is custom element"),Ud=Symbol("is html");function Vd(e,r){var a=ys(e);a.value===(a.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Sl(e,r){var a=ys(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function Ot(e,r,a,s){var l=ys(e);l[r]!==(l[r]=a)&&(r==="loading"&&(e[xf]=a),a==null?e.removeAttribute(r):typeof a!="string"&&Hd(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function ys(e){return e.__attributes??={[Gd]:e.nodeName.includes("-"),[Ud]:e.namespaceURI===Hf}}var _u=new Map;function Hd(e){var r=e.getAttribute("is")||e.nodeName,a=_u.get(r);if(a)return a;_u.set(r,a=[]);for(var s,l=e,f=Element.prototype;f!==l;){s=Bu(l);for(var h in s)s[h].set&&a.push(h);l=os(l)}return a}function gs(e,r,a=r){var s=new WeakSet;bd(e,"input",async l=>{ie&&e.type==="checkbox"&&cu();var f=l?e.defaultValue:e.value;if(f=Ro(e)?Po(f):f,a(f),Ke!==null&&s.add(Ke),await lr(),f!==(f=r())){var h=e.selectionStart,m=e.selectionEnd,g=e.value.length;if(e.value=f??"",m!==null){var x=e.value.length;h===m&&m===g&&x>g?(e.selectionStart=x,e.selectionEnd=x):(e.selectionStart=h,e.selectionEnd=Math.min(m,x))}}}),Hr(r)==null&&e.value&&(a(Ro(e)?Po(e.value):e.value),Ke!==null&&s.add(Ke)),Ma(()=>{ie&&e.type==="checkbox"&&cu();var l=r();if(e===document.activeElement){var f=aa??Ke;if(s.has(f))return}Ro(e)&&l===Po(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function Ro(e){var r=e.type;return r==="number"||r==="range"}function Po(e){return e===""?null:+e}function bu(e,r){return e===r||e?.[kn]===r}function _n(e={},r,a,s){return hl(()=>{var l,f;return Ma(()=>{l=f,f=[],Hr(()=>{e!==a(...f)&&(r(e,...f),l&&bu(a(...l),e)&&r(null,...l))})}),()=>{Vr(()=>{f&&bu(a(...f),e)&&r(null,...f)})}}),e}function Ol(e,r,a){if(e==null)return r(void 0),ca;const s=Hr(()=>e.subscribe(r,a));return s.unsubscribe?()=>s.unsubscribe():s}function Wd(e){let r;return Ol(e,a=>r=a)(),r}let na=!1,Wo=Symbol();function ya(e,r,a){const s=a[r]??={store:null,source:ol(void 0),unsubscribe:ca};if(ie&&(s.source.label=r),s.store!==e&&!(Wo in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=ca;else{var l=!0;s.unsubscribe=Ol(e,f=>{l?s.source.v=f:R(s.source,f)}),l=!1}return e&&Wo in a?Wd(e):y(s.source)}function ga(e,r,a){let s=a[r];return s&&s.store!==e&&(s.unsubscribe(),s.unsubscribe=ca),e}function _s(){const e={};function r(){hs(()=>{for(var a in e)e[a].unsubscribe();qn(e,Wo,{enumerable:!1,value:!0})})}return[e,r]}function Yd(e){var r=na;try{return na=!1,[e(),na]}finally{na=r}}function xn(e,r,a,s){var l=(a&jf)!==0,f=(a&zf)!==0,h=s,m=!0,g=()=>(m&&(m=!1,h=f?Hr(s):s),h),x;if(l){var E=kn in e||Ef in e;x=fr(e,r)?.set??(E&&r in e?U=>e[r]=U:void 0)}var D,b=!1;l?[D,b]=Yd(()=>e[r]):D=e[r],D===void 0&&s!==void 0&&(D=g(),x&&(Of(r),x(D)));var T;if(T=()=>{var U=e[r];return U===void 0?g():(m=!0,U)},(a&Kf)===0)return T;if(x){var N=e.$$legacy;return(function(U,Y){return arguments.length>0?((!Y||N||b)&&x(Y?T():U),U):T()})}var P=!1,F=((a&Bf)!==0?Pa:il)(()=>(P=!1,T()));ie&&(F.label=r),l&&y(F);var M=Fe;return(function(U,Y){if(arguments.length>0){const W=Y?y(F):l?$t(U):U;return R(F,W),P=!0,h!==void 0&&(h=W),U}return wr&&P||(M.f&Tn)!==0?F.v:y(F)})}if(ie){let e=function(r){if(!(r in globalThis)){let a;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(a!==void 0)return a;Cf(r)},set:s=>{a=s}})}};var Ap=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const qd="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(qd);var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sa={exports:{}},Xd=sa.exports,wu;function $d(){return wu||(wu=1,(function(e,r){(function(a,s){e.exports=s()})(Xd,(function(){var a=function(t,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u])},a(t,n)};function s(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var l=function(){return l=Object.assign||function(n){for(var i,o=1,u=arguments.length;o<u;o++){i=arguments[o];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(n[c]=i[c])}return n},l.apply(this,arguments)};function f(t,n,i){for(var o=0,u=n.length,c;o<u;o++)(c||!(o in n))&&(c||(c=Array.prototype.slice.call(n,0,o)),c[o]=n[o]);return t.concat(c||Array.prototype.slice.call(n))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Zd,m=Object.keys,g=Array.isArray;typeof Promise<"u"&&!h.Promise&&(h.Promise=Promise);function x(t,n){return typeof n!="object"||m(n).forEach(function(i){t[i]=n[i]}),t}var E=Object.getPrototypeOf,D={}.hasOwnProperty;function b(t,n){return D.call(t,n)}function T(t,n){typeof n=="function"&&(n=n(E(t))),(typeof Reflect>"u"?m:Reflect.ownKeys)(n).forEach(function(i){P(t,i,n[i])})}var N=Object.defineProperty;function P(t,n,i,o){N(t,n,x(i&&b(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function F(t){return{from:function(n){return t.prototype=Object.create(n.prototype),P(t.prototype,"constructor",t),{extend:T.bind(null,t.prototype)}}}}var M=Object.getOwnPropertyDescriptor;function U(t,n){var i=M(t,n),o;return i||(o=E(t))&&U(o,n)}var Y=[].slice;function W(t,n,i){return Y.call(t,n,i)}function ne(t,n){return n(t)}function ue(t){if(!t)throw new Error("Assertion Failed")}function Ee(t){h.setImmediate?setImmediate(t):setTimeout(t,0)}function _e(t,n){return t.reduce(function(i,o,u){var c=n(o,u);return c&&(i[c[0]]=c[1]),i},{})}function de(t,n){if(typeof n=="string"&&b(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],o=0,u=n.length;o<u;++o){var c=de(t,n[o]);i.push(c)}return i}var d=n.indexOf(".");if(d!==-1){var v=t[n.substr(0,d)];return v==null?void 0:de(v,n.substr(d+1))}}function be(t,n,i){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){ue(typeof i!="string"&&"length"in i);for(var o=0,u=n.length;o<u;++o)be(t,n[o],i[o])}else{var c=n.indexOf(".");if(c!==-1){var d=n.substr(0,c),v=n.substr(c+1);if(v==="")i===void 0?g(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=i;else{var p=t[d];(!p||!b(t,d))&&(p=t[d]={}),be(p,v,i)}}else i===void 0?g(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function ve(t,n){typeof n=="string"?be(t,n,void 0):"length"in n&&[].map.call(n,function(i){be(t,i,void 0)})}function pe(t){var n={};for(var i in t)b(t,i)&&(n[i]=t[i]);return n}var Xe=[].concat;function ze(t){return Xe.apply([],t)}var $e="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ze([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return h[t]}),tt=new Set($e.map(function(t){return h[t]}));function je(t){var n={};for(var i in t)if(b(t,i)){var o=t[i];n[i]=!o||typeof o!="object"||tt.has(o.constructor)?o:je(o)}return n}function ht(t){for(var n in t)if(b(t,n))return!1;return!0}var He=null;function Je(t){He=new WeakMap;var n=zt(t);return He=null,n}function zt(t){if(!t||typeof t!="object")return t;var n=He.get(t);if(n)return n;if(g(t)){n=[],He.set(t,n);for(var i=0,o=t.length;i<o;++i)n.push(zt(t[i]))}else if(tt.has(t.constructor))n=t;else{var u=E(t);n=u===Object.prototype?{}:Object.create(u),He.set(t,n);for(var c in t)b(t,c)&&(n[c]=zt(t[c]))}return n}var Gt={}.toString;function en(t){return Gt.call(t).slice(8,-1)}var gt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",q=typeof gt=="symbol"?function(t){var n;return t!=null&&(n=t[gt])&&n.apply(t)}:function(){return null};function Q(t,n){var i=t.indexOf(n);return i>=0&&t.splice(i,1),i>=0}var Ae={};function Me(t){var n,i,o,u;if(arguments.length===1){if(g(t))return t.slice();if(this===Ae&&typeof t=="string")return[t];if(u=q(t)){for(i=[];o=u.next(),!o.done;)i.push(o.value);return i}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(i=new Array(n);n--;)i[n]=t[n];return i}return[t]}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var Ze=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},vt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ge=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ue=vt.concat(Ge),re={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(t,n){this.name=t,this.message=n}F(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}});function se(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,o,u){return u.indexOf(i)===o}).join(`
`)}function Ne(t,n,i,o){this.failures=n,this.failedKeys=o,this.successCount=i,this.message=se(t,n)}F(Ne).from(Ie);function Be(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=se(t,this.failures)}F(Be).from(Ie);var Qe=Ue.reduce(function(t,n){return t[n]=n+"Error",t},{}),un=Ie,S=Ue.reduce(function(t,n){var i=n+"Error";function o(u,c){this.name=i,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=re[n]||i,this.inner=null)}return F(o).from(un),t[n]=o,t},{});S.Syntax=SyntaxError,S.Type=TypeError,S.Range=RangeError;var z=Ge.reduce(function(t,n){return t[n+"Error"]=S[n],t},{});function V(t,n){if(!t||t instanceof Ie||t instanceof TypeError||t instanceof SyntaxError||!t.name||!z[t.name])return t;var i=new z[t.name](n||t.message,t);return"stack"in t&&P(i,"stack",{get:function(){return this.inner.stack}}),i}var ce=Ue.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=S[n]),t},{});ce.ModifyError=Ne,ce.DexieError=Ie,ce.BulkError=Be;function te(){}function xe(t){return t}function he(t,n){return t==null||t===xe?n:function(i){return n(t(i))}}function me(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function st(t,n){return t===te?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?me(o,this.onsuccess):o),u&&(this.onerror=this.onerror?me(u,this.onerror):u),c!==void 0?c:i}}function nt(t,n){return t===te?n:function(){t.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?me(i,this.onsuccess):i),o&&(this.onerror=this.onerror?me(o,this.onerror):o)}}function Oe(t,n){return t===te?n:function(i){var o=t.apply(this,arguments);x(i,o);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?me(u,this.onsuccess):u),c&&(this.onerror=this.onerror?me(c,this.onerror):c),o===void 0?d===void 0?void 0:d:x(o,d)}}function Ve(t,n){return t===te?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function It(t,n){return t===te?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return i.then(function(){return n.apply(o,c)})}return n.apply(this,arguments)}}var Rt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function rt(t,n){Rt=t}var tn={},Ii=100,Yr=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,E(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,E(n),t]})(),Ds=Yr[0],Is=Yr[1],Xl=Yr[2],$l=Is&&Is.then,$n=Ds&&Ds.constructor,Ha=!!Xl;function Jl(){queueMicrotask(tc)}var qr=function(t,n){Zr.push([t,n]),Si&&(Jl(),Si=!1)},Wa=!0,Si=!0,Jn=[],Oi=[],Ya=xe,Cn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:te,pgp:!1,env:{},finalize:te},ae=Cn,Zr=[],er=0,Ci=[];function $(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=ae;if(typeof t!="function"){if(t!==tn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Za(this,this._value);return}this._state=null,this._value=null,++n.ref,Os(this,t)}var qa={get:function(){var t=ae,n=Mi;function i(o,u){var c=this,d=!t.global&&(t!==ae||n!==Mi),v=d&&!Pn(),p=new $(function(_,A){Qa(c,new Ss(Ps(o,t,d,v),Ps(u,t,d,v),_,A,t))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return i.prototype=tn,i},set:function(t){P(this,"then",t&&t.prototype===tn?qa:{get:function(){return t},set:qa.set})}};T($.prototype,{then:qa,_then:function(t,n){Qa(this,new Ss(null,null,t,n,ae))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],i=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?i(o):Ri(o)}):this.then(null,function(o){return o&&o.name===n?i(o):Ri(o)})},finally:function(t){return this.then(function(n){return $.resolve(t()).then(function(){return n})},function(n){return $.resolve(t()).then(function(){return Ri(n)})})},timeout:function(t,n){var i=this;return t<1/0?new $(function(o,u){var c=setTimeout(function(){return u(new S.Timeout(n))},t);i.then(o,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&P($.prototype,Symbol.toStringTag,"Dexie.Promise"),Cn.env=Rs();function Ss(t,n,i,o,u){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=o,this.psd=u}T($,{all:function(){var t=Me.apply(null,arguments).map(Ni);return new $(function(n,i){t.length===0&&n([]);var o=t.length;t.forEach(function(u,c){return $.resolve(u).then(function(d){t[c]=d,--o||n(t)},i)})})},resolve:function(t){if(t instanceof $)return t;if(t&&typeof t.then=="function")return new $(function(i,o){t.then(i,o)});var n=new $(tn,!0,t);return n},reject:Ri,race:function(){var t=Me.apply(null,arguments).map(Ni);return new $(function(n,i){t.map(function(o){return $.resolve(o).then(n,i)})})},PSD:{get:function(){return ae},set:function(t){return ae=t}},totalEchoes:{get:function(){return Mi}},newPSD:Rn,usePSD:tr,scheduler:{get:function(){return qr},set:function(t){qr=t}},rejectionMapper:{get:function(){return Ya},set:function(t){Ya=t}},follow:function(t,n){return new $(function(i,o){return Rn(function(u,c){var d=ae;d.unhandleds=[],d.onunhandled=c,d.finalize=me(function(){var v=this;nc(function(){v.unhandleds.length===0?u():c(v.unhandleds[0])})},d.finalize),t()},n,i,o)})}}),$n&&($n.allSettled&&P($,"allSettled",function(){var t=Me.apply(null,arguments).map(Ni);return new $(function(n){t.length===0&&n([]);var i=t.length,o=new Array(i);t.forEach(function(u,c){return $.resolve(u).then(function(d){return o[c]={status:"fulfilled",value:d}},function(d){return o[c]={status:"rejected",reason:d}}).then(function(){return--i||n(o)})})})}),$n.any&&typeof AggregateError<"u"&&P($,"any",function(){var t=Me.apply(null,arguments).map(Ni);return new $(function(n,i){t.length===0&&i(new AggregateError([]));var o=t.length,u=new Array(o);t.forEach(function(c,d){return $.resolve(c).then(function(v){return n(v)},function(v){u[d]=v,--o||i(new AggregateError(u))})})})}),$n.withResolvers&&($.withResolvers=$n.withResolvers));function Os(t,n){try{n(function(i){if(t._state===null){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&Er();i&&typeof i.then=="function"?Os(t,function(u,c){i instanceof $?i._then(u,c):i.then(u,c)}):(t._state=!0,t._value=i,Cs(t)),o&&xr()}},Za.bind(null,t))}catch(i){Za(t,i)}}function Za(t,n){if(Oi.push(n),t._state===null){var i=t._lib&&Er();n=Ya(n),t._state=!1,t._value=n,rc(t),Cs(t),i&&xr()}}function Cs(t){var n=t._listeners;t._listeners=[];for(var i=0,o=n.length;i<o;++i)Qa(t,n[i]);var u=t._PSD;--u.ref||u.finalize(),er===0&&(++er,qr(function(){--er===0&&Xa()},[]))}function Qa(t,n){if(t._state===null){t._listeners.push(n);return}var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++er,qr(ec,[i,t,n])}function ec(t,n,i){try{var o,u=n._value;!n._state&&Oi.length&&(Oi=[]),o=Rt&&n._consoleTask?n._consoleTask.run(function(){return t(u)}):t(u),!n._state&&Oi.indexOf(u)===-1&&ic(n),i.resolve(o)}catch(c){i.reject(c)}finally{--er===0&&Xa(),--i.psd.ref||i.psd.finalize()}}function tc(){tr(Cn,function(){Er()&&xr()})}function Er(){var t=Wa;return Wa=!1,Si=!1,t}function xr(){var t,n,i;do for(;Zr.length>0;)for(t=Zr,Zr=[],i=t.length,n=0;n<i;++n){var o=t[n];o[0].apply(null,o[1])}while(Zr.length>0);Wa=!0,Si=!0}function Xa(){var t=Jn;Jn=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=Ci.slice(0),i=n.length;i;)n[--i]()}function nc(t){function n(){t(),Ci.splice(Ci.indexOf(n),1)}Ci.push(n),++er,qr(function(){--er===0&&Xa()},[])}function rc(t){Jn.some(function(n){return n._value===t._value})||Jn.push(t)}function ic(t){for(var n=Jn.length;n;)if(Jn[--n]._value===t._value){Jn.splice(n,1);return}}function Ri(t){return new $(tn,!1,t)}function We(t,n){var i=ae;return function(){var o=Er(),u=ae;try{return Ln(i,!0),t.apply(this,arguments)}catch(c){n&&n(c)}finally{Ln(u,!1),o&&xr()}}}var ft={awaits:0,echoes:0,id:0},ac=0,Pi=[],Li=0,Mi=0,oc=0;function Rn(t,n,i,o){var u=ae,c=Object.create(u);c.parent=u,c.ref=0,c.global=!1,c.id=++oc,Cn.env,c.env=Ha?{Promise:$,PromiseProp:{value:$,configurable:!0,writable:!0},all:$.all,race:$.race,allSettled:$.allSettled,any:$.any,resolve:$.resolve,reject:$.reject}:{},n&&x(c,n),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=tr(c,t,i,o);return c.ref===0&&c.finalize(),d}function Tr(){return ft.id||(ft.id=++ac),++ft.awaits,ft.echoes+=Ii,ft.id}function Pn(){return ft.awaits?(--ft.awaits===0&&(ft.id=0),ft.echoes=ft.awaits*Ii,!0):!1}(""+$l).indexOf("[native code]")===-1&&(Tr=Pn=te);function Ni(t){return ft.echoes&&t&&t.constructor===$n?(Tr(),t.then(function(n){return Pn(),n},function(n){return Pn(),it(n)})):t}function sc(t){++Mi,(!ft.echoes||--ft.echoes===0)&&(ft.echoes=ft.awaits=ft.id=0),Pi.push(ae),Ln(t,!0)}function uc(){var t=Pi[Pi.length-1];Pi.pop(),Ln(t,!1)}function Ln(t,n){var i=ae;if((n?ft.echoes&&(!Li++||t!==ae):Li&&(!--Li||t!==ae))&&queueMicrotask(n?sc.bind(null,t):uc),t!==ae&&(ae=t,i===Cn&&(Cn.env=Rs()),Ha)){var o=Cn.env.Promise,u=t.env;(i.global||t.global)&&(Object.defineProperty(h,"Promise",u.PromiseProp),o.all=u.all,o.race=u.race,o.resolve=u.resolve,o.reject=u.reject,u.allSettled&&(o.allSettled=u.allSettled),u.any&&(o.any=u.any))}}function Rs(){var t=h.Promise;return Ha?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function tr(t,n,i,o,u){var c=ae;try{return Ln(t,!0),n(i,o,u)}finally{Ln(c,!1)}}function Ps(t,n,i,o){return typeof t!="function"?t:function(){var u=ae;i&&Tr(),Ln(n,!0);try{return t.apply(this,arguments)}finally{Ln(u,!1),o&&queueMicrotask(Pn)}}}function $a(t){Promise===$n&&ft.echoes===0?Li===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var it=$.reject;function Ja(t,n,i,o){if(!t.idbdb||!t._state.openComplete&&!ae.letThrough&&!t._vip){if(t._state.openComplete)return it(new S.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return it(new S.DatabaseClosed);t.open().catch(te)}return t._state.dbReadyPromise.then(function(){return Ja(t,n,i,o)})}else{var u=t._createTransaction(n,i,t._dbSchema);try{u.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===Qe.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Ja(t,n,i,o)})):it(c)}return u._promise(n,function(c,d){return Rn(function(){return ae.trans=u,o(c,d,u)})}).then(function(c){if(n==="readwrite")try{u.idbtrans.commit()}catch{}return n==="readonly"?c:u._completion.then(function(){return c})})}}var Ls="4.2.1",nr="",eo=-1/0,bn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ms="String expected.",kr=[],Fi="__dbnames",to="readonly",no="readwrite";function rr(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var Ns={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Bi(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=Je(n),delete n[t]),n}:function(n){return n}}function Fs(){throw S.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Re(t,n){try{var i=Bs(t),o=Bs(n);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return cc(Ks(t),Ks(n));case"Array":return lc(t,n)}}catch{}return NaN}function lc(t,n){for(var i=t.length,o=n.length,u=i<o?i:o,c=0;c<u;++c){var d=Re(t[c],n[c]);if(d!==0)return d}return i===o?0:i<o?-1:1}function cc(t,n){for(var i=t.length,o=n.length,u=i<o?i:o,c=0;c<u;++c)if(t[c]!==n[c])return t[c]<n[c]?-1:1;return i===o?0:i<o?-1:1}function Bs(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var i=en(t);return i==="ArrayBuffer"?"binary":i}function Ks(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Ki(t,n,i){var o=t.schema.yProps;return o?(n&&i.numFailures>0&&(n=n.filter(function(u,c){return!i.failures[c]})),Promise.all(o.map(function(u){var c=u.updatesTable;return n?t.db.table(c).where("k").anyOf(n).delete():t.db.table(c).clear()})).then(function(){return i})):i}var Qr=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var i,o=this["@@propmod"];if(o.add!==void 0){var u=o.add;if(g(u))return f(f([],g(n)?n:[],!0),u).sort();if(typeof u=="number")return(Number(n)||0)+u;if(typeof u=="bigint")try{return BigInt(n)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(o.remove!==void 0){var c=o.remove;if(g(c))return g(n)?n.filter(function(v){return!c.includes(v)}).sort():[];if(typeof c=="number")return Number(n)-c;if(typeof c=="bigint")try{return BigInt(n)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}var d=(i=o.replacePrefix)===null||i===void 0?void 0:i[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function js(t,n){for(var i=m(n),o=i.length,u=!1,c=0;c<o;++c){var d=i[c],v=n[d],p=de(t,d);v instanceof Qr?(be(t,d,v.execute(p)),u=!0):p!==v&&(be(t,d,v),u=!0)}return u}var zs=(function(){function t(){}return t.prototype._trans=function(n,i,o){var u=this._tx||ae.trans,c=this.name,d=Rt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function v(A,w,C){if(!C.schema[c])throw new S.NotFound("Table "+c+" not part of transaction");return i(C.idbtrans,C)}var p=Er();try{var _=u&&u.db._novip===this.db._novip?u===ae.trans?u._promise(n,v,o):Rn(function(){return u._promise(n,v,o)},{trans:u,transless:ae.transless||ae}):Ja(this.db,n,[this.name],v);return d&&(_._consoleTask=d,_=_.catch(function(A){return console.trace(A),it(A)})),_}finally{p&&xr()}},t.prototype.get=function(n,i){var o=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?it(new S.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return o.core.get({trans:u,key:n}).then(function(c){return o.hook.reading.fire(c)})}).then(i)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(g(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=m(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(A){if(A.compound&&i.every(function(C){return A.keyPath.indexOf(C)>=0})){for(var w=0;w<i.length;++w)if(i.indexOf(A.keyPath[w])===-1)return!1;return!0}return!1}).sort(function(A,w){return A.keyPath.length-w.keyPath.length})[0];if(o&&this.db._maxKey!==nr){var u=o.keyPath.slice(0,i.length);return this.where(u).equals(u.map(function(A){return n[A]}))}!o&&Rt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var c=this.schema.idxByName;function d(A,w){return Re(A,w)===0}var v=i.reduce(function(A,w){var C=A[0],H=A[1],k=c[w],I=n[w];return[C||k,C||!k?rr(H,k&&k.multi?function(O){var L=de(O,w);return g(L)&&L.some(function(K){return d(I,K)})}:function(O){return d(I,de(O,w))}):H]},[null,null]),p=v[0],_=v[1];return p?this.where(p.name).equals(n[p.keyPath]).filter(_):o?this.filter(_):this.where(i).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,g(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var i=this,o=i.db,u=i.name;this.schema.mappedClass=n,n.prototype instanceof Fs&&(n=(function(p){s(_,p);function _(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(_.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),_.prototype.table=function(){return u},_})(n));for(var c=new Set,d=n.prototype;d;d=E(d))Object.getOwnPropertyNames(d).forEach(function(p){return c.add(p)});var v=function(p){if(!p)return p;var _=Object.create(n.prototype);for(var A in p)if(!c.has(A))try{_[A]=p[A]}catch{}return _};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),n},t.prototype.defineClass=function(){function n(i){x(this,i)}return this.mapToClass(n)},t.prototype.add=function(n,i){var o=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,v=n;return d&&c&&(v=Bi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"add",keys:i!=null?[i]:null,values:[v]})}).then(function(p){return p.numFailures?$.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{be(n,d,p)}catch{}return p})},t.prototype.upsert=function(n,i){var o=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return o.core.get({trans:c,key:n}).then(function(d){var v=d??{};return js(v,i),u&&be(v,u,n),o.core.mutate({trans:c,type:"put",values:[v],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[i]}}).then(function(p){return p.numFailures?$.reject(p.failures[0]):!!d})})})},t.prototype.update=function(n,i){if(typeof n=="object"&&!g(n)){var o=de(n,this.schema.primKey.keyPath);return o===void 0?it(new S.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(n).modify(i)},t.prototype.put=function(n,i){var o=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,v=n;return d&&c&&(v=Bi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"put",values:[v],keys:i!=null?[i]:null})}).then(function(p){return p.numFailures?$.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{be(n,d,p)}catch{}return p})},t.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(u){return Ki(i,[n],u)}).then(function(u){return u.numFailures?$.reject(u.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:Ns}).then(function(o){return Ki(n,null,o)})}).then(function(i){return i.numFailures?$.reject(i.failures[0]):void 0})},t.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:n,trans:o}).then(function(u){return u.map(function(c){return i.hook.reading.fire(c)})})})},t.prototype.bulkAdd=function(n,i,o){var u=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var p=u.schema.primKey,_=p.auto,A=p.keyPath;if(A&&c)throw new S.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var w=n.length,C=A&&_?n.map(Bi(A)):n;return u.core.mutate({trans:v,type:"add",keys:c,values:C,wantResults:d}).then(function(H){var k=H.numFailures,I=H.results,O=H.lastResult,L=H.failures,K=d?I:O;if(k===0)return K;throw new Be("".concat(u.name,".bulkAdd(): ").concat(k," of ").concat(w," operations failed"),L)})})},t.prototype.bulkPut=function(n,i,o){var u=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var p=u.schema.primKey,_=p.auto,A=p.keyPath;if(A&&c)throw new S.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var w=n.length,C=A&&_?n.map(Bi(A)):n;return u.core.mutate({trans:v,type:"put",keys:c,values:C,wantResults:d}).then(function(H){var k=H.numFailures,I=H.results,O=H.lastResult,L=H.failures,K=d?I:O;if(k===0)return K;throw new Be("".concat(u.name,".bulkPut(): ").concat(k," of ").concat(w," operations failed"),L)})})},t.prototype.bulkUpdate=function(n){var i=this,o=this.core,u=n.map(function(v){return v.key}),c=n.map(function(v){return v.changes}),d=[];return this._trans("readwrite",function(v){return o.getMany({trans:v,keys:u,cache:"clone"}).then(function(p){var _=[],A=[];n.forEach(function(C,H){var k=C.key,I=C.changes,O=p[H];if(O){for(var L=0,K=Object.keys(I);L<K.length;L++){var j=K[L],G=I[j];if(j===i.schema.primKey.keyPath){if(Re(G,k)!==0)throw new S.Constraint("Cannot update primary key in bulkUpdate()")}else be(O,j,G)}d.push(H),_.push(k),A.push(O)}});var w=_.length;return o.mutate({trans:v,type:"put",keys:_,values:A,updates:{keys:u,changeSpecs:c}}).then(function(C){var H=C.numFailures,k=C.failures;if(H===0)return w;for(var I=0,O=Object.keys(k);I<O.length;I++){var L=O[I],K=d[Number(L)];if(K!=null){var j=k[L];delete k[L],k[K]=j}}throw new Be("".concat(i.name,".bulkUpdate(): ").concat(H," of ").concat(w," operations failed"),k)})})})},t.prototype.bulkDelete=function(n){var i=this,o=n.length;return this._trans("readwrite",function(u){return i.core.mutate({trans:u,type:"delete",keys:n}).then(function(c){return Ki(i,n,c)})}).then(function(u){var c=u.numFailures,d=u.lastResult,v=u.failures;if(c===0)return d;throw new Be("".concat(i.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),v)})},t})();function Xr(t){var n={},i=function(v,p){if(p){for(var _=arguments.length,A=new Array(_-1);--_;)A[_-1]=arguments[_];return n[v].subscribe.apply(null,A),t}else if(typeof v=="string")return n[v]};i.addEventType=c;for(var o=1,u=arguments.length;o<u;++o)c(arguments[o]);return i;function c(v,p,_){if(typeof v=="object")return d(v);p||(p=Ve),_||(_=te);var A={subscribers:[],fire:_,subscribe:function(w){A.subscribers.indexOf(w)===-1&&(A.subscribers.push(w),A.fire=p(A.fire,w))},unsubscribe:function(w){A.subscribers=A.subscribers.filter(function(C){return C!==w}),A.fire=A.subscribers.reduce(p,_)}};return n[v]=i[v]=A,A}function d(v){m(v).forEach(function(p){var _=v[p];if(g(_))c(p,v[p][0],v[p][1]);else if(_==="asap")var A=c(p,xe,function(){for(var C=arguments.length,H=new Array(C);C--;)H[C]=arguments[C];A.subscribers.forEach(function(k){Ee(function(){k.apply(null,H)})})});else throw new S.InvalidArgument("Invalid event config")})}}function $r(t,n){return F(n).from({prototype:t}),n}function fc(t){return $r(zs.prototype,function(i,o,u){this.db=t,this._tx=u,this.name=i,this.schema=o,this.hook=t._allTables[i]?t._allTables[i].hook:Xr(null,{creating:[st,te],reading:[he,xe],updating:[Oe,te],deleting:[nt,te]})})}function Ar(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function ro(t,n){t.filter=rr(t.filter,n)}function io(t,n,i){var o=t.replayFilter;t.replayFilter=o?function(){return rr(o(),n())}:n,t.justLimit=i&&!o}function dc(t,n){t.isMatch=rr(t.isMatch,n)}function ji(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new S.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function Gs(t,n,i){var o=ji(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function zi(t,n,i,o){var u=t.replayFilter?rr(t.filter,t.replayFilter()):t.filter;if(t.or){var c={},d=function(v,p,_){if(!u||u(p,_,function(C){return p.stop(C)},function(C){return p.fail(C)})){var A=p.primaryKey,w=""+A;w==="[object ArrayBuffer]"&&(w=""+new Uint8Array(A)),b(c,w)||(c[w]=!0,n(v,p,_))}};return Promise.all([t.or._iterate(d,i),Us(Gs(t,o,i),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return Us(Gs(t,o,i),rr(t.algorithm,u),n,!t.keysOnly&&t.valueMapper)}function Us(t,n,i,o){var u=o?function(d,v,p){return i(o(d),v,p)}:i,c=We(u);return t.then(function(d){if(d)return d.start(function(){var v=function(){return d.continue()};(!n||n(d,function(p){return v=p},function(p){d.stop(p),v=te},function(p){d.fail(p),v=te}))&&c(d.value,d,function(p){return v=p}),v()})})}var hc=(function(){function t(){}return t.prototype._read=function(n,i){var o=this._ctx;return o.error?o.table._trans(null,it.bind(null,o.error)):o.table._trans("readonly",n).then(i)},t.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,it.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=rr(i.algorithm,n)},t.prototype._iterate=function(n,i){return zi(this._ctx,n,i,this._ctx.table.core)},t.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&x(o,n),i._ctx=o,i},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var i=this._ctx;return this._read(function(o){return zi(i,n,o,i.table.core)})},t.prototype.count=function(n){var i=this;return this._read(function(o){var u=i._ctx,c=u.table.core;if(Ar(u,!0))return c.count({trans:o,query:{index:ji(u,c.schema),range:u.range}}).then(function(v){return Math.min(v,u.limit)});var d=0;return zi(u,function(){return++d,!1},o,c).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,i){var o=n.split(".").reverse(),u=o[0],c=o.length-1;function d(_,A){return A?d(_[o[A]],A-1):_[u]}var v=this._ctx.dir==="next"?1:-1;function p(_,A){var w=d(_,c),C=d(A,c);return Re(w,C)*v}return this.toArray(function(_){return _.sort(p)}).then(i)},t.prototype.toArray=function(n){var i=this;return this._read(function(o){var u=i._ctx;if(u.dir==="next"&&Ar(u,!0)&&u.limit>0){var c=u.valueMapper,d=ji(u,u.table.core.schema);return u.table.core.query({trans:o,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(p){var _=p.result;return c?_.map(c):_})}else{var v=[];return zi(u,function(p){return v.push(p)},o,u.table.core).then(function(){return v})}},n)},t.prototype.offset=function(n){var i=this._ctx;return n<=0?this:(i.offset+=n,Ar(i)?io(i,function(){var o=n;return function(u,c){return o===0?!0:o===1?(--o,!1):(c(function(){u.advance(o),o=0}),!1)}}):io(i,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),io(this._ctx,function(){var i=n;return function(o,u,c){return--i<=0&&u(c),i>=0}},!0),this},t.prototype.until=function(n,i){return ro(this._ctx,function(o,u,c){return n(o.value)?(u(c),i):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return ro(this._ctx,function(i){return n(i.value)}),dc(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,u){n(u.key,u)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,u){n(u.primaryKey,u)})},t.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(u,c){o.push(c.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&Ar(i,!0)&&i.limit>0)return this._read(function(u){var c=ji(i,i.table.core.schema);return i.table.core.query({trans:u,values:!1,limit:i.limit,query:{index:c,range:i.range}})}).then(function(u){var c=u.result;return c}).then(n);i.keysOnly=!i.isMatch;var o=[];return this.each(function(u,c){o.push(c.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,i=n.index&&n.table.schema.idxByName[n.index];if(!i||!i.multi)return this;var o={};return ro(this._ctx,function(u){var c=u.primaryKey.toString(),d=b(o,c);return o[c]=!0,!d}),this},t.prototype.modify=function(n){var i=this,o=this._ctx;return this._write(function(u){var c;typeof n=="function"?c=n:c=function(L){return js(L,n)};var d=o.table.core,v=d.schema.primaryKey,p=v.outbound,_=v.extractKey,A=200,w=i.db._options.modifyChunkSize;w&&(typeof w=="object"?A=w[d.name]||w["*"]||200:A=w);var C=[],H=0,k=[],I=function(L,K){var j=K.failures,G=K.numFailures;H+=L-G;for(var B=0,Z=m(j);B<Z.length;B++){var J=Z[B];C.push(j[J])}},O=n===Vs;return i.clone().primaryKeys().then(function(L){var K=Ar(o)&&o.limit===1/0&&(typeof n!="function"||O)&&{index:o.index,range:o.range},j=function(G){var B=Math.min(A,L.length-G),Z=L.slice(G,G+B);return(O?Promise.resolve([]):d.getMany({trans:u,keys:Z,cache:"immutable"})).then(function(J){var X=[],le=[],De=p?[]:null,ee=O?Z:[];if(!O)for(var Te=0;Te<B;++Te){var fe=J[Te],Pe={value:Je(fe),primKey:L[G+Te]};c.call(Pe,Pe.value,Pe)!==!1&&(Pe.value==null?ee.push(L[G+Te]):!p&&Re(_(fe),_(Pe.value))!==0?(ee.push(L[G+Te]),X.push(Pe.value)):(le.push(Pe.value),p&&De.push(L[G+Te])))}return Promise.resolve(X.length>0&&d.mutate({trans:u,type:"add",values:X}).then(function(oe){for(var et in oe.failures)ee.splice(parseInt(et),1);I(X.length,oe)})).then(function(){return(le.length>0||K&&typeof n=="object")&&d.mutate({trans:u,type:"put",keys:De,values:le,criteria:K,changeSpec:typeof n!="function"&&n,isAdditionalChunk:G>0}).then(function(oe){return I(le.length,oe)})}).then(function(){return(ee.length>0||K&&O)&&d.mutate({trans:u,type:"delete",keys:ee,criteria:K,isAdditionalChunk:G>0}).then(function(oe){return Ki(o.table,ee,oe)}).then(function(oe){return I(ee.length,oe)})}).then(function(){return L.length>G+B&&j(G+A)})})};return j(0).then(function(){if(C.length>0)throw new Ne("Error modifying one or more objects",C,H,k);return L.length})})})},t.prototype.delete=function(){var n=this._ctx,i=n.range;return Ar(n)&&!n.table.schema.yProps&&(n.isPrimKey||i.type===3)?this._write(function(o){var u=n.table.core.schema.primaryKey,c=i;return n.table.core.count({trans:o,query:{index:u,range:c}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(v){var p=v.failures,_=v.numFailures;if(_)throw new Ne("Could not delete some values",Object.keys(p).map(function(A){return p[A]}),d-_);return d-_})})}):this.modify(Vs)},t})(),Vs=function(t,n){return n.value=null};function vc(t){return $r(hc.prototype,function(i,o){this.db=t;var u=Ns,c=null;if(o)try{u=o()}catch(_){c=_}var d=i._ctx,v=d.table,p=v.hook.reading.fire;this._ctx={table:v,index:d.index,isPrimKey:!d.index||v.schema.primKey.keyPath&&d.index===v.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:d.or,valueMapper:p!==xe?p:null}})}function pc(t,n){return t<n?-1:t===n?0:1}function mc(t,n){return t>n?-1:t===n?0:1}function Ut(t,n,i){var o=t instanceof Ws?new t.Collection(t):t;return o._ctx.error=i?new i(n):new TypeError(n),o}function Dr(t){return new t.Collection(t,function(){return Hs("")}).limit(0)}function yc(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function gc(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function _c(t,n,i,o,u,c){for(var d=Math.min(t.length,o.length),v=-1,p=0;p<d;++p){var _=n[p];if(_!==o[p])return u(t[p],i[p])<0?t.substr(0,p)+i[p]+i.substr(p+1):u(t[p],o[p])<0?t.substr(0,p)+o[p]+i.substr(p+1):v>=0?t.substr(0,v)+n[v]+i.substr(v+1):null;u(t[p],_)<0&&(v=p)}return d<o.length&&c==="next"?t+i.substr(t.length):d<t.length&&c==="prev"?t.substr(0,i.length):v<0?null:t.substr(0,v)+o[v]+i.substr(v+1)}function Gi(t,n,i,o){var u,c,d,v,p,_,A,w=i.length;if(!i.every(function(I){return typeof I=="string"}))return Ut(t,Ms);function C(I){u=yc(I),c=gc(I),d=I==="next"?pc:mc;var O=i.map(function(L){return{lower:c(L),upper:u(L)}}).sort(function(L,K){return d(L.lower,K.lower)});v=O.map(function(L){return L.upper}),p=O.map(function(L){return L.lower}),_=I,A=I==="next"?"":o}C("next");var H=new t.Collection(t,function(){return Mn(v[0],p[w-1]+o)});H._ondirectionchange=function(I){C(I)};var k=0;return H._addAlgorithm(function(I,O,L){var K=I.key;if(typeof K!="string")return!1;var j=c(K);if(n(j,p,k))return!0;for(var G=null,B=k;B<w;++B){var Z=_c(K,j,v[B],p[B],d,_);Z===null&&G===null?k=B+1:(G===null||d(G,Z)>0)&&(G=Z)}return O(G!==null?function(){I.continue(G+A)}:L),!1}),H}function Mn(t,n,i,o){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:o}}function Hs(t){return{type:1,lower:t,upper:t}}var Ws=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,i,o,u){o=o!==!1,u=u===!0;try{return this._cmp(n,i)>0||this._cmp(n,i)===0&&(o||u)&&!(o&&u)?Dr(this):new this.Collection(this,function(){return Mn(n,i,!o,!u)})}catch{return Ut(this,bn)}},t.prototype.equals=function(n){return n==null?Ut(this,bn):new this.Collection(this,function(){return Hs(n)})},t.prototype.above=function(n){return n==null?Ut(this,bn):new this.Collection(this,function(){return Mn(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?Ut(this,bn):new this.Collection(this,function(){return Mn(n,void 0,!1)})},t.prototype.below=function(n){return n==null?Ut(this,bn):new this.Collection(this,function(){return Mn(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?Ut(this,bn):new this.Collection(this,function(){return Mn(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?Ut(this,Ms):this.between(n,n+nr,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Gi(this,function(i,o){return i.indexOf(o[0])===0},[n],nr)},t.prototype.equalsIgnoreCase=function(n){return Gi(this,function(i,o){return i===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=Me.apply(Ae,arguments);return n.length===0?Dr(this):Gi(this,function(i,o){return o.indexOf(i)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=Me.apply(Ae,arguments);return n.length===0?Dr(this):Gi(this,function(i,o){return o.some(function(u){return i.indexOf(u)===0})},n,nr)},t.prototype.anyOf=function(){var n=this,i=Me.apply(Ae,arguments),o=this._cmp;try{i.sort(o)}catch{return Ut(this,bn)}if(i.length===0)return Dr(this);var u=new this.Collection(this,function(){return Mn(i[0],i[i.length-1])});u._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,i.sort(o)};var c=0;return u._addAlgorithm(function(d,v,p){for(var _=d.key;o(_,i[c])>0;)if(++c,c===i.length)return v(p),!1;return o(_,i[c])===0?!0:(v(function(){d.continue(i[c])}),!1)}),u},t.prototype.notEqual=function(n){return this.inAnyRange([[eo,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=Me.apply(Ae,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Ut(this,bn)}var i=n.reduce(function(o,u){return o?o.concat([[o[o.length-1][1],u]]):[[eo,u]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,i){var o=this,u=this._cmp,c=this._ascending,d=this._descending,v=this._min,p=this._max;if(n.length===0)return Dr(this);if(!n.every(function(B){return B[0]!==void 0&&B[1]!==void 0&&c(B[0],B[1])<=0}))return Ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",S.InvalidArgument);var _=!i||i.includeLowers!==!1,A=i&&i.includeUppers===!0;function w(B,Z){for(var J=0,X=B.length;J<X;++J){var le=B[J];if(u(Z[0],le[1])<0&&u(Z[1],le[0])>0){le[0]=v(le[0],Z[0]),le[1]=p(le[1],Z[1]);break}}return J===X&&B.push(Z),B}var C=c;function H(B,Z){return C(B[0],Z[0])}var k;try{k=n.reduce(w,[]),k.sort(H)}catch{return Ut(this,bn)}var I=0,O=A?function(B){return c(B,k[I][1])>0}:function(B){return c(B,k[I][1])>=0},L=_?function(B){return d(B,k[I][0])>0}:function(B){return d(B,k[I][0])>=0};function K(B){return!O(B)&&!L(B)}var j=O,G=new this.Collection(this,function(){return Mn(k[0][0],k[k.length-1][1],!_,!A)});return G._ondirectionchange=function(B){B==="next"?(j=O,C=c):(j=L,C=d),k.sort(H)},G._addAlgorithm(function(B,Z,J){for(var X=B.key;j(X);)if(++I,I===k.length)return Z(J),!1;return K(X)?!0:(o._cmp(X,k[I][1])===0||o._cmp(X,k[I][0])===0||Z(function(){C===c?B.continue(k[I][0]):B.continue(k[I][1])}),!1)}),G},t.prototype.startsWithAnyOf=function(){var n=Me.apply(Ae,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?Dr(this):this.inAnyRange(n.map(function(i){return[i,i+nr]})):Ut(this,"startsWithAnyOf() only works with strings")},t})();function bc(t){return $r(Ws.prototype,function(i,o,u){if(this.db=t,this._ctx={table:i,index:o===":id"?null:o,or:u},this._cmp=this._ascending=Re,this._descending=function(c,d){return Re(d,c)},this._max=function(c,d){return Re(c,d)>0?c:d},this._min=function(c,d){return Re(c,d)<0?c:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new S.MissingAPI})}function ln(t){return We(function(n){return Jr(n),t(n.target.error),!1})}function Jr(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ei="storagemutated",ao="x-storagemutated-1",Nn=Xr(null,ei),wc=(function(){function t(){}return t.prototype._lock=function(){return ue(!ae.global),++this._reculock,this._reculock===1&&!ae.global&&(ae.lockOwnerFor=this),this},t.prototype._unlock=function(){if(ue(!ae.global),--this._reculock===0)for(ae.global||(ae.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{tr(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&ae.lockOwnerFor!==this},t.prototype.create=function(n){var i=this;if(!this.mode)return this;var o=this.db.idbdb,u=this.db._state.dbOpenError;if(ue(!this.idbtrans),!n&&!o)switch(u&&u.name){case"DatabaseClosedError":throw new S.DatabaseClosed(u);case"MissingAPIError":throw new S.MissingAPI(u.message,u);default:throw new S.OpenFailed(u)}if(!this.active)throw new S.TransactionInactive;return ue(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=We(function(c){Jr(c),i._reject(n.error)}),n.onabort=We(function(c){Jr(c),i.active&&i._reject(new S.Abort(n.error)),i.active=!1,i.on("abort").fire(c)}),n.oncomplete=We(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&Nn.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,i,o){var u=this;if(n==="readwrite"&&this.mode!=="readwrite")return it(new S.ReadOnly("Transaction is readonly"));if(!this.active)return it(new S.TransactionInactive);if(this._locked())return new $(function(d,v){u._blockedFuncs.push([function(){u._promise(n,i,o).then(d,v)},ae])});if(o)return Rn(function(){var d=new $(function(v,p){u._lock();var _=i(v,p,u);_&&_.then&&_.then(v,p)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var c=new $(function(d,v){var p=i(d,v,u);p&&p.then&&p.then(d,v)});return c._lib=!0,c},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var i=this._root(),o=$.resolve(n);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var u=i.idbtrans.objectStore(i.storeNames[0]);(function d(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(u.get(-1/0).onsuccess=d)})()}var c=i._waitingFor;return new $(function(d,v){o.then(function(p){return i._waitingQueue.push(We(d.bind(null,p)))},function(p){return i._waitingQueue.push(We(v.bind(null,p)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new S.Abort))},t.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(b(i,n))return i[n];var o=this.schema[n];if(!o)throw new S.NotFound("Table "+n+" not part of transaction");var u=new this.db.Table(n,o,this);return u.core=this.db.core.table(n),i[n]=u,u},t})();function Ec(t){return $r(wc.prototype,function(i,o,u,c,d){var v=this;i!=="readonly"&&o.forEach(function(p){var _,A=(_=u[p])===null||_===void 0?void 0:_.yProps;A&&(o=o.concat(A.map(function(w){return w.updatesTable})))}),this.db=t,this.mode=i,this.storeNames=o,this.schema=u,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=Xr(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new $(function(p,_){v._resolve=p,v._reject=_}),this._completion.then(function(){v.active=!1,v.on.complete.fire()},function(p){var _=v.active;return v.active=!1,v.on.error.fire(p),v.parent?v.parent._reject(p):_&&v.idbtrans&&v.idbtrans.abort(),it(p)})})}function oo(t,n,i,o,u,c,d,v){return{name:t,keyPath:n,unique:i,multi:o,auto:u,compound:c,src:(i&&!d?"&":"")+(o?"*":"")+(u?"++":"")+Ys(n),type:v}}function Ys(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function so(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:_e(i,function(o){return[o.name,o]})}}function xc(t){return t.length===1?t[0]:t}var ti=function(t){try{return t.only([[]]),ti=function(){return[[]]},[[]]}catch{return ti=function(){return nr},nr}};function uo(t){return t==null?function(){}:typeof t=="string"?Tc(t):function(n){return de(n,t)}}function Tc(t){var n=t.split(".");return n.length===1?function(i){return i[t]}:function(i){return de(i,t)}}function qs(t){return[].slice.call(t)}var kc=0;function ni(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Ac(t,n,i){function o(w,C){var H=qs(w.objectStoreNames);return{schema:{name:w.name,tables:H.map(function(k){return C.objectStore(k)}).map(function(k){var I=k.keyPath,O=k.autoIncrement,L=g(I),K=I==null,j={},G={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:K,compound:L,keyPath:I,autoIncrement:O,unique:!0,extractKey:uo(I)},indexes:qs(k.indexNames).map(function(B){return k.index(B)}).map(function(B){var Z=B.name,J=B.unique,X=B.multiEntry,le=B.keyPath,De=g(le),ee={name:Z,compound:De,keyPath:le,unique:J,multiEntry:X,extractKey:uo(le)};return j[ni(le)]=ee,ee}),getIndexByKeyPath:function(B){return j[ni(B)]}};return j[":id"]=G.primaryKey,I!=null&&(j[ni(I)]=G.primaryKey),G})},hasGetAll:H.length>0&&"getAll"in C.objectStore(H[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function u(w){if(w.type===3)return null;if(w.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var C=w.lower,H=w.upper,k=w.lowerOpen,I=w.upperOpen,O=C===void 0?H===void 0?null:n.upperBound(H,!!I):H===void 0?n.lowerBound(C,!!k):n.bound(C,H,!!k,!!I);return O}function c(w){var C=w.name;function H(O){var L=O.trans,K=O.type,j=O.keys,G=O.values,B=O.range;return new Promise(function(Z,J){Z=We(Z);var X=L.objectStore(C),le=X.keyPath==null,De=K==="put"||K==="add";if(!De&&K!=="delete"&&K!=="deleteRange")throw new Error("Invalid operation type: "+K);var ee=(j||G||{length:1}).length;if(j&&G&&j.length!==G.length)throw new Error("Given keys array must have same length as given values array.");if(ee===0)return Z({numFailures:0,failures:{},results:[],lastResult:void 0});var Te,fe=[],Pe=[],oe=0,et=function(fn){++oe,Jr(fn)};if(K==="deleteRange"){if(B.type===4)return Z({numFailures:oe,failures:Pe,results:[],lastResult:void 0});B.type===3?fe.push(Te=X.clear()):fe.push(Te=X.delete(u(B)))}else{var bt=De?le?[G,j]:[G,null]:[j,null],cn=bt[0],Pt=bt[1];if(De)for(var Wt=0;Wt<ee;++Wt)fe.push(Te=Pt&&Pt[Wt]!==void 0?X[K](cn[Wt],Pt[Wt]):X[K](cn[Wt])),Te.onerror=et;else for(var Wt=0;Wt<ee;++Wt)fe.push(Te=X[K](cn[Wt])),Te.onerror=et}var Kn=function(fn){var ai=fn.target.result;fe.forEach(function(nn,ea){return nn.error!=null&&(Pe[ea]=nn.error)}),Z({numFailures:oe,failures:Pe,results:K==="delete"?j:fe.map(function(nn){return nn.result}),lastResult:ai})};Te.onerror=function(fn){et(fn),Kn(fn)},Te.onsuccess=Kn})}function k(O){var L=O.trans,K=O.values,j=O.query,G=O.reverse,B=O.unique;return new Promise(function(Z,J){Z=We(Z);var X=j.index,le=j.range,De=L.objectStore(C),ee=X.isPrimaryKey?De:De.index(X.name),Te=G?B?"prevunique":"prev":B?"nextunique":"next",fe=K||!("openKeyCursor"in ee)?ee.openCursor(u(le),Te):ee.openKeyCursor(u(le),Te);fe.onerror=ln(J),fe.onsuccess=We(function(Pe){var oe=fe.result;if(!oe){Z(null);return}oe.___id=++kc,oe.done=!1;var et=oe.continue.bind(oe),bt=oe.continuePrimaryKey;bt&&(bt=bt.bind(oe));var cn=oe.advance.bind(oe),Pt=function(){throw new Error("Cursor not started")},Wt=function(){throw new Error("Cursor not stopped")};oe.trans=L,oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=Pt,oe.fail=We(J),oe.next=function(){var Kn=this,fn=1;return this.start(function(){return fn--?Kn.continue():Kn.stop()}).then(function(){return Kn})},oe.start=function(Kn){var fn=new Promise(function(nn,ea){nn=We(nn),fe.onerror=ln(ea),oe.fail=ea,oe.stop=function(vf){oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=Wt,nn(vf)}}),ai=function(){if(fe.result)try{Kn()}catch(nn){oe.fail(nn)}else oe.done=!0,oe.start=function(){throw new Error("Cursor behind last entry")},oe.stop()};return fe.onsuccess=We(function(nn){fe.onsuccess=ai,ai()}),oe.continue=et,oe.continuePrimaryKey=bt,oe.advance=cn,ai(),fn},Z(oe)},J)})}function I(O){return function(L){return new Promise(function(K,j){K=We(K);var G=L.trans,B=L.values,Z=L.limit,J=L.query,X=Z===1/0?void 0:Z,le=J.index,De=J.range,ee=G.objectStore(C),Te=le.isPrimaryKey?ee:ee.index(le.name),fe=u(De);if(Z===0)return K({result:[]});if(O){var Pe=B?Te.getAll(fe,X):Te.getAllKeys(fe,X);Pe.onsuccess=function(cn){return K({result:cn.target.result})},Pe.onerror=ln(j)}else{var oe=0,et=B||!("openKeyCursor"in Te)?Te.openCursor(fe):Te.openKeyCursor(fe),bt=[];et.onsuccess=function(cn){var Pt=et.result;if(!Pt)return K({result:bt});if(bt.push(B?Pt.value:Pt.primaryKey),++oe===Z)return K({result:bt});Pt.continue()},et.onerror=ln(j)}})}}return{name:C,schema:w,mutate:H,getMany:function(O){var L=O.trans,K=O.keys;return new Promise(function(j,G){j=We(j);for(var B=L.objectStore(C),Z=K.length,J=new Array(Z),X=0,le=0,De,ee=function(oe){var et=oe.target;(J[et._pos]=et.result)!=null,++le===X&&j(J)},Te=ln(G),fe=0;fe<Z;++fe){var Pe=K[fe];Pe!=null&&(De=B.get(K[fe]),De._pos=fe,De.onsuccess=ee,De.onerror=Te,++X)}X===0&&j(J)})},get:function(O){var L=O.trans,K=O.key;return new Promise(function(j,G){j=We(j);var B=L.objectStore(C),Z=B.get(K);Z.onsuccess=function(J){return j(J.target.result)},Z.onerror=ln(G)})},query:I(p),openCursor:k,count:function(O){var L=O.query,K=O.trans,j=L.index,G=L.range;return new Promise(function(B,Z){var J=K.objectStore(C),X=j.isPrimaryKey?J:J.index(j.name),le=u(G),De=le?X.count(le):X.count();De.onsuccess=We(function(ee){return B(ee.target.result)}),De.onerror=ln(Z)})}}}var d=o(t,i),v=d.schema,p=d.hasGetAll,_=v.tables.map(function(w){return c(w)}),A={};return _.forEach(function(w){return A[w.name]=w}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(w){var C=A[w];if(!C)throw new Error("Table '".concat(w,"' not found"));return A[w]},MIN_KEY:-1/0,MAX_KEY:ti(n),schema:v}}function Dc(t,n){return n.reduce(function(i,o){var u=o.create;return l(l({},i),u(i))},t)}function Ic(t,n,i,o){var u=i.IDBKeyRange;i.indexedDB;var c=Dc(Ac(n,u,o),t.dbcore);return{dbcore:c}}function Ui(t,n){var i=n.db,o=Ic(t._middlewares,i,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(u){var c=u.name;t.core.schema.tables.some(function(d){return d.name===c})&&(u.core=t.core.table(c),t[c]instanceof t.Table&&(t[c].core=u.core))})}function Vi(t,n,i,o){i.forEach(function(u){var c=o[u];n.forEach(function(d){var v=U(d,u);(!v||"value"in v&&v.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?P(d,u,{get:function(){return this.table(u)},set:function(p){N(this,u,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new t.Table(u,c))})})}function lo(t,n){n.forEach(function(i){for(var o in i)i[o]instanceof t.Table&&delete i[o]})}function Sc(t,n){return t._cfg.version-n._cfg.version}function Oc(t,n,i,o){var u=t._dbSchema;i.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=so("$meta",Qs("")[0],[]),t._storeNames.push("$meta"));var c=t._createTransaction("readwrite",t._storeNames,u);c.create(i),c._completion.catch(o);var d=c._reject.bind(c),v=ae.transless||ae;Rn(function(){if(ae.trans=c,ae.transless=v,n===0)m(u).forEach(function(p){fo(i,p,u[p].primKey,u[p].indexes)}),Ui(t,i),$.follow(function(){return t.on.populate.fire(c)}).catch(d);else return Ui(t,i),Rc(t,c,n).then(function(p){return Pc(t,p,c,i)}).catch(d)})}function Cc(t,n){Zs(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=Wi(t,t.idbdb,n);Yi(t,t._dbSchema,n);for(var o=co(i,t._dbSchema),u=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var A=n.objectStore(_.name);_.add.forEach(function(w){Rt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(w.src)),Hi(A,w)})},c=0,d=o.change;c<d.length;c++){var v=d[c],p=u(v);if(typeof p=="object")return p.value}}function Rc(t,n,i){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??i}):$.resolve(i)}function Pc(t,n,i,o){var u=[],c=t._versions,d=t._dbSchema=Wi(t,t.idbdb,o),v=c.filter(function(_){return _._cfg.version>=n});if(v.length===0)return $.resolve();v.forEach(function(_){u.push(function(){var A=d,w=_._cfg.dbschema;Yi(t,A,o),Yi(t,w,o),d=t._dbSchema=w;var C=co(A,w);C.add.forEach(function(K){fo(o,K[0],K[1].primKey,K[1].indexes)}),C.change.forEach(function(K){if(K.recreate)throw new S.Upgrade("Not yet support for changing primary key");var j=o.objectStore(K.name);K.add.forEach(function(G){return Hi(j,G)}),K.change.forEach(function(G){j.deleteIndex(G.name),Hi(j,G)}),K.del.forEach(function(G){return j.deleteIndex(G)})});var H=_._cfg.contentUpgrade;if(H&&_._cfg.version>n){Ui(t,o),i._memoizedTables={};var k=pe(w);C.del.forEach(function(K){k[K]=A[K]}),lo(t,[t.Transaction.prototype]),Vi(t,[t.Transaction.prototype],m(k),k),i.schema=k;var I=Ze(H);I&&Tr();var O,L=$.follow(function(){if(O=H(i),O&&I){var K=Pn.bind(null,null);O.then(K,K)}});return O&&typeof O.then=="function"?$.resolve(O):L.then(function(){return O})}}),u.push(function(A){var w=_._cfg.dbschema;Lc(w,A),lo(t,[t.Transaction.prototype]),Vi(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),i.schema=t._dbSchema}),u.push(function(A){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===_._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(w){return w!=="$meta"})):A.objectStore("$meta").put(_._cfg.version,"version"))})});function p(){return u.length?$.resolve(u.shift()(i.idbtrans)).then(p):$.resolve()}return p().then(function(){Zs(d,o)})}function co(t,n){var i={del:[],add:[],change:[]},o;for(o in t)n[o]||i.del.push(o);for(o in n){var u=t[o],c=n[o];if(!u)i.add.push([o,c]);else{var d={name:o,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)d.recreate=!0,i.change.push(d);else{var v=u.idxByName,p=c.idxByName,_=void 0;for(_ in v)p[_]||d.del.push(_);for(_ in p){var A=v[_],w=p[_];A?A.src!==w.src&&d.change.push(w):d.add.push(w)}(d.del.length>0||d.add.length>0||d.change.length>0)&&i.change.push(d)}}}return i}function fo(t,n,i,o){var u=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(c){return Hi(u,c)}),u}function Zs(t,n){m(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(Rt&&console.debug("Dexie: Creating missing table",i),fo(n,i,t[i].primKey,t[i].indexes))})}function Lc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(i){return t[i]==null&&n.db.deleteObjectStore(i)})}function Hi(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Wi(t,n,i){var o={},u=W(n.objectStoreNames,0);return u.forEach(function(c){for(var d=i.objectStore(c),v=d.keyPath,p=oo(Ys(v),v||"",!0,!1,!!d.autoIncrement,v&&typeof v!="string",!0),_=[],A=0;A<d.indexNames.length;++A){var w=d.index(d.indexNames[A]);v=w.keyPath;var C=oo(w.name,v,!!w.unique,!!w.multiEntry,!1,v&&typeof v!="string",!1);_.push(C)}o[c]=so(c,p,_)}),o}function Mc(t,n,i){t.verno=n.version/10;var o=t._dbSchema=Wi(t,n,i);t._storeNames=W(n.objectStoreNames,0),Vi(t,[t._allTables],m(o),o)}function Nc(t,n){var i=Wi(t,t.idbdb,n),o=co(i,t._dbSchema);return!(o.add.length||o.change.some(function(u){return u.add.length||u.change.length}))}function Yi(t,n,i){for(var o=i.db.objectStoreNames,u=0;u<o.length;++u){var c=o[u],d=i.objectStore(c);t._hasGetAll="getAll"in d;for(var v=0;v<d.indexNames.length;++v){var p=d.indexNames[v],_=d.index(p).keyPath,A=typeof _=="string"?_:"["+W(_).join("+")+"]";if(n[c]){var w=n[c].idxByName[A];w&&(w.name=p,delete n[c].idxByName[A],n[c].idxByName[p]=w)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Qs(t){return t.split(",").map(function(n,i){var o,u=n.split(":"),c=(o=u[1])===null||o===void 0?void 0:o.trim();n=u[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),v=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return oo(d,v||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),g(v),i===0,c)})}var Fc=(function(){function t(){}return t.prototype._createTableSchema=function(n,i,o){return so(n,i,o)},t.prototype._parseIndexSyntax=function(n){return Qs(n)},t.prototype._parseStoresSpec=function(n,i){var o=this;m(n).forEach(function(u){if(n[u]!==null){var c=o._parseIndexSyntax(n[u]),d=c.shift();if(!d)throw new S.Schema("Invalid schema for table "+u+": "+n[u]);if(d.unique=!0,d.multi)throw new S.Schema("Primary key cannot be multiEntry*");c.forEach(function(p){if(p.auto)throw new S.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new S.Schema("Index must have a name and cannot be an empty string")});var v=o._createTableSchema(u,d,c);i[u]=v}})},t.prototype.stores=function(n){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?x(this._cfg.storesSource,n):n;var o=i._versions,u={},c={};return o.forEach(function(d){x(u,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(u,c)}),i._dbSchema=c,lo(i,[i._allTables,i,i.Transaction.prototype]),Vi(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],m(c),c),i._storeNames=m(c),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=It(this._cfg.contentUpgrade||te,n),this},t})();function Bc(t){return $r(Fc.prototype,function(i){this.db=t,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ho(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new wn(Fi,{addons:[],indexedDB:t,IDBKeyRange:n}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function vo(t){return t&&typeof t.databases=="function"}function Kc(t){var n=t.indexedDB,i=t.IDBKeyRange;return vo(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(u){return u.name}).filter(function(u){return u!==Fi})}):ho(n,i).toCollection().primaryKeys()}function jc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!vo(i)&&n!==Fi&&ho(i,o).put({name:n}).catch(te)}function zc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!vo(i)&&n!==Fi&&ho(i,o).delete(n).catch(te)}function po(t){return Rn(function(){return ae.letThrough=!0,t()})}function Gc(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var mo;function yo(t){return!("from"in t)}var _t=function(t,n){if(this)x(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var i=new _t;return t&&"d"in t&&x(i,t),i}};T(_t.prototype,(mo={add:function(t){return ii(this,t),this},addKey:function(t){return ri(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return ri(n,i,i)}),this},hasKey:function(t){var n=qi(this).next(t).value;return n&&Re(n.from,t)<=0&&Re(n.to,t)>=0}},mo[gt]=function(){return qi(this)},mo));function ri(t,n,i){var o=Re(n,i);if(!isNaN(o)){if(o>0)throw RangeError();if(yo(t))return x(t,{from:n,to:i,d:1});var u=t.l,c=t.r;if(Re(i,t.from)<0)return u?ri(u,n,i):t.l={from:n,to:i,d:1,l:null,r:null},$s(t);if(Re(n,t.to)>0)return c?ri(c,n,i):t.r={from:n,to:i,d:1,l:null,r:null},$s(t);Re(n,t.from)<0&&(t.from=n,t.l=null,t.d=c?c.d+1:1),Re(i,t.to)>0&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;u&&!t.l&&ii(t,u),c&&d&&ii(t,c)}}function ii(t,n){function i(o,u){var c=u.from,d=u.to,v=u.l,p=u.r;ri(o,c,d),v&&i(o,v),p&&i(o,p)}yo(n)||i(t,n)}function Xs(t,n){var i=qi(n),o=i.next();if(o.done)return!1;for(var u=o.value,c=qi(t),d=c.next(u.from),v=d.value;!o.done&&!d.done;){if(Re(v.from,u.to)<=0&&Re(v.to,u.from)>=0)return!0;Re(u.from,v.from)<0?u=(o=i.next(v.from)).value:v=(d=c.next(u.from)).value}return!1}function qi(t){var n=yo(t)?null:{s:0,n:t};return{next:function(i){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&Re(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||Re(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function $s(t){var n,i,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),u=o>1?"r":o<-1?"l":"";if(u){var c=u==="r"?"l":"r",d=l({},t),v=t[u];t.from=v.from,t.to=v.to,t[u]=v[u],d[u]=v[c],t[c]=d,d.d=Js(d)}t.d=Js(t)}function Js(t){var n=t.r,i=t.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function Zi(t,n){return m(n).forEach(function(i){t[i]?ii(t[i],n[i]):t[i]=je(n[i])}),t}function go(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&Xs(n[i],t[i])})}var ir={},_o={},bo=!1;function Qi(t,n){Zi(_o,t),bo||(bo=!0,setTimeout(function(){bo=!1;var i=_o;_o={},wo(i,!1)},0))}function wo(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var o=0,u=Object.values(ir);o<u.length;o++){var c=u[o];eu(c,t,i,n)}else for(var d in t){var v=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(v){var p=v[1],_=v[2],c=ir["idb://".concat(p,"/").concat(_)];c&&eu(c,t,i,n)}}i.forEach(function(A){return A()})}function eu(t,n,i,o){for(var u=[],c=0,d=Object.entries(t.queries.query);c<d.length;c++){for(var v=d[c],p=v[0],_=v[1],A=[],w=0,C=_;w<C.length;w++){var H=C[w];go(n,H.obsSet)?H.subscribers.forEach(function(L){return i.add(L)}):o&&A.push(H)}o&&u.push([p,A])}if(o)for(var k=0,I=u;k<I.length;k++){var O=I[k],p=O[0],A=O[1];t.queries.query[p]=A}}function Uc(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?it(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,u=Math.round(t.verno*10),c=!1;function d(){if(n.openCanceller!==o)throw new S.DatabaseClosed("db.open() was cancelled")}var v=n.dbReadyResolve,p=null,_=!1,A=function(){return new $(function(w,C){if(d(),!i)throw new S.MissingAPI;var H=t.name,k=n.autoSchema||!u?i.open(H):i.open(H,u);if(!k)throw new S.MissingAPI;k.onerror=ln(C),k.onblocked=We(t._fireOnBlocked),k.onupgradeneeded=We(function(I){if(p=k.transaction,n.autoSchema&&!t._options.allowEmptyDB){k.onerror=Jr,p.abort(),k.result.close();var O=i.deleteDatabase(H);O.onsuccess=O.onerror=We(function(){C(new S.NoSuchDatabase("Database ".concat(H," doesnt exist")))})}else{p.onerror=ln(C);var L=I.oldVersion>Math.pow(2,62)?0:I.oldVersion;_=L<1,t.idbdb=k.result,c&&Cc(t,p),Oc(t,L/10,p,C)}},C),k.onsuccess=We(function(){p=null;var I=t.idbdb=k.result,O=W(I.objectStoreNames);if(O.length>0)try{var L=I.transaction(xc(O),"readonly");if(n.autoSchema)Mc(t,I,L);else if(Yi(t,t._dbSchema,L),!Nc(t,L)&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),I.close(),u=I.version+1,c=!0,w(A());Ui(t,L)}catch{}kr.push(t),I.onversionchange=We(function(K){n.vcFired=!0,t.on("versionchange").fire(K)}),I.onclose=We(function(){t.close({disableAutoOpen:!1})}),_&&jc(t._deps,H),w()},C)}).catch(function(w){switch(w?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),A();break;case"VersionError":if(u>0)return u=0,A();break}return $.reject(w)})};return $.race([o,(typeof navigator>"u"?$.resolve():Gc()).then(A)]).then(function(){return d(),n.onReadyBeingFired=[],$.resolve(po(function(){return t.on.ready.fire(t.vip)})).then(function w(){if(n.onReadyBeingFired.length>0){var C=n.onReadyBeingFired.reduce(It,te);return n.onReadyBeingFired=[],$.resolve(po(function(){return C(t.vip)})).then(w)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(w){n.dbOpenError=w;try{p&&p.abort()}catch{}return o===n.openCanceller&&t._close(),it(w)}).finally(function(){n.openComplete=!0,v()}).then(function(){if(_){var w={};t.tables.forEach(function(C){C.schema.indexes.forEach(function(H){H.name&&(w["idb://".concat(t.name,"/").concat(C.name,"/").concat(H.name)]=new _t(-1/0,[[[]]]))}),w["idb://".concat(t.name,"/").concat(C.name,"/")]=w["idb://".concat(t.name,"/").concat(C.name,"/:dels")]=new _t(-1/0,[[[]]])}),Nn(ei).fire(w),wo(w,!0)}return t})}function Eo(t){var n=function(d){return t.next(d)},i=function(d){return t.throw(d)},o=c(n),u=c(i);function c(d){return function(v){var p=d(v),_=p.value;return p.done?_:!_||typeof _.then!="function"?g(_)?Promise.all(_).then(o,u):o(_):_.then(o,u)}}return c(n)()}function Vc(t,n,i){var o=arguments.length;if(o<2)throw new S.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];i=u.pop();var c=ze(u);return[t,c,i]}function tu(t,n,i,o,u){return $.resolve().then(function(){var c=ae.transless||ae,d=t._createTransaction(n,i,t._dbSchema,o);d.explicit=!0;var v={trans:d,transless:c};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(w){return w.name===Qe.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return tu(t,n,i,null,u)})):it(w)}var p=Ze(u);p&&Tr();var _,A=$.follow(function(){if(_=u.call(d,d),_)if(p){var w=Pn.bind(null,null);_.then(w,w)}else typeof _.next=="function"&&typeof _.throw=="function"&&(_=Eo(_))},v);return(_&&typeof _.then=="function"?$.resolve(_).then(function(w){return d.active?w:it(new S.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return _})).then(function(w){return o&&d._resolve(),d._completion.then(function(){return w})}).catch(function(w){return d._reject(w),it(w)})})}function Xi(t,n,i){for(var o=g(t)?t.slice():[t],u=0;u<i;++u)o.push(n);return o}function Hc(t){return l(l({},t),{table:function(n){var i=t.table(n),o=i.schema,u={},c=[];function d(I,O,L){var K=ni(I),j=u[K]=u[K]||[],G=I==null?0:typeof I=="string"?1:I.length,B=O>0,Z=l(l({},L),{name:B?"".concat(K,"(virtual-from:").concat(L.name,")"):L.name,lowLevelIndex:L,isVirtual:B,keyTail:O,keyLength:G,extractKey:uo(I),unique:!B&&L.unique});if(j.push(Z),Z.isPrimaryKey||c.push(Z),G>1){var J=G===2?I[0]:I.slice(0,G-1);d(J,O+1,L)}return j.sort(function(X,le){return X.keyTail-le.keyTail}),Z}var v=d(o.primaryKey.keyPath,0,o.primaryKey);u[":id"]=[v];for(var p=0,_=o.indexes;p<_.length;p++){var A=_[p];d(A.keyPath,0,A)}function w(I){var O=u[ni(I)];return O&&O[0]}function C(I,O){return{type:I.type===1?2:I.type,lower:Xi(I.lower,I.lowerOpen?t.MAX_KEY:t.MIN_KEY,O),lowerOpen:!0,upper:Xi(I.upper,I.upperOpen?t.MIN_KEY:t.MAX_KEY,O),upperOpen:!0}}function H(I){var O=I.query.index;return O.isVirtual?l(l({},I),{query:{index:O.lowLevelIndex,range:C(I.query.range,O.keyTail)}}):I}var k=l(l({},i),{schema:l(l({},o),{primaryKey:v,indexes:c,getIndexByKeyPath:w}),count:function(I){return i.count(H(I))},query:function(I){return i.query(H(I))},openCursor:function(I){var O=I.query.index,L=O.keyTail,K=O.isVirtual,j=O.keyLength;if(!K)return i.openCursor(I);function G(B){function Z(X){X!=null?B.continue(Xi(X,I.reverse?t.MAX_KEY:t.MIN_KEY,L)):I.unique?B.continue(B.key.slice(0,j).concat(I.reverse?t.MIN_KEY:t.MAX_KEY,L)):B.continue()}var J=Object.create(B,{continue:{value:Z},continuePrimaryKey:{value:function(X,le){B.continuePrimaryKey(Xi(X,t.MAX_KEY,L),le)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var X=B.key;return j===1?X[0]:X.slice(0,j)}},value:{get:function(){return B.value}}});return J}return i.openCursor(H(I)).then(function(B){return B&&G(B)})}});return k}})}var Wc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Hc};function xo(t,n,i,o){return i=i||{},o=o||"",m(t).forEach(function(u){if(!b(n,u))i[o+u]=void 0;else{var c=t[u],d=n[u];if(typeof c=="object"&&typeof d=="object"&&c&&d){var v=en(c),p=en(d);v!==p?i[o+u]=n[u]:v==="Object"?xo(c,d,i,o+u+"."):c!==d&&(i[o+u]=n[u])}else c!==d&&(i[o+u]=n[u])}}),m(n).forEach(function(u){b(t,u)||(i[o+u]=n[u])}),i}function To(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var Yc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return l(l({},t),{table:function(n){var i=t.table(n),o=i.schema.primaryKey,u=l(l({},i),{mutate:function(c){var d=ae.trans,v=d.table(n).hook,p=v.deleting,_=v.creating,A=v.updating;switch(c.type){case"add":if(_.fire===te)break;return d._promise("readwrite",function(){return w(c)},!0);case"put":if(_.fire===te&&A.fire===te)break;return d._promise("readwrite",function(){return w(c)},!0);case"delete":if(p.fire===te)break;return d._promise("readwrite",function(){return w(c)},!0);case"deleteRange":if(p.fire===te)break;return d._promise("readwrite",function(){return C(c)},!0)}return i.mutate(c);function w(k){var I=ae.trans,O=k.keys||To(o,k);if(!O)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?l(l({},k),{keys:O}):l({},k),k.type!=="delete"&&(k.values=f([],k.values)),k.keys&&(k.keys=f([],k.keys)),qc(i,k,O).then(function(L){var K=O.map(function(j,G){var B=L[G],Z={onerror:null,onsuccess:null};if(k.type==="delete")p.fire.call(Z,j,B,I);else if(k.type==="add"||B===void 0){var J=_.fire.call(Z,j,k.values[G],I);j==null&&J!=null&&(j=J,k.keys[G]=j,o.outbound||be(k.values[G],o.keyPath,j))}else{var X=xo(B,k.values[G]),le=A.fire.call(Z,X,j,B,I);if(le){var De=k.values[G];Object.keys(le).forEach(function(ee){b(De,ee)?De[ee]=le[ee]:be(De,ee,le[ee])})}}return Z});return i.mutate(k).then(function(j){for(var G=j.failures,B=j.results,Z=j.numFailures,J=j.lastResult,X=0;X<O.length;++X){var le=B?B[X]:O[X],De=K[X];le==null?De.onerror&&De.onerror(G[X]):De.onsuccess&&De.onsuccess(k.type==="put"&&L[X]?k.values[X]:le)}return{failures:G,results:B,numFailures:Z,lastResult:J}}).catch(function(j){return K.forEach(function(G){return G.onerror&&G.onerror(j)}),Promise.reject(j)})})}function C(k){return H(k.trans,k.range,1e4)}function H(k,I,O){return i.query({trans:k,values:!1,query:{index:o,range:I},limit:O}).then(function(L){var K=L.result;return w({type:"delete",keys:K,trans:k}).then(function(j){return j.numFailures>0?Promise.reject(j.failures[0]):K.length<O?{failures:[],numFailures:0,lastResult:void 0}:H(k,l(l({},I),{lower:K[K.length-1],lowerOpen:!0}),O)})})}}});return u}})}};function qc(t,n,i){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:i,cache:"immutable"})}function nu(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var o=[],u=0,c=0;u<n.keys.length&&c<t.length;++u)Re(n.keys[u],t[c])===0&&(o.push(i?Je(n.values[u]):n.values[u]),++c);return o.length===t.length?o:null}catch{return null}}var Zc={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return l(l({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var u=nu(o.keys,o.trans._cache,o.cache==="clone");return u?$.resolve(u):i.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?Je(c):c},c})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function ru(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function iu(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Qc={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new _t(t.MIN_KEY,t.MAX_KEY);return l(l({},t),{transaction:function(o,u,c){if(ae.subscr&&u!=="readonly")throw new S.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ae.querier));return t.transaction(o,u,c)},table:function(o){var u=t.table(o),c=u.schema,d=c.primaryKey,v=c.indexes,p=d.extractKey,_=d.outbound,A=d.autoIncrement&&v.filter(function(k){return k.compound&&k.keyPath.includes(d.keyPath)}),w=l(l({},u),{mutate:function(k){var I,O,L=k.trans,K=k.mutatedParts||(k.mutatedParts={}),j=function(fe){var Pe="idb://".concat(n,"/").concat(o,"/").concat(fe);return K[Pe]||(K[Pe]=new _t)},G=j(""),B=j(":dels"),Z=k.type,J=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[To(d,k).filter(function(fe){return fe}),k.values]:[],X=J[0],le=J[1],De=k.trans._cache;if(g(X)){G.addKeys(X);var ee=Z==="delete"||X.length===le.length?nu(X,De):null;ee||B.addKeys(X),(ee||le)&&Xc(j,c,ee,le)}else if(X){var Te={from:(I=X.lower)!==null&&I!==void 0?I:t.MIN_KEY,to:(O=X.upper)!==null&&O!==void 0?O:t.MAX_KEY};B.add(Te),G.add(Te)}else G.add(i),B.add(i),c.indexes.forEach(function(fe){return j(fe.name).add(i)});return u.mutate(k).then(function(fe){return X&&(k.type==="add"||k.type==="put")&&(G.addKeys(fe.results),A&&A.forEach(function(Pe){for(var oe=k.values.map(function(Pt){return Pe.extractKey(Pt)}),et=Pe.keyPath.findIndex(function(Pt){return Pt===d.keyPath}),bt=0,cn=fe.results.length;bt<cn;++bt)oe[bt][et]=fe.results[bt];j(Pe.name).addKeys(oe)})),L.mutatedParts=Zi(L.mutatedParts||{},K),fe})}}),C=function(k){var I,O,L=k.query,K=L.index,j=L.range;return[K,new _t((I=j.lower)!==null&&I!==void 0?I:t.MIN_KEY,(O=j.upper)!==null&&O!==void 0?O:t.MAX_KEY)]},H={get:function(k){return[d,new _t(k.key)]},getMany:function(k){return[d,new _t().addKeys(k.keys)]},count:C,query:C,openCursor:C};return m(H).forEach(function(k){w[k]=function(I){var O=ae.subscr,L=!!O,K=ru(ae,u)&&iu(k,I),j=K?I.obsSet={}:O;if(L){var G=function(ee){var Te="idb://".concat(n,"/").concat(o,"/").concat(ee);return j[Te]||(j[Te]=new _t)},B=G(""),Z=G(":dels"),J=H[k](I),X=J[0],le=J[1];if(k==="query"&&X.isPrimaryKey&&!I.values?Z.add(le):G(X.name||"").add(le),!X.isPrimaryKey)if(k==="count")Z.add(i);else{var De=k==="query"&&_&&I.values&&u.query(l(l({},I),{values:!1}));return u[k].apply(this,arguments).then(function(ee){if(k==="query"){if(_&&I.values)return De.then(function(oe){var et=oe.result;return B.addKeys(et),ee});var Te=I.values?ee.result.map(p):ee.result;I.values?B.addKeys(Te):Z.addKeys(Te)}else if(k==="openCursor"){var fe=ee,Pe=I.values;return fe&&Object.create(fe,{key:{get:function(){return Z.addKey(fe.primaryKey),fe.key}},primaryKey:{get:function(){var oe=fe.primaryKey;return Z.addKey(oe),oe}},value:{get:function(){return Pe&&B.addKey(fe.primaryKey),fe.value}}})}return ee})}}return u[k].apply(this,arguments)}}),w}})}};function Xc(t,n,i,o){function u(c){var d=t(c.name||"");function v(_){return _!=null?c.extractKey(_):null}var p=function(_){return c.multiEntry&&g(_)?_.forEach(function(A){return d.addKey(A)}):d.addKey(_)};(i||o).forEach(function(_,A){var w=i&&v(i[A]),C=o&&v(o[A]);Re(w,C)!==0&&(w!=null&&p(w),C!=null&&p(C))})}n.indexes.forEach(u)}function au(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(i.numFailures===o)return null;var u=l({},n);return g(u.keys)&&(u.keys=u.keys.filter(function(c,d){return!(d in i.failures)})),"values"in u&&g(u.values)&&(u.values=u.values.filter(function(c,d){return!(d in i.failures)})),u}function $c(t,n){return n.lower===void 0?!0:n.lowerOpen?Re(t,n.lower)>0:Re(t,n.lower)>=0}function Jc(t,n){return n.upper===void 0?!0:n.upperOpen?Re(t,n.upper)<0:Re(t,n.upper)<=0}function ko(t,n){return $c(t,n)&&Jc(t,n)}function ou(t,n,i,o,u,c){if(!i||i.length===0)return t;var d=n.query.index,v=d.multiEntry,p=n.query.range,_=o.schema.primaryKey,A=_.extractKey,w=d.extractKey,C=(d.lowLevelIndex||d).extractKey,H=i.reduce(function(k,I){var O=k,L=[];if(I.type==="add"||I.type==="put")for(var K=new _t,j=I.values.length-1;j>=0;--j){var G=I.values[j],B=A(G);if(!K.hasKey(B)){var Z=w(G);(v&&g(Z)?Z.some(function(ee){return ko(ee,p)}):ko(Z,p))&&(K.addKey(B),L.push(G))}}switch(I.type){case"add":{var J=new _t().addKeys(n.values?k.map(function(ee){return A(ee)}):k);O=k.concat(n.values?L.filter(function(ee){var Te=A(ee);return J.hasKey(Te)?!1:(J.addKey(Te),!0)}):L.map(function(ee){return A(ee)}).filter(function(ee){return J.hasKey(ee)?!1:(J.addKey(ee),!0)}));break}case"put":{var X=new _t().addKeys(I.values.map(function(ee){return A(ee)}));O=k.filter(function(ee){return!X.hasKey(n.values?A(ee):ee)}).concat(n.values?L:L.map(function(ee){return A(ee)}));break}case"delete":var le=new _t().addKeys(I.keys);O=k.filter(function(ee){return!le.hasKey(n.values?A(ee):ee)});break;case"deleteRange":var De=I.range;O=k.filter(function(ee){return!ko(A(ee),De)});break}return O},t);return H===t?t:(H.sort(function(k,I){return Re(C(k),C(I))||Re(A(k),A(I))}),n.limit&&n.limit<1/0&&(H.length>n.limit?H.length=n.limit:t.length===n.limit&&H.length<n.limit&&(u.dirty=!0)),c?Object.freeze(H):H)}function su(t,n){return Re(t.lower,n.lower)===0&&Re(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function ef(t,n,i,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var u=Re(t,n);if(u===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return u}function tf(t,n,i,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var u=Re(t,n);if(u===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return u}function nf(t,n){return ef(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&tf(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function rf(t,n,i,o){var u=ir["idb://".concat(t,"/").concat(n)];if(!u)return[];var c=u.queries[i];if(!c)return[null,!1,u,null];var d=o.query?o.query.index.name:null,v=c[d||""];if(!v)return[null,!1,u,null];switch(i){case"query":var p=v.find(function(w){return w.req.limit===o.limit&&w.req.values===o.values&&su(w.req.query.range,o.query.range)});if(p)return[p,!0,u,v];var _=v.find(function(w){var C="limit"in w.req?w.req.limit:1/0;return C>=o.limit&&(o.values?w.req.values:!0)&&nf(w.req.query.range,o.query.range)});return[_,!1,u,v];case"count":var A=v.find(function(w){return su(w.req.query.range,o.query.range)});return[A,!!A,u,v]}}function af(t,n,i,o){t.subscribers.add(i),o.addEventListener("abort",function(){t.subscribers.delete(i),t.subscribers.size===0&&of(t,n)})}function of(t,n){setTimeout(function(){t.subscribers.size===0&&Q(n,t)},3e3)}var sf={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,i=l(l({},t),{transaction:function(o,u,c){var d=t.transaction(o,u,c);if(u==="readwrite"){var v=new AbortController,p=v.signal,_=function(A){return function(){if(v.abort(),u==="readwrite"){for(var w=new Set,C=0,H=o;C<H.length;C++){var k=H[C],I=ir["idb://".concat(n,"/").concat(k)];if(I){var O=t.table(k),L=I.optimisticOps.filter(function(Pe){return Pe.trans===d});if(d._explicit&&A&&d.mutatedParts)for(var K=0,j=Object.values(I.queries.query);K<j.length;K++)for(var G=j[K],B=0,Z=G.slice();B<Z.length;B++){var J=Z[B];go(J.obsSet,d.mutatedParts)&&(Q(G,J),J.subscribers.forEach(function(Pe){return w.add(Pe)}))}else if(L.length>0){I.optimisticOps=I.optimisticOps.filter(function(Pe){return Pe.trans!==d});for(var X=0,le=Object.values(I.queries.query);X<le.length;X++)for(var G=le[X],De=0,ee=G.slice();De<ee.length;De++){var J=ee[De];if(J.res!=null&&d.mutatedParts)if(A&&!J.dirty){var Te=Object.isFrozen(J.res),fe=ou(J.res,J.req,L,O,J,Te);J.dirty?(Q(G,J),J.subscribers.forEach(function(et){return w.add(et)})):fe!==J.res&&(J.res=fe,J.promise=$.resolve({result:fe}))}else J.dirty&&Q(G,J),J.subscribers.forEach(function(et){return w.add(et)})}}}}w.forEach(function(Pe){return Pe()})}}};d.addEventListener("abort",_(!1),{signal:p}),d.addEventListener("error",_(!1),{signal:p}),d.addEventListener("complete",_(!0),{signal:p})}return d},table:function(o){var u=t.table(o),c=u.schema.primaryKey,d=l(l({},u),{mutate:function(v){var p=ae.trans;if(c.outbound||p.db._options.cache==="disabled"||p.explicit||p.idbtrans.mode!=="readwrite")return u.mutate(v);var _=ir["idb://".concat(n,"/").concat(o)];if(!_)return u.mutate(v);var A=u.mutate(v);return(v.type==="add"||v.type==="put")&&(v.values.length>=50||To(c,v).some(function(w){return w==null}))?A.then(function(w){var C=l(l({},v),{values:v.values.map(function(k,I){var O;if(w.failures[I])return k;var L=!((O=c.keyPath)===null||O===void 0)&&O.includes(".")?Je(k):l({},k);return be(L,c.keyPath,w.results[I]),L})}),H=au(_,C,w);_.optimisticOps.push(H),queueMicrotask(function(){return v.mutatedParts&&Qi(v.mutatedParts)})}):(_.optimisticOps.push(v),v.mutatedParts&&Qi(v.mutatedParts),A.then(function(w){if(w.numFailures>0){Q(_.optimisticOps,v);var C=au(_,v,w);C&&_.optimisticOps.push(C),v.mutatedParts&&Qi(v.mutatedParts)}}),A.catch(function(){Q(_.optimisticOps,v),v.mutatedParts&&Qi(v.mutatedParts)})),A},query:function(v){var p;if(!ru(ae,u)||!iu("query",v))return u.query(v);var _=((p=ae.trans)===null||p===void 0?void 0:p.db._options.cache)==="immutable",A=ae,w=A.requery,C=A.signal,H=rf(n,o,"query",v),k=H[0],I=H[1],O=H[2],L=H[3];if(k&&I)k.obsSet=v.obsSet;else{var K=u.query(v).then(function(j){var G=j.result;if(k&&(k.res=G),_){for(var B=0,Z=G.length;B<Z;++B)Object.freeze(G[B]);Object.freeze(G)}else j.result=Je(G);return j}).catch(function(j){return L&&k&&Q(L,k),Promise.reject(j)});k={obsSet:v.obsSet,promise:K,subscribers:new Set,type:"query",req:v,dirty:!1},L?L.push(k):(L=[k],O||(O=ir["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),O.queries.query[v.query.index.name||""]=L)}return af(k,L,w,C),k.promise.then(function(j){return{result:ou(j.result,v,O?.optimisticOps,u,k,_)}})}});return d}});return i}};function $i(t,n){return new Proxy(t,{get:function(i,o,u){return o==="db"?n:Reflect.get(i,o,u)}})}var wn=(function(){function t(n,i){var o=this;this._middlewares={},this.verno=0;var u=t.dependencies;this._options=i=l({addons:t.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var c=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:te,dbReadyPromise:null,cancelOpen:te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};d.dbReadyPromise=new $(function(p){d.dbReadyResolve=p}),d.openCanceller=new $(function(p,_){d.cancelOpen=_}),this._state=d,this.name=n,this.on=Xr(this,"populate","blocked","versionchange","close",{ready:[It,te]}),this.once=function(p,_){var A=function(){for(var w=[],C=0;C<arguments.length;C++)w[C]=arguments[C];o.on(p).unsubscribe(A),_.apply(o,w)};return o.on(p,A)},this.on.ready.subscribe=ne(this.on.ready.subscribe,function(p){return function(_,A){t.vip(function(){var w=o._state;if(w.openComplete)w.dbOpenError||$.resolve().then(_),A&&p(_);else if(w.onReadyBeingFired)w.onReadyBeingFired.push(_),A&&p(_);else{p(_);var C=o;A||p(function H(){C.on.ready.unsubscribe(_),C.on.ready.unsubscribe(H)})}})}}),this.Collection=vc(this),this.Table=fc(this),this.Transaction=Ec(this),this.Version=Bc(this),this.WhereClause=bc(this),this.on("versionchange",function(p){p.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=ti(i.IDBKeyRange),this._createTransaction=function(p,_,A,w){return new o.Transaction(p,_,A,o._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(p){o.on("blocked").fire(p),kr.filter(function(_){return _.name===o.name&&_!==o&&!_._state.vcFired}).map(function(_){return _.on("versionchange").fire(p)})},this.use(Zc),this.use(sf),this.use(Qc),this.use(Wc),this.use(Yc);var v=new Proxy(this,{get:function(p,_,A){if(_==="_vip")return!0;if(_==="table")return function(C){return $i(o.table(C),v)};var w=Reflect.get(p,_,A);return w instanceof zs?$i(w,v):_==="tables"?w.map(function(C){return $i(C,v)}):_==="_createTransaction"?function(){var C=w.apply(this,arguments);return $i(C,v)}:w}});this.vip=v,c.forEach(function(p){return p(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new S.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new S.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,o=i.filter(function(u){return u._cfg.version===n})[0];return o||(o=new this.Version(n),i.push(o),i.sort(Sc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||ae.letThrough||this._vip)?n():new $(function(o,u){if(i._state.openComplete)return u(new S.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){u(new S.DatabaseClosed);return}i.open().catch(te)}i._state.dbReadyPromise.then(o,u)}).then(n)},t.prototype.use=function(n){var i=n.stack,o=n.create,u=n.level,c=n.name;c&&this.unuse({stack:i,name:c});var d=this._middlewares[i]||(this._middlewares[i]=[]);return d.push({stack:i,create:o,level:u??10,name:c}),d.sort(function(v,p){return v.level-p.level}),this},t.prototype.unuse=function(n){var i=n.stack,o=n.name,u=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(c){return u?c.create!==u:o?c.name!==o:!1})),this},t.prototype.open=function(){var n=this;return tr(Cn,function(){return Uc(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=kr.indexOf(this);if(i>=0&&kr.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new $(function(o){n.dbReadyResolve=o}),n.openCanceller=new $(function(o,u){n.cancelOpen=u}))},t.prototype.close=function(n){var i=n===void 0?{disableAutoOpen:!0}:n,o=i.disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new S.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new S.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},t.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",u=this._state;return new $(function(c,d){var v=function(){i.close(n);var p=i._deps.indexedDB.deleteDatabase(i.name);p.onsuccess=We(function(){zc(i._deps,i.name),c()}),p.onerror=ln(d),p.onblocked=i._fireOnBlocked};if(o)throw new S.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(v):v()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return m(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=Vc.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,i,o){var u=this,c=ae.trans;(!c||c.db!==this||n.indexOf("!")!==-1)&&(c=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var v,p;try{if(p=i.map(function(A){var w=A instanceof u.Table?A.name:A;if(typeof w!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return w}),n=="r"||n===to)v=to;else if(n=="rw"||n==no)v=no;else throw new S.InvalidArgument("Invalid transaction mode: "+n);if(c){if(c.mode===to&&v===no)if(d)c=null;else throw new S.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c&&p.forEach(function(A){if(c&&c.storeNames.indexOf(A)===-1)if(d)c=null;else throw new S.SubTransaction("Table "+A+" not included in parent transaction.")}),d&&c&&!c.active&&(c=null)}}catch(A){return c?c._promise(null,function(w,C){C(A)}):it(A)}var _=tu.bind(null,this,v,p,c,o);return c?c._promise(v,_,"lock"):ae.trans?tr(ae.transless,function(){return u._whenReady(_)}):this._whenReady(_)},t.prototype.table=function(n){if(!b(this._allTables,n))throw new S.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),uf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",lf=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,i,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:i,complete:o}:n)},t.prototype[uf]=function(){return this},t})(),Ji;try{Ji={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{Ji={indexedDB:null,IDBKeyRange:null}}function uu(t){var n=!1,i,o=new lf(function(u){var c=Ze(t);function d(L){var K=Er();try{c&&Tr();var j=Rn(t,L);return c&&(j=j.finally(Pn)),j}finally{K&&xr()}}var v=!1,p,_={},A={},w={get closed(){return v},unsubscribe:function(){v||(v=!0,p&&p.abort(),C&&Nn.storagemutated.unsubscribe(I))}};u.start&&u.start(w);var C=!1,H=function(){return $a(O)};function k(){return go(A,_)}var I=function(L){Zi(_,L),k()&&H()},O=function(){if(!(v||!Ji.indexedDB)){_={};var L={};p&&p.abort(),p=new AbortController;var K={subscr:L,signal:p.signal,requery:H,querier:t,trans:null},j=d(K);Promise.resolve(j).then(function(G){n=!0,i=G,!(v||K.signal.aborted)&&(_={},A=L,!ht(A)&&!C&&(Nn(ei,I),C=!0),$a(function(){return!v&&u.next&&u.next(G)}))},function(G){n=!1,["DatabaseClosedError","AbortError"].includes(G?.name)||v||$a(function(){v||u.error&&u.error(G)})})}};return setTimeout(H,0),w});return o.hasValue=function(){return n},o.getValue=function(){return i},o}var ar=wn;T(ar,l(l({},ce),{delete:function(t){var n=new ar(t,{addons:[]});return n.delete()},exists:function(t){return new ar(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Kc(ar.dependencies).then(t)}catch{return it(new S.MissingAPI)}},defineClass:function(){function t(n){x(this,n)}return t},ignoreTransaction:function(t){return ae.trans?tr(ae.transless,t):t()},vip:po,async:function(t){return function(){try{var n=Eo(t.apply(this,arguments));return!n||typeof n.then!="function"?$.resolve(n):n}catch(i){return it(i)}}},spawn:function(t,n,i){try{var o=Eo(t.apply(i,n||[]));return!o||typeof o.then!="function"?$.resolve(o):o}catch(u){return it(u)}},currentTransaction:{get:function(){return ae.trans||null}},waitFor:function(t,n){var i=$.resolve(typeof t=="function"?ar.ignoreTransaction(t):t).timeout(n||6e4);return ae.trans?ae.trans.waitFor(i):i},Promise:$,debug:{get:function(){return Rt},set:function(t){rt(t)}},derive:F,extend:x,props:T,override:ne,Events:Xr,on:Nn,liveQuery:uu,extendObservabilitySet:Zi,getByKeyPath:de,setByKeyPath:be,delByKeyPath:ve,shallowClone:pe,deepClone:Je,getObjectDiff:xo,cmp:Re,asap:Ee,minKey:eo,addons:[],connections:kr,errnames:Qe,dependencies:Ji,cache:ir,semVer:Ls,version:Ls.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,i*2)})})),ar.maxKey=ti(ar.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Nn(ei,function(t){if(!Fn){var n;n=new CustomEvent(ao,{detail:t}),Fn=!0,dispatchEvent(n),Fn=!1}}),addEventListener(ao,function(t){var n=t.detail;Fn||Ao(n)}));function Ao(t){var n=Fn;try{Fn=!0,Nn.storagemutated.fire(t),wo(t,!0)}finally{Fn=n}}var Fn=!1,Bn,Do=function(){};typeof BroadcastChannel<"u"&&(Do=function(){Bn=new BroadcastChannel(ao),Bn.onmessage=function(t){return t.data&&Ao(t.data)}},Do(),typeof Bn.unref=="function"&&Bn.unref(),Nn(ei,function(t){Fn||Bn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!wn.disableBfCache&&t.persisted){Rt&&console.debug("Dexie: handling persisted pagehide"),Bn?.close();for(var n=0,i=kr;n<i.length;n++){var o=i[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!wn.disableBfCache&&t.persisted&&(Rt&&console.debug("Dexie: handling persisted pageshow"),Do(),Ao({all:new _t(-1/0,[[]])}))}));function cf(t){return new Qr({add:t})}function ff(t){return new Qr({remove:t})}function df(t,n){return new Qr({replacePrefix:[t,n]})}$.rejectionMapper=V,rt(Rt);var hf=Object.freeze({__proto__:null,Dexie:wn,liveQuery:uu,Entity:Fs,cmp:Re,PropModification:Qr,replacePrefix:df,add:cf,remove:ff,default:wn,RangeSet:_t,mergeRanges:ii,rangesOverlap:Xs});return l(wn,hf,{default:wn}),wn}))})(sa)),sa.exports}var Jd=$d();const Yo=Qd(Jd),Eu=Symbol.for("Dexie"),_a=globalThis[Eu]||(globalThis[Eu]=Yo);if(Yo.semVer!==_a.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Yo.semVer} and ${_a.semVer}`);const{liveQuery:ba,mergeRanges:mp,rangesOverlap:yp,RangeSet:gp,cmp:_p,Entity:bp,PropModification:wp,replacePrefix:Ep,add:xp,remove:Tp,DexieYProvider:kp}=_a;function xu(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),a.push.apply(a,s)}return a}function wa(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?xu(Object(a),!0).forEach(function(s){jr(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xu(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Cr(e){"@babel/helpers - typeof";return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cr(e)}function jr(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function eh(e,r){if(e==null)return{};var a={},s=Object.keys(e),l,f;for(f=0;f<s.length;f++)l=s[f],!(r.indexOf(l)>=0)&&(a[l]=e[l]);return a}function th(e,r){if(e==null)return{};var a=eh(e,r),s,l;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(l=0;l<f.length;l++)s=f[l],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function nh(e,r){return ih(e)||oh(e,r)||bs(e,r)||uh()}function Jt(e){return rh(e)||ah(e)||bs(e)||sh()}function rh(e){if(Array.isArray(e))return qo(e)}function ih(e){if(Array.isArray(e))return e}function ah(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oh(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var s=[],l=!0,f=!1,h,m;try{for(a=a.call(e);!(l=(h=a.next()).done)&&(s.push(h.value),!(r&&s.length===r));l=!0);}catch(g){f=!0,m=g}finally{try{!l&&a.return!=null&&a.return()}finally{if(f)throw m}}return s}}function bs(e,r){if(e){if(typeof e=="string")return qo(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return qo(e,r)}}function qo(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=e[a];return s}function sh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ki(e,r){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=bs(e))||r){a&&(e=a);var s=0,l=function(){};return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,h=!1,m;return{s:function(){a=a.call(e)},n:function(){var g=a.next();return f=g.done,g},e:function(g){h=!0,m=g},f:function(){try{!f&&a.return!=null&&a.return()}finally{if(h)throw m}}}}var lh="finalize",ch="consider";function zr(e,r,a){e.dispatchEvent(new CustomEvent(lh,{detail:{items:r,info:a}}))}function Xn(e,r,a){e.dispatchEvent(new CustomEvent(ch,{detail:{items:r,info:a}}))}var Na="draggedEntered",Ai="draggedLeft",Fa="draggedOverIndex",ws="draggedLeftDocument",Ea={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function fh(e,r,a){e.dispatchEvent(new CustomEvent(Na,{detail:{indexObj:r,draggedEl:a}}))}function dh(e,r,a){e.dispatchEvent(new CustomEvent(Ai,{detail:{draggedEl:r,type:Ea.LEFT_FOR_ANOTHER,theOtherDz:a}}))}function hh(e,r){e.dispatchEvent(new CustomEvent(Ai,{detail:{draggedEl:r,type:Ea.OUTSIDE_OF_ANY}}))}function vh(e,r,a){e.dispatchEvent(new CustomEvent(Fa,{detail:{indexObj:r,draggedEl:a}}))}function ph(e){window.dispatchEvent(new CustomEvent(ws,{detail:{draggedEl:e}}))}var Ct={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Na,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Fa,DRAGGED_LEFT:Ai,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Kt={POINTER:"pointer",KEYBOARD:"keyboard"},Ba="isDndShadowItem",Ka="data-is-dnd-shadow-item-internal",mh="data-is-dnd-shadow-item-hint",Cl="id:dnd-shadow-placeholder-0000",yh="dnd-action-dragged-el",ct="id",Zo=0;function Rl(){Zo++}function Pl(){if(Zo===0)throw new Error("Bug! trying to decrement when there are no dropzones");Zo--}var Es=typeof window>"u";function Qo(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,s=r?bh(e):e.getBoundingClientRect(),l=getComputedStyle(e),f=l.transform;if(f){var h,m,g,x;if(f.startsWith("matrix3d("))a=f.slice(9,-1).split(/, /),h=+a[0],m=+a[5],g=+a[12],x=+a[13];else if(f.startsWith("matrix("))a=f.slice(7,-1).split(/, /),h=+a[0],m=+a[3],g=+a[4],x=+a[5];else return s;var E=l.transformOrigin,D=s.x-g-(1-h)*parseFloat(E),b=s.y-x-(1-m)*parseFloat(E.slice(E.indexOf(" ")+1)),T=h?s.width/h:e.offsetWidth,N=m?s.height/m:e.offsetHeight;return{x:D,y:b,width:T,height:N,top:b,right:D+T,bottom:b+N,left:D}}else return s}function Ll(e){var r=Qo(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Ml(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Nl(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function gh(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function ja(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function _i(e){return Nl(Ml(e))}function Tu(e,r){var a=_i(e),s=Ll(r);return ja(a,s)}function ku(e,r){var a=_i(e),s=_i(r);return gh(a,s)}function _h(e){var r=Ml(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function bh(e){for(var r=e.getBoundingClientRect(),a={top:r.top,bottom:r.bottom,left:r.left,right:r.right},s=!1,l=!1,f=e.parentElement;f&&f!==document.body;){var h=window.getComputedStyle(f),m=h.overflowY,g=h.overflowX,x=m==="scroll"||m==="auto",E=g==="scroll"||g==="auto";if(x||E){var D=f.getBoundingClientRect();if(x){var b=Math.max(a.top,D.top),T=Math.min(a.bottom,D.bottom);(b!==a.top||T!==a.bottom)&&(s=!0),a.top=b,a.bottom=T}if(E){var N=Math.max(a.left,D.left),P=Math.min(a.right,D.right);(N!==a.left||P!==a.right)&&(l=!0),a.left=N,a.right=P}}f=f.parentElement}return s||l?{top:a.top,bottom:a.bottom,left:a.left,right:a.right,width:Math.max(0,a.right-a.left),height:Math.max(0,a.bottom-a.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var Pr;function xs(){Pr=new Map}xs();function wh(e){var r=Array.from(e.children).findIndex(function(a){return a.getAttribute(Ka)});if(r>=0)return Pr.has(e)||Pr.set(e,new Map),Pr.get(e).set(r,Ll(e.children[r])),r}function Eh(e,r){if(!Tu(e,r))return null;var a=r.children;if(a.length===0)return{index:0,isProximityBased:!0};for(var s=wh(r),l=0;l<a.length;l++)if(Tu(e,a[l])){var f=Pr.has(r)&&Pr.get(r).get(l);return f&&!ja(_i(e),f)?{index:s,isProximityBased:!1}:{index:l,isProximityBased:!1}}for(var h=Number.MAX_VALUE,m=void 0,g=0;g<a.length;g++){var x=ku(e,a[g]);x<h&&(h=x,m=g)}if(a.length>0){var E=a.length,D=a[E-1],b=D.cloneNode(!1);b.style.visibility="hidden",b.style.pointerEvents="none",r.appendChild(b);var T=ku(e,b);T<h&&(m=E),r.removeChild(b)}return{index:m,isProximityBased:!0}}function oi(e){return JSON.stringify(e,null,2)}function xa(e){if(!e)throw new Error("cannot get depth of a falsy node");return Fl(e,0)}function Fl(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?Fl(e.parentElement,r+1):r-1}function xh(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var a in e)if(!{}.hasOwnProperty.call(r,a)||r[a]!==e[a])return!1;return!0}function Th(e,r){if(e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}var kh=200,Au=10,Xo;function Ah(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kh,s=arguments.length>3?arguments[3]:void 0,l,f,h=!1,m,g=Array.from(r).sort(function(E,D){return xa(D)-xa(E)});function x(){var E=_i(e),D=s.multiScrollIfNeeded();if(!D&&m&&Math.abs(m.x-E.x)<Au&&Math.abs(m.y-E.y)<Au){Xo=window.setTimeout(x,a);return}if(_h(e)){ph(e);return}m=E;var b=!1,T=ki(g),N;try{for(T.s();!(N=T.n()).done;){var P=N.value;D&&xs();var F=Eh(e,P);if(F!==null){var M=F.index;b=!0,P!==l?(l&&dh(l,e,P),fh(P,F,e),l=P):M!==f&&(vh(P,F,e),f=M);break}}}catch(U){T.e(U)}finally{T.f()}!b&&h&&l?(hh(l,e),l=void 0,f=void 0,h=!1):h=!0,Xo=window.setTimeout(x,a)}x()}function Dh(){clearTimeout(Xo),xs()}var si=30;function Ih(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function a(f){var h=e,m=h.directionObj,g=h.stepPx;m&&(f.scrollBy(m.x*g,m.y*g),window.requestAnimationFrame(function(){return a(f)}))}function s(f){return si-f}function l(f,h){if(!h)return!1;var m=Sh(f,h),g=!!e.directionObj;if(m===null)return g&&r(),!1;var x=!1,E=!1;return h.scrollHeight>h.clientHeight&&(m.bottom<si?(x=!0,e.directionObj={x:0,y:1},e.stepPx=s(m.bottom)):m.top<si&&(x=!0,e.directionObj={x:0,y:-1},e.stepPx=s(m.top)),!g&&x)||h.scrollWidth>h.clientWidth&&(m.right<si?(E=!0,e.directionObj={x:1,y:0},e.stepPx=s(m.right)):m.left<si&&(E=!0,e.directionObj={x:-1,y:0},e.stepPx=s(m.left)),!g&&E)?(a(h),!0):(r(),!1)}return{scrollIfNeeded:l,resetScrolling:r}}function Sh(e,r){var a=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return ja(e,a)?{top:e.y-a.top,bottom:a.bottom-e.y,left:e.x-a.left,right:a.right-e.x}:null}function Oh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=Rh(e),s=Array.from(a).sort(function(g,x){return xa(x)-xa(g)}),l=Ih(),f=l.scrollIfNeeded,h=l.resetScrolling;function m(){var g=r();if(!g||!s)return!1;for(var x=s.filter(function(b){return ja(g,b.getBoundingClientRect())||b===document.scrollingElement}),E=0;E<x.length;E++){var D=f(g,x[E]);if(D)return!0}return!1}return{multiScrollIfNeeded:a.size>0?m:function(){return!1},destroy:function(){return h()}}}function Ch(e){if(!e)return[];for(var r=[],a=e;a;){var s=window.getComputedStyle(a),l=s.overflow;l.split(" ").some(function(f){return f.includes("auto")||f.includes("scroll")})&&r.push(a),a=a.parentElement}return r}function Rh(e){var r=new Set,a=ki(e),s;try{for(a.s();!(s=a.n()).done;){var l=s.value;Ch(l).forEach(function(f){return r.add(f)})}}catch(f){a.e(f)}finally{a.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function Ph(e){var r=e.cloneNode(!0),a=[],s=e.tagName==="SELECT",l=s?[e]:Jt(e.querySelectorAll("select")),f=ki(l),h;try{for(f.s();!(h=f.n()).done;){var m=h.value;a.push(m.value)}}catch(Y){f.e(Y)}finally{f.f()}if(l.length>0)for(var g=s?[r]:Jt(r.querySelectorAll("select")),x=0;x<g.length;x++){var E=g[x],D=a[x],b=E.querySelector('option[value="'.concat(D,'"'));b&&b.setAttribute("selected",!0)}var T=e.tagName==="CANVAS",N=T?[e]:Jt(e.querySelectorAll("canvas"));if(N.length>0)for(var P=T?[r]:Jt(r.querySelectorAll("canvas")),F=0;F<P.length;F++){var M=N[F],U=P[F];U.width=M.width,U.height=M.height,M.width>0&&M.height>0&&U.getContext("2d").drawImage(M,0,0)}return r}var bi=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Lh=jr({},bi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Bl(e){if(!bi[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(bi)));return Lh[e]}var Mh=.2;function sr(e){return"".concat(e," ").concat(Mh,"s ease")}function Nh(e,r){var a=e.getBoundingClientRect(),s=Ph(e);Kl(e,s),s.id=yh,s.style.position="fixed";var l=a.top,f=a.left;if(s.style.top="".concat(l,"px"),s.style.left="".concat(f,"px"),r){var h=Nl(a);l-=h.y-r.y,f-=h.x-r.x,window.setTimeout(function(){s.style.top="".concat(l,"px"),s.style.left="".concat(f,"px")},0)}return s.style.margin="0",s.style.boxSizing="border-box",s.style.height="".concat(a.height,"px"),s.style.width="".concat(a.width,"px"),s.style.transition="".concat(sr("top"),", ").concat(sr("left"),", ").concat(sr("background-color"),", ").concat(sr("opacity"),", ").concat(sr("color")," "),window.setTimeout(function(){return s.style.transition+=", ".concat(sr("width"),", ").concat(sr("height"))},0),s.style.zIndex="9999",s.style.cursor="grabbing",s}function Fh(e){e.style.cursor="grab"}function Bh(e,r,a,s){Kl(r,e);var l=r.getBoundingClientRect(),f=e.getBoundingClientRect(),h=l.width-f.width,m=l.height-f.height;if(h||m){var g={left:(a-f.left)/f.width,top:(s-f.top)/f.height};Bl(bi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(l.height,"px"),e.style.width="".concat(l.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-g.left*h,"px"),e.style.top="".concat(parseFloat(e.style.top)-g.top*m,"px")}}function Kl(e,r){var a=window.getComputedStyle(e);Array.from(a).filter(function(s){return s.startsWith("background")||s.startsWith("padding")||s.startsWith("font")||s.startsWith("text")||s.startsWith("align")||s.startsWith("justify")||s.startsWith("display")||s.startsWith("flex")||s.startsWith("border")||s==="opacity"||s==="color"||s==="list-style-type"||Bl(bi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(s==="width"||s==="height")}).forEach(function(s){return r.style.setProperty(s,a.getPropertyValue(s),a.getPropertyPriority(s))})}function Kh(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function jl(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function jh(e){e.style.visibility="hidden",e.setAttribute(Ka,"true")}function zh(e){e.style.visibility="",e.removeAttribute(Ka)}function ua(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(f){s.style[f]=l[f]}),a(s).forEach(function(f){return s.classList.add(f)})})}function Ta(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(f){s.style[f]=""}),a(s).forEach(function(f){return s.classList.contains(f)&&s.classList.remove(f)})})}function Gh(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var a=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=a}}var Uh="--any--",Vh=100,Hh=20,ra=3,Wh=80,Du={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Iu="data-is-dnd-original-dragged-item",Lt,dt,Mt,za,qe,Ga,Yn,mt,vn,Et,jn=!1,Ts=!1,ks,Di=!1,la=[],vi,pn,li=!1,an=new Map,at=new Map,Lo=new WeakMap;function Yh(e,r){an.has(r)||an.set(r,new Set),an.get(r).has(e)||(an.get(r).add(e),Rl())}function Su(e,r){an.get(r).delete(e),Pl(),an.get(r).size===0&&an.delete(r)}function qh(){var e=an.get(za),r=ki(e),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;s.addEventListener(Na,zl),s.addEventListener(Ai,Gl),s.addEventListener(Fa,Ul)}}catch(h){r.e(h)}finally{r.f()}window.addEventListener(ws,Gr);var l=Math.max.apply(Math,Jt(Array.from(e.keys()).map(function(h){return at.get(h).dropAnimationDurationMs}))),f=l===0?Hh:Math.max(l,Vh);vi=Oh(e,function(){return Et}),Ah(dt,e,f*1.07,vi)}function Zh(){var e=an.get(za),r=ki(e),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;s.removeEventListener(Na,zl),s.removeEventListener(Ai,Gl),s.removeEventListener(Fa,Ul)}}catch(l){r.e(l)}finally{r.f()}window.removeEventListener(ws,Gr),vi&&(vi.destroy(),vi=void 0),Dh()}function Ua(e){return e.findIndex(function(r){return!!r[Ba]})}function Qh(e){var r;return wa(wa({},e),{},(r={},jr(r,Ba,!0),jr(r,ct,Cl),r))}function zl(e){var r=at.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==qe)){if(Di=!1,a=a.filter(function(m){return m[ct]!==Yn[ct]&&m[ct]!==Cl}),qe!==e.currentTarget){var l=at.get(qe).items,f=l.filter(function(m){return!m[Ba]});Xn(qe,f,{trigger:Ct.DRAGGED_ENTERED_ANOTHER,id:Mt[ct],source:Kt.POINTER})}var h=e.detail.indexObj.index;mt=e.currentTarget,a.splice(h,0,Yn),Xn(e.currentTarget,a,{trigger:Ct.DRAGGED_ENTERED,id:Mt[ct],source:Kt.POINTER})}}function Gl(e){if(jn){var r=at.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==qe&&e.currentTarget!==mt)){var l=Jt(a),f=Ua(l);f!==-1&&l.splice(f,1);var h=mt;mt=void 0;var m=e.detail,g=m.type,x=m.theOtherDz;if(g===Ea.OUTSIDE_OF_ANY||g===Ea.LEFT_FOR_ANOTHER&&x!==qe&&at.get(x).dropFromOthersDisabled){Di=!0,mt=qe;var E=h===qe?l:Jt(at.get(qe).items);E.splice(Ga,0,Yn),Xn(qe,E,{trigger:Ct.DRAGGED_LEFT_ALL,id:Mt[ct],source:Kt.POINTER})}Xn(e.currentTarget,l,{trigger:Ct.DRAGGED_LEFT,id:Mt[ct],source:Kt.POINTER})}}}function Ul(e){var r=at.get(e.currentTarget),a=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==qe)){var l=Jt(a);Di=!1;var f=e.detail.indexObj.index,h=Ua(l);h!==-1&&l.splice(h,1),l.splice(f,0,Yn),Xn(e.currentTarget,l,{trigger:Ct.DRAGGED_OVER_INDEX,id:Mt[ct],source:Kt.POINTER})}}function ka(e){e.preventDefault();var r=e.touches?e.touches[0]:e;Et={x:r.clientX,y:r.clientY},dt.style.transform="translate3d(".concat(Et.x-vn.x,"px, ").concat(Et.y-vn.y,"px, 0)")}function Gr(){Ts=!0,window.removeEventListener("mousemove",ka),window.removeEventListener("touchmove",ka),window.removeEventListener("mouseup",Gr),window.removeEventListener("touchend",Gr),Zh(),Fh(dt),mt||(mt=qe);var e=at.get(mt),r=e.items,a=e.type;Ta(an.get(a),function(f){return at.get(f).dropTargetStyle},function(f){return at.get(f).dropTargetClasses});var s=Ua(r);s===-1&&mt===qe&&(s=Ga),r=r.map(function(f){return f[Ba]?Mt:f});function l(){ks(),zr(mt,r,{trigger:Di?Ct.DROPPED_OUTSIDE_OF_ANY:Ct.DROPPED_INTO_ZONE,id:Mt[ct],source:Kt.POINTER}),mt!==qe&&zr(qe,at.get(qe).items,{trigger:Ct.DROPPED_INTO_ANOTHER,id:Mt[ct],source:Kt.POINTER});var f=Array.from(mt.children).find(function(h){return h.getAttribute(Ka)});f&&zh(f),Jh()}at.get(mt).dropAnimationDisabled?l():Xh(s,l)}function Xh(e,r){var a=e>-1?Qo(mt.children[e],!1):Qo(mt,!1),s={x:a.left-parseFloat(dt.style.left),y:a.top-parseFloat(dt.style.top)},l=at.get(mt),f=l.dropAnimationDurationMs,h="transform ".concat(f,"ms ease");dt.style.transition=dt.style.transition?dt.style.transition+","+h:h,dt.style.transform="translate3d(".concat(s.x,"px, ").concat(s.y,"px, 0)"),window.setTimeout(r,f)}function $h(e,r){la.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){jl(e),document.body.appendChild(e)})}function Jh(){dt&&dt.remove&&dt.remove(),Lt&&Lt.remove&&Lt.remove(),dt=void 0,Lt=void 0,Mt=void 0,za=void 0,qe=void 0,Ga=void 0,Yn=void 0,mt=void 0,vn=void 0,Et=void 0,jn=!1,Ts=!1,ks=void 0,Di=!1,pn&&clearTimeout(pn),pn=void 0,li=!1,la.length&&(la.forEach(function(e){var r=e.dz,a=e.destroy;a(),r.remove()}),la=[])}function ev(e,r){var a=!1,s={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Du,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},l=new Map;function f(){window.addEventListener("mousemove",g,{passive:!1}),window.addEventListener("touchmove",g,{passive:!1,capture:!1}),window.addEventListener("mouseup",m,{passive:!1}),window.addEventListener("touchend",m,{passive:!1})}function h(){window.removeEventListener("mousemove",g),window.removeEventListener("touchmove",g),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),pn&&(clearTimeout(pn),pn=void 0,li=!1)}function m(b){if(h(),Lt=void 0,vn=void 0,Et=void 0,b.type==="touchend"){var T=new Event("click",{bubbles:!0,cancelable:!0});b.target.dispatchEvent(T)}}function g(b){var T=!!b.touches,N=T?b.touches[0]:b;if(T&&s.delayTouchStartMs>0&&!li){Et={x:N.clientX,y:N.clientY},(Math.abs(Et.x-vn.x)>=ra||Math.abs(Et.y-vn.y)>=ra)&&(pn&&(clearTimeout(pn),pn=void 0),m(b));return}b.preventDefault(),Et={x:N.clientX,y:N.clientY},(Math.abs(Et.x-vn.x)>=ra||Math.abs(Et.y-vn.y)>=ra)&&(h(),E())}function x(b){if(!(b.target!==b.currentTarget&&(b.target.value!==void 0||b.target.isContentEditable))&&!b.button&&!jn){var T=!!b.touches,N=T&&s.delayTouchStartMs>0;N||b.preventDefault(),b.stopPropagation();var P=T?b.touches[0]:b;vn={x:P.clientX,y:P.clientY},Et=wa({},vn),Lt=b.currentTarget,N&&(li=!1,pn=window.setTimeout(function(){Lt&&(li=!0,h(),E())},s.delayTouchStartMs)),f()}}function E(){jn=!0;var b=l.get(Lt);Ga=b,qe=Lt.parentElement;var T=qe.closest("dialog")||qe.closest("[popover]")||qe.getRootNode(),N=T.body||T,P=s.items,F=s.type,M=s.centreDraggedOnCursor,U=Jt(P);Mt=U[b],za=F,Yn=Qh(Mt),dt=Nh(Lt,M&&Et),N.appendChild(dt);function Y(){Lt.parentElement?window.requestAnimationFrame(Y):(Lt.setAttribute(Iu,!0),N.appendChild(Lt),qh(),jl(Lt),Yn[ct]=Mt[ct],dt.focus())}window.requestAnimationFrame(Y),ua(Array.from(an.get(s.type)).filter(function(W){return W===qe||!at.get(W).dropFromOthersDisabled}),function(W){return at.get(W).dropTargetStyle},function(W){return at.get(W).dropTargetClasses}),U.splice(b,1,Yn),ks=Gh(qe),Xn(qe,U,{trigger:Ct.DRAG_STARTED,id:Mt[ct],source:Kt.POINTER}),window.addEventListener("mousemove",ka,{passive:!1}),window.addEventListener("touchmove",ka,{passive:!1,capture:!1}),window.addEventListener("mouseup",Gr,{passive:!1}),window.addEventListener("touchend",Gr,{passive:!1})}function D(b){var T=b.items,N=T===void 0?void 0:T,P=b.flipDurationMs,F=P===void 0?0:P,M=b.type,U=M===void 0?Uh:M,Y=b.dragDisabled,W=Y===void 0?!1:Y,ne=b.morphDisabled,ue=ne===void 0?!1:ne,Ee=b.dropFromOthersDisabled,_e=Ee===void 0?!1:Ee,de=b.dropTargetStyle,be=de===void 0?Du:de,ve=b.dropTargetClasses,pe=ve===void 0?[]:ve,Xe=b.transformDraggedElement,ze=Xe===void 0?function(){}:Xe,$e=b.centreDraggedOnCursor,tt=$e===void 0?!1:$e,je=b.dropAnimationDisabled,ht=je===void 0?!1:je,He=b.delayTouchStart,Je=He===void 0?!1:He;s.dropAnimationDurationMs=F;var zt=0;Je===!0?zt=Wh:typeof Je=="number"&&isFinite(Je)&&Je>=0&&(zt=Je),s.delayTouchStartMs=zt,s.type&&U!==s.type&&Su(e,s.type),s.type=U,s.items=Jt(N),s.dragDisabled=W,s.morphDisabled=ue,s.transformDraggedElement=ze,s.centreDraggedOnCursor=tt,s.dropAnimationDisabled=ht,a&&jn&&!Ts&&(!xh(be,s.dropTargetStyle)||!Th(pe,s.dropTargetClasses))&&(Ta([e],function(){return s.dropTargetStyle},function(){return pe}),ua([e],function(){return be},function(){return pe})),s.dropTargetStyle=be,s.dropTargetClasses=Jt(pe);function Gt(Q,Ae){return at.get(Q)?at.get(Q)[Ae]:s[Ae]}a&&jn&&s.dropFromOthersDisabled!==_e&&(_e?Ta([e],function(Q){return Gt(Q,"dropTargetStyle")},function(Q){return Gt(Q,"dropTargetClasses")}):ua([e],function(Q){return Gt(Q,"dropTargetStyle")},function(Q){return Gt(Q,"dropTargetClasses")})),s.dropFromOthersDisabled=_e,at.set(e,s),Yh(e,U);for(var en=jn?Ua(s.items):-1,gt=0;gt<e.children.length;gt++){var q=e.children[gt];if(Kh(q,W),gt===en){ue||Bh(dt,q,Et.x,Et.y),s.transformDraggedElement(dt,Mt,gt),jh(q);continue}q.removeEventListener("mousedown",Lo.get(q)),q.removeEventListener("touchstart",Lo.get(q)),W||(q.addEventListener("mousedown",x),q.addEventListener("touchstart",x),Lo.set(q,x)),l.set(q,gt),a||(a=!0)}}return D(r),{update:function(T){D(T)},destroy:function(){function T(){Su(e,at.get(e).type),at.delete(e)}jn&&!e.closest("[".concat(Iu,"]"))?$h(e,T):T()}}}var ia,$o={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Vl=(ia={},jr(ia,$o.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),jr(ia,$o.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),ia),tv="dnd-action-aria-alert",ut;function Jo(){ut||(ut=document.createElement("div"),(function(){ut.id=tv,ut.style.position="fixed",ut.style.bottom="0",ut.style.left="0",ut.style.zIndex="-5",ut.style.opacity="0",ut.style.height="0",ut.style.width="0",ut.setAttribute("role","alert")})(),document.body.prepend(ut),Object.entries(Vl).forEach(function(e){var r=nh(e,2),a=r[0],s=r[1];return document.body.prepend(iv(a,s))}))}function nv(){return Es?null:(document.readyState==="complete"?Jo():window.addEventListener("DOMContentLoaded",Jo),wa({},$o))}function rv(){Es||!ut||(Object.keys(Vl).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),ut.remove(),ut=void 0)}function iv(e,r){var a=document.createElement("div");return a.id=e,a.innerHTML="<p>".concat(r,"</p>"),a.style.display="none",a.style.position="fixed",a.style.zIndex="-5",a}function Lr(e){if(!Es){ut||Jo(),ut.innerHTML="";var r=document.createTextNode(e);ut.appendChild(r),ut.style.display="none",ut.style.display="inline"}}var av="--any--",Ou={outline:"rgba(255, 255, 102, 0.7) solid 2px"},qt=!1,es,Tt,pr="",ur,mn,Gn="",Aa=new WeakSet,Cu=new WeakMap,Ru=new WeakMap,ts=new Map,pt=new Map,rn=new Map,Da;function ov(e,r){rn.size===0&&(Da=nv(),window.addEventListener("keydown",Hl),window.addEventListener("click",Wl)),rn.has(r)||rn.set(r,new Set),rn.get(r).has(e)||(rn.get(r).add(e),Rl())}function Pu(e,r){Tt===e&&wi(),rn.get(r).delete(e),Pl(),rn.get(r).size===0&&rn.delete(r),rn.size===0&&(window.removeEventListener("keydown",Hl),window.removeEventListener("click",Wl),Da=void 0,rv())}function Hl(e){if(qt)switch(e.key){case"Escape":{wi();break}}}function Wl(){qt&&(Aa.has(document.activeElement)||wi())}function sv(e){if(qt){var r=e.currentTarget;if(r!==Tt){pr=r.getAttribute("aria-label")||"";var a=pt.get(Tt),s=a.items,l=s.find(function(D){return D[ct]===mn}),f=s.indexOf(l),h=s.splice(f,1)[0],m=pt.get(r),g=m.items,x=m.autoAriaDisabled;r.getBoundingClientRect().top<Tt.getBoundingClientRect().top||r.getBoundingClientRect().left<Tt.getBoundingClientRect().left?(g.push(h),x||Lr("Moved item ".concat(Gn," to the end of the list ").concat(pr))):(g.unshift(h),x||Lr("Moved item ".concat(Gn," to the beginning of the list ").concat(pr)));var E=Tt;zr(E,s,{trigger:Ct.DROPPED_INTO_ANOTHER,id:mn,source:Kt.KEYBOARD}),zr(r,g,{trigger:Ct.DROPPED_INTO_ZONE,id:mn,source:Kt.KEYBOARD}),Tt=r}}}function Yl(){ts.forEach(function(e,r){var a=e.update;return a(pt.get(r))})}function wi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;pt.get(Tt).autoAriaDisabled||Lr("Stopped dragging item ".concat(Gn)),Aa.has(document.activeElement)&&document.activeElement.blur(),e&&Xn(Tt,pt.get(Tt).items,{trigger:Ct.DRAG_STOPPED,id:mn,source:Kt.KEYBOARD}),Ta(rn.get(es),function(r){return pt.get(r).dropTargetStyle},function(r){return pt.get(r).dropTargetClasses}),ur=null,mn=null,Gn="",es=null,Tt=null,pr="",qt=!1,Yl()}function uv(e,r){var a={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Ou,dropTargetClasses:[],autoAriaDisabled:!1};function s(E,D,b){E.length<=1||E.splice(b,1,E.splice(D,1,E[b])[0])}function l(E){switch(E.key){case"Enter":case" ":{if((E.target.disabled!==void 0||E.target.href||E.target.isContentEditable)&&!Aa.has(E.target))return;E.preventDefault(),E.stopPropagation(),qt?wi():f(E);break}case"ArrowDown":case"ArrowRight":{if(!qt)return;E.preventDefault(),E.stopPropagation();var D=pt.get(e),b=D.items,T=Array.from(e.children),N=T.indexOf(E.currentTarget);N<T.length-1&&(a.autoAriaDisabled||Lr("Moved item ".concat(Gn," to position ").concat(N+2," in the list ").concat(pr)),s(b,N,N+1),zr(e,b,{trigger:Ct.DROPPED_INTO_ZONE,id:mn,source:Kt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!qt)return;E.preventDefault(),E.stopPropagation();var P=pt.get(e),F=P.items,M=Array.from(e.children),U=M.indexOf(E.currentTarget);U>0&&(a.autoAriaDisabled||Lr("Moved item ".concat(Gn," to position ").concat(U," in the list ").concat(pr)),s(F,U,U-1),zr(e,F,{trigger:Ct.DROPPED_INTO_ZONE,id:mn,source:Kt.KEYBOARD}));break}}}function f(E){m(E.currentTarget),Tt=e,es=a.type,qt=!0;var D=Array.from(rn.get(a.type)).filter(function(T){return T===Tt||!pt.get(T).dropFromOthersDisabled});if(ua(D,function(T){return pt.get(T).dropTargetStyle},function(T){return pt.get(T).dropTargetClasses}),!a.autoAriaDisabled){var b="Started dragging item ".concat(Gn,". Use the arrow keys to move it within its list ").concat(pr);D.length>1&&(b+=", or tab to another list in order to move the item into it"),Lr(b)}Xn(e,pt.get(e).items,{trigger:Ct.DRAG_STARTED,id:mn,source:Kt.KEYBOARD}),Yl()}function h(E){qt&&E.currentTarget!==ur&&(E.stopPropagation(),wi(!1),f(E))}function m(E){var D=pt.get(e),b=D.items,T=Array.from(e.children),N=T.indexOf(E);ur=E,ur.tabIndex=a.zoneItemTabIndex,mn=b[N][ct],Gn=T[N].getAttribute("aria-label")||""}function g(E){var D=E.items,b=D===void 0?[]:D,T=E.type,N=T===void 0?av:T,P=E.dragDisabled,F=P===void 0?!1:P,M=E.zoneTabIndex,U=M===void 0?0:M,Y=E.zoneItemTabIndex,W=Y===void 0?0:Y,ne=E.dropFromOthersDisabled,ue=ne===void 0?!1:ne,Ee=E.dropTargetStyle,_e=Ee===void 0?Ou:Ee,de=E.dropTargetClasses,be=de===void 0?[]:de,ve=E.autoAriaDisabled,pe=ve===void 0?!1:ve;a.items=Jt(b),a.dragDisabled=F,a.dropFromOthersDisabled=ue,a.zoneTabIndex=U,a.zoneItemTabIndex=W,a.dropTargetStyle=_e,a.dropTargetClasses=be,a.autoAriaDisabled=pe,a.type&&N!==a.type&&Pu(e,a.type),a.type=N,ov(e,N),pe||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",F?Da.DND_ZONE_DRAG_DISABLED:Da.DND_ZONE_ACTIVE)),pt.set(e,a),qt?e.tabIndex=e===Tt||ur.contains(e)||a.dropFromOthersDisabled||Tt&&a.type!==pt.get(Tt).type?-1:0:e.tabIndex=a.zoneTabIndex,e.addEventListener("focus",sv);for(var Xe=function(tt){var je=e.children[tt];Aa.add(je),je.tabIndex=qt?-1:a.zoneItemTabIndex,pe||je.setAttribute("role","listitem"),je.removeEventListener("keydown",Cu.get(je)),je.removeEventListener("click",Ru.get(je)),F||(je.addEventListener("keydown",l),Cu.set(je,l),je.addEventListener("click",h),Ru.set(je,h)),qt&&a.items[tt][ct]===mn&&(ur=je,ur.tabIndex=a.zoneItemTabIndex,je.focus())},ze=0;ze<e.children.length;ze++)Xe(ze)}g(r);var x={update:function(D){g(D)},destroy:function(){Pu(e,a.type),pt.delete(e),ts.delete(e)}};return ts.set(e,x),x}var lv=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function ns(e,r){if(cv(e))return{update:function(){},destroy:function(){}};Lu(r);var a=ev(e,r),s=uv(e,r);return{update:function(f){Lu(f),a.update(f),s.update(f)},destroy:function(){a.destroy(),s.destroy()}}}function cv(e){return!!e.closest("[".concat(mh,'="true"]'))}function Lu(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var a=e.zoneTabIndex,s=e.zoneItemTabIndex;e.dropTargetStyle;var l=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var f=e.delayTouchStart;e.dropAnimationDisabled;var h=th(e,lv);if(Object.keys(h).length>0&&console.warn("dndzone will ignore unknown options",h),!r)throw new Error("no 'items' key provided to dndzone");var m=r.find(function(E){return!{}.hasOwnProperty.call(E,ct)});if(m)throw new Error("missing '".concat(ct,"' property for item ").concat(oi(m)));if(l&&!Array.isArray(l))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Cr(l),", ").concat(oi(l)));if(a&&!Mu(a))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Cr(a),", ").concat(oi(a)));if(s&&!Mu(s))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Cr(s),", ").concat(oi(s)));if(f!==void 0&&f!==!1){var g=f===!0,x=typeof f=="number"&&isFinite(f)&&f>=0;if(!g&&!x)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(Cr(f),", ").concat(oi(f)))}}function Mu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}const ke=new _a("TaskPlannerDB");ke.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});ke.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));ke.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));ke.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify(r=>{r.archivedAt===void 0&&(r.archivedAt=null)}));ke.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify((r,a)=>{r.columnIndex===void 0&&(r.columnIndex=r.order%5)}));function Va(e){return e.length===0?0:Math.max(...e.map(a=>a.order))+1}async function fv(){return(await ke.lists.orderBy("order").toArray()).filter(r=>r.archivedAt==null)}async function dv(){return await ke.lists.orderBy("order").toArray()}async function hv(e,r=null){const a=e.trim();if(a==="")throw new Error("List name cannot be empty or whitespace-only");const s=await ke.lists.orderBy("order").toArray(),l=Va(s),f=5;let h;return r!==null&&r>=0&&r<f?h=r:h=l%f,await ke.lists.add({name:a,order:l,archivedAt:null,columnIndex:h})}async function As(e=null){const r=await ke.lists.orderBy("order").toArray(),a=Va(r),s=5;let l;return e!==null&&e>=0&&e<s?l=e:l=a%s,await ke.lists.add({name:null,order:a,archivedAt:null,columnIndex:l})}async function vv(e,r){const a=r.trim();if(a==="")throw new Error("List name cannot be empty");return await ke.lists.update(e,{name:a})}async function Mo(e){return await ke.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function pv(){return(await ke.tasks.where("status").equals("archived").toArray()).sort((r,a)=>{const s=r.archivedAt||0,l=a.archivedAt||0;return l!==s?l-s:(a.order||0)-(r.order||0)})}async function mv(e,r,a=null){let s=e;e===null&&(s=await As(a));const l=await ke.tasks.where("listId").equals(s).filter(g=>g.status!=="archived").sortBy("order"),f=Va(l),h=r===""?"":r.trim();return await ke.tasks.add({text:h,listId:s,order:f,status:"unchecked"})}async function yv(e,r){const a=r===""?"":r.trim();return await ke.tasks.update(e,{text:a})}async function Nu(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const a={status:r};return r==="archived"?a.archivedAt=Date.now():r!=="archived"&&(a.archivedAt=null),await ke.tasks.update(e,a)}async function gv(e){const r=await ke.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const a=await ke.lists.get(r.listId);if(!a)throw new Error(`Task's list ${r.listId} not found`);let s=!1;a.archivedAt!=null&&(await bv(r.listId),s=!0);const l=await ke.tasks.where("listId").equals(r.listId).filter(m=>m.status!=="archived"&&m.id!==e).sortBy("order"),f=Va(l);return{taskUpdated:await ke.tasks.update(e,{status:"checked",order:f}),listRestored:s}}async function ci(e,r){if(!r||r.length===0)return;const a=r.map(m=>m.id),l=(await ke.tasks.bulkGet(a)).filter(m=>m!==void 0);if(l.length===0)return;const f=l.filter(m=>m.listId!==e),h=new Set(f.map(m=>m.listId));await ke.transaction("rw",ke.tasks,async()=>{for(let m=0;m<r.length;m++){const g=r[m].id,x=l.find(D=>D.id===g);if(!x)continue;const E={order:m};x.listId!==e&&(E.listId=e),await ke.tasks.update(g,E)}for(const m of h){const g=await ke.tasks.where("listId").equals(m).filter(x=>x.status!=="archived").sortBy("order");for(let x=0;x<g.length;x++)await ke.tasks.update(g[x].id,{order:x})}})}async function _v(e){const r=Date.now();return await ke.lists.update(e,{archivedAt:r})}async function bv(e){return await ke.lists.update(e,{archivedAt:null})}async function wv(e){const r=Date.now(),a=await ke.tasks.where("listId").equals(e).filter(l=>l.status==="unchecked"||l.status==="checked").toArray(),s=a.map(l=>ke.tasks.update(l.id,{status:"archived",archivedAt:r}));return await Promise.all(s),a.length}async function Ev(e,r){if(!r||r.length===0)return;if(e<0||e>=5)throw new Error(`Invalid column index: ${e}`);const a=r.map(m=>m.id),s=await ke.lists.bulkGet(a);if(s.filter(m=>!m).length>0)throw new Error("Cannot update order: some lists do not exist");const f=s.filter(m=>m!==void 0),h=f.filter(m=>(m.columnIndex??0)!==e);new Set(h.map(m=>m.columnIndex??0)),await ke.transaction("rw",ke.lists,async()=>{const m=new Set;for(let b=0;b<r.length;b++){const T=r[b].id,N=f.find(M=>M.id===T);if(!N)continue;const P={order:b},F=N.columnIndex??0;F!==e&&(P.columnIndex=e,m.add(F)),await ke.lists.update(T,P)}const x=(await ke.lists.orderBy("order").toArray()).filter(b=>b.archivedAt==null),E=Array(5).fill(null).map(()=>[]);for(const b of x){const T=b.columnIndex??0,N=T>=5?4:T;E[N].push(b)}const D=new Set([e,...m]);for(const b of D){const T=E[b];T.sort((N,P)=>(N.order??0)-(P.order??0));for(let N=0;N<T.length;N++)await ke.lists.update(T[N].id,{order:N})}})}const Ia=160,ql=150,rs=1056,xv=816,Sa=16;var Tv=Ce('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),kv=Ce('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function Av(e,r){_r(r,!0);let a=ye($t(r.taskText||"")),s=ye(!1),l=ye(null),f=ye(null),h=xt(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const P=24,F=24,M=Sa,Y=P+F+M+8-8,W=10,ne=r.taskPosition.top-Y,ue=r.taskPosition.left-Sa+W,Ee=r.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${ne}px; left: ${ue}px; width: ${Ee}px;`});Ye(()=>{r.isOpen&&(R(a,r.taskText||"",!0),R(s,!1))}),Ye(()=>{r.isOpen&&y(l)&&setTimeout(()=>{y(l)?.focus(),y(l)?.select(),y(l)instanceof HTMLTextAreaElement&&(y(l).style.height="auto",y(l).style.height=`${Math.min(y(l).scrollHeight,Ia)}px`)},0)}),Ye(()=>{if(y(l)&&y(l)instanceof HTMLTextAreaElement){const P=()=>{y(l).style.height="auto",y(l).style.height=`${Math.min(y(l).scrollHeight,Ia)}px`};return y(l).addEventListener("input",P),()=>{y(l).removeEventListener("input",P)}}});function m(){const P=y(a)??"",F=P.trim();if(F===""&&P.length>0){r.onSave(r.taskId,""),R(s,!1);return}if(P===""||F===""){R(s,!0);return}r.onSave(r.taskId,F),R(s,!1)}function g(){R(a,r.taskText||"",!0),R(s,!1),r.onCancel()}function x(P){P.target===P.currentTarget&&g()}function E(P){P.key==="Escape"?g():P.key==="Enter"&&!P.shiftKey&&document.activeElement===y(l)&&(P.preventDefault(),m())}function D(){r.onArchive&&r.onArchive(r.taskId)}var b=vr(),T=kt(b);{var N=P=>{var F=kv();F.__click=x,F.__keydown=E;var M=ge(F);M.__click=ve=>ve.stopPropagation();var U=Se(ge(M),2),Y=ge(U);Y.__keydown=E,_n(Y,ve=>R(l,ve),()=>y(l));var W=Se(Y,2);{var ne=ve=>{var pe=Tv();we(ve,pe)};ot(W,ve=>{y(s)&&ve(ne)})}var ue=Se(U,2),Ee=ge(ue);Ee.__click=D;var _e=Se(Ee,2),de=ge(_e);de.__click=g;var be=Se(de,2);be.__click=m,_n(M,ve=>R(f,ve),()=>y(f)),lt(ve=>{Wn(M,ve),Wn(Y,`width: ${ql}px;`),Ot(Y,"aria-describedby",y(s)?"validation-message":void 0),be.disabled=y(s),Ot(be,"aria-label",y(s)?"Save disabled: task cannot be empty":"Save task changes")},[()=>y(h)()]),gs(Y,()=>y(a),ve=>R(a,ve)),we(P,F)};ot(T,P=>{r.isOpen&&P(N)})}we(e,b),br()}Wr(["click","keydown"]);var Dv=Ce('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),Iv=Ce('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-red-600 border border-red-300 rounded hover:bg-red-50" aria-label="Archive this list">Archive</button> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div>',1),Sv=Ce('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-gray-600">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel archiving">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700" aria-label="Confirm archive list">Archive</button></div>',1),Ov=Ce('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed box-border" role="document"><!></div></div>');function Cv(e,r){_r(r,!0);let a=ye($t(r.listName||"")),s=ye(!1),l=ye(null),f=ye(null),h=ye("edit"),m=xt(()=>()=>{if(!r.listPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const U=24,Y=24,W=Sa,ue=U+Y+W+8-8,Ee=r.listPosition.top-ue,_e=r.listPosition.left-Sa,de=Math.max(r.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${Ee}px; left: ${_e}px; width: ${de}px; max-width: ${de}px; box-sizing: border-box;`});Ye(()=>{r.isOpen&&(R(a,r.listName||"",!0),R(s,!1),R(h,"edit"))}),Ye(()=>{r.isOpen&&y(l)&&setTimeout(()=>{y(l)?.focus(),y(l)?.select()},0)});function g(){const Y=(y(a)??"").trim();if(Y===""){R(s,!0);return}r.onSave(r.listId,Y),R(s,!1)}function x(){R(a,r.listName||"",!0),R(s,!1),r.onCancel()}function E(U){U.target===U.currentTarget&&x()}function D(U){U.key==="Escape"?y(h)==="confirm-archive"?N():x():U.key==="Enter"&&!U.shiftKey&&y(h)==="edit"&&U.target===y(l)&&(U.preventDefault(),g())}function b(){R(h,"confirm-archive")}function T(){r.onArchive(r.listId),x()}function N(){R(h,"edit")}var P=vr(),F=kt(P);{var M=U=>{var Y=Ov();Y.__click=E,Y.__keydown=D;var W=ge(Y);W.__click=_e=>_e.stopPropagation();var ne=ge(W);{var ue=_e=>{var de=Iv(),be=Se(kt(de),2),ve=ge(be);_n(ve,He=>R(l,He),()=>y(l));var pe=Se(ve,2);{var Xe=He=>{var Je=Dv();we(He,Je)};ot(pe,He=>{y(s)&&He(Xe)})}var ze=Se(be,2),$e=ge(ze);$e.__click=b;var tt=Se($e,2),je=ge(tt);je.__click=x;var ht=Se(je,2);ht.__click=g,lt(()=>{Ot(ve,"aria-describedby",y(s)?"validation-message":void 0),ht.disabled=y(s),Ot(ht,"aria-label",y(s)?"Save disabled: list name cannot be empty":"Save list name changes")}),gs(ve,()=>y(a),He=>R(a,He)),we(_e,de)},Ee=_e=>{var de=vr(),be=kt(de);{var ve=pe=>{var Xe=Sv(),ze=Se(kt(Xe),4),$e=ge(ze);$e.__click=N;var tt=Se($e,2);tt.__click=T,we(pe,Xe)};ot(be,pe=>{y(h)==="confirm-archive"&&pe(ve)},!0)}we(_e,de)};ot(ne,_e=>{y(h)==="edit"?_e(ue):_e(Ee,!1)})}_n(W,_e=>R(f,_e),()=>y(f)),lt(_e=>Wn(W,_e),[()=>y(m)()]),we(U,Y)};ot(F,U=>{r.isOpen&&U(M)})}we(e,P),br()}Wr(["click","keydown"]);var Rv=Ce('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea class="flex-1 break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div>',1),Pv=Ce('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1" role="button" tabindex="0"> </span>',1),Lv=Ce('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-full print:hidden add-task-container add-task-button mt-2 svelte-jtbpvm"><!></div>');function No(e,r){_r(r,!0);let a=xn(r,"isInputActive",11,!1),s=xn(r,"inputValue",3,""),l=xn(r,"buttonText",3,"Add Task"),f=xn(r,"placeholder",3,"Add new task..."),h=xn(r,"marginLeft",3,!1),m=xn(r,"containerElement",15,null),g=xn(r,"textareaElement",15,null),x=ye(null),E=ye(null);Ye(()=>{m(y(E)),g(y(x))}),Ye(()=>{a()&&y(x)&&setTimeout(()=>{y(x)?.focus(),y(x)instanceof HTMLTextAreaElement&&(y(x).style.height="auto",y(x).style.height=`${Math.min(y(x).scrollHeight,Ia)}px`)},0)}),Ye(()=>{if(y(x)&&y(x)instanceof HTMLTextAreaElement){const M=()=>{y(x).style.height="auto",y(x).style.height=`${Math.min(y(x).scrollHeight,Ia)}px`};return y(x).addEventListener("input",M),()=>{y(x).removeEventListener("input",M)}}});function D(M){M.key==="Enter"&&!M.shiftKey?(M.preventDefault(),r.onSave?.()):M.key==="Escape"&&r.onEscape?.(M)}function b(M){(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),r.onActivate?.())}var T=Lv(),N=ge(T);{var P=M=>{var U=Rv(),Y=Se(kt(U),4),W=ge(Y);W.__input=ue=>r.onInputChange?.(ue.currentTarget.value),W.__keydown=D,_n(W,ue=>R(x,ue),()=>y(x));var ne=Se(W,2);ne.__click=function(...ue){r.onSave?.apply(this,ue)},lt(()=>{Ot(W,"placeholder",f()),Vd(W,s())}),we(M,U)},F=M=>{var U=Pv(),Y=Se(kt(U),4);Y.__click=function(...ne){r.onActivate?.apply(this,ne)},Y.__keydown=b;var W=ge(Y);lt(()=>{Ot(Y,"aria-label",r.ariaLabel||l()),zn(W,l())}),we(M,U)};ot(N,M=>{a()?M(P):M(F,!1)})}_n(T,M=>R(E,M),()=>y(E)),lt(()=>Wn(T,h()?"margin-left: 1.5rem;":"")),we(e,T),br()}Wr(["input","keydown","click"]);function is(e,r,a={}){const{ignoreElements:s=[],shouldClose:l=()=>!0,checkIgnoreClick:f=null}=a;function h(g){const x=typeof e=="function"?e():e;if(x&&!x.contains(g.target)&&!(f&&f(g))){for(const E of s){let D=null;if(typeof E=="function"?D=E():D=E,D&&D.contains(g.target))return}l()&&r()}}const m=setTimeout(()=>{document.addEventListener("click",h)},0);return()=>{clearTimeout(m),document.removeEventListener("click",h)}}function Zl(e){return e===""}function Mv(e){return e.trim()===""&&e.length>0}function Ql(e){const r=e.trim(),a=Mv(e);return{text:a?"":r,isBlank:a}}var Nv=Ce('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),Fv=Ce('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-full m-0 list-none svelte-k6mizj"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),Bv=Ce('<div class="empty-list-add-task-wrapper svelte-k6mizj"><!></div>'),Kv=Ce('<div class="task-list-wrapper m-0 p-0 svelte-k6mizj"><ul></ul> <!></div>'),jv=Ce("<p>Loading tasks...</p> <!>",1),zv=Ce('<div class="flex flex-col gap-1 m-0 p-0 svelte-k6mizj"><div class="flex items-center gap-2 m-0 p-0"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder list" tabindex="-1" aria-hidden="true"></span> <h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 p-0 leading-none svelte-k6mizj"> </h2></div> <!></div> <!> <!>',1);function Gv(e,r){_r(r,!0);const a=()=>ya(y(m),"$tasksQuery",s),[s,l]=_s();let f=xn(r,"allLists",19,()=>[]),h=xn(r,"stableLists",19,()=>[]),m=ye(null),g=ye($t([])),x=ye(!1),E=ye(!1),D=ye(null),b=ye(""),T=ye(null),N=ye(null),P=ye(null),F=ye(!1),M=ye(null),U=ye(null),Y=ye(null),W=ye(null),ne=ye(null),ue=ye(null);Ye(()=>{h().some(z=>z.id===r.listId)&&r.listId?(!y(m)||y(ue)!==r.listId)&&(ga(R(m,ba(()=>Mo(r.listId)),!0),"$tasksQuery",s),R(ue,r.listId,!0)):(ga(R(m,null),"$tasksQuery",s),R(ue,null))}),Ye(()=>{a()&&Array.isArray(a())&&R(g,a().filter(S=>S.status==="unchecked"||S.status==="checked"),!0)}),Ye(()=>{if(!y(Y))return;function S(z){const V=z.target;if((z.key==="Enter"||z.key===" ")&&V instanceof HTMLElement&&V.tagName==="H2"&&V.hasAttribute("role")&&V.getAttribute("role")==="button"){const ce=y(Y)?.querySelector('h2[role="button"]');if(ce&&V===ce){z.preventDefault(),z.stopImmediatePropagation();const te=V.getBoundingClientRect();R(M,{top:te.top,left:te.left,width:te.width,height:te.height},!0),R(U,V,!0),R(F,!0)}}}return y(Y).addEventListener("keydown",S,!0),()=>{y(Y)&&y(Y).removeEventListener("keydown",S,!0)}}),Ye(()=>{if(!y(W))return;function S(z){const V=z.target;if((z.key==="Enter"||z.key===" ")&&V instanceof HTMLElement&&V.hasAttribute("role")&&V.getAttribute("role")==="button"){const ce=y(W)?.querySelector('span[role="button"]');ce&&V===ce&&(z.preventDefault(),z.stopImmediatePropagation(),pe())}}return y(W).addEventListener("keydown",S,!0),()=>{y(W)&&y(W).removeEventListener("keydown",S,!0)}}),Ye(()=>{if(!y(P))return;async function S(z){const V=z.target;if((z.key==="Enter"||z.key===" ")&&V instanceof HTMLElement&&V.hasAttribute("data-no-drag")){z.preventDefault(),z.stopImmediatePropagation();const ce=V.closest("li[data-id]");if(ce){const te=parseInt(ce.getAttribute("data-id")),xe=y(g).find(he=>he.id===te);if(xe){const he=V.getBoundingClientRect();R(T,{top:he.top,left:he.left,width:he.width,height:he.height},!0),R(N,V,!0),R(D,te,!0),R(b,xe.text,!0),R(E,!0)}}return}if(z.key==="ArrowDown"||z.key==="ArrowUp"){const ce=document.activeElement;if(!ce)return;const te=ce.closest("li[data-id]");if(!te||!y(P).contains(te))return;const xe=te.getAttribute("data-id");if(!xe)return;const he=parseInt(xe);if(!y(g).find(Ve=>Ve.id===he))return;const st=y(g).findIndex(Ve=>Ve.id===he),nt=st===0,Oe=st===y(g).length-1;if(z.key==="ArrowDown"&&Oe){z.preventDefault(),z.stopImmediatePropagation();const Ve=f().findIndex(It=>It.id===r.listId);if(Ve<f().length-1){const It=f()[Ve+1].id;await Ee(he,It)}else await de(he)}else if(z.key==="ArrowUp"&&nt){z.preventDefault(),z.stopImmediatePropagation();const Ve=f().findIndex(It=>It.id===r.listId);if(Ve>0){const It=f()[Ve-1].id;await _e(he,It)}}}}return y(P).addEventListener("keydown",S,!0),()=>{y(P).removeEventListener("keydown",S,!0)}});async function Ee(S,z){try{const V=await Mo(z),ce=[{id:S},...V];await ci(z,ce)}catch(V){console.error("Error moving task to next list:",V)}}async function _e(S,z){try{const ce=[...await Mo(z),{id:S}];await ci(z,ce)}catch(V){console.error("Error moving task to previous list:",V)}}async function de(S){try{const z=await As();await ci(z,[{id:S}])}catch(z){console.error("Error moving task to new list:",z)}}function be(S){R(g,S.detail.items.filter(z=>z&&typeof z.id=="number"),!0)}Ye(()=>{if(!y(P))return;async function S(z){if(z.key!=="ArrowDown"&&z.key!=="ArrowUp")return;const V=document.activeElement;if(!V)return;const ce=V.closest("li[data-id]");if(!ce||!y(P).contains(ce))return;const te=ce.getAttribute("data-id");if(!te)return;const xe=parseInt(te);if(!y(g).find(Oe=>Oe.id===xe))return;const me=y(g).findIndex(Oe=>Oe.id===xe),st=me===0,nt=me===y(g).length-1;if(z.key==="ArrowDown"&&nt){z.preventDefault(),z.stopImmediatePropagation(),z.stopPropagation();const Oe=f().findIndex(Ve=>Ve.id===r.listId);if(Oe<f().length-1){const Ve=f()[Oe+1].id;await Ee(xe,Ve)}else await de(xe)}else if(z.key==="ArrowUp"&&st){z.preventDefault(),z.stopImmediatePropagation(),z.stopPropagation();const Oe=f().findIndex(Ve=>Ve.id===r.listId);if(Oe>0){const Ve=f()[Oe-1].id;await _e(xe,Ve)}}}return document.addEventListener("keydown",S,!0),()=>{document.removeEventListener("keydown",S,!0)}});async function ve(S){const z=S.detail.items.filter(V=>V&&typeof V.id=="number");R(g,z,!0);try{await ci(r.listId,z)}catch(V){console.error("Error updating task order:",V)}}function pe(){R(x,!0)}async function Xe(S){S.key==="Escape"&&(R(x,!1),r.onInputChange(""),await lr(),await lr(),await new Promise(z=>requestAnimationFrame(z)),await new Promise(z=>setTimeout(z,200)))}Ye(()=>{if(y(x))return is(()=>y(ne),()=>{y(x)&&(R(x,!1),r.onInputChange(""))},{ignoreElements:[],checkIgnoreClick:S=>{if(!y(W))return!1;const z=y(W).querySelector("button");return!!(z&&z.contains(S.target))},shouldClose:()=>y(ne)&&y(ne).value.trim()!==""?!1:!r.newTaskInput||r.newTaskInput.trim()===""})});async function ze(){let S=r.newTaskInput||"";if(y(ne)&&(S=(y(ne).value||"").toString()),S=(S||"").toString(),Zl(S)){R(x,!1),r.onInputChange(""),await lr(),await lr(),await new Promise(V=>requestAnimationFrame(V)),await new Promise(V=>setTimeout(V,200));return}const{text:z}=Ql(S);try{await mv(r.listId,z),r.onInputChange("")}catch(V){console.error("Error creating task:",V)}}async function $e(S,z){try{await Nu(S,z==="unchecked"?"checked":"unchecked")}catch(V){console.error("Error updating task status:",V)}}async function tt(S){await Nu(S,"archived")}function je(){if(!y(P))return null;const S=y(P).querySelector("li[data-id]");if(S){const z=S.querySelector('span[role="button"]');if(z&&z instanceof HTMLElement)return z}return null}function ht(S=20,z=10){if(!y(Y))return;const V=(ce=0)=>{if(y(W)){const te=y(W).querySelector('span[role="button"]');if(te&&te instanceof HTMLElement){te.focus();return}}ce<S&&setTimeout(()=>V(ce+1),z)};V()}async function He(S){try{if(await tt(S),y(D)===S){const z=y(N);R(E,!1),R(D,null),R(b,""),R(T,null),R(N,null),await lr(),await new Promise(V=>setTimeout(V,10)),setTimeout(()=>{const V=(ce=0)=>{const te=je();te?te.focus():ce<20?setTimeout(()=>V(ce+1),10):ht(40,10)};V()},20)}}catch(z){console.error("Error archiving task:",z)}}function Je(S,z,V){const ce=V?.currentTarget||V?.target;if(ce){const te=ce.getBoundingClientRect();R(T,{top:te.top,left:te.left,width:te.width,height:te.height},!0),R(N,ce,!0)}R(D,S,!0),R(b,z,!0),R(E,!0)}function zt(S,z,V){if(V.key==="Enter"||V.key===" "){V.preventDefault(),V.stopImmediatePropagation();const ce=V.currentTarget;if(ce){const te=ce.getBoundingClientRect();R(T,{top:te.top,left:te.left,width:te.width,height:te.height},!0),R(N,ce,!0),R(D,S,!0),R(b,z,!0),R(E,!0)}}}async function Gt(S,z){try{await yv(S,z),R(E,!1);const V=y(N);R(D,null),R(b,""),R(T,null),R(N,null),V&&V instanceof HTMLElement&&setTimeout(()=>{V.focus()},0)}catch(V){console.error("Error updating task text:",V)}}function en(){const S=y(N);R(E,!1),R(D,null),R(b,""),R(T,null),R(N,null),S&&S instanceof HTMLElement&&setTimeout(()=>{S.focus()},0)}async function gt(S){y(N),await He(S),setTimeout(()=>{if(typeof document>"u")return;const z=document.activeElement;y(Y)&&(!z||!y(Y).contains(z))&&ht(20,10)},10)}function q(S){const z=S?.currentTarget||S?.target;if(z){const V=z.getBoundingClientRect();R(M,{top:V.top,left:V.left,width:V.width,height:V.height},!0),R(U,z,!0)}R(F,!0)}function Q(S){if(S.key==="Enter"||S.key===" "){S.preventDefault(),S.stopPropagation(),S.stopImmediatePropagation();const z=S.currentTarget;if(z){const V=z.getBoundingClientRect();R(M,{top:V.top,left:V.left,width:V.width,height:V.height},!0),R(U,z,!0),R(F,!0)}}}async function Ae(S,z){try{await vv(S,z),R(F,!1);const V=y(U);R(M,null),R(U,null),V&&V instanceof HTMLElement&&setTimeout(()=>{V.focus()},0)}catch(V){console.error("Error updating list name:",V)}}function Me(){const S=y(U);R(F,!1),R(M,null),R(U,null),S&&S instanceof HTMLElement&&setTimeout(()=>{S.focus()},0)}async function Ze(S){try{await wv(S),await _v(S)}catch(z){console.error("Error archiving list:",z)}}var vt=zv(),Ge=kt(vt),Ue=ge(Ge),re=Se(ge(Ue),2);re.__click=q,re.__keydown=Q;var Ie=ge(re),se=Se(Ue,2);{var Ne=S=>{var z=Kv(),V=ge(z);dr(V,21,()=>y(g),he=>he.id,(he,me)=>{var st=Fv(),nt=Se(ge(st),2);nt.__change=()=>$e(y(me).id,y(me).status),nt.__keydown=rt=>{(rt.key==="Enter"||rt.key===" ")&&(rt.preventDefault(),rt.stopPropagation(),$e(y(me).id,y(me).status))};var Oe=Se(nt,2);Oe.__click=rt=>Je(y(me).id,y(me).text,rt),Oe.__keydown=rt=>zt(y(me).id,y(me).text,rt);var Ve=ge(Oe),It=Se(Oe,2);{var Rt=rt=>{var tn=Nv();tn.__click=()=>He(y(me).id),lt(()=>Ot(tn,"aria-label",`Archive task: ${y(me).text||"blank task"}`)),we(rt,tn)};ot(It,rt=>{y(me).status==="checked"&&rt(Rt)})}lt(()=>{Ot(st,"data-id",y(me).id),Sl(nt,y(me).status==="checked"),Ot(nt,"aria-label",`Mark task "${y(me).text||"blank task"}" as ${y(me).status==="checked"?"unchecked":"checked"}`),hi(Oe,1,Il(y(me).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1":"cursor-pointer hover:underline break-words flex-1")),Ot(Oe,"aria-label",`Edit task: ${y(me).text||"blank task"}`),zn(Ve,y(me).text||"")}),we(he,st)}),_n(V,he=>R(P,he),()=>y(P)),Ho(V,(he,me)=>ns?.(he,me),()=>({items:y(g),type:"task"}));var ce=Se(V,2);{var te=he=>{var me=Bv(),st=ge(me);No(st,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:ze,onEscape:Xe,onActivate:pe,buttonText:"Add your first task",placeholder:"Add new task...",get ariaLabel(){return`Add your first task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return y(x)},set isInputActive(nt){R(x,nt,!0)},get containerElement(){return y(W)},set containerElement(nt){R(W,nt,!0)},get textareaElement(){return y(ne)},set textareaElement(nt){R(ne,nt,!0)}}),we(he,me)},xe=he=>{No(he,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:ze,onEscape:Xe,onActivate:pe,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return y(x)},set isInputActive(me){R(x,me,!0)},get containerElement(){return y(W)},set containerElement(me){R(W,me,!0)},get textareaElement(){return y(ne)},set textareaElement(me){R(ne,me,!0)}})};ot(ce,he=>{y(g).length===0?he(te):he(xe,!1)})}lt(()=>hi(V,1,`space-y-2 m-0 p-0 list-none ${y(g).length===0?"empty-drop-zone min-h-[24px]":""}`,"svelte-k6mizj")),Or("consider",V,be),Or("finalize",V,ve),we(S,z)},Be=S=>{var z=jv(),V=Se(kt(z),2);No(V,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:ze,onEscape:Xe,onActivate:pe,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return y(x)},set isInputActive(ce){R(x,ce,!0)},get containerElement(){return y(W)},set containerElement(ce){R(W,ce,!0)},get textareaElement(){return y(ne)},set textareaElement(ce){R(ne,ce,!0)}}),we(S,z)};ot(se,S=>{y(m)&&a()!==void 0?S(Ne):S(Be,!1)})}_n(Ge,S=>R(Y,S),()=>y(Y));var Qe=Se(Ge,2);Av(Qe,{get isOpen(){return y(E)},get taskId(){return y(D)},get taskText(){return y(b)},get taskPosition(){return y(T)},onSave:Gt,onCancel:en,onArchive:gt});var un=Se(Qe,2);Cv(un,{get isOpen(){return y(F)},get listId(){return r.listId},get listName(){return r.listName},get listPosition(){return y(M)},onSave:Ae,onCancel:Me,onArchive:Ze}),lt(()=>{Ot(Ge,"data-list-id",r.listId),Ot(re,"aria-label",`Rename list: ${r.listName}`),zn(Ie,r.listName)}),we(e,vt),br(),l()}Wr(["click","keydown","change"]);var Uv=Ce("<p>Loading...</p>"),Vv=Ce("<p>Loading data...</p>"),Hv=Ce("<p>No archived lists or tasks</p>"),Wv=Ce('<span class="text-sm text-gray-500"> </span>'),Yv=Ce('<span class="text-xs bg-gray-200 px-2 py-1 rounded">[List Archived]</span> <!>',1),qv=Ce('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),Zv=Ce('<p class="text-sm text-gray-500 italic">No archived tasks</p>'),Qv=Ce('<li class="flex items-center gap-3 flex-wrap"><span class="line-through"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button></li>'),Xv=Ce('<div class="mb-4"><h4 class="text-sm font-medium text-gray-600 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),$v=Ce('<div class="border-b border-gray-200 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <div class="border-b border-gray-200 pb-4"><!></div>',1),Jv=Ce('<div class="grid grid-cols-2 gap-4"></div>'),ep=Ce('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function tp(e,r){_r(r,!0);const a=()=>ya(y(m),"$listsQuery",l),s=()=>ya(y(h),"$archivedTasksQuery",l),[l,f]=_s();let h=ye(null),m=ye(null);Ye(()=>{ga(R(h,ba(()=>pv()),!0),"$archivedTasksQuery",l),ga(R(m,ba(()=>dv()),!0),"$listsQuery",l)});function g(M){return M?new Date(M).toDateString():null}function x(M){return M?new Date(M).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let E=xt(()=>{const M=y(h)?s():null,U=y(m)?a():null;if(!U||!Array.isArray(U))return[];const Y={};if(M&&Array.isArray(M))for(const ne of M)Y[ne.listId]||(Y[ne.listId]=[]),Y[ne.listId].push(ne);const W=[];for(const ne of U){const ue=ne.archivedAt!=null,Ee=Y[ne.id]&&Y[ne.id].length>0;if(ue||Ee){const _e=Y[ne.id]||[],de={};for(const be of _e){const ve=g(be.archivedAt)||"Unknown";de[ve]||(de[ve]=[]),de[ve].push(be)}W.push({list:ne,listArchiveDate:ne.archivedAt?g(ne.archivedAt):null,tasksByDate:de,hasTasks:_e.length>0})}}return W.sort((ne,ue)=>{if(ne.list.order!==ue.list.order)return ne.list.order-ue.list.order;const Ee=ne.list.name??"Unnamed list",_e=ue.list.name??"Unnamed list";return Ee.localeCompare(_e)}),W});function D(M){return M.sort((U,Y)=>{if(U==="Unknown")return 1;if(Y==="Unknown")return-1;const W=new Date(U).getTime();return new Date(Y).getTime()-W})}async function b(M){try{(await gv(M)).listRestored&&console.log("Task and its list have been restored")}catch(U){console.error("Error restoring task:",U)}}var T=ep(),N=Se(ge(T),2);{var P=M=>{var U=Uv();we(M,U)},F=M=>{var U=vr(),Y=kt(U);{var W=ue=>{var Ee=Vv();we(ue,Ee)},ne=ue=>{var Ee=vr(),_e=kt(Ee);{var de=ve=>{var pe=Hv();we(ve,pe)},be=ve=>{var pe=Jv();dr(pe,21,()=>y(E),oa,(Xe,ze)=>{const $e=xt(()=>y(ze).list),tt=xt(()=>y($e).name??"Unnamed list"),je=xt(()=>y($e).archivedAt!=null),ht=xt(()=>y(ze).listArchiveDate);var He=$v(),Je=kt(He),zt=ge(Je),Gt=ge(zt),en=ge(Gt),gt=Se(Gt,2);{var q=Ge=>{var Ue=Yv(),re=Se(kt(Ue),2);{var Ie=se=>{var Ne=Wv(),Be=ge(Ne);lt(Qe=>zn(Be,`- ${Qe??""}`),[()=>x(y(ht))]),we(se,Ne)};ot(re,se=>{y(ht)&&se(Ie)})}we(Ge,Ue)},Q=Ge=>{var Ue=qv();we(Ge,Ue)};ot(gt,Ge=>{y(je)?Ge(q):Ge(Q,!1)})}var Ae=Se(Je,2),Me=ge(Ae);{var Ze=Ge=>{var Ue=Zv();we(Ge,Ue)},vt=Ge=>{var Ue=vr(),re=kt(Ue);dr(re,17,()=>D(Object.keys(y(ze).tasksByDate)),oa,(Ie,se)=>{const Ne=xt(()=>y(ze).tasksByDate[y(se)]);var Be=Xv(),Qe=ge(Be),un=ge(Qe),S=Se(Qe,2);dr(S,21,()=>y(Ne),oa,(z,V)=>{var ce=Qv(),te=ge(ce),xe=ge(te),he=Se(te,2);he.__click=()=>b(y(V).id),lt(()=>zn(xe,y(V).text)),we(z,ce)}),lt(z=>zn(un,z),[()=>y(se)==="Unknown"?"Unknown Date":x(y(se))]),we(Ie,Be)}),we(Ge,Ue)};ot(Me,Ge=>{y(ze).hasTasks?Ge(vt,!1):Ge(Ze)})}lt(()=>zn(en,y(tt))),we(Xe,He)}),we(ve,pe)};ot(_e,ve=>{y(E).length===0?ve(de):ve(be,!1)},!0)}we(ue,Ee)};ot(Y,ue=>{!s()||!a()?ue(W):ue(ne,!1)},!0)}we(M,U)};ot(N,M=>{!y(h)||!y(m)?M(P):M(F,!1)})}lt(()=>Wn(T,`width: ${rs}px;`)),we(e,T),br(),f()}Wr(["click"]);var np=Ce("<p>Loading...</p>"),rp=Ce('<div class="flex flex-col mb-6 svelte-1n46o8q"><!></div>'),ip=Ce('<div class="empty-drop-zone min-h-[48px]"></div>'),ap=Ce('<h2><div class="flex items-center gap-2"><input type="text" class="create-list-input cursor-pointer hover:underline svelte-1n46o8q" placeholder="List name..." aria-label="Enter list name"/> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" aria-label="Create list">Save</button></div></h2>'),op=Ce('<h2 role="button" tabindex="0" aria-label="Create new list">Create new list</h2>'),sp=Ce('<div class="flex flex-col min-w-0 border-r border-gray-300 last:border-r-0 pt-0 svelte-1n46o8q"><div class="flex flex-col pt-0"><!> <!></div> <!></div>'),up=Ce('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" disabled class="cursor-pointer opacity-50" aria-hidden="true" tabindex="-1"/> <span> </span></li>'),lp=Ce('<div class="grid grid-cols-5 gap-4 w-full"></div> <div class="relative print:hidden"><ul class="m-0 p-0 list-none min-h-0 pb-2"></ul></div>',1),cp=Ce('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><div class="w-full h-full p-4 overflow-auto"><!></div></div></div> <!></main>');function fp(e,r){_r(r,!0);const a=()=>ya(f,"$lists",s),[s,l]=_s();let f=ba(()=>fv()),h=xt(()=>a()||[]),m=ye($t([])),g=ye($t({})),x=ye(null),E=ye(""),D=ye(null),b=ye(null),T=ye(""),N=null,P=ye($t([])),F=ye(null);Ye(()=>{if(a()&&Array.isArray(a())&&a().length>0&&Object.keys(y(g)).length===0){const q={};for(const Q of a())q[Q.id]="";R(g,q,!0)}}),Ye(()=>{if(a()&&Array.isArray(a())&&a().length>0){const q={...y(g)};let Q=!1;for(const Ae of a())Ae.id in q||(q[Ae.id]="",Q=!0);Q&&R(g,q,!0)}});let M=ye(0);Ye(()=>{if(a()&&Array.isArray(a())){const q=a().map(Q=>({id:Q.id,name:Q.name,order:Q.order,columnIndex:Q.columnIndex}));q.length!==y(M)&&(console.log("[DRAG] draggableLists updated from liveQuery:",{previousCount:y(M),newCount:q.length}),R(M,q.length,!0)),R(m,q,!0)}else y(M)>0&&(console.log("[DRAG] draggableLists cleared (no lists)"),R(M,0)),R(m,[],!0)});const U=5;let Y=xt(()=>()=>{if(!y(m)||y(m).length===0)return Array(U).fill(null).map(()=>[]);const q=Array(U).fill(null).map(()=>[]),Q=U-1;for(const Ae of y(m)){let Me=Ae.columnIndex??0;Me>=U&&(Me=Q),q[Me].push(Ae)}for(let Ae=0;Ae<q.length;Ae++)q[Ae].sort((Me,Ze)=>(Me.order??0)-(Ze.order??0));return q});function W(q,Q){y(g)[q]=Q}function ne(){window.print()}function ue(q){R(x,q,!0)}function Ee(q,Q){(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),q.stopPropagation(),ue(Q))}function _e(q){q.key==="Escape"&&(R(x,null),R(E,""))}Ye(()=>{if(y(x)!==null)return is(y(D),()=>{y(x)!==null&&(R(x,null),R(E,""))},{checkIgnoreClick:q=>{const Q=q.target.closest("button");return Q&&Q.textContent?.trim()==="Save"},shouldClose:()=>!y(E)||y(E).trim()===""})}),Ye(()=>{y(x)!==null&&y(D)&&setTimeout(()=>{y(D)?.focus()},0)});async function de(q){const Q=y(E)||"";if(Zl(Q)){R(x,null),R(E,"");return}const{text:Ae,isBlank:Me}=Ql(Q);if(Me){R(x,null),R(E,"");return}try{await hv(Ae,q),R(E,""),await lr(),y(D)&&setTimeout(()=>{y(D)?.focus()},0)}catch(Ze){console.error("Error creating list:",Ze)}}Ye(()=>{if(y(b)!==null)return is(N,()=>{y(b)!==null&&(R(b,null),R(T,""))},{checkIgnoreClick:q=>{const Q=q.target.closest("button");return Q&&Q.textContent?.trim()==="Save"},shouldClose:()=>!y(T)||y(T).trim()===""})}),Ye(()=>{y(b)}),Ye(()=>{});function be(q){R(P,q.detail.items,!0)}async function ve(q){if(R(P,q.detail.items,!0),q.detail.items&&q.detail.items.length>0)try{const Q=await As();await ci(Q,q.detail.items),R(P,[],!0)}catch(Q){console.error("Error creating list from dropped task:",Q),R(P,[],!0)}}function pe(q){return q&&(q.isDndShadowItem===!0||typeof q.id=="string"&&q.id.startsWith("id:dnd-shadow-placeholder-"))}function Xe(q,Q){console.log("[DRAG] ===== CONSIDER EVENT ====="),console.log("[DRAG] consider - column:",Q),console.log("[DRAG] consider - event.detail.items count:",q.detail.items?.length||0);const Ae=q.detail.items||[],Me=Ae.filter(re=>pe(re)),Ze=Ae.filter(re=>!pe(re));console.log("[DRAG] consider - placeholders detected:",Me.length),Me.length>0&&console.log("[DRAG] consider - placeholder items:",Me.map(re=>({id:re.id,isDndShadowItem:re.isDndShadowItem}))),console.log("[DRAG] consider - valid items:",Ze.length);const vt=y(m).filter(re=>(re.columnIndex??0)===Q);console.log("[DRAG] consider - current lists in column",Q+" (before update):",vt.map(re=>({id:re.id,name:re.name,columnIndex:re.columnIndex}))),console.log("[DRAG] consider - newColumnItems IDs:",Ae.map(re=>({id:re.id,isPlaceholder:pe(re)})));const Ge=Ze.every(re=>{const Ie=y(m).find(se=>se.id===re.id);return Ie&&(Ie.columnIndex??0)===Q});console.log("[DRAG] consider - isSameColumnReorder:",Ge);for(const re of Ze){const Ie=y(m).find(se=>se.id===re.id);if(Ie){const se=Ie.columnIndex??0;se!==Q&&console.log("[DRAG] consider - CROSS-COLUMN MOVE DETECTED:",{listId:re.id,listName:re.name,oldColumn:se,newColumn:Q})}else console.log("[DRAG] consider - NEW ITEM IN COLUMN (possibly from another column):",{listId:re.id,listName:re.name,column:Q})}const Ue=y(m).filter(re=>(re.columnIndex??0)!==Q);for(let re=0;re<Ae.length;re++){const Ie=Ae[re],se=y(m).find(Be=>Be.id===Ie.id),Ne=se?{...se,...Ie,columnIndex:Q,order:re}:{...Ie,columnIndex:Q,order:re};Ue.push(Ne)}console.log("[DRAG] consider - updated draggableLists count:",Ue.length),console.log("[DRAG] consider - updated lists in column",Q+":",Ue.filter(re=>(re.columnIndex??0)===Q).map(re=>({id:re.id,name:re.name,columnIndex:re.columnIndex}))),R(m,Ue,!0);try{const re=y(Y)().map((Ie,se)=>({columnIndex:se,listCount:Ie.length,listIds:Ie.map(Ne=>Ne.id)}));console.log("[DRAG] consider - listsByColumn state (after update):",re)}catch(re){console.warn("[DRAG] consider - error logging listsByColumn:",re)}console.log("[DRAG] ===== END CONSIDER EVENT =====")}async function ze(q,Q){console.log("[DRAG] ===== FINALIZE EVENT ====="),console.log("[DRAG] finalize - column where drop occurred:",Q),console.log("[DRAG] finalize - event.detail.items count:",q.detail.items?.length||0);const Ae=(q.detail.items||[]).filter(se=>!pe(se)),Me=(q.detail.items||[]).filter(se=>pe(se));console.log("[DRAG] finalize - placeholders filtered out:",Me.length),Me.length>0&&console.warn("[DRAG] finalize - WARNING: Placeholders still present in finalize!",Me.length),console.log("[DRAG] finalize - valid items (after filtering placeholders):",Ae.length),console.log("[DRAG] finalize - valid items details:",Ae.map(se=>({id:se.id,name:se.name,order:se.order,columnIndex:se.columnIndex})));const Ze=[];let vt=!1;for(const se of Ae){const Ne=(a()||[]).find(Be=>Be.id===se.id);if(Ne){const Be=Ne.columnIndex??0;Be!==Q&&(vt=!0,Ze.push({listId:se.id,listName:se.name,oldColumn:Be,newColumn:Q}))}else{const Be=y(m).find(Qe=>Qe.id===se.id);Be&&(Be.columnIndex??0)!==Q&&(vt=!0)}}Ze.length>0&&console.log("[DRAG] finalize - COLUMN CHANGES DETECTED:",Ze);const Ue=(a()||[]).filter(se=>(se.columnIndex??0)===Q).length,re=Ae.length;if(re<Ue&&!vt){console.log("[DRAG] finalize - SKIPPING database update (source column that lost items)",{originalCount:Ue,currentCount:re,hasItemsFromOtherColumns:vt}),console.log("[DRAG] ===== END FINALIZE EVENT =====");return}if(Ae.length===0&&!vt&&Ue>0){console.log("[DRAG] finalize - SKIPPING database update (empty column that lost all items)"),console.log("[DRAG] ===== END FINALIZE EVENT =====");return}try{console.log("[DRAG] finalize - updating database with updateListOrderWithColumn..."),await Ev(Q,Ae),console.log("[DRAG] finalize - database update successful"),console.log("[DRAG] finalize - waiting for $effect to sync draggableLists from liveQuery...")}catch(se){console.error("[DRAG] finalize - ERROR updating list order:",se)}console.log("[DRAG] ===== END FINALIZE EVENT =====")}var $e=cp(),tt=ge($e),je=ge(tt);je.__click=ne;var ht=Se(tt,2),He=ge(ht),Je=ge(He),zt=ge(Je);{var Gt=q=>{var Q=np();we(q,Q)},en=q=>{var Q=vr(),Ae=kt(Q);{var Me=Ze=>{var vt=lp(),Ge=kt(vt);dr(Ge,21,()=>y(Y)(),oa,(Ie,se,Ne)=>{var Be=sp();Ot(Be,"data-column-index",Ne);var Qe=ge(Be),un=ge(Qe);dr(un,19,()=>y(se),xe=>xe.id,(xe,he)=>{const me=xt(()=>pe(y(he))),st=xt(()=>y(h).find(rt=>rt.id===y(he).id)),nt=xt(()=>!y(st)&&!y(me)?y(he):null),Oe=xt(()=>y(st)||y(nt));var Ve=rp(),It=ge(Ve);{var Rt=rt=>{{let tn=xt(()=>y(Oe).name??"Unnamed list"),Ii=xt(()=>y(g)[y(Oe).id]||"");Gv(rt,{get listId(){return y(Oe).id},get listName(){return y(tn)},get newTaskInput(){return y(Ii)},onInputChange:Yr=>W(y(Oe).id,Yr),get allLists(){return a()},get stableLists(){return y(h)}})}};ot(It,rt=>{y(Oe)&&rt(Rt)})}lt(()=>Ot(Ve,"data-id",y(he).id)),we(xe,Ve)});var S=Se(un,2);{var z=xe=>{var he=ip();we(xe,he)};ot(S,xe=>{y(se).length===0&&xe(z)})}Ho(Qe,(xe,he)=>ns?.(xe,he),()=>({items:y(se),type:"list"}));var V=Se(Qe,2);{var ce=xe=>{var he=ap(),me=ge(he),st=ge(me);st.__keydown=Oe=>{Oe.key==="Enter"&&!Oe.shiftKey?(Oe.preventDefault(),de(Ne)):Oe.key==="Escape"&&_e(Oe)},_n(st,Oe=>R(D,Oe),()=>y(D));var nt=Se(st,2);nt.__click=()=>de(Ne),lt(()=>hi(he,1,`print:hidden m-0 p-0 create-list-wrapper ${y(se).length===0?"create-list-empty-column":""}`,"svelte-1n46o8q")),gs(st,()=>y(E),Oe=>R(E,Oe)),we(xe,he)},te=xe=>{var he=op();he.__click=()=>ue(Ne),he.__keydown=me=>Ee(me,Ne),lt(()=>hi(he,1,`cursor-pointer hover:underline print:hidden m-0 p-0 create-list-wrapper ${y(se).length===0?"create-list-empty-column":""}`,"svelte-1n46o8q")),we(xe,he)};ot(V,xe=>{y(x)===Ne?xe(ce):xe(te,!1)})}Or("consider",Qe,xe=>Xe(xe,Ne)),Or("finalize",Qe,xe=>ze(xe,Ne)),we(Ie,Be)});var Ue=Se(Ge,2),re=ge(Ue);dr(re,21,()=>y(P),Ie=>Ie.id,(Ie,se)=>{var Ne=up(),Be=Se(ge(Ne),2),Qe=Se(Be,2),un=ge(Qe);lt(()=>{Ot(Ne,"data-id",y(se).id),Sl(Be,y(se).status==="checked"),hi(Qe,1,Il(y(se).status==="checked"?"line-through break-words":"break-words")),Wn(Qe,`width: ${ql}px;`),zn(un,y(se).text||"")}),we(Ie,Ne)}),_n(re,Ie=>R(F,Ie),()=>y(F)),Ho(re,(Ie,se)=>ns?.(Ie,se),()=>({items:y(P),type:"task"})),Or("consider",re,be),Or("finalize",re,ve),we(Ze,vt)};ot(Ae,Ze=>{Array.isArray(a())&&Ze(Me)},!0)}we(q,Q)};ot(zt,q=>{a()===void 0||a()===null?q(Gt):q(en,!1)})}var gt=Se(ht,2);tp(gt,{}),lt(()=>{Wn(tt,`width: ${rs}px;`),Wn(ht,`width: ${rs}px; height: ${xv}px;`)}),we(e,$e),br(),l()}Wr(["click","keydown"]);const dp=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],hp=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function vp(){try{if(await ke.lists.count()>0)return;await ke.lists.bulkAdd(dp),await ke.tasks.bulkAdd(hp),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await vp().catch(console.error),Md(fp,{target:document.getElementById("app")})))();
