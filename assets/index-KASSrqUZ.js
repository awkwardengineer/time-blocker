(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();const Yf="production",le=!Yf.toLowerCase().startsWith("prod");var Is=Array.isArray,Wf=Array.prototype.indexOf,Ds=Array.from,vr=Object.defineProperty,Cr=Object.getOwnPropertyDescriptor,qf=Object.getOwnPropertyDescriptors,Gf=Object.prototype,Xf=Array.prototype,ol=Object.getPrototypeOf,Iu=Object.isExtensible;const Ra=()=>{};function Qf(t){for(var e=0;e<t.length;e++)t[e]()}function sl(){var t,e,i=new Promise((a,s)=>{t=a,e=s});return{promise:i,resolve:t,reject:e}}const Mt=2,Cs=4,Ps=8,ul=1<<24,Yn=16,Wn=32,Kr=64,ro=128,xn=512,Nt=1024,Qt=2048,qn=4096,on=8192,Nn=16384,Ls=32768,ii=65536,Ka=1<<17,ll=1<<18,di=1<<19,Zf=1<<20,pr=32768,hs=1<<21,io=1<<22,cr=1<<23,Pr=Symbol("$state"),Jf=Symbol("legacy props"),$f=Symbol(""),cl=Symbol("proxy path"),Jr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function fl(t){if(le){const e=new Error(`lifecycle_outside_component
\`${t}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ed(){if(le){const t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Du(){if(le){const t=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function td(){if(le){const t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function nd(t){if(le){const e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function rd(){if(le){const t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function id(t){if(le){const e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function ad(){if(le){const t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function od(t){if(le){const e=new Error(`props_invalid_value
Cannot do \`bind:${t}={undefined}\` when \`${t}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_invalid_value")}function sd(t){if(le){const e=new Error(`props_rest_readonly
Rest element properties of \`$props()\` such as \`${t}\` are readonly
https://svelte.dev/e/props_rest_readonly`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_rest_readonly")}function ud(t){if(le){const e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function ld(){if(le){const t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function cd(){if(le){const t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fd(){if(le){const t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function dd(){if(le){const t=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const dl=1,hl=2,vl=4,hd=8,vd=16,pd=1,gd=4,md=8,yd=16,bd=1,_d=2,Ct=Symbol(),wd=Symbol("filename"),Ed="http://www.w3.org/1999/xhtml",xd="@attach";var Os="font-weight: bold",Ms="font-weight: normal";function kd(){le?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Os,Ms):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Xo(t){le?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Os,Ms):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Td(){le?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Os,Ms):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function pl(t){return t===this.v}function Sd(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function gl(t){return!Sd(t,this.v)}let Ad=!1;function In(t,e){return t.label=e,ml(t.v,e),t}function ml(t,e){return t?.[cl]?.(e),t}function Id(t){const e=new Error,i=Dd();return i.length===0?null:(i.unshift(`
`),vr(e,"stack",{value:i.join(`
`)}),vr(e,"name",{value:t}),e)}function Dd(){const t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const e=new Error().stack;if(Error.stackTraceLimit=t,!e)return[];const i=e.split(`
`),a=[];for(let s=0;s<i.length;s++){const l=i[s],f=l.replaceAll("\\","/");if(l.trim()!=="Error"){if(l.includes("validate_each_keys"))return[];f.includes("svelte/src/internal")||f.includes("node_modules/.vite")||a.push(l)}}return a}let Ht=null;function ai(t){Ht=t}let oi=null;function Ba(t){oi=t}let zi=null;function Cu(t){zi=t}function Gn(t,e=!1,i){Ht={p:Ht,i:!1,c:null,e:null,s:t,x:null,l:null},le&&(Ht.function=i,zi=i)}function Xn(t){var e=Ht,i=e.e;if(i!==null){e.e=null;for(var a of i)Ml(a)}return e.i=!0,Ht=e.p,le&&(zi=Ht?.function??null),{}}function yl(){return!0}let Ar=[];function bl(){var t=Ar;Ar=[],Qf(t)}function Br(t){if(Ar.length===0&&!Pi){var e=Ar;queueMicrotask(()=>{e===Ar&&bl()})}Ar.push(t)}function Cd(){for(;Ar.length>0;)bl()}const vs=new WeakMap;function _l(t){var e=Ze;if(e===null)return qe.f|=cr,t;if(le&&t instanceof Error&&!vs.has(t)&&vs.set(t,Pd(t,e)),(e.f&Ls)===0){if((e.f&ro)===0)throw le&&!e.parent&&t instanceof Error&&wl(t),t;e.b.error(t)}else si(t,e)}function si(t,e){for(;e!==null;){if((e.f&ro)!==0)try{e.b.error(t);return}catch(i){t=i}e=e.parent}throw le&&t instanceof Error&&wl(t),t}function Pd(t,e){const i=Cr(t,"message");if(!(i&&!i.configurable)){for(var a=Bs?"  ":"	",s=`
${a}in ${e.fn?.name||"<unknown>"}`,l=e.ctx;l!==null;)s+=`
${a}in ${l.function?.[wd].split("/").pop()}`,l=l.p;return{message:t.message+`
${s}
`,stack:t.stack?.split(`
`).filter(f=>!f.includes("svelte/src/internal")).join(`
`)}}}function wl(t){const e=vs.get(t);e&&(vr(t,"message",{value:e.message}),vr(t,"stack",{value:e.stack}))}const _a=new Set;let rt=null,Aa=null,pn=null,vn=[],ao=null,ps=!1,Pi=!1;class Cn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){vn=[],Aa=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of e)this.#o(a,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(Aa=this,rt=null,Pu(i.render_effects),Pu(i.effects),Aa=null,this.#u?.resolve()),pn=null}#o(e,i){e.f^=Nt;for(var a=e.first;a!==null;){var s=a.f,l=(s&(Wn|Kr))!==0,f=l&&(s&Nt)!==0,h=f||(s&on)!==0||this.skipped_effects.has(a);if((a.f&ro)!==0&&a.b?.is_pending()&&(i={parent:i,effect:a,effects:[],render_effects:[],block_effects:[]}),!h&&a.fn!==null){l?a.f^=Nt:(s&Cs)!==0?i.effects.push(a):Vi(a)&&((a.f&Yn)!==0&&i.block_effects.push(a),ji(a));var v=a.first;if(v!==null){a=v;continue}}var g=a.parent;for(a=a.next;a===null&&g!==null;)g===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),a=g.next,g=g.parent}}#s(e){for(const i of e)((i.f&Qt)!==0?this.#a:this.#i).push(i),this.#l(i.deps),jt(i,Nt)}#l(e){if(e!==null)for(const i of e)(i.f&Mt)===0||(i.f&pr)===0||(i.f^=pr,this.#l(i.deps))}capture(e,i){this.previous.has(e)||this.previous.set(e,i),(e.f&cr)===0&&(this.current.set(e,e.v),pn?.set(e,e.v))}activate(){rt=this,this.apply()}deactivate(){rt===this&&(rt=null,pn=null)}flush(){if(this.activate(),vn.length>0){if(El(),rt!==null&&rt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#c(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(_a.size>1){this.previous.clear();var e=pn,i=!0,a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const l of _a){if(l===this){i=!1;continue}const f=[];for(const[v,g]of this.current){if(l.current.has(v))if(i&&g!==l.current.get(v))l.current.set(v,g);else continue;f.push(v)}if(f.length===0)continue;const h=[...l.current.keys()].filter(v=>!this.current.has(v));if(h.length>0){var s=vn;vn=[];const v=new Set,g=new Map;for(const x of f)xl(x,h,v,g);if(vn.length>0){rt=l,l.apply();for(const x of vn)l.#o(x,a);l.deactivate()}vn=s}}rt=null,pn=e}this.committed=!0,_a.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#a)jt(e,Qt),Mr(e);for(const e of this.#i)jt(e,qn),Mr(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#u??=sl()).promise}static ensure(){if(rt===null){const e=rt=new Cn;_a.add(rt),Pi||Cn.enqueue(()=>{rt===e&&e.flush()})}return rt}static enqueue(e){Br(e)}apply(){}}function Ld(t){var e=Pi;Pi=!0;try{for(var i;;){if(Cd(),vn.length===0&&(rt?.flush(),vn.length===0))return ao=null,i;El()}}finally{Pi=e}}function El(){var t=dr;ps=!0;var e=le?new Set:null;try{var i=0;for(Ha(!0);vn.length>0;){var a=Cn.ensure();if(i++>1e3){if(le){var s=new Map;for(const f of a.current.keys())for(const[h,v]of f.updated??[]){var l=s.get(h);l||(l={error:v.error,count:0},s.set(h,l)),l.count+=v.count}for(const f of s.values())f.error&&console.error(f.error)}Od()}if(a.process(vn),fr.clear(),le)for(const f of a.current.keys())e.add(f)}}finally{if(ps=!1,Ha(t),ao=null,le)for(const f of e)f.updated=null}}function Od(){try{ad()}catch(t){le&&vr(t,"stack",{value:""}),si(t,ao)}}let Fn=null;function Pu(t){var e=t.length;if(e!==0){for(var i=0;i<e;){var a=t[i++];if((a.f&(Nn|on))===0&&Vi(a)&&(Fn=new Set,ji(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null&&a.ac===null?Fl(a):a.fn=null),Fn?.size>0)){fr.clear();for(const s of Fn){if((s.f&(Nn|on))!==0)continue;const l=[s];let f=s.parent;for(;f!==null;)Fn.has(f)&&(Fn.delete(f),l.push(f)),f=f.parent;for(let h=l.length-1;h>=0;h--){const v=l[h];(v.f&(Nn|on))===0&&ji(v)}}Fn.clear()}}Fn=null}}function xl(t,e,i,a){if(!i.has(t)&&(i.add(t),t.reactions!==null))for(const s of t.reactions){const l=s.f;(l&Mt)!==0?xl(s,e,i,a):(l&(io|Yn))!==0&&(l&Qt)===0&&kl(s,e,a)&&(jt(s,Qt),Mr(s))}}function kl(t,e,i){const a=i.get(t);if(a!==void 0)return a;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if((s.f&Mt)!==0&&kl(s,e,i))return i.set(s,!0),!0}return i.set(t,!1),!1}function Mr(t){for(var e=ao=t;e.parent!==null;){e=e.parent;var i=e.f;if(ps&&e===Ze&&(i&Yn)!==0&&(i&ll)===0)return;if((i&(Kr|Wn))!==0){if((i&Nt)===0)return;e.f^=Nt}}vn.push(e)}function Md(t){let e=0,i=Rr(0),a;return le&&In(i,"createSubscriber version"),()=>{Ni()&&(m(i),Ns(()=>(e===0&&(a=Nr(()=>t(()=>Li(i)))),e+=1,()=>{Br(()=>{e-=1,e===0&&(a?.(),a=void 0,Li(i))})})))}}var Rd=ii|di|ro;function Kd(t,e,i){new Bd(t,e,i)}class Bd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#b=Md(()=>(this.#d=Rr(this.#f),le&&In(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(e,i,a){this.#t=e,this.#n=i,this.#u=a,this.parent=Ze.b,this.#e=!!this.#n.pending,this.#a=Hs(()=>{Ze.b=this;{var s=this.#m();try{this.#i=qt(()=>a(s))}catch(l){this.error(l)}this.#h>0?this.#g():this.#e=!1}return()=>{this.#c?.remove()}},Rd)}#_(){try{this.#i=qt(()=>this.#u(this.#t))}catch(e){this.error(e)}this.#e=!1}#w(){const e=this.#n.pending;e&&(this.#o=qt(()=>e(this.#t)),Cn.enqueue(()=>{var i=this.#m();this.#i=this.#p(()=>(Cn.ensure(),qt(()=>this.#u(i)))),this.#h>0?this.#g():(ti(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#m(){var e=this.#t;return this.#e&&(this.#c=Un(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var i=Ze,a=qe,s=Ht;En(this.#a),Xt(this.#a),ai(this.#a.ctx);try{return e()}catch(l){return _l(l),null}finally{En(i),Xt(a),ai(s)}}#g(){const e=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),jl(this.#i,this.#l)),this.#o===null&&(this.#o=qt(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}this.#h+=e,this.#h===0&&(this.#e=!1,this.#o&&ti(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(e){this.#y(e),this.#f+=e,this.#d&&li(this.#d,this.#f)}get_effect_pending(){return this.#b(),m(this.#d)}error(e){var i=this.#n.onerror;let a=this.#n.failed;if(this.#v||!i&&!a)throw e;this.#i&&(Ot(this.#i),this.#i=null),this.#o&&(Ot(this.#o),this.#o=null),this.#s&&(Ot(this.#s),this.#s=null);var s=!1,l=!1;const f=()=>{if(s){Td();return}s=!0,l&&dd(),Cn.ensure(),this.#f=0,this.#s!==null&&ti(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,qt(()=>this.#u(this.#t)))),this.#h>0?this.#g():this.#e=!1};var h=qe;try{Xt(null),l=!0,i?.(e,f),l=!1}catch(v){si(v,this.#a&&this.#a.parent)}finally{Xt(h)}a&&Br(()=>{this.#s=this.#p(()=>{Cn.ensure(),this.#v=!0;try{return qt(()=>{a(this.#t,()=>e,()=>f)})}catch(v){return si(v,this.#a.parent),null}finally{this.#v=!1}})})}}function Ia(t,e){return e}function Fd(t,e,i){for(var a=[],s=e.length,l=0;l<s;l++)js(e[l].e,a,!0);Nl(a,()=>{var f=a.length===0&&i!==null;if(f){var h=i,v=h.parentNode;Jd(v),v.append(h),t.items.clear(),Dn(t,e[0].prev,e[s-1].next)}for(var g=0;g<s;g++){var x=e[g];f||(t.items.delete(x.k),Dn(t,x.prev,x.next)),Ot(x.e,!f)}t.first===e[0]&&(t.first=e[0].prev)})}function ei(t,e,i,a,s,l=null){var f=t,h=new Map,v=null,g=(e&vl)!==0,x=(e&dl)!==0,_=(e&hl)!==0;if(g){var w=t;f=w.appendChild(Un())}var k=null,D=Sl(()=>{var N=i();return Is(N)?N:N==null?[]:Ds(N)}),P,C=!0;function E(){Nd(U,P,f,e,a),k!==null&&(P.length===0?(k.fragment?(f.before(k.fragment),k.fragment=null):zs(k.effect),M.first=k.effect):ti(k.effect,()=>{k=null}))}var M=Hs(()=>{P=m(D);for(var N=P.length,q=new Set,J=rt,Y=null,F=Ol(),Q=0;Q<N;Q+=1){var ne=P[Q],W=a(ne,Q),he=C?null:h.get(W);he?(x&&li(he.v,ne),_?li(he.i,Q):he.i=Q,F&&J.skipped_effects.delete(he.e)):(he=Hd(C?f:null,Y,ne,W,Q,s,e,i),C&&(he.o=!0,Y===null?v=he:Y.next=he,Y=he),h.set(W,he)),q.add(W)}if(N===0&&l&&!k)if(C)k={fragment:null,effect:qt(()=>l(f))};else{var be=document.createDocumentFragment(),_e=Un();be.append(_e),k={fragment:be,effect:qt(()=>l(_e))}}if(!C)if(F){for(const[Le,Qe]of h)q.has(Le)||J.skipped_effects.add(Qe.e);J.oncommit(E),J.ondiscard(()=>{})}else E();m(D)}),U={effect:M,items:h,first:v};C=!1}function Nd(t,e,i,a,s){var l=(a&hd)!==0,f=e.length,h=t.items,v=t.first,g,x=null,_,w=[],k=[],D,P,C,E;if(l)for(E=0;E<f;E+=1)D=e[E],P=s(D,E),C=h.get(P),C.o&&(C.a?.measure(),(_??=new Set).add(C));for(E=0;E<f;E+=1){if(D=e[E],P=s(D,E),C=h.get(P),t.first??=C,!C.o){C.o=!0;var M=x?x.next:v;Dn(t,x,C),Dn(t,C,M),Qo(C,M,i),x=C,w=[],k=[],v=x.next;continue}if((C.e.f&on)!==0&&(zs(C.e),l&&(C.a?.unfix(),(_??=new Set).delete(C))),C!==v){if(g!==void 0&&g.has(C)){if(w.length<k.length){var U=k[0],N;x=U.prev;var q=w[0],J=w[w.length-1];for(N=0;N<w.length;N+=1)Qo(w[N],U,i);for(N=0;N<k.length;N+=1)g.delete(k[N]);Dn(t,q.prev,J.next),Dn(t,x,q),Dn(t,J,U),v=U,x=J,E-=1,w=[],k=[]}else g.delete(C),Qo(C,v,i),Dn(t,C.prev,C.next),Dn(t,C,x===null?t.first:x.next),Dn(t,x,C),x=C;continue}for(w=[],k=[];v!==null&&v.k!==P;)(v.e.f&on)===0&&(g??=new Set).add(v),k.push(v),v=v.next;if(v===null)continue;C=v}w.push(C),x=C,v=C.next}if(v!==null||g!==void 0){for(var Y=g===void 0?[]:Ds(g);v!==null;)(v.e.f&on)===0&&Y.push(v),v=v.next;var F=Y.length;if(F>0){var Q=(a&vl)!==0&&f===0?i:null;if(l){for(E=0;E<F;E+=1)Y[E].a?.measure();for(E=0;E<F;E+=1)Y[E].a?.fix()}Fd(t,Y,Q)}}l&&Br(()=>{if(_!==void 0)for(C of _)C.a?.apply()})}function Hd(t,e,i,a,s,l,f,h){var v=(f&dl)!==0,g=(f&vd)===0,x=v?g?Il(i,!1,!1):Rr(i):i,_=(f&hl)===0?s:Rr(s);le&&v&&(x.trace=()=>{var D=typeof _=="number"?s:_.v;h()[D]});var w={i:_,v:x,k:a,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var k=document.createDocumentFragment();k.append(t=Un())}return w.e=qt(()=>l(t,x,_,h)),e!==null&&(e.next=w),w}finally{}}function Qo(t,e,i){for(var a=t.next?t.next.e.nodes_start:i,s=e?e.e.nodes_start:i,l=t.e.nodes_start;l!==null&&l!==a;){var f=Ui(l);s.before(l),l=f}}function Dn(t,e,i){e===null?(t.first=i,t.effect.first=i&&i.e):(e.e===t.effect.last&&i!==null&&(t.effect.last=i.e),e.e.next&&(e.e.next.prev=null),e.next=i,e.e.next=i&&i.e),i===null?t.effect.last=e&&e.e:(i.e===t.effect.last&&e===null&&(t.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=e,i.e.prev=e&&e.e)}function Tl(t,e,i,a){const s=oo;if(i.length===0&&t.length===0){a(e.map(s));return}var l=rt,f=Ze,h=jd();function v(){Promise.all(i.map(g=>Ud(g))).then(g=>{h();try{a([...e.map(s),...g])}catch(x){(f.f&Nn)===0&&si(x,f)}l?.deactivate(),Fa()}).catch(g=>{si(g,f)})}t.length>0?Promise.all(t).then(()=>{h();try{return v()}finally{l?.deactivate(),Fa()}}):v()}function jd(){var t=Ze,e=qe,i=Ht,a=rt;if(le)var s=oi;return function(f=!0){En(t),Xt(e),ai(i),f&&a?.activate(),le&&Ba(s)}}function Fa(){En(null),Xt(null),ai(null),le&&Ba(null)}const zd=new Set;function oo(t){var e=Mt|Qt,i=qe!==null&&(qe.f&Mt)!==0?qe:null;return Ze!==null&&(Ze.f|=di),{ctx:Ht,deps:null,effects:null,equals:pl,f:e,fn:t,reactions:null,rv:0,v:Ct,wv:0,parent:i??Ze,ac:null}}function Ud(t,e){let i=Ze;i===null&&ed();var a=i.b,s=void 0,l=Rr(Ct),f=!qe,h=new Map;return ah(()=>{var v=sl();s=v.promise;try{Promise.resolve(t()).then(v.resolve,v.reject).then(()=>{g===rt&&g.committed&&g.deactivate(),Fa()})}catch(w){v.reject(w),Fa()}var g=rt;if(f){var x=!a.is_pending();a.update_pending_count(1),g.increment(x),h.get(g)?.reject(Jr),h.delete(g),h.set(g,v)}const _=(w,k=void 0)=>{if(g.activate(),k)k!==Jr&&(l.f|=cr,li(l,k));else{(l.f&cr)!==0&&(l.f^=cr),li(l,w);for(const[D,P]of h){if(h.delete(D),D===g)break;P.reject(Jr)}}f&&(a.update_pending_count(-1),g.decrement(x))};v.promise.then(_,w=>_(null,w||"unknown"))}),uo(()=>{for(const v of h.values())v.reject(Jr)}),le&&(l.f|=io),new Promise(v=>{function g(x){function _(){x===s?v(l):g(s)}x.then(_,_)}g(s)})}function _t(t){const e=oo(t);return zl(e),e}function Sl(t){const e=oo(t);return e.equals=gl,e}function gs(t){var e=t.effects;if(e!==null){t.effects=null;for(var i=0;i<e.length;i+=1)Ot(e[i])}}let Zo=[];function Vd(t){for(var e=t.parent;e!==null;){if((e.f&Mt)===0)return(e.f&Nn)===0?e:null;e=e.parent}return null}function Rs(t){var e,i=Ze;if(En(Vd(t)),le){let a=ui;Lu(new Set);try{Zo.includes(t)&&td(),Zo.push(t),t.f&=~pr,gs(t),e=ms(t)}finally{En(i),Lu(a),Zo.pop()}}else try{t.f&=~pr,gs(t),e=ms(t)}finally{En(i)}return e}function Al(t){var e=Rs(t);if(t.equals(e)||(rt?.is_fork||(t.v=e),t.wv=Vl()),!Fr)if(pn!==null)(Ni()||rt?.is_fork)&&pn.set(t,e);else{var i=(t.f&xn)===0?qn:Nt;jt(t,i)}}let ui=new Set;const fr=new Map;function Lu(t){ui=t}let Ks=!1;function Yd(){Ks=!0}function Rr(t,e){var i={f:0,v:t,reactions:null,equals:pl,rv:0,wv:0};return i}function me(t,e){const i=Rr(t);return zl(i),i}function Il(t,e=!1,i=!0){const a=Rr(t);return e||(a.equals=gl),a}function K(t,e,i=!1){qe!==null&&(!Pn||(qe.f&Ka)!==0)&&yl()&&(qe.f&(Mt|Yn|io|Ka))!==0&&!Hn?.includes(t)&&fd();let a=i?an(e):e;return le&&ml(a,t.label),li(t,a)}function li(t,e){if(!t.equals(e)){var i=t.v;Fr?fr.set(t,e):fr.set(t,i),t.v=e;var a=Cn.ensure();if(a.capture(t,i),le){if(Ze!==null){t.updated??=new Map;const s=(t.updated.get("")?.count??0)+1;if(t.updated.set("",{error:null,count:s}),s>5){const l=Id("updated at");if(l!==null){let f=t.updated.get(l.stack);f||(f={error:l,count:0},t.updated.set(l.stack,f)),f.count++}}}Ze!==null&&(t.set_during_effect=!0)}(t.f&Mt)!==0&&((t.f&Qt)!==0&&Rs(t),jt(t,(t.f&xn)!==0?Nt:qn)),t.wv=Vl(),Cl(t,Qt),Ze!==null&&(Ze.f&Nt)!==0&&(Ze.f&(Wn|Kr))===0&&(dn===null?uh([t]):dn.push(t)),!a.is_fork&&ui.size>0&&!Ks&&Dl()}return e}function Dl(){Ks=!1;var t=dr;Ha(!0);const e=Array.from(ui);try{for(const i of e)(i.f&Nt)!==0&&jt(i,qn),Vi(i)&&ji(i)}finally{Ha(t)}ui.clear()}function Li(t){K(t,t.v+1)}function Cl(t,e){var i=t.reactions;if(i!==null)for(var a=i.length,s=0;s<a;s++){var l=i[s],f=l.f;if(le&&(f&Ka)!==0){ui.add(l);continue}var h=(f&Qt)===0;if(h&&jt(l,e),(f&Mt)!==0){var v=l;pn?.delete(v),(f&pr)===0&&(f&xn&&(l.f|=pr),Cl(v,qn))}else h&&((f&Yn)!==0&&Fn!==null&&Fn.add(l),Mr(l))}}const Wd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function an(t){if(typeof t!="object"||t===null||Pr in t)return t;const e=ol(t);if(e!==Gf&&e!==Xf)return t;var i=new Map,a=Is(t),s=me(0),l=Lr,f=x=>{if(Lr===l)return x();var _=qe,w=Lr;Xt(null),Ku(l);var k=x();return Xt(_),Ku(w),k};a&&(i.set("length",me(t.length)),le&&(t=Xd(t)));var h="";let v=!1;function g(x){if(!v){v=!0,h=x,In(s,`${h} version`);for(const[_,w]of i)In(w,xr(h,_));v=!1}}return new Proxy(t,{defineProperty(x,_,w){(!("value"in w)||w.configurable===!1||w.enumerable===!1||w.writable===!1)&&ld();var k=i.get(_);return k===void 0?k=f(()=>{var D=me(w.value);return i.set(_,D),le&&typeof _=="string"&&In(D,xr(h,_)),D}):K(k,w.value,!0),!0},deleteProperty(x,_){var w=i.get(_);if(w===void 0){if(_ in x){const k=f(()=>me(Ct));i.set(_,k),Li(s),le&&In(k,xr(h,_))}}else K(w,Ct),Li(s);return!0},get(x,_,w){if(_===Pr)return t;if(le&&_===cl)return g;var k=i.get(_),D=_ in x;if(k===void 0&&(!D||Cr(x,_)?.writable)&&(k=f(()=>{var C=an(D?x[_]:Ct),E=me(C);return le&&In(E,xr(h,_)),E}),i.set(_,k)),k!==void 0){var P=m(k);return P===Ct?void 0:P}return Reflect.get(x,_,w)},getOwnPropertyDescriptor(x,_){var w=Reflect.getOwnPropertyDescriptor(x,_);if(w&&"value"in w){var k=i.get(_);k&&(w.value=m(k))}else if(w===void 0){var D=i.get(_),P=D?.v;if(D!==void 0&&P!==Ct)return{enumerable:!0,configurable:!0,value:P,writable:!0}}return w},has(x,_){if(_===Pr)return!0;var w=i.get(_),k=w!==void 0&&w.v!==Ct||Reflect.has(x,_);if(w!==void 0||Ze!==null&&(!k||Cr(x,_)?.writable)){w===void 0&&(w=f(()=>{var P=k?an(x[_]):Ct,C=me(P);return le&&In(C,xr(h,_)),C}),i.set(_,w));var D=m(w);if(D===Ct)return!1}return k},set(x,_,w,k){var D=i.get(_),P=_ in x;if(a&&_==="length")for(var C=w;C<D.v;C+=1){var E=i.get(C+"");E!==void 0?K(E,Ct):C in x&&(E=f(()=>me(Ct)),i.set(C+"",E),le&&In(E,xr(h,C)))}if(D===void 0)(!P||Cr(x,_)?.writable)&&(D=f(()=>me(void 0)),le&&In(D,xr(h,_)),K(D,an(w)),i.set(_,D));else{P=D.v!==Ct;var M=f(()=>an(w));K(D,M)}var U=Reflect.getOwnPropertyDescriptor(x,_);if(U?.set&&U.set.call(k,w),!P){if(a&&typeof _=="string"){var N=i.get("length"),q=Number(_);Number.isInteger(q)&&q>=N.v&&K(N,q+1)}Li(s)}return!0},ownKeys(x){m(s);var _=Reflect.ownKeys(x).filter(D=>{var P=i.get(D);return P===void 0||P.v!==Ct});for(var[w,k]of i)k.v!==Ct&&!(w in x)&&_.push(w);return _},setPrototypeOf(){cd()}})}function xr(t,e){return typeof e=="symbol"?`${t}[Symbol(${e.description??""})]`:Wd.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function Oi(t){try{if(t!==null&&typeof t=="object"&&Pr in t)return t[Pr]}catch{}return t}function qd(t,e){return Object.is(Oi(t),Oi(e))}const Gd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Xd(t){return new Proxy(t,{get(e,i,a){var s=Reflect.get(e,i,a);return Gd.has(i)?function(...l){Yd();var f=s.apply(this,l);return Dl(),f}:s}})}function Qd(){const t=Array.prototype,e=Array.__svelte_cleanup;e&&e();const{indexOf:i,lastIndexOf:a,includes:s}=t;t.indexOf=function(l,f){const h=i.call(this,l,f);if(h===-1){for(let v=f??0;v<this.length;v+=1)if(Oi(this[v])===l){Xo("array.indexOf(...)");break}}return h},t.lastIndexOf=function(l,f){const h=a.call(this,l,f??this.length-1);if(h===-1){for(let v=0;v<=(f??this.length-1);v+=1)if(Oi(this[v])===l){Xo("array.lastIndexOf(...)");break}}return h},t.includes=function(l,f){const h=s.call(this,l,f);if(!h){for(let v=0;v<this.length;v+=1)if(Oi(this[v])===l){Xo("array.includes(...)");break}}return h},Array.__svelte_cleanup=()=>{t.indexOf=i,t.lastIndexOf=a,t.includes=s}}var Ou,Bs,Pl,Ll;function Zd(){if(Ou===void 0){Ou=window,Bs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,i=Text.prototype;Pl=Cr(e,"firstChild").get,Ll=Cr(e,"nextSibling").get,Iu(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Iu(i)&&(i.__t=void 0),le&&(t.__svelte_meta=null,Qd())}}function Un(t=""){return document.createTextNode(t)}function Na(t){return Pl.call(t)}function Ui(t){return Ll.call(t)}function ye(t,e){return Na(t)}function Lt(t,e=!1){{var i=Na(t);return i instanceof Comment&&i.data===""?Ui(i):i}}function Re(t,e=1,i=!1){let a=t;for(;e--;)a=Ui(a);return a}function Jd(t){t.textContent=""}function Ol(){return!1}function $d(t,e){if(e){const i=document.body;t.autofocus=!0,Br(()=>{document.activeElement===i&&t.focus()})}}let Mu=!1;function eh(){Mu||(Mu=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function so(t){var e=qe,i=Ze;Xt(null),En(null);try{return t()}finally{Xt(e),En(i)}}function th(t,e,i,a=i){t.addEventListener(e,()=>so(i));const s=t.__on_r;s?t.__on_r=()=>{s(),a(!0)}:t.__on_r=()=>a(!0),eh()}function nh(t){Ze===null&&(qe===null&&id(t),rd()),Fr&&nd(t)}function rh(t,e){var i=e.last;i===null?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}function Rn(t,e,i){var a=Ze;if(le)for(;a!==null&&(a.f&Ka)!==0;)a=a.parent;a!==null&&(a.f&on)!==0&&(t|=on);var s={ctx:Ht,deps:null,nodes_start:null,nodes_end:null,f:t|Qt|xn,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(le&&(s.component_function=zi),i)try{ji(s),s.f|=Ls}catch(h){throw Ot(s),h}else e!==null&&Mr(s);var l=s;if(i&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&di)===0&&(l=l.first,(t&Yn)!==0&&(t&ii)!==0&&l!==null&&(l.f|=ii)),l!==null&&(l.parent=a,a!==null&&rh(l,a),qe!==null&&(qe.f&Mt)!==0&&(t&Kr)===0)){var f=qe;(f.effects??=[]).push(l)}return s}function Ni(){return qe!==null&&!Pn}function uo(t){const e=Rn(Ps,null,!1);return jt(e,Nt),e.teardown=t,e}function We(t){nh("$effect"),le&&vr(t,"name",{value:"$effect"});var e=Ze.f,i=!qe&&(e&Wn)!==0&&(e&Ls)===0;if(i){var a=Ht;(a.e??=[]).push(t)}else return Ml(t)}function Ml(t){return Rn(Cs|Zf,t,!1)}function ih(t){Cn.ensure();const e=Rn(Kr|di,t,!0);return(i={})=>new Promise(a=>{i.outro?ti(e,()=>{Ot(e),a(void 0)}):(Ot(e),a(void 0))})}function Fs(t){return Rn(Cs,t,!1)}function ah(t){return Rn(io|di,t,!0)}function Ns(t,e=0){return Rn(Ps|e,t,!0)}function xt(t,e=[],i=[],a=[]){Tl(a,e,i,s=>{Rn(Ps,()=>t(...s.map(m)),!0)})}function Hs(t,e=0){var i=Rn(Yn|e,t,!0);return le&&(i.dev_stack=oi),i}function Rl(t,e=0){var i=Rn(ul|e,t,!0);return le&&(i.dev_stack=oi),i}function qt(t){return Rn(Wn|di,t,!0)}function Kl(t){var e=t.teardown;if(e!==null){const i=Fr,a=qe;Ru(!0),Xt(null);try{e.call(null)}finally{Ru(i),Xt(a)}}}function Bl(t,e=!1){var i=t.first;for(t.first=t.last=null;i!==null;){const s=i.ac;s!==null&&so(()=>{s.abort(Jr)});var a=i.next;(i.f&Kr)!==0?i.parent=null:Ot(i,e),i=a}}function oh(t){for(var e=t.first;e!==null;){var i=e.next;(e.f&Wn)===0&&Ot(e),e=i}}function Ot(t,e=!0){var i=!1;(e||(t.f&ll)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(sh(t.nodes_start,t.nodes_end),i=!0),Bl(t,e&&!i),ja(t,0),jt(t,Nn);var a=t.transitions;if(a!==null)for(const l of a)l.stop();Kl(t);var s=t.parent;s!==null&&s.first!==null&&Fl(t),le&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function sh(t,e){for(;t!==null;){var i=t===e?null:Ui(t);t.remove(),t=i}}function Fl(t){var e=t.parent,i=t.prev,a=t.next;i!==null&&(i.next=a),a!==null&&(a.prev=i),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=i))}function ti(t,e,i=!0){var a=[];js(t,a,!0),Nl(a,()=>{i&&Ot(t),e&&e()})}function Nl(t,e){var i=t.length;if(i>0){var a=()=>--i||e();for(var s of t)s.out(a)}else e()}function js(t,e,i){if((t.f&on)===0){if(t.f^=on,t.transitions!==null)for(const f of t.transitions)(f.is_global||i)&&e.push(f);for(var a=t.first;a!==null;){var s=a.next,l=(a.f&ii)!==0||(a.f&Wn)!==0&&(t.f&Yn)!==0;js(a,e,l?i:!1),a=s}}}function zs(t){Hl(t,!0)}function Hl(t,e){if((t.f&on)!==0){t.f^=on,(t.f&Nt)===0&&(jt(t,Qt),Mr(t));for(var i=t.first;i!==null;){var a=i.next,s=(i.f&ii)!==0||(i.f&Wn)!==0;Hl(i,s?e:!1),i=a}if(t.transitions!==null)for(const l of t.transitions)(l.is_global||e)&&l.in()}}function jl(t,e){for(var i=t.nodes_start,a=t.nodes_end;i!==null;){var s=i===a?null:Ui(i);e.append(i),i=s}}let dr=!1;function Ha(t){dr=t}let Fr=!1;function Ru(t){Fr=t}let qe=null,Pn=!1;function Xt(t){qe=t}let Ze=null;function En(t){Ze=t}let Hn=null;function zl(t){qe!==null&&(Hn===null?Hn=[t]:Hn.push(t))}let Vt=null,nn=0,dn=null;function uh(t){dn=t}let Ul=1,Hi=0,Lr=Hi;function Ku(t){Lr=t}function Vl(){return++Ul}function Vi(t){var e=t.f;if((e&Qt)!==0)return!0;if(e&Mt&&(t.f&=~pr),(e&qn)!==0){var i=t.deps;if(i!==null)for(var a=i.length,s=0;s<a;s++){var l=i[s];if(Vi(l)&&Al(l),l.wv>t.wv)return!0}(e&xn)!==0&&pn===null&&jt(t,Nt)}return!1}function Yl(t,e,i=!0){var a=t.reactions;if(a!==null&&!Hn?.includes(t))for(var s=0;s<a.length;s++){var l=a[s];(l.f&Mt)!==0?Yl(l,e,!1):e===l&&(i?jt(l,Qt):(l.f&Nt)!==0&&jt(l,qn),Mr(l))}}function ms(t){var e=Vt,i=nn,a=dn,s=qe,l=Hn,f=Ht,h=Pn,v=Lr,g=t.f;Vt=null,nn=0,dn=null,qe=(g&(Wn|Kr))===0?t:null,Hn=null,ai(t.ctx),Pn=!1,Lr=++Hi,t.ac!==null&&(so(()=>{t.ac.abort(Jr)}),t.ac=null);try{t.f|=hs;var x=t.fn,_=x(),w=t.deps;if(Vt!==null){var k;if(ja(t,nn),w!==null&&nn>0)for(w.length=nn+Vt.length,k=0;k<Vt.length;k++)w[nn+k]=Vt[k];else t.deps=w=Vt;if(dr&&Ni()&&(t.f&xn)!==0)for(k=nn;k<w.length;k++)(w[k].reactions??=[]).push(t)}else w!==null&&nn<w.length&&(ja(t,nn),w.length=nn);if(yl()&&dn!==null&&!Pn&&w!==null&&(t.f&(Mt|qn|Qt))===0)for(k=0;k<dn.length;k++)Yl(dn[k],t);return s!==null&&s!==t&&(Hi++,dn!==null&&(a===null?a=dn:a.push(...dn))),(t.f&cr)!==0&&(t.f^=cr),_}catch(D){return _l(D)}finally{t.f^=hs,Vt=e,nn=i,dn=a,qe=s,Hn=l,ai(f),Pn=h,Lr=v}}function lh(t,e){let i=e.reactions;if(i!==null){var a=Wf.call(i,t);if(a!==-1){var s=i.length-1;s===0?i=e.reactions=null:(i[a]=i[s],i.pop())}}i===null&&(e.f&Mt)!==0&&(Vt===null||!Vt.includes(e))&&(jt(e,qn),(e.f&xn)!==0&&(e.f^=xn,e.f&=~pr),gs(e),ja(e,0))}function ja(t,e){var i=t.deps;if(i!==null)for(var a=e;a<i.length;a++)lh(t,i[a])}function ji(t){var e=t.f;if((e&Nn)===0){jt(t,Nt);var i=Ze,a=dr;if(Ze=t,dr=!0,le){var s=zi;Cu(t.component_function);var l=oi;Ba(t.dev_stack??oi)}try{(e&(Yn|ul))!==0?oh(t):Bl(t),Kl(t);var f=ms(t);t.teardown=typeof f=="function"?f:null,t.wv=Ul;var h;le&&Ad&&(t.f&Qt)!==0&&t.deps}finally{dr=a,Ze=i,le&&(Cu(s),Ba(l))}}}async function ot(){await Promise.resolve(),Ld()}function m(t){var e=t.f,i=(e&Mt)!==0;if(qe!==null&&!Pn){var a=Ze!==null&&(Ze.f&Nn)!==0;if(!a&&!Hn?.includes(t)){var s=qe.deps;if((qe.f&hs)!==0)t.rv<Hi&&(t.rv=Hi,Vt===null&&s!==null&&s[nn]===t?nn++:Vt===null?Vt=[t]:Vt.includes(t)||Vt.push(t));else{(qe.deps??=[]).push(t);var l=t.reactions;l===null?t.reactions=[qe]:l.includes(qe)||l.push(qe)}}}if(le&&zd.delete(t),Fr){if(fr.has(t))return fr.get(t);if(i){var f=t,h=f.v;return((f.f&Nt)===0&&f.reactions!==null||ql(f))&&(h=Rs(f)),fr.set(f,h),h}}else i&&(!pn?.has(t)||rt?.is_fork&&!Ni())&&(f=t,Vi(f)&&Al(f),dr&&Ni()&&(f.f&xn)===0&&Wl(f));if(pn?.has(t))return pn.get(t);if((t.f&cr)!==0)throw t.v;return t.v}function Wl(t){if(t.deps!==null){t.f^=xn;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Mt)!==0&&(e.f&xn)===0&&Wl(e)}}function ql(t){if(t.v===Ct)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(fr.has(e)||(e.f&Mt)!==0&&ql(e))return!0;return!1}function Nr(t){var e=Pn;try{return Pn=!0,t()}finally{Pn=e}}const ch=-7169;function jt(t,e){t.f=t.f&ch|e}function fh(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const dh=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function hh(t){return dh.includes(t)}const vh={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function ph(t){return t=t.toLowerCase(),vh[t]??t}const gh=["touchstart","touchmove"];function mh(t){return gh.includes(t)}const Gl=new Set,ys=new Set;function Xl(t,e,i,a={}){function s(l){if(a.capture||Ai.call(e,l),!l.cancelBubble)return so(()=>i?.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Br(()=>{e.addEventListener(t,s,a)}):e.addEventListener(t,s,a),s}function hr(t,e,i,a,s){var l={capture:a,passive:s},f=Xl(t,e,i,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&uo(()=>{e.removeEventListener(t,f,l)})}function Hr(t){for(var e=0;e<t.length;e++)Gl.add(t[e]);for(var i of ys)i(t)}let Bu=null;function Ai(t){var e=this,i=e.ownerDocument,a=t.type,s=t.composedPath?.()||[],l=s[0]||t.target;Bu=t;var f=0,h=Bu===t&&t.__root;if(h){var v=s.indexOf(h);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var g=s.indexOf(e);if(g===-1)return;v<=g&&(f=v)}if(l=s[f]||t.target,l!==e){vr(t,"currentTarget",{configurable:!0,get(){return l||i}});var x=qe,_=Ze;Xt(null),En(null);try{for(var w,k=[];l!==null;){var D=l.assignedSlot||l.parentNode||l.host||null;try{var P=l["__"+a];P!=null&&(!l.disabled||t.target===l)&&P.call(l,t)}catch(C){w?k.push(C):w=C}if(t.cancelBubble||D===e||D===null)break;l=D}if(w){for(let C of k)queueMicrotask(()=>{throw C});throw w}}finally{t.__root=e,delete t.currentTarget,Xt(x),En(_)}}}function yh(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function za(t,e){var i=Ze;i.nodes_start===null&&(i.nodes_start=t,i.nodes_end=e)}function Pe(t,e){var i=(e&bd)!==0,a=(e&_d)!==0,s,l=!t.startsWith("<!>");return()=>{s===void 0&&(s=yh(l?t:"<!>"+t),i||(s=Na(s)));var f=a||Bs?document.importNode(s,!0):s.cloneNode(!0);if(i){var h=Na(f),v=f.lastChild;za(h,v)}else za(f,f);return f}}function _n(t=""){{var e=Un(t+"");return za(e,e),e}}function jn(){var t=document.createDocumentFragment(),e=document.createComment(""),i=Un();return t.append(e,i),za(e,i),t}function ce(t,e){t!==null&&t.before(e)}function Ir(t,e){var i=e==null?"":typeof e=="object"?e+"":e;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=i+"")}function bh(t,e){return _h(t,e)}const Gr=new Map;function _h(t,{target:e,anchor:i,props:a={},events:s,context:l,intro:f=!0}){Zd();var h=new Set,v=_=>{for(var w=0;w<_.length;w++){var k=_[w];if(!h.has(k)){h.add(k);var D=mh(k);e.addEventListener(k,Ai,{passive:D});var P=Gr.get(k);P===void 0?(document.addEventListener(k,Ai,{passive:D}),Gr.set(k,1)):Gr.set(k,P+1)}}};v(Ds(Gl)),ys.add(v);var g=void 0,x=ih(()=>{var _=i??e.appendChild(Un());return Kd(_,{pending:()=>{}},w=>{if(l){Gn({});var k=Ht;k.c=l}s&&(a.$$events=s),g=t(w,a)||{},l&&Xn()}),()=>{for(var w of h){e.removeEventListener(w,Ai);var k=Gr.get(w);--k===0?(document.removeEventListener(w,Ai),Gr.delete(w)):Gr.set(w,k)}ys.delete(v),_!==i&&_.parentNode?.removeChild(_)}});return wh.set(g,x),g}let wh=new WeakMap;class Eh{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(e,i=!0){this.anchor=e,this.#u=i}#a=()=>{var e=rt;if(this.#e.has(e)){var i=this.#e.get(e),a=this.#t.get(i);if(a)zs(a),this.#n.delete(i);else{var s=this.#r.get(i);s&&(this.#t.set(i,s.effect),this.#r.delete(i),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[l,f]of this.#e){if(this.#e.delete(l),l===e)break;const h=this.#r.get(f);h&&(Ot(h.effect),this.#r.delete(f))}for(const[l,f]of this.#t){if(l===i||this.#n.has(l))continue;const h=()=>{if(Array.from(this.#e.values()).includes(l)){var g=document.createDocumentFragment();jl(f,g),g.append(Un()),this.#r.set(l,{effect:f,fragment:g})}else Ot(f);this.#n.delete(l),this.#t.delete(l)};this.#u||!a?(this.#n.add(l),ti(f,h,!1)):h()}}};#i=e=>{this.#e.delete(e);const i=Array.from(this.#e.values());for(const[a,s]of this.#r)i.includes(a)||(Ot(s.effect),this.#r.delete(a))};ensure(e,i){var a=rt,s=Ol();if(i&&!this.#t.has(e)&&!this.#r.has(e))if(s){var l=document.createDocumentFragment(),f=Un();l.append(f),this.#r.set(e,{effect:qt(()=>i(f)),fragment:l})}else this.#t.set(e,qt(()=>i(this.anchor)));if(this.#e.set(a,e),s){for(const[h,v]of this.#t)h===e?a.skipped_effects.delete(v):a.skipped_effects.add(v);for(const[h,v]of this.#r)h===e?a.skipped_effects.delete(v.effect):a.skipped_effects.add(v.effect);a.oncommit(this.#a),a.ondiscard(this.#i)}else this.#a()}}function st(t,e,i=!1){var a=new Eh(t),s=i?ii:0;function l(f,h){a.ensure(f,h)}Hs(()=>{var f=!1;e((h,v=!0)=>{f=!0,l(v,h)}),f||l(!1,null)},s)}function xh(t,e,i,a,s){var l=e.$$slots?.[i],f=!1;l===!0&&(l=e.children,f=!0),l===void 0||l(t,f?()=>a:a)}function kh(t,e){var i=void 0,a;Rl(()=>{i!==(i=e())&&(a&&(Ot(a),a=null),i&&(a=qt(()=>{Fs(()=>i(t))})))})}function Ql(t){var e,i,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=Ql(t[e]))&&(a&&(a+=" "),a+=i)}else for(i in t)t[i]&&(a&&(a+=" "),a+=i);return a}function Th(){for(var t,e,i=0,a="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=Ql(t))&&(a&&(a+=" "),a+=e);return a}function Zl(t){return typeof t=="object"?Th(t):t??""}const Fu=[...` 	
\r\fÂ \v\uFEFF`];function Sh(t,e,i){var a=t==null?"":""+t;if(e&&(a=a?a+" "+e:e),i){for(var s in i)if(i[s])a=a?a+" "+s:s;else if(a.length)for(var l=s.length,f=0;(f=a.indexOf(s,f))>=0;){var h=f+l;(f===0||Fu.includes(a[f-1]))&&(h===a.length||Fu.includes(a[h]))?a=(f===0?"":a.substring(0,f))+a.substring(h+1):f=h}}return a===""?null:a}function Nu(t,e=!1){var i=e?" !important;":";",a="";for(var s in t){var l=t[s];l!=null&&l!==""&&(a+=" "+s+": "+l+i)}return a}function Jo(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Ah(t,e){if(e){var i="",a,s;if(Array.isArray(e)?(a=e[0],s=e[1]):a=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,f=0,h=!1,v=[];a&&v.push(...Object.keys(a).map(Jo)),s&&v.push(...Object.keys(s).map(Jo));var g=0,x=-1;const P=t.length;for(var _=0;_<P;_++){var w=t[_];if(h?w==="/"&&t[_-1]==="*"&&(h=!1):l?l===w&&(l=!1):w==="/"&&t[_+1]==="*"?h=!0:w==='"'||w==="'"?l=w:w==="("?f++:w===")"&&f--,!h&&l===!1&&f===0){if(w===":"&&x===-1)x=_;else if(w===";"||_===P-1){if(x!==-1){var k=Jo(t.substring(g,x).trim());if(!v.includes(k)){w!==";"&&_++;var D=t.substring(g,_).trim();i+=" "+D+";"}}g=_+1,x=-1}}}}return a&&(i+=Nu(a)),s&&(i+=Nu(s,!0)),i=i.trim(),i===""?null:i}return t==null?null:String(t)}function Or(t,e,i,a,s,l){var f=t.__className;if(f!==i||f===void 0){var h=Sh(i,a,l);h==null?t.removeAttribute("class"):e?t.className=h:t.setAttribute("class",h),t.__className=i}else if(l&&s!==l)for(var v in l){var g=!!l[v];(s==null||g!==!!s[v])&&t.classList.toggle(v,g)}return l}function $o(t,e={},i,a){for(var s in i){var l=i[s];e[s]!==l&&(i[s]==null?t.style.removeProperty(s):t.style.setProperty(s,l,a))}}function On(t,e,i,a){var s=t.__style;if(s!==e){var l=Ah(e,a);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}else a&&(Array.isArray(a)?($o(t,i?.[0],a[0]),$o(t,i?.[1],a[1],"important")):$o(t,i,a));return a}function bs(t,e,i=!1){if(t.multiple){if(e==null)return;if(!Is(e))return kd();for(var a of t.options)a.selected=e.includes(Hu(a));return}for(a of t.options){var s=Hu(a);if(qd(s,e)){a.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function Ih(t){var e=new MutationObserver(()=>{bs(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),uo(()=>{e.disconnect()})}function Hu(t){return"__value"in t?t.__value:t.value}const Ti=Symbol("class"),Si=Symbol("style"),Jl=Symbol("is custom element"),$l=Symbol("is html");function Dh(t,e){var i=lo(t);i.value===(i.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Ch(t,e){var i=lo(t);i.checked!==(i.checked=e??void 0)&&(t.checked=e)}function Ph(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function bt(t,e,i,a){var s=lo(t);s[e]!==(s[e]=i)&&(e==="loading"&&(t[$f]=i),i==null?t.removeAttribute(e):typeof i!="string"&&ec(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function Lh(t,e,i,a,s=!1,l=!1){var f=lo(t),h=f[Jl],v=!f[$l],g=e||{},x=t.tagName==="OPTION";for(var _ in e)_ in i||(i[_]=null);i.class?i.class=Zl(i.class):i[Ti]&&(i.class=null),i[Si]&&(i.style??=null);var w=ec(t);for(const N in i){let q=i[N];if(x&&N==="value"&&q==null){t.value=t.__value="",g[N]=q;continue}if(N==="class"){var k=t.namespaceURI==="http://www.w3.org/1999/xhtml";Or(t,k,q,a,e?.[Ti],i[Ti]),g[N]=q,g[Ti]=i[Ti];continue}if(N==="style"){On(t,q,e?.[Si],i[Si]),g[N]=q,g[Si]=i[Si];continue}var D=g[N];if(!(q===D&&!(q===void 0&&t.hasAttribute(N)))){g[N]=q;var P=N[0]+N[1];if(P!=="$$")if(P==="on"){const J={},Y="$$"+N;let F=N.slice(2);var C=hh(F);if(fh(F)&&(F=F.slice(0,-7),J.capture=!0),!C&&D){if(q!=null)continue;t.removeEventListener(F,g[Y],J),g[Y]=null}if(q!=null)if(C)t[`__${F}`]=q,Hr([F]);else{let Q=function(ne){g[N].call(this,ne)};var U=Q;g[Y]=Xl(F,t,Q,J)}else C&&(t[`__${F}`]=void 0)}else if(N==="style")bt(t,N,q);else if(N==="autofocus")$d(t,!!q);else if(!h&&(N==="__value"||N==="value"&&q!=null))t.value=t.__value=q;else if(N==="selected"&&x)Ph(t,q);else{var E=N;v||(E=ph(E));var M=E==="defaultValue"||E==="defaultChecked";if(q==null&&!h&&!M)if(f[N]=null,E==="value"||E==="checked"){let J=t;const Y=e===void 0;if(E==="value"){let F=J.defaultValue;J.removeAttribute(E),J.defaultValue=F,J.value=J.__value=Y?F:null}else{let F=J.defaultChecked;J.removeAttribute(E),J.defaultChecked=F,J.checked=Y?F:!1}}else t.removeAttribute(N);else M||w.includes(E)&&(h||typeof q!="string")?(t[E]=q,E in f&&(f[E]=Ct)):typeof q!="function"&&bt(t,E,q)}}}return g}function Oh(t,e,i=[],a=[],s=[],l,f=!1,h=!1){Tl(s,i,a,v=>{var g=void 0,x={},_=t.nodeName==="SELECT",w=!1;if(Rl(()=>{var D=e(...v.map(m)),P=Lh(t,g,D,l,f,h);w&&_&&"value"in D&&bs(t,D.value);for(let E of Object.getOwnPropertySymbols(x))D[E]||Ot(x[E]);for(let E of Object.getOwnPropertySymbols(D)){var C=D[E];E.description===xd&&(!g||C!==g[E])&&(x[E]&&Ot(x[E]),x[E]=qt(()=>kh(t,()=>C))),P[E]=C}g=P}),_){var k=t;Fs(()=>{bs(k,g.value,!0),Ih(k)})}w=!0})}function lo(t){return t.__attributes??={[Jl]:t.nodeName.includes("-"),[$l]:t.namespaceURI===Ed}}var ju=new Map;function ec(t){var e=t.getAttribute("is")||t.nodeName,i=ju.get(e);if(i)return i;ju.set(e,i=[]);for(var a,s=t,l=Element.prototype;l!==s;){a=qf(s);for(var f in a)a[f].set&&i.push(f);s=ol(s)}return i}function Ua(t,e,i=e){var a=new WeakSet;th(t,"input",async s=>{le&&t.type==="checkbox"&&Du();var l=s?t.defaultValue:t.value;if(l=es(t)?ts(l):l,i(l),rt!==null&&a.add(rt),await ot(),l!==(l=e())){var f=t.selectionStart,h=t.selectionEnd,v=t.value.length;if(t.value=l??"",h!==null){var g=t.value.length;f===h&&h===v&&g>v?(t.selectionStart=g,t.selectionEnd=g):(t.selectionStart=f,t.selectionEnd=Math.min(h,g))}}}),Nr(e)==null&&t.value&&(i(es(t)?ts(t.value):t.value),rt!==null&&a.add(rt)),Ns(()=>{le&&t.type==="checkbox"&&Du();var s=e();if(t===document.activeElement){var l=Aa??rt;if(a.has(l))return}es(t)&&s===ts(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function es(t){var e=t.type;return e==="number"||e==="range"}function ts(t){return t===""?null:+t}function zu(t,e){return t===e||t?.[Pr]===e}function Pt(t={},e,i,a){return Fs(()=>{var s,l;return Ns(()=>{s=l,l=[],Nr(()=>{t!==i(...l)&&(e(t,...l),s&&zu(i(...s),t)&&e(null,...s))})}),()=>{Br(()=>{l&&zu(i(...l),t)&&e(null,...l)})}}),t}function tc(t,e,i){if(t==null)return e(void 0),Ra;const a=Nr(()=>t.subscribe(e,i));return a.unsubscribe?()=>a.unsubscribe():a}function Mh(t){let e;return tc(t,i=>e=i)(),e}let wa=!1,_s=Symbol();function Va(t,e,i){const a=i[e]??={store:null,source:Il(void 0),unsubscribe:Ra};if(le&&(a.source.label=e),a.store!==t&&!(_s in i))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=Ra;else{var s=!0;a.unsubscribe=tc(t,l=>{s?a.source.v=l:K(a.source,l)}),s=!1}return t&&_s in i?Mh(t):m(a.source)}function Ya(t,e,i){let a=i[e];return a&&a.store!==t&&(a.unsubscribe(),a.unsubscribe=Ra),t}function Us(){const t={};function e(){uo(()=>{for(var i in t)t[i].unsubscribe();vr(t,_s,{enumerable:!1,value:!0})})}return[t,e]}function Rh(t){var e=wa;try{return wa=!1,[t(),wa]}finally{wa=e}}const Kh={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return le&&sd(`${t.name}.${String(e)}`),!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Bh(t,e,i){return new Proxy(le?{props:t,exclude:e,name:i,other:{},to_proxy:[]}:{props:t,exclude:e},Kh)}function Ft(t,e,i,a){var s=(i&md)!==0,l=(i&yd)!==0,f=a,h=!0,v=()=>(h&&(h=!1,f=l?Nr(a):a),f),g;if(s){var x=Pr in t||Jf in t;g=Cr(t,e)?.set??(x&&e in t?M=>t[e]=M:void 0)}var _,w=!1;s?[_,w]=Rh(()=>t[e]):_=t[e],_===void 0&&a!==void 0&&(_=v(),g&&(od(e),g(_)));var k;if(k=()=>{var M=t[e];return M===void 0?v():(h=!0,M)},(i&gd)===0)return k;if(g){var D=t.$$legacy;return(function(M,U){return arguments.length>0?((!U||D||w)&&g(U?k():M),M):k()})}var P=!1,C=((i&pd)!==0?oo:Sl)(()=>(P=!1,k()));le&&(C.label=e),s&&m(C);var E=Ze;return(function(M,U){if(arguments.length>0){const N=U?m(C):s?an(M):M;return K(C,N),P=!0,f!==void 0&&(f=N),M}return Fr&&P||(E.f&Nn)!==0?C.v:m(C)})}if(le){let t=function(e){if(!(e in globalThis)){let i;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(i!==void 0)return i;ud(e)},set:a=>{i=a}})}};var Ag=t;t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function Fh(t){Ht===null&&fl("onMount"),We(()=>{const e=Nr(t);if(typeof e=="function")return e})}function nc(t){Ht===null&&fl("onDestroy"),Fh(()=>()=>Nr(t))}const Nh="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Nh);var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Da={exports:{}},zh=Da.exports,Uu;function Uh(){return Uu||(Uu=1,(function(t,e){(function(i,a){t.exports=a()})(zh,(function(){var i=function(n,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(o[c]=u[c])},i(n,r)};function a(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");i(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}var s=function(){return s=Object.assign||function(r){for(var o,u=1,c=arguments.length;u<c;u++){o=arguments[u];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(r[d]=o[d])}return r},s.apply(this,arguments)};function l(n,r,o){for(var u=0,c=r.length,d;u<c;u++)(d||!(u in r))&&(d||(d=Array.prototype.slice.call(r,0,u)),d[u]=r[u]);return n.concat(d||Array.prototype.slice.call(r))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Hh,h=Object.keys,v=Array.isArray;typeof Promise<"u"&&!f.Promise&&(f.Promise=Promise);function g(n,r){return typeof r!="object"||h(r).forEach(function(o){n[o]=r[o]}),n}var x=Object.getPrototypeOf,_={}.hasOwnProperty;function w(n,r){return _.call(n,r)}function k(n,r){typeof r=="function"&&(r=r(x(n))),(typeof Reflect>"u"?h:Reflect.ownKeys)(r).forEach(function(o){P(n,o,r[o])})}var D=Object.defineProperty;function P(n,r,o,u){D(n,r,g(o&&w(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},u))}function C(n){return{from:function(r){return n.prototype=Object.create(r.prototype),P(n.prototype,"constructor",n),{extend:k.bind(null,n.prototype)}}}}var E=Object.getOwnPropertyDescriptor;function M(n,r){var o=E(n,r),u;return o||(u=x(n))&&M(u,r)}var U=[].slice;function N(n,r,o){return U.call(n,r,o)}function q(n,r){return r(n)}function J(n){if(!n)throw new Error("Assertion Failed")}function Y(n){f.setImmediate?setImmediate(n):setTimeout(n,0)}function F(n,r){return n.reduce(function(o,u,c){var d=r(u,c);return d&&(o[d[0]]=d[1]),o},{})}function Q(n,r){if(typeof r=="string"&&w(n,r))return n[r];if(!r)return n;if(typeof r!="string"){for(var o=[],u=0,c=r.length;u<c;++u){var d=Q(n,r[u]);o.push(d)}return o}var p=r.indexOf(".");if(p!==-1){var y=n[r.substr(0,p)];return y==null?void 0:Q(y,r.substr(p+1))}}function ne(n,r,o){if(!(!n||r===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof r!="string"&&"length"in r){J(typeof o!="string"&&"length"in o);for(var u=0,c=r.length;u<c;++u)ne(n,r[u],o[u])}else{var d=r.indexOf(".");if(d!==-1){var p=r.substr(0,d),y=r.substr(d+1);if(y==="")o===void 0?v(n)&&!isNaN(parseInt(p))?n.splice(p,1):delete n[p]:n[p]=o;else{var b=n[p];(!b||!w(n,p))&&(b=n[p]={}),ne(b,y,o)}}else o===void 0?v(n)&&!isNaN(parseInt(r))?n.splice(r,1):delete n[r]:n[r]=o}}function W(n,r){typeof r=="string"?ne(n,r,void 0):"length"in r&&[].map.call(r,function(o){ne(n,o,void 0)})}function he(n){var r={};for(var o in n)w(n,o)&&(r[o]=n[o]);return r}var be=[].concat;function _e(n){return be.apply([],n)}var Le="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(_e([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(r){return r+n+"Array"})}))).filter(function(n){return f[n]}),Qe=new Set(Le.map(function(n){return f[n]}));function it(n){var r={};for(var o in n)if(w(n,o)){var u=n[o];r[o]=!u||typeof u!="object"||Qe.has(u.constructor)?u:it(u)}return r}function ae(n){for(var r in n)if(w(n,r))return!1;return!0}var Be=null;function Ae(n){Be=new WeakMap;var r=et(n);return Be=null,r}function et(n){if(!n||typeof n!="object")return n;var r=Be.get(n);if(r)return r;if(v(n)){r=[],Be.set(n,r);for(var o=0,u=n.length;o<u;++o)r.push(et(n[o]))}else if(Qe.has(n.constructor))r=n;else{var c=x(n);r=c===Object.prototype?{}:Object.create(c),Be.set(n,r);for(var d in n)w(n,d)&&(r[d]=et(n[d]))}return r}var Fe={}.toString;function Ge(n){return Fe.call(n).slice(8,-1)}var G=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Z=typeof G=="symbol"?function(n){var r;return n!=null&&(r=n[G])&&r.apply(n)}:function(){return null};function fe(n,r){var o=n.indexOf(r);return o>=0&&n.splice(o,1),o>=0}var De={};function we(n){var r,o,u,c;if(arguments.length===1){if(v(n))return n.slice();if(this===De&&typeof n=="string")return[n];if(c=Z(n)){for(o=[];u=c.next(),!u.done;)o.push(u.value);return o}if(n==null)return[n];if(r=n.length,typeof r=="number"){for(o=new Array(r);r--;)o[r]=n[r];return o}return[n]}for(r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return o}var Je=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},kt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],$e=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ft=kt.concat($e),Tt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ve(n,r){this.name=n,this.message=r}C(Ve).from(Error).extend({toString:function(){return this.name+": "+this.message}});function tt(n,r){return n+". Errors: "+Object.keys(r).map(function(o){return r[o].toString()}).filter(function(o,u,c){return c.indexOf(o)===u}).join(`
`)}function vt(n,r,o,u){this.failures=r,this.failedKeys=u,this.successCount=o,this.message=tt(n,r)}C(vt).from(Ve);function St(n,r){this.name="BulkError",this.failures=Object.keys(r).map(function(o){return r[o]}),this.failuresByPos=r,this.message=tt(n,this.failures)}C(St).from(Ve);var It=ft.reduce(function(n,r){return n[r]=r+"Error",n},{}),sn=Ve,ue=ft.reduce(function(n,r){var o=r+"Error";function u(c,d){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Tt[r]||o,this.inner=null)}return C(u).from(sn),n[r]=u,n},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var un=$e.reduce(function(n,r){return n[r+"Error"]=ue[r],n},{});function Zt(n,r){if(!n||n instanceof Ve||n instanceof TypeError||n instanceof SyntaxError||!n.name||!un[n.name])return n;var o=new un[n.name](r||n.message,n);return"stack"in n&&P(o,"stack",{get:function(){return this.inner.stack}}),o}var kn=ft.reduce(function(n,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(n[r+"Error"]=ue[r]),n},{});kn.ModifyError=vt,kn.DexieError=Ve,kn.BulkError=St;function He(){}function ln(n){return n}function ee(n,r){return n==null||n===ln?r:function(o){return r(n(o))}}function pe(n,r){return function(){n.apply(this,arguments),r.apply(this,arguments)}}function ve(n,r){return n===He?r:function(){var o=n.apply(this,arguments);o!==void 0&&(arguments[0]=o);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=r.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?pe(u,this.onsuccess):u),c&&(this.onerror=this.onerror?pe(c,this.onerror):c),d!==void 0?d:o}}function Oe(n,r){return n===He?r:function(){n.apply(this,arguments);var o=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?pe(o,this.onsuccess):o),u&&(this.onerror=this.onerror?pe(u,this.onerror):u)}}function nt(n,r){return n===He?r:function(o){var u=n.apply(this,arguments);g(o,u);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var p=r.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?pe(c,this.onsuccess):c),d&&(this.onerror=this.onerror?pe(d,this.onerror):d),u===void 0?p===void 0?void 0:p:g(u,p)}}function zt(n,r){return n===He?r:function(){return r.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function Xe(n,r){return n===He?r:function(){var o=n.apply(this,arguments);if(o&&typeof o.then=="function"){for(var u=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return o.then(function(){return r.apply(u,d)})}return r.apply(this,arguments)}}var ke=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function dt(n,r){ke=n}var at={},mt=100,Jt=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,x(n),n];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,x(r),n]})(),cn=Jt[0],jr=Jt[1],ut=Jt[2],Zn=jr&&jr.then,$t=cn&&cn.constructor,qi=!!ut;function ho(){queueMicrotask(Pc)}var hi=function(n,r){vi.push([n,r]),Gi&&(ho(),Gi=!1)},vo=!0,Gi=!0,gr=[],Xi=[],po=ln,Jn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},de=Jn,vi=[],mr=0,Qi=[];function ie(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=de;if(typeof n!="function"){if(n!==at)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&mo(this,this._value);return}this._state=null,this._value=null,++r.ref,Xs(this,n)}var go={get:function(){var n=de,r=ea;function o(u,c){var d=this,p=!n.global&&(n!==de||r!==ea),y=p&&!er(),b=new ie(function(T,I){yo(d,new Gs(Js(u,n,p,y),Js(c,n,p,y),T,I,n))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return o.prototype=at,o},set:function(n){P(this,"then",n&&n.prototype===at?go:{get:function(){return n},set:go.set})}};k(ie.prototype,{then:go,_then:function(n,r){yo(this,new Gs(null,null,n,r,de))},catch:function(n){if(arguments.length===1)return this.then(null,n);var r=arguments[0],o=arguments[1];return typeof r=="function"?this.then(null,function(u){return u instanceof r?o(u):Zi(u)}):this.then(null,function(u){return u&&u.name===r?o(u):Zi(u)})},finally:function(n){return this.then(function(r){return ie.resolve(n()).then(function(){return r})},function(r){return ie.resolve(n()).then(function(){return Zi(r)})})},timeout:function(n,r){var o=this;return n<1/0?new ie(function(u,c){var d=setTimeout(function(){return c(new ue.Timeout(r))},n);o.then(u,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&P(ie.prototype,Symbol.toStringTag,"Dexie.Promise"),Jn.env=Zs();function Gs(n,r,o,u,c){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=o,this.reject=u,this.psd=c}k(ie,{all:function(){var n=we.apply(null,arguments).map(ta);return new ie(function(r,o){n.length===0&&r([]);var u=n.length;n.forEach(function(c,d){return ie.resolve(c).then(function(p){n[d]=p,--u||r(n)},o)})})},resolve:function(n){if(n instanceof ie)return n;if(n&&typeof n.then=="function")return new ie(function(o,u){n.then(o,u)});var r=new ie(at,!0,n);return r},reject:Zi,race:function(){var n=we.apply(null,arguments).map(ta);return new ie(function(r,o){n.map(function(u){return ie.resolve(u).then(r,o)})})},PSD:{get:function(){return de},set:function(n){return de=n}},totalEchoes:{get:function(){return ea}},newPSD:$n,usePSD:yr,scheduler:{get:function(){return hi},set:function(n){hi=n}},rejectionMapper:{get:function(){return po},set:function(n){po=n}},follow:function(n,r){return new ie(function(o,u){return $n(function(c,d){var p=de;p.unhandleds=[],p.onunhandled=d,p.finalize=pe(function(){var y=this;Lc(function(){y.unhandleds.length===0?c():d(y.unhandleds[0])})},p.finalize),n()},r,o,u)})}}),$t&&($t.allSettled&&P(ie,"allSettled",function(){var n=we.apply(null,arguments).map(ta);return new ie(function(r){n.length===0&&r([]);var o=n.length,u=new Array(o);n.forEach(function(c,d){return ie.resolve(c).then(function(p){return u[d]={status:"fulfilled",value:p}},function(p){return u[d]={status:"rejected",reason:p}}).then(function(){return--o||r(u)})})})}),$t.any&&typeof AggregateError<"u"&&P(ie,"any",function(){var n=we.apply(null,arguments).map(ta);return new ie(function(r,o){n.length===0&&o(new AggregateError([]));var u=n.length,c=new Array(u);n.forEach(function(d,p){return ie.resolve(d).then(function(y){return r(y)},function(y){c[p]=y,--u||o(new AggregateError(c))})})})}),$t.withResolvers&&(ie.withResolvers=$t.withResolvers));function Xs(n,r){try{r(function(o){if(n._state===null){if(o===n)throw new TypeError("A promise cannot be resolved with itself.");var u=n._lib&&zr();o&&typeof o.then=="function"?Xs(n,function(c,d){o instanceof ie?o._then(c,d):o.then(c,d)}):(n._state=!0,n._value=o,Qs(n)),u&&Ur()}},mo.bind(null,n))}catch(o){mo(n,o)}}function mo(n,r){if(Xi.push(r),n._state===null){var o=n._lib&&zr();r=po(r),n._state=!1,n._value=r,Oc(n),Qs(n),o&&Ur()}}function Qs(n){var r=n._listeners;n._listeners=[];for(var o=0,u=r.length;o<u;++o)yo(n,r[o]);var c=n._PSD;--c.ref||c.finalize(),mr===0&&(++mr,hi(function(){--mr===0&&bo()},[]))}function yo(n,r){if(n._state===null){n._listeners.push(r);return}var o=n._state?r.onFulfilled:r.onRejected;if(o===null)return(n._state?r.resolve:r.reject)(n._value);++r.psd.ref,++mr,hi(Cc,[o,n,r])}function Cc(n,r,o){try{var u,c=r._value;!r._state&&Xi.length&&(Xi=[]),u=ke&&r._consoleTask?r._consoleTask.run(function(){return n(c)}):n(c),!r._state&&Xi.indexOf(c)===-1&&Mc(r),o.resolve(u)}catch(d){o.reject(d)}finally{--mr===0&&bo(),--o.psd.ref||o.psd.finalize()}}function Pc(){yr(Jn,function(){zr()&&Ur()})}function zr(){var n=vo;return vo=!1,Gi=!1,n}function Ur(){var n,r,o;do for(;vi.length>0;)for(n=vi,vi=[],o=n.length,r=0;r<o;++r){var u=n[r];u[0].apply(null,u[1])}while(vi.length>0);vo=!0,Gi=!0}function bo(){var n=gr;gr=[],n.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var r=Qi.slice(0),o=r.length;o;)r[--o]()}function Lc(n){function r(){n(),Qi.splice(Qi.indexOf(r),1)}Qi.push(r),++mr,hi(function(){--mr===0&&bo()},[])}function Oc(n){gr.some(function(r){return r._value===n._value})||gr.push(n)}function Mc(n){for(var r=gr.length;r;)if(gr[--r]._value===n._value){gr.splice(r,1);return}}function Zi(n){return new ie(at,!1,n)}function lt(n,r){var o=de;return function(){var u=zr(),c=de;try{return tr(o,!0),n.apply(this,arguments)}catch(d){r&&r(d)}finally{tr(c,!1),u&&Ur()}}}var At={awaits:0,echoes:0,id:0},Rc=0,Ji=[],$i=0,ea=0,Kc=0;function $n(n,r,o,u){var c=de,d=Object.create(c);d.parent=c,d.ref=0,d.global=!1,d.id=++Kc,Jn.env,d.env=qi?{Promise:ie,PromiseProp:{value:ie,configurable:!0,writable:!0},all:ie.all,race:ie.race,allSettled:ie.allSettled,any:ie.any,resolve:ie.resolve,reject:ie.reject}:{},r&&g(d,r),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()};var p=yr(d,n,o,u);return d.ref===0&&d.finalize(),p}function Vr(){return At.id||(At.id=++Rc),++At.awaits,At.echoes+=mt,At.id}function er(){return At.awaits?(--At.awaits===0&&(At.id=0),At.echoes=At.awaits*mt,!0):!1}(""+Zn).indexOf("[native code]")===-1&&(Vr=er=He);function ta(n){return At.echoes&&n&&n.constructor===$t?(Vr(),n.then(function(r){return er(),r},function(r){return er(),yt(r)})):n}function Bc(n){++ea,(!At.echoes||--At.echoes===0)&&(At.echoes=At.awaits=At.id=0),Ji.push(de),tr(n,!0)}function Fc(){var n=Ji[Ji.length-1];Ji.pop(),tr(n,!1)}function tr(n,r){var o=de;if((r?At.echoes&&(!$i++||n!==de):$i&&(!--$i||n!==de))&&queueMicrotask(r?Bc.bind(null,n):Fc),n!==de&&(de=n,o===Jn&&(Jn.env=Zs()),qi)){var u=Jn.env.Promise,c=n.env;(o.global||n.global)&&(Object.defineProperty(f,"Promise",c.PromiseProp),u.all=c.all,u.race=c.race,u.resolve=c.resolve,u.reject=c.reject,c.allSettled&&(u.allSettled=c.allSettled),c.any&&(u.any=c.any))}}function Zs(){var n=f.Promise;return qi?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function yr(n,r,o,u,c){var d=de;try{return tr(n,!0),r(o,u,c)}finally{tr(d,!1)}}function Js(n,r,o,u){return typeof n!="function"?n:function(){var c=de;o&&Vr(),tr(r,!0);try{return n.apply(this,arguments)}finally{tr(c,!1),u&&queueMicrotask(er)}}}function _o(n){Promise===$t&&At.echoes===0?$i===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}var yt=ie.reject;function wo(n,r,o,u){if(!n.idbdb||!n._state.openComplete&&!de.letThrough&&!n._vip){if(n._state.openComplete)return yt(new ue.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return yt(new ue.DatabaseClosed);n.open().catch(He)}return n._state.dbReadyPromise.then(function(){return wo(n,r,o,u)})}else{var c=n._createTransaction(r,o,n._dbSchema);try{c.create(),n._state.PR1398_maxLoop=3}catch(d){return d.name===It.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return wo(n,r,o,u)})):yt(d)}return c._promise(r,function(d,p){return $n(function(){return de.trans=c,u(d,p,c)})}).then(function(d){if(r==="readwrite")try{c.idbtrans.commit()}catch{}return r==="readonly"?d:c._completion.then(function(){return d})})}}var $s="4.2.1",br="ï¿¿",Eo=-1/0,Kn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",eu="String expected.",Yr=[],na="__dbnames",xo="readonly",ko="readwrite";function _r(n,r){return n?r?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:n:r}var tu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ra(n){return typeof n=="string"&&!/\./.test(n)?function(r){return r[n]===void 0&&n in r&&(r=Ae(r),delete r[n]),r}:function(r){return r}}function nu(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ze(n,r){try{var o=ru(n),u=ru(r);if(o!==u)return o==="Array"?1:u==="Array"?-1:o==="binary"?1:u==="binary"?-1:o==="string"?1:u==="string"?-1:o==="Date"?1:u!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return n>r?1:n<r?-1:0;case"binary":return Hc(iu(n),iu(r));case"Array":return Nc(n,r)}}catch{}return NaN}function Nc(n,r){for(var o=n.length,u=r.length,c=o<u?o:u,d=0;d<c;++d){var p=ze(n[d],r[d]);if(p!==0)return p}return o===u?0:o<u?-1:1}function Hc(n,r){for(var o=n.length,u=r.length,c=o<u?o:u,d=0;d<c;++d)if(n[d]!==r[d])return n[d]<r[d]?-1:1;return o===u?0:o<u?-1:1}function ru(n){var r=typeof n;if(r!=="object")return r;if(ArrayBuffer.isView(n))return"binary";var o=Ge(n);return o==="ArrayBuffer"?"binary":o}function iu(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function ia(n,r,o){var u=n.schema.yProps;return u?(r&&o.numFailures>0&&(r=r.filter(function(c,d){return!o.failures[d]})),Promise.all(u.map(function(c){var d=c.updatesTable;return r?n.db.table(d).where("k").anyOf(r).delete():n.db.table(d).clear()})).then(function(){return o})):o}var pi=(function(){function n(r){this["@@propmod"]=r}return n.prototype.execute=function(r){var o,u=this["@@propmod"];if(u.add!==void 0){var c=u.add;if(v(c))return l(l([],v(r)?r:[],!0),c).sort();if(typeof c=="number")return(Number(r)||0)+c;if(typeof c=="bigint")try{return BigInt(r)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(u.remove!==void 0){var d=u.remove;if(v(d))return v(r)?r.filter(function(y){return!d.includes(y)}).sort():[];if(typeof d=="number")return Number(r)-d;if(typeof d=="bigint")try{return BigInt(r)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}var p=(o=u.replacePrefix)===null||o===void 0?void 0:o[0];return p&&typeof r=="string"&&r.startsWith(p)?u.replacePrefix[1]+r.substring(p.length):r},n})();function au(n,r){for(var o=h(r),u=o.length,c=!1,d=0;d<u;++d){var p=o[d],y=r[p],b=Q(n,p);y instanceof pi?(ne(n,p,y.execute(b)),c=!0):b!==y&&(ne(n,p,y),c=!0)}return c}var ou=(function(){function n(){}return n.prototype._trans=function(r,o,u){var c=this._tx||de.trans,d=this.name,p=ke&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function y(I,S,R){if(!R.schema[d])throw new ue.NotFound("Table "+d+" not part of transaction");return o(R.idbtrans,R)}var b=zr();try{var T=c&&c.db._novip===this.db._novip?c===de.trans?c._promise(r,y,u):$n(function(){return c._promise(r,y,u)},{trans:c,transless:de.transless||de}):wo(this.db,r,[this.name],y);return p&&(T._consoleTask=p,T=T.catch(function(I){return console.trace(I),yt(I)})),T}finally{b&&Ur()}},n.prototype.get=function(r,o){var u=this;return r&&r.constructor===Object?this.where(r).first(o):r==null?yt(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return u.core.get({trans:c,key:r}).then(function(d){return u.hook.reading.fire(d)})}).then(o)},n.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(v(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var o=h(r);if(o.length===1)return this.where(o[0]).equals(r[o[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(I){if(I.compound&&o.every(function(R){return I.keyPath.indexOf(R)>=0})){for(var S=0;S<o.length;++S)if(o.indexOf(I.keyPath[S])===-1)return!1;return!0}return!1}).sort(function(I,S){return I.keyPath.length-S.keyPath.length})[0];if(u&&this.db._maxKey!==br){var c=u.keyPath.slice(0,o.length);return this.where(c).equals(c.map(function(I){return r[I]}))}!u&&ke&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var d=this.schema.idxByName;function p(I,S){return ze(I,S)===0}var y=o.reduce(function(I,S){var R=I[0],X=I[1],A=d[S],L=r[S];return[R||A,R||!A?_r(X,A&&A.multi?function(O){var B=Q(O,S);return v(B)&&B.some(function(j){return p(L,j)})}:function(O){return p(L,Q(O,S))}):X]},[null,null]),b=y[0],T=y[1];return b?this.where(b.name).equals(r[b.keyPath]).filter(T):u?this.filter(T):this.where(o).equals("")},n.prototype.filter=function(r){return this.toCollection().and(r)},n.prototype.count=function(r){return this.toCollection().count(r)},n.prototype.offset=function(r){return this.toCollection().offset(r)},n.prototype.limit=function(r){return this.toCollection().limit(r)},n.prototype.each=function(r){return this.toCollection().each(r)},n.prototype.toArray=function(r){return this.toCollection().toArray(r)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,v(r)?"[".concat(r.join("+"),"]"):r))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(r){var o=this,u=o.db,c=o.name;this.schema.mappedClass=r,r.prototype instanceof nu&&(r=(function(b){a(T,b);function T(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(T.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),T.prototype.table=function(){return c},T})(r));for(var d=new Set,p=r.prototype;p;p=x(p))Object.getOwnPropertyNames(p).forEach(function(b){return d.add(b)});var y=function(b){if(!b)return b;var T=Object.create(r.prototype);for(var I in b)if(!d.has(I))try{T[I]=b[I]}catch{}return T};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=y,this.hook("reading",y),r},n.prototype.defineClass=function(){function r(o){g(this,o)}return this.mapToClass(r)},n.prototype.add=function(r,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,y=r;return p&&d&&(y=ra(p)(r)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"add",keys:o!=null?[o]:null,values:[y]})}).then(function(b){return b.numFailures?ie.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{ne(r,p,b)}catch{}return b})},n.prototype.upsert=function(r,o){var u=this,c=this.schema.primKey.keyPath;return this._trans("readwrite",function(d){return u.core.get({trans:d,key:r}).then(function(p){var y=p??{};return au(y,o),c&&ne(y,c,r),u.core.mutate({trans:d,type:"put",values:[y],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[o]}}).then(function(b){return b.numFailures?ie.reject(b.failures[0]):!!p})})})},n.prototype.update=function(r,o){if(typeof r=="object"&&!v(r)){var u=Q(r,this.schema.primKey.keyPath);return u===void 0?yt(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(o)}else return this.where(":id").equals(r).modify(o)},n.prototype.put=function(r,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,y=r;return p&&d&&(y=ra(p)(r)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"put",values:[y],keys:o!=null?[o]:null})}).then(function(b){return b.numFailures?ie.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{ne(r,p,b)}catch{}return b})},n.prototype.delete=function(r){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"delete",keys:[r]}).then(function(c){return ia(o,[r],c)}).then(function(c){return c.numFailures?ie.reject(c.failures[0]):void 0})})},n.prototype.clear=function(){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"deleteRange",range:tu}).then(function(u){return ia(r,null,u)})}).then(function(o){return o.numFailures?ie.reject(o.failures[0]):void 0})},n.prototype.bulkGet=function(r){var o=this;return this._trans("readonly",function(u){return o.core.getMany({keys:r,trans:u}).then(function(c){return c.map(function(d){return o.hook.reading.fire(d)})})})},n.prototype.bulkAdd=function(r,o,u){var c=this,d=Array.isArray(o)?o:void 0;u=u||(d?void 0:o);var p=u?u.allKeys:void 0;return this._trans("readwrite",function(y){var b=c.schema.primKey,T=b.auto,I=b.keyPath;if(I&&d)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var S=r.length,R=I&&T?r.map(ra(I)):r;return c.core.mutate({trans:y,type:"add",keys:d,values:R,wantResults:p}).then(function(X){var A=X.numFailures,L=X.results,O=X.lastResult,B=X.failures,j=p?L:O;if(A===0)return j;throw new St("".concat(c.name,".bulkAdd(): ").concat(A," of ").concat(S," operations failed"),B)})})},n.prototype.bulkPut=function(r,o,u){var c=this,d=Array.isArray(o)?o:void 0;u=u||(d?void 0:o);var p=u?u.allKeys:void 0;return this._trans("readwrite",function(y){var b=c.schema.primKey,T=b.auto,I=b.keyPath;if(I&&d)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var S=r.length,R=I&&T?r.map(ra(I)):r;return c.core.mutate({trans:y,type:"put",keys:d,values:R,wantResults:p}).then(function(X){var A=X.numFailures,L=X.results,O=X.lastResult,B=X.failures,j=p?L:O;if(A===0)return j;throw new St("".concat(c.name,".bulkPut(): ").concat(A," of ").concat(S," operations failed"),B)})})},n.prototype.bulkUpdate=function(r){var o=this,u=this.core,c=r.map(function(y){return y.key}),d=r.map(function(y){return y.changes}),p=[];return this._trans("readwrite",function(y){return u.getMany({trans:y,keys:c,cache:"clone"}).then(function(b){var T=[],I=[];r.forEach(function(R,X){var A=R.key,L=R.changes,O=b[X];if(O){for(var B=0,j=Object.keys(L);B<j.length;B++){var z=j[B],V=L[z];if(z===o.schema.primKey.keyPath){if(ze(V,A)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else ne(O,z,V)}p.push(X),T.push(A),I.push(O)}});var S=T.length;return u.mutate({trans:y,type:"put",keys:T,values:I,updates:{keys:c,changeSpecs:d}}).then(function(R){var X=R.numFailures,A=R.failures;if(X===0)return S;for(var L=0,O=Object.keys(A);L<O.length;L++){var B=O[L],j=p[Number(B)];if(j!=null){var z=A[B];delete A[B],A[j]=z}}throw new St("".concat(o.name,".bulkUpdate(): ").concat(X," of ").concat(S," operations failed"),A)})})})},n.prototype.bulkDelete=function(r){var o=this,u=r.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:r}).then(function(d){return ia(o,r,d)})}).then(function(c){var d=c.numFailures,p=c.lastResult,y=c.failures;if(d===0)return p;throw new St("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(u," operations failed"),y)})},n})();function gi(n){var r={},o=function(y,b){if(b){for(var T=arguments.length,I=new Array(T-1);--T;)I[T-1]=arguments[T];return r[y].subscribe.apply(null,I),n}else if(typeof y=="string")return r[y]};o.addEventType=d;for(var u=1,c=arguments.length;u<c;++u)d(arguments[u]);return o;function d(y,b,T){if(typeof y=="object")return p(y);b||(b=zt),T||(T=He);var I={subscribers:[],fire:T,subscribe:function(S){I.subscribers.indexOf(S)===-1&&(I.subscribers.push(S),I.fire=b(I.fire,S))},unsubscribe:function(S){I.subscribers=I.subscribers.filter(function(R){return R!==S}),I.fire=I.subscribers.reduce(b,T)}};return r[y]=o[y]=I,I}function p(y){h(y).forEach(function(b){var T=y[b];if(v(T))d(b,y[b][0],y[b][1]);else if(T==="asap")var I=d(b,ln,function(){for(var R=arguments.length,X=new Array(R);R--;)X[R]=arguments[R];I.subscribers.forEach(function(A){Y(function(){A.apply(null,X)})})});else throw new ue.InvalidArgument("Invalid event config")})}}function mi(n,r){return C(r).from({prototype:n}),r}function jc(n){return mi(ou.prototype,function(o,u,c){this.db=n,this._tx=c,this.name=o,this.schema=u,this.hook=n._allTables[o]?n._allTables[o].hook:gi(null,{creating:[ve,He],reading:[ee,ln],updating:[nt,He],deleting:[Oe,He]})})}function Wr(n,r){return!(n.filter||n.algorithm||n.or)&&(r?n.justLimit:!n.replayFilter)}function To(n,r){n.filter=_r(n.filter,r)}function So(n,r,o){var u=n.replayFilter;n.replayFilter=u?function(){return _r(u(),r())}:r,n.justLimit=o&&!u}function zc(n,r){n.isMatch=_r(n.isMatch,r)}function aa(n,r){if(n.isPrimKey)return r.primaryKey;var o=r.getIndexByKeyPath(n.index);if(!o)throw new ue.Schema("KeyPath "+n.index+" on object store "+r.name+" is not indexed");return o}function su(n,r,o){var u=aa(n,r.schema);return r.openCursor({trans:o,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:u,range:n.range}})}function oa(n,r,o,u){var c=n.replayFilter?_r(n.filter,n.replayFilter()):n.filter;if(n.or){var d={},p=function(y,b,T){if(!c||c(b,T,function(R){return b.stop(R)},function(R){return b.fail(R)})){var I=b.primaryKey,S=""+I;S==="[object ArrayBuffer]"&&(S=""+new Uint8Array(I)),w(d,S)||(d[S]=!0,r(y,b,T))}};return Promise.all([n.or._iterate(p,o),uu(su(n,u,o),n.algorithm,p,!n.keysOnly&&n.valueMapper)])}else return uu(su(n,u,o),_r(n.algorithm,c),r,!n.keysOnly&&n.valueMapper)}function uu(n,r,o,u){var c=u?function(p,y,b){return o(u(p),y,b)}:o,d=lt(c);return n.then(function(p){if(p)return p.start(function(){var y=function(){return p.continue()};(!r||r(p,function(b){return y=b},function(b){p.stop(b),y=He},function(b){p.fail(b),y=He}))&&d(p.value,p,function(b){return y=b}),y()})})}var Uc=(function(){function n(){}return n.prototype._read=function(r,o){var u=this._ctx;return u.error?u.table._trans(null,yt.bind(null,u.error)):u.table._trans("readonly",r).then(o)},n.prototype._write=function(r){var o=this._ctx;return o.error?o.table._trans(null,yt.bind(null,o.error)):o.table._trans("readwrite",r,"locked")},n.prototype._addAlgorithm=function(r){var o=this._ctx;o.algorithm=_r(o.algorithm,r)},n.prototype._iterate=function(r,o){return oa(this._ctx,r,o,this._ctx.table.core)},n.prototype.clone=function(r){var o=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return r&&g(u,r),o._ctx=u,o},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(r){var o=this._ctx;return this._read(function(u){return oa(o,r,u,o.table.core)})},n.prototype.count=function(r){var o=this;return this._read(function(u){var c=o._ctx,d=c.table.core;if(Wr(c,!0))return d.count({trans:u,query:{index:aa(c,d.schema),range:c.range}}).then(function(y){return Math.min(y,c.limit)});var p=0;return oa(c,function(){return++p,!1},u,d).then(function(){return p})}).then(r)},n.prototype.sortBy=function(r,o){var u=r.split(".").reverse(),c=u[0],d=u.length-1;function p(T,I){return I?p(T[u[I]],I-1):T[c]}var y=this._ctx.dir==="next"?1:-1;function b(T,I){var S=p(T,d),R=p(I,d);return ze(S,R)*y}return this.toArray(function(T){return T.sort(b)}).then(o)},n.prototype.toArray=function(r){var o=this;return this._read(function(u){var c=o._ctx;if(c.dir==="next"&&Wr(c,!0)&&c.limit>0){var d=c.valueMapper,p=aa(c,c.table.core.schema);return c.table.core.query({trans:u,limit:c.limit,values:!0,query:{index:p,range:c.range}}).then(function(b){var T=b.result;return d?T.map(d):T})}else{var y=[];return oa(c,function(b){return y.push(b)},u,c.table.core).then(function(){return y})}},r)},n.prototype.offset=function(r){var o=this._ctx;return r<=0?this:(o.offset+=r,Wr(o)?So(o,function(){var u=r;return function(c,d){return u===0?!0:u===1?(--u,!1):(d(function(){c.advance(u),u=0}),!1)}}):So(o,function(){var u=r;return function(){return--u<0}}),this)},n.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),So(this._ctx,function(){var o=r;return function(u,c,d){return--o<=0&&c(d),o>=0}},!0),this},n.prototype.until=function(r,o){return To(this._ctx,function(u,c,d){return r(u.value)?(c(d),o):!0}),this},n.prototype.first=function(r){return this.limit(1).toArray(function(o){return o[0]}).then(r)},n.prototype.last=function(r){return this.reverse().first(r)},n.prototype.filter=function(r){return To(this._ctx,function(o){return r(o.value)}),zc(this._ctx,r),this},n.prototype.and=function(r){return this.filter(r)},n.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){r(c.key,c)})},n.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},n.prototype.eachPrimaryKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){r(c.primaryKey,c)})},n.prototype.keys=function(r){var o=this._ctx;o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.key)}).then(function(){return u}).then(r)},n.prototype.primaryKeys=function(r){var o=this._ctx;if(o.dir==="next"&&Wr(o,!0)&&o.limit>0)return this._read(function(c){var d=aa(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(c){var d=c.result;return d}).then(r);o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.primaryKey)}).then(function(){return u}).then(r)},n.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},n.prototype.firstKey=function(r){return this.limit(1).keys(function(o){return o[0]}).then(r)},n.prototype.lastKey=function(r){return this.reverse().firstKey(r)},n.prototype.distinct=function(){var r=this._ctx,o=r.index&&r.table.schema.idxByName[r.index];if(!o||!o.multi)return this;var u={};return To(this._ctx,function(c){var d=c.primaryKey.toString(),p=w(u,d);return u[d]=!0,!p}),this},n.prototype.modify=function(r){var o=this,u=this._ctx;return this._write(function(c){var d;typeof r=="function"?d=r:d=function(B){return au(B,r)};var p=u.table.core,y=p.schema.primaryKey,b=y.outbound,T=y.extractKey,I=200,S=o.db._options.modifyChunkSize;S&&(typeof S=="object"?I=S[p.name]||S["*"]||200:I=S);var R=[],X=0,A=[],L=function(B,j){var z=j.failures,V=j.numFailures;X+=B-V;for(var H=0,te=h(z);H<te.length;H++){var oe=te[H];R.push(z[oe])}},O=r===lu;return o.clone().primaryKeys().then(function(B){var j=Wr(u)&&u.limit===1/0&&(typeof r!="function"||O)&&{index:u.index,range:u.range},z=function(V){var H=Math.min(I,B.length-V),te=B.slice(V,V+H);return(O?Promise.resolve([]):p.getMany({trans:c,keys:te,cache:"immutable"})).then(function(oe){var re=[],Ee=[],Ne=b?[]:null,se=O?te:[];if(!O)for(var Me=0;Me<H;++Me){var xe=oe[Me],Ye={value:Ae(xe),primKey:B[V+Me]};d.call(Ye,Ye.value,Ye)!==!1&&(Ye.value==null?se.push(B[V+Me]):!b&&ze(T(xe),T(Ye.value))!==0?(se.push(B[V+Me]),re.push(Ye.value)):(Ee.push(Ye.value),b&&Ne.push(B[V+Me])))}return Promise.resolve(re.length>0&&p.mutate({trans:c,type:"add",values:re}).then(function(ge){for(var pt in ge.failures)se.splice(parseInt(pt),1);L(re.length,ge)})).then(function(){return(Ee.length>0||j&&typeof r=="object")&&p.mutate({trans:c,type:"put",keys:Ne,values:Ee,criteria:j,changeSpec:typeof r!="function"&&r,isAdditionalChunk:V>0}).then(function(ge){return L(Ee.length,ge)})}).then(function(){return(se.length>0||j&&O)&&p.mutate({trans:c,type:"delete",keys:se,criteria:j,isAdditionalChunk:V>0}).then(function(ge){return ia(u.table,se,ge)}).then(function(ge){return L(se.length,ge)})}).then(function(){return B.length>V+H&&z(V+I)})})};return z(0).then(function(){if(R.length>0)throw new vt("Error modifying one or more objects",R,X,A);return B.length})})})},n.prototype.delete=function(){var r=this._ctx,o=r.range;return Wr(r)&&!r.table.schema.yProps&&(r.isPrimKey||o.type===3)?this._write(function(u){var c=r.table.core.schema.primaryKey,d=o;return r.table.core.count({trans:u,query:{index:c,range:d}}).then(function(p){return r.table.core.mutate({trans:u,type:"deleteRange",range:d}).then(function(y){var b=y.failures,T=y.numFailures;if(T)throw new vt("Could not delete some values",Object.keys(b).map(function(I){return b[I]}),p-T);return p-T})})}):this.modify(lu)},n})(),lu=function(n,r){return r.value=null};function Vc(n){return mi(Uc.prototype,function(o,u){this.db=n;var c=tu,d=null;if(u)try{c=u()}catch(T){d=T}var p=o._ctx,y=p.table,b=y.hook.reading.fire;this._ctx={table:y,index:p.index,isPrimKey:!p.index||y.schema.primKey.keyPath&&p.index===y.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:p.or,valueMapper:b!==ln?b:null}})}function Yc(n,r){return n<r?-1:n===r?0:1}function Wc(n,r){return n>r?-1:n===r?0:1}function en(n,r,o){var u=n instanceof fu?new n.Collection(n):n;return u._ctx.error=o?new o(r):new TypeError(r),u}function qr(n){return new n.Collection(n,function(){return cu("")}).limit(0)}function qc(n){return n==="next"?function(r){return r.toUpperCase()}:function(r){return r.toLowerCase()}}function Gc(n){return n==="next"?function(r){return r.toLowerCase()}:function(r){return r.toUpperCase()}}function Xc(n,r,o,u,c,d){for(var p=Math.min(n.length,u.length),y=-1,b=0;b<p;++b){var T=r[b];if(T!==u[b])return c(n[b],o[b])<0?n.substr(0,b)+o[b]+o.substr(b+1):c(n[b],u[b])<0?n.substr(0,b)+u[b]+o.substr(b+1):y>=0?n.substr(0,y)+r[y]+o.substr(y+1):null;c(n[b],T)<0&&(y=b)}return p<u.length&&d==="next"?n+o.substr(n.length):p<n.length&&d==="prev"?n.substr(0,o.length):y<0?null:n.substr(0,y)+u[y]+o.substr(y+1)}function sa(n,r,o,u){var c,d,p,y,b,T,I,S=o.length;if(!o.every(function(L){return typeof L=="string"}))return en(n,eu);function R(L){c=qc(L),d=Gc(L),p=L==="next"?Yc:Wc;var O=o.map(function(B){return{lower:d(B),upper:c(B)}}).sort(function(B,j){return p(B.lower,j.lower)});y=O.map(function(B){return B.upper}),b=O.map(function(B){return B.lower}),T=L,I=L==="next"?"":u}R("next");var X=new n.Collection(n,function(){return nr(y[0],b[S-1]+u)});X._ondirectionchange=function(L){R(L)};var A=0;return X._addAlgorithm(function(L,O,B){var j=L.key;if(typeof j!="string")return!1;var z=d(j);if(r(z,b,A))return!0;for(var V=null,H=A;H<S;++H){var te=Xc(j,z,y[H],b[H],p,T);te===null&&V===null?A=H+1:(V===null||p(V,te)>0)&&(V=te)}return O(V!==null?function(){L.continue(V+I)}:B),!1}),X}function nr(n,r,o,u){return{type:2,lower:n,upper:r,lowerOpen:o,upperOpen:u}}function cu(n){return{type:1,lower:n,upper:n}}var fu=(function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(r,o,u,c){u=u!==!1,c=c===!0;try{return this._cmp(r,o)>0||this._cmp(r,o)===0&&(u||c)&&!(u&&c)?qr(this):new this.Collection(this,function(){return nr(r,o,!u,!c)})}catch{return en(this,Kn)}},n.prototype.equals=function(r){return r==null?en(this,Kn):new this.Collection(this,function(){return cu(r)})},n.prototype.above=function(r){return r==null?en(this,Kn):new this.Collection(this,function(){return nr(r,void 0,!0)})},n.prototype.aboveOrEqual=function(r){return r==null?en(this,Kn):new this.Collection(this,function(){return nr(r,void 0,!1)})},n.prototype.below=function(r){return r==null?en(this,Kn):new this.Collection(this,function(){return nr(void 0,r,!1,!0)})},n.prototype.belowOrEqual=function(r){return r==null?en(this,Kn):new this.Collection(this,function(){return nr(void 0,r)})},n.prototype.startsWith=function(r){return typeof r!="string"?en(this,eu):this.between(r,r+br,!0,!0)},n.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):sa(this,function(o,u){return o.indexOf(u[0])===0},[r],br)},n.prototype.equalsIgnoreCase=function(r){return sa(this,function(o,u){return o===u[0]},[r],"")},n.prototype.anyOfIgnoreCase=function(){var r=we.apply(De,arguments);return r.length===0?qr(this):sa(this,function(o,u){return u.indexOf(o)!==-1},r,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var r=we.apply(De,arguments);return r.length===0?qr(this):sa(this,function(o,u){return u.some(function(c){return o.indexOf(c)===0})},r,br)},n.prototype.anyOf=function(){var r=this,o=we.apply(De,arguments),u=this._cmp;try{o.sort(u)}catch{return en(this,Kn)}if(o.length===0)return qr(this);var c=new this.Collection(this,function(){return nr(o[0],o[o.length-1])});c._ondirectionchange=function(p){u=p==="next"?r._ascending:r._descending,o.sort(u)};var d=0;return c._addAlgorithm(function(p,y,b){for(var T=p.key;u(T,o[d])>0;)if(++d,d===o.length)return y(b),!1;return u(T,o[d])===0?!0:(y(function(){p.continue(o[d])}),!1)}),c},n.prototype.notEqual=function(r){return this.inAnyRange([[Eo,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var r=we.apply(De,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return en(this,Kn)}var o=r.reduce(function(u,c){return u?u.concat([[u[u.length-1][1],c]]):[[Eo,c]]},null);return o.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(r,o){var u=this,c=this._cmp,d=this._ascending,p=this._descending,y=this._min,b=this._max;if(r.length===0)return qr(this);if(!r.every(function(H){return H[0]!==void 0&&H[1]!==void 0&&d(H[0],H[1])<=0}))return en(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var T=!o||o.includeLowers!==!1,I=o&&o.includeUppers===!0;function S(H,te){for(var oe=0,re=H.length;oe<re;++oe){var Ee=H[oe];if(c(te[0],Ee[1])<0&&c(te[1],Ee[0])>0){Ee[0]=y(Ee[0],te[0]),Ee[1]=b(Ee[1],te[1]);break}}return oe===re&&H.push(te),H}var R=d;function X(H,te){return R(H[0],te[0])}var A;try{A=r.reduce(S,[]),A.sort(X)}catch{return en(this,Kn)}var L=0,O=I?function(H){return d(H,A[L][1])>0}:function(H){return d(H,A[L][1])>=0},B=T?function(H){return p(H,A[L][0])>0}:function(H){return p(H,A[L][0])>=0};function j(H){return!O(H)&&!B(H)}var z=O,V=new this.Collection(this,function(){return nr(A[0][0],A[A.length-1][1],!T,!I)});return V._ondirectionchange=function(H){H==="next"?(z=O,R=d):(z=B,R=p),A.sort(X)},V._addAlgorithm(function(H,te,oe){for(var re=H.key;z(re);)if(++L,L===A.length)return te(oe),!1;return j(re)?!0:(u._cmp(re,A[L][1])===0||u._cmp(re,A[L][0])===0||te(function(){R===d?H.continue(A[L][0]):H.continue(A[L][1])}),!1)}),V},n.prototype.startsWithAnyOf=function(){var r=we.apply(De,arguments);return r.every(function(o){return typeof o=="string"})?r.length===0?qr(this):this.inAnyRange(r.map(function(o){return[o,o+br]})):en(this,"startsWithAnyOf() only works with strings")},n})();function Qc(n){return mi(fu.prototype,function(o,u,c){if(this.db=n,this._ctx={table:o,index:u===":id"?null:u,or:c},this._cmp=this._ascending=ze,this._descending=function(d,p){return ze(p,d)},this._max=function(d,p){return ze(d,p)>0?d:p},this._min=function(d,p){return ze(d,p)<0?d:p},this._IDBKeyRange=n._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})}function Tn(n){return lt(function(r){return yi(r),n(r.target.error),!1})}function yi(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var bi="storagemutated",Ao="x-storagemutated-1",rr=gi(null,bi),Zc=(function(){function n(){}return n.prototype._lock=function(){return J(!de.global),++this._reculock,this._reculock===1&&!de.global&&(de.lockOwnerFor=this),this},n.prototype._unlock=function(){if(J(!de.global),--this._reculock===0)for(de.global||(de.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{yr(r[1],r[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&de.lockOwnerFor!==this},n.prototype.create=function(r){var o=this;if(!this.mode)return this;var u=this.db.idbdb,c=this.db._state.dbOpenError;if(J(!this.idbtrans),!r&&!u)switch(c&&c.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(c);case"MissingAPIError":throw new ue.MissingAPI(c.message,c);default:throw new ue.OpenFailed(c)}if(!this.active)throw new ue.TransactionInactive;return J(this._completion._state===null),r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):u.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),r.onerror=lt(function(d){yi(d),o._reject(r.error)}),r.onabort=lt(function(d){yi(d),o.active&&o._reject(new ue.Abort(r.error)),o.active=!1,o.on("abort").fire(d)}),r.oncomplete=lt(function(){o.active=!1,o._resolve(),"mutatedParts"in r&&rr.storagemutated.fire(r.mutatedParts)}),this},n.prototype._promise=function(r,o,u){var c=this;if(r==="readwrite"&&this.mode!=="readwrite")return yt(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return yt(new ue.TransactionInactive);if(this._locked())return new ie(function(p,y){c._blockedFuncs.push([function(){c._promise(r,o,u).then(p,y)},de])});if(u)return $n(function(){var p=new ie(function(y,b){c._lock();var T=o(y,b,c);T&&T.then&&T.then(y,b)});return p.finally(function(){return c._unlock()}),p._lib=!0,p});var d=new ie(function(p,y){var b=o(p,y,c);b&&b.then&&b.then(p,y)});return d._lib=!0,d},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(r){var o=this._root(),u=ie.resolve(r);if(o._waitingFor)o._waitingFor=o._waitingFor.then(function(){return u});else{o._waitingFor=u,o._waitingQueue=[];var c=o.idbtrans.objectStore(o.storeNames[0]);(function p(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(c.get(-1/0).onsuccess=p)})()}var d=o._waitingFor;return new ie(function(p,y){u.then(function(b){return o._waitingQueue.push(lt(p.bind(null,b)))},function(b){return o._waitingQueue.push(lt(y.bind(null,b)))}).finally(function(){o._waitingFor===d&&(o._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},n.prototype.table=function(r){var o=this._memoizedTables||(this._memoizedTables={});if(w(o,r))return o[r];var u=this.schema[r];if(!u)throw new ue.NotFound("Table "+r+" not part of transaction");var c=new this.db.Table(r,u,this);return c.core=this.db.core.table(r),o[r]=c,c},n})();function Jc(n){return mi(Zc.prototype,function(o,u,c,d,p){var y=this;o!=="readonly"&&u.forEach(function(b){var T,I=(T=c[b])===null||T===void 0?void 0:T.yProps;I&&(u=u.concat(I.map(function(S){return S.updatesTable})))}),this.db=n,this.mode=o,this.storeNames=u,this.schema=c,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=gi(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ie(function(b,T){y._resolve=b,y._reject=T}),this._completion.then(function(){y.active=!1,y.on.complete.fire()},function(b){var T=y.active;return y.active=!1,y.on.error.fire(b),y.parent?y.parent._reject(b):T&&y.idbtrans&&y.idbtrans.abort(),yt(b)})})}function Io(n,r,o,u,c,d,p,y){return{name:n,keyPath:r,unique:o,multi:u,auto:c,compound:d,src:(o&&!p?"&":"")+(u?"*":"")+(c?"++":"")+du(r),type:y}}function du(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Do(n,r,o){return{name:n,primKey:r,indexes:o,mappedClass:null,idxByName:F(o,function(u){return[u.name,u]})}}function $c(n){return n.length===1?n[0]:n}var _i=function(n){try{return n.only([[]]),_i=function(){return[[]]},[[]]}catch{return _i=function(){return br},br}};function Co(n){return n==null?function(){}:typeof n=="string"?ef(n):function(r){return Q(r,n)}}function ef(n){var r=n.split(".");return r.length===1?function(o){return o[n]}:function(o){return Q(o,n)}}function hu(n){return[].slice.call(n)}var tf=0;function wi(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function nf(n,r,o){function u(S,R){var X=hu(S.objectStoreNames);return{schema:{name:S.name,tables:X.map(function(A){return R.objectStore(A)}).map(function(A){var L=A.keyPath,O=A.autoIncrement,B=v(L),j=L==null,z={},V={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j,compound:B,keyPath:L,autoIncrement:O,unique:!0,extractKey:Co(L)},indexes:hu(A.indexNames).map(function(H){return A.index(H)}).map(function(H){var te=H.name,oe=H.unique,re=H.multiEntry,Ee=H.keyPath,Ne=v(Ee),se={name:te,compound:Ne,keyPath:Ee,unique:oe,multiEntry:re,extractKey:Co(Ee)};return z[wi(Ee)]=se,se}),getIndexByKeyPath:function(H){return z[wi(H)]}};return z[":id"]=V.primaryKey,L!=null&&(z[wi(L)]=V.primaryKey),V})},hasGetAll:X.length>0&&"getAll"in R.objectStore(X[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function c(S){if(S.type===3)return null;if(S.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var R=S.lower,X=S.upper,A=S.lowerOpen,L=S.upperOpen,O=R===void 0?X===void 0?null:r.upperBound(X,!!L):X===void 0?r.lowerBound(R,!!A):r.bound(R,X,!!A,!!L);return O}function d(S){var R=S.name;function X(O){var B=O.trans,j=O.type,z=O.keys,V=O.values,H=O.range;return new Promise(function(te,oe){te=lt(te);var re=B.objectStore(R),Ee=re.keyPath==null,Ne=j==="put"||j==="add";if(!Ne&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var se=(z||V||{length:1}).length;if(z&&V&&z.length!==V.length)throw new Error("Given keys array must have same length as given values array.");if(se===0)return te({numFailures:0,failures:{},results:[],lastResult:void 0});var Me,xe=[],Ye=[],ge=0,pt=function(An){++ge,yi(An)};if(j==="deleteRange"){if(H.type===4)return te({numFailures:ge,failures:Ye,results:[],lastResult:void 0});H.type===3?xe.push(Me=re.clear()):xe.push(Me=re.delete(c(H)))}else{var Kt=Ne?Ee?[V,z]:[V,null]:[z,null],Sn=Kt[0],Yt=Kt[1];if(Ne)for(var fn=0;fn<se;++fn)xe.push(Me=Yt&&Yt[fn]!==void 0?re[j](Sn[fn],Yt[fn]):re[j](Sn[fn])),Me.onerror=pt;else for(var fn=0;fn<se;++fn)xe.push(Me=re[j](Sn[fn])),Me.onerror=pt}var or=function(An){var ki=An.target.result;xe.forEach(function(gn,ba){return gn.error!=null&&(Ye[ba]=gn.error)}),te({numFailures:ge,failures:Ye,results:j==="delete"?z:xe.map(function(gn){return gn.result}),lastResult:ki})};Me.onerror=function(An){pt(An),or(An)},Me.onsuccess=or})}function A(O){var B=O.trans,j=O.values,z=O.query,V=O.reverse,H=O.unique;return new Promise(function(te,oe){te=lt(te);var re=z.index,Ee=z.range,Ne=B.objectStore(R),se=re.isPrimaryKey?Ne:Ne.index(re.name),Me=V?H?"prevunique":"prev":H?"nextunique":"next",xe=j||!("openKeyCursor"in se)?se.openCursor(c(Ee),Me):se.openKeyCursor(c(Ee),Me);xe.onerror=Tn(oe),xe.onsuccess=lt(function(Ye){var ge=xe.result;if(!ge){te(null);return}ge.___id=++tf,ge.done=!1;var pt=ge.continue.bind(ge),Kt=ge.continuePrimaryKey;Kt&&(Kt=Kt.bind(ge));var Sn=ge.advance.bind(ge),Yt=function(){throw new Error("Cursor not started")},fn=function(){throw new Error("Cursor not stopped")};ge.trans=B,ge.stop=ge.continue=ge.continuePrimaryKey=ge.advance=Yt,ge.fail=lt(oe),ge.next=function(){var or=this,An=1;return this.start(function(){return An--?or.continue():or.stop()}).then(function(){return or})},ge.start=function(or){var An=new Promise(function(gn,ba){gn=lt(gn),xe.onerror=Tn(ba),ge.fail=ba,ge.stop=function(Vf){ge.stop=ge.continue=ge.continuePrimaryKey=ge.advance=fn,gn(Vf)}}),ki=function(){if(xe.result)try{or()}catch(gn){ge.fail(gn)}else ge.done=!0,ge.start=function(){throw new Error("Cursor behind last entry")},ge.stop()};return xe.onsuccess=lt(function(gn){xe.onsuccess=ki,ki()}),ge.continue=pt,ge.continuePrimaryKey=Kt,ge.advance=Sn,ki(),An},te(ge)},oe)})}function L(O){return function(B){return new Promise(function(j,z){j=lt(j);var V=B.trans,H=B.values,te=B.limit,oe=B.query,re=te===1/0?void 0:te,Ee=oe.index,Ne=oe.range,se=V.objectStore(R),Me=Ee.isPrimaryKey?se:se.index(Ee.name),xe=c(Ne);if(te===0)return j({result:[]});if(O){var Ye=H?Me.getAll(xe,re):Me.getAllKeys(xe,re);Ye.onsuccess=function(Sn){return j({result:Sn.target.result})},Ye.onerror=Tn(z)}else{var ge=0,pt=H||!("openKeyCursor"in Me)?Me.openCursor(xe):Me.openKeyCursor(xe),Kt=[];pt.onsuccess=function(Sn){var Yt=pt.result;if(!Yt)return j({result:Kt});if(Kt.push(H?Yt.value:Yt.primaryKey),++ge===te)return j({result:Kt});Yt.continue()},pt.onerror=Tn(z)}})}}return{name:R,schema:S,mutate:X,getMany:function(O){var B=O.trans,j=O.keys;return new Promise(function(z,V){z=lt(z);for(var H=B.objectStore(R),te=j.length,oe=new Array(te),re=0,Ee=0,Ne,se=function(ge){var pt=ge.target;(oe[pt._pos]=pt.result)!=null,++Ee===re&&z(oe)},Me=Tn(V),xe=0;xe<te;++xe){var Ye=j[xe];Ye!=null&&(Ne=H.get(j[xe]),Ne._pos=xe,Ne.onsuccess=se,Ne.onerror=Me,++re)}re===0&&z(oe)})},get:function(O){var B=O.trans,j=O.key;return new Promise(function(z,V){z=lt(z);var H=B.objectStore(R),te=H.get(j);te.onsuccess=function(oe){return z(oe.target.result)},te.onerror=Tn(V)})},query:L(b),openCursor:A,count:function(O){var B=O.query,j=O.trans,z=B.index,V=B.range;return new Promise(function(H,te){var oe=j.objectStore(R),re=z.isPrimaryKey?oe:oe.index(z.name),Ee=c(V),Ne=Ee?re.count(Ee):re.count();Ne.onsuccess=lt(function(se){return H(se.target.result)}),Ne.onerror=Tn(te)})}}}var p=u(n,o),y=p.schema,b=p.hasGetAll,T=y.tables.map(function(S){return d(S)}),I={};return T.forEach(function(S){return I[S.name]=S}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(S){var R=I[S];if(!R)throw new Error("Table '".concat(S,"' not found"));return I[S]},MIN_KEY:-1/0,MAX_KEY:_i(r),schema:y}}function rf(n,r){return r.reduce(function(o,u){var c=u.create;return s(s({},o),c(o))},n)}function af(n,r,o,u){var c=o.IDBKeyRange;o.indexedDB;var d=rf(nf(r,c,u),n.dbcore);return{dbcore:d}}function ua(n,r){var o=r.db,u=af(n._middlewares,o,n._deps,r);n.core=u.dbcore,n.tables.forEach(function(c){var d=c.name;n.core.schema.tables.some(function(p){return p.name===d})&&(c.core=n.core.table(d),n[d]instanceof n.Table&&(n[d].core=c.core))})}function la(n,r,o,u){o.forEach(function(c){var d=u[c];r.forEach(function(p){var y=M(p,c);(!y||"value"in y&&y.value===void 0)&&(p===n.Transaction.prototype||p instanceof n.Transaction?P(p,c,{get:function(){return this.table(c)},set:function(b){D(this,c,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):p[c]=new n.Table(c,d))})})}function Po(n,r){r.forEach(function(o){for(var u in o)o[u]instanceof n.Table&&delete o[u]})}function of(n,r){return n._cfg.version-r._cfg.version}function sf(n,r,o,u){var c=n._dbSchema;o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Do("$meta",pu("")[0],[]),n._storeNames.push("$meta"));var d=n._createTransaction("readwrite",n._storeNames,c);d.create(o),d._completion.catch(u);var p=d._reject.bind(d),y=de.transless||de;$n(function(){if(de.trans=d,de.transless=y,r===0)h(c).forEach(function(b){Oo(o,b,c[b].primKey,c[b].indexes)}),ua(n,o),ie.follow(function(){return n.on.populate.fire(d)}).catch(p);else return ua(n,o),lf(n,d,r).then(function(b){return cf(n,b,d,o)}).catch(p)})}function uf(n,r){vu(n._dbSchema,r),r.db.version%10===0&&!r.objectStoreNames.contains("$meta")&&r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var o=fa(n,n.idbdb,r);da(n,n._dbSchema,r);for(var u=Lo(o,n._dbSchema),c=function(T){if(T.change.length||T.recreate)return console.warn("Unable to patch indexes of table ".concat(T.name," because it has changes on the type of index or primary key.")),{value:void 0};var I=r.objectStore(T.name);T.add.forEach(function(S){ke&&console.debug("Dexie upgrade patch: Creating missing index ".concat(T.name,".").concat(S.src)),ca(I,S)})},d=0,p=u.change;d<p.length;d++){var y=p[d],b=c(y);if(typeof b=="object")return b.value}}function lf(n,r,o){return r.storeNames.includes("$meta")?r.table("$meta").get("version").then(function(u){return u??o}):ie.resolve(o)}function cf(n,r,o,u){var c=[],d=n._versions,p=n._dbSchema=fa(n,n.idbdb,u),y=d.filter(function(T){return T._cfg.version>=r});if(y.length===0)return ie.resolve();y.forEach(function(T){c.push(function(){var I=p,S=T._cfg.dbschema;da(n,I,u),da(n,S,u),p=n._dbSchema=S;var R=Lo(I,S);R.add.forEach(function(j){Oo(u,j[0],j[1].primKey,j[1].indexes)}),R.change.forEach(function(j){if(j.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var z=u.objectStore(j.name);j.add.forEach(function(V){return ca(z,V)}),j.change.forEach(function(V){z.deleteIndex(V.name),ca(z,V)}),j.del.forEach(function(V){return z.deleteIndex(V)})});var X=T._cfg.contentUpgrade;if(X&&T._cfg.version>r){ua(n,u),o._memoizedTables={};var A=he(S);R.del.forEach(function(j){A[j]=I[j]}),Po(n,[n.Transaction.prototype]),la(n,[n.Transaction.prototype],h(A),A),o.schema=A;var L=Je(X);L&&Vr();var O,B=ie.follow(function(){if(O=X(o),O&&L){var j=er.bind(null,null);O.then(j,j)}});return O&&typeof O.then=="function"?ie.resolve(O):B.then(function(){return O})}}),c.push(function(I){var S=T._cfg.dbschema;ff(S,I),Po(n,[n.Transaction.prototype]),la(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),o.schema=n._dbSchema}),c.push(function(I){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===T._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(S){return S!=="$meta"})):I.objectStore("$meta").put(T._cfg.version,"version"))})});function b(){return c.length?ie.resolve(c.shift()(o.idbtrans)).then(b):ie.resolve()}return b().then(function(){vu(p,u)})}function Lo(n,r){var o={del:[],add:[],change:[]},u;for(u in n)r[u]||o.del.push(u);for(u in r){var c=n[u],d=r[u];if(!c)o.add.push([u,d]);else{var p={name:u,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)p.recreate=!0,o.change.push(p);else{var y=c.idxByName,b=d.idxByName,T=void 0;for(T in y)b[T]||p.del.push(T);for(T in b){var I=y[T],S=b[T];I?I.src!==S.src&&p.change.push(S):p.add.push(S)}(p.del.length>0||p.add.length>0||p.change.length>0)&&o.change.push(p)}}}return o}function Oo(n,r,o,u){var c=n.db.createObjectStore(r,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return u.forEach(function(d){return ca(c,d)}),c}function vu(n,r){h(n).forEach(function(o){r.db.objectStoreNames.contains(o)||(ke&&console.debug("Dexie: Creating missing table",o),Oo(r,o,n[o].primKey,n[o].indexes))})}function ff(n,r){[].slice.call(r.db.objectStoreNames).forEach(function(o){return n[o]==null&&r.db.deleteObjectStore(o)})}function ca(n,r){n.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function fa(n,r,o){var u={},c=N(r.objectStoreNames,0);return c.forEach(function(d){for(var p=o.objectStore(d),y=p.keyPath,b=Io(du(y),y||"",!0,!1,!!p.autoIncrement,y&&typeof y!="string",!0),T=[],I=0;I<p.indexNames.length;++I){var S=p.index(p.indexNames[I]);y=S.keyPath;var R=Io(S.name,y,!!S.unique,!!S.multiEntry,!1,y&&typeof y!="string",!1);T.push(R)}u[d]=Do(d,b,T)}),u}function df(n,r,o){n.verno=r.version/10;var u=n._dbSchema=fa(n,r,o);n._storeNames=N(r.objectStoreNames,0),la(n,[n._allTables],h(u),u)}function hf(n,r){var o=fa(n,n.idbdb,r),u=Lo(o,n._dbSchema);return!(u.add.length||u.change.some(function(c){return c.add.length||c.change.length}))}function da(n,r,o){for(var u=o.db.objectStoreNames,c=0;c<u.length;++c){var d=u[c],p=o.objectStore(d);n._hasGetAll="getAll"in p;for(var y=0;y<p.indexNames.length;++y){var b=p.indexNames[y],T=p.index(b).keyPath,I=typeof T=="string"?T:"["+N(T).join("+")+"]";if(r[d]){var S=r[d].idxByName[I];S&&(S.name=b,delete r[d].idxByName[I],r[d].idxByName[b]=S)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function pu(n){return n.split(",").map(function(r,o){var u,c=r.split(":"),d=(u=c[1])===null||u===void 0?void 0:u.trim();r=c[0].trim();var p=r.replace(/([&*]|\+\+)/g,""),y=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return Io(p,y||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),v(y),o===0,d)})}var vf=(function(){function n(){}return n.prototype._createTableSchema=function(r,o,u){return Do(r,o,u)},n.prototype._parseIndexSyntax=function(r){return pu(r)},n.prototype._parseStoresSpec=function(r,o){var u=this;h(r).forEach(function(c){if(r[c]!==null){var d=u._parseIndexSyntax(r[c]),p=d.shift();if(!p)throw new ue.Schema("Invalid schema for table "+c+": "+r[c]);if(p.unique=!0,p.multi)throw new ue.Schema("Primary key cannot be multiEntry*");d.forEach(function(b){if(b.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")});var y=u._createTableSchema(c,p,d);o[c]=y}})},n.prototype.stores=function(r){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,r):r;var u=o._versions,c={},d={};return u.forEach(function(p){g(c,p._cfg.storesSource),d=p._cfg.dbschema={},p._parseStoresSpec(c,d)}),o._dbSchema=d,Po(o,[o._allTables,o,o.Transaction.prototype]),la(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],h(d),d),o._storeNames=h(d),this},n.prototype.upgrade=function(r){return this._cfg.contentUpgrade=Xe(this._cfg.contentUpgrade||He,r),this},n})();function pf(n){return mi(vf.prototype,function(o){this.db=n,this._cfg={version:o,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Mo(n,r){var o=n._dbNamesDB;return o||(o=n._dbNamesDB=new Bn(na,{addons:[],indexedDB:n,IDBKeyRange:r}),o.version(1).stores({dbnames:"name"})),o.table("dbnames")}function Ro(n){return n&&typeof n.databases=="function"}function gf(n){var r=n.indexedDB,o=n.IDBKeyRange;return Ro(r)?Promise.resolve(r.databases()).then(function(u){return u.map(function(c){return c.name}).filter(function(c){return c!==na})}):Mo(r,o).toCollection().primaryKeys()}function mf(n,r){var o=n.indexedDB,u=n.IDBKeyRange;!Ro(o)&&r!==na&&Mo(o,u).put({name:r}).catch(He)}function yf(n,r){var o=n.indexedDB,u=n.IDBKeyRange;!Ro(o)&&r!==na&&Mo(o,u).delete(r).catch(He)}function Ko(n){return $n(function(){return de.letThrough=!0,n()})}function bf(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(o){var u=function(){return indexedDB.databases().finally(o)};r=setInterval(u,100),u()}).finally(function(){return clearInterval(r)})}var Bo;function Fo(n){return!("from"in n)}var Rt=function(n,r){if(this)g(this,arguments.length?{d:1,from:n,to:arguments.length>1?r:n}:{d:0});else{var o=new Rt;return n&&"d"in n&&g(o,n),o}};k(Rt.prototype,(Bo={add:function(n){return xi(this,n),this},addKey:function(n){return Ei(this,n,n),this},addKeys:function(n){var r=this;return n.forEach(function(o){return Ei(r,o,o)}),this},hasKey:function(n){var r=ha(this).next(n).value;return r&&ze(r.from,n)<=0&&ze(r.to,n)>=0}},Bo[G]=function(){return ha(this)},Bo));function Ei(n,r,o){var u=ze(r,o);if(!isNaN(u)){if(u>0)throw RangeError();if(Fo(n))return g(n,{from:r,to:o,d:1});var c=n.l,d=n.r;if(ze(o,n.from)<0)return c?Ei(c,r,o):n.l={from:r,to:o,d:1,l:null,r:null},mu(n);if(ze(r,n.to)>0)return d?Ei(d,r,o):n.r={from:r,to:o,d:1,l:null,r:null},mu(n);ze(r,n.from)<0&&(n.from=r,n.l=null,n.d=d?d.d+1:1),ze(o,n.to)>0&&(n.to=o,n.r=null,n.d=n.l?n.l.d+1:1);var p=!n.r;c&&!n.l&&xi(n,c),d&&p&&xi(n,d)}}function xi(n,r){function o(u,c){var d=c.from,p=c.to,y=c.l,b=c.r;Ei(u,d,p),y&&o(u,y),b&&o(u,b)}Fo(r)||o(n,r)}function gu(n,r){var o=ha(r),u=o.next();if(u.done)return!1;for(var c=u.value,d=ha(n),p=d.next(c.from),y=p.value;!u.done&&!p.done;){if(ze(y.from,c.to)<=0&&ze(y.to,c.from)>=0)return!0;ze(c.from,y.from)<0?c=(u=o.next(y.from)).value:y=(p=d.next(c.from)).value}return!1}function ha(n){var r=Fo(n)?null:{s:0,n};return{next:function(o){for(var u=arguments.length>0;r;)switch(r.s){case 0:if(r.s=1,u)for(;r.n.l&&ze(o,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!u||ze(o,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function mu(n){var r,o,u=(((r=n.r)===null||r===void 0?void 0:r.d)||0)-(((o=n.l)===null||o===void 0?void 0:o.d)||0),c=u>1?"r":u<-1?"l":"";if(c){var d=c==="r"?"l":"r",p=s({},n),y=n[c];n.from=y.from,n.to=y.to,n[c]=y[c],p[c]=y[d],n[d]=p,p.d=yu(p)}n.d=yu(n)}function yu(n){var r=n.r,o=n.l;return(r?o?Math.max(r.d,o.d):r.d:o?o.d:0)+1}function va(n,r){return h(r).forEach(function(o){n[o]?xi(n[o],r[o]):n[o]=it(r[o])}),n}function No(n,r){return n.all||r.all||Object.keys(n).some(function(o){return r[o]&&gu(r[o],n[o])})}var wr={},Ho={},jo=!1;function pa(n,r){va(Ho,n),jo||(jo=!0,setTimeout(function(){jo=!1;var o=Ho;Ho={},zo(o,!1)},0))}function zo(n,r){r===void 0&&(r=!1);var o=new Set;if(n.all)for(var u=0,c=Object.values(wr);u<c.length;u++){var d=c[u];bu(d,n,o,r)}else for(var p in n){var y=/^idb\:\/\/(.*)\/(.*)\//.exec(p);if(y){var b=y[1],T=y[2],d=wr["idb://".concat(b,"/").concat(T)];d&&bu(d,n,o,r)}}o.forEach(function(I){return I()})}function bu(n,r,o,u){for(var c=[],d=0,p=Object.entries(n.queries.query);d<p.length;d++){for(var y=p[d],b=y[0],T=y[1],I=[],S=0,R=T;S<R.length;S++){var X=R[S];No(r,X.obsSet)?X.subscribers.forEach(function(B){return o.add(B)}):u&&I.push(X)}u&&c.push([b,I])}if(u)for(var A=0,L=c;A<L.length;A++){var O=L[A],b=O[0],I=O[1];n.queries.query[b]=I}}function _f(n){var r=n._state,o=n._deps.indexedDB;if(r.isBeingOpened||n.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?yt(r.dbOpenError):n});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var u=r.openCanceller,c=Math.round(n.verno*10),d=!1;function p(){if(r.openCanceller!==u)throw new ue.DatabaseClosed("db.open() was cancelled")}var y=r.dbReadyResolve,b=null,T=!1,I=function(){return new ie(function(S,R){if(p(),!o)throw new ue.MissingAPI;var X=n.name,A=r.autoSchema||!c?o.open(X):o.open(X,c);if(!A)throw new ue.MissingAPI;A.onerror=Tn(R),A.onblocked=lt(n._fireOnBlocked),A.onupgradeneeded=lt(function(L){if(b=A.transaction,r.autoSchema&&!n._options.allowEmptyDB){A.onerror=yi,b.abort(),A.result.close();var O=o.deleteDatabase(X);O.onsuccess=O.onerror=lt(function(){R(new ue.NoSuchDatabase("Database ".concat(X," doesnt exist")))})}else{b.onerror=Tn(R);var B=L.oldVersion>Math.pow(2,62)?0:L.oldVersion;T=B<1,n.idbdb=A.result,d&&uf(n,b),sf(n,B/10,b,R)}},R),A.onsuccess=lt(function(){b=null;var L=n.idbdb=A.result,O=N(L.objectStoreNames);if(O.length>0)try{var B=L.transaction($c(O),"readonly");if(r.autoSchema)df(n,L,B);else if(da(n,n._dbSchema,B),!hf(n,B)&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),L.close(),c=L.version+1,d=!0,S(I());ua(n,B)}catch{}Yr.push(n),L.onversionchange=lt(function(j){r.vcFired=!0,n.on("versionchange").fire(j)}),L.onclose=lt(function(){n.close({disableAutoOpen:!1})}),T&&mf(n._deps,X),S()},R)}).catch(function(S){switch(S?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),I();break;case"VersionError":if(c>0)return c=0,I();break}return ie.reject(S)})};return ie.race([u,(typeof navigator>"u"?ie.resolve():bf()).then(I)]).then(function(){return p(),r.onReadyBeingFired=[],ie.resolve(Ko(function(){return n.on.ready.fire(n.vip)})).then(function S(){if(r.onReadyBeingFired.length>0){var R=r.onReadyBeingFired.reduce(Xe,He);return r.onReadyBeingFired=[],ie.resolve(Ko(function(){return R(n.vip)})).then(S)}})}).finally(function(){r.openCanceller===u&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(S){r.dbOpenError=S;try{b&&b.abort()}catch{}return u===r.openCanceller&&n._close(),yt(S)}).finally(function(){r.openComplete=!0,y()}).then(function(){if(T){var S={};n.tables.forEach(function(R){R.schema.indexes.forEach(function(X){X.name&&(S["idb://".concat(n.name,"/").concat(R.name,"/").concat(X.name)]=new Rt(-1/0,[[[]]]))}),S["idb://".concat(n.name,"/").concat(R.name,"/")]=S["idb://".concat(n.name,"/").concat(R.name,"/:dels")]=new Rt(-1/0,[[[]]])}),rr(bi).fire(S),zo(S,!0)}return n})}function Uo(n){var r=function(p){return n.next(p)},o=function(p){return n.throw(p)},u=d(r),c=d(o);function d(p){return function(y){var b=p(y),T=b.value;return b.done?T:!T||typeof T.then!="function"?v(T)?Promise.all(T).then(u,c):u(T):T.then(u,c)}}return d(r)()}function wf(n,r,o){var u=arguments.length;if(u<2)throw new ue.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];o=c.pop();var d=_e(c);return[n,d,o]}function _u(n,r,o,u,c){return ie.resolve().then(function(){var d=de.transless||de,p=n._createTransaction(r,o,n._dbSchema,u);p.explicit=!0;var y={trans:p,transless:d};if(u)p.idbtrans=u.idbtrans;else try{p.create(),p.idbtrans._explicit=!0,n._state.PR1398_maxLoop=3}catch(S){return S.name===It.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return _u(n,r,o,null,c)})):yt(S)}var b=Je(c);b&&Vr();var T,I=ie.follow(function(){if(T=c.call(p,p),T)if(b){var S=er.bind(null,null);T.then(S,S)}else typeof T.next=="function"&&typeof T.throw=="function"&&(T=Uo(T))},y);return(T&&typeof T.then=="function"?ie.resolve(T).then(function(S){return p.active?S:yt(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):I.then(function(){return T})).then(function(S){return u&&p._resolve(),p._completion.then(function(){return S})}).catch(function(S){return p._reject(S),yt(S)})})}function ga(n,r,o){for(var u=v(n)?n.slice():[n],c=0;c<o;++c)u.push(r);return u}function Ef(n){return s(s({},n),{table:function(r){var o=n.table(r),u=o.schema,c={},d=[];function p(L,O,B){var j=wi(L),z=c[j]=c[j]||[],V=L==null?0:typeof L=="string"?1:L.length,H=O>0,te=s(s({},B),{name:H?"".concat(j,"(virtual-from:").concat(B.name,")"):B.name,lowLevelIndex:B,isVirtual:H,keyTail:O,keyLength:V,extractKey:Co(L),unique:!H&&B.unique});if(z.push(te),te.isPrimaryKey||d.push(te),V>1){var oe=V===2?L[0]:L.slice(0,V-1);p(oe,O+1,B)}return z.sort(function(re,Ee){return re.keyTail-Ee.keyTail}),te}var y=p(u.primaryKey.keyPath,0,u.primaryKey);c[":id"]=[y];for(var b=0,T=u.indexes;b<T.length;b++){var I=T[b];p(I.keyPath,0,I)}function S(L){var O=c[wi(L)];return O&&O[0]}function R(L,O){return{type:L.type===1?2:L.type,lower:ga(L.lower,L.lowerOpen?n.MAX_KEY:n.MIN_KEY,O),lowerOpen:!0,upper:ga(L.upper,L.upperOpen?n.MIN_KEY:n.MAX_KEY,O),upperOpen:!0}}function X(L){var O=L.query.index;return O.isVirtual?s(s({},L),{query:{index:O.lowLevelIndex,range:R(L.query.range,O.keyTail)}}):L}var A=s(s({},o),{schema:s(s({},u),{primaryKey:y,indexes:d,getIndexByKeyPath:S}),count:function(L){return o.count(X(L))},query:function(L){return o.query(X(L))},openCursor:function(L){var O=L.query.index,B=O.keyTail,j=O.isVirtual,z=O.keyLength;if(!j)return o.openCursor(L);function V(H){function te(re){re!=null?H.continue(ga(re,L.reverse?n.MAX_KEY:n.MIN_KEY,B)):L.unique?H.continue(H.key.slice(0,z).concat(L.reverse?n.MIN_KEY:n.MAX_KEY,B)):H.continue()}var oe=Object.create(H,{continue:{value:te},continuePrimaryKey:{value:function(re,Ee){H.continuePrimaryKey(ga(re,n.MAX_KEY,B),Ee)}},primaryKey:{get:function(){return H.primaryKey}},key:{get:function(){var re=H.key;return z===1?re[0]:re.slice(0,z)}},value:{get:function(){return H.value}}});return oe}return o.openCursor(X(L)).then(function(H){return H&&V(H)})}});return A}})}var xf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ef};function Vo(n,r,o,u){return o=o||{},u=u||"",h(n).forEach(function(c){if(!w(r,c))o[u+c]=void 0;else{var d=n[c],p=r[c];if(typeof d=="object"&&typeof p=="object"&&d&&p){var y=Ge(d),b=Ge(p);y!==b?o[u+c]=r[c]:y==="Object"?Vo(d,p,o,u+c+"."):d!==p&&(o[u+c]=r[c])}else d!==p&&(o[u+c]=r[c])}}),h(r).forEach(function(c){w(n,c)||(o[u+c]=r[c])}),o}function Yo(n,r){return r.type==="delete"?r.keys:r.keys||r.values.map(n.extractKey)}var kf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return s(s({},n),{table:function(r){var o=n.table(r),u=o.schema.primaryKey,c=s(s({},o),{mutate:function(d){var p=de.trans,y=p.table(r).hook,b=y.deleting,T=y.creating,I=y.updating;switch(d.type){case"add":if(T.fire===He)break;return p._promise("readwrite",function(){return S(d)},!0);case"put":if(T.fire===He&&I.fire===He)break;return p._promise("readwrite",function(){return S(d)},!0);case"delete":if(b.fire===He)break;return p._promise("readwrite",function(){return S(d)},!0);case"deleteRange":if(b.fire===He)break;return p._promise("readwrite",function(){return R(d)},!0)}return o.mutate(d);function S(A){var L=de.trans,O=A.keys||Yo(u,A);if(!O)throw new Error("Keys missing");return A=A.type==="add"||A.type==="put"?s(s({},A),{keys:O}):s({},A),A.type!=="delete"&&(A.values=l([],A.values)),A.keys&&(A.keys=l([],A.keys)),Tf(o,A,O).then(function(B){var j=O.map(function(z,V){var H=B[V],te={onerror:null,onsuccess:null};if(A.type==="delete")b.fire.call(te,z,H,L);else if(A.type==="add"||H===void 0){var oe=T.fire.call(te,z,A.values[V],L);z==null&&oe!=null&&(z=oe,A.keys[V]=z,u.outbound||ne(A.values[V],u.keyPath,z))}else{var re=Vo(H,A.values[V]),Ee=I.fire.call(te,re,z,H,L);if(Ee){var Ne=A.values[V];Object.keys(Ee).forEach(function(se){w(Ne,se)?Ne[se]=Ee[se]:ne(Ne,se,Ee[se])})}}return te});return o.mutate(A).then(function(z){for(var V=z.failures,H=z.results,te=z.numFailures,oe=z.lastResult,re=0;re<O.length;++re){var Ee=H?H[re]:O[re],Ne=j[re];Ee==null?Ne.onerror&&Ne.onerror(V[re]):Ne.onsuccess&&Ne.onsuccess(A.type==="put"&&B[re]?A.values[re]:Ee)}return{failures:V,results:H,numFailures:te,lastResult:oe}}).catch(function(z){return j.forEach(function(V){return V.onerror&&V.onerror(z)}),Promise.reject(z)})})}function R(A){return X(A.trans,A.range,1e4)}function X(A,L,O){return o.query({trans:A,values:!1,query:{index:u,range:L},limit:O}).then(function(B){var j=B.result;return S({type:"delete",keys:j,trans:A}).then(function(z){return z.numFailures>0?Promise.reject(z.failures[0]):j.length<O?{failures:[],numFailures:0,lastResult:void 0}:X(A,s(s({},L),{lower:j[j.length-1],lowerOpen:!0}),O)})})}}});return c}})}};function Tf(n,r,o){return r.type==="add"?Promise.resolve([]):n.getMany({trans:r.trans,keys:o,cache:"immutable"})}function wu(n,r,o){try{if(!r||r.keys.length<n.length)return null;for(var u=[],c=0,d=0;c<r.keys.length&&d<n.length;++c)ze(r.keys[c],n[d])===0&&(u.push(o?Ae(r.values[c]):r.values[c]),++d);return u.length===n.length?u:null}catch{return null}}var Sf={stack:"dbcore",level:-1,create:function(n){return{table:function(r){var o=n.table(r);return s(s({},o),{getMany:function(u){if(!u.cache)return o.getMany(u);var c=wu(u.keys,u.trans._cache,u.cache==="clone");return c?ie.resolve(c):o.getMany(u).then(function(d){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?Ae(d):d},d})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),o.mutate(u)}})}}}};function Eu(n,r){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function xu(n,r){switch(n){case"query":return r.values&&!r.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Af={stack:"dbcore",level:0,name:"Observability",create:function(n){var r=n.schema.name,o=new Rt(n.MIN_KEY,n.MAX_KEY);return s(s({},n),{transaction:function(u,c,d){if(de.subscr&&c!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(de.querier));return n.transaction(u,c,d)},table:function(u){var c=n.table(u),d=c.schema,p=d.primaryKey,y=d.indexes,b=p.extractKey,T=p.outbound,I=p.autoIncrement&&y.filter(function(A){return A.compound&&A.keyPath.includes(p.keyPath)}),S=s(s({},c),{mutate:function(A){var L,O,B=A.trans,j=A.mutatedParts||(A.mutatedParts={}),z=function(xe){var Ye="idb://".concat(r,"/").concat(u,"/").concat(xe);return j[Ye]||(j[Ye]=new Rt)},V=z(""),H=z(":dels"),te=A.type,oe=A.type==="deleteRange"?[A.range]:A.type==="delete"?[A.keys]:A.values.length<50?[Yo(p,A).filter(function(xe){return xe}),A.values]:[],re=oe[0],Ee=oe[1],Ne=A.trans._cache;if(v(re)){V.addKeys(re);var se=te==="delete"||re.length===Ee.length?wu(re,Ne):null;se||H.addKeys(re),(se||Ee)&&If(z,d,se,Ee)}else if(re){var Me={from:(L=re.lower)!==null&&L!==void 0?L:n.MIN_KEY,to:(O=re.upper)!==null&&O!==void 0?O:n.MAX_KEY};H.add(Me),V.add(Me)}else V.add(o),H.add(o),d.indexes.forEach(function(xe){return z(xe.name).add(o)});return c.mutate(A).then(function(xe){return re&&(A.type==="add"||A.type==="put")&&(V.addKeys(xe.results),I&&I.forEach(function(Ye){for(var ge=A.values.map(function(Yt){return Ye.extractKey(Yt)}),pt=Ye.keyPath.findIndex(function(Yt){return Yt===p.keyPath}),Kt=0,Sn=xe.results.length;Kt<Sn;++Kt)ge[Kt][pt]=xe.results[Kt];z(Ye.name).addKeys(ge)})),B.mutatedParts=va(B.mutatedParts||{},j),xe})}}),R=function(A){var L,O,B=A.query,j=B.index,z=B.range;return[j,new Rt((L=z.lower)!==null&&L!==void 0?L:n.MIN_KEY,(O=z.upper)!==null&&O!==void 0?O:n.MAX_KEY)]},X={get:function(A){return[p,new Rt(A.key)]},getMany:function(A){return[p,new Rt().addKeys(A.keys)]},count:R,query:R,openCursor:R};return h(X).forEach(function(A){S[A]=function(L){var O=de.subscr,B=!!O,j=Eu(de,c)&&xu(A,L),z=j?L.obsSet={}:O;if(B){var V=function(se){var Me="idb://".concat(r,"/").concat(u,"/").concat(se);return z[Me]||(z[Me]=new Rt)},H=V(""),te=V(":dels"),oe=X[A](L),re=oe[0],Ee=oe[1];if(A==="query"&&re.isPrimaryKey&&!L.values?te.add(Ee):V(re.name||"").add(Ee),!re.isPrimaryKey)if(A==="count")te.add(o);else{var Ne=A==="query"&&T&&L.values&&c.query(s(s({},L),{values:!1}));return c[A].apply(this,arguments).then(function(se){if(A==="query"){if(T&&L.values)return Ne.then(function(ge){var pt=ge.result;return H.addKeys(pt),se});var Me=L.values?se.result.map(b):se.result;L.values?H.addKeys(Me):te.addKeys(Me)}else if(A==="openCursor"){var xe=se,Ye=L.values;return xe&&Object.create(xe,{key:{get:function(){return te.addKey(xe.primaryKey),xe.key}},primaryKey:{get:function(){var ge=xe.primaryKey;return te.addKey(ge),ge}},value:{get:function(){return Ye&&H.addKey(xe.primaryKey),xe.value}}})}return se})}}return c[A].apply(this,arguments)}}),S}})}};function If(n,r,o,u){function c(d){var p=n(d.name||"");function y(T){return T!=null?d.extractKey(T):null}var b=function(T){return d.multiEntry&&v(T)?T.forEach(function(I){return p.addKey(I)}):p.addKey(T)};(o||u).forEach(function(T,I){var S=o&&y(o[I]),R=u&&y(u[I]);ze(S,R)!==0&&(S!=null&&b(S),R!=null&&b(R))})}r.indexes.forEach(c)}function ku(n,r,o){if(o.numFailures===0)return r;if(r.type==="deleteRange")return null;var u=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;if(o.numFailures===u)return null;var c=s({},r);return v(c.keys)&&(c.keys=c.keys.filter(function(d,p){return!(p in o.failures)})),"values"in c&&v(c.values)&&(c.values=c.values.filter(function(d,p){return!(p in o.failures)})),c}function Df(n,r){return r.lower===void 0?!0:r.lowerOpen?ze(n,r.lower)>0:ze(n,r.lower)>=0}function Cf(n,r){return r.upper===void 0?!0:r.upperOpen?ze(n,r.upper)<0:ze(n,r.upper)<=0}function Wo(n,r){return Df(n,r)&&Cf(n,r)}function Tu(n,r,o,u,c,d){if(!o||o.length===0)return n;var p=r.query.index,y=p.multiEntry,b=r.query.range,T=u.schema.primaryKey,I=T.extractKey,S=p.extractKey,R=(p.lowLevelIndex||p).extractKey,X=o.reduce(function(A,L){var O=A,B=[];if(L.type==="add"||L.type==="put")for(var j=new Rt,z=L.values.length-1;z>=0;--z){var V=L.values[z],H=I(V);if(!j.hasKey(H)){var te=S(V);(y&&v(te)?te.some(function(se){return Wo(se,b)}):Wo(te,b))&&(j.addKey(H),B.push(V))}}switch(L.type){case"add":{var oe=new Rt().addKeys(r.values?A.map(function(se){return I(se)}):A);O=A.concat(r.values?B.filter(function(se){var Me=I(se);return oe.hasKey(Me)?!1:(oe.addKey(Me),!0)}):B.map(function(se){return I(se)}).filter(function(se){return oe.hasKey(se)?!1:(oe.addKey(se),!0)}));break}case"put":{var re=new Rt().addKeys(L.values.map(function(se){return I(se)}));O=A.filter(function(se){return!re.hasKey(r.values?I(se):se)}).concat(r.values?B:B.map(function(se){return I(se)}));break}case"delete":var Ee=new Rt().addKeys(L.keys);O=A.filter(function(se){return!Ee.hasKey(r.values?I(se):se)});break;case"deleteRange":var Ne=L.range;O=A.filter(function(se){return!Wo(I(se),Ne)});break}return O},n);return X===n?n:(X.sort(function(A,L){return ze(R(A),R(L))||ze(I(A),I(L))}),r.limit&&r.limit<1/0&&(X.length>r.limit?X.length=r.limit:n.length===r.limit&&X.length<r.limit&&(c.dirty=!0)),d?Object.freeze(X):X)}function Su(n,r){return ze(n.lower,r.lower)===0&&ze(n.upper,r.upper)===0&&!!n.lowerOpen==!!r.lowerOpen&&!!n.upperOpen==!!r.upperOpen}function Pf(n,r,o,u){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;var c=ze(n,r);if(c===0){if(o&&u)return 0;if(o)return 1;if(u)return-1}return c}function Lf(n,r,o,u){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;var c=ze(n,r);if(c===0){if(o&&u)return 0;if(o)return-1;if(u)return 1}return c}function Of(n,r){return Pf(n.lower,r.lower,n.lowerOpen,r.lowerOpen)<=0&&Lf(n.upper,r.upper,n.upperOpen,r.upperOpen)>=0}function Mf(n,r,o,u){var c=wr["idb://".concat(n,"/").concat(r)];if(!c)return[];var d=c.queries[o];if(!d)return[null,!1,c,null];var p=u.query?u.query.index.name:null,y=d[p||""];if(!y)return[null,!1,c,null];switch(o){case"query":var b=y.find(function(S){return S.req.limit===u.limit&&S.req.values===u.values&&Su(S.req.query.range,u.query.range)});if(b)return[b,!0,c,y];var T=y.find(function(S){var R="limit"in S.req?S.req.limit:1/0;return R>=u.limit&&(u.values?S.req.values:!0)&&Of(S.req.query.range,u.query.range)});return[T,!1,c,y];case"count":var I=y.find(function(S){return Su(S.req.query.range,u.query.range)});return[I,!!I,c,y]}}function Rf(n,r,o,u){n.subscribers.add(o),u.addEventListener("abort",function(){n.subscribers.delete(o),n.subscribers.size===0&&Kf(n,r)})}function Kf(n,r){setTimeout(function(){n.subscribers.size===0&&fe(r,n)},3e3)}var Bf={stack:"dbcore",level:0,name:"Cache",create:function(n){var r=n.schema.name,o=s(s({},n),{transaction:function(u,c,d){var p=n.transaction(u,c,d);if(c==="readwrite"){var y=new AbortController,b=y.signal,T=function(I){return function(){if(y.abort(),c==="readwrite"){for(var S=new Set,R=0,X=u;R<X.length;R++){var A=X[R],L=wr["idb://".concat(r,"/").concat(A)];if(L){var O=n.table(A),B=L.optimisticOps.filter(function(Ye){return Ye.trans===p});if(p._explicit&&I&&p.mutatedParts)for(var j=0,z=Object.values(L.queries.query);j<z.length;j++)for(var V=z[j],H=0,te=V.slice();H<te.length;H++){var oe=te[H];No(oe.obsSet,p.mutatedParts)&&(fe(V,oe),oe.subscribers.forEach(function(Ye){return S.add(Ye)}))}else if(B.length>0){L.optimisticOps=L.optimisticOps.filter(function(Ye){return Ye.trans!==p});for(var re=0,Ee=Object.values(L.queries.query);re<Ee.length;re++)for(var V=Ee[re],Ne=0,se=V.slice();Ne<se.length;Ne++){var oe=se[Ne];if(oe.res!=null&&p.mutatedParts)if(I&&!oe.dirty){var Me=Object.isFrozen(oe.res),xe=Tu(oe.res,oe.req,B,O,oe,Me);oe.dirty?(fe(V,oe),oe.subscribers.forEach(function(pt){return S.add(pt)})):xe!==oe.res&&(oe.res=xe,oe.promise=ie.resolve({result:xe}))}else oe.dirty&&fe(V,oe),oe.subscribers.forEach(function(pt){return S.add(pt)})}}}}S.forEach(function(Ye){return Ye()})}}};p.addEventListener("abort",T(!1),{signal:b}),p.addEventListener("error",T(!1),{signal:b}),p.addEventListener("complete",T(!0),{signal:b})}return p},table:function(u){var c=n.table(u),d=c.schema.primaryKey,p=s(s({},c),{mutate:function(y){var b=de.trans;if(d.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return c.mutate(y);var T=wr["idb://".concat(r,"/").concat(u)];if(!T)return c.mutate(y);var I=c.mutate(y);return(y.type==="add"||y.type==="put")&&(y.values.length>=50||Yo(d,y).some(function(S){return S==null}))?I.then(function(S){var R=s(s({},y),{values:y.values.map(function(A,L){var O;if(S.failures[L])return A;var B=!((O=d.keyPath)===null||O===void 0)&&O.includes(".")?Ae(A):s({},A);return ne(B,d.keyPath,S.results[L]),B})}),X=ku(T,R,S);T.optimisticOps.push(X),queueMicrotask(function(){return y.mutatedParts&&pa(y.mutatedParts)})}):(T.optimisticOps.push(y),y.mutatedParts&&pa(y.mutatedParts),I.then(function(S){if(S.numFailures>0){fe(T.optimisticOps,y);var R=ku(T,y,S);R&&T.optimisticOps.push(R),y.mutatedParts&&pa(y.mutatedParts)}}),I.catch(function(){fe(T.optimisticOps,y),y.mutatedParts&&pa(y.mutatedParts)})),I},query:function(y){var b;if(!Eu(de,c)||!xu("query",y))return c.query(y);var T=((b=de.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",I=de,S=I.requery,R=I.signal,X=Mf(r,u,"query",y),A=X[0],L=X[1],O=X[2],B=X[3];if(A&&L)A.obsSet=y.obsSet;else{var j=c.query(y).then(function(z){var V=z.result;if(A&&(A.res=V),T){for(var H=0,te=V.length;H<te;++H)Object.freeze(V[H]);Object.freeze(V)}else z.result=Ae(V);return z}).catch(function(z){return B&&A&&fe(B,A),Promise.reject(z)});A={obsSet:y.obsSet,promise:j,subscribers:new Set,type:"query",req:y,dirty:!1},B?B.push(A):(B=[A],O||(O=wr["idb://".concat(r,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),O.queries.query[y.query.index.name||""]=B)}return Rf(A,B,S,R),A.promise.then(function(z){return{result:Tu(z.result,y,O?.optimisticOps,c,A,T)}})}});return p}});return o}};function ma(n,r){return new Proxy(n,{get:function(o,u,c){return u==="db"?r:Reflect.get(o,u,c)}})}var Bn=(function(){function n(r,o){var u=this;this._middlewares={},this.verno=0;var c=n.dependencies;this._options=o=s({addons:n.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange};var d=o.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var p={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};p.dbReadyPromise=new ie(function(b){p.dbReadyResolve=b}),p.openCanceller=new ie(function(b,T){p.cancelOpen=T}),this._state=p,this.name=r,this.on=gi(this,"populate","blocked","versionchange","close",{ready:[Xe,He]}),this.once=function(b,T){var I=function(){for(var S=[],R=0;R<arguments.length;R++)S[R]=arguments[R];u.on(b).unsubscribe(I),T.apply(u,S)};return u.on(b,I)},this.on.ready.subscribe=q(this.on.ready.subscribe,function(b){return function(T,I){n.vip(function(){var S=u._state;if(S.openComplete)S.dbOpenError||ie.resolve().then(T),I&&b(T);else if(S.onReadyBeingFired)S.onReadyBeingFired.push(T),I&&b(T);else{b(T);var R=u;I||b(function X(){R.on.ready.unsubscribe(T),R.on.ready.unsubscribe(X)})}})}}),this.Collection=Vc(this),this.Table=jc(this),this.Transaction=Jc(this),this.Version=pf(this),this.WhereClause=Qc(this),this.on("versionchange",function(b){b.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=_i(o.IDBKeyRange),this._createTransaction=function(b,T,I,S){return new u.Transaction(b,T,I,u._options.chromeTransactionDurability,S)},this._fireOnBlocked=function(b){u.on("blocked").fire(b),Yr.filter(function(T){return T.name===u.name&&T!==u&&!T._state.vcFired}).map(function(T){return T.on("versionchange").fire(b)})},this.use(Sf),this.use(Bf),this.use(Af),this.use(xf),this.use(kf);var y=new Proxy(this,{get:function(b,T,I){if(T==="_vip")return!0;if(T==="table")return function(R){return ma(u.table(R),y)};var S=Reflect.get(b,T,I);return S instanceof ou?ma(S,y):T==="tables"?S.map(function(R){return ma(R,y)}):T==="_createTransaction"?function(){var R=S.apply(this,arguments);return ma(R,y)}:S}});this.vip=y,d.forEach(function(b){return b(u)})}return n.prototype.version=function(r){if(isNaN(r)||r<.1)throw new ue.Type("Given version is not a positive number");if(r=Math.round(r*10)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var o=this._versions,u=o.filter(function(c){return c._cfg.version===r})[0];return u||(u=new this.Version(r),o.push(u),o.sort(of),u.stores({}),this._state.autoSchema=!1,u)},n.prototype._whenReady=function(r){var o=this;return this.idbdb&&(this._state.openComplete||de.letThrough||this._vip)?r():new ie(function(u,c){if(o._state.openComplete)return c(new ue.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen){c(new ue.DatabaseClosed);return}o.open().catch(He)}o._state.dbReadyPromise.then(u,c)}).then(r)},n.prototype.use=function(r){var o=r.stack,u=r.create,c=r.level,d=r.name;d&&this.unuse({stack:o,name:d});var p=this._middlewares[o]||(this._middlewares[o]=[]);return p.push({stack:o,create:u,level:c??10,name:d}),p.sort(function(y,b){return y.level-b.level}),this},n.prototype.unuse=function(r){var o=r.stack,u=r.name,c=r.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return c?d.create!==c:u?d.name!==u:!1})),this},n.prototype.open=function(){var r=this;return yr(Jn,function(){return _f(r)})},n.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,o=Yr.indexOf(this);if(o>=0&&Yr.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new ie(function(u){r.dbReadyResolve=u}),r.openCanceller=new ie(function(u,c){r.cancelOpen=c}))},n.prototype.close=function(r){var o=r===void 0?{disableAutoOpen:!0}:r,u=o.disableAutoOpen,c=this._state;u?(c.isBeingOpened&&c.cancelOpen(new ue.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new ue.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},n.prototype.delete=function(r){var o=this;r===void 0&&(r={disableAutoOpen:!0});var u=arguments.length>0&&typeof arguments[0]!="object",c=this._state;return new ie(function(d,p){var y=function(){o.close(r);var b=o._deps.indexedDB.deleteDatabase(o.name);b.onsuccess=lt(function(){yf(o._deps,o.name),d()}),b.onerror=Tn(p),b.onblocked=o._fireOnBlocked};if(u)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(y):y()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var r=this;return h(this._allTables).map(function(o){return r._allTables[o]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var r=wf.apply(this,arguments);return this._transaction.apply(this,r)},n.prototype._transaction=function(r,o,u){var c=this,d=de.trans;(!d||d.db!==this||r.indexOf("!")!==-1)&&(d=null);var p=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");var y,b;try{if(b=o.map(function(I){var S=I instanceof c.Table?I.name:I;if(typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),r=="r"||r===xo)y=xo;else if(r=="rw"||r==ko)y=ko;else throw new ue.InvalidArgument("Invalid transaction mode: "+r);if(d){if(d.mode===xo&&y===ko)if(p)d=null;else throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d&&b.forEach(function(I){if(d&&d.storeNames.indexOf(I)===-1)if(p)d=null;else throw new ue.SubTransaction("Table "+I+" not included in parent transaction.")}),p&&d&&!d.active&&(d=null)}}catch(I){return d?d._promise(null,function(S,R){R(I)}):yt(I)}var T=_u.bind(null,this,y,b,d,u);return d?d._promise(y,T,"lock"):de.trans?yr(de.transless,function(){return c._whenReady(T)}):this._whenReady(T)},n.prototype.table=function(r){if(!w(this._allTables,r))throw new ue.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},n})(),Ff=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Nf=(function(){function n(r){this._subscribe=r}return n.prototype.subscribe=function(r,o,u){return this._subscribe(!r||typeof r=="function"?{next:r,error:o,complete:u}:r)},n.prototype[Ff]=function(){return this},n})(),ya;try{ya={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{ya={indexedDB:null,IDBKeyRange:null}}function Au(n){var r=!1,o,u=new Nf(function(c){var d=Je(n);function p(B){var j=zr();try{d&&Vr();var z=$n(n,B);return d&&(z=z.finally(er)),z}finally{j&&Ur()}}var y=!1,b,T={},I={},S={get closed(){return y},unsubscribe:function(){y||(y=!0,b&&b.abort(),R&&rr.storagemutated.unsubscribe(L))}};c.start&&c.start(S);var R=!1,X=function(){return _o(O)};function A(){return No(I,T)}var L=function(B){va(T,B),A()&&X()},O=function(){if(!(y||!ya.indexedDB)){T={};var B={};b&&b.abort(),b=new AbortController;var j={subscr:B,signal:b.signal,requery:X,querier:n,trans:null},z=p(j);Promise.resolve(z).then(function(V){r=!0,o=V,!(y||j.signal.aborted)&&(T={},I=B,!ae(I)&&!R&&(rr(bi,L),R=!0),_o(function(){return!y&&c.next&&c.next(V)}))},function(V){r=!1,["DatabaseClosedError","AbortError"].includes(V?.name)||y||_o(function(){y||c.error&&c.error(V)})})}};return setTimeout(X,0),S});return u.hasValue=function(){return r},u.getValue=function(){return o},u}var Er=Bn;k(Er,s(s({},kn),{delete:function(n){var r=new Er(n,{addons:[]});return r.delete()},exists:function(n){return new Er(n,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return gf(Er.dependencies).then(n)}catch{return yt(new ue.MissingAPI)}},defineClass:function(){function n(r){g(this,r)}return n},ignoreTransaction:function(n){return de.trans?yr(de.transless,n):n()},vip:Ko,async:function(n){return function(){try{var r=Uo(n.apply(this,arguments));return!r||typeof r.then!="function"?ie.resolve(r):r}catch(o){return yt(o)}}},spawn:function(n,r,o){try{var u=Uo(n.apply(o,r||[]));return!u||typeof u.then!="function"?ie.resolve(u):u}catch(c){return yt(c)}},currentTransaction:{get:function(){return de.trans||null}},waitFor:function(n,r){var o=ie.resolve(typeof n=="function"?Er.ignoreTransaction(n):n).timeout(r||6e4);return de.trans?de.trans.waitFor(o):o},Promise:ie,debug:{get:function(){return ke},set:function(n){dt(n)}},derive:C,extend:g,props:k,override:q,Events:gi,on:rr,liveQuery:Au,extendObservabilitySet:va,getByKeyPath:Q,setByKeyPath:ne,delByKeyPath:W,shallowClone:he,deepClone:Ae,getObjectDiff:Vo,cmp:ze,asap:Y,minKey:Eo,addons:[],connections:Yr,errnames:It,dependencies:ya,cache:wr,semVer:$s,version:$s.split(".").map(function(n){return parseInt(n)}).reduce(function(n,r,o){return n+r/Math.pow(10,o*2)})})),Er.maxKey=_i(Er.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(rr(bi,function(n){if(!ir){var r;r=new CustomEvent(Ao,{detail:n}),ir=!0,dispatchEvent(r),ir=!1}}),addEventListener(Ao,function(n){var r=n.detail;ir||qo(r)}));function qo(n){var r=ir;try{ir=!0,rr.storagemutated.fire(n),zo(n,!0)}finally{ir=r}}var ir=!1,ar,Go=function(){};typeof BroadcastChannel<"u"&&(Go=function(){ar=new BroadcastChannel(Ao),ar.onmessage=function(n){return n.data&&qo(n.data)}},Go(),typeof ar.unref=="function"&&ar.unref(),rr(bi,function(n){ir||ar.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Bn.disableBfCache&&n.persisted){ke&&console.debug("Dexie: handling persisted pagehide"),ar?.close();for(var r=0,o=Yr;r<o.length;r++){var u=o[r];u.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(n){!Bn.disableBfCache&&n.persisted&&(ke&&console.debug("Dexie: handling persisted pageshow"),Go(),qo({all:new Rt(-1/0,[[]])}))}));function Hf(n){return new pi({add:n})}function jf(n){return new pi({remove:n})}function zf(n,r){return new pi({replacePrefix:[n,r]})}ie.rejectionMapper=Zt,dt(ke);var Uf=Object.freeze({__proto__:null,Dexie:Bn,liveQuery:Au,Entity:nu,cmp:ze,PropModification:pi,replacePrefix:zf,add:Hf,remove:jf,default:Bn,RangeSet:Rt,mergeRanges:xi,rangesOverlap:gu});return s(Bn,Uf,{default:Bn}),Bn}))})(Da)),Da.exports}var Vh=Uh();const ws=jh(Vh),Vu=Symbol.for("Dexie"),Wa=globalThis[Vu]||(globalThis[Vu]=ws);if(ws.semVer!==Wa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ws.semVer} and ${Wa.semVer}`);const{liveQuery:qa,mergeRanges:mg,rangesOverlap:yg,RangeSet:bg,cmp:_g,Entity:wg,PropModification:Eg,replacePrefix:xg,add:kg,remove:Tg,DexieYProvider:Sg}=Wa;function Yu(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function Mn(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Yu(Object(i),!0).forEach(function(a){Yh(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Yu(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Ca(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ca=function(e){return typeof e}:Ca=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(t)}function Yh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Vn(){return Vn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Vn.apply(this,arguments)}function Wh(t,e){if(t==null)return{};var i={},a=Object.keys(t),s,l;for(l=0;l<a.length;l++)s=a[l],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function qh(t,e){if(t==null)return{};var i=Wh(t,e),a,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)a=l[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var Gh="1.15.6";function zn(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Qn=zn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Yi=zn(/Edge/i),Wu=zn(/firefox/i),Mi=zn(/safari/i)&&!zn(/chrome/i)&&!zn(/android/i),Vs=zn(/iP(ad|od|hone)/i),rc=zn(/chrome/i)&&zn(/android/i),ic={capture:!1,passive:!1};function Ue(t,e,i){t.addEventListener(e,i,!Qn&&ic)}function je(t,e,i){t.removeEventListener(e,i,!Qn&&ic)}function Ga(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ac(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function bn(t,e,i,a){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Ga(t,e):Ga(t,e))||a&&t===i)return t;if(t===i)break}while(t=ac(t))}return null}var qu=/\s+/g;function tn(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(qu," ").replace(" "+e+" "," ");t.className=(a+(i?" "+e:"")).replace(qu," ")}}function Se(t,e,i){var a=t&&t.style;if(a){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=i+(typeof i=="string"?"":"px")}}function ni(t,e){var i="";if(typeof t=="string")i=t;else do{var a=Se(t,"transform");a&&a!=="none"&&(i=a+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function oc(t,e,i){if(t){var a=t.getElementsByTagName(e),s=0,l=a.length;if(i)for(;s<l;s++)i(a[s],s);return a}return[]}function Ln(){var t=document.scrollingElement;return t||document.documentElement}function Et(t,e,i,a,s){if(!(!t.getBoundingClientRect&&t!==window)){var l,f,h,v,g,x,_;if(t!==window&&t.parentNode&&t!==Ln()?(l=t.getBoundingClientRect(),f=l.top,h=l.left,v=l.bottom,g=l.right,x=l.height,_=l.width):(f=0,h=0,v=window.innerHeight,g=window.innerWidth,x=window.innerHeight,_=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!Qn))do if(s&&s.getBoundingClientRect&&(Se(s,"transform")!=="none"||i&&Se(s,"position")!=="static")){var w=s.getBoundingClientRect();f-=w.top+parseInt(Se(s,"border-top-width")),h-=w.left+parseInt(Se(s,"border-left-width")),v=f+l.height,g=h+l.width;break}while(s=s.parentNode);if(a&&t!==window){var k=ni(s||t),D=k&&k.a,P=k&&k.d;k&&(f/=P,h/=D,_/=D,x/=P,v=f+x,g=h+_)}return{top:f,left:h,bottom:v,right:g,width:_,height:x}}}function Gu(t,e,i){for(var a=lr(t,!0),s=Et(t)[e];a;){var l=Et(a)[i],f=void 0;if(f=s>=l,!f)return a;if(a===Ln())break;a=lr(a,!1)}return!1}function ci(t,e,i,a){for(var s=0,l=0,f=t.children;l<f.length;){if(f[l].style.display!=="none"&&f[l]!==Te.ghost&&(a||f[l]!==Te.dragged)&&bn(f[l],i.draggable,t,!1)){if(s===e)return f[l];s++}l++}return null}function Ys(t,e){for(var i=t.lastElementChild;i&&(i===Te.ghost||Se(i,"display")==="none"||e&&!Ga(i,e));)i=i.previousElementSibling;return i||null}function hn(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Te.clone&&(!e||Ga(t,e))&&i++;return i}function Xu(t){var e=0,i=0,a=Ln();if(t)do{var s=ni(t),l=s.a,f=s.d;e+=t.scrollLeft*l,i+=t.scrollTop*f}while(t!==a&&(t=t.parentNode));return[e,i]}function Xh(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[i][a])return Number(i)}return-1}function lr(t,e){if(!t||!t.getBoundingClientRect)return Ln();var i=t,a=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Se(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Ln();if(a||e)return i;a=!0}}while(i=i.parentNode);return Ln()}function Qh(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function ns(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ri;function sc(t,e){return function(){if(!Ri){var i=arguments,a=this;i.length===1?t.call(a,i[0]):t.apply(a,i),Ri=setTimeout(function(){Ri=void 0},e)}}}function Zh(){clearTimeout(Ri),Ri=void 0}function uc(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function lc(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function cc(t,e,i){var a={};return Array.from(t.children).forEach(function(s){var l,f,h,v;if(!(!bn(s,e.draggable,t,!1)||s.animated||s===i)){var g=Et(s);a.left=Math.min((l=a.left)!==null&&l!==void 0?l:1/0,g.left),a.top=Math.min((f=a.top)!==null&&f!==void 0?f:1/0,g.top),a.right=Math.max((h=a.right)!==null&&h!==void 0?h:-1/0,g.right),a.bottom=Math.max((v=a.bottom)!==null&&v!==void 0?v:-1/0,g.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Gt="Sortable"+new Date().getTime();function Jh(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(s){if(!(Se(s,"display")==="none"||s===Te.ghost)){t.push({target:s,rect:Et(s)});var l=Mn({},t[t.length-1].rect);if(s.thisAnimationDuration){var f=ni(s,!0);f&&(l.top-=f.f,l.left-=f.e)}s.fromRect=l}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(Xh(t,{target:a}),1)},animateAll:function(a){var s=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var l=!1,f=0;t.forEach(function(h){var v=0,g=h.target,x=g.fromRect,_=Et(g),w=g.prevFromRect,k=g.prevToRect,D=h.rect,P=ni(g,!0);P&&(_.top-=P.f,_.left-=P.e),g.toRect=_,g.thisAnimationDuration&&ns(w,_)&&!ns(x,_)&&(D.top-_.top)/(D.left-_.left)===(x.top-_.top)/(x.left-_.left)&&(v=ev(D,w,k,s.options)),ns(_,x)||(g.prevFromRect=x,g.prevToRect=_,v||(v=s.options.animation),s.animate(g,D,_,v)),v&&(l=!0,f=Math.max(f,v),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},v),g.thisAnimationDuration=v)}),clearTimeout(e),l?e=setTimeout(function(){typeof a=="function"&&a()},f):typeof a=="function"&&a(),t=[]},animate:function(a,s,l,f){if(f){Se(a,"transition",""),Se(a,"transform","");var h=ni(this.el),v=h&&h.a,g=h&&h.d,x=(s.left-l.left)/(v||1),_=(s.top-l.top)/(g||1);a.animatingX=!!x,a.animatingY=!!_,Se(a,"transform","translate3d("+x+"px,"+_+"px,0)"),this.forRepaintDummy=$h(a),Se(a,"transition","transform "+f+"ms"+(this.options.easing?" "+this.options.easing:"")),Se(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){Se(a,"transition",""),Se(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},f)}}}}function $h(t){return t.offsetWidth}function ev(t,e,i,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*a.animation}var Xr=[],rs={initializeByDefault:!0},Wi={mount:function(e){for(var i in rs)rs.hasOwnProperty(i)&&!(i in e)&&(e[i]=rs[i]);Xr.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Xr.push(e)},pluginEvent:function(e,i,a){var s=this;this.eventCanceled=!1,a.cancel=function(){s.eventCanceled=!0};var l=e+"Global";Xr.forEach(function(f){i[f.pluginName]&&(i[f.pluginName][l]&&i[f.pluginName][l](Mn({sortable:i},a)),i.options[f.pluginName]&&i[f.pluginName][e]&&i[f.pluginName][e](Mn({sortable:i},a)))})},initializePlugins:function(e,i,a,s){Xr.forEach(function(h){var v=h.pluginName;if(!(!e.options[v]&&!h.initializeByDefault)){var g=new h(e,i,e.options);g.sortable=e,g.options=e.options,e[v]=g,Vn(a,g.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var f=this.modifyOption(e,l,e.options[l]);typeof f<"u"&&(e.options[l]=f)}},getEventProperties:function(e,i){var a={};return Xr.forEach(function(s){typeof s.eventProperties=="function"&&Vn(a,s.eventProperties.call(i[s.pluginName],e))}),a},modifyOption:function(e,i,a){var s;return Xr.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[i]=="function"&&(s=l.optionListeners[i].call(e[l.pluginName],a))}),s}};function tv(t){var e=t.sortable,i=t.rootEl,a=t.name,s=t.targetEl,l=t.cloneEl,f=t.toEl,h=t.fromEl,v=t.oldIndex,g=t.newIndex,x=t.oldDraggableIndex,_=t.newDraggableIndex,w=t.originalEvent,k=t.putSortable,D=t.extraEventProperties;if(e=e||i&&i[Gt],!!e){var P,C=e.options,E="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Qn&&!Yi?P=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(P=document.createEvent("Event"),P.initEvent(a,!0,!0)),P.to=f||i,P.from=h||i,P.item=s||i,P.clone=l,P.oldIndex=v,P.newIndex=g,P.oldDraggableIndex=x,P.newDraggableIndex=_,P.originalEvent=w,P.pullMode=k?k.lastPutMode:void 0;var M=Mn(Mn({},D),Wi.getEventProperties(a,e));for(var U in M)P[U]=M[U];i&&i.dispatchEvent(P),C[E]&&C[E].call(e,P)}}var nv=["evt"],Wt=function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.evt,l=qh(a,nv);Wi.pluginEvent.bind(Te)(e,i,Mn({dragEl:$,parentEl:gt,ghostEl:Ce,rootEl:ct,nextEl:Sr,lastDownEl:Pa,cloneEl:ht,cloneHidden:ur,dragStarted:Ii,putSortable:Dt,activeSortable:Te.active,originalEvent:s,oldIndex:$r,oldDraggableIndex:Ki,newIndex:rn,newDraggableIndex:sr,hideGhostForTarget:vc,unhideGhostForTarget:pc,cloneNowHidden:function(){ur=!0},cloneNowShown:function(){ur=!1},dispatchSortableEvent:function(h){Ut({sortable:i,name:h,originalEvent:s})}},l))};function Ut(t){tv(Mn({putSortable:Dt,cloneEl:ht,targetEl:$,rootEl:ct,oldIndex:$r,oldDraggableIndex:Ki,newIndex:rn,newDraggableIndex:sr},t))}var $,gt,Ce,ct,Sr,Pa,ht,ur,$r,rn,Ki,sr,Ea,Dt,Zr=!1,Xa=!1,Qa=[],kr,mn,is,as,Qu,Zu,Ii,Qr,Bi,Fi=!1,xa=!1,La,Bt,os=[],Es=!1,Za=[],co=typeof document<"u",ka=Vs,Ju=Yi||Qn?"cssFloat":"float",rv=co&&!rc&&!Vs&&"draggable"in document.createElement("div"),fc=(function(){if(co){if(Qn)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),dc=function(e,i){var a=Se(e),s=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),l=ci(e,0,i),f=ci(e,1,i),h=l&&Se(l),v=f&&Se(f),g=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+Et(l).width,x=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Et(f).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&h.float&&h.float!=="none"){var _=h.float==="left"?"left":"right";return f&&(v.clear==="both"||v.clear===_)?"vertical":"horizontal"}return l&&(h.display==="block"||h.display==="flex"||h.display==="table"||h.display==="grid"||g>=s&&a[Ju]==="none"||f&&a[Ju]==="none"&&g+x>s)?"vertical":"horizontal"},iv=function(e,i,a){var s=a?e.left:e.top,l=a?e.right:e.bottom,f=a?e.width:e.height,h=a?i.left:i.top,v=a?i.right:i.bottom,g=a?i.width:i.height;return s===h||l===v||s+f/2===h+g/2},av=function(e,i){var a;return Qa.some(function(s){var l=s[Gt].options.emptyInsertThreshold;if(!(!l||Ys(s))){var f=Et(s),h=e>=f.left-l&&e<=f.right+l,v=i>=f.top-l&&i<=f.bottom+l;if(h&&v)return a=s}}),a},hc=function(e){function i(l,f){return function(h,v,g,x){var _=h.options.group.name&&v.options.group.name&&h.options.group.name===v.options.group.name;if(l==null&&(f||_))return!0;if(l==null||l===!1)return!1;if(f&&l==="clone")return l;if(typeof l=="function")return i(l(h,v,g,x),f)(h,v,g,x);var w=(f?h:v).options.group.name;return l===!0||typeof l=="string"&&l===w||l.join&&l.indexOf(w)>-1}}var a={},s=e.group;(!s||Ca(s)!="object")&&(s={name:s}),a.name=s.name,a.checkPull=i(s.pull,!0),a.checkPut=i(s.put),a.revertClone=s.revertClone,e.group=a},vc=function(){!fc&&Ce&&Se(Ce,"display","none")},pc=function(){!fc&&Ce&&Se(Ce,"display","")};co&&!rc&&document.addEventListener("click",function(t){if(Xa)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Xa=!1,!1},!0);var Tr=function(e){if($){e=e.touches?e.touches[0]:e;var i=av(e.clientX,e.clientY);if(i){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);a.target=a.rootEl=i,a.preventDefault=void 0,a.stopPropagation=void 0,i[Gt]._onDragOver(a)}}},ov=function(e){$&&$.parentNode[Gt]._isOutsideThisEl(e.target)};function Te(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Vn({},e),t[Gt]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return dc(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(f,h){f.setData("Text",h.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Te.supportPointer!==!1&&"PointerEvent"in window&&(!Mi||Vs),emptyInsertThreshold:5};Wi.initializePlugins(this,t,i);for(var a in i)!(a in e)&&(e[a]=i[a]);hc(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:rv,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ue(t,"pointerdown",this._onTapStart):(Ue(t,"mousedown",this._onTapStart),Ue(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ue(t,"dragover",this),Ue(t,"dragenter",this)),Qa.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Vn(this,Jh())}Te.prototype={constructor:Te,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Qr=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,$):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,a=this.el,s=this.options,l=s.preventOnFilter,f=e.type,h=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,v=(h||e).target,g=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||v,x=s.filter;if(vv(a),!$&&!(/mousedown|pointerdown/.test(f)&&e.button!==0||s.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&Mi&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=bn(v,s.draggable,a,!1),!(v&&v.animated)&&Pa!==v)){if($r=hn(v),Ki=hn(v,s.draggable),typeof x=="function"){if(x.call(this,e,v,this)){Ut({sortable:i,rootEl:g,name:"filter",targetEl:v,toEl:a,fromEl:a}),Wt("filter",i,{evt:e}),l&&e.preventDefault();return}}else if(x&&(x=x.split(",").some(function(_){if(_=bn(g,_.trim(),a,!1),_)return Ut({sortable:i,rootEl:_,name:"filter",targetEl:v,fromEl:a,toEl:a}),Wt("filter",i,{evt:e}),!0}),x)){l&&e.preventDefault();return}s.handle&&!bn(g,s.handle,a,!1)||this._prepareDragStart(e,h,v)}}},_prepareDragStart:function(e,i,a){var s=this,l=s.el,f=s.options,h=l.ownerDocument,v;if(a&&!$&&a.parentNode===l){var g=Et(a);if(ct=l,$=a,gt=$.parentNode,Sr=$.nextSibling,Pa=a,Ea=f.group,Te.dragged=$,kr={target:$,clientX:(i||e).clientX,clientY:(i||e).clientY},Qu=kr.clientX-g.left,Zu=kr.clientY-g.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,$.style["will-change"]="all",v=function(){if(Wt("delayEnded",s,{evt:e}),Te.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Wu&&s.nativeDraggable&&($.draggable=!0),s._triggerDragStart(e,i),Ut({sortable:s,name:"choose",originalEvent:e}),tn($,f.chosenClass,!0)},f.ignore.split(",").forEach(function(x){oc($,x.trim(),ss)}),Ue(h,"dragover",Tr),Ue(h,"mousemove",Tr),Ue(h,"touchmove",Tr),f.supportPointer?(Ue(h,"pointerup",s._onDrop),!this.nativeDraggable&&Ue(h,"pointercancel",s._onDrop)):(Ue(h,"mouseup",s._onDrop),Ue(h,"touchend",s._onDrop),Ue(h,"touchcancel",s._onDrop)),Wu&&this.nativeDraggable&&(this.options.touchStartThreshold=4,$.draggable=!0),Wt("delayStart",this,{evt:e}),f.delay&&(!f.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Yi||Qn))){if(Te.eventCanceled){this._onDrop();return}f.supportPointer?(Ue(h,"pointerup",s._disableDelayedDrag),Ue(h,"pointercancel",s._disableDelayedDrag)):(Ue(h,"mouseup",s._disableDelayedDrag),Ue(h,"touchend",s._disableDelayedDrag),Ue(h,"touchcancel",s._disableDelayedDrag)),Ue(h,"mousemove",s._delayedDragTouchMoveHandler),Ue(h,"touchmove",s._delayedDragTouchMoveHandler),f.supportPointer&&Ue(h,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(v,f.delay)}else v()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){$&&ss($),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;je(e,"mouseup",this._disableDelayedDrag),je(e,"touchend",this._disableDelayedDrag),je(e,"touchcancel",this._disableDelayedDrag),je(e,"pointerup",this._disableDelayedDrag),je(e,"pointercancel",this._disableDelayedDrag),je(e,"mousemove",this._delayedDragTouchMoveHandler),je(e,"touchmove",this._delayedDragTouchMoveHandler),je(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Ue(document,"pointermove",this._onTouchMove):i?Ue(document,"touchmove",this._onTouchMove):Ue(document,"mousemove",this._onTouchMove):(Ue($,"dragend",this),Ue(ct,"dragstart",this._onDragStart));try{document.selection?Oa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Zr=!1,ct&&$){Wt("dragStarted",this,{evt:i}),this.nativeDraggable&&Ue(document,"dragover",ov);var a=this.options;!e&&tn($,a.dragClass,!1),tn($,a.ghostClass,!0),Te.active=this,e&&this._appendGhost(),Ut({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(mn){this._lastX=mn.clientX,this._lastY=mn.clientY,vc();for(var e=document.elementFromPoint(mn.clientX,mn.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(mn.clientX,mn.clientY),e!==i);)i=e;if($.parentNode[Gt]._isOutsideThisEl(e),i)do{if(i[Gt]){var a=void 0;if(a=i[Gt]._onDragOver({clientX:mn.clientX,clientY:mn.clientY,target:e,rootEl:i}),a&&!this.options.dragoverBubble)break}e=i}while(i=ac(i));pc()}},_onTouchMove:function(e){if(kr){var i=this.options,a=i.fallbackTolerance,s=i.fallbackOffset,l=e.touches?e.touches[0]:e,f=Ce&&ni(Ce,!0),h=Ce&&f&&f.a,v=Ce&&f&&f.d,g=ka&&Bt&&Xu(Bt),x=(l.clientX-kr.clientX+s.x)/(h||1)+(g?g[0]-os[0]:0)/(h||1),_=(l.clientY-kr.clientY+s.y)/(v||1)+(g?g[1]-os[1]:0)/(v||1);if(!Te.active&&!Zr){if(a&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(Ce){f?(f.e+=x-(is||0),f.f+=_-(as||0)):f={a:1,b:0,c:0,d:1,e:x,f:_};var w="matrix(".concat(f.a,",").concat(f.b,",").concat(f.c,",").concat(f.d,",").concat(f.e,",").concat(f.f,")");Se(Ce,"webkitTransform",w),Se(Ce,"mozTransform",w),Se(Ce,"msTransform",w),Se(Ce,"transform",w),is=x,as=_,mn=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ce){var e=this.options.fallbackOnBody?document.body:ct,i=Et($,!0,ka,!0,e),a=this.options;if(ka){for(Bt=e;Se(Bt,"position")==="static"&&Se(Bt,"transform")==="none"&&Bt!==document;)Bt=Bt.parentNode;Bt!==document.body&&Bt!==document.documentElement?(Bt===document&&(Bt=Ln()),i.top+=Bt.scrollTop,i.left+=Bt.scrollLeft):Bt=Ln(),os=Xu(Bt)}Ce=$.cloneNode(!0),tn(Ce,a.ghostClass,!1),tn(Ce,a.fallbackClass,!0),tn(Ce,a.dragClass,!0),Se(Ce,"transition",""),Se(Ce,"transform",""),Se(Ce,"box-sizing","border-box"),Se(Ce,"margin",0),Se(Ce,"top",i.top),Se(Ce,"left",i.left),Se(Ce,"width",i.width),Se(Ce,"height",i.height),Se(Ce,"opacity","0.8"),Se(Ce,"position",ka?"absolute":"fixed"),Se(Ce,"zIndex","100000"),Se(Ce,"pointerEvents","none"),Te.ghost=Ce,e.appendChild(Ce),Se(Ce,"transform-origin",Qu/parseInt(Ce.style.width)*100+"% "+Zu/parseInt(Ce.style.height)*100+"%")}},_onDragStart:function(e,i){var a=this,s=e.dataTransfer,l=a.options;if(Wt("dragStart",this,{evt:e}),Te.eventCanceled){this._onDrop();return}Wt("setupClone",this),Te.eventCanceled||(ht=lc($),ht.removeAttribute("id"),ht.draggable=!1,ht.style["will-change"]="",this._hideClone(),tn(ht,this.options.chosenClass,!1),Te.clone=ht),a.cloneId=Oa(function(){Wt("clone",a),!Te.eventCanceled&&(a.options.removeCloneOnHide||ct.insertBefore(ht,$),a._hideClone(),Ut({sortable:a,name:"clone"}))}),!i&&tn($,l.dragClass,!0),i?(Xa=!0,a._loopId=setInterval(a._emulateDragOver,50)):(je(document,"mouseup",a._onDrop),je(document,"touchend",a._onDrop),je(document,"touchcancel",a._onDrop),s&&(s.effectAllowed="move",l.setData&&l.setData.call(a,s,$)),Ue(document,"drop",a),Se($,"transform","translateZ(0)")),Zr=!0,a._dragStartId=Oa(a._dragStarted.bind(a,i,e)),Ue(document,"selectstart",a),Ii=!0,window.getSelection().removeAllRanges(),Mi&&Se(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,a=e.target,s,l,f,h=this.options,v=h.group,g=Te.active,x=Ea===v,_=h.sort,w=Dt||g,k,D=this,P=!1;if(Es)return;function C(ae,Be){Wt(ae,D,Mn({evt:e,isOwner:x,axis:k?"vertical":"horizontal",revert:f,dragRect:s,targetRect:l,canSort:_,fromSortable:w,target:a,completed:M,onMove:function(et,Fe){return Ta(ct,i,$,s,et,Et(et),e,Fe)},changed:U},Be))}function E(){C("dragOverAnimationCapture"),D.captureAnimationState(),D!==w&&w.captureAnimationState()}function M(ae){return C("dragOverCompleted",{insertion:ae}),ae&&(x?g._hideClone():g._showClone(D),D!==w&&(tn($,Dt?Dt.options.ghostClass:g.options.ghostClass,!1),tn($,h.ghostClass,!0)),Dt!==D&&D!==Te.active?Dt=D:D===Te.active&&Dt&&(Dt=null),w===D&&(D._ignoreWhileAnimating=a),D.animateAll(function(){C("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(a===$&&!$.animated||a===i&&!a.animated)&&(Qr=null),!h.dragoverBubble&&!e.rootEl&&a!==document&&($.parentNode[Gt]._isOutsideThisEl(e.target),!ae&&Tr(e)),!h.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),P=!0}function U(){rn=hn($),sr=hn($,h.draggable),Ut({sortable:D,name:"change",toEl:i,newIndex:rn,newDraggableIndex:sr,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=bn(a,h.draggable,i,!0),C("dragOver"),Te.eventCanceled)return P;if($.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||D._ignoreWhileAnimating===a)return M(!1);if(Xa=!1,g&&!h.disabled&&(x?_||(f=gt!==ct):Dt===this||(this.lastPutMode=Ea.checkPull(this,g,$,e))&&v.checkPut(this,g,$,e))){if(k=this._getDirection(e,a)==="vertical",s=Et($),C("dragOverValid"),Te.eventCanceled)return P;if(f)return gt=ct,E(),this._hideClone(),C("revert"),Te.eventCanceled||(Sr?ct.insertBefore($,Sr):ct.appendChild($)),M(!0);var N=Ys(i,h.draggable);if(!N||cv(e,k,this)&&!N.animated){if(N===$)return M(!1);if(N&&i===e.target&&(a=N),a&&(l=Et(a)),Ta(ct,i,$,s,a,l,e,!!a)!==!1)return E(),N&&N.nextSibling?i.insertBefore($,N.nextSibling):i.appendChild($),gt=i,U(),M(!0)}else if(N&&lv(e,k,this)){var q=ci(i,0,h,!0);if(q===$)return M(!1);if(a=q,l=Et(a),Ta(ct,i,$,s,a,l,e,!1)!==!1)return E(),i.insertBefore($,q),gt=i,U(),M(!0)}else if(a.parentNode===i){l=Et(a);var J=0,Y,F=$.parentNode!==i,Q=!iv($.animated&&$.toRect||s,a.animated&&a.toRect||l,k),ne=k?"top":"left",W=Gu(a,"top","top")||Gu($,"top","top"),he=W?W.scrollTop:void 0;Qr!==a&&(Y=l[ne],Fi=!1,xa=!Q&&h.invertSwap||F),J=fv(e,a,l,k,Q?1:h.swapThreshold,h.invertedSwapThreshold==null?h.swapThreshold:h.invertedSwapThreshold,xa,Qr===a);var be;if(J!==0){var _e=hn($);do _e-=J,be=gt.children[_e];while(be&&(Se(be,"display")==="none"||be===Ce))}if(J===0||be===a)return M(!1);Qr=a,Bi=J;var Le=a.nextElementSibling,Qe=!1;Qe=J===1;var it=Ta(ct,i,$,s,a,l,e,Qe);if(it!==!1)return(it===1||it===-1)&&(Qe=it===1),Es=!0,setTimeout(uv,30),E(),Qe&&!Le?i.appendChild($):a.parentNode.insertBefore($,Qe?Le:a),W&&uc(W,0,he-W.scrollTop),gt=$.parentNode,Y!==void 0&&!xa&&(La=Math.abs(Y-Et(a)[ne])),U(),M(!0)}if(i.contains($))return M(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){je(document,"mousemove",this._onTouchMove),je(document,"touchmove",this._onTouchMove),je(document,"pointermove",this._onTouchMove),je(document,"dragover",Tr),je(document,"mousemove",Tr),je(document,"touchmove",Tr)},_offUpEvents:function(){var e=this.el.ownerDocument;je(e,"mouseup",this._onDrop),je(e,"touchend",this._onDrop),je(e,"pointerup",this._onDrop),je(e,"pointercancel",this._onDrop),je(e,"touchcancel",this._onDrop),je(document,"selectstart",this)},_onDrop:function(e){var i=this.el,a=this.options;if(rn=hn($),sr=hn($,a.draggable),Wt("drop",this,{evt:e}),gt=$&&$.parentNode,rn=hn($),sr=hn($,a.draggable),Te.eventCanceled){this._nulling();return}Zr=!1,xa=!1,Fi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),xs(this.cloneId),xs(this._dragStartId),this.nativeDraggable&&(je(document,"drop",this),je(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Mi&&Se(document.body,"user-select",""),Se($,"transform",""),e&&(Ii&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),Ce&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),(ct===gt||Dt&&Dt.lastPutMode!=="clone")&&ht&&ht.parentNode&&ht.parentNode.removeChild(ht),$&&(this.nativeDraggable&&je($,"dragend",this),ss($),$.style["will-change"]="",Ii&&!Zr&&tn($,Dt?Dt.options.ghostClass:this.options.ghostClass,!1),tn($,this.options.chosenClass,!1),Ut({sortable:this,name:"unchoose",toEl:gt,newIndex:null,newDraggableIndex:null,originalEvent:e}),ct!==gt?(rn>=0&&(Ut({rootEl:gt,name:"add",toEl:gt,fromEl:ct,originalEvent:e}),Ut({sortable:this,name:"remove",toEl:gt,originalEvent:e}),Ut({rootEl:gt,name:"sort",toEl:gt,fromEl:ct,originalEvent:e}),Ut({sortable:this,name:"sort",toEl:gt,originalEvent:e})),Dt&&Dt.save()):rn!==$r&&rn>=0&&(Ut({sortable:this,name:"update",toEl:gt,originalEvent:e}),Ut({sortable:this,name:"sort",toEl:gt,originalEvent:e})),Te.active&&((rn==null||rn===-1)&&(rn=$r,sr=Ki),Ut({sortable:this,name:"end",toEl:gt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Wt("nulling",this),ct=$=gt=Ce=Sr=ht=Pa=ur=kr=mn=Ii=rn=sr=$r=Ki=Qr=Bi=Dt=Ea=Te.dragged=Te.ghost=Te.clone=Te.active=null,Za.forEach(function(e){e.checked=!0}),Za.length=is=as=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":$&&(this._onDragOver(e),sv(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,a=this.el.children,s=0,l=a.length,f=this.options;s<l;s++)i=a[s],bn(i,f.draggable,this.el,!1)&&e.push(i.getAttribute(f.dataIdAttr)||hv(i));return e},sort:function(e,i){var a={},s=this.el;this.toArray().forEach(function(l,f){var h=s.children[f];bn(h,this.options.draggable,s,!1)&&(a[l]=h)},this),i&&this.captureAnimationState(),e.forEach(function(l){a[l]&&(s.removeChild(a[l]),s.appendChild(a[l]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return bn(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var a=this.options;if(i===void 0)return a[e];var s=Wi.modifyOption(this,e,i);typeof s<"u"?a[e]=s:a[e]=i,e==="group"&&hc(a)},destroy:function(){Wt("destroy",this);var e=this.el;e[Gt]=null,je(e,"mousedown",this._onTapStart),je(e,"touchstart",this._onTapStart),je(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(je(e,"dragover",this),je(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qa.splice(Qa.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ur){if(Wt("hideClone",this),Te.eventCanceled)return;Se(ht,"display","none"),this.options.removeCloneOnHide&&ht.parentNode&&ht.parentNode.removeChild(ht),ur=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ur){if(Wt("showClone",this),Te.eventCanceled)return;$.parentNode==ct&&!this.options.group.revertClone?ct.insertBefore(ht,$):Sr?ct.insertBefore(ht,Sr):ct.appendChild(ht),this.options.group.revertClone&&this.animate($,ht),Se(ht,"display",""),ur=!1}}};function sv(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ta(t,e,i,a,s,l,f,h){var v,g=t[Gt],x=g.options.onMove,_;return window.CustomEvent&&!Qn&&!Yi?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=e,v.from=t,v.dragged=i,v.draggedRect=a,v.related=s||e,v.relatedRect=l||Et(e),v.willInsertAfter=h,v.originalEvent=f,t.dispatchEvent(v),x&&(_=x.call(g,v,f)),_}function ss(t){t.draggable=!1}function uv(){Es=!1}function lv(t,e,i){var a=Et(ci(i.el,0,i.options,!0)),s=cc(i.el,i.options,Ce),l=10;return e?t.clientX<s.left-l||t.clientY<a.top&&t.clientX<a.right:t.clientY<s.top-l||t.clientY<a.bottom&&t.clientX<a.left}function cv(t,e,i){var a=Et(Ys(i.el,i.options.draggable)),s=cc(i.el,i.options,Ce),l=10;return e?t.clientX>s.right+l||t.clientY>a.bottom&&t.clientX>a.left:t.clientY>s.bottom+l||t.clientX>a.right&&t.clientY>a.top}function fv(t,e,i,a,s,l,f,h){var v=a?t.clientY:t.clientX,g=a?i.height:i.width,x=a?i.top:i.left,_=a?i.bottom:i.right,w=!1;if(!f){if(h&&La<g*s){if(!Fi&&(Bi===1?v>x+g*l/2:v<_-g*l/2)&&(Fi=!0),Fi)w=!0;else if(Bi===1?v<x+La:v>_-La)return-Bi}else if(v>x+g*(1-s)/2&&v<_-g*(1-s)/2)return dv(e)}return w=w||f,w&&(v<x+g*l/2||v>_-g*l/2)?v>x+g/2?1:-1:0}function dv(t){return hn($)<hn(t)?1:-1}function hv(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,a=0;i--;)a+=e.charCodeAt(i);return a.toString(36)}function vv(t){Za.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var a=e[i];a.checked&&Za.push(a)}}function Oa(t){return setTimeout(t,0)}function xs(t){return clearTimeout(t)}co&&Ue(document,"touchmove",function(t){(Te.active||Zr)&&t.cancelable&&t.preventDefault()});Te.utils={on:Ue,off:je,css:Se,find:oc,is:function(e,i){return!!bn(e,i,e,!1)},extend:Qh,throttle:sc,closest:bn,toggleClass:tn,clone:lc,index:hn,nextTick:Oa,cancelNextTick:xs,detectDirection:dc,getChild:ci,expando:Gt};Te.get=function(t){return t[Gt]};Te.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(Te.utils=Mn(Mn({},Te.utils),a.utils)),Wi.mount(a)})};Te.create=function(t,e){return new Te(t,e)};Te.version=Gh;var wt=[],Di,ks,Ts=!1,us,ls,Ja,Ci;function pv(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var a=i.originalEvent;this.sortable.nativeDraggable?Ue(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ue(document,"pointermove",this._handleFallbackAutoScroll):a.touches?Ue(document,"touchmove",this._handleFallbackAutoScroll):Ue(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var a=i.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?je(document,"dragover",this._handleAutoScroll):(je(document,"pointermove",this._handleFallbackAutoScroll),je(document,"touchmove",this._handleFallbackAutoScroll),je(document,"mousemove",this._handleFallbackAutoScroll)),$u(),Ma(),Zh()},nulling:function(){Ja=ks=Di=Ts=Ci=us=ls=null,wt.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,a){var s=this,l=(i.touches?i.touches[0]:i).clientX,f=(i.touches?i.touches[0]:i).clientY,h=document.elementFromPoint(l,f);if(Ja=i,a||this.options.forceAutoScrollFallback||Yi||Qn||Mi){cs(i,this.options,h,a);var v=lr(h,!0);Ts&&(!Ci||l!==us||f!==ls)&&(Ci&&$u(),Ci=setInterval(function(){var g=lr(document.elementFromPoint(l,f),!0);g!==v&&(v=g,Ma()),cs(i,s.options,g,a)},10),us=l,ls=f)}else{if(!this.options.bubbleScroll||lr(h,!0)===Ln()){Ma();return}cs(i,this.options,lr(h,!1),!1)}}},Vn(t,{pluginName:"scroll",initializeByDefault:!0})}function Ma(){wt.forEach(function(t){clearInterval(t.pid)}),wt=[]}function $u(){clearInterval(Ci)}var cs=sc(function(t,e,i,a){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,f=e.scrollSensitivity,h=e.scrollSpeed,v=Ln(),g=!1,x;ks!==i&&(ks=i,Ma(),Di=e.scroll,x=e.scrollFn,Di===!0&&(Di=lr(i,!0)));var _=0,w=Di;do{var k=w,D=Et(k),P=D.top,C=D.bottom,E=D.left,M=D.right,U=D.width,N=D.height,q=void 0,J=void 0,Y=k.scrollWidth,F=k.scrollHeight,Q=Se(k),ne=k.scrollLeft,W=k.scrollTop;k===v?(q=U<Y&&(Q.overflowX==="auto"||Q.overflowX==="scroll"||Q.overflowX==="visible"),J=N<F&&(Q.overflowY==="auto"||Q.overflowY==="scroll"||Q.overflowY==="visible")):(q=U<Y&&(Q.overflowX==="auto"||Q.overflowX==="scroll"),J=N<F&&(Q.overflowY==="auto"||Q.overflowY==="scroll"));var he=q&&(Math.abs(M-s)<=f&&ne+U<Y)-(Math.abs(E-s)<=f&&!!ne),be=J&&(Math.abs(C-l)<=f&&W+N<F)-(Math.abs(P-l)<=f&&!!W);if(!wt[_])for(var _e=0;_e<=_;_e++)wt[_e]||(wt[_e]={});(wt[_].vx!=he||wt[_].vy!=be||wt[_].el!==k)&&(wt[_].el=k,wt[_].vx=he,wt[_].vy=be,clearInterval(wt[_].pid),(he!=0||be!=0)&&(g=!0,wt[_].pid=setInterval((function(){a&&this.layer===0&&Te.active._onTouchMove(Ja);var Le=wt[this.layer].vy?wt[this.layer].vy*h:0,Qe=wt[this.layer].vx?wt[this.layer].vx*h:0;typeof x=="function"&&x.call(Te.dragged.parentNode[Gt],Qe,Le,t,Ja,wt[this.layer].el)!=="continue"||uc(wt[this.layer].el,Qe,Le)}).bind({layer:_}),24))),_++}while(e.bubbleScroll&&w!==v&&(w=lr(w,!1)));Ts=g}},30),gc=function(e){var i=e.originalEvent,a=e.putSortable,s=e.dragEl,l=e.activeSortable,f=e.dispatchSortableEvent,h=e.hideGhostForTarget,v=e.unhideGhostForTarget;if(i){var g=a||l;h();var x=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,_=document.elementFromPoint(x.clientX,x.clientY);v(),g&&!g.el.contains(_)&&(f("spill"),this.onSpill({dragEl:s,putSortable:a}))}};function Ws(){}Ws.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var s=ci(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),a&&a.animateAll()},drop:gc};Vn(Ws,{pluginName:"revertOnSpill"});function qs(){}qs.prototype={onSpill:function(e){var i=e.dragEl,a=e.putSortable,s=a||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:gc};Vn(qs,{pluginName:"removeOnSpill"});Te.mount(new pv);Te.mount(qs,Ws);class gv{constructor(){this.state={lists:[],isDragActive:!1,pendingUpdates:new Map,version:0},this.listeners=new Set}subscribe(e){return this.listeners.add(e),e(this.getState()),()=>this.listeners.delete(e)}getState(){return{lists:[...this.state.lists],isDragActive:this.state.isDragActive,version:this.state.version}}initializeFromQuery(e){this.state.isDragActive||Array.isArray(e)&&(this.state.lists=e.map(i=>({id:i.id,name:i.name,order:i.order,columnIndex:i.columnIndex??0})),this.state.version++,this.notify())}startDrag(){this.state.isDragActive||(this.state.isDragActive=!0,this.state.pendingUpdates.clear(),this.state.version++,this.notify())}updateDragState(e,i){if(!this.state.isDragActive){console.warn("[DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[DRAG STATE] updateDragState called with invalid items");return}this.state.pendingUpdates.set(e,{items:i.map(a=>({...a})),timestamp:Date.now()}),this.applyPendingUpdates(),this.state.version++,this.notify()}applyPendingUpdates(){const e=new Set;this.state.pendingUpdates.forEach(({items:s})=>{s.forEach(l=>e.add(l.id))});const i=new Set(this.state.pendingUpdates.keys());let a=this.state.lists.filter(s=>{const l=s.columnIndex??0;return!e.has(s.id)&&!i.has(l)});this.state.pendingUpdates.forEach(({items:s},l)=>{const f=s.map((h,v)=>({...this.state.lists.find(x=>x.id===h.id)||h,columnIndex:l,order:v}));a=[...a,...f]}),this.state.lists=a}completeDrag(e=!0){this.state.isDragActive&&(e?this.state.pendingUpdates.clear():this.state.pendingUpdates.clear(),this.state.isDragActive=!1,this.state.version++,this.notify())}notify(){const e=this.getState();this.listeners.forEach(i=>{try{i(e)}catch(a){console.error("[DRAG STATE] Error in state change listener:",a)}})}getListsForColumn(e){return this.state.lists.filter(i=>(i.columnIndex??0)===e)}isDragActive(){return this.state.isDragActive}}const yn=new gv,Ke=new Wa("TaskPlannerDB");Ke.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Ke.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.toCollection().modify(e=>{e.status="unchecked"}));Ke.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.where("status").equals("archived").modify(e=>{e.archivedAt=Date.now()}));Ke.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify(e=>{e.archivedAt===void 0&&(e.archivedAt=null)}));Ke.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify((e,i)=>{e.columnIndex===void 0&&(e.columnIndex=e.order%5)}));function fo(t){return t.length===0?0:Math.max(...t.map(i=>i.order))+1}async function mv(){return(await Ke.lists.orderBy("order").toArray()).filter(e=>e.archivedAt==null)}async function yv(){return await Ke.lists.orderBy("order").toArray()}async function bv(t,e=null){if(t==null)throw new Error("List name cannot be null or undefined");const i=t.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const a=await Ke.lists.orderBy("order").toArray(),s=fo(a),l=5;let f;return e!==null&&e>=0&&e<l?f=e:f=s%l,await Ke.lists.add({name:i,order:s,archivedAt:null,columnIndex:f})}async function _v(t=null){const e=await Ke.lists.orderBy("order").toArray(),i=fo(e),a=5;let s;return t!==null&&t>=0&&t<a?s=t:s=i%a,await Ke.lists.add({name:null,order:i,archivedAt:null,columnIndex:s})}async function wv(t,e){const i=e.trim();if(i==="")throw new Error("List name cannot be empty");return await Ke.lists.update(t,{name:i})}async function Dr(t){return await Ke.tasks.where("listId").equals(t).filter(e=>e.status!=="archived").sortBy("order")}async function Ev(){return(await Ke.tasks.where("status").equals("archived").toArray()).sort((e,i)=>{const a=e.archivedAt||0,s=i.archivedAt||0;return s!==a?s-a:(i.order||0)-(e.order||0)})}async function xv(t,e,i=null){let a=t;t===null&&(a=await _v(i));const s=await Ke.tasks.where("listId").equals(a).filter(v=>v.status!=="archived").sortBy("order"),l=fo(s),f=e===""?"":e.trim();return await Ke.tasks.add({text:f,listId:a,order:l,status:"unchecked"})}async function kv(t,e){const i=e===""?"":e.trim();return await Ke.tasks.update(t,{text:i})}async function el(t,e){if(!["unchecked","checked","archived"].includes(e))throw new Error(`Invalid status: ${e}`);const i={status:e};return e==="archived"?i.archivedAt=Date.now():e!=="archived"&&(i.archivedAt=null),await Ke.tasks.update(t,i)}async function Tv(t){const e=await Ke.tasks.get(t);if(!e)throw new Error(`Task ${t} not found`);const i=await Ke.lists.get(e.listId);if(!i)throw new Error(`Task's list ${e.listId} not found`);let a=!1;i.archivedAt!=null&&(await Av(e.listId),a=!0);const s=await Ke.tasks.where("listId").equals(e.listId).filter(h=>h.status!=="archived"&&h.id!==t).sortBy("order"),l=fo(s);return{taskUpdated:await Ke.tasks.update(t,{status:"checked",order:l}),listRestored:a}}async function ri(t,e){if(!e||e.length===0)return;const i=e.map(h=>h.id),s=(await Ke.tasks.bulkGet(i)).filter(h=>h!==void 0);if(s.length===0)return;const l=s.filter(h=>h.listId!==t),f=new Set(l.map(h=>h.listId));await Ke.transaction("rw",Ke.tasks,async()=>{for(let h=0;h<e.length;h++){const v=e[h].id,g=s.find(_=>_.id===v);if(!g)continue;const x={order:h};g.listId!==t&&(x.listId=t),await Ke.tasks.update(v,x)}for(const h of f){const v=await Ke.tasks.where("listId").equals(h).filter(g=>g.status!=="archived").sortBy("order");for(let g=0;g<v.length;g++)await Ke.tasks.update(v[g].id,{order:g})}})}async function Sv(t){const e=Date.now();return await Ke.lists.update(t,{archivedAt:e})}async function Av(t){return await Ke.lists.update(t,{archivedAt:null})}async function Iv(t){const e=Date.now(),i=await Ke.tasks.where("listId").equals(t).filter(s=>s.status==="unchecked"||s.status==="checked").toArray(),a=i.map(s=>Ke.tasks.update(s.id,{status:"archived",archivedAt:e}));return await Promise.all(a),i.length}async function tl(t,e){if(!e||e.length===0)return;if(t<0||t>=5)throw new Error(`Invalid column index: ${t}`);const i=e.map(h=>h.id),a=await Ke.lists.bulkGet(i);if(a.filter(h=>!h).length>0)throw new Error("Cannot update order: some lists do not exist");const l=a.filter(h=>h!==void 0),f=l.filter(h=>(h.columnIndex??0)!==t);new Set(f.map(h=>h.columnIndex??0)),await Ke.transaction("rw",Ke.lists,async()=>{const h=new Set;for(let w=0;w<e.length;w++){const k=e[w].id,D=l.find(E=>E.id===k);if(!D)continue;const P={order:w},C=D.columnIndex??0;C!==t&&(P.columnIndex=t,h.add(C)),await Ke.lists.update(k,P)}const g=(await Ke.lists.orderBy("order").toArray()).filter(w=>w.archivedAt==null),x=Array(5).fill(null).map(()=>[]);for(const w of g){const k=w.columnIndex??0,D=k>=5?4:k;x[D].push(w)}const _=new Set([t,...h]);for(const w of _){const k=x[w];k.sort((D,P)=>(D.order??0)-(P.order??0));for(let D=0;D<k.length;D++)await Ke.lists.update(k[D].id,{order:D})}})}function mc(t){return t&&(t.isDndShadowItem===!0||typeof t.id=="string"&&t.id.startsWith("id:dnd-shadow-placeholder-"))}function yc(t,e=5){if(!t||t.length===0)return Array(e).fill(null).map(()=>[]);const i=Array(e).fill(null).map(()=>[]),a=e-1;for(const s of t){let l=s.columnIndex??0;l>=e&&(l=a),i[l].push(s)}for(let s=0;s<i.length;s++)i[s].sort((l,f)=>(l.order??0)-(f.order??0));return i}function Dv(t,e){if(!t||t.length===0)return null;for(let i=0;i<t.length;i++){const a=t[i];if(!Array.isArray(a))continue;const s=a.findIndex(l=>l.id===e);if(s!==-1)return{columnIndex:i,index:s}}return null}function Cv(t,e,i,a){const{columnIndex:s,index:l}=t;let f=s,h=l;if(e==="up"){if(l===0)return null;h=l-1}else if(e==="down"){const v=i[s]||[];if(l===v.length-1)return null;h=l+1}else if(e==="left"){if(s===0)return null;f=s-1,h=(i[f]||[]).length}else if(e==="right"){if(s===a-1)return null;f=s+1,h=(i[f]||[]).length}else return null;return{targetColumnIndex:f,targetIndex:h}}function Pv(t,e,i,a){const s=Dv(t,e);if(!s)return null;const{columnIndex:l,index:f}=s,h=Cv(s,i,t,a);if(!h)return null;const{targetColumnIndex:v,targetIndex:g}=h,x=t.map(C=>Array.isArray(C)?[...C]:[]),_=x[l];if(!_||_.length===0)return null;const[w]=_.splice(f,1);if(!w)return null;const k=x[v];if(!k)return null;const D=Math.min(Math.max(g,0),k.length);i==="left"||i==="right"?k.splice(D,0,{...w,columnIndex:v}):k.splice(D,0,w);const P=[];for(let C=0;C<x.length;C++){const E=x[C]||[];for(let M=0;M<E.length;M++){const U=E[M];P.push({...U,columnIndex:C,order:M})}}return{newColumns:x,updatedDraggableLists:P,targetColumnIndex:v,targetColumnItems:(x[v]||[]).map(C=>({id:C.id}))}}function Lv(t){return Array.isArray(t)?t.filter(e=>!mc(e)):[]}function fi(t){t instanceof HTMLElement&&(t.style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",t.style.backgroundColor="rgba(107, 143, 217, 0.04)",t.style.borderRadius="4px")}function bc(t){t instanceof HTMLElement&&(t.style.removeProperty("box-shadow"),t.style.removeProperty("background-color"),t.style.removeProperty("border-radius"))}function Ov(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach(e=>{e instanceof HTMLElement&&fi(e)})}function Mv(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach(e=>{e instanceof HTMLElement&&bc(e)})}function Rv(t){const{onDragStart:e,onDragEnd:i,columnIndex:a,getSortableInstance:s}=t;return{animation:150,ghostClass:"sortable-ghost-list",group:"lists",draggable:"[data-id]",filter:"ul, li, .create-list-container, .empty-drop-zone",preventOnFilter:!1,delay:50,delayOnStartOnly:!0,distance:5,emptyInsertThreshold:50,forceFallback:!0,fallbackOnBody:!0,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onStart:l=>{if(typeof document<"u"){if(document.querySelector(".modal-backdrop")){const h=s?s():null;h&&(h.option("disabled",!0),setTimeout(()=>{h.option("disabled",!1)},0));return}document.body.classList.add("list-dragging-active")}Ov(),e&&e(l)},onMove:l=>{l.to&&l.to instanceof HTMLElement&&fi(l.to),l.from&&l.from instanceof HTMLElement&&fi(l.from)},onEnd:l=>{typeof document<"u"&&document.body.classList.remove("list-dragging-active"),Mv(),i&&i(l,a)}}}const $a=160,Kv=150,eo=1056,Bv=816,to=16,Fv=25,Nv=10,fs=20,Sa=10,Hv=40,nl=200,rl=10,jv=20;async function zv(t,e={}){const{maxAttempts:i=Fv,retryInterval:a=Nv,waitForTick:s=!0}=e;if(typeof document>"u")return null;s&&await ot();for(let l=0;l<i;l++){const f=t();if(f&&f instanceof HTMLElement)return f.focus(),f;l<i-1&&await new Promise(h=>setTimeout(h,a))}return null}async function _c(t){if(typeof document>"u")return null;await ot();const e=document.querySelector(`div[data-id="${t}"][role="group"]`);if(e instanceof HTMLElement)return e.focus(),e;const i=document.querySelector(`div[data-id="${t}"]`);return i instanceof HTMLElement?(i.focus(),i):null}function Uv(t,e,i){if(!t)return null;const a=t.querySelector(e);if(a){const s=a.querySelector(i);if(s&&s instanceof HTMLElement)return s}return null}function Vv(t,e,i,a,s=null){if(t.key!=="Tab"||!e||!i)return!1;if(t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),a(!1),typeof document>"u")return!0;let l=i;if(!(l instanceof HTMLElement)||!document.contains(l))if(s&&s instanceof HTMLElement)l=s;else return!0;return l&&l instanceof HTMLElement&&l.focus(),!0}function Yv(t,e,i,a,s){return t.key!=="Tab"||!e||i==null?!1:(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),a(!1),s&&s(i),!0)}function Wv(t){const{getShouldResume:e,getLastBlurredElement:i,setShouldResume:a,getFallbackElement:s}=t;return function(f){const h=e(),v=i(),g=s?s():null;return Vv(f,h,v,a,g)}}function qv(t){const{getShouldResume:e,getLastDraggedId:i,setShouldResume:a,focusFunction:s}=t;return function(f){const h=e(),v=i();return Yv(f,h,v,a,s)}}function Gv(t,e,i,a){const{getKeyboardListDrag:s,getLastKeyboardDraggedListId:l,getShouldRefocusListOnNextTab:f,setShouldRefocusListOnNextTab:h}=t;function v(g){const x=g.key,_=s(),w=_.active===!0,k=_.listId;if(l(),f(),!(!w&&qv({getShouldResume:f,getLastDraggedId:l,setShouldResume:h,focusFunction:_c})(g))&&!(!w||k==null)){if(x==="ArrowUp"){g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation(),e(k,"up");return}if(x==="ArrowDown"){g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation(),e(k,"down");return}if(x==="ArrowLeft"){g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation(),e(k,"left");return}if(x==="ArrowRight"){g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation(),e(k,"right");return}if(x==="Escape"||x==="Enter"||x===" "){g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation(),i(),a();return}if(x==="Tab"){g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation(),i(),a();return}}}return document.addEventListener("keydown",v,!0),()=>{document.removeEventListener("keydown",v,!0)}}function Xv(t){return t===""}function Qv(t){return t.trim()===""&&t.length>0}function wc(t){const e=t.trim(),i=Qv(t);return{text:i?"":e,isBlank:i}}function Ec(t,e,i={}){const{ignoreElements:a=[],shouldClose:s=()=>!0,checkIgnoreClick:l=null}=i;function f(v){const g=typeof t=="function"?t():t;if(g&&!g.contains(v.target)&&!(l&&l(v))){for(const x of a){let _=null;if(typeof x=="function"?_=x():_=x,_&&_.contains(v.target))return}s()&&e()}}const h=setTimeout(()=>{document.addEventListener("click",f)},0);return()=>{clearTimeout(h),document.removeEventListener("click",f)}}function Zv(t){const{getColumnIndex:e,setColumnIndex:i,getInput:a,setInput:s,getInputElement:l}=t;function f(k){i(k)}function h(k,D){if(k.key==="Enter"||k.key===" ")k.preventDefault(),k.stopPropagation(),f(D);else if(k.key==="Escape"){k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation();const P=k.currentTarget;P&&P instanceof HTMLElement&&P.blur()}}function v(k,D,P){if(k.key==="Escape"){const C=a()||"";if(P){i(null),s("");return}if(C.trim().length>0){g(D,!0);return}i(null),s("")}}async function g(k,D=!1){const P=a()||"";if(P===""||P.trim()===""){i(null),s("");return}const{text:C}=wc(P);try{if(await bv(C||null,k),s(""),D)i(null);else{await ot();const E=l();E&&setTimeout(()=>{E.focus()},0)}}catch(E){console.error("Error creating list:",E)}}async function x(k){await g(k,!0)}function _(){if(e()!==null)return Ec(l(),()=>{e()!==null&&(i(null),s(""))},{ignoreElements:[],shouldClose:()=>!a()||a().trim()===""})}function w(){const k=e(),D=l();if(k===null||!D)return;const P=setTimeout(()=>{D?.focus()},0);return()=>{clearTimeout(P)}}return{handleCreateListClick:f,handleCreateListKeydown:h,handleCreateListInputEscape:v,handleCreateList:g,handleCreateListOnTab:x,setupClickOutsideEffect:_,setupFocusEffect:w}}class Jv{constructor(){this.state=new Map,this.globalDragActive=!1,this.listeners=new Map}subscribe(e,i){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(i);const a=this.getState(e);return i(a),()=>{const s=this.listeners.get(e);s&&(s.delete(i),s.size===0&&this.listeners.delete(e))}}getState(e){const i=this.state.get(e);return i?{tasks:[...i.tasks],isDragActive:i.isDragActive||!1,version:i.version||0}:{tasks:[],isDragActive:!1,version:0}}initializeFromQuery(e,i){if(this.globalDragActive||!Array.isArray(i))return;const a=i.filter(l=>l.status==="unchecked"||l.status==="checked");this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(e);if(!s.isDragActive){const l=a.map(h=>`${h.id}:${h.status}:${h.text||""}`).join(","),f=s.tasks.map(h=>`${h.id}:${h.status}:${h.text||""}`).join(",");l!==f&&(s.tasks=a.map(h=>({...h})),s.version++,this.notify(e))}}startDrag(e,i){this.globalDragActive=!0,[e,i].forEach(a=>{this.state.has(a)||this.state.set(a,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(a);s.isDragActive=!0,s.pendingUpdates=null,s.version++,this.notify(a)})}updateDragState(e,i){if(!this.globalDragActive){console.warn("[TASK DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[TASK DRAG STATE] updateDragState called with invalid tasks");return}this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const a=this.state.get(e);[...a.tasks],a.pendingUpdates={tasks:i.map(s=>({...s})),timestamp:Date.now()},a.pendingUpdates&&(a.tasks=[...a.pendingUpdates.tasks],a.pendingUpdates=null),a.version++,this.notify(e)}completeDrag(e,i,a=!0){this.globalDragActive=!1,[e,i].forEach(s=>{const l=this.state.get(s);l&&(l.pendingUpdates=null,l.isDragActive=!1,l.version++,this.notify(s))})}notify(e){const i=this.getState(e),a=this.listeners.get(e);a&&a.forEach(s=>{try{s(i)}catch(l){console.error("[TASK DRAG STATE] Error in state change listener:",l)}})}isDragActive(){return this.globalDragActive}isDragActiveForList(e){const i=this.state.get(e);return i?i.isDragActive:!1}}const Ie=new Jv;function $v(t){return Array.isArray(t)?t.filter(e=>e&&typeof e.id=="number"):[]}function no(t,e,i){if(!Array.isArray(e)||e.length===0)return null;const a=e.find(_=>_.id===t);if(!a)return null;const s=a.columnIndex??0;a.order;const l=5,f=Array(l).fill(null).map(()=>[]);for(const _ of e){const w=_.columnIndex??0,k=w>=l?l-1:w;f[k].push(_)}for(let _=0;_<f.length;_++)f[_].sort((w,k)=>(w.order??0)-(k.order??0));const h=f[s],v=h.findIndex(_=>_.id===t);if(v===-1)return null;const g=v===h.length-1,x=v===0;if(i==="next"){if(!g)return h[v+1].id;for(let _=s+1;_<l;_++){const w=f[_];if(w.length>0)return w[0].id}return null}if(i==="prev"){if(!x)return h[v-1].id;for(let _=s-1;_>=0;_--){const w=f[_];if(w.length>0)return w[w.length-1].id}return null}return null}async function xc(t,e){try{const i=await Dr(e),a=[{id:t},...i];await ri(e,a)}catch(i){throw console.error("Error moving task to next list:",i),i}}async function Ss(t,e){try{const a=[...await Dr(e),{id:t}];await ri(e,a)}catch(i){throw console.error("Error moving task to previous list:",i),i}}function ep(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(e=>{e instanceof HTMLElement&&fi(e)})}function tp(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(e=>{e instanceof HTMLElement&&bc(e)})}function np(t){const{onDragStart:e,onDragEnd:i,setDragJustEnded:a}=t||{};return{onStart:s=>{typeof document<"u"&&document.body.classList.add("task-dragging-active"),a&&a(!1);const l=s.item;l&&l instanceof HTMLElement&&document.querySelectorAll("ul[data-list-id]").forEach(h=>{Array.from(h.children).forEach(g=>{g!==l&&g.classList.contains("sortable-ghost-task")&&g.classList.remove("sortable-ghost-task")})}),ep(),e&&e(s)},onMove:s=>{s.to&&s.to instanceof HTMLElement&&fi(s.to),s.from&&s.from instanceof HTMLElement&&fi(s.from)},onEnd:s=>{typeof document<"u"&&document.body.classList.remove("task-dragging-active"),tp(),a&&(a(!0),setTimeout(()=>{a(!1)},100)),i&&i(s)}}}function rp(t){const e=np(t);return{animation:150,ghostClass:"sortable-ghost-task",group:"tasks",draggable:"li[data-id]",filter:"[data-no-drag]",preventOnFilter:!1,emptyInsertThreshold:50,swapThreshold:.65,onStart:e.onStart,onMove:e.onMove,onEnd:e.onEnd}}function ip(){return typeof document>"u"?!1:document.querySelectorAll('.sortable-ghost, [aria-grabbed="true"]').length>0}function kc(t){if(!t||!(t instanceof HTMLElement))return!1;const e=window.getComputedStyle(t);return e.boxShadow&&e.boxShadow!=="none"&&e.boxShadow.includes("inset")}function ap(){if(typeof document>"u")return[];const t=document.querySelectorAll("ul"),e=[];for(const i of t)i instanceof HTMLElement&&kc(i)&&e.push(i);return e}function Tc(){return ip()||ap().length>0}function op(t,e){const{getIsKeyboardTaskDragging:i,setIsKeyboardTaskDragging:a,setLastKeyboardDraggedTaskId:s,setLastBlurredTaskElement:l,setShouldRefocusTaskOnNextTab:f}=t;return function(v,g){const x=v.key,_=v.currentTarget,w=v.target;if(!(!(_ instanceof HTMLElement)||_!==w)){if(x==="Enter"||x===" ")if(!i())a(!0),s(g);else{a(!1),s(g),l(_),f(!0);const D=e();if(D){const P=D.getAttribute("data-list-id");if(P){const C=parseInt(P);Ie.globalDragActive&&Ie.completeDrag(C,C,!0)}}}else if(x==="Escape"){const k=i(),D=e(),P=Tc()||D&&kc(D);if(k||P){a(!1),s(g),l(_),f(!0);const C=e();if(C){const E=C.getAttribute("data-list-id");if(E){const M=parseInt(E);Ie.globalDragActive&&Ie.completeDrag(M,M,!1)}}v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),_ instanceof HTMLElement&&_.blur()}else v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),l(_),f(!0),_ instanceof HTMLElement&&_.blur()}}}}function sp(t){const{getIsKeyboardTaskDragging:e,getLastKeyboardDraggedTaskId:i,setLastBlurredTaskElement:a,setShouldRefocusTaskOnNextTab:s}=t;return function(f,h){const v=f.currentTarget,g=e(),x=i();g&&x===h&&(a(v),s(!0))}}function up(t,e,i,a,s,l,f){const{getIsKeyboardTaskDragging:h,getLastBlurredTaskElement:v,getShouldRefocusTaskOnNextTab:g,setIsKeyboardTaskDragging:x,setLastKeyboardDraggedTaskId:_,setLastBlurredTaskElement:w,setShouldRefocusTaskOnNextTab:k}=t;let D=!1;async function P(C){const E=C.key,M=h(),U=Tc();if((E==="ArrowDown"||E==="ArrowUp"||E==="ArrowLeft"||E==="ArrowRight")&&D){C.preventDefault(),C.stopPropagation();return}if(E==="Tab"){if(U||M){if(C.preventDefault(),C.stopImmediatePropagation(),C.stopPropagation(),x(!1),typeof document<"u"&&document.activeElement){const Ae=document.activeElement.closest("li[data-id]");if(Ae&&Ae instanceof HTMLElement){const et=Ae.getAttribute("data-id");if(et){const Ge=parseInt(et);_(Ge),w(Ae),k(!0)}const Fe=Ae.closest("ul[data-list-id]");if(Fe){const Ge=Fe.getAttribute("data-list-id");if(Ge){const G=parseInt(Ge);Ie.globalDragActive&&Ie.completeDrag(G,G,!0)}}}}return}if(Wv({getShouldResume:g,getLastBlurredElement:v,setShouldResume:k,getFallbackElement:()=>{if(f){const Be=f.querySelector('span[role="button"]');if(Be&&Be instanceof HTMLElement)return Be}return null}})(C))return}if(!M||E!=="ArrowDown"&&E!=="ArrowUp"&&E!=="ArrowLeft"&&E!=="ArrowRight")return;const N=document.activeElement;if(!N)return;const q=N.closest("li[data-id]");if(!q)return;const J=q.getAttribute("data-id");if(!J)return;const Y=parseInt(J),F=q.closest("ul[data-list-id]");if(!F)return;const Q=F.getAttribute("data-list-id");if(!Q)return;const W=parseInt(Q),be=Ie.getState(W).tasks,_e=be.find(ae=>ae.id===Y);if(!_e)return;const Le=be.findIndex(ae=>ae.id===Y);if(Le===-1)return;const Qe=Le===0,it=Le===be.length-1;C.preventDefault(),C.stopImmediatePropagation(),C.stopPropagation(),D=!0;try{if(E==="ArrowDown")if(it){const ae=no(W,a,"next");if(ae!=null){Ie.globalDragActive||Ie.startDrag(W,ae);const Be=be.find(fe=>fe.id===Y);if(!Be)return;const Ae=be.filter(fe=>fe.id!==Y);Ie.updateDragState(W,Ae);let et=Ie.getState(ae),Fe=et?.tasks||[];if(Fe.length===0&&et.version===0&&!Ie.state.has(ae)){const De=(await Dr(ae)).filter(we=>we.status==="unchecked"||we.status==="checked");Ie.initializeFromQuery(ae,De),et=Ie.getState(ae),Fe=et?.tasks||[]}const G=[{...Be,listId:ae},...Fe];Ie.updateDragState(ae,G),await xc(Y,ae),await ot();const Z=document.querySelector(`li[data-id="${Y}"]`);Z instanceof HTMLElement&&Z.focus()}}else{const ae=[...be],[Be]=ae.splice(Le,1);ae.splice(Le+1,0,Be),Ie.globalDragActive||Ie.startDrag(W,W),Ie.updateDragState(W,ae),await ri(W,ae),await ot();let Ae=e?.querySelector(`li[data-id="${Y}"]`);if(Ae||(Ae=document.querySelector(`li[data-id="${Y}"]`)),Ae instanceof HTMLElement&&(Ae.focus(),await ot(),await new Promise(Fe=>setTimeout(Fe,50)),document.activeElement!==Ae)){const Fe=document.querySelector(`li[data-id="${Y}"]`);Fe instanceof HTMLElement&&Fe.focus()}}else if(E==="ArrowUp")if(Qe){const ae=no(W,a,"prev");if(ae!=null){const Be=a.find(Fe=>Fe.id===W),Ae=a.find(Fe=>Fe.id===ae);if(Be&&Ae&&(Be.columnIndex??0)!==(Ae.columnIndex??0)){Ie.globalDragActive||Ie.startDrag(W,ae);const Fe=be.find(Je=>Je.id===Y);if(!Fe)return;const Ge=be.filter(Je=>Je.id!==Y);Ie.updateDragState(W,Ge);let G=Ie.getState(ae),Z=G?.tasks||[];if(Z.length===0&&G.version===0&&!Ie.state.has(ae)){const kt=(await Dr(ae)).filter($e=>$e.status==="unchecked"||$e.status==="checked");Ie.initializeFromQuery(ae,kt),G=Ie.getState(ae),Z=G?.tasks||[]}const fe={...Fe,listId:ae},De=[...Z,fe];Ie.updateDragState(ae,De),await Ss(Y,ae),await ot();const we=document.querySelector(`li[data-id="${Y}"]`);we instanceof HTMLElement&&we.focus()}else{Ie.globalDragActive||Ie.startDrag(W,ae);const Fe=be.find(Je=>Je.id===Y);if(!Fe)return;const Ge=be.filter(Je=>Je.id!==Y);Ie.updateDragState(W,Ge);let G=Ie.getState(ae),Z=G?.tasks||[];if(Z.length===0&&G.version===0&&!Ie.state.has(ae)){const kt=(await Dr(ae)).filter($e=>$e.status==="unchecked"||$e.status==="checked");Ie.initializeFromQuery(ae,kt),G=Ie.getState(ae),Z=G?.tasks||[]}const fe={...Fe,listId:ae},De=[...Z,fe];Ie.updateDragState(ae,De),await Ss(Y,ae),await ot();const we=document.querySelector(`li[data-id="${Y}"]`);we instanceof HTMLElement&&we.focus()}}else return}else{const ae=[...be],[Be]=ae.splice(Le,1);ae.splice(Le-1,0,Be),Ie.globalDragActive||Ie.startDrag(W,W),Ie.updateDragState(W,ae),await ri(W,ae),await ot();let Ae=e?.querySelector(`li[data-id="${Y}"]`);Ae||(Ae=document.querySelector(`li[data-id="${Y}"]`)),Ae instanceof HTMLElement&&Ae.focus()}else if(E==="ArrowLeft"||E==="ArrowRight"){const ae=a.find(G=>G.id===i);if(!ae)return;const Be=ae.columnIndex??0,Ae=E==="ArrowLeft"?Be-1:Be+1;if(Ae<0||Ae>=5)return;const Fe=yc(a,5)[Ae]||[];let Ge=null;if(Fe.length>0){const G=Math.min(Le,Fe.length-1);Ge=Fe[G]?.id}if(Ge!=null){const G=await Dr(Ge),Z=Math.min(Le,G.length),fe=[...G];fe.splice(Z,0,_e),await ri(Ge,fe)}}}finally{D=!1}}return document.addEventListener("keydown",P,!0),()=>{document.removeEventListener("keydown",P,!0)}}function Sc(t){const{containerElement:e,keyMatches:i,targetMatches:a,onMatch:s}=t;if(!e)return()=>{};function l(f){const h=f.target;i(f.key)&&h instanceof HTMLElement&&a(h,e)&&(f.preventDefault(),f.stopImmediatePropagation(),s&&s(f,h))}return e.addEventListener("keydown",l,!0),()=>{e&&e.removeEventListener("keydown",l,!0)}}function lp(t,e){return Sc({containerElement:t,keyMatches:i=>i==="Enter"||i===" ",targetMatches:(i,a)=>{if(i.tagName==="H2"&&i.hasAttribute("role")&&i.getAttribute("role")==="button"){const s=a?.querySelector('h2[role="button"]');return s&&i===s}return!1},onMatch:(i,a)=>{e.openModal(a)}})}function cp(t,e){return Sc({containerElement:t,keyMatches:i=>i==="Enter"||i===" ",targetMatches:(i,a)=>{if(i.hasAttribute("role")&&i.getAttribute("role")==="button"){const s=a?.querySelector('span[role="button"]');return s&&i===s}return!1},onMatch:(i,a)=>{e()}})}function fp(t,e,i,a,s){if(!t)return()=>{};const{onTaskTextEdit:l}=s;async function f(h){const v=h.target;if((h.key==="Enter"||h.key===" ")&&v instanceof HTMLElement&&v.hasAttribute("data-no-drag")){h.preventDefault(),h.stopImmediatePropagation();const g=v.closest("li[data-id]");if(g){const x=parseInt(g.getAttribute("data-id")),_=e.find(w=>w.id===x);_&&l&&l(x,_.text,v)}return}if(h.key==="ArrowDown"||h.key==="ArrowUp"){const g=document.activeElement;if(!g)return;const x=g.closest("li[data-id]");if(!x||!t.contains(x))return;const _=x.getAttribute("data-id");if(!_)return;const w=parseInt(_);if(!e.find(E=>E.id===w))return;const D=e.findIndex(E=>E.id===w),P=D===0,C=D===e.length-1;if(h.key==="ArrowDown"&&C){h.preventDefault(),h.stopImmediatePropagation();const E=no(i,a,"next");E!=null&&await xc(w,E)}else if(h.key==="ArrowUp"&&P){h.preventDefault(),h.stopImmediatePropagation();const E=no(i,a,"prev");E!=null&&await Ss(w,E)}}}return t.addEventListener("keydown",f,!0),()=>{t.removeEventListener("keydown",f,!0)}}var dp=Pe("<button><!></button>");function wn(t,e){let i=Ft(e,"variant",3,"primary"),a=Ft(e,"size",3,"medium"),s=Ft(e,"disabled",3,!1),l=Ft(e,"type",3,"button"),f=Bh(e,["$$slots","$$events","$$legacy","variant","size","disabled","type","onclick","ariaLabel"]);const h="focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed",v={primary:"bg-grey-80 text-grey-110 hover:bg-grey-90 focus:bg-grey-90 disabled:bg-grey-50 disabled:text-grey-100",secondary:"bg-white text-grey-110 hover:bg-grey-20 focus:bg-grey-30 disabled:bg-white disabled:text-grey-60"},g={small:"px-2 py-1 text-sm",medium:"px-4 py-2",large:"px-6 py-3"},x=`${h} ${v[i()]} ${g[a()]}`;var _=dp();Oh(_,()=>({type:l(),disabled:s(),onclick:e.onclick,ariaLabel:e.ariaLabel,class:x,...f}));var w=ye(_);xh(w,e,"default",{}),ce(t,_)}var hp=Pe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),vp=Pe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><!> <!></div></div></div></div>');function pp(t,e){Gn(e,!0);let i=me(an(e.taskText||"")),a=me(!1),s=me(null),l=me(null),f=_t(()=>()=>{if(!e.taskPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const P=24,C=24,E=to,U=P+C+E+8-8,N=10,q=e.taskPosition.top-U,J=e.taskPosition.left-to+N,Y=e.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${q}px; left: ${J}px; width: ${Y}px;`});We(()=>{e.isOpen&&(K(i,e.taskText||"",!0),K(a,!1))}),We(()=>{e.isOpen&&m(s)&&setTimeout(()=>{m(s)?.focus(),m(s)?.select(),m(s)instanceof HTMLTextAreaElement&&(m(s).style.height="auto",m(s).style.height=`${Math.min(m(s).scrollHeight,$a)}px`)},0)}),We(()=>{if(m(s)&&m(s)instanceof HTMLTextAreaElement){const P=()=>{m(s).style.height="auto",m(s).style.height=`${Math.min(m(s).scrollHeight,$a)}px`};return m(s).addEventListener("input",P),()=>{m(s).removeEventListener("input",P)}}});function h(){const P=m(i)??"",C=P.trim();if(C===""&&P.length>0){e.onSave(e.taskId,""),K(a,!1);return}if(P===""||C===""){K(a,!0);return}e.onSave(e.taskId,C),K(a,!1)}function v(){K(i,e.taskText||"",!0),K(a,!1),e.onCancel()}function g(P){P.target===P.currentTarget&&v()}function x(P){if(P.key==="Tab"){if(!m(l))return;const C=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),E=Array.from(m(l).querySelectorAll(C)).filter(J=>!(!(J instanceof HTMLElement)||J.hasAttribute("disabled")||J.getAttribute("aria-hidden")==="true"));if(E.length===0)return;const M=document.activeElement,U=E.indexOf(M);let N;P.shiftKey?U<=0?N=E.length-1:N=U-1:U===-1||U===E.length-1?N=0:N=U+1,P.preventDefault(),P.stopPropagation();const q=E[N];q&&q instanceof HTMLElement&&q.focus()}else P.key==="Escape"?v():P.key==="Enter"&&!P.shiftKey&&document.activeElement===m(s)&&(P.preventDefault(),h())}function _(){e.onArchive&&e.onArchive(e.taskId)}var w=jn(),k=Lt(w);{var D=P=>{var C=vp();C.__click=g,C.__keydown=x;var E=ye(C);E.__click=W=>W.stopPropagation();var M=Re(ye(E),2),U=ye(M);U.__keydown=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),W.stopPropagation(),h())},Pt(U,W=>K(s,W),()=>m(s));var N=Re(U,2);{var q=W=>{var he=hp();ce(W,he)};st(N,W=>{m(a)&&W(q)})}var J=Re(M,2),Y=ye(J);Y.__click=_;var F=Re(Y,2),Q=ye(F);wn(Q,{variant:"secondary",onclick:v,"aria-label":"Cancel editing and discard changes",children:(W,he)=>{var be=_n("Cancel");ce(W,be)},$$slots:{default:!0}});var ne=Re(Q,2);{let W=_t(()=>m(a)?"Save disabled: task cannot be empty":"Save task changes");wn(ne,{variant:"primary",onclick:h,get disabled(){return m(a)},get"aria-label"(){return m(W)},children:(he,be)=>{var _e=_n("Save");ce(he,_e)},$$slots:{default:!0}})}Pt(E,W=>K(l,W),()=>m(l)),xt(W=>{On(E,W),On(U,`width: ${Kv}px;`),bt(U,"aria-describedby",m(a)?"validation-message":void 0)},[()=>m(f)()]),Ua(U,()=>m(i),W=>K(i,W)),ce(P,C)};st(k,P=>{e.isOpen&&P(D)})}ce(t,w),Xn()}Hr(["click","keydown"]);var gp=Pe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),mp=Pe('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-2 py-2 border border-grey-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border font-gilda text-[24px] text-grey-110 svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box; padding-left: 7px; padding-right: 7px; padding-top: 7px; padding-bottom: 7px;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><!> <div class="flex justify-end gap-3"><!> <!></div></div>',1),yp=Pe('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-grey-100">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><!> <!></div>',1),bp=Pe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-grey-10 text-grey-110 p-6 rounded-xl shadow-2xl border-2 border-grey-50 fixed box-border" role="document"><!></div></div>');function _p(t,e){Gn(e,!0);let i=me(an(e.listName||"")),a=me(!1),s=me(null),l=me(null),f=me("edit"),h=me(null),v=_t(()=>()=>{if(!e.listPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const F=24,Q=24,ne=to,be=F+Q+ne+1+7-8,_e=e.listPosition.top-be,Le=e.listPosition.left-to,Qe=Math.max(e.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${_e}px; left: ${Le}px; width: ${Qe}px; max-width: ${Qe}px; box-sizing: border-box;`});We(()=>{e.isOpen&&(K(i,e.listName||"",!0),K(a,!1),K(f,"edit"))}),We(()=>{e.isOpen&&m(s)&&setTimeout(()=>{m(s)?.focus(),m(s)?.select()},0)});function g(){const Q=(m(i)??"").trim();if(Q===""){K(a,!0);return}e.onSave(e.listId,Q),K(a,!1)}function x(){K(i,e.listName||"",!0),K(a,!1),e.onCancel()}function _(F){F.target===F.currentTarget&&(F.preventDefault(),F.stopPropagation(),x())}function w(F){F.target===F.currentTarget?K(h,F.target,!0):K(h,null),F.stopPropagation(),F.preventDefault()}function k(F){F.target===F.currentTarget&&m(h)===F.currentTarget&&(F.preventDefault(),F.stopPropagation(),x()),K(h,null),F.stopPropagation()}function D(F){F.stopPropagation(),F.preventDefault()}function P(F){return F.preventDefault(),F.stopPropagation(),!1}function C(F){return F.preventDefault(),F.stopPropagation(),!1}function E(F){if(F.key==="Tab"){if(!m(l))return;const Q=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),ne=Array.from(m(l).querySelectorAll(Q)).filter(Le=>!(!(Le instanceof HTMLElement)||Le.hasAttribute("disabled")||Le.getAttribute("aria-hidden")==="true"));if(ne.length===0)return;const W=document.activeElement,he=ne.indexOf(W);let be;F.shiftKey?he<=0?be=ne.length-1:be=he-1:he===-1||he===ne.length-1?be=0:be=he+1,F.preventDefault(),F.stopPropagation();const _e=ne[be];_e&&_e instanceof HTMLElement&&_e.focus()}else F.key==="Escape"?m(f)==="confirm-archive"?N():x():F.key==="Enter"&&!F.shiftKey&&m(f)==="edit"&&F.target===m(s)&&(F.preventDefault(),g())}function M(){K(f,"confirm-archive")}function U(){e.onArchive(e.listId),x()}function N(){K(f,"edit")}var q=jn(),J=Lt(q);{var Y=F=>{var Q=bp();Q.__click=_,Q.__mousedown=w,Q.__mouseup=k,Q.__mousemove=D,Q.__keydown=E;var ne=ye(Q);ne.__click=_e=>_e.stopPropagation(),ne.__mousedown=_e=>_e.stopPropagation(),ne.__mouseup=_e=>_e.stopPropagation();var W=ye(ne);{var he=_e=>{var Le=mp(),Qe=Re(Lt(Le),2),it=ye(Qe);Pt(it,Z=>K(s,Z),()=>m(s));var ae=Re(it,2);{var Be=Z=>{var fe=gp();ce(Z,fe)};st(ae,Z=>{m(a)&&Z(Be)})}var Ae=Re(Qe,2),et=ye(Ae);wn(et,{variant:"secondary",onclick:M,"aria-label":"Archive this list",children:(Z,fe)=>{var De=_n("Archive");ce(Z,De)},$$slots:{default:!0}});var Fe=Re(et,2),Ge=ye(Fe);wn(Ge,{variant:"secondary",onclick:x,"aria-label":"Cancel editing and discard changes",children:(Z,fe)=>{var De=_n("Cancel");ce(Z,De)},$$slots:{default:!0}});var G=Re(Ge,2);{let Z=_t(()=>m(a)?"Save disabled: list name cannot be empty":"Save list name changes");wn(G,{variant:"primary",onclick:g,get disabled(){return m(a)},get"aria-label"(){return m(Z)},children:(fe,De)=>{var we=_n("Save");ce(fe,we)},$$slots:{default:!0}})}xt(()=>bt(it,"aria-describedby",m(a)?"validation-message":void 0)),Ua(it,()=>m(i),Z=>K(i,Z)),ce(_e,Le)},be=_e=>{var Le=jn(),Qe=Lt(Le);{var it=ae=>{var Be=yp(),Ae=Re(Lt(Be),4),et=ye(Ae);wn(et,{variant:"secondary",onclick:N,"aria-label":"Cancel archiving",children:(Ge,G)=>{var Z=_n("Cancel");ce(Ge,Z)},$$slots:{default:!0}});var Fe=Re(et,2);wn(Fe,{variant:"primary",onclick:U,"aria-label":"Confirm archive list",children:(Ge,G)=>{var Z=_n("Archive");ce(Ge,Z)},$$slots:{default:!0}}),ce(ae,Be)};st(Qe,ae=>{m(f)==="confirm-archive"&&ae(it)},!0)}ce(_e,Le)};st(W,_e=>{m(f)==="edit"?_e(he):_e(be,!1)})}Pt(ne,_e=>K(l,_e),()=>m(l)),xt(_e=>On(ne,_e),[()=>m(v)()]),hr("dragstart",Q,P),hr("drag",Q,C),hr("dragend",Q,C),ce(F,Q)};st(J,F=>{e.isOpen&&F(Y)})}ce(t,q),Xn()}Hr(["click","mousedown","mouseup","mousemove","keydown"]);var wp=Pe('<input type="checkbox" disabled class="cursor-pointer" aria-hidden="true" tabindex="-1"/> <textarea class="flex-1 break-words resize-none max-h-[10rem] overflow-y-auto font-urbanist text-grey-100 placeholder:italic" rows="1" style="font-size: var(--font-size-body); line-height: var(--line-height-body); height: var(--line-height-body);"></textarea>',1),Ep=Pe('<input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1 font-urbanist text-grey-60" style="font-size: var(--font-size-body); line-height: var(--line-height-body);" role="button" tabindex="0"> </span>',1),xp=Pe('<div class="flex items-center border-b border-grey-50 hover:bg-grey-20 w-full print:hidden add-task-container add-task-button svelte-jtbpvm"><!></div>');function ds(t,e){Gn(e,!0);let i=Ft(e,"isInputActive",11,!1),a=Ft(e,"inputValue",3,""),s=Ft(e,"buttonText",3,"Add Task"),l=Ft(e,"placeholder",3,"start typing..."),f=Ft(e,"marginLeft",3,!1),h=Ft(e,"containerElement",15,null),v=Ft(e,"textareaElement",15,null),g=me(null),x=me(null);We(()=>{h(m(x)),v(m(g))}),We(()=>{if(i()&&m(g))setTimeout(()=>{if(m(g)?.focus(),m(g)instanceof HTMLTextAreaElement){m(g).style.height="auto";const E=m(g).scrollHeight,M=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--line-height-body"))||24;m(g).style.height=`${Math.max(M,Math.min(E,$a))}px`}},0);else if(!i()&&m(g)&&m(g)instanceof HTMLTextAreaElement){const E=getComputedStyle(document.documentElement).getPropertyValue("--line-height-body")||"24px";m(g).style.height=E}}),We(()=>{if(m(g)&&m(g)instanceof HTMLTextAreaElement){const E=()=>{m(g).style.height="auto";const M=m(g).scrollHeight,U=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--line-height-body"))||24;m(g).style.height=`${Math.max(U,Math.min(M,$a))}px`};return m(g).addEventListener("input",E),()=>{m(g).removeEventListener("input",E)}}});function _(E){E.key==="Enter"&&!E.shiftKey?(E.preventDefault(),e.onSave?.()):E.key==="Escape"?(E.preventDefault(),e.onEscape?.(E,a())):E.key==="Tab"&&e.onSave?.({closeAfterSave:!0})}function w(E){if(E.key==="Enter"||E.key===" ")E.preventDefault(),e.onActivate?.();else if(E.key==="Escape"){E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation();const M=E.currentTarget;M&&M instanceof HTMLElement&&M.blur()}}var k=xp(),D=ye(k);{var P=E=>{var M=wp(),U=Re(Lt(M),2);U.__input=N=>e.onInputChange?.(N.currentTarget.value),U.__keydown=_,Pt(U,N=>K(g,N),()=>m(g)),xt(()=>{bt(U,"placeholder",l()),Dh(U,a())}),ce(E,M)},C=E=>{var M=Ep(),U=Re(Lt(M),2);U.__click=function(...q){e.onActivate?.apply(this,q)},U.__keydown=w;var N=ye(U);xt(()=>{bt(U,"aria-label",e.ariaLabel||s()),Ir(N,s())}),ce(E,M)};st(D,E=>{i()?E(P):E(C,!1)})}Pt(k,E=>K(x,E),()=>m(x)),xt(()=>On(k,`padding-top: var(--add-task-padding-y); padding-bottom: var(--add-task-padding-y); gap: var(--task-item-gap); ${f()?"margin-left: 1.5rem;":""}`)),ce(t,k),Xn()}Hr(["input","keydown","click"]);function il(){let t=me(!1),e=me(null),i=me(null);function a(v){if(v&&v instanceof HTMLElement){const g=v.getBoundingClientRect();K(e,{top:g.top,left:g.left,width:g.width,height:g.height},!0),K(i,v,!0)}K(t,!0)}function s(){const v=m(i);K(t,!1),K(e,null),K(i,null),v&&v instanceof HTMLElement&&setTimeout(()=>{v.focus()},0)}function l(){K(t,!1),K(e,null),K(i,null)}function f(v){const g=v?.currentTarget||v?.target;a(g)}function h(v,g={}){const x=v.key;if(x==="Enter"||x===" "){v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation();const _=v.currentTarget;_&&a(_)}else if(x==="Escape")if(v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),g.onEscape)g.onEscape(v);else{const _=v.currentTarget;_&&_ instanceof HTMLElement&&_.blur()}}return{get isOpen(){return m(t)},get position(){return m(e)},get element(){return m(i)},openModal:a,closeModal:s,closeModalWithoutFocus:l,handleClick:f,handleKeydown:h}}var kp=Pe('<li tabindex="0" role="listitem" class="flex items-center gap-2 border-b border-grey-50 cursor-move hover:bg-grey-20 w-full m-0 list-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1" style="padding-top: var(--task-item-padding-y); padding-bottom: var(--task-item-padding-y); gap: var(--task-item-gap);"><input type="checkbox" class="cursor-pointer"/> <span style="font-size: var(--font-size-body); line-height: var(--line-height-body);" role="button" tabindex="0" contenteditable="false"> </span> <!></li>'),Tp=Pe('<div style="margin-top: calc((var(--task-item-padding-y) + var(--line-height-body) + var(--task-item-padding-y)) * -1);"><!></div>'),Sp=Pe('<div class="task-list-wrapper m-0 p-0"><ul></ul> <!></div>'),Ap=Pe("<p>Loading tasks...</p> <!>",1),Ip=Pe('<div class="flex flex-col w-full"><div class="border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border"><div class="flex items-center transition-colors hover:bg-grey-20 hover:rounded py-1"><h2 role="button" tabindex="0" class="list-title cursor-pointer m-0 leading-none text-grey-110 font-gilda rounded -my-1 transition-colors flex-1 min-w-0 focus:outline-none" style="font-size: var(--font-size-heading); padding: var(--list-title-padding-y) var(--list-title-padding-x); line-height: var(--line-height-heading);"> </h2></div></div> <!></div> <!> <!>',1);function Dp(t,e){Gn(e,!0);const i=()=>Va(m(h),"$tasksQuery",a),[a,s]=Us();let l=Ft(e,"allLists",19,()=>[]),f=Ft(e,"stableLists",19,()=>[]),h=me(null),v=me(an([])),g=me(!1);const x=il(),_=il();let w=me(null),k=me(""),D=me(null),P=me(null),C=me(null),E=me(null),M=me(null),U=me(null),N=me(!1),q=me(!1),J=me(null),Y=me(null),F=me(null),Q=me(!1);function ne(ee,pe=null){if(!ee)return[];const ve=Array.from(ee.children),Oe=pe||e.listId,zt=Ie.getState(Oe).tasks,Xe=e.listId!==Oe?Ie.getState(e.listId):null,ke=Xe?Xe.tasks:[];return ve.map(dt=>{const at=dt.getAttribute("data-id");if(!at)return null;const mt=parseInt(at,10);let Jt=zt.find(cn=>cn.id===mt);return!Jt&&ke.length>0&&(Jt=ke.find(cn=>cn.id===mt)),Jt||(Jt=m(v).find(cn=>cn.id===mt)),Jt||{id:mt}}).filter(Boolean)}async function W(ee){const{oldIndex:pe,newIndex:ve,from:Oe,to:nt}=ee,zt=e.listId,Xe=nt?.dataset?.listId?parseInt(nt.dataset.listId):e.listId;await ot();const ke=nt||m(D),dt=ne(ke,Xe),at=$v(dt);if(at.length!==0){if(Ie.startDrag(zt,Xe),Ie.updateDragState(Xe,at),zt!==Xe){const Jt=Ie.getState(zt).tasks.filter(cn=>!at.some(jr=>jr.id===cn.id));Ie.updateDragState(zt,Jt)}await ot();try{await ri(Xe,at),Ie.completeDrag(zt,Xe,!0)}catch(mt){console.error("[TASK DRAG] Failed to save task order:",mt),Ie.completeDrag(zt,Xe,!1)}}}function he(){if(!m(D)||m(F))return;const ee=rp({onDragEnd:W,setDragJustEnded:pe=>{K(Q,pe,!0)}});K(F,new Te(m(D),ee),!0)}We(()=>{if(m(F)&&m(Y)!==null&&m(Y)!==e.listId&&(m(F).destroy(),K(F,null)),m(D)&&!m(F)){const ee=setTimeout(()=>{!m(F)&&m(D)&&he()},10);return()=>{clearTimeout(ee)}}}),nc(()=>{m(F)&&(m(F).destroy(),K(F,null))}),We(()=>{f().some(pe=>pe.id===e.listId)&&e.listId?(!m(h)||m(Y)!==e.listId)&&(m(Y)!==e.listId&&K(v,[],!0),Ya(K(h,qa(()=>Dr(e.listId)),!0),"$tasksQuery",a),K(Y,e.listId,!0)):(Ya(K(h,null),"$tasksQuery",a),K(Y,null),K(v,[],!0))}),We(()=>{if(!e.listId)return;const ee=Ie.subscribe(e.listId,pe=>{const ve=pe.tasks.map(nt=>`${nt.id}:${nt.status}:${nt.text||""}`).join(","),Oe=m(v).map(nt=>`${nt.id}:${nt.status}:${nt.text||""}`).join(",");ve!==Oe&&(K(v,pe.tasks,!0),Promise.resolve().then(()=>{if(m(D)){const nt=m(v).map(dt=>dt.id),zt=new Set(nt),Xe=new Map;Array.from(m(D).children).forEach(dt=>{const at=dt.getAttribute("data-id");if(!at)return;const mt=parseInt(at,10);!zt.has(mt)||Xe.has(mt)?dt.remove():Xe.set(mt,dt)})}}))});return()=>{ee()}}),We(()=>{e.listId&&i()&&Array.isArray(i())&&(Ie.initializeFromQuery(e.listId,i()),Promise.resolve().then(()=>{if(m(D)){const ee=new Map;Array.from(m(D).children).forEach(ve=>{const Oe=ve.getAttribute("data-id");if(!Oe)return;const nt=parseInt(Oe,10);ee.has(nt)?ve.remove():ee.set(nt,ve)})}}))});const be=_t(()=>e.listId&&(f().some(ee=>ee.id===e.listId)||l().some(ee=>ee.id===e.listId)));We(()=>lp(m(P),_)),We(()=>cp(m(C),it)),We(()=>fp(m(D),m(v),e.listId,l(),{onTaskTextEdit:(ee,pe,ve)=>{K(w,ee,!0),K(k,pe,!0),x.openModal(ve)}}));const _e={getIsKeyboardTaskDragging:()=>m(q),setIsKeyboardTaskDragging:ee=>{K(q,ee,!0)},getLastKeyboardDraggedTaskId:()=>m(J),setLastKeyboardDraggedTaskId:ee=>{K(J,ee,!0)},getLastBlurredTaskElement:()=>m(U),setLastBlurredTaskElement:ee=>{K(U,ee,!0)},getShouldRefocusTaskOnNextTab:()=>m(N),setShouldRefocusTaskOnNextTab:ee=>{K(N,ee,!0)}},Le=op(_e,()=>m(D)),Qe=sp(_e);We(()=>{if(m(D))return up(_e,m(D),e.listId,l(),()=>m(v),ee=>{K(v,ee,!0)},m(C))});function it(){K(g,!0)}async function ae(ee,pe=""){if(ee.key==="Escape"){let ve=pe||"";if(m(E)?ve=(m(E).value||"").toString():e.newTaskInput&&(ve=(e.newTaskInput||"").toString()),ve.length>0){await Be({closeAfterSave:!0});return}if(K(N,!0),m(C)){const Oe=m(C).querySelector('span[role="button"]');Oe&&Oe instanceof HTMLElement?K(U,Oe,!0):K(U,null)}else K(U,null);K(g,!1),e.onInputChange(""),await ot(),await ot(),await new Promise(Oe=>requestAnimationFrame(Oe)),await new Promise(Oe=>setTimeout(Oe,nl))}}We(()=>{if(m(g))return Ec(()=>m(E),()=>{m(g)&&(K(g,!1),e.onInputChange(""))},{ignoreElements:[],shouldClose:()=>m(E)&&m(E).value.trim()!==""?!1:!e.newTaskInput||e.newTaskInput.trim()===""})});async function Be(ee={}){const pe=ee&&typeof ee=="object"&&ee.closeAfterSave===!0;let ve=e.newTaskInput||"";if(m(E)&&(ve=(m(E).value||"").toString()),ve=(ve||"").toString(),Xv(ve)){K(g,!1),e.onInputChange(""),await ot(),await ot(),await new Promise(nt=>requestAnimationFrame(nt)),await new Promise(nt=>setTimeout(nt,nl));return}const{text:Oe}=wc(ve);try{const nt=await xv(e.listId,Oe),Xe=(m(v).length>0?Math.max(...m(v).map(dt=>dt.order||0)):-1)+1,ke={id:nt,text:Oe,listId:e.listId,order:Xe,status:"unchecked"};K(v,[...m(v),ke],!0),e.onInputChange(""),pe&&K(g,!1)}catch(nt){console.error("Error creating task:",nt)}}async function Ae(ee,pe){try{await el(ee,pe==="unchecked"?"checked":"unchecked")}catch(ve){console.error("Error updating task status:",ve)}}async function et(ee){await el(ee,"archived")}function Fe(){return m(D)?Uv(m(D),"li[data-id]",'span[role="button"]'):null}async function Ge(ee=fs,pe=Sa){m(P)&&await zv(()=>{if(m(C)){const ve=m(C).querySelector('span[role="button"]');if(ve&&ve instanceof HTMLElement)return ve}return null},{maxAttempts:ee,retryInterval:pe,waitForTick:!1})}async function G(ee){try{await et(ee),m(w)===ee&&(K(w,null),K(k,""),x.closeModalWithoutFocus(),await ot(),await new Promise(pe=>setTimeout(pe,rl)),setTimeout(()=>{const pe=(ve=0)=>{const Oe=Fe();Oe?Oe.focus():ve<fs?setTimeout(()=>pe(ve+1),Sa):Ge(Hv,Sa)};pe()},jv))}catch(pe){console.error("Error archiving task:",pe)}}function Z(ee,pe,ve){if(m(Q))return;const Oe=ve?.currentTarget||ve?.target;K(w,ee,!0),K(k,pe,!0),x.openModal(Oe)}function fe(ee,pe,ve){if(ve.key==="Enter"||ve.key===" ")K(w,ee,!0),K(k,pe,!0),x.handleKeydown(ve);else if(ve.key==="Escape"){ve.preventDefault(),ve.stopImmediatePropagation();const Oe=ve.currentTarget;Oe&&Oe instanceof HTMLElement&&(K(U,Oe,!0),K(N,!0),Oe.blur())}}async function De(ee,pe){try{await kv(ee,pe),K(w,null),K(k,""),x.closeModal()}catch(ve){console.error("Error updating task text:",ve)}}function we(){K(w,null),K(k,""),x.closeModal()}async function Je(ee){await G(ee),setTimeout(()=>{if(typeof document>"u")return;const pe=document.activeElement;m(P)&&(!pe||!m(P).contains(pe))&&Ge(fs,Sa)},rl)}function kt(ee){_.handleClick(ee)}function $e(ee){_.handleKeydown(ee)}async function ft(ee,pe){try{await wv(ee,pe),_.closeModal()}catch(ve){console.error("Error updating list name:",ve)}}function Tt(){_.closeModal()}async function Ve(ee){try{await Iv(ee),await Sv(ee)}catch(pe){console.error("Error archiving list:",pe)}}var tt=Ip(),vt=Lt(tt),St=ye(vt),It=ye(St),sn=ye(It);sn.__click=kt,sn.__keydown=$e;var ue=ye(sn);Pt(St,ee=>K(M,ee),()=>m(M));var un=Re(St,2);{var Zt=ee=>{var pe=Sp(),ve=ye(pe);ei(ve,21,()=>m(v),Xe=>Xe.id,(Xe,ke)=>{var dt=kp(),at=ye(dt);at.__change=()=>Ae(m(ke).id,m(ke).status),at.__keydown=ut=>{if(ut.key==="Enter"||ut.key===" ")ut.preventDefault(),ut.stopPropagation(),ut.stopImmediatePropagation(),Ae(m(ke).id,m(ke).status);else if(ut.key==="Escape"){ut.preventDefault(),ut.stopPropagation(),ut.stopImmediatePropagation();const Zn=ut.currentTarget;if(Zn&&Zn instanceof HTMLElement){const $t=Zn.closest("li[data-id]");$t&&$t instanceof HTMLElement&&(K(U,$t,!0),K(N,!0)),Zn.blur()}}};var mt=Re(at,2);mt.__click=ut=>Z(m(ke).id,m(ke).text,ut),mt.__keydown=ut=>fe(m(ke).id,m(ke).text,ut);var Jt=ye(mt),cn=Re(mt,2);{var jr=ut=>{{let Zn=_t(()=>`Archive task: ${m(ke).text||"blank task"}`);wn(ut,{variant:"secondary",size:"small",onclick:()=>G(m(ke).id),class:"print:hidden",get"aria-label"(){return m(Zn)},children:($t,qi)=>{var ho=_n("Archive");ce($t,ho)},$$slots:{default:!0}})}};st(cn,ut=>{m(ke).status==="checked"&&ut(jr)})}xt(()=>{bt(dt,"data-id",m(ke).id),bt(dt,"aria-label",`Task: ${m(ke).text||"blank task"}`),Ch(at,m(ke).status==="checked"),bt(at,"aria-label",`Mark task "${m(ke).text||"blank task"}" as ${m(ke).status==="checked"?"unchecked":"checked"}`),Or(mt,1,Zl(m(ke).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1 font-urbanist text-grey-100":"cursor-pointer hover:underline break-words flex-1 font-urbanist text-grey-100")),bt(mt,"aria-label",`Edit task: ${m(ke).text||"blank task"}`),Ir(Jt,m(ke).text||"Â ")}),hr("keydown",dt,ut=>Le(ut,m(ke).id),!0),hr("blur",dt,ut=>Qe(ut,m(ke).id)),ce(Xe,dt)}),Pt(ve,Xe=>K(D,Xe),()=>m(D));var Oe=Re(ve,2);{var nt=Xe=>{var ke=Tp(),dt=ye(ke);ds(dt,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Be,onEscape:ae,onActivate:it,buttonText:"Add your first task",placeholder:"start typing...",get ariaLabel(){return`Add your first task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return m(g)},set isInputActive(at){K(g,at,!0)},get containerElement(){return m(C)},set containerElement(at){K(C,at,!0)},get textareaElement(){return m(E)},set textareaElement(at){K(E,at,!0)}}),ce(Xe,ke)},zt=Xe=>{ds(Xe,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Be,onEscape:ae,onActivate:it,buttonText:"Add Task",placeholder:"start typing...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return m(g)},set isInputActive(ke){K(g,ke,!0)},get containerElement(){return m(C)},set containerElement(ke){K(C,ke,!0)},get textareaElement(){return m(E)},set textareaElement(ke){K(E,ke,!0)}})};st(Oe,Xe=>{m(v).length===0?Xe(nt):Xe(zt,!1)})}xt(()=>{bt(ve,"data-list-id",e.listId),Or(ve,1,`space-y-0 m-0 p-0 list-none w-full ${m(v).length===0?"empty-drop-zone":""}`),On(ve,m(v).length===0?"height: var(--line-height-body); padding-top: var(--task-item-padding-y); padding-bottom: var(--task-item-padding-y); box-sizing: content-box;":"")}),ce(ee,pe)},kn=ee=>{var pe=Ap(),ve=Re(Lt(pe),2);ds(ve,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Be,onEscape:ae,onActivate:it,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return m(g)},set isInputActive(Oe){K(g,Oe,!0)},get containerElement(){return m(C)},set containerElement(Oe){K(C,Oe,!0)},get textareaElement(){return m(E)},set textareaElement(Oe){K(E,Oe,!0)}}),ce(ee,pe)};st(un,ee=>{m(be)?ee(Zt):ee(kn,!1)})}Pt(vt,ee=>K(P,ee),()=>m(P));var He=Re(vt,2);pp(He,{get isOpen(){return x.isOpen},get taskId(){return m(w)},get taskText(){return m(k)},get taskPosition(){return x.position},onSave:De,onCancel:we,onArchive:Je});var ln=Re(He,2);_p(ln,{get isOpen(){return _.isOpen},get listId(){return e.listId},get listName(){return e.listName},get listPosition(){return _.position},onSave:ft,onCancel:Tt,onArchive:Ve}),xt(()=>{bt(vt,"data-list-id",e.listId),bt(sn,"aria-label",`Rename list: ${e.listName}`),Ir(ue,e.listName)}),ce(t,tt),Xn(),s()}Hr(["click","keydown","change"]);var Cp=Pe('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Pp=Pe('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Lp=Pe('<div class="create-list-container flex flex-col w-full print:hidden create-list-empty-column"><!></div>'),Op=Pe('<div class="flex flex-col" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),Mp=Pe('<div class="flex flex-col"></div>'),Rp=Pe('<div class="empty-drop-zone" style="min-height: var(--grid-unit);" tabindex="-1"></div>'),Kp=Pe('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Bp=Pe('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Fp=Pe('<div class="create-list-container flex flex-col w-full print:hidden"><!></div>'),Np=Pe('<div style="gap: var(--list-gap);"><!> <div class="sortable-column-container flex flex-col pt-0 gap-y-6 min-h-0 overflow-y-auto overflow-x-hidden px-1"><!> <!></div> <!></div>');function Hp(t,e){Gn(e,!0);let i=Ft(e,"createListInput",15,""),a=Ft(e,"createListInputElement",15,null),s=Ft(e,"onColumnElementReady",3,()=>{}),l=me(null),f=me(null),h=me(null),v=me(null);We(()=>{m(l)&&s()&&s()(m(l),e.columnIndex)}),We(()=>{if(!m(f)||!(m(f)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(m(f).style.outline="none",m(f).style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",m(f).style.borderRadius="4px"):(m(f).style.outline="",m(f).style.boxShadow="",m(f).style.borderRadius="")}),We(()=>{if(!m(l)||!(m(l)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(m(l).style.flex="1 1 auto",m(l).style.minHeight="0"):(m(l).style.flex="",m(l).style.minHeight="")});var g=Np(),x=ye(g);{var _=M=>{var U=Lp(),N=ye(U);{var q=Y=>{var F=Cp(),Q=ye(F),ne=ye(Q);ne.__keydown=W=>{W.key==="Enter"&&!W.shiftKey?(W.preventDefault(),e.onCreateList(e.columnIndex)):W.key==="Escape"?e.onCreateListInputEscape(W,e.columnIndex,!0):W.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Pt(ne,W=>a(W),()=>a()),Ua(ne,i),ce(Y,F)},J=Y=>{var F=Pp(),Q=ye(F);Q.__click=()=>e.onCreateListClick(e.columnIndex),Q.__keydown=ne=>e.onCreateListKeydown(ne,e.columnIndex),Pt(Q,ne=>K(v,ne),()=>m(v)),ce(Y,F)};st(N,Y=>{e.createListColumnIndex===e.columnIndex?Y(q):Y(J,!1)})}ce(M,U)};st(x,M=>{e.columnLists.length===0&&M(_)})}var w=Re(x,2),k=ye(w);ei(k,19,()=>e.columnLists,M=>M.id,(M,U)=>{const N=_t(()=>mc(m(U))),q=_t(()=>e.stableLists.find(he=>he.id===m(U).id)),J=_t(()=>!m(q)&&!m(N)?m(U):null),Y=_t(()=>m(q)||m(J));var F=jn(),Q=Lt(F);{var ne=he=>{var be=Op(),_e=ye(be);{let Le=_t(()=>m(Y).name??"Unnamed list"),Qe=_t(()=>e.newTaskInputs[m(Y).id]||"");Dp(_e,{get listId(){return m(Y).id},get listName(){return m(Le)},get newTaskInput(){return m(Qe)},onInputChange:it=>e.onInputChange(m(Y).id,it),get allLists(){return e.allLists},get stableLists(){return e.stableLists}})}xt(()=>{bt(be,"data-id",m(U).id),bt(be,"aria-label",`List: ${m(Y).name??"Unnamed list"}`),bt(be,"aria-pressed",e.keyboardListDrag?.active&&e.keyboardListDrag?.listId===m(Y).id?"true":"false")}),hr("keydown",be,Le=>e.onListKeyboardKeydown(Le,m(Y).id),!0),ce(he,be)},W=he=>{var be=Mp();xt(()=>bt(be,"data-id",m(U).id)),ce(he,be)};st(Q,he=>{m(Y)?he(ne):he(W,!1)})}ce(M,F)});var D=Re(k,2);{var P=M=>{var U=Rp();Pt(U,N=>K(h,N),()=>m(h)),ce(M,U)};st(D,M=>{e.columnLists.length===0&&M(P)})}Pt(w,M=>K(l,M),()=>m(l));var C=Re(w,2);{var E=M=>{var U=Fp(),N=ye(U);{var q=Y=>{var F=Kp(),Q=ye(F),ne=ye(Q);ne.__keydown=W=>{W.key==="Enter"&&!W.shiftKey?(W.preventDefault(),e.onCreateList(e.columnIndex)):W.key==="Escape"?e.onCreateListInputEscape(W,e.columnIndex,!1):W.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Pt(ne,W=>a(W),()=>a()),Ua(ne,i),ce(Y,F)},J=Y=>{var F=Bp(),Q=ye(F);Q.__click=()=>e.onCreateListClick(e.columnIndex),Q.__keydown=ne=>e.onCreateListKeydown(ne,e.columnIndex),Pt(Q,ne=>K(v,ne),()=>m(v)),ce(Y,F)};st(N,Y=>{e.createListColumnIndex===e.columnIndex?Y(q):Y(J,!1)})}ce(M,U)};st(C,M=>{e.columnLists.length>0&&M(E)})}Pt(g,M=>K(f,M),()=>m(f)),xt(()=>{Or(g,1,`flex flex-col pt-0 min-w-0 px-2 h-full ${e.columnIndex<4?"border-r border-grey-50":""}`,"svelte-785piu"),bt(g,"data-column-index",e.columnIndex)}),ce(t,g),Xn()}Hr(["keydown","click"]);var jp=Pe("<p>Loading...</p>"),zp=Pe('<div class="grid grid-cols-5 w-full h-full px-1" style="padding-top: var(--board-padding-y); padding-bottom: var(--board-padding-y);"></div>'),Up=Pe('<div class="w-full h-full overflow-hidden"><!></div>');function Vp(t,e){Gn(e,!0);const i=()=>Va(l,"$lists",a),[a,s]=Us();let l=qa(()=>mv()),f=_t(()=>i()||[]),h=me(an([])),v=me(an({})),g=me(null),x=me(""),_=me(null),w=me(an({active:!1,listId:null,lastDraggedId:null,shouldRefocusOnNextTab:!1})),k=an(new Map);function D(G){k.forEach(Z=>{Z&&Z.option("disabled",G)})}We(()=>{if(typeof document>"u")return;const G=new MutationObserver(()=>{const fe=document.querySelector(".modal-backdrop");D(!!fe)});G.observe(document.body,{childList:!0,subtree:!0});const Z=document.querySelector(".modal-backdrop");return D(!!Z),()=>{G.disconnect()}});function P(G,Z){if(!G)return[];const fe=Array.from(G.children),De=new Set,we=[],kt=yn.getState().lists;for(const $e of fe){const ft=$e.getAttribute("data-id");if(!ft)continue;const Tt=parseInt(ft,10);if(De.has(Tt))continue;De.add(Tt);const Ve=kt.find(tt=>tt.id===Tt);if(Ve)we.push({...Ve,columnIndex:Z});else{const tt=m(h).find(vt=>vt.id===Tt);tt&&we.push({...tt,columnIndex:Z})}}return we}function C(G){if(!G)return null;let Z=G;for(;Z&&Z!==document.body;){if(Z instanceof HTMLElement){const fe=Z.getAttribute("data-column-index");if(fe!==null)return parseInt(fe,10)}Z=Z.parentElement}return null}async function E(G,Z){const{to:fe}=G,De=fe,we=C(De);if(we===null){console.error("[LIST DRAG] Could not determine target column index");return}const Je=we!==Z;if(await ot(),Je){const Ve=document.querySelectorAll("[data-column-index]"),tt=new Map;Ve.forEach(vt=>{if(vt.getAttribute("data-column-index")===null)return;const It=vt.firstElementChild;if(!It||!(It instanceof HTMLElement))return;Array.from(It.children).forEach(ue=>{const un=ue.getAttribute("data-id");if(!un)return;const Zt=parseInt(un,10);tt.has(Zt)?ue.remove():tt.set(Zt,ue)})}),await ot()}const kt=P(De,we),$e=Lv(kt),ft=new Set,Tt=$e.filter(Ve=>ft.has(Ve.id)?!1:(ft.add(Ve.id),!0));if(Tt.length!==0){if(yn.startDrag(),yn.updateDragState(we,Tt),await ot(),await ot(),Je){const Ve=document.querySelectorAll("[data-column-index]"),tt=new Map;Ve.forEach(ue=>{if(ue.getAttribute("data-column-index")===null)return;const Zt=ue.firstElementChild;if(!Zt||!(Zt instanceof HTMLElement))return;Array.from(Zt.children).forEach(He=>{const ln=He.getAttribute("data-id");if(!ln)return;const ee=parseInt(ln,10);tt.has(ee)?He.remove():tt.set(ee,He)})}),await ot(),await ot();const vt=k.get(Z),St=k.get(we);vt&&(vt.destroy(),k.delete(Z)),St&&(St.destroy(),k.delete(we)),await ot();const It=document.querySelector(`[data-column-index="${Z}"] .sortable-column-container`),sn=document.querySelector(`[data-column-index="${we}"] .sortable-column-container`);It&&setTimeout(()=>{M(It,Z)},10),sn&&setTimeout(()=>{M(sn,we)},10)}try{if(await tl(we,Tt),yn.completeDrag(!0),Tt.length===0){const Ve=document.querySelector(`[data-column-index="${we}"] .sortable-column-container`);if(Ve){const tt=k.get(we);tt&&(tt.destroy(),k.delete(we)),await ot(),M(Ve,we)}}}catch(Ve){console.error("[LIST DRAG] Failed to save list order:",Ve),yn.completeDrag(!1)}}}function M(G,Z){if(!G||k.has(Z))return;let fe=null;const De=Rv({onDragEnd:E,columnIndex:Z,getSortableInstance:()=>fe});fe=new Te(G,De),k.set(Z,fe)}nc(()=>{k.forEach(G=>{G&&G.destroy()}),k.clear()}),We(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(m(v)).length===0){const G={};for(const Z of i())G[Z.id]="";K(v,G,!0)}}),We(()=>{if(i()&&Array.isArray(i())&&i().length>0){const G={...m(v)};let Z=!1;for(const fe of i())fe.id in G||(G[fe.id]="",Z=!0);Z&&K(v,G,!0)}}),We(()=>{const G=yn.subscribe(Z=>{K(h,Z.lists,!0)});return()=>{G()}}),We(()=>{i()&&Array.isArray(i())&&yn.initializeFromQuery(i())});const U=5;let N=_t(()=>yc(m(h),U));async function q(G,Z){const fe=m(N);if(!fe||fe.length===0)return;const De=Pv(fe,G,Z,U);if(!De)return;De.updatedDraggableLists;const we="targetColumnIndex"in De&&De.targetColumnIndex!==void 0?Number(De.targetColumnIndex):0,Je="targetColumnItems"in De&&De.targetColumnItems!==void 0&&Array.isArray(De.targetColumnItems)?De.targetColumnItems:[];if(Je.length!==0){yn.startDrag(),yn.updateDragState(we,Je);try{const kt=Array.isArray(Je)?Je:[];await tl(we,kt),yn.completeDrag(!0)}catch(kt){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",kt),yn.completeDrag(!1)}m(w).active&&m(w).listId===G&&await _c(G)}}function J(G){return m(w).active===!0&&m(w).listId===G}function Y(G){K(w,{...m(w),active:!0,listId:G,shouldRefocusOnNextTab:!1},!0)}function F(){m(w).listId!=null?K(w,{...m(w),active:!1,listId:null,lastDraggedId:m(w).listId,shouldRefocusOnNextTab:!0},!0):K(w,{...m(w),active:!1,listId:null},!0)}function Q(){if(typeof document>"u")return;const G=document.activeElement;G&&G instanceof HTMLElement&&G.blur()}function ne(G,Z){const fe=G.currentTarget,De=G.target,we=G.key;if(!J(Z)){we==="Enter"||we===" "?fe instanceof HTMLElement&&fe===De&&(G.preventDefault(),G.stopPropagation(),G.stopImmediatePropagation(),Z!=null&&Y(Z)):we==="Escape"&&fe instanceof HTMLElement&&fe===De&&(G.preventDefault(),G.stopPropagation(),G.stopImmediatePropagation(),Z!=null&&K(w,{...m(w),lastDraggedId:Z,shouldRefocusOnNextTab:!0},!0),fe.blur());return}}We(()=>{typeof document>"u"||(m(w).active?document.body.classList.add("keyboard-list-dragging-active"):document.body.classList.remove("keyboard-list-dragging-active"))}),We(()=>typeof document>"u"?void 0:Gv({getKeyboardListDrag:()=>({active:m(w).active,listId:m(w).listId}),getLastKeyboardDraggedListId:()=>m(w).lastDraggedId,getShouldRefocusListOnNextTab:()=>m(w).shouldRefocusOnNextTab,setShouldRefocusListOnNextTab:Z=>{K(w,{...m(w),shouldRefocusOnNextTab:Z},!0)}},(Z,fe)=>q(Z,fe),()=>F(),()=>Q()));function W(G,Z){m(v)[G]=Z}const he=Zv({getColumnIndex:()=>m(g),setColumnIndex:G=>{K(g,G,!0)},getInput:()=>m(x),setInput:G=>{K(x,G,!0)},getInputElement:()=>m(_)}),{handleCreateListClick:be,handleCreateListKeydown:_e,handleCreateListInputEscape:Le,handleCreateList:Qe,handleCreateListOnTab:it,setupClickOutsideEffect:ae,setupFocusEffect:Be}=he;We(()=>ae()),We(()=>Be());var Ae=Up(),et=ye(Ae);{var Fe=G=>{var Z=jp();ce(G,Z)},Ge=G=>{var Z=jn(),fe=Lt(Z);{var De=we=>{var Je=zp();ei(Je,21,()=>m(N),Ia,(kt,$e,ft)=>{{let Tt=_t(()=>({active:m(w).active,listId:m(w).listId}));Hp(kt,{columnIndex:ft,get columnLists(){return m($e)},get stableLists(){return m(f)},get newTaskInputs(){return m(v)},get createListColumnIndex(){return m(g)},get keyboardListDrag(){return m(Tt)},onInputChange:W,onListKeyboardKeydown:ne,get onCreateListClick(){return be},get onCreateListKeydown(){return _e},get onCreateListInputEscape(){return Le},get onCreateList(){return Qe},get onCreateListOnTab(){return it},onColumnElementReady:(Ve,tt)=>{Ve&&setTimeout(()=>{M(Ve,tt)},10)},get allLists(){return i()},get createListInput(){return m(x)},set createListInput(Ve){K(x,Ve,!0)},get createListInputElement(){return m(_)},set createListInputElement(Ve){K(_,Ve,!0)}})}}),ce(we,Je)};st(fe,we=>{Array.isArray(i())&&we(De)},!0)}ce(G,Z)};st(et,G=>{i()===void 0||i()===null?G(Fe):G(Ge,!1)})}ce(t,Ae),Xn(),s()}var Yp=Pe("<p>Loading...</p>"),Wp=Pe("<p>Loading data...</p>"),qp=Pe('<p class="text-grey-60">No archived lists or tasks</p>'),Gp=Pe('<span class="text-sm text-grey-60"> </span>'),Xp=Pe('<span class="text-xs bg-grey-30 px-2 py-1 rounded">[List Archived]</span> <!>',1),Qp=Pe('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),Zp=Pe('<p class="text-sm text-grey-60 italic">No archived tasks</p>'),Jp=Pe('<li class="flex items-center gap-3 flex-wrap"><span class="line-through text-grey-100"> </span> <!></li>'),$p=Pe('<div class="mb-4"><h4 class="text-sm font-medium text-grey-60 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),eg=Pe('<div class="border-b border-grey-50 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold text-grey-110"> </h3> <!></div></div> <div class="border-b border-grey-50 pb-4"><!></div>',1),tg=Pe('<div class="grid grid-cols-2 gap-4"></div>'),ng=Pe('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function rg(t,e){Gn(e,!0);const i=()=>Va(m(h),"$listsQuery",s),a=()=>Va(m(f),"$archivedTasksQuery",s),[s,l]=Us();let f=me(null),h=me(null);We(()=>{Ya(K(f,qa(()=>Ev()),!0),"$archivedTasksQuery",s),Ya(K(h,qa(()=>yv()),!0),"$listsQuery",s)});function v(E){return E?new Date(E).toDateString():null}function g(E){return E?new Date(E).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let x=_t(()=>{const E=m(f)?a():null,M=m(h)?i():null;if(!M||!Array.isArray(M))return[];const U={};if(E&&Array.isArray(E))for(const q of E)U[q.listId]||(U[q.listId]=[]),U[q.listId].push(q);const N=[];for(const q of M){const J=q.archivedAt!=null,Y=U[q.id]&&U[q.id].length>0;if(J||Y){const F=U[q.id]||[],Q={};for(const ne of F){const W=v(ne.archivedAt)||"Unknown";Q[W]||(Q[W]=[]),Q[W].push(ne)}N.push({list:q,listArchiveDate:q.archivedAt?v(q.archivedAt):null,tasksByDate:Q,hasTasks:F.length>0})}}return N.sort((q,J)=>{if(q.list.order!==J.list.order)return q.list.order-J.list.order;const Y=q.list.name??"Unnamed list",F=J.list.name??"Unnamed list";return Y.localeCompare(F)}),N});function _(E){return E.sort((M,U)=>{if(M==="Unknown")return 1;if(U==="Unknown")return-1;const N=new Date(M).getTime();return new Date(U).getTime()-N})}async function w(E){try{(await Tv(E)).listRestored}catch(M){console.error("Error restoring task:",M)}}var k=ng(),D=Re(ye(k),2);{var P=E=>{var M=Yp();ce(E,M)},C=E=>{var M=jn(),U=Lt(M);{var N=J=>{var Y=Wp();ce(J,Y)},q=J=>{var Y=jn(),F=Lt(Y);{var Q=W=>{var he=qp();ce(W,he)},ne=W=>{var he=tg();ei(he,21,()=>m(x),Ia,(be,_e)=>{const Le=_t(()=>m(_e).list),Qe=_t(()=>m(Le).name??"Unnamed list"),it=_t(()=>m(Le).archivedAt!=null),ae=_t(()=>m(_e).listArchiveDate);var Be=eg(),Ae=Lt(Be),et=ye(Ae),Fe=ye(et),Ge=ye(Fe),G=Re(Fe,2);{var Z=$e=>{var ft=Xp(),Tt=Re(Lt(ft),2);{var Ve=tt=>{var vt=Gp(),St=ye(vt);xt(It=>Ir(St,`- ${It??""}`),[()=>g(m(ae))]),ce(tt,vt)};st(Tt,tt=>{m(ae)&&tt(Ve)})}ce($e,ft)},fe=$e=>{var ft=Qp();ce($e,ft)};st(G,$e=>{m(it)?$e(Z):$e(fe,!1)})}var De=Re(Ae,2),we=ye(De);{var Je=$e=>{var ft=Zp();ce($e,ft)},kt=$e=>{var ft=jn(),Tt=Lt(ft);ei(Tt,17,()=>_(Object.keys(m(_e).tasksByDate)),Ia,(Ve,tt)=>{const vt=_t(()=>m(_e).tasksByDate[m(tt)]);var St=$p(),It=ye(St),sn=ye(It),ue=Re(It,2);ei(ue,21,()=>m(vt),Ia,(un,Zt)=>{var kn=Jp(),He=ye(kn),ln=ye(He),ee=Re(He,2);wn(ee,{variant:"primary",size:"small",onclick:()=>w(m(Zt).id),children:(pe,ve)=>{var Oe=_n("Restore");ce(pe,Oe)},$$slots:{default:!0}}),xt(()=>Ir(ln,m(Zt).text)),ce(un,kn)}),xt(un=>Ir(sn,un),[()=>m(tt)==="Unknown"?"Unknown Date":g(m(tt))]),ce(Ve,St)}),ce($e,ft)};st(we,$e=>{m(_e).hasTasks?$e(kt,!1):$e(Je)})}xt(()=>Ir(Ge,m(Qe))),ce(be,Be)}),ce(W,he)};st(F,W=>{m(x).length===0?W(Q):W(ne,!1)},!0)}ce(J,Y)};st(U,J=>{!a()||!i()?J(N):J(q,!1)},!0)}ce(E,M)};st(D,E=>{!m(f)||!m(h)?E(P):E(C,!1)})}xt(()=>On(k,`width: ${eo}px;`)),ce(t,k),Xn(),l()}var ig=Pe('<header class="print:hidden"><div class="flex items-center justify-between py-4"><h1 class="text-grey-110 font-gilda text-[32px] leading-none m-0">MERINI</h1> <!></div></header>');function ag(t,e){var i=ig(),a=ye(i),s=Re(ye(a),2);wn(s,{variant:"secondary",size:"medium",get onclick(){return e.onSettingsClick},ariaLabel:"Open settings",children:(l,f)=>{var h=_n("Settings");ce(l,h)},$$slots:{default:!0}}),xt(()=>On(i,`width: ${eo}px;`)),ce(t,i)}const al={small:{body:10,heading:16,checkbox:16,gridUnit:20,lineHeight:20,listTitlePaddingY:8,listTitlePaddingX:8,taskItemPaddingY:8,taskItemGap:8,addTaskPaddingY:8,listSpacingTop:10,listGap:12,boardPaddingY:8},medium:{body:12,heading:18,checkbox:18,gridUnit:24,lineHeight:20,listTitlePaddingY:10,listTitlePaddingX:8,taskItemPaddingY:10,taskItemGap:8,addTaskPaddingY:10,listSpacingTop:12,listGap:16,boardPaddingY:12},large:{body:14,heading:20,checkbox:20,gridUnit:28,lineHeight:24,listTitlePaddingY:12,listTitlePaddingX:8,taskItemPaddingY:12,taskItemGap:8,addTaskPaddingY:12,listSpacingTop:14,listGap:20,boardPaddingY:14}},Ac="fontSize",As="medium";function Ic(){if(typeof window>"u")return As;const t=localStorage.getItem(Ac);return t==="small"||t==="medium"||t==="large"?t:As}function og(t){typeof window>"u"||(t==="small"||t==="medium"||t==="large")&&localStorage.setItem(Ac,t)}function Dc(t){if(typeof document>"u")return;const e=al[t]||al[As],i=document.documentElement;i.style.setProperty("--font-size-body",`${e.body}px`),i.style.setProperty("--font-size-heading",`${e.heading}px`),i.style.setProperty("--checkbox-size",`${e.checkbox}px`),i.style.setProperty("--grid-unit",`${e.gridUnit}px`),i.style.setProperty("--grid-unit-half",`${e.gridUnit/2}px`),i.style.setProperty("--line-height-body",`${e.lineHeight}px`),i.style.setProperty("--line-height-heading",`${Math.round(e.heading*1.2)}px`),i.style.setProperty("--list-title-padding-y",`${e.listTitlePaddingY}px`),i.style.setProperty("--list-title-padding-x",`${e.listTitlePaddingX}px`),i.style.setProperty("--task-item-padding-y",`${e.taskItemPaddingY}px`),i.style.setProperty("--task-item-gap",`${e.taskItemGap}px`),i.style.setProperty("--add-task-padding-y",`${e.addTaskPaddingY}px`),i.style.setProperty("--list-spacing-top",`${e.listSpacingTop}px`),i.style.setProperty("--list-gap",`${e.listGap}px`),i.style.setProperty("--board-padding-y",`${e.boardPaddingY}px`)}function sg(){const t=Ic();return Dc(t),t}function ug(t){(t==="small"||t==="medium"||t==="large")&&(og(t),Dc(t))}var lg=Pe('<div class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 z-40" role="dialog" aria-modal="true" aria-labelledby="settings-flyout-title" tabindex="-1"><div class="fixed right-0 top-0 h-full w-[400px] bg-white shadow-xl z-50 flex flex-col" role="document"><div class="flex items-center justify-between p-6 border-b border-grey-50"><h2 id="settings-flyout-title" class="text-grey-110 font-gilda text-[24px] leading-none m-0">Settings</h2> <button type="button" aria-label="Close settings" class="focus:outline-none focus:ring-2 focus:ring-blue-500 text-grey-110 hover:text-grey-90 text-2xl leading-none w-8 h-8 flex items-center justify-center">Ã</button></div> <div class="flex-1 p-6 overflow-y-auto"><div class="bg-grey-20 rounded-lg p-4 mb-6"><label class="block text-grey-110 font-gilda text-sm font-medium mb-3">Font Size</label> <div class="flex gap-2"><button type="button" aria-label="Small font size (10px body, 12px heading)">Small</button> <button type="button" aria-label="Medium font size (12px body, 14px heading)">Medium</button> <button type="button" aria-label="Large font size (14px body, 16px heading)">Large</button></div></div></div></div></div>');function cg(t,e){Gn(e,!0);let i=me("medium");function a(E){ug(E),K(i,E,!0)}We(()=>{e.isOpen&&K(i,Ic(),!0)});let s=me(null),l=me(null);function f(){e.onClose()}function h(E){E.target===E.currentTarget&&f()}function v(E){E.target===E.currentTarget?K(l,E.target,!0):K(l,null),E.stopPropagation(),E.preventDefault()}function g(E){E.target===E.currentTarget&&m(l)===E.currentTarget&&(E.preventDefault(),E.stopPropagation(),f()),K(l,null),E.stopPropagation()}function x(E){E.stopPropagation(),E.preventDefault()}function _(E){return E.preventDefault(),E.stopPropagation(),!1}function w(E){return E.preventDefault(),E.stopPropagation(),!1}function k(E){if(E.key==="Escape")f();else if(E.key==="Tab"){if(!m(s))return;const M=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),U=Array.from(m(s).querySelectorAll(M)).filter(F=>!(!(F instanceof HTMLElement)||F.hasAttribute("disabled")||F.getAttribute("aria-hidden")==="true"));if(U.length===0)return;const N=document.activeElement,q=U.indexOf(N);let J;E.shiftKey?q<=0?J=U.length-1:J=q-1:q===-1||q===U.length-1?J=0:J=q+1,E.preventDefault(),E.stopPropagation();const Y=U[J];Y&&Y instanceof HTMLElement&&Y.focus()}}We(()=>{e.isOpen&&m(s)&&setTimeout(()=>{const E=m(s)?.querySelector('button[aria-label="Close settings"]');E&&E instanceof HTMLElement&&E.focus()},0)}),We(()=>{if(e.isOpen)return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}});var D=jn(),P=Lt(D);{var C=E=>{var M=lg();M.__click=h,M.__mousedown=v,M.__mouseup=g,M.__mousemove=x;var U=ye(M);U.__click=he=>he.stopPropagation();var N=ye(U),q=Re(ye(N),2);q.__click=f;var J=Re(N,2),Y=ye(J),F=Re(ye(Y),2),Q=ye(F);Q.__click=()=>a("small");var ne=Re(Q,2);ne.__click=()=>a("medium");var W=Re(ne,2);W.__click=()=>a("large"),Pt(U,he=>K(s,he),()=>m(s)),xt(()=>{bt(Q,"aria-pressed",m(i)==="small"),Or(Q,1,`flex-1 px-4 py-2 text-sm font-urbanist transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${m(i)==="small"?"bg-grey-80 text-grey-110":"bg-white text-grey-110 hover:bg-grey-30"}`),bt(ne,"aria-pressed",m(i)==="medium"),Or(ne,1,`flex-1 px-4 py-2 text-sm font-urbanist transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${m(i)==="medium"?"bg-grey-80 text-grey-110":"bg-white text-grey-110 hover:bg-grey-30"}`),bt(W,"aria-pressed",m(i)==="large"),Or(W,1,`flex-1 px-4 py-2 text-sm font-urbanist transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${m(i)==="large"?"bg-grey-80 text-grey-110":"bg-white text-grey-110 hover:bg-grey-30"}`)}),hr("dragstart",M,_),hr("drag",M,w),ce(E,M)};st(P,E=>{e.isOpen&&E(C)})}ce(t,D),Xn()}Hr(["click","mousedown","mouseup","mousemove"]);var fg=Pe('<main class="min-h-screen flex flex-col items-center justify-start bg-grey-10 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 pt-4 pb-8 svelte-1n46o8q"><!> <div class="flex justify-end print:hidden"><!></div> <div class="bg-grey-10 print:bg-grey-10 border-2 border-grey-50 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-grey-80 pointer-events-none z-0"></div> <div class="absolute inset-[16px] z-10"><!></div></div> <!> <!></main>');function dg(t){let e=me(!1);function i(){K(e,!0)}function a(){K(e,!1)}function s(){window.print()}var l=fg(),f=ye(l);ag(f,{onSettingsClick:i});var h=Re(f,2),v=ye(h);wn(v,{variant:"primary",size:"large",onclick:s,children:(D,P)=>{var C=_n("Print");ce(D,C)},$$slots:{default:!0}});var g=Re(h,2),x=Re(ye(g),2),_=ye(x);Vp(_,{});var w=Re(g,2);rg(w,{});var k=Re(w,2);cg(k,{get isOpen(){return m(e)},onClose:a}),xt(()=>{On(h,`width: ${eo}px;`),On(g,`width: ${eo}px; height: ${Bv}px;`)}),ce(t,l)}const hg=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],vg=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function pg(){try{if(await Ke.lists.count()>0)return;await Ke.lists.bulkAdd(hg),await Ke.tasks.bulkAdd(vg)}catch(t){throw console.error("Error seeding database:",t),t}}(async()=>{try{sg(),await pg().catch(console.error);const t=document.getElementById("app");if(!t){console.error("App element not found!");return}bh(dg,{target:t})}catch(t){console.error("Error initializing app:",t)}})();
