(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();const jf="production",le=!jf.toLowerCase().startsWith("prod");var Ds=Array.isArray,Uf=Array.prototype.indexOf,Cs=Array.from,cr=Object.defineProperty,Dr=Object.getOwnPropertyDescriptor,zf=Object.getOwnPropertyDescriptors,Vf=Object.prototype,Yf=Array.prototype,sl=Object.getPrototypeOf,Cu=Object.isExtensible;const Ka=()=>{};function Wf(t){for(var e=0;e<t.length;e++)t[e]()}function ul(){var t,e,i=new Promise((a,s)=>{t=a,e=s});return{promise:i,resolve:t,reject:e}}const Ot=2,Ls=4,Ps=8,ll=1<<24,zn=16,Vn=32,Mr=64,io=128,wn=512,Ht=1024,Xt=2048,Yn=4096,on=8192,Nn=16384,Os=32768,ni=65536,Ba=1<<17,cl=1<<18,ci=1<<19,qf=1<<20,fr=32768,vs=1<<21,ao=1<<22,or=1<<23,Cr=Symbol("$state"),Gf=Symbol("legacy props"),Xf=Symbol(""),fl=Symbol("proxy path"),Xr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function dl(t){if(le){const e=new Error(`lifecycle_outside_component
\`${t}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Qf(){if(le){const t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Lu(){if(le){const t=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Zf(){if(le){const t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function Jf(t){if(le){const e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function $f(){if(le){const t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ed(t){if(le){const e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function td(){if(le){const t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function nd(t){if(le){const e=new Error(`props_invalid_value
Cannot do \`bind:${t}={undefined}\` when \`${t}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_invalid_value")}function rd(t){if(le){const e=new Error(`props_rest_readonly
Rest element properties of \`$props()\` such as \`${t}\` are readonly
https://svelte.dev/e/props_rest_readonly`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_rest_readonly")}function id(t){if(le){const e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function ad(){if(le){const t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function od(){if(le){const t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function sd(){if(le){const t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ud(){if(le){const t=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const hl=1,vl=2,pl=4,ld=8,cd=16,fd=1,dd=2,hd=4,vd=8,pd=16,md=1,gd=2,Lt=Symbol(),yd=Symbol("filename"),bd="http://www.w3.org/1999/xhtml",_d="@attach";var Ms="font-weight: bold",Rs="font-weight: normal";function wd(){le?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Ms,Rs):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Qo(t){le?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Ms,Rs):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Ed(){le?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Ms,Rs):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ml(t){return t===this.v}function xd(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function gl(t){return!xd(t,this.v)}let fi=!1,kd=!1;function Td(){fi=!0}function Sn(t,e){return t.label=e,yl(t.v,e),t}function yl(t,e){return t?.[fl]?.(e),t}function Sd(t){const e=new Error,i=Ad();return i.length===0?null:(i.unshift(`
`),cr(e,"stack",{value:i.join(`
`)}),cr(e,"name",{value:t}),e)}function Ad(){const t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const e=new Error().stack;if(Error.stackTraceLimit=t,!e)return[];const i=e.split(`
`),a=[];for(let s=0;s<i.length;s++){const l=i[s],f=l.replaceAll("\\","/");if(l.trim()!=="Error"){if(l.includes("validate_each_keys"))return[];f.includes("svelte/src/internal")||f.includes("node_modules/.vite")||a.push(l)}}return a}let ht=null;function ri(t){ht=t}let ii=null;function Na(t){ii=t}let Ui=null;function Pu(t){Ui=t}function hr(t,e=!1,i){ht={p:ht,i:!1,c:null,e:null,s:t,x:null,l:fi&&!e?{s:null,u:null,$:[]}:null},le&&(ht.function=i,Ui=i)}function vr(t){var e=ht,i=e.e;if(i!==null){e.e=null;for(var a of i)Ol(a)}return e.i=!0,ht=e.p,le&&(Ui=ht?.function??null),{}}function zi(){return!fi||ht!==null&&ht.l===null}let Sr=[];function bl(){var t=Sr;Sr=[],Wf(t)}function Rr(t){if(Sr.length===0&&!Li){var e=Sr;queueMicrotask(()=>{e===Sr&&bl()})}Sr.push(t)}function Id(){for(;Sr.length>0;)bl()}const ps=new WeakMap;function _l(t){var e=Ge;if(e===null)return We.f|=or,t;if(le&&t instanceof Error&&!ps.has(t)&&ps.set(t,Dd(t,e)),(e.f&Os)===0){if((e.f&io)===0)throw le&&!e.parent&&t instanceof Error&&wl(t),t;e.b.error(t)}else ai(t,e)}function ai(t,e){for(;e!==null;){if((e.f&io)!==0)try{e.b.error(t);return}catch(i){t=i}e=e.parent}throw le&&t instanceof Error&&wl(t),t}function Dd(t,e){const i=Dr(t,"message");if(!(i&&!i.configurable)){for(var a=Fs?"  ":"	",s=`
${a}in ${e.fn?.name||"<unknown>"}`,l=e.ctx;l!==null;)s+=`
${a}in ${l.function?.[yd].split("/").pop()}`,l=l.p;return{message:t.message+`
${s}
`,stack:t.stack?.split(`
`).filter(f=>!f.includes("svelte/src/internal")).join(`
`)}}}function wl(t){const e=ps.get(t);e&&(cr(t,"message",{value:e.message}),cr(t,"stack",{value:e.stack}))}const wa=new Set;let nt=null,Ia=null,pn=null,vn=[],oo=null,ms=!1,Li=!1;class Cn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){vn=[],Ia=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of e)this.#o(a,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(Ia=this,nt=null,Ou(i.render_effects),Ou(i.effects),Ia=null,this.#u?.resolve()),pn=null}#o(e,i){e.f^=Ht;for(var a=e.first;a!==null;){var s=a.f,l=(s&(Vn|Mr))!==0,f=l&&(s&Ht)!==0,h=f||(s&on)!==0||this.skipped_effects.has(a);if((a.f&io)!==0&&a.b?.is_pending()&&(i={parent:i,effect:a,effects:[],render_effects:[],block_effects:[]}),!h&&a.fn!==null){l?a.f^=Ht:(s&Ls)!==0?i.effects.push(a):Yi(a)&&((a.f&zn)!==0&&i.block_effects.push(a),ji(a));var v=a.first;if(v!==null){a=v;continue}}var m=a.parent;for(a=a.next;a===null&&m!==null;)m===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),a=m.next,m=m.parent}}#s(e){for(const i of e)((i.f&Xt)!==0?this.#a:this.#i).push(i),this.#l(i.deps),jt(i,Ht)}#l(e){if(e!==null)for(const i of e)(i.f&Ot)===0||(i.f&fr)===0||(i.f^=fr,this.#l(i.deps))}capture(e,i){this.previous.has(e)||this.previous.set(e,i),(e.f&or)===0&&(this.current.set(e,e.v),pn?.set(e,e.v))}activate(){nt=this,this.apply()}deactivate(){nt===this&&(nt=null,pn=null)}flush(){if(this.activate(),vn.length>0){if(El(),nt!==null&&nt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#c(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(wa.size>1){this.previous.clear();var e=pn,i=!0,a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const l of wa){if(l===this){i=!1;continue}const f=[];for(const[v,m]of this.current){if(l.current.has(v))if(i&&m!==l.current.get(v))l.current.set(v,m);else continue;f.push(v)}if(f.length===0)continue;const h=[...l.current.keys()].filter(v=>!this.current.has(v));if(h.length>0){var s=vn;vn=[];const v=new Set,m=new Map;for(const E of f)xl(E,h,v,m);if(vn.length>0){nt=l,l.apply();for(const E of vn)l.#o(E,a);l.deactivate()}vn=s}}nt=null,pn=e}this.committed=!0,wa.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#a)jt(e,Xt),Pr(e);for(const e of this.#i)jt(e,Yn),Pr(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#u??=ul()).promise}static ensure(){if(nt===null){const e=nt=new Cn;wa.add(nt),Li||Cn.enqueue(()=>{nt===e&&e.flush()})}return nt}static enqueue(e){Rr(e)}apply(){}}function Cd(t){var e=Li;Li=!0;try{for(var i;;){if(Id(),vn.length===0&&(nt?.flush(),vn.length===0))return oo=null,i;El()}}finally{Li=e}}function El(){var t=ur;ms=!0;var e=le?new Set:null;try{var i=0;for(ja(!0);vn.length>0;){var a=Cn.ensure();if(i++>1e3){if(le){var s=new Map;for(const f of a.current.keys())for(const[h,v]of f.updated??[]){var l=s.get(h);l||(l={error:v.error,count:0},s.set(h,l)),l.count+=v.count}for(const f of s.values())f.error&&console.error(f.error)}Ld()}if(a.process(vn),sr.clear(),le)for(const f of a.current.keys())e.add(f)}}finally{if(ms=!1,ja(t),oo=null,le)for(const f of e)f.updated=null}}function Ld(){try{td()}catch(t){le&&cr(t,"stack",{value:""}),ai(t,oo)}}let Bn=null;function Ou(t){var e=t.length;if(e!==0){for(var i=0;i<e;){var a=t[i++];if((a.f&(Nn|on))===0&&Yi(a)&&(Bn=new Set,ji(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null&&a.ac===null?Bl(a):a.fn=null),Bn?.size>0)){sr.clear();for(const s of Bn){if((s.f&(Nn|on))!==0)continue;const l=[s];let f=s.parent;for(;f!==null;)Bn.has(f)&&(Bn.delete(f),l.push(f)),f=f.parent;for(let h=l.length-1;h>=0;h--){const v=l[h];(v.f&(Nn|on))===0&&ji(v)}}Bn.clear()}}Bn=null}}function xl(t,e,i,a){if(!i.has(t)&&(i.add(t),t.reactions!==null))for(const s of t.reactions){const l=s.f;(l&Ot)!==0?xl(s,e,i,a):(l&(ao|zn))!==0&&(l&Xt)===0&&kl(s,e,a)&&(jt(s,Xt),Pr(s))}}function kl(t,e,i){const a=i.get(t);if(a!==void 0)return a;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if((s.f&Ot)!==0&&kl(s,e,i))return i.set(s,!0),!0}return i.set(t,!1),!1}function Pr(t){for(var e=oo=t;e.parent!==null;){e=e.parent;var i=e.f;if(ms&&e===Ge&&(i&zn)!==0&&(i&cl)===0)return;if((i&(Mr|Vn))!==0){if((i&Ht)===0)return;e.f^=Ht}}vn.push(e)}function Pd(t){let e=0,i=Or(0),a;return le&&Sn(i,"createSubscriber version"),()=>{Fi()&&(y(i),js(()=>(e===0&&(a=Br(()=>t(()=>Pi(i)))),e+=1,()=>{Rr(()=>{e-=1,e===0&&(a?.(),a=void 0,Pi(i))})})))}}var Od=ni|ci|io;function Md(t,e,i){new Rd(t,e,i)}class Rd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#b=Pd(()=>(this.#d=Or(this.#f),le&&Sn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(e,i,a){this.#t=e,this.#n=i,this.#u=a,this.parent=Ge.b,this.#e=!!this.#n.pending,this.#a=Us(()=>{Ge.b=this;{var s=this.#g();try{this.#i=Wt(()=>a(s))}catch(l){this.error(l)}this.#h>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},Od)}#_(){try{this.#i=Wt(()=>this.#u(this.#t))}catch(e){this.error(e)}this.#e=!1}#w(){const e=this.#n.pending;e&&(this.#o=Wt(()=>e(this.#t)),Cn.enqueue(()=>{var i=this.#g();this.#i=this.#p(()=>(Cn.ensure(),Wt(()=>this.#u(i)))),this.#h>0?this.#m():(Jr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#g(){var e=this.#t;return this.#e&&(this.#c=jn(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var i=Ge,a=We,s=ht;_n(this.#a),Gt(this.#a),ri(this.#a.ctx);try{return e()}catch(l){return _l(l),null}finally{_n(i),Gt(a),ri(s)}}#m(){const e=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Hl(this.#i,this.#l)),this.#o===null&&(this.#o=Wt(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}this.#h+=e,this.#h===0&&(this.#e=!1,this.#o&&Jr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(e){this.#y(e),this.#f+=e,this.#d&&si(this.#d,this.#f)}get_effect_pending(){return this.#b(),y(this.#d)}error(e){var i=this.#n.onerror;let a=this.#n.failed;if(this.#v||!i&&!a)throw e;this.#i&&(Pt(this.#i),this.#i=null),this.#o&&(Pt(this.#o),this.#o=null),this.#s&&(Pt(this.#s),this.#s=null);var s=!1,l=!1;const f=()=>{if(s){Ed();return}s=!0,l&&ud(),Cn.ensure(),this.#f=0,this.#s!==null&&Jr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,Wt(()=>this.#u(this.#t)))),this.#h>0?this.#m():this.#e=!1};var h=We;try{Gt(null),l=!0,i?.(e,f),l=!1}catch(v){ai(v,this.#a&&this.#a.parent)}finally{Gt(h)}a&&Rr(()=>{this.#s=this.#p(()=>{Cn.ensure(),this.#v=!0;try{return Wt(()=>{a(this.#t,()=>e,()=>f)})}catch(v){return ai(v,this.#a.parent),null}finally{this.#v=!1}})})}}function Da(t,e){return e}function Kd(t,e,i){for(var a=[],s=e.length,l=0;l<s;l++)zs(e[l].e,a,!0);Nl(a,()=>{var f=a.length===0&&i!==null;if(f){var h=i,v=h.parentNode;Qd(v),v.append(h),t.items.clear(),An(t,e[0].prev,e[s-1].next)}for(var m=0;m<s;m++){var E=e[m];f||(t.items.delete(E.k),An(t,E.prev,E.next)),Pt(E.e,!f)}t.first===e[0]&&(t.first=e[0].prev)})}function Zr(t,e,i,a,s,l=null){var f=t,h=new Map,v=null,m=(e&pl)!==0,E=(e&hl)!==0,_=(e&vl)!==0;if(m){var w=t;f=w.appendChild(jn())}var x=null,D=Ks(()=>{var B=i();return Ds(B)?B:B==null?[]:Cs(B)}),P,C=!0;function T(){Bd(U,P,f,e,a),x!==null&&(P.length===0?(x.fragment?(f.before(x.fragment),x.fragment=null):Vs(x.effect),z.first=x.effect):Jr(x.effect,()=>{x=null}))}var z=Us(()=>{P=y(D);for(var B=P.length,G=new Set,te=nt,q=null,N=Pl(),Z=0;Z<B;Z+=1){var ae=P[Z],W=a(ae,Z),ge=C?null:h.get(W);ge?(E&&si(ge.v,ae),_?si(ge.i,Z):ge.i=Z,N&&te.skipped_effects.delete(ge.e)):(ge=Nd(C?f:null,q,ae,W,Z,s,e,i),C&&(ge.o=!0,q===null?v=ge:q.next=ge,q=ge),h.set(W,ge)),G.add(W)}if(B===0&&l&&!x)if(C)x={fragment:null,effect:Wt(()=>l(f))};else{var ve=document.createDocumentFragment(),pe=jn();ve.append(pe),x={fragment:ve,effect:Wt(()=>l(pe))}}if(!C)if(N){for(const[Le,Xe]of h)G.has(Le)||te.skipped_effects.add(Xe.e);te.oncommit(T),te.ondiscard(()=>{})}else T();y(D)}),U={effect:z,items:h,first:v};C=!1}function Bd(t,e,i,a,s){var l=(a&ld)!==0,f=e.length,h=t.items,v=t.first,m,E=null,_,w=[],x=[],D,P,C,T;if(l)for(T=0;T<f;T+=1)D=e[T],P=s(D,T),C=h.get(P),C.o&&(C.a?.measure(),(_??=new Set).add(C));for(T=0;T<f;T+=1){if(D=e[T],P=s(D,T),C=h.get(P),t.first??=C,!C.o){C.o=!0;var z=E?E.next:v;An(t,E,C),An(t,C,z),Zo(C,z,i),E=C,w=[],x=[],v=E.next;continue}if((C.e.f&on)!==0&&(Vs(C.e),l&&(C.a?.unfix(),(_??=new Set).delete(C))),C!==v){if(m!==void 0&&m.has(C)){if(w.length<x.length){var U=x[0],B;E=U.prev;var G=w[0],te=w[w.length-1];for(B=0;B<w.length;B+=1)Zo(w[B],U,i);for(B=0;B<x.length;B+=1)m.delete(x[B]);An(t,G.prev,te.next),An(t,E,G),An(t,te,U),v=U,E=te,T-=1,w=[],x=[]}else m.delete(C),Zo(C,v,i),An(t,C.prev,C.next),An(t,C,E===null?t.first:E.next),An(t,E,C),E=C;continue}for(w=[],x=[];v!==null&&v.k!==P;)(v.e.f&on)===0&&(m??=new Set).add(v),x.push(v),v=v.next;if(v===null)continue;C=v}w.push(C),E=C,v=C.next}if(v!==null||m!==void 0){for(var q=m===void 0?[]:Cs(m);v!==null;)(v.e.f&on)===0&&q.push(v),v=v.next;var N=q.length;if(N>0){var Z=(a&pl)!==0&&f===0?i:null;if(l){for(T=0;T<N;T+=1)q[T].a?.measure();for(T=0;T<N;T+=1)q[T].a?.fix()}Kd(t,q,Z)}}l&&Rr(()=>{if(_!==void 0)for(C of _)C.a?.apply()})}function Nd(t,e,i,a,s,l,f,h){var v=(f&hl)!==0,m=(f&cd)===0,E=v?m?Al(i,!1,!1):Or(i):i,_=(f&vl)===0?s:Or(s);le&&v&&(E.trace=()=>{var D=typeof _=="number"?s:_.v;h()[D]});var w={i:_,v:E,k:a,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var x=document.createDocumentFragment();x.append(t=jn())}return w.e=Wt(()=>l(t,E,_,h)),e!==null&&(e.next=w),w}finally{}}function Zo(t,e,i){for(var a=t.next?t.next.e.nodes_start:i,s=e?e.e.nodes_start:i,l=t.e.nodes_start;l!==null&&l!==a;){var f=Vi(l);s.before(l),l=f}}function An(t,e,i){e===null?(t.first=i,t.effect.first=i&&i.e):(e.e===t.effect.last&&i!==null&&(t.effect.last=i.e),e.e.next&&(e.e.next.prev=null),e.next=i,e.e.next=i&&i.e),i===null?t.effect.last=e&&e.e:(i.e===t.effect.last&&e===null&&(t.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=e,i.e.prev=e&&e.e)}function Tl(t,e,i,a){const s=zi()?so:Ks;if(i.length===0&&t.length===0){a(e.map(s));return}var l=nt,f=Ge,h=Fd();function v(){Promise.all(i.map(m=>jd(m))).then(m=>{h();try{a([...e.map(s),...m])}catch(E){(f.f&Nn)===0&&ai(E,f)}l?.deactivate(),Fa()}).catch(m=>{ai(m,f)})}t.length>0?Promise.all(t).then(()=>{h();try{return v()}finally{l?.deactivate(),Fa()}}):v()}function Fd(){var t=Ge,e=We,i=ht,a=nt;if(le)var s=ii;return function(f=!0){_n(t),Gt(e),ri(i),f&&a?.activate(),le&&Na(s)}}function Fa(){_n(null),Gt(null),ri(null),le&&Na(null)}const Hd=new Set;function so(t){var e=Ot|Xt,i=We!==null&&(We.f&Ot)!==0?We:null;return Ge!==null&&(Ge.f|=ci),{ctx:ht,deps:null,effects:null,equals:ml,f:e,fn:t,reactions:null,rv:0,v:Lt,wv:0,parent:i??Ge,ac:null}}function jd(t,e){let i=Ge;i===null&&Qf();var a=i.b,s=void 0,l=Or(Lt),f=!We,h=new Map;return rh(()=>{var v=ul();s=v.promise;try{Promise.resolve(t()).then(v.resolve,v.reject).then(()=>{m===nt&&m.committed&&m.deactivate(),Fa()})}catch(w){v.reject(w),Fa()}var m=nt;if(f){var E=!a.is_pending();a.update_pending_count(1),m.increment(E),h.get(m)?.reject(Xr),h.delete(m),h.set(m,v)}const _=(w,x=void 0)=>{if(m.activate(),x)x!==Xr&&(l.f|=or,si(l,x));else{(l.f&or)!==0&&(l.f^=or),si(l,w);for(const[D,P]of h){if(h.delete(D),D===m)break;P.reject(Xr)}}f&&(a.update_pending_count(-1),m.decrement(E))};v.promise.then(_,w=>_(null,w||"unknown"))}),lo(()=>{for(const v of h.values())v.reject(Xr)}),le&&(l.f|=ao),new Promise(v=>{function m(E){function _(){E===s?v(l):m(s)}E.then(_,_)}m(s)})}function yt(t){const e=so(t);return jl(e),e}function Ks(t){const e=so(t);return e.equals=gl,e}function gs(t){var e=t.effects;if(e!==null){t.effects=null;for(var i=0;i<e.length;i+=1)Pt(e[i])}}let Jo=[];function Ud(t){for(var e=t.parent;e!==null;){if((e.f&Ot)===0)return(e.f&Nn)===0?e:null;e=e.parent}return null}function Bs(t){var e,i=Ge;if(_n(Ud(t)),le){let a=oi;Mu(new Set);try{Jo.includes(t)&&Zf(),Jo.push(t),t.f&=~fr,gs(t),e=ys(t)}finally{_n(i),Mu(a),Jo.pop()}}else try{t.f&=~fr,gs(t),e=ys(t)}finally{_n(i)}return e}function Sl(t){var e=Bs(t);if(t.equals(e)||(nt?.is_fork||(t.v=e),t.wv=zl()),!Kr)if(pn!==null)(Fi()||nt?.is_fork)&&pn.set(t,e);else{var i=(t.f&wn)===0?Yn:Ht;jt(t,i)}}let oi=new Set;const sr=new Map;function Mu(t){oi=t}let Ns=!1;function zd(){Ns=!0}function Or(t,e){var i={f:0,v:t,reactions:null,equals:ml,rv:0,wv:0};return i}function we(t,e){const i=Or(t);return jl(i),i}function Al(t,e=!1,i=!0){const a=Or(t);return e||(a.equals=gl),fi&&i&&ht!==null&&ht.l!==null&&(ht.l.s??=[]).push(a),a}function K(t,e,i=!1){We!==null&&(!Ln||(We.f&Ba)!==0)&&zi()&&(We.f&(Ot|zn|ao|Ba))!==0&&!Fn?.includes(t)&&sd();let a=i?an(e):e;return le&&yl(a,t.label),si(t,a)}function si(t,e){if(!t.equals(e)){var i=t.v;Kr?sr.set(t,e):sr.set(t,i),t.v=e;var a=Cn.ensure();if(a.capture(t,i),le){if(Ge!==null){t.updated??=new Map;const s=(t.updated.get("")?.count??0)+1;if(t.updated.set("",{error:null,count:s}),s>5){const l=Sd("updated at");if(l!==null){let f=t.updated.get(l.stack);f||(f={error:l,count:0},t.updated.set(l.stack,f)),f.count++}}}Ge!==null&&(t.set_during_effect=!0)}(t.f&Ot)!==0&&((t.f&Xt)!==0&&Bs(t),jt(t,(t.f&wn)!==0?Ht:Yn)),t.wv=zl(),Dl(t,Xt),zi()&&Ge!==null&&(Ge.f&Ht)!==0&&(Ge.f&(Vn|Mr))===0&&(dn===null?oh([t]):dn.push(t)),!a.is_fork&&oi.size>0&&!Ns&&Il()}return e}function Il(){Ns=!1;var t=ur;ja(!0);const e=Array.from(oi);try{for(const i of e)(i.f&Ht)!==0&&jt(i,Yn),Yi(i)&&ji(i)}finally{ja(t)}oi.clear()}function Pi(t){K(t,t.v+1)}function Dl(t,e){var i=t.reactions;if(i!==null)for(var a=zi(),s=i.length,l=0;l<s;l++){var f=i[l],h=f.f;if(!(!a&&f===Ge)){if(le&&(h&Ba)!==0){oi.add(f);continue}var v=(h&Xt)===0;if(v&&jt(f,e),(h&Ot)!==0){var m=f;pn?.delete(m),(h&fr)===0&&(h&wn&&(f.f|=fr),Dl(m,Yn))}else v&&((h&zn)!==0&&Bn!==null&&Bn.add(f),Pr(f))}}}const Vd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function an(t){if(typeof t!="object"||t===null||Cr in t)return t;const e=sl(t);if(e!==Vf&&e!==Yf)return t;var i=new Map,a=Ds(t),s=we(0),l=Lr,f=E=>{if(Lr===l)return E();var _=We,w=Lr;Gt(null),Nu(l);var x=E();return Gt(_),Nu(w),x};a&&(i.set("length",we(t.length)),le&&(t=qd(t)));var h="";let v=!1;function m(E){if(!v){v=!0,h=E,Sn(s,`${h} version`);for(const[_,w]of i)Sn(w,Er(h,_));v=!1}}return new Proxy(t,{defineProperty(E,_,w){(!("value"in w)||w.configurable===!1||w.enumerable===!1||w.writable===!1)&&ad();var x=i.get(_);return x===void 0?x=f(()=>{var D=we(w.value);return i.set(_,D),le&&typeof _=="string"&&Sn(D,Er(h,_)),D}):K(x,w.value,!0),!0},deleteProperty(E,_){var w=i.get(_);if(w===void 0){if(_ in E){const x=f(()=>we(Lt));i.set(_,x),Pi(s),le&&Sn(x,Er(h,_))}}else K(w,Lt),Pi(s);return!0},get(E,_,w){if(_===Cr)return t;if(le&&_===fl)return m;var x=i.get(_),D=_ in E;if(x===void 0&&(!D||Dr(E,_)?.writable)&&(x=f(()=>{var C=an(D?E[_]:Lt),T=we(C);return le&&Sn(T,Er(h,_)),T}),i.set(_,x)),x!==void 0){var P=y(x);return P===Lt?void 0:P}return Reflect.get(E,_,w)},getOwnPropertyDescriptor(E,_){var w=Reflect.getOwnPropertyDescriptor(E,_);if(w&&"value"in w){var x=i.get(_);x&&(w.value=y(x))}else if(w===void 0){var D=i.get(_),P=D?.v;if(D!==void 0&&P!==Lt)return{enumerable:!0,configurable:!0,value:P,writable:!0}}return w},has(E,_){if(_===Cr)return!0;var w=i.get(_),x=w!==void 0&&w.v!==Lt||Reflect.has(E,_);if(w!==void 0||Ge!==null&&(!x||Dr(E,_)?.writable)){w===void 0&&(w=f(()=>{var P=x?an(E[_]):Lt,C=we(P);return le&&Sn(C,Er(h,_)),C}),i.set(_,w));var D=y(w);if(D===Lt)return!1}return x},set(E,_,w,x){var D=i.get(_),P=_ in E;if(a&&_==="length")for(var C=w;C<D.v;C+=1){var T=i.get(C+"");T!==void 0?K(T,Lt):C in E&&(T=f(()=>we(Lt)),i.set(C+"",T),le&&Sn(T,Er(h,C)))}if(D===void 0)(!P||Dr(E,_)?.writable)&&(D=f(()=>we(void 0)),le&&Sn(D,Er(h,_)),K(D,an(w)),i.set(_,D));else{P=D.v!==Lt;var z=f(()=>an(w));K(D,z)}var U=Reflect.getOwnPropertyDescriptor(E,_);if(U?.set&&U.set.call(x,w),!P){if(a&&typeof _=="string"){var B=i.get("length"),G=Number(_);Number.isInteger(G)&&G>=B.v&&K(B,G+1)}Pi(s)}return!0},ownKeys(E){y(s);var _=Reflect.ownKeys(E).filter(D=>{var P=i.get(D);return P===void 0||P.v!==Lt});for(var[w,x]of i)x.v!==Lt&&!(w in E)&&_.push(w);return _},setPrototypeOf(){od()}})}function Er(t,e){return typeof e=="symbol"?`${t}[Symbol(${e.description??""})]`:Vd.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function Oi(t){try{if(t!==null&&typeof t=="object"&&Cr in t)return t[Cr]}catch{}return t}function Yd(t,e){return Object.is(Oi(t),Oi(e))}const Wd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function qd(t){return new Proxy(t,{get(e,i,a){var s=Reflect.get(e,i,a);return Wd.has(i)?function(...l){zd();var f=s.apply(this,l);return Il(),f}:s}})}function Gd(){const t=Array.prototype,e=Array.__svelte_cleanup;e&&e();const{indexOf:i,lastIndexOf:a,includes:s}=t;t.indexOf=function(l,f){const h=i.call(this,l,f);if(h===-1){for(let v=f??0;v<this.length;v+=1)if(Oi(this[v])===l){Qo("array.indexOf(...)");break}}return h},t.lastIndexOf=function(l,f){const h=a.call(this,l,f??this.length-1);if(h===-1){for(let v=0;v<=(f??this.length-1);v+=1)if(Oi(this[v])===l){Qo("array.lastIndexOf(...)");break}}return h},t.includes=function(l,f){const h=s.call(this,l,f);if(!h){for(let v=0;v<this.length;v+=1)if(Oi(this[v])===l){Qo("array.includes(...)");break}}return h},Array.__svelte_cleanup=()=>{t.indexOf=i,t.lastIndexOf=a,t.includes=s}}var Ru,Fs,Cl,Ll;function Xd(){if(Ru===void 0){Ru=window,Fs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,i=Text.prototype;Cl=Dr(e,"firstChild").get,Ll=Dr(e,"nextSibling").get,Cu(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Cu(i)&&(i.__t=void 0),le&&(t.__svelte_meta=null,Gd())}}function jn(t=""){return document.createTextNode(t)}function Ha(t){return Cl.call(t)}function Vi(t){return Ll.call(t)}function Se(t,e){return Ha(t)}function Ft(t,e=!1){{var i=Ha(t);return i instanceof Comment&&i.data===""?Vi(i):i}}function Ye(t,e=1,i=!1){let a=t;for(;e--;)a=Vi(a);return a}function Qd(t){t.textContent=""}function Pl(){return!1}function Zd(t,e){if(e){const i=document.body;t.autofocus=!0,Rr(()=>{document.activeElement===i&&t.focus()})}}let Ku=!1;function Jd(){Ku||(Ku=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function uo(t){var e=We,i=Ge;Gt(null),_n(null);try{return t()}finally{Gt(e),_n(i)}}function $d(t,e,i,a=i){t.addEventListener(e,()=>uo(i));const s=t.__on_r;s?t.__on_r=()=>{s(),a(!0)}:t.__on_r=()=>a(!0),Jd()}function eh(t){Ge===null&&(We===null&&ed(t),$f()),Kr&&Jf(t)}function th(t,e){var i=e.last;i===null?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}function Mn(t,e,i){var a=Ge;if(le)for(;a!==null&&(a.f&Ba)!==0;)a=a.parent;a!==null&&(a.f&on)!==0&&(t|=on);var s={ctx:ht,deps:null,nodes_start:null,nodes_end:null,f:t|Xt|wn,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(le&&(s.component_function=Ui),i)try{ji(s),s.f|=Os}catch(h){throw Pt(s),h}else e!==null&&Pr(s);var l=s;if(i&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&ci)===0&&(l=l.first,(t&zn)!==0&&(t&ni)!==0&&l!==null&&(l.f|=ni)),l!==null&&(l.parent=a,a!==null&&th(l,a),We!==null&&(We.f&Ot)!==0&&(t&Mr)===0)){var f=We;(f.effects??=[]).push(l)}return s}function Fi(){return We!==null&&!Ln}function lo(t){const e=Mn(Ps,null,!1);return jt(e,Ht),e.teardown=t,e}function Qe(t){eh("$effect"),le&&cr(t,"name",{value:"$effect"});var e=Ge.f,i=!We&&(e&Vn)!==0&&(e&Os)===0;if(i){var a=ht;(a.e??=[]).push(t)}else return Ol(t)}function Ol(t){return Mn(Ls|qf,t,!1)}function nh(t){Cn.ensure();const e=Mn(Mr|ci,t,!0);return(i={})=>new Promise(a=>{i.outro?Jr(e,()=>{Pt(e),a(void 0)}):(Pt(e),a(void 0))})}function Hs(t){return Mn(Ls,t,!1)}function rh(t){return Mn(ao|ci,t,!0)}function js(t,e=0){return Mn(Ps|e,t,!0)}function St(t,e=[],i=[],a=[]){Tl(a,e,i,s=>{Mn(Ps,()=>t(...s.map(y)),!0)})}function Us(t,e=0){var i=Mn(zn|e,t,!0);return le&&(i.dev_stack=ii),i}function Ml(t,e=0){var i=Mn(ll|e,t,!0);return le&&(i.dev_stack=ii),i}function Wt(t){return Mn(Vn|ci,t,!0)}function Rl(t){var e=t.teardown;if(e!==null){const i=Kr,a=We;Bu(!0),Gt(null);try{e.call(null)}finally{Bu(i),Gt(a)}}}function Kl(t,e=!1){var i=t.first;for(t.first=t.last=null;i!==null;){const s=i.ac;s!==null&&uo(()=>{s.abort(Xr)});var a=i.next;(i.f&Mr)!==0?i.parent=null:Pt(i,e),i=a}}function ih(t){for(var e=t.first;e!==null;){var i=e.next;(e.f&Vn)===0&&Pt(e),e=i}}function Pt(t,e=!0){var i=!1;(e||(t.f&cl)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ah(t.nodes_start,t.nodes_end),i=!0),Kl(t,e&&!i),Ua(t,0),jt(t,Nn);var a=t.transitions;if(a!==null)for(const l of a)l.stop();Rl(t);var s=t.parent;s!==null&&s.first!==null&&Bl(t),le&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ah(t,e){for(;t!==null;){var i=t===e?null:Vi(t);t.remove(),t=i}}function Bl(t){var e=t.parent,i=t.prev,a=t.next;i!==null&&(i.next=a),a!==null&&(a.prev=i),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=i))}function Jr(t,e,i=!0){var a=[];zs(t,a,!0),Nl(a,()=>{i&&Pt(t),e&&e()})}function Nl(t,e){var i=t.length;if(i>0){var a=()=>--i||e();for(var s of t)s.out(a)}else e()}function zs(t,e,i){if((t.f&on)===0){if(t.f^=on,t.transitions!==null)for(const f of t.transitions)(f.is_global||i)&&e.push(f);for(var a=t.first;a!==null;){var s=a.next,l=(a.f&ni)!==0||(a.f&Vn)!==0&&(t.f&zn)!==0;zs(a,e,l?i:!1),a=s}}}function Vs(t){Fl(t,!0)}function Fl(t,e){if((t.f&on)!==0){t.f^=on,(t.f&Ht)===0&&(jt(t,Xt),Pr(t));for(var i=t.first;i!==null;){var a=i.next,s=(i.f&ni)!==0||(i.f&Vn)!==0;Fl(i,s?e:!1),i=a}if(t.transitions!==null)for(const l of t.transitions)(l.is_global||e)&&l.in()}}function Hl(t,e){for(var i=t.nodes_start,a=t.nodes_end;i!==null;){var s=i===a?null:Vi(i);e.append(i),i=s}}let ur=!1;function ja(t){ur=t}let Kr=!1;function Bu(t){Kr=t}let We=null,Ln=!1;function Gt(t){We=t}let Ge=null;function _n(t){Ge=t}let Fn=null;function jl(t){We!==null&&(Fn===null?Fn=[t]:Fn.push(t))}let zt=null,nn=0,dn=null;function oh(t){dn=t}let Ul=1,Hi=0,Lr=Hi;function Nu(t){Lr=t}function zl(){return++Ul}function Yi(t){var e=t.f;if((e&Xt)!==0)return!0;if(e&Ot&&(t.f&=~fr),(e&Yn)!==0){var i=t.deps;if(i!==null)for(var a=i.length,s=0;s<a;s++){var l=i[s];if(Yi(l)&&Sl(l),l.wv>t.wv)return!0}(e&wn)!==0&&pn===null&&jt(t,Ht)}return!1}function Vl(t,e,i=!0){var a=t.reactions;if(a!==null&&!Fn?.includes(t))for(var s=0;s<a.length;s++){var l=a[s];(l.f&Ot)!==0?Vl(l,e,!1):e===l&&(i?jt(l,Xt):(l.f&Ht)!==0&&jt(l,Yn),Pr(l))}}function ys(t){var e=zt,i=nn,a=dn,s=We,l=Fn,f=ht,h=Ln,v=Lr,m=t.f;zt=null,nn=0,dn=null,We=(m&(Vn|Mr))===0?t:null,Fn=null,ri(t.ctx),Ln=!1,Lr=++Hi,t.ac!==null&&(uo(()=>{t.ac.abort(Xr)}),t.ac=null);try{t.f|=vs;var E=t.fn,_=E(),w=t.deps;if(zt!==null){var x;if(Ua(t,nn),w!==null&&nn>0)for(w.length=nn+zt.length,x=0;x<zt.length;x++)w[nn+x]=zt[x];else t.deps=w=zt;if(ur&&Fi()&&(t.f&wn)!==0)for(x=nn;x<w.length;x++)(w[x].reactions??=[]).push(t)}else w!==null&&nn<w.length&&(Ua(t,nn),w.length=nn);if(zi()&&dn!==null&&!Ln&&w!==null&&(t.f&(Ot|Yn|Xt))===0)for(x=0;x<dn.length;x++)Vl(dn[x],t);return s!==null&&s!==t&&(Hi++,dn!==null&&(a===null?a=dn:a.push(...dn))),(t.f&or)!==0&&(t.f^=or),_}catch(D){return _l(D)}finally{t.f^=vs,zt=e,nn=i,dn=a,We=s,Fn=l,ri(f),Ln=h,Lr=v}}function sh(t,e){let i=e.reactions;if(i!==null){var a=Uf.call(i,t);if(a!==-1){var s=i.length-1;s===0?i=e.reactions=null:(i[a]=i[s],i.pop())}}i===null&&(e.f&Ot)!==0&&(zt===null||!zt.includes(e))&&(jt(e,Yn),(e.f&wn)!==0&&(e.f^=wn,e.f&=~fr),gs(e),Ua(e,0))}function Ua(t,e){var i=t.deps;if(i!==null)for(var a=e;a<i.length;a++)sh(t,i[a])}function ji(t){var e=t.f;if((e&Nn)===0){jt(t,Ht);var i=Ge,a=ur;if(Ge=t,ur=!0,le){var s=Ui;Pu(t.component_function);var l=ii;Na(t.dev_stack??ii)}try{(e&(zn|ll))!==0?ih(t):Kl(t),Rl(t);var f=ys(t);t.teardown=typeof f=="function"?f:null,t.wv=Ul;var h;le&&kd&&(t.f&Xt)!==0&&t.deps}finally{ur=a,Ge=i,le&&(Pu(s),Na(l))}}}async function at(){await Promise.resolve(),Cd()}function y(t){var e=t.f,i=(e&Ot)!==0;if(We!==null&&!Ln){var a=Ge!==null&&(Ge.f&Nn)!==0;if(!a&&!Fn?.includes(t)){var s=We.deps;if((We.f&vs)!==0)t.rv<Hi&&(t.rv=Hi,zt===null&&s!==null&&s[nn]===t?nn++:zt===null?zt=[t]:zt.includes(t)||zt.push(t));else{(We.deps??=[]).push(t);var l=t.reactions;l===null?t.reactions=[We]:l.includes(We)||l.push(We)}}}if(le&&Hd.delete(t),Kr){if(sr.has(t))return sr.get(t);if(i){var f=t,h=f.v;return((f.f&Ht)===0&&f.reactions!==null||Wl(f))&&(h=Bs(f)),sr.set(f,h),h}}else i&&(!pn?.has(t)||nt?.is_fork&&!Fi())&&(f=t,Yi(f)&&Sl(f),ur&&Fi()&&(f.f&wn)===0&&Yl(f));if(pn?.has(t))return pn.get(t);if((t.f&or)!==0)throw t.v;return t.v}function Yl(t){if(t.deps!==null){t.f^=wn;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Ot)!==0&&(e.f&wn)===0&&Yl(e)}}function Wl(t){if(t.v===Lt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(sr.has(e)||(e.f&Ot)!==0&&Wl(e))return!0;return!1}function Br(t){var e=Ln;try{return Ln=!0,t()}finally{Ln=e}}const uh=-7169;function jt(t,e){t.f=t.f&uh|e}function lh(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const ch=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function fh(t){return ch.includes(t)}const dh={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function hh(t){return t=t.toLowerCase(),dh[t]??t}const vh=["touchstart","touchmove"];function ph(t){return vh.includes(t)}const ql=new Set,bs=new Set;function Gl(t,e,i,a={}){function s(l){if(a.capture||Ai.call(e,l),!l.cancelBubble)return uo(()=>i?.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Rr(()=>{e.addEventListener(t,s,a)}):e.addEventListener(t,s,a),s}function $r(t,e,i,a,s){var l={capture:a,passive:s},f=Gl(t,e,i,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&lo(()=>{e.removeEventListener(t,f,l)})}function di(t){for(var e=0;e<t.length;e++)ql.add(t[e]);for(var i of bs)i(t)}let Fu=null;function Ai(t){var e=this,i=e.ownerDocument,a=t.type,s=t.composedPath?.()||[],l=s[0]||t.target;Fu=t;var f=0,h=Fu===t&&t.__root;if(h){var v=s.indexOf(h);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var m=s.indexOf(e);if(m===-1)return;v<=m&&(f=v)}if(l=s[f]||t.target,l!==e){cr(t,"currentTarget",{configurable:!0,get(){return l||i}});var E=We,_=Ge;Gt(null),_n(null);try{for(var w,x=[];l!==null;){var D=l.assignedSlot||l.parentNode||l.host||null;try{var P=l["__"+a];P!=null&&(!l.disabled||t.target===l)&&P.call(l,t)}catch(C){w?x.push(C):w=C}if(t.cancelBubble||D===e||D===null)break;l=D}if(w){for(let C of x)queueMicrotask(()=>{throw C});throw w}}finally{t.__root=e,delete t.currentTarget,Gt(E),_n(_)}}}function mh(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function za(t,e){var i=Ge;i.nodes_start===null&&(i.nodes_start=t,i.nodes_end=e)}function Me(t,e){var i=(e&md)!==0,a=(e&gd)!==0,s,l=!t.startsWith("<!>");return()=>{s===void 0&&(s=mh(l?t:"<!>"+t),i||(s=Ha(s)));var f=a||Fs?document.importNode(s,!0):s.cloneNode(!0);if(i){var h=Ha(f),v=f.lastChild;za(h,v)}else za(f,f);return f}}function In(t=""){{var e=jn(t+"");return za(e,e),e}}function lr(){var t=document.createDocumentFragment(),e=document.createComment(""),i=jn();return t.append(e,i),za(e,i),t}function fe(t,e){t!==null&&t.before(e)}function Ar(t,e){var i=e==null?"":typeof e=="object"?e+"":e;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=i+"")}function gh(t,e){return yh(t,e)}const Yr=new Map;function yh(t,{target:e,anchor:i,props:a={},events:s,context:l,intro:f=!0}){Xd();var h=new Set,v=_=>{for(var w=0;w<_.length;w++){var x=_[w];if(!h.has(x)){h.add(x);var D=ph(x);e.addEventListener(x,Ai,{passive:D});var P=Yr.get(x);P===void 0?(document.addEventListener(x,Ai,{passive:D}),Yr.set(x,1)):Yr.set(x,P+1)}}};v(Cs(ql)),bs.add(v);var m=void 0,E=nh(()=>{var _=i??e.appendChild(jn());return Md(_,{pending:()=>{}},w=>{if(l){hr({});var x=ht;x.c=l}s&&(a.$$events=s),m=t(w,a)||{},l&&vr()}),()=>{for(var w of h){e.removeEventListener(w,Ai);var x=Yr.get(w);--x===0?(document.removeEventListener(w,Ai),Yr.delete(w)):Yr.set(w,x)}bs.delete(v),_!==i&&_.parentNode?.removeChild(_)}});return bh.set(m,E),m}let bh=new WeakMap;class _h{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(e,i=!0){this.anchor=e,this.#u=i}#a=()=>{var e=nt;if(this.#e.has(e)){var i=this.#e.get(e),a=this.#t.get(i);if(a)Vs(a),this.#n.delete(i);else{var s=this.#r.get(i);s&&(this.#t.set(i,s.effect),this.#r.delete(i),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[l,f]of this.#e){if(this.#e.delete(l),l===e)break;const h=this.#r.get(f);h&&(Pt(h.effect),this.#r.delete(f))}for(const[l,f]of this.#t){if(l===i||this.#n.has(l))continue;const h=()=>{if(Array.from(this.#e.values()).includes(l)){var m=document.createDocumentFragment();Hl(f,m),m.append(jn()),this.#r.set(l,{effect:f,fragment:m})}else Pt(f);this.#n.delete(l),this.#t.delete(l)};this.#u||!a?(this.#n.add(l),Jr(f,h,!1)):h()}}};#i=e=>{this.#e.delete(e);const i=Array.from(this.#e.values());for(const[a,s]of this.#r)i.includes(a)||(Pt(s.effect),this.#r.delete(a))};ensure(e,i){var a=nt,s=Pl();if(i&&!this.#t.has(e)&&!this.#r.has(e))if(s){var l=document.createDocumentFragment(),f=jn();l.append(f),this.#r.set(e,{effect:Wt(()=>i(f)),fragment:l})}else this.#t.set(e,Wt(()=>i(this.anchor)));if(this.#e.set(a,e),s){for(const[h,v]of this.#t)h===e?a.skipped_effects.delete(v):a.skipped_effects.add(v);for(const[h,v]of this.#r)h===e?a.skipped_effects.delete(v.effect):a.skipped_effects.add(v.effect);a.oncommit(this.#a),a.ondiscard(this.#i)}else this.#a()}}function ct(t,e,i=!1){var a=new _h(t),s=i?ni:0;function l(f,h){a.ensure(f,h)}Us(()=>{var f=!1;e((h,v=!0)=>{f=!0,l(v,h)}),f||l(!1,null)},s)}function wh(t,e,i,a,s){var l=e.$$slots?.[i],f=!1;l===!0&&(l=e.children,f=!0),l===void 0||l(t,f?()=>a:a)}function Eh(t,e){var i=void 0,a;Ml(()=>{i!==(i=e())&&(a&&(Pt(a),a=null),i&&(a=Wt(()=>{Hs(()=>i(t))})))})}function Xl(t){var e,i,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=Xl(t[e]))&&(a&&(a+=" "),a+=i)}else for(i in t)t[i]&&(a&&(a+=" "),a+=i);return a}function xh(){for(var t,e,i=0,a="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=Xl(t))&&(a&&(a+=" "),a+=e);return a}function Ql(t){return typeof t=="object"?xh(t):t??""}const Hu=[...` 	
\r\fÂ \v\uFEFF`];function kh(t,e,i){var a=t==null?"":""+t;if(e&&(a=a?a+" "+e:e),i){for(var s in i)if(i[s])a=a?a+" "+s:s;else if(a.length)for(var l=s.length,f=0;(f=a.indexOf(s,f))>=0;){var h=f+l;(f===0||Hu.includes(a[f-1]))&&(h===a.length||Hu.includes(a[h]))?a=(f===0?"":a.substring(0,f))+a.substring(h+1):f=h}}return a===""?null:a}function ju(t,e=!1){var i=e?" !important;":";",a="";for(var s in t){var l=t[s];l!=null&&l!==""&&(a+=" "+s+": "+l+i)}return a}function $o(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Th(t,e){if(e){var i="",a,s;if(Array.isArray(e)?(a=e[0],s=e[1]):a=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,f=0,h=!1,v=[];a&&v.push(...Object.keys(a).map($o)),s&&v.push(...Object.keys(s).map($o));var m=0,E=-1;const P=t.length;for(var _=0;_<P;_++){var w=t[_];if(h?w==="/"&&t[_-1]==="*"&&(h=!1):l?l===w&&(l=!1):w==="/"&&t[_+1]==="*"?h=!0:w==='"'||w==="'"?l=w:w==="("?f++:w===")"&&f--,!h&&l===!1&&f===0){if(w===":"&&E===-1)E=_;else if(w===";"||_===P-1){if(E!==-1){var x=$o(t.substring(m,E).trim());if(!v.includes(x)){w!==";"&&_++;var D=t.substring(m,_).trim();i+=" "+D+";"}}m=_+1,E=-1}}}}return a&&(i+=ju(a)),s&&(i+=ju(s,!0)),i=i.trim(),i===""?null:i}return t==null?null:String(t)}function Va(t,e,i,a,s,l){var f=t.__className;if(f!==i||f===void 0){var h=kh(i,a,l);h==null?t.removeAttribute("class"):e?t.className=h:t.setAttribute("class",h),t.__className=i}else if(l&&s!==l)for(var v in l){var m=!!l[v];(s==null||m!==!!s[v])&&t.classList.toggle(v,m)}return l}function es(t,e={},i,a){for(var s in i){var l=i[s];e[s]!==l&&(i[s]==null?t.style.removeProperty(s):t.style.setProperty(s,l,a))}}function dr(t,e,i,a){var s=t.__style;if(s!==e){var l=Th(e,a);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}else a&&(Array.isArray(a)?(es(t,i?.[0],a[0]),es(t,i?.[1],a[1],"important")):es(t,i,a));return a}function _s(t,e,i=!1){if(t.multiple){if(e==null)return;if(!Ds(e))return wd();for(var a of t.options)a.selected=e.includes(Uu(a));return}for(a of t.options){var s=Uu(a);if(Yd(s,e)){a.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function Sh(t){var e=new MutationObserver(()=>{_s(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),lo(()=>{e.disconnect()})}function Uu(t){return"__value"in t?t.__value:t.value}const Ti=Symbol("class"),Si=Symbol("style"),Zl=Symbol("is custom element"),Jl=Symbol("is html");function Ah(t,e){var i=co(t);i.value===(i.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Ih(t,e){var i=co(t);i.checked!==(i.checked=e??void 0)&&(t.checked=e)}function Dh(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function Tt(t,e,i,a){var s=co(t);s[e]!==(s[e]=i)&&(e==="loading"&&(t[Xf]=i),i==null?t.removeAttribute(e):typeof i!="string"&&$l(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function Ch(t,e,i,a,s=!1,l=!1){var f=co(t),h=f[Zl],v=!f[Jl],m=e||{},E=t.tagName==="OPTION";for(var _ in e)_ in i||(i[_]=null);i.class?i.class=Ql(i.class):i[Ti]&&(i.class=null),i[Si]&&(i.style??=null);var w=$l(t);for(const B in i){let G=i[B];if(E&&B==="value"&&G==null){t.value=t.__value="",m[B]=G;continue}if(B==="class"){var x=t.namespaceURI==="http://www.w3.org/1999/xhtml";Va(t,x,G,a,e?.[Ti],i[Ti]),m[B]=G,m[Ti]=i[Ti];continue}if(B==="style"){dr(t,G,e?.[Si],i[Si]),m[B]=G,m[Si]=i[Si];continue}var D=m[B];if(!(G===D&&!(G===void 0&&t.hasAttribute(B)))){m[B]=G;var P=B[0]+B[1];if(P!=="$$")if(P==="on"){const te={},q="$$"+B;let N=B.slice(2);var C=fh(N);if(lh(N)&&(N=N.slice(0,-7),te.capture=!0),!C&&D){if(G!=null)continue;t.removeEventListener(N,m[q],te),m[q]=null}if(G!=null)if(C)t[`__${N}`]=G,di([N]);else{let Z=function(ae){m[B].call(this,ae)};var U=Z;m[q]=Gl(N,t,Z,te)}else C&&(t[`__${N}`]=void 0)}else if(B==="style")Tt(t,B,G);else if(B==="autofocus")Zd(t,!!G);else if(!h&&(B==="__value"||B==="value"&&G!=null))t.value=t.__value=G;else if(B==="selected"&&E)Dh(t,G);else{var T=B;v||(T=hh(T));var z=T==="defaultValue"||T==="defaultChecked";if(G==null&&!h&&!z)if(f[B]=null,T==="value"||T==="checked"){let te=t;const q=e===void 0;if(T==="value"){let N=te.defaultValue;te.removeAttribute(T),te.defaultValue=N,te.value=te.__value=q?N:null}else{let N=te.defaultChecked;te.removeAttribute(T),te.defaultChecked=N,te.checked=q?N:!1}}else t.removeAttribute(B);else z||w.includes(T)&&(h||typeof G!="string")?(t[T]=G,T in f&&(f[T]=Lt)):typeof G!="function"&&Tt(t,T,G)}}}return m}function Lh(t,e,i=[],a=[],s=[],l,f=!1,h=!1){Tl(s,i,a,v=>{var m=void 0,E={},_=t.nodeName==="SELECT",w=!1;if(Ml(()=>{var D=e(...v.map(y)),P=Ch(t,m,D,l,f,h);w&&_&&"value"in D&&_s(t,D.value);for(let T of Object.getOwnPropertySymbols(E))D[T]||Pt(E[T]);for(let T of Object.getOwnPropertySymbols(D)){var C=D[T];T.description===_d&&(!m||C!==m[T])&&(E[T]&&Pt(E[T]),E[T]=Wt(()=>Eh(t,()=>C))),P[T]=C}m=P}),_){var x=t;Hs(()=>{_s(x,m.value,!0),Sh(x)})}w=!0})}function co(t){return t.__attributes??={[Zl]:t.nodeName.includes("-"),[Jl]:t.namespaceURI===bd}}var zu=new Map;function $l(t){var e=t.getAttribute("is")||t.nodeName,i=zu.get(e);if(i)return i;zu.set(e,i=[]);for(var a,s=t,l=Element.prototype;l!==s;){a=zf(s);for(var f in a)a[f].set&&i.push(f);s=sl(s)}return i}function Ya(t,e,i=e){var a=new WeakSet;$d(t,"input",async s=>{le&&t.type==="checkbox"&&Lu();var l=s?t.defaultValue:t.value;if(l=ts(t)?ns(l):l,i(l),nt!==null&&a.add(nt),await at(),l!==(l=e())){var f=t.selectionStart,h=t.selectionEnd,v=t.value.length;if(t.value=l??"",h!==null){var m=t.value.length;f===h&&h===v&&m>v?(t.selectionStart=m,t.selectionEnd=m):(t.selectionStart=f,t.selectionEnd=Math.min(h,m))}}}),Br(e)==null&&t.value&&(i(ts(t)?ns(t.value):t.value),nt!==null&&a.add(nt)),js(()=>{le&&t.type==="checkbox"&&Lu();var s=e();if(t===document.activeElement){var l=Ia??nt;if(a.has(l))return}ts(t)&&s===ns(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function ts(t){var e=t.type;return e==="number"||e==="range"}function ns(t){return t===""?null:+t}function Vu(t,e){return t===e||t?.[Cr]===e}function Bt(t={},e,i,a){return Hs(()=>{var s,l;return js(()=>{s=l,l=[],Br(()=>{t!==i(...l)&&(e(t,...l),s&&Vu(i(...s),t)&&e(null,...s))})}),()=>{Rr(()=>{l&&Vu(i(...l),t)&&e(null,...l)})}}),t}function ec(t,e,i){if(t==null)return e(void 0),Ka;const a=Br(()=>t.subscribe(e,i));return a.unsubscribe?()=>a.unsubscribe():a}function Ph(t){let e;return ec(t,i=>e=i)(),e}let Ea=!1,ws=Symbol();function Wa(t,e,i){const a=i[e]??={store:null,source:Al(void 0),unsubscribe:Ka};if(le&&(a.source.label=e),a.store!==t&&!(ws in i))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=Ka;else{var s=!0;a.unsubscribe=ec(t,l=>{s?a.source.v=l:K(a.source,l)}),s=!1}return t&&ws in i?Ph(t):y(a.source)}function qa(t,e,i){let a=i[e];return a&&a.store!==t&&(a.unsubscribe(),a.unsubscribe=Ka),t}function Ys(){const t={};function e(){lo(()=>{for(var i in t)t[i].unsubscribe();cr(t,ws,{enumerable:!1,value:!0})})}return[t,e]}function Oh(t){var e=Ea;try{return Ea=!1,[t(),Ea]}finally{Ea=e}}const Mh={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return le&&rd(`${t.name}.${String(e)}`),!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Rh(t,e,i){return new Proxy(le?{props:t,exclude:e,name:i,other:{},to_proxy:[]}:{props:t,exclude:e},Mh)}function Nt(t,e,i,a){var s=!fi||(i&dd)!==0,l=(i&vd)!==0,f=(i&pd)!==0,h=a,v=!0,m=()=>(v&&(v=!1,h=f?Br(a):a),h),E;if(l){var _=Cr in t||Gf in t;E=Dr(t,e)?.set??(_&&e in t?U=>t[e]=U:void 0)}var w,x=!1;l?[w,x]=Oh(()=>t[e]):w=t[e],w===void 0&&a!==void 0&&(w=m(),E&&(s&&nd(e),E(w)));var D;if(s?D=()=>{var U=t[e];return U===void 0?m():(v=!0,U)}:D=()=>{var U=t[e];return U!==void 0&&(h=void 0),U===void 0?h:U},s&&(i&hd)===0)return D;if(E){var P=t.$$legacy;return(function(U,B){return arguments.length>0?((!s||!B||P||x)&&E(B?D():U),U):D()})}var C=!1,T=((i&fd)!==0?so:Ks)(()=>(C=!1,D()));le&&(T.label=e),l&&y(T);var z=Ge;return(function(U,B){if(arguments.length>0){const G=B?y(T):s&&l?an(U):U;return K(T,G),C=!0,h!==void 0&&(h=G),U}return Kr&&C||(z.f&Nn)!==0?T.v:y(T)})}if(le){let t=function(e){if(!(e in globalThis)){let i;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(i!==void 0)return i;id(e)},set:a=>{i=a}})}};var bm=t;t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function Kh(t){ht===null&&dl("onMount"),fi&&ht.l!==null?Bh(ht).m.push(t):Qe(()=>{const e=Br(t);if(typeof e=="function")return e})}function tc(t){ht===null&&dl("onDestroy"),Kh(()=>()=>Br(t))}function Bh(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Nh="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Nh);Td();var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ca={exports:{}},jh=Ca.exports,Yu;function Uh(){return Yu||(Yu=1,(function(t,e){(function(i,a){t.exports=a()})(jh,(function(){var i=function(n,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(o[c]=u[c])},i(n,r)};function a(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");i(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}var s=function(){return s=Object.assign||function(r){for(var o,u=1,c=arguments.length;u<c;u++){o=arguments[u];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(r[d]=o[d])}return r},s.apply(this,arguments)};function l(n,r,o){for(var u=0,c=r.length,d;u<c;u++)(d||!(u in r))&&(d||(d=Array.prototype.slice.call(r,0,u)),d[u]=r[u]);return n.concat(d||Array.prototype.slice.call(r))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Fh,h=Object.keys,v=Array.isArray;typeof Promise<"u"&&!f.Promise&&(f.Promise=Promise);function m(n,r){return typeof r!="object"||h(r).forEach(function(o){n[o]=r[o]}),n}var E=Object.getPrototypeOf,_={}.hasOwnProperty;function w(n,r){return _.call(n,r)}function x(n,r){typeof r=="function"&&(r=r(E(n))),(typeof Reflect>"u"?h:Reflect.ownKeys)(r).forEach(function(o){P(n,o,r[o])})}var D=Object.defineProperty;function P(n,r,o,u){D(n,r,m(o&&w(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},u))}function C(n){return{from:function(r){return n.prototype=Object.create(r.prototype),P(n.prototype,"constructor",n),{extend:x.bind(null,n.prototype)}}}}var T=Object.getOwnPropertyDescriptor;function z(n,r){var o=T(n,r),u;return o||(u=E(n))&&z(u,r)}var U=[].slice;function B(n,r,o){return U.call(n,r,o)}function G(n,r){return r(n)}function te(n){if(!n)throw new Error("Assertion Failed")}function q(n){f.setImmediate?setImmediate(n):setTimeout(n,0)}function N(n,r){return n.reduce(function(o,u,c){var d=r(u,c);return d&&(o[d[0]]=d[1]),o},{})}function Z(n,r){if(typeof r=="string"&&w(n,r))return n[r];if(!r)return n;if(typeof r!="string"){for(var o=[],u=0,c=r.length;u<c;++u){var d=Z(n,r[u]);o.push(d)}return o}var p=r.indexOf(".");if(p!==-1){var g=n[r.substr(0,p)];return g==null?void 0:Z(g,r.substr(p+1))}}function ae(n,r,o){if(!(!n||r===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof r!="string"&&"length"in r){te(typeof o!="string"&&"length"in o);for(var u=0,c=r.length;u<c;++u)ae(n,r[u],o[u])}else{var d=r.indexOf(".");if(d!==-1){var p=r.substr(0,d),g=r.substr(d+1);if(g==="")o===void 0?v(n)&&!isNaN(parseInt(p))?n.splice(p,1):delete n[p]:n[p]=o;else{var b=n[p];(!b||!w(n,p))&&(b=n[p]={}),ae(b,g,o)}}else o===void 0?v(n)&&!isNaN(parseInt(r))?n.splice(r,1):delete n[r]:n[r]=o}}function W(n,r){typeof r=="string"?ae(n,r,void 0):"length"in r&&[].map.call(r,function(o){ae(n,o,void 0)})}function ge(n){var r={};for(var o in n)w(n,o)&&(r[o]=n[o]);return r}var ve=[].concat;function pe(n){return ve.apply([],n)}var Le="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(pe([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(r){return r+n+"Array"})}))).filter(function(n){return f[n]}),Xe=new Set(Le.map(function(n){return f[n]}));function rt(n){var r={};for(var o in n)if(w(n,o)){var u=n[o];r[o]=!u||typeof u!="object"||Xe.has(u.constructor)?u:rt(u)}return r}function ie(n){for(var r in n)if(w(n,r))return!1;return!0}var Re=null;function Ae(n){Re=new WeakMap;var r=$e(n);return Re=null,r}function $e(n){if(!n||typeof n!="object")return n;var r=Re.get(n);if(r)return r;if(v(n)){r=[],Re.set(n,r);for(var o=0,u=n.length;o<u;++o)r.push($e(n[o]))}else if(Xe.has(n.constructor))r=n;else{var c=E(n);r=c===Object.prototype?{}:Object.create(c),Re.set(n,r);for(var d in n)w(n,d)&&(r[d]=$e(n[d]))}return r}var Ke={}.toString;function qe(n){return Ke.call(n).slice(8,-1)}var Y=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Q=typeof Y=="symbol"?function(n){var r;return n!=null&&(r=n[Y])&&r.apply(n)}:function(){return null};function ce(n,r){var o=n.indexOf(r);return o>=0&&n.splice(o,1),o>=0}var De={};function ye(n){var r,o,u,c;if(arguments.length===1){if(v(n))return n.slice();if(this===De&&typeof n=="string")return[n];if(c=Q(n)){for(o=[];u=c.next(),!u.done;)o.push(u.value);return o}if(n==null)return[n];if(r=n.length,typeof r=="number"){for(o=new Array(r);r--;)o[r]=n[r];return o}return[n]}for(r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return o}var Ze=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},wt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Je=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ft=wt.concat(Je),Et={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ze(n,r){this.name=n,this.message=r}C(ze).from(Error).extend({toString:function(){return this.name+": "+this.message}});function et(n,r){return n+". Errors: "+Object.keys(r).map(function(o){return r[o].toString()}).filter(function(o,u,c){return c.indexOf(o)===u}).join(`
`)}function vt(n,r,o,u){this.failures=r,this.failedKeys=u,this.successCount=o,this.message=et(n,r)}C(vt).from(ze);function xt(n,r){this.name="BulkError",this.failures=Object.keys(r).map(function(o){return r[o]}),this.failuresByPos=r,this.message=et(n,this.failures)}C(xt).from(ze);var At=ft.reduce(function(n,r){return n[r]=r+"Error",n},{}),sn=ze,ue=ft.reduce(function(n,r){var o=r+"Error";function u(c,d){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Et[r]||o,this.inner=null)}return C(u).from(sn),n[r]=u,n},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var un=Je.reduce(function(n,r){return n[r+"Error"]=ue[r],n},{});function Qt(n,r){if(!n||n instanceof ze||n instanceof TypeError||n instanceof SyntaxError||!n.name||!un[n.name])return n;var o=new un[n.name](r||n.message,n);return"stack"in n&&P(o,"stack",{get:function(){return this.inner.stack}}),o}var En=ft.reduce(function(n,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(n[r+"Error"]=ue[r]),n},{});En.ModifyError=vt,En.DexieError=ze,En.BulkError=xt;function Ne(){}function ln(n){return n}function $(n,r){return n==null||n===ln?r:function(o){return r(n(o))}}function me(n,r){return function(){n.apply(this,arguments),r.apply(this,arguments)}}function _e(n,r){return n===Ne?r:function(){var o=n.apply(this,arguments);o!==void 0&&(arguments[0]=o);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=r.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?me(u,this.onsuccess):u),c&&(this.onerror=this.onerror?me(c,this.onerror):c),d!==void 0?d:o}}function Fe(n,r){return n===Ne?r:function(){n.apply(this,arguments);var o=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?me(o,this.onsuccess):o),u&&(this.onerror=this.onerror?me(u,this.onerror):u)}}function ot(n,r){return n===Ne?r:function(o){var u=n.apply(this,arguments);m(o,u);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var p=r.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?me(c,this.onsuccess):c),d&&(this.onerror=this.onerror?me(d,this.onerror):d),u===void 0?p===void 0?void 0:p:m(u,p)}}function Zt(n,r){return n===Ne?r:function(){return r.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function tt(n,r){return n===Ne?r:function(){var o=n.apply(this,arguments);if(o&&typeof o.then=="function"){for(var u=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return o.then(function(){return r.apply(u,d)})}return r.apply(this,arguments)}}var ke=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function It(n,r){ke=n}var it={},Dt=100,Jt=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,E(n),n];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,E(r),n]})(),cn=Jt[0],Nr=Jt[1],st=Jt[2],qn=Nr&&Nr.then,$t=cn&&cn.constructor,Gi=!!st;function vo(){queueMicrotask(Ac)}var hi=function(n,r){vi.push([n,r]),Xi&&(vo(),Xi=!1)},po=!0,Xi=!0,pr=[],Qi=[],mo=ln,Gn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ne,pgp:!1,env:{},finalize:Ne},de=Gn,vi=[],mr=0,Zi=[];function re(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=de;if(typeof n!="function"){if(n!==it)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&yo(this,this._value);return}this._state=null,this._value=null,++r.ref,Zs(this,n)}var go={get:function(){var n=de,r=ta;function o(u,c){var d=this,p=!n.global&&(n!==de||r!==ta),g=p&&!Qn(),b=new re(function(k,I){bo(d,new Qs(eu(u,n,p,g),eu(c,n,p,g),k,I,n))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return o.prototype=it,o},set:function(n){P(this,"then",n&&n.prototype===it?go:{get:function(){return n},set:go.set})}};x(re.prototype,{then:go,_then:function(n,r){bo(this,new Qs(null,null,n,r,de))},catch:function(n){if(arguments.length===1)return this.then(null,n);var r=arguments[0],o=arguments[1];return typeof r=="function"?this.then(null,function(u){return u instanceof r?o(u):Ji(u)}):this.then(null,function(u){return u&&u.name===r?o(u):Ji(u)})},finally:function(n){return this.then(function(r){return re.resolve(n()).then(function(){return r})},function(r){return re.resolve(n()).then(function(){return Ji(r)})})},timeout:function(n,r){var o=this;return n<1/0?new re(function(u,c){var d=setTimeout(function(){return c(new ue.Timeout(r))},n);o.then(u,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&P(re.prototype,Symbol.toStringTag,"Dexie.Promise"),Gn.env=$s();function Qs(n,r,o,u,c){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=o,this.reject=u,this.psd=c}x(re,{all:function(){var n=ye.apply(null,arguments).map(na);return new re(function(r,o){n.length===0&&r([]);var u=n.length;n.forEach(function(c,d){return re.resolve(c).then(function(p){n[d]=p,--u||r(n)},o)})})},resolve:function(n){if(n instanceof re)return n;if(n&&typeof n.then=="function")return new re(function(o,u){n.then(o,u)});var r=new re(it,!0,n);return r},reject:Ji,race:function(){var n=ye.apply(null,arguments).map(na);return new re(function(r,o){n.map(function(u){return re.resolve(u).then(r,o)})})},PSD:{get:function(){return de},set:function(n){return de=n}},totalEchoes:{get:function(){return ta}},newPSD:Xn,usePSD:gr,scheduler:{get:function(){return hi},set:function(n){hi=n}},rejectionMapper:{get:function(){return mo},set:function(n){mo=n}},follow:function(n,r){return new re(function(o,u){return Xn(function(c,d){var p=de;p.unhandleds=[],p.onunhandled=d,p.finalize=me(function(){var g=this;Ic(function(){g.unhandleds.length===0?c():d(g.unhandleds[0])})},p.finalize),n()},r,o,u)})}}),$t&&($t.allSettled&&P(re,"allSettled",function(){var n=ye.apply(null,arguments).map(na);return new re(function(r){n.length===0&&r([]);var o=n.length,u=new Array(o);n.forEach(function(c,d){return re.resolve(c).then(function(p){return u[d]={status:"fulfilled",value:p}},function(p){return u[d]={status:"rejected",reason:p}}).then(function(){return--o||r(u)})})})}),$t.any&&typeof AggregateError<"u"&&P(re,"any",function(){var n=ye.apply(null,arguments).map(na);return new re(function(r,o){n.length===0&&o(new AggregateError([]));var u=n.length,c=new Array(u);n.forEach(function(d,p){return re.resolve(d).then(function(g){return r(g)},function(g){c[p]=g,--u||o(new AggregateError(c))})})})}),$t.withResolvers&&(re.withResolvers=$t.withResolvers));function Zs(n,r){try{r(function(o){if(n._state===null){if(o===n)throw new TypeError("A promise cannot be resolved with itself.");var u=n._lib&&Fr();o&&typeof o.then=="function"?Zs(n,function(c,d){o instanceof re?o._then(c,d):o.then(c,d)}):(n._state=!0,n._value=o,Js(n)),u&&Hr()}},yo.bind(null,n))}catch(o){yo(n,o)}}function yo(n,r){if(Qi.push(r),n._state===null){var o=n._lib&&Fr();r=mo(r),n._state=!1,n._value=r,Dc(n),Js(n),o&&Hr()}}function Js(n){var r=n._listeners;n._listeners=[];for(var o=0,u=r.length;o<u;++o)bo(n,r[o]);var c=n._PSD;--c.ref||c.finalize(),mr===0&&(++mr,hi(function(){--mr===0&&_o()},[]))}function bo(n,r){if(n._state===null){n._listeners.push(r);return}var o=n._state?r.onFulfilled:r.onRejected;if(o===null)return(n._state?r.resolve:r.reject)(n._value);++r.psd.ref,++mr,hi(Sc,[o,n,r])}function Sc(n,r,o){try{var u,c=r._value;!r._state&&Qi.length&&(Qi=[]),u=ke&&r._consoleTask?r._consoleTask.run(function(){return n(c)}):n(c),!r._state&&Qi.indexOf(c)===-1&&Cc(r),o.resolve(u)}catch(d){o.reject(d)}finally{--mr===0&&_o(),--o.psd.ref||o.psd.finalize()}}function Ac(){gr(Gn,function(){Fr()&&Hr()})}function Fr(){var n=po;return po=!1,Xi=!1,n}function Hr(){var n,r,o;do for(;vi.length>0;)for(n=vi,vi=[],o=n.length,r=0;r<o;++r){var u=n[r];u[0].apply(null,u[1])}while(vi.length>0);po=!0,Xi=!0}function _o(){var n=pr;pr=[],n.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var r=Zi.slice(0),o=r.length;o;)r[--o]()}function Ic(n){function r(){n(),Zi.splice(Zi.indexOf(r),1)}Zi.push(r),++mr,hi(function(){--mr===0&&_o()},[])}function Dc(n){pr.some(function(r){return r._value===n._value})||pr.push(n)}function Cc(n){for(var r=pr.length;r;)if(pr[--r]._value===n._value){pr.splice(r,1);return}}function Ji(n){return new re(it,!1,n)}function ut(n,r){var o=de;return function(){var u=Fr(),c=de;try{return Zn(o,!0),n.apply(this,arguments)}catch(d){r&&r(d)}finally{Zn(c,!1),u&&Hr()}}}var kt={awaits:0,echoes:0,id:0},Lc=0,$i=[],ea=0,ta=0,Pc=0;function Xn(n,r,o,u){var c=de,d=Object.create(c);d.parent=c,d.ref=0,d.global=!1,d.id=++Pc,Gn.env,d.env=Gi?{Promise:re,PromiseProp:{value:re,configurable:!0,writable:!0},all:re.all,race:re.race,allSettled:re.allSettled,any:re.any,resolve:re.resolve,reject:re.reject}:{},r&&m(d,r),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()};var p=gr(d,n,o,u);return d.ref===0&&d.finalize(),p}function jr(){return kt.id||(kt.id=++Lc),++kt.awaits,kt.echoes+=Dt,kt.id}function Qn(){return kt.awaits?(--kt.awaits===0&&(kt.id=0),kt.echoes=kt.awaits*Dt,!0):!1}(""+qn).indexOf("[native code]")===-1&&(jr=Qn=Ne);function na(n){return kt.echoes&&n&&n.constructor===$t?(jr(),n.then(function(r){return Qn(),r},function(r){return Qn(),gt(r)})):n}function Oc(n){++ta,(!kt.echoes||--kt.echoes===0)&&(kt.echoes=kt.awaits=kt.id=0),$i.push(de),Zn(n,!0)}function Mc(){var n=$i[$i.length-1];$i.pop(),Zn(n,!1)}function Zn(n,r){var o=de;if((r?kt.echoes&&(!ea++||n!==de):ea&&(!--ea||n!==de))&&queueMicrotask(r?Oc.bind(null,n):Mc),n!==de&&(de=n,o===Gn&&(Gn.env=$s()),Gi)){var u=Gn.env.Promise,c=n.env;(o.global||n.global)&&(Object.defineProperty(f,"Promise",c.PromiseProp),u.all=c.all,u.race=c.race,u.resolve=c.resolve,u.reject=c.reject,c.allSettled&&(u.allSettled=c.allSettled),c.any&&(u.any=c.any))}}function $s(){var n=f.Promise;return Gi?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function gr(n,r,o,u,c){var d=de;try{return Zn(n,!0),r(o,u,c)}finally{Zn(d,!1)}}function eu(n,r,o,u){return typeof n!="function"?n:function(){var c=de;o&&jr(),Zn(r,!0);try{return n.apply(this,arguments)}finally{Zn(c,!1),u&&queueMicrotask(Qn)}}}function wo(n){Promise===$t&&kt.echoes===0?ea===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}var gt=re.reject;function Eo(n,r,o,u){if(!n.idbdb||!n._state.openComplete&&!de.letThrough&&!n._vip){if(n._state.openComplete)return gt(new ue.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return gt(new ue.DatabaseClosed);n.open().catch(Ne)}return n._state.dbReadyPromise.then(function(){return Eo(n,r,o,u)})}else{var c=n._createTransaction(r,o,n._dbSchema);try{c.create(),n._state.PR1398_maxLoop=3}catch(d){return d.name===At.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return Eo(n,r,o,u)})):gt(d)}return c._promise(r,function(d,p){return Xn(function(){return de.trans=c,u(d,p,c)})}).then(function(d){if(r==="readwrite")try{c.idbtrans.commit()}catch{}return r==="readonly"?d:c._completion.then(function(){return d})})}}var tu="4.2.1",yr="ï¿¿",xo=-1/0,Rn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",nu="String expected.",Ur=[],ra="__dbnames",ko="readonly",To="readwrite";function br(n,r){return n?r?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:n:r}var ru={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ia(n){return typeof n=="string"&&!/\./.test(n)?function(r){return r[n]===void 0&&n in r&&(r=Ae(r),delete r[n]),r}:function(r){return r}}function iu(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function je(n,r){try{var o=au(n),u=au(r);if(o!==u)return o==="Array"?1:u==="Array"?-1:o==="binary"?1:u==="binary"?-1:o==="string"?1:u==="string"?-1:o==="Date"?1:u!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return n>r?1:n<r?-1:0;case"binary":return Kc(ou(n),ou(r));case"Array":return Rc(n,r)}}catch{}return NaN}function Rc(n,r){for(var o=n.length,u=r.length,c=o<u?o:u,d=0;d<c;++d){var p=je(n[d],r[d]);if(p!==0)return p}return o===u?0:o<u?-1:1}function Kc(n,r){for(var o=n.length,u=r.length,c=o<u?o:u,d=0;d<c;++d)if(n[d]!==r[d])return n[d]<r[d]?-1:1;return o===u?0:o<u?-1:1}function au(n){var r=typeof n;if(r!=="object")return r;if(ArrayBuffer.isView(n))return"binary";var o=qe(n);return o==="ArrayBuffer"?"binary":o}function ou(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function aa(n,r,o){var u=n.schema.yProps;return u?(r&&o.numFailures>0&&(r=r.filter(function(c,d){return!o.failures[d]})),Promise.all(u.map(function(c){var d=c.updatesTable;return r?n.db.table(d).where("k").anyOf(r).delete():n.db.table(d).clear()})).then(function(){return o})):o}var pi=(function(){function n(r){this["@@propmod"]=r}return n.prototype.execute=function(r){var o,u=this["@@propmod"];if(u.add!==void 0){var c=u.add;if(v(c))return l(l([],v(r)?r:[],!0),c).sort();if(typeof c=="number")return(Number(r)||0)+c;if(typeof c=="bigint")try{return BigInt(r)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(u.remove!==void 0){var d=u.remove;if(v(d))return v(r)?r.filter(function(g){return!d.includes(g)}).sort():[];if(typeof d=="number")return Number(r)-d;if(typeof d=="bigint")try{return BigInt(r)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}var p=(o=u.replacePrefix)===null||o===void 0?void 0:o[0];return p&&typeof r=="string"&&r.startsWith(p)?u.replacePrefix[1]+r.substring(p.length):r},n})();function su(n,r){for(var o=h(r),u=o.length,c=!1,d=0;d<u;++d){var p=o[d],g=r[p],b=Z(n,p);g instanceof pi?(ae(n,p,g.execute(b)),c=!0):b!==g&&(ae(n,p,g),c=!0)}return c}var uu=(function(){function n(){}return n.prototype._trans=function(r,o,u){var c=this._tx||de.trans,d=this.name,p=ke&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function g(I,S,M){if(!M.schema[d])throw new ue.NotFound("Table "+d+" not part of transaction");return o(M.idbtrans,M)}var b=Fr();try{var k=c&&c.db._novip===this.db._novip?c===de.trans?c._promise(r,g,u):Xn(function(){return c._promise(r,g,u)},{trans:c,transless:de.transless||de}):Eo(this.db,r,[this.name],g);return p&&(k._consoleTask=p,k=k.catch(function(I){return console.trace(I),gt(I)})),k}finally{b&&Hr()}},n.prototype.get=function(r,o){var u=this;return r&&r.constructor===Object?this.where(r).first(o):r==null?gt(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return u.core.get({trans:c,key:r}).then(function(d){return u.hook.reading.fire(d)})}).then(o)},n.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(v(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var o=h(r);if(o.length===1)return this.where(o[0]).equals(r[o[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(I){if(I.compound&&o.every(function(M){return I.keyPath.indexOf(M)>=0})){for(var S=0;S<o.length;++S)if(o.indexOf(I.keyPath[S])===-1)return!1;return!0}return!1}).sort(function(I,S){return I.keyPath.length-S.keyPath.length})[0];if(u&&this.db._maxKey!==yr){var c=u.keyPath.slice(0,o.length);return this.where(c).equals(c.map(function(I){return r[I]}))}!u&&ke&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var d=this.schema.idxByName;function p(I,S){return je(I,S)===0}var g=o.reduce(function(I,S){var M=I[0],X=I[1],A=d[S],L=r[S];return[M||A,M||!A?br(X,A&&A.multi?function(O){var R=Z(O,S);return v(R)&&R.some(function(H){return p(L,H)})}:function(O){return p(L,Z(O,S))}):X]},[null,null]),b=g[0],k=g[1];return b?this.where(b.name).equals(r[b.keyPath]).filter(k):u?this.filter(k):this.where(o).equals("")},n.prototype.filter=function(r){return this.toCollection().and(r)},n.prototype.count=function(r){return this.toCollection().count(r)},n.prototype.offset=function(r){return this.toCollection().offset(r)},n.prototype.limit=function(r){return this.toCollection().limit(r)},n.prototype.each=function(r){return this.toCollection().each(r)},n.prototype.toArray=function(r){return this.toCollection().toArray(r)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,v(r)?"[".concat(r.join("+"),"]"):r))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(r){var o=this,u=o.db,c=o.name;this.schema.mappedClass=r,r.prototype instanceof iu&&(r=(function(b){a(k,b);function k(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(k.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),k.prototype.table=function(){return c},k})(r));for(var d=new Set,p=r.prototype;p;p=E(p))Object.getOwnPropertyNames(p).forEach(function(b){return d.add(b)});var g=function(b){if(!b)return b;var k=Object.create(r.prototype);for(var I in b)if(!d.has(I))try{k[I]=b[I]}catch{}return k};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),r},n.prototype.defineClass=function(){function r(o){m(this,o)}return this.mapToClass(r)},n.prototype.add=function(r,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,g=r;return p&&d&&(g=ia(p)(r)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"add",keys:o!=null?[o]:null,values:[g]})}).then(function(b){return b.numFailures?re.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{ae(r,p,b)}catch{}return b})},n.prototype.upsert=function(r,o){var u=this,c=this.schema.primKey.keyPath;return this._trans("readwrite",function(d){return u.core.get({trans:d,key:r}).then(function(p){var g=p??{};return su(g,o),c&&ae(g,c,r),u.core.mutate({trans:d,type:"put",values:[g],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[o]}}).then(function(b){return b.numFailures?re.reject(b.failures[0]):!!p})})})},n.prototype.update=function(r,o){if(typeof r=="object"&&!v(r)){var u=Z(r,this.schema.primKey.keyPath);return u===void 0?gt(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(o)}else return this.where(":id").equals(r).modify(o)},n.prototype.put=function(r,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,g=r;return p&&d&&(g=ia(p)(r)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"put",values:[g],keys:o!=null?[o]:null})}).then(function(b){return b.numFailures?re.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{ae(r,p,b)}catch{}return b})},n.prototype.delete=function(r){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"delete",keys:[r]}).then(function(c){return aa(o,[r],c)}).then(function(c){return c.numFailures?re.reject(c.failures[0]):void 0})})},n.prototype.clear=function(){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"deleteRange",range:ru}).then(function(u){return aa(r,null,u)})}).then(function(o){return o.numFailures?re.reject(o.failures[0]):void 0})},n.prototype.bulkGet=function(r){var o=this;return this._trans("readonly",function(u){return o.core.getMany({keys:r,trans:u}).then(function(c){return c.map(function(d){return o.hook.reading.fire(d)})})})},n.prototype.bulkAdd=function(r,o,u){var c=this,d=Array.isArray(o)?o:void 0;u=u||(d?void 0:o);var p=u?u.allKeys:void 0;return this._trans("readwrite",function(g){var b=c.schema.primKey,k=b.auto,I=b.keyPath;if(I&&d)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var S=r.length,M=I&&k?r.map(ia(I)):r;return c.core.mutate({trans:g,type:"add",keys:d,values:M,wantResults:p}).then(function(X){var A=X.numFailures,L=X.results,O=X.lastResult,R=X.failures,H=p?L:O;if(A===0)return H;throw new xt("".concat(c.name,".bulkAdd(): ").concat(A," of ").concat(S," operations failed"),R)})})},n.prototype.bulkPut=function(r,o,u){var c=this,d=Array.isArray(o)?o:void 0;u=u||(d?void 0:o);var p=u?u.allKeys:void 0;return this._trans("readwrite",function(g){var b=c.schema.primKey,k=b.auto,I=b.keyPath;if(I&&d)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var S=r.length,M=I&&k?r.map(ia(I)):r;return c.core.mutate({trans:g,type:"put",keys:d,values:M,wantResults:p}).then(function(X){var A=X.numFailures,L=X.results,O=X.lastResult,R=X.failures,H=p?L:O;if(A===0)return H;throw new xt("".concat(c.name,".bulkPut(): ").concat(A," of ").concat(S," operations failed"),R)})})},n.prototype.bulkUpdate=function(r){var o=this,u=this.core,c=r.map(function(g){return g.key}),d=r.map(function(g){return g.changes}),p=[];return this._trans("readwrite",function(g){return u.getMany({trans:g,keys:c,cache:"clone"}).then(function(b){var k=[],I=[];r.forEach(function(M,X){var A=M.key,L=M.changes,O=b[X];if(O){for(var R=0,H=Object.keys(L);R<H.length;R++){var j=H[R],V=L[j];if(j===o.schema.primKey.keyPath){if(je(V,A)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else ae(O,j,V)}p.push(X),k.push(A),I.push(O)}});var S=k.length;return u.mutate({trans:g,type:"put",keys:k,values:I,updates:{keys:c,changeSpecs:d}}).then(function(M){var X=M.numFailures,A=M.failures;if(X===0)return S;for(var L=0,O=Object.keys(A);L<O.length;L++){var R=O[L],H=p[Number(R)];if(H!=null){var j=A[R];delete A[R],A[H]=j}}throw new xt("".concat(o.name,".bulkUpdate(): ").concat(X," of ").concat(S," operations failed"),A)})})})},n.prototype.bulkDelete=function(r){var o=this,u=r.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:r}).then(function(d){return aa(o,r,d)})}).then(function(c){var d=c.numFailures,p=c.lastResult,g=c.failures;if(d===0)return p;throw new xt("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(u," operations failed"),g)})},n})();function mi(n){var r={},o=function(g,b){if(b){for(var k=arguments.length,I=new Array(k-1);--k;)I[k-1]=arguments[k];return r[g].subscribe.apply(null,I),n}else if(typeof g=="string")return r[g]};o.addEventType=d;for(var u=1,c=arguments.length;u<c;++u)d(arguments[u]);return o;function d(g,b,k){if(typeof g=="object")return p(g);b||(b=Zt),k||(k=Ne);var I={subscribers:[],fire:k,subscribe:function(S){I.subscribers.indexOf(S)===-1&&(I.subscribers.push(S),I.fire=b(I.fire,S))},unsubscribe:function(S){I.subscribers=I.subscribers.filter(function(M){return M!==S}),I.fire=I.subscribers.reduce(b,k)}};return r[g]=o[g]=I,I}function p(g){h(g).forEach(function(b){var k=g[b];if(v(k))d(b,g[b][0],g[b][1]);else if(k==="asap")var I=d(b,ln,function(){for(var M=arguments.length,X=new Array(M);M--;)X[M]=arguments[M];I.subscribers.forEach(function(A){q(function(){A.apply(null,X)})})});else throw new ue.InvalidArgument("Invalid event config")})}}function gi(n,r){return C(r).from({prototype:n}),r}function Bc(n){return gi(uu.prototype,function(o,u,c){this.db=n,this._tx=c,this.name=o,this.schema=u,this.hook=n._allTables[o]?n._allTables[o].hook:mi(null,{creating:[_e,Ne],reading:[$,ln],updating:[ot,Ne],deleting:[Fe,Ne]})})}function zr(n,r){return!(n.filter||n.algorithm||n.or)&&(r?n.justLimit:!n.replayFilter)}function So(n,r){n.filter=br(n.filter,r)}function Ao(n,r,o){var u=n.replayFilter;n.replayFilter=u?function(){return br(u(),r())}:r,n.justLimit=o&&!u}function Nc(n,r){n.isMatch=br(n.isMatch,r)}function oa(n,r){if(n.isPrimKey)return r.primaryKey;var o=r.getIndexByKeyPath(n.index);if(!o)throw new ue.Schema("KeyPath "+n.index+" on object store "+r.name+" is not indexed");return o}function lu(n,r,o){var u=oa(n,r.schema);return r.openCursor({trans:o,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:u,range:n.range}})}function sa(n,r,o,u){var c=n.replayFilter?br(n.filter,n.replayFilter()):n.filter;if(n.or){var d={},p=function(g,b,k){if(!c||c(b,k,function(M){return b.stop(M)},function(M){return b.fail(M)})){var I=b.primaryKey,S=""+I;S==="[object ArrayBuffer]"&&(S=""+new Uint8Array(I)),w(d,S)||(d[S]=!0,r(g,b,k))}};return Promise.all([n.or._iterate(p,o),cu(lu(n,u,o),n.algorithm,p,!n.keysOnly&&n.valueMapper)])}else return cu(lu(n,u,o),br(n.algorithm,c),r,!n.keysOnly&&n.valueMapper)}function cu(n,r,o,u){var c=u?function(p,g,b){return o(u(p),g,b)}:o,d=ut(c);return n.then(function(p){if(p)return p.start(function(){var g=function(){return p.continue()};(!r||r(p,function(b){return g=b},function(b){p.stop(b),g=Ne},function(b){p.fail(b),g=Ne}))&&d(p.value,p,function(b){return g=b}),g()})})}var Fc=(function(){function n(){}return n.prototype._read=function(r,o){var u=this._ctx;return u.error?u.table._trans(null,gt.bind(null,u.error)):u.table._trans("readonly",r).then(o)},n.prototype._write=function(r){var o=this._ctx;return o.error?o.table._trans(null,gt.bind(null,o.error)):o.table._trans("readwrite",r,"locked")},n.prototype._addAlgorithm=function(r){var o=this._ctx;o.algorithm=br(o.algorithm,r)},n.prototype._iterate=function(r,o){return sa(this._ctx,r,o,this._ctx.table.core)},n.prototype.clone=function(r){var o=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return r&&m(u,r),o._ctx=u,o},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(r){var o=this._ctx;return this._read(function(u){return sa(o,r,u,o.table.core)})},n.prototype.count=function(r){var o=this;return this._read(function(u){var c=o._ctx,d=c.table.core;if(zr(c,!0))return d.count({trans:u,query:{index:oa(c,d.schema),range:c.range}}).then(function(g){return Math.min(g,c.limit)});var p=0;return sa(c,function(){return++p,!1},u,d).then(function(){return p})}).then(r)},n.prototype.sortBy=function(r,o){var u=r.split(".").reverse(),c=u[0],d=u.length-1;function p(k,I){return I?p(k[u[I]],I-1):k[c]}var g=this._ctx.dir==="next"?1:-1;function b(k,I){var S=p(k,d),M=p(I,d);return je(S,M)*g}return this.toArray(function(k){return k.sort(b)}).then(o)},n.prototype.toArray=function(r){var o=this;return this._read(function(u){var c=o._ctx;if(c.dir==="next"&&zr(c,!0)&&c.limit>0){var d=c.valueMapper,p=oa(c,c.table.core.schema);return c.table.core.query({trans:u,limit:c.limit,values:!0,query:{index:p,range:c.range}}).then(function(b){var k=b.result;return d?k.map(d):k})}else{var g=[];return sa(c,function(b){return g.push(b)},u,c.table.core).then(function(){return g})}},r)},n.prototype.offset=function(r){var o=this._ctx;return r<=0?this:(o.offset+=r,zr(o)?Ao(o,function(){var u=r;return function(c,d){return u===0?!0:u===1?(--u,!1):(d(function(){c.advance(u),u=0}),!1)}}):Ao(o,function(){var u=r;return function(){return--u<0}}),this)},n.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),Ao(this._ctx,function(){var o=r;return function(u,c,d){return--o<=0&&c(d),o>=0}},!0),this},n.prototype.until=function(r,o){return So(this._ctx,function(u,c,d){return r(u.value)?(c(d),o):!0}),this},n.prototype.first=function(r){return this.limit(1).toArray(function(o){return o[0]}).then(r)},n.prototype.last=function(r){return this.reverse().first(r)},n.prototype.filter=function(r){return So(this._ctx,function(o){return r(o.value)}),Nc(this._ctx,r),this},n.prototype.and=function(r){return this.filter(r)},n.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){r(c.key,c)})},n.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},n.prototype.eachPrimaryKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){r(c.primaryKey,c)})},n.prototype.keys=function(r){var o=this._ctx;o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.key)}).then(function(){return u}).then(r)},n.prototype.primaryKeys=function(r){var o=this._ctx;if(o.dir==="next"&&zr(o,!0)&&o.limit>0)return this._read(function(c){var d=oa(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(c){var d=c.result;return d}).then(r);o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.primaryKey)}).then(function(){return u}).then(r)},n.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},n.prototype.firstKey=function(r){return this.limit(1).keys(function(o){return o[0]}).then(r)},n.prototype.lastKey=function(r){return this.reverse().firstKey(r)},n.prototype.distinct=function(){var r=this._ctx,o=r.index&&r.table.schema.idxByName[r.index];if(!o||!o.multi)return this;var u={};return So(this._ctx,function(c){var d=c.primaryKey.toString(),p=w(u,d);return u[d]=!0,!p}),this},n.prototype.modify=function(r){var o=this,u=this._ctx;return this._write(function(c){var d;typeof r=="function"?d=r:d=function(R){return su(R,r)};var p=u.table.core,g=p.schema.primaryKey,b=g.outbound,k=g.extractKey,I=200,S=o.db._options.modifyChunkSize;S&&(typeof S=="object"?I=S[p.name]||S["*"]||200:I=S);var M=[],X=0,A=[],L=function(R,H){var j=H.failures,V=H.numFailures;X+=R-V;for(var F=0,ee=h(j);F<ee.length;F++){var oe=ee[F];M.push(j[oe])}},O=r===fu;return o.clone().primaryKeys().then(function(R){var H=zr(u)&&u.limit===1/0&&(typeof r!="function"||O)&&{index:u.index,range:u.range},j=function(V){var F=Math.min(I,R.length-V),ee=R.slice(V,V+F);return(O?Promise.resolve([]):p.getMany({trans:c,keys:ee,cache:"immutable"})).then(function(oe){var ne=[],be=[],Be=b?[]:null,se=O?ee:[];if(!O)for(var Pe=0;Pe<F;++Pe){var Ee=oe[Pe],Ve={value:Ae(Ee),primKey:R[V+Pe]};d.call(Ve,Ve.value,Ve)!==!1&&(Ve.value==null?se.push(R[V+Pe]):!b&&je(k(Ee),k(Ve.value))!==0?(se.push(R[V+Pe]),ne.push(Ve.value)):(be.push(Ve.value),b&&Be.push(R[V+Pe])))}return Promise.resolve(ne.length>0&&p.mutate({trans:c,type:"add",values:ne}).then(function(he){for(var pt in he.failures)se.splice(parseInt(pt),1);L(ne.length,he)})).then(function(){return(be.length>0||H&&typeof r=="object")&&p.mutate({trans:c,type:"put",keys:Be,values:be,criteria:H,changeSpec:typeof r!="function"&&r,isAdditionalChunk:V>0}).then(function(he){return L(be.length,he)})}).then(function(){return(se.length>0||H&&O)&&p.mutate({trans:c,type:"delete",keys:se,criteria:H,isAdditionalChunk:V>0}).then(function(he){return aa(u.table,se,he)}).then(function(he){return L(se.length,he)})}).then(function(){return R.length>V+F&&j(V+I)})})};return j(0).then(function(){if(M.length>0)throw new vt("Error modifying one or more objects",M,X,A);return R.length})})})},n.prototype.delete=function(){var r=this._ctx,o=r.range;return zr(r)&&!r.table.schema.yProps&&(r.isPrimKey||o.type===3)?this._write(function(u){var c=r.table.core.schema.primaryKey,d=o;return r.table.core.count({trans:u,query:{index:c,range:d}}).then(function(p){return r.table.core.mutate({trans:u,type:"deleteRange",range:d}).then(function(g){var b=g.failures,k=g.numFailures;if(k)throw new vt("Could not delete some values",Object.keys(b).map(function(I){return b[I]}),p-k);return p-k})})}):this.modify(fu)},n})(),fu=function(n,r){return r.value=null};function Hc(n){return gi(Fc.prototype,function(o,u){this.db=n;var c=ru,d=null;if(u)try{c=u()}catch(k){d=k}var p=o._ctx,g=p.table,b=g.hook.reading.fire;this._ctx={table:g,index:p.index,isPrimKey:!p.index||g.schema.primKey.keyPath&&p.index===g.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:p.or,valueMapper:b!==ln?b:null}})}function jc(n,r){return n<r?-1:n===r?0:1}function Uc(n,r){return n>r?-1:n===r?0:1}function en(n,r,o){var u=n instanceof hu?new n.Collection(n):n;return u._ctx.error=o?new o(r):new TypeError(r),u}function Vr(n){return new n.Collection(n,function(){return du("")}).limit(0)}function zc(n){return n==="next"?function(r){return r.toUpperCase()}:function(r){return r.toLowerCase()}}function Vc(n){return n==="next"?function(r){return r.toLowerCase()}:function(r){return r.toUpperCase()}}function Yc(n,r,o,u,c,d){for(var p=Math.min(n.length,u.length),g=-1,b=0;b<p;++b){var k=r[b];if(k!==u[b])return c(n[b],o[b])<0?n.substr(0,b)+o[b]+o.substr(b+1):c(n[b],u[b])<0?n.substr(0,b)+u[b]+o.substr(b+1):g>=0?n.substr(0,g)+r[g]+o.substr(g+1):null;c(n[b],k)<0&&(g=b)}return p<u.length&&d==="next"?n+o.substr(n.length):p<n.length&&d==="prev"?n.substr(0,o.length):g<0?null:n.substr(0,g)+u[g]+o.substr(g+1)}function ua(n,r,o,u){var c,d,p,g,b,k,I,S=o.length;if(!o.every(function(L){return typeof L=="string"}))return en(n,nu);function M(L){c=zc(L),d=Vc(L),p=L==="next"?jc:Uc;var O=o.map(function(R){return{lower:d(R),upper:c(R)}}).sort(function(R,H){return p(R.lower,H.lower)});g=O.map(function(R){return R.upper}),b=O.map(function(R){return R.lower}),k=L,I=L==="next"?"":u}M("next");var X=new n.Collection(n,function(){return Jn(g[0],b[S-1]+u)});X._ondirectionchange=function(L){M(L)};var A=0;return X._addAlgorithm(function(L,O,R){var H=L.key;if(typeof H!="string")return!1;var j=d(H);if(r(j,b,A))return!0;for(var V=null,F=A;F<S;++F){var ee=Yc(H,j,g[F],b[F],p,k);ee===null&&V===null?A=F+1:(V===null||p(V,ee)>0)&&(V=ee)}return O(V!==null?function(){L.continue(V+I)}:R),!1}),X}function Jn(n,r,o,u){return{type:2,lower:n,upper:r,lowerOpen:o,upperOpen:u}}function du(n){return{type:1,lower:n,upper:n}}var hu=(function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(r,o,u,c){u=u!==!1,c=c===!0;try{return this._cmp(r,o)>0||this._cmp(r,o)===0&&(u||c)&&!(u&&c)?Vr(this):new this.Collection(this,function(){return Jn(r,o,!u,!c)})}catch{return en(this,Rn)}},n.prototype.equals=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return du(r)})},n.prototype.above=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return Jn(r,void 0,!0)})},n.prototype.aboveOrEqual=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return Jn(r,void 0,!1)})},n.prototype.below=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return Jn(void 0,r,!1,!0)})},n.prototype.belowOrEqual=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return Jn(void 0,r)})},n.prototype.startsWith=function(r){return typeof r!="string"?en(this,nu):this.between(r,r+yr,!0,!0)},n.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):ua(this,function(o,u){return o.indexOf(u[0])===0},[r],yr)},n.prototype.equalsIgnoreCase=function(r){return ua(this,function(o,u){return o===u[0]},[r],"")},n.prototype.anyOfIgnoreCase=function(){var r=ye.apply(De,arguments);return r.length===0?Vr(this):ua(this,function(o,u){return u.indexOf(o)!==-1},r,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var r=ye.apply(De,arguments);return r.length===0?Vr(this):ua(this,function(o,u){return u.some(function(c){return o.indexOf(c)===0})},r,yr)},n.prototype.anyOf=function(){var r=this,o=ye.apply(De,arguments),u=this._cmp;try{o.sort(u)}catch{return en(this,Rn)}if(o.length===0)return Vr(this);var c=new this.Collection(this,function(){return Jn(o[0],o[o.length-1])});c._ondirectionchange=function(p){u=p==="next"?r._ascending:r._descending,o.sort(u)};var d=0;return c._addAlgorithm(function(p,g,b){for(var k=p.key;u(k,o[d])>0;)if(++d,d===o.length)return g(b),!1;return u(k,o[d])===0?!0:(g(function(){p.continue(o[d])}),!1)}),c},n.prototype.notEqual=function(r){return this.inAnyRange([[xo,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var r=ye.apply(De,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return en(this,Rn)}var o=r.reduce(function(u,c){return u?u.concat([[u[u.length-1][1],c]]):[[xo,c]]},null);return o.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(r,o){var u=this,c=this._cmp,d=this._ascending,p=this._descending,g=this._min,b=this._max;if(r.length===0)return Vr(this);if(!r.every(function(F){return F[0]!==void 0&&F[1]!==void 0&&d(F[0],F[1])<=0}))return en(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var k=!o||o.includeLowers!==!1,I=o&&o.includeUppers===!0;function S(F,ee){for(var oe=0,ne=F.length;oe<ne;++oe){var be=F[oe];if(c(ee[0],be[1])<0&&c(ee[1],be[0])>0){be[0]=g(be[0],ee[0]),be[1]=b(be[1],ee[1]);break}}return oe===ne&&F.push(ee),F}var M=d;function X(F,ee){return M(F[0],ee[0])}var A;try{A=r.reduce(S,[]),A.sort(X)}catch{return en(this,Rn)}var L=0,O=I?function(F){return d(F,A[L][1])>0}:function(F){return d(F,A[L][1])>=0},R=k?function(F){return p(F,A[L][0])>0}:function(F){return p(F,A[L][0])>=0};function H(F){return!O(F)&&!R(F)}var j=O,V=new this.Collection(this,function(){return Jn(A[0][0],A[A.length-1][1],!k,!I)});return V._ondirectionchange=function(F){F==="next"?(j=O,M=d):(j=R,M=p),A.sort(X)},V._addAlgorithm(function(F,ee,oe){for(var ne=F.key;j(ne);)if(++L,L===A.length)return ee(oe),!1;return H(ne)?!0:(u._cmp(ne,A[L][1])===0||u._cmp(ne,A[L][0])===0||ee(function(){M===d?F.continue(A[L][0]):F.continue(A[L][1])}),!1)}),V},n.prototype.startsWithAnyOf=function(){var r=ye.apply(De,arguments);return r.every(function(o){return typeof o=="string"})?r.length===0?Vr(this):this.inAnyRange(r.map(function(o){return[o,o+yr]})):en(this,"startsWithAnyOf() only works with strings")},n})();function Wc(n){return gi(hu.prototype,function(o,u,c){if(this.db=n,this._ctx={table:o,index:u===":id"?null:u,or:c},this._cmp=this._ascending=je,this._descending=function(d,p){return je(p,d)},this._max=function(d,p){return je(d,p)>0?d:p},this._min=function(d,p){return je(d,p)<0?d:p},this._IDBKeyRange=n._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})}function xn(n){return ut(function(r){return yi(r),n(r.target.error),!1})}function yi(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var bi="storagemutated",Io="x-storagemutated-1",$n=mi(null,bi),qc=(function(){function n(){}return n.prototype._lock=function(){return te(!de.global),++this._reculock,this._reculock===1&&!de.global&&(de.lockOwnerFor=this),this},n.prototype._unlock=function(){if(te(!de.global),--this._reculock===0)for(de.global||(de.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{gr(r[1],r[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&de.lockOwnerFor!==this},n.prototype.create=function(r){var o=this;if(!this.mode)return this;var u=this.db.idbdb,c=this.db._state.dbOpenError;if(te(!this.idbtrans),!r&&!u)switch(c&&c.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(c);case"MissingAPIError":throw new ue.MissingAPI(c.message,c);default:throw new ue.OpenFailed(c)}if(!this.active)throw new ue.TransactionInactive;return te(this._completion._state===null),r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):u.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),r.onerror=ut(function(d){yi(d),o._reject(r.error)}),r.onabort=ut(function(d){yi(d),o.active&&o._reject(new ue.Abort(r.error)),o.active=!1,o.on("abort").fire(d)}),r.oncomplete=ut(function(){o.active=!1,o._resolve(),"mutatedParts"in r&&$n.storagemutated.fire(r.mutatedParts)}),this},n.prototype._promise=function(r,o,u){var c=this;if(r==="readwrite"&&this.mode!=="readwrite")return gt(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new ue.TransactionInactive);if(this._locked())return new re(function(p,g){c._blockedFuncs.push([function(){c._promise(r,o,u).then(p,g)},de])});if(u)return Xn(function(){var p=new re(function(g,b){c._lock();var k=o(g,b,c);k&&k.then&&k.then(g,b)});return p.finally(function(){return c._unlock()}),p._lib=!0,p});var d=new re(function(p,g){var b=o(p,g,c);b&&b.then&&b.then(p,g)});return d._lib=!0,d},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(r){var o=this._root(),u=re.resolve(r);if(o._waitingFor)o._waitingFor=o._waitingFor.then(function(){return u});else{o._waitingFor=u,o._waitingQueue=[];var c=o.idbtrans.objectStore(o.storeNames[0]);(function p(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(c.get(-1/0).onsuccess=p)})()}var d=o._waitingFor;return new re(function(p,g){u.then(function(b){return o._waitingQueue.push(ut(p.bind(null,b)))},function(b){return o._waitingQueue.push(ut(g.bind(null,b)))}).finally(function(){o._waitingFor===d&&(o._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},n.prototype.table=function(r){var o=this._memoizedTables||(this._memoizedTables={});if(w(o,r))return o[r];var u=this.schema[r];if(!u)throw new ue.NotFound("Table "+r+" not part of transaction");var c=new this.db.Table(r,u,this);return c.core=this.db.core.table(r),o[r]=c,c},n})();function Gc(n){return gi(qc.prototype,function(o,u,c,d,p){var g=this;o!=="readonly"&&u.forEach(function(b){var k,I=(k=c[b])===null||k===void 0?void 0:k.yProps;I&&(u=u.concat(I.map(function(S){return S.updatesTable})))}),this.db=n,this.mode=o,this.storeNames=u,this.schema=c,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=mi(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new re(function(b,k){g._resolve=b,g._reject=k}),this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(b){var k=g.active;return g.active=!1,g.on.error.fire(b),g.parent?g.parent._reject(b):k&&g.idbtrans&&g.idbtrans.abort(),gt(b)})})}function Do(n,r,o,u,c,d,p,g){return{name:n,keyPath:r,unique:o,multi:u,auto:c,compound:d,src:(o&&!p?"&":"")+(u?"*":"")+(c?"++":"")+vu(r),type:g}}function vu(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Co(n,r,o){return{name:n,primKey:r,indexes:o,mappedClass:null,idxByName:N(o,function(u){return[u.name,u]})}}function Xc(n){return n.length===1?n[0]:n}var _i=function(n){try{return n.only([[]]),_i=function(){return[[]]},[[]]}catch{return _i=function(){return yr},yr}};function Lo(n){return n==null?function(){}:typeof n=="string"?Qc(n):function(r){return Z(r,n)}}function Qc(n){var r=n.split(".");return r.length===1?function(o){return o[n]}:function(o){return Z(o,n)}}function pu(n){return[].slice.call(n)}var Zc=0;function wi(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Jc(n,r,o){function u(S,M){var X=pu(S.objectStoreNames);return{schema:{name:S.name,tables:X.map(function(A){return M.objectStore(A)}).map(function(A){var L=A.keyPath,O=A.autoIncrement,R=v(L),H=L==null,j={},V={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:H,compound:R,keyPath:L,autoIncrement:O,unique:!0,extractKey:Lo(L)},indexes:pu(A.indexNames).map(function(F){return A.index(F)}).map(function(F){var ee=F.name,oe=F.unique,ne=F.multiEntry,be=F.keyPath,Be=v(be),se={name:ee,compound:Be,keyPath:be,unique:oe,multiEntry:ne,extractKey:Lo(be)};return j[wi(be)]=se,se}),getIndexByKeyPath:function(F){return j[wi(F)]}};return j[":id"]=V.primaryKey,L!=null&&(j[wi(L)]=V.primaryKey),V})},hasGetAll:X.length>0&&"getAll"in M.objectStore(X[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function c(S){if(S.type===3)return null;if(S.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=S.lower,X=S.upper,A=S.lowerOpen,L=S.upperOpen,O=M===void 0?X===void 0?null:r.upperBound(X,!!L):X===void 0?r.lowerBound(M,!!A):r.bound(M,X,!!A,!!L);return O}function d(S){var M=S.name;function X(O){var R=O.trans,H=O.type,j=O.keys,V=O.values,F=O.range;return new Promise(function(ee,oe){ee=ut(ee);var ne=R.objectStore(M),be=ne.keyPath==null,Be=H==="put"||H==="add";if(!Be&&H!=="delete"&&H!=="deleteRange")throw new Error("Invalid operation type: "+H);var se=(j||V||{length:1}).length;if(j&&V&&j.length!==V.length)throw new Error("Given keys array must have same length as given values array.");if(se===0)return ee({numFailures:0,failures:{},results:[],lastResult:void 0});var Pe,Ee=[],Ve=[],he=0,pt=function(Tn){++he,yi(Tn)};if(H==="deleteRange"){if(F.type===4)return ee({numFailures:he,failures:Ve,results:[],lastResult:void 0});F.type===3?Ee.push(Pe=ne.clear()):Ee.push(Pe=ne.delete(c(F)))}else{var Rt=Be?be?[V,j]:[V,null]:[j,null],kn=Rt[0],Vt=Rt[1];if(Be)for(var fn=0;fn<se;++fn)Ee.push(Pe=Vt&&Vt[fn]!==void 0?ne[H](kn[fn],Vt[fn]):ne[H](kn[fn])),Pe.onerror=pt;else for(var fn=0;fn<se;++fn)Ee.push(Pe=ne[H](kn[fn])),Pe.onerror=pt}var nr=function(Tn){var ki=Tn.target.result;Ee.forEach(function(mn,_a){return mn.error!=null&&(Ve[_a]=mn.error)}),ee({numFailures:he,failures:Ve,results:H==="delete"?j:Ee.map(function(mn){return mn.result}),lastResult:ki})};Pe.onerror=function(Tn){pt(Tn),nr(Tn)},Pe.onsuccess=nr})}function A(O){var R=O.trans,H=O.values,j=O.query,V=O.reverse,F=O.unique;return new Promise(function(ee,oe){ee=ut(ee);var ne=j.index,be=j.range,Be=R.objectStore(M),se=ne.isPrimaryKey?Be:Be.index(ne.name),Pe=V?F?"prevunique":"prev":F?"nextunique":"next",Ee=H||!("openKeyCursor"in se)?se.openCursor(c(be),Pe):se.openKeyCursor(c(be),Pe);Ee.onerror=xn(oe),Ee.onsuccess=ut(function(Ve){var he=Ee.result;if(!he){ee(null);return}he.___id=++Zc,he.done=!1;var pt=he.continue.bind(he),Rt=he.continuePrimaryKey;Rt&&(Rt=Rt.bind(he));var kn=he.advance.bind(he),Vt=function(){throw new Error("Cursor not started")},fn=function(){throw new Error("Cursor not stopped")};he.trans=R,he.stop=he.continue=he.continuePrimaryKey=he.advance=Vt,he.fail=ut(oe),he.next=function(){var nr=this,Tn=1;return this.start(function(){return Tn--?nr.continue():nr.stop()}).then(function(){return nr})},he.start=function(nr){var Tn=new Promise(function(mn,_a){mn=ut(mn),Ee.onerror=xn(_a),he.fail=_a,he.stop=function(Hf){he.stop=he.continue=he.continuePrimaryKey=he.advance=fn,mn(Hf)}}),ki=function(){if(Ee.result)try{nr()}catch(mn){he.fail(mn)}else he.done=!0,he.start=function(){throw new Error("Cursor behind last entry")},he.stop()};return Ee.onsuccess=ut(function(mn){Ee.onsuccess=ki,ki()}),he.continue=pt,he.continuePrimaryKey=Rt,he.advance=kn,ki(),Tn},ee(he)},oe)})}function L(O){return function(R){return new Promise(function(H,j){H=ut(H);var V=R.trans,F=R.values,ee=R.limit,oe=R.query,ne=ee===1/0?void 0:ee,be=oe.index,Be=oe.range,se=V.objectStore(M),Pe=be.isPrimaryKey?se:se.index(be.name),Ee=c(Be);if(ee===0)return H({result:[]});if(O){var Ve=F?Pe.getAll(Ee,ne):Pe.getAllKeys(Ee,ne);Ve.onsuccess=function(kn){return H({result:kn.target.result})},Ve.onerror=xn(j)}else{var he=0,pt=F||!("openKeyCursor"in Pe)?Pe.openCursor(Ee):Pe.openKeyCursor(Ee),Rt=[];pt.onsuccess=function(kn){var Vt=pt.result;if(!Vt)return H({result:Rt});if(Rt.push(F?Vt.value:Vt.primaryKey),++he===ee)return H({result:Rt});Vt.continue()},pt.onerror=xn(j)}})}}return{name:M,schema:S,mutate:X,getMany:function(O){var R=O.trans,H=O.keys;return new Promise(function(j,V){j=ut(j);for(var F=R.objectStore(M),ee=H.length,oe=new Array(ee),ne=0,be=0,Be,se=function(he){var pt=he.target;(oe[pt._pos]=pt.result)!=null,++be===ne&&j(oe)},Pe=xn(V),Ee=0;Ee<ee;++Ee){var Ve=H[Ee];Ve!=null&&(Be=F.get(H[Ee]),Be._pos=Ee,Be.onsuccess=se,Be.onerror=Pe,++ne)}ne===0&&j(oe)})},get:function(O){var R=O.trans,H=O.key;return new Promise(function(j,V){j=ut(j);var F=R.objectStore(M),ee=F.get(H);ee.onsuccess=function(oe){return j(oe.target.result)},ee.onerror=xn(V)})},query:L(b),openCursor:A,count:function(O){var R=O.query,H=O.trans,j=R.index,V=R.range;return new Promise(function(F,ee){var oe=H.objectStore(M),ne=j.isPrimaryKey?oe:oe.index(j.name),be=c(V),Be=be?ne.count(be):ne.count();Be.onsuccess=ut(function(se){return F(se.target.result)}),Be.onerror=xn(ee)})}}}var p=u(n,o),g=p.schema,b=p.hasGetAll,k=g.tables.map(function(S){return d(S)}),I={};return k.forEach(function(S){return I[S.name]=S}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(S){var M=I[S];if(!M)throw new Error("Table '".concat(S,"' not found"));return I[S]},MIN_KEY:-1/0,MAX_KEY:_i(r),schema:g}}function $c(n,r){return r.reduce(function(o,u){var c=u.create;return s(s({},o),c(o))},n)}function ef(n,r,o,u){var c=o.IDBKeyRange;o.indexedDB;var d=$c(Jc(r,c,u),n.dbcore);return{dbcore:d}}function la(n,r){var o=r.db,u=ef(n._middlewares,o,n._deps,r);n.core=u.dbcore,n.tables.forEach(function(c){var d=c.name;n.core.schema.tables.some(function(p){return p.name===d})&&(c.core=n.core.table(d),n[d]instanceof n.Table&&(n[d].core=c.core))})}function ca(n,r,o,u){o.forEach(function(c){var d=u[c];r.forEach(function(p){var g=z(p,c);(!g||"value"in g&&g.value===void 0)&&(p===n.Transaction.prototype||p instanceof n.Transaction?P(p,c,{get:function(){return this.table(c)},set:function(b){D(this,c,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):p[c]=new n.Table(c,d))})})}function Po(n,r){r.forEach(function(o){for(var u in o)o[u]instanceof n.Table&&delete o[u]})}function tf(n,r){return n._cfg.version-r._cfg.version}function nf(n,r,o,u){var c=n._dbSchema;o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Co("$meta",gu("")[0],[]),n._storeNames.push("$meta"));var d=n._createTransaction("readwrite",n._storeNames,c);d.create(o),d._completion.catch(u);var p=d._reject.bind(d),g=de.transless||de;Xn(function(){if(de.trans=d,de.transless=g,r===0)h(c).forEach(function(b){Mo(o,b,c[b].primKey,c[b].indexes)}),la(n,o),re.follow(function(){return n.on.populate.fire(d)}).catch(p);else return la(n,o),af(n,d,r).then(function(b){return of(n,b,d,o)}).catch(p)})}function rf(n,r){mu(n._dbSchema,r),r.db.version%10===0&&!r.objectStoreNames.contains("$meta")&&r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var o=da(n,n.idbdb,r);ha(n,n._dbSchema,r);for(var u=Oo(o,n._dbSchema),c=function(k){if(k.change.length||k.recreate)return console.warn("Unable to patch indexes of table ".concat(k.name," because it has changes on the type of index or primary key.")),{value:void 0};var I=r.objectStore(k.name);k.add.forEach(function(S){ke&&console.debug("Dexie upgrade patch: Creating missing index ".concat(k.name,".").concat(S.src)),fa(I,S)})},d=0,p=u.change;d<p.length;d++){var g=p[d],b=c(g);if(typeof b=="object")return b.value}}function af(n,r,o){return r.storeNames.includes("$meta")?r.table("$meta").get("version").then(function(u){return u??o}):re.resolve(o)}function of(n,r,o,u){var c=[],d=n._versions,p=n._dbSchema=da(n,n.idbdb,u),g=d.filter(function(k){return k._cfg.version>=r});if(g.length===0)return re.resolve();g.forEach(function(k){c.push(function(){var I=p,S=k._cfg.dbschema;ha(n,I,u),ha(n,S,u),p=n._dbSchema=S;var M=Oo(I,S);M.add.forEach(function(H){Mo(u,H[0],H[1].primKey,H[1].indexes)}),M.change.forEach(function(H){if(H.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var j=u.objectStore(H.name);H.add.forEach(function(V){return fa(j,V)}),H.change.forEach(function(V){j.deleteIndex(V.name),fa(j,V)}),H.del.forEach(function(V){return j.deleteIndex(V)})});var X=k._cfg.contentUpgrade;if(X&&k._cfg.version>r){la(n,u),o._memoizedTables={};var A=ge(S);M.del.forEach(function(H){A[H]=I[H]}),Po(n,[n.Transaction.prototype]),ca(n,[n.Transaction.prototype],h(A),A),o.schema=A;var L=Ze(X);L&&jr();var O,R=re.follow(function(){if(O=X(o),O&&L){var H=Qn.bind(null,null);O.then(H,H)}});return O&&typeof O.then=="function"?re.resolve(O):R.then(function(){return O})}}),c.push(function(I){var S=k._cfg.dbschema;sf(S,I),Po(n,[n.Transaction.prototype]),ca(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),o.schema=n._dbSchema}),c.push(function(I){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===k._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(S){return S!=="$meta"})):I.objectStore("$meta").put(k._cfg.version,"version"))})});function b(){return c.length?re.resolve(c.shift()(o.idbtrans)).then(b):re.resolve()}return b().then(function(){mu(p,u)})}function Oo(n,r){var o={del:[],add:[],change:[]},u;for(u in n)r[u]||o.del.push(u);for(u in r){var c=n[u],d=r[u];if(!c)o.add.push([u,d]);else{var p={name:u,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)p.recreate=!0,o.change.push(p);else{var g=c.idxByName,b=d.idxByName,k=void 0;for(k in g)b[k]||p.del.push(k);for(k in b){var I=g[k],S=b[k];I?I.src!==S.src&&p.change.push(S):p.add.push(S)}(p.del.length>0||p.add.length>0||p.change.length>0)&&o.change.push(p)}}}return o}function Mo(n,r,o,u){var c=n.db.createObjectStore(r,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return u.forEach(function(d){return fa(c,d)}),c}function mu(n,r){h(n).forEach(function(o){r.db.objectStoreNames.contains(o)||(ke&&console.debug("Dexie: Creating missing table",o),Mo(r,o,n[o].primKey,n[o].indexes))})}function sf(n,r){[].slice.call(r.db.objectStoreNames).forEach(function(o){return n[o]==null&&r.db.deleteObjectStore(o)})}function fa(n,r){n.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function da(n,r,o){var u={},c=B(r.objectStoreNames,0);return c.forEach(function(d){for(var p=o.objectStore(d),g=p.keyPath,b=Do(vu(g),g||"",!0,!1,!!p.autoIncrement,g&&typeof g!="string",!0),k=[],I=0;I<p.indexNames.length;++I){var S=p.index(p.indexNames[I]);g=S.keyPath;var M=Do(S.name,g,!!S.unique,!!S.multiEntry,!1,g&&typeof g!="string",!1);k.push(M)}u[d]=Co(d,b,k)}),u}function uf(n,r,o){n.verno=r.version/10;var u=n._dbSchema=da(n,r,o);n._storeNames=B(r.objectStoreNames,0),ca(n,[n._allTables],h(u),u)}function lf(n,r){var o=da(n,n.idbdb,r),u=Oo(o,n._dbSchema);return!(u.add.length||u.change.some(function(c){return c.add.length||c.change.length}))}function ha(n,r,o){for(var u=o.db.objectStoreNames,c=0;c<u.length;++c){var d=u[c],p=o.objectStore(d);n._hasGetAll="getAll"in p;for(var g=0;g<p.indexNames.length;++g){var b=p.indexNames[g],k=p.index(b).keyPath,I=typeof k=="string"?k:"["+B(k).join("+")+"]";if(r[d]){var S=r[d].idxByName[I];S&&(S.name=b,delete r[d].idxByName[I],r[d].idxByName[b]=S)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function gu(n){return n.split(",").map(function(r,o){var u,c=r.split(":"),d=(u=c[1])===null||u===void 0?void 0:u.trim();r=c[0].trim();var p=r.replace(/([&*]|\+\+)/g,""),g=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return Do(p,g||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),v(g),o===0,d)})}var cf=(function(){function n(){}return n.prototype._createTableSchema=function(r,o,u){return Co(r,o,u)},n.prototype._parseIndexSyntax=function(r){return gu(r)},n.prototype._parseStoresSpec=function(r,o){var u=this;h(r).forEach(function(c){if(r[c]!==null){var d=u._parseIndexSyntax(r[c]),p=d.shift();if(!p)throw new ue.Schema("Invalid schema for table "+c+": "+r[c]);if(p.unique=!0,p.multi)throw new ue.Schema("Primary key cannot be multiEntry*");d.forEach(function(b){if(b.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")});var g=u._createTableSchema(c,p,d);o[c]=g}})},n.prototype.stores=function(r){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,r):r;var u=o._versions,c={},d={};return u.forEach(function(p){m(c,p._cfg.storesSource),d=p._cfg.dbschema={},p._parseStoresSpec(c,d)}),o._dbSchema=d,Po(o,[o._allTables,o,o.Transaction.prototype]),ca(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],h(d),d),o._storeNames=h(d),this},n.prototype.upgrade=function(r){return this._cfg.contentUpgrade=tt(this._cfg.contentUpgrade||Ne,r),this},n})();function ff(n){return gi(cf.prototype,function(o){this.db=n,this._cfg={version:o,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ro(n,r){var o=n._dbNamesDB;return o||(o=n._dbNamesDB=new Kn(ra,{addons:[],indexedDB:n,IDBKeyRange:r}),o.version(1).stores({dbnames:"name"})),o.table("dbnames")}function Ko(n){return n&&typeof n.databases=="function"}function df(n){var r=n.indexedDB,o=n.IDBKeyRange;return Ko(r)?Promise.resolve(r.databases()).then(function(u){return u.map(function(c){return c.name}).filter(function(c){return c!==ra})}):Ro(r,o).toCollection().primaryKeys()}function hf(n,r){var o=n.indexedDB,u=n.IDBKeyRange;!Ko(o)&&r!==ra&&Ro(o,u).put({name:r}).catch(Ne)}function vf(n,r){var o=n.indexedDB,u=n.IDBKeyRange;!Ko(o)&&r!==ra&&Ro(o,u).delete(r).catch(Ne)}function Bo(n){return Xn(function(){return de.letThrough=!0,n()})}function pf(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(o){var u=function(){return indexedDB.databases().finally(o)};r=setInterval(u,100),u()}).finally(function(){return clearInterval(r)})}var No;function Fo(n){return!("from"in n)}var Mt=function(n,r){if(this)m(this,arguments.length?{d:1,from:n,to:arguments.length>1?r:n}:{d:0});else{var o=new Mt;return n&&"d"in n&&m(o,n),o}};x(Mt.prototype,(No={add:function(n){return xi(this,n),this},addKey:function(n){return Ei(this,n,n),this},addKeys:function(n){var r=this;return n.forEach(function(o){return Ei(r,o,o)}),this},hasKey:function(n){var r=va(this).next(n).value;return r&&je(r.from,n)<=0&&je(r.to,n)>=0}},No[Y]=function(){return va(this)},No));function Ei(n,r,o){var u=je(r,o);if(!isNaN(u)){if(u>0)throw RangeError();if(Fo(n))return m(n,{from:r,to:o,d:1});var c=n.l,d=n.r;if(je(o,n.from)<0)return c?Ei(c,r,o):n.l={from:r,to:o,d:1,l:null,r:null},bu(n);if(je(r,n.to)>0)return d?Ei(d,r,o):n.r={from:r,to:o,d:1,l:null,r:null},bu(n);je(r,n.from)<0&&(n.from=r,n.l=null,n.d=d?d.d+1:1),je(o,n.to)>0&&(n.to=o,n.r=null,n.d=n.l?n.l.d+1:1);var p=!n.r;c&&!n.l&&xi(n,c),d&&p&&xi(n,d)}}function xi(n,r){function o(u,c){var d=c.from,p=c.to,g=c.l,b=c.r;Ei(u,d,p),g&&o(u,g),b&&o(u,b)}Fo(r)||o(n,r)}function yu(n,r){var o=va(r),u=o.next();if(u.done)return!1;for(var c=u.value,d=va(n),p=d.next(c.from),g=p.value;!u.done&&!p.done;){if(je(g.from,c.to)<=0&&je(g.to,c.from)>=0)return!0;je(c.from,g.from)<0?c=(u=o.next(g.from)).value:g=(p=d.next(c.from)).value}return!1}function va(n){var r=Fo(n)?null:{s:0,n};return{next:function(o){for(var u=arguments.length>0;r;)switch(r.s){case 0:if(r.s=1,u)for(;r.n.l&&je(o,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!u||je(o,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function bu(n){var r,o,u=(((r=n.r)===null||r===void 0?void 0:r.d)||0)-(((o=n.l)===null||o===void 0?void 0:o.d)||0),c=u>1?"r":u<-1?"l":"";if(c){var d=c==="r"?"l":"r",p=s({},n),g=n[c];n.from=g.from,n.to=g.to,n[c]=g[c],p[c]=g[d],n[d]=p,p.d=_u(p)}n.d=_u(n)}function _u(n){var r=n.r,o=n.l;return(r?o?Math.max(r.d,o.d):r.d:o?o.d:0)+1}function pa(n,r){return h(r).forEach(function(o){n[o]?xi(n[o],r[o]):n[o]=rt(r[o])}),n}function Ho(n,r){return n.all||r.all||Object.keys(n).some(function(o){return r[o]&&yu(r[o],n[o])})}var _r={},jo={},Uo=!1;function ma(n,r){pa(jo,n),Uo||(Uo=!0,setTimeout(function(){Uo=!1;var o=jo;jo={},zo(o,!1)},0))}function zo(n,r){r===void 0&&(r=!1);var o=new Set;if(n.all)for(var u=0,c=Object.values(_r);u<c.length;u++){var d=c[u];wu(d,n,o,r)}else for(var p in n){var g=/^idb\:\/\/(.*)\/(.*)\//.exec(p);if(g){var b=g[1],k=g[2],d=_r["idb://".concat(b,"/").concat(k)];d&&wu(d,n,o,r)}}o.forEach(function(I){return I()})}function wu(n,r,o,u){for(var c=[],d=0,p=Object.entries(n.queries.query);d<p.length;d++){for(var g=p[d],b=g[0],k=g[1],I=[],S=0,M=k;S<M.length;S++){var X=M[S];Ho(r,X.obsSet)?X.subscribers.forEach(function(R){return o.add(R)}):u&&I.push(X)}u&&c.push([b,I])}if(u)for(var A=0,L=c;A<L.length;A++){var O=L[A],b=O[0],I=O[1];n.queries.query[b]=I}}function mf(n){var r=n._state,o=n._deps.indexedDB;if(r.isBeingOpened||n.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?gt(r.dbOpenError):n});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var u=r.openCanceller,c=Math.round(n.verno*10),d=!1;function p(){if(r.openCanceller!==u)throw new ue.DatabaseClosed("db.open() was cancelled")}var g=r.dbReadyResolve,b=null,k=!1,I=function(){return new re(function(S,M){if(p(),!o)throw new ue.MissingAPI;var X=n.name,A=r.autoSchema||!c?o.open(X):o.open(X,c);if(!A)throw new ue.MissingAPI;A.onerror=xn(M),A.onblocked=ut(n._fireOnBlocked),A.onupgradeneeded=ut(function(L){if(b=A.transaction,r.autoSchema&&!n._options.allowEmptyDB){A.onerror=yi,b.abort(),A.result.close();var O=o.deleteDatabase(X);O.onsuccess=O.onerror=ut(function(){M(new ue.NoSuchDatabase("Database ".concat(X," doesnt exist")))})}else{b.onerror=xn(M);var R=L.oldVersion>Math.pow(2,62)?0:L.oldVersion;k=R<1,n.idbdb=A.result,d&&rf(n,b),nf(n,R/10,b,M)}},M),A.onsuccess=ut(function(){b=null;var L=n.idbdb=A.result,O=B(L.objectStoreNames);if(O.length>0)try{var R=L.transaction(Xc(O),"readonly");if(r.autoSchema)uf(n,L,R);else if(ha(n,n._dbSchema,R),!lf(n,R)&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),L.close(),c=L.version+1,d=!0,S(I());la(n,R)}catch{}Ur.push(n),L.onversionchange=ut(function(H){r.vcFired=!0,n.on("versionchange").fire(H)}),L.onclose=ut(function(){n.close({disableAutoOpen:!1})}),k&&hf(n._deps,X),S()},M)}).catch(function(S){switch(S?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),I();break;case"VersionError":if(c>0)return c=0,I();break}return re.reject(S)})};return re.race([u,(typeof navigator>"u"?re.resolve():pf()).then(I)]).then(function(){return p(),r.onReadyBeingFired=[],re.resolve(Bo(function(){return n.on.ready.fire(n.vip)})).then(function S(){if(r.onReadyBeingFired.length>0){var M=r.onReadyBeingFired.reduce(tt,Ne);return r.onReadyBeingFired=[],re.resolve(Bo(function(){return M(n.vip)})).then(S)}})}).finally(function(){r.openCanceller===u&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(S){r.dbOpenError=S;try{b&&b.abort()}catch{}return u===r.openCanceller&&n._close(),gt(S)}).finally(function(){r.openComplete=!0,g()}).then(function(){if(k){var S={};n.tables.forEach(function(M){M.schema.indexes.forEach(function(X){X.name&&(S["idb://".concat(n.name,"/").concat(M.name,"/").concat(X.name)]=new Mt(-1/0,[[[]]]))}),S["idb://".concat(n.name,"/").concat(M.name,"/")]=S["idb://".concat(n.name,"/").concat(M.name,"/:dels")]=new Mt(-1/0,[[[]]])}),$n(bi).fire(S),zo(S,!0)}return n})}function Vo(n){var r=function(p){return n.next(p)},o=function(p){return n.throw(p)},u=d(r),c=d(o);function d(p){return function(g){var b=p(g),k=b.value;return b.done?k:!k||typeof k.then!="function"?v(k)?Promise.all(k).then(u,c):u(k):k.then(u,c)}}return d(r)()}function gf(n,r,o){var u=arguments.length;if(u<2)throw new ue.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];o=c.pop();var d=pe(c);return[n,d,o]}function Eu(n,r,o,u,c){return re.resolve().then(function(){var d=de.transless||de,p=n._createTransaction(r,o,n._dbSchema,u);p.explicit=!0;var g={trans:p,transless:d};if(u)p.idbtrans=u.idbtrans;else try{p.create(),p.idbtrans._explicit=!0,n._state.PR1398_maxLoop=3}catch(S){return S.name===At.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return Eu(n,r,o,null,c)})):gt(S)}var b=Ze(c);b&&jr();var k,I=re.follow(function(){if(k=c.call(p,p),k)if(b){var S=Qn.bind(null,null);k.then(S,S)}else typeof k.next=="function"&&typeof k.throw=="function"&&(k=Vo(k))},g);return(k&&typeof k.then=="function"?re.resolve(k).then(function(S){return p.active?S:gt(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):I.then(function(){return k})).then(function(S){return u&&p._resolve(),p._completion.then(function(){return S})}).catch(function(S){return p._reject(S),gt(S)})})}function ga(n,r,o){for(var u=v(n)?n.slice():[n],c=0;c<o;++c)u.push(r);return u}function yf(n){return s(s({},n),{table:function(r){var o=n.table(r),u=o.schema,c={},d=[];function p(L,O,R){var H=wi(L),j=c[H]=c[H]||[],V=L==null?0:typeof L=="string"?1:L.length,F=O>0,ee=s(s({},R),{name:F?"".concat(H,"(virtual-from:").concat(R.name,")"):R.name,lowLevelIndex:R,isVirtual:F,keyTail:O,keyLength:V,extractKey:Lo(L),unique:!F&&R.unique});if(j.push(ee),ee.isPrimaryKey||d.push(ee),V>1){var oe=V===2?L[0]:L.slice(0,V-1);p(oe,O+1,R)}return j.sort(function(ne,be){return ne.keyTail-be.keyTail}),ee}var g=p(u.primaryKey.keyPath,0,u.primaryKey);c[":id"]=[g];for(var b=0,k=u.indexes;b<k.length;b++){var I=k[b];p(I.keyPath,0,I)}function S(L){var O=c[wi(L)];return O&&O[0]}function M(L,O){return{type:L.type===1?2:L.type,lower:ga(L.lower,L.lowerOpen?n.MAX_KEY:n.MIN_KEY,O),lowerOpen:!0,upper:ga(L.upper,L.upperOpen?n.MIN_KEY:n.MAX_KEY,O),upperOpen:!0}}function X(L){var O=L.query.index;return O.isVirtual?s(s({},L),{query:{index:O.lowLevelIndex,range:M(L.query.range,O.keyTail)}}):L}var A=s(s({},o),{schema:s(s({},u),{primaryKey:g,indexes:d,getIndexByKeyPath:S}),count:function(L){return o.count(X(L))},query:function(L){return o.query(X(L))},openCursor:function(L){var O=L.query.index,R=O.keyTail,H=O.isVirtual,j=O.keyLength;if(!H)return o.openCursor(L);function V(F){function ee(ne){ne!=null?F.continue(ga(ne,L.reverse?n.MAX_KEY:n.MIN_KEY,R)):L.unique?F.continue(F.key.slice(0,j).concat(L.reverse?n.MIN_KEY:n.MAX_KEY,R)):F.continue()}var oe=Object.create(F,{continue:{value:ee},continuePrimaryKey:{value:function(ne,be){F.continuePrimaryKey(ga(ne,n.MAX_KEY,R),be)}},primaryKey:{get:function(){return F.primaryKey}},key:{get:function(){var ne=F.key;return j===1?ne[0]:ne.slice(0,j)}},value:{get:function(){return F.value}}});return oe}return o.openCursor(X(L)).then(function(F){return F&&V(F)})}});return A}})}var bf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:yf};function Yo(n,r,o,u){return o=o||{},u=u||"",h(n).forEach(function(c){if(!w(r,c))o[u+c]=void 0;else{var d=n[c],p=r[c];if(typeof d=="object"&&typeof p=="object"&&d&&p){var g=qe(d),b=qe(p);g!==b?o[u+c]=r[c]:g==="Object"?Yo(d,p,o,u+c+"."):d!==p&&(o[u+c]=r[c])}else d!==p&&(o[u+c]=r[c])}}),h(r).forEach(function(c){w(n,c)||(o[u+c]=r[c])}),o}function Wo(n,r){return r.type==="delete"?r.keys:r.keys||r.values.map(n.extractKey)}var _f={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return s(s({},n),{table:function(r){var o=n.table(r),u=o.schema.primaryKey,c=s(s({},o),{mutate:function(d){var p=de.trans,g=p.table(r).hook,b=g.deleting,k=g.creating,I=g.updating;switch(d.type){case"add":if(k.fire===Ne)break;return p._promise("readwrite",function(){return S(d)},!0);case"put":if(k.fire===Ne&&I.fire===Ne)break;return p._promise("readwrite",function(){return S(d)},!0);case"delete":if(b.fire===Ne)break;return p._promise("readwrite",function(){return S(d)},!0);case"deleteRange":if(b.fire===Ne)break;return p._promise("readwrite",function(){return M(d)},!0)}return o.mutate(d);function S(A){var L=de.trans,O=A.keys||Wo(u,A);if(!O)throw new Error("Keys missing");return A=A.type==="add"||A.type==="put"?s(s({},A),{keys:O}):s({},A),A.type!=="delete"&&(A.values=l([],A.values)),A.keys&&(A.keys=l([],A.keys)),wf(o,A,O).then(function(R){var H=O.map(function(j,V){var F=R[V],ee={onerror:null,onsuccess:null};if(A.type==="delete")b.fire.call(ee,j,F,L);else if(A.type==="add"||F===void 0){var oe=k.fire.call(ee,j,A.values[V],L);j==null&&oe!=null&&(j=oe,A.keys[V]=j,u.outbound||ae(A.values[V],u.keyPath,j))}else{var ne=Yo(F,A.values[V]),be=I.fire.call(ee,ne,j,F,L);if(be){var Be=A.values[V];Object.keys(be).forEach(function(se){w(Be,se)?Be[se]=be[se]:ae(Be,se,be[se])})}}return ee});return o.mutate(A).then(function(j){for(var V=j.failures,F=j.results,ee=j.numFailures,oe=j.lastResult,ne=0;ne<O.length;++ne){var be=F?F[ne]:O[ne],Be=H[ne];be==null?Be.onerror&&Be.onerror(V[ne]):Be.onsuccess&&Be.onsuccess(A.type==="put"&&R[ne]?A.values[ne]:be)}return{failures:V,results:F,numFailures:ee,lastResult:oe}}).catch(function(j){return H.forEach(function(V){return V.onerror&&V.onerror(j)}),Promise.reject(j)})})}function M(A){return X(A.trans,A.range,1e4)}function X(A,L,O){return o.query({trans:A,values:!1,query:{index:u,range:L},limit:O}).then(function(R){var H=R.result;return S({type:"delete",keys:H,trans:A}).then(function(j){return j.numFailures>0?Promise.reject(j.failures[0]):H.length<O?{failures:[],numFailures:0,lastResult:void 0}:X(A,s(s({},L),{lower:H[H.length-1],lowerOpen:!0}),O)})})}}});return c}})}};function wf(n,r,o){return r.type==="add"?Promise.resolve([]):n.getMany({trans:r.trans,keys:o,cache:"immutable"})}function xu(n,r,o){try{if(!r||r.keys.length<n.length)return null;for(var u=[],c=0,d=0;c<r.keys.length&&d<n.length;++c)je(r.keys[c],n[d])===0&&(u.push(o?Ae(r.values[c]):r.values[c]),++d);return u.length===n.length?u:null}catch{return null}}var Ef={stack:"dbcore",level:-1,create:function(n){return{table:function(r){var o=n.table(r);return s(s({},o),{getMany:function(u){if(!u.cache)return o.getMany(u);var c=xu(u.keys,u.trans._cache,u.cache==="clone");return c?re.resolve(c):o.getMany(u).then(function(d){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?Ae(d):d},d})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),o.mutate(u)}})}}}};function ku(n,r){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function Tu(n,r){switch(n){case"query":return r.values&&!r.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var xf={stack:"dbcore",level:0,name:"Observability",create:function(n){var r=n.schema.name,o=new Mt(n.MIN_KEY,n.MAX_KEY);return s(s({},n),{transaction:function(u,c,d){if(de.subscr&&c!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(de.querier));return n.transaction(u,c,d)},table:function(u){var c=n.table(u),d=c.schema,p=d.primaryKey,g=d.indexes,b=p.extractKey,k=p.outbound,I=p.autoIncrement&&g.filter(function(A){return A.compound&&A.keyPath.includes(p.keyPath)}),S=s(s({},c),{mutate:function(A){var L,O,R=A.trans,H=A.mutatedParts||(A.mutatedParts={}),j=function(Ee){var Ve="idb://".concat(r,"/").concat(u,"/").concat(Ee);return H[Ve]||(H[Ve]=new Mt)},V=j(""),F=j(":dels"),ee=A.type,oe=A.type==="deleteRange"?[A.range]:A.type==="delete"?[A.keys]:A.values.length<50?[Wo(p,A).filter(function(Ee){return Ee}),A.values]:[],ne=oe[0],be=oe[1],Be=A.trans._cache;if(v(ne)){V.addKeys(ne);var se=ee==="delete"||ne.length===be.length?xu(ne,Be):null;se||F.addKeys(ne),(se||be)&&kf(j,d,se,be)}else if(ne){var Pe={from:(L=ne.lower)!==null&&L!==void 0?L:n.MIN_KEY,to:(O=ne.upper)!==null&&O!==void 0?O:n.MAX_KEY};F.add(Pe),V.add(Pe)}else V.add(o),F.add(o),d.indexes.forEach(function(Ee){return j(Ee.name).add(o)});return c.mutate(A).then(function(Ee){return ne&&(A.type==="add"||A.type==="put")&&(V.addKeys(Ee.results),I&&I.forEach(function(Ve){for(var he=A.values.map(function(Vt){return Ve.extractKey(Vt)}),pt=Ve.keyPath.findIndex(function(Vt){return Vt===p.keyPath}),Rt=0,kn=Ee.results.length;Rt<kn;++Rt)he[Rt][pt]=Ee.results[Rt];j(Ve.name).addKeys(he)})),R.mutatedParts=pa(R.mutatedParts||{},H),Ee})}}),M=function(A){var L,O,R=A.query,H=R.index,j=R.range;return[H,new Mt((L=j.lower)!==null&&L!==void 0?L:n.MIN_KEY,(O=j.upper)!==null&&O!==void 0?O:n.MAX_KEY)]},X={get:function(A){return[p,new Mt(A.key)]},getMany:function(A){return[p,new Mt().addKeys(A.keys)]},count:M,query:M,openCursor:M};return h(X).forEach(function(A){S[A]=function(L){var O=de.subscr,R=!!O,H=ku(de,c)&&Tu(A,L),j=H?L.obsSet={}:O;if(R){var V=function(se){var Pe="idb://".concat(r,"/").concat(u,"/").concat(se);return j[Pe]||(j[Pe]=new Mt)},F=V(""),ee=V(":dels"),oe=X[A](L),ne=oe[0],be=oe[1];if(A==="query"&&ne.isPrimaryKey&&!L.values?ee.add(be):V(ne.name||"").add(be),!ne.isPrimaryKey)if(A==="count")ee.add(o);else{var Be=A==="query"&&k&&L.values&&c.query(s(s({},L),{values:!1}));return c[A].apply(this,arguments).then(function(se){if(A==="query"){if(k&&L.values)return Be.then(function(he){var pt=he.result;return F.addKeys(pt),se});var Pe=L.values?se.result.map(b):se.result;L.values?F.addKeys(Pe):ee.addKeys(Pe)}else if(A==="openCursor"){var Ee=se,Ve=L.values;return Ee&&Object.create(Ee,{key:{get:function(){return ee.addKey(Ee.primaryKey),Ee.key}},primaryKey:{get:function(){var he=Ee.primaryKey;return ee.addKey(he),he}},value:{get:function(){return Ve&&F.addKey(Ee.primaryKey),Ee.value}}})}return se})}}return c[A].apply(this,arguments)}}),S}})}};function kf(n,r,o,u){function c(d){var p=n(d.name||"");function g(k){return k!=null?d.extractKey(k):null}var b=function(k){return d.multiEntry&&v(k)?k.forEach(function(I){return p.addKey(I)}):p.addKey(k)};(o||u).forEach(function(k,I){var S=o&&g(o[I]),M=u&&g(u[I]);je(S,M)!==0&&(S!=null&&b(S),M!=null&&b(M))})}r.indexes.forEach(c)}function Su(n,r,o){if(o.numFailures===0)return r;if(r.type==="deleteRange")return null;var u=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;if(o.numFailures===u)return null;var c=s({},r);return v(c.keys)&&(c.keys=c.keys.filter(function(d,p){return!(p in o.failures)})),"values"in c&&v(c.values)&&(c.values=c.values.filter(function(d,p){return!(p in o.failures)})),c}function Tf(n,r){return r.lower===void 0?!0:r.lowerOpen?je(n,r.lower)>0:je(n,r.lower)>=0}function Sf(n,r){return r.upper===void 0?!0:r.upperOpen?je(n,r.upper)<0:je(n,r.upper)<=0}function qo(n,r){return Tf(n,r)&&Sf(n,r)}function Au(n,r,o,u,c,d){if(!o||o.length===0)return n;var p=r.query.index,g=p.multiEntry,b=r.query.range,k=u.schema.primaryKey,I=k.extractKey,S=p.extractKey,M=(p.lowLevelIndex||p).extractKey,X=o.reduce(function(A,L){var O=A,R=[];if(L.type==="add"||L.type==="put")for(var H=new Mt,j=L.values.length-1;j>=0;--j){var V=L.values[j],F=I(V);if(!H.hasKey(F)){var ee=S(V);(g&&v(ee)?ee.some(function(se){return qo(se,b)}):qo(ee,b))&&(H.addKey(F),R.push(V))}}switch(L.type){case"add":{var oe=new Mt().addKeys(r.values?A.map(function(se){return I(se)}):A);O=A.concat(r.values?R.filter(function(se){var Pe=I(se);return oe.hasKey(Pe)?!1:(oe.addKey(Pe),!0)}):R.map(function(se){return I(se)}).filter(function(se){return oe.hasKey(se)?!1:(oe.addKey(se),!0)}));break}case"put":{var ne=new Mt().addKeys(L.values.map(function(se){return I(se)}));O=A.filter(function(se){return!ne.hasKey(r.values?I(se):se)}).concat(r.values?R:R.map(function(se){return I(se)}));break}case"delete":var be=new Mt().addKeys(L.keys);O=A.filter(function(se){return!be.hasKey(r.values?I(se):se)});break;case"deleteRange":var Be=L.range;O=A.filter(function(se){return!qo(I(se),Be)});break}return O},n);return X===n?n:(X.sort(function(A,L){return je(M(A),M(L))||je(I(A),I(L))}),r.limit&&r.limit<1/0&&(X.length>r.limit?X.length=r.limit:n.length===r.limit&&X.length<r.limit&&(c.dirty=!0)),d?Object.freeze(X):X)}function Iu(n,r){return je(n.lower,r.lower)===0&&je(n.upper,r.upper)===0&&!!n.lowerOpen==!!r.lowerOpen&&!!n.upperOpen==!!r.upperOpen}function Af(n,r,o,u){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;var c=je(n,r);if(c===0){if(o&&u)return 0;if(o)return 1;if(u)return-1}return c}function If(n,r,o,u){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;var c=je(n,r);if(c===0){if(o&&u)return 0;if(o)return-1;if(u)return 1}return c}function Df(n,r){return Af(n.lower,r.lower,n.lowerOpen,r.lowerOpen)<=0&&If(n.upper,r.upper,n.upperOpen,r.upperOpen)>=0}function Cf(n,r,o,u){var c=_r["idb://".concat(n,"/").concat(r)];if(!c)return[];var d=c.queries[o];if(!d)return[null,!1,c,null];var p=u.query?u.query.index.name:null,g=d[p||""];if(!g)return[null,!1,c,null];switch(o){case"query":var b=g.find(function(S){return S.req.limit===u.limit&&S.req.values===u.values&&Iu(S.req.query.range,u.query.range)});if(b)return[b,!0,c,g];var k=g.find(function(S){var M="limit"in S.req?S.req.limit:1/0;return M>=u.limit&&(u.values?S.req.values:!0)&&Df(S.req.query.range,u.query.range)});return[k,!1,c,g];case"count":var I=g.find(function(S){return Iu(S.req.query.range,u.query.range)});return[I,!!I,c,g]}}function Lf(n,r,o,u){n.subscribers.add(o),u.addEventListener("abort",function(){n.subscribers.delete(o),n.subscribers.size===0&&Pf(n,r)})}function Pf(n,r){setTimeout(function(){n.subscribers.size===0&&ce(r,n)},3e3)}var Of={stack:"dbcore",level:0,name:"Cache",create:function(n){var r=n.schema.name,o=s(s({},n),{transaction:function(u,c,d){var p=n.transaction(u,c,d);if(c==="readwrite"){var g=new AbortController,b=g.signal,k=function(I){return function(){if(g.abort(),c==="readwrite"){for(var S=new Set,M=0,X=u;M<X.length;M++){var A=X[M],L=_r["idb://".concat(r,"/").concat(A)];if(L){var O=n.table(A),R=L.optimisticOps.filter(function(Ve){return Ve.trans===p});if(p._explicit&&I&&p.mutatedParts)for(var H=0,j=Object.values(L.queries.query);H<j.length;H++)for(var V=j[H],F=0,ee=V.slice();F<ee.length;F++){var oe=ee[F];Ho(oe.obsSet,p.mutatedParts)&&(ce(V,oe),oe.subscribers.forEach(function(Ve){return S.add(Ve)}))}else if(R.length>0){L.optimisticOps=L.optimisticOps.filter(function(Ve){return Ve.trans!==p});for(var ne=0,be=Object.values(L.queries.query);ne<be.length;ne++)for(var V=be[ne],Be=0,se=V.slice();Be<se.length;Be++){var oe=se[Be];if(oe.res!=null&&p.mutatedParts)if(I&&!oe.dirty){var Pe=Object.isFrozen(oe.res),Ee=Au(oe.res,oe.req,R,O,oe,Pe);oe.dirty?(ce(V,oe),oe.subscribers.forEach(function(pt){return S.add(pt)})):Ee!==oe.res&&(oe.res=Ee,oe.promise=re.resolve({result:Ee}))}else oe.dirty&&ce(V,oe),oe.subscribers.forEach(function(pt){return S.add(pt)})}}}}S.forEach(function(Ve){return Ve()})}}};p.addEventListener("abort",k(!1),{signal:b}),p.addEventListener("error",k(!1),{signal:b}),p.addEventListener("complete",k(!0),{signal:b})}return p},table:function(u){var c=n.table(u),d=c.schema.primaryKey,p=s(s({},c),{mutate:function(g){var b=de.trans;if(d.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return c.mutate(g);var k=_r["idb://".concat(r,"/").concat(u)];if(!k)return c.mutate(g);var I=c.mutate(g);return(g.type==="add"||g.type==="put")&&(g.values.length>=50||Wo(d,g).some(function(S){return S==null}))?I.then(function(S){var M=s(s({},g),{values:g.values.map(function(A,L){var O;if(S.failures[L])return A;var R=!((O=d.keyPath)===null||O===void 0)&&O.includes(".")?Ae(A):s({},A);return ae(R,d.keyPath,S.results[L]),R})}),X=Su(k,M,S);k.optimisticOps.push(X),queueMicrotask(function(){return g.mutatedParts&&ma(g.mutatedParts)})}):(k.optimisticOps.push(g),g.mutatedParts&&ma(g.mutatedParts),I.then(function(S){if(S.numFailures>0){ce(k.optimisticOps,g);var M=Su(k,g,S);M&&k.optimisticOps.push(M),g.mutatedParts&&ma(g.mutatedParts)}}),I.catch(function(){ce(k.optimisticOps,g),g.mutatedParts&&ma(g.mutatedParts)})),I},query:function(g){var b;if(!ku(de,c)||!Tu("query",g))return c.query(g);var k=((b=de.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",I=de,S=I.requery,M=I.signal,X=Cf(r,u,"query",g),A=X[0],L=X[1],O=X[2],R=X[3];if(A&&L)A.obsSet=g.obsSet;else{var H=c.query(g).then(function(j){var V=j.result;if(A&&(A.res=V),k){for(var F=0,ee=V.length;F<ee;++F)Object.freeze(V[F]);Object.freeze(V)}else j.result=Ae(V);return j}).catch(function(j){return R&&A&&ce(R,A),Promise.reject(j)});A={obsSet:g.obsSet,promise:H,subscribers:new Set,type:"query",req:g,dirty:!1},R?R.push(A):(R=[A],O||(O=_r["idb://".concat(r,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),O.queries.query[g.query.index.name||""]=R)}return Lf(A,R,S,M),A.promise.then(function(j){return{result:Au(j.result,g,O?.optimisticOps,c,A,k)}})}});return p}});return o}};function ya(n,r){return new Proxy(n,{get:function(o,u,c){return u==="db"?r:Reflect.get(o,u,c)}})}var Kn=(function(){function n(r,o){var u=this;this._middlewares={},this.verno=0;var c=n.dependencies;this._options=o=s({addons:n.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange};var d=o.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var p={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ne,dbReadyPromise:null,cancelOpen:Ne,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};p.dbReadyPromise=new re(function(b){p.dbReadyResolve=b}),p.openCanceller=new re(function(b,k){p.cancelOpen=k}),this._state=p,this.name=r,this.on=mi(this,"populate","blocked","versionchange","close",{ready:[tt,Ne]}),this.once=function(b,k){var I=function(){for(var S=[],M=0;M<arguments.length;M++)S[M]=arguments[M];u.on(b).unsubscribe(I),k.apply(u,S)};return u.on(b,I)},this.on.ready.subscribe=G(this.on.ready.subscribe,function(b){return function(k,I){n.vip(function(){var S=u._state;if(S.openComplete)S.dbOpenError||re.resolve().then(k),I&&b(k);else if(S.onReadyBeingFired)S.onReadyBeingFired.push(k),I&&b(k);else{b(k);var M=u;I||b(function X(){M.on.ready.unsubscribe(k),M.on.ready.unsubscribe(X)})}})}}),this.Collection=Hc(this),this.Table=Bc(this),this.Transaction=Gc(this),this.Version=ff(this),this.WhereClause=Wc(this),this.on("versionchange",function(b){b.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=_i(o.IDBKeyRange),this._createTransaction=function(b,k,I,S){return new u.Transaction(b,k,I,u._options.chromeTransactionDurability,S)},this._fireOnBlocked=function(b){u.on("blocked").fire(b),Ur.filter(function(k){return k.name===u.name&&k!==u&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(b)})},this.use(Ef),this.use(Of),this.use(xf),this.use(bf),this.use(_f);var g=new Proxy(this,{get:function(b,k,I){if(k==="_vip")return!0;if(k==="table")return function(M){return ya(u.table(M),g)};var S=Reflect.get(b,k,I);return S instanceof uu?ya(S,g):k==="tables"?S.map(function(M){return ya(M,g)}):k==="_createTransaction"?function(){var M=S.apply(this,arguments);return ya(M,g)}:S}});this.vip=g,d.forEach(function(b){return b(u)})}return n.prototype.version=function(r){if(isNaN(r)||r<.1)throw new ue.Type("Given version is not a positive number");if(r=Math.round(r*10)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var o=this._versions,u=o.filter(function(c){return c._cfg.version===r})[0];return u||(u=new this.Version(r),o.push(u),o.sort(tf),u.stores({}),this._state.autoSchema=!1,u)},n.prototype._whenReady=function(r){var o=this;return this.idbdb&&(this._state.openComplete||de.letThrough||this._vip)?r():new re(function(u,c){if(o._state.openComplete)return c(new ue.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen){c(new ue.DatabaseClosed);return}o.open().catch(Ne)}o._state.dbReadyPromise.then(u,c)}).then(r)},n.prototype.use=function(r){var o=r.stack,u=r.create,c=r.level,d=r.name;d&&this.unuse({stack:o,name:d});var p=this._middlewares[o]||(this._middlewares[o]=[]);return p.push({stack:o,create:u,level:c??10,name:d}),p.sort(function(g,b){return g.level-b.level}),this},n.prototype.unuse=function(r){var o=r.stack,u=r.name,c=r.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return c?d.create!==c:u?d.name!==u:!1})),this},n.prototype.open=function(){var r=this;return gr(Gn,function(){return mf(r)})},n.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,o=Ur.indexOf(this);if(o>=0&&Ur.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new re(function(u){r.dbReadyResolve=u}),r.openCanceller=new re(function(u,c){r.cancelOpen=c}))},n.prototype.close=function(r){var o=r===void 0?{disableAutoOpen:!0}:r,u=o.disableAutoOpen,c=this._state;u?(c.isBeingOpened&&c.cancelOpen(new ue.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new ue.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},n.prototype.delete=function(r){var o=this;r===void 0&&(r={disableAutoOpen:!0});var u=arguments.length>0&&typeof arguments[0]!="object",c=this._state;return new re(function(d,p){var g=function(){o.close(r);var b=o._deps.indexedDB.deleteDatabase(o.name);b.onsuccess=ut(function(){vf(o._deps,o.name),d()}),b.onerror=xn(p),b.onblocked=o._fireOnBlocked};if(u)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(g):g()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var r=this;return h(this._allTables).map(function(o){return r._allTables[o]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var r=gf.apply(this,arguments);return this._transaction.apply(this,r)},n.prototype._transaction=function(r,o,u){var c=this,d=de.trans;(!d||d.db!==this||r.indexOf("!")!==-1)&&(d=null);var p=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");var g,b;try{if(b=o.map(function(I){var S=I instanceof c.Table?I.name:I;if(typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),r=="r"||r===ko)g=ko;else if(r=="rw"||r==To)g=To;else throw new ue.InvalidArgument("Invalid transaction mode: "+r);if(d){if(d.mode===ko&&g===To)if(p)d=null;else throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d&&b.forEach(function(I){if(d&&d.storeNames.indexOf(I)===-1)if(p)d=null;else throw new ue.SubTransaction("Table "+I+" not included in parent transaction.")}),p&&d&&!d.active&&(d=null)}}catch(I){return d?d._promise(null,function(S,M){M(I)}):gt(I)}var k=Eu.bind(null,this,g,b,d,u);return d?d._promise(g,k,"lock"):de.trans?gr(de.transless,function(){return c._whenReady(k)}):this._whenReady(k)},n.prototype.table=function(r){if(!w(this._allTables,r))throw new ue.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},n})(),Mf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Rf=(function(){function n(r){this._subscribe=r}return n.prototype.subscribe=function(r,o,u){return this._subscribe(!r||typeof r=="function"?{next:r,error:o,complete:u}:r)},n.prototype[Mf]=function(){return this},n})(),ba;try{ba={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{ba={indexedDB:null,IDBKeyRange:null}}function Du(n){var r=!1,o,u=new Rf(function(c){var d=Ze(n);function p(R){var H=Fr();try{d&&jr();var j=Xn(n,R);return d&&(j=j.finally(Qn)),j}finally{H&&Hr()}}var g=!1,b,k={},I={},S={get closed(){return g},unsubscribe:function(){g||(g=!0,b&&b.abort(),M&&$n.storagemutated.unsubscribe(L))}};c.start&&c.start(S);var M=!1,X=function(){return wo(O)};function A(){return Ho(I,k)}var L=function(R){pa(k,R),A()&&X()},O=function(){if(!(g||!ba.indexedDB)){k={};var R={};b&&b.abort(),b=new AbortController;var H={subscr:R,signal:b.signal,requery:X,querier:n,trans:null},j=p(H);Promise.resolve(j).then(function(V){r=!0,o=V,!(g||H.signal.aborted)&&(k={},I=R,!ie(I)&&!M&&($n(bi,L),M=!0),wo(function(){return!g&&c.next&&c.next(V)}))},function(V){r=!1,["DatabaseClosedError","AbortError"].includes(V?.name)||g||wo(function(){g||c.error&&c.error(V)})})}};return setTimeout(X,0),S});return u.hasValue=function(){return r},u.getValue=function(){return o},u}var wr=Kn;x(wr,s(s({},En),{delete:function(n){var r=new wr(n,{addons:[]});return r.delete()},exists:function(n){return new wr(n,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return df(wr.dependencies).then(n)}catch{return gt(new ue.MissingAPI)}},defineClass:function(){function n(r){m(this,r)}return n},ignoreTransaction:function(n){return de.trans?gr(de.transless,n):n()},vip:Bo,async:function(n){return function(){try{var r=Vo(n.apply(this,arguments));return!r||typeof r.then!="function"?re.resolve(r):r}catch(o){return gt(o)}}},spawn:function(n,r,o){try{var u=Vo(n.apply(o,r||[]));return!u||typeof u.then!="function"?re.resolve(u):u}catch(c){return gt(c)}},currentTransaction:{get:function(){return de.trans||null}},waitFor:function(n,r){var o=re.resolve(typeof n=="function"?wr.ignoreTransaction(n):n).timeout(r||6e4);return de.trans?de.trans.waitFor(o):o},Promise:re,debug:{get:function(){return ke},set:function(n){It(n)}},derive:C,extend:m,props:x,override:G,Events:mi,on:$n,liveQuery:Du,extendObservabilitySet:pa,getByKeyPath:Z,setByKeyPath:ae,delByKeyPath:W,shallowClone:ge,deepClone:Ae,getObjectDiff:Yo,cmp:je,asap:q,minKey:xo,addons:[],connections:Ur,errnames:At,dependencies:ba,cache:_r,semVer:tu,version:tu.split(".").map(function(n){return parseInt(n)}).reduce(function(n,r,o){return n+r/Math.pow(10,o*2)})})),wr.maxKey=_i(wr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&($n(bi,function(n){if(!er){var r;r=new CustomEvent(Io,{detail:n}),er=!0,dispatchEvent(r),er=!1}}),addEventListener(Io,function(n){var r=n.detail;er||Go(r)}));function Go(n){var r=er;try{er=!0,$n.storagemutated.fire(n),zo(n,!0)}finally{er=r}}var er=!1,tr,Xo=function(){};typeof BroadcastChannel<"u"&&(Xo=function(){tr=new BroadcastChannel(Io),tr.onmessage=function(n){return n.data&&Go(n.data)}},Xo(),typeof tr.unref=="function"&&tr.unref(),$n(bi,function(n){er||tr.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Kn.disableBfCache&&n.persisted){ke&&console.debug("Dexie: handling persisted pagehide"),tr?.close();for(var r=0,o=Ur;r<o.length;r++){var u=o[r];u.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(n){!Kn.disableBfCache&&n.persisted&&(ke&&console.debug("Dexie: handling persisted pageshow"),Xo(),Go({all:new Mt(-1/0,[[]])}))}));function Kf(n){return new pi({add:n})}function Bf(n){return new pi({remove:n})}function Nf(n,r){return new pi({replacePrefix:[n,r]})}re.rejectionMapper=Qt,It(ke);var Ff=Object.freeze({__proto__:null,Dexie:Kn,liveQuery:Du,Entity:iu,cmp:je,PropModification:pi,replacePrefix:Nf,add:Kf,remove:Bf,default:Kn,RangeSet:Mt,mergeRanges:xi,rangesOverlap:yu});return s(Kn,Ff,{default:Kn}),Kn}))})(Ca)),Ca.exports}var zh=Uh();const Es=Hh(zh),Wu=Symbol.for("Dexie"),Ga=globalThis[Wu]||(globalThis[Wu]=Es);if(Es.semVer!==Ga.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Es.semVer} and ${Ga.semVer}`);const{liveQuery:Xa,mergeRanges:lm,rangesOverlap:cm,RangeSet:fm,cmp:dm,Entity:hm,PropModification:vm,replacePrefix:pm,add:mm,remove:gm,DexieYProvider:ym}=Ga;function qu(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function On(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?qu(Object(i),!0).forEach(function(a){Vh(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qu(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function La(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?La=function(e){return typeof e}:La=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},La(t)}function Vh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Un(){return Un=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Un.apply(this,arguments)}function Yh(t,e){if(t==null)return{};var i={},a=Object.keys(t),s,l;for(l=0;l<a.length;l++)s=a[l],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function Wh(t,e){if(t==null)return{};var i=Yh(t,e),a,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)a=l[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var qh="1.15.6";function Hn(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Wn=Hn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Wi=Hn(/Edge/i),Gu=Hn(/firefox/i),Mi=Hn(/safari/i)&&!Hn(/chrome/i)&&!Hn(/android/i),Ws=Hn(/iP(ad|od|hone)/i),nc=Hn(/chrome/i)&&Hn(/android/i),rc={capture:!1,passive:!1};function Ue(t,e,i){t.addEventListener(e,i,!Wn&&rc)}function He(t,e,i){t.removeEventListener(e,i,!Wn&&rc)}function Qa(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ic(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function bn(t,e,i,a){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Qa(t,e):Qa(t,e))||a&&t===i)return t;if(t===i)break}while(t=ic(t))}return null}var Xu=/\s+/g;function tn(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(Xu," ").replace(" "+e+" "," ");t.className=(a+(i?" "+e:"")).replace(Xu," ")}}function Te(t,e,i){var a=t&&t.style;if(a){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=i+(typeof i=="string"?"":"px")}}function ei(t,e){var i="";if(typeof t=="string")i=t;else do{var a=Te(t,"transform");a&&a!=="none"&&(i=a+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function ac(t,e,i){if(t){var a=t.getElementsByTagName(e),s=0,l=a.length;if(i)for(;s<l;s++)i(a[s],s);return a}return[]}function Pn(){var t=document.scrollingElement;return t||document.documentElement}function _t(t,e,i,a,s){if(!(!t.getBoundingClientRect&&t!==window)){var l,f,h,v,m,E,_;if(t!==window&&t.parentNode&&t!==Pn()?(l=t.getBoundingClientRect(),f=l.top,h=l.left,v=l.bottom,m=l.right,E=l.height,_=l.width):(f=0,h=0,v=window.innerHeight,m=window.innerWidth,E=window.innerHeight,_=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!Wn))do if(s&&s.getBoundingClientRect&&(Te(s,"transform")!=="none"||i&&Te(s,"position")!=="static")){var w=s.getBoundingClientRect();f-=w.top+parseInt(Te(s,"border-top-width")),h-=w.left+parseInt(Te(s,"border-left-width")),v=f+l.height,m=h+l.width;break}while(s=s.parentNode);if(a&&t!==window){var x=ei(s||t),D=x&&x.a,P=x&&x.d;x&&(f/=P,h/=D,_/=D,E/=P,v=f+E,m=h+_)}return{top:f,left:h,bottom:v,right:m,width:_,height:E}}}function Qu(t,e,i){for(var a=ar(t,!0),s=_t(t)[e];a;){var l=_t(a)[i],f=void 0;if(f=s>=l,!f)return a;if(a===Pn())break;a=ar(a,!1)}return!1}function ui(t,e,i,a){for(var s=0,l=0,f=t.children;l<f.length;){if(f[l].style.display!=="none"&&f[l]!==xe.ghost&&(a||f[l]!==xe.dragged)&&bn(f[l],i.draggable,t,!1)){if(s===e)return f[l];s++}l++}return null}function qs(t,e){for(var i=t.lastElementChild;i&&(i===xe.ghost||Te(i,"display")==="none"||e&&!Qa(i,e));)i=i.previousElementSibling;return i||null}function hn(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==xe.clone&&(!e||Qa(t,e))&&i++;return i}function Zu(t){var e=0,i=0,a=Pn();if(t)do{var s=ei(t),l=s.a,f=s.d;e+=t.scrollLeft*l,i+=t.scrollTop*f}while(t!==a&&(t=t.parentNode));return[e,i]}function Gh(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[i][a])return Number(i)}return-1}function ar(t,e){if(!t||!t.getBoundingClientRect)return Pn();var i=t,a=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Te(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Pn();if(a||e)return i;a=!0}}while(i=i.parentNode);return Pn()}function Xh(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function rs(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ri;function oc(t,e){return function(){if(!Ri){var i=arguments,a=this;i.length===1?t.call(a,i[0]):t.apply(a,i),Ri=setTimeout(function(){Ri=void 0},e)}}}function Qh(){clearTimeout(Ri),Ri=void 0}function sc(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function uc(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function lc(t,e,i){var a={};return Array.from(t.children).forEach(function(s){var l,f,h,v;if(!(!bn(s,e.draggable,t,!1)||s.animated||s===i)){var m=_t(s);a.left=Math.min((l=a.left)!==null&&l!==void 0?l:1/0,m.left),a.top=Math.min((f=a.top)!==null&&f!==void 0?f:1/0,m.top),a.right=Math.max((h=a.right)!==null&&h!==void 0?h:-1/0,m.right),a.bottom=Math.max((v=a.bottom)!==null&&v!==void 0?v:-1/0,m.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var qt="Sortable"+new Date().getTime();function Zh(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(s){if(!(Te(s,"display")==="none"||s===xe.ghost)){t.push({target:s,rect:_t(s)});var l=On({},t[t.length-1].rect);if(s.thisAnimationDuration){var f=ei(s,!0);f&&(l.top-=f.f,l.left-=f.e)}s.fromRect=l}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(Gh(t,{target:a}),1)},animateAll:function(a){var s=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var l=!1,f=0;t.forEach(function(h){var v=0,m=h.target,E=m.fromRect,_=_t(m),w=m.prevFromRect,x=m.prevToRect,D=h.rect,P=ei(m,!0);P&&(_.top-=P.f,_.left-=P.e),m.toRect=_,m.thisAnimationDuration&&rs(w,_)&&!rs(E,_)&&(D.top-_.top)/(D.left-_.left)===(E.top-_.top)/(E.left-_.left)&&(v=$h(D,w,x,s.options)),rs(_,E)||(m.prevFromRect=E,m.prevToRect=_,v||(v=s.options.animation),s.animate(m,D,_,v)),v&&(l=!0,f=Math.max(f,v),clearTimeout(m.animationResetTimer),m.animationResetTimer=setTimeout(function(){m.animationTime=0,m.prevFromRect=null,m.fromRect=null,m.prevToRect=null,m.thisAnimationDuration=null},v),m.thisAnimationDuration=v)}),clearTimeout(e),l?e=setTimeout(function(){typeof a=="function"&&a()},f):typeof a=="function"&&a(),t=[]},animate:function(a,s,l,f){if(f){Te(a,"transition",""),Te(a,"transform","");var h=ei(this.el),v=h&&h.a,m=h&&h.d,E=(s.left-l.left)/(v||1),_=(s.top-l.top)/(m||1);a.animatingX=!!E,a.animatingY=!!_,Te(a,"transform","translate3d("+E+"px,"+_+"px,0)"),this.forRepaintDummy=Jh(a),Te(a,"transition","transform "+f+"ms"+(this.options.easing?" "+this.options.easing:"")),Te(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){Te(a,"transition",""),Te(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},f)}}}}function Jh(t){return t.offsetWidth}function $h(t,e,i,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*a.animation}var Wr=[],is={initializeByDefault:!0},qi={mount:function(e){for(var i in is)is.hasOwnProperty(i)&&!(i in e)&&(e[i]=is[i]);Wr.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Wr.push(e)},pluginEvent:function(e,i,a){var s=this;this.eventCanceled=!1,a.cancel=function(){s.eventCanceled=!0};var l=e+"Global";Wr.forEach(function(f){i[f.pluginName]&&(i[f.pluginName][l]&&i[f.pluginName][l](On({sortable:i},a)),i.options[f.pluginName]&&i[f.pluginName][e]&&i[f.pluginName][e](On({sortable:i},a)))})},initializePlugins:function(e,i,a,s){Wr.forEach(function(h){var v=h.pluginName;if(!(!e.options[v]&&!h.initializeByDefault)){var m=new h(e,i,e.options);m.sortable=e,m.options=e.options,e[v]=m,Un(a,m.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var f=this.modifyOption(e,l,e.options[l]);typeof f<"u"&&(e.options[l]=f)}},getEventProperties:function(e,i){var a={};return Wr.forEach(function(s){typeof s.eventProperties=="function"&&Un(a,s.eventProperties.call(i[s.pluginName],e))}),a},modifyOption:function(e,i,a){var s;return Wr.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[i]=="function"&&(s=l.optionListeners[i].call(e[l.pluginName],a))}),s}};function ev(t){var e=t.sortable,i=t.rootEl,a=t.name,s=t.targetEl,l=t.cloneEl,f=t.toEl,h=t.fromEl,v=t.oldIndex,m=t.newIndex,E=t.oldDraggableIndex,_=t.newDraggableIndex,w=t.originalEvent,x=t.putSortable,D=t.extraEventProperties;if(e=e||i&&i[qt],!!e){var P,C=e.options,T="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Wn&&!Wi?P=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(P=document.createEvent("Event"),P.initEvent(a,!0,!0)),P.to=f||i,P.from=h||i,P.item=s||i,P.clone=l,P.oldIndex=v,P.newIndex=m,P.oldDraggableIndex=E,P.newDraggableIndex=_,P.originalEvent=w,P.pullMode=x?x.lastPutMode:void 0;var z=On(On({},D),qi.getEventProperties(a,e));for(var U in z)P[U]=z[U];i&&i.dispatchEvent(P),C[T]&&C[T].call(e,P)}}var tv=["evt"],Yt=function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.evt,l=Wh(a,tv);qi.pluginEvent.bind(xe)(e,i,On({dragEl:J,parentEl:mt,ghostEl:Ce,rootEl:lt,nextEl:Tr,lastDownEl:Pa,cloneEl:dt,cloneHidden:ir,dragStarted:Ii,putSortable:Ct,activeSortable:xe.active,originalEvent:s,oldIndex:Qr,oldDraggableIndex:Ki,newIndex:rn,newDraggableIndex:rr,hideGhostForTarget:hc,unhideGhostForTarget:vc,cloneNowHidden:function(){ir=!0},cloneNowShown:function(){ir=!1},dispatchSortableEvent:function(h){Ut({sortable:i,name:h,originalEvent:s})}},l))};function Ut(t){ev(On({putSortable:Ct,cloneEl:dt,targetEl:J,rootEl:lt,oldIndex:Qr,oldDraggableIndex:Ki,newIndex:rn,newDraggableIndex:rr},t))}var J,mt,Ce,lt,Tr,Pa,dt,ir,Qr,rn,Ki,rr,xa,Ct,Gr=!1,Za=!1,Ja=[],xr,gn,as,os,Ju,$u,Ii,qr,Bi,Ni=!1,ka=!1,Oa,Kt,ss=[],xs=!1,$a=[],fo=typeof document<"u",Ta=Ws,el=Wi||Wn?"cssFloat":"float",nv=fo&&!nc&&!Ws&&"draggable"in document.createElement("div"),cc=(function(){if(fo){if(Wn)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),fc=function(e,i){var a=Te(e),s=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),l=ui(e,0,i),f=ui(e,1,i),h=l&&Te(l),v=f&&Te(f),m=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+_t(l).width,E=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+_t(f).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&h.float&&h.float!=="none"){var _=h.float==="left"?"left":"right";return f&&(v.clear==="both"||v.clear===_)?"vertical":"horizontal"}return l&&(h.display==="block"||h.display==="flex"||h.display==="table"||h.display==="grid"||m>=s&&a[el]==="none"||f&&a[el]==="none"&&m+E>s)?"vertical":"horizontal"},rv=function(e,i,a){var s=a?e.left:e.top,l=a?e.right:e.bottom,f=a?e.width:e.height,h=a?i.left:i.top,v=a?i.right:i.bottom,m=a?i.width:i.height;return s===h||l===v||s+f/2===h+m/2},iv=function(e,i){var a;return Ja.some(function(s){var l=s[qt].options.emptyInsertThreshold;if(!(!l||qs(s))){var f=_t(s),h=e>=f.left-l&&e<=f.right+l,v=i>=f.top-l&&i<=f.bottom+l;if(h&&v)return a=s}}),a},dc=function(e){function i(l,f){return function(h,v,m,E){var _=h.options.group.name&&v.options.group.name&&h.options.group.name===v.options.group.name;if(l==null&&(f||_))return!0;if(l==null||l===!1)return!1;if(f&&l==="clone")return l;if(typeof l=="function")return i(l(h,v,m,E),f)(h,v,m,E);var w=(f?h:v).options.group.name;return l===!0||typeof l=="string"&&l===w||l.join&&l.indexOf(w)>-1}}var a={},s=e.group;(!s||La(s)!="object")&&(s={name:s}),a.name=s.name,a.checkPull=i(s.pull,!0),a.checkPut=i(s.put),a.revertClone=s.revertClone,e.group=a},hc=function(){!cc&&Ce&&Te(Ce,"display","none")},vc=function(){!cc&&Ce&&Te(Ce,"display","")};fo&&!nc&&document.addEventListener("click",function(t){if(Za)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Za=!1,!1},!0);var kr=function(e){if(J){e=e.touches?e.touches[0]:e;var i=iv(e.clientX,e.clientY);if(i){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);a.target=a.rootEl=i,a.preventDefault=void 0,a.stopPropagation=void 0,i[qt]._onDragOver(a)}}},av=function(e){J&&J.parentNode[qt]._isOutsideThisEl(e.target)};function xe(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Un({},e),t[qt]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fc(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(f,h){f.setData("Text",h.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:xe.supportPointer!==!1&&"PointerEvent"in window&&(!Mi||Ws),emptyInsertThreshold:5};qi.initializePlugins(this,t,i);for(var a in i)!(a in e)&&(e[a]=i[a]);dc(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:nv,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ue(t,"pointerdown",this._onTapStart):(Ue(t,"mousedown",this._onTapStart),Ue(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ue(t,"dragover",this),Ue(t,"dragenter",this)),Ja.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Un(this,Zh())}xe.prototype={constructor:xe,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(qr=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,J):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,a=this.el,s=this.options,l=s.preventOnFilter,f=e.type,h=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,v=(h||e).target,m=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||v,E=s.filter;if(hv(a),!J&&!(/mousedown|pointerdown/.test(f)&&e.button!==0||s.disabled)&&!m.isContentEditable&&!(!this.nativeDraggable&&Mi&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=bn(v,s.draggable,a,!1),!(v&&v.animated)&&Pa!==v)){if(Qr=hn(v),Ki=hn(v,s.draggable),typeof E=="function"){if(E.call(this,e,v,this)){Ut({sortable:i,rootEl:m,name:"filter",targetEl:v,toEl:a,fromEl:a}),Yt("filter",i,{evt:e}),l&&e.preventDefault();return}}else if(E&&(E=E.split(",").some(function(_){if(_=bn(m,_.trim(),a,!1),_)return Ut({sortable:i,rootEl:_,name:"filter",targetEl:v,fromEl:a,toEl:a}),Yt("filter",i,{evt:e}),!0}),E)){l&&e.preventDefault();return}s.handle&&!bn(m,s.handle,a,!1)||this._prepareDragStart(e,h,v)}}},_prepareDragStart:function(e,i,a){var s=this,l=s.el,f=s.options,h=l.ownerDocument,v;if(a&&!J&&a.parentNode===l){var m=_t(a);if(lt=l,J=a,mt=J.parentNode,Tr=J.nextSibling,Pa=a,xa=f.group,xe.dragged=J,xr={target:J,clientX:(i||e).clientX,clientY:(i||e).clientY},Ju=xr.clientX-m.left,$u=xr.clientY-m.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,J.style["will-change"]="all",v=function(){if(Yt("delayEnded",s,{evt:e}),xe.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Gu&&s.nativeDraggable&&(J.draggable=!0),s._triggerDragStart(e,i),Ut({sortable:s,name:"choose",originalEvent:e}),tn(J,f.chosenClass,!0)},f.ignore.split(",").forEach(function(E){ac(J,E.trim(),us)}),Ue(h,"dragover",kr),Ue(h,"mousemove",kr),Ue(h,"touchmove",kr),f.supportPointer?(Ue(h,"pointerup",s._onDrop),!this.nativeDraggable&&Ue(h,"pointercancel",s._onDrop)):(Ue(h,"mouseup",s._onDrop),Ue(h,"touchend",s._onDrop),Ue(h,"touchcancel",s._onDrop)),Gu&&this.nativeDraggable&&(this.options.touchStartThreshold=4,J.draggable=!0),Yt("delayStart",this,{evt:e}),f.delay&&(!f.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Wi||Wn))){if(xe.eventCanceled){this._onDrop();return}f.supportPointer?(Ue(h,"pointerup",s._disableDelayedDrag),Ue(h,"pointercancel",s._disableDelayedDrag)):(Ue(h,"mouseup",s._disableDelayedDrag),Ue(h,"touchend",s._disableDelayedDrag),Ue(h,"touchcancel",s._disableDelayedDrag)),Ue(h,"mousemove",s._delayedDragTouchMoveHandler),Ue(h,"touchmove",s._delayedDragTouchMoveHandler),f.supportPointer&&Ue(h,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(v,f.delay)}else v()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){J&&us(J),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;He(e,"mouseup",this._disableDelayedDrag),He(e,"touchend",this._disableDelayedDrag),He(e,"touchcancel",this._disableDelayedDrag),He(e,"pointerup",this._disableDelayedDrag),He(e,"pointercancel",this._disableDelayedDrag),He(e,"mousemove",this._delayedDragTouchMoveHandler),He(e,"touchmove",this._delayedDragTouchMoveHandler),He(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Ue(document,"pointermove",this._onTouchMove):i?Ue(document,"touchmove",this._onTouchMove):Ue(document,"mousemove",this._onTouchMove):(Ue(J,"dragend",this),Ue(lt,"dragstart",this._onDragStart));try{document.selection?Ma(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Gr=!1,lt&&J){Yt("dragStarted",this,{evt:i}),this.nativeDraggable&&Ue(document,"dragover",av);var a=this.options;!e&&tn(J,a.dragClass,!1),tn(J,a.ghostClass,!0),xe.active=this,e&&this._appendGhost(),Ut({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(gn){this._lastX=gn.clientX,this._lastY=gn.clientY,hc();for(var e=document.elementFromPoint(gn.clientX,gn.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(gn.clientX,gn.clientY),e!==i);)i=e;if(J.parentNode[qt]._isOutsideThisEl(e),i)do{if(i[qt]){var a=void 0;if(a=i[qt]._onDragOver({clientX:gn.clientX,clientY:gn.clientY,target:e,rootEl:i}),a&&!this.options.dragoverBubble)break}e=i}while(i=ic(i));vc()}},_onTouchMove:function(e){if(xr){var i=this.options,a=i.fallbackTolerance,s=i.fallbackOffset,l=e.touches?e.touches[0]:e,f=Ce&&ei(Ce,!0),h=Ce&&f&&f.a,v=Ce&&f&&f.d,m=Ta&&Kt&&Zu(Kt),E=(l.clientX-xr.clientX+s.x)/(h||1)+(m?m[0]-ss[0]:0)/(h||1),_=(l.clientY-xr.clientY+s.y)/(v||1)+(m?m[1]-ss[1]:0)/(v||1);if(!xe.active&&!Gr){if(a&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(Ce){f?(f.e+=E-(as||0),f.f+=_-(os||0)):f={a:1,b:0,c:0,d:1,e:E,f:_};var w="matrix(".concat(f.a,",").concat(f.b,",").concat(f.c,",").concat(f.d,",").concat(f.e,",").concat(f.f,")");Te(Ce,"webkitTransform",w),Te(Ce,"mozTransform",w),Te(Ce,"msTransform",w),Te(Ce,"transform",w),as=E,os=_,gn=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ce){var e=this.options.fallbackOnBody?document.body:lt,i=_t(J,!0,Ta,!0,e),a=this.options;if(Ta){for(Kt=e;Te(Kt,"position")==="static"&&Te(Kt,"transform")==="none"&&Kt!==document;)Kt=Kt.parentNode;Kt!==document.body&&Kt!==document.documentElement?(Kt===document&&(Kt=Pn()),i.top+=Kt.scrollTop,i.left+=Kt.scrollLeft):Kt=Pn(),ss=Zu(Kt)}Ce=J.cloneNode(!0),tn(Ce,a.ghostClass,!1),tn(Ce,a.fallbackClass,!0),tn(Ce,a.dragClass,!0),Te(Ce,"transition",""),Te(Ce,"transform",""),Te(Ce,"box-sizing","border-box"),Te(Ce,"margin",0),Te(Ce,"top",i.top),Te(Ce,"left",i.left),Te(Ce,"width",i.width),Te(Ce,"height",i.height),Te(Ce,"opacity","0.8"),Te(Ce,"position",Ta?"absolute":"fixed"),Te(Ce,"zIndex","100000"),Te(Ce,"pointerEvents","none"),xe.ghost=Ce,e.appendChild(Ce),Te(Ce,"transform-origin",Ju/parseInt(Ce.style.width)*100+"% "+$u/parseInt(Ce.style.height)*100+"%")}},_onDragStart:function(e,i){var a=this,s=e.dataTransfer,l=a.options;if(Yt("dragStart",this,{evt:e}),xe.eventCanceled){this._onDrop();return}Yt("setupClone",this),xe.eventCanceled||(dt=uc(J),dt.removeAttribute("id"),dt.draggable=!1,dt.style["will-change"]="",this._hideClone(),tn(dt,this.options.chosenClass,!1),xe.clone=dt),a.cloneId=Ma(function(){Yt("clone",a),!xe.eventCanceled&&(a.options.removeCloneOnHide||lt.insertBefore(dt,J),a._hideClone(),Ut({sortable:a,name:"clone"}))}),!i&&tn(J,l.dragClass,!0),i?(Za=!0,a._loopId=setInterval(a._emulateDragOver,50)):(He(document,"mouseup",a._onDrop),He(document,"touchend",a._onDrop),He(document,"touchcancel",a._onDrop),s&&(s.effectAllowed="move",l.setData&&l.setData.call(a,s,J)),Ue(document,"drop",a),Te(J,"transform","translateZ(0)")),Gr=!0,a._dragStartId=Ma(a._dragStarted.bind(a,i,e)),Ue(document,"selectstart",a),Ii=!0,window.getSelection().removeAllRanges(),Mi&&Te(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,a=e.target,s,l,f,h=this.options,v=h.group,m=xe.active,E=xa===v,_=h.sort,w=Ct||m,x,D=this,P=!1;if(xs)return;function C(ie,Re){Yt(ie,D,On({evt:e,isOwner:E,axis:x?"vertical":"horizontal",revert:f,dragRect:s,targetRect:l,canSort:_,fromSortable:w,target:a,completed:z,onMove:function($e,Ke){return Sa(lt,i,J,s,$e,_t($e),e,Ke)},changed:U},Re))}function T(){C("dragOverAnimationCapture"),D.captureAnimationState(),D!==w&&w.captureAnimationState()}function z(ie){return C("dragOverCompleted",{insertion:ie}),ie&&(E?m._hideClone():m._showClone(D),D!==w&&(tn(J,Ct?Ct.options.ghostClass:m.options.ghostClass,!1),tn(J,h.ghostClass,!0)),Ct!==D&&D!==xe.active?Ct=D:D===xe.active&&Ct&&(Ct=null),w===D&&(D._ignoreWhileAnimating=a),D.animateAll(function(){C("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(a===J&&!J.animated||a===i&&!a.animated)&&(qr=null),!h.dragoverBubble&&!e.rootEl&&a!==document&&(J.parentNode[qt]._isOutsideThisEl(e.target),!ie&&kr(e)),!h.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),P=!0}function U(){rn=hn(J),rr=hn(J,h.draggable),Ut({sortable:D,name:"change",toEl:i,newIndex:rn,newDraggableIndex:rr,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=bn(a,h.draggable,i,!0),C("dragOver"),xe.eventCanceled)return P;if(J.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||D._ignoreWhileAnimating===a)return z(!1);if(Za=!1,m&&!h.disabled&&(E?_||(f=mt!==lt):Ct===this||(this.lastPutMode=xa.checkPull(this,m,J,e))&&v.checkPut(this,m,J,e))){if(x=this._getDirection(e,a)==="vertical",s=_t(J),C("dragOverValid"),xe.eventCanceled)return P;if(f)return mt=lt,T(),this._hideClone(),C("revert"),xe.eventCanceled||(Tr?lt.insertBefore(J,Tr):lt.appendChild(J)),z(!0);var B=qs(i,h.draggable);if(!B||lv(e,x,this)&&!B.animated){if(B===J)return z(!1);if(B&&i===e.target&&(a=B),a&&(l=_t(a)),Sa(lt,i,J,s,a,l,e,!!a)!==!1)return T(),B&&B.nextSibling?i.insertBefore(J,B.nextSibling):i.appendChild(J),mt=i,U(),z(!0)}else if(B&&uv(e,x,this)){var G=ui(i,0,h,!0);if(G===J)return z(!1);if(a=G,l=_t(a),Sa(lt,i,J,s,a,l,e,!1)!==!1)return T(),i.insertBefore(J,G),mt=i,U(),z(!0)}else if(a.parentNode===i){l=_t(a);var te=0,q,N=J.parentNode!==i,Z=!rv(J.animated&&J.toRect||s,a.animated&&a.toRect||l,x),ae=x?"top":"left",W=Qu(a,"top","top")||Qu(J,"top","top"),ge=W?W.scrollTop:void 0;qr!==a&&(q=l[ae],Ni=!1,ka=!Z&&h.invertSwap||N),te=cv(e,a,l,x,Z?1:h.swapThreshold,h.invertedSwapThreshold==null?h.swapThreshold:h.invertedSwapThreshold,ka,qr===a);var ve;if(te!==0){var pe=hn(J);do pe-=te,ve=mt.children[pe];while(ve&&(Te(ve,"display")==="none"||ve===Ce))}if(te===0||ve===a)return z(!1);qr=a,Bi=te;var Le=a.nextElementSibling,Xe=!1;Xe=te===1;var rt=Sa(lt,i,J,s,a,l,e,Xe);if(rt!==!1)return(rt===1||rt===-1)&&(Xe=rt===1),xs=!0,setTimeout(sv,30),T(),Xe&&!Le?i.appendChild(J):a.parentNode.insertBefore(J,Xe?Le:a),W&&sc(W,0,ge-W.scrollTop),mt=J.parentNode,q!==void 0&&!ka&&(Oa=Math.abs(q-_t(a)[ae])),U(),z(!0)}if(i.contains(J))return z(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){He(document,"mousemove",this._onTouchMove),He(document,"touchmove",this._onTouchMove),He(document,"pointermove",this._onTouchMove),He(document,"dragover",kr),He(document,"mousemove",kr),He(document,"touchmove",kr)},_offUpEvents:function(){var e=this.el.ownerDocument;He(e,"mouseup",this._onDrop),He(e,"touchend",this._onDrop),He(e,"pointerup",this._onDrop),He(e,"pointercancel",this._onDrop),He(e,"touchcancel",this._onDrop),He(document,"selectstart",this)},_onDrop:function(e){var i=this.el,a=this.options;if(rn=hn(J),rr=hn(J,a.draggable),Yt("drop",this,{evt:e}),mt=J&&J.parentNode,rn=hn(J),rr=hn(J,a.draggable),xe.eventCanceled){this._nulling();return}Gr=!1,ka=!1,Ni=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ks(this.cloneId),ks(this._dragStartId),this.nativeDraggable&&(He(document,"drop",this),He(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Mi&&Te(document.body,"user-select",""),Te(J,"transform",""),e&&(Ii&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),Ce&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),(lt===mt||Ct&&Ct.lastPutMode!=="clone")&&dt&&dt.parentNode&&dt.parentNode.removeChild(dt),J&&(this.nativeDraggable&&He(J,"dragend",this),us(J),J.style["will-change"]="",Ii&&!Gr&&tn(J,Ct?Ct.options.ghostClass:this.options.ghostClass,!1),tn(J,this.options.chosenClass,!1),Ut({sortable:this,name:"unchoose",toEl:mt,newIndex:null,newDraggableIndex:null,originalEvent:e}),lt!==mt?(rn>=0&&(Ut({rootEl:mt,name:"add",toEl:mt,fromEl:lt,originalEvent:e}),Ut({sortable:this,name:"remove",toEl:mt,originalEvent:e}),Ut({rootEl:mt,name:"sort",toEl:mt,fromEl:lt,originalEvent:e}),Ut({sortable:this,name:"sort",toEl:mt,originalEvent:e})),Ct&&Ct.save()):rn!==Qr&&rn>=0&&(Ut({sortable:this,name:"update",toEl:mt,originalEvent:e}),Ut({sortable:this,name:"sort",toEl:mt,originalEvent:e})),xe.active&&((rn==null||rn===-1)&&(rn=Qr,rr=Ki),Ut({sortable:this,name:"end",toEl:mt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Yt("nulling",this),lt=J=mt=Ce=Tr=dt=Pa=ir=xr=gn=Ii=rn=rr=Qr=Ki=qr=Bi=Ct=xa=xe.dragged=xe.ghost=xe.clone=xe.active=null,$a.forEach(function(e){e.checked=!0}),$a.length=as=os=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":J&&(this._onDragOver(e),ov(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,a=this.el.children,s=0,l=a.length,f=this.options;s<l;s++)i=a[s],bn(i,f.draggable,this.el,!1)&&e.push(i.getAttribute(f.dataIdAttr)||dv(i));return e},sort:function(e,i){var a={},s=this.el;this.toArray().forEach(function(l,f){var h=s.children[f];bn(h,this.options.draggable,s,!1)&&(a[l]=h)},this),i&&this.captureAnimationState(),e.forEach(function(l){a[l]&&(s.removeChild(a[l]),s.appendChild(a[l]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return bn(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var a=this.options;if(i===void 0)return a[e];var s=qi.modifyOption(this,e,i);typeof s<"u"?a[e]=s:a[e]=i,e==="group"&&dc(a)},destroy:function(){Yt("destroy",this);var e=this.el;e[qt]=null,He(e,"mousedown",this._onTapStart),He(e,"touchstart",this._onTapStart),He(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(He(e,"dragover",this),He(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ja.splice(Ja.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ir){if(Yt("hideClone",this),xe.eventCanceled)return;Te(dt,"display","none"),this.options.removeCloneOnHide&&dt.parentNode&&dt.parentNode.removeChild(dt),ir=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ir){if(Yt("showClone",this),xe.eventCanceled)return;J.parentNode==lt&&!this.options.group.revertClone?lt.insertBefore(dt,J):Tr?lt.insertBefore(dt,Tr):lt.appendChild(dt),this.options.group.revertClone&&this.animate(J,dt),Te(dt,"display",""),ir=!1}}};function ov(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Sa(t,e,i,a,s,l,f,h){var v,m=t[qt],E=m.options.onMove,_;return window.CustomEvent&&!Wn&&!Wi?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=e,v.from=t,v.dragged=i,v.draggedRect=a,v.related=s||e,v.relatedRect=l||_t(e),v.willInsertAfter=h,v.originalEvent=f,t.dispatchEvent(v),E&&(_=E.call(m,v,f)),_}function us(t){t.draggable=!1}function sv(){xs=!1}function uv(t,e,i){var a=_t(ui(i.el,0,i.options,!0)),s=lc(i.el,i.options,Ce),l=10;return e?t.clientX<s.left-l||t.clientY<a.top&&t.clientX<a.right:t.clientY<s.top-l||t.clientY<a.bottom&&t.clientX<a.left}function lv(t,e,i){var a=_t(qs(i.el,i.options.draggable)),s=lc(i.el,i.options,Ce),l=10;return e?t.clientX>s.right+l||t.clientY>a.bottom&&t.clientX>a.left:t.clientY>s.bottom+l||t.clientX>a.right&&t.clientY>a.top}function cv(t,e,i,a,s,l,f,h){var v=a?t.clientY:t.clientX,m=a?i.height:i.width,E=a?i.top:i.left,_=a?i.bottom:i.right,w=!1;if(!f){if(h&&Oa<m*s){if(!Ni&&(Bi===1?v>E+m*l/2:v<_-m*l/2)&&(Ni=!0),Ni)w=!0;else if(Bi===1?v<E+Oa:v>_-Oa)return-Bi}else if(v>E+m*(1-s)/2&&v<_-m*(1-s)/2)return fv(e)}return w=w||f,w&&(v<E+m*l/2||v>_-m*l/2)?v>E+m/2?1:-1:0}function fv(t){return hn(J)<hn(t)?1:-1}function dv(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,a=0;i--;)a+=e.charCodeAt(i);return a.toString(36)}function hv(t){$a.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var a=e[i];a.checked&&$a.push(a)}}function Ma(t){return setTimeout(t,0)}function ks(t){return clearTimeout(t)}fo&&Ue(document,"touchmove",function(t){(xe.active||Gr)&&t.cancelable&&t.preventDefault()});xe.utils={on:Ue,off:He,css:Te,find:ac,is:function(e,i){return!!bn(e,i,e,!1)},extend:Xh,throttle:oc,closest:bn,toggleClass:tn,clone:uc,index:hn,nextTick:Ma,cancelNextTick:ks,detectDirection:fc,getChild:ui,expando:qt};xe.get=function(t){return t[qt]};xe.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(xe.utils=On(On({},xe.utils),a.utils)),qi.mount(a)})};xe.create=function(t,e){return new xe(t,e)};xe.version=qh;var bt=[],Di,Ts,Ss=!1,ls,cs,eo,Ci;function vv(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var a=i.originalEvent;this.sortable.nativeDraggable?Ue(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ue(document,"pointermove",this._handleFallbackAutoScroll):a.touches?Ue(document,"touchmove",this._handleFallbackAutoScroll):Ue(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var a=i.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?He(document,"dragover",this._handleAutoScroll):(He(document,"pointermove",this._handleFallbackAutoScroll),He(document,"touchmove",this._handleFallbackAutoScroll),He(document,"mousemove",this._handleFallbackAutoScroll)),tl(),Ra(),Qh()},nulling:function(){eo=Ts=Di=Ss=Ci=ls=cs=null,bt.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,a){var s=this,l=(i.touches?i.touches[0]:i).clientX,f=(i.touches?i.touches[0]:i).clientY,h=document.elementFromPoint(l,f);if(eo=i,a||this.options.forceAutoScrollFallback||Wi||Wn||Mi){fs(i,this.options,h,a);var v=ar(h,!0);Ss&&(!Ci||l!==ls||f!==cs)&&(Ci&&tl(),Ci=setInterval(function(){var m=ar(document.elementFromPoint(l,f),!0);m!==v&&(v=m,Ra()),fs(i,s.options,m,a)},10),ls=l,cs=f)}else{if(!this.options.bubbleScroll||ar(h,!0)===Pn()){Ra();return}fs(i,this.options,ar(h,!1),!1)}}},Un(t,{pluginName:"scroll",initializeByDefault:!0})}function Ra(){bt.forEach(function(t){clearInterval(t.pid)}),bt=[]}function tl(){clearInterval(Ci)}var fs=oc(function(t,e,i,a){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,f=e.scrollSensitivity,h=e.scrollSpeed,v=Pn(),m=!1,E;Ts!==i&&(Ts=i,Ra(),Di=e.scroll,E=e.scrollFn,Di===!0&&(Di=ar(i,!0)));var _=0,w=Di;do{var x=w,D=_t(x),P=D.top,C=D.bottom,T=D.left,z=D.right,U=D.width,B=D.height,G=void 0,te=void 0,q=x.scrollWidth,N=x.scrollHeight,Z=Te(x),ae=x.scrollLeft,W=x.scrollTop;x===v?(G=U<q&&(Z.overflowX==="auto"||Z.overflowX==="scroll"||Z.overflowX==="visible"),te=B<N&&(Z.overflowY==="auto"||Z.overflowY==="scroll"||Z.overflowY==="visible")):(G=U<q&&(Z.overflowX==="auto"||Z.overflowX==="scroll"),te=B<N&&(Z.overflowY==="auto"||Z.overflowY==="scroll"));var ge=G&&(Math.abs(z-s)<=f&&ae+U<q)-(Math.abs(T-s)<=f&&!!ae),ve=te&&(Math.abs(C-l)<=f&&W+B<N)-(Math.abs(P-l)<=f&&!!W);if(!bt[_])for(var pe=0;pe<=_;pe++)bt[pe]||(bt[pe]={});(bt[_].vx!=ge||bt[_].vy!=ve||bt[_].el!==x)&&(bt[_].el=x,bt[_].vx=ge,bt[_].vy=ve,clearInterval(bt[_].pid),(ge!=0||ve!=0)&&(m=!0,bt[_].pid=setInterval((function(){a&&this.layer===0&&xe.active._onTouchMove(eo);var Le=bt[this.layer].vy?bt[this.layer].vy*h:0,Xe=bt[this.layer].vx?bt[this.layer].vx*h:0;typeof E=="function"&&E.call(xe.dragged.parentNode[qt],Xe,Le,t,eo,bt[this.layer].el)!=="continue"||sc(bt[this.layer].el,Xe,Le)}).bind({layer:_}),24))),_++}while(e.bubbleScroll&&w!==v&&(w=ar(w,!1)));Ss=m}},30),pc=function(e){var i=e.originalEvent,a=e.putSortable,s=e.dragEl,l=e.activeSortable,f=e.dispatchSortableEvent,h=e.hideGhostForTarget,v=e.unhideGhostForTarget;if(i){var m=a||l;h();var E=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,_=document.elementFromPoint(E.clientX,E.clientY);v(),m&&!m.el.contains(_)&&(f("spill"),this.onSpill({dragEl:s,putSortable:a}))}};function Gs(){}Gs.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var s=ui(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),a&&a.animateAll()},drop:pc};Un(Gs,{pluginName:"revertOnSpill"});function Xs(){}Xs.prototype={onSpill:function(e){var i=e.dragEl,a=e.putSortable,s=a||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:pc};Un(Xs,{pluginName:"removeOnSpill"});xe.mount(new vv);xe.mount(Xs,Gs);class pv{constructor(){this.state={lists:[],isDragActive:!1,pendingUpdates:new Map,version:0},this.listeners=new Set}subscribe(e){return this.listeners.add(e),e(this.getState()),()=>this.listeners.delete(e)}getState(){return{lists:[...this.state.lists],isDragActive:this.state.isDragActive,version:this.state.version}}initializeFromQuery(e){this.state.isDragActive||Array.isArray(e)&&(this.state.lists=e.map(i=>({id:i.id,name:i.name,order:i.order,columnIndex:i.columnIndex??0})),this.state.version++,this.notify())}startDrag(){this.state.isDragActive||(this.state.isDragActive=!0,this.state.pendingUpdates.clear(),this.state.version++,this.notify())}updateDragState(e,i){if(!this.state.isDragActive){console.warn("[DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[DRAG STATE] updateDragState called with invalid items");return}this.state.pendingUpdates.set(e,{items:i.map(a=>({...a})),timestamp:Date.now()}),this.applyPendingUpdates(),this.state.version++,this.notify()}applyPendingUpdates(){const e=new Set;this.state.pendingUpdates.forEach(({items:s})=>{s.forEach(l=>e.add(l.id))});const i=new Set(this.state.pendingUpdates.keys());let a=this.state.lists.filter(s=>{const l=s.columnIndex??0;return!e.has(s.id)&&!i.has(l)});this.state.pendingUpdates.forEach(({items:s},l)=>{const f=s.map((h,v)=>({...this.state.lists.find(E=>E.id===h.id)||h,columnIndex:l,order:v}));a=[...a,...f]}),this.state.lists=a}completeDrag(e=!0){this.state.isDragActive&&(e?this.state.pendingUpdates.clear():this.state.pendingUpdates.clear(),this.state.isDragActive=!1,this.state.version++,this.notify())}notify(){const e=this.getState();this.listeners.forEach(i=>{try{i(e)}catch(a){console.error("[DRAG STATE] Error in state change listener:",a)}})}getListsForColumn(e){return this.state.lists.filter(i=>(i.columnIndex??0)===e)}isDragActive(){return this.state.isDragActive}}const yn=new pv,Oe=new Ga("TaskPlannerDB");Oe.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Oe.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.toCollection().modify(e=>{e.status="unchecked"}));Oe.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.where("status").equals("archived").modify(e=>{e.archivedAt=Date.now()}));Oe.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify(e=>{e.archivedAt===void 0&&(e.archivedAt=null)}));Oe.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify((e,i)=>{e.columnIndex===void 0&&(e.columnIndex=e.order%5)}));function ho(t){return t.length===0?0:Math.max(...t.map(i=>i.order))+1}async function mv(){return(await Oe.lists.orderBy("order").toArray()).filter(e=>e.archivedAt==null)}async function gv(){return await Oe.lists.orderBy("order").toArray()}async function yv(t,e=null){if(t==null)throw new Error("List name cannot be null or undefined");const i=t.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const a=await Oe.lists.orderBy("order").toArray(),s=ho(a),l=5;let f;return e!==null&&e>=0&&e<l?f=e:f=s%l,await Oe.lists.add({name:i,order:s,archivedAt:null,columnIndex:f})}async function bv(t=null){const e=await Oe.lists.orderBy("order").toArray(),i=ho(e),a=5;let s;return t!==null&&t>=0&&t<a?s=t:s=i%a,await Oe.lists.add({name:null,order:i,archivedAt:null,columnIndex:s})}async function _v(t,e){const i=e.trim();if(i==="")throw new Error("List name cannot be empty");return await Oe.lists.update(t,{name:i})}async function Ir(t){return await Oe.tasks.where("listId").equals(t).filter(e=>e.status!=="archived").sortBy("order")}async function wv(){return(await Oe.tasks.where("status").equals("archived").toArray()).sort((e,i)=>{const a=e.archivedAt||0,s=i.archivedAt||0;return s!==a?s-a:(i.order||0)-(e.order||0)})}async function Ev(t,e,i=null){let a=t;t===null&&(a=await bv(i));const s=await Oe.tasks.where("listId").equals(a).filter(v=>v.status!=="archived").sortBy("order"),l=ho(s),f=e===""?"":e.trim();return await Oe.tasks.add({text:f,listId:a,order:l,status:"unchecked"})}async function xv(t,e){const i=e===""?"":e.trim();return await Oe.tasks.update(t,{text:i})}async function nl(t,e){if(!["unchecked","checked","archived"].includes(e))throw new Error(`Invalid status: ${e}`);const i={status:e};return e==="archived"?i.archivedAt=Date.now():e!=="archived"&&(i.archivedAt=null),await Oe.tasks.update(t,i)}async function kv(t){const e=await Oe.tasks.get(t);if(!e)throw new Error(`Task ${t} not found`);const i=await Oe.lists.get(e.listId);if(!i)throw new Error(`Task's list ${e.listId} not found`);let a=!1;i.archivedAt!=null&&(await Sv(e.listId),a=!0);const s=await Oe.tasks.where("listId").equals(e.listId).filter(h=>h.status!=="archived"&&h.id!==t).sortBy("order"),l=ho(s);return{taskUpdated:await Oe.tasks.update(t,{status:"checked",order:l}),listRestored:a}}async function ti(t,e){if(!e||e.length===0)return;const i=e.map(h=>h.id),s=(await Oe.tasks.bulkGet(i)).filter(h=>h!==void 0);if(s.length===0)return;const l=s.filter(h=>h.listId!==t),f=new Set(l.map(h=>h.listId));await Oe.transaction("rw",Oe.tasks,async()=>{for(let h=0;h<e.length;h++){const v=e[h].id,m=s.find(_=>_.id===v);if(!m)continue;const E={order:h};m.listId!==t&&(E.listId=t),await Oe.tasks.update(v,E)}for(const h of f){const v=await Oe.tasks.where("listId").equals(h).filter(m=>m.status!=="archived").sortBy("order");for(let m=0;m<v.length;m++)await Oe.tasks.update(v[m].id,{order:m})}})}async function Tv(t){const e=Date.now();return await Oe.lists.update(t,{archivedAt:e})}async function Sv(t){return await Oe.lists.update(t,{archivedAt:null})}async function Av(t){const e=Date.now(),i=await Oe.tasks.where("listId").equals(t).filter(s=>s.status==="unchecked"||s.status==="checked").toArray(),a=i.map(s=>Oe.tasks.update(s.id,{status:"archived",archivedAt:e}));return await Promise.all(a),i.length}async function rl(t,e){if(!e||e.length===0)return;if(t<0||t>=5)throw new Error(`Invalid column index: ${t}`);const i=e.map(h=>h.id),a=await Oe.lists.bulkGet(i);if(a.filter(h=>!h).length>0)throw new Error("Cannot update order: some lists do not exist");const l=a.filter(h=>h!==void 0),f=l.filter(h=>(h.columnIndex??0)!==t);new Set(f.map(h=>h.columnIndex??0)),await Oe.transaction("rw",Oe.lists,async()=>{const h=new Set;for(let w=0;w<e.length;w++){const x=e[w].id,D=l.find(T=>T.id===x);if(!D)continue;const P={order:w},C=D.columnIndex??0;C!==t&&(P.columnIndex=t,h.add(C)),await Oe.lists.update(x,P)}const m=(await Oe.lists.orderBy("order").toArray()).filter(w=>w.archivedAt==null),E=Array(5).fill(null).map(()=>[]);for(const w of m){const x=w.columnIndex??0,D=x>=5?4:x;E[D].push(w)}const _=new Set([t,...h]);for(const w of _){const x=E[w];x.sort((D,P)=>(D.order??0)-(P.order??0));for(let D=0;D<x.length;D++)await Oe.lists.update(x[D].id,{order:D})}})}function mc(t){return t&&(t.isDndShadowItem===!0||typeof t.id=="string"&&t.id.startsWith("id:dnd-shadow-placeholder-"))}function gc(t,e=5){if(!t||t.length===0)return Array(e).fill(null).map(()=>[]);const i=Array(e).fill(null).map(()=>[]),a=e-1;for(const s of t){let l=s.columnIndex??0;l>=e&&(l=a),i[l].push(s)}for(let s=0;s<i.length;s++)i[s].sort((l,f)=>(l.order??0)-(f.order??0));return i}function Iv(t,e){if(!t||t.length===0)return null;for(let i=0;i<t.length;i++){const a=t[i];if(!Array.isArray(a))continue;const s=a.findIndex(l=>l.id===e);if(s!==-1)return{columnIndex:i,index:s}}return null}function Dv(t,e,i,a){const{columnIndex:s,index:l}=t;let f=s,h=l;if(e==="up"){if(l===0)return null;h=l-1}else if(e==="down"){const v=i[s]||[];if(l===v.length-1)return null;h=l+1}else if(e==="left"){if(s===0)return null;f=s-1,h=(i[f]||[]).length}else if(e==="right"){if(s===a-1)return null;f=s+1,h=(i[f]||[]).length}else return null;return{targetColumnIndex:f,targetIndex:h}}function Cv(t,e,i,a){const s=Iv(t,e);if(!s)return null;const{columnIndex:l,index:f}=s,h=Dv(s,i,t,a);if(!h)return null;const{targetColumnIndex:v,targetIndex:m}=h,E=t.map(C=>Array.isArray(C)?[...C]:[]),_=E[l];if(!_||_.length===0)return null;const[w]=_.splice(f,1);if(!w)return null;const x=E[v];if(!x)return null;const D=Math.min(Math.max(m,0),x.length);i==="left"||i==="right"?x.splice(D,0,{...w,columnIndex:v}):x.splice(D,0,w);const P=[];for(let C=0;C<E.length;C++){const T=E[C]||[];for(let z=0;z<T.length;z++){const U=T[z];P.push({...U,columnIndex:C,order:z})}}return{newColumns:E,updatedDraggableLists:P,targetColumnIndex:v,targetColumnItems:(E[v]||[]).map(C=>({id:C.id}))}}function Lv(t){return Array.isArray(t)?t.filter(e=>!mc(e)):[]}function li(t){t instanceof HTMLElement&&(t.style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",t.style.backgroundColor="rgba(107, 143, 217, 0.04)",t.style.borderRadius="4px")}function yc(t){t instanceof HTMLElement&&(t.style.removeProperty("box-shadow"),t.style.removeProperty("background-color"),t.style.removeProperty("border-radius"))}function Pv(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach(e=>{e instanceof HTMLElement&&li(e)})}function Ov(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach(e=>{e instanceof HTMLElement&&yc(e)})}function Mv(t){const{onDragStart:e,onDragEnd:i,columnIndex:a,getSortableInstance:s}=t;return{animation:150,ghostClass:"sortable-ghost-list",group:"lists",draggable:"[data-id]",filter:"ul, li, .create-list-container, .empty-drop-zone",preventOnFilter:!1,delay:50,delayOnStartOnly:!0,distance:5,emptyInsertThreshold:50,forceFallback:!0,fallbackOnBody:!0,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onStart:l=>{if(typeof document<"u"){if(document.querySelector(".modal-backdrop")){const h=s?s():null;h&&(h.option("disabled",!0),setTimeout(()=>{h.option("disabled",!1)},0));return}document.body.classList.add("list-dragging-active")}Pv(),e&&e(l)},onMove:l=>{l.to&&l.to instanceof HTMLElement&&li(l.to),l.from&&l.from instanceof HTMLElement&&li(l.from)},onEnd:l=>{typeof document<"u"&&document.body.classList.remove("list-dragging-active"),Ov(),i&&i(l,a)}}}const to=160,Rv=150,As=1056,Kv=816,no=16,Bv=25,Nv=10,ds=20,Aa=10,Fv=40,il=200,al=10,Hv=20;async function jv(t,e={}){const{maxAttempts:i=Bv,retryInterval:a=Nv,waitForTick:s=!0}=e;if(typeof document>"u")return null;s&&await at();for(let l=0;l<i;l++){const f=t();if(f&&f instanceof HTMLElement)return f.focus(),f;l<i-1&&await new Promise(h=>setTimeout(h,a))}return null}async function bc(t){if(typeof document>"u")return null;await at();const e=document.querySelector(`div[data-id="${t}"][role="group"]`);if(e instanceof HTMLElement)return e.focus(),e;const i=document.querySelector(`div[data-id="${t}"]`);return i instanceof HTMLElement?(i.focus(),i):null}function Uv(t,e,i){if(!t)return null;const a=t.querySelector(e);if(a){const s=a.querySelector(i);if(s&&s instanceof HTMLElement)return s}return null}function zv(t,e,i,a,s=null){if(t.key!=="Tab"||!e||!i)return!1;if(t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),a(!1),typeof document>"u")return!0;let l=i;if(!(l instanceof HTMLElement)||!document.contains(l))if(s&&s instanceof HTMLElement)l=s;else return!0;return l&&l instanceof HTMLElement&&l.focus(),!0}function Vv(t,e,i,a,s){return t.key!=="Tab"||!e||i==null?!1:(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),a(!1),s&&s(i),!0)}function Yv(t){const{getShouldResume:e,getLastBlurredElement:i,setShouldResume:a,getFallbackElement:s}=t;return function(f){const h=e(),v=i(),m=s?s():null;return zv(f,h,v,a,m)}}function Wv(t){const{getShouldResume:e,getLastDraggedId:i,setShouldResume:a,focusFunction:s}=t;return function(f){const h=e(),v=i();return Vv(f,h,v,a,s)}}function qv(t,e,i,a){const{getKeyboardListDrag:s,getLastKeyboardDraggedListId:l,getShouldRefocusListOnNextTab:f,setShouldRefocusListOnNextTab:h}=t;function v(m){const E=m.key,_=s(),w=_.active===!0,x=_.listId;if(l(),f(),!(!w&&Wv({getShouldResume:f,getLastDraggedId:l,setShouldResume:h,focusFunction:bc})(m))&&!(!w||x==null)){if(E==="ArrowUp"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"up");return}if(E==="ArrowDown"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"down");return}if(E==="ArrowLeft"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"left");return}if(E==="ArrowRight"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"right");return}if(E==="Escape"||E==="Enter"||E===" "){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),i(),a();return}if(E==="Tab"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),i(),a();return}}}return document.addEventListener("keydown",v,!0),()=>{document.removeEventListener("keydown",v,!0)}}function Gv(t){return t===""}function Xv(t){return t.trim()===""&&t.length>0}function _c(t){const e=t.trim(),i=Xv(t);return{text:i?"":e,isBlank:i}}function wc(t,e,i={}){const{ignoreElements:a=[],shouldClose:s=()=>!0,checkIgnoreClick:l=null}=i;function f(v){const m=typeof t=="function"?t():t;if(m&&!m.contains(v.target)&&!(l&&l(v))){for(const E of a){let _=null;if(typeof E=="function"?_=E():_=E,_&&_.contains(v.target))return}s()&&e()}}const h=setTimeout(()=>{document.addEventListener("click",f)},0);return()=>{clearTimeout(h),document.removeEventListener("click",f)}}function Qv(t){const{getColumnIndex:e,setColumnIndex:i,getInput:a,setInput:s,getInputElement:l}=t;function f(x){i(x)}function h(x,D){if(x.key==="Enter"||x.key===" ")x.preventDefault(),x.stopPropagation(),f(D);else if(x.key==="Escape"){x.preventDefault(),x.stopPropagation(),x.stopImmediatePropagation();const P=x.currentTarget;P&&P instanceof HTMLElement&&P.blur()}}function v(x,D,P){if(x.key==="Escape"){const C=a()||"";if(P){i(null),s("");return}if(C.trim().length>0){m(D,!0);return}i(null),s("")}}async function m(x,D=!1){const P=a()||"";if(P===""||P.trim()===""){i(null),s("");return}const{text:C}=_c(P);try{if(await yv(C||null,x),s(""),D)i(null);else{await at();const T=l();T&&setTimeout(()=>{T.focus()},0)}}catch(T){console.error("Error creating list:",T)}}async function E(x){await m(x,!0)}function _(){if(e()!==null)return wc(l(),()=>{e()!==null&&(i(null),s(""))},{ignoreElements:[],shouldClose:()=>!a()||a().trim()===""})}function w(){const x=e(),D=l();if(x===null||!D)return;const P=setTimeout(()=>{D?.focus()},0);return()=>{clearTimeout(P)}}return{handleCreateListClick:f,handleCreateListKeydown:h,handleCreateListInputEscape:v,handleCreateList:m,handleCreateListOnTab:E,setupClickOutsideEffect:_,setupFocusEffect:w}}class Zv{constructor(){this.state=new Map,this.globalDragActive=!1,this.listeners=new Map}subscribe(e,i){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(i);const a=this.getState(e);return i(a),()=>{const s=this.listeners.get(e);s&&(s.delete(i),s.size===0&&this.listeners.delete(e))}}getState(e){const i=this.state.get(e);return i?{tasks:[...i.tasks],isDragActive:i.isDragActive||!1,version:i.version||0}:{tasks:[],isDragActive:!1,version:0}}initializeFromQuery(e,i){if(this.globalDragActive||!Array.isArray(i))return;const a=i.filter(l=>l.status==="unchecked"||l.status==="checked");this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(e);if(!s.isDragActive){const l=a.map(h=>`${h.id}:${h.status}:${h.text||""}`).join(","),f=s.tasks.map(h=>`${h.id}:${h.status}:${h.text||""}`).join(",");l!==f&&(s.tasks=a.map(h=>({...h})),s.version++,this.notify(e))}}startDrag(e,i){this.globalDragActive=!0,[e,i].forEach(a=>{this.state.has(a)||this.state.set(a,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(a);s.isDragActive=!0,s.pendingUpdates=null,s.version++,this.notify(a)})}updateDragState(e,i){if(!this.globalDragActive){console.warn("[TASK DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[TASK DRAG STATE] updateDragState called with invalid tasks");return}this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const a=this.state.get(e);[...a.tasks],a.pendingUpdates={tasks:i.map(s=>({...s})),timestamp:Date.now()},a.pendingUpdates&&(a.tasks=[...a.pendingUpdates.tasks],a.pendingUpdates=null),a.version++,this.notify(e)}completeDrag(e,i,a=!0){this.globalDragActive=!1,[e,i].forEach(s=>{const l=this.state.get(s);l&&(l.pendingUpdates=null,l.isDragActive=!1,l.version++,this.notify(s))})}notify(e){const i=this.getState(e),a=this.listeners.get(e);a&&a.forEach(s=>{try{s(i)}catch(l){console.error("[TASK DRAG STATE] Error in state change listener:",l)}})}isDragActive(){return this.globalDragActive}isDragActiveForList(e){const i=this.state.get(e);return i?i.isDragActive:!1}}const Ie=new Zv;function Jv(t){return Array.isArray(t)?t.filter(e=>e&&typeof e.id=="number"):[]}function ro(t,e,i){if(!Array.isArray(e)||e.length===0)return null;const a=e.find(_=>_.id===t);if(!a)return null;const s=a.columnIndex??0;a.order;const l=5,f=Array(l).fill(null).map(()=>[]);for(const _ of e){const w=_.columnIndex??0,x=w>=l?l-1:w;f[x].push(_)}for(let _=0;_<f.length;_++)f[_].sort((w,x)=>(w.order??0)-(x.order??0));const h=f[s],v=h.findIndex(_=>_.id===t);if(v===-1)return null;const m=v===h.length-1,E=v===0;if(i==="next"){if(!m)return h[v+1].id;for(let _=s+1;_<l;_++){const w=f[_];if(w.length>0)return w[0].id}return null}if(i==="prev"){if(!E)return h[v-1].id;for(let _=s-1;_>=0;_--){const w=f[_];if(w.length>0)return w[w.length-1].id}return null}return null}async function Ec(t,e){try{const i=await Ir(e),a=[{id:t},...i];await ti(e,a)}catch(i){throw console.error("Error moving task to next list:",i),i}}async function Is(t,e){try{const a=[...await Ir(e),{id:t}];await ti(e,a)}catch(i){throw console.error("Error moving task to previous list:",i),i}}function $v(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(e=>{e instanceof HTMLElement&&li(e)})}function ep(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(e=>{e instanceof HTMLElement&&yc(e)})}function tp(t){const{onDragStart:e,onDragEnd:i,setDragJustEnded:a}=t||{};return{onStart:s=>{typeof document<"u"&&document.body.classList.add("task-dragging-active"),a&&a(!1);const l=s.item;l&&l instanceof HTMLElement&&document.querySelectorAll("ul[data-list-id]").forEach(h=>{Array.from(h.children).forEach(m=>{m!==l&&m.classList.contains("sortable-ghost-task")&&m.classList.remove("sortable-ghost-task")})}),$v(),e&&e(s)},onMove:s=>{s.to&&s.to instanceof HTMLElement&&li(s.to),s.from&&s.from instanceof HTMLElement&&li(s.from)},onEnd:s=>{typeof document<"u"&&document.body.classList.remove("task-dragging-active"),ep(),a&&(a(!0),setTimeout(()=>{a(!1)},100)),i&&i(s)}}}function np(t){const e=tp(t);return{animation:150,ghostClass:"sortable-ghost-task",group:"tasks",draggable:"li[data-id]",filter:"[data-no-drag]",preventOnFilter:!1,emptyInsertThreshold:50,swapThreshold:.65,onStart:e.onStart,onMove:e.onMove,onEnd:e.onEnd}}function rp(){return typeof document>"u"?!1:document.querySelectorAll('.sortable-ghost, [aria-grabbed="true"]').length>0}function xc(t){if(!t||!(t instanceof HTMLElement))return!1;const e=window.getComputedStyle(t);return e.boxShadow&&e.boxShadow!=="none"&&e.boxShadow.includes("inset")}function ip(){if(typeof document>"u")return[];const t=document.querySelectorAll("ul"),e=[];for(const i of t)i instanceof HTMLElement&&xc(i)&&e.push(i);return e}function kc(){return rp()||ip().length>0}function ap(t,e){const{getIsKeyboardTaskDragging:i,setIsKeyboardTaskDragging:a,setLastKeyboardDraggedTaskId:s,setLastBlurredTaskElement:l,setShouldRefocusTaskOnNextTab:f}=t;return function(v,m){const E=v.key,_=v.currentTarget,w=v.target;if(!(!(_ instanceof HTMLElement)||_!==w)){if(E==="Enter"||E===" ")if(!i())a(!0),s(m);else{a(!1),s(m),l(_),f(!0);const D=e();if(D){const P=D.getAttribute("data-list-id");if(P){const C=parseInt(P);Ie.globalDragActive&&Ie.completeDrag(C,C,!0)}}}else if(E==="Escape"){const x=i(),D=e(),P=kc()||D&&xc(D);if(x||P){a(!1),s(m),l(_),f(!0);const C=e();if(C){const T=C.getAttribute("data-list-id");if(T){const z=parseInt(T);Ie.globalDragActive&&Ie.completeDrag(z,z,!1)}}v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),_ instanceof HTMLElement&&_.blur()}else v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),l(_),f(!0),_ instanceof HTMLElement&&_.blur()}}}}function op(t){const{getIsKeyboardTaskDragging:e,getLastKeyboardDraggedTaskId:i,setLastBlurredTaskElement:a,setShouldRefocusTaskOnNextTab:s}=t;return function(f,h){const v=f.currentTarget,m=e(),E=i();m&&E===h&&(a(v),s(!0))}}function sp(t,e,i,a,s,l,f){const{getIsKeyboardTaskDragging:h,getLastBlurredTaskElement:v,getShouldRefocusTaskOnNextTab:m,setIsKeyboardTaskDragging:E,setLastKeyboardDraggedTaskId:_,setLastBlurredTaskElement:w,setShouldRefocusTaskOnNextTab:x}=t;let D=!1;async function P(C){const T=C.key,z=h(),U=kc();if((T==="ArrowDown"||T==="ArrowUp"||T==="ArrowLeft"||T==="ArrowRight")&&D){C.preventDefault(),C.stopPropagation();return}if(T==="Tab"){if(U||z){if(C.preventDefault(),C.stopImmediatePropagation(),C.stopPropagation(),E(!1),typeof document<"u"&&document.activeElement){const Ae=document.activeElement.closest("li[data-id]");if(Ae&&Ae instanceof HTMLElement){const $e=Ae.getAttribute("data-id");if($e){const qe=parseInt($e);_(qe),w(Ae),x(!0)}const Ke=Ae.closest("ul[data-list-id]");if(Ke){const qe=Ke.getAttribute("data-list-id");if(qe){const Y=parseInt(qe);Ie.globalDragActive&&Ie.completeDrag(Y,Y,!0)}}}}return}if(Yv({getShouldResume:m,getLastBlurredElement:v,setShouldResume:x,getFallbackElement:()=>{if(f){const Re=f.querySelector('span[role="button"]');if(Re&&Re instanceof HTMLElement)return Re}return null}})(C))return}if(!z||T!=="ArrowDown"&&T!=="ArrowUp"&&T!=="ArrowLeft"&&T!=="ArrowRight")return;const B=document.activeElement;if(!B)return;const G=B.closest("li[data-id]");if(!G)return;const te=G.getAttribute("data-id");if(!te)return;const q=parseInt(te),N=G.closest("ul[data-list-id]");if(!N)return;const Z=N.getAttribute("data-list-id");if(!Z)return;const W=parseInt(Z),ve=Ie.getState(W).tasks,pe=ve.find(ie=>ie.id===q);if(!pe)return;const Le=ve.findIndex(ie=>ie.id===q);if(Le===-1)return;const Xe=Le===0,rt=Le===ve.length-1;C.preventDefault(),C.stopImmediatePropagation(),C.stopPropagation(),D=!0;try{if(T==="ArrowDown")if(rt){const ie=ro(W,a,"next");if(ie!=null){Ie.globalDragActive||Ie.startDrag(W,ie);const Re=ve.find(ce=>ce.id===q);if(!Re)return;const Ae=ve.filter(ce=>ce.id!==q);Ie.updateDragState(W,Ae);let $e=Ie.getState(ie),Ke=$e?.tasks||[];if(Ke.length===0&&$e.version===0&&!Ie.state.has(ie)){const De=(await Ir(ie)).filter(ye=>ye.status==="unchecked"||ye.status==="checked");Ie.initializeFromQuery(ie,De),$e=Ie.getState(ie),Ke=$e?.tasks||[]}const Y=[{...Re,listId:ie},...Ke];Ie.updateDragState(ie,Y),await Ec(q,ie),await at();const Q=document.querySelector(`li[data-id="${q}"]`);Q instanceof HTMLElement&&Q.focus()}}else{const ie=[...ve],[Re]=ie.splice(Le,1);ie.splice(Le+1,0,Re),Ie.globalDragActive||Ie.startDrag(W,W),Ie.updateDragState(W,ie),await ti(W,ie),await at();let Ae=e?.querySelector(`li[data-id="${q}"]`);if(Ae||(Ae=document.querySelector(`li[data-id="${q}"]`)),Ae instanceof HTMLElement&&(Ae.focus(),await at(),await new Promise(Ke=>setTimeout(Ke,50)),document.activeElement!==Ae)){const Ke=document.querySelector(`li[data-id="${q}"]`);Ke instanceof HTMLElement&&Ke.focus()}}else if(T==="ArrowUp")if(Xe){const ie=ro(W,a,"prev");if(ie!=null){const Re=a.find(Ke=>Ke.id===W),Ae=a.find(Ke=>Ke.id===ie);if(Re&&Ae&&(Re.columnIndex??0)!==(Ae.columnIndex??0)){Ie.globalDragActive||Ie.startDrag(W,ie);const Ke=ve.find(Ze=>Ze.id===q);if(!Ke)return;const qe=ve.filter(Ze=>Ze.id!==q);Ie.updateDragState(W,qe);let Y=Ie.getState(ie),Q=Y?.tasks||[];if(Q.length===0&&Y.version===0&&!Ie.state.has(ie)){const wt=(await Ir(ie)).filter(Je=>Je.status==="unchecked"||Je.status==="checked");Ie.initializeFromQuery(ie,wt),Y=Ie.getState(ie),Q=Y?.tasks||[]}const ce={...Ke,listId:ie},De=[...Q,ce];Ie.updateDragState(ie,De),await Is(q,ie),await at();const ye=document.querySelector(`li[data-id="${q}"]`);ye instanceof HTMLElement&&ye.focus()}else{Ie.globalDragActive||Ie.startDrag(W,ie);const Ke=ve.find(Ze=>Ze.id===q);if(!Ke)return;const qe=ve.filter(Ze=>Ze.id!==q);Ie.updateDragState(W,qe);let Y=Ie.getState(ie),Q=Y?.tasks||[];if(Q.length===0&&Y.version===0&&!Ie.state.has(ie)){const wt=(await Ir(ie)).filter(Je=>Je.status==="unchecked"||Je.status==="checked");Ie.initializeFromQuery(ie,wt),Y=Ie.getState(ie),Q=Y?.tasks||[]}const ce={...Ke,listId:ie},De=[...Q,ce];Ie.updateDragState(ie,De),await Is(q,ie),await at();const ye=document.querySelector(`li[data-id="${q}"]`);ye instanceof HTMLElement&&ye.focus()}}else return}else{const ie=[...ve],[Re]=ie.splice(Le,1);ie.splice(Le-1,0,Re),Ie.globalDragActive||Ie.startDrag(W,W),Ie.updateDragState(W,ie),await ti(W,ie),await at();let Ae=e?.querySelector(`li[data-id="${q}"]`);Ae||(Ae=document.querySelector(`li[data-id="${q}"]`)),Ae instanceof HTMLElement&&Ae.focus()}else if(T==="ArrowLeft"||T==="ArrowRight"){const ie=a.find(Y=>Y.id===i);if(!ie)return;const Re=ie.columnIndex??0,Ae=T==="ArrowLeft"?Re-1:Re+1;if(Ae<0||Ae>=5)return;const Ke=gc(a,5)[Ae]||[];let qe=null;if(Ke.length>0){const Y=Math.min(Le,Ke.length-1);qe=Ke[Y]?.id}if(qe!=null){const Y=await Ir(qe),Q=Math.min(Le,Y.length),ce=[...Y];ce.splice(Q,0,pe),await ti(qe,ce)}}}finally{D=!1}}return document.addEventListener("keydown",P,!0),()=>{document.removeEventListener("keydown",P,!0)}}function Tc(t){const{containerElement:e,keyMatches:i,targetMatches:a,onMatch:s}=t;if(!e)return()=>{};function l(f){const h=f.target;i(f.key)&&h instanceof HTMLElement&&a(h,e)&&(f.preventDefault(),f.stopImmediatePropagation(),s&&s(f,h))}return e.addEventListener("keydown",l,!0),()=>{e&&e.removeEventListener("keydown",l,!0)}}function up(t,e){return Tc({containerElement:t,keyMatches:i=>i==="Enter"||i===" ",targetMatches:(i,a)=>{if(i.tagName==="H2"&&i.hasAttribute("role")&&i.getAttribute("role")==="button"){const s=a?.querySelector('h2[role="button"]');return s&&i===s}return!1},onMatch:(i,a)=>{e.openModal(a)}})}function lp(t,e){return Tc({containerElement:t,keyMatches:i=>i==="Enter"||i===" ",targetMatches:(i,a)=>{if(i.hasAttribute("role")&&i.getAttribute("role")==="button"){const s=a?.querySelector('span[role="button"]');return s&&i===s}return!1},onMatch:(i,a)=>{e()}})}function cp(t,e,i,a,s){if(!t)return()=>{};const{onTaskTextEdit:l}=s;async function f(h){const v=h.target;if((h.key==="Enter"||h.key===" ")&&v instanceof HTMLElement&&v.hasAttribute("data-no-drag")){h.preventDefault(),h.stopImmediatePropagation();const m=v.closest("li[data-id]");if(m){const E=parseInt(m.getAttribute("data-id")),_=e.find(w=>w.id===E);_&&l&&l(E,_.text,v)}return}if(h.key==="ArrowDown"||h.key==="ArrowUp"){const m=document.activeElement;if(!m)return;const E=m.closest("li[data-id]");if(!E||!t.contains(E))return;const _=E.getAttribute("data-id");if(!_)return;const w=parseInt(_);if(!e.find(T=>T.id===w))return;const D=e.findIndex(T=>T.id===w),P=D===0,C=D===e.length-1;if(h.key==="ArrowDown"&&C){h.preventDefault(),h.stopImmediatePropagation();const T=ro(i,a,"next");T!=null&&await Ec(w,T)}else if(h.key==="ArrowUp"&&P){h.preventDefault(),h.stopImmediatePropagation();const T=ro(i,a,"prev");T!=null&&await Is(w,T)}}}return t.addEventListener("keydown",f,!0),()=>{t.removeEventListener("keydown",f,!0)}}var fp=Me("<button><!></button>");function Dn(t,e){let i=Nt(e,"variant",3,"primary"),a=Nt(e,"size",3,"medium"),s=Nt(e,"disabled",3,!1),l=Nt(e,"type",3,"button"),f=Rh(e,["$$slots","$$events","$$legacy","variant","size","disabled","type","onclick","ariaLabel"]);const h="focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed",v={primary:"bg-grey-80 text-grey-110 hover:bg-grey-90 focus:bg-grey-90 disabled:bg-grey-50 disabled:text-grey-100",secondary:"bg-white text-grey-110 hover:bg-grey-20 focus:bg-grey-30 disabled:bg-white disabled:text-grey-60"},m={small:"px-2 py-1 text-sm",medium:"px-4 py-2",large:"px-6 py-3"},E=`${h} ${v[i()]} ${m[a()]}`;var _=fp();Lh(_,()=>({type:l(),disabled:s(),onclick:e.onclick,ariaLabel:e.ariaLabel,class:E,...f}));var w=Se(_);wh(w,e,"default",{}),fe(t,_)}var dp=Me('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),hp=Me('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><!> <!></div></div></div></div>');function vp(t,e){hr(e,!0);let i=we(an(e.taskText||"")),a=we(!1),s=we(null),l=we(null),f=yt(()=>()=>{if(!e.taskPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const P=24,C=24,T=no,U=P+C+T+8-8,B=10,G=e.taskPosition.top-U,te=e.taskPosition.left-no+B,q=e.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${G}px; left: ${te}px; width: ${q}px;`});Qe(()=>{e.isOpen&&(K(i,e.taskText||"",!0),K(a,!1))}),Qe(()=>{e.isOpen&&y(s)&&setTimeout(()=>{y(s)?.focus(),y(s)?.select(),y(s)instanceof HTMLTextAreaElement&&(y(s).style.height="auto",y(s).style.height=`${Math.min(y(s).scrollHeight,to)}px`)},0)}),Qe(()=>{if(y(s)&&y(s)instanceof HTMLTextAreaElement){const P=()=>{y(s).style.height="auto",y(s).style.height=`${Math.min(y(s).scrollHeight,to)}px`};return y(s).addEventListener("input",P),()=>{y(s).removeEventListener("input",P)}}});function h(){const P=y(i)??"",C=P.trim();if(C===""&&P.length>0){e.onSave(e.taskId,""),K(a,!1);return}if(P===""||C===""){K(a,!0);return}e.onSave(e.taskId,C),K(a,!1)}function v(){K(i,e.taskText||"",!0),K(a,!1),e.onCancel()}function m(P){P.target===P.currentTarget&&v()}function E(P){if(P.key==="Tab"){if(!y(l))return;const C=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),T=Array.from(y(l).querySelectorAll(C)).filter(te=>!(!(te instanceof HTMLElement)||te.hasAttribute("disabled")||te.getAttribute("aria-hidden")==="true"));if(T.length===0)return;const z=document.activeElement,U=T.indexOf(z);let B;P.shiftKey?U<=0?B=T.length-1:B=U-1:U===-1||U===T.length-1?B=0:B=U+1,P.preventDefault(),P.stopPropagation();const G=T[B];G&&G instanceof HTMLElement&&G.focus()}else P.key==="Escape"?v():P.key==="Enter"&&!P.shiftKey&&document.activeElement===y(s)&&(P.preventDefault(),h())}function _(){e.onArchive&&e.onArchive(e.taskId)}var w=lr(),x=Ft(w);{var D=P=>{var C=hp();C.__click=m,C.__keydown=E;var T=Se(C);T.__click=W=>W.stopPropagation();var z=Ye(Se(T),2),U=Se(z);U.__keydown=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),W.stopPropagation(),h())},Bt(U,W=>K(s,W),()=>y(s));var B=Ye(U,2);{var G=W=>{var ge=dp();fe(W,ge)};ct(B,W=>{y(a)&&W(G)})}var te=Ye(z,2),q=Se(te);q.__click=_;var N=Ye(q,2),Z=Se(N);Dn(Z,{variant:"secondary",onclick:v,"aria-label":"Cancel editing and discard changes",children:(W,ge)=>{var ve=In("Cancel");fe(W,ve)},$$slots:{default:!0}});var ae=Ye(Z,2);{let W=yt(()=>y(a)?"Save disabled: task cannot be empty":"Save task changes");Dn(ae,{variant:"primary",onclick:h,get disabled(){return y(a)},get"aria-label"(){return y(W)},children:(ge,ve)=>{var pe=In("Save");fe(ge,pe)},$$slots:{default:!0}})}Bt(T,W=>K(l,W),()=>y(l)),St(W=>{dr(T,W),dr(U,`width: ${Rv}px;`),Tt(U,"aria-describedby",y(a)?"validation-message":void 0)},[()=>y(f)()]),Ya(U,()=>y(i),W=>K(i,W)),fe(P,C)};ct(x,P=>{e.isOpen&&P(D)})}fe(t,w),vr()}di(["click","keydown"]);var pp=Me('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),mp=Me('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-2 py-2 border border-grey-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border font-gilda text-[24px] text-grey-110 svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box; padding-left: 7px; padding-right: 7px; padding-top: 7px; padding-bottom: 7px;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><!> <div class="flex justify-end gap-3"><!> <!></div></div>',1),gp=Me('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-grey-100">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><!> <!></div>',1),yp=Me('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-grey-10 text-grey-110 p-6 rounded-xl shadow-2xl border-2 border-grey-50 fixed box-border" role="document"><!></div></div>');function bp(t,e){hr(e,!0);let i=we(an(e.listName||"")),a=we(!1),s=we(null),l=we(null),f=we("edit"),h=we(null),v=yt(()=>()=>{if(!e.listPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const N=24,Z=24,ae=no,ve=N+Z+ae+1+7-8,pe=e.listPosition.top-ve,Le=e.listPosition.left-no,Xe=Math.max(e.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${pe}px; left: ${Le}px; width: ${Xe}px; max-width: ${Xe}px; box-sizing: border-box;`});Qe(()=>{e.isOpen&&(K(i,e.listName||"",!0),K(a,!1),K(f,"edit"))}),Qe(()=>{e.isOpen&&y(s)&&setTimeout(()=>{y(s)?.focus(),y(s)?.select()},0)});function m(){const Z=(y(i)??"").trim();if(Z===""){K(a,!0);return}e.onSave(e.listId,Z),K(a,!1)}function E(){K(i,e.listName||"",!0),K(a,!1),e.onCancel()}function _(N){N.target===N.currentTarget&&(N.preventDefault(),N.stopPropagation(),E())}function w(N){N.target===N.currentTarget?K(h,N.target,!0):K(h,null),N.stopPropagation(),N.preventDefault()}function x(N){N.target===N.currentTarget&&y(h)===N.currentTarget&&(N.preventDefault(),N.stopPropagation(),E()),K(h,null),N.stopPropagation()}function D(N){N.stopPropagation(),N.preventDefault()}function P(N){return N.preventDefault(),N.stopPropagation(),!1}function C(N){return N.preventDefault(),N.stopPropagation(),!1}function T(N){if(N.key==="Tab"){if(!y(l))return;const Z=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),ae=Array.from(y(l).querySelectorAll(Z)).filter(Le=>!(!(Le instanceof HTMLElement)||Le.hasAttribute("disabled")||Le.getAttribute("aria-hidden")==="true"));if(ae.length===0)return;const W=document.activeElement,ge=ae.indexOf(W);let ve;N.shiftKey?ge<=0?ve=ae.length-1:ve=ge-1:ge===-1||ge===ae.length-1?ve=0:ve=ge+1,N.preventDefault(),N.stopPropagation();const pe=ae[ve];pe&&pe instanceof HTMLElement&&pe.focus()}else N.key==="Escape"?y(f)==="confirm-archive"?B():E():N.key==="Enter"&&!N.shiftKey&&y(f)==="edit"&&N.target===y(s)&&(N.preventDefault(),m())}function z(){K(f,"confirm-archive")}function U(){e.onArchive(e.listId),E()}function B(){K(f,"edit")}var G=lr(),te=Ft(G);{var q=N=>{var Z=yp();Z.__click=_,Z.__mousedown=w,Z.__mouseup=x,Z.__mousemove=D,Z.__keydown=T;var ae=Se(Z);ae.__click=pe=>pe.stopPropagation(),ae.__mousedown=pe=>pe.stopPropagation(),ae.__mouseup=pe=>pe.stopPropagation();var W=Se(ae);{var ge=pe=>{var Le=mp(),Xe=Ye(Ft(Le),2),rt=Se(Xe);Bt(rt,Q=>K(s,Q),()=>y(s));var ie=Ye(rt,2);{var Re=Q=>{var ce=pp();fe(Q,ce)};ct(ie,Q=>{y(a)&&Q(Re)})}var Ae=Ye(Xe,2),$e=Se(Ae);Dn($e,{variant:"secondary",onclick:z,"aria-label":"Archive this list",children:(Q,ce)=>{var De=In("Archive");fe(Q,De)},$$slots:{default:!0}});var Ke=Ye($e,2),qe=Se(Ke);Dn(qe,{variant:"secondary",onclick:E,"aria-label":"Cancel editing and discard changes",children:(Q,ce)=>{var De=In("Cancel");fe(Q,De)},$$slots:{default:!0}});var Y=Ye(qe,2);{let Q=yt(()=>y(a)?"Save disabled: list name cannot be empty":"Save list name changes");Dn(Y,{variant:"primary",onclick:m,get disabled(){return y(a)},get"aria-label"(){return y(Q)},children:(ce,De)=>{var ye=In("Save");fe(ce,ye)},$$slots:{default:!0}})}St(()=>Tt(rt,"aria-describedby",y(a)?"validation-message":void 0)),Ya(rt,()=>y(i),Q=>K(i,Q)),fe(pe,Le)},ve=pe=>{var Le=lr(),Xe=Ft(Le);{var rt=ie=>{var Re=gp(),Ae=Ye(Ft(Re),4),$e=Se(Ae);Dn($e,{variant:"secondary",onclick:B,"aria-label":"Cancel archiving",children:(qe,Y)=>{var Q=In("Cancel");fe(qe,Q)},$$slots:{default:!0}});var Ke=Ye($e,2);Dn(Ke,{variant:"primary",onclick:U,"aria-label":"Confirm archive list",children:(qe,Y)=>{var Q=In("Archive");fe(qe,Q)},$$slots:{default:!0}}),fe(ie,Re)};ct(Xe,ie=>{y(f)==="confirm-archive"&&ie(rt)},!0)}fe(pe,Le)};ct(W,pe=>{y(f)==="edit"?pe(ge):pe(ve,!1)})}Bt(ae,pe=>K(l,pe),()=>y(l)),St(pe=>dr(ae,pe),[()=>y(v)()]),$r("dragstart",Z,P),$r("drag",Z,C),$r("dragend",Z,C),fe(N,Z)};ct(te,N=>{e.isOpen&&N(q)})}fe(t,G),vr()}di(["click","mousedown","mouseup","mousemove","keydown"]);var _p=Me('<input type="checkbox" disabled class="cursor-pointer" aria-hidden="true" tabindex="-1"/> <textarea class="flex-1 break-words resize-none max-h-[10rem] overflow-y-auto text-body font-urbanist text-grey-100 placeholder:italic" rows="1" style="height: 24px;"></textarea>',1),wp=Me('<input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-60" role="button" tabindex="0"> </span>',1),Ep=Me('<div class="flex items-center gap-2 py-1 border-b border-grey-50 hover:bg-grey-20 w-full print:hidden add-task-container add-task-button svelte-jtbpvm"><!></div>');function hs(t,e){hr(e,!0);let i=Nt(e,"isInputActive",11,!1),a=Nt(e,"inputValue",3,""),s=Nt(e,"buttonText",3,"Add Task"),l=Nt(e,"placeholder",3,"start typing..."),f=Nt(e,"marginLeft",3,!1),h=Nt(e,"containerElement",15,null),v=Nt(e,"textareaElement",15,null),m=we(null),E=we(null);Qe(()=>{h(y(E)),v(y(m))}),Qe(()=>{i()&&y(m)?setTimeout(()=>{if(y(m)?.focus(),y(m)instanceof HTMLTextAreaElement){y(m).style.height="auto";const T=y(m).scrollHeight;y(m).style.height=`${Math.max(24,Math.min(T,to))}px`}},0):!i()&&y(m)&&y(m)instanceof HTMLTextAreaElement&&(y(m).style.height="24px")}),Qe(()=>{if(y(m)&&y(m)instanceof HTMLTextAreaElement){const T=()=>{y(m).style.height="auto";const z=y(m).scrollHeight;y(m).style.height=`${Math.max(24,Math.min(z,to))}px`};return y(m).addEventListener("input",T),()=>{y(m).removeEventListener("input",T)}}});function _(T){T.key==="Enter"&&!T.shiftKey?(T.preventDefault(),e.onSave?.()):T.key==="Escape"?(T.preventDefault(),e.onEscape?.(T,a())):T.key==="Tab"&&e.onSave?.({closeAfterSave:!0})}function w(T){if(T.key==="Enter"||T.key===" ")T.preventDefault(),e.onActivate?.();else if(T.key==="Escape"){T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation();const z=T.currentTarget;z&&z instanceof HTMLElement&&z.blur()}}var x=Ep(),D=Se(x);{var P=T=>{var z=_p(),U=Ye(Ft(z),2);U.__input=B=>e.onInputChange?.(B.currentTarget.value),U.__keydown=_,Bt(U,B=>K(m,B),()=>y(m)),St(()=>{Tt(U,"placeholder",l()),Ah(U,a())}),fe(T,z)},C=T=>{var z=wp(),U=Ye(Ft(z),2);U.__click=function(...G){e.onActivate?.apply(this,G)},U.__keydown=w;var B=Se(U);St(()=>{Tt(U,"aria-label",e.ariaLabel||s()),Ar(B,s())}),fe(T,z)};ct(D,T=>{i()?T(P):T(C,!1)})}Bt(x,T=>K(E,T),()=>y(E)),St(()=>dr(x,f()?"margin-left: 1.5rem;":"")),fe(t,x),vr()}di(["input","keydown","click"]);function ol(){let t=we(!1),e=we(null),i=we(null);function a(v){if(v&&v instanceof HTMLElement){const m=v.getBoundingClientRect();K(e,{top:m.top,left:m.left,width:m.width,height:m.height},!0),K(i,v,!0)}K(t,!0)}function s(){const v=y(i);K(t,!1),K(e,null),K(i,null),v&&v instanceof HTMLElement&&setTimeout(()=>{v.focus()},0)}function l(){K(t,!1),K(e,null),K(i,null)}function f(v){const m=v?.currentTarget||v?.target;a(m)}function h(v,m={}){const E=v.key;if(E==="Enter"||E===" "){v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation();const _=v.currentTarget;_&&a(_)}else if(E==="Escape")if(v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),m.onEscape)m.onEscape(v);else{const _=v.currentTarget;_&&_ instanceof HTMLElement&&_.blur()}}return{get isOpen(){return y(t)},get position(){return y(e)},get element(){return y(i)},openModal:a,closeModal:s,closeModalWithoutFocus:l,handleClick:f,handleKeydown:h}}var xp=Me('<li tabindex="0" role="listitem" class="flex items-center gap-2 py-1 border-b border-grey-50 cursor-move hover:bg-grey-20 w-full m-0 list-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"><input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false"> </span> <!></li>'),kp=Me('<div class="-mt-6"><!></div>'),Tp=Me('<div class="task-list-wrapper m-0 p-0"><ul></ul> <!></div>'),Sp=Me("<p>Loading tasks...</p> <!>",1),Ap=Me('<div class="flex flex-col w-full"><div class="border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border"><div class="flex items-center transition-colors hover:bg-grey-20 hover:rounded py-1"><h2 role="button" tabindex="0" class="list-title cursor-pointer m-0 px-2 py-2 leading-none text-grey-110 font-gilda text-[24px] rounded -my-1 transition-colors flex-1 min-w-0 focus:outline-none"> </h2></div></div> <!></div> <!> <!>',1);function Ip(t,e){hr(e,!0);const i=()=>Wa(y(h),"$tasksQuery",a),[a,s]=Ys();let l=Nt(e,"allLists",19,()=>[]),f=Nt(e,"stableLists",19,()=>[]),h=we(null),v=we(an([])),m=we(!1);const E=ol(),_=ol();let w=we(null),x=we(""),D=we(null),P=we(null),C=we(null),T=we(null),z=we(null),U=we(null),B=we(!1),G=we(!1),te=we(null),q=we(null),N=we(null),Z=we(!1);function ae($,me=null){if(!$)return[];const _e=Array.from($.children),Fe=me||e.listId,Zt=Ie.getState(Fe).tasks,tt=e.listId!==Fe?Ie.getState(e.listId):null,ke=tt?tt.tasks:[];return _e.map(It=>{const it=It.getAttribute("data-id");if(!it)return null;const Dt=parseInt(it,10);let Jt=Zt.find(cn=>cn.id===Dt);return!Jt&&ke.length>0&&(Jt=ke.find(cn=>cn.id===Dt)),Jt||(Jt=y(v).find(cn=>cn.id===Dt)),Jt||{id:Dt}}).filter(Boolean)}async function W($){const{oldIndex:me,newIndex:_e,from:Fe,to:ot}=$,Zt=e.listId,tt=ot?.dataset?.listId?parseInt(ot.dataset.listId):e.listId;await at();const ke=ot||y(D),It=ae(ke,tt),it=Jv(It);if(it.length!==0){if(Ie.startDrag(Zt,tt),Ie.updateDragState(tt,it),Zt!==tt){const Jt=Ie.getState(Zt).tasks.filter(cn=>!it.some(Nr=>Nr.id===cn.id));Ie.updateDragState(Zt,Jt)}await at();try{await ti(tt,it),Ie.completeDrag(Zt,tt,!0)}catch(Dt){console.error("[TASK DRAG] Failed to save task order:",Dt),Ie.completeDrag(Zt,tt,!1)}}}function ge(){if(!y(D)||y(N))return;const $=np({onDragEnd:W,setDragJustEnded:me=>{K(Z,me,!0)}});K(N,new xe(y(D),$),!0)}Qe(()=>{if(y(N)&&y(q)!==null&&y(q)!==e.listId&&(y(N).destroy(),K(N,null)),y(D)&&!y(N)){const $=setTimeout(()=>{!y(N)&&y(D)&&ge()},10);return()=>{clearTimeout($)}}}),tc(()=>{y(N)&&(y(N).destroy(),K(N,null))}),Qe(()=>{f().some(me=>me.id===e.listId)&&e.listId?(!y(h)||y(q)!==e.listId)&&(y(q)!==e.listId&&K(v,[],!0),qa(K(h,Xa(()=>Ir(e.listId)),!0),"$tasksQuery",a),K(q,e.listId,!0)):(qa(K(h,null),"$tasksQuery",a),K(q,null),K(v,[],!0))}),Qe(()=>{if(!e.listId)return;const $=Ie.subscribe(e.listId,me=>{const _e=me.tasks.map(ot=>`${ot.id}:${ot.status}:${ot.text||""}`).join(","),Fe=y(v).map(ot=>`${ot.id}:${ot.status}:${ot.text||""}`).join(",");_e!==Fe&&K(v,me.tasks,!0)});return()=>{$()}}),Qe(()=>{e.listId&&i()&&Array.isArray(i())&&Ie.initializeFromQuery(e.listId,i())});const ve=yt(()=>e.listId&&(f().some($=>$.id===e.listId)||l().some($=>$.id===e.listId)));Qe(()=>up(y(P),_)),Qe(()=>lp(y(C),rt)),Qe(()=>cp(y(D),y(v),e.listId,l(),{onTaskTextEdit:($,me,_e)=>{K(w,$,!0),K(x,me,!0),E.openModal(_e)}}));const pe={getIsKeyboardTaskDragging:()=>y(G),setIsKeyboardTaskDragging:$=>{K(G,$,!0)},getLastKeyboardDraggedTaskId:()=>y(te),setLastKeyboardDraggedTaskId:$=>{K(te,$,!0)},getLastBlurredTaskElement:()=>y(U),setLastBlurredTaskElement:$=>{K(U,$,!0)},getShouldRefocusTaskOnNextTab:()=>y(B),setShouldRefocusTaskOnNextTab:$=>{K(B,$,!0)}},Le=ap(pe,()=>y(D)),Xe=op(pe);Qe(()=>{if(y(D))return sp(pe,y(D),e.listId,l(),()=>y(v),$=>{K(v,$,!0)},y(C))});function rt(){K(m,!0)}async function ie($,me=""){if($.key==="Escape"){let _e=me||"";if(y(T)?_e=(y(T).value||"").toString():e.newTaskInput&&(_e=(e.newTaskInput||"").toString()),_e.length>0){await Re({closeAfterSave:!0});return}if(K(B,!0),y(C)){const Fe=y(C).querySelector('span[role="button"]');Fe&&Fe instanceof HTMLElement?K(U,Fe,!0):K(U,null)}else K(U,null);K(m,!1),e.onInputChange(""),await at(),await at(),await new Promise(Fe=>requestAnimationFrame(Fe)),await new Promise(Fe=>setTimeout(Fe,il))}}Qe(()=>{if(y(m))return wc(()=>y(T),()=>{y(m)&&(K(m,!1),e.onInputChange(""))},{ignoreElements:[],shouldClose:()=>y(T)&&y(T).value.trim()!==""?!1:!e.newTaskInput||e.newTaskInput.trim()===""})});async function Re($={}){const me=$&&typeof $=="object"&&$.closeAfterSave===!0;let _e=e.newTaskInput||"";if(y(T)&&(_e=(y(T).value||"").toString()),_e=(_e||"").toString(),Gv(_e)){K(m,!1),e.onInputChange(""),await at(),await at(),await new Promise(ot=>requestAnimationFrame(ot)),await new Promise(ot=>setTimeout(ot,il));return}const{text:Fe}=_c(_e);try{const ot=await Ev(e.listId,Fe),tt=(y(v).length>0?Math.max(...y(v).map(It=>It.order||0)):-1)+1,ke={id:ot,text:Fe,listId:e.listId,order:tt,status:"unchecked"};K(v,[...y(v),ke],!0),e.onInputChange(""),me&&K(m,!1)}catch(ot){console.error("Error creating task:",ot)}}async function Ae($,me){try{await nl($,me==="unchecked"?"checked":"unchecked")}catch(_e){console.error("Error updating task status:",_e)}}async function $e($){await nl($,"archived")}function Ke(){return y(D)?Uv(y(D),"li[data-id]",'span[role="button"]'):null}async function qe($=ds,me=Aa){y(P)&&await jv(()=>{if(y(C)){const _e=y(C).querySelector('span[role="button"]');if(_e&&_e instanceof HTMLElement)return _e}return null},{maxAttempts:$,retryInterval:me,waitForTick:!1})}async function Y($){try{await $e($),y(w)===$&&(K(w,null),K(x,""),E.closeModalWithoutFocus(),await at(),await new Promise(me=>setTimeout(me,al)),setTimeout(()=>{const me=(_e=0)=>{const Fe=Ke();Fe?Fe.focus():_e<ds?setTimeout(()=>me(_e+1),Aa):qe(Fv,Aa)};me()},Hv))}catch(me){console.error("Error archiving task:",me)}}function Q($,me,_e){if(y(Z))return;const Fe=_e?.currentTarget||_e?.target;K(w,$,!0),K(x,me,!0),E.openModal(Fe)}function ce($,me,_e){if(_e.key==="Enter"||_e.key===" ")K(w,$,!0),K(x,me,!0),E.handleKeydown(_e);else if(_e.key==="Escape"){_e.preventDefault(),_e.stopImmediatePropagation();const Fe=_e.currentTarget;Fe&&Fe instanceof HTMLElement&&(K(U,Fe,!0),K(B,!0),Fe.blur())}}async function De($,me){try{await xv($,me),K(w,null),K(x,""),E.closeModal()}catch(_e){console.error("Error updating task text:",_e)}}function ye(){K(w,null),K(x,""),E.closeModal()}async function Ze($){await Y($),setTimeout(()=>{if(typeof document>"u")return;const me=document.activeElement;y(P)&&(!me||!y(P).contains(me))&&qe(ds,Aa)},al)}function wt($){_.handleClick($)}function Je($){_.handleKeydown($)}async function ft($,me){try{await _v($,me),_.closeModal()}catch(_e){console.error("Error updating list name:",_e)}}function Et(){_.closeModal()}async function ze($){try{await Av($),await Tv($)}catch(me){console.error("Error archiving list:",me)}}var et=Ap(),vt=Ft(et),xt=Se(vt),At=Se(xt),sn=Se(At);sn.__click=wt,sn.__keydown=Je;var ue=Se(sn);Bt(xt,$=>K(z,$),()=>y(z));var un=Ye(xt,2);{var Qt=$=>{var me=Tp(),_e=Se(me);Zr(_e,21,()=>y(v),tt=>tt.id,(tt,ke)=>{var It=xp(),it=Se(It);it.__change=()=>Ae(y(ke).id,y(ke).status),it.__keydown=st=>{if(st.key==="Enter"||st.key===" ")st.preventDefault(),st.stopPropagation(),st.stopImmediatePropagation(),Ae(y(ke).id,y(ke).status);else if(st.key==="Escape"){st.preventDefault(),st.stopPropagation(),st.stopImmediatePropagation();const qn=st.currentTarget;if(qn&&qn instanceof HTMLElement){const $t=qn.closest("li[data-id]");$t&&$t instanceof HTMLElement&&(K(U,$t,!0),K(B,!0)),qn.blur()}}};var Dt=Ye(it,2);Dt.__click=st=>Q(y(ke).id,y(ke).text,st),Dt.__keydown=st=>ce(y(ke).id,y(ke).text,st);var Jt=Se(Dt),cn=Ye(Dt,2);{var Nr=st=>{{let qn=yt(()=>`Archive task: ${y(ke).text||"blank task"}`);Dn(st,{variant:"secondary",size:"small",onclick:()=>Y(y(ke).id),class:"print:hidden",get"aria-label"(){return y(qn)},children:($t,Gi)=>{var vo=In("Archive");fe($t,vo)},$$slots:{default:!0}})}};ct(cn,st=>{y(ke).status==="checked"&&st(Nr)})}St(()=>{Tt(It,"data-id",y(ke).id),Tt(It,"aria-label",`Task: ${y(ke).text||"blank task"}`),Ih(it,y(ke).status==="checked"),Tt(it,"aria-label",`Mark task "${y(ke).text||"blank task"}" as ${y(ke).status==="checked"?"unchecked":"checked"}`),Va(Dt,1,Ql(y(ke).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100":"cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100")),Tt(Dt,"aria-label",`Edit task: ${y(ke).text||"blank task"}`),Ar(Jt,y(ke).text||"Â ")}),$r("keydown",It,st=>Le(st,y(ke).id),!0),$r("blur",It,st=>Xe(st,y(ke).id)),fe(tt,It)}),Bt(_e,tt=>K(D,tt),()=>y(D));var Fe=Ye(_e,2);{var ot=tt=>{var ke=kp(),It=Se(ke);hs(It,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Re,onEscape:ie,onActivate:rt,buttonText:"Add your first task",placeholder:"start typing...",get ariaLabel(){return`Add your first task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return y(m)},set isInputActive(it){K(m,it,!0)},get containerElement(){return y(C)},set containerElement(it){K(C,it,!0)},get textareaElement(){return y(T)},set textareaElement(it){K(T,it,!0)}}),fe(tt,ke)},Zt=tt=>{hs(tt,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Re,onEscape:ie,onActivate:rt,buttonText:"Add Task",placeholder:"start typing...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return y(m)},set isInputActive(ke){K(m,ke,!0)},get containerElement(){return y(C)},set containerElement(ke){K(C,ke,!0)},get textareaElement(){return y(T)},set textareaElement(ke){K(T,ke,!0)}})};ct(Fe,tt=>{y(v).length===0?tt(ot):tt(Zt,!1)})}St(()=>{Tt(_e,"data-list-id",e.listId),Va(_e,1,`space-y-0 m-0 p-0 list-none w-full ${y(v).length===0?"empty-drop-zone min-h-[24px]":""}`)}),fe($,me)},En=$=>{var me=Sp(),_e=Ye(Ft(me),2);hs(_e,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Re,onEscape:ie,onActivate:rt,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return y(m)},set isInputActive(Fe){K(m,Fe,!0)},get containerElement(){return y(C)},set containerElement(Fe){K(C,Fe,!0)},get textareaElement(){return y(T)},set textareaElement(Fe){K(T,Fe,!0)}}),fe($,me)};ct(un,$=>{y(ve)?$(Qt):$(En,!1)})}Bt(vt,$=>K(P,$),()=>y(P));var Ne=Ye(vt,2);vp(Ne,{get isOpen(){return E.isOpen},get taskId(){return y(w)},get taskText(){return y(x)},get taskPosition(){return E.position},onSave:De,onCancel:ye,onArchive:Ze});var ln=Ye(Ne,2);bp(ln,{get isOpen(){return _.isOpen},get listId(){return e.listId},get listName(){return e.listName},get listPosition(){return _.position},onSave:ft,onCancel:Et,onArchive:ze}),St(()=>{Tt(vt,"data-list-id",e.listId),Tt(sn,"aria-label",`Rename list: ${e.listName}`),Ar(ue,e.listName)}),fe(t,et),vr(),s()}di(["click","keydown","change"]);var Dp=Me('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Cp=Me('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Lp=Me('<div class="create-list-container flex flex-col w-full print:hidden create-list-empty-column"><!></div>'),Pp=Me('<div class="flex flex-col" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),Op=Me('<div class="flex flex-col"></div>'),Mp=Me('<div class="empty-drop-zone min-h-[96px]" tabindex="-1"></div>'),Rp=Me('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Kp=Me('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Bp=Me('<div class="create-list-container flex flex-col w-full print:hidden"><!></div>'),Np=Me('<div><!> <div class="sortable-column-container flex flex-col pt-0 gap-y-6 min-h-0 overflow-y-auto overflow-x-hidden px-1"><!> <!></div> <!></div>');function Fp(t,e){hr(e,!0);let i=Nt(e,"createListInput",15,""),a=Nt(e,"createListInputElement",15,null),s=Nt(e,"onColumnElementReady",3,()=>{}),l=we(null),f=we(null),h=we(null),v=we(null);Qe(()=>{y(l)&&s()&&s()(y(l),e.columnIndex)}),Qe(()=>{if(!y(f)||!(y(f)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(y(f).style.outline="none",y(f).style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",y(f).style.borderRadius="4px"):(y(f).style.outline="",y(f).style.boxShadow="",y(f).style.borderRadius="")}),Qe(()=>{if(!y(l)||!(y(l)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(y(l).style.flex="1 1 auto",y(l).style.minHeight="0"):(y(l).style.flex="",y(l).style.minHeight="")});var m=Np(),E=Se(m);{var _=z=>{var U=Lp(),B=Se(U);{var G=q=>{var N=Dp(),Z=Se(N),ae=Se(Z);ae.__keydown=W=>{W.key==="Enter"&&!W.shiftKey?(W.preventDefault(),e.onCreateList(e.columnIndex)):W.key==="Escape"?e.onCreateListInputEscape(W,e.columnIndex,!0):W.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Bt(ae,W=>a(W),()=>a()),Ya(ae,i),fe(q,N)},te=q=>{var N=Cp(),Z=Se(N);Z.__click=()=>e.onCreateListClick(e.columnIndex),Z.__keydown=ae=>e.onCreateListKeydown(ae,e.columnIndex),Bt(Z,ae=>K(v,ae),()=>y(v)),fe(q,N)};ct(B,q=>{e.createListColumnIndex===e.columnIndex?q(G):q(te,!1)})}fe(z,U)};ct(E,z=>{e.columnLists.length===0&&z(_)})}var w=Ye(E,2),x=Se(w);Zr(x,19,()=>e.columnLists,z=>z.id,(z,U)=>{const B=yt(()=>mc(y(U))),G=yt(()=>e.stableLists.find(ge=>ge.id===y(U).id)),te=yt(()=>!y(G)&&!y(B)?y(U):null),q=yt(()=>y(G)||y(te));var N=lr(),Z=Ft(N);{var ae=ge=>{var ve=Pp(),pe=Se(ve);{let Le=yt(()=>y(q).name??"Unnamed list"),Xe=yt(()=>e.newTaskInputs[y(q).id]||"");Ip(pe,{get listId(){return y(q).id},get listName(){return y(Le)},get newTaskInput(){return y(Xe)},onInputChange:rt=>e.onInputChange(y(q).id,rt),get allLists(){return e.allLists},get stableLists(){return e.stableLists}})}St(()=>{Tt(ve,"data-id",y(U).id),Tt(ve,"aria-label",`List: ${y(q).name??"Unnamed list"}`),Tt(ve,"aria-pressed",e.keyboardListDrag?.active&&e.keyboardListDrag?.listId===y(q).id?"true":"false")}),$r("keydown",ve,Le=>e.onListKeyboardKeydown(Le,y(q).id),!0),fe(ge,ve)},W=ge=>{var ve=Op();St(()=>Tt(ve,"data-id",y(U).id)),fe(ge,ve)};ct(Z,ge=>{y(q)?ge(ae):ge(W,!1)})}fe(z,N)});var D=Ye(x,2);{var P=z=>{var U=Mp();Bt(U,B=>K(h,B),()=>y(h)),fe(z,U)};ct(D,z=>{e.columnLists.length===0&&z(P)})}Bt(w,z=>K(l,z),()=>y(l));var C=Ye(w,2);{var T=z=>{var U=Bp(),B=Se(U);{var G=q=>{var N=Rp(),Z=Se(N),ae=Se(Z);ae.__keydown=W=>{W.key==="Enter"&&!W.shiftKey?(W.preventDefault(),e.onCreateList(e.columnIndex)):W.key==="Escape"?e.onCreateListInputEscape(W,e.columnIndex,!1):W.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Bt(ae,W=>a(W),()=>a()),Ya(ae,i),fe(q,N)},te=q=>{var N=Kp(),Z=Se(N);Z.__click=()=>e.onCreateListClick(e.columnIndex),Z.__keydown=ae=>e.onCreateListKeydown(ae,e.columnIndex),Bt(Z,ae=>K(v,ae),()=>y(v)),fe(q,N)};ct(B,q=>{e.createListColumnIndex===e.columnIndex?q(G):q(te,!1)})}fe(z,U)};ct(C,z=>{e.columnLists.length>0&&z(T)})}Bt(m,z=>K(f,z),()=>y(f)),St(()=>{Va(m,1,`flex flex-col pt-0 min-w-0 px-2 h-full gap-y-6 ${e.columnIndex<4?"border-r border-grey-50":""}`,"svelte-785piu"),Tt(m,"data-column-index",e.columnIndex)}),fe(t,m),vr()}di(["keydown","click"]);var Hp=Me("<p>Loading...</p>"),jp=Me('<div class="grid grid-cols-5 w-full h-full py-4 px-1"></div>'),Up=Me('<div class="w-full h-full overflow-hidden"><!></div>');function zp(t,e){hr(e,!0);const i=()=>Wa(l,"$lists",a),[a,s]=Ys();let l=Xa(()=>mv()),f=yt(()=>i()||[]),h=we(an([])),v=we(an({})),m=we(null),E=we(""),_=we(null),w=we(an({active:!1,listId:null,lastDraggedId:null,shouldRefocusOnNextTab:!1})),x=an(new Map);function D(Y){x.forEach(Q=>{Q&&Q.option("disabled",Y)})}Qe(()=>{if(typeof document>"u")return;const Y=new MutationObserver(()=>{const ce=document.querySelector(".modal-backdrop");D(!!ce)});Y.observe(document.body,{childList:!0,subtree:!0});const Q=document.querySelector(".modal-backdrop");return D(!!Q),()=>{Y.disconnect()}});function P(Y,Q){if(!Y)return[];const ce=Array.from(Y.children),De=new Set,ye=[],wt=yn.getState().lists;for(const Je of ce){const ft=Je.getAttribute("data-id");if(!ft)continue;const Et=parseInt(ft,10);if(De.has(Et))continue;De.add(Et);const ze=wt.find(et=>et.id===Et);if(ze)ye.push({...ze,columnIndex:Q});else{const et=y(h).find(vt=>vt.id===Et);et&&ye.push({...et,columnIndex:Q})}}return ye}function C(Y){if(!Y)return null;let Q=Y;for(;Q&&Q!==document.body;){if(Q instanceof HTMLElement){const ce=Q.getAttribute("data-column-index");if(ce!==null)return parseInt(ce,10)}Q=Q.parentElement}return null}async function T(Y,Q){const{to:ce}=Y,De=ce,ye=C(De);if(ye===null){console.error("[LIST DRAG] Could not determine target column index");return}const Ze=ye!==Q;if(await at(),Ze){const ze=document.querySelectorAll("[data-column-index]"),et=new Map;ze.forEach(vt=>{if(vt.getAttribute("data-column-index")===null)return;const At=vt.firstElementChild;if(!At||!(At instanceof HTMLElement))return;Array.from(At.children).forEach(ue=>{const un=ue.getAttribute("data-id");if(!un)return;const Qt=parseInt(un,10);et.has(Qt)?ue.remove():et.set(Qt,ue)})}),await at()}const wt=P(De,ye),Je=Lv(wt),ft=new Set,Et=Je.filter(ze=>ft.has(ze.id)?!1:(ft.add(ze.id),!0));if(Et.length!==0){if(yn.startDrag(),yn.updateDragState(ye,Et),await at(),await at(),Ze){const ze=document.querySelectorAll("[data-column-index]"),et=new Map;ze.forEach(ue=>{if(ue.getAttribute("data-column-index")===null)return;const Qt=ue.firstElementChild;if(!Qt||!(Qt instanceof HTMLElement))return;Array.from(Qt.children).forEach(Ne=>{const ln=Ne.getAttribute("data-id");if(!ln)return;const $=parseInt(ln,10);et.has($)?Ne.remove():et.set($,Ne)})}),await at(),await at();const vt=x.get(Q),xt=x.get(ye);vt&&(vt.destroy(),x.delete(Q)),xt&&(xt.destroy(),x.delete(ye)),await at();const At=document.querySelector(`[data-column-index="${Q}"] .sortable-column-container`),sn=document.querySelector(`[data-column-index="${ye}"] .sortable-column-container`);At&&setTimeout(()=>{z(At,Q)},10),sn&&setTimeout(()=>{z(sn,ye)},10)}try{if(await rl(ye,Et),yn.completeDrag(!0),Et.length===0){const ze=document.querySelector(`[data-column-index="${ye}"] .sortable-column-container`);if(ze){const et=x.get(ye);et&&(et.destroy(),x.delete(ye)),await at(),z(ze,ye)}}}catch(ze){console.error("[LIST DRAG] Failed to save list order:",ze),yn.completeDrag(!1)}}}function z(Y,Q){if(!Y||x.has(Q))return;let ce=null;const De=Mv({onDragEnd:T,columnIndex:Q,getSortableInstance:()=>ce});ce=new xe(Y,De),x.set(Q,ce)}tc(()=>{x.forEach(Y=>{Y&&Y.destroy()}),x.clear()}),Qe(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(y(v)).length===0){const Y={};for(const Q of i())Y[Q.id]="";K(v,Y,!0)}}),Qe(()=>{if(i()&&Array.isArray(i())&&i().length>0){const Y={...y(v)};let Q=!1;for(const ce of i())ce.id in Y||(Y[ce.id]="",Q=!0);Q&&K(v,Y,!0)}}),Qe(()=>{const Y=yn.subscribe(Q=>{K(h,Q.lists,!0)});return()=>{Y()}}),Qe(()=>{i()&&Array.isArray(i())&&yn.initializeFromQuery(i())});const U=5;let B=yt(()=>gc(y(h),U));async function G(Y,Q){const ce=y(B);if(!ce||ce.length===0)return;const De=Cv(ce,Y,Q,U);if(!De)return;De.updatedDraggableLists;const ye="targetColumnIndex"in De&&De.targetColumnIndex!==void 0?Number(De.targetColumnIndex):0,Ze="targetColumnItems"in De&&De.targetColumnItems!==void 0&&Array.isArray(De.targetColumnItems)?De.targetColumnItems:[];if(Ze.length!==0){yn.startDrag(),yn.updateDragState(ye,Ze);try{const wt=Array.isArray(Ze)?Ze:[];await rl(ye,wt),yn.completeDrag(!0)}catch(wt){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",wt),yn.completeDrag(!1)}y(w).active&&y(w).listId===Y&&await bc(Y)}}function te(Y){return y(w).active===!0&&y(w).listId===Y}function q(Y){K(w,{...y(w),active:!0,listId:Y,shouldRefocusOnNextTab:!1},!0)}function N(){y(w).listId!=null?K(w,{...y(w),active:!1,listId:null,lastDraggedId:y(w).listId,shouldRefocusOnNextTab:!0},!0):K(w,{...y(w),active:!1,listId:null},!0)}function Z(){if(typeof document>"u")return;const Y=document.activeElement;Y&&Y instanceof HTMLElement&&Y.blur()}function ae(Y,Q){const ce=Y.currentTarget,De=Y.target,ye=Y.key;if(!te(Q)){ye==="Enter"||ye===" "?ce instanceof HTMLElement&&ce===De&&(Y.preventDefault(),Y.stopPropagation(),Y.stopImmediatePropagation(),Q!=null&&q(Q)):ye==="Escape"&&ce instanceof HTMLElement&&ce===De&&(Y.preventDefault(),Y.stopPropagation(),Y.stopImmediatePropagation(),Q!=null&&K(w,{...y(w),lastDraggedId:Q,shouldRefocusOnNextTab:!0},!0),ce.blur());return}}Qe(()=>{typeof document>"u"||(y(w).active?document.body.classList.add("keyboard-list-dragging-active"):document.body.classList.remove("keyboard-list-dragging-active"))}),Qe(()=>typeof document>"u"?void 0:qv({getKeyboardListDrag:()=>({active:y(w).active,listId:y(w).listId}),getLastKeyboardDraggedListId:()=>y(w).lastDraggedId,getShouldRefocusListOnNextTab:()=>y(w).shouldRefocusOnNextTab,setShouldRefocusListOnNextTab:Q=>{K(w,{...y(w),shouldRefocusOnNextTab:Q},!0)}},(Q,ce)=>G(Q,ce),()=>N(),()=>Z()));function W(Y,Q){y(v)[Y]=Q}const ge=Qv({getColumnIndex:()=>y(m),setColumnIndex:Y=>{K(m,Y,!0)},getInput:()=>y(E),setInput:Y=>{K(E,Y,!0)},getInputElement:()=>y(_)}),{handleCreateListClick:ve,handleCreateListKeydown:pe,handleCreateListInputEscape:Le,handleCreateList:Xe,handleCreateListOnTab:rt,setupClickOutsideEffect:ie,setupFocusEffect:Re}=ge;Qe(()=>ie()),Qe(()=>Re());var Ae=Up(),$e=Se(Ae);{var Ke=Y=>{var Q=Hp();fe(Y,Q)},qe=Y=>{var Q=lr(),ce=Ft(Q);{var De=ye=>{var Ze=jp();Zr(Ze,21,()=>y(B),Da,(wt,Je,ft)=>{{let Et=yt(()=>({active:y(w).active,listId:y(w).listId}));Fp(wt,{columnIndex:ft,get columnLists(){return y(Je)},get stableLists(){return y(f)},get newTaskInputs(){return y(v)},get createListColumnIndex(){return y(m)},get keyboardListDrag(){return y(Et)},onInputChange:W,onListKeyboardKeydown:ae,get onCreateListClick(){return ve},get onCreateListKeydown(){return pe},get onCreateListInputEscape(){return Le},get onCreateList(){return Xe},get onCreateListOnTab(){return rt},onColumnElementReady:(ze,et)=>{ze&&setTimeout(()=>{z(ze,et)},10)},get allLists(){return i()},get createListInput(){return y(E)},set createListInput(ze){K(E,ze,!0)},get createListInputElement(){return y(_)},set createListInputElement(ze){K(_,ze,!0)}})}}),fe(ye,Ze)};ct(ce,ye=>{Array.isArray(i())&&ye(De)},!0)}fe(Y,Q)};ct($e,Y=>{i()===void 0||i()===null?Y(Ke):Y(qe,!1)})}fe(t,Ae),vr(),s()}var Vp=Me("<p>Loading...</p>"),Yp=Me("<p>Loading data...</p>"),Wp=Me('<p class="text-grey-60">No archived lists or tasks</p>'),qp=Me('<span class="text-sm text-grey-60"> </span>'),Gp=Me('<span class="text-xs bg-grey-30 px-2 py-1 rounded">[List Archived]</span> <!>',1),Xp=Me('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),Qp=Me('<p class="text-sm text-grey-60 italic">No archived tasks</p>'),Zp=Me('<li class="flex items-center gap-3 flex-wrap"><span class="line-through text-grey-100"> </span> <!></li>'),Jp=Me('<div class="mb-4"><h4 class="text-sm font-medium text-grey-60 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),$p=Me('<div class="border-b border-grey-50 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold text-grey-110"> </h3> <!></div></div> <div class="border-b border-grey-50 pb-4"><!></div>',1),em=Me('<div class="grid grid-cols-2 gap-4"></div>'),tm=Me('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function nm(t,e){hr(e,!0);const i=()=>Wa(y(h),"$listsQuery",s),a=()=>Wa(y(f),"$archivedTasksQuery",s),[s,l]=Ys();let f=we(null),h=we(null);Qe(()=>{qa(K(f,Xa(()=>wv()),!0),"$archivedTasksQuery",s),qa(K(h,Xa(()=>gv()),!0),"$listsQuery",s)});function v(T){return T?new Date(T).toDateString():null}function m(T){return T?new Date(T).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let E=yt(()=>{const T=y(f)?a():null,z=y(h)?i():null;if(!z||!Array.isArray(z))return[];const U={};if(T&&Array.isArray(T))for(const G of T)U[G.listId]||(U[G.listId]=[]),U[G.listId].push(G);const B=[];for(const G of z){const te=G.archivedAt!=null,q=U[G.id]&&U[G.id].length>0;if(te||q){const N=U[G.id]||[],Z={};for(const ae of N){const W=v(ae.archivedAt)||"Unknown";Z[W]||(Z[W]=[]),Z[W].push(ae)}B.push({list:G,listArchiveDate:G.archivedAt?v(G.archivedAt):null,tasksByDate:Z,hasTasks:N.length>0})}}return B.sort((G,te)=>{if(G.list.order!==te.list.order)return G.list.order-te.list.order;const q=G.list.name??"Unnamed list",N=te.list.name??"Unnamed list";return q.localeCompare(N)}),B});function _(T){return T.sort((z,U)=>{if(z==="Unknown")return 1;if(U==="Unknown")return-1;const B=new Date(z).getTime();return new Date(U).getTime()-B})}async function w(T){try{(await kv(T)).listRestored&&console.log("Task and its list have been restored")}catch(z){console.error("Error restoring task:",z)}}var x=tm(),D=Ye(Se(x),2);{var P=T=>{var z=Vp();fe(T,z)},C=T=>{var z=lr(),U=Ft(z);{var B=te=>{var q=Yp();fe(te,q)},G=te=>{var q=lr(),N=Ft(q);{var Z=W=>{var ge=Wp();fe(W,ge)},ae=W=>{var ge=em();Zr(ge,21,()=>y(E),Da,(ve,pe)=>{const Le=yt(()=>y(pe).list),Xe=yt(()=>y(Le).name??"Unnamed list"),rt=yt(()=>y(Le).archivedAt!=null),ie=yt(()=>y(pe).listArchiveDate);var Re=$p(),Ae=Ft(Re),$e=Se(Ae),Ke=Se($e),qe=Se(Ke),Y=Ye(Ke,2);{var Q=Je=>{var ft=Gp(),Et=Ye(Ft(ft),2);{var ze=et=>{var vt=qp(),xt=Se(vt);St(At=>Ar(xt,`- ${At??""}`),[()=>m(y(ie))]),fe(et,vt)};ct(Et,et=>{y(ie)&&et(ze)})}fe(Je,ft)},ce=Je=>{var ft=Xp();fe(Je,ft)};ct(Y,Je=>{y(rt)?Je(Q):Je(ce,!1)})}var De=Ye(Ae,2),ye=Se(De);{var Ze=Je=>{var ft=Qp();fe(Je,ft)},wt=Je=>{var ft=lr(),Et=Ft(ft);Zr(Et,17,()=>_(Object.keys(y(pe).tasksByDate)),Da,(ze,et)=>{const vt=yt(()=>y(pe).tasksByDate[y(et)]);var xt=Jp(),At=Se(xt),sn=Se(At),ue=Ye(At,2);Zr(ue,21,()=>y(vt),Da,(un,Qt)=>{var En=Zp(),Ne=Se(En),ln=Se(Ne),$=Ye(Ne,2);Dn($,{variant:"primary",size:"small",onclick:()=>w(y(Qt).id),children:(me,_e)=>{var Fe=In("Restore");fe(me,Fe)},$$slots:{default:!0}}),St(()=>Ar(ln,y(Qt).text)),fe(un,En)}),St(un=>Ar(sn,un),[()=>y(et)==="Unknown"?"Unknown Date":m(y(et))]),fe(ze,xt)}),fe(Je,ft)};ct(ye,Je=>{y(pe).hasTasks?Je(wt,!1):Je(Ze)})}St(()=>Ar(qe,y(Xe))),fe(ve,Re)}),fe(W,ge)};ct(N,W=>{y(E).length===0?W(Z):W(ae,!1)},!0)}fe(te,q)};ct(U,te=>{!a()||!i()?te(B):te(G,!1)},!0)}fe(T,z)};ct(D,T=>{!y(f)||!y(h)?T(P):T(C,!1)})}St(()=>dr(x,`width: ${As}px;`)),fe(t,x),vr(),l()}var rm=Me('<main class="min-h-screen flex flex-col items-center justify-center bg-grey-10 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><!></div> <div class="bg-grey-10 print:bg-grey-10 border-2 border-grey-50 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-grey-80 pointer-events-none z-0"></div> <div class="absolute inset-[16px] z-10"><!></div></div> <!></main>');function im(t){function e(){window.print()}var i=rm(),a=Se(i),s=Se(a);Dn(s,{variant:"primary",size:"large",onclick:e,children:(m,E)=>{var _=In("Print");fe(m,_)},$$slots:{default:!0}});var l=Ye(a,2),f=Ye(Se(l),2),h=Se(f);zp(h,{});var v=Ye(l,2);nm(v,{}),St(()=>{dr(a,`width: ${As}px;`),dr(l,`width: ${As}px; height: ${Kv}px;`)}),fe(t,i)}const am=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],om=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function sm(){try{if(await Oe.lists.count()>0)return;await Oe.lists.bulkAdd(am),await Oe.tasks.bulkAdd(om),console.log("Database seeded with mock data")}catch(t){throw console.error("Error seeding database:",t),t}}(async()=>{await sm().catch(console.error);const t=document.getElementById("app");if(!t){console.error("App element not found!");return}gh(im,{target:t})})();
