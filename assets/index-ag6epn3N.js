(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const v of c.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();const kf="production",re=!kf.toLowerCase().startsWith("prod");var Yu=Array.isArray,If=Array.prototype.indexOf,cs=Array.from,Xn=Object.defineProperty,mr=Object.getOwnPropertyDescriptor,qu=Object.getOwnPropertyDescriptors,Df=Object.prototype,Af=Array.prototype,fs=Object.getPrototypeOf,hu=Object.isExtensible;const ha=()=>{};function Sf(e){for(var r=0;r<e.length;r++)e[r]()}function Zu(){var e,r,i=new Promise((s,l)=>{e=s,r=l});return{promise:i,resolve:e,reject:r}}const yt=2,ds=4,vs=8,Of=1<<24,On=16,Cn=32,Er=64,Ra=128,un=512,kt=1024,Bt=2048,Ln=4096,Vt=8192,Dn=16384,hs=32768,Br=65536,pa=1<<17,Qu=1<<18,Yr=1<<19,Cf=1<<20,Jn=32768,Ho=1<<21,Ma=1<<22,Gn=1<<23,An=Symbol("$state"),Lf=Symbol("legacy props"),Pf=Symbol(""),Xu=Symbol("proxy path"),Rr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Rf(){if(re){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function pu(){if(re){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Mf(){if(re){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Nf(e){if(re){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Kf(){if(re){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ff(e){if(re){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function Bf(){if(re){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function jf(e){if(re){const r=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/props_invalid_value")}function zf(e){if(re){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Uf(){if(re){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Hf(){if(re){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Vf(){if(re){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Wf(){if(re){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ju=1,$u=2,el=4,Gf=8,Yf=16,qf=1,Zf=2,Qf=4,Xf=8,Jf=16,$f=1,ed=2,Et=Symbol(),td=Symbol("filename"),nd="http://www.w3.org/1999/xhtml";var tl="font-weight: bold",nl="font-weight: normal";function Lo(e){re?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,tl,nl):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function rd(){re?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",tl,nl):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function rl(e){return e===this.v}function il(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function al(e){return!il(e,this.v)}let xi=!1,id=!1;function ad(){xi=!0}function vn(e,r){return e.label=r,ol(e.v,r),e}function ol(e,r){return e?.[Xu]?.(r),e}function od(e){const r=new Error,i=sd();return i.length===0?null:(i.unshift(`
`),Xn(r,"stack",{value:i.join(`
`)}),Xn(r,"name",{value:e}),r)}function sd(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const i=r.split(`
`),s=[];for(let l=0;l<i.length;l++){const c=i[l],v=c.replaceAll("\\","/");if(c.trim()!=="Error"){if(c.includes("validate_each_keys"))return[];v.includes("svelte/src/internal")||v.includes("node_modules/.vite")||s.push(c)}}return s}let at=null;function jr(e){at=e}let pi=null;function ma(e){pi=e}let Ti=null;function mu(e){Ti=e}function nr(e,r=!1,i){at={p:at,i:!1,c:null,e:null,s:e,x:null,l:xi&&!r?{s:null,u:null,$:[]}:null},re&&(at.function=i,Ti=i)}function rr(e){var r=at,i=r.e;if(i!==null){r.e=null;for(var s of i)bl(s)}return r.i=!0,at=r.p,re&&(Ti=at?.function??null),{}}function ki(){return!xi||at!==null&&at.l===null}let pr=[];function sl(){var e=pr;pr=[],Sf(e)}function qr(e){if(pr.length===0&&!di){var r=pr;queueMicrotask(()=>{r===pr&&sl()})}pr.push(e)}function ud(){for(;pr.length>0;)sl()}const Vo=new WeakMap;function ul(e){var r=Oe;if(r===null)return Se.f|=Gn,e;if(re&&e instanceof Error&&!Vo.has(e)&&Vo.set(e,ld(e,r)),(r.f&hs)===0){if((r.f&Ra)===0)throw re&&!r.parent&&e instanceof Error&&ll(e),e;r.b.error(e)}else zr(e,r)}function zr(e,r){for(;r!==null;){if((r.f&Ra)!==0)try{r.b.error(e);return}catch(i){e=i}r=r.parent}throw re&&e instanceof Error&&ll(e),e}function ld(e,r){const i=mr(e,"message");if(!(i&&!i.configurable)){for(var s=gs?"  ":"	",l=`
${s}in ${r.fn?.name||"<unknown>"}`,c=r.ctx;c!==null;)l+=`
${s}in ${c.function?.[td].split("/").pop()}`,c=c.p;return{message:e.message+`
${l}
`,stack:e.stack?.split(`
`).filter(v=>!v.includes("svelte/src/internal")).join(`
`)}}}function ll(e){const r=Vo.get(e);r&&(Xn(e,"message",{value:r.message}),Xn(e,"stack",{value:r.stack}))}const ia=new Set;let Re=null,la=null,Xt=null,Zt=[],Na=null,Wo=!1,di=!1;class gn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){Zt=[],la=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of r)this.#o(s,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(la=this,Re=null,yu(i.render_effects),yu(i.effects),la=null,this.#u?.resolve()),Xt=null}#o(r,i){r.f^=kt;for(var s=r.first;s!==null;){var l=s.f,c=(l&(Cn|Er))!==0,v=c&&(l&kt)!==0,p=v||(l&Vt)!==0||this.skipped_effects.has(s);if((s.f&Ra)!==0&&s.b?.is_pending()&&(i={parent:i,effect:s,effects:[],render_effects:[],block_effects:[]}),!p&&s.fn!==null){c?s.f^=kt:(l&ds)!==0?i.effects.push(s):Di(s)&&((s.f&On)!==0&&i.block_effects.push(s),gi(s));var h=s.first;if(h!==null){s=h;continue}}var _=s.parent;for(s=s.next;s===null&&_!==null;)_===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),s=_.next,_=_.parent}}#s(r){for(const i of r)((i.f&Bt)!==0?this.#a:this.#i).push(i),this.#l(i.deps),It(i,kt)}#l(r){if(r!==null)for(const i of r)(i.f&yt)===0||(i.f&Jn)===0||(i.f^=Jn,this.#l(i.deps))}capture(r,i){this.previous.has(r)||this.previous.set(r,i),(r.f&Gn)===0&&(this.current.set(r,r.v),Xt?.set(r,r.v))}activate(){Re=this,this.apply()}deactivate(){Re===this&&(Re=null,Xt=null)}flush(){if(this.activate(),Zt.length>0){if(cl(),Re!==null&&Re!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(ia.size>1){this.previous.clear();var r=Xt,i=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of ia){if(c===this){i=!1;continue}const v=[];for(const[h,_]of this.current){if(c.current.has(h))if(i&&_!==c.current.get(h))c.current.set(h,_);else continue;v.push(h)}if(v.length===0)continue;const p=[...c.current.keys()].filter(h=>!this.current.has(h));if(p.length>0){var l=Zt;Zt=[];const h=new Set,_=new Map;for(const w of v)fl(w,p,h,_);if(Zt.length>0){Re=c,c.apply();for(const w of Zt)c.#o(w,s);c.deactivate()}Zt=l}}Re=null,Xt=r}this.committed=!0,ia.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)It(r,Bt),br(r);for(const r of this.#i)It(r,Ln),br(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=Zu()).promise}static ensure(){if(Re===null){const r=Re=new gn;ia.add(Re),di||gn.enqueue(()=>{Re===r&&r.flush()})}return Re}static enqueue(r){qr(r)}apply(){}}function cd(e){var r=di;di=!0;try{for(var i;;){if(ud(),Zt.length===0&&(Re?.flush(),Zt.length===0))return Na=null,i;cl()}}finally{di=r}}function cl(){var e=qn;Wo=!0;var r=re?new Set:null;try{var i=0;for(_a(!0);Zt.length>0;){var s=gn.ensure();if(i++>1e3){if(re){var l=new Map;for(const v of s.current.keys())for(const[p,h]of v.updated??[]){var c=l.get(p);c||(c={error:h.error,count:0},l.set(p,c)),c.count+=h.count}for(const v of l.values())v.error&&console.error(v.error)}fd()}if(s.process(Zt),Yn.clear(),re)for(const v of s.current.keys())r.add(v)}}finally{if(Wo=!1,_a(e),Na=null,re)for(const v of r)v.updated=null}}function fd(){try{Bf()}catch(e){re&&Xn(e,"stack",{value:""}),zr(e,Na)}}let Tn=null;function yu(e){var r=e.length;if(r!==0){for(var i=0;i<r;){var s=e[i++];if((s.f&(Dn|Vt))===0&&Di(s)&&(Tn=new Set,gi(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?Tl(s):s.fn=null),Tn?.size>0)){Yn.clear();for(const l of Tn){if((l.f&(Dn|Vt))!==0)continue;const c=[l];let v=l.parent;for(;v!==null;)Tn.has(v)&&(Tn.delete(v),c.push(v)),v=v.parent;for(let p=c.length-1;p>=0;p--){const h=c[p];(h.f&(Dn|Vt))===0&&gi(h)}}Tn.clear()}}Tn=null}}function fl(e,r,i,s){if(!i.has(e)&&(i.add(e),e.reactions!==null))for(const l of e.reactions){const c=l.f;(c&yt)!==0?fl(l,r,i,s):(c&(Ma|On))!==0&&(c&Bt)===0&&dl(l,r,s)&&(It(l,Bt),br(l))}}function dl(e,r,i){const s=i.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const l of e.deps){if(r.includes(l))return!0;if((l.f&yt)!==0&&dl(l,r,i))return i.set(l,!0),!0}return i.set(e,!1),!1}function br(e){for(var r=Na=e;r.parent!==null;){r=r.parent;var i=r.f;if(Wo&&r===Oe&&(i&On)!==0&&(i&Qu)===0)return;if((i&(Er|Cn))!==0){if((i&kt)===0)return;r.f^=kt}}Zt.push(r)}function dd(e){let r=0,i=wr(0),s;return re&&vn(i,"createSubscriber version"),()=>{mi()&&(g(i),Ba(()=>(r===0&&(s=bn(()=>e(()=>vi(i)))),r+=1,()=>{qr(()=>{r-=1,r===0&&(s?.(),s=void 0,vi(i))})})))}}var vd=Br|Yr|Ra;function hd(e,r,i){new pd(e,r,i)}class pd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#v=0;#h=!1;#d=null;#_=dd(()=>(this.#d=wr(this.#f),re&&vn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,i,s){this.#t=r,this.#n=i,this.#u=s,this.parent=Oe.b,this.#e=!!this.#n.pending,this.#a=bs(()=>{Oe.b=this;{var l=this.#y();try{this.#i=Qt(()=>s(l))}catch(c){this.error(c)}this.#v>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},vd)}#b(){try{this.#i=Qt(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=Qt(()=>r(this.#t)),gn.enqueue(()=>{var i=this.#y();this.#i=this.#p(()=>(gn.ensure(),Qt(()=>this.#u(i)))),this.#v>0?this.#m():(Nr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#y(){var r=this.#t;return this.#e&&(this.#c=$n(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var i=Oe,s=Se,l=at;sn(this.#a),Nt(this.#a),jr(this.#a.ctx);try{return r()}catch(c){return ul(c),null}finally{sn(i),Nt(s),jr(l)}}#m(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Dl(this.#i,this.#l)),this.#o===null&&(this.#o=Qt(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#v+=r,this.#v===0&&(this.#e=!1,this.#o&&Nr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&Hr(this.#d,this.#f)}get_effect_pending(){return this.#_(),g(this.#d)}error(r){var i=this.#n.onerror;let s=this.#n.failed;if(this.#h||!i&&!s)throw r;this.#i&&(Kt(this.#i),this.#i=null),this.#o&&(Kt(this.#o),this.#o=null),this.#s&&(Kt(this.#s),this.#s=null);var l=!1,c=!1;const v=()=>{if(l){rd();return}l=!0,c&&Wf(),gn.ensure(),this.#f=0,this.#s!==null&&Nr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#h=!1,Qt(()=>this.#u(this.#t)))),this.#v>0?this.#m():this.#e=!1};var p=Se;try{Nt(null),c=!0,i?.(r,v),c=!1}catch(h){zr(h,this.#a&&this.#a.parent)}finally{Nt(p)}s&&qr(()=>{this.#s=this.#p(()=>{gn.ensure(),this.#h=!0;try{return Qt(()=>{s(this.#t,()=>r,()=>v)})}catch(h){return zr(h,this.#a.parent),null}finally{this.#h=!1}})})}}function ca(e,r){return r}function md(e,r,i){for(var s=[],l=r.length,c=0;c<l;c++)ws(r[c].e,s,!0);kl(s,()=>{var v=s.length===0&&i!==null;if(v){var p=i,h=p.parentNode;Od(h),h.append(p),e.items.clear(),hn(e,r[0].prev,r[l-1].next)}for(var _=0;_<l;_++){var w=r[_];v||(e.items.delete(w.k),hn(e,w.prev,w.next)),Kt(w.e,!v)}e.first===r[0]&&(e.first=r[0].prev)})}function yr(e,r,i,s,l,c=null){var v=e,p=new Map,h=null,_=(r&el)!==0,w=(r&Ju)!==0,I=(r&$u)!==0;if(_){var b=e;v=b.appendChild($n())}var x=null,O=ps(()=>{var V=i();return Yu(V)?V:V==null?[]:cs(V)}),L,A=!0;function S(){yd(H,L,v,r,s),x!==null&&(L.length===0?(x.fragment?(v.before(x.fragment),x.fragment=null):Es(x.effect),F.first=x.effect):Nr(x.effect,()=>{x=null}))}var F=bs(()=>{L=g(O);for(var V=L.length,Q=new Set,te=Re,pe=null,de=_l(),le=0;le<V;le+=1){var ce=L[le],ie=s(ce,le),ge=A?null:p.get(ie);ge?(w&&Hr(ge.v,ce),I?Hr(ge.i,le):ge.i=le,de&&te.skipped_effects.delete(ge.e)):(ge=gd(A?v:null,pe,ce,ie,le,l,r,i),A&&(ge.o=!0,pe===null?h=ge:pe.next=ge,pe=ge),p.set(ie,ge)),Q.add(ie)}if(V===0&&c&&!x)if(A)x={fragment:null,effect:Qt(()=>c(v))};else{var Fe=document.createDocumentFragment(),Me=$n();Fe.append(Me),x={fragment:Fe,effect:Qt(()=>c(Me))}}if(!A)if(de){for(const[Ne,qe]of p)Q.has(Ne)||te.skipped_effects.add(qe.e);te.oncommit(S),te.ondiscard(()=>{})}else S();g(O)}),H={effect:F,items:p,first:h};A=!1}function yd(e,r,i,s,l){var c=(s&Gf)!==0,v=r.length,p=e.items,h=e.first,_,w=null,I,b=[],x=[],O,L,A,S;if(c)for(S=0;S<v;S+=1)O=r[S],L=l(O,S),A=p.get(L),A.o&&(A.a?.measure(),(I??=new Set).add(A));for(S=0;S<v;S+=1){if(O=r[S],L=l(O,S),A=p.get(L),e.first??=A,!A.o){A.o=!0;var F=w?w.next:h;hn(e,w,A),hn(e,A,F),Po(A,F,i),w=A,b=[],x=[],h=w.next;continue}if((A.e.f&Vt)!==0&&(Es(A.e),c&&(A.a?.unfix(),(I??=new Set).delete(A))),A!==h){if(_!==void 0&&_.has(A)){if(b.length<x.length){var H=x[0],V;w=H.prev;var Q=b[0],te=b[b.length-1];for(V=0;V<b.length;V+=1)Po(b[V],H,i);for(V=0;V<x.length;V+=1)_.delete(x[V]);hn(e,Q.prev,te.next),hn(e,w,Q),hn(e,te,H),h=H,w=te,S-=1,b=[],x=[]}else _.delete(A),Po(A,h,i),hn(e,A.prev,A.next),hn(e,A,w===null?e.first:w.next),hn(e,w,A),w=A;continue}for(b=[],x=[];h!==null&&h.k!==L;)(h.e.f&Vt)===0&&(_??=new Set).add(h),x.push(h),h=h.next;if(h===null)continue;A=h}b.push(A),w=A,h=A.next}if(h!==null||_!==void 0){for(var pe=_===void 0?[]:cs(_);h!==null;)(h.e.f&Vt)===0&&pe.push(h),h=h.next;var de=pe.length;if(de>0){var le=(s&el)!==0&&v===0?i:null;if(c){for(S=0;S<de;S+=1)pe[S].a?.measure();for(S=0;S<de;S+=1)pe[S].a?.fix()}md(e,pe,le)}}c&&qr(()=>{if(I!==void 0)for(A of I)A.a?.apply()})}function gd(e,r,i,s,l,c,v,p){var h=(v&Ju)!==0,_=(v&Yf)===0,w=h?_?hl(i,!1,!1):wr(i):i,I=(v&$u)===0?l:wr(l);re&&h&&(w.trace=()=>{var O=typeof I=="number"?l:I.v;p()[O]});var b={i:I,v:w,k:s,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var x=document.createDocumentFragment();x.append(e=$n())}return b.e=Qt(()=>c(e,w,I,p)),r!==null&&(r.next=b),b}finally{}}function Po(e,r,i){for(var s=e.next?e.next.e.nodes_start:i,l=r?r.e.nodes_start:i,c=e.e.nodes_start;c!==null&&c!==s;){var v=Ii(c);l.before(c),c=v}}function hn(e,r,i){r===null?(e.first=i,e.effect.first=i&&i.e):(r.e===e.effect.last&&i!==null&&(e.effect.last=i.e),r.e.next&&(r.e.next.prev=null),r.next=i,r.e.next=i&&i.e),i===null?e.effect.last=r&&r.e:(i.e===e.effect.last&&r===null&&(e.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=r,i.e.prev=r&&r.e)}function _d(e,r,i,s){const l=ki()?Ka:ps;if(i.length===0&&e.length===0){s(r.map(l));return}var c=Re,v=Oe,p=bd();function h(){Promise.all(i.map(_=>Ed(_))).then(_=>{p();try{s([...r.map(l),..._])}catch(w){(v.f&Dn)===0&&zr(w,v)}c?.deactivate(),ya()}).catch(_=>{zr(_,v)})}e.length>0?Promise.all(e).then(()=>{p();try{return h()}finally{c?.deactivate(),ya()}}):h()}function bd(){var e=Oe,r=Se,i=at,s=Re;if(re)var l=pi;return function(v=!0){sn(e),Nt(r),jr(i),v&&s?.activate(),re&&ma(l)}}function ya(){sn(null),Nt(null),jr(null),re&&ma(null)}const wd=new Set;function Ka(e){var r=yt|Bt,i=Se!==null&&(Se.f&yt)!==0?Se:null;return Oe!==null&&(Oe.f|=Yr),{ctx:at,deps:null,effects:null,equals:rl,f:r,fn:e,reactions:null,rv:0,v:Et,wv:0,parent:i??Oe,ac:null}}function Ed(e,r){let i=Oe;i===null&&Rf();var s=i.b,l=void 0,c=wr(Et),v=!Se,p=new Map;return Nd(()=>{var h=Zu();l=h.promise;try{Promise.resolve(e()).then(h.resolve,h.reject).then(()=>{_===Re&&_.committed&&_.deactivate(),ya()})}catch(b){h.reject(b),ya()}var _=Re;if(v){var w=!s.is_pending();s.update_pending_count(1),_.increment(w),p.get(_)?.reject(Rr),p.delete(_),p.set(_,h)}const I=(b,x=void 0)=>{if(_.activate(),x)x!==Rr&&(c.f|=Gn,Hr(c,x));else{(c.f&Gn)!==0&&(c.f^=Gn),Hr(c,b);for(const[O,L]of p){if(p.delete(O),O===_)break;L.reject(Rr)}}v&&(s.update_pending_count(-1),_.decrement(w))};h.promise.then(I,b=>I(null,b||"unknown"))}),_s(()=>{for(const h of p.values())h.reject(Rr)}),re&&(c.f|=Ma),new Promise(h=>{function _(w){function I(){w===l?h(c):_(l)}w.then(I,I)}_(l)})}function pt(e){const r=Ka(e);return Al(r),r}function ps(e){const r=Ka(e);return r.equals=al,r}function Go(e){var r=e.effects;if(r!==null){e.effects=null;for(var i=0;i<r.length;i+=1)Kt(r[i])}}let Ro=[];function xd(e){for(var r=e.parent;r!==null;){if((r.f&yt)===0)return(r.f&Dn)===0?r:null;r=r.parent}return null}function ms(e){var r,i=Oe;if(sn(xd(e)),re){let s=Ur;gu(new Set);try{Ro.includes(e)&&Mf(),Ro.push(e),e.f&=~Jn,Go(e),r=Yo(e)}finally{sn(i),gu(s),Ro.pop()}}else try{e.f&=~Jn,Go(e),r=Yo(e)}finally{sn(i)}return r}function vl(e){var r=ms(e);if(e.equals(r)||(Re?.is_fork||(e.v=r),e.wv=Ol()),!xr)if(Xt!==null)(mi()||Re?.is_fork)&&Xt.set(e,r);else{var i=(e.f&un)===0?Ln:kt;It(e,i)}}let Ur=new Set;const Yn=new Map;function gu(e){Ur=e}let ys=!1;function Td(){ys=!0}function wr(e,r){var i={f:0,v:e,reactions:null,equals:rl,rv:0,wv:0};return i}function he(e,r){const i=wr(e);return Al(i),i}function hl(e,r=!1,i=!0){const s=wr(e);return r||(s.equals=al),xi&&i&&at!==null&&at.l!==null&&(at.l.s??=[]).push(s),s}function N(e,r,i=!1){Se!==null&&(!_n||(Se.f&pa)!==0)&&ki()&&(Se.f&(yt|On|Ma|pa))!==0&&!Sn?.includes(e)&&Vf();let s=i?Ut(r):r;return re&&ol(s,e.label),Hr(e,s)}function Hr(e,r){if(!e.equals(r)){var i=e.v;xr?Yn.set(e,r):Yn.set(e,i),e.v=r;var s=gn.ensure();if(s.capture(e,i),re){if(Oe!==null){e.updated??=new Map;const l=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:l}),l>5){const c=od("updated at");if(c!==null){let v=e.updated.get(c.stack);v||(v={error:c,count:0},e.updated.set(c.stack,v)),v.count++}}}Oe!==null&&(e.set_during_effect=!0)}(e.f&yt)!==0&&((e.f&Bt)!==0&&ms(e),It(e,(e.f&un)!==0?kt:Ln)),e.wv=Ol(),ml(e,Bt),ki()&&Oe!==null&&(Oe.f&kt)!==0&&(Oe.f&(Cn|Er))===0&&(Yt===null?Bd([e]):Yt.push(e)),!s.is_fork&&Ur.size>0&&!ys&&pl()}return r}function pl(){ys=!1;var e=qn;_a(!0);const r=Array.from(Ur);try{for(const i of r)(i.f&kt)!==0&&It(i,Ln),Di(i)&&gi(i)}finally{_a(e)}Ur.clear()}function vi(e){N(e,e.v+1)}function ml(e,r){var i=e.reactions;if(i!==null)for(var s=ki(),l=i.length,c=0;c<l;c++){var v=i[c],p=v.f;if(!(!s&&v===Oe)){if(re&&(p&pa)!==0){Ur.add(v);continue}var h=(p&Bt)===0;if(h&&It(v,r),(p&yt)!==0){var _=v;Xt?.delete(_),(p&Jn)===0&&(p&un&&(v.f|=Jn),ml(_,Ln))}else h&&((p&On)!==0&&Tn!==null&&Tn.add(v),br(v))}}}const kd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Ut(e){if(typeof e!="object"||e===null||An in e)return e;const r=fs(e);if(r!==Df&&r!==Af)return e;var i=new Map,s=Yu(e),l=he(0),c=gr,v=w=>{if(gr===c)return w();var I=Se,b=gr;Nt(null),Eu(c);var x=w();return Nt(I),Eu(b),x};s&&(i.set("length",he(e.length)),re&&(e=Dd(e)));var p="";let h=!1;function _(w){if(!h){h=!0,p=w,vn(l,`${p} version`);for(const[I,b]of i)vn(b,dr(p,I));h=!1}}return new Proxy(e,{defineProperty(w,I,b){(!("value"in b)||b.configurable===!1||b.enumerable===!1||b.writable===!1)&&Uf();var x=i.get(I);return x===void 0?x=v(()=>{var O=he(b.value);return i.set(I,O),re&&typeof I=="string"&&vn(O,dr(p,I)),O}):N(x,b.value,!0),!0},deleteProperty(w,I){var b=i.get(I);if(b===void 0){if(I in w){const x=v(()=>he(Et));i.set(I,x),vi(l),re&&vn(x,dr(p,I))}}else N(b,Et),vi(l);return!0},get(w,I,b){if(I===An)return e;if(re&&I===Xu)return _;var x=i.get(I),O=I in w;if(x===void 0&&(!O||mr(w,I)?.writable)&&(x=v(()=>{var A=Ut(O?w[I]:Et),S=he(A);return re&&vn(S,dr(p,I)),S}),i.set(I,x)),x!==void 0){var L=g(x);return L===Et?void 0:L}return Reflect.get(w,I,b)},getOwnPropertyDescriptor(w,I){var b=Reflect.getOwnPropertyDescriptor(w,I);if(b&&"value"in b){var x=i.get(I);x&&(b.value=g(x))}else if(b===void 0){var O=i.get(I),L=O?.v;if(O!==void 0&&L!==Et)return{enumerable:!0,configurable:!0,value:L,writable:!0}}return b},has(w,I){if(I===An)return!0;var b=i.get(I),x=b!==void 0&&b.v!==Et||Reflect.has(w,I);if(b!==void 0||Oe!==null&&(!x||mr(w,I)?.writable)){b===void 0&&(b=v(()=>{var L=x?Ut(w[I]):Et,A=he(L);return re&&vn(A,dr(p,I)),A}),i.set(I,b));var O=g(b);if(O===Et)return!1}return x},set(w,I,b,x){var O=i.get(I),L=I in w;if(s&&I==="length")for(var A=b;A<O.v;A+=1){var S=i.get(A+"");S!==void 0?N(S,Et):A in w&&(S=v(()=>he(Et)),i.set(A+"",S),re&&vn(S,dr(p,A)))}if(O===void 0)(!L||mr(w,I)?.writable)&&(O=v(()=>he(void 0)),re&&vn(O,dr(p,I)),N(O,Ut(b)),i.set(I,O));else{L=O.v!==Et;var F=v(()=>Ut(b));N(O,F)}var H=Reflect.getOwnPropertyDescriptor(w,I);if(H?.set&&H.set.call(x,b),!L){if(s&&typeof I=="string"){var V=i.get("length"),Q=Number(I);Number.isInteger(Q)&&Q>=V.v&&N(V,Q+1)}vi(l)}return!0},ownKeys(w){g(l);var I=Reflect.ownKeys(w).filter(O=>{var L=i.get(O);return L===void 0||L.v!==Et});for(var[b,x]of i)x.v!==Et&&!(b in w)&&I.push(b);return I},setPrototypeOf(){Hf()}})}function dr(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:kd.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function Mo(e){try{if(e!==null&&typeof e=="object"&&An in e)return e[An]}catch{}return e}const Id=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Dd(e){return new Proxy(e,{get(r,i,s){var l=Reflect.get(r,i,s);return Id.has(i)?function(...c){Td();var v=l.apply(this,c);return pl(),v}:l}})}function Ad(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:i,lastIndexOf:s,includes:l}=e;e.indexOf=function(c,v){const p=i.call(this,c,v);if(p===-1){for(let h=v??0;h<this.length;h+=1)if(Mo(this[h])===c){Lo("array.indexOf(...)");break}}return p},e.lastIndexOf=function(c,v){const p=s.call(this,c,v??this.length-1);if(p===-1){for(let h=0;h<=(v??this.length-1);h+=1)if(Mo(this[h])===c){Lo("array.lastIndexOf(...)");break}}return p},e.includes=function(c,v){const p=l.call(this,c,v);if(!p){for(let h=0;h<this.length;h+=1)if(Mo(this[h])===c){Lo("array.includes(...)");break}}return p},Array.__svelte_cleanup=()=>{e.indexOf=i,e.lastIndexOf=s,e.includes=l}}var _u,gs,yl,gl;function Sd(){if(_u===void 0){_u=window,gs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,i=Text.prototype;yl=mr(r,"firstChild").get,gl=mr(r,"nextSibling").get,hu(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),hu(i)&&(i.__t=void 0),re&&(e.__svelte_meta=null,Ad())}}function $n(e=""){return document.createTextNode(e)}function ga(e){return yl.call(e)}function Ii(e){return gl.call(e)}function ye(e,r){return ga(e)}function mt(e,r=!1){{var i=ga(e);return i instanceof Comment&&i.data===""?Ii(i):i}}function Ee(e,r=1,i=!1){let s=e;for(;r--;)s=Ii(s);return s}function Od(e){e.textContent=""}function _l(){return!1}let bu=!1;function Cd(){bu||(bu=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function Fa(e){var r=Se,i=Oe;Nt(null),sn(null);try{return e()}finally{Nt(r),sn(i)}}function Ld(e,r,i,s=i){e.addEventListener(r,()=>Fa(i));const l=e.__on_r;l?e.__on_r=()=>{l(),s(!0)}:e.__on_r=()=>s(!0),Cd()}function Pd(e){Oe===null&&(Se===null&&Ff(e),Kf()),xr&&Nf(e)}function Rd(e,r){var i=r.last;i===null?r.last=r.first=e:(i.next=e,e.prev=i,r.last=e)}function Pn(e,r,i){var s=Oe;if(re)for(;s!==null&&(s.f&pa)!==0;)s=s.parent;s!==null&&(s.f&Vt)!==0&&(e|=Vt);var l={ctx:at,deps:null,nodes_start:null,nodes_end:null,f:e|Bt|un,first:null,fn:r,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(re&&(l.component_function=Ti),i)try{gi(l),l.f|=hs}catch(p){throw Kt(l),p}else r!==null&&br(l);var c=l;if(i&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&Yr)===0&&(c=c.first,(e&On)!==0&&(e&Br)!==0&&c!==null&&(c.f|=Br)),c!==null&&(c.parent=s,s!==null&&Rd(c,s),Se!==null&&(Se.f&yt)!==0&&(e&Er)===0)){var v=Se;(v.effects??=[]).push(c)}return l}function mi(){return Se!==null&&!_n}function _s(e){const r=Pn(vs,null,!1);return It(r,kt),r.teardown=e,r}function We(e){Pd("$effect"),re&&Xn(e,"name",{value:"$effect"});var r=Oe.f,i=!Se&&(r&Cn)!==0&&(r&hs)===0;if(i){var s=at;(s.e??=[]).push(e)}else return bl(e)}function bl(e){return Pn(ds|Cf,e,!1)}function Md(e){gn.ensure();const r=Pn(Er|Yr,e,!0);return(i={})=>new Promise(s=>{i.outro?Nr(r,()=>{Kt(r),s(void 0)}):(Kt(r),s(void 0))})}function wl(e){return Pn(ds,e,!1)}function Nd(e){return Pn(Ma|Yr,e,!0)}function Ba(e,r=0){return Pn(vs|r,e,!0)}function tt(e,r=[],i=[],s=[]){_d(s,r,i,l=>{Pn(vs,()=>e(...l.map(g)),!0)})}function bs(e,r=0){var i=Pn(On|r,e,!0);return re&&(i.dev_stack=pi),i}function Qt(e){return Pn(Cn|Yr,e,!0)}function El(e){var r=e.teardown;if(r!==null){const i=xr,s=Se;wu(!0),Nt(null);try{r.call(null)}finally{wu(i),Nt(s)}}}function xl(e,r=!1){var i=e.first;for(e.first=e.last=null;i!==null;){const l=i.ac;l!==null&&Fa(()=>{l.abort(Rr)});var s=i.next;(i.f&Er)!==0?i.parent=null:Kt(i,r),i=s}}function Kd(e){for(var r=e.first;r!==null;){var i=r.next;(r.f&Cn)===0&&Kt(r),r=i}}function Kt(e,r=!0){var i=!1;(r||(e.f&Qu)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Fd(e.nodes_start,e.nodes_end),i=!0),xl(e,r&&!i),ba(e,0),It(e,Dn);var s=e.transitions;if(s!==null)for(const c of s)c.stop();El(e);var l=e.parent;l!==null&&l.first!==null&&Tl(e),re&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Fd(e,r){for(;e!==null;){var i=e===r?null:Ii(e);e.remove(),e=i}}function Tl(e){var r=e.parent,i=e.prev,s=e.next;i!==null&&(i.next=s),s!==null&&(s.prev=i),r!==null&&(r.first===e&&(r.first=s),r.last===e&&(r.last=i))}function Nr(e,r,i=!0){var s=[];ws(e,s,!0),kl(s,()=>{i&&Kt(e),r&&r()})}function kl(e,r){var i=e.length;if(i>0){var s=()=>--i||r();for(var l of e)l.out(s)}else r()}function ws(e,r,i){if((e.f&Vt)===0){if(e.f^=Vt,e.transitions!==null)for(const v of e.transitions)(v.is_global||i)&&r.push(v);for(var s=e.first;s!==null;){var l=s.next,c=(s.f&Br)!==0||(s.f&Cn)!==0&&(e.f&On)!==0;ws(s,r,c?i:!1),s=l}}}function Es(e){Il(e,!0)}function Il(e,r){if((e.f&Vt)!==0){e.f^=Vt,(e.f&kt)===0&&(It(e,Bt),br(e));for(var i=e.first;i!==null;){var s=i.next,l=(i.f&Br)!==0||(i.f&Cn)!==0;Il(i,l?r:!1),i=s}if(e.transitions!==null)for(const c of e.transitions)(c.is_global||r)&&c.in()}}function Dl(e,r){for(var i=e.nodes_start,s=e.nodes_end;i!==null;){var l=i===s?null:Ii(i);r.append(i),i=l}}let qn=!1;function _a(e){qn=e}let xr=!1;function wu(e){xr=e}let Se=null,_n=!1;function Nt(e){Se=e}let Oe=null;function sn(e){Oe=e}let Sn=null;function Al(e){Se!==null&&(Sn===null?Sn=[e]:Sn.push(e))}let St=null,zt=0,Yt=null;function Bd(e){Yt=e}let Sl=1,yi=0,gr=yi;function Eu(e){gr=e}function Ol(){return++Sl}function Di(e){var r=e.f;if((r&Bt)!==0)return!0;if(r&yt&&(e.f&=~Jn),(r&Ln)!==0){var i=e.deps;if(i!==null)for(var s=i.length,l=0;l<s;l++){var c=i[l];if(Di(c)&&vl(c),c.wv>e.wv)return!0}(r&un)!==0&&Xt===null&&It(e,kt)}return!1}function Cl(e,r,i=!0){var s=e.reactions;if(s!==null&&!Sn?.includes(e))for(var l=0;l<s.length;l++){var c=s[l];(c.f&yt)!==0?Cl(c,r,!1):r===c&&(i?It(c,Bt):(c.f&kt)!==0&&It(c,Ln),br(c))}}function Yo(e){var r=St,i=zt,s=Yt,l=Se,c=Sn,v=at,p=_n,h=gr,_=e.f;St=null,zt=0,Yt=null,Se=(_&(Cn|Er))===0?e:null,Sn=null,jr(e.ctx),_n=!1,gr=++yi,e.ac!==null&&(Fa(()=>{e.ac.abort(Rr)}),e.ac=null);try{e.f|=Ho;var w=e.fn,I=w(),b=e.deps;if(St!==null){var x;if(ba(e,zt),b!==null&&zt>0)for(b.length=zt+St.length,x=0;x<St.length;x++)b[zt+x]=St[x];else e.deps=b=St;if(qn&&mi()&&(e.f&un)!==0)for(x=zt;x<b.length;x++)(b[x].reactions??=[]).push(e)}else b!==null&&zt<b.length&&(ba(e,zt),b.length=zt);if(ki()&&Yt!==null&&!_n&&b!==null&&(e.f&(yt|Ln|Bt))===0)for(x=0;x<Yt.length;x++)Cl(Yt[x],e);return l!==null&&l!==e&&(yi++,Yt!==null&&(s===null?s=Yt:s.push(...Yt))),(e.f&Gn)!==0&&(e.f^=Gn),I}catch(O){return ul(O)}finally{e.f^=Ho,St=r,zt=i,Yt=s,Se=l,Sn=c,jr(v),_n=p,gr=h}}function jd(e,r){let i=r.reactions;if(i!==null){var s=If.call(i,e);if(s!==-1){var l=i.length-1;l===0?i=r.reactions=null:(i[s]=i[l],i.pop())}}i===null&&(r.f&yt)!==0&&(St===null||!St.includes(r))&&(It(r,Ln),(r.f&un)!==0&&(r.f^=un,r.f&=~Jn),Go(r),ba(r,0))}function ba(e,r){var i=e.deps;if(i!==null)for(var s=r;s<i.length;s++)jd(e,i[s])}function gi(e){var r=e.f;if((r&Dn)===0){It(e,kt);var i=Oe,s=qn;if(Oe=e,qn=!0,re){var l=Ti;mu(e.component_function);var c=pi;ma(e.dev_stack??pi)}try{(r&(On|Of))!==0?Kd(e):xl(e),El(e);var v=Yo(e);e.teardown=typeof v=="function"?v:null,e.wv=Sl;var p;re&&id&&(e.f&Bt)!==0&&e.deps}finally{qn=s,Oe=i,re&&(mu(l),ma(c))}}}async function kn(){await Promise.resolve(),cd()}function g(e){var r=e.f,i=(r&yt)!==0;if(Se!==null&&!_n){var s=Oe!==null&&(Oe.f&Dn)!==0;if(!s&&!Sn?.includes(e)){var l=Se.deps;if((Se.f&Ho)!==0)e.rv<yi&&(e.rv=yi,St===null&&l!==null&&l[zt]===e?zt++:St===null?St=[e]:St.includes(e)||St.push(e));else{(Se.deps??=[]).push(e);var c=e.reactions;c===null?e.reactions=[Se]:c.includes(Se)||c.push(Se)}}}if(re&&wd.delete(e),xr){if(Yn.has(e))return Yn.get(e);if(i){var v=e,p=v.v;return((v.f&kt)===0&&v.reactions!==null||Pl(v))&&(p=ms(v)),Yn.set(v,p),p}}else i&&(!Xt?.has(e)||Re?.is_fork&&!mi())&&(v=e,Di(v)&&vl(v),qn&&mi()&&(v.f&un)===0&&Ll(v));if(Xt?.has(e))return Xt.get(e);if((e.f&Gn)!==0)throw e.v;return e.v}function Ll(e){if(e.deps!==null){e.f^=un;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&yt)!==0&&(r.f&un)===0&&Ll(r)}}function Pl(e){if(e.v===Et)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(Yn.has(r)||(r.f&yt)!==0&&Pl(r))return!0;return!1}function bn(e){var r=_n;try{return _n=!0,e()}finally{_n=r}}const zd=-7169;function It(e,r){e.f=e.f&zd|r}function Ud(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(An in e)qo(e);else if(!Array.isArray(e))for(let r in e){const i=e[r];typeof i=="object"&&i&&An in i&&qo(i)}}}function qo(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let s in e)try{qo(e[s],r)}catch{}const i=fs(e);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const s=qu(i);for(let l in s){const c=s[l].get;if(c)try{c.call(e)}catch{}}}}}const Hd=["touchstart","touchmove"];function Vd(e){return Hd.includes(e)}const Rl=new Set,Zo=new Set;function Wd(e,r,i,s={}){function l(c){if(s.capture||ci.call(r,c),!c.cancelBubble)return Fa(()=>i?.call(this,c))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?qr(()=>{r.addEventListener(e,l,s)}):r.addEventListener(e,l,s),l}function In(e,r,i,s,l){var c={capture:s,passive:l},v=Wd(e,r,i,c);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&_s(()=>{r.removeEventListener(e,v,c)})}function Tr(e){for(var r=0;r<e.length;r++)Rl.add(e[r]);for(var i of Zo)i(e)}let xu=null;function ci(e){var r=this,i=r.ownerDocument,s=e.type,l=e.composedPath?.()||[],c=l[0]||e.target;xu=e;var v=0,p=xu===e&&e.__root;if(p){var h=l.indexOf(p);if(h!==-1&&(r===document||r===window)){e.__root=r;return}var _=l.indexOf(r);if(_===-1)return;h<=_&&(v=h)}if(c=l[v]||e.target,c!==r){Xn(e,"currentTarget",{configurable:!0,get(){return c||i}});var w=Se,I=Oe;Nt(null),sn(null);try{for(var b,x=[];c!==null;){var O=c.assignedSlot||c.parentNode||c.host||null;try{var L=c["__"+s];L!=null&&(!c.disabled||e.target===c)&&L.call(c,e)}catch(A){b?x.push(A):b=A}if(e.cancelBubble||O===r||O===null)break;c=O}if(b){for(let A of x)queueMicrotask(()=>{throw A});throw b}}finally{e.__root=r,delete e.currentTarget,Nt(w),sn(I)}}}function Gd(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function Qo(e,r){var i=Oe;i.nodes_start===null&&(i.nodes_start=e,i.nodes_end=r)}function xe(e,r){var i=(r&$f)!==0,s=(r&ed)!==0,l,c=!e.startsWith("<!>");return()=>{l===void 0&&(l=Gd(c?e:"<!>"+e),i||(l=ga(l)));var v=s||gs?document.importNode(l,!0):l.cloneNode(!0);if(i){var p=ga(v),h=v.lastChild;Qo(p,h)}else Qo(v,v);return v}}function Zn(){var e=document.createDocumentFragment(),r=document.createComment(""),i=$n();return e.append(r,i),Qo(r,i),e}function me(e,r){e!==null&&e.before(r)}function Vn(e,r){var i=r==null?"":typeof r=="object"?r+"":r;i!==(e.__t??=e.nodeValue)&&(e.__t=i,e.nodeValue=i+"")}function Yd(e,r){return qd(e,r)}const Pr=new Map;function qd(e,{target:r,anchor:i,props:s={},events:l,context:c,intro:v=!0}){Sd();var p=new Set,h=I=>{for(var b=0;b<I.length;b++){var x=I[b];if(!p.has(x)){p.add(x);var O=Vd(x);r.addEventListener(x,ci,{passive:O});var L=Pr.get(x);L===void 0?(document.addEventListener(x,ci,{passive:O}),Pr.set(x,1)):Pr.set(x,L+1)}}};h(cs(Rl)),Zo.add(h);var _=void 0,w=Md(()=>{var I=i??r.appendChild($n());return hd(I,{pending:()=>{}},b=>{if(c){nr({});var x=at;x.c=c}l&&(s.$$events=l),_=e(b,s)||{},c&&rr()}),()=>{for(var b of p){r.removeEventListener(b,ci);var x=Pr.get(b);--x===0?(document.removeEventListener(b,ci),Pr.delete(b)):Pr.set(b,x)}Zo.delete(h),I!==i&&I.parentNode?.removeChild(I)}});return Zd.set(_,w),_}let Zd=new WeakMap;class Qd{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,i=!0){this.anchor=r,this.#u=i}#a=()=>{var r=Re;if(this.#e.has(r)){var i=this.#e.get(r),s=this.#t.get(i);if(s)Es(s),this.#n.delete(i);else{var l=this.#r.get(i);l&&(this.#t.set(i,l.effect),this.#r.delete(i),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[c,v]of this.#e){if(this.#e.delete(c),c===r)break;const p=this.#r.get(v);p&&(Kt(p.effect),this.#r.delete(v))}for(const[c,v]of this.#t){if(c===i||this.#n.has(c))continue;const p=()=>{if(Array.from(this.#e.values()).includes(c)){var _=document.createDocumentFragment();Dl(v,_),_.append($n()),this.#r.set(c,{effect:v,fragment:_})}else Kt(v);this.#n.delete(c),this.#t.delete(c)};this.#u||!s?(this.#n.add(c),Nr(v,p,!1)):p()}}};#i=r=>{this.#e.delete(r);const i=Array.from(this.#e.values());for(const[s,l]of this.#r)i.includes(s)||(Kt(l.effect),this.#r.delete(s))};ensure(r,i){var s=Re,l=_l();if(i&&!this.#t.has(r)&&!this.#r.has(r))if(l){var c=document.createDocumentFragment(),v=$n();c.append(v),this.#r.set(r,{effect:Qt(()=>i(v)),fragment:c})}else this.#t.set(r,Qt(()=>i(this.anchor)));if(this.#e.set(s,r),l){for(const[p,h]of this.#t)p===r?s.skipped_effects.delete(h):s.skipped_effects.add(h);for(const[p,h]of this.#r)p===r?s.skipped_effects.delete(h.effect):s.skipped_effects.add(h.effect);s.oncommit(this.#a),s.ondiscard(this.#i)}else this.#a()}}function $e(e,r,i=!1){var s=new Qd(e),l=i?Br:0;function c(v,p){s.ensure(v,p)}bs(()=>{var v=!1;r((p,h=!0)=>{v=!0,c(h,p)}),v||c(!1,null)},l)}function xs(e,r,i){wl(()=>{var s=bn(()=>r(e,i?.())||{});if(i&&s?.update){var l=!1,c={};Ba(()=>{var v=i();Ud(v),l&&il(c,v)&&(c=v,s.update(v))}),l=!0}if(s?.destroy)return()=>s.destroy()})}function Ml(e){var r,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(r=0;r<l;r++)e[r]&&(i=Ml(e[r]))&&(s&&(s+=" "),s+=i)}else for(i in e)e[i]&&(s&&(s+=" "),s+=i);return s}function Xd(){for(var e,r,i=0,s="",l=arguments.length;i<l;i++)(e=arguments[i])&&(r=Ml(e))&&(s&&(s+=" "),s+=r);return s}function Nl(e){return typeof e=="object"?Xd(e):e??""}function Jd(e,r,i){var s=e==null?"":""+e;return r&&(s=s?s+" "+r:r),s===""?null:s}function $d(e,r){return e==null?null:String(e)}function _i(e,r,i,s,l,c){var v=e.__className;if(v!==i||v===void 0){var p=Jd(i,s);p==null?e.removeAttribute("class"):e.className=p,e.__className=i}return c}function er(e,r,i,s){var l=e.__style;if(l!==r){var c=$d(r);c==null?e.removeAttribute("style"):e.style.cssText=c,e.__style=r}return s}const ev=Symbol("is custom element"),tv=Symbol("is html");function nv(e,r){var i=Ts(e);i.value===(i.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Kl(e,r){var i=Ts(e);i.checked!==(i.checked=r??void 0)&&(e.checked=r)}function st(e,r,i,s){var l=Ts(e);l[r]!==(l[r]=i)&&(r==="loading"&&(e[Pf]=i),i==null?e.removeAttribute(r):typeof i!="string"&&rv(e).includes(r)?e[r]=i:e.setAttribute(r,i))}function Ts(e){return e.__attributes??={[ev]:e.nodeName.includes("-"),[tv]:e.namespaceURI===nd}}var Tu=new Map;function rv(e){var r=e.getAttribute("is")||e.nodeName,i=Tu.get(r);if(i)return i;Tu.set(r,i=[]);for(var s,l=e,c=Element.prototype;c!==l;){s=qu(l);for(var v in s)s[v].set&&i.push(v);l=fs(l)}return i}function ks(e,r,i=r){var s=new WeakSet;Ld(e,"input",async l=>{re&&e.type==="checkbox"&&pu();var c=l?e.defaultValue:e.value;if(c=No(e)?Ko(c):c,i(c),Re!==null&&s.add(Re),await kn(),c!==(c=r())){var v=e.selectionStart,p=e.selectionEnd,h=e.value.length;if(e.value=c??"",p!==null){var _=e.value.length;v===p&&p===h&&_>h?(e.selectionStart=_,e.selectionEnd=_):(e.selectionStart=v,e.selectionEnd=Math.min(p,_))}}}),bn(r)==null&&e.value&&(i(No(e)?Ko(e.value):e.value),Re!==null&&s.add(Re)),Ba(()=>{re&&e.type==="checkbox"&&pu();var l=r();if(e===document.activeElement){var c=la??Re;if(s.has(c))return}No(e)&&l===Ko(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function No(e){var r=e.type;return r==="number"||r==="range"}function Ko(e){return e===""?null:+e}function ku(e,r){return e===r||e?.[An]===r}function Ht(e={},r,i,s){return wl(()=>{var l,c;return Ba(()=>{l=c,c=[],bn(()=>{e!==i(...c)&&(r(e,...c),l&&ku(i(...l),e)&&r(null,...l))})}),()=>{qr(()=>{c&&ku(i(...c),e)&&r(null,...c)})}}),e}function Fl(e,r,i){if(e==null)return r(void 0),ha;const s=bn(()=>e.subscribe(r,i));return s.unsubscribe?()=>s.unsubscribe():s}function iv(e){let r;return Fl(e,i=>r=i)(),r}let aa=!1,Xo=Symbol();function wa(e,r,i){const s=i[r]??={store:null,source:hl(void 0),unsubscribe:ha};if(re&&(s.source.label=r),s.store!==e&&!(Xo in i))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=ha;else{var l=!0;s.unsubscribe=Fl(e,c=>{l?s.source.v=c:N(s.source,c)}),l=!1}return e&&Xo in i?iv(e):g(s.source)}function Ea(e,r,i){let s=i[r];return s&&s.store!==e&&(s.unsubscribe(),s.unsubscribe=ha),e}function Is(){const e={};function r(){_s(()=>{for(var i in e)e[i].unsubscribe();Xn(e,Xo,{enumerable:!1,value:!0})})}return[e,r]}function av(e){var r=aa;try{return aa=!1,[e(),aa]}finally{aa=r}}function Ot(e,r,i,s){var l=!xi||(i&Zf)!==0,c=(i&Xf)!==0,v=(i&Jf)!==0,p=s,h=!0,_=()=>(h&&(h=!1,p=v?bn(s):s),p),w;if(c){var I=An in e||Lf in e;w=mr(e,r)?.set??(I&&r in e?H=>e[r]=H:void 0)}var b,x=!1;c?[b,x]=av(()=>e[r]):b=e[r],b===void 0&&s!==void 0&&(b=_(),w&&(l&&jf(r),w(b)));var O;if(l?O=()=>{var H=e[r];return H===void 0?_():(h=!0,H)}:O=()=>{var H=e[r];return H!==void 0&&(p=void 0),H===void 0?p:H},l&&(i&Qf)===0)return O;if(w){var L=e.$$legacy;return(function(H,V){return arguments.length>0?((!l||!V||L||x)&&w(V?O():H),H):O()})}var A=!1,S=((i&qf)!==0?Ka:ps)(()=>(A=!1,O()));re&&(S.label=r),c&&g(S);var F=Oe;return(function(H,V){if(arguments.length>0){const Q=V?g(S):l&&c?Ut(H):H;return N(S,Q),A=!0,p!==void 0&&(p=Q),H}return xr&&A||(F.f&Dn)!==0?S.v:g(S)})}if(re){let e=function(r){if(!(r in globalThis)){let i;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(i!==void 0)return i;zf(r)},set:s=>{i=s}})}};var rm=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const ov="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ov);ad();var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fa={exports:{}},lv=fa.exports,Iu;function cv(){return Iu||(Iu=1,(function(e,r){(function(i,s){e.exports=s()})(lv,(function(){var i=function(t,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(a[u]=o[u])},i(t,n)};function s(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var l=function(){return l=Object.assign||function(n){for(var a,o=1,u=arguments.length;o<u;o++){a=arguments[o];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(n[f]=a[f])}return n},l.apply(this,arguments)};function c(t,n,a){for(var o=0,u=n.length,f;o<u;o++)(f||!(o in n))&&(f||(f=Array.prototype.slice.call(n,0,o)),f[o]=n[o]);return t.concat(f||Array.prototype.slice.call(n))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:sv,p=Object.keys,h=Array.isArray;typeof Promise<"u"&&!v.Promise&&(v.Promise=Promise);function _(t,n){return typeof n!="object"||p(n).forEach(function(a){t[a]=n[a]}),t}var w=Object.getPrototypeOf,I={}.hasOwnProperty;function b(t,n){return I.call(t,n)}function x(t,n){typeof n=="function"&&(n=n(w(t))),(typeof Reflect>"u"?p:Reflect.ownKeys)(n).forEach(function(a){L(t,a,n[a])})}var O=Object.defineProperty;function L(t,n,a,o){O(t,n,_(a&&b(a,"get")&&typeof a.get=="function"?{get:a.get,set:a.set,configurable:!0}:{value:a,configurable:!0,writable:!0},o))}function A(t){return{from:function(n){return t.prototype=Object.create(n.prototype),L(t.prototype,"constructor",t),{extend:x.bind(null,t.prototype)}}}}var S=Object.getOwnPropertyDescriptor;function F(t,n){var a=S(t,n),o;return a||(o=w(t))&&F(o,n)}var H=[].slice;function V(t,n,a){return H.call(t,n,a)}function Q(t,n){return n(t)}function te(t){if(!t)throw new Error("Assertion Failed")}function pe(t){v.setImmediate?setImmediate(t):setTimeout(t,0)}function de(t,n){return t.reduce(function(a,o,u){var f=n(o,u);return f&&(a[f[0]]=f[1]),a},{})}function le(t,n){if(typeof n=="string"&&b(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var a=[],o=0,u=n.length;o<u;++o){var f=le(t,n[o]);a.push(f)}return a}var d=n.indexOf(".");if(d!==-1){var m=t[n.substr(0,d)];return m==null?void 0:le(m,n.substr(d+1))}}function ce(t,n,a){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){te(typeof a!="string"&&"length"in a);for(var o=0,u=n.length;o<u;++o)ce(t,n[o],a[o])}else{var f=n.indexOf(".");if(f!==-1){var d=n.substr(0,f),m=n.substr(f+1);if(m==="")a===void 0?h(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=a;else{var y=t[d];(!y||!b(t,d))&&(y=t[d]={}),ce(y,m,a)}}else a===void 0?h(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=a}}function ie(t,n){typeof n=="string"?ce(t,n,void 0):"length"in n&&[].map.call(n,function(a){ce(t,a,void 0)})}function ge(t){var n={};for(var a in t)b(t,a)&&(n[a]=t[a]);return n}var Fe=[].concat;function Me(t){return Fe.apply([],t)}var Ne="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Me([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return v[t]}),qe=new Set(Ne.map(function(t){return v[t]}));function Pe(t){var n={};for(var a in t)if(b(t,a)){var o=t[a];n[a]=!o||typeof o!="object"||qe.has(o.constructor)?o:Pe(o)}return n}function Dt(t){for(var n in t)if(b(t,n))return!1;return!0}var Ue=null;function Ge(t){Ue=new WeakMap;var n=At(t);return Ue=null,n}function At(t){if(!t||typeof t!="object")return t;var n=Ue.get(t);if(n)return n;if(h(t)){n=[],Ue.set(t,n);for(var a=0,o=t.length;a<o;++a)n.push(At(t[a]))}else if(qe.has(t.constructor))n=t;else{var u=w(t);n=u===Object.prototype?{}:Object.create(u),Ue.set(t,n);for(var f in t)b(t,f)&&(n[f]=At(t[f]))}return n}var Lt={}.toString;function $t(t){return Lt.call(t).slice(8,-1)}var gt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",J=typeof gt=="symbol"?function(t){var n;return t!=null&&(n=t[gt])&&n.apply(t)}:function(){return null};function se(t,n){var a=t.indexOf(n);return a>=0&&t.splice(a,1),a>=0}var Ie={};function Be(t){var n,a,o,u;if(arguments.length===1){if(h(t))return t.slice();if(this===Ie&&typeof t=="string")return[t];if(u=J(t)){for(a=[];o=u.next(),!o.done;)a.push(o.value);return a}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(a=new Array(n);n--;)a[n]=t[n];return a}return[t]}for(n=arguments.length,a=new Array(n);n--;)a[n]=arguments[n];return a}var He=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},en=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ve=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],nt=en.concat(Ve),Wt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function lt(t,n){this.name=t,this.message=n}A(lt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ct(t,n){return t+". Errors: "+Object.keys(n).map(function(a){return n[a].toString()}).filter(function(a,o,u){return u.indexOf(a)===o}).join(`
`)}function _t(t,n,a,o){this.failures=n,this.failedKeys=o,this.successCount=a,this.message=ct(t,n)}A(_t).from(lt);function Ze(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(a){return n[a]}),this.failuresByPos=n,this.message=ct(t,this.failures)}A(Ze).from(lt);var ln=nt.reduce(function(t,n){return t[n]=n+"Error",t},{}),Zr=lt,ae=nt.reduce(function(t,n){var a=n+"Error";function o(u,f){this.name=a,u?typeof u=="string"?(this.message="".concat(u).concat(f?`
 `+f:""),this.inner=f||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=Wt[n]||a,this.inner=null)}return A(o).from(Zr),t[n]=o,t},{});ae.Syntax=SyntaxError,ae.Type=TypeError,ae.Range=RangeError;var wn=Ve.reduce(function(t,n){return t[n+"Error"]=ae[n],t},{});function kr(t,n){if(!t||t instanceof lt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!wn[t.name])return t;var a=new wn[t.name](n||t.message,t);return"stack"in t&&L(a,"stack",{get:function(){return this.inner.stack}}),a}var Y=nt.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=ae[n]),t},{});Y.ModifyError=_t,Y.DexieError=lt,Y.BulkError=Ze;function P(){}function W(t){return t}function ne(t,n){return t==null||t===W?n:function(a){return n(t(a))}}function Te(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function ft(t,n){return t===P?n:function(){var a=t.apply(this,arguments);a!==void 0&&(arguments[0]=a);var o=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var f=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Te(o,this.onsuccess):o),u&&(this.onerror=this.onerror?Te(u,this.onerror):u),f!==void 0?f:a}}function Ce(t,n){return t===P?n:function(){t.apply(this,arguments);var a=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?Te(a,this.onsuccess):a),o&&(this.onerror=this.onerror?Te(o,this.onerror):o)}}function ke(t,n){return t===P?n:function(a){var o=t.apply(this,arguments);_(a,o);var u=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?Te(u,this.onsuccess):u),f&&(this.onerror=this.onerror?Te(f,this.onerror):f),o===void 0?d===void 0?void 0:d:_(o,d)}}function dt(t,n){return t===P?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function rt(t,n){return t===P?n:function(){var a=t.apply(this,arguments);if(a&&typeof a.then=="function"){for(var o=this,u=arguments.length,f=new Array(u);u--;)f[u]=arguments[u];return a.then(function(){return n.apply(o,f)})}return n.apply(this,arguments)}}var Qe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Le(t,n){Qe=t}var tn={},Ci=100,Ke=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,w(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,w(n),t]})(),nn=Ke[0],Ir=Ke[1],sc=Ke[2],uc=Ir&&Ir.then,ir=nn&&nn.constructor,Za=!!sc;function lc(){queueMicrotask(fc)}var Qr=function(t,n){Xr.push([t,n]),Li&&(lc(),Li=!1)},Qa=!0,Li=!0,ar=[],Pi=[],Xa=W,Rn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:P,pgp:!1,env:{},finalize:P},oe=Rn,Xr=[],or=0,Ri=[];function X(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=oe;if(typeof t!="function"){if(t!==tn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&$a(this,this._value);return}this._state=null,this._value=null,++n.ref,Ms(this,t)}var Ja={get:function(){var t=oe,n=Fi;function a(o,u){var f=this,d=!t.global&&(t!==oe||n!==Fi),m=d&&!Nn(),y=new X(function(E,D){eo(f,new Rs(Fs(o,t,d,m),Fs(u,t,d,m),E,D,t))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return a.prototype=tn,a},set:function(t){L(this,"then",t&&t.prototype===tn?Ja:{get:function(){return t},set:Ja.set})}};x(X.prototype,{then:Ja,_then:function(t,n){eo(this,new Rs(null,null,t,n,oe))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],a=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?a(o):Mi(o)}):this.then(null,function(o){return o&&o.name===n?a(o):Mi(o)})},finally:function(t){return this.then(function(n){return X.resolve(t()).then(function(){return n})},function(n){return X.resolve(t()).then(function(){return Mi(n)})})},timeout:function(t,n){var a=this;return t<1/0?new X(function(o,u){var f=setTimeout(function(){return u(new ae.Timeout(n))},t);a.then(o,u).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(X.prototype,Symbol.toStringTag,"Dexie.Promise"),Rn.env=Ks();function Rs(t,n,a,o,u){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=a,this.reject=o,this.psd=u}x(X,{all:function(){var t=Be.apply(null,arguments).map(Bi);return new X(function(n,a){t.length===0&&n([]);var o=t.length;t.forEach(function(u,f){return X.resolve(u).then(function(d){t[f]=d,--o||n(t)},a)})})},resolve:function(t){if(t instanceof X)return t;if(t&&typeof t.then=="function")return new X(function(a,o){t.then(a,o)});var n=new X(tn,!0,t);return n},reject:Mi,race:function(){var t=Be.apply(null,arguments).map(Bi);return new X(function(n,a){t.map(function(o){return X.resolve(o).then(n,a)})})},PSD:{get:function(){return oe},set:function(t){return oe=t}},totalEchoes:{get:function(){return Fi}},newPSD:Mn,usePSD:sr,scheduler:{get:function(){return Qr},set:function(t){Qr=t}},rejectionMapper:{get:function(){return Xa},set:function(t){Xa=t}},follow:function(t,n){return new X(function(a,o){return Mn(function(u,f){var d=oe;d.unhandleds=[],d.onunhandled=f,d.finalize=Te(function(){var m=this;dc(function(){m.unhandleds.length===0?u():f(m.unhandleds[0])})},d.finalize),t()},n,a,o)})}}),ir&&(ir.allSettled&&L(X,"allSettled",function(){var t=Be.apply(null,arguments).map(Bi);return new X(function(n){t.length===0&&n([]);var a=t.length,o=new Array(a);t.forEach(function(u,f){return X.resolve(u).then(function(d){return o[f]={status:"fulfilled",value:d}},function(d){return o[f]={status:"rejected",reason:d}}).then(function(){return--a||n(o)})})})}),ir.any&&typeof AggregateError<"u"&&L(X,"any",function(){var t=Be.apply(null,arguments).map(Bi);return new X(function(n,a){t.length===0&&a(new AggregateError([]));var o=t.length,u=new Array(o);t.forEach(function(f,d){return X.resolve(f).then(function(m){return n(m)},function(m){u[d]=m,--o||a(new AggregateError(u))})})})}),ir.withResolvers&&(X.withResolvers=ir.withResolvers));function Ms(t,n){try{n(function(a){if(t._state===null){if(a===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&Dr();a&&typeof a.then=="function"?Ms(t,function(u,f){a instanceof X?a._then(u,f):a.then(u,f)}):(t._state=!0,t._value=a,Ns(t)),o&&Ar()}},$a.bind(null,t))}catch(a){$a(t,a)}}function $a(t,n){if(Pi.push(n),t._state===null){var a=t._lib&&Dr();n=Xa(n),t._state=!1,t._value=n,vc(t),Ns(t),a&&Ar()}}function Ns(t){var n=t._listeners;t._listeners=[];for(var a=0,o=n.length;a<o;++a)eo(t,n[a]);var u=t._PSD;--u.ref||u.finalize(),or===0&&(++or,Qr(function(){--or===0&&to()},[]))}function eo(t,n){if(t._state===null){t._listeners.push(n);return}var a=t._state?n.onFulfilled:n.onRejected;if(a===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++or,Qr(cc,[a,t,n])}function cc(t,n,a){try{var o,u=n._value;!n._state&&Pi.length&&(Pi=[]),o=Qe&&n._consoleTask?n._consoleTask.run(function(){return t(u)}):t(u),!n._state&&Pi.indexOf(u)===-1&&hc(n),a.resolve(o)}catch(f){a.reject(f)}finally{--or===0&&to(),--a.psd.ref||a.psd.finalize()}}function fc(){sr(Rn,function(){Dr()&&Ar()})}function Dr(){var t=Qa;return Qa=!1,Li=!1,t}function Ar(){var t,n,a;do for(;Xr.length>0;)for(t=Xr,Xr=[],a=t.length,n=0;n<a;++n){var o=t[n];o[0].apply(null,o[1])}while(Xr.length>0);Qa=!0,Li=!0}function to(){var t=ar;ar=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=Ri.slice(0),a=n.length;a;)n[--a]()}function dc(t){function n(){t(),Ri.splice(Ri.indexOf(n),1)}Ri.push(n),++or,Qr(function(){--or===0&&to()},[])}function vc(t){ar.some(function(n){return n._value===t._value})||ar.push(t)}function hc(t){for(var n=ar.length;n;)if(ar[--n]._value===t._value){ar.splice(n,1);return}}function Mi(t){return new X(tn,!1,t)}function je(t,n){var a=oe;return function(){var o=Dr(),u=oe;try{return Kn(a,!0),t.apply(this,arguments)}catch(f){n&&n(f)}finally{Kn(u,!1),o&&Ar()}}}var ot={awaits:0,echoes:0,id:0},pc=0,Ni=[],Ki=0,Fi=0,mc=0;function Mn(t,n,a,o){var u=oe,f=Object.create(u);f.parent=u,f.ref=0,f.global=!1,f.id=++mc,Rn.env,f.env=Za?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject}:{},n&&_(f,n),++u.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=sr(f,t,a,o);return f.ref===0&&f.finalize(),d}function Sr(){return ot.id||(ot.id=++pc),++ot.awaits,ot.echoes+=Ci,ot.id}function Nn(){return ot.awaits?(--ot.awaits===0&&(ot.id=0),ot.echoes=ot.awaits*Ci,!0):!1}(""+uc).indexOf("[native code]")===-1&&(Sr=Nn=P);function Bi(t){return ot.echoes&&t&&t.constructor===ir?(Sr(),t.then(function(n){return Nn(),n},function(n){return Nn(),Xe(n)})):t}function yc(t){++Fi,(!ot.echoes||--ot.echoes===0)&&(ot.echoes=ot.awaits=ot.id=0),Ni.push(oe),Kn(t,!0)}function gc(){var t=Ni[Ni.length-1];Ni.pop(),Kn(t,!1)}function Kn(t,n){var a=oe;if((n?ot.echoes&&(!Ki++||t!==oe):Ki&&(!--Ki||t!==oe))&&queueMicrotask(n?yc.bind(null,t):gc),t!==oe&&(oe=t,a===Rn&&(Rn.env=Ks()),Za)){var o=Rn.env.Promise,u=t.env;(a.global||t.global)&&(Object.defineProperty(v,"Promise",u.PromiseProp),o.all=u.all,o.race=u.race,o.resolve=u.resolve,o.reject=u.reject,u.allSettled&&(o.allSettled=u.allSettled),u.any&&(o.any=u.any))}}function Ks(){var t=v.Promise;return Za?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function sr(t,n,a,o,u){var f=oe;try{return Kn(t,!0),n(a,o,u)}finally{Kn(f,!1)}}function Fs(t,n,a,o){return typeof t!="function"?t:function(){var u=oe;a&&Sr(),Kn(n,!0);try{return t.apply(this,arguments)}finally{Kn(u,!1),o&&queueMicrotask(Nn)}}}function no(t){Promise===ir&&ot.echoes===0?Ki===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var Xe=X.reject;function ro(t,n,a,o){if(!t.idbdb||!t._state.openComplete&&!oe.letThrough&&!t._vip){if(t._state.openComplete)return Xe(new ae.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Xe(new ae.DatabaseClosed);t.open().catch(P)}return t._state.dbReadyPromise.then(function(){return ro(t,n,a,o)})}else{var u=t._createTransaction(n,a,t._dbSchema);try{u.create(),t._state.PR1398_maxLoop=3}catch(f){return f.name===ln.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return ro(t,n,a,o)})):Xe(f)}return u._promise(n,function(f,d){return Mn(function(){return oe.trans=u,o(f,d,u)})}).then(function(f){if(n==="readwrite")try{u.idbtrans.commit()}catch{}return n==="readonly"?f:u._completion.then(function(){return f})})}}var Bs="4.2.1",ur="",io=-1/0,En="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",js="String expected.",Or=[],ji="__dbnames",ao="readonly",oo="readwrite";function lr(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var zs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zi(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=Ge(n),delete n[t]),n}:function(n){return n}}function Us(){throw ae.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function De(t,n){try{var a=Hs(t),o=Hs(n);if(a!==o)return a==="Array"?1:o==="Array"?-1:a==="binary"?1:o==="binary"?-1:a==="string"?1:o==="string"?-1:a==="Date"?1:o!=="Date"?NaN:-1;switch(a){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return bc(Vs(t),Vs(n));case"Array":return _c(t,n)}}catch{}return NaN}function _c(t,n){for(var a=t.length,o=n.length,u=a<o?a:o,f=0;f<u;++f){var d=De(t[f],n[f]);if(d!==0)return d}return a===o?0:a<o?-1:1}function bc(t,n){for(var a=t.length,o=n.length,u=a<o?a:o,f=0;f<u;++f)if(t[f]!==n[f])return t[f]<n[f]?-1:1;return a===o?0:a<o?-1:1}function Hs(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var a=$t(t);return a==="ArrayBuffer"?"binary":a}function Vs(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Ui(t,n,a){var o=t.schema.yProps;return o?(n&&a.numFailures>0&&(n=n.filter(function(u,f){return!a.failures[f]})),Promise.all(o.map(function(u){var f=u.updatesTable;return n?t.db.table(f).where("k").anyOf(n).delete():t.db.table(f).clear()})).then(function(){return a})):a}var Jr=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var a,o=this["@@propmod"];if(o.add!==void 0){var u=o.add;if(h(u))return c(c([],h(n)?n:[],!0),u).sort();if(typeof u=="number")return(Number(n)||0)+u;if(typeof u=="bigint")try{return BigInt(n)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(o.remove!==void 0){var f=o.remove;if(h(f))return h(n)?n.filter(function(m){return!f.includes(m)}).sort():[];if(typeof f=="number")return Number(n)-f;if(typeof f=="bigint")try{return BigInt(n)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}var d=(a=o.replacePrefix)===null||a===void 0?void 0:a[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function Ws(t,n){for(var a=p(n),o=a.length,u=!1,f=0;f<o;++f){var d=a[f],m=n[d],y=le(t,d);m instanceof Jr?(ce(t,d,m.execute(y)),u=!0):y!==m&&(ce(t,d,m),u=!0)}return u}var Gs=(function(){function t(){}return t.prototype._trans=function(n,a,o){var u=this._tx||oe.trans,f=this.name,d=Qe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function m(D,T,M){if(!M.schema[f])throw new ae.NotFound("Table "+f+" not part of transaction");return a(M.idbtrans,M)}var y=Dr();try{var E=u&&u.db._novip===this.db._novip?u===oe.trans?u._promise(n,m,o):Mn(function(){return u._promise(n,m,o)},{trans:u,transless:oe.transless||oe}):ro(this.db,n,[this.name],m);return d&&(E._consoleTask=d,E=E.catch(function(D){return console.trace(D),Xe(D)})),E}finally{y&&Ar()}},t.prototype.get=function(n,a){var o=this;return n&&n.constructor===Object?this.where(n).first(a):n==null?Xe(new ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return o.core.get({trans:u,key:n}).then(function(f){return o.hook.reading.fire(f)})}).then(a)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(h(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var a=p(n);if(a.length===1)return this.where(a[0]).equals(n[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&a.every(function(M){return D.keyPath.indexOf(M)>=0})){for(var T=0;T<a.length;++T)if(a.indexOf(D.keyPath[T])===-1)return!1;return!0}return!1}).sort(function(D,T){return D.keyPath.length-T.keyPath.length})[0];if(o&&this.db._maxKey!==ur){var u=o.keyPath.slice(0,a.length);return this.where(u).equals(u.map(function(D){return n[D]}))}!o&&Qe&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var f=this.schema.idxByName;function d(D,T){return De(D,T)===0}var m=a.reduce(function(D,T){var M=D[0],G=D[1],k=f[T],C=n[T];return[M||k,M||!k?lr(G,k&&k.multi?function(R){var K=le(R,T);return h(K)&&K.some(function(j){return d(C,j)})}:function(R){return d(C,le(R,T))}):G]},[null,null]),y=m[0],E=m[1];return y?this.where(y.name).equals(n[y.keyPath]).filter(E):o?this.filter(E):this.where(a).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,h(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var a=this,o=a.db,u=a.name;this.schema.mappedClass=n,n.prototype instanceof Us&&(n=(function(y){s(E,y);function E(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(E.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),E.prototype.table=function(){return u},E})(n));for(var f=new Set,d=n.prototype;d;d=w(d))Object.getOwnPropertyNames(d).forEach(function(y){return f.add(y)});var m=function(y){if(!y)return y;var E=Object.create(n.prototype);for(var D in y)if(!f.has(D))try{E[D]=y[D]}catch{}return E};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),n},t.prototype.defineClass=function(){function n(a){_(this,a)}return this.mapToClass(n)},t.prototype.add=function(n,a){var o=this,u=this.schema.primKey,f=u.auto,d=u.keyPath,m=n;return d&&f&&(m=zi(d)(n)),this._trans("readwrite",function(y){return o.core.mutate({trans:y,type:"add",keys:a!=null?[a]:null,values:[m]})}).then(function(y){return y.numFailures?X.reject(y.failures[0]):y.lastResult}).then(function(y){if(d)try{ce(n,d,y)}catch{}return y})},t.prototype.upsert=function(n,a){var o=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(f){return o.core.get({trans:f,key:n}).then(function(d){var m=d??{};return Ws(m,a),u&&ce(m,u,n),o.core.mutate({trans:f,type:"put",values:[m],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[a]}}).then(function(y){return y.numFailures?X.reject(y.failures[0]):!!d})})})},t.prototype.update=function(n,a){if(typeof n=="object"&&!h(n)){var o=le(n,this.schema.primKey.keyPath);return o===void 0?Xe(new ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(a)}else return this.where(":id").equals(n).modify(a)},t.prototype.put=function(n,a){var o=this,u=this.schema.primKey,f=u.auto,d=u.keyPath,m=n;return d&&f&&(m=zi(d)(n)),this._trans("readwrite",function(y){return o.core.mutate({trans:y,type:"put",values:[m],keys:a!=null?[a]:null})}).then(function(y){return y.numFailures?X.reject(y.failures[0]):y.lastResult}).then(function(y){if(d)try{ce(n,d,y)}catch{}return y})},t.prototype.delete=function(n){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(u){return Ui(a,[n],u)}).then(function(u){return u.numFailures?X.reject(u.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"deleteRange",range:zs}).then(function(o){return Ui(n,null,o)})}).then(function(a){return a.numFailures?X.reject(a.failures[0]):void 0})},t.prototype.bulkGet=function(n){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:n,trans:o}).then(function(u){return u.map(function(f){return a.hook.reading.fire(f)})})})},t.prototype.bulkAdd=function(n,a,o){var u=this,f=Array.isArray(a)?a:void 0;o=o||(f?void 0:a);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(m){var y=u.schema.primKey,E=y.auto,D=y.keyPath;if(D&&f)throw new ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var T=n.length,M=D&&E?n.map(zi(D)):n;return u.core.mutate({trans:m,type:"add",keys:f,values:M,wantResults:d}).then(function(G){var k=G.numFailures,C=G.results,R=G.lastResult,K=G.failures,j=d?C:R;if(k===0)return j;throw new Ze("".concat(u.name,".bulkAdd(): ").concat(k," of ").concat(T," operations failed"),K)})})},t.prototype.bulkPut=function(n,a,o){var u=this,f=Array.isArray(a)?a:void 0;o=o||(f?void 0:a);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(m){var y=u.schema.primKey,E=y.auto,D=y.keyPath;if(D&&f)throw new ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var T=n.length,M=D&&E?n.map(zi(D)):n;return u.core.mutate({trans:m,type:"put",keys:f,values:M,wantResults:d}).then(function(G){var k=G.numFailures,C=G.results,R=G.lastResult,K=G.failures,j=d?C:R;if(k===0)return j;throw new Ze("".concat(u.name,".bulkPut(): ").concat(k," of ").concat(T," operations failed"),K)})})},t.prototype.bulkUpdate=function(n){var a=this,o=this.core,u=n.map(function(m){return m.key}),f=n.map(function(m){return m.changes}),d=[];return this._trans("readwrite",function(m){return o.getMany({trans:m,keys:u,cache:"clone"}).then(function(y){var E=[],D=[];n.forEach(function(M,G){var k=M.key,C=M.changes,R=y[G];if(R){for(var K=0,j=Object.keys(C);K<j.length;K++){var z=j[K],U=C[z];if(z===a.schema.primKey.keyPath){if(De(U,k)!==0)throw new ae.Constraint("Cannot update primary key in bulkUpdate()")}else ce(R,z,U)}d.push(G),E.push(k),D.push(R)}});var T=E.length;return o.mutate({trans:m,type:"put",keys:E,values:D,updates:{keys:u,changeSpecs:f}}).then(function(M){var G=M.numFailures,k=M.failures;if(G===0)return T;for(var C=0,R=Object.keys(k);C<R.length;C++){var K=R[C],j=d[Number(K)];if(j!=null){var z=k[K];delete k[K],k[j]=z}}throw new Ze("".concat(a.name,".bulkUpdate(): ").concat(G," of ").concat(T," operations failed"),k)})})})},t.prototype.bulkDelete=function(n){var a=this,o=n.length;return this._trans("readwrite",function(u){return a.core.mutate({trans:u,type:"delete",keys:n}).then(function(f){return Ui(a,n,f)})}).then(function(u){var f=u.numFailures,d=u.lastResult,m=u.failures;if(f===0)return d;throw new Ze("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),m)})},t})();function $r(t){var n={},a=function(m,y){if(y){for(var E=arguments.length,D=new Array(E-1);--E;)D[E-1]=arguments[E];return n[m].subscribe.apply(null,D),t}else if(typeof m=="string")return n[m]};a.addEventType=f;for(var o=1,u=arguments.length;o<u;++o)f(arguments[o]);return a;function f(m,y,E){if(typeof m=="object")return d(m);y||(y=dt),E||(E=P);var D={subscribers:[],fire:E,subscribe:function(T){D.subscribers.indexOf(T)===-1&&(D.subscribers.push(T),D.fire=y(D.fire,T))},unsubscribe:function(T){D.subscribers=D.subscribers.filter(function(M){return M!==T}),D.fire=D.subscribers.reduce(y,E)}};return n[m]=a[m]=D,D}function d(m){p(m).forEach(function(y){var E=m[y];if(h(E))f(y,m[y][0],m[y][1]);else if(E==="asap")var D=f(y,W,function(){for(var M=arguments.length,G=new Array(M);M--;)G[M]=arguments[M];D.subscribers.forEach(function(k){pe(function(){k.apply(null,G)})})});else throw new ae.InvalidArgument("Invalid event config")})}}function ei(t,n){return A(n).from({prototype:t}),n}function wc(t){return ei(Gs.prototype,function(a,o,u){this.db=t,this._tx=u,this.name=a,this.schema=o,this.hook=t._allTables[a]?t._allTables[a].hook:$r(null,{creating:[ft,P],reading:[ne,W],updating:[ke,P],deleting:[Ce,P]})})}function Cr(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function so(t,n){t.filter=lr(t.filter,n)}function uo(t,n,a){var o=t.replayFilter;t.replayFilter=o?function(){return lr(o(),n())}:n,t.justLimit=a&&!o}function Ec(t,n){t.isMatch=lr(t.isMatch,n)}function Hi(t,n){if(t.isPrimKey)return n.primaryKey;var a=n.getIndexByKeyPath(t.index);if(!a)throw new ae.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return a}function Ys(t,n,a){var o=Hi(t,n.schema);return n.openCursor({trans:a,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function Vi(t,n,a,o){var u=t.replayFilter?lr(t.filter,t.replayFilter()):t.filter;if(t.or){var f={},d=function(m,y,E){if(!u||u(y,E,function(M){return y.stop(M)},function(M){return y.fail(M)})){var D=y.primaryKey,T=""+D;T==="[object ArrayBuffer]"&&(T=""+new Uint8Array(D)),b(f,T)||(f[T]=!0,n(m,y,E))}};return Promise.all([t.or._iterate(d,a),qs(Ys(t,o,a),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return qs(Ys(t,o,a),lr(t.algorithm,u),n,!t.keysOnly&&t.valueMapper)}function qs(t,n,a,o){var u=o?function(d,m,y){return a(o(d),m,y)}:a,f=je(u);return t.then(function(d){if(d)return d.start(function(){var m=function(){return d.continue()};(!n||n(d,function(y){return m=y},function(y){d.stop(y),m=P},function(y){d.fail(y),m=P}))&&f(d.value,d,function(y){return m=y}),m()})})}var xc=(function(){function t(){}return t.prototype._read=function(n,a){var o=this._ctx;return o.error?o.table._trans(null,Xe.bind(null,o.error)):o.table._trans("readonly",n).then(a)},t.prototype._write=function(n){var a=this._ctx;return a.error?a.table._trans(null,Xe.bind(null,a.error)):a.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var a=this._ctx;a.algorithm=lr(a.algorithm,n)},t.prototype._iterate=function(n,a){return Vi(this._ctx,n,a,this._ctx.table.core)},t.prototype.clone=function(n){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&_(o,n),a._ctx=o,a},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var a=this._ctx;return this._read(function(o){return Vi(a,n,o,a.table.core)})},t.prototype.count=function(n){var a=this;return this._read(function(o){var u=a._ctx,f=u.table.core;if(Cr(u,!0))return f.count({trans:o,query:{index:Hi(u,f.schema),range:u.range}}).then(function(m){return Math.min(m,u.limit)});var d=0;return Vi(u,function(){return++d,!1},o,f).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,a){var o=n.split(".").reverse(),u=o[0],f=o.length-1;function d(E,D){return D?d(E[o[D]],D-1):E[u]}var m=this._ctx.dir==="next"?1:-1;function y(E,D){var T=d(E,f),M=d(D,f);return De(T,M)*m}return this.toArray(function(E){return E.sort(y)}).then(a)},t.prototype.toArray=function(n){var a=this;return this._read(function(o){var u=a._ctx;if(u.dir==="next"&&Cr(u,!0)&&u.limit>0){var f=u.valueMapper,d=Hi(u,u.table.core.schema);return u.table.core.query({trans:o,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(y){var E=y.result;return f?E.map(f):E})}else{var m=[];return Vi(u,function(y){return m.push(y)},o,u.table.core).then(function(){return m})}},n)},t.prototype.offset=function(n){var a=this._ctx;return n<=0?this:(a.offset+=n,Cr(a)?uo(a,function(){var o=n;return function(u,f){return o===0?!0:o===1?(--o,!1):(f(function(){u.advance(o),o=0}),!1)}}):uo(a,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),uo(this._ctx,function(){var a=n;return function(o,u,f){return--a<=0&&u(f),a>=0}},!0),this},t.prototype.until=function(n,a){return so(this._ctx,function(o,u,f){return n(o.value)?(u(f),a):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(a){return a[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return so(this._ctx,function(a){return n(a.value)}),Ec(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.key,u)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.primaryKey,u)})},t.prototype.keys=function(n){var a=this._ctx;a.keysOnly=!a.isMatch;var o=[];return this.each(function(u,f){o.push(f.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var a=this._ctx;if(a.dir==="next"&&Cr(a,!0)&&a.limit>0)return this._read(function(u){var f=Hi(a,a.table.core.schema);return a.table.core.query({trans:u,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(u){var f=u.result;return f}).then(n);a.keysOnly=!a.isMatch;var o=[];return this.each(function(u,f){o.push(f.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(a){return a[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,a=n.index&&n.table.schema.idxByName[n.index];if(!a||!a.multi)return this;var o={};return so(this._ctx,function(u){var f=u.primaryKey.toString(),d=b(o,f);return o[f]=!0,!d}),this},t.prototype.modify=function(n){var a=this,o=this._ctx;return this._write(function(u){var f;typeof n=="function"?f=n:f=function(K){return Ws(K,n)};var d=o.table.core,m=d.schema.primaryKey,y=m.outbound,E=m.extractKey,D=200,T=a.db._options.modifyChunkSize;T&&(typeof T=="object"?D=T[d.name]||T["*"]||200:D=T);var M=[],G=0,k=[],C=function(K,j){var z=j.failures,U=j.numFailures;G+=K-U;for(var B=0,q=p(z);B<q.length;B++){var $=q[B];M.push(z[$])}},R=n===Zs;return a.clone().primaryKeys().then(function(K){var j=Cr(o)&&o.limit===1/0&&(typeof n!="function"||R)&&{index:o.index,range:o.range},z=function(U){var B=Math.min(D,K.length-U),q=K.slice(U,U+B);return(R?Promise.resolve([]):d.getMany({trans:u,keys:q,cache:"immutable"})).then(function($){var Z=[],fe=[],we=y?[]:null,ee=R?q:[];if(!R)for(var _e=0;_e<B;++_e){var ve=$[_e],Ae={value:Ge(ve),primKey:K[U+_e]};f.call(Ae,Ae.value,Ae)!==!1&&(Ae.value==null?ee.push(K[U+_e]):!y&&De(E(ve),E(Ae.value))!==0?(ee.push(K[U+_e]),Z.push(Ae.value)):(fe.push(Ae.value),y&&we.push(K[U+_e])))}return Promise.resolve(Z.length>0&&d.mutate({trans:u,type:"add",values:Z}).then(function(ue){for(var Ye in ue.failures)ee.splice(parseInt(Ye),1);C(Z.length,ue)})).then(function(){return(fe.length>0||j&&typeof n=="object")&&d.mutate({trans:u,type:"put",keys:we,values:fe,criteria:j,changeSpec:typeof n!="function"&&n,isAdditionalChunk:U>0}).then(function(ue){return C(fe.length,ue)})}).then(function(){return(ee.length>0||j&&R)&&d.mutate({trans:u,type:"delete",keys:ee,criteria:j,isAdditionalChunk:U>0}).then(function(ue){return Ui(o.table,ee,ue)}).then(function(ue){return C(ee.length,ue)})}).then(function(){return K.length>U+B&&z(U+D)})})};return z(0).then(function(){if(M.length>0)throw new _t("Error modifying one or more objects",M,G,k);return K.length})})})},t.prototype.delete=function(){var n=this._ctx,a=n.range;return Cr(n)&&!n.table.schema.yProps&&(n.isPrimKey||a.type===3)?this._write(function(o){var u=n.table.core.schema.primaryKey,f=a;return n.table.core.count({trans:o,query:{index:u,range:f}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(m){var y=m.failures,E=m.numFailures;if(E)throw new _t("Could not delete some values",Object.keys(y).map(function(D){return y[D]}),d-E);return d-E})})}):this.modify(Zs)},t})(),Zs=function(t,n){return n.value=null};function Tc(t){return ei(xc.prototype,function(a,o){this.db=t;var u=zs,f=null;if(o)try{u=o()}catch(E){f=E}var d=a._ctx,m=d.table,y=m.hook.reading.fire;this._ctx={table:m,index:d.index,isPrimKey:!d.index||m.schema.primKey.keyPath&&d.index===m.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:d.or,valueMapper:y!==W?y:null}})}function kc(t,n){return t<n?-1:t===n?0:1}function Ic(t,n){return t>n?-1:t===n?0:1}function jt(t,n,a){var o=t instanceof Xs?new t.Collection(t):t;return o._ctx.error=a?new a(n):new TypeError(n),o}function Lr(t){return new t.Collection(t,function(){return Qs("")}).limit(0)}function Dc(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function Ac(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function Sc(t,n,a,o,u,f){for(var d=Math.min(t.length,o.length),m=-1,y=0;y<d;++y){var E=n[y];if(E!==o[y])return u(t[y],a[y])<0?t.substr(0,y)+a[y]+a.substr(y+1):u(t[y],o[y])<0?t.substr(0,y)+o[y]+a.substr(y+1):m>=0?t.substr(0,m)+n[m]+a.substr(m+1):null;u(t[y],E)<0&&(m=y)}return d<o.length&&f==="next"?t+a.substr(t.length):d<t.length&&f==="prev"?t.substr(0,a.length):m<0?null:t.substr(0,m)+o[m]+a.substr(m+1)}function Wi(t,n,a,o){var u,f,d,m,y,E,D,T=a.length;if(!a.every(function(C){return typeof C=="string"}))return jt(t,js);function M(C){u=Dc(C),f=Ac(C),d=C==="next"?kc:Ic;var R=a.map(function(K){return{lower:f(K),upper:u(K)}}).sort(function(K,j){return d(K.lower,j.lower)});m=R.map(function(K){return K.upper}),y=R.map(function(K){return K.lower}),E=C,D=C==="next"?"":o}M("next");var G=new t.Collection(t,function(){return Fn(m[0],y[T-1]+o)});G._ondirectionchange=function(C){M(C)};var k=0;return G._addAlgorithm(function(C,R,K){var j=C.key;if(typeof j!="string")return!1;var z=f(j);if(n(z,y,k))return!0;for(var U=null,B=k;B<T;++B){var q=Sc(j,z,m[B],y[B],d,E);q===null&&U===null?k=B+1:(U===null||d(U,q)>0)&&(U=q)}return R(U!==null?function(){C.continue(U+D)}:K),!1}),G}function Fn(t,n,a,o){return{type:2,lower:t,upper:n,lowerOpen:a,upperOpen:o}}function Qs(t){return{type:1,lower:t,upper:t}}var Xs=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,a,o,u){o=o!==!1,u=u===!0;try{return this._cmp(n,a)>0||this._cmp(n,a)===0&&(o||u)&&!(o&&u)?Lr(this):new this.Collection(this,function(){return Fn(n,a,!o,!u)})}catch{return jt(this,En)}},t.prototype.equals=function(n){return n==null?jt(this,En):new this.Collection(this,function(){return Qs(n)})},t.prototype.above=function(n){return n==null?jt(this,En):new this.Collection(this,function(){return Fn(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?jt(this,En):new this.Collection(this,function(){return Fn(n,void 0,!1)})},t.prototype.below=function(n){return n==null?jt(this,En):new this.Collection(this,function(){return Fn(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?jt(this,En):new this.Collection(this,function(){return Fn(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?jt(this,js):this.between(n,n+ur,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Wi(this,function(a,o){return a.indexOf(o[0])===0},[n],ur)},t.prototype.equalsIgnoreCase=function(n){return Wi(this,function(a,o){return a===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=Be.apply(Ie,arguments);return n.length===0?Lr(this):Wi(this,function(a,o){return o.indexOf(a)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=Be.apply(Ie,arguments);return n.length===0?Lr(this):Wi(this,function(a,o){return o.some(function(u){return a.indexOf(u)===0})},n,ur)},t.prototype.anyOf=function(){var n=this,a=Be.apply(Ie,arguments),o=this._cmp;try{a.sort(o)}catch{return jt(this,En)}if(a.length===0)return Lr(this);var u=new this.Collection(this,function(){return Fn(a[0],a[a.length-1])});u._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,a.sort(o)};var f=0;return u._addAlgorithm(function(d,m,y){for(var E=d.key;o(E,a[f])>0;)if(++f,f===a.length)return m(y),!1;return o(E,a[f])===0?!0:(m(function(){d.continue(a[f])}),!1)}),u},t.prototype.notEqual=function(n){return this.inAnyRange([[io,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=Be.apply(Ie,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return jt(this,En)}var a=n.reduce(function(o,u){return o?o.concat([[o[o.length-1][1],u]]):[[io,u]]},null);return a.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,a){var o=this,u=this._cmp,f=this._ascending,d=this._descending,m=this._min,y=this._max;if(n.length===0)return Lr(this);if(!n.every(function(B){return B[0]!==void 0&&B[1]!==void 0&&f(B[0],B[1])<=0}))return jt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ae.InvalidArgument);var E=!a||a.includeLowers!==!1,D=a&&a.includeUppers===!0;function T(B,q){for(var $=0,Z=B.length;$<Z;++$){var fe=B[$];if(u(q[0],fe[1])<0&&u(q[1],fe[0])>0){fe[0]=m(fe[0],q[0]),fe[1]=y(fe[1],q[1]);break}}return $===Z&&B.push(q),B}var M=f;function G(B,q){return M(B[0],q[0])}var k;try{k=n.reduce(T,[]),k.sort(G)}catch{return jt(this,En)}var C=0,R=D?function(B){return f(B,k[C][1])>0}:function(B){return f(B,k[C][1])>=0},K=E?function(B){return d(B,k[C][0])>0}:function(B){return d(B,k[C][0])>=0};function j(B){return!R(B)&&!K(B)}var z=R,U=new this.Collection(this,function(){return Fn(k[0][0],k[k.length-1][1],!E,!D)});return U._ondirectionchange=function(B){B==="next"?(z=R,M=f):(z=K,M=d),k.sort(G)},U._addAlgorithm(function(B,q,$){for(var Z=B.key;z(Z);)if(++C,C===k.length)return q($),!1;return j(Z)?!0:(o._cmp(Z,k[C][1])===0||o._cmp(Z,k[C][0])===0||q(function(){M===f?B.continue(k[C][0]):B.continue(k[C][1])}),!1)}),U},t.prototype.startsWithAnyOf=function(){var n=Be.apply(Ie,arguments);return n.every(function(a){return typeof a=="string"})?n.length===0?Lr(this):this.inAnyRange(n.map(function(a){return[a,a+ur]})):jt(this,"startsWithAnyOf() only works with strings")},t})();function Oc(t){return ei(Xs.prototype,function(a,o,u){if(this.db=t,this._ctx={table:a,index:o===":id"?null:o,or:u},this._cmp=this._ascending=De,this._descending=function(f,d){return De(d,f)},this._max=function(f,d){return De(f,d)>0?f:d},this._min=function(f,d){return De(f,d)<0?f:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new ae.MissingAPI})}function cn(t){return je(function(n){return ti(n),t(n.target.error),!1})}function ti(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ni="storagemutated",lo="x-storagemutated-1",Bn=$r(null,ni),Cc=(function(){function t(){}return t.prototype._lock=function(){return te(!oe.global),++this._reculock,this._reculock===1&&!oe.global&&(oe.lockOwnerFor=this),this},t.prototype._unlock=function(){if(te(!oe.global),--this._reculock===0)for(oe.global||(oe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{sr(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&oe.lockOwnerFor!==this},t.prototype.create=function(n){var a=this;if(!this.mode)return this;var o=this.db.idbdb,u=this.db._state.dbOpenError;if(te(!this.idbtrans),!n&&!o)switch(u&&u.name){case"DatabaseClosedError":throw new ae.DatabaseClosed(u);case"MissingAPIError":throw new ae.MissingAPI(u.message,u);default:throw new ae.OpenFailed(u)}if(!this.active)throw new ae.TransactionInactive;return te(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=je(function(f){ti(f),a._reject(n.error)}),n.onabort=je(function(f){ti(f),a.active&&a._reject(new ae.Abort(n.error)),a.active=!1,a.on("abort").fire(f)}),n.oncomplete=je(function(){a.active=!1,a._resolve(),"mutatedParts"in n&&Bn.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,a,o){var u=this;if(n==="readwrite"&&this.mode!=="readwrite")return Xe(new ae.ReadOnly("Transaction is readonly"));if(!this.active)return Xe(new ae.TransactionInactive);if(this._locked())return new X(function(d,m){u._blockedFuncs.push([function(){u._promise(n,a,o).then(d,m)},oe])});if(o)return Mn(function(){var d=new X(function(m,y){u._lock();var E=a(m,y,u);E&&E.then&&E.then(m,y)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var f=new X(function(d,m){var y=a(d,m,u);y&&y.then&&y.then(d,m)});return f._lib=!0,f},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var a=this._root(),o=X.resolve(n);if(a._waitingFor)a._waitingFor=a._waitingFor.then(function(){return o});else{a._waitingFor=o,a._waitingQueue=[];var u=a.idbtrans.objectStore(a.storeNames[0]);(function d(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(u.get(-1/0).onsuccess=d)})()}var f=a._waitingFor;return new X(function(d,m){o.then(function(y){return a._waitingQueue.push(je(d.bind(null,y)))},function(y){return a._waitingQueue.push(je(m.bind(null,y)))}).finally(function(){a._waitingFor===f&&(a._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ae.Abort))},t.prototype.table=function(n){var a=this._memoizedTables||(this._memoizedTables={});if(b(a,n))return a[n];var o=this.schema[n];if(!o)throw new ae.NotFound("Table "+n+" not part of transaction");var u=new this.db.Table(n,o,this);return u.core=this.db.core.table(n),a[n]=u,u},t})();function Lc(t){return ei(Cc.prototype,function(a,o,u,f,d){var m=this;a!=="readonly"&&o.forEach(function(y){var E,D=(E=u[y])===null||E===void 0?void 0:E.yProps;D&&(o=o.concat(D.map(function(T){return T.updatesTable})))}),this.db=t,this.mode=a,this.storeNames=o,this.schema=u,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=$r(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X(function(y,E){m._resolve=y,m._reject=E}),this._completion.then(function(){m.active=!1,m.on.complete.fire()},function(y){var E=m.active;return m.active=!1,m.on.error.fire(y),m.parent?m.parent._reject(y):E&&m.idbtrans&&m.idbtrans.abort(),Xe(y)})})}function co(t,n,a,o,u,f,d,m){return{name:t,keyPath:n,unique:a,multi:o,auto:u,compound:f,src:(a&&!d?"&":"")+(o?"*":"")+(u?"++":"")+Js(n),type:m}}function Js(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function fo(t,n,a){return{name:t,primKey:n,indexes:a,mappedClass:null,idxByName:de(a,function(o){return[o.name,o]})}}function Pc(t){return t.length===1?t[0]:t}var ri=function(t){try{return t.only([[]]),ri=function(){return[[]]},[[]]}catch{return ri=function(){return ur},ur}};function vo(t){return t==null?function(){}:typeof t=="string"?Rc(t):function(n){return le(n,t)}}function Rc(t){var n=t.split(".");return n.length===1?function(a){return a[t]}:function(a){return le(a,t)}}function $s(t){return[].slice.call(t)}var Mc=0;function ii(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Nc(t,n,a){function o(T,M){var G=$s(T.objectStoreNames);return{schema:{name:T.name,tables:G.map(function(k){return M.objectStore(k)}).map(function(k){var C=k.keyPath,R=k.autoIncrement,K=h(C),j=C==null,z={},U={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j,compound:K,keyPath:C,autoIncrement:R,unique:!0,extractKey:vo(C)},indexes:$s(k.indexNames).map(function(B){return k.index(B)}).map(function(B){var q=B.name,$=B.unique,Z=B.multiEntry,fe=B.keyPath,we=h(fe),ee={name:q,compound:we,keyPath:fe,unique:$,multiEntry:Z,extractKey:vo(fe)};return z[ii(fe)]=ee,ee}),getIndexByKeyPath:function(B){return z[ii(B)]}};return z[":id"]=U.primaryKey,C!=null&&(z[ii(C)]=U.primaryKey),U})},hasGetAll:G.length>0&&"getAll"in M.objectStore(G[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function u(T){if(T.type===3)return null;if(T.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=T.lower,G=T.upper,k=T.lowerOpen,C=T.upperOpen,R=M===void 0?G===void 0?null:n.upperBound(G,!!C):G===void 0?n.lowerBound(M,!!k):n.bound(M,G,!!k,!!C);return R}function f(T){var M=T.name;function G(R){var K=R.trans,j=R.type,z=R.keys,U=R.values,B=R.range;return new Promise(function(q,$){q=je(q);var Z=K.objectStore(M),fe=Z.keyPath==null,we=j==="put"||j==="add";if(!we&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var ee=(z||U||{length:1}).length;if(z&&U&&z.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(ee===0)return q({numFailures:0,failures:{},results:[],lastResult:void 0});var _e,ve=[],Ae=[],ue=0,Ye=function(dn){++ue,ti(dn)};if(j==="deleteRange"){if(B.type===4)return q({numFailures:ue,failures:Ae,results:[],lastResult:void 0});B.type===3?ve.push(_e=Z.clear()):ve.push(_e=Z.delete(u(B)))}else{var wt=we?fe?[U,z]:[U,null]:[z,null],fn=wt[0],Pt=wt[1];if(we)for(var Gt=0;Gt<ee;++Gt)ve.push(_e=Pt&&Pt[Gt]!==void 0?Z[j](fn[Gt],Pt[Gt]):Z[j](fn[Gt])),_e.onerror=Ye;else for(var Gt=0;Gt<ee;++Gt)ve.push(_e=Z[j](fn[Gt])),_e.onerror=Ye}var Un=function(dn){var si=dn.target.result;ve.forEach(function(rn,ra){return rn.error!=null&&(Ae[ra]=rn.error)}),q({numFailures:ue,failures:Ae,results:j==="delete"?z:ve.map(function(rn){return rn.result}),lastResult:si})};_e.onerror=function(dn){Ye(dn),Un(dn)},_e.onsuccess=Un})}function k(R){var K=R.trans,j=R.values,z=R.query,U=R.reverse,B=R.unique;return new Promise(function(q,$){q=je(q);var Z=z.index,fe=z.range,we=K.objectStore(M),ee=Z.isPrimaryKey?we:we.index(Z.name),_e=U?B?"prevunique":"prev":B?"nextunique":"next",ve=j||!("openKeyCursor"in ee)?ee.openCursor(u(fe),_e):ee.openKeyCursor(u(fe),_e);ve.onerror=cn($),ve.onsuccess=je(function(Ae){var ue=ve.result;if(!ue){q(null);return}ue.___id=++Mc,ue.done=!1;var Ye=ue.continue.bind(ue),wt=ue.continuePrimaryKey;wt&&(wt=wt.bind(ue));var fn=ue.advance.bind(ue),Pt=function(){throw new Error("Cursor not started")},Gt=function(){throw new Error("Cursor not stopped")};ue.trans=K,ue.stop=ue.continue=ue.continuePrimaryKey=ue.advance=Pt,ue.fail=je($),ue.next=function(){var Un=this,dn=1;return this.start(function(){return dn--?Un.continue():Un.stop()}).then(function(){return Un})},ue.start=function(Un){var dn=new Promise(function(rn,ra){rn=je(rn),ve.onerror=cn(ra),ue.fail=ra,ue.stop=function(Tf){ue.stop=ue.continue=ue.continuePrimaryKey=ue.advance=Gt,rn(Tf)}}),si=function(){if(ve.result)try{Un()}catch(rn){ue.fail(rn)}else ue.done=!0,ue.start=function(){throw new Error("Cursor behind last entry")},ue.stop()};return ve.onsuccess=je(function(rn){ve.onsuccess=si,si()}),ue.continue=Ye,ue.continuePrimaryKey=wt,ue.advance=fn,si(),dn},q(ue)},$)})}function C(R){return function(K){return new Promise(function(j,z){j=je(j);var U=K.trans,B=K.values,q=K.limit,$=K.query,Z=q===1/0?void 0:q,fe=$.index,we=$.range,ee=U.objectStore(M),_e=fe.isPrimaryKey?ee:ee.index(fe.name),ve=u(we);if(q===0)return j({result:[]});if(R){var Ae=B?_e.getAll(ve,Z):_e.getAllKeys(ve,Z);Ae.onsuccess=function(fn){return j({result:fn.target.result})},Ae.onerror=cn(z)}else{var ue=0,Ye=B||!("openKeyCursor"in _e)?_e.openCursor(ve):_e.openKeyCursor(ve),wt=[];Ye.onsuccess=function(fn){var Pt=Ye.result;if(!Pt)return j({result:wt});if(wt.push(B?Pt.value:Pt.primaryKey),++ue===q)return j({result:wt});Pt.continue()},Ye.onerror=cn(z)}})}}return{name:M,schema:T,mutate:G,getMany:function(R){var K=R.trans,j=R.keys;return new Promise(function(z,U){z=je(z);for(var B=K.objectStore(M),q=j.length,$=new Array(q),Z=0,fe=0,we,ee=function(ue){var Ye=ue.target;($[Ye._pos]=Ye.result)!=null,++fe===Z&&z($)},_e=cn(U),ve=0;ve<q;++ve){var Ae=j[ve];Ae!=null&&(we=B.get(j[ve]),we._pos=ve,we.onsuccess=ee,we.onerror=_e,++Z)}Z===0&&z($)})},get:function(R){var K=R.trans,j=R.key;return new Promise(function(z,U){z=je(z);var B=K.objectStore(M),q=B.get(j);q.onsuccess=function($){return z($.target.result)},q.onerror=cn(U)})},query:C(y),openCursor:k,count:function(R){var K=R.query,j=R.trans,z=K.index,U=K.range;return new Promise(function(B,q){var $=j.objectStore(M),Z=z.isPrimaryKey?$:$.index(z.name),fe=u(U),we=fe?Z.count(fe):Z.count();we.onsuccess=je(function(ee){return B(ee.target.result)}),we.onerror=cn(q)})}}}var d=o(t,a),m=d.schema,y=d.hasGetAll,E=m.tables.map(function(T){return f(T)}),D={};return E.forEach(function(T){return D[T.name]=T}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(T){var M=D[T];if(!M)throw new Error("Table '".concat(T,"' not found"));return D[T]},MIN_KEY:-1/0,MAX_KEY:ri(n),schema:m}}function Kc(t,n){return n.reduce(function(a,o){var u=o.create;return l(l({},a),u(a))},t)}function Fc(t,n,a,o){var u=a.IDBKeyRange;a.indexedDB;var f=Kc(Nc(n,u,o),t.dbcore);return{dbcore:f}}function Gi(t,n){var a=n.db,o=Fc(t._middlewares,a,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(u){var f=u.name;t.core.schema.tables.some(function(d){return d.name===f})&&(u.core=t.core.table(f),t[f]instanceof t.Table&&(t[f].core=u.core))})}function Yi(t,n,a,o){a.forEach(function(u){var f=o[u];n.forEach(function(d){var m=F(d,u);(!m||"value"in m&&m.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?L(d,u,{get:function(){return this.table(u)},set:function(y){O(this,u,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new t.Table(u,f))})})}function ho(t,n){n.forEach(function(a){for(var o in a)a[o]instanceof t.Table&&delete a[o]})}function Bc(t,n){return t._cfg.version-n._cfg.version}function jc(t,n,a,o){var u=t._dbSchema;a.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=fo("$meta",tu("")[0],[]),t._storeNames.push("$meta"));var f=t._createTransaction("readwrite",t._storeNames,u);f.create(a),f._completion.catch(o);var d=f._reject.bind(f),m=oe.transless||oe;Mn(function(){if(oe.trans=f,oe.transless=m,n===0)p(u).forEach(function(y){mo(a,y,u[y].primKey,u[y].indexes)}),Gi(t,a),X.follow(function(){return t.on.populate.fire(f)}).catch(d);else return Gi(t,a),Uc(t,f,n).then(function(y){return Hc(t,y,f,a)}).catch(d)})}function zc(t,n){eu(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var a=Zi(t,t.idbdb,n);Qi(t,t._dbSchema,n);for(var o=po(a,t._dbSchema),u=function(E){if(E.change.length||E.recreate)return console.warn("Unable to patch indexes of table ".concat(E.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=n.objectStore(E.name);E.add.forEach(function(T){Qe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(E.name,".").concat(T.src)),qi(D,T)})},f=0,d=o.change;f<d.length;f++){var m=d[f],y=u(m);if(typeof y=="object")return y.value}}function Uc(t,n,a){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??a}):X.resolve(a)}function Hc(t,n,a,o){var u=[],f=t._versions,d=t._dbSchema=Zi(t,t.idbdb,o),m=f.filter(function(E){return E._cfg.version>=n});if(m.length===0)return X.resolve();m.forEach(function(E){u.push(function(){var D=d,T=E._cfg.dbschema;Qi(t,D,o),Qi(t,T,o),d=t._dbSchema=T;var M=po(D,T);M.add.forEach(function(j){mo(o,j[0],j[1].primKey,j[1].indexes)}),M.change.forEach(function(j){if(j.recreate)throw new ae.Upgrade("Not yet support for changing primary key");var z=o.objectStore(j.name);j.add.forEach(function(U){return qi(z,U)}),j.change.forEach(function(U){z.deleteIndex(U.name),qi(z,U)}),j.del.forEach(function(U){return z.deleteIndex(U)})});var G=E._cfg.contentUpgrade;if(G&&E._cfg.version>n){Gi(t,o),a._memoizedTables={};var k=ge(T);M.del.forEach(function(j){k[j]=D[j]}),ho(t,[t.Transaction.prototype]),Yi(t,[t.Transaction.prototype],p(k),k),a.schema=k;var C=He(G);C&&Sr();var R,K=X.follow(function(){if(R=G(a),R&&C){var j=Nn.bind(null,null);R.then(j,j)}});return R&&typeof R.then=="function"?X.resolve(R):K.then(function(){return R})}}),u.push(function(D){var T=E._cfg.dbschema;Vc(T,D),ho(t,[t.Transaction.prototype]),Yi(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),a.schema=t._dbSchema}),u.push(function(D){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===E._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(T){return T!=="$meta"})):D.objectStore("$meta").put(E._cfg.version,"version"))})});function y(){return u.length?X.resolve(u.shift()(a.idbtrans)).then(y):X.resolve()}return y().then(function(){eu(d,o)})}function po(t,n){var a={del:[],add:[],change:[]},o;for(o in t)n[o]||a.del.push(o);for(o in n){var u=t[o],f=n[o];if(!u)a.add.push([o,f]);else{var d={name:o,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||u.primKey.auto!==f.primKey.auto)d.recreate=!0,a.change.push(d);else{var m=u.idxByName,y=f.idxByName,E=void 0;for(E in m)y[E]||d.del.push(E);for(E in y){var D=m[E],T=y[E];D?D.src!==T.src&&d.change.push(T):d.add.push(T)}(d.del.length>0||d.add.length>0||d.change.length>0)&&a.change.push(d)}}}return a}function mo(t,n,a,o){var u=t.db.createObjectStore(n,a.keyPath?{keyPath:a.keyPath,autoIncrement:a.auto}:{autoIncrement:a.auto});return o.forEach(function(f){return qi(u,f)}),u}function eu(t,n){p(t).forEach(function(a){n.db.objectStoreNames.contains(a)||(Qe&&console.debug("Dexie: Creating missing table",a),mo(n,a,t[a].primKey,t[a].indexes))})}function Vc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(a){return t[a]==null&&n.db.deleteObjectStore(a)})}function qi(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Zi(t,n,a){var o={},u=V(n.objectStoreNames,0);return u.forEach(function(f){for(var d=a.objectStore(f),m=d.keyPath,y=co(Js(m),m||"",!0,!1,!!d.autoIncrement,m&&typeof m!="string",!0),E=[],D=0;D<d.indexNames.length;++D){var T=d.index(d.indexNames[D]);m=T.keyPath;var M=co(T.name,m,!!T.unique,!!T.multiEntry,!1,m&&typeof m!="string",!1);E.push(M)}o[f]=fo(f,y,E)}),o}function Wc(t,n,a){t.verno=n.version/10;var o=t._dbSchema=Zi(t,n,a);t._storeNames=V(n.objectStoreNames,0),Yi(t,[t._allTables],p(o),o)}function Gc(t,n){var a=Zi(t,t.idbdb,n),o=po(a,t._dbSchema);return!(o.add.length||o.change.some(function(u){return u.add.length||u.change.length}))}function Qi(t,n,a){for(var o=a.db.objectStoreNames,u=0;u<o.length;++u){var f=o[u],d=a.objectStore(f);t._hasGetAll="getAll"in d;for(var m=0;m<d.indexNames.length;++m){var y=d.indexNames[m],E=d.index(y).keyPath,D=typeof E=="string"?E:"["+V(E).join("+")+"]";if(n[f]){var T=n[f].idxByName[D];T&&(T.name=y,delete n[f].idxByName[D],n[f].idxByName[y]=T)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function tu(t){return t.split(",").map(function(n,a){var o,u=n.split(":"),f=(o=u[1])===null||o===void 0?void 0:o.trim();n=u[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),m=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return co(d,m||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),h(m),a===0,f)})}var Yc=(function(){function t(){}return t.prototype._createTableSchema=function(n,a,o){return fo(n,a,o)},t.prototype._parseIndexSyntax=function(n){return tu(n)},t.prototype._parseStoresSpec=function(n,a){var o=this;p(n).forEach(function(u){if(n[u]!==null){var f=o._parseIndexSyntax(n[u]),d=f.shift();if(!d)throw new ae.Schema("Invalid schema for table "+u+": "+n[u]);if(d.unique=!0,d.multi)throw new ae.Schema("Primary key cannot be multiEntry*");f.forEach(function(y){if(y.auto)throw new ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!y.keyPath)throw new ae.Schema("Index must have a name and cannot be an empty string")});var m=o._createTableSchema(u,d,f);a[u]=m}})},t.prototype.stores=function(n){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,n):n;var o=a._versions,u={},f={};return o.forEach(function(d){_(u,d._cfg.storesSource),f=d._cfg.dbschema={},d._parseStoresSpec(u,f)}),a._dbSchema=f,ho(a,[a._allTables,a,a.Transaction.prototype]),Yi(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],p(f),f),a._storeNames=p(f),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=rt(this._cfg.contentUpgrade||P,n),this},t})();function qc(t){return ei(Yc.prototype,function(a){this.db=t,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function yo(t,n){var a=t._dbNamesDB;return a||(a=t._dbNamesDB=new xn(ji,{addons:[],indexedDB:t,IDBKeyRange:n}),a.version(1).stores({dbnames:"name"})),a.table("dbnames")}function go(t){return t&&typeof t.databases=="function"}function Zc(t){var n=t.indexedDB,a=t.IDBKeyRange;return go(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(u){return u.name}).filter(function(u){return u!==ji})}):yo(n,a).toCollection().primaryKeys()}function Qc(t,n){var a=t.indexedDB,o=t.IDBKeyRange;!go(a)&&n!==ji&&yo(a,o).put({name:n}).catch(P)}function Xc(t,n){var a=t.indexedDB,o=t.IDBKeyRange;!go(a)&&n!==ji&&yo(a,o).delete(n).catch(P)}function _o(t){return Mn(function(){return oe.letThrough=!0,t()})}function Jc(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(a){var o=function(){return indexedDB.databases().finally(a)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var bo;function wo(t){return!("from"in t)}var bt=function(t,n){if(this)_(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var a=new bt;return t&&"d"in t&&_(a,t),a}};x(bt.prototype,(bo={add:function(t){return oi(this,t),this},addKey:function(t){return ai(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(a){return ai(n,a,a)}),this},hasKey:function(t){var n=Xi(this).next(t).value;return n&&De(n.from,t)<=0&&De(n.to,t)>=0}},bo[gt]=function(){return Xi(this)},bo));function ai(t,n,a){var o=De(n,a);if(!isNaN(o)){if(o>0)throw RangeError();if(wo(t))return _(t,{from:n,to:a,d:1});var u=t.l,f=t.r;if(De(a,t.from)<0)return u?ai(u,n,a):t.l={from:n,to:a,d:1,l:null,r:null},ru(t);if(De(n,t.to)>0)return f?ai(f,n,a):t.r={from:n,to:a,d:1,l:null,r:null},ru(t);De(n,t.from)<0&&(t.from=n,t.l=null,t.d=f?f.d+1:1),De(a,t.to)>0&&(t.to=a,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;u&&!t.l&&oi(t,u),f&&d&&oi(t,f)}}function oi(t,n){function a(o,u){var f=u.from,d=u.to,m=u.l,y=u.r;ai(o,f,d),m&&a(o,m),y&&a(o,y)}wo(n)||a(t,n)}function nu(t,n){var a=Xi(n),o=a.next();if(o.done)return!1;for(var u=o.value,f=Xi(t),d=f.next(u.from),m=d.value;!o.done&&!d.done;){if(De(m.from,u.to)<=0&&De(m.to,u.from)>=0)return!0;De(u.from,m.from)<0?u=(o=a.next(m.from)).value:m=(d=f.next(u.from)).value}return!1}function Xi(t){var n=wo(t)?null:{s:0,n:t};return{next:function(a){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&De(a,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||De(a,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function ru(t){var n,a,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((a=t.l)===null||a===void 0?void 0:a.d)||0),u=o>1?"r":o<-1?"l":"";if(u){var f=u==="r"?"l":"r",d=l({},t),m=t[u];t.from=m.from,t.to=m.to,t[u]=m[u],d[u]=m[f],t[f]=d,d.d=iu(d)}t.d=iu(t)}function iu(t){var n=t.r,a=t.l;return(n?a?Math.max(n.d,a.d):n.d:a?a.d:0)+1}function Ji(t,n){return p(n).forEach(function(a){t[a]?oi(t[a],n[a]):t[a]=Pe(n[a])}),t}function Eo(t,n){return t.all||n.all||Object.keys(t).some(function(a){return n[a]&&nu(n[a],t[a])})}var cr={},xo={},To=!1;function $i(t,n){Ji(xo,t),To||(To=!0,setTimeout(function(){To=!1;var a=xo;xo={},ko(a,!1)},0))}function ko(t,n){n===void 0&&(n=!1);var a=new Set;if(t.all)for(var o=0,u=Object.values(cr);o<u.length;o++){var f=u[o];au(f,t,a,n)}else for(var d in t){var m=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(m){var y=m[1],E=m[2],f=cr["idb://".concat(y,"/").concat(E)];f&&au(f,t,a,n)}}a.forEach(function(D){return D()})}function au(t,n,a,o){for(var u=[],f=0,d=Object.entries(t.queries.query);f<d.length;f++){for(var m=d[f],y=m[0],E=m[1],D=[],T=0,M=E;T<M.length;T++){var G=M[T];Eo(n,G.obsSet)?G.subscribers.forEach(function(K){return a.add(K)}):o&&D.push(G)}o&&u.push([y,D])}if(o)for(var k=0,C=u;k<C.length;k++){var R=C[k],y=R[0],D=R[1];t.queries.query[y]=D}}function $c(t){var n=t._state,a=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?Xe(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,u=Math.round(t.verno*10),f=!1;function d(){if(n.openCanceller!==o)throw new ae.DatabaseClosed("db.open() was cancelled")}var m=n.dbReadyResolve,y=null,E=!1,D=function(){return new X(function(T,M){if(d(),!a)throw new ae.MissingAPI;var G=t.name,k=n.autoSchema||!u?a.open(G):a.open(G,u);if(!k)throw new ae.MissingAPI;k.onerror=cn(M),k.onblocked=je(t._fireOnBlocked),k.onupgradeneeded=je(function(C){if(y=k.transaction,n.autoSchema&&!t._options.allowEmptyDB){k.onerror=ti,y.abort(),k.result.close();var R=a.deleteDatabase(G);R.onsuccess=R.onerror=je(function(){M(new ae.NoSuchDatabase("Database ".concat(G," doesnt exist")))})}else{y.onerror=cn(M);var K=C.oldVersion>Math.pow(2,62)?0:C.oldVersion;E=K<1,t.idbdb=k.result,f&&zc(t,y),jc(t,K/10,y,M)}},M),k.onsuccess=je(function(){y=null;var C=t.idbdb=k.result,R=V(C.objectStoreNames);if(R.length>0)try{var K=C.transaction(Pc(R),"readonly");if(n.autoSchema)Wc(t,C,K);else if(Qi(t,t._dbSchema,K),!Gc(t,K)&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),C.close(),u=C.version+1,f=!0,T(D());Gi(t,K)}catch{}Or.push(t),C.onversionchange=je(function(j){n.vcFired=!0,t.on("versionchange").fire(j)}),C.onclose=je(function(){t.close({disableAutoOpen:!1})}),E&&Qc(t._deps,G),T()},M)}).catch(function(T){switch(T?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(u>0)return u=0,D();break}return X.reject(T)})};return X.race([o,(typeof navigator>"u"?X.resolve():Jc()).then(D)]).then(function(){return d(),n.onReadyBeingFired=[],X.resolve(_o(function(){return t.on.ready.fire(t.vip)})).then(function T(){if(n.onReadyBeingFired.length>0){var M=n.onReadyBeingFired.reduce(rt,P);return n.onReadyBeingFired=[],X.resolve(_o(function(){return M(t.vip)})).then(T)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(T){n.dbOpenError=T;try{y&&y.abort()}catch{}return o===n.openCanceller&&t._close(),Xe(T)}).finally(function(){n.openComplete=!0,m()}).then(function(){if(E){var T={};t.tables.forEach(function(M){M.schema.indexes.forEach(function(G){G.name&&(T["idb://".concat(t.name,"/").concat(M.name,"/").concat(G.name)]=new bt(-1/0,[[[]]]))}),T["idb://".concat(t.name,"/").concat(M.name,"/")]=T["idb://".concat(t.name,"/").concat(M.name,"/:dels")]=new bt(-1/0,[[[]]])}),Bn(ni).fire(T),ko(T,!0)}return t})}function Io(t){var n=function(d){return t.next(d)},a=function(d){return t.throw(d)},o=f(n),u=f(a);function f(d){return function(m){var y=d(m),E=y.value;return y.done?E:!E||typeof E.then!="function"?h(E)?Promise.all(E).then(o,u):o(E):E.then(o,u)}}return f(n)()}function ef(t,n,a){var o=arguments.length;if(o<2)throw new ae.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];a=u.pop();var f=Me(u);return[t,f,a]}function ou(t,n,a,o,u){return X.resolve().then(function(){var f=oe.transless||oe,d=t._createTransaction(n,a,t._dbSchema,o);d.explicit=!0;var m={trans:d,transless:f};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(T){return T.name===ln.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return ou(t,n,a,null,u)})):Xe(T)}var y=He(u);y&&Sr();var E,D=X.follow(function(){if(E=u.call(d,d),E)if(y){var T=Nn.bind(null,null);E.then(T,T)}else typeof E.next=="function"&&typeof E.throw=="function"&&(E=Io(E))},m);return(E&&typeof E.then=="function"?X.resolve(E).then(function(T){return d.active?T:Xe(new ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return E})).then(function(T){return o&&d._resolve(),d._completion.then(function(){return T})}).catch(function(T){return d._reject(T),Xe(T)})})}function ea(t,n,a){for(var o=h(t)?t.slice():[t],u=0;u<a;++u)o.push(n);return o}function tf(t){return l(l({},t),{table:function(n){var a=t.table(n),o=a.schema,u={},f=[];function d(C,R,K){var j=ii(C),z=u[j]=u[j]||[],U=C==null?0:typeof C=="string"?1:C.length,B=R>0,q=l(l({},K),{name:B?"".concat(j,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:B,keyTail:R,keyLength:U,extractKey:vo(C),unique:!B&&K.unique});if(z.push(q),q.isPrimaryKey||f.push(q),U>1){var $=U===2?C[0]:C.slice(0,U-1);d($,R+1,K)}return z.sort(function(Z,fe){return Z.keyTail-fe.keyTail}),q}var m=d(o.primaryKey.keyPath,0,o.primaryKey);u[":id"]=[m];for(var y=0,E=o.indexes;y<E.length;y++){var D=E[y];d(D.keyPath,0,D)}function T(C){var R=u[ii(C)];return R&&R[0]}function M(C,R){return{type:C.type===1?2:C.type,lower:ea(C.lower,C.lowerOpen?t.MAX_KEY:t.MIN_KEY,R),lowerOpen:!0,upper:ea(C.upper,C.upperOpen?t.MIN_KEY:t.MAX_KEY,R),upperOpen:!0}}function G(C){var R=C.query.index;return R.isVirtual?l(l({},C),{query:{index:R.lowLevelIndex,range:M(C.query.range,R.keyTail)}}):C}var k=l(l({},a),{schema:l(l({},o),{primaryKey:m,indexes:f,getIndexByKeyPath:T}),count:function(C){return a.count(G(C))},query:function(C){return a.query(G(C))},openCursor:function(C){var R=C.query.index,K=R.keyTail,j=R.isVirtual,z=R.keyLength;if(!j)return a.openCursor(C);function U(B){function q(Z){Z!=null?B.continue(ea(Z,C.reverse?t.MAX_KEY:t.MIN_KEY,K)):C.unique?B.continue(B.key.slice(0,z).concat(C.reverse?t.MIN_KEY:t.MAX_KEY,K)):B.continue()}var $=Object.create(B,{continue:{value:q},continuePrimaryKey:{value:function(Z,fe){B.continuePrimaryKey(ea(Z,t.MAX_KEY,K),fe)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var Z=B.key;return z===1?Z[0]:Z.slice(0,z)}},value:{get:function(){return B.value}}});return $}return a.openCursor(G(C)).then(function(B){return B&&U(B)})}});return k}})}var nf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:tf};function Do(t,n,a,o){return a=a||{},o=o||"",p(t).forEach(function(u){if(!b(n,u))a[o+u]=void 0;else{var f=t[u],d=n[u];if(typeof f=="object"&&typeof d=="object"&&f&&d){var m=$t(f),y=$t(d);m!==y?a[o+u]=n[u]:m==="Object"?Do(f,d,a,o+u+"."):f!==d&&(a[o+u]=n[u])}else f!==d&&(a[o+u]=n[u])}}),p(n).forEach(function(u){b(t,u)||(a[o+u]=n[u])}),a}function Ao(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var rf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return l(l({},t),{table:function(n){var a=t.table(n),o=a.schema.primaryKey,u=l(l({},a),{mutate:function(f){var d=oe.trans,m=d.table(n).hook,y=m.deleting,E=m.creating,D=m.updating;switch(f.type){case"add":if(E.fire===P)break;return d._promise("readwrite",function(){return T(f)},!0);case"put":if(E.fire===P&&D.fire===P)break;return d._promise("readwrite",function(){return T(f)},!0);case"delete":if(y.fire===P)break;return d._promise("readwrite",function(){return T(f)},!0);case"deleteRange":if(y.fire===P)break;return d._promise("readwrite",function(){return M(f)},!0)}return a.mutate(f);function T(k){var C=oe.trans,R=k.keys||Ao(o,k);if(!R)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?l(l({},k),{keys:R}):l({},k),k.type!=="delete"&&(k.values=c([],k.values)),k.keys&&(k.keys=c([],k.keys)),af(a,k,R).then(function(K){var j=R.map(function(z,U){var B=K[U],q={onerror:null,onsuccess:null};if(k.type==="delete")y.fire.call(q,z,B,C);else if(k.type==="add"||B===void 0){var $=E.fire.call(q,z,k.values[U],C);z==null&&$!=null&&(z=$,k.keys[U]=z,o.outbound||ce(k.values[U],o.keyPath,z))}else{var Z=Do(B,k.values[U]),fe=D.fire.call(q,Z,z,B,C);if(fe){var we=k.values[U];Object.keys(fe).forEach(function(ee){b(we,ee)?we[ee]=fe[ee]:ce(we,ee,fe[ee])})}}return q});return a.mutate(k).then(function(z){for(var U=z.failures,B=z.results,q=z.numFailures,$=z.lastResult,Z=0;Z<R.length;++Z){var fe=B?B[Z]:R[Z],we=j[Z];fe==null?we.onerror&&we.onerror(U[Z]):we.onsuccess&&we.onsuccess(k.type==="put"&&K[Z]?k.values[Z]:fe)}return{failures:U,results:B,numFailures:q,lastResult:$}}).catch(function(z){return j.forEach(function(U){return U.onerror&&U.onerror(z)}),Promise.reject(z)})})}function M(k){return G(k.trans,k.range,1e4)}function G(k,C,R){return a.query({trans:k,values:!1,query:{index:o,range:C},limit:R}).then(function(K){var j=K.result;return T({type:"delete",keys:j,trans:k}).then(function(z){return z.numFailures>0?Promise.reject(z.failures[0]):j.length<R?{failures:[],numFailures:0,lastResult:void 0}:G(k,l(l({},C),{lower:j[j.length-1],lowerOpen:!0}),R)})})}}});return u}})}};function af(t,n,a){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:a,cache:"immutable"})}function su(t,n,a){try{if(!n||n.keys.length<t.length)return null;for(var o=[],u=0,f=0;u<n.keys.length&&f<t.length;++u)De(n.keys[u],t[f])===0&&(o.push(a?Ge(n.values[u]):n.values[u]),++f);return o.length===t.length?o:null}catch{return null}}var of={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var a=t.table(n);return l(l({},a),{getMany:function(o){if(!o.cache)return a.getMany(o);var u=su(o.keys,o.trans._cache,o.cache==="clone");return u?X.resolve(u):a.getMany(o).then(function(f){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?Ge(f):f},f})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),a.mutate(o)}})}}}};function uu(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function lu(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var sf={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,a=new bt(t.MIN_KEY,t.MAX_KEY);return l(l({},t),{transaction:function(o,u,f){if(oe.subscr&&u!=="readonly")throw new ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(oe.querier));return t.transaction(o,u,f)},table:function(o){var u=t.table(o),f=u.schema,d=f.primaryKey,m=f.indexes,y=d.extractKey,E=d.outbound,D=d.autoIncrement&&m.filter(function(k){return k.compound&&k.keyPath.includes(d.keyPath)}),T=l(l({},u),{mutate:function(k){var C,R,K=k.trans,j=k.mutatedParts||(k.mutatedParts={}),z=function(ve){var Ae="idb://".concat(n,"/").concat(o,"/").concat(ve);return j[Ae]||(j[Ae]=new bt)},U=z(""),B=z(":dels"),q=k.type,$=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[Ao(d,k).filter(function(ve){return ve}),k.values]:[],Z=$[0],fe=$[1],we=k.trans._cache;if(h(Z)){U.addKeys(Z);var ee=q==="delete"||Z.length===fe.length?su(Z,we):null;ee||B.addKeys(Z),(ee||fe)&&uf(z,f,ee,fe)}else if(Z){var _e={from:(C=Z.lower)!==null&&C!==void 0?C:t.MIN_KEY,to:(R=Z.upper)!==null&&R!==void 0?R:t.MAX_KEY};B.add(_e),U.add(_e)}else U.add(a),B.add(a),f.indexes.forEach(function(ve){return z(ve.name).add(a)});return u.mutate(k).then(function(ve){return Z&&(k.type==="add"||k.type==="put")&&(U.addKeys(ve.results),D&&D.forEach(function(Ae){for(var ue=k.values.map(function(Pt){return Ae.extractKey(Pt)}),Ye=Ae.keyPath.findIndex(function(Pt){return Pt===d.keyPath}),wt=0,fn=ve.results.length;wt<fn;++wt)ue[wt][Ye]=ve.results[wt];z(Ae.name).addKeys(ue)})),K.mutatedParts=Ji(K.mutatedParts||{},j),ve})}}),M=function(k){var C,R,K=k.query,j=K.index,z=K.range;return[j,new bt((C=z.lower)!==null&&C!==void 0?C:t.MIN_KEY,(R=z.upper)!==null&&R!==void 0?R:t.MAX_KEY)]},G={get:function(k){return[d,new bt(k.key)]},getMany:function(k){return[d,new bt().addKeys(k.keys)]},count:M,query:M,openCursor:M};return p(G).forEach(function(k){T[k]=function(C){var R=oe.subscr,K=!!R,j=uu(oe,u)&&lu(k,C),z=j?C.obsSet={}:R;if(K){var U=function(ee){var _e="idb://".concat(n,"/").concat(o,"/").concat(ee);return z[_e]||(z[_e]=new bt)},B=U(""),q=U(":dels"),$=G[k](C),Z=$[0],fe=$[1];if(k==="query"&&Z.isPrimaryKey&&!C.values?q.add(fe):U(Z.name||"").add(fe),!Z.isPrimaryKey)if(k==="count")q.add(a);else{var we=k==="query"&&E&&C.values&&u.query(l(l({},C),{values:!1}));return u[k].apply(this,arguments).then(function(ee){if(k==="query"){if(E&&C.values)return we.then(function(ue){var Ye=ue.result;return B.addKeys(Ye),ee});var _e=C.values?ee.result.map(y):ee.result;C.values?B.addKeys(_e):q.addKeys(_e)}else if(k==="openCursor"){var ve=ee,Ae=C.values;return ve&&Object.create(ve,{key:{get:function(){return q.addKey(ve.primaryKey),ve.key}},primaryKey:{get:function(){var ue=ve.primaryKey;return q.addKey(ue),ue}},value:{get:function(){return Ae&&B.addKey(ve.primaryKey),ve.value}}})}return ee})}}return u[k].apply(this,arguments)}}),T}})}};function uf(t,n,a,o){function u(f){var d=t(f.name||"");function m(E){return E!=null?f.extractKey(E):null}var y=function(E){return f.multiEntry&&h(E)?E.forEach(function(D){return d.addKey(D)}):d.addKey(E)};(a||o).forEach(function(E,D){var T=a&&m(a[D]),M=o&&m(o[D]);De(T,M)!==0&&(T!=null&&y(T),M!=null&&y(M))})}n.indexes.forEach(u)}function cu(t,n,a){if(a.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(a.numFailures===o)return null;var u=l({},n);return h(u.keys)&&(u.keys=u.keys.filter(function(f,d){return!(d in a.failures)})),"values"in u&&h(u.values)&&(u.values=u.values.filter(function(f,d){return!(d in a.failures)})),u}function lf(t,n){return n.lower===void 0?!0:n.lowerOpen?De(t,n.lower)>0:De(t,n.lower)>=0}function cf(t,n){return n.upper===void 0?!0:n.upperOpen?De(t,n.upper)<0:De(t,n.upper)<=0}function So(t,n){return lf(t,n)&&cf(t,n)}function fu(t,n,a,o,u,f){if(!a||a.length===0)return t;var d=n.query.index,m=d.multiEntry,y=n.query.range,E=o.schema.primaryKey,D=E.extractKey,T=d.extractKey,M=(d.lowLevelIndex||d).extractKey,G=a.reduce(function(k,C){var R=k,K=[];if(C.type==="add"||C.type==="put")for(var j=new bt,z=C.values.length-1;z>=0;--z){var U=C.values[z],B=D(U);if(!j.hasKey(B)){var q=T(U);(m&&h(q)?q.some(function(ee){return So(ee,y)}):So(q,y))&&(j.addKey(B),K.push(U))}}switch(C.type){case"add":{var $=new bt().addKeys(n.values?k.map(function(ee){return D(ee)}):k);R=k.concat(n.values?K.filter(function(ee){var _e=D(ee);return $.hasKey(_e)?!1:($.addKey(_e),!0)}):K.map(function(ee){return D(ee)}).filter(function(ee){return $.hasKey(ee)?!1:($.addKey(ee),!0)}));break}case"put":{var Z=new bt().addKeys(C.values.map(function(ee){return D(ee)}));R=k.filter(function(ee){return!Z.hasKey(n.values?D(ee):ee)}).concat(n.values?K:K.map(function(ee){return D(ee)}));break}case"delete":var fe=new bt().addKeys(C.keys);R=k.filter(function(ee){return!fe.hasKey(n.values?D(ee):ee)});break;case"deleteRange":var we=C.range;R=k.filter(function(ee){return!So(D(ee),we)});break}return R},t);return G===t?t:(G.sort(function(k,C){return De(M(k),M(C))||De(D(k),D(C))}),n.limit&&n.limit<1/0&&(G.length>n.limit?G.length=n.limit:t.length===n.limit&&G.length<n.limit&&(u.dirty=!0)),f?Object.freeze(G):G)}function du(t,n){return De(t.lower,n.lower)===0&&De(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function ff(t,n,a,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var u=De(t,n);if(u===0){if(a&&o)return 0;if(a)return 1;if(o)return-1}return u}function df(t,n,a,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var u=De(t,n);if(u===0){if(a&&o)return 0;if(a)return-1;if(o)return 1}return u}function vf(t,n){return ff(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&df(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function hf(t,n,a,o){var u=cr["idb://".concat(t,"/").concat(n)];if(!u)return[];var f=u.queries[a];if(!f)return[null,!1,u,null];var d=o.query?o.query.index.name:null,m=f[d||""];if(!m)return[null,!1,u,null];switch(a){case"query":var y=m.find(function(T){return T.req.limit===o.limit&&T.req.values===o.values&&du(T.req.query.range,o.query.range)});if(y)return[y,!0,u,m];var E=m.find(function(T){var M="limit"in T.req?T.req.limit:1/0;return M>=o.limit&&(o.values?T.req.values:!0)&&vf(T.req.query.range,o.query.range)});return[E,!1,u,m];case"count":var D=m.find(function(T){return du(T.req.query.range,o.query.range)});return[D,!!D,u,m]}}function pf(t,n,a,o){t.subscribers.add(a),o.addEventListener("abort",function(){t.subscribers.delete(a),t.subscribers.size===0&&mf(t,n)})}function mf(t,n){setTimeout(function(){t.subscribers.size===0&&se(n,t)},3e3)}var yf={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,a=l(l({},t),{transaction:function(o,u,f){var d=t.transaction(o,u,f);if(u==="readwrite"){var m=new AbortController,y=m.signal,E=function(D){return function(){if(m.abort(),u==="readwrite"){for(var T=new Set,M=0,G=o;M<G.length;M++){var k=G[M],C=cr["idb://".concat(n,"/").concat(k)];if(C){var R=t.table(k),K=C.optimisticOps.filter(function(Ae){return Ae.trans===d});if(d._explicit&&D&&d.mutatedParts)for(var j=0,z=Object.values(C.queries.query);j<z.length;j++)for(var U=z[j],B=0,q=U.slice();B<q.length;B++){var $=q[B];Eo($.obsSet,d.mutatedParts)&&(se(U,$),$.subscribers.forEach(function(Ae){return T.add(Ae)}))}else if(K.length>0){C.optimisticOps=C.optimisticOps.filter(function(Ae){return Ae.trans!==d});for(var Z=0,fe=Object.values(C.queries.query);Z<fe.length;Z++)for(var U=fe[Z],we=0,ee=U.slice();we<ee.length;we++){var $=ee[we];if($.res!=null&&d.mutatedParts)if(D&&!$.dirty){var _e=Object.isFrozen($.res),ve=fu($.res,$.req,K,R,$,_e);$.dirty?(se(U,$),$.subscribers.forEach(function(Ye){return T.add(Ye)})):ve!==$.res&&($.res=ve,$.promise=X.resolve({result:ve}))}else $.dirty&&se(U,$),$.subscribers.forEach(function(Ye){return T.add(Ye)})}}}}T.forEach(function(Ae){return Ae()})}}};d.addEventListener("abort",E(!1),{signal:y}),d.addEventListener("error",E(!1),{signal:y}),d.addEventListener("complete",E(!0),{signal:y})}return d},table:function(o){var u=t.table(o),f=u.schema.primaryKey,d=l(l({},u),{mutate:function(m){var y=oe.trans;if(f.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return u.mutate(m);var E=cr["idb://".concat(n,"/").concat(o)];if(!E)return u.mutate(m);var D=u.mutate(m);return(m.type==="add"||m.type==="put")&&(m.values.length>=50||Ao(f,m).some(function(T){return T==null}))?D.then(function(T){var M=l(l({},m),{values:m.values.map(function(k,C){var R;if(T.failures[C])return k;var K=!((R=f.keyPath)===null||R===void 0)&&R.includes(".")?Ge(k):l({},k);return ce(K,f.keyPath,T.results[C]),K})}),G=cu(E,M,T);E.optimisticOps.push(G),queueMicrotask(function(){return m.mutatedParts&&$i(m.mutatedParts)})}):(E.optimisticOps.push(m),m.mutatedParts&&$i(m.mutatedParts),D.then(function(T){if(T.numFailures>0){se(E.optimisticOps,m);var M=cu(E,m,T);M&&E.optimisticOps.push(M),m.mutatedParts&&$i(m.mutatedParts)}}),D.catch(function(){se(E.optimisticOps,m),m.mutatedParts&&$i(m.mutatedParts)})),D},query:function(m){var y;if(!uu(oe,u)||!lu("query",m))return u.query(m);var E=((y=oe.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",D=oe,T=D.requery,M=D.signal,G=hf(n,o,"query",m),k=G[0],C=G[1],R=G[2],K=G[3];if(k&&C)k.obsSet=m.obsSet;else{var j=u.query(m).then(function(z){var U=z.result;if(k&&(k.res=U),E){for(var B=0,q=U.length;B<q;++B)Object.freeze(U[B]);Object.freeze(U)}else z.result=Ge(U);return z}).catch(function(z){return K&&k&&se(K,k),Promise.reject(z)});k={obsSet:m.obsSet,promise:j,subscribers:new Set,type:"query",req:m,dirty:!1},K?K.push(k):(K=[k],R||(R=cr["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),R.queries.query[m.query.index.name||""]=K)}return pf(k,K,T,M),k.promise.then(function(z){return{result:fu(z.result,m,R?.optimisticOps,u,k,E)}})}});return d}});return a}};function ta(t,n){return new Proxy(t,{get:function(a,o,u){return o==="db"?n:Reflect.get(a,o,u)}})}var xn=(function(){function t(n,a){var o=this;this._middlewares={},this.verno=0;var u=t.dependencies;this._options=a=l({addons:t.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange};var f=a.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:P,dbReadyPromise:null,cancelOpen:P,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};d.dbReadyPromise=new X(function(y){d.dbReadyResolve=y}),d.openCanceller=new X(function(y,E){d.cancelOpen=E}),this._state=d,this.name=n,this.on=$r(this,"populate","blocked","versionchange","close",{ready:[rt,P]}),this.once=function(y,E){var D=function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];o.on(y).unsubscribe(D),E.apply(o,T)};return o.on(y,D)},this.on.ready.subscribe=Q(this.on.ready.subscribe,function(y){return function(E,D){t.vip(function(){var T=o._state;if(T.openComplete)T.dbOpenError||X.resolve().then(E),D&&y(E);else if(T.onReadyBeingFired)T.onReadyBeingFired.push(E),D&&y(E);else{y(E);var M=o;D||y(function G(){M.on.ready.unsubscribe(E),M.on.ready.unsubscribe(G)})}})}}),this.Collection=Tc(this),this.Table=wc(this),this.Transaction=Lc(this),this.Version=qc(this),this.WhereClause=Oc(this),this.on("versionchange",function(y){y.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=ri(a.IDBKeyRange),this._createTransaction=function(y,E,D,T){return new o.Transaction(y,E,D,o._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(y){o.on("blocked").fire(y),Or.filter(function(E){return E.name===o.name&&E!==o&&!E._state.vcFired}).map(function(E){return E.on("versionchange").fire(y)})},this.use(of),this.use(yf),this.use(sf),this.use(nf),this.use(rf);var m=new Proxy(this,{get:function(y,E,D){if(E==="_vip")return!0;if(E==="table")return function(M){return ta(o.table(M),m)};var T=Reflect.get(y,E,D);return T instanceof Gs?ta(T,m):E==="tables"?T.map(function(M){return ta(M,m)}):E==="_createTransaction"?function(){var M=T.apply(this,arguments);return ta(M,m)}:T}});this.vip=m,f.forEach(function(y){return y(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new ae.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var a=this._versions,o=a.filter(function(u){return u._cfg.version===n})[0];return o||(o=new this.Version(n),a.push(o),a.sort(Bc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var a=this;return this.idbdb&&(this._state.openComplete||oe.letThrough||this._vip)?n():new X(function(o,u){if(a._state.openComplete)return u(new ae.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen){u(new ae.DatabaseClosed);return}a.open().catch(P)}a._state.dbReadyPromise.then(o,u)}).then(n)},t.prototype.use=function(n){var a=n.stack,o=n.create,u=n.level,f=n.name;f&&this.unuse({stack:a,name:f});var d=this._middlewares[a]||(this._middlewares[a]=[]);return d.push({stack:a,create:o,level:u??10,name:f}),d.sort(function(m,y){return m.level-y.level}),this},t.prototype.unuse=function(n){var a=n.stack,o=n.name,u=n.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return u?f.create!==u:o?f.name!==o:!1})),this},t.prototype.open=function(){var n=this;return sr(Rn,function(){return $c(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,a=Or.indexOf(this);if(a>=0&&Or.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new X(function(o){n.dbReadyResolve=o}),n.openCanceller=new X(function(o,u){n.cancelOpen=u}))},t.prototype.close=function(n){var a=n===void 0?{disableAutoOpen:!0}:n,o=a.disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new ae.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new ae.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},t.prototype.delete=function(n){var a=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",u=this._state;return new X(function(f,d){var m=function(){a.close(n);var y=a._deps.indexedDB.deleteDatabase(a.name);y.onsuccess=je(function(){Xc(a._deps,a.name),f()}),y.onerror=cn(d),y.onblocked=a._fireOnBlocked};if(o)throw new ae.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(m):m()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return p(this._allTables).map(function(a){return n._allTables[a]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=ef.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,a,o){var u=this,f=oe.trans;(!f||f.db!==this||n.indexOf("!")!==-1)&&(f=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var m,y;try{if(y=a.map(function(D){var T=D instanceof u.Table?D.name:D;if(typeof T!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return T}),n=="r"||n===ao)m=ao;else if(n=="rw"||n==oo)m=oo;else throw new ae.InvalidArgument("Invalid transaction mode: "+n);if(f){if(f.mode===ao&&m===oo)if(d)f=null;else throw new ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f&&y.forEach(function(D){if(f&&f.storeNames.indexOf(D)===-1)if(d)f=null;else throw new ae.SubTransaction("Table "+D+" not included in parent transaction.")}),d&&f&&!f.active&&(f=null)}}catch(D){return f?f._promise(null,function(T,M){M(D)}):Xe(D)}var E=ou.bind(null,this,m,y,f,o);return f?f._promise(m,E,"lock"):oe.trans?sr(oe.transless,function(){return u._whenReady(E)}):this._whenReady(E)},t.prototype.table=function(n){if(!b(this._allTables,n))throw new ae.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),gf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_f=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,a,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:a,complete:o}:n)},t.prototype[gf]=function(){return this},t})(),na;try{na={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{na={indexedDB:null,IDBKeyRange:null}}function vu(t){var n=!1,a,o=new _f(function(u){var f=He(t);function d(K){var j=Dr();try{f&&Sr();var z=Mn(t,K);return f&&(z=z.finally(Nn)),z}finally{j&&Ar()}}var m=!1,y,E={},D={},T={get closed(){return m},unsubscribe:function(){m||(m=!0,y&&y.abort(),M&&Bn.storagemutated.unsubscribe(C))}};u.start&&u.start(T);var M=!1,G=function(){return no(R)};function k(){return Eo(D,E)}var C=function(K){Ji(E,K),k()&&G()},R=function(){if(!(m||!na.indexedDB)){E={};var K={};y&&y.abort(),y=new AbortController;var j={subscr:K,signal:y.signal,requery:G,querier:t,trans:null},z=d(j);Promise.resolve(z).then(function(U){n=!0,a=U,!(m||j.signal.aborted)&&(E={},D=K,!Dt(D)&&!M&&(Bn(ni,C),M=!0),no(function(){return!m&&u.next&&u.next(U)}))},function(U){n=!1,["DatabaseClosedError","AbortError"].includes(U?.name)||m||no(function(){m||u.error&&u.error(U)})})}};return setTimeout(G,0),T});return o.hasValue=function(){return n},o.getValue=function(){return a},o}var fr=xn;x(fr,l(l({},Y),{delete:function(t){var n=new fr(t,{addons:[]});return n.delete()},exists:function(t){return new fr(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Zc(fr.dependencies).then(t)}catch{return Xe(new ae.MissingAPI)}},defineClass:function(){function t(n){_(this,n)}return t},ignoreTransaction:function(t){return oe.trans?sr(oe.transless,t):t()},vip:_o,async:function(t){return function(){try{var n=Io(t.apply(this,arguments));return!n||typeof n.then!="function"?X.resolve(n):n}catch(a){return Xe(a)}}},spawn:function(t,n,a){try{var o=Io(t.apply(a,n||[]));return!o||typeof o.then!="function"?X.resolve(o):o}catch(u){return Xe(u)}},currentTransaction:{get:function(){return oe.trans||null}},waitFor:function(t,n){var a=X.resolve(typeof t=="function"?fr.ignoreTransaction(t):t).timeout(n||6e4);return oe.trans?oe.trans.waitFor(a):a},Promise:X,debug:{get:function(){return Qe},set:function(t){Le(t)}},derive:A,extend:_,props:x,override:Q,Events:$r,on:Bn,liveQuery:vu,extendObservabilitySet:Ji,getByKeyPath:le,setByKeyPath:ce,delByKeyPath:ie,shallowClone:ge,deepClone:Ge,getObjectDiff:Do,cmp:De,asap:pe,minKey:io,addons:[],connections:Or,errnames:ln,dependencies:na,cache:cr,semVer:Bs,version:Bs.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,a){return t+n/Math.pow(10,a*2)})})),fr.maxKey=ri(fr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Bn(ni,function(t){if(!jn){var n;n=new CustomEvent(lo,{detail:t}),jn=!0,dispatchEvent(n),jn=!1}}),addEventListener(lo,function(t){var n=t.detail;jn||Oo(n)}));function Oo(t){var n=jn;try{jn=!0,Bn.storagemutated.fire(t),ko(t,!0)}finally{jn=n}}var jn=!1,zn,Co=function(){};typeof BroadcastChannel<"u"&&(Co=function(){zn=new BroadcastChannel(lo),zn.onmessage=function(t){return t.data&&Oo(t.data)}},Co(),typeof zn.unref=="function"&&zn.unref(),Bn(ni,function(t){jn||zn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!xn.disableBfCache&&t.persisted){Qe&&console.debug("Dexie: handling persisted pagehide"),zn?.close();for(var n=0,a=Or;n<a.length;n++){var o=a[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!xn.disableBfCache&&t.persisted&&(Qe&&console.debug("Dexie: handling persisted pageshow"),Co(),Oo({all:new bt(-1/0,[[]])}))}));function bf(t){return new Jr({add:t})}function wf(t){return new Jr({remove:t})}function Ef(t,n){return new Jr({replacePrefix:[t,n]})}X.rejectionMapper=kr,Le(Qe);var xf=Object.freeze({__proto__:null,Dexie:xn,liveQuery:vu,Entity:Us,cmp:De,PropModification:Jr,replacePrefix:Ef,add:bf,remove:wf,default:xn,RangeSet:bt,mergeRanges:oi,rangesOverlap:nu});return l(xn,xf,{default:xn}),xn}))})(fa)),fa.exports}var fv=cv();const Jo=uv(fv),Du=Symbol.for("Dexie"),xa=globalThis[Du]||(globalThis[Du]=Jo);if(Jo.semVer!==xa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Jo.semVer} and ${xa.semVer}`);const{liveQuery:Ta,mergeRanges:Yp,rangesOverlap:qp,RangeSet:Zp,cmp:Qp,Entity:Xp,PropModification:Jp,replacePrefix:$p,add:em,remove:tm,DexieYProvider:nm}=xa;function Au(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,s)}return i}function ka(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Au(Object(i),!0).forEach(function(s){Vr(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Au(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function Mr(e){"@babel/helpers - typeof";return Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mr(e)}function Vr(e,r,i){return r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function dv(e,r){if(e==null)return{};var i={},s=Object.keys(e),l,c;for(c=0;c<s.length;c++)l=s[c],!(r.indexOf(l)>=0)&&(i[l]=e[l]);return i}function vv(e,r){if(e==null)return{};var i=dv(e,r),s,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(l=0;l<c.length;l++)s=c[l],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function hv(e,r){return mv(e)||gv(e,r)||Ds(e,r)||bv()}function Jt(e){return pv(e)||yv(e)||Ds(e)||_v()}function pv(e){if(Array.isArray(e))return $o(e)}function mv(e){if(Array.isArray(e))return e}function yv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gv(e,r){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var s=[],l=!0,c=!1,v,p;try{for(i=i.call(e);!(l=(v=i.next()).done)&&(s.push(v.value),!(r&&s.length===r));l=!0);}catch(h){c=!0,p=h}finally{try{!l&&i.return!=null&&i.return()}finally{if(c)throw p}}return s}}function Ds(e,r){if(e){if(typeof e=="string")return $o(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $o(e,r)}}function $o(e,r){(r==null||r>e.length)&&(r=e.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=e[i];return s}function _v(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ai(e,r){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Ds(e))||r){i&&(e=i);var s=0,l=function(){};return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(h){throw h},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,v=!1,p;return{s:function(){i=i.call(e)},n:function(){var h=i.next();return c=h.done,h},e:function(h){v=!0,p=h},f:function(){try{!c&&i.return!=null&&i.return()}finally{if(v)throw p}}}}var wv="finalize",Ev="consider";function Wr(e,r,i){e.dispatchEvent(new CustomEvent(wv,{detail:{items:r,info:i}}))}function tr(e,r,i){e.dispatchEvent(new CustomEvent(Ev,{detail:{items:r,info:i}}))}var ja="draggedEntered",Si="draggedLeft",za="draggedOverIndex",As="draggedLeftDocument",Ia={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function xv(e,r,i){e.dispatchEvent(new CustomEvent(ja,{detail:{indexObj:r,draggedEl:i}}))}function Tv(e,r,i){e.dispatchEvent(new CustomEvent(Si,{detail:{draggedEl:r,type:Ia.LEFT_FOR_ANOTHER,theOtherDz:i}}))}function kv(e,r){e.dispatchEvent(new CustomEvent(Si,{detail:{draggedEl:r,type:Ia.OUTSIDE_OF_ANY}}))}function Iv(e,r,i){e.dispatchEvent(new CustomEvent(za,{detail:{indexObj:r,draggedEl:i}}))}function Dv(e){window.dispatchEvent(new CustomEvent(As,{detail:{draggedEl:e}}))}var Ct={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:ja,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:za,DRAGGED_LEFT:Si,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Ft={POINTER:"pointer",KEYBOARD:"keyboard"},Ua="isDndShadowItem",Ha="data-is-dnd-shadow-item-internal",Av="data-is-dnd-shadow-item-hint",Bl="id:dnd-shadow-placeholder-0000",Sv="dnd-action-dragged-el",it="id",es=0;function jl(){es++}function zl(){if(es===0)throw new Error("Bug! trying to decrement when there are no dropzones");es--}var Ss=typeof window>"u";function ts(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i,s=r?Lv(e):e.getBoundingClientRect(),l=getComputedStyle(e),c=l.transform;if(c){var v,p,h,_;if(c.startsWith("matrix3d("))i=c.slice(9,-1).split(/, /),v=+i[0],p=+i[5],h=+i[12],_=+i[13];else if(c.startsWith("matrix("))i=c.slice(7,-1).split(/, /),v=+i[0],p=+i[3],h=+i[4],_=+i[5];else return s;var w=l.transformOrigin,I=s.x-h-(1-v)*parseFloat(w),b=s.y-_-(1-p)*parseFloat(w.slice(w.indexOf(" ")+1)),x=v?s.width/v:e.offsetWidth,O=p?s.height/p:e.offsetHeight;return{x:I,y:b,width:x,height:O,top:b,right:I+x,bottom:b+O,left:I}}else return s}function Ul(e){var r=ts(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Hl(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Vl(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Ov(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function Va(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function bi(e){return Vl(Hl(e))}function Su(e,r){var i=bi(e),s=Ul(r);return Va(i,s)}function Ou(e,r){var i=bi(e),s=bi(r);return Ov(i,s)}function Cv(e){var r=Hl(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function Lv(e){for(var r=e.getBoundingClientRect(),i={top:r.top,bottom:r.bottom,left:r.left,right:r.right},s=!1,l=!1,c=e.parentElement;c&&c!==document.body;){var v=window.getComputedStyle(c),p=v.overflowY,h=v.overflowX,_=p==="scroll"||p==="auto",w=h==="scroll"||h==="auto";if(_||w){var I=c.getBoundingClientRect();if(_){var b=Math.max(i.top,I.top),x=Math.min(i.bottom,I.bottom);(b!==i.top||x!==i.bottom)&&(s=!0),i.top=b,i.bottom=x}if(w){var O=Math.max(i.left,I.left),L=Math.min(i.right,I.right);(O!==i.left||L!==i.right)&&(l=!0),i.left=O,i.right=L}}c=c.parentElement}return s||l?{top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:Math.max(0,i.right-i.left),height:Math.max(0,i.bottom-i.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var Kr;function Os(){Kr=new Map}Os();function Pv(e){var r=Array.from(e.children).findIndex(function(i){return i.getAttribute(Ha)});if(r>=0)return Kr.has(e)||Kr.set(e,new Map),Kr.get(e).set(r,Ul(e.children[r])),r}function Rv(e,r){if(!Su(e,r))return null;var i=r.children;if(i.length===0)return{index:0,isProximityBased:!0};for(var s=Pv(r),l=0;l<i.length;l++)if(Su(e,i[l])){var c=Kr.has(r)&&Kr.get(r).get(l);return c&&!Va(bi(e),c)?{index:s,isProximityBased:!1}:{index:l,isProximityBased:!1}}for(var v=Number.MAX_VALUE,p=void 0,h=0;h<i.length;h++){var _=Ou(e,i[h]);_<v&&(v=_,p=h)}if(i.length>0){var w=i.length,I=i[w-1],b=I.cloneNode(!1);b.style.visibility="hidden",b.style.pointerEvents="none",r.appendChild(b);var x=Ou(e,b);x<v&&(p=w),r.removeChild(b)}return{index:p,isProximityBased:!0}}function ui(e){return JSON.stringify(e,null,2)}function Da(e){if(!e)throw new Error("cannot get depth of a falsy node");return Wl(e,0)}function Wl(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?Wl(e.parentElement,r+1):r-1}function Mv(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var i in e)if(!{}.hasOwnProperty.call(r,i)||r[i]!==e[i])return!1;return!0}function Nv(e,r){if(e.length!==r.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==r[i])return!1;return!0}var Kv=200,Cu=10,ns;function Fv(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kv,s=arguments.length>3?arguments[3]:void 0,l,c,v=!1,p,h=Array.from(r).sort(function(w,I){return Da(I)-Da(w)});function _(){var w=bi(e),I=s.multiScrollIfNeeded();if(!I&&p&&Math.abs(p.x-w.x)<Cu&&Math.abs(p.y-w.y)<Cu){ns=window.setTimeout(_,i);return}if(Cv(e)){Dv(e);return}p=w;var b=!1,x=Ai(h),O;try{for(x.s();!(O=x.n()).done;){var L=O.value;I&&Os();var A=Rv(e,L);if(A!==null){var S=A.index;b=!0,L!==l?(l&&Tv(l,e,L),xv(L,A,e),l=L):S!==c&&(Iv(L,A,e),c=S);break}}}catch(F){x.e(F)}finally{x.f()}!b&&v&&l?(kv(l,e),l=void 0,c=void 0,v=!1):v=!0,ns=window.setTimeout(_,i)}_()}function Bv(){clearTimeout(ns),Os()}var li=30;function jv(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function i(c){var v=e,p=v.directionObj,h=v.stepPx;p&&(c.scrollBy(p.x*h,p.y*h),window.requestAnimationFrame(function(){return i(c)}))}function s(c){return li-c}function l(c,v){if(!v)return!1;var p=zv(c,v),h=!!e.directionObj;if(p===null)return h&&r(),!1;var _=!1,w=!1;return v.scrollHeight>v.clientHeight&&(p.bottom<li?(_=!0,e.directionObj={x:0,y:1},e.stepPx=s(p.bottom)):p.top<li&&(_=!0,e.directionObj={x:0,y:-1},e.stepPx=s(p.top)),!h&&_)||v.scrollWidth>v.clientWidth&&(p.right<li?(w=!0,e.directionObj={x:1,y:0},e.stepPx=s(p.right)):p.left<li&&(w=!0,e.directionObj={x:-1,y:0},e.stepPx=s(p.left)),!h&&w)?(i(v),!0):(r(),!1)}return{scrollIfNeeded:l,resetScrolling:r}}function zv(e,r){var i=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return Va(e,i)?{top:e.y-i.top,bottom:i.bottom-e.y,left:e.x-i.left,right:i.right-e.x}:null}function Uv(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i=Vv(e),s=Array.from(i).sort(function(h,_){return Da(_)-Da(h)}),l=jv(),c=l.scrollIfNeeded,v=l.resetScrolling;function p(){var h=r();if(!h||!s)return!1;for(var _=s.filter(function(b){return Va(h,b.getBoundingClientRect())||b===document.scrollingElement}),w=0;w<_.length;w++){var I=c(h,_[w]);if(I)return!0}return!1}return{multiScrollIfNeeded:i.size>0?p:function(){return!1},destroy:function(){return v()}}}function Hv(e){if(!e)return[];for(var r=[],i=e;i;){var s=window.getComputedStyle(i),l=s.overflow;l.split(" ").some(function(c){return c.includes("auto")||c.includes("scroll")})&&r.push(i),i=i.parentElement}return r}function Vv(e){var r=new Set,i=Ai(e),s;try{for(i.s();!(s=i.n()).done;){var l=s.value;Hv(l).forEach(function(c){return r.add(c)})}}catch(c){i.e(c)}finally{i.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function Wv(e){var r=e.cloneNode(!0),i=[],s=e.tagName==="SELECT",l=s?[e]:Jt(e.querySelectorAll("select")),c=Ai(l),v;try{for(c.s();!(v=c.n()).done;){var p=v.value;i.push(p.value)}}catch(H){c.e(H)}finally{c.f()}if(l.length>0)for(var h=s?[r]:Jt(r.querySelectorAll("select")),_=0;_<h.length;_++){var w=h[_],I=i[_],b=w.querySelector('option[value="'.concat(I,'"'));b&&b.setAttribute("selected",!0)}var x=e.tagName==="CANVAS",O=x?[e]:Jt(e.querySelectorAll("canvas"));if(O.length>0)for(var L=x?[r]:Jt(r.querySelectorAll("canvas")),A=0;A<L.length;A++){var S=O[A],F=L[A];F.width=S.width,F.height=S.height,S.width>0&&S.height>0&&F.getContext("2d").drawImage(S,0,0)}return r}var wi=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Gv=Vr({},wi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Gl(e){if(!wi[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(wi)));return Gv[e]}var Yv=.2;function vr(e){return"".concat(e," ").concat(Yv,"s ease")}function qv(e,r){var i=e.getBoundingClientRect(),s=Wv(e);Yl(e,s),s.id=Sv,s.style.position="fixed";var l=i.top,c=i.left;if(s.style.top="".concat(l,"px"),s.style.left="".concat(c,"px"),r){var v=Vl(i);l-=v.y-r.y,c-=v.x-r.x,window.setTimeout(function(){s.style.top="".concat(l,"px"),s.style.left="".concat(c,"px")},0)}return s.style.margin="0",s.style.boxSizing="border-box",s.style.height="".concat(i.height,"px"),s.style.width="".concat(i.width,"px"),s.style.transition="".concat(vr("top"),", ").concat(vr("left"),", ").concat(vr("background-color"),", ").concat(vr("opacity"),", ").concat(vr("color")," "),window.setTimeout(function(){return s.style.transition+=", ".concat(vr("width"),", ").concat(vr("height"))},0),s.style.zIndex="9999",s.style.cursor="grabbing",s}function Zv(e){e.style.cursor="grab"}function Qv(e,r,i,s){Yl(r,e);var l=r.getBoundingClientRect(),c=e.getBoundingClientRect(),v=l.width-c.width,p=l.height-c.height;if(v||p){var h={left:(i-c.left)/c.width,top:(s-c.top)/c.height};Gl(wi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(l.height,"px"),e.style.width="".concat(l.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-h.left*v,"px"),e.style.top="".concat(parseFloat(e.style.top)-h.top*p,"px")}}function Yl(e,r){var i=window.getComputedStyle(e);Array.from(i).filter(function(s){return s.startsWith("background")||s.startsWith("padding")||s.startsWith("font")||s.startsWith("text")||s.startsWith("align")||s.startsWith("justify")||s.startsWith("display")||s.startsWith("flex")||s.startsWith("border")||s==="opacity"||s==="color"||s==="list-style-type"||Gl(wi.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(s==="width"||s==="height")}).forEach(function(s){return r.style.setProperty(s,i.getPropertyValue(s),i.getPropertyPriority(s))})}function Xv(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function ql(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function Jv(e){e.style.visibility="hidden",e.setAttribute(Ha,"true")}function $v(e){e.style.visibility="",e.removeAttribute(Ha)}function da(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(c){s.style[c]=l[c]}),i(s).forEach(function(c){return s.classList.add(c)})})}function Aa(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(c){s.style[c]=""}),i(s).forEach(function(c){return s.classList.contains(c)&&s.classList.remove(c)})})}function eh(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var i=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=i}}var th="--any--",nh=100,rh=20,oa=3,ih=80,Lu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Pu="data-is-dnd-original-dragged-item",Rt,ut,Mt,Wa,ze,Ga,Qn,ht,pn,xt,Hn=!1,Cs=!1,Ls,Oi=!1,va=[],hi,mn,fi=!1,on=new Map,Je=new Map,Fo=new WeakMap;function ah(e,r){on.has(r)||on.set(r,new Set),on.get(r).has(e)||(on.get(r).add(e),jl())}function Ru(e,r){on.get(r).delete(e),zl(),on.get(r).size===0&&on.delete(r)}function oh(){var e=on.get(Wa),r=Ai(e),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;s.addEventListener(ja,Zl),s.addEventListener(Si,Ql),s.addEventListener(za,Xl)}}catch(v){r.e(v)}finally{r.f()}window.addEventListener(As,Gr);var l=Math.max.apply(Math,Jt(Array.from(e.keys()).map(function(v){return Je.get(v).dropAnimationDurationMs}))),c=l===0?rh:Math.max(l,nh);hi=Uv(e,function(){return xt}),Fv(ut,e,c*1.07,hi)}function sh(){var e=on.get(Wa),r=Ai(e),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;s.removeEventListener(ja,Zl),s.removeEventListener(Si,Ql),s.removeEventListener(za,Xl)}}catch(l){r.e(l)}finally{r.f()}window.removeEventListener(As,Gr),hi&&(hi.destroy(),hi=void 0),Bv()}function Ya(e){return e.findIndex(function(r){return!!r[Ua]})}function uh(e){var r;return ka(ka({},e),{},(r={},Vr(r,Ua,!0),Vr(r,it,Bl),r))}function Zl(e){var r=Je.get(e.currentTarget),i=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==ze)){if(Oi=!1,i=i.filter(function(p){return p[it]!==Qn[it]&&p[it]!==Bl}),ze!==e.currentTarget){var l=Je.get(ze).items,c=l.filter(function(p){return!p[Ua]});tr(ze,c,{trigger:Ct.DRAGGED_ENTERED_ANOTHER,id:Mt[it],source:Ft.POINTER})}var v=e.detail.indexObj.index;ht=e.currentTarget,i.splice(v,0,Qn),tr(e.currentTarget,i,{trigger:Ct.DRAGGED_ENTERED,id:Mt[it],source:Ft.POINTER})}}function Ql(e){if(Hn){var r=Je.get(e.currentTarget),i=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==ze&&e.currentTarget!==ht)){var l=Jt(i),c=Ya(l);c!==-1&&l.splice(c,1);var v=ht;ht=void 0;var p=e.detail,h=p.type,_=p.theOtherDz;if(h===Ia.OUTSIDE_OF_ANY||h===Ia.LEFT_FOR_ANOTHER&&_!==ze&&Je.get(_).dropFromOthersDisabled){Oi=!0,ht=ze;var w=v===ze?l:Jt(Je.get(ze).items);w.splice(Ga,0,Qn),tr(ze,w,{trigger:Ct.DRAGGED_LEFT_ALL,id:Mt[it],source:Ft.POINTER})}tr(e.currentTarget,l,{trigger:Ct.DRAGGED_LEFT,id:Mt[it],source:Ft.POINTER})}}}function Xl(e){var r=Je.get(e.currentTarget),i=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==ze)){var l=Jt(i);Oi=!1;var c=e.detail.indexObj.index,v=Ya(l);v!==-1&&l.splice(v,1),l.splice(c,0,Qn),tr(e.currentTarget,l,{trigger:Ct.DRAGGED_OVER_INDEX,id:Mt[it],source:Ft.POINTER})}}function Sa(e){e.preventDefault();var r=e.touches?e.touches[0]:e;xt={x:r.clientX,y:r.clientY},ut.style.transform="translate3d(".concat(xt.x-pn.x,"px, ").concat(xt.y-pn.y,"px, 0)")}function Gr(){Cs=!0,window.removeEventListener("mousemove",Sa),window.removeEventListener("touchmove",Sa),window.removeEventListener("mouseup",Gr),window.removeEventListener("touchend",Gr),sh(),Zv(ut),ht||(ht=ze);var e=Je.get(ht),r=e.items,i=e.type;Aa(on.get(i),function(c){return Je.get(c).dropTargetStyle},function(c){return Je.get(c).dropTargetClasses});var s=Ya(r);s===-1&&ht===ze&&(s=Ga),r=r.map(function(c){return c[Ua]?Mt:c});function l(){Ls(),Wr(ht,r,{trigger:Oi?Ct.DROPPED_OUTSIDE_OF_ANY:Ct.DROPPED_INTO_ZONE,id:Mt[it],source:Ft.POINTER}),ht!==ze&&Wr(ze,Je.get(ze).items,{trigger:Ct.DROPPED_INTO_ANOTHER,id:Mt[it],source:Ft.POINTER});var c=Array.from(ht.children).find(function(v){return v.getAttribute(Ha)});c&&$v(c),fh()}Je.get(ht).dropAnimationDisabled?l():lh(s,l)}function lh(e,r){var i=e>-1?ts(ht.children[e],!1):ts(ht,!1),s={x:i.left-parseFloat(ut.style.left),y:i.top-parseFloat(ut.style.top)},l=Je.get(ht),c=l.dropAnimationDurationMs,v="transform ".concat(c,"ms ease");ut.style.transition=ut.style.transition?ut.style.transition+","+v:v,ut.style.transform="translate3d(".concat(s.x,"px, ").concat(s.y,"px, 0)"),window.setTimeout(r,c)}function ch(e,r){va.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){ql(e),document.body.appendChild(e)})}function fh(){ut&&ut.remove&&ut.remove(),Rt&&Rt.remove&&Rt.remove(),ut=void 0,Rt=void 0,Mt=void 0,Wa=void 0,ze=void 0,Ga=void 0,Qn=void 0,ht=void 0,pn=void 0,xt=void 0,Hn=!1,Cs=!1,Ls=void 0,Oi=!1,mn&&clearTimeout(mn),mn=void 0,fi=!1,va.length&&(va.forEach(function(e){var r=e.dz,i=e.destroy;i(),r.remove()}),va=[])}function dh(e,r){var i=!1,s={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Lu,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},l=new Map;function c(){window.addEventListener("mousemove",h,{passive:!1}),window.addEventListener("touchmove",h,{passive:!1,capture:!1}),window.addEventListener("mouseup",p,{passive:!1}),window.addEventListener("touchend",p,{passive:!1})}function v(){window.removeEventListener("mousemove",h),window.removeEventListener("touchmove",h),window.removeEventListener("mouseup",p),window.removeEventListener("touchend",p),mn&&(clearTimeout(mn),mn=void 0,fi=!1)}function p(b){if(v(),Rt=void 0,pn=void 0,xt=void 0,b.type==="touchend"){var x=new Event("click",{bubbles:!0,cancelable:!0});b.target.dispatchEvent(x)}}function h(b){var x=!!b.touches,O=x?b.touches[0]:b;if(x&&s.delayTouchStartMs>0&&!fi){xt={x:O.clientX,y:O.clientY},(Math.abs(xt.x-pn.x)>=oa||Math.abs(xt.y-pn.y)>=oa)&&(mn&&(clearTimeout(mn),mn=void 0),p(b));return}b.preventDefault(),xt={x:O.clientX,y:O.clientY},(Math.abs(xt.x-pn.x)>=oa||Math.abs(xt.y-pn.y)>=oa)&&(v(),w())}function _(b){if(!(b.target!==b.currentTarget&&(b.target.value!==void 0||b.target.isContentEditable))&&!b.button&&!Hn){var x=!!b.touches,O=x&&s.delayTouchStartMs>0;O||b.preventDefault(),b.stopPropagation();var L=x?b.touches[0]:b;pn={x:L.clientX,y:L.clientY},xt=ka({},pn),Rt=b.currentTarget,O&&(fi=!1,mn=window.setTimeout(function(){Rt&&(fi=!0,v(),w())},s.delayTouchStartMs)),c()}}function w(){Hn=!0;var b=l.get(Rt);Ga=b,ze=Rt.parentElement;var x=ze.closest("dialog")||ze.closest("[popover]")||ze.getRootNode(),O=x.body||x,L=s.items,A=s.type,S=s.centreDraggedOnCursor,F=Jt(L);Mt=F[b],Wa=A,Qn=uh(Mt),ut=qv(Rt,S&&xt),O.appendChild(ut);function H(){Rt.parentElement?window.requestAnimationFrame(H):(Rt.setAttribute(Pu,!0),O.appendChild(Rt),oh(),ql(Rt),Qn[it]=Mt[it],ut.focus())}window.requestAnimationFrame(H),da(Array.from(on.get(s.type)).filter(function(V){return V===ze||!Je.get(V).dropFromOthersDisabled}),function(V){return Je.get(V).dropTargetStyle},function(V){return Je.get(V).dropTargetClasses}),F.splice(b,1,Qn),Ls=eh(ze),tr(ze,F,{trigger:Ct.DRAG_STARTED,id:Mt[it],source:Ft.POINTER}),window.addEventListener("mousemove",Sa,{passive:!1}),window.addEventListener("touchmove",Sa,{passive:!1,capture:!1}),window.addEventListener("mouseup",Gr,{passive:!1}),window.addEventListener("touchend",Gr,{passive:!1})}function I(b){var x=b.items,O=x===void 0?void 0:x,L=b.flipDurationMs,A=L===void 0?0:L,S=b.type,F=S===void 0?th:S,H=b.dragDisabled,V=H===void 0?!1:H,Q=b.morphDisabled,te=Q===void 0?!1:Q,pe=b.dropFromOthersDisabled,de=pe===void 0?!1:pe,le=b.dropTargetStyle,ce=le===void 0?Lu:le,ie=b.dropTargetClasses,ge=ie===void 0?[]:ie,Fe=b.transformDraggedElement,Me=Fe===void 0?function(){}:Fe,Ne=b.centreDraggedOnCursor,qe=Ne===void 0?!1:Ne,Pe=b.dropAnimationDisabled,Dt=Pe===void 0?!1:Pe,Ue=b.delayTouchStart,Ge=Ue===void 0?!1:Ue;s.dropAnimationDurationMs=A;var At=0;Ge===!0?At=ih:typeof Ge=="number"&&isFinite(Ge)&&Ge>=0&&(At=Ge),s.delayTouchStartMs=At,s.type&&F!==s.type&&Ru(e,s.type),s.type=F,s.items=Jt(O),s.dragDisabled=V,s.morphDisabled=te,s.transformDraggedElement=Me,s.centreDraggedOnCursor=qe,s.dropAnimationDisabled=Dt,i&&Hn&&!Cs&&(!Mv(ce,s.dropTargetStyle)||!Nv(ge,s.dropTargetClasses))&&(Aa([e],function(){return s.dropTargetStyle},function(){return ge}),da([e],function(){return ce},function(){return ge})),s.dropTargetStyle=ce,s.dropTargetClasses=Jt(ge);function Lt(se,Ie){return Je.get(se)?Je.get(se)[Ie]:s[Ie]}i&&Hn&&s.dropFromOthersDisabled!==de&&(de?Aa([e],function(se){return Lt(se,"dropTargetStyle")},function(se){return Lt(se,"dropTargetClasses")}):da([e],function(se){return Lt(se,"dropTargetStyle")},function(se){return Lt(se,"dropTargetClasses")})),s.dropFromOthersDisabled=de,Je.set(e,s),ah(e,F);for(var $t=Hn?Ya(s.items):-1,gt=0;gt<e.children.length;gt++){var J=e.children[gt];if(Xv(J,V),gt===$t){te||Qv(ut,J,xt.x,xt.y),s.transformDraggedElement(ut,Mt,gt),Jv(J);continue}J.removeEventListener("mousedown",Fo.get(J)),J.removeEventListener("touchstart",Fo.get(J)),V||(J.addEventListener("mousedown",_),J.addEventListener("touchstart",_),Fo.set(J,_)),l.set(J,gt),i||(i=!0)}}return I(r),{update:function(x){I(x)},destroy:function(){function x(){Ru(e,Je.get(e).type),Je.delete(e)}Hn&&!e.closest("[".concat(Pu,"]"))?ch(e,x):x()}}}var sa,rs={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Jl=(sa={},Vr(sa,rs.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Vr(sa,rs.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),sa),vh="dnd-action-aria-alert",et;function is(){et||(et=document.createElement("div"),(function(){et.id=vh,et.style.position="fixed",et.style.bottom="0",et.style.left="0",et.style.zIndex="-5",et.style.opacity="0",et.style.height="0",et.style.width="0",et.setAttribute("role","alert")})(),document.body.prepend(et),Object.entries(Jl).forEach(function(e){var r=hv(e,2),i=r[0],s=r[1];return document.body.prepend(mh(i,s))}))}function hh(){return Ss?null:(document.readyState==="complete"?is():window.addEventListener("DOMContentLoaded",is),ka({},rs))}function ph(){Ss||!et||(Object.keys(Jl).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),et.remove(),et=void 0)}function mh(e,r){var i=document.createElement("div");return i.id=e,i.innerHTML="<p>".concat(r,"</p>"),i.style.display="none",i.style.position="fixed",i.style.zIndex="-5",i}function Fr(e){if(!Ss){et||is(),et.innerHTML="";var r=document.createTextNode(e);et.appendChild(r),et.style.display="none",et.style.display="inline"}}var yh="--any--",Mu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},qt=!1,as,Tt,_r="",hr,yn,Wn="",Oa=new WeakSet,Nu=new WeakMap,Ku=new WeakMap,os=new Map,vt=new Map,an=new Map,Ca;function gh(e,r){an.size===0&&(Ca=hh(),window.addEventListener("keydown",$l),window.addEventListener("click",ec)),an.has(r)||an.set(r,new Set),an.get(r).has(e)||(an.get(r).add(e),jl())}function Fu(e,r){Tt===e&&Ei(),an.get(r).delete(e),zl(),an.get(r).size===0&&an.delete(r),an.size===0&&(window.removeEventListener("keydown",$l),window.removeEventListener("click",ec),Ca=void 0,ph())}function $l(e){if(qt)switch(e.key){case"Escape":{Ei();break}}}function ec(){qt&&(Oa.has(document.activeElement)||Ei())}function _h(e){if(qt){var r=e.currentTarget;if(r!==Tt){_r=r.getAttribute("aria-label")||"";var i=vt.get(Tt),s=i.items,l=s.find(function(I){return I[it]===yn}),c=s.indexOf(l),v=s.splice(c,1)[0],p=vt.get(r),h=p.items,_=p.autoAriaDisabled;r.getBoundingClientRect().top<Tt.getBoundingClientRect().top||r.getBoundingClientRect().left<Tt.getBoundingClientRect().left?(h.push(v),_||Fr("Moved item ".concat(Wn," to the end of the list ").concat(_r))):(h.unshift(v),_||Fr("Moved item ".concat(Wn," to the beginning of the list ").concat(_r)));var w=Tt;Wr(w,s,{trigger:Ct.DROPPED_INTO_ANOTHER,id:yn,source:Ft.KEYBOARD}),Wr(r,h,{trigger:Ct.DROPPED_INTO_ZONE,id:yn,source:Ft.KEYBOARD}),Tt=r}}}function tc(){os.forEach(function(e,r){var i=e.update;return i(vt.get(r))})}function Ei(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;vt.get(Tt).autoAriaDisabled||Fr("Stopped dragging item ".concat(Wn)),Oa.has(document.activeElement)&&document.activeElement.blur(),e&&tr(Tt,vt.get(Tt).items,{trigger:Ct.DRAG_STOPPED,id:yn,source:Ft.KEYBOARD}),Aa(an.get(as),function(r){return vt.get(r).dropTargetStyle},function(r){return vt.get(r).dropTargetClasses}),hr=null,yn=null,Wn="",as=null,Tt=null,_r="",qt=!1,tc()}function bh(e,r){var i={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Mu,dropTargetClasses:[],autoAriaDisabled:!1};function s(w,I,b){w.length<=1||w.splice(b,1,w.splice(I,1,w[b])[0])}function l(w){switch(w.key){case"Enter":case" ":{if((w.target.disabled!==void 0||w.target.href||w.target.isContentEditable)&&!Oa.has(w.target))return;w.preventDefault(),w.stopPropagation(),qt?Ei():c(w);break}case"ArrowDown":case"ArrowRight":{if(!qt)return;w.preventDefault(),w.stopPropagation();var I=vt.get(e),b=I.items,x=Array.from(e.children),O=x.indexOf(w.currentTarget);O<x.length-1&&(i.autoAriaDisabled||Fr("Moved item ".concat(Wn," to position ").concat(O+2," in the list ").concat(_r)),s(b,O,O+1),Wr(e,b,{trigger:Ct.DROPPED_INTO_ZONE,id:yn,source:Ft.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!qt)return;w.preventDefault(),w.stopPropagation();var L=vt.get(e),A=L.items,S=Array.from(e.children),F=S.indexOf(w.currentTarget);F>0&&(i.autoAriaDisabled||Fr("Moved item ".concat(Wn," to position ").concat(F," in the list ").concat(_r)),s(A,F,F-1),Wr(e,A,{trigger:Ct.DROPPED_INTO_ZONE,id:yn,source:Ft.KEYBOARD}));break}}}function c(w){p(w.currentTarget),Tt=e,as=i.type,qt=!0;var I=Array.from(an.get(i.type)).filter(function(x){return x===Tt||!vt.get(x).dropFromOthersDisabled});if(da(I,function(x){return vt.get(x).dropTargetStyle},function(x){return vt.get(x).dropTargetClasses}),!i.autoAriaDisabled){var b="Started dragging item ".concat(Wn,". Use the arrow keys to move it within its list ").concat(_r);I.length>1&&(b+=", or tab to another list in order to move the item into it"),Fr(b)}tr(e,vt.get(e).items,{trigger:Ct.DRAG_STARTED,id:yn,source:Ft.KEYBOARD}),tc()}function v(w){qt&&w.currentTarget!==hr&&(w.stopPropagation(),Ei(!1),c(w))}function p(w){var I=vt.get(e),b=I.items,x=Array.from(e.children),O=x.indexOf(w);hr=w,hr.tabIndex=i.zoneItemTabIndex,yn=b[O][it],Wn=x[O].getAttribute("aria-label")||""}function h(w){var I=w.items,b=I===void 0?[]:I,x=w.type,O=x===void 0?yh:x,L=w.dragDisabled,A=L===void 0?!1:L,S=w.zoneTabIndex,F=S===void 0?0:S,H=w.zoneItemTabIndex,V=H===void 0?0:H,Q=w.dropFromOthersDisabled,te=Q===void 0?!1:Q,pe=w.dropTargetStyle,de=pe===void 0?Mu:pe,le=w.dropTargetClasses,ce=le===void 0?[]:le,ie=w.autoAriaDisabled,ge=ie===void 0?!1:ie;i.items=Jt(b),i.dragDisabled=A,i.dropFromOthersDisabled=te,i.zoneTabIndex=F,i.zoneItemTabIndex=V,i.dropTargetStyle=de,i.dropTargetClasses=ce,i.autoAriaDisabled=ge,i.type&&O!==i.type&&Fu(e,i.type),i.type=O,gh(e,O),ge||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",A?Ca.DND_ZONE_DRAG_DISABLED:Ca.DND_ZONE_ACTIVE)),vt.set(e,i),qt?e.tabIndex=e===Tt||hr.contains(e)||i.dropFromOthersDisabled||Tt&&i.type!==vt.get(Tt).type?-1:0:e.tabIndex=i.zoneTabIndex,e.addEventListener("focus",_h);for(var Fe=function(qe){var Pe=e.children[qe];Oa.add(Pe),Pe.tabIndex=qt?-1:i.zoneItemTabIndex,ge||Pe.setAttribute("role","listitem"),Pe.removeEventListener("keydown",Nu.get(Pe)),Pe.removeEventListener("click",Ku.get(Pe)),A||(Pe.addEventListener("keydown",l),Nu.set(Pe,l),Pe.addEventListener("click",v),Ku.set(Pe,v)),qt&&i.items[qe][it]===yn&&(hr=Pe,hr.tabIndex=i.zoneItemTabIndex,Pe.focus())},Me=0;Me<e.children.length;Me++)Fe(Me)}h(r);var _={update:function(I){h(I)},destroy:function(){Fu(e,i.type),vt.delete(e),os.delete(e)}};return os.set(e,_),_}var wh=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Ps(e,r){if(Eh(e))return{update:function(){},destroy:function(){}};Bu(r);var i=dh(e,r),s=bh(e,r);return{update:function(c){Bu(c),i.update(c),s.update(c)},destroy:function(){i.destroy(),s.destroy()}}}function Eh(e){return!!e.closest("[".concat(Av,'="true"]'))}function Bu(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var i=e.zoneTabIndex,s=e.zoneItemTabIndex;e.dropTargetStyle;var l=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var c=e.delayTouchStart;e.dropAnimationDisabled;var v=vv(e,wh);if(Object.keys(v).length>0&&console.warn("dndzone will ignore unknown options",v),!r)throw new Error("no 'items' key provided to dndzone");var p=r.find(function(w){return!{}.hasOwnProperty.call(w,it)});if(p)throw new Error("missing '".concat(it,"' property for item ").concat(ui(p)));if(l&&!Array.isArray(l))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Mr(l),", ").concat(ui(l)));if(i&&!ju(i))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Mr(i),", ").concat(ui(i)));if(s&&!ju(s))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Mr(s),", ").concat(ui(s)));if(c!==void 0&&c!==!1){var h=c===!0,_=typeof c=="number"&&isFinite(c)&&c>=0;if(!h&&!_)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(Mr(c),", ").concat(ui(c)))}}function ju(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}const be=new xa("TaskPlannerDB");be.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});be.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));be.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));be.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify(r=>{r.archivedAt===void 0&&(r.archivedAt=null)}));be.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify((r,i)=>{r.columnIndex===void 0&&(r.columnIndex=r.order%5)}));function qa(e){return e.length===0?0:Math.max(...e.map(i=>i.order))+1}async function xh(){return(await be.lists.orderBy("order").toArray()).filter(r=>r.archivedAt==null)}async function Th(){return await be.lists.orderBy("order").toArray()}async function zu(e,r=null){const i=e.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const s=await be.lists.orderBy("order").toArray(),l=qa(s),c=5;let v;return r!==null&&r>=0&&r<c?v=r:v=l%c,await be.lists.add({name:i,order:l,archivedAt:null,columnIndex:v})}async function kh(e=null){const r=await be.lists.orderBy("order").toArray(),i=qa(r),s=5;let l;return e!==null&&e>=0&&e<s?l=e:l=i%s,await be.lists.add({name:null,order:i,archivedAt:null,columnIndex:l})}async function Ih(e,r){const i=r.trim();if(i==="")throw new Error("List name cannot be empty");return await be.lists.update(e,{name:i})}async function Bo(e){return await be.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function Dh(){return(await be.tasks.where("status").equals("archived").toArray()).sort((r,i)=>{const s=r.archivedAt||0,l=i.archivedAt||0;return l!==s?l-s:(i.order||0)-(r.order||0)})}async function Ah(e,r,i=null){let s=e;e===null&&(s=await kh(i));const l=await be.tasks.where("listId").equals(s).filter(h=>h.status!=="archived").sortBy("order"),c=qa(l),v=r===""?"":r.trim();return await be.tasks.add({text:v,listId:s,order:c,status:"unchecked"})}async function Sh(e,r){const i=r===""?"":r.trim();return await be.tasks.update(e,{text:i})}async function Uu(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const i={status:r};return r==="archived"?i.archivedAt=Date.now():r!=="archived"&&(i.archivedAt=null),await be.tasks.update(e,i)}async function Oh(e){const r=await be.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const i=await be.lists.get(r.listId);if(!i)throw new Error(`Task's list ${r.listId} not found`);let s=!1;i.archivedAt!=null&&(await Lh(r.listId),s=!0);const l=await be.tasks.where("listId").equals(r.listId).filter(p=>p.status!=="archived"&&p.id!==e).sortBy("order"),c=qa(l);return{taskUpdated:await be.tasks.update(e,{status:"checked",order:c}),listRestored:s}}async function jo(e,r){if(!r||r.length===0)return;const i=r.map(p=>p.id),l=(await be.tasks.bulkGet(i)).filter(p=>p!==void 0);if(l.length===0)return;const c=l.filter(p=>p.listId!==e),v=new Set(c.map(p=>p.listId));await be.transaction("rw",be.tasks,async()=>{for(let p=0;p<r.length;p++){const h=r[p].id,_=l.find(I=>I.id===h);if(!_)continue;const w={order:p};_.listId!==e&&(w.listId=e),await be.tasks.update(h,w)}for(const p of v){const h=await be.tasks.where("listId").equals(p).filter(_=>_.status!=="archived").sortBy("order");for(let _=0;_<h.length;_++)await be.tasks.update(h[_].id,{order:_})}})}async function Ch(e){const r=Date.now();return await be.lists.update(e,{archivedAt:r})}async function Lh(e){return await be.lists.update(e,{archivedAt:null})}async function Ph(e){const r=Date.now(),i=await be.tasks.where("listId").equals(e).filter(l=>l.status==="unchecked"||l.status==="checked").toArray(),s=i.map(l=>be.tasks.update(l.id,{status:"archived",archivedAt:r}));return await Promise.all(s),i.length}async function Hu(e,r){if(!r||r.length===0)return;if(e<0||e>=5)throw new Error(`Invalid column index: ${e}`);const i=r.map(p=>p.id),s=await be.lists.bulkGet(i);if(s.filter(p=>!p).length>0)throw new Error("Cannot update order: some lists do not exist");const c=s.filter(p=>p!==void 0),v=c.filter(p=>(p.columnIndex??0)!==e);new Set(v.map(p=>p.columnIndex??0)),await be.transaction("rw",be.lists,async()=>{const p=new Set;for(let b=0;b<r.length;b++){const x=r[b].id,O=c.find(S=>S.id===x);if(!O)continue;const L={order:b},A=O.columnIndex??0;A!==e&&(L.columnIndex=e,p.add(A)),await be.lists.update(x,L)}const _=(await be.lists.orderBy("order").toArray()).filter(b=>b.archivedAt==null),w=Array(5).fill(null).map(()=>[]);for(const b of _){const x=b.columnIndex??0,O=x>=5?4:x;w[O].push(b)}const I=new Set([e,...p]);for(const b of I){const x=w[b];x.sort((O,L)=>(O.order??0)-(L.order??0));for(let O=0;O<x.length;O++)await be.lists.update(x[O].id,{order:O})}})}function ss(e){return e&&(e.isDndShadowItem===!0||typeof e.id=="string"&&e.id.startsWith("id:dnd-shadow-placeholder-"))}function Rh(e,r=5){if(!e||e.length===0)return Array(r).fill(null).map(()=>[]);const i=Array(r).fill(null).map(()=>[]),s=r-1;for(const l of e){let c=l.columnIndex??0;c>=r&&(c=s),i[c].push(l)}for(let l=0;l<i.length;l++)i[l].sort((c,v)=>(c.order??0)-(v.order??0));return i}function Mh(e,r){if(!e||e.length===0)return null;for(let i=0;i<e.length;i++){const s=e[i];if(!Array.isArray(s))continue;const l=s.findIndex(c=>c.id===r);if(l!==-1)return{columnIndex:i,index:l}}return null}function Nh(e,r,i,s){const{columnIndex:l,index:c}=e;let v=l,p=c;if(r==="up"){if(c===0)return null;p=c-1}else if(r==="down"){const h=i[l]||[];if(c===h.length-1)return null;p=c+1}else if(r==="left"){if(l===0)return null;v=l-1,p=(i[v]||[]).length}else if(r==="right"){if(l===s-1)return null;v=l+1,p=(i[v]||[]).length}else return null;return{targetColumnIndex:v,targetIndex:p}}function Kh(e,r,i,s){const l=Mh(e,r);if(!l)return null;const{columnIndex:c,index:v}=l,p=Nh(l,i,e,s);if(!p)return null;const{targetColumnIndex:h,targetIndex:_}=p,w=e.map(A=>Array.isArray(A)?[...A]:[]),I=w[c];if(!I||I.length===0)return null;const[b]=I.splice(v,1);if(!b)return null;const x=w[h];if(!x)return null;const O=Math.min(Math.max(_,0),x.length);i==="left"||i==="right"?x.splice(O,0,{...b,columnIndex:h}):x.splice(O,0,b);const L=[];for(let A=0;A<w.length;A++){const S=w[A]||[];for(let F=0;F<S.length;F++){const H=S[F];L.push({...H,columnIndex:A,order:F})}}return{newColumns:w,updatedDraggableLists:L,targetColumnIndex:h,targetColumnItems:(w[h]||[]).map(A=>({id:A.id}))}}function Fh(e,r,i){const s=i.filter(l=>(l.columnIndex??0)!==r);for(let l=0;l<e.length;l++){const c=e[l],v=i.find(h=>h.id===c.id),p=v?{...v,...c,columnIndex:r,order:l}:{...c,columnIndex:r,order:l};s.push(p)}return s}function Bh(e,r,i,s){let l=!1;for(const _ of e){const w=(i||[]).find(I=>I.id===_.id);if(w)(w.columnIndex??0)!==r&&(l=!0);else{const I=s.find(b=>b.id===_.id);I&&(I.columnIndex??0)!==r&&(l=!0)}}const v=(i||[]).filter(_=>(_.columnIndex??0)===r).length;return e.length<v&&!l||e.length===0&&!l&&v>0}const La=160,nc=150,us=1056,jh=816,Pa=16,zh=25,Uh=10,zo=20,ua=10,Hh=40,Vu=200,ls=10,Vh=20;async function Wh(e,r={}){const{maxAttempts:i=zh,retryInterval:s=Uh,waitForTick:l=!0}=r;if(typeof document>"u")return null;l&&await kn();for(let c=0;c<i;c++){const v=e();if(v&&v instanceof HTMLElement)return v.focus(),v;c<i-1&&await new Promise(p=>setTimeout(p,s))}return null}async function rc(e){if(typeof document>"u")return null;await kn();const r=Array.from(document.querySelectorAll(`[data-id="${e}"]`));let i=r.find(s=>s instanceof HTMLElement&&s.getAttribute("role")==="group");return i||(i=r.find(s=>s instanceof HTMLElement&&s.tagName==="DIV")),i instanceof HTMLElement?(i.focus(),i):null}function Gh(e,r,i){if(!e)return null;const s=e.querySelector(r);if(s){const l=s.querySelector(i);if(l&&l instanceof HTMLElement)return l}return null}function Yh(e,r,i,s){const{getKeyboardListDrag:l,getLastKeyboardDraggedListId:c,getShouldRefocusListOnNextTab:v,setShouldRefocusListOnNextTab:p}=e;function h(_){const w=_.key,I=l(),b=I.active===!0,x=I.listId,O=c(),L=v();if(!b&&w==="Tab"&&L&&O!=null){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),p(!1),rc(O);return}if(!(!b||x==null)){if(w==="ArrowUp"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),r(x,"up");return}if(w==="ArrowDown"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),r(x,"down");return}if(w==="ArrowLeft"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),r(x,"left");return}if(w==="ArrowRight"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),r(x,"right");return}if(w==="Escape"||w==="Enter"||w===" "){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),i(),s();return}if(w==="Tab"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),i(),s();return}}}return document.addEventListener("keydown",h,!0),()=>{document.removeEventListener("keydown",h,!0)}}function ic(e){return e===""}function qh(e){return e.trim()===""&&e.length>0}function ac(e){const r=e.trim(),i=qh(e);return{text:i?"":r,isBlank:i}}function Wu(e){if(ic(e))return{valid:!1,normalized:""};const{text:r,isBlank:i}=ac(e);return{valid:!i,normalized:r}}function oc(e,r,i={}){const{ignoreElements:s=[],shouldClose:l=()=>!0,checkIgnoreClick:c=null}=i;function v(h){const _=typeof e=="function"?e():e;if(_&&!_.contains(h.target)&&!(c&&c(h))){for(const w of s){let I=null;if(typeof w=="function"?I=w():I=w,I&&I.contains(h.target))return}l()&&r()}}const p=setTimeout(()=>{document.addEventListener("click",v)},0);return()=>{clearTimeout(p),document.removeEventListener("click",v)}}function Zh(e){const{getColumnIndex:r,setColumnIndex:i,getInput:s,setInput:l,getInputElement:c}=e;function v(x){i(x)}function p(x,O){if(x.key==="Enter"||x.key===" ")x.preventDefault(),x.stopPropagation(),v(O);else if(x.key==="Escape"){x.preventDefault(),x.stopPropagation(),x.stopImmediatePropagation();const L=x.currentTarget;L&&L instanceof HTMLElement&&L.blur()}}function h(x){x.key==="Escape"&&(i(null),l(""))}async function _(x){const O=s()||"",{valid:L,normalized:A}=Wu(O);if(!L){i(null),l("");return}try{await zu(A,x),l(""),await kn();const S=c();S&&setTimeout(()=>{S.focus()},0)}catch(S){console.error("Error creating list:",S)}}async function w(x){const O=s()||"",{valid:L,normalized:A}=Wu(O);if(!L){i(null),l("");return}try{await zu(A,x),l(""),i(null)}catch(S){console.error("Error creating list on Tab:",S)}}function I(){if(r()!==null)return oc(c(),()=>{r()!==null&&(i(null),l(""))},{ignoreElements:[],checkIgnoreClick:O=>{const L=O.target.closest("button");return L&&L.textContent?.trim()==="Save"},shouldClose:()=>!s()||s().trim()===""})}function b(){const x=r(),O=c();if(x===null||!O)return;const L=setTimeout(()=>{O?.focus()},0);return()=>{clearTimeout(L)}}return{handleCreateListClick:v,handleCreateListKeydown:p,handleCreateListInputEscape:h,handleCreateList:_,handleCreateListOnTab:w,setupClickOutsideEffect:I,setupFocusEffect:b}}var Qh=xe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),Xh=xe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function Jh(e,r){nr(r,!0);let i=he(Ut(r.taskText||"")),s=he(!1),l=he(null),c=he(null),v=pt(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const L=24,A=24,S=Pa,H=L+A+S+8-8,V=10,Q=r.taskPosition.top-H,te=r.taskPosition.left-Pa+V,pe=r.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${Q}px; left: ${te}px; width: ${pe}px;`});We(()=>{r.isOpen&&(N(i,r.taskText||"",!0),N(s,!1))}),We(()=>{r.isOpen&&g(l)&&setTimeout(()=>{g(l)?.focus(),g(l)?.select(),g(l)instanceof HTMLTextAreaElement&&(g(l).style.height="auto",g(l).style.height=`${Math.min(g(l).scrollHeight,La)}px`)},0)}),We(()=>{if(g(l)&&g(l)instanceof HTMLTextAreaElement){const L=()=>{g(l).style.height="auto",g(l).style.height=`${Math.min(g(l).scrollHeight,La)}px`};return g(l).addEventListener("input",L),()=>{g(l).removeEventListener("input",L)}}});function p(){const L=g(i)??"",A=L.trim();if(A===""&&L.length>0){r.onSave(r.taskId,""),N(s,!1);return}if(L===""||A===""){N(s,!0);return}r.onSave(r.taskId,A),N(s,!1)}function h(){N(i,r.taskText||"",!0),N(s,!1),r.onCancel()}function _(L){L.target===L.currentTarget&&h()}function w(L){if(L.key==="Tab"){if(!g(c))return;const A=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),S=Array.from(g(c).querySelectorAll(A)).filter(te=>!(!(te instanceof HTMLElement)||te.hasAttribute("disabled")||te.getAttribute("aria-hidden")==="true"));if(S.length===0)return;const F=document.activeElement,H=S.indexOf(F);let V;L.shiftKey?H<=0?V=S.length-1:V=H-1:H===-1||H===S.length-1?V=0:V=H+1,L.preventDefault(),L.stopPropagation();const Q=S[V];Q&&Q instanceof HTMLElement&&Q.focus()}else L.key==="Escape"?h():L.key==="Enter"&&!L.shiftKey&&document.activeElement===g(l)&&(L.preventDefault(),p())}function I(){r.onArchive&&r.onArchive(r.taskId)}var b=Zn(),x=mt(b);{var O=L=>{var A=Xh();A.__click=_,A.__keydown=w;var S=ye(A);S.__click=ie=>ie.stopPropagation();var F=Ee(ye(S),2),H=ye(F);Ht(H,ie=>N(l,ie),()=>g(l));var V=Ee(H,2);{var Q=ie=>{var ge=Qh();me(ie,ge)};$e(V,ie=>{g(s)&&ie(Q)})}var te=Ee(F,2),pe=ye(te);pe.__click=I;var de=Ee(pe,2),le=ye(de);le.__click=h;var ce=Ee(le,2);ce.__click=p,Ht(S,ie=>N(c,ie),()=>g(c)),tt(ie=>{er(S,ie),er(H,`width: ${nc}px;`),st(H,"aria-describedby",g(s)?"validation-message":void 0),ce.disabled=g(s),st(ce,"aria-label",g(s)?"Save disabled: task cannot be empty":"Save task changes")},[()=>g(v)()]),ks(H,()=>g(i),ie=>N(i,ie)),me(L,A)};$e(x,L=>{r.isOpen&&L(O)})}me(e,b),rr()}Tr(["click","keydown"]);var $h=xe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),ep=xe('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-3 py-2 border border-grey-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-grey-100 border border-grey-50 rounded bg-grey-20 hover:bg-grey-30" aria-label="Archive this list">Archive</button> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-grey-50 rounded bg-grey-20 hover:bg-grey-30" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Save</button></div></div>',1),tp=xe('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-grey-100">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-grey-50 rounded bg-grey-20 hover:bg-grey-30" aria-label="Cancel archiving">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700" aria-label="Confirm archive list">Archive</button></div>',1),np=xe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-grey-10 text-grey-110 p-6 rounded-xl shadow-2xl border-2 border-grey-50 fixed box-border" role="document"><!></div></div>');function rp(e,r){nr(r,!0);let i=he(Ut(r.listName||"")),s=he(!1),l=he(null),c=he(null),v=he("edit"),p=pt(()=>()=>{if(!r.listPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const F=24,H=24,V=Pa,te=F+H+V+8-8,pe=r.listPosition.top-te,de=r.listPosition.left-Pa,le=Math.max(r.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${pe}px; left: ${de}px; width: ${le}px; max-width: ${le}px; box-sizing: border-box;`});We(()=>{r.isOpen&&(N(i,r.listName||"",!0),N(s,!1),N(v,"edit"))}),We(()=>{r.isOpen&&g(l)&&setTimeout(()=>{g(l)?.focus(),g(l)?.select()},0)});function h(){const H=(g(i)??"").trim();if(H===""){N(s,!0);return}r.onSave(r.listId,H),N(s,!1)}function _(){N(i,r.listName||"",!0),N(s,!1),r.onCancel()}function w(F){F.target===F.currentTarget&&_()}function I(F){if(F.key==="Tab"){if(!g(c))return;const H=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),V=Array.from(g(c).querySelectorAll(H)).filter(le=>!(!(le instanceof HTMLElement)||le.hasAttribute("disabled")||le.getAttribute("aria-hidden")==="true"));if(V.length===0)return;const Q=document.activeElement,te=V.indexOf(Q);let pe;F.shiftKey?te<=0?pe=V.length-1:pe=te-1:te===-1||te===V.length-1?pe=0:pe=te+1,F.preventDefault(),F.stopPropagation();const de=V[pe];de&&de instanceof HTMLElement&&de.focus()}else F.key==="Escape"?g(v)==="confirm-archive"?O():_():F.key==="Enter"&&!F.shiftKey&&g(v)==="edit"&&F.target===g(l)&&(F.preventDefault(),h())}function b(){N(v,"confirm-archive")}function x(){r.onArchive(r.listId),_()}function O(){N(v,"edit")}var L=Zn(),A=mt(L);{var S=F=>{var H=np();H.__click=w,H.__keydown=I;var V=ye(H);V.__click=de=>de.stopPropagation();var Q=ye(V);{var te=de=>{var le=ep(),ce=Ee(mt(le),2),ie=ye(ce);Ht(ie,Ue=>N(l,Ue),()=>g(l));var ge=Ee(ie,2);{var Fe=Ue=>{var Ge=$h();me(Ue,Ge)};$e(ge,Ue=>{g(s)&&Ue(Fe)})}var Me=Ee(ce,2),Ne=ye(Me);Ne.__click=b;var qe=Ee(Ne,2),Pe=ye(qe);Pe.__click=_;var Dt=Ee(Pe,2);Dt.__click=h,tt(()=>{st(ie,"aria-describedby",g(s)?"validation-message":void 0),Dt.disabled=g(s),st(Dt,"aria-label",g(s)?"Save disabled: list name cannot be empty":"Save list name changes")}),ks(ie,()=>g(i),Ue=>N(i,Ue)),me(de,le)},pe=de=>{var le=Zn(),ce=mt(le);{var ie=ge=>{var Fe=tp(),Me=Ee(mt(Fe),4),Ne=ye(Me);Ne.__click=O;var qe=Ee(Ne,2);qe.__click=x,me(ge,Fe)};$e(ce,ge=>{g(v)==="confirm-archive"&&ge(ie)},!0)}me(de,le)};$e(Q,de=>{g(v)==="edit"?de(te):de(pe,!1)})}Ht(V,de=>N(c,de),()=>g(c)),tt(de=>er(V,de),[()=>g(p)()]),me(F,H)};$e(A,F=>{r.isOpen&&F(S)})}me(e,L),rr()}Tr(["click","keydown"]);var ip=xe('<span class="drag-handle text-grey-60 select-none invisible" aria-hidden="true"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2 flex-1"><textarea class="flex-1 break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto text-body font-urbanist text-grey-100" rows="1"></textarea> <button aria-label="Save new task" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Save</button></div>',1),ap=xe('<span class="drag-handle text-grey-60 select-none invisible" aria-hidden="true"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-60" role="button" tabindex="0"> </span>',1),op=xe('<div class="flex items-center gap-2 py-1 border-b border-grey-50 hover:bg-grey-20 w-full print:hidden add-task-container add-task-button svelte-jtbpvm"><!></div>');function Uo(e,r){nr(r,!0);let i=Ot(r,"isInputActive",11,!1),s=Ot(r,"inputValue",3,""),l=Ot(r,"buttonText",3,"Add Task"),c=Ot(r,"placeholder",3,"Add new task..."),v=Ot(r,"marginLeft",3,!1),p=Ot(r,"containerElement",15,null),h=Ot(r,"textareaElement",15,null),_=he(null),w=he(null);We(()=>{p(g(w)),h(g(_))}),We(()=>{i()&&g(_)&&setTimeout(()=>{g(_)?.focus(),g(_)instanceof HTMLTextAreaElement&&(g(_).style.height="auto",g(_).style.height=`${Math.min(g(_).scrollHeight,La)}px`)},0)}),We(()=>{if(g(_)&&g(_)instanceof HTMLTextAreaElement){const S=()=>{g(_).style.height="auto",g(_).style.height=`${Math.min(g(_).scrollHeight,La)}px`};return g(_).addEventListener("input",S),()=>{g(_).removeEventListener("input",S)}}});function I(S){S.key==="Enter"&&!S.shiftKey?(S.preventDefault(),r.onSave?.()):S.key==="Escape"?r.onEscape?.(S):S.key==="Tab"&&r.onSave?.({closeAfterSave:!0})}function b(S){if(S.key==="Enter"||S.key===" ")S.preventDefault(),r.onActivate?.();else if(S.key==="Escape"){S.preventDefault(),S.stopPropagation(),S.stopImmediatePropagation();const F=S.currentTarget;F&&F instanceof HTMLElement&&F.blur()}}var x=op(),O=ye(x);{var L=S=>{var F=ip(),H=Ee(mt(F),4),V=ye(H);V.__input=te=>r.onInputChange?.(te.currentTarget.value),V.__keydown=I,Ht(V,te=>N(_,te),()=>g(_));var Q=Ee(V,2);Q.__click=function(...te){r.onSave?.apply(this,te)},tt(()=>{st(V,"placeholder",c()),nv(V,s())}),me(S,F)},A=S=>{var F=ap(),H=Ee(mt(F),4);H.__click=function(...Q){r.onActivate?.apply(this,Q)},H.__keydown=b;var V=ye(H);tt(()=>{st(H,"aria-label",r.ariaLabel||l()),Vn(V,l())}),me(S,F)};$e(O,S=>{i()?S(L):S(A,!1)})}Ht(x,S=>N(w,S),()=>g(w)),tt(()=>er(x,v()?"margin-left: 1.5rem;":"")),me(e,x),rr()}Tr(["input","keydown","click"]);function Gu(){let e=he(!1),r=he(null),i=he(null);function s(h){if(h&&h instanceof HTMLElement){const _=h.getBoundingClientRect();N(r,{top:_.top,left:_.left,width:_.width,height:_.height},!0),N(i,h,!0)}N(e,!0)}function l(){const h=g(i);N(e,!1),N(r,null),N(i,null),h&&h instanceof HTMLElement&&setTimeout(()=>{h.focus()},0)}function c(){N(e,!1),N(r,null),N(i,null)}function v(h){const _=h?.currentTarget||h?.target;s(_)}function p(h,_={}){const w=h.key;if(w==="Enter"||w===" "){h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation();const I=h.currentTarget;I&&s(I)}else if(w==="Escape")if(h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation(),_.onEscape)_.onEscape(h);else{const I=h.currentTarget;I&&I instanceof HTMLElement&&I.blur()}}return{get isOpen(){return g(e)},get position(){return g(r)},get element(){return g(i)},openModal:s,closeModal:l,closeModalWithoutFocus:c,handleClick:v,handleKeydown:p}}var sp=xe('<button class="px-2 py-1 text-sm bg-grey-30 hover:bg-grey-40 rounded print:hidden">Archive</button>'),up=xe('<li class="flex items-center gap-2 py-1 border-b border-grey-50 cursor-move hover:bg-grey-20 w-full m-0 list-none"><span class="text-grey-60 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),lp=xe('<div class="-mt-6"><!></div>'),cp=xe('<div class="task-list-wrapper m-0 p-0"><ul></ul> <!></div>'),fp=xe("<p>Loading tasks...</p> <!>",1),dp=xe('<div class="flex flex-col mb-6 w-full"><div class="flex items-center gap-2 rounded transition-colors hover:bg-grey-20"><span class="drag-handle text-grey-60 cursor-grab active:cursor-grabbing select-none print:hidden" title="Drag to reorder list" tabindex="-1" aria-hidden="true"></span> <h2 role="button" tabindex="0" class="list-title cursor-pointer m-0 px-2 py-2 leading-none text-grey-110 font-gilda text-[24px] rounded -my-1 transition-colors flex-1 min-w-0 focus:bg-grey-20 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"> </h2></div> <!></div> <!> <!>',1);function vp(e,r){nr(r,!0);const i=()=>wa(g(p),"$tasksQuery",s),[s,l]=Is();let c=Ot(r,"allLists",19,()=>[]),v=Ot(r,"stableLists",19,()=>[]),p=he(null),h=he(Ut([])),_=he(!1);const w=Gu(),I=Gu();let b=he(null),x=he(""),O=he(null),L=he(null),A=he(null),S=he(null),F=he(null),H=he(!1),V=he(!1),Q=he(null),te=he(null);function pe(Y){return Array.isArray(Y)?[...Y].sort((P,W)=>{const ne=P?.columnIndex??0,Te=W?.columnIndex??0;if(ne!==Te)return ne-Te;const ft=P?.order??0,Ce=W?.order??0;if(ft!==Ce)return ft-Ce;const ke=P?.id??0,dt=W?.id??0;return ke-dt}):[]}function de(Y,P,W){const ne=pe(P);if(!ne.length)return null;const Te=ne.findIndex(ft=>ft.id===Y);return Te===-1?null:W==="next"?Te>=ne.length-1?null:ne[Te+1].id:W==="prev"?Te<=0?null:ne[Te-1].id:null}We(()=>{v().some(P=>P.id===r.listId)&&r.listId?(!g(p)||g(te)!==r.listId)&&(Ea(N(p,Ta(()=>Bo(r.listId)),!0),"$tasksQuery",s),N(te,r.listId,!0)):(Ea(N(p,null),"$tasksQuery",s),N(te,null))}),We(()=>{i()&&Array.isArray(i())&&N(h,i().filter(Y=>Y.status==="unchecked"||Y.status==="checked"),!0)}),We(()=>{if(!g(L))return;function Y(P){const W=P.target;if((P.key==="Enter"||P.key===" ")&&W instanceof HTMLElement&&W.tagName==="H2"&&W.hasAttribute("role")&&W.getAttribute("role")==="button"){const ne=g(L)?.querySelector('h2[role="button"]');ne&&W===ne&&(P.preventDefault(),P.stopImmediatePropagation(),I.openModal(W))}}return g(L).addEventListener("keydown",Y,!0),()=>{g(L)&&g(L).removeEventListener("keydown",Y,!0)}}),We(()=>{if(!g(A))return;function Y(P){const W=P.target;if((P.key==="Enter"||P.key===" ")&&W instanceof HTMLElement&&W.hasAttribute("role")&&W.getAttribute("role")==="button"){const ne=g(A)?.querySelector('span[role="button"]');ne&&W===ne&&(P.preventDefault(),P.stopImmediatePropagation(),Ne())}}return g(A).addEventListener("keydown",Y,!0),()=>{g(A)&&g(A).removeEventListener("keydown",Y,!0)}}),We(()=>{if(!g(O))return;async function Y(P){const W=P.target;if((P.key==="Enter"||P.key===" ")&&W instanceof HTMLElement&&W.hasAttribute("data-no-drag")){P.preventDefault(),P.stopImmediatePropagation();const ne=W.closest("li[data-id]");if(ne){const Te=parseInt(ne.getAttribute("data-id")),ft=g(h).find(Ce=>Ce.id===Te);ft&&(N(b,Te,!0),N(x,ft.text,!0),w.openModal(W))}return}if(P.key==="ArrowDown"||P.key==="ArrowUp"){const ne=document.activeElement;if(!ne)return;const Te=ne.closest("li[data-id]");if(!Te||!g(O).contains(Te))return;const ft=Te.getAttribute("data-id");if(!ft)return;const Ce=parseInt(ft);if(!g(h).find(Le=>Le.id===Ce))return;const dt=g(h).findIndex(Le=>Le.id===Ce),rt=dt===0,Qe=dt===g(h).length-1;if(P.key==="ArrowDown"&&Qe){P.preventDefault(),P.stopImmediatePropagation();const Le=de(r.listId,c(),"next");Le!=null&&await le(Ce,Le)}else if(P.key==="ArrowUp"&&rt){P.preventDefault(),P.stopImmediatePropagation();const Le=de(r.listId,c(),"prev");Le!=null&&await ce(Ce,Le)}}}return g(O).addEventListener("keydown",Y,!0),()=>{g(O).removeEventListener("keydown",Y,!0)}});async function le(Y,P){try{const W=await Bo(P),ne=[{id:Y},...W];await jo(P,ne)}catch(W){console.error("Error moving task to next list:",W)}}async function ce(Y,P){try{const ne=[...await Bo(P),{id:Y}];await jo(P,ne)}catch(W){console.error("Error moving task to previous list:",W)}}function ie(Y){N(h,Y.detail.items.filter(P=>P&&typeof P.id=="number"),!0)}function ge(Y,P){const W=Y.key,ne=Y.currentTarget,Te=Y.target;!(ne instanceof HTMLElement)||ne!==Te||(W==="Enter"||W===" "?g(V)?(N(V,!1),N(Q,P,!0),N(F,ne,!0),N(H,!0)):(N(V,!0),N(Q,P,!0)):W==="Escape"&&(g(V)?(N(V,!1),N(Q,P,!0),N(F,ne,!0),N(H,!0)):(Y.preventDefault(),Y.stopPropagation(),Y.stopImmediatePropagation(),N(F,ne,!0),N(H,!0),ne instanceof HTMLElement&&ne.blur())))}function Fe(Y,P){const W=Y.currentTarget;g(V)&&g(Q)===P&&(N(V,!1),N(F,W,!0),N(H,!0))}We(()=>{if(!g(O))return;async function Y(P){const W=P.key;if(W==="Tab"&&g(H)&&g(F)){if(P.preventDefault(),P.stopImmediatePropagation(),P.stopPropagation(),N(H,!1),typeof document<"u"){let Le=g(F);if((!(Le instanceof HTMLElement)||!document.contains(Le))&&g(A)){const tn=g(A).querySelector('span[role="button"]');tn&&tn instanceof HTMLElement&&(Le=tn)}Le&&Le instanceof HTMLElement&&Le.focus()}return}if(W!=="ArrowDown"&&W!=="ArrowUp")return;const ne=document.activeElement;if(!ne)return;const Te=ne.closest("li[data-id]");if(!Te||!g(O).contains(Te))return;const ft=Te.getAttribute("data-id");if(!ft)return;const Ce=parseInt(ft);if(!g(h).find(Le=>Le.id===Ce))return;const dt=g(h).findIndex(Le=>Le.id===Ce),rt=dt===0,Qe=dt===g(h).length-1;if(W==="ArrowDown"&&Qe){P.preventDefault(),P.stopImmediatePropagation(),P.stopPropagation();const Le=de(r.listId,c(),"next");Le!=null&&await le(Ce,Le)}else if(W==="ArrowUp"&&rt){P.preventDefault(),P.stopImmediatePropagation(),P.stopPropagation();const Le=de(r.listId,c(),"prev");Le!=null&&await ce(Ce,Le)}}return document.addEventListener("keydown",Y,!0),()=>{document.removeEventListener("keydown",Y,!0)}});async function Me(Y){const P=Y.detail.items.filter(W=>W&&typeof W.id=="number");N(h,P,!0);try{await jo(r.listId,P)}catch(W){console.error("Error updating task order:",W)}}function Ne(){N(_,!0)}async function qe(Y){if(Y.key==="Escape"){if(N(H,!0),g(A)){const P=g(A).querySelector('span[role="button"]');P&&P instanceof HTMLElement?N(F,P,!0):N(F,null)}else N(F,null);N(_,!1),r.onInputChange(""),await kn(),await kn(),await new Promise(P=>requestAnimationFrame(P)),await new Promise(P=>setTimeout(P,Vu))}}We(()=>{if(g(_))return oc(()=>g(S),()=>{g(_)&&(N(_,!1),r.onInputChange(""))},{ignoreElements:[],checkIgnoreClick:Y=>{if(!g(A))return!1;const P=g(A).querySelector("button");return!!(P&&P.contains(Y.target))},shouldClose:()=>g(S)&&g(S).value.trim()!==""?!1:!r.newTaskInput||r.newTaskInput.trim()===""})});async function Pe(Y={}){const P=Y&&typeof Y=="object"&&Y.closeAfterSave===!0;let W=r.newTaskInput||"";if(g(S)&&(W=(g(S).value||"").toString()),W=(W||"").toString(),ic(W)){N(_,!1),r.onInputChange(""),await kn(),await kn(),await new Promise(Te=>requestAnimationFrame(Te)),await new Promise(Te=>setTimeout(Te,Vu));return}const{text:ne}=ac(W);try{await Ah(r.listId,ne),r.onInputChange(""),P&&N(_,!1)}catch(Te){console.error("Error creating task:",Te)}}async function Dt(Y,P){try{await Uu(Y,P==="unchecked"?"checked":"unchecked")}catch(W){console.error("Error updating task status:",W)}}async function Ue(Y){await Uu(Y,"archived")}function Ge(){return g(O)?Gh(g(O),"li[data-id]",'span[role="button"]'):null}async function At(Y=zo,P=ua){g(L)&&await Wh(()=>{if(g(A)){const W=g(A).querySelector('span[role="button"]');if(W&&W instanceof HTMLElement)return W}return null},{maxAttempts:Y,retryInterval:P,waitForTick:!1})}async function Lt(Y){try{await Ue(Y),g(b)===Y&&(N(b,null),N(x,""),w.closeModalWithoutFocus(),await kn(),await new Promise(P=>setTimeout(P,ls)),setTimeout(()=>{const P=(W=0)=>{const ne=Ge();ne?ne.focus():W<zo?setTimeout(()=>P(W+1),ua):At(Hh,ua)};P()},Vh))}catch(P){console.error("Error archiving task:",P)}}function $t(Y,P,W){const ne=W?.currentTarget||W?.target;N(b,Y,!0),N(x,P,!0),w.openModal(ne)}function gt(Y,P,W){if(W.key==="Enter"||W.key===" ")N(b,Y,!0),N(x,P,!0),w.handleKeydown(W);else if(W.key==="Escape"){W.preventDefault(),W.stopImmediatePropagation();const ne=W.currentTarget;ne&&ne instanceof HTMLElement&&(N(F,ne,!0),N(H,!0),ne.blur())}}async function J(Y,P){try{await Sh(Y,P),N(b,null),N(x,""),w.closeModal()}catch(W){console.error("Error updating task text:",W)}}function se(){N(b,null),N(x,""),w.closeModal()}async function Ie(Y){await Lt(Y),setTimeout(()=>{if(typeof document>"u")return;const P=document.activeElement;g(L)&&(!P||!g(L).contains(P))&&At(zo,ua)},ls)}function Be(Y){I.handleClick(Y)}function He(Y){I.handleKeydown(Y)}async function en(Y,P){try{await Ih(Y,P),I.closeModal()}catch(W){console.error("Error updating list name:",W)}}function Ve(){I.closeModal()}async function nt(Y){try{await Ph(Y),await Ch(Y)}catch(P){console.error("Error archiving list:",P)}}var Wt=dp(),lt=mt(Wt),ct=ye(lt),_t=Ee(ye(ct),2);_t.__click=Be,_t.__keydown=He;var Ze=ye(_t),ln=Ee(ct,2);{var Zr=Y=>{var P=cp(),W=ye(P);yr(W,21,()=>g(h),Ce=>Ce.id,(Ce,ke)=>{var dt=up(),rt=Ee(ye(dt),2);rt.__change=()=>Dt(g(ke).id,g(ke).status),rt.__keydown=Ke=>{if(Ke.key==="Enter"||Ke.key===" ")Ke.preventDefault(),Ke.stopPropagation(),Dt(g(ke).id,g(ke).status);else if(Ke.key==="Escape"){Ke.preventDefault(),Ke.stopPropagation(),Ke.stopImmediatePropagation();const nn=Ke.currentTarget;if(nn&&nn instanceof HTMLElement){const Ir=nn.closest("li[data-id]");Ir&&Ir instanceof HTMLElement&&(N(F,Ir,!0),N(H,!0)),nn.blur()}}};var Qe=Ee(rt,2);Qe.__click=Ke=>$t(g(ke).id,g(ke).text,Ke),Qe.__keydown=Ke=>gt(g(ke).id,g(ke).text,Ke);var Le=ye(Qe),tn=Ee(Qe,2);{var Ci=Ke=>{var nn=sp();nn.__click=()=>Lt(g(ke).id),tt(()=>st(nn,"aria-label",`Archive task: ${g(ke).text||"blank task"}`)),me(Ke,nn)};$e(tn,Ke=>{g(ke).status==="checked"&&Ke(Ci)})}tt(()=>{st(dt,"data-id",g(ke).id),Kl(rt,g(ke).status==="checked"),st(rt,"aria-label",`Mark task "${g(ke).text||"blank task"}" as ${g(ke).status==="checked"?"unchecked":"checked"}`),_i(Qe,1,Nl(g(ke).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100":"cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100")),st(Qe,"aria-label",`Edit task: ${g(ke).text||"blank task"}`),Vn(Le,g(ke).text||"")}),In("keydown",dt,Ke=>ge(Ke,g(ke).id),!0),In("blur",dt,Ke=>Fe(Ke,g(ke).id)),me(Ce,dt)}),Ht(W,Ce=>N(O,Ce),()=>g(O)),xs(W,(Ce,ke)=>Ps?.(Ce,ke),()=>({items:g(h),type:"task",zoneTabIndex:-1}));var ne=Ee(W,2);{var Te=Ce=>{var ke=lp(),dt=ye(ke);Uo(dt,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:Pe,onEscape:qe,onActivate:Ne,buttonText:"Add your first task",placeholder:"Add new task...",get ariaLabel(){return`Add your first task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return g(_)},set isInputActive(rt){N(_,rt,!0)},get containerElement(){return g(A)},set containerElement(rt){N(A,rt,!0)},get textareaElement(){return g(S)},set textareaElement(rt){N(S,rt,!0)}}),me(Ce,ke)},ft=Ce=>{Uo(Ce,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:Pe,onEscape:qe,onActivate:Ne,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return g(_)},set isInputActive(ke){N(_,ke,!0)},get containerElement(){return g(A)},set containerElement(ke){N(A,ke,!0)},get textareaElement(){return g(S)},set textareaElement(ke){N(S,ke,!0)}})};$e(ne,Ce=>{g(h).length===0?Ce(Te):Ce(ft,!1)})}tt(()=>_i(W,1,`space-y-0 m-0 p-0 list-none w-full ${g(h).length===0?"empty-drop-zone min-h-[24px]":""}`)),In("consider",W,ie),In("finalize",W,Me),me(Y,P)},ae=Y=>{var P=fp(),W=Ee(mt(P),2);Uo(W,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:Pe,onEscape:qe,onActivate:Ne,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return g(_)},set isInputActive(ne){N(_,ne,!0)},get containerElement(){return g(A)},set containerElement(ne){N(A,ne,!0)},get textareaElement(){return g(S)},set textareaElement(ne){N(S,ne,!0)}}),me(Y,P)};$e(ln,Y=>{g(p)&&i()!==void 0?Y(Zr):Y(ae,!1)})}Ht(lt,Y=>N(L,Y),()=>g(L));var wn=Ee(lt,2);Jh(wn,{get isOpen(){return w.isOpen},get taskId(){return g(b)},get taskText(){return g(x)},get taskPosition(){return w.position},onSave:J,onCancel:se,onArchive:Ie});var kr=Ee(wn,2);rp(kr,{get isOpen(){return I.isOpen},get listId(){return r.listId},get listName(){return r.listName},get listPosition(){return I.position},onSave:en,onCancel:Ve,onArchive:nt}),tt(()=>{st(lt,"data-list-id",r.listId),st(_t,"aria-label",`Rename list: ${r.listName}`),Vn(Ze,r.listName)}),me(e,Wt),rr(),l()}Tr(["click","keydown","change"]);var hp=xe('<div class="flex flex-col mb-6 svelte-785piu" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),pp=xe('<div class="flex flex-col mb-6 svelte-785piu"></div>'),mp=xe('<div class="empty-drop-zone min-h-[48px]" tabindex="-1"></div>'),yp=xe('<div class="flex items-center gap-2"><input type="text" class="create-list-input cursor-pointer hover:underline svelte-785piu" placeholder="List name..." aria-label="Enter list name"/> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" aria-label="Create list">Save</button></div>'),gp=xe('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),_p=xe('<div><div class="flex flex-col pt-0"><!> <!></div> <div><!></div></div>');function bp(e,r){nr(r,!0);let i=Ot(r,"createListInput",15,""),s=Ot(r,"createListInputElement",15,null),l=he(null),c=he(null),v=he(null);We(()=>{if(typeof document>"u"||r.columnLists.length!==0||!g(c))return;const A=setTimeout(()=>{g(c)&&g(c).getAttribute("tabindex")!=="-1"&&g(c).setAttribute("tabindex","-1")},ls);return()=>{clearTimeout(A)}});var p=_p(),h=ye(p),_=ye(h);yr(_,19,()=>r.columnLists,A=>A.id,(A,S)=>{const F=pt(()=>ss(g(S))),H=pt(()=>r.stableLists.find(ce=>ce.id===g(S).id)),V=pt(()=>!g(H)&&!g(F)?g(S):null),Q=pt(()=>g(H)||g(V));var te=Zn(),pe=mt(te);{var de=ce=>{var ie=hp(),ge=ye(ie);{let Fe=pt(()=>g(Q).name??"Unnamed list"),Me=pt(()=>r.newTaskInputs[g(Q).id]||"");vp(ge,{get listId(){return g(Q).id},get listName(){return g(Fe)},get newTaskInput(){return g(Me)},onInputChange:Ne=>r.onInputChange(g(Q).id,Ne),get allLists(){return r.allLists},get stableLists(){return r.stableLists}})}tt(()=>{st(ie,"data-id",g(S).id),st(ie,"aria-label",`List: ${g(Q).name??"Unnamed list"}`),st(ie,"aria-pressed",r.keyboardListDrag?.active&&r.keyboardListDrag?.listId===g(Q).id?"true":"false")}),In("keydown",ie,Fe=>r.onListKeyboardKeydown(Fe,g(Q).id),!0),me(ce,ie)},le=ce=>{var ie=pp();tt(()=>st(ie,"data-id",g(S).id)),me(ce,ie)};$e(pe,ce=>{g(Q)?ce(de):ce(le,!1)})}me(A,te)});var w=Ee(_,2);{var I=A=>{var S=mp();Ht(S,F=>N(c,F),()=>g(c)),me(A,S)};$e(w,A=>{r.columnLists.length===0&&A(I)})}Ht(h,A=>N(l,A),()=>g(l)),xs(h,(A,S)=>Ps?.(A,S),()=>({items:r.columnLists,type:"list",zoneTabIndex:-1}));var b=Ee(h,2),x=ye(b);{var O=A=>{var S=yp(),F=ye(S);F.__keydown=V=>{V.key==="Enter"&&!V.shiftKey?(V.preventDefault(),r.onCreateList(r.columnIndex)):V.key==="Escape"?r.onCreateListInputEscape(V):V.key==="Tab"&&r.onCreateListOnTab(r.columnIndex)},Ht(F,V=>s(V),()=>s());var H=Ee(F,2);H.__click=()=>r.onCreateList(r.columnIndex),ks(F,i),me(A,S)},L=A=>{var S=gp(),F=ye(S);F.__click=()=>r.onCreateListClick(r.columnIndex),F.__keydown=H=>r.onCreateListKeydown(H,r.columnIndex),Ht(F,H=>N(v,H),()=>g(v)),me(A,S)};$e(x,A=>{r.createListColumnIndex===r.columnIndex?A(O):A(L,!1)})}tt(()=>{_i(p,1,`flex flex-col pt-0 min-w-0 px-2 ${r.columnIndex<4?"border-r border-grey-50":""}`,"svelte-785piu"),st(p,"data-column-index",r.columnIndex),_i(b,1,`flex flex-col mb-6 w-full print:hidden ${r.columnLists.length===0?"create-list-empty-column":""}`,"svelte-785piu")}),In("consider",h,function(...A){r.onListConsider?.apply(this,A)}),In("finalize",h,function(...A){r.onListFinalize?.apply(this,A)}),me(e,p),rr()}Tr(["keydown","click"]);var wp=xe('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" disabled class="cursor-pointer opacity-50" aria-hidden="true" tabindex="-1"/> <span> </span></li>'),Ep=xe('<div class="relative print:hidden"><ul class="m-0 p-0 list-none min-h-0 pb-2"></ul></div>');function xp(e,r){let i=Ot(r,"createListDropZoneElement",12),s=Ot(r,"createListDropZoneItems",8),l=Ot(r,"onConsider",8),c=Ot(r,"onFinalize",8);var v=Ep(),p=ye(v);yr(p,5,s,h=>h.id,(h,_)=>{var w=wp(),I=Ee(ye(w),2),b=Ee(I,2),x=ye(b);tt(()=>{st(w,"data-id",(g(_),bn(()=>g(_).id))),Kl(I,(g(_),bn(()=>g(_).status==="checked"))),_i(b,1,Nl((g(_),bn(()=>g(_).status==="checked"?"line-through break-words":"break-words")))),er(b,`width: ${nc}px;`),Vn(x,(g(_),bn(()=>g(_).text||"")))}),me(h,w)}),Ht(p,h=>i(h),()=>i()),xs(p,(h,_)=>Ps?.(h,_),()=>({items:s(),type:"task"})),In("consider",p,function(...h){l()?.apply(this,h)}),In("finalize",p,function(...h){c()?.apply(this,h)}),me(e,v)}var Tp=xe("<p>Loading...</p>"),kp=xe('<div class="grid grid-cols-5 w-full py-4 px-1"></div> <!>',1),Ip=xe('<div class="w-full h-full overflow-auto"><!></div>');function Dp(e,r){nr(r,!0);const i=()=>wa(c,"$lists",s),[s,l]=Is();let c=Ta(()=>xh()),v=pt(()=>i()||[]),p=he(Ut([])),h=he(Ut({})),_=he(null),w=he(""),I=he(null),b=he(Ut([])),x=he(null),O=he(Ut({active:!1,listId:null,lastDraggedId:null,shouldRefocusOnNextTab:!1}));We(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(g(h)).length===0){const J={};for(const se of i())J[se.id]="";N(h,J,!0)}}),We(()=>{if(i()&&Array.isArray(i())&&i().length>0){const J={...g(h)};let se=!1;for(const Ie of i())Ie.id in J||(J[Ie.id]="",se=!0);se&&N(h,J,!0)}});let L=he(0);We(()=>{if(i()&&Array.isArray(i())){const J=i().map(se=>({id:se.id,name:se.name,order:se.order,columnIndex:se.columnIndex}));J.length!==g(L)&&N(L,J.length,!0),N(p,J,!0)}else g(L)>0&&N(L,0),N(p,[],!0)});const A=5;let S=pt(()=>Rh(g(p),A));async function F(J,se){const Ie=g(S);if(!Ie||Ie.length===0)return;const Be=Kh(Ie,J,se,A);if(!Be)return;const{updatedDraggableLists:He,targetColumnIndex:en,targetColumnItems:Ve}=Be;N(p,He,!0);try{await Hu(en,Ve)}catch(nt){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",nt)}g(O).active&&g(O).listId===J&&await rc(J)}function H(J){return g(O).active===!0&&g(O).listId===J}function V(J){N(O,{...g(O),active:!0,listId:J,shouldRefocusOnNextTab:!1},!0)}function Q(){g(O).listId!=null?N(O,{...g(O),active:!1,listId:null,lastDraggedId:g(O).listId,shouldRefocusOnNextTab:!0},!0):N(O,{...g(O),active:!1,listId:null},!0)}function te(){if(typeof document>"u")return;const J=document.activeElement;J&&J instanceof HTMLElement&&J.blur()}function pe(J,se){const Ie=J.currentTarget,Be=J.target,He=J.key;if(!H(se)){He==="Enter"||He===" "?Ie instanceof HTMLElement&&Ie===Be&&(J.preventDefault(),J.stopPropagation(),J.stopImmediatePropagation(),se!=null&&V(se)):He==="Escape"&&Ie instanceof HTMLElement&&Ie===Be&&(J.preventDefault(),J.stopPropagation(),J.stopImmediatePropagation(),se!=null&&N(O,{...g(O),lastDraggedId:se,shouldRefocusOnNextTab:!0},!0),Ie.blur());return}}We(()=>typeof document>"u"?void 0:Yh({getKeyboardListDrag:()=>({active:g(O).active,listId:g(O).listId}),getLastKeyboardDraggedListId:()=>g(O).lastDraggedId,getShouldRefocusListOnNextTab:()=>g(O).shouldRefocusOnNextTab,setShouldRefocusListOnNextTab:se=>{N(O,{...g(O),shouldRefocusOnNextTab:se},!0)}},(se,Ie)=>F(se,Ie),()=>Q(),()=>te()));function de(J,se){g(h)[J]=se}const le=Zh({getColumnIndex:()=>g(_),setColumnIndex:J=>{N(_,J,!0)},getInput:()=>g(w),setInput:J=>{N(w,J,!0)},getInputElement:()=>g(I)}),{handleCreateListClick:ce,handleCreateListKeydown:ie,handleCreateListInputEscape:ge,handleCreateList:Fe,handleCreateListOnTab:Me,setupClickOutsideEffect:Ne,setupFocusEffect:qe}=le;We(()=>Ne()),We(()=>qe());function Pe(J){N(b,J.detail.items,!0)}async function Dt(J){N(b,J.detail.items,!0),N(b,[],!0)}function Ue(J,se){const Ie=J.detail.items||[];N(p,Fh(Ie,se,g(p)),!0)}async function Ge(J,se){const Ie=(J.detail.items||[]).filter(He=>!ss(He)),Be=(J.detail.items||[]).filter(He=>ss(He));if(Be.length>0&&console.warn("[DRAG] finalize - WARNING: Placeholders still present in finalize!",Be.length),!Bh(Ie,se,i(),g(p)))try{await Hu(se,Ie)}catch(He){console.error("[DRAG] finalize - ERROR updating list order:",He)}}var At=Ip(),Lt=ye(At);{var $t=J=>{var se=Tp();me(J,se)},gt=J=>{var se=Zn(),Ie=mt(se);{var Be=He=>{var en=kp(),Ve=mt(en);yr(Ve,21,()=>g(S),ca,(Wt,lt,ct)=>{{let _t=pt(()=>({active:g(O).active,listId:g(O).listId}));bp(Wt,{columnIndex:ct,get columnLists(){return g(lt)},get stableLists(){return g(v)},get newTaskInputs(){return g(h)},get createListColumnIndex(){return g(_)},get keyboardListDrag(){return g(_t)},onInputChange:de,onListKeyboardKeydown:pe,onListConsider:Ze=>Ue(Ze,ct),onListFinalize:Ze=>Ge(Ze,ct),get onCreateListClick(){return ce},get onCreateListKeydown(){return ie},get onCreateListInputEscape(){return ge},get onCreateList(){return Fe},get onCreateListOnTab(){return Me},get allLists(){return i()},get createListInput(){return g(w)},set createListInput(Ze){N(w,Ze,!0)},get createListInputElement(){return g(I)},set createListInputElement(Ze){N(I,Ze,!0)}})}});var nt=Ee(Ve,2);xp(nt,{get createListDropZoneItems(){return g(b)},onConsider:Pe,onFinalize:Dt,get createListDropZoneElement(){return g(x)},set createListDropZoneElement(Wt){N(x,Wt,!0)}}),me(He,en)};$e(Ie,He=>{Array.isArray(i())&&He(Be)},!0)}me(J,se)};$e(Lt,J=>{i()===void 0||i()===null?J($t):J(gt,!1)})}me(e,At),rr(),l()}var Ap=xe("<p>Loading...</p>"),Sp=xe("<p>Loading data...</p>"),Op=xe('<p class="text-grey-60">No archived lists or tasks</p>'),Cp=xe('<span class="text-sm text-grey-60"> </span>'),Lp=xe('<span class="text-xs bg-grey-30 px-2 py-1 rounded">[List Archived]</span> <!>',1),Pp=xe('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),Rp=xe('<p class="text-sm text-grey-60 italic">No archived tasks</p>'),Mp=xe('<li class="flex items-center gap-3 flex-wrap"><span class="line-through text-grey-100"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button></li>'),Np=xe('<div class="mb-4"><h4 class="text-sm font-medium text-grey-60 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),Kp=xe('<div class="border-b border-grey-50 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold text-grey-110"> </h3> <!></div></div> <div class="border-b border-grey-50 pb-4"><!></div>',1),Fp=xe('<div class="grid grid-cols-2 gap-4"></div>'),Bp=xe('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function jp(e,r){nr(r,!0);const i=()=>wa(g(p),"$listsQuery",l),s=()=>wa(g(v),"$archivedTasksQuery",l),[l,c]=Is();let v=he(null),p=he(null);We(()=>{Ea(N(v,Ta(()=>Dh()),!0),"$archivedTasksQuery",l),Ea(N(p,Ta(()=>Th()),!0),"$listsQuery",l)});function h(S){return S?new Date(S).toDateString():null}function _(S){return S?new Date(S).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let w=pt(()=>{const S=g(v)?s():null,F=g(p)?i():null;if(!F||!Array.isArray(F))return[];const H={};if(S&&Array.isArray(S))for(const Q of S)H[Q.listId]||(H[Q.listId]=[]),H[Q.listId].push(Q);const V=[];for(const Q of F){const te=Q.archivedAt!=null,pe=H[Q.id]&&H[Q.id].length>0;if(te||pe){const de=H[Q.id]||[],le={};for(const ce of de){const ie=h(ce.archivedAt)||"Unknown";le[ie]||(le[ie]=[]),le[ie].push(ce)}V.push({list:Q,listArchiveDate:Q.archivedAt?h(Q.archivedAt):null,tasksByDate:le,hasTasks:de.length>0})}}return V.sort((Q,te)=>{if(Q.list.order!==te.list.order)return Q.list.order-te.list.order;const pe=Q.list.name??"Unnamed list",de=te.list.name??"Unnamed list";return pe.localeCompare(de)}),V});function I(S){return S.sort((F,H)=>{if(F==="Unknown")return 1;if(H==="Unknown")return-1;const V=new Date(F).getTime();return new Date(H).getTime()-V})}async function b(S){try{(await Oh(S)).listRestored&&console.log("Task and its list have been restored")}catch(F){console.error("Error restoring task:",F)}}var x=Bp(),O=Ee(ye(x),2);{var L=S=>{var F=Ap();me(S,F)},A=S=>{var F=Zn(),H=mt(F);{var V=te=>{var pe=Sp();me(te,pe)},Q=te=>{var pe=Zn(),de=mt(pe);{var le=ie=>{var ge=Op();me(ie,ge)},ce=ie=>{var ge=Fp();yr(ge,21,()=>g(w),ca,(Fe,Me)=>{const Ne=pt(()=>g(Me).list),qe=pt(()=>g(Ne).name??"Unnamed list"),Pe=pt(()=>g(Ne).archivedAt!=null),Dt=pt(()=>g(Me).listArchiveDate);var Ue=Kp(),Ge=mt(Ue),At=ye(Ge),Lt=ye(At),$t=ye(Lt),gt=Ee(Lt,2);{var J=Ve=>{var nt=Lp(),Wt=Ee(mt(nt),2);{var lt=ct=>{var _t=Cp(),Ze=ye(_t);tt(ln=>Vn(Ze,`- ${ln??""}`),[()=>_(g(Dt))]),me(ct,_t)};$e(Wt,ct=>{g(Dt)&&ct(lt)})}me(Ve,nt)},se=Ve=>{var nt=Pp();me(Ve,nt)};$e(gt,Ve=>{g(Pe)?Ve(J):Ve(se,!1)})}var Ie=Ee(Ge,2),Be=ye(Ie);{var He=Ve=>{var nt=Rp();me(Ve,nt)},en=Ve=>{var nt=Zn(),Wt=mt(nt);yr(Wt,17,()=>I(Object.keys(g(Me).tasksByDate)),ca,(lt,ct)=>{const _t=pt(()=>g(Me).tasksByDate[g(ct)]);var Ze=Np(),ln=ye(Ze),Zr=ye(ln),ae=Ee(ln,2);yr(ae,21,()=>g(_t),ca,(wn,kr)=>{var Y=Mp(),P=ye(Y),W=ye(P),ne=Ee(P,2);ne.__click=()=>b(g(kr).id),tt(()=>Vn(W,g(kr).text)),me(wn,Y)}),tt(wn=>Vn(Zr,wn),[()=>g(ct)==="Unknown"?"Unknown Date":_(g(ct))]),me(lt,Ze)}),me(Ve,nt)};$e(Be,Ve=>{g(Me).hasTasks?Ve(en,!1):Ve(He)})}tt(()=>Vn($t,g(qe))),me(Fe,Ue)}),me(ie,ge)};$e(de,ie=>{g(w).length===0?ie(le):ie(ce,!1)},!0)}me(te,pe)};$e(H,te=>{!s()||!i()?te(V):te(Q,!1)},!0)}me(S,F)};$e(O,S=>{!g(v)||!g(p)?S(L):S(A,!1)})}tt(()=>er(x,`width: ${us}px;`)),me(e,x),rr(),c()}Tr(["click"]);var zp=xe('<main class="min-h-screen flex flex-col items-center justify-center bg-grey-10 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="bg-grey-10 print:bg-grey-10 border-2 border-grey-50 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-grey-80 pointer-events-none z-0"></div> <div class="absolute inset-[16px] z-10"><!></div></div> <!></main>');function Up(e){function r(){window.print()}var i=zp(),s=ye(i),l=ye(s);l.__click=r;var c=Ee(s,2),v=Ee(ye(c),2),p=ye(v);Dp(p,{});var h=Ee(c,2);jp(h,{}),tt(()=>{er(s,`width: ${us}px;`),er(c,`width: ${us}px; height: ${jh}px;`)}),me(e,i)}Tr(["click"]);const Hp=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],Vp=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function Wp(){try{if(await be.lists.count()>0)return;await be.lists.bulkAdd(Hp),await be.tasks.bulkAdd(Vp),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await Wp().catch(console.error),Yd(Up,{target:document.getElementById("app")})))();
