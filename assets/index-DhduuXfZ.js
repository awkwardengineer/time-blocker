(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function a(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(c){if(c.ep)return;c.ep=!0;const f=a(c);fetch(c.href,f)}})();const Gc="production",Y=!Gc.toLowerCase().startsWith("prod");var du=Array.isArray,Yc=Array.prototype.indexOf,Oo=Array.from,Dn=Object.defineProperty,ir=Object.getOwnPropertyDescriptor,hu=Object.getOwnPropertyDescriptors,$c=Object.prototype,qc=Array.prototype,Io=Object.getPrototypeOf,Ks=Object.isExtensible;const Bi=()=>{};function Zc(e){for(var r=0;r<e.length;r++)e[r]()}function vu(){var e,r,a=new Promise((u,c)=>{e=u,r=c});return{promise:a,resolve:e,reject:r}}const qe=2,Co=4,Ro=8,Qc=1<<24,Xt=16,Jt=32,$n=64,na=128,Ct=512,tt=1024,vt=2048,en=4096,gt=8192,gn=16384,Po=32768,ur=65536,ji=1<<17,pu=1<<18,yr=1<<19,Xc=1<<20,kn=32768,uo=1<<21,ra=1<<22,_n=1<<23,bn=Symbol("$state"),Jc=Symbol(""),yu=Symbol("proxy path"),nr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ef(){if(Y){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ls(){if(Y){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function tf(){if(Y){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function nf(e){if(Y){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function rf(){if(Y){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function af(e){if(Y){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function of(){if(Y){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function sf(e){if(Y){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function uf(){if(Y){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function lf(){if(Y){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function cf(){if(Y){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ff(){if(Y){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const mu=1,gu=2,_u=4,df=8,hf=16,vf=1,pf=2,Xe=Symbol(),yf=Symbol("filename"),mf="http://www.w3.org/1999/xhtml";var bu="font-weight: bold",wu="font-weight: normal";function to(e){Y?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,bu,wu):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function gf(){Y?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",bu,wu):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Eu(e){return e===this.v}function xu(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Tu(e){return!xu(e,this.v)}let _f=!1;function Lt(e,r){return e.label=r,Du(e.v,r),e}function Du(e,r){return e?.[yu]?.(r),e}function bf(e){const r=new Error,a=wf();return a.length===0?null:(a.unshift(`
`),Dn(r,"stack",{value:a.join(`
`)}),Dn(r,"name",{value:e}),r)}function wf(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const a=r.split(`
`),u=[];for(let c=0;c<a.length;c++){const f=a[c],v=f.replaceAll("\\","/");if(f.trim()!=="Error"){if(f.includes("validate_each_keys"))return[];v.includes("svelte/src/internal")||v.includes("node_modules/.vite")||u.push(f)}}return u}let ft=null;function lr(e){ft=e}let Vr=null;function zi(e){Vr=e}let Zr=null;function Bs(e){Zr=e}function mr(e,r=!1,a){ft={p:ft,i:!1,c:null,e:null,s:e,x:null,l:null},Y&&(ft.function=a,Zr=a)}function gr(e){var r=ft,a=r.e;if(a!==null){r.e=null;for(var u of a)zu(u)}return r.i=!0,ft=r.p,Y&&(Zr=ft?.function??null),{}}function ku(){return!0}let Un=[];function Au(){var e=Un;Un=[],Zc(e)}function _r(e){if(Un.length===0&&!jr){var r=Un;queueMicrotask(()=>{r===Un&&Au()})}Un.push(e)}function Ef(){for(;Un.length>0;)Au()}const lo=new WeakMap;function Su(e){var r=be;if(r===null)return ye.f|=_n,e;if(Y&&e instanceof Error&&!lo.has(e)&&lo.set(e,xf(e,r)),(r.f&Po)===0){if((r.f&na)===0)throw Y&&!r.parent&&e instanceof Error&&Ou(e),e;r.b.error(e)}else cr(e,r)}function cr(e,r){for(;r!==null;){if((r.f&na)!==0)try{r.b.error(e);return}catch(a){e=a}r=r.parent}throw Y&&e instanceof Error&&Ou(e),e}function xf(e,r){const a=ir(e,"message");if(!(a&&!a.configurable)){for(var u=Bo?"  ":"	",c=`
${u}in ${r.fn?.name||"<unknown>"}`,f=r.ctx;f!==null;)c+=`
${u}in ${f.function?.[yf].split("/").pop()}`,f=f.p;return{message:e.message+`
${c}
`,stack:e.stack?.split(`
`).filter(v=>!v.includes("svelte/src/internal")).join(`
`)}}}function Ou(e){const r=lo.get(e);r&&(Dn(e,"message",{value:r.message}),Dn(e,"stack",{value:r.stack}))}const Ri=new Set;let we=null,Ni=null,Tt=null,Et=[],ia=null,co=!1,jr=!1;class Vt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){Et=[],Ni=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const u of r)this.#o(u,a);this.is_fork||this.#c(),this.is_deferred()?(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects)):(Ni=this,we=null,js(a.render_effects),js(a.effects),Ni=null,this.#u?.resolve()),Tt=null}#o(r,a){r.f^=tt;for(var u=r.first;u!==null;){var c=u.f,f=(c&(Jt|$n))!==0,v=f&&(c&tt)!==0,g=v||(c&gt)!==0||this.skipped_effects.has(u);if((u.f&na)!==0&&u.b?.is_pending()&&(a={parent:a,effect:u,effects:[],render_effects:[],block_effects:[]}),!g&&u.fn!==null){f?u.f^=tt:(c&Co)!==0?a.effects.push(u):Xr(u)&&((u.f&Xt)!==0&&a.block_effects.push(u),Gr(u));var m=u.first;if(m!==null){u=m;continue}}var k=u.parent;for(u=u.next;u===null&&k!==null;)k===a.effect&&(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects),a=a.parent),u=k.next,k=k.parent}}#s(r){for(const a of r)((a.f&vt)!==0?this.#a:this.#i).push(a),this.#l(a.deps),nt(a,tt)}#l(r){if(r!==null)for(const a of r)(a.f&qe)===0||(a.f&kn)===0||(a.f^=kn,this.#l(a.deps))}capture(r,a){this.previous.has(r)||this.previous.set(r,a),(r.f&_n)===0&&(this.current.set(r,r.v),Tt?.set(r,r.v))}activate(){we=this,this.apply()}deactivate(){we===this&&(we=null,Tt=null)}flush(){if(this.activate(),Et.length>0){if(Iu(),we!==null&&we!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Ri.size>1){this.previous.clear();var r=Tt,a=!0,u={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const f of Ri){if(f===this){a=!1;continue}const v=[];for(const[m,k]of this.current){if(f.current.has(m))if(a&&k!==f.current.get(m))f.current.set(m,k);else continue;v.push(m)}if(v.length===0)continue;const g=[...f.current.keys()].filter(m=>!this.current.has(m));if(g.length>0){var c=Et;Et=[];const m=new Set,k=new Map;for(const x of v)Cu(x,g,m,k);if(Et.length>0){we=f,f.apply();for(const x of Et)f.#o(x,u);f.deactivate()}Et=c}}we=null,Tt=r}this.committed=!0,Ri.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)nt(r,vt),Gn(r);for(const r of this.#i)nt(r,en),Gn(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=vu()).promise}static ensure(){if(we===null){const r=we=new Vt;Ri.add(we),jr||Vt.enqueue(()=>{we===r&&r.flush()})}return we}static enqueue(r){_r(r)}apply(){}}function Tf(e){var r=jr;jr=!0;try{for(var a;;){if(Ef(),Et.length===0&&(we?.flush(),Et.length===0))return ia=null,a;Iu()}}finally{jr=r}}function Iu(){var e=En;co=!0;var r=Y?new Set:null;try{var a=0;for(Wi(!0);Et.length>0;){var u=Vt.ensure();if(a++>1e3){if(Y){var c=new Map;for(const v of u.current.keys())for(const[g,m]of v.updated??[]){var f=c.get(g);f||(f={error:m.error,count:0},c.set(g,f)),f.count+=m.count}for(const v of c.values())v.error&&console.error(v.error)}Df()}if(u.process(Et),wn.clear(),Y)for(const v of u.current.keys())r.add(v)}}finally{if(co=!1,Wi(e),ia=null,Y)for(const v of r)v.updated=null}}function Df(){try{of()}catch(e){Y&&Dn(e,"stack",{value:""}),cr(e,ia)}}let $t=null;function js(e){var r=e.length;if(r!==0){for(var a=0;a<r;){var u=e[a++];if((u.f&(gn|gt))===0&&Xr(u)&&($t=new Set,Gr(u),u.deps===null&&u.first===null&&u.nodes_start===null&&(u.teardown===null&&u.ac===null?Hu(u):u.fn=null),$t?.size>0)){wn.clear();for(const c of $t){if((c.f&(gn|gt))!==0)continue;const f=[c];let v=c.parent;for(;v!==null;)$t.has(v)&&($t.delete(v),f.push(v)),v=v.parent;for(let g=f.length-1;g>=0;g--){const m=f[g];(m.f&(gn|gt))===0&&Gr(m)}}$t.clear()}}$t=null}}function Cu(e,r,a,u){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const c of e.reactions){const f=c.f;(f&qe)!==0?Cu(c,r,a,u):(f&(ra|Xt))!==0&&(f&vt)===0&&Ru(c,r,u)&&(nt(c,vt),Gn(c))}}function Ru(e,r,a){const u=a.get(e);if(u!==void 0)return u;if(e.deps!==null)for(const c of e.deps){if(r.includes(c))return!0;if((c.f&qe)!==0&&Ru(c,r,a))return a.set(c,!0),!0}return a.set(e,!1),!1}function Gn(e){for(var r=ia=e;r.parent!==null;){r=r.parent;var a=r.f;if(co&&r===be&&(a&Xt)!==0&&(a&pu)===0)return;if((a&($n|Jt))!==0){if((a&tt)===0)return;r.f^=tt}}Et.push(r)}function kf(e){let r=0,a=Yn(0),u;return Y&&Lt(a,"createSubscriber version"),()=>{Wr()&&(B(a),oa(()=>(r===0&&(u=Jr(()=>e(()=>zr(a)))),r+=1,()=>{_r(()=>{r-=1,r===0&&(u?.(),u=void 0,zr(a))})})))}}var Af=ur|yr|na;function Sf(e,r,a){new Of(e,r,a)}class Of{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#_=kf(()=>(this.#d=Yn(this.#f),Y&&Lt(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,a,u){this.#t=r,this.#n=a,this.#u=u,this.parent=be.b,this.#e=!!this.#n.pending,this.#a=zo(()=>{be.b=this;{var c=this.#m();try{this.#i=xt(()=>u(c))}catch(f){this.error(f)}this.#h>0?this.#y():this.#e=!1}return()=>{this.#c?.remove()}},Af)}#b(){try{this.#i=xt(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=xt(()=>r(this.#t)),Vt.enqueue(()=>{var a=this.#m();this.#i=this.#p(()=>(Vt.ensure(),xt(()=>this.#u(a)))),this.#h>0?this.#y():(ar(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#m(){var r=this.#t;return this.#e&&(this.#c=An(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var a=be,u=ye,c=ft;It(this.#a),ct(this.#a),lr(this.#a.ctx);try{return r()}catch(f){return Su(f),null}finally{It(a),ct(u),lr(c)}}#y(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),$u(this.#i,this.#l)),this.#o===null&&(this.#o=xt(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#e=!1,this.#o&&ar(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&dr(this.#d,this.#f)}get_effect_pending(){return this.#_(),B(this.#d)}error(r){var a=this.#n.onerror;let u=this.#n.failed;if(this.#v||!a&&!u)throw r;this.#i&&(dt(this.#i),this.#i=null),this.#o&&(dt(this.#o),this.#o=null),this.#s&&(dt(this.#s),this.#s=null);var c=!1,f=!1;const v=()=>{if(c){gf();return}c=!0,f&&ff(),Vt.ensure(),this.#f=0,this.#s!==null&&ar(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,xt(()=>this.#u(this.#t)))),this.#h>0?this.#y():this.#e=!1};var g=ye;try{ct(null),f=!0,a?.(r,v),f=!1}catch(m){cr(m,this.#a&&this.#a.parent)}finally{ct(g)}u&&_r(()=>{this.#s=this.#p(()=>{Vt.ensure(),this.#v=!0;try{return xt(()=>{u(this.#t,()=>r,()=>v)})}catch(m){return cr(m,this.#a.parent),null}finally{this.#v=!1}})})}}function Pu(e,r){return r}function If(e,r,a){for(var u=[],c=r.length,f=0;f<c;f++)Uo(r[f].e,u,!0);Gu(u,()=>{var v=u.length===0&&a!==null;if(v){var g=a,m=g.parentNode;Hf(m),m.append(g),e.items.clear(),Bt(e,r[0].prev,r[c-1].next)}for(var k=0;k<c;k++){var x=r[k];v||(e.items.delete(x.k),Bt(e,x.prev,x.next)),dt(x.e,!v)}e.first===r[0]&&(e.first=r[0].prev)})}function Mo(e,r,a,u,c,f=null){var v=e,g=new Map,m=null,k=(r&_u)!==0,x=(r&mu)!==0,S=(r&gu)!==0;if(k){var b=e;v=b.appendChild(An())}var T=null,F=Kf(()=>{var Q=a();return du(Q)?Q:Q==null?[]:Oo(Q)}),K,N=!0;function V(){Cf(te,K,v,r,u),T!==null&&(K.length===0?(T.fragment?(v.before(T.fragment),T.fragment=null):Vo(T.effect),ne.first=T.effect):ar(T.effect,()=>{T=null}))}var ne=zo(()=>{K=B(F);for(var Q=K.length,re=new Set,ue=we,_e=null,xe=ju(),le=0;le<Q;le+=1){var ie=K[le],fe=u(ie,le),pe=N?null:g.get(fe);pe?(x&&dr(pe.v,ie),S?dr(pe.i,le):pe.i=le,xe&&ue.skipped_effects.delete(pe.e)):(pe=Rf(N?v:null,_e,ie,fe,le,c,r,a),N&&(pe.o=!0,_e===null?m=pe:_e.next=pe,_e=pe),g.set(fe,pe)),re.add(fe)}if(Q===0&&f&&!T)if(N)T={fragment:null,effect:xt(()=>f(v))};else{var Re=document.createDocumentFragment(),je=An();Re.append(je),T={fragment:Re,effect:xt(()=>f(je))}}if(!N)if(xe){for(const[ot,ze]of g)re.has(ot)||ue.skipped_effects.add(ze.e);ue.oncommit(V),ue.ondiscard(()=>{})}else V();B(F)}),te={effect:ne,items:g,first:m};N=!1}function Cf(e,r,a,u,c){var f=(u&df)!==0,v=r.length,g=e.items,m=e.first,k,x=null,S,b=[],T=[],F,K,N,V;if(f)for(V=0;V<v;V+=1)F=r[V],K=c(F,V),N=g.get(K),N.o&&(N.a?.measure(),(S??=new Set).add(N));for(V=0;V<v;V+=1){if(F=r[V],K=c(F,V),N=g.get(K),e.first??=N,!N.o){N.o=!0;var ne=x?x.next:m;Bt(e,x,N),Bt(e,N,ne),no(N,ne,a),x=N,b=[],T=[],m=x.next;continue}if((N.e.f&gt)!==0&&(Vo(N.e),f&&(N.a?.unfix(),(S??=new Set).delete(N))),N!==m){if(k!==void 0&&k.has(N)){if(b.length<T.length){var te=T[0],Q;x=te.prev;var re=b[0],ue=b[b.length-1];for(Q=0;Q<b.length;Q+=1)no(b[Q],te,a);for(Q=0;Q<T.length;Q+=1)k.delete(T[Q]);Bt(e,re.prev,ue.next),Bt(e,x,re),Bt(e,ue,te),m=te,x=ue,V-=1,b=[],T=[]}else k.delete(N),no(N,m,a),Bt(e,N.prev,N.next),Bt(e,N,x===null?e.first:x.next),Bt(e,x,N),x=N;continue}for(b=[],T=[];m!==null&&m.k!==K;)(m.e.f&gt)===0&&(k??=new Set).add(m),T.push(m),m=m.next;if(m===null)continue;N=m}b.push(N),x=N,m=N.next}if(m!==null||k!==void 0){for(var _e=k===void 0?[]:Oo(k);m!==null;)(m.e.f&gt)===0&&_e.push(m),m=m.next;var xe=_e.length;if(xe>0){var le=(u&_u)!==0&&v===0?a:null;if(f){for(V=0;V<xe;V+=1)_e[V].a?.measure();for(V=0;V<xe;V+=1)_e[V].a?.fix()}If(e,_e,le)}}f&&_r(()=>{if(S!==void 0)for(N of S)N.a?.apply()})}function Rf(e,r,a,u,c,f,v,g){var m=(v&mu)!==0,k=(v&hf)===0,x=m?k?Nu(a,!1,!1):Yn(a):a,S=(v&gu)===0?c:Yn(c);Y&&m&&(x.trace=()=>{var F=typeof S=="number"?c:S.v;g()[F]});var b={i:S,v:x,k:u,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var T=document.createDocumentFragment();T.append(e=An())}return b.e=xt(()=>f(e,x,S,g)),r!==null&&(r.next=b),b}finally{}}function no(e,r,a){for(var u=e.next?e.next.e.nodes_start:a,c=r?r.e.nodes_start:a,f=e.e.nodes_start;f!==null&&f!==u;){var v=Qr(f);c.before(f),f=v}}function Bt(e,r,a){r===null?(e.first=a,e.effect.first=a&&a.e):(r.e===e.effect.last&&a!==null&&(e.effect.last=a.e),r.e.next&&(r.e.next.prev=null),r.next=a,r.e.next=a&&a.e),a===null?e.effect.last=r&&r.e:(a.e===e.effect.last&&r===null&&(e.effect.last=a.e.prev),a.e.prev&&(a.e.prev.next=null),a.prev=r,a.e.prev=r&&r.e)}function Pf(e,r,a,u){const c=No;if(a.length===0&&e.length===0){u(r.map(c));return}var f=we,v=be,g=Mf();function m(){Promise.all(a.map(k=>Ff(k))).then(k=>{g();try{u([...r.map(c),...k])}catch(x){(v.f&gn)===0&&cr(x,v)}f?.deactivate(),Ui()}).catch(k=>{cr(k,v)})}e.length>0?Promise.all(e).then(()=>{g();try{return m()}finally{f?.deactivate(),Ui()}}):m()}function Mf(){var e=be,r=ye,a=ft,u=we;if(Y)var c=Vr;return function(v=!0){It(e),ct(r),lr(a),v&&u?.activate(),Y&&zi(c)}}function Ui(){It(null),ct(null),lr(null),Y&&zi(null)}const Nf=new Set;function No(e){var r=qe|vt,a=ye!==null&&(ye.f&qe)!==0?ye:null;return be!==null&&(be.f|=yr),{ctx:ft,deps:null,effects:null,equals:Eu,f:r,fn:e,reactions:null,rv:0,v:Xe,wv:0,parent:a??be,ac:null}}function Ff(e,r){let a=be;a===null&&ef();var u=a.b,c=void 0,f=Yn(Xe),v=!ye,g=new Map;return Qf(()=>{var m=vu();c=m.promise;try{Promise.resolve(e()).then(m.resolve,m.reject).then(()=>{k===we&&k.committed&&k.deactivate(),Ui()})}catch(b){m.reject(b),Ui()}var k=we;if(v){var x=!u.is_pending();u.update_pending_count(1),k.increment(x),g.get(k)?.reject(nr),g.delete(k),g.set(k,m)}const S=(b,T=void 0)=>{if(k.activate(),T)T!==nr&&(f.f|=_n,dr(f,T));else{(f.f&_n)!==0&&(f.f^=_n),dr(f,b);for(const[F,K]of g){if(g.delete(F),F===k)break;K.reject(nr)}}v&&(u.update_pending_count(-1),k.decrement(x))};m.promise.then(S,b=>S(null,b||"unknown"))}),jo(()=>{for(const m of g.values())m.reject(nr)}),Y&&(f.f|=ra),new Promise(m=>{function k(x){function S(){x===c?m(f):k(c)}x.then(S,S)}k(c)})}function Fo(e){const r=No(e);return qu(r),r}function Kf(e){const r=No(e);return r.equals=Tu,r}function fo(e){var r=e.effects;if(r!==null){e.effects=null;for(var a=0;a<r.length;a+=1)dt(r[a])}}let ro=[];function Lf(e){for(var r=e.parent;r!==null;){if((r.f&qe)===0)return(r.f&gn)===0?r:null;r=r.parent}return null}function Ko(e){var r,a=be;if(It(Lf(e)),Y){let u=fr;zs(new Set);try{ro.includes(e)&&tf(),ro.push(e),e.f&=~kn,fo(e),r=ho(e)}finally{It(a),zs(u),ro.pop()}}else try{e.f&=~kn,fo(e),r=ho(e)}finally{It(a)}return r}function Mu(e){var r=Ko(e);if(e.equals(r)||(we?.is_fork||(e.v=r),e.wv=Qu()),!br)if(Tt!==null)(Wr()||we?.is_fork)&&Tt.set(e,r);else{var a=(e.f&Ct)===0?en:tt;nt(e,a)}}let fr=new Set;const wn=new Map;function zs(e){fr=e}let Lo=!1;function Bf(){Lo=!0}function Yn(e,r){var a={f:0,v:e,reactions:null,equals:Eu,rv:0,wv:0};return a}function Ae(e,r){const a=Yn(e);return qu(a),a}function Nu(e,r=!1,a=!0){const u=Yn(e);return r||(u.equals=Tu),u}function Z(e,r,a=!1){ye!==null&&(!Wt||(ye.f&ji)!==0)&&ku()&&(ye.f&(qe|Xt|ra|ji))!==0&&!Qt?.includes(e)&&cf();let u=a?pn(r):r;return Y&&Du(u,e.label),dr(e,u)}function dr(e,r){if(!e.equals(r)){var a=e.v;br?wn.set(e,r):wn.set(e,a),e.v=r;var u=Vt.ensure();if(u.capture(e,a),Y){if(be!==null){e.updated??=new Map;const c=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:c}),c>5){const f=bf("updated at");if(f!==null){let v=e.updated.get(f.stack);v||(v={error:f,count:0},e.updated.set(f.stack,v)),v.count++}}}be!==null&&(e.set_during_effect=!0)}(e.f&qe)!==0&&((e.f&vt)!==0&&Ko(e),nt(e,(e.f&Ct)!==0?tt:en)),e.wv=Qu(),Ku(e,vt),be!==null&&(be.f&tt)!==0&&(be.f&(Jt|$n))===0&&(bt===null?ed([e]):bt.push(e)),!u.is_fork&&fr.size>0&&!Lo&&Fu()}return r}function Fu(){Lo=!1;var e=En;Wi(!0);const r=Array.from(fr);try{for(const a of r)(a.f&tt)!==0&&nt(a,en),Xr(a)&&Gr(a)}finally{Wi(e)}fr.clear()}function zr(e){Z(e,e.v+1)}function Ku(e,r){var a=e.reactions;if(a!==null)for(var u=a.length,c=0;c<u;c++){var f=a[c],v=f.f;if(Y&&(v&ji)!==0){fr.add(f);continue}var g=(v&vt)===0;if(g&&nt(f,r),(v&qe)!==0){var m=f;Tt?.delete(m),(v&kn)===0&&(v&Ct&&(f.f|=kn),Ku(m,en))}else g&&((v&Xt)!==0&&$t!==null&&$t.add(f),Gn(f))}}const jf=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function pn(e){if(typeof e!="object"||e===null||bn in e)return e;const r=Io(e);if(r!==$c&&r!==qc)return e;var a=new Map,u=du(e),c=Ae(0),f=Vn,v=x=>{if(Vn===f)return x();var S=ye,b=Vn;ct(null),Hs(f);var T=x();return ct(S),Hs(b),T};u&&(a.set("length",Ae(e.length)),Y&&(e=Uf(e)));var g="";let m=!1;function k(x){if(!m){m=!0,g=x,Lt(c,`${g} version`);for(const[S,b]of a)Lt(b,Bn(g,S));m=!1}}return new Proxy(e,{defineProperty(x,S,b){(!("value"in b)||b.configurable===!1||b.enumerable===!1||b.writable===!1)&&uf();var T=a.get(S);return T===void 0?T=v(()=>{var F=Ae(b.value);return a.set(S,F),Y&&typeof S=="string"&&Lt(F,Bn(g,S)),F}):Z(T,b.value,!0),!0},deleteProperty(x,S){var b=a.get(S);if(b===void 0){if(S in x){const T=v(()=>Ae(Xe));a.set(S,T),zr(c),Y&&Lt(T,Bn(g,S))}}else Z(b,Xe),zr(c);return!0},get(x,S,b){if(S===bn)return e;if(Y&&S===yu)return k;var T=a.get(S),F=S in x;if(T===void 0&&(!F||ir(x,S)?.writable)&&(T=v(()=>{var N=pn(F?x[S]:Xe),V=Ae(N);return Y&&Lt(V,Bn(g,S)),V}),a.set(S,T)),T!==void 0){var K=B(T);return K===Xe?void 0:K}return Reflect.get(x,S,b)},getOwnPropertyDescriptor(x,S){var b=Reflect.getOwnPropertyDescriptor(x,S);if(b&&"value"in b){var T=a.get(S);T&&(b.value=B(T))}else if(b===void 0){var F=a.get(S),K=F?.v;if(F!==void 0&&K!==Xe)return{enumerable:!0,configurable:!0,value:K,writable:!0}}return b},has(x,S){if(S===bn)return!0;var b=a.get(S),T=b!==void 0&&b.v!==Xe||Reflect.has(x,S);if(b!==void 0||be!==null&&(!T||ir(x,S)?.writable)){b===void 0&&(b=v(()=>{var K=T?pn(x[S]):Xe,N=Ae(K);return Y&&Lt(N,Bn(g,S)),N}),a.set(S,b));var F=B(b);if(F===Xe)return!1}return T},set(x,S,b,T){var F=a.get(S),K=S in x;if(u&&S==="length")for(var N=b;N<F.v;N+=1){var V=a.get(N+"");V!==void 0?Z(V,Xe):N in x&&(V=v(()=>Ae(Xe)),a.set(N+"",V),Y&&Lt(V,Bn(g,N)))}if(F===void 0)(!K||ir(x,S)?.writable)&&(F=v(()=>Ae(void 0)),Y&&Lt(F,Bn(g,S)),Z(F,pn(b)),a.set(S,F));else{K=F.v!==Xe;var ne=v(()=>pn(b));Z(F,ne)}var te=Reflect.getOwnPropertyDescriptor(x,S);if(te?.set&&te.set.call(T,b),!K){if(u&&typeof S=="string"){var Q=a.get("length"),re=Number(S);Number.isInteger(re)&&re>=Q.v&&Z(Q,re+1)}zr(c)}return!0},ownKeys(x){B(c);var S=Reflect.ownKeys(x).filter(F=>{var K=a.get(F);return K===void 0||K.v!==Xe});for(var[b,T]of a)T.v!==Xe&&!(b in x)&&S.push(b);return S},setPrototypeOf(){lf()}})}function Bn(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:jf.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function io(e){try{if(e!==null&&typeof e=="object"&&bn in e)return e[bn]}catch{}return e}const zf=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Uf(e){return new Proxy(e,{get(r,a,u){var c=Reflect.get(r,a,u);return zf.has(a)?function(...f){Bf();var v=c.apply(this,f);return Fu(),v}:c}})}function Vf(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:a,lastIndexOf:u,includes:c}=e;e.indexOf=function(f,v){const g=a.call(this,f,v);if(g===-1){for(let m=v??0;m<this.length;m+=1)if(io(this[m])===f){to("array.indexOf(...)");break}}return g},e.lastIndexOf=function(f,v){const g=u.call(this,f,v??this.length-1);if(g===-1){for(let m=0;m<=(v??this.length-1);m+=1)if(io(this[m])===f){to("array.lastIndexOf(...)");break}}return g},e.includes=function(f,v){const g=c.call(this,f,v);if(!g){for(let m=0;m<this.length;m+=1)if(io(this[m])===f){to("array.includes(...)");break}}return g},Array.__svelte_cleanup=()=>{e.indexOf=a,e.lastIndexOf=u,e.includes=c}}var Us,Bo,Lu,Bu;function Wf(){if(Us===void 0){Us=window,Bo=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,a=Text.prototype;Lu=ir(r,"firstChild").get,Bu=ir(r,"nextSibling").get,Ks(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ks(a)&&(a.__t=void 0),Y&&(e.__svelte_meta=null,Vf())}}function An(e=""){return document.createTextNode(e)}function Vi(e){return Lu.call(e)}function Qr(e){return Bu.call(e)}function Te(e,r){return Vi(e)}function Zt(e,r=!1){{var a=Vi(e);return a instanceof Comment&&a.data===""?Qr(a):a}}function Ce(e,r=1,a=!1){let u=e;for(;r--;)u=Qr(u);return u}function Hf(e){e.textContent=""}function ju(){return!1}let Vs=!1;function Gf(){Vs||(Vs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function aa(e){var r=ye,a=be;ct(null),It(null);try{return e()}finally{ct(r),It(a)}}function Yf(e,r,a,u=a){e.addEventListener(r,()=>aa(a));const c=e.__on_r;c?e.__on_r=()=>{c(),u(!0)}:e.__on_r=()=>u(!0),Gf()}function $f(e){be===null&&(ye===null&&af(e),rf()),br&&nf(e)}function qf(e,r){var a=r.last;a===null?r.last=r.first=e:(a.next=e,e.prev=a,r.last=e)}function tn(e,r,a){var u=be;if(Y)for(;u!==null&&(u.f&ji)!==0;)u=u.parent;u!==null&&(u.f&gt)!==0&&(e|=gt);var c={ctx:ft,deps:null,nodes_start:null,nodes_end:null,f:e|vt|Ct,first:null,fn:r,last:null,next:null,parent:u,b:u&&u.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(Y&&(c.component_function=Zr),a)try{Gr(c),c.f|=Po}catch(g){throw dt(c),g}else r!==null&&Gn(c);var f=c;if(a&&f.deps===null&&f.teardown===null&&f.nodes_start===null&&f.first===f.last&&(f.f&yr)===0&&(f=f.first,(e&Xt)!==0&&(e&ur)!==0&&f!==null&&(f.f|=ur)),f!==null&&(f.parent=u,u!==null&&qf(f,u),ye!==null&&(ye.f&qe)!==0&&(e&$n)===0)){var v=ye;(v.effects??=[]).push(f)}return c}function Wr(){return ye!==null&&!Wt}function jo(e){const r=tn(Ro,null,!1);return nt(r,tt),r.teardown=e,r}function yn(e){$f("$effect"),Y&&Dn(e,"name",{value:"$effect"});var r=be.f,a=!ye&&(r&Jt)!==0&&(r&Po)===0;if(a){var u=ft;(u.e??=[]).push(e)}else return zu(e)}function zu(e){return tn(Co|Xc,e,!1)}function Zf(e){Vt.ensure();const r=tn($n|yr,e,!0);return(a={})=>new Promise(u=>{a.outro?ar(r,()=>{dt(r),u(void 0)}):(dt(r),u(void 0))})}function Uu(e){return tn(Co,e,!1)}function Qf(e){return tn(ra|yr,e,!0)}function oa(e,r=0){return tn(Ro|r,e,!0)}function qt(e,r=[],a=[],u=[]){Pf(u,r,a,c=>{tn(Ro,()=>e(...c.map(B)),!0)})}function zo(e,r=0){var a=tn(Xt|r,e,!0);return Y&&(a.dev_stack=Vr),a}function xt(e){return tn(Jt|yr,e,!0)}function Vu(e){var r=e.teardown;if(r!==null){const a=br,u=ye;Ws(!0),ct(null);try{r.call(null)}finally{Ws(a),ct(u)}}}function Wu(e,r=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const c=a.ac;c!==null&&aa(()=>{c.abort(nr)});var u=a.next;(a.f&$n)!==0?a.parent=null:dt(a,r),a=u}}function Xf(e){for(var r=e.first;r!==null;){var a=r.next;(r.f&Jt)===0&&dt(r),r=a}}function dt(e,r=!0){var a=!1;(r||(e.f&pu)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Jf(e.nodes_start,e.nodes_end),a=!0),Wu(e,r&&!a),Hi(e,0),nt(e,gn);var u=e.transitions;if(u!==null)for(const f of u)f.stop();Vu(e);var c=e.parent;c!==null&&c.first!==null&&Hu(e),Y&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Jf(e,r){for(;e!==null;){var a=e===r?null:Qr(e);e.remove(),e=a}}function Hu(e){var r=e.parent,a=e.prev,u=e.next;a!==null&&(a.next=u),u!==null&&(u.prev=a),r!==null&&(r.first===e&&(r.first=u),r.last===e&&(r.last=a))}function ar(e,r,a=!0){var u=[];Uo(e,u,!0),Gu(u,()=>{a&&dt(e),r&&r()})}function Gu(e,r){var a=e.length;if(a>0){var u=()=>--a||r();for(var c of e)c.out(u)}else r()}function Uo(e,r,a){if((e.f&gt)===0){if(e.f^=gt,e.transitions!==null)for(const v of e.transitions)(v.is_global||a)&&r.push(v);for(var u=e.first;u!==null;){var c=u.next,f=(u.f&ur)!==0||(u.f&Jt)!==0&&(e.f&Xt)!==0;Uo(u,r,f?a:!1),u=c}}}function Vo(e){Yu(e,!0)}function Yu(e,r){if((e.f&gt)!==0){e.f^=gt,(e.f&tt)===0&&(nt(e,vt),Gn(e));for(var a=e.first;a!==null;){var u=a.next,c=(a.f&ur)!==0||(a.f&Jt)!==0;Yu(a,c?r:!1),a=u}if(e.transitions!==null)for(const f of e.transitions)(f.is_global||r)&&f.in()}}function $u(e,r){for(var a=e.nodes_start,u=e.nodes_end;a!==null;){var c=a===u?null:Qr(a);r.append(a),a=c}}let En=!1;function Wi(e){En=e}let br=!1;function Ws(e){br=e}let ye=null,Wt=!1;function ct(e){ye=e}let be=null;function It(e){be=e}let Qt=null;function qu(e){ye!==null&&(Qt===null?Qt=[e]:Qt.push(e))}let it=null,mt=0,bt=null;function ed(e){bt=e}let Zu=1,Hr=0,Vn=Hr;function Hs(e){Vn=e}function Qu(){return++Zu}function Xr(e){var r=e.f;if((r&vt)!==0)return!0;if(r&qe&&(e.f&=~kn),(r&en)!==0){var a=e.deps;if(a!==null)for(var u=a.length,c=0;c<u;c++){var f=a[c];if(Xr(f)&&Mu(f),f.wv>e.wv)return!0}(r&Ct)!==0&&Tt===null&&nt(e,tt)}return!1}function Xu(e,r,a=!0){var u=e.reactions;if(u!==null&&!Qt?.includes(e))for(var c=0;c<u.length;c++){var f=u[c];(f.f&qe)!==0?Xu(f,r,!1):r===f&&(a?nt(f,vt):(f.f&tt)!==0&&nt(f,en),Gn(f))}}function ho(e){var r=it,a=mt,u=bt,c=ye,f=Qt,v=ft,g=Wt,m=Vn,k=e.f;it=null,mt=0,bt=null,ye=(k&(Jt|$n))===0?e:null,Qt=null,lr(e.ctx),Wt=!1,Vn=++Hr,e.ac!==null&&(aa(()=>{e.ac.abort(nr)}),e.ac=null);try{e.f|=uo;var x=e.fn,S=x(),b=e.deps;if(it!==null){var T;if(Hi(e,mt),b!==null&&mt>0)for(b.length=mt+it.length,T=0;T<it.length;T++)b[mt+T]=it[T];else e.deps=b=it;if(En&&Wr()&&(e.f&Ct)!==0)for(T=mt;T<b.length;T++)(b[T].reactions??=[]).push(e)}else b!==null&&mt<b.length&&(Hi(e,mt),b.length=mt);if(ku()&&bt!==null&&!Wt&&b!==null&&(e.f&(qe|en|vt))===0)for(T=0;T<bt.length;T++)Xu(bt[T],e);return c!==null&&c!==e&&(Hr++,bt!==null&&(u===null?u=bt:u.push(...bt))),(e.f&_n)!==0&&(e.f^=_n),S}catch(F){return Su(F)}finally{e.f^=uo,it=r,mt=a,bt=u,ye=c,Qt=f,lr(v),Wt=g,Vn=m}}function td(e,r){let a=r.reactions;if(a!==null){var u=Yc.call(a,e);if(u!==-1){var c=a.length-1;c===0?a=r.reactions=null:(a[u]=a[c],a.pop())}}a===null&&(r.f&qe)!==0&&(it===null||!it.includes(r))&&(nt(r,en),(r.f&Ct)!==0&&(r.f^=Ct,r.f&=~kn),fo(r),Hi(r,0))}function Hi(e,r){var a=e.deps;if(a!==null)for(var u=r;u<a.length;u++)td(e,a[u])}function Gr(e){var r=e.f;if((r&gn)===0){nt(e,tt);var a=be,u=En;if(be=e,En=!0,Y){var c=Zr;Bs(e.component_function);var f=Vr;zi(e.dev_stack??Vr)}try{(r&(Xt|Qc))!==0?Xf(e):Wu(e),Vu(e);var v=ho(e);e.teardown=typeof v=="function"?v:null,e.wv=Zu;var g;Y&&_f&&(e.f&vt)!==0&&e.deps}finally{En=u,be=a,Y&&(Bs(c),zi(f))}}}async function nd(){await Promise.resolve(),Tf()}function B(e){var r=e.f,a=(r&qe)!==0;if(ye!==null&&!Wt){var u=be!==null&&(be.f&gn)!==0;if(!u&&!Qt?.includes(e)){var c=ye.deps;if((ye.f&uo)!==0)e.rv<Hr&&(e.rv=Hr,it===null&&c!==null&&c[mt]===e?mt++:it===null?it=[e]:it.includes(e)||it.push(e));else{(ye.deps??=[]).push(e);var f=e.reactions;f===null?e.reactions=[ye]:f.includes(ye)||f.push(ye)}}}if(Y&&Nf.delete(e),br){if(wn.has(e))return wn.get(e);if(a){var v=e,g=v.v;return((v.f&tt)===0&&v.reactions!==null||el(v))&&(g=Ko(v)),wn.set(v,g),g}}else a&&(!Tt?.has(e)||we?.is_fork&&!Wr())&&(v=e,Xr(v)&&Mu(v),En&&Wr()&&(v.f&Ct)===0&&Ju(v));if(Tt?.has(e))return Tt.get(e);if((e.f&_n)!==0)throw e.v;return e.v}function Ju(e){if(e.deps!==null){e.f^=Ct;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&qe)!==0&&(r.f&Ct)===0&&Ju(r)}}function el(e){if(e.v===Xe)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(wn.has(r)||(r.f&qe)!==0&&el(r))return!0;return!1}function Jr(e){var r=Wt;try{return Wt=!0,e()}finally{Wt=r}}const rd=-7169;function nt(e,r){e.f=e.f&rd|r}function id(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(bn in e)vo(e);else if(!Array.isArray(e))for(let r in e){const a=e[r];typeof a=="object"&&a&&bn in a&&vo(a)}}}function vo(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let u in e)try{vo(e[u],r)}catch{}const a=Io(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const u=hu(a);for(let c in u){const f=u[c].get;if(f)try{f.call(e)}catch{}}}}}const ad=["touchstart","touchmove"];function od(e){return ad.includes(e)}const tl=new Set,po=new Set;function sd(e,r,a,u={}){function c(f){if(u.capture||Lr.call(r,f),!f.cancelBubble)return aa(()=>a?.call(this,f))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?_r(()=>{r.addEventListener(e,c,u)}):r.addEventListener(e,c,u),c}function Gs(e,r,a,u,c){var f={capture:u,passive:c},v=sd(e,r,a,f);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&jo(()=>{r.removeEventListener(e,v,f)})}function ei(e){for(var r=0;r<e.length;r++)tl.add(e[r]);for(var a of po)a(e)}let Ys=null;function Lr(e){var r=this,a=r.ownerDocument,u=e.type,c=e.composedPath?.()||[],f=c[0]||e.target;Ys=e;var v=0,g=Ys===e&&e.__root;if(g){var m=c.indexOf(g);if(m!==-1&&(r===document||r===window)){e.__root=r;return}var k=c.indexOf(r);if(k===-1)return;m<=k&&(v=m)}if(f=c[v]||e.target,f!==r){Dn(e,"currentTarget",{configurable:!0,get(){return f||a}});var x=ye,S=be;ct(null),It(null);try{for(var b,T=[];f!==null;){var F=f.assignedSlot||f.parentNode||f.host||null;try{var K=f["__"+u];K!=null&&(!f.disabled||e.target===f)&&K.call(f,e)}catch(N){b?T.push(N):b=N}if(e.cancelBubble||F===r||F===null)break;f=F}if(b){for(let N of T)queueMicrotask(()=>{throw N});throw b}}finally{e.__root=r,delete e.currentTarget,ct(x),It(S)}}}function ud(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function yo(e,r){var a=be;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=r)}function We(e,r){var a=(r&vf)!==0,u=(r&pf)!==0,c,f=!e.startsWith("<!>");return()=>{c===void 0&&(c=ud(f?e:"<!>"+e),a||(c=Vi(c)));var v=u||Bo?document.importNode(c,!0):c.cloneNode(!0);if(a){var g=Vi(v),m=v.lastChild;yo(g,m)}else yo(v,v);return v}}function Wn(){var e=document.createDocumentFragment(),r=document.createComment(""),a=An();return e.append(r,a),yo(r,a),e}function Se(e,r){e!==null&&e.before(r)}function xn(e,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function ld(e,r){return cd(e,r)}const tr=new Map;function cd(e,{target:r,anchor:a,props:u={},events:c,context:f,intro:v=!0}){Wf();var g=new Set,m=S=>{for(var b=0;b<S.length;b++){var T=S[b];if(!g.has(T)){g.add(T);var F=od(T);r.addEventListener(T,Lr,{passive:F});var K=tr.get(T);K===void 0?(document.addEventListener(T,Lr,{passive:F}),tr.set(T,1)):tr.set(T,K+1)}}};m(Oo(tl)),po.add(m);var k=void 0,x=Zf(()=>{var S=a??r.appendChild(An());return Sf(S,{pending:()=>{}},b=>{if(f){mr({});var T=ft;T.c=f}c&&(u.$$events=c),k=e(b,u)||{},f&&gr()}),()=>{for(var b of g){r.removeEventListener(b,Lr);var T=tr.get(b);--T===0?(document.removeEventListener(b,Lr),tr.delete(b)):tr.set(b,T)}po.delete(m),S!==a&&S.parentNode?.removeChild(S)}});return fd.set(k,x),k}let fd=new WeakMap;class dd{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,a=!0){this.anchor=r,this.#u=a}#a=()=>{var r=we;if(this.#e.has(r)){var a=this.#e.get(r),u=this.#t.get(a);if(u)Vo(u),this.#n.delete(a);else{var c=this.#r.get(a);c&&(this.#t.set(a,c.effect),this.#r.delete(a),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),u=c.effect)}for(const[f,v]of this.#e){if(this.#e.delete(f),f===r)break;const g=this.#r.get(v);g&&(dt(g.effect),this.#r.delete(v))}for(const[f,v]of this.#t){if(f===a||this.#n.has(f))continue;const g=()=>{if(Array.from(this.#e.values()).includes(f)){var k=document.createDocumentFragment();$u(v,k),k.append(An()),this.#r.set(f,{effect:v,fragment:k})}else dt(v);this.#n.delete(f),this.#t.delete(f)};this.#u||!u?(this.#n.add(f),ar(v,g,!1)):g()}}};#i=r=>{this.#e.delete(r);const a=Array.from(this.#e.values());for(const[u,c]of this.#r)a.includes(u)||(dt(c.effect),this.#r.delete(u))};ensure(r,a){var u=we,c=ju();if(a&&!this.#t.has(r)&&!this.#r.has(r))if(c){var f=document.createDocumentFragment(),v=An();f.append(v),this.#r.set(r,{effect:xt(()=>a(v)),fragment:f})}else this.#t.set(r,xt(()=>a(this.anchor)));if(this.#e.set(u,r),c){for(const[g,m]of this.#t)g===r?u.skipped_effects.delete(m):u.skipped_effects.add(m);for(const[g,m]of this.#r)g===r?u.skipped_effects.delete(m.effect):u.skipped_effects.add(m.effect);u.oncommit(this.#a),u.ondiscard(this.#i)}else this.#a()}}function Dt(e,r,a=!1){var u=new dd(e),c=a?ur:0;function f(v,g){u.ensure(v,g)}zo(()=>{var v=!1;r((g,m=!0)=>{v=!0,f(m,g)}),v||f(!1,null)},c)}function hd(e,r,a){Uu(()=>{var u=Jr(()=>r(e,a?.())||{});if(a&&u?.update){var c=!1,f={};oa(()=>{var v=a();id(v),c&&xu(f,v)&&(f=v,u.update(v))}),c=!0}if(u?.destroy)return()=>u.destroy()})}function nl(e){var r,a,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(r=0;r<c;r++)e[r]&&(a=nl(e[r]))&&(u&&(u+=" "),u+=a)}else for(a in e)e[a]&&(u&&(u+=" "),u+=a);return u}function vd(){for(var e,r,a=0,u="",c=arguments.length;a<c;a++)(e=arguments[a])&&(r=nl(e))&&(u&&(u+=" "),u+=r);return u}function pd(e){return typeof e=="object"?vd(e):e??""}function yd(e,r,a){var u=e==null?"":""+e;return u===""?null:u}function md(e,r){return e==null?null:String(e)}function gd(e,r,a,u,c,f){var v=e.__className;if(v!==a||v===void 0){var g=yd(a);g==null?e.removeAttribute("class"):e.className=g,e.__className=a}return f}function _d(e,r,a,u){var c=e.__style;if(c!==r){var f=md(r);f==null?e.removeAttribute("style"):e.style.cssText=f,e.__style=r}return u}const bd=Symbol("is custom element"),wd=Symbol("is html");function Ed(e,r){var a=Wo(e);a.value===(a.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function xd(e,r){var a=Wo(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function hn(e,r,a,u){var c=Wo(e);c[r]!==(c[r]=a)&&(r==="loading"&&(e[Jc]=a),a==null?e.removeAttribute(r):typeof a!="string"&&Td(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function Wo(e){return e.__attributes??={[bd]:e.nodeName.includes("-"),[wd]:e.namespaceURI===mf}}var $s=new Map;function Td(e){var r=e.getAttribute("is")||e.nodeName,a=$s.get(r);if(a)return a;$s.set(r,a=[]);for(var u,c=e,f=Element.prototype;f!==c;){u=hu(c);for(var v in u)u[v].set&&a.push(v);c=Io(c)}return a}function Dd(e,r,a=r){var u=new WeakSet;Yf(e,"input",async c=>{Y&&e.type==="checkbox"&&Ls();var f=c?e.defaultValue:e.value;if(f=ao(e)?oo(f):f,a(f),we!==null&&u.add(we),await nd(),f!==(f=r())){var v=e.selectionStart,g=e.selectionEnd,m=e.value.length;if(e.value=f??"",g!==null){var k=e.value.length;v===g&&g===m&&k>m?(e.selectionStart=k,e.selectionEnd=k):(e.selectionStart=v,e.selectionEnd=Math.min(g,k))}}}),Jr(r)==null&&e.value&&(a(ao(e)?oo(e.value):e.value),we!==null&&u.add(we)),oa(()=>{Y&&e.type==="checkbox"&&Ls();var c=r();if(e===document.activeElement){var f=Ni??we;if(u.has(f))return}ao(e)&&c===oo(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function ao(e){var r=e.type;return r==="number"||r==="range"}function oo(e){return e===""?null:+e}function qs(e,r){return e===r||e?.[bn]===r}function mo(e={},r,a,u){return Uu(()=>{var c,f;return oa(()=>{c=f,f=[],Jr(()=>{e!==a(...f)&&(r(e,...f),c&&qs(a(...c),e)&&r(null,...c))})}),()=>{_r(()=>{f&&qs(a(...f),e)&&r(null,...f)})}}),e}function rl(e,r,a){if(e==null)return r(void 0),Bi;const u=Jr(()=>e.subscribe(r,a));return u.unsubscribe?()=>u.unsubscribe():u}function kd(e){let r;return rl(e,a=>r=a)(),r}let go=Symbol();function Gi(e,r,a){const u=a[r]??={store:null,source:Nu(void 0),unsubscribe:Bi};if(Y&&(u.source.label=r),u.store!==e&&!(go in a))if(u.unsubscribe(),u.store=e??null,e==null)u.source.v=void 0,u.unsubscribe=Bi;else{var c=!0;u.unsubscribe=rl(e,f=>{c?u.source.v=f:Z(u.source,f)}),c=!1}return e&&go in a?kd(e):B(u.source)}function _o(e,r,a){let u=a[r];return u&&u.store!==e&&(u.unsubscribe(),u.unsubscribe=Bi),e}function Ho(){const e={};function r(){jo(()=>{for(var a in e)e[a].unsubscribe();Dn(e,go,{enumerable:!1,value:!0})})}return[e,r]}if(Y){let e=function(r){if(!(r in globalThis)){let a;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(a!==void 0)return a;sf(r)},set:u=>{a=u}})}};var Nv=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const Ad="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ad);var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fi={exports:{}},Id=Fi.exports,Zs;function Cd(){return Zs||(Zs=1,(function(e,r){(function(a,u){e.exports=u()})(Id,(function(){var a=function(t,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},a(t,n)};function u(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var c=function(){return c=Object.assign||function(n){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},c.apply(this,arguments)};function f(t,n,i){for(var o=0,s=n.length,l;o<s;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return t.concat(l||Array.prototype.slice.call(n))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Sd,g=Object.keys,m=Array.isArray;typeof Promise<"u"&&!v.Promise&&(v.Promise=Promise);function k(t,n){return typeof n!="object"||g(n).forEach(function(i){t[i]=n[i]}),t}var x=Object.getPrototypeOf,S={}.hasOwnProperty;function b(t,n){return S.call(t,n)}function T(t,n){typeof n=="function"&&(n=n(x(t))),(typeof Reflect>"u"?g:Reflect.ownKeys)(n).forEach(function(i){K(t,i,n[i])})}var F=Object.defineProperty;function K(t,n,i,o){F(t,n,k(i&&b(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function N(t){return{from:function(n){return t.prototype=Object.create(n.prototype),K(t.prototype,"constructor",t),{extend:T.bind(null,t.prototype)}}}}var V=Object.getOwnPropertyDescriptor;function ne(t,n){var i=V(t,n),o;return i||(o=x(t))&&ne(o,n)}var te=[].slice;function Q(t,n,i){return te.call(t,n,i)}function re(t,n){return n(t)}function ue(t){if(!t)throw new Error("Assertion Failed")}function _e(t){v.setImmediate?setImmediate(t):setTimeout(t,0)}function xe(t,n){return t.reduce(function(i,o,s){var l=n(o,s);return l&&(i[l[0]]=l[1]),i},{})}function le(t,n){if(typeof n=="string"&&b(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],o=0,s=n.length;o<s;++o){var l=le(t,n[o]);i.push(l)}return i}var d=n.indexOf(".");if(d!==-1){var h=t[n.substr(0,d)];return h==null?void 0:le(h,n.substr(d+1))}}function ie(t,n,i){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){ue(typeof i!="string"&&"length"in i);for(var o=0,s=n.length;o<s;++o)ie(t,n[o],i[o])}else{var l=n.indexOf(".");if(l!==-1){var d=n.substr(0,l),h=n.substr(l+1);if(h==="")i===void 0?m(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=i;else{var p=t[d];(!p||!b(t,d))&&(p=t[d]={}),ie(p,h,i)}}else i===void 0?m(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function fe(t,n){typeof n=="string"?ie(t,n,void 0):"length"in n&&[].map.call(n,function(i){ie(t,i,void 0)})}function pe(t){var n={};for(var i in t)b(t,i)&&(n[i]=t[i]);return n}var Re=[].concat;function je(t){return Re.apply([],t)}var ot="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(je([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return v[t]}),ze=new Set(ot.map(function(t){return v[t]}));function De(t){var n={};for(var i in t)if(b(t,i)){var o=t[i];n[i]=!o||typeof o!="object"||ze.has(o.constructor)?o:De(o)}return n}function Ht(t){for(var n in t)if(b(t,n))return!1;return!0}var pt=null;function He(t){pt=new WeakMap;var n=$(t);return pt=null,n}function $(t){if(!t||typeof t!="object")return t;var n=pt.get(t);if(n)return n;if(m(t)){n=[],pt.set(t,n);for(var i=0,o=t.length;i<o;++i)n.push($(t[i]))}else if(ze.has(t.constructor))n=t;else{var s=x(t);n=s===Object.prototype?{}:Object.create(s),pt.set(t,n);for(var l in t)b(t,l)&&(n[l]=$(t[l]))}return n}var se={}.toString;function de(t){return se.call(t).slice(8,-1)}var me=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ce=typeof me=="symbol"?function(t){var n;return t!=null&&(n=t[me])&&n.apply(t)}:function(){return null};function ge(t,n){var i=t.indexOf(n);return i>=0&&t.splice(i,1),i>=0}var ke={};function Ge(t){var n,i,o,s;if(arguments.length===1){if(m(t))return t.slice();if(this===ke&&typeof t=="string")return[t];if(s=ce(t)){for(i=[];o=s.next(),!o.done;)i.push(o.value);return i}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(i=new Array(n);n--;)i[n]=t[n];return i}return[t]}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var Pe=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},wr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],On=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Rt=wr.concat(On),pa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function nn(t,n){this.name=t,this.message=n}N(nn).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ii(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,o,s){return s.indexOf(i)===o}).join(`
`)}function rt(t,n,i,o){this.failures=n,this.failedKeys=o,this.successCount=i,this.message=ii(t,n)}N(rt).from(nn);function Pt(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=ii(t,this.failures)}N(Pt).from(nn);var ya=Rt.reduce(function(t,n){return t[n]=n+"Error",t},{}),El=nn,X=Rt.reduce(function(t,n){var i=n+"Error";function o(s,l){this.name=i,s?typeof s=="string"?(this.message="".concat(s).concat(l?`
 `+l:""),this.inner=l||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=pa[n]||i,this.inner=null)}return N(o).from(El),t[n]=o,t},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var Xo=On.reduce(function(t,n){return t[n+"Error"]=X[n],t},{});function xl(t,n){if(!t||t instanceof nn||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Xo[t.name])return t;var i=new Xo[t.name](n||t.message,t);return"stack"in t&&K(i,"stack",{get:function(){return this.inner.stack}}),i}var ai=Rt.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=X[n]),t},{});ai.ModifyError=rt,ai.DexieError=nn,ai.BulkError=Pt;function Ee(){}function Er(t){return t}function Tl(t,n){return t==null||t===Er?n:function(i){return n(t(i))}}function In(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function Dl(t,n){return t===Ee?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var l=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?In(o,this.onsuccess):o),s&&(this.onerror=this.onerror?In(s,this.onerror):s),l!==void 0?l:i}}function kl(t,n){return t===Ee?n:function(){t.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?In(i,this.onsuccess):i),o&&(this.onerror=this.onerror?In(o,this.onerror):o)}}function Al(t,n){return t===Ee?n:function(i){var o=t.apply(this,arguments);k(i,o);var s=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?In(s,this.onsuccess):s),l&&(this.onerror=this.onerror?In(l,this.onerror):l),o===void 0?d===void 0?void 0:d:k(o,d)}}function Sl(t,n){return t===Ee?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function ma(t,n){return t===Ee?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return i.then(function(){return n.apply(o,l)})}return n.apply(this,arguments)}}var Mt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Jo(t,n){Mt=t}var xr={},es=100,ga=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,x(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,x(n),t]})(),ts=ga[0],ns=ga[1],Ol=ga[2],Il=ns&&ns.then,Cn=ts&&ts.constructor,_a=!!Ol;function Cl(){queueMicrotask(Pl)}var Tr=function(t,n){Dr.push([t,n]),oi&&(Cl(),oi=!1)},ba=!0,oi=!0,Rn=[],si=[],wa=Er,rn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ee,pgp:!1,env:{},finalize:Ee},G=rn,Dr=[],Pn=0,ui=[];function U(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=G;if(typeof t!="function"){if(t!==xr)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&xa(this,this._value);return}this._state=null,this._value=null,++n.ref,is(this,t)}var Ea={get:function(){var t=G,n=di;function i(o,s){var l=this,d=!t.global&&(t!==G||n!==di),h=d&&!on(),p=new U(function(y,E){Ta(l,new rs(ss(o,t,d,h),ss(s,t,d,h),y,E,t))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return i.prototype=xr,i},set:function(t){K(this,"then",t&&t.prototype===xr?Ea:{get:function(){return t},set:Ea.set})}};T(U.prototype,{then:Ea,_then:function(t,n){Ta(this,new rs(null,null,t,n,G))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],i=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?i(o):li(o)}):this.then(null,function(o){return o&&o.name===n?i(o):li(o)})},finally:function(t){return this.then(function(n){return U.resolve(t()).then(function(){return n})},function(n){return U.resolve(t()).then(function(){return li(n)})})},timeout:function(t,n){var i=this;return t<1/0?new U(function(o,s){var l=setTimeout(function(){return s(new X.Timeout(n))},t);i.then(o,s).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&K(U.prototype,Symbol.toStringTag,"Dexie.Promise"),rn.env=os();function rs(t,n,i,o,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=o,this.psd=s}T(U,{all:function(){var t=Ge.apply(null,arguments).map(hi);return new U(function(n,i){t.length===0&&n([]);var o=t.length;t.forEach(function(s,l){return U.resolve(s).then(function(d){t[l]=d,--o||n(t)},i)})})},resolve:function(t){if(t instanceof U)return t;if(t&&typeof t.then=="function")return new U(function(i,o){t.then(i,o)});var n=new U(xr,!0,t);return n},reject:li,race:function(){var t=Ge.apply(null,arguments).map(hi);return new U(function(n,i){t.map(function(o){return U.resolve(o).then(n,i)})})},PSD:{get:function(){return G},set:function(t){return G=t}},totalEchoes:{get:function(){return di}},newPSD:an,usePSD:Mn,scheduler:{get:function(){return Tr},set:function(t){Tr=t}},rejectionMapper:{get:function(){return wa},set:function(t){wa=t}},follow:function(t,n){return new U(function(i,o){return an(function(s,l){var d=G;d.unhandleds=[],d.onunhandled=l,d.finalize=In(function(){var h=this;Ml(function(){h.unhandleds.length===0?s():l(h.unhandleds[0])})},d.finalize),t()},n,i,o)})}}),Cn&&(Cn.allSettled&&K(U,"allSettled",function(){var t=Ge.apply(null,arguments).map(hi);return new U(function(n){t.length===0&&n([]);var i=t.length,o=new Array(i);t.forEach(function(s,l){return U.resolve(s).then(function(d){return o[l]={status:"fulfilled",value:d}},function(d){return o[l]={status:"rejected",reason:d}}).then(function(){return--i||n(o)})})})}),Cn.any&&typeof AggregateError<"u"&&K(U,"any",function(){var t=Ge.apply(null,arguments).map(hi);return new U(function(n,i){t.length===0&&i(new AggregateError([]));var o=t.length,s=new Array(o);t.forEach(function(l,d){return U.resolve(l).then(function(h){return n(h)},function(h){s[d]=h,--o||i(new AggregateError(s))})})})}),Cn.withResolvers&&(U.withResolvers=Cn.withResolvers));function is(t,n){try{n(function(i){if(t._state===null){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&qn();i&&typeof i.then=="function"?is(t,function(s,l){i instanceof U?i._then(s,l):i.then(s,l)}):(t._state=!0,t._value=i,as(t)),o&&Zn()}},xa.bind(null,t))}catch(i){xa(t,i)}}function xa(t,n){if(si.push(n),t._state===null){var i=t._lib&&qn();n=wa(n),t._state=!1,t._value=n,Nl(t),as(t),i&&Zn()}}function as(t){var n=t._listeners;t._listeners=[];for(var i=0,o=n.length;i<o;++i)Ta(t,n[i]);var s=t._PSD;--s.ref||s.finalize(),Pn===0&&(++Pn,Tr(function(){--Pn===0&&Da()},[]))}function Ta(t,n){if(t._state===null){t._listeners.push(n);return}var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++Pn,Tr(Rl,[i,t,n])}function Rl(t,n,i){try{var o,s=n._value;!n._state&&si.length&&(si=[]),o=Mt&&n._consoleTask?n._consoleTask.run(function(){return t(s)}):t(s),!n._state&&si.indexOf(s)===-1&&Fl(n),i.resolve(o)}catch(l){i.reject(l)}finally{--Pn===0&&Da(),--i.psd.ref||i.psd.finalize()}}function Pl(){Mn(rn,function(){qn()&&Zn()})}function qn(){var t=ba;return ba=!1,oi=!1,t}function Zn(){var t,n,i;do for(;Dr.length>0;)for(t=Dr,Dr=[],i=t.length,n=0;n<i;++n){var o=t[n];o[0].apply(null,o[1])}while(Dr.length>0);ba=!0,oi=!0}function Da(){var t=Rn;Rn=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=ui.slice(0),i=n.length;i;)n[--i]()}function Ml(t){function n(){t(),ui.splice(ui.indexOf(n),1)}ui.push(n),++Pn,Tr(function(){--Pn===0&&Da()},[])}function Nl(t){Rn.some(function(n){return n._value===t._value})||Rn.push(t)}function Fl(t){for(var n=Rn.length;n;)if(Rn[--n]._value===t._value){Rn.splice(n,1);return}}function li(t){return new U(xr,!1,t)}function Oe(t,n){var i=G;return function(){var o=qn(),s=G;try{return sn(i,!0),t.apply(this,arguments)}catch(l){n&&n(l)}finally{sn(s,!1),o&&Zn()}}}var Ue={awaits:0,echoes:0,id:0},Kl=0,ci=[],fi=0,di=0,Ll=0;function an(t,n,i,o){var s=G,l=Object.create(s);l.parent=s,l.ref=0,l.global=!1,l.id=++Ll,rn.env,l.env=_a?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject}:{},n&&k(l,n),++s.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=Mn(l,t,i,o);return l.ref===0&&l.finalize(),d}function Qn(){return Ue.id||(Ue.id=++Kl),++Ue.awaits,Ue.echoes+=es,Ue.id}function on(){return Ue.awaits?(--Ue.awaits===0&&(Ue.id=0),Ue.echoes=Ue.awaits*es,!0):!1}(""+Il).indexOf("[native code]")===-1&&(Qn=on=Ee);function hi(t){return Ue.echoes&&t&&t.constructor===Cn?(Qn(),t.then(function(n){return on(),n},function(n){return on(),Ne(n)})):t}function Bl(t){++di,(!Ue.echoes||--Ue.echoes===0)&&(Ue.echoes=Ue.awaits=Ue.id=0),ci.push(G),sn(t,!0)}function jl(){var t=ci[ci.length-1];ci.pop(),sn(t,!1)}function sn(t,n){var i=G;if((n?Ue.echoes&&(!fi++||t!==G):fi&&(!--fi||t!==G))&&queueMicrotask(n?Bl.bind(null,t):jl),t!==G&&(G=t,i===rn&&(rn.env=os()),_a)){var o=rn.env.Promise,s=t.env;(i.global||t.global)&&(Object.defineProperty(v,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function os(){var t=v.Promise;return _a?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Mn(t,n,i,o,s){var l=G;try{return sn(t,!0),n(i,o,s)}finally{sn(l,!1)}}function ss(t,n,i,o){return typeof t!="function"?t:function(){var s=G;i&&Qn(),sn(n,!0);try{return t.apply(this,arguments)}finally{sn(s,!1),o&&queueMicrotask(on)}}}function ka(t){Promise===Cn&&Ue.echoes===0?fi===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var Ne=U.reject;function Aa(t,n,i,o){if(!t.idbdb||!t._state.openComplete&&!G.letThrough&&!t._vip){if(t._state.openComplete)return Ne(new X.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Ne(new X.DatabaseClosed);t.open().catch(Ee)}return t._state.dbReadyPromise.then(function(){return Aa(t,n,i,o)})}else{var s=t._createTransaction(n,i,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(l){return l.name===ya.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Aa(t,n,i,o)})):Ne(l)}return s._promise(n,function(l,d){return an(function(){return G.trans=s,o(l,d,s)})}).then(function(l){if(n==="readwrite")try{s.idbtrans.commit()}catch{}return n==="readonly"?l:s._completion.then(function(){return l})})}}var us="4.2.1",Nn="",Sa=-1/0,Gt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ls="String expected.",Xn=[],vi="__dbnames",Oa="readonly",Ia="readwrite";function Fn(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var cs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pi(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=He(n),delete n[t]),n}:function(n){return n}}function fs(){throw X.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function he(t,n){try{var i=ds(t),o=ds(n);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return Ul(hs(t),hs(n));case"Array":return zl(t,n)}}catch{}return NaN}function zl(t,n){for(var i=t.length,o=n.length,s=i<o?i:o,l=0;l<s;++l){var d=he(t[l],n[l]);if(d!==0)return d}return i===o?0:i<o?-1:1}function Ul(t,n){for(var i=t.length,o=n.length,s=i<o?i:o,l=0;l<s;++l)if(t[l]!==n[l])return t[l]<n[l]?-1:1;return i===o?0:i<o?-1:1}function ds(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var i=de(t);return i==="ArrayBuffer"?"binary":i}function hs(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function yi(t,n,i){var o=t.schema.yProps;return o?(n&&i.numFailures>0&&(n=n.filter(function(s,l){return!i.failures[l]})),Promise.all(o.map(function(s){var l=s.updatesTable;return n?t.db.table(l).where("k").anyOf(n).delete():t.db.table(l).clear()})).then(function(){return i})):i}var kr=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var i,o=this["@@propmod"];if(o.add!==void 0){var s=o.add;if(m(s))return f(f([],m(n)?n:[],!0),s).sort();if(typeof s=="number")return(Number(n)||0)+s;if(typeof s=="bigint")try{return BigInt(n)+s}catch{return BigInt(0)+s}throw new TypeError("Invalid term ".concat(s))}if(o.remove!==void 0){var l=o.remove;if(m(l))return m(n)?n.filter(function(h){return!l.includes(h)}).sort():[];if(typeof l=="number")return Number(n)-l;if(typeof l=="bigint")try{return BigInt(n)-l}catch{return BigInt(0)-l}throw new TypeError("Invalid subtrahend ".concat(l))}var d=(i=o.replacePrefix)===null||i===void 0?void 0:i[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function vs(t,n){for(var i=g(n),o=i.length,s=!1,l=0;l<o;++l){var d=i[l],h=n[d],p=le(t,d);h instanceof kr?(ie(t,d,h.execute(p)),s=!0):p!==h&&(ie(t,d,h),s=!0)}return s}var ps=(function(){function t(){}return t.prototype._trans=function(n,i,o){var s=this._tx||G.trans,l=this.name,d=Mt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function h(E,_,O){if(!O.schema[l])throw new X.NotFound("Table "+l+" not part of transaction");return i(O.idbtrans,O)}var p=qn();try{var y=s&&s.db._novip===this.db._novip?s===G.trans?s._promise(n,h,o):an(function(){return s._promise(n,h,o)},{trans:s,transless:G.transless||G}):Aa(this.db,n,[this.name],h);return d&&(y._consoleTask=d,y=y.catch(function(E){return console.trace(E),Ne(E)})),y}finally{p&&Zn()}},t.prototype.get=function(n,i){var o=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?Ne(new X.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:n}).then(function(l){return o.hook.reading.fire(l)})}).then(i)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(m(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=g(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(E){if(E.compound&&i.every(function(O){return E.keyPath.indexOf(O)>=0})){for(var _=0;_<i.length;++_)if(i.indexOf(E.keyPath[_])===-1)return!1;return!0}return!1}).sort(function(E,_){return E.keyPath.length-_.keyPath.length})[0];if(o&&this.db._maxKey!==Nn){var s=o.keyPath.slice(0,i.length);return this.where(s).equals(s.map(function(E){return n[E]}))}!o&&Mt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var l=this.schema.idxByName;function d(E,_){return he(E,_)===0}var h=i.reduce(function(E,_){var O=E[0],L=E[1],w=l[_],D=n[_];return[O||w,O||!w?Fn(L,w&&w.multi?function(A){var I=le(A,_);return m(I)&&I.some(function(R){return d(D,R)})}:function(A){return d(D,le(A,_))}):L]},[null,null]),p=h[0],y=h[1];return p?this.where(p.name).equals(n[p.keyPath]).filter(y):o?this.filter(y):this.where(i).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,m(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var i=this,o=i.db,s=i.name;this.schema.mappedClass=n,n.prototype instanceof fs&&(n=(function(p){u(y,p);function y(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(y.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),y.prototype.table=function(){return s},y})(n));for(var l=new Set,d=n.prototype;d;d=x(d))Object.getOwnPropertyNames(d).forEach(function(p){return l.add(p)});var h=function(p){if(!p)return p;var y=Object.create(n.prototype);for(var E in p)if(!l.has(E))try{y[E]=p[E]}catch{}return y};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=h,this.hook("reading",h),n},t.prototype.defineClass=function(){function n(i){k(this,i)}return this.mapToClass(n)},t.prototype.add=function(n,i){var o=this,s=this.schema.primKey,l=s.auto,d=s.keyPath,h=n;return d&&l&&(h=pi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"add",keys:i!=null?[i]:null,values:[h]})}).then(function(p){return p.numFailures?U.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{ie(n,d,p)}catch{}return p})},t.prototype.upsert=function(n,i){var o=this,s=this.schema.primKey.keyPath;return this._trans("readwrite",function(l){return o.core.get({trans:l,key:n}).then(function(d){var h=d??{};return vs(h,i),s&&ie(h,s,n),o.core.mutate({trans:l,type:"put",values:[h],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[i]}}).then(function(p){return p.numFailures?U.reject(p.failures[0]):!!d})})})},t.prototype.update=function(n,i){if(typeof n=="object"&&!m(n)){var o=le(n,this.schema.primKey.keyPath);return o===void 0?Ne(new X.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(n).modify(i)},t.prototype.put=function(n,i){var o=this,s=this.schema.primKey,l=s.auto,d=s.keyPath,h=n;return d&&l&&(h=pi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"put",values:[h],keys:i!=null?[i]:null})}).then(function(p){return p.numFailures?U.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{ie(n,d,p)}catch{}return p})},t.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(s){return yi(i,[n],s)}).then(function(s){return s.numFailures?U.reject(s.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:cs}).then(function(o){return yi(n,null,o)})}).then(function(i){return i.numFailures?U.reject(i.failures[0]):void 0})},t.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:n,trans:o}).then(function(s){return s.map(function(l){return i.hook.reading.fire(l)})})})},t.prototype.bulkAdd=function(n,i,o){var s=this,l=Array.isArray(i)?i:void 0;o=o||(l?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=s.schema.primKey,y=p.auto,E=p.keyPath;if(E&&l)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var _=n.length,O=E&&y?n.map(pi(E)):n;return s.core.mutate({trans:h,type:"add",keys:l,values:O,wantResults:d}).then(function(L){var w=L.numFailures,D=L.results,A=L.lastResult,I=L.failures,R=d?D:A;if(w===0)return R;throw new Pt("".concat(s.name,".bulkAdd(): ").concat(w," of ").concat(_," operations failed"),I)})})},t.prototype.bulkPut=function(n,i,o){var s=this,l=Array.isArray(i)?i:void 0;o=o||(l?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=s.schema.primKey,y=p.auto,E=p.keyPath;if(E&&l)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var _=n.length,O=E&&y?n.map(pi(E)):n;return s.core.mutate({trans:h,type:"put",keys:l,values:O,wantResults:d}).then(function(L){var w=L.numFailures,D=L.results,A=L.lastResult,I=L.failures,R=d?D:A;if(w===0)return R;throw new Pt("".concat(s.name,".bulkPut(): ").concat(w," of ").concat(_," operations failed"),I)})})},t.prototype.bulkUpdate=function(n){var i=this,o=this.core,s=n.map(function(h){return h.key}),l=n.map(function(h){return h.changes}),d=[];return this._trans("readwrite",function(h){return o.getMany({trans:h,keys:s,cache:"clone"}).then(function(p){var y=[],E=[];n.forEach(function(O,L){var w=O.key,D=O.changes,A=p[L];if(A){for(var I=0,R=Object.keys(D);I<R.length;I++){var P=R[I],M=D[P];if(P===i.schema.primKey.keyPath){if(he(M,w)!==0)throw new X.Constraint("Cannot update primary key in bulkUpdate()")}else ie(A,P,M)}d.push(L),y.push(w),E.push(A)}});var _=y.length;return o.mutate({trans:h,type:"put",keys:y,values:E,updates:{keys:s,changeSpecs:l}}).then(function(O){var L=O.numFailures,w=O.failures;if(L===0)return _;for(var D=0,A=Object.keys(w);D<A.length;D++){var I=A[D],R=d[Number(I)];if(R!=null){var P=w[I];delete w[I],w[R]=P}}throw new Pt("".concat(i.name,".bulkUpdate(): ").concat(L," of ").concat(_," operations failed"),w)})})})},t.prototype.bulkDelete=function(n){var i=this,o=n.length;return this._trans("readwrite",function(s){return i.core.mutate({trans:s,type:"delete",keys:n}).then(function(l){return yi(i,n,l)})}).then(function(s){var l=s.numFailures,d=s.lastResult,h=s.failures;if(l===0)return d;throw new Pt("".concat(i.name,".bulkDelete(): ").concat(l," of ").concat(o," operations failed"),h)})},t})();function Ar(t){var n={},i=function(h,p){if(p){for(var y=arguments.length,E=new Array(y-1);--y;)E[y-1]=arguments[y];return n[h].subscribe.apply(null,E),t}else if(typeof h=="string")return n[h]};i.addEventType=l;for(var o=1,s=arguments.length;o<s;++o)l(arguments[o]);return i;function l(h,p,y){if(typeof h=="object")return d(h);p||(p=Sl),y||(y=Ee);var E={subscribers:[],fire:y,subscribe:function(_){E.subscribers.indexOf(_)===-1&&(E.subscribers.push(_),E.fire=p(E.fire,_))},unsubscribe:function(_){E.subscribers=E.subscribers.filter(function(O){return O!==_}),E.fire=E.subscribers.reduce(p,y)}};return n[h]=i[h]=E,E}function d(h){g(h).forEach(function(p){var y=h[p];if(m(y))l(p,h[p][0],h[p][1]);else if(y==="asap")var E=l(p,Er,function(){for(var O=arguments.length,L=new Array(O);O--;)L[O]=arguments[O];E.subscribers.forEach(function(w){_e(function(){w.apply(null,L)})})});else throw new X.InvalidArgument("Invalid event config")})}}function Sr(t,n){return N(n).from({prototype:t}),n}function Vl(t){return Sr(ps.prototype,function(i,o,s){this.db=t,this._tx=s,this.name=i,this.schema=o,this.hook=t._allTables[i]?t._allTables[i].hook:Ar(null,{creating:[Dl,Ee],reading:[Tl,Er],updating:[Al,Ee],deleting:[kl,Ee]})})}function Jn(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function Ca(t,n){t.filter=Fn(t.filter,n)}function Ra(t,n,i){var o=t.replayFilter;t.replayFilter=o?function(){return Fn(o(),n())}:n,t.justLimit=i&&!o}function Wl(t,n){t.isMatch=Fn(t.isMatch,n)}function mi(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new X.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function ys(t,n,i){var o=mi(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function gi(t,n,i,o){var s=t.replayFilter?Fn(t.filter,t.replayFilter()):t.filter;if(t.or){var l={},d=function(h,p,y){if(!s||s(p,y,function(O){return p.stop(O)},function(O){return p.fail(O)})){var E=p.primaryKey,_=""+E;_==="[object ArrayBuffer]"&&(_=""+new Uint8Array(E)),b(l,_)||(l[_]=!0,n(h,p,y))}};return Promise.all([t.or._iterate(d,i),ms(ys(t,o,i),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return ms(ys(t,o,i),Fn(t.algorithm,s),n,!t.keysOnly&&t.valueMapper)}function ms(t,n,i,o){var s=o?function(d,h,p){return i(o(d),h,p)}:i,l=Oe(s);return t.then(function(d){if(d)return d.start(function(){var h=function(){return d.continue()};(!n||n(d,function(p){return h=p},function(p){d.stop(p),h=Ee},function(p){d.fail(p),h=Ee}))&&l(d.value,d,function(p){return h=p}),h()})})}var Hl=(function(){function t(){}return t.prototype._read=function(n,i){var o=this._ctx;return o.error?o.table._trans(null,Ne.bind(null,o.error)):o.table._trans("readonly",n).then(i)},t.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,Ne.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=Fn(i.algorithm,n)},t.prototype._iterate=function(n,i){return gi(this._ctx,n,i,this._ctx.table.core)},t.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&k(o,n),i._ctx=o,i},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var i=this._ctx;return this._read(function(o){return gi(i,n,o,i.table.core)})},t.prototype.count=function(n){var i=this;return this._read(function(o){var s=i._ctx,l=s.table.core;if(Jn(s,!0))return l.count({trans:o,query:{index:mi(s,l.schema),range:s.range}}).then(function(h){return Math.min(h,s.limit)});var d=0;return gi(s,function(){return++d,!1},o,l).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,i){var o=n.split(".").reverse(),s=o[0],l=o.length-1;function d(y,E){return E?d(y[o[E]],E-1):y[s]}var h=this._ctx.dir==="next"?1:-1;function p(y,E){var _=d(y,l),O=d(E,l);return he(_,O)*h}return this.toArray(function(y){return y.sort(p)}).then(i)},t.prototype.toArray=function(n){var i=this;return this._read(function(o){var s=i._ctx;if(s.dir==="next"&&Jn(s,!0)&&s.limit>0){var l=s.valueMapper,d=mi(s,s.table.core.schema);return s.table.core.query({trans:o,limit:s.limit,values:!0,query:{index:d,range:s.range}}).then(function(p){var y=p.result;return l?y.map(l):y})}else{var h=[];return gi(s,function(p){return h.push(p)},o,s.table.core).then(function(){return h})}},n)},t.prototype.offset=function(n){var i=this._ctx;return n<=0?this:(i.offset+=n,Jn(i)?Ra(i,function(){var o=n;return function(s,l){return o===0?!0:o===1?(--o,!1):(l(function(){s.advance(o),o=0}),!1)}}):Ra(i,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),Ra(this._ctx,function(){var i=n;return function(o,s,l){return--i<=0&&s(l),i>=0}},!0),this},t.prototype.until=function(n,i){return Ca(this._ctx,function(o,s,l){return n(o.value)?(s(l),i):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return Ca(this._ctx,function(i){return n(i.value)}),Wl(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){n(s.key,s)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){n(s.primaryKey,s)})},t.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,l){o.push(l.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&Jn(i,!0)&&i.limit>0)return this._read(function(s){var l=mi(i,i.table.core.schema);return i.table.core.query({trans:s,values:!1,limit:i.limit,query:{index:l,range:i.range}})}).then(function(s){var l=s.result;return l}).then(n);i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,l){o.push(l.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,i=n.index&&n.table.schema.idxByName[n.index];if(!i||!i.multi)return this;var o={};return Ca(this._ctx,function(s){var l=s.primaryKey.toString(),d=b(o,l);return o[l]=!0,!d}),this},t.prototype.modify=function(n){var i=this,o=this._ctx;return this._write(function(s){var l;typeof n=="function"?l=n:l=function(I){return vs(I,n)};var d=o.table.core,h=d.schema.primaryKey,p=h.outbound,y=h.extractKey,E=200,_=i.db._options.modifyChunkSize;_&&(typeof _=="object"?E=_[d.name]||_["*"]||200:E=_);var O=[],L=0,w=[],D=function(I,R){var P=R.failures,M=R.numFailures;L+=I-M;for(var C=0,j=g(P);C<j.length;C++){var W=j[C];O.push(P[W])}},A=n===gs;return i.clone().primaryKeys().then(function(I){var R=Jn(o)&&o.limit===1/0&&(typeof n!="function"||A)&&{index:o.index,range:o.range},P=function(M){var C=Math.min(E,I.length-M),j=I.slice(M,M+C);return(A?Promise.resolve([]):d.getMany({trans:s,keys:j,cache:"immutable"})).then(function(W){var z=[],J=[],oe=p?[]:null,H=A?j:[];if(!A)for(var ae=0;ae<C;++ae){var ee=W[ae],ve={value:He(ee),primKey:I[M+ae]};l.call(ve,ve.value,ve)!==!1&&(ve.value==null?H.push(I[M+ae]):!p&&he(y(ee),y(ve.value))!==0?(H.push(I[M+ae]),z.push(ve.value)):(J.push(ve.value),p&&oe.push(I[M+ae])))}return Promise.resolve(z.length>0&&d.mutate({trans:s,type:"add",values:z}).then(function(q){for(var Me in q.failures)H.splice(parseInt(Me),1);D(z.length,q)})).then(function(){return(J.length>0||R&&typeof n=="object")&&d.mutate({trans:s,type:"put",keys:oe,values:J,criteria:R,changeSpec:typeof n!="function"&&n,isAdditionalChunk:M>0}).then(function(q){return D(J.length,q)})}).then(function(){return(H.length>0||R&&A)&&d.mutate({trans:s,type:"delete",keys:H,criteria:R,isAdditionalChunk:M>0}).then(function(q){return yi(o.table,H,q)}).then(function(q){return D(H.length,q)})}).then(function(){return I.length>M+C&&P(M+E)})})};return P(0).then(function(){if(O.length>0)throw new rt("Error modifying one or more objects",O,L,w);return I.length})})})},t.prototype.delete=function(){var n=this._ctx,i=n.range;return Jn(n)&&!n.table.schema.yProps&&(n.isPrimKey||i.type===3)?this._write(function(o){var s=n.table.core.schema.primaryKey,l=i;return n.table.core.count({trans:o,query:{index:s,range:l}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:l}).then(function(h){var p=h.failures,y=h.numFailures;if(y)throw new rt("Could not delete some values",Object.keys(p).map(function(E){return p[E]}),d-y);return d-y})})}):this.modify(gs)},t})(),gs=function(t,n){return n.value=null};function Gl(t){return Sr(Hl.prototype,function(i,o){this.db=t;var s=cs,l=null;if(o)try{s=o()}catch(y){l=y}var d=i._ctx,h=d.table,p=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:s,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:l,or:d.or,valueMapper:p!==Er?p:null}})}function Yl(t,n){return t<n?-1:t===n?0:1}function $l(t,n){return t>n?-1:t===n?0:1}function yt(t,n,i){var o=t instanceof bs?new t.Collection(t):t;return o._ctx.error=i?new i(n):new TypeError(n),o}function er(t){return new t.Collection(t,function(){return _s("")}).limit(0)}function ql(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function Zl(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function Ql(t,n,i,o,s,l){for(var d=Math.min(t.length,o.length),h=-1,p=0;p<d;++p){var y=n[p];if(y!==o[p])return s(t[p],i[p])<0?t.substr(0,p)+i[p]+i.substr(p+1):s(t[p],o[p])<0?t.substr(0,p)+o[p]+i.substr(p+1):h>=0?t.substr(0,h)+n[h]+i.substr(h+1):null;s(t[p],y)<0&&(h=p)}return d<o.length&&l==="next"?t+i.substr(t.length):d<t.length&&l==="prev"?t.substr(0,i.length):h<0?null:t.substr(0,h)+o[h]+i.substr(h+1)}function _i(t,n,i,o){var s,l,d,h,p,y,E,_=i.length;if(!i.every(function(D){return typeof D=="string"}))return yt(t,ls);function O(D){s=ql(D),l=Zl(D),d=D==="next"?Yl:$l;var A=i.map(function(I){return{lower:l(I),upper:s(I)}}).sort(function(I,R){return d(I.lower,R.lower)});h=A.map(function(I){return I.upper}),p=A.map(function(I){return I.lower}),y=D,E=D==="next"?"":o}O("next");var L=new t.Collection(t,function(){return un(h[0],p[_-1]+o)});L._ondirectionchange=function(D){O(D)};var w=0;return L._addAlgorithm(function(D,A,I){var R=D.key;if(typeof R!="string")return!1;var P=l(R);if(n(P,p,w))return!0;for(var M=null,C=w;C<_;++C){var j=Ql(R,P,h[C],p[C],d,y);j===null&&M===null?w=C+1:(M===null||d(M,j)>0)&&(M=j)}return A(M!==null?function(){D.continue(M+E)}:I),!1}),L}function un(t,n,i,o){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:o}}function _s(t){return{type:1,lower:t,upper:t}}var bs=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,i,o,s){o=o!==!1,s=s===!0;try{return this._cmp(n,i)>0||this._cmp(n,i)===0&&(o||s)&&!(o&&s)?er(this):new this.Collection(this,function(){return un(n,i,!o,!s)})}catch{return yt(this,Gt)}},t.prototype.equals=function(n){return n==null?yt(this,Gt):new this.Collection(this,function(){return _s(n)})},t.prototype.above=function(n){return n==null?yt(this,Gt):new this.Collection(this,function(){return un(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?yt(this,Gt):new this.Collection(this,function(){return un(n,void 0,!1)})},t.prototype.below=function(n){return n==null?yt(this,Gt):new this.Collection(this,function(){return un(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?yt(this,Gt):new this.Collection(this,function(){return un(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?yt(this,ls):this.between(n,n+Nn,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):_i(this,function(i,o){return i.indexOf(o[0])===0},[n],Nn)},t.prototype.equalsIgnoreCase=function(n){return _i(this,function(i,o){return i===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=Ge.apply(ke,arguments);return n.length===0?er(this):_i(this,function(i,o){return o.indexOf(i)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=Ge.apply(ke,arguments);return n.length===0?er(this):_i(this,function(i,o){return o.some(function(s){return i.indexOf(s)===0})},n,Nn)},t.prototype.anyOf=function(){var n=this,i=Ge.apply(ke,arguments),o=this._cmp;try{i.sort(o)}catch{return yt(this,Gt)}if(i.length===0)return er(this);var s=new this.Collection(this,function(){return un(i[0],i[i.length-1])});s._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,i.sort(o)};var l=0;return s._addAlgorithm(function(d,h,p){for(var y=d.key;o(y,i[l])>0;)if(++l,l===i.length)return h(p),!1;return o(y,i[l])===0?!0:(h(function(){d.continue(i[l])}),!1)}),s},t.prototype.notEqual=function(n){return this.inAnyRange([[Sa,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=Ge.apply(ke,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return yt(this,Gt)}var i=n.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[Sa,s]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,i){var o=this,s=this._cmp,l=this._ascending,d=this._descending,h=this._min,p=this._max;if(n.length===0)return er(this);if(!n.every(function(C){return C[0]!==void 0&&C[1]!==void 0&&l(C[0],C[1])<=0}))return yt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);var y=!i||i.includeLowers!==!1,E=i&&i.includeUppers===!0;function _(C,j){for(var W=0,z=C.length;W<z;++W){var J=C[W];if(s(j[0],J[1])<0&&s(j[1],J[0])>0){J[0]=h(J[0],j[0]),J[1]=p(J[1],j[1]);break}}return W===z&&C.push(j),C}var O=l;function L(C,j){return O(C[0],j[0])}var w;try{w=n.reduce(_,[]),w.sort(L)}catch{return yt(this,Gt)}var D=0,A=E?function(C){return l(C,w[D][1])>0}:function(C){return l(C,w[D][1])>=0},I=y?function(C){return d(C,w[D][0])>0}:function(C){return d(C,w[D][0])>=0};function R(C){return!A(C)&&!I(C)}var P=A,M=new this.Collection(this,function(){return un(w[0][0],w[w.length-1][1],!y,!E)});return M._ondirectionchange=function(C){C==="next"?(P=A,O=l):(P=I,O=d),w.sort(L)},M._addAlgorithm(function(C,j,W){for(var z=C.key;P(z);)if(++D,D===w.length)return j(W),!1;return R(z)?!0:(o._cmp(z,w[D][1])===0||o._cmp(z,w[D][0])===0||j(function(){O===l?C.continue(w[D][0]):C.continue(w[D][1])}),!1)}),M},t.prototype.startsWithAnyOf=function(){var n=Ge.apply(ke,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?er(this):this.inAnyRange(n.map(function(i){return[i,i+Nn]})):yt(this,"startsWithAnyOf() only works with strings")},t})();function Xl(t){return Sr(bs.prototype,function(i,o,s){if(this.db=t,this._ctx={table:i,index:o===":id"?null:o,or:s},this._cmp=this._ascending=he,this._descending=function(l,d){return he(d,l)},this._max=function(l,d){return he(l,d)>0?l:d},this._min=function(l,d){return he(l,d)<0?l:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new X.MissingAPI})}function Nt(t){return Oe(function(n){return Or(n),t(n.target.error),!1})}function Or(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Ir="storagemutated",Pa="x-storagemutated-1",ln=Ar(null,Ir),Jl=(function(){function t(){}return t.prototype._lock=function(){return ue(!G.global),++this._reculock,this._reculock===1&&!G.global&&(G.lockOwnerFor=this),this},t.prototype._unlock=function(){if(ue(!G.global),--this._reculock===0)for(G.global||(G.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{Mn(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&G.lockOwnerFor!==this},t.prototype.create=function(n){var i=this;if(!this.mode)return this;var o=this.db.idbdb,s=this.db._state.dbOpenError;if(ue(!this.idbtrans),!n&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new X.DatabaseClosed(s);case"MissingAPIError":throw new X.MissingAPI(s.message,s);default:throw new X.OpenFailed(s)}if(!this.active)throw new X.TransactionInactive;return ue(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=Oe(function(l){Or(l),i._reject(n.error)}),n.onabort=Oe(function(l){Or(l),i.active&&i._reject(new X.Abort(n.error)),i.active=!1,i.on("abort").fire(l)}),n.oncomplete=Oe(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&ln.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,i,o){var s=this;if(n==="readwrite"&&this.mode!=="readwrite")return Ne(new X.ReadOnly("Transaction is readonly"));if(!this.active)return Ne(new X.TransactionInactive);if(this._locked())return new U(function(d,h){s._blockedFuncs.push([function(){s._promise(n,i,o).then(d,h)},G])});if(o)return an(function(){var d=new U(function(h,p){s._lock();var y=i(h,p,s);y&&y.then&&y.then(h,p)});return d.finally(function(){return s._unlock()}),d._lib=!0,d});var l=new U(function(d,h){var p=i(d,h,s);p&&p.then&&p.then(d,h)});return l._lib=!0,l},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var i=this._root(),o=U.resolve(n);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var s=i.idbtrans.objectStore(i.storeNames[0]);(function d(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(s.get(-1/0).onsuccess=d)})()}var l=i._waitingFor;return new U(function(d,h){o.then(function(p){return i._waitingQueue.push(Oe(d.bind(null,p)))},function(p){return i._waitingQueue.push(Oe(h.bind(null,p)))}).finally(function(){i._waitingFor===l&&(i._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))},t.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(b(i,n))return i[n];var o=this.schema[n];if(!o)throw new X.NotFound("Table "+n+" not part of transaction");var s=new this.db.Table(n,o,this);return s.core=this.db.core.table(n),i[n]=s,s},t})();function ec(t){return Sr(Jl.prototype,function(i,o,s,l,d){var h=this;i!=="readonly"&&o.forEach(function(p){var y,E=(y=s[p])===null||y===void 0?void 0:y.yProps;E&&(o=o.concat(E.map(function(_){return _.updatesTable})))}),this.db=t,this.mode=i,this.storeNames=o,this.schema=s,this.chromeTransactionDurability=l,this.idbtrans=null,this.on=Ar(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U(function(p,y){h._resolve=p,h._reject=y}),this._completion.then(function(){h.active=!1,h.on.complete.fire()},function(p){var y=h.active;return h.active=!1,h.on.error.fire(p),h.parent?h.parent._reject(p):y&&h.idbtrans&&h.idbtrans.abort(),Ne(p)})})}function Ma(t,n,i,o,s,l,d,h){return{name:t,keyPath:n,unique:i,multi:o,auto:s,compound:l,src:(i&&!d?"&":"")+(o?"*":"")+(s?"++":"")+ws(n),type:h}}function ws(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Na(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:xe(i,function(o){return[o.name,o]})}}function tc(t){return t.length===1?t[0]:t}var Cr=function(t){try{return t.only([[]]),Cr=function(){return[[]]},[[]]}catch{return Cr=function(){return Nn},Nn}};function Fa(t){return t==null?function(){}:typeof t=="string"?nc(t):function(n){return le(n,t)}}function nc(t){var n=t.split(".");return n.length===1?function(i){return i[t]}:function(i){return le(i,t)}}function Es(t){return[].slice.call(t)}var rc=0;function Rr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function ic(t,n,i){function o(_,O){var L=Es(_.objectStoreNames);return{schema:{name:_.name,tables:L.map(function(w){return O.objectStore(w)}).map(function(w){var D=w.keyPath,A=w.autoIncrement,I=m(D),R=D==null,P={},M={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:R,compound:I,keyPath:D,autoIncrement:A,unique:!0,extractKey:Fa(D)},indexes:Es(w.indexNames).map(function(C){return w.index(C)}).map(function(C){var j=C.name,W=C.unique,z=C.multiEntry,J=C.keyPath,oe=m(J),H={name:j,compound:oe,keyPath:J,unique:W,multiEntry:z,extractKey:Fa(J)};return P[Rr(J)]=H,H}),getIndexByKeyPath:function(C){return P[Rr(C)]}};return P[":id"]=M.primaryKey,D!=null&&(P[Rr(D)]=M.primaryKey),M})},hasGetAll:L.length>0&&"getAll"in O.objectStore(L[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function s(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var O=_.lower,L=_.upper,w=_.lowerOpen,D=_.upperOpen,A=O===void 0?L===void 0?null:n.upperBound(L,!!D):L===void 0?n.lowerBound(O,!!w):n.bound(O,L,!!w,!!D);return A}function l(_){var O=_.name;function L(A){var I=A.trans,R=A.type,P=A.keys,M=A.values,C=A.range;return new Promise(function(j,W){j=Oe(j);var z=I.objectStore(O),J=z.keyPath==null,oe=R==="put"||R==="add";if(!oe&&R!=="delete"&&R!=="deleteRange")throw new Error("Invalid operation type: "+R);var H=(P||M||{length:1}).length;if(P&&M&&P.length!==M.length)throw new Error("Given keys array must have same length as given values array.");if(H===0)return j({numFailures:0,failures:{},results:[],lastResult:void 0});var ae,ee=[],ve=[],q=0,Me=function(Kt){++q,Or(Kt)};if(R==="deleteRange"){if(C.type===4)return j({numFailures:q,failures:ve,results:[],lastResult:void 0});C.type===3?ee.push(ae=z.clear()):ee.push(ae=z.delete(s(C)))}else{var Qe=oe?J?[M,P]:[M,null]:[P,null],Ft=Qe[0],st=Qe[1];if(oe)for(var _t=0;_t<H;++_t)ee.push(ae=st&&st[_t]!==void 0?z[R](Ft[_t],st[_t]):z[R](Ft[_t])),ae.onerror=Me;else for(var _t=0;_t<H;++_t)ee.push(ae=z[R](Ft[_t])),ae.onerror=Me}var dn=function(Kt){var Nr=Kt.target.result;ee.forEach(function(At,Ci){return At.error!=null&&(ve[Ci]=At.error)}),j({numFailures:q,failures:ve,results:R==="delete"?P:ee.map(function(At){return At.result}),lastResult:Nr})};ae.onerror=function(Kt){Me(Kt),dn(Kt)},ae.onsuccess=dn})}function w(A){var I=A.trans,R=A.values,P=A.query,M=A.reverse,C=A.unique;return new Promise(function(j,W){j=Oe(j);var z=P.index,J=P.range,oe=I.objectStore(O),H=z.isPrimaryKey?oe:oe.index(z.name),ae=M?C?"prevunique":"prev":C?"nextunique":"next",ee=R||!("openKeyCursor"in H)?H.openCursor(s(J),ae):H.openKeyCursor(s(J),ae);ee.onerror=Nt(W),ee.onsuccess=Oe(function(ve){var q=ee.result;if(!q){j(null);return}q.___id=++rc,q.done=!1;var Me=q.continue.bind(q),Qe=q.continuePrimaryKey;Qe&&(Qe=Qe.bind(q));var Ft=q.advance.bind(q),st=function(){throw new Error("Cursor not started")},_t=function(){throw new Error("Cursor not stopped")};q.trans=I,q.stop=q.continue=q.continuePrimaryKey=q.advance=st,q.fail=Oe(W),q.next=function(){var dn=this,Kt=1;return this.start(function(){return Kt--?dn.continue():dn.stop()}).then(function(){return dn})},q.start=function(dn){var Kt=new Promise(function(At,Ci){At=Oe(At),ee.onerror=Nt(Ci),q.fail=Ci,q.stop=function(Hc){q.stop=q.continue=q.continuePrimaryKey=q.advance=_t,At(Hc)}}),Nr=function(){if(ee.result)try{dn()}catch(At){q.fail(At)}else q.done=!0,q.start=function(){throw new Error("Cursor behind last entry")},q.stop()};return ee.onsuccess=Oe(function(At){ee.onsuccess=Nr,Nr()}),q.continue=Me,q.continuePrimaryKey=Qe,q.advance=Ft,Nr(),Kt},j(q)},W)})}function D(A){return function(I){return new Promise(function(R,P){R=Oe(R);var M=I.trans,C=I.values,j=I.limit,W=I.query,z=j===1/0?void 0:j,J=W.index,oe=W.range,H=M.objectStore(O),ae=J.isPrimaryKey?H:H.index(J.name),ee=s(oe);if(j===0)return R({result:[]});if(A){var ve=C?ae.getAll(ee,z):ae.getAllKeys(ee,z);ve.onsuccess=function(Ft){return R({result:Ft.target.result})},ve.onerror=Nt(P)}else{var q=0,Me=C||!("openKeyCursor"in ae)?ae.openCursor(ee):ae.openKeyCursor(ee),Qe=[];Me.onsuccess=function(Ft){var st=Me.result;if(!st)return R({result:Qe});if(Qe.push(C?st.value:st.primaryKey),++q===j)return R({result:Qe});st.continue()},Me.onerror=Nt(P)}})}}return{name:O,schema:_,mutate:L,getMany:function(A){var I=A.trans,R=A.keys;return new Promise(function(P,M){P=Oe(P);for(var C=I.objectStore(O),j=R.length,W=new Array(j),z=0,J=0,oe,H=function(q){var Me=q.target;(W[Me._pos]=Me.result)!=null,++J===z&&P(W)},ae=Nt(M),ee=0;ee<j;++ee){var ve=R[ee];ve!=null&&(oe=C.get(R[ee]),oe._pos=ee,oe.onsuccess=H,oe.onerror=ae,++z)}z===0&&P(W)})},get:function(A){var I=A.trans,R=A.key;return new Promise(function(P,M){P=Oe(P);var C=I.objectStore(O),j=C.get(R);j.onsuccess=function(W){return P(W.target.result)},j.onerror=Nt(M)})},query:D(p),openCursor:w,count:function(A){var I=A.query,R=A.trans,P=I.index,M=I.range;return new Promise(function(C,j){var W=R.objectStore(O),z=P.isPrimaryKey?W:W.index(P.name),J=s(M),oe=J?z.count(J):z.count();oe.onsuccess=Oe(function(H){return C(H.target.result)}),oe.onerror=Nt(j)})}}}var d=o(t,i),h=d.schema,p=d.hasGetAll,y=h.tables.map(function(_){return l(_)}),E={};return y.forEach(function(_){return E[_.name]=_}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(_){var O=E[_];if(!O)throw new Error("Table '".concat(_,"' not found"));return E[_]},MIN_KEY:-1/0,MAX_KEY:Cr(n),schema:h}}function ac(t,n){return n.reduce(function(i,o){var s=o.create;return c(c({},i),s(i))},t)}function oc(t,n,i,o){var s=i.IDBKeyRange;i.indexedDB;var l=ac(ic(n,s,o),t.dbcore);return{dbcore:l}}function bi(t,n){var i=n.db,o=oc(t._middlewares,i,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(s){var l=s.name;t.core.schema.tables.some(function(d){return d.name===l})&&(s.core=t.core.table(l),t[l]instanceof t.Table&&(t[l].core=s.core))})}function wi(t,n,i,o){i.forEach(function(s){var l=o[s];n.forEach(function(d){var h=ne(d,s);(!h||"value"in h&&h.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?K(d,s,{get:function(){return this.table(s)},set:function(p){F(this,s,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):d[s]=new t.Table(s,l))})})}function Ka(t,n){n.forEach(function(i){for(var o in i)i[o]instanceof t.Table&&delete i[o]})}function sc(t,n){return t._cfg.version-n._cfg.version}function uc(t,n,i,o){var s=t._dbSchema;i.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=Na("$meta",Ts("")[0],[]),t._storeNames.push("$meta"));var l=t._createTransaction("readwrite",t._storeNames,s);l.create(i),l._completion.catch(o);var d=l._reject.bind(l),h=G.transless||G;an(function(){if(G.trans=l,G.transless=h,n===0)g(s).forEach(function(p){Ba(i,p,s[p].primKey,s[p].indexes)}),bi(t,i),U.follow(function(){return t.on.populate.fire(l)}).catch(d);else return bi(t,i),cc(t,l,n).then(function(p){return fc(t,p,l,i)}).catch(d)})}function lc(t,n){xs(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=xi(t,t.idbdb,n);Ti(t,t._dbSchema,n);for(var o=La(i,t._dbSchema),s=function(y){if(y.change.length||y.recreate)return console.warn("Unable to patch indexes of table ".concat(y.name," because it has changes on the type of index or primary key.")),{value:void 0};var E=n.objectStore(y.name);y.add.forEach(function(_){Mt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(y.name,".").concat(_.src)),Ei(E,_)})},l=0,d=o.change;l<d.length;l++){var h=d[l],p=s(h);if(typeof p=="object")return p.value}}function cc(t,n,i){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??i}):U.resolve(i)}function fc(t,n,i,o){var s=[],l=t._versions,d=t._dbSchema=xi(t,t.idbdb,o),h=l.filter(function(y){return y._cfg.version>=n});if(h.length===0)return U.resolve();h.forEach(function(y){s.push(function(){var E=d,_=y._cfg.dbschema;Ti(t,E,o),Ti(t,_,o),d=t._dbSchema=_;var O=La(E,_);O.add.forEach(function(R){Ba(o,R[0],R[1].primKey,R[1].indexes)}),O.change.forEach(function(R){if(R.recreate)throw new X.Upgrade("Not yet support for changing primary key");var P=o.objectStore(R.name);R.add.forEach(function(M){return Ei(P,M)}),R.change.forEach(function(M){P.deleteIndex(M.name),Ei(P,M)}),R.del.forEach(function(M){return P.deleteIndex(M)})});var L=y._cfg.contentUpgrade;if(L&&y._cfg.version>n){bi(t,o),i._memoizedTables={};var w=pe(_);O.del.forEach(function(R){w[R]=E[R]}),Ka(t,[t.Transaction.prototype]),wi(t,[t.Transaction.prototype],g(w),w),i.schema=w;var D=Pe(L);D&&Qn();var A,I=U.follow(function(){if(A=L(i),A&&D){var R=on.bind(null,null);A.then(R,R)}});return A&&typeof A.then=="function"?U.resolve(A):I.then(function(){return A})}}),s.push(function(E){var _=y._cfg.dbschema;dc(_,E),Ka(t,[t.Transaction.prototype]),wi(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),i.schema=t._dbSchema}),s.push(function(E){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===y._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(_){return _!=="$meta"})):E.objectStore("$meta").put(y._cfg.version,"version"))})});function p(){return s.length?U.resolve(s.shift()(i.idbtrans)).then(p):U.resolve()}return p().then(function(){xs(d,o)})}function La(t,n){var i={del:[],add:[],change:[]},o;for(o in t)n[o]||i.del.push(o);for(o in n){var s=t[o],l=n[o];if(!s)i.add.push([o,l]);else{var d={name:o,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||s.primKey.auto!==l.primKey.auto)d.recreate=!0,i.change.push(d);else{var h=s.idxByName,p=l.idxByName,y=void 0;for(y in h)p[y]||d.del.push(y);for(y in p){var E=h[y],_=p[y];E?E.src!==_.src&&d.change.push(_):d.add.push(_)}(d.del.length>0||d.add.length>0||d.change.length>0)&&i.change.push(d)}}}return i}function Ba(t,n,i,o){var s=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(l){return Ei(s,l)}),s}function xs(t,n){g(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(Mt&&console.debug("Dexie: Creating missing table",i),Ba(n,i,t[i].primKey,t[i].indexes))})}function dc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(i){return t[i]==null&&n.db.deleteObjectStore(i)})}function Ei(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function xi(t,n,i){var o={},s=Q(n.objectStoreNames,0);return s.forEach(function(l){for(var d=i.objectStore(l),h=d.keyPath,p=Ma(ws(h),h||"",!0,!1,!!d.autoIncrement,h&&typeof h!="string",!0),y=[],E=0;E<d.indexNames.length;++E){var _=d.index(d.indexNames[E]);h=_.keyPath;var O=Ma(_.name,h,!!_.unique,!!_.multiEntry,!1,h&&typeof h!="string",!1);y.push(O)}o[l]=Na(l,p,y)}),o}function hc(t,n,i){t.verno=n.version/10;var o=t._dbSchema=xi(t,n,i);t._storeNames=Q(n.objectStoreNames,0),wi(t,[t._allTables],g(o),o)}function vc(t,n){var i=xi(t,t.idbdb,n),o=La(i,t._dbSchema);return!(o.add.length||o.change.some(function(s){return s.add.length||s.change.length}))}function Ti(t,n,i){for(var o=i.db.objectStoreNames,s=0;s<o.length;++s){var l=o[s],d=i.objectStore(l);t._hasGetAll="getAll"in d;for(var h=0;h<d.indexNames.length;++h){var p=d.indexNames[h],y=d.index(p).keyPath,E=typeof y=="string"?y:"["+Q(y).join("+")+"]";if(n[l]){var _=n[l].idxByName[E];_&&(_.name=p,delete n[l].idxByName[E],n[l].idxByName[p]=_)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Ts(t){return t.split(",").map(function(n,i){var o,s=n.split(":"),l=(o=s[1])===null||o===void 0?void 0:o.trim();n=s[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return Ma(d,h||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),m(h),i===0,l)})}var pc=(function(){function t(){}return t.prototype._createTableSchema=function(n,i,o){return Na(n,i,o)},t.prototype._parseIndexSyntax=function(n){return Ts(n)},t.prototype._parseStoresSpec=function(n,i){var o=this;g(n).forEach(function(s){if(n[s]!==null){var l=o._parseIndexSyntax(n[s]),d=l.shift();if(!d)throw new X.Schema("Invalid schema for table "+s+": "+n[s]);if(d.unique=!0,d.multi)throw new X.Schema("Primary key cannot be multiEntry*");l.forEach(function(p){if(p.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")});var h=o._createTableSchema(s,d,l);i[s]=h}})},t.prototype.stores=function(n){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?k(this._cfg.storesSource,n):n;var o=i._versions,s={},l={};return o.forEach(function(d){k(s,d._cfg.storesSource),l=d._cfg.dbschema={},d._parseStoresSpec(s,l)}),i._dbSchema=l,Ka(i,[i._allTables,i,i.Transaction.prototype]),wi(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],g(l),l),i._storeNames=g(l),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=ma(this._cfg.contentUpgrade||Ee,n),this},t})();function yc(t){return Sr(pc.prototype,function(i){this.db=t,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ja(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new Yt(vi,{addons:[],indexedDB:t,IDBKeyRange:n}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function za(t){return t&&typeof t.databases=="function"}function mc(t){var n=t.indexedDB,i=t.IDBKeyRange;return za(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(s){return s.name}).filter(function(s){return s!==vi})}):ja(n,i).toCollection().primaryKeys()}function gc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!za(i)&&n!==vi&&ja(i,o).put({name:n}).catch(Ee)}function _c(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!za(i)&&n!==vi&&ja(i,o).delete(n).catch(Ee)}function Ua(t){return an(function(){return G.letThrough=!0,t()})}function bc(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var Va;function Wa(t){return!("from"in t)}var Ze=function(t,n){if(this)k(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var i=new Ze;return t&&"d"in t&&k(i,t),i}};T(Ze.prototype,(Va={add:function(t){return Mr(this,t),this},addKey:function(t){return Pr(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return Pr(n,i,i)}),this},hasKey:function(t){var n=Di(this).next(t).value;return n&&he(n.from,t)<=0&&he(n.to,t)>=0}},Va[me]=function(){return Di(this)},Va));function Pr(t,n,i){var o=he(n,i);if(!isNaN(o)){if(o>0)throw RangeError();if(Wa(t))return k(t,{from:n,to:i,d:1});var s=t.l,l=t.r;if(he(i,t.from)<0)return s?Pr(s,n,i):t.l={from:n,to:i,d:1,l:null,r:null},ks(t);if(he(n,t.to)>0)return l?Pr(l,n,i):t.r={from:n,to:i,d:1,l:null,r:null},ks(t);he(n,t.from)<0&&(t.from=n,t.l=null,t.d=l?l.d+1:1),he(i,t.to)>0&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;s&&!t.l&&Mr(t,s),l&&d&&Mr(t,l)}}function Mr(t,n){function i(o,s){var l=s.from,d=s.to,h=s.l,p=s.r;Pr(o,l,d),h&&i(o,h),p&&i(o,p)}Wa(n)||i(t,n)}function Ds(t,n){var i=Di(n),o=i.next();if(o.done)return!1;for(var s=o.value,l=Di(t),d=l.next(s.from),h=d.value;!o.done&&!d.done;){if(he(h.from,s.to)<=0&&he(h.to,s.from)>=0)return!0;he(s.from,h.from)<0?s=(o=i.next(h.from)).value:h=(d=l.next(s.from)).value}return!1}function Di(t){var n=Wa(t)?null:{s:0,n:t};return{next:function(i){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&he(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||he(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function ks(t){var n,i,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),s=o>1?"r":o<-1?"l":"";if(s){var l=s==="r"?"l":"r",d=c({},t),h=t[s];t.from=h.from,t.to=h.to,t[s]=h[s],d[s]=h[l],t[l]=d,d.d=As(d)}t.d=As(t)}function As(t){var n=t.r,i=t.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function ki(t,n){return g(n).forEach(function(i){t[i]?Mr(t[i],n[i]):t[i]=De(n[i])}),t}function Ha(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&Ds(n[i],t[i])})}var Kn={},Ga={},Ya=!1;function Ai(t,n){ki(Ga,t),Ya||(Ya=!0,setTimeout(function(){Ya=!1;var i=Ga;Ga={},$a(i,!1)},0))}function $a(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var o=0,s=Object.values(Kn);o<s.length;o++){var l=s[o];Ss(l,t,i,n)}else for(var d in t){var h=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(h){var p=h[1],y=h[2],l=Kn["idb://".concat(p,"/").concat(y)];l&&Ss(l,t,i,n)}}i.forEach(function(E){return E()})}function Ss(t,n,i,o){for(var s=[],l=0,d=Object.entries(t.queries.query);l<d.length;l++){for(var h=d[l],p=h[0],y=h[1],E=[],_=0,O=y;_<O.length;_++){var L=O[_];Ha(n,L.obsSet)?L.subscribers.forEach(function(I){return i.add(I)}):o&&E.push(L)}o&&s.push([p,E])}if(o)for(var w=0,D=s;w<D.length;w++){var A=D[w],p=A[0],E=A[1];t.queries.query[p]=E}}function wc(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?Ne(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,s=Math.round(t.verno*10),l=!1;function d(){if(n.openCanceller!==o)throw new X.DatabaseClosed("db.open() was cancelled")}var h=n.dbReadyResolve,p=null,y=!1,E=function(){return new U(function(_,O){if(d(),!i)throw new X.MissingAPI;var L=t.name,w=n.autoSchema||!s?i.open(L):i.open(L,s);if(!w)throw new X.MissingAPI;w.onerror=Nt(O),w.onblocked=Oe(t._fireOnBlocked),w.onupgradeneeded=Oe(function(D){if(p=w.transaction,n.autoSchema&&!t._options.allowEmptyDB){w.onerror=Or,p.abort(),w.result.close();var A=i.deleteDatabase(L);A.onsuccess=A.onerror=Oe(function(){O(new X.NoSuchDatabase("Database ".concat(L," doesnt exist")))})}else{p.onerror=Nt(O);var I=D.oldVersion>Math.pow(2,62)?0:D.oldVersion;y=I<1,t.idbdb=w.result,l&&lc(t,p),uc(t,I/10,p,O)}},O),w.onsuccess=Oe(function(){p=null;var D=t.idbdb=w.result,A=Q(D.objectStoreNames);if(A.length>0)try{var I=D.transaction(tc(A),"readonly");if(n.autoSchema)hc(t,D,I);else if(Ti(t,t._dbSchema,I),!vc(t,I)&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),D.close(),s=D.version+1,l=!0,_(E());bi(t,I)}catch{}Xn.push(t),D.onversionchange=Oe(function(R){n.vcFired=!0,t.on("versionchange").fire(R)}),D.onclose=Oe(function(){t.close({disableAutoOpen:!1})}),y&&gc(t._deps,L),_()},O)}).catch(function(_){switch(_?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),E();break;case"VersionError":if(s>0)return s=0,E();break}return U.reject(_)})};return U.race([o,(typeof navigator>"u"?U.resolve():bc()).then(E)]).then(function(){return d(),n.onReadyBeingFired=[],U.resolve(Ua(function(){return t.on.ready.fire(t.vip)})).then(function _(){if(n.onReadyBeingFired.length>0){var O=n.onReadyBeingFired.reduce(ma,Ee);return n.onReadyBeingFired=[],U.resolve(Ua(function(){return O(t.vip)})).then(_)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(_){n.dbOpenError=_;try{p&&p.abort()}catch{}return o===n.openCanceller&&t._close(),Ne(_)}).finally(function(){n.openComplete=!0,h()}).then(function(){if(y){var _={};t.tables.forEach(function(O){O.schema.indexes.forEach(function(L){L.name&&(_["idb://".concat(t.name,"/").concat(O.name,"/").concat(L.name)]=new Ze(-1/0,[[[]]]))}),_["idb://".concat(t.name,"/").concat(O.name,"/")]=_["idb://".concat(t.name,"/").concat(O.name,"/:dels")]=new Ze(-1/0,[[[]]])}),ln(Ir).fire(_),$a(_,!0)}return t})}function qa(t){var n=function(d){return t.next(d)},i=function(d){return t.throw(d)},o=l(n),s=l(i);function l(d){return function(h){var p=d(h),y=p.value;return p.done?y:!y||typeof y.then!="function"?m(y)?Promise.all(y).then(o,s):o(y):y.then(o,s)}}return l(n)()}function Ec(t,n,i){var o=arguments.length;if(o<2)throw new X.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];i=s.pop();var l=je(s);return[t,l,i]}function Os(t,n,i,o,s){return U.resolve().then(function(){var l=G.transless||G,d=t._createTransaction(n,i,t._dbSchema,o);d.explicit=!0;var h={trans:d,transless:l};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(_){return _.name===ya.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Os(t,n,i,null,s)})):Ne(_)}var p=Pe(s);p&&Qn();var y,E=U.follow(function(){if(y=s.call(d,d),y)if(p){var _=on.bind(null,null);y.then(_,_)}else typeof y.next=="function"&&typeof y.throw=="function"&&(y=qa(y))},h);return(y&&typeof y.then=="function"?U.resolve(y).then(function(_){return d.active?_:Ne(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return y})).then(function(_){return o&&d._resolve(),d._completion.then(function(){return _})}).catch(function(_){return d._reject(_),Ne(_)})})}function Si(t,n,i){for(var o=m(t)?t.slice():[t],s=0;s<i;++s)o.push(n);return o}function xc(t){return c(c({},t),{table:function(n){var i=t.table(n),o=i.schema,s={},l=[];function d(D,A,I){var R=Rr(D),P=s[R]=s[R]||[],M=D==null?0:typeof D=="string"?1:D.length,C=A>0,j=c(c({},I),{name:C?"".concat(R,"(virtual-from:").concat(I.name,")"):I.name,lowLevelIndex:I,isVirtual:C,keyTail:A,keyLength:M,extractKey:Fa(D),unique:!C&&I.unique});if(P.push(j),j.isPrimaryKey||l.push(j),M>1){var W=M===2?D[0]:D.slice(0,M-1);d(W,A+1,I)}return P.sort(function(z,J){return z.keyTail-J.keyTail}),j}var h=d(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[h];for(var p=0,y=o.indexes;p<y.length;p++){var E=y[p];d(E.keyPath,0,E)}function _(D){var A=s[Rr(D)];return A&&A[0]}function O(D,A){return{type:D.type===1?2:D.type,lower:Si(D.lower,D.lowerOpen?t.MAX_KEY:t.MIN_KEY,A),lowerOpen:!0,upper:Si(D.upper,D.upperOpen?t.MIN_KEY:t.MAX_KEY,A),upperOpen:!0}}function L(D){var A=D.query.index;return A.isVirtual?c(c({},D),{query:{index:A.lowLevelIndex,range:O(D.query.range,A.keyTail)}}):D}var w=c(c({},i),{schema:c(c({},o),{primaryKey:h,indexes:l,getIndexByKeyPath:_}),count:function(D){return i.count(L(D))},query:function(D){return i.query(L(D))},openCursor:function(D){var A=D.query.index,I=A.keyTail,R=A.isVirtual,P=A.keyLength;if(!R)return i.openCursor(D);function M(C){function j(z){z!=null?C.continue(Si(z,D.reverse?t.MAX_KEY:t.MIN_KEY,I)):D.unique?C.continue(C.key.slice(0,P).concat(D.reverse?t.MIN_KEY:t.MAX_KEY,I)):C.continue()}var W=Object.create(C,{continue:{value:j},continuePrimaryKey:{value:function(z,J){C.continuePrimaryKey(Si(z,t.MAX_KEY,I),J)}},primaryKey:{get:function(){return C.primaryKey}},key:{get:function(){var z=C.key;return P===1?z[0]:z.slice(0,P)}},value:{get:function(){return C.value}}});return W}return i.openCursor(L(D)).then(function(C){return C&&M(C)})}});return w}})}var Tc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:xc};function Za(t,n,i,o){return i=i||{},o=o||"",g(t).forEach(function(s){if(!b(n,s))i[o+s]=void 0;else{var l=t[s],d=n[s];if(typeof l=="object"&&typeof d=="object"&&l&&d){var h=de(l),p=de(d);h!==p?i[o+s]=n[s]:h==="Object"?Za(l,d,i,o+s+"."):l!==d&&(i[o+s]=n[s])}else l!==d&&(i[o+s]=n[s])}}),g(n).forEach(function(s){b(t,s)||(i[o+s]=n[s])}),i}function Qa(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var Dc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return c(c({},t),{table:function(n){var i=t.table(n),o=i.schema.primaryKey,s=c(c({},i),{mutate:function(l){var d=G.trans,h=d.table(n).hook,p=h.deleting,y=h.creating,E=h.updating;switch(l.type){case"add":if(y.fire===Ee)break;return d._promise("readwrite",function(){return _(l)},!0);case"put":if(y.fire===Ee&&E.fire===Ee)break;return d._promise("readwrite",function(){return _(l)},!0);case"delete":if(p.fire===Ee)break;return d._promise("readwrite",function(){return _(l)},!0);case"deleteRange":if(p.fire===Ee)break;return d._promise("readwrite",function(){return O(l)},!0)}return i.mutate(l);function _(w){var D=G.trans,A=w.keys||Qa(o,w);if(!A)throw new Error("Keys missing");return w=w.type==="add"||w.type==="put"?c(c({},w),{keys:A}):c({},w),w.type!=="delete"&&(w.values=f([],w.values)),w.keys&&(w.keys=f([],w.keys)),kc(i,w,A).then(function(I){var R=A.map(function(P,M){var C=I[M],j={onerror:null,onsuccess:null};if(w.type==="delete")p.fire.call(j,P,C,D);else if(w.type==="add"||C===void 0){var W=y.fire.call(j,P,w.values[M],D);P==null&&W!=null&&(P=W,w.keys[M]=P,o.outbound||ie(w.values[M],o.keyPath,P))}else{var z=Za(C,w.values[M]),J=E.fire.call(j,z,P,C,D);if(J){var oe=w.values[M];Object.keys(J).forEach(function(H){b(oe,H)?oe[H]=J[H]:ie(oe,H,J[H])})}}return j});return i.mutate(w).then(function(P){for(var M=P.failures,C=P.results,j=P.numFailures,W=P.lastResult,z=0;z<A.length;++z){var J=C?C[z]:A[z],oe=R[z];J==null?oe.onerror&&oe.onerror(M[z]):oe.onsuccess&&oe.onsuccess(w.type==="put"&&I[z]?w.values[z]:J)}return{failures:M,results:C,numFailures:j,lastResult:W}}).catch(function(P){return R.forEach(function(M){return M.onerror&&M.onerror(P)}),Promise.reject(P)})})}function O(w){return L(w.trans,w.range,1e4)}function L(w,D,A){return i.query({trans:w,values:!1,query:{index:o,range:D},limit:A}).then(function(I){var R=I.result;return _({type:"delete",keys:R,trans:w}).then(function(P){return P.numFailures>0?Promise.reject(P.failures[0]):R.length<A?{failures:[],numFailures:0,lastResult:void 0}:L(w,c(c({},D),{lower:R[R.length-1],lowerOpen:!0}),A)})})}}});return s}})}};function kc(t,n,i){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:i,cache:"immutable"})}function Is(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var o=[],s=0,l=0;s<n.keys.length&&l<t.length;++s)he(n.keys[s],t[l])===0&&(o.push(i?He(n.values[s]):n.values[s]),++l);return o.length===t.length?o:null}catch{return null}}var Ac={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return c(c({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var s=Is(o.keys,o.trans._cache,o.cache==="clone");return s?U.resolve(s):i.getMany(o).then(function(l){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?He(l):l},l})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function Cs(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function Rs(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Sc={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new Ze(t.MIN_KEY,t.MAX_KEY);return c(c({},t),{transaction:function(o,s,l){if(G.subscr&&s!=="readonly")throw new X.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(G.querier));return t.transaction(o,s,l)},table:function(o){var s=t.table(o),l=s.schema,d=l.primaryKey,h=l.indexes,p=d.extractKey,y=d.outbound,E=d.autoIncrement&&h.filter(function(w){return w.compound&&w.keyPath.includes(d.keyPath)}),_=c(c({},s),{mutate:function(w){var D,A,I=w.trans,R=w.mutatedParts||(w.mutatedParts={}),P=function(ee){var ve="idb://".concat(n,"/").concat(o,"/").concat(ee);return R[ve]||(R[ve]=new Ze)},M=P(""),C=P(":dels"),j=w.type,W=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[Qa(d,w).filter(function(ee){return ee}),w.values]:[],z=W[0],J=W[1],oe=w.trans._cache;if(m(z)){M.addKeys(z);var H=j==="delete"||z.length===J.length?Is(z,oe):null;H||C.addKeys(z),(H||J)&&Oc(P,l,H,J)}else if(z){var ae={from:(D=z.lower)!==null&&D!==void 0?D:t.MIN_KEY,to:(A=z.upper)!==null&&A!==void 0?A:t.MAX_KEY};C.add(ae),M.add(ae)}else M.add(i),C.add(i),l.indexes.forEach(function(ee){return P(ee.name).add(i)});return s.mutate(w).then(function(ee){return z&&(w.type==="add"||w.type==="put")&&(M.addKeys(ee.results),E&&E.forEach(function(ve){for(var q=w.values.map(function(st){return ve.extractKey(st)}),Me=ve.keyPath.findIndex(function(st){return st===d.keyPath}),Qe=0,Ft=ee.results.length;Qe<Ft;++Qe)q[Qe][Me]=ee.results[Qe];P(ve.name).addKeys(q)})),I.mutatedParts=ki(I.mutatedParts||{},R),ee})}}),O=function(w){var D,A,I=w.query,R=I.index,P=I.range;return[R,new Ze((D=P.lower)!==null&&D!==void 0?D:t.MIN_KEY,(A=P.upper)!==null&&A!==void 0?A:t.MAX_KEY)]},L={get:function(w){return[d,new Ze(w.key)]},getMany:function(w){return[d,new Ze().addKeys(w.keys)]},count:O,query:O,openCursor:O};return g(L).forEach(function(w){_[w]=function(D){var A=G.subscr,I=!!A,R=Cs(G,s)&&Rs(w,D),P=R?D.obsSet={}:A;if(I){var M=function(H){var ae="idb://".concat(n,"/").concat(o,"/").concat(H);return P[ae]||(P[ae]=new Ze)},C=M(""),j=M(":dels"),W=L[w](D),z=W[0],J=W[1];if(w==="query"&&z.isPrimaryKey&&!D.values?j.add(J):M(z.name||"").add(J),!z.isPrimaryKey)if(w==="count")j.add(i);else{var oe=w==="query"&&y&&D.values&&s.query(c(c({},D),{values:!1}));return s[w].apply(this,arguments).then(function(H){if(w==="query"){if(y&&D.values)return oe.then(function(q){var Me=q.result;return C.addKeys(Me),H});var ae=D.values?H.result.map(p):H.result;D.values?C.addKeys(ae):j.addKeys(ae)}else if(w==="openCursor"){var ee=H,ve=D.values;return ee&&Object.create(ee,{key:{get:function(){return j.addKey(ee.primaryKey),ee.key}},primaryKey:{get:function(){var q=ee.primaryKey;return j.addKey(q),q}},value:{get:function(){return ve&&C.addKey(ee.primaryKey),ee.value}}})}return H})}}return s[w].apply(this,arguments)}}),_}})}};function Oc(t,n,i,o){function s(l){var d=t(l.name||"");function h(y){return y!=null?l.extractKey(y):null}var p=function(y){return l.multiEntry&&m(y)?y.forEach(function(E){return d.addKey(E)}):d.addKey(y)};(i||o).forEach(function(y,E){var _=i&&h(i[E]),O=o&&h(o[E]);he(_,O)!==0&&(_!=null&&p(_),O!=null&&p(O))})}n.indexes.forEach(s)}function Ps(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(i.numFailures===o)return null;var s=c({},n);return m(s.keys)&&(s.keys=s.keys.filter(function(l,d){return!(d in i.failures)})),"values"in s&&m(s.values)&&(s.values=s.values.filter(function(l,d){return!(d in i.failures)})),s}function Ic(t,n){return n.lower===void 0?!0:n.lowerOpen?he(t,n.lower)>0:he(t,n.lower)>=0}function Cc(t,n){return n.upper===void 0?!0:n.upperOpen?he(t,n.upper)<0:he(t,n.upper)<=0}function Xa(t,n){return Ic(t,n)&&Cc(t,n)}function Ms(t,n,i,o,s,l){if(!i||i.length===0)return t;var d=n.query.index,h=d.multiEntry,p=n.query.range,y=o.schema.primaryKey,E=y.extractKey,_=d.extractKey,O=(d.lowLevelIndex||d).extractKey,L=i.reduce(function(w,D){var A=w,I=[];if(D.type==="add"||D.type==="put")for(var R=new Ze,P=D.values.length-1;P>=0;--P){var M=D.values[P],C=E(M);if(!R.hasKey(C)){var j=_(M);(h&&m(j)?j.some(function(H){return Xa(H,p)}):Xa(j,p))&&(R.addKey(C),I.push(M))}}switch(D.type){case"add":{var W=new Ze().addKeys(n.values?w.map(function(H){return E(H)}):w);A=w.concat(n.values?I.filter(function(H){var ae=E(H);return W.hasKey(ae)?!1:(W.addKey(ae),!0)}):I.map(function(H){return E(H)}).filter(function(H){return W.hasKey(H)?!1:(W.addKey(H),!0)}));break}case"put":{var z=new Ze().addKeys(D.values.map(function(H){return E(H)}));A=w.filter(function(H){return!z.hasKey(n.values?E(H):H)}).concat(n.values?I:I.map(function(H){return E(H)}));break}case"delete":var J=new Ze().addKeys(D.keys);A=w.filter(function(H){return!J.hasKey(n.values?E(H):H)});break;case"deleteRange":var oe=D.range;A=w.filter(function(H){return!Xa(E(H),oe)});break}return A},t);return L===t?t:(L.sort(function(w,D){return he(O(w),O(D))||he(E(w),E(D))}),n.limit&&n.limit<1/0&&(L.length>n.limit?L.length=n.limit:t.length===n.limit&&L.length<n.limit&&(s.dirty=!0)),l?Object.freeze(L):L)}function Ns(t,n){return he(t.lower,n.lower)===0&&he(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function Rc(t,n,i,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var s=he(t,n);if(s===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return s}function Pc(t,n,i,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var s=he(t,n);if(s===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return s}function Mc(t,n){return Rc(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&Pc(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function Nc(t,n,i,o){var s=Kn["idb://".concat(t,"/").concat(n)];if(!s)return[];var l=s.queries[i];if(!l)return[null,!1,s,null];var d=o.query?o.query.index.name:null,h=l[d||""];if(!h)return[null,!1,s,null];switch(i){case"query":var p=h.find(function(_){return _.req.limit===o.limit&&_.req.values===o.values&&Ns(_.req.query.range,o.query.range)});if(p)return[p,!0,s,h];var y=h.find(function(_){var O="limit"in _.req?_.req.limit:1/0;return O>=o.limit&&(o.values?_.req.values:!0)&&Mc(_.req.query.range,o.query.range)});return[y,!1,s,h];case"count":var E=h.find(function(_){return Ns(_.req.query.range,o.query.range)});return[E,!!E,s,h]}}function Fc(t,n,i,o){t.subscribers.add(i),o.addEventListener("abort",function(){t.subscribers.delete(i),t.subscribers.size===0&&Kc(t,n)})}function Kc(t,n){setTimeout(function(){t.subscribers.size===0&&ge(n,t)},3e3)}var Lc={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,i=c(c({},t),{transaction:function(o,s,l){var d=t.transaction(o,s,l);if(s==="readwrite"){var h=new AbortController,p=h.signal,y=function(E){return function(){if(h.abort(),s==="readwrite"){for(var _=new Set,O=0,L=o;O<L.length;O++){var w=L[O],D=Kn["idb://".concat(n,"/").concat(w)];if(D){var A=t.table(w),I=D.optimisticOps.filter(function(ve){return ve.trans===d});if(d._explicit&&E&&d.mutatedParts)for(var R=0,P=Object.values(D.queries.query);R<P.length;R++)for(var M=P[R],C=0,j=M.slice();C<j.length;C++){var W=j[C];Ha(W.obsSet,d.mutatedParts)&&(ge(M,W),W.subscribers.forEach(function(ve){return _.add(ve)}))}else if(I.length>0){D.optimisticOps=D.optimisticOps.filter(function(ve){return ve.trans!==d});for(var z=0,J=Object.values(D.queries.query);z<J.length;z++)for(var M=J[z],oe=0,H=M.slice();oe<H.length;oe++){var W=H[oe];if(W.res!=null&&d.mutatedParts)if(E&&!W.dirty){var ae=Object.isFrozen(W.res),ee=Ms(W.res,W.req,I,A,W,ae);W.dirty?(ge(M,W),W.subscribers.forEach(function(Me){return _.add(Me)})):ee!==W.res&&(W.res=ee,W.promise=U.resolve({result:ee}))}else W.dirty&&ge(M,W),W.subscribers.forEach(function(Me){return _.add(Me)})}}}}_.forEach(function(ve){return ve()})}}};d.addEventListener("abort",y(!1),{signal:p}),d.addEventListener("error",y(!1),{signal:p}),d.addEventListener("complete",y(!0),{signal:p})}return d},table:function(o){var s=t.table(o),l=s.schema.primaryKey,d=c(c({},s),{mutate:function(h){var p=G.trans;if(l.outbound||p.db._options.cache==="disabled"||p.explicit||p.idbtrans.mode!=="readwrite")return s.mutate(h);var y=Kn["idb://".concat(n,"/").concat(o)];if(!y)return s.mutate(h);var E=s.mutate(h);return(h.type==="add"||h.type==="put")&&(h.values.length>=50||Qa(l,h).some(function(_){return _==null}))?E.then(function(_){var O=c(c({},h),{values:h.values.map(function(w,D){var A;if(_.failures[D])return w;var I=!((A=l.keyPath)===null||A===void 0)&&A.includes(".")?He(w):c({},w);return ie(I,l.keyPath,_.results[D]),I})}),L=Ps(y,O,_);y.optimisticOps.push(L),queueMicrotask(function(){return h.mutatedParts&&Ai(h.mutatedParts)})}):(y.optimisticOps.push(h),h.mutatedParts&&Ai(h.mutatedParts),E.then(function(_){if(_.numFailures>0){ge(y.optimisticOps,h);var O=Ps(y,h,_);O&&y.optimisticOps.push(O),h.mutatedParts&&Ai(h.mutatedParts)}}),E.catch(function(){ge(y.optimisticOps,h),h.mutatedParts&&Ai(h.mutatedParts)})),E},query:function(h){var p;if(!Cs(G,s)||!Rs("query",h))return s.query(h);var y=((p=G.trans)===null||p===void 0?void 0:p.db._options.cache)==="immutable",E=G,_=E.requery,O=E.signal,L=Nc(n,o,"query",h),w=L[0],D=L[1],A=L[2],I=L[3];if(w&&D)w.obsSet=h.obsSet;else{var R=s.query(h).then(function(P){var M=P.result;if(w&&(w.res=M),y){for(var C=0,j=M.length;C<j;++C)Object.freeze(M[C]);Object.freeze(M)}else P.result=He(M);return P}).catch(function(P){return I&&w&&ge(I,w),Promise.reject(P)});w={obsSet:h.obsSet,promise:R,subscribers:new Set,type:"query",req:h,dirty:!1},I?I.push(w):(I=[w],A||(A=Kn["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),A.queries.query[h.query.index.name||""]=I)}return Fc(w,I,_,O),w.promise.then(function(P){return{result:Ms(P.result,h,A?.optimisticOps,s,w,y)}})}});return d}});return i}};function Oi(t,n){return new Proxy(t,{get:function(i,o,s){return o==="db"?n:Reflect.get(i,o,s)}})}var Yt=(function(){function t(n,i){var o=this;this._middlewares={},this.verno=0;var s=t.dependencies;this._options=i=c({addons:t.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var l=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ee,dbReadyPromise:null,cancelOpen:Ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};d.dbReadyPromise=new U(function(p){d.dbReadyResolve=p}),d.openCanceller=new U(function(p,y){d.cancelOpen=y}),this._state=d,this.name=n,this.on=Ar(this,"populate","blocked","versionchange","close",{ready:[ma,Ee]}),this.once=function(p,y){var E=function(){for(var _=[],O=0;O<arguments.length;O++)_[O]=arguments[O];o.on(p).unsubscribe(E),y.apply(o,_)};return o.on(p,E)},this.on.ready.subscribe=re(this.on.ready.subscribe,function(p){return function(y,E){t.vip(function(){var _=o._state;if(_.openComplete)_.dbOpenError||U.resolve().then(y),E&&p(y);else if(_.onReadyBeingFired)_.onReadyBeingFired.push(y),E&&p(y);else{p(y);var O=o;E||p(function L(){O.on.ready.unsubscribe(y),O.on.ready.unsubscribe(L)})}})}}),this.Collection=Gl(this),this.Table=Vl(this),this.Transaction=ec(this),this.Version=yc(this),this.WhereClause=Xl(this),this.on("versionchange",function(p){p.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=Cr(i.IDBKeyRange),this._createTransaction=function(p,y,E,_){return new o.Transaction(p,y,E,o._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(p){o.on("blocked").fire(p),Xn.filter(function(y){return y.name===o.name&&y!==o&&!y._state.vcFired}).map(function(y){return y.on("versionchange").fire(p)})},this.use(Ac),this.use(Lc),this.use(Sc),this.use(Tc),this.use(Dc);var h=new Proxy(this,{get:function(p,y,E){if(y==="_vip")return!0;if(y==="table")return function(O){return Oi(o.table(O),h)};var _=Reflect.get(p,y,E);return _ instanceof ps?Oi(_,h):y==="tables"?_.map(function(O){return Oi(O,h)}):y==="_createTransaction"?function(){var O=_.apply(this,arguments);return Oi(O,h)}:_}});this.vip=h,l.forEach(function(p){return p(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new X.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,o=i.filter(function(s){return s._cfg.version===n})[0];return o||(o=new this.Version(n),i.push(o),i.sort(sc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?n():new U(function(o,s){if(i._state.openComplete)return s(new X.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){s(new X.DatabaseClosed);return}i.open().catch(Ee)}i._state.dbReadyPromise.then(o,s)}).then(n)},t.prototype.use=function(n){var i=n.stack,o=n.create,s=n.level,l=n.name;l&&this.unuse({stack:i,name:l});var d=this._middlewares[i]||(this._middlewares[i]=[]);return d.push({stack:i,create:o,level:s??10,name:l}),d.sort(function(h,p){return h.level-p.level}),this},t.prototype.unuse=function(n){var i=n.stack,o=n.name,s=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(l){return s?l.create!==s:o?l.name!==o:!1})),this},t.prototype.open=function(){var n=this;return Mn(rn,function(){return wc(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=Xn.indexOf(this);if(i>=0&&Xn.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new U(function(o){n.dbReadyResolve=o}),n.openCanceller=new U(function(o,s){n.cancelOpen=s}))},t.prototype.close=function(n){var i=n===void 0?{disableAutoOpen:!0}:n,o=i.disableAutoOpen,s=this._state;o?(s.isBeingOpened&&s.cancelOpen(new X.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new X.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},t.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",s=this._state;return new U(function(l,d){var h=function(){i.close(n);var p=i._deps.indexedDB.deleteDatabase(i.name);p.onsuccess=Oe(function(){_c(i._deps,i.name),l()}),p.onerror=Nt(d),p.onblocked=i._fireOnBlocked};if(o)throw new X.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(h):h()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return g(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=Ec.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,i,o){var s=this,l=G.trans;(!l||l.db!==this||n.indexOf("!")!==-1)&&(l=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var h,p;try{if(p=i.map(function(E){var _=E instanceof s.Table?E.name:E;if(typeof _!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),n=="r"||n===Oa)h=Oa;else if(n=="rw"||n==Ia)h=Ia;else throw new X.InvalidArgument("Invalid transaction mode: "+n);if(l){if(l.mode===Oa&&h===Ia)if(d)l=null;else throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l&&p.forEach(function(E){if(l&&l.storeNames.indexOf(E)===-1)if(d)l=null;else throw new X.SubTransaction("Table "+E+" not included in parent transaction.")}),d&&l&&!l.active&&(l=null)}}catch(E){return l?l._promise(null,function(_,O){O(E)}):Ne(E)}var y=Os.bind(null,this,h,p,l,o);return l?l._promise(h,y,"lock"):G.trans?Mn(G.transless,function(){return s._whenReady(y)}):this._whenReady(y)},t.prototype.table=function(n){if(!b(this._allTables,n))throw new X.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),Bc=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jc=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,i,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:i,complete:o}:n)},t.prototype[Bc]=function(){return this},t})(),Ii;try{Ii={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{Ii={indexedDB:null,IDBKeyRange:null}}function Fs(t){var n=!1,i,o=new jc(function(s){var l=Pe(t);function d(I){var R=qn();try{l&&Qn();var P=an(t,I);return l&&(P=P.finally(on)),P}finally{R&&Zn()}}var h=!1,p,y={},E={},_={get closed(){return h},unsubscribe:function(){h||(h=!0,p&&p.abort(),O&&ln.storagemutated.unsubscribe(D))}};s.start&&s.start(_);var O=!1,L=function(){return ka(A)};function w(){return Ha(E,y)}var D=function(I){ki(y,I),w()&&L()},A=function(){if(!(h||!Ii.indexedDB)){y={};var I={};p&&p.abort(),p=new AbortController;var R={subscr:I,signal:p.signal,requery:L,querier:t,trans:null},P=d(R);Promise.resolve(P).then(function(M){n=!0,i=M,!(h||R.signal.aborted)&&(y={},E=I,!Ht(E)&&!O&&(ln(Ir,D),O=!0),ka(function(){return!h&&s.next&&s.next(M)}))},function(M){n=!1,["DatabaseClosedError","AbortError"].includes(M?.name)||h||ka(function(){h||s.error&&s.error(M)})})}};return setTimeout(L,0),_});return o.hasValue=function(){return n},o.getValue=function(){return i},o}var Ln=Yt;T(Ln,c(c({},ai),{delete:function(t){var n=new Ln(t,{addons:[]});return n.delete()},exists:function(t){return new Ln(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return mc(Ln.dependencies).then(t)}catch{return Ne(new X.MissingAPI)}},defineClass:function(){function t(n){k(this,n)}return t},ignoreTransaction:function(t){return G.trans?Mn(G.transless,t):t()},vip:Ua,async:function(t){return function(){try{var n=qa(t.apply(this,arguments));return!n||typeof n.then!="function"?U.resolve(n):n}catch(i){return Ne(i)}}},spawn:function(t,n,i){try{var o=qa(t.apply(i,n||[]));return!o||typeof o.then!="function"?U.resolve(o):o}catch(s){return Ne(s)}},currentTransaction:{get:function(){return G.trans||null}},waitFor:function(t,n){var i=U.resolve(typeof t=="function"?Ln.ignoreTransaction(t):t).timeout(n||6e4);return G.trans?G.trans.waitFor(i):i},Promise:U,debug:{get:function(){return Mt},set:function(t){Jo(t)}},derive:N,extend:k,props:T,override:re,Events:Ar,on:ln,liveQuery:Fs,extendObservabilitySet:ki,getByKeyPath:le,setByKeyPath:ie,delByKeyPath:fe,shallowClone:pe,deepClone:He,getObjectDiff:Za,cmp:he,asap:_e,minKey:Sa,addons:[],connections:Xn,errnames:ya,dependencies:Ii,cache:Kn,semVer:us,version:us.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,i*2)})})),Ln.maxKey=Cr(Ln.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ln(Ir,function(t){if(!cn){var n;n=new CustomEvent(Pa,{detail:t}),cn=!0,dispatchEvent(n),cn=!1}}),addEventListener(Pa,function(t){var n=t.detail;cn||Ja(n)}));function Ja(t){var n=cn;try{cn=!0,ln.storagemutated.fire(t),$a(t,!0)}finally{cn=n}}var cn=!1,fn,eo=function(){};typeof BroadcastChannel<"u"&&(eo=function(){fn=new BroadcastChannel(Pa),fn.onmessage=function(t){return t.data&&Ja(t.data)}},eo(),typeof fn.unref=="function"&&fn.unref(),ln(Ir,function(t){cn||fn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Yt.disableBfCache&&t.persisted){Mt&&console.debug("Dexie: handling persisted pagehide"),fn?.close();for(var n=0,i=Xn;n<i.length;n++){var o=i[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!Yt.disableBfCache&&t.persisted&&(Mt&&console.debug("Dexie: handling persisted pageshow"),eo(),Ja({all:new Ze(-1/0,[[]])}))}));function zc(t){return new kr({add:t})}function Uc(t){return new kr({remove:t})}function Vc(t,n){return new kr({replacePrefix:[t,n]})}U.rejectionMapper=xl,Jo(Mt);var Wc=Object.freeze({__proto__:null,Dexie:Yt,liveQuery:Fs,Entity:fs,cmp:he,PropModification:kr,replacePrefix:Vc,add:zc,remove:Uc,default:Yt,RangeSet:Ze,mergeRanges:Mr,rangesOverlap:Ds});return c(Yt,Wc,{default:Yt}),Yt}))})(Fi)),Fi.exports}var Rd=Cd();const bo=Od(Rd),Qs=Symbol.for("Dexie"),Yi=globalThis[Qs]||(globalThis[Qs]=bo);if(bo.semVer!==Yi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${bo.semVer} and ${Yi.semVer}`);const{liveQuery:$i,mergeRanges:Dv,rangesOverlap:kv,RangeSet:Av,cmp:Sv,Entity:Ov,PropModification:Iv,replacePrefix:Cv,add:Rv,remove:Pv,DexieYProvider:Mv}=Yi,Ke=new Yi("TaskPlannerDB");Ke.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Ke.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));Ke.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));async function il(){return await Ke.lists.orderBy("order").toArray()}async function Pd(e){return await Ke.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function Md(){return(await Ke.tasks.where("status").equals("archived").toArray()).sort((r,a)=>{const u=r.archivedAt||0,c=a.archivedAt||0;return c!==u?c-u:(a.order||0)-(r.order||0)})}async function Nd(e,r){const a=await Ke.tasks.where("listId").equals(e).filter(g=>g.status!=="archived").sortBy("order"),c=(a.length>0?Math.max(...a.map(g=>g.order)):-1)+1,f=r===""?"":r.trim();return await Ke.tasks.add({text:f,listId:e,order:c,status:"unchecked"})}async function Fd(e,r){const a=r===""?"":r.trim();return await Ke.tasks.update(e,{text:a})}async function Xs(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const a={status:r};return r==="archived"?a.archivedAt=Date.now():r!=="archived"&&(a.archivedAt=null),await Ke.tasks.update(e,a)}async function Kd(e){const r=await Ke.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const a=await Ke.tasks.where("listId").equals(r.listId).filter(f=>f.status!=="archived"&&f.id!==e).sortBy("order"),c=(a.length>0?Math.max(...a.map(f=>f.order)):-1)+1;return await Ke.tasks.update(e,{status:"checked",order:c})}async function Ld(e,r){if(!r||r.length===0)return;const a=r.map(v=>v.id);if((await Ke.tasks.bulkGet(a)).filter(v=>!v||v.listId!==e).length>0)throw new Error(`Cannot update order: some tasks do not belong to list ${e}`);const f=r.map((v,g)=>({id:v.id,order:g}));await Ke.transaction("rw",Ke.tasks,async()=>{for(const v of f)await Ke.tasks.update(v.id,{order:v.order})})}async function Bd(e){await Ke.tasks.delete(e)}function Js(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,u)}return a}function qi(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Js(Object(a),!0).forEach(function(u){hr(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Js(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function rr(e){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rr(e)}function hr(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function jd(e,r){if(e==null)return{};var a={},u=Object.keys(e),c,f;for(f=0;f<u.length;f++)c=u[f],!(r.indexOf(c)>=0)&&(a[c]=e[c]);return a}function zd(e,r){if(e==null)return{};var a=jd(e,r),u,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)u=f[c],!(r.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(a[u]=e[u])}return a}function Ud(e,r){return Wd(e)||Gd(e,r)||Go(e,r)||$d()}function kt(e){return Vd(e)||Hd(e)||Go(e)||Yd()}function Vd(e){if(Array.isArray(e))return wo(e)}function Wd(e){if(Array.isArray(e))return e}function Hd(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gd(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var u=[],c=!0,f=!1,v,g;try{for(a=a.call(e);!(c=(v=a.next()).done)&&(u.push(v.value),!(r&&u.length===r));c=!0);}catch(m){f=!0,g=m}finally{try{!c&&a.return!=null&&a.return()}finally{if(f)throw g}}return u}}function Go(e,r){if(e){if(typeof e=="string")return wo(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return wo(e,r)}}function wo(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=e[a];return u}function Yd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ti(e,r){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Go(e))||r){a&&(e=a);var u=0,c=function(){};return{s:c,n:function(){return u>=e.length?{done:!0}:{done:!1,value:e[u++]}},e:function(m){throw m},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,v=!1,g;return{s:function(){a=a.call(e)},n:function(){var m=a.next();return f=m.done,m},e:function(m){v=!0,g=m},f:function(){try{!f&&a.return!=null&&a.return()}finally{if(v)throw g}}}}var qd="finalize",Zd="consider";function vr(e,r,a){e.dispatchEvent(new CustomEvent(qd,{detail:{items:r,info:a}}))}function Sn(e,r,a){e.dispatchEvent(new CustomEvent(Zd,{detail:{items:r,info:a}}))}var sa="draggedEntered",ni="draggedLeft",ua="draggedOverIndex",Yo="draggedLeftDocument",Zi={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function Qd(e,r,a){e.dispatchEvent(new CustomEvent(sa,{detail:{indexObj:r,draggedEl:a}}))}function Xd(e,r,a){e.dispatchEvent(new CustomEvent(ni,{detail:{draggedEl:r,type:Zi.LEFT_FOR_ANOTHER,theOtherDz:a}}))}function Jd(e,r){e.dispatchEvent(new CustomEvent(ni,{detail:{draggedEl:r,type:Zi.OUTSIDE_OF_ANY}}))}function eh(e,r,a){e.dispatchEvent(new CustomEvent(ua,{detail:{indexObj:r,draggedEl:a}}))}function th(e){window.dispatchEvent(new CustomEvent(Yo,{detail:{draggedEl:e}}))}var at={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:sa,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:ua,DRAGGED_LEFT:ni,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},ht={POINTER:"pointer",KEYBOARD:"keyboard"},la="isDndShadowItem",ca="data-is-dnd-shadow-item-internal",nh="data-is-dnd-shadow-item-hint",al="id:dnd-shadow-placeholder-0000",rh="dnd-action-dragged-el",Be="id",Eo=0;function ol(){Eo++}function sl(){if(Eo===0)throw new Error("Bug! trying to decrement when there are no dropzones");Eo--}var $o=typeof window>"u";function xo(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,u=r?oh(e):e.getBoundingClientRect(),c=getComputedStyle(e),f=c.transform;if(f){var v,g,m,k;if(f.startsWith("matrix3d("))a=f.slice(9,-1).split(/, /),v=+a[0],g=+a[5],m=+a[12],k=+a[13];else if(f.startsWith("matrix("))a=f.slice(7,-1).split(/, /),v=+a[0],g=+a[3],m=+a[4],k=+a[5];else return u;var x=c.transformOrigin,S=u.x-m-(1-v)*parseFloat(x),b=u.y-k-(1-g)*parseFloat(x.slice(x.indexOf(" ")+1)),T=v?u.width/v:e.offsetWidth,F=g?u.height/g:e.offsetHeight;return{x:S,y:b,width:T,height:F,top:b,right:S+T,bottom:b+F,left:S}}else return u}function ul(e){var r=xo(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function ll(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function cl(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function ih(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function fa(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function Yr(e){return cl(ll(e))}function eu(e,r){var a=Yr(e),u=ul(r);return fa(a,u)}function tu(e,r){var a=Yr(e),u=Yr(r);return ih(a,u)}function ah(e){var r=ll(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function oh(e){for(var r=e.getBoundingClientRect(),a={top:r.top,bottom:r.bottom,left:r.left,right:r.right},u=!1,c=!1,f=e.parentElement;f&&f!==document.body;){var v=window.getComputedStyle(f),g=v.overflowY,m=v.overflowX,k=g==="scroll"||g==="auto",x=m==="scroll"||m==="auto";if(k||x){var S=f.getBoundingClientRect();if(k){var b=Math.max(a.top,S.top),T=Math.min(a.bottom,S.bottom);(b!==a.top||T!==a.bottom)&&(u=!0),a.top=b,a.bottom=T}if(x){var F=Math.max(a.left,S.left),K=Math.min(a.right,S.right);(F!==a.left||K!==a.right)&&(c=!0),a.left=F,a.right=K}}f=f.parentElement}return u||c?{top:a.top,bottom:a.bottom,left:a.left,right:a.right,width:Math.max(0,a.right-a.left),height:Math.max(0,a.bottom-a.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var or;function qo(){or=new Map}qo();function sh(e){var r=Array.from(e.children).findIndex(function(a){return a.getAttribute(ca)});if(r>=0)return or.has(e)||or.set(e,new Map),or.get(e).set(r,ul(e.children[r])),r}function uh(e,r){if(!eu(e,r))return null;var a=r.children;if(a.length===0)return{index:0,isProximityBased:!0};for(var u=sh(r),c=0;c<a.length;c++)if(eu(e,a[c])){var f=or.has(r)&&or.get(r).get(c);return f&&!fa(Yr(e),f)?{index:u,isProximityBased:!1}:{index:c,isProximityBased:!1}}for(var v=Number.MAX_VALUE,g=void 0,m=0;m<a.length;m++){var k=tu(e,a[m]);k<v&&(v=k,g=m)}if(a.length>0){var x=a.length,S=a[x-1],b=S.cloneNode(!1);b.style.visibility="hidden",b.style.pointerEvents="none",r.appendChild(b);var T=tu(e,b);T<v&&(g=x),r.removeChild(b)}return{index:g,isProximityBased:!0}}function Fr(e){return JSON.stringify(e,null,2)}function Qi(e){if(!e)throw new Error("cannot get depth of a falsy node");return fl(e,0)}function fl(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?fl(e.parentElement,r+1):r-1}function lh(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var a in e)if(!{}.hasOwnProperty.call(r,a)||r[a]!==e[a])return!1;return!0}function ch(e,r){if(e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}var fh=200,nu=10,To;function dh(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fh,u=arguments.length>3?arguments[3]:void 0,c,f,v=!1,g,m=Array.from(r).sort(function(x,S){return Qi(S)-Qi(x)});function k(){var x=Yr(e),S=u.multiScrollIfNeeded();if(!S&&g&&Math.abs(g.x-x.x)<nu&&Math.abs(g.y-x.y)<nu){To=window.setTimeout(k,a);return}if(ah(e)){th(e);return}g=x;var b=!1,T=ti(m),F;try{for(T.s();!(F=T.n()).done;){var K=F.value;S&&qo();var N=uh(e,K);if(N!==null){var V=N.index;b=!0,K!==c?(c&&Xd(c,e,K),Qd(K,N,e),c=K):V!==f&&(eh(K,N,e),f=V);break}}}catch(ne){T.e(ne)}finally{T.f()}!b&&v&&c?(Jd(c,e),c=void 0,f=void 0,v=!1):v=!0,To=window.setTimeout(k,a)}k()}function hh(){clearTimeout(To),qo()}var Kr=30;function vh(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function a(f){var v=e,g=v.directionObj,m=v.stepPx;g&&(f.scrollBy(g.x*m,g.y*m),window.requestAnimationFrame(function(){return a(f)}))}function u(f){return Kr-f}function c(f,v){if(!v)return!1;var g=ph(f,v),m=!!e.directionObj;if(g===null)return m&&r(),!1;var k=!1,x=!1;return v.scrollHeight>v.clientHeight&&(g.bottom<Kr?(k=!0,e.directionObj={x:0,y:1},e.stepPx=u(g.bottom)):g.top<Kr&&(k=!0,e.directionObj={x:0,y:-1},e.stepPx=u(g.top)),!m&&k)||v.scrollWidth>v.clientWidth&&(g.right<Kr?(x=!0,e.directionObj={x:1,y:0},e.stepPx=u(g.right)):g.left<Kr&&(x=!0,e.directionObj={x:-1,y:0},e.stepPx=u(g.left)),!m&&x)?(a(v),!0):(r(),!1)}return{scrollIfNeeded:c,resetScrolling:r}}function ph(e,r){var a=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return fa(e,a)?{top:e.y-a.top,bottom:a.bottom-e.y,left:e.x-a.left,right:a.right-e.x}:null}function yh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=gh(e),u=Array.from(a).sort(function(m,k){return Qi(k)-Qi(m)}),c=vh(),f=c.scrollIfNeeded,v=c.resetScrolling;function g(){var m=r();if(!m||!u)return!1;for(var k=u.filter(function(b){return fa(m,b.getBoundingClientRect())||b===document.scrollingElement}),x=0;x<k.length;x++){var S=f(m,k[x]);if(S)return!0}return!1}return{multiScrollIfNeeded:a.size>0?g:function(){return!1},destroy:function(){return v()}}}function mh(e){if(!e)return[];for(var r=[],a=e;a;){var u=window.getComputedStyle(a),c=u.overflow;c.split(" ").some(function(f){return f.includes("auto")||f.includes("scroll")})&&r.push(a),a=a.parentElement}return r}function gh(e){var r=new Set,a=ti(e),u;try{for(a.s();!(u=a.n()).done;){var c=u.value;mh(c).forEach(function(f){return r.add(f)})}}catch(f){a.e(f)}finally{a.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function _h(e){var r=e.cloneNode(!0),a=[],u=e.tagName==="SELECT",c=u?[e]:kt(e.querySelectorAll("select")),f=ti(c),v;try{for(f.s();!(v=f.n()).done;){var g=v.value;a.push(g.value)}}catch(te){f.e(te)}finally{f.f()}if(c.length>0)for(var m=u?[r]:kt(r.querySelectorAll("select")),k=0;k<m.length;k++){var x=m[k],S=a[k],b=x.querySelector('option[value="'.concat(S,'"'));b&&b.setAttribute("selected",!0)}var T=e.tagName==="CANVAS",F=T?[e]:kt(e.querySelectorAll("canvas"));if(F.length>0)for(var K=T?[r]:kt(r.querySelectorAll("canvas")),N=0;N<K.length;N++){var V=F[N],ne=K[N];ne.width=V.width,ne.height=V.height,V.width>0&&V.height>0&&ne.getContext("2d").drawImage(V,0,0)}return r}var $r=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),bh=hr({},$r.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function dl(e){if(!$r[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys($r)));return bh[e]}var wh=.2;function jn(e){return"".concat(e," ").concat(wh,"s ease")}function Eh(e,r){var a=e.getBoundingClientRect(),u=_h(e);hl(e,u),u.id=rh,u.style.position="fixed";var c=a.top,f=a.left;if(u.style.top="".concat(c,"px"),u.style.left="".concat(f,"px"),r){var v=cl(a);c-=v.y-r.y,f-=v.x-r.x,window.setTimeout(function(){u.style.top="".concat(c,"px"),u.style.left="".concat(f,"px")},0)}return u.style.margin="0",u.style.boxSizing="border-box",u.style.height="".concat(a.height,"px"),u.style.width="".concat(a.width,"px"),u.style.transition="".concat(jn("top"),", ").concat(jn("left"),", ").concat(jn("background-color"),", ").concat(jn("opacity"),", ").concat(jn("color")," "),window.setTimeout(function(){return u.style.transition+=", ".concat(jn("width"),", ").concat(jn("height"))},0),u.style.zIndex="9999",u.style.cursor="grabbing",u}function xh(e){e.style.cursor="grab"}function Th(e,r,a,u){hl(r,e);var c=r.getBoundingClientRect(),f=e.getBoundingClientRect(),v=c.width-f.width,g=c.height-f.height;if(v||g){var m={left:(a-f.left)/f.width,top:(u-f.top)/f.height};dl($r.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(c.height,"px"),e.style.width="".concat(c.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-m.left*v,"px"),e.style.top="".concat(parseFloat(e.style.top)-m.top*g,"px")}}function hl(e,r){var a=window.getComputedStyle(e);Array.from(a).filter(function(u){return u.startsWith("background")||u.startsWith("padding")||u.startsWith("font")||u.startsWith("text")||u.startsWith("align")||u.startsWith("justify")||u.startsWith("display")||u.startsWith("flex")||u.startsWith("border")||u==="opacity"||u==="color"||u==="list-style-type"||dl($r.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(u==="width"||u==="height")}).forEach(function(u){return r.style.setProperty(u,a.getPropertyValue(u),a.getPropertyPriority(u))})}function Dh(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function vl(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function kh(e){e.style.visibility="hidden",e.setAttribute(ca,"true")}function Ah(e){e.style.visibility="",e.removeAttribute(ca)}function Ki(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(u){var c=r(u);Object.keys(c).forEach(function(f){u.style[f]=c[f]}),a(u).forEach(function(f){return u.classList.add(f)})})}function Xi(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(u){var c=r(u);Object.keys(c).forEach(function(f){u.style[f]=""}),a(u).forEach(function(f){return u.classList.contains(f)&&u.classList.remove(f)})})}function Sh(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var a=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=a}}var Oh="--any--",Ih=100,Ch=20,Pi=3,Rh=80,ru={outline:"rgba(255, 255, 102, 0.7) solid 2px"},iu="data-is-dnd-original-dragged-item",ut,Ve,lt,da,Ie,ha,Tn,$e,jt,Je,vn=!1,Zo=!1,Qo,ri=!1,Li=[],Ur,zt,Br=!1,Ot=new Map,Fe=new Map,so=new WeakMap;function Ph(e,r){Ot.has(r)||Ot.set(r,new Set),Ot.get(r).has(e)||(Ot.get(r).add(e),ol())}function au(e,r){Ot.get(r).delete(e),sl(),Ot.get(r).size===0&&Ot.delete(r)}function Mh(){var e=Ot.get(da),r=ti(e),a;try{for(r.s();!(a=r.n()).done;){var u=a.value;u.addEventListener(sa,pl),u.addEventListener(ni,yl),u.addEventListener(ua,ml)}}catch(v){r.e(v)}finally{r.f()}window.addEventListener(Yo,pr);var c=Math.max.apply(Math,kt(Array.from(e.keys()).map(function(v){return Fe.get(v).dropAnimationDurationMs}))),f=c===0?Ch:Math.max(c,Ih);Ur=yh(e,function(){return Je}),dh(Ve,e,f*1.07,Ur)}function Nh(){var e=Ot.get(da),r=ti(e),a;try{for(r.s();!(a=r.n()).done;){var u=a.value;u.removeEventListener(sa,pl),u.removeEventListener(ni,yl),u.removeEventListener(ua,ml)}}catch(c){r.e(c)}finally{r.f()}window.removeEventListener(Yo,pr),Ur&&(Ur.destroy(),Ur=void 0),hh()}function va(e){return e.findIndex(function(r){return!!r[la]})}function Fh(e){var r;return qi(qi({},e),{},(r={},hr(r,la,!0),hr(r,Be,al),r))}function pl(e){var r=Fe.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==Ie)){if(ri=!1,a=a.filter(function(g){return g[Be]!==Tn[Be]&&g[Be]!==al}),Ie!==e.currentTarget){var c=Fe.get(Ie).items,f=c.filter(function(g){return!g[la]});Sn(Ie,f,{trigger:at.DRAGGED_ENTERED_ANOTHER,id:lt[Be],source:ht.POINTER})}var v=e.detail.indexObj.index;$e=e.currentTarget,a.splice(v,0,Tn),Sn(e.currentTarget,a,{trigger:at.DRAGGED_ENTERED,id:lt[Be],source:ht.POINTER})}}function yl(e){if(vn){var r=Fe.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==Ie&&e.currentTarget!==$e)){var c=kt(a),f=va(c);f!==-1&&c.splice(f,1);var v=$e;$e=void 0;var g=e.detail,m=g.type,k=g.theOtherDz;if(m===Zi.OUTSIDE_OF_ANY||m===Zi.LEFT_FOR_ANOTHER&&k!==Ie&&Fe.get(k).dropFromOthersDisabled){ri=!0,$e=Ie;var x=v===Ie?c:kt(Fe.get(Ie).items);x.splice(ha,0,Tn),Sn(Ie,x,{trigger:at.DRAGGED_LEFT_ALL,id:lt[Be],source:ht.POINTER})}Sn(e.currentTarget,c,{trigger:at.DRAGGED_LEFT,id:lt[Be],source:ht.POINTER})}}}function ml(e){var r=Fe.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==Ie)){var c=kt(a);ri=!1;var f=e.detail.indexObj.index,v=va(c);v!==-1&&c.splice(v,1),c.splice(f,0,Tn),Sn(e.currentTarget,c,{trigger:at.DRAGGED_OVER_INDEX,id:lt[Be],source:ht.POINTER})}}function Ji(e){e.preventDefault();var r=e.touches?e.touches[0]:e;Je={x:r.clientX,y:r.clientY},Ve.style.transform="translate3d(".concat(Je.x-jt.x,"px, ").concat(Je.y-jt.y,"px, 0)")}function pr(){Zo=!0,window.removeEventListener("mousemove",Ji),window.removeEventListener("touchmove",Ji),window.removeEventListener("mouseup",pr),window.removeEventListener("touchend",pr),Nh(),xh(Ve),$e||($e=Ie);var e=Fe.get($e),r=e.items,a=e.type;Xi(Ot.get(a),function(f){return Fe.get(f).dropTargetStyle},function(f){return Fe.get(f).dropTargetClasses});var u=va(r);u===-1&&$e===Ie&&(u=ha),r=r.map(function(f){return f[la]?lt:f});function c(){Qo(),vr($e,r,{trigger:ri?at.DROPPED_OUTSIDE_OF_ANY:at.DROPPED_INTO_ZONE,id:lt[Be],source:ht.POINTER}),$e!==Ie&&vr(Ie,Fe.get(Ie).items,{trigger:at.DROPPED_INTO_ANOTHER,id:lt[Be],source:ht.POINTER});var f=Array.from($e.children).find(function(v){return v.getAttribute(ca)});f&&Ah(f),Bh()}Fe.get($e).dropAnimationDisabled?c():Kh(u,c)}function Kh(e,r){var a=e>-1?xo($e.children[e],!1):xo($e,!1),u={x:a.left-parseFloat(Ve.style.left),y:a.top-parseFloat(Ve.style.top)},c=Fe.get($e),f=c.dropAnimationDurationMs,v="transform ".concat(f,"ms ease");Ve.style.transition=Ve.style.transition?Ve.style.transition+","+v:v,Ve.style.transform="translate3d(".concat(u.x,"px, ").concat(u.y,"px, 0)"),window.setTimeout(r,f)}function Lh(e,r){Li.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){vl(e),document.body.appendChild(e)})}function Bh(){Ve&&Ve.remove&&Ve.remove(),ut&&ut.remove&&ut.remove(),Ve=void 0,ut=void 0,lt=void 0,da=void 0,Ie=void 0,ha=void 0,Tn=void 0,$e=void 0,jt=void 0,Je=void 0,vn=!1,Zo=!1,Qo=void 0,ri=!1,zt&&clearTimeout(zt),zt=void 0,Br=!1,Li.length&&(Li.forEach(function(e){var r=e.dz,a=e.destroy;a(),r.remove()}),Li=[])}function jh(e,r){var a=!1,u={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:ru,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},c=new Map;function f(){window.addEventListener("mousemove",m,{passive:!1}),window.addEventListener("touchmove",m,{passive:!1,capture:!1}),window.addEventListener("mouseup",g,{passive:!1}),window.addEventListener("touchend",g,{passive:!1})}function v(){window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",g),window.removeEventListener("touchend",g),zt&&(clearTimeout(zt),zt=void 0,Br=!1)}function g(b){if(v(),ut=void 0,jt=void 0,Je=void 0,b.type==="touchend"){var T=new Event("click",{bubbles:!0,cancelable:!0});b.target.dispatchEvent(T)}}function m(b){var T=!!b.touches,F=T?b.touches[0]:b;if(T&&u.delayTouchStartMs>0&&!Br){Je={x:F.clientX,y:F.clientY},(Math.abs(Je.x-jt.x)>=Pi||Math.abs(Je.y-jt.y)>=Pi)&&(zt&&(clearTimeout(zt),zt=void 0),g(b));return}b.preventDefault(),Je={x:F.clientX,y:F.clientY},(Math.abs(Je.x-jt.x)>=Pi||Math.abs(Je.y-jt.y)>=Pi)&&(v(),x())}function k(b){if(!(b.target!==b.currentTarget&&(b.target.value!==void 0||b.target.isContentEditable))&&!b.button&&!vn){var T=!!b.touches,F=T&&u.delayTouchStartMs>0;F||b.preventDefault(),b.stopPropagation();var K=T?b.touches[0]:b;jt={x:K.clientX,y:K.clientY},Je=qi({},jt),ut=b.currentTarget,F&&(Br=!1,zt=window.setTimeout(function(){ut&&(Br=!0,v(),x())},u.delayTouchStartMs)),f()}}function x(){vn=!0;var b=c.get(ut);ha=b,Ie=ut.parentElement;var T=Ie.closest("dialog")||Ie.closest("[popover]")||Ie.getRootNode(),F=T.body||T,K=u.items,N=u.type,V=u.centreDraggedOnCursor,ne=kt(K);lt=ne[b],da=N,Tn=Fh(lt),Ve=Eh(ut,V&&Je),F.appendChild(Ve);function te(){ut.parentElement?window.requestAnimationFrame(te):(ut.setAttribute(iu,!0),F.appendChild(ut),Mh(),vl(ut),Tn[Be]=lt[Be],Ve.focus())}window.requestAnimationFrame(te),Ki(Array.from(Ot.get(u.type)).filter(function(Q){return Q===Ie||!Fe.get(Q).dropFromOthersDisabled}),function(Q){return Fe.get(Q).dropTargetStyle},function(Q){return Fe.get(Q).dropTargetClasses}),ne.splice(b,1,Tn),Qo=Sh(Ie),Sn(Ie,ne,{trigger:at.DRAG_STARTED,id:lt[Be],source:ht.POINTER}),window.addEventListener("mousemove",Ji,{passive:!1}),window.addEventListener("touchmove",Ji,{passive:!1,capture:!1}),window.addEventListener("mouseup",pr,{passive:!1}),window.addEventListener("touchend",pr,{passive:!1})}function S(b){var T=b.items,F=T===void 0?void 0:T,K=b.flipDurationMs,N=K===void 0?0:K,V=b.type,ne=V===void 0?Oh:V,te=b.dragDisabled,Q=te===void 0?!1:te,re=b.morphDisabled,ue=re===void 0?!1:re,_e=b.dropFromOthersDisabled,xe=_e===void 0?!1:_e,le=b.dropTargetStyle,ie=le===void 0?ru:le,fe=b.dropTargetClasses,pe=fe===void 0?[]:fe,Re=b.transformDraggedElement,je=Re===void 0?function(){}:Re,ot=b.centreDraggedOnCursor,ze=ot===void 0?!1:ot,De=b.dropAnimationDisabled,Ht=De===void 0?!1:De,pt=b.delayTouchStart,He=pt===void 0?!1:pt;u.dropAnimationDurationMs=N;var $=0;He===!0?$=Rh:typeof He=="number"&&isFinite(He)&&He>=0&&($=He),u.delayTouchStartMs=$,u.type&&ne!==u.type&&au(e,u.type),u.type=ne,u.items=kt(F),u.dragDisabled=Q,u.morphDisabled=ue,u.transformDraggedElement=je,u.centreDraggedOnCursor=ze,u.dropAnimationDisabled=Ht,a&&vn&&!Zo&&(!lh(ie,u.dropTargetStyle)||!ch(pe,u.dropTargetClasses))&&(Xi([e],function(){return u.dropTargetStyle},function(){return pe}),Ki([e],function(){return ie},function(){return pe})),u.dropTargetStyle=ie,u.dropTargetClasses=kt(pe);function se(ge,ke){return Fe.get(ge)?Fe.get(ge)[ke]:u[ke]}a&&vn&&u.dropFromOthersDisabled!==xe&&(xe?Xi([e],function(ge){return se(ge,"dropTargetStyle")},function(ge){return se(ge,"dropTargetClasses")}):Ki([e],function(ge){return se(ge,"dropTargetStyle")},function(ge){return se(ge,"dropTargetClasses")})),u.dropFromOthersDisabled=xe,Fe.set(e,u),Ph(e,ne);for(var de=vn?va(u.items):-1,me=0;me<e.children.length;me++){var ce=e.children[me];if(Dh(ce,Q),me===de){ue||Th(Ve,ce,Je.x,Je.y),u.transformDraggedElement(Ve,lt,me),kh(ce);continue}ce.removeEventListener("mousedown",so.get(ce)),ce.removeEventListener("touchstart",so.get(ce)),Q||(ce.addEventListener("mousedown",k),ce.addEventListener("touchstart",k),so.set(ce,k)),c.set(ce,me),a||(a=!0)}}return S(r),{update:function(T){S(T)},destroy:function(){function T(){au(e,Fe.get(e).type),Fe.delete(e)}vn&&!e.closest("[".concat(iu,"]"))?Lh(e,T):T()}}}var Mi,Do={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},gl=(Mi={},hr(Mi,Do.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),hr(Mi,Do.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Mi),zh="dnd-action-aria-alert",Le;function ko(){Le||(Le=document.createElement("div"),(function(){Le.id=zh,Le.style.position="fixed",Le.style.bottom="0",Le.style.left="0",Le.style.zIndex="-5",Le.style.opacity="0",Le.style.height="0",Le.style.width="0",Le.setAttribute("role","alert")})(),document.body.prepend(Le),Object.entries(gl).forEach(function(e){var r=Ud(e,2),a=r[0],u=r[1];return document.body.prepend(Wh(a,u))}))}function Uh(){return $o?null:(document.readyState==="complete"?ko():window.addEventListener("DOMContentLoaded",ko),qi({},Do))}function Vh(){$o||!Le||(Object.keys(gl).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),Le.remove(),Le=void 0)}function Wh(e,r){var a=document.createElement("div");return a.id=e,a.innerHTML="<p>".concat(r,"</p>"),a.style.display="none",a.style.position="fixed",a.style.zIndex="-5",a}function sr(e){if(!$o){Le||ko(),Le.innerHTML="";var r=document.createTextNode(e);Le.appendChild(r),Le.style.display="none",Le.style.display="inline"}}var Hh="--any--",ou={outline:"rgba(255, 255, 102, 0.7) solid 2px"},wt=!1,Ao,et,Hn="",zn,Ut,mn="",ea=new WeakSet,su=new WeakMap,uu=new WeakMap,So=new Map,Ye=new Map,St=new Map,ta;function Gh(e,r){St.size===0&&(ta=Uh(),window.addEventListener("keydown",_l),window.addEventListener("click",bl)),St.has(r)||St.set(r,new Set),St.get(r).has(e)||(St.get(r).add(e),ol())}function lu(e,r){et===e&&qr(),St.get(r).delete(e),sl(),St.get(r).size===0&&St.delete(r),St.size===0&&(window.removeEventListener("keydown",_l),window.removeEventListener("click",bl),ta=void 0,Vh())}function _l(e){if(wt)switch(e.key){case"Escape":{qr();break}}}function bl(){wt&&(ea.has(document.activeElement)||qr())}function Yh(e){if(wt){var r=e.currentTarget;if(r!==et){Hn=r.getAttribute("aria-label")||"";var a=Ye.get(et),u=a.items,c=u.find(function(S){return S[Be]===Ut}),f=u.indexOf(c),v=u.splice(f,1)[0],g=Ye.get(r),m=g.items,k=g.autoAriaDisabled;r.getBoundingClientRect().top<et.getBoundingClientRect().top||r.getBoundingClientRect().left<et.getBoundingClientRect().left?(m.push(v),k||sr("Moved item ".concat(mn," to the end of the list ").concat(Hn))):(m.unshift(v),k||sr("Moved item ".concat(mn," to the beginning of the list ").concat(Hn)));var x=et;vr(x,u,{trigger:at.DROPPED_INTO_ANOTHER,id:Ut,source:ht.KEYBOARD}),vr(r,m,{trigger:at.DROPPED_INTO_ZONE,id:Ut,source:ht.KEYBOARD}),et=r}}}function wl(){So.forEach(function(e,r){var a=e.update;return a(Ye.get(r))})}function qr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Ye.get(et).autoAriaDisabled||sr("Stopped dragging item ".concat(mn)),ea.has(document.activeElement)&&document.activeElement.blur(),e&&Sn(et,Ye.get(et).items,{trigger:at.DRAG_STOPPED,id:Ut,source:ht.KEYBOARD}),Xi(St.get(Ao),function(r){return Ye.get(r).dropTargetStyle},function(r){return Ye.get(r).dropTargetClasses}),zn=null,Ut=null,mn="",Ao=null,et=null,Hn="",wt=!1,wl()}function $h(e,r){var a={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:ou,dropTargetClasses:[],autoAriaDisabled:!1};function u(x,S,b){x.length<=1||x.splice(b,1,x.splice(S,1,x[b])[0])}function c(x){switch(x.key){case"Enter":case" ":{if((x.target.disabled!==void 0||x.target.href||x.target.isContentEditable)&&!ea.has(x.target))return;x.preventDefault(),x.stopPropagation(),wt?qr():f(x);break}case"ArrowDown":case"ArrowRight":{if(!wt)return;x.preventDefault(),x.stopPropagation();var S=Ye.get(e),b=S.items,T=Array.from(e.children),F=T.indexOf(x.currentTarget);F<T.length-1&&(a.autoAriaDisabled||sr("Moved item ".concat(mn," to position ").concat(F+2," in the list ").concat(Hn)),u(b,F,F+1),vr(e,b,{trigger:at.DROPPED_INTO_ZONE,id:Ut,source:ht.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!wt)return;x.preventDefault(),x.stopPropagation();var K=Ye.get(e),N=K.items,V=Array.from(e.children),ne=V.indexOf(x.currentTarget);ne>0&&(a.autoAriaDisabled||sr("Moved item ".concat(mn," to position ").concat(ne," in the list ").concat(Hn)),u(N,ne,ne-1),vr(e,N,{trigger:at.DROPPED_INTO_ZONE,id:Ut,source:ht.KEYBOARD}));break}}}function f(x){g(x.currentTarget),et=e,Ao=a.type,wt=!0;var S=Array.from(St.get(a.type)).filter(function(T){return T===et||!Ye.get(T).dropFromOthersDisabled});if(Ki(S,function(T){return Ye.get(T).dropTargetStyle},function(T){return Ye.get(T).dropTargetClasses}),!a.autoAriaDisabled){var b="Started dragging item ".concat(mn,". Use the arrow keys to move it within its list ").concat(Hn);S.length>1&&(b+=", or tab to another list in order to move the item into it"),sr(b)}Sn(e,Ye.get(e).items,{trigger:at.DRAG_STARTED,id:Ut,source:ht.KEYBOARD}),wl()}function v(x){wt&&x.currentTarget!==zn&&(x.stopPropagation(),qr(!1),f(x))}function g(x){var S=Ye.get(e),b=S.items,T=Array.from(e.children),F=T.indexOf(x);zn=x,zn.tabIndex=a.zoneItemTabIndex,Ut=b[F][Be],mn=T[F].getAttribute("aria-label")||""}function m(x){var S=x.items,b=S===void 0?[]:S,T=x.type,F=T===void 0?Hh:T,K=x.dragDisabled,N=K===void 0?!1:K,V=x.zoneTabIndex,ne=V===void 0?0:V,te=x.zoneItemTabIndex,Q=te===void 0?0:te,re=x.dropFromOthersDisabled,ue=re===void 0?!1:re,_e=x.dropTargetStyle,xe=_e===void 0?ou:_e,le=x.dropTargetClasses,ie=le===void 0?[]:le,fe=x.autoAriaDisabled,pe=fe===void 0?!1:fe;a.items=kt(b),a.dragDisabled=N,a.dropFromOthersDisabled=ue,a.zoneTabIndex=ne,a.zoneItemTabIndex=Q,a.dropTargetStyle=xe,a.dropTargetClasses=ie,a.autoAriaDisabled=pe,a.type&&F!==a.type&&lu(e,a.type),a.type=F,Gh(e,F),pe||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",N?ta.DND_ZONE_DRAG_DISABLED:ta.DND_ZONE_ACTIVE)),Ye.set(e,a),wt?e.tabIndex=e===et||zn.contains(e)||a.dropFromOthersDisabled||et&&a.type!==Ye.get(et).type?-1:0:e.tabIndex=a.zoneTabIndex,e.addEventListener("focus",Yh);for(var Re=function(ze){var De=e.children[ze];ea.add(De),De.tabIndex=wt?-1:a.zoneItemTabIndex,pe||De.setAttribute("role","listitem"),De.removeEventListener("keydown",su.get(De)),De.removeEventListener("click",uu.get(De)),N||(De.addEventListener("keydown",c),su.set(De,c),De.addEventListener("click",v),uu.set(De,v)),wt&&a.items[ze][Be]===Ut&&(zn=De,zn.tabIndex=a.zoneItemTabIndex,De.focus())},je=0;je<e.children.length;je++)Re(je)}m(r);var k={update:function(S){m(S)},destroy:function(){lu(e,a.type),Ye.delete(e),So.delete(e)}};return So.set(e,k),k}var qh=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Zh(e,r){if(Qh(e))return{update:function(){},destroy:function(){}};cu(r);var a=jh(e,r),u=$h(e,r);return{update:function(f){cu(f),a.update(f),u.update(f)},destroy:function(){a.destroy(),u.destroy()}}}function Qh(e){return!!e.closest("[".concat(nh,'="true"]'))}function cu(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var a=e.zoneTabIndex,u=e.zoneItemTabIndex;e.dropTargetStyle;var c=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var f=e.delayTouchStart;e.dropAnimationDisabled;var v=zd(e,qh);if(Object.keys(v).length>0&&console.warn("dndzone will ignore unknown options",v),!r)throw new Error("no 'items' key provided to dndzone");var g=r.find(function(x){return!{}.hasOwnProperty.call(x,Be)});if(g)throw new Error("missing '".concat(Be,"' property for item ").concat(Fr(g)));if(c&&!Array.isArray(c))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(rr(c),", ").concat(Fr(c)));if(a&&!fu(a))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(rr(a),", ").concat(Fr(a)));if(u&&!fu(u))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(rr(u),", ").concat(Fr(u)));if(f!==void 0&&f!==!1){var m=f===!0,k=typeof f=="number"&&isFinite(f)&&f>=0;if(!m&&!k)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(rr(f),", ").concat(Fr(f)))}}function fu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}var Xh=We('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),Jh=We('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed min-w-[400px]"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><input type="text" class="task-input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text"/> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function ev(e,r){mr(r,!0);let a=Ae(pn(r.taskText||"")),u=Ae(!1),c=Ae(null),f=Ae(null),v=Fo(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const te=24+24+16+8-8,Q=r.taskPosition.top-te,re=r.taskPosition.left-16,ue=Math.max(r.taskPosition.width+48,400);return`background-color: white; z-index: 10000; top: ${Q}px; left: ${re}px; width: ${ue}px;`});yn(()=>{r.isOpen&&(Z(a,r.taskText||"",!0),Z(u,!1))}),yn(()=>{r.isOpen&&B(c)&&setTimeout(()=>{B(c)?.focus(),B(c)?.select()},0)});function g(){const K=B(a)??"",N=K.trim();if(N===""&&K.length>0){r.onSave(r.taskId,""),Z(u,!1);return}if(K===""||N===""){Z(u,!0);return}r.onSave(r.taskId,N),Z(u,!1)}function m(){Z(a,r.taskText||"",!0),Z(u,!1),r.onCancel()}function k(K){K.target===K.currentTarget&&m()}function x(K){K.key==="Escape"?m():K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),g())}function S(){r.onArchive&&r.onArchive(r.taskId)}var b=Wn(),T=Zt(b);{var F=K=>{var N=Jh();N.__click=k,N.__keydown=x;var V=Te(N);V.__click=fe=>fe.stopPropagation();var ne=Ce(Te(V),2),te=Te(ne);te.__keydown=x,mo(te,fe=>Z(c,fe),()=>B(c));var Q=Ce(te,2);{var re=fe=>{var pe=Xh();Se(fe,pe)};Dt(Q,fe=>{B(u)&&fe(re)})}var ue=Ce(ne,2),_e=Te(ue);_e.__click=S;var xe=Ce(_e,2),le=Te(xe);le.__click=m;var ie=Ce(le,2);ie.__click=g,mo(V,fe=>Z(f,fe),()=>B(f)),qt(fe=>{_d(V,fe),hn(te,"aria-describedby",B(u)?"validation-message":void 0),ie.disabled=B(u),hn(ie,"aria-label",B(u)?"Save disabled: task cannot be empty":"Save task changes")},[()=>B(v)()]),Dd(te,()=>B(a),fe=>Z(a,fe)),Se(K,N)};Dt(T,K=>{r.isOpen&&K(F)})}Se(e,b),gr()}ei(["click","keydown"]);var tv=We("<p> </p>"),nv=We('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),rv=We('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0"> </span> <!></li>'),iv=We('<ul class="space-y-2"></ul>'),av=We("<p>Loading tasks...</p>"),ov=We('<div class="flex gap-2"><input type="text" placeholder="Add new task..." class="print:hidden svelte-k6mizj"/> <button class="print:hidden" aria-label="Save new task">Save</button></div>'),sv=We('<button class="add-task-button svelte-k6mizj" style="visibility: visible;">Add Task</button>'),uv=We('<div><h2> </h2> <!> <div class="task-input-container svelte-k6mizj"><!></div></div> <!>',1);function lv(e,r){mr(r,!0);const a=()=>Gi(B(f),"$tasksQuery",u),[u,c]=Ho();let f=Ae(null),v=Ae(pn([])),g=Ae(!1),m=Ae(null),k=Ae(!1),x=Ae(null),S=Ae(""),b=Ae(null),T=Ae(null);yn(()=>{r.listId&&!B(f)&&_o(Z(f,$i(()=>Pd(r.listId)),!0),"$tasksQuery",u)}),yn(()=>{a()&&Array.isArray(a())&&Z(v,a().filter($=>$.status==="unchecked"||$.status==="checked"),!0)});function F($){Z(v,$.detail.items,!0)}async function K($){Z(v,$.detail.items,!0);try{await Ld(r.listId,$.detail.items)}catch(se){console.error("Error updating task order:",se)}}function N(){Z(g,!0)}function V($){$.key==="Escape"&&(Z(g,!1),r.onInputChange(""))}yn(()=>{if(!B(g))return;function $(de){const me=document.querySelector(`[data-list-id="${r.listId}"] .task-input-container`);if(!me)return;const ce=me.querySelector("button");if(ce&&ce.contains(de.target))return;const ge=me.querySelector("input");ge&&ge.contains(de.target)||(!r.newTaskInput||r.newTaskInput.trim()==="")&&(Z(g,!1),r.onInputChange(""))}const se=setTimeout(()=>{document.addEventListener("click",$)},0);return()=>{clearTimeout(se),document.removeEventListener("click",$)}}),yn(()=>{B(g)&&B(m)&&setTimeout(()=>{B(m)?.focus()},0)});async function ne(){const $=r.newTaskInput||"";if($===""){Z(g,!1),r.onInputChange("");return}const se=$.trim(),de=se===""&&$.length>0;let me;de?me="":me=se;try{await Nd(r.listId,me),r.onInputChange("")}catch(ce){console.error("Error creating task:",ce)}}async function te($,se){try{await Xs($,se==="unchecked"?"checked":"unchecked")}catch(de){console.error("Error updating task status:",de)}}async function Q($){try{if(await Xs($,"archived"),B(x)===$){const se=B(T);Z(k,!1),Z(x,null),Z(S,""),Z(b,null),Z(T,null),setTimeout(()=>{if(se&&se instanceof HTMLElement){const de=se.closest("li");if(de){const ce=de.nextElementSibling;if(ce){const ke=ce.querySelector('span[role="button"]');if(ke&&ke instanceof HTMLElement){ke.focus();return}}const ge=de.previousElementSibling;if(ge){const ke=ge.querySelector('span[role="button"]');if(ke&&ke instanceof HTMLElement){ke.focus();return}}}const me=document.querySelector(`[data-list-id="${r.listId}"] .add-task-button`);me&&me instanceof HTMLElement&&me.focus()}},0)}}catch(se){console.error("Error archiving task:",se)}}function re($,se,de){const me=de?.currentTarget||de?.target;if(me){const ce=me.getBoundingClientRect();Z(b,{top:ce.top,left:ce.left,width:ce.width,height:ce.height},!0),Z(T,me,!0)}Z(x,$,!0),Z(S,se,!0),Z(k,!0)}async function ue($,se){try{await Fd($,se),Z(k,!1);const de=B(T);Z(x,null),Z(S,""),Z(b,null),Z(T,null),de&&de instanceof HTMLElement&&setTimeout(()=>{de.focus()},0)}catch(de){console.error("Error updating task text:",de)}}function _e(){const $=B(T);Z(k,!1),Z(x,null),Z(S,""),Z(b,null),Z(T,null),$&&$ instanceof HTMLElement&&setTimeout(()=>{$.focus()},0)}async function xe($){await Q($)}var le=uv(),ie=Zt(le),fe=Te(ie),pe=Te(fe),Re=Ce(fe,2);{var je=$=>{var se=Wn(),de=Zt(se);{var me=ge=>{var ke=tv(),Ge=Te(ke);qt(()=>xn(Ge,`No tasks yet for ${r.listName??""}. Add your first task.`)),Se(ge,ke)},ce=ge=>{var ke=iv();Mo(ke,21,()=>B(v),Ge=>Ge.id,(Ge,Pe)=>{var wr=rv(),On=Ce(Te(wr),2);On.__change=()=>te(B(Pe).id,B(Pe).status);var Rt=Ce(On,2);Rt.__click=rt=>re(B(Pe).id,B(Pe).text,rt),Rt.__keydown=rt=>{(rt.key==="Enter"||rt.key===" ")&&(rt.preventDefault(),re(B(Pe).id,B(Pe).text,rt))};var pa=Te(Rt),nn=Ce(Rt,2);{var ii=rt=>{var Pt=nv();Pt.__click=()=>Q(B(Pe).id),qt(()=>hn(Pt,"aria-label",`Archive task: ${B(Pe).text||"blank task"}`)),Se(rt,Pt)};Dt(nn,rt=>{B(Pe).status==="checked"&&rt(ii)})}qt(()=>{hn(wr,"data-id",B(Pe).id),xd(On,B(Pe).status==="checked"),hn(On,"aria-label",`Mark task "${B(Pe).text||"blank task"}" as ${B(Pe).status==="checked"?"unchecked":"checked"}`),gd(Rt,1,pd(B(Pe).status==="checked"?"line-through flex-1 cursor-pointer hover:underline":"flex-1 cursor-pointer hover:underline")),hn(Rt,"aria-label",`Edit task: ${B(Pe).text||"blank task"}`),xn(pa,B(Pe).text||"")}),Se(Ge,wr)}),hd(ke,(Ge,Pe)=>Zh?.(Ge,Pe),()=>({items:B(v),type:`list-${r.listId}`})),Gs("consider",ke,F),Gs("finalize",ke,K),Se(ge,ke)};Dt(de,ge=>{a().length===0?ge(me):ge(ce,!1)})}Se($,se)},ot=$=>{var se=av();Se($,se)};Dt(Re,$=>{B(f)&&a()!==void 0?$(je):$(ot,!1)})}var ze=Ce(Re,2),De=Te(ze);{var Ht=$=>{var se=ov(),de=Te(se);de.__input=ce=>r.onInputChange(ce.currentTarget.value),de.__keydown=ce=>{ce.key==="Enter"?(ce.preventDefault(),ne()):ce.key==="Escape"&&V(ce)},mo(de,ce=>Z(m,ce),()=>B(m));var me=Ce(de,2);me.__click=ne,qt(()=>Ed(de,r.newTaskInput)),Se($,se)},pt=$=>{var se=sv();se.__click=N,qt(()=>hn(se,"aria-label",`Add new task to ${r.listName??""}`)),Se($,se)};Dt(De,$=>{B(g)?$(Ht):$(pt,!1)})}var He=Ce(ie,2);ev(He,{get isOpen(){return B(k)},get taskId(){return B(x)},get taskText(){return B(S)},get taskPosition(){return B(b)},onSave:ue,onCancel:_e,onArchive:xe}),qt(()=>{hn(ie,"data-list-id",r.listId),xn(pe,r.listName)}),Se(e,le),gr(),c()}ei(["change","click","keydown","input"]);var cv=We('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border border-gray-200 max-w-md w-full mx-4"><h3 id="modal-title" class="text-lg font-semibold mb-4"> </h3> <p class="mb-6 text-sm text-gray-600"> </p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete</button></div></div></div>');function fv(e,r){mr(r,!0);function a(){r.onConfirm()}function u(){r.onCancel()}function c(k){k.target===k.currentTarget&&u()}function f(k){k.key==="Escape"&&u()}var v=Wn(),g=Zt(v);{var m=k=>{var x=cv();x.__click=c,x.__keydown=f;var S=Te(x),b=Te(S),T=Te(b),F=Ce(b,2),K=Te(F),N=Ce(F,2),V=Te(N);V.__click=u;var ne=Ce(V,2);ne.__click=a,qt(()=>{xn(T,r.title),xn(K,r.message)}),Se(k,x)};Dt(g,k=>{r.isOpen&&k(m)})}Se(e,v),gr()}ei(["click","keydown"]);var dv=We("<p>No archived tasks</p>"),hv=We('<li class="flex items-center gap-3 mb-2"><span class="line-through"> </span> <span class="text-sm text-gray-500"> </span> <span class="text-sm text-gray-400"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button> <button class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm">Delete</button></li>'),vv=We("<ul></ul>"),pv=We('<div class="w-[1056px] mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div> <!>',1);function yv(e,r){mr(r,!0);const a=()=>Gi(B(g),"$listsQuery",c),u=()=>Gi(B(v),"$archivedTasksQuery",c),[c,f]=Ho();let v=Ae(null),g=Ae(null),m=Ae(!1),k=Ae(null);yn(()=>{_o(Z(v,$i(()=>Md()),!0),"$archivedTasksQuery",c),_o(Z(g,$i(()=>il()),!0),"$listsQuery",c)});function x(re){if(!a())return"Unknown List";const ue=a().find(_e=>_e.id===re);return ue?ue.name:"Unknown List"}function S(re){return re?new Date(re).toLocaleString():"Unknown"}async function b(re){try{await Kd(re)}catch(ue){console.error("Error restoring task:",ue)}}function T(re,ue){Z(k,{id:re,text:ue},!0),Z(m,!0)}async function F(){if(B(k))try{await Bd(B(k).id),Z(m,!1),Z(k,null)}catch(re){console.error("Error deleting task:",re)}}function K(){Z(m,!1),Z(k,null)}var N=pv(),V=Zt(N),ne=Ce(Te(V),2);{var te=re=>{var ue=Wn(),_e=Zt(ue);{var xe=ie=>{var fe=dv();Se(ie,fe)},le=ie=>{var fe=vv();Mo(fe,5,u,Pu,(pe,Re)=>{var je=hv(),ot=Te(je),ze=Te(ot),De=Ce(ot,2),Ht=Te(De),pt=Ce(De,2),He=Te(pt),$=Ce(pt,2);$.__click=()=>b(B(Re).id);var se=Ce($,2);se.__click=()=>T(B(Re).id,B(Re).text),qt((de,me)=>{xn(ze,B(Re).text),xn(Ht,`(${de??""})`),xn(He,`Archived: ${me??""}`)},[()=>x(B(Re).listId),()=>S(B(Re).archivedAt)]),Se(pe,je)}),Se(ie,fe)};Dt(_e,ie=>{u().length===0?ie(xe):ie(le,!1)})}Se(re,ue)};Dt(ne,re=>{B(v)&&u()&&re(te)})}var Q=Ce(V,2);{let re=Fo(()=>B(k)?`Are you sure you want to permanently delete "${B(k).text}"? This action cannot be undone.`:"");fv(Q,{get isOpen(){return B(m)},title:"Delete Task",get message(){return B(re)},onConfirm:F,onCancel:K})}Se(e,N),gr(),f()}ei(["click"]);var mv=We("<p>Loading...</p>"),gv=We("<p>No lists found</p>"),_v=We('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="w-[1056px] flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="w-[1056px] h-[816px] bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><div class="w-full h-full p-4 overflow-auto"><!></div></div></div> <!></main>');function bv(e,r){mr(r,!0);const a=()=>Gi(f,"$lists",u),[u,c]=Ho();let f=$i(()=>il()),v=Ae(pn({}));yn(()=>{if(a()&&Array.isArray(a())&&a().length>0&&Object.keys(B(v)).length===0){const te={};for(const Q of a())te[Q.id]="";Z(v,te,!0)}});function g(te,Q){B(v)[te]=Q}function m(){window.print()}var k=_v(),x=Te(k),S=Te(x);S.__click=m;var b=Ce(x,2),T=Te(b),F=Te(T),K=Te(F);{var N=te=>{var Q=mv();Se(te,Q)},V=te=>{var Q=Wn(),re=Zt(Q);{var ue=xe=>{var le=gv();Se(xe,le)},_e=xe=>{var le=Wn(),ie=Zt(le);{var fe=pe=>{var Re=Wn(),je=Zt(Re);Mo(je,1,a,Pu,(ot,ze)=>{{let De=Fo(()=>B(v)[B(ze).id]||"");lv(ot,{get listId(){return B(ze).id},get listName(){return B(ze).name},get newTaskInput(){return B(De)},onInputChange:Ht=>g(B(ze).id,Ht)})}}),Se(pe,Re)};Dt(ie,pe=>{Array.isArray(a())&&pe(fe)},!0)}Se(xe,le)};Dt(re,xe=>{Array.isArray(a())&&a().length===0?xe(ue):xe(_e,!1)},!0)}Se(te,Q)};Dt(K,te=>{a()===void 0||a()===null?te(N):te(V,!1)})}var ne=Ce(b,2);yv(ne,{}),Se(e,k),gr(),c()}ei(["click"]);const wv=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],Ev=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function xv(){try{if(await Ke.lists.count()>0)return;await Ke.lists.bulkAdd(wv),await Ke.tasks.bulkAdd(Ev),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await xv().catch(console.error),ld(bv,{target:document.getElementById("app")})))();
