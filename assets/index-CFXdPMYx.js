(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(u){if(u.ep)return;u.ep=!0;const c=i(u);fetch(u.href,c)}})();const Kf="production",ie=!Kf.toLowerCase().startsWith("prod");var xs=Array.isArray,Ff=Array.prototype.indexOf,Ts=Array.from,Jn=Object.defineProperty,br=Object.getOwnPropertyDescriptor,al=Object.getOwnPropertyDescriptors,Bf=Object.prototype,jf=Array.prototype,As=Object.getPrototypeOf,ku=Object.isExtensible;const Ea=()=>{};function zf(e){for(var t=0;t<e.length;t++)e[t]()}function ol(){var e,t,i=new Promise((o,u)=>{e=o,t=u});return{promise:i,resolve:e,reject:t}}const gt=2,ks=4,Is=8,sl=1<<24,On=16,Cn=32,Ar=64,Ua=128,sn=512,At=1024,Ft=2048,Ln=4096,Gt=8192,kn=16384,Ds=32768,Hr=65536,xa=1<<17,ul=1<<18,Xr=1<<19,Hf=1<<20,$n=32768,ns=1<<21,Va=1<<22,Yn=1<<23,In=Symbol("$state"),Uf=Symbol("legacy props"),Vf=Symbol(""),ll=Symbol("proxy path"),Nr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Wf(){if(ie){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Iu(){if(ie){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Gf(){if(ie){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Yf(e){if(ie){const t=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function qf(){if(ie){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Zf(e){if(ie){const t=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_orphan")}function Qf(){if(ie){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xf(e){if(ie){const t=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Jf(e){if(ie){const t=new Error(`props_rest_readonly
Rest element properties of \`$props()\` such as \`${e}\` are readonly
https://svelte.dev/e/props_rest_readonly`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_rest_readonly")}function $f(e){if(ie){const t=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function ed(){if(ie){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function td(){if(ie){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function nd(){if(ie){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function rd(){if(ie){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const cl=1,fl=2,dl=4,id=8,ad=16,od=1,sd=2,ud=4,ld=8,cd=16,fd=1,dd=2,ht=Symbol(),vd=Symbol("filename"),hd="http://www.w3.org/1999/xhtml",pd="@attach";var Ss="font-weight: bold",Os="font-weight: normal";function md(){ie?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Ss,Os):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Uo(e){ie?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Ss,Os):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function yd(){ie?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Ss,Os):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function vl(e){return e===this.v}function hl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function pl(e){return!hl(e,this.v)}let Ci=!1,gd=!1;function _d(){Ci=!0}function dn(e,t){return e.label=t,ml(e.v,t),e}function ml(e,t){return e?.[ll]?.(t),e}function bd(e){const t=new Error,i=wd();return i.length===0?null:(i.unshift(`
`),Jn(t,"stack",{value:i.join(`
`)}),Jn(t,"name",{value:e}),t)}function wd(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const t=new Error().stack;if(Error.stackTraceLimit=e,!t)return[];const i=t.split(`
`),o=[];for(let u=0;u<i.length;u++){const c=i[u],d=c.replaceAll("\\","/");if(c.trim()!=="Error"){if(c.includes("validate_each_keys"))return[];d.includes("svelte/src/internal")||d.includes("node_modules/.vite")||o.push(c)}}return o}let st=null;function Ur(e){st=e}let Vr=null;function Ta(e){Vr=e}let Li=null;function Du(e){Li=e}function nr(e,t=!1,i){st={p:st,i:!1,c:null,e:null,s:e,x:null,l:Ci&&!t?{s:null,u:null,$:[]}:null},ie&&(st.function=i,Li=i)}function rr(e){var t=st,i=t.e;if(i!==null){t.e=null;for(var o of i)Cl(o)}return t.i=!0,st=t.p,ie&&(Li=st?.function??null),{}}function Pi(){return!Ci||st!==null&&st.l===null}let yr=[];function yl(){var e=yr;yr=[],zf(e)}function kr(e){if(yr.length===0&&!bi){var t=yr;queueMicrotask(()=>{t===yr&&yl()})}yr.push(e)}function Ed(){for(;yr.length>0;)yl()}const rs=new WeakMap;function gl(e){var t=Ne;if(t===null)return Pe.f|=Yn,e;if(ie&&e instanceof Error&&!rs.has(e)&&rs.set(e,xd(e,t)),(t.f&Ds)===0){if((t.f&Ua)===0)throw ie&&!t.parent&&e instanceof Error&&_l(e),e;t.b.error(e)}else Wr(e,t)}function Wr(e,t){for(;t!==null;){if((t.f&Ua)!==0)try{t.b.error(e);return}catch(i){e=i}t=t.parent}throw ie&&e instanceof Error&&_l(e),e}function xd(e,t){const i=br(e,"message");if(!(i&&!i.configurable)){for(var o=Rs?"  ":"	",u=`
${o}in ${t.fn?.name||"<unknown>"}`,c=t.ctx;c!==null;)u+=`
${o}in ${c.function?.[vd].split("/").pop()}`,c=c.p;return{message:e.message+`
${u}
`,stack:e.stack?.split(`
`).filter(d=>!d.includes("svelte/src/internal")).join(`
`)}}}function _l(e){const t=rs.get(e);t&&(Jn(e,"message",{value:t.message}),Jn(e,"stack",{value:t.stack}))}const da=new Set;let Fe=null,ya=null,Xt=null,Qt=[],Wa=null,is=!1,bi=!1;class _n{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Qt=[],ya=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of t)this.#o(o,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(ya=this,Fe=null,Su(i.render_effects),Su(i.effects),ya=null,this.#u?.resolve()),Xt=null}#o(t,i){t.f^=At;for(var o=t.first;o!==null;){var u=o.f,c=(u&(Cn|Ar))!==0,d=c&&(u&At)!==0,p=d||(u&Gt)!==0||this.skipped_effects.has(o);if((o.f&Ua)!==0&&o.b?.is_pending()&&(i={parent:i,effect:o,effects:[],render_effects:[],block_effects:[]}),!p&&o.fn!==null){c?o.f^=At:(u&ks)!==0?i.effects.push(o):Mi(o)&&((o.f&On)!==0&&i.block_effects.push(o),ki(o));var h=o.first;if(h!==null){o=h;continue}}var _=o.parent;for(o=o.next;o===null&&_!==null;)_===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),o=_.next,_=_.parent}}#s(t){for(const i of t)((i.f&Ft)!==0?this.#a:this.#i).push(i),this.#l(i.deps),kt(i,At)}#l(t){if(t!==null)for(const i of t)(i.f&gt)===0||(i.f&$n)===0||(i.f^=$n,this.#l(i.deps))}capture(t,i){this.previous.has(t)||this.previous.set(t,i),(t.f&Yn)===0&&(this.current.set(t,t.v),Xt?.set(t,t.v))}activate(){Fe=this,this.apply()}deactivate(){Fe===this&&(Fe=null,Xt=null)}flush(){if(this.activate(),Qt.length>0){if(bl(),Fe!==null&&Fe!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(da.size>1){this.previous.clear();var t=Xt,i=!0,o={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of da){if(c===this){i=!1;continue}const d=[];for(const[h,_]of this.current){if(c.current.has(h))if(i&&_!==c.current.get(h))c.current.set(h,_);else continue;d.push(h)}if(d.length===0)continue;const p=[...c.current.keys()].filter(h=>!this.current.has(h));if(p.length>0){var u=Qt;Qt=[];const h=new Set,_=new Map;for(const w of d)wl(w,p,h,_);if(Qt.length>0){Fe=c,c.apply();for(const w of Qt)c.#o(w,o);c.deactivate()}Qt=u}}Fe=null,Xt=t}this.committed=!0,da.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#a)kt(t,Ft),xr(t);for(const t of this.#i)kt(t,Ln),xr(t);this.#a=[],this.#i=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#u??=ol()).promise}static ensure(){if(Fe===null){const t=Fe=new _n;da.add(Fe),bi||_n.enqueue(()=>{Fe===t&&t.flush()})}return Fe}static enqueue(t){kr(t)}apply(){}}function Td(e){var t=bi;bi=!0;try{for(var i;;){if(Ed(),Qt.length===0&&(Fe?.flush(),Qt.length===0))return Wa=null,i;bl()}}finally{bi=t}}function bl(){var e=Zn;is=!0;var t=ie?new Set:null;try{var i=0;for(Ia(!0);Qt.length>0;){var o=_n.ensure();if(i++>1e3){if(ie){var u=new Map;for(const d of o.current.keys())for(const[p,h]of d.updated??[]){var c=u.get(p);c||(c={error:h.error,count:0},u.set(p,c)),c.count+=h.count}for(const d of u.values())d.error&&console.error(d.error)}Ad()}if(o.process(Qt),qn.clear(),ie)for(const d of o.current.keys())t.add(d)}}finally{if(is=!1,Ia(e),Wa=null,ie)for(const d of t)d.updated=null}}function Ad(){try{Qf()}catch(e){ie&&Jn(e,"stack",{value:""}),Wr(e,Wa)}}let An=null;function Su(e){var t=e.length;if(t!==0){for(var i=0;i<t;){var o=e[i++];if((o.f&(kn|Gt))===0&&Mi(o)&&(An=new Set,ki(o),o.deps===null&&o.first===null&&o.nodes_start===null&&(o.teardown===null&&o.ac===null?Ml(o):o.fn=null),An?.size>0)){qn.clear();for(const u of An){if((u.f&(kn|Gt))!==0)continue;const c=[u];let d=u.parent;for(;d!==null;)An.has(d)&&(An.delete(d),c.push(d)),d=d.parent;for(let p=c.length-1;p>=0;p--){const h=c[p];(h.f&(kn|Gt))===0&&ki(h)}}An.clear()}}An=null}}function wl(e,t,i,o){if(!i.has(e)&&(i.add(e),e.reactions!==null))for(const u of e.reactions){const c=u.f;(c&gt)!==0?wl(u,t,i,o):(c&(Va|On))!==0&&(c&Ft)===0&&El(u,t,o)&&(kt(u,Ft),xr(u))}}function El(e,t,i){const o=i.get(e);if(o!==void 0)return o;if(e.deps!==null)for(const u of e.deps){if(t.includes(u))return!0;if((u.f&gt)!==0&&El(u,t,i))return i.set(u,!0),!0}return i.set(e,!1),!1}function xr(e){for(var t=Wa=e;t.parent!==null;){t=t.parent;var i=t.f;if(is&&t===Ne&&(i&On)!==0&&(i&ul)===0)return;if((i&(Ar|Cn))!==0){if((i&At)===0)return;t.f^=At}}Qt.push(t)}function kd(e){let t=0,i=Tr(0),o;return ie&&dn(i,"createSubscriber version"),()=>{Ti()&&(y(i),Qa(()=>(t===0&&(o=Jr(()=>e(()=>wi(i)))),t+=1,()=>{kr(()=>{t-=1,t===0&&(o?.(),o=void 0,wi(i))})})))}}var Id=Hr|Xr|Ua;function Dd(e,t,i){new Sd(e,t,i)}class Sd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#v=0;#h=!1;#d=null;#_=kd(()=>(this.#d=Tr(this.#f),ie&&dn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(t,i,o){this.#t=t,this.#n=i,this.#u=o,this.parent=Ne.b,this.#e=!!this.#n.pending,this.#a=Ms(()=>{Ne.b=this;{var u=this.#y();try{this.#i=Rt(()=>o(u))}catch(c){this.error(c)}this.#v>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},Id)}#b(){try{this.#i=Rt(()=>this.#u(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#n.pending;t&&(this.#o=Rt(()=>t(this.#t)),_n.enqueue(()=>{var i=this.#y();this.#i=this.#p(()=>(_n.ensure(),Rt(()=>this.#u(i)))),this.#v>0?this.#m():(Br(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#y(){var t=this.#t;return this.#e&&(this.#c=Sn(),this.#t.before(this.#c),t=this.#c),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var i=Ne,o=Pe,u=st;on(this.#a),Nt(this.#a),Ur(this.#a.ctx);try{return t()}catch(c){return gl(c),null}finally{on(i),Nt(o),Ur(u)}}#m(){const t=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Fl(this.#i,this.#l)),this.#o===null&&(this.#o=Rt(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#v+=t,this.#v===0&&(this.#e=!1,this.#o&&Br(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(t){this.#g(t),this.#f+=t,this.#d&&Yr(this.#d,this.#f)}get_effect_pending(){return this.#_(),y(this.#d)}error(t){var i=this.#n.onerror;let o=this.#n.failed;if(this.#h||!i&&!o)throw t;this.#i&&(yt(this.#i),this.#i=null),this.#o&&(yt(this.#o),this.#o=null),this.#s&&(yt(this.#s),this.#s=null);var u=!1,c=!1;const d=()=>{if(u){yd();return}u=!0,c&&rd(),_n.ensure(),this.#f=0,this.#s!==null&&Br(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#h=!1,Rt(()=>this.#u(this.#t)))),this.#v>0?this.#m():this.#e=!1};var p=Pe;try{Nt(null),c=!0,i?.(t,d),c=!1}catch(h){Wr(h,this.#a&&this.#a.parent)}finally{Nt(p)}o&&kr(()=>{this.#s=this.#p(()=>{_n.ensure(),this.#h=!0;try{return Rt(()=>{o(this.#t,()=>t,()=>d)})}catch(h){return Wr(h,this.#a.parent),null}finally{this.#h=!1}})})}}function ga(e,t){return t}function Od(e,t,i){for(var o=[],u=t.length,c=0;c<u;c++)Ns(t[c].e,o,!0);Nl(o,()=>{var d=o.length===0&&i!==null;if(d){var p=i,h=p.parentNode;Vd(h),h.append(p),e.items.clear(),vn(e,t[0].prev,t[u-1].next)}for(var _=0;_<u;_++){var w=t[_];d||(e.items.delete(w.k),vn(e,w.prev,w.next)),yt(w.e,!d)}e.first===t[0]&&(e.first=t[0].prev)})}function Fr(e,t,i,o,u,c=null){var d=e,p=new Map,h=null,_=(t&dl)!==0,w=(t&cl)!==0,T=(t&fl)!==0;if(_){var b=e;d=b.appendChild(Sn())}var E=null,O=Cs(()=>{var N=i();return xs(N)?N:N==null?[]:Ts(N)}),L,I=!0;function k(){Cd(F,L,d,t,o),E!==null&&(L.length===0?(E.fragment?(d.before(E.fragment),E.fragment=null):Ks(E.effect),H.first=E.effect):Br(E.effect,()=>{E=null}))}var H=Ms(()=>{L=y(O);for(var N=L.length,G=new Set,J=Fe,se=null,ne=Ol(),oe=0;oe<N;oe+=1){var fe=L[oe],re=o(fe,oe),ge=I?null:p.get(re);ge?(w&&Yr(ge.v,fe),T?Yr(ge.i,oe):ge.i=oe,ne&&J.skipped_effects.delete(ge.e)):(ge=Ld(I?d:null,se,fe,re,oe,u,t,i),I&&(ge.o=!0,se===null?h=ge:se.next=ge,se=ge),p.set(re,ge)),G.add(re)}if(N===0&&c&&!E)if(I)E={fragment:null,effect:Rt(()=>c(d))};else{var ze=document.createDocumentFragment(),Ke=Sn();ze.append(Ke),E={fragment:ze,effect:Rt(()=>c(Ke))}}if(!I)if(ne){for(const[Qe,Xe]of p)G.has(Qe)||J.skipped_effects.add(Xe.e);J.oncommit(k),J.ondiscard(()=>{})}else k();y(O)}),F={effect:H,items:p,first:h};I=!1}function Cd(e,t,i,o,u){var c=(o&id)!==0,d=t.length,p=e.items,h=e.first,_,w=null,T,b=[],E=[],O,L,I,k;if(c)for(k=0;k<d;k+=1)O=t[k],L=u(O,k),I=p.get(L),I.o&&(I.a?.measure(),(T??=new Set).add(I));for(k=0;k<d;k+=1){if(O=t[k],L=u(O,k),I=p.get(L),e.first??=I,!I.o){I.o=!0;var H=w?w.next:h;vn(e,w,I),vn(e,I,H),Vo(I,H,i),w=I,b=[],E=[],h=w.next;continue}if((I.e.f&Gt)!==0&&(Ks(I.e),c&&(I.a?.unfix(),(T??=new Set).delete(I))),I!==h){if(_!==void 0&&_.has(I)){if(b.length<E.length){var F=E[0],N;w=F.prev;var G=b[0],J=b[b.length-1];for(N=0;N<b.length;N+=1)Vo(b[N],F,i);for(N=0;N<E.length;N+=1)_.delete(E[N]);vn(e,G.prev,J.next),vn(e,w,G),vn(e,J,F),h=F,w=J,k-=1,b=[],E=[]}else _.delete(I),Vo(I,h,i),vn(e,I.prev,I.next),vn(e,I,w===null?e.first:w.next),vn(e,w,I),w=I;continue}for(b=[],E=[];h!==null&&h.k!==L;)(h.e.f&Gt)===0&&(_??=new Set).add(h),E.push(h),h=h.next;if(h===null)continue;I=h}b.push(I),w=I,h=I.next}if(h!==null||_!==void 0){for(var se=_===void 0?[]:Ts(_);h!==null;)(h.e.f&Gt)===0&&se.push(h),h=h.next;var ne=se.length;if(ne>0){var oe=(o&dl)!==0&&d===0?i:null;if(c){for(k=0;k<ne;k+=1)se[k].a?.measure();for(k=0;k<ne;k+=1)se[k].a?.fix()}Od(e,se,oe)}}c&&kr(()=>{if(T!==void 0)for(I of T)I.a?.apply()})}function Ld(e,t,i,o,u,c,d,p){var h=(d&cl)!==0,_=(d&ad)===0,w=h?_?Al(i,!1,!1):Tr(i):i,T=(d&fl)===0?u:Tr(u);ie&&h&&(w.trace=()=>{var O=typeof T=="number"?u:T.v;p()[O]});var b={i:T,v:w,k:o,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var E=document.createDocumentFragment();E.append(e=Sn())}return b.e=Rt(()=>c(e,w,T,p)),t!==null&&(t.next=b),b}finally{}}function Vo(e,t,i){for(var o=e.next?e.next.e.nodes_start:i,u=t?t.e.nodes_start:i,c=e.e.nodes_start;c!==null&&c!==o;){var d=Ri(c);u.before(c),c=d}}function vn(e,t,i){t===null?(e.first=i,e.effect.first=i&&i.e):(t.e===e.effect.last&&i!==null&&(e.effect.last=i.e),t.e.next&&(t.e.next.prev=null),t.next=i,t.e.next=i&&i.e),i===null?e.effect.last=t&&t.e:(i.e===e.effect.last&&t===null&&(e.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=t,i.e.prev=t&&t.e)}function xl(e,t,i,o){const u=Pi()?Ga:Cs;if(i.length===0&&e.length===0){o(t.map(u));return}var c=Fe,d=Ne,p=Pd();function h(){Promise.all(i.map(_=>Md(_))).then(_=>{p();try{o([...t.map(u),..._])}catch(w){(d.f&kn)===0&&Wr(w,d)}c?.deactivate(),Aa()}).catch(_=>{Wr(_,d)})}e.length>0?Promise.all(e).then(()=>{p();try{return h()}finally{c?.deactivate(),Aa()}}):h()}function Pd(){var e=Ne,t=Pe,i=st,o=Fe;if(ie)var u=Vr;return function(d=!0){on(e),Nt(t),Ur(i),d&&o?.activate(),ie&&Ta(u)}}function Aa(){on(null),Nt(null),Ur(null),ie&&Ta(null)}const Rd=new Set;function Ga(e){var t=gt|Ft,i=Pe!==null&&(Pe.f&gt)!==0?Pe:null;return Ne!==null&&(Ne.f|=Xr),{ctx:st,deps:null,effects:null,equals:vl,f:t,fn:e,reactions:null,rv:0,v:ht,wv:0,parent:i??Ne,ac:null}}function Md(e,t){let i=Ne;i===null&&Wf();var o=i.b,u=void 0,c=Tr(ht),d=!Pe,p=new Map;return Xd(()=>{var h=ol();u=h.promise;try{Promise.resolve(e()).then(h.resolve,h.reject).then(()=>{_===Fe&&_.committed&&_.deactivate(),Aa()})}catch(b){h.reject(b),Aa()}var _=Fe;if(d){var w=!o.is_pending();o.update_pending_count(1),_.increment(w),p.get(_)?.reject(Nr),p.delete(_),p.set(_,h)}const T=(b,E=void 0)=>{if(_.activate(),E)E!==Nr&&(c.f|=Yn,Yr(c,E));else{(c.f&Yn)!==0&&(c.f^=Yn),Yr(c,b);for(const[O,L]of p){if(p.delete(O),O===_)break;L.reject(Nr)}}d&&(o.update_pending_count(-1),_.decrement(w))};h.promise.then(T,b=>T(null,b||"unknown"))}),qa(()=>{for(const h of p.values())h.reject(Nr)}),ie&&(c.f|=Va),new Promise(h=>{function _(w){function T(){w===u?h(c):_(u)}w.then(T,T)}_(u)})}function it(e){const t=Ga(e);return Bl(t),t}function Cs(e){const t=Ga(e);return t.equals=pl,t}function as(e){var t=e.effects;if(t!==null){e.effects=null;for(var i=0;i<t.length;i+=1)yt(t[i])}}let Wo=[];function Nd(e){for(var t=e.parent;t!==null;){if((t.f&gt)===0)return(t.f&kn)===0?t:null;t=t.parent}return null}function Ls(e){var t,i=Ne;if(on(Nd(e)),ie){let o=Gr;Ou(new Set);try{Wo.includes(e)&&Gf(),Wo.push(e),e.f&=~$n,as(e),t=os(e)}finally{on(i),Ou(o),Wo.pop()}}else try{e.f&=~$n,as(e),t=os(e)}finally{on(i)}return t}function Tl(e){var t=Ls(e);if(e.equals(t)||(Fe?.is_fork||(e.v=t),e.wv=zl()),!Ir)if(Xt!==null)(Ti()||Fe?.is_fork)&&Xt.set(e,t);else{var i=(e.f&sn)===0?Ln:At;kt(e,i)}}let Gr=new Set;const qn=new Map;function Ou(e){Gr=e}let Ps=!1;function Kd(){Ps=!0}function Tr(e,t){var i={f:0,v:e,reactions:null,equals:vl,rv:0,wv:0};return i}function me(e,t){const i=Tr(e);return Bl(i),i}function Al(e,t=!1,i=!0){const o=Tr(e);return t||(o.equals=pl),Ci&&i&&st!==null&&st.l!==null&&(st.l.s??=[]).push(o),o}function M(e,t,i=!1){Pe!==null&&(!bn||(Pe.f&xa)!==0)&&Pi()&&(Pe.f&(gt|On|Va|xa))!==0&&!Dn?.includes(e)&&nd();let o=i?Jt(t):t;return ie&&ml(o,e.label),Yr(e,o)}function Yr(e,t){if(!e.equals(t)){var i=e.v;Ir?qn.set(e,t):qn.set(e,i),e.v=t;var o=_n.ensure();if(o.capture(e,i),ie){if(Ne!==null){e.updated??=new Map;const u=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:u}),u>5){const c=bd("updated at");if(c!==null){let d=e.updated.get(c.stack);d||(d={error:c,count:0},e.updated.set(c.stack,d)),d.count++}}}Ne!==null&&(e.set_during_effect=!0)}(e.f&gt)!==0&&((e.f&Ft)!==0&&Ls(e),kt(e,(e.f&sn)!==0?At:Ln)),e.wv=zl(),Il(e,Ft),Pi()&&Ne!==null&&(Ne.f&At)!==0&&(Ne.f&(Cn|Ar))===0&&(qt===null?ev([e]):qt.push(e)),!o.is_fork&&Gr.size>0&&!Ps&&kl()}return t}function kl(){Ps=!1;var e=Zn;Ia(!0);const t=Array.from(Gr);try{for(const i of t)(i.f&At)!==0&&kt(i,Ln),Mi(i)&&ki(i)}finally{Ia(e)}Gr.clear()}function wi(e){M(e,e.v+1)}function Il(e,t){var i=e.reactions;if(i!==null)for(var o=Pi(),u=i.length,c=0;c<u;c++){var d=i[c],p=d.f;if(!(!o&&d===Ne)){if(ie&&(p&xa)!==0){Gr.add(d);continue}var h=(p&Ft)===0;if(h&&kt(d,t),(p&gt)!==0){var _=d;Xt?.delete(_),(p&$n)===0&&(p&sn&&(d.f|=$n),Il(_,Ln))}else h&&((p&On)!==0&&An!==null&&An.add(d),xr(d))}}}const Fd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Jt(e){if(typeof e!="object"||e===null||In in e)return e;const t=As(e);if(t!==Bf&&t!==jf)return e;var i=new Map,o=xs(e),u=me(0),c=wr,d=w=>{if(wr===c)return w();var T=Pe,b=wr;Nt(null),Ru(c);var E=w();return Nt(T),Ru(b),E};o&&(i.set("length",me(e.length)),ie&&(e=zd(e)));var p="";let h=!1;function _(w){if(!h){h=!0,p=w,dn(u,`${p} version`);for(const[T,b]of i)dn(b,hr(p,T));h=!1}}return new Proxy(e,{defineProperty(w,T,b){(!("value"in b)||b.configurable===!1||b.enumerable===!1||b.writable===!1)&&ed();var E=i.get(T);return E===void 0?E=d(()=>{var O=me(b.value);return i.set(T,O),ie&&typeof T=="string"&&dn(O,hr(p,T)),O}):M(E,b.value,!0),!0},deleteProperty(w,T){var b=i.get(T);if(b===void 0){if(T in w){const E=d(()=>me(ht));i.set(T,E),wi(u),ie&&dn(E,hr(p,T))}}else M(b,ht),wi(u);return!0},get(w,T,b){if(T===In)return e;if(ie&&T===ll)return _;var E=i.get(T),O=T in w;if(E===void 0&&(!O||br(w,T)?.writable)&&(E=d(()=>{var I=Jt(O?w[T]:ht),k=me(I);return ie&&dn(k,hr(p,T)),k}),i.set(T,E)),E!==void 0){var L=y(E);return L===ht?void 0:L}return Reflect.get(w,T,b)},getOwnPropertyDescriptor(w,T){var b=Reflect.getOwnPropertyDescriptor(w,T);if(b&&"value"in b){var E=i.get(T);E&&(b.value=y(E))}else if(b===void 0){var O=i.get(T),L=O?.v;if(O!==void 0&&L!==ht)return{enumerable:!0,configurable:!0,value:L,writable:!0}}return b},has(w,T){if(T===In)return!0;var b=i.get(T),E=b!==void 0&&b.v!==ht||Reflect.has(w,T);if(b!==void 0||Ne!==null&&(!E||br(w,T)?.writable)){b===void 0&&(b=d(()=>{var L=E?Jt(w[T]):ht,I=me(L);return ie&&dn(I,hr(p,T)),I}),i.set(T,b));var O=y(b);if(O===ht)return!1}return E},set(w,T,b,E){var O=i.get(T),L=T in w;if(o&&T==="length")for(var I=b;I<O.v;I+=1){var k=i.get(I+"");k!==void 0?M(k,ht):I in w&&(k=d(()=>me(ht)),i.set(I+"",k),ie&&dn(k,hr(p,I)))}if(O===void 0)(!L||br(w,T)?.writable)&&(O=d(()=>me(void 0)),ie&&dn(O,hr(p,T)),M(O,Jt(b)),i.set(T,O));else{L=O.v!==ht;var H=d(()=>Jt(b));M(O,H)}var F=Reflect.getOwnPropertyDescriptor(w,T);if(F?.set&&F.set.call(E,b),!L){if(o&&typeof T=="string"){var N=i.get("length"),G=Number(T);Number.isInteger(G)&&G>=N.v&&M(N,G+1)}wi(u)}return!0},ownKeys(w){y(u);var T=Reflect.ownKeys(w).filter(O=>{var L=i.get(O);return L===void 0||L.v!==ht});for(var[b,E]of i)E.v!==ht&&!(b in w)&&T.push(b);return T},setPrototypeOf(){td()}})}function hr(e,t){return typeof t=="symbol"?`${e}[Symbol(${t.description??""})]`:Fd.test(t)?`${e}.${t}`:/^\d+$/.test(t)?`${e}[${t}]`:`${e}['${t}']`}function Ei(e){try{if(e!==null&&typeof e=="object"&&In in e)return e[In]}catch{}return e}function Bd(e,t){return Object.is(Ei(e),Ei(t))}const jd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function zd(e){return new Proxy(e,{get(t,i,o){var u=Reflect.get(t,i,o);return jd.has(i)?function(...c){Kd();var d=u.apply(this,c);return kl(),d}:u}})}function Hd(){const e=Array.prototype,t=Array.__svelte_cleanup;t&&t();const{indexOf:i,lastIndexOf:o,includes:u}=e;e.indexOf=function(c,d){const p=i.call(this,c,d);if(p===-1){for(let h=d??0;h<this.length;h+=1)if(Ei(this[h])===c){Uo("array.indexOf(...)");break}}return p},e.lastIndexOf=function(c,d){const p=o.call(this,c,d??this.length-1);if(p===-1){for(let h=0;h<=(d??this.length-1);h+=1)if(Ei(this[h])===c){Uo("array.lastIndexOf(...)");break}}return p},e.includes=function(c,d){const p=u.call(this,c,d);if(!p){for(let h=0;h<this.length;h+=1)if(Ei(this[h])===c){Uo("array.includes(...)");break}}return p},Array.__svelte_cleanup=()=>{e.indexOf=i,e.lastIndexOf=o,e.includes=u}}var Cu,Rs,Dl,Sl;function Ud(){if(Cu===void 0){Cu=window,Rs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,i=Text.prototype;Dl=br(t,"firstChild").get,Sl=br(t,"nextSibling").get,ku(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ku(i)&&(i.__t=void 0),ie&&(e.__svelte_meta=null,Hd())}}function Sn(e=""){return document.createTextNode(e)}function ka(e){return Dl.call(e)}function Ri(e){return Sl.call(e)}function _e(e,t){return ka(e)}function xt(e,t=!1){{var i=ka(e);return i instanceof Comment&&i.data===""?Ri(i):i}}function Me(e,t=1,i=!1){let o=e;for(;t--;)o=Ri(o);return o}function Vd(e){e.textContent=""}function Ol(){return!1}function Wd(e,t){if(t){const i=document.body;e.autofocus=!0,kr(()=>{document.activeElement===i&&e.focus()})}}let Lu=!1;function Gd(){Lu||(Lu=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Ya(e){var t=Pe,i=Ne;Nt(null),on(null);try{return e()}finally{Nt(t),on(i)}}function Yd(e,t,i,o=i){e.addEventListener(t,()=>Ya(i));const u=e.__on_r;u?e.__on_r=()=>{u(),o(!0)}:e.__on_r=()=>o(!0),Gd()}function qd(e){Ne===null&&(Pe===null&&Zf(e),qf()),Ir&&Yf(e)}function Zd(e,t){var i=t.last;i===null?t.last=t.first=e:(i.next=e,e.prev=i,t.last=e)}function wn(e,t,i){var o=Ne;if(ie)for(;o!==null&&(o.f&xa)!==0;)o=o.parent;o!==null&&(o.f&Gt)!==0&&(e|=Gt);var u={ctx:st,deps:null,nodes_start:null,nodes_end:null,f:e|Ft|sn,first:null,fn:t,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(ie&&(u.component_function=Li),i)try{ki(u),u.f|=Ds}catch(p){throw yt(u),p}else t!==null&&xr(u);var c=u;if(i&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&Xr)===0&&(c=c.first,(e&On)!==0&&(e&Hr)!==0&&c!==null&&(c.f|=Hr)),c!==null&&(c.parent=o,o!==null&&Zd(c,o),Pe!==null&&(Pe.f&gt)!==0&&(e&Ar)===0)){var d=Pe;(d.effects??=[]).push(c)}return u}function Ti(){return Pe!==null&&!bn}function qa(e){const t=wn(Is,null,!1);return kt(t,At),t.teardown=e,t}function qe(e){qd("$effect"),ie&&Jn(e,"name",{value:"$effect"});var t=Ne.f,i=!Pe&&(t&Cn)!==0&&(t&Ds)===0;if(i){var o=st;(o.e??=[]).push(e)}else return Cl(e)}function Cl(e){return wn(ks|Hf,e,!1)}function Qd(e){_n.ensure();const t=wn(Ar|Xr,e,!0);return(i={})=>new Promise(o=>{i.outro?Br(t,()=>{yt(t),o(void 0)}):(yt(t),o(void 0))})}function Za(e){return wn(ks,e,!1)}function Xd(e){return wn(Va|Xr,e,!0)}function Qa(e,t=0){return wn(Is|t,e,!0)}function ct(e,t=[],i=[],o=[]){xl(o,t,i,u=>{wn(Is,()=>e(...u.map(y)),!0)})}function Ms(e,t=0){var i=wn(On|t,e,!0);return ie&&(i.dev_stack=Vr),i}function Ll(e,t=0){var i=wn(sl|t,e,!0);return ie&&(i.dev_stack=Vr),i}function Rt(e){return wn(Cn|Xr,e,!0)}function Pl(e){var t=e.teardown;if(t!==null){const i=Ir,o=Pe;Pu(!0),Nt(null);try{t.call(null)}finally{Pu(i),Nt(o)}}}function Rl(e,t=!1){var i=e.first;for(e.first=e.last=null;i!==null;){const u=i.ac;u!==null&&Ya(()=>{u.abort(Nr)});var o=i.next;(i.f&Ar)!==0?i.parent=null:yt(i,t),i=o}}function Jd(e){for(var t=e.first;t!==null;){var i=t.next;(t.f&Cn)===0&&yt(t),t=i}}function yt(e,t=!0){var i=!1;(t||(e.f&ul)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&($d(e.nodes_start,e.nodes_end),i=!0),Rl(e,t&&!i),Da(e,0),kt(e,kn);var o=e.transitions;if(o!==null)for(const c of o)c.stop();Pl(e);var u=e.parent;u!==null&&u.first!==null&&Ml(e),ie&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function $d(e,t){for(;e!==null;){var i=e===t?null:Ri(e);e.remove(),e=i}}function Ml(e){var t=e.parent,i=e.prev,o=e.next;i!==null&&(i.next=o),o!==null&&(o.prev=i),t!==null&&(t.first===e&&(t.first=o),t.last===e&&(t.last=i))}function Br(e,t,i=!0){var o=[];Ns(e,o,!0),Nl(o,()=>{i&&yt(e),t&&t()})}function Nl(e,t){var i=e.length;if(i>0){var o=()=>--i||t();for(var u of e)u.out(o)}else t()}function Ns(e,t,i){if((e.f&Gt)===0){if(e.f^=Gt,e.transitions!==null)for(const d of e.transitions)(d.is_global||i)&&t.push(d);for(var o=e.first;o!==null;){var u=o.next,c=(o.f&Hr)!==0||(o.f&Cn)!==0&&(e.f&On)!==0;Ns(o,t,c?i:!1),o=u}}}function Ks(e){Kl(e,!0)}function Kl(e,t){if((e.f&Gt)!==0){e.f^=Gt,(e.f&At)===0&&(kt(e,Ft),xr(e));for(var i=e.first;i!==null;){var o=i.next,u=(i.f&Hr)!==0||(i.f&Cn)!==0;Kl(i,u?t:!1),i=o}if(e.transitions!==null)for(const c of e.transitions)(c.is_global||t)&&c.in()}}function Fl(e,t){for(var i=e.nodes_start,o=e.nodes_end;i!==null;){var u=i===o?null:Ri(i);t.append(i),i=u}}let Zn=!1;function Ia(e){Zn=e}let Ir=!1;function Pu(e){Ir=e}let Pe=null,bn=!1;function Nt(e){Pe=e}let Ne=null;function on(e){Ne=e}let Dn=null;function Bl(e){Pe!==null&&(Dn===null?Dn=[e]:Dn.push(e))}let St=null,Vt=0,qt=null;function ev(e){qt=e}let jl=1,Ai=0,wr=Ai;function Ru(e){wr=e}function zl(){return++jl}function Mi(e){var t=e.f;if((t&Ft)!==0)return!0;if(t&gt&&(e.f&=~$n),(t&Ln)!==0){var i=e.deps;if(i!==null)for(var o=i.length,u=0;u<o;u++){var c=i[u];if(Mi(c)&&Tl(c),c.wv>e.wv)return!0}(t&sn)!==0&&Xt===null&&kt(e,At)}return!1}function Hl(e,t,i=!0){var o=e.reactions;if(o!==null&&!Dn?.includes(e))for(var u=0;u<o.length;u++){var c=o[u];(c.f&gt)!==0?Hl(c,t,!1):t===c&&(i?kt(c,Ft):(c.f&At)!==0&&kt(c,Ln),xr(c))}}function os(e){var t=St,i=Vt,o=qt,u=Pe,c=Dn,d=st,p=bn,h=wr,_=e.f;St=null,Vt=0,qt=null,Pe=(_&(Cn|Ar))===0?e:null,Dn=null,Ur(e.ctx),bn=!1,wr=++Ai,e.ac!==null&&(Ya(()=>{e.ac.abort(Nr)}),e.ac=null);try{e.f|=ns;var w=e.fn,T=w(),b=e.deps;if(St!==null){var E;if(Da(e,Vt),b!==null&&Vt>0)for(b.length=Vt+St.length,E=0;E<St.length;E++)b[Vt+E]=St[E];else e.deps=b=St;if(Zn&&Ti()&&(e.f&sn)!==0)for(E=Vt;E<b.length;E++)(b[E].reactions??=[]).push(e)}else b!==null&&Vt<b.length&&(Da(e,Vt),b.length=Vt);if(Pi()&&qt!==null&&!bn&&b!==null&&(e.f&(gt|Ln|Ft))===0)for(E=0;E<qt.length;E++)Hl(qt[E],e);return u!==null&&u!==e&&(Ai++,qt!==null&&(o===null?o=qt:o.push(...qt))),(e.f&Yn)!==0&&(e.f^=Yn),T}catch(O){return gl(O)}finally{e.f^=ns,St=t,Vt=i,qt=o,Pe=u,Dn=c,Ur(d),bn=p,wr=h}}function tv(e,t){let i=t.reactions;if(i!==null){var o=Ff.call(i,e);if(o!==-1){var u=i.length-1;u===0?i=t.reactions=null:(i[o]=i[u],i.pop())}}i===null&&(t.f&gt)!==0&&(St===null||!St.includes(t))&&(kt(t,Ln),(t.f&sn)!==0&&(t.f^=sn,t.f&=~$n),as(t),Da(t,0))}function Da(e,t){var i=e.deps;if(i!==null)for(var o=t;o<i.length;o++)tv(e,i[o])}function ki(e){var t=e.f;if((t&kn)===0){kt(e,At);var i=Ne,o=Zn;if(Ne=e,Zn=!0,ie){var u=Li;Du(e.component_function);var c=Vr;Ta(e.dev_stack??Vr)}try{(t&(On|sl))!==0?Jd(e):Rl(e),Pl(e);var d=os(e);e.teardown=typeof d=="function"?d:null,e.wv=jl;var p;ie&&gd&&(e.f&Ft)!==0&&e.deps}finally{Zn=o,Ne=i,ie&&(Du(u),Ta(c))}}}async function nn(){await Promise.resolve(),Td()}function y(e){var t=e.f,i=(t&gt)!==0;if(Pe!==null&&!bn){var o=Ne!==null&&(Ne.f&kn)!==0;if(!o&&!Dn?.includes(e)){var u=Pe.deps;if((Pe.f&ns)!==0)e.rv<Ai&&(e.rv=Ai,St===null&&u!==null&&u[Vt]===e?Vt++:St===null?St=[e]:St.includes(e)||St.push(e));else{(Pe.deps??=[]).push(e);var c=e.reactions;c===null?e.reactions=[Pe]:c.includes(Pe)||c.push(Pe)}}}if(ie&&Rd.delete(e),Ir){if(qn.has(e))return qn.get(e);if(i){var d=e,p=d.v;return((d.f&At)===0&&d.reactions!==null||Vl(d))&&(p=Ls(d)),qn.set(d,p),p}}else i&&(!Xt?.has(e)||Fe?.is_fork&&!Ti())&&(d=e,Mi(d)&&Tl(d),Zn&&Ti()&&(d.f&sn)===0&&Ul(d));if(Xt?.has(e))return Xt.get(e);if((e.f&Yn)!==0)throw e.v;return e.v}function Ul(e){if(e.deps!==null){e.f^=sn;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&gt)!==0&&(t.f&sn)===0&&Ul(t)}}function Vl(e){if(e.v===ht)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(qn.has(t)||(t.f&gt)!==0&&Vl(t))return!0;return!1}function Jr(e){var t=bn;try{return bn=!0,e()}finally{bn=t}}const nv=-7169;function kt(e,t){e.f=e.f&nv|t}function rv(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(In in e)ss(e);else if(!Array.isArray(e))for(let t in e){const i=e[t];typeof i=="object"&&i&&In in i&&ss(i)}}}function ss(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let o in e)try{ss(e[o],t)}catch{}const i=As(e);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const o=al(i);for(let u in o){const c=o[u].get;if(c)try{c.call(e)}catch{}}}}}function iv(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const av=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ov(e){return av.includes(e)}const sv={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function uv(e){return e=e.toLowerCase(),sv[e]??e}const lv=["touchstart","touchmove"];function cv(e){return lv.includes(e)}const Wl=new Set,us=new Set;function Gl(e,t,i,o={}){function u(c){if(o.capture||gi.call(t,c),!c.cancelBubble)return Ya(()=>i?.call(this,c))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?kr(()=>{t.addEventListener(e,u,o)}):t.addEventListener(e,u,o),u}function gr(e,t,i,o,u){var c={capture:o,passive:u},d=Gl(e,t,i,c);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&qa(()=>{t.removeEventListener(e,d,c)})}function $r(e){for(var t=0;t<e.length;t++)Wl.add(e[t]);for(var i of us)i(e)}let Mu=null;function gi(e){var t=this,i=t.ownerDocument,o=e.type,u=e.composedPath?.()||[],c=u[0]||e.target;Mu=e;var d=0,p=Mu===e&&e.__root;if(p){var h=u.indexOf(p);if(h!==-1&&(t===document||t===window)){e.__root=t;return}var _=u.indexOf(t);if(_===-1)return;h<=_&&(d=h)}if(c=u[d]||e.target,c!==t){Jn(e,"currentTarget",{configurable:!0,get(){return c||i}});var w=Pe,T=Ne;Nt(null),on(null);try{for(var b,E=[];c!==null;){var O=c.assignedSlot||c.parentNode||c.host||null;try{var L=c["__"+o];L!=null&&(!c.disabled||e.target===c)&&L.call(c,e)}catch(I){b?E.push(I):b=I}if(e.cancelBubble||O===t||O===null)break;c=O}if(b){for(let I of E)queueMicrotask(()=>{throw I});throw b}}finally{e.__root=t,delete e.currentTarget,Nt(w),on(T)}}}function fv(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Sa(e,t){var i=Ne;i.nodes_start===null&&(i.nodes_start=e,i.nodes_end=t)}function Te(e,t){var i=(t&fd)!==0,o=(t&dd)!==0,u,c=!e.startsWith("<!>");return()=>{u===void 0&&(u=fv(c?e:"<!>"+e),i||(u=ka(u)));var d=o||Rs?document.importNode(u,!0):u.cloneNode(!0);if(i){var p=ka(d),h=d.lastChild;Sa(p,h)}else Sa(d,d);return d}}function mn(e=""){{var t=Sn(e+"");return Sa(t,t),t}}function Qn(){var e=document.createDocumentFragment(),t=document.createComment(""),i=Sn();return e.append(t,i),Sa(t,i),e}function de(e,t){e!==null&&e.before(t)}function _r(e,t){var i=t==null?"":typeof t=="object"?t+"":t;i!==(e.__t??=e.nodeValue)&&(e.__t=i,e.nodeValue=i+"")}function dv(e,t){return vv(e,t)}const Mr=new Map;function vv(e,{target:t,anchor:i,props:o={},events:u,context:c,intro:d=!0}){Ud();var p=new Set,h=T=>{for(var b=0;b<T.length;b++){var E=T[b];if(!p.has(E)){p.add(E);var O=cv(E);t.addEventListener(E,gi,{passive:O});var L=Mr.get(E);L===void 0?(document.addEventListener(E,gi,{passive:O}),Mr.set(E,1)):Mr.set(E,L+1)}}};h(Ts(Wl)),us.add(h);var _=void 0,w=Qd(()=>{var T=i??t.appendChild(Sn());return Dd(T,{pending:()=>{}},b=>{if(c){nr({});var E=st;E.c=c}u&&(o.$$events=u),_=e(b,o)||{},c&&rr()}),()=>{for(var b of p){t.removeEventListener(b,gi);var E=Mr.get(b);--E===0?(document.removeEventListener(b,gi),Mr.delete(b)):Mr.set(b,E)}us.delete(h),T!==i&&T.parentNode?.removeChild(T)}});return hv.set(_,w),_}let hv=new WeakMap;class pv{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(t,i=!0){this.anchor=t,this.#u=i}#a=()=>{var t=Fe;if(this.#e.has(t)){var i=this.#e.get(t),o=this.#t.get(i);if(o)Ks(o),this.#n.delete(i);else{var u=this.#r.get(i);u&&(this.#t.set(i,u.effect),this.#r.delete(i),u.fragment.lastChild.remove(),this.anchor.before(u.fragment),o=u.effect)}for(const[c,d]of this.#e){if(this.#e.delete(c),c===t)break;const p=this.#r.get(d);p&&(yt(p.effect),this.#r.delete(d))}for(const[c,d]of this.#t){if(c===i||this.#n.has(c))continue;const p=()=>{if(Array.from(this.#e.values()).includes(c)){var _=document.createDocumentFragment();Fl(d,_),_.append(Sn()),this.#r.set(c,{effect:d,fragment:_})}else yt(d);this.#n.delete(c),this.#t.delete(c)};this.#u||!o?(this.#n.add(c),Br(d,p,!1)):p()}}};#i=t=>{this.#e.delete(t);const i=Array.from(this.#e.values());for(const[o,u]of this.#r)i.includes(o)||(yt(u.effect),this.#r.delete(o))};ensure(t,i){var o=Fe,u=Ol();if(i&&!this.#t.has(t)&&!this.#r.has(t))if(u){var c=document.createDocumentFragment(),d=Sn();c.append(d),this.#r.set(t,{effect:Rt(()=>i(d)),fragment:c})}else this.#t.set(t,Rt(()=>i(this.anchor)));if(this.#e.set(o,t),u){for(const[p,h]of this.#t)p===t?o.skipped_effects.delete(h):o.skipped_effects.add(h);for(const[p,h]of this.#r)p===t?o.skipped_effects.delete(h.effect):o.skipped_effects.add(h.effect);o.oncommit(this.#a),o.ondiscard(this.#i)}else this.#a()}}function tt(e,t,i=!1){var o=new pv(e),u=i?Hr:0;function c(d,p){o.ensure(d,p)}Ms(()=>{var d=!1;t((p,h=!0)=>{d=!0,c(h,p)}),d||c(!1,null)},u)}function mv(e,t,i,o,u){var c=t.$$slots?.[i],d=!1;c===!0&&(c=t.children,d=!0),c===void 0||c(e,d?()=>o:o)}function Yl(e,t,i){Za(()=>{var o=Jr(()=>t(e,i?.())||{});if(i&&o?.update){var u=!1,c={};Qa(()=>{var d=i();rv(d),u&&hl(c,d)&&(c=d,o.update(d))}),u=!0}if(o?.destroy)return()=>o.destroy()})}function yv(e,t){var i=void 0,o;Ll(()=>{i!==(i=t())&&(o&&(yt(o),o=null),i&&(o=Rt(()=>{Za(()=>i(e))})))})}function ql(e){var t,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(i=ql(e[t]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}function gv(){for(var e,t,i=0,o="",u=arguments.length;i<u;i++)(e=arguments[i])&&(t=ql(e))&&(o&&(o+=" "),o+=t);return o}function Zl(e){return typeof e=="object"?gv(e):e??""}const Nu=[...` 	
\r\fÂ \v\uFEFF`];function _v(e,t,i){var o=e==null?"":""+e;if(t&&(o=o?o+" "+t:t),i){for(var u in i)if(i[u])o=o?o+" "+u:u;else if(o.length)for(var c=u.length,d=0;(d=o.indexOf(u,d))>=0;){var p=d+c;(d===0||Nu.includes(o[d-1]))&&(p===o.length||Nu.includes(o[p]))?o=(d===0?"":o.substring(0,d))+o.substring(p+1):d=p}}return o===""?null:o}function Ku(e,t=!1){var i=t?" !important;":";",o="";for(var u in e){var c=e[u];c!=null&&c!==""&&(o+=" "+u+": "+c+i)}return o}function Go(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function bv(e,t){if(t){var i="",o,u;if(Array.isArray(t)?(o=t[0],u=t[1]):o=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var c=!1,d=0,p=!1,h=[];o&&h.push(...Object.keys(o).map(Go)),u&&h.push(...Object.keys(u).map(Go));var _=0,w=-1;const L=e.length;for(var T=0;T<L;T++){var b=e[T];if(p?b==="/"&&e[T-1]==="*"&&(p=!1):c?c===b&&(c=!1):b==="/"&&e[T+1]==="*"?p=!0:b==='"'||b==="'"?c=b:b==="("?d++:b===")"&&d--,!p&&c===!1&&d===0){if(b===":"&&w===-1)w=T;else if(b===";"||T===L-1){if(w!==-1){var E=Go(e.substring(_,w).trim());if(!h.includes(E)){b!==";"&&T++;var O=e.substring(_,T).trim();i+=" "+O+";"}}_=T+1,w=-1}}}}return o&&(i+=Ku(o)),u&&(i+=Ku(u,!0)),i=i.trim(),i===""?null:i}return e==null?null:String(e)}function Ii(e,t,i,o,u,c){var d=e.__className;if(d!==i||d===void 0){var p=_v(i,o,c);p==null?e.removeAttribute("class"):t?e.className=p:e.setAttribute("class",p),e.__className=i}else if(c&&u!==c)for(var h in c){var _=!!c[h];(u==null||_!==!!u[h])&&e.classList.toggle(h,_)}return c}function Yo(e,t={},i,o){for(var u in i){var c=i[u];t[u]!==c&&(i[u]==null?e.style.removeProperty(u):e.style.setProperty(u,c,o))}}function er(e,t,i,o){var u=e.__style;if(u!==t){var c=bv(t,o);c==null?e.removeAttribute("style"):e.style.cssText=c,e.__style=t}else o&&(Array.isArray(o)?(Yo(e,i?.[0],o[0]),Yo(e,i?.[1],o[1],"important")):Yo(e,i,o));return o}function ls(e,t,i=!1){if(e.multiple){if(t==null)return;if(!xs(t))return md();for(var o of e.options)o.selected=t.includes(Fu(o));return}for(o of e.options){var u=Fu(o);if(Bd(u,t)){o.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function wv(e){var t=new MutationObserver(()=>{ls(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),qa(()=>{t.disconnect()})}function Fu(e){return"__value"in e?e.__value:e.value}const hi=Symbol("class"),pi=Symbol("style"),Ql=Symbol("is custom element"),Xl=Symbol("is html");function Ev(e,t){var i=Xa(e);i.value===(i.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function xv(e,t){var i=Xa(e);i.checked!==(i.checked=t??void 0)&&(e.checked=t)}function Tv(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Tt(e,t,i,o){var u=Xa(e);u[t]!==(u[t]=i)&&(t==="loading"&&(e[Vf]=i),i==null?e.removeAttribute(t):typeof i!="string"&&Jl(e).includes(t)?e[t]=i:e.setAttribute(t,i))}function Av(e,t,i,o,u=!1,c=!1){var d=Xa(e),p=d[Ql],h=!d[Xl],_=t||{},w=e.tagName==="OPTION";for(var T in t)T in i||(i[T]=null);i.class?i.class=Zl(i.class):i[hi]&&(i.class=null),i[pi]&&(i.style??=null);var b=Jl(e);for(const N in i){let G=i[N];if(w&&N==="value"&&G==null){e.value=e.__value="",_[N]=G;continue}if(N==="class"){var E=e.namespaceURI==="http://www.w3.org/1999/xhtml";Ii(e,E,G,o,t?.[hi],i[hi]),_[N]=G,_[hi]=i[hi];continue}if(N==="style"){er(e,G,t?.[pi],i[pi]),_[N]=G,_[pi]=i[pi];continue}var O=_[N];if(!(G===O&&!(G===void 0&&e.hasAttribute(N)))){_[N]=G;var L=N[0]+N[1];if(L!=="$$")if(L==="on"){const J={},se="$$"+N;let ne=N.slice(2);var I=ov(ne);if(iv(ne)&&(ne=ne.slice(0,-7),J.capture=!0),!I&&O){if(G!=null)continue;e.removeEventListener(ne,_[se],J),_[se]=null}if(G!=null)if(I)e[`__${ne}`]=G,$r([ne]);else{let oe=function(fe){_[N].call(this,fe)};var F=oe;_[se]=Gl(ne,e,oe,J)}else I&&(e[`__${ne}`]=void 0)}else if(N==="style")Tt(e,N,G);else if(N==="autofocus")Wd(e,!!G);else if(!p&&(N==="__value"||N==="value"&&G!=null))e.value=e.__value=G;else if(N==="selected"&&w)Tv(e,G);else{var k=N;h||(k=uv(k));var H=k==="defaultValue"||k==="defaultChecked";if(G==null&&!p&&!H)if(d[N]=null,k==="value"||k==="checked"){let J=e;const se=t===void 0;if(k==="value"){let ne=J.defaultValue;J.removeAttribute(k),J.defaultValue=ne,J.value=J.__value=se?ne:null}else{let ne=J.defaultChecked;J.removeAttribute(k),J.defaultChecked=ne,J.checked=se?ne:!1}}else e.removeAttribute(N);else H||b.includes(k)&&(p||typeof G!="string")?(e[k]=G,k in d&&(d[k]=ht)):typeof G!="function"&&Tt(e,k,G)}}}return _}function kv(e,t,i=[],o=[],u=[],c,d=!1,p=!1){xl(u,i,o,h=>{var _=void 0,w={},T=e.nodeName==="SELECT",b=!1;if(Ll(()=>{var O=t(...h.map(y)),L=Av(e,_,O,c,d,p);b&&T&&"value"in O&&ls(e,O.value);for(let k of Object.getOwnPropertySymbols(w))O[k]||yt(w[k]);for(let k of Object.getOwnPropertySymbols(O)){var I=O[k];k.description===pd&&(!_||I!==_[k])&&(w[k]&&yt(w[k]),w[k]=Rt(()=>yv(e,()=>I))),L[k]=I}_=L}),T){var E=e;Za(()=>{ls(E,_.value,!0),wv(E)})}b=!0})}function Xa(e){return e.__attributes??={[Ql]:e.nodeName.includes("-"),[Xl]:e.namespaceURI===hd}}var Bu=new Map;function Jl(e){var t=e.getAttribute("is")||e.nodeName,i=Bu.get(t);if(i)return i;Bu.set(t,i=[]);for(var o,u=e,c=Element.prototype;c!==u;){o=al(u);for(var d in o)o[d].set&&i.push(d);u=As(u)}return i}function Fs(e,t,i=t){var o=new WeakSet;Yd(e,"input",async u=>{ie&&e.type==="checkbox"&&Iu();var c=u?e.defaultValue:e.value;if(c=qo(e)?Zo(c):c,i(c),Fe!==null&&o.add(Fe),await nn(),c!==(c=t())){var d=e.selectionStart,p=e.selectionEnd,h=e.value.length;if(e.value=c??"",p!==null){var _=e.value.length;d===p&&p===h&&_>h?(e.selectionStart=_,e.selectionEnd=_):(e.selectionStart=d,e.selectionEnd=Math.min(p,_))}}}),Jr(t)==null&&e.value&&(i(qo(e)?Zo(e.value):e.value),Fe!==null&&o.add(Fe)),Qa(()=>{ie&&e.type==="checkbox"&&Iu();var u=t();if(e===document.activeElement){var c=ya??Fe;if(o.has(c))return}qo(e)&&u===Zo(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function qo(e){var t=e.type;return t==="number"||t==="range"}function Zo(e){return e===""?null:+e}function ju(e,t){return e===t||e?.[In]===t}function Wt(e={},t,i,o){return Za(()=>{var u,c;return Qa(()=>{u=c,c=[],Jr(()=>{e!==i(...c)&&(t(e,...c),u&&ju(i(...u),e)&&t(null,...u))})}),()=>{kr(()=>{c&&ju(i(...c),e)&&t(null,...c)})}}),e}function $l(e,t,i){if(e==null)return t(void 0),Ea;const o=Jr(()=>e.subscribe(t,i));return o.unsubscribe?()=>o.unsubscribe():o}function Iv(e){let t;return $l(e,i=>t=i)(),t}let va=!1,cs=Symbol();function Oa(e,t,i){const o=i[t]??={store:null,source:Al(void 0),unsubscribe:Ea};if(ie&&(o.source.label=t),o.store!==e&&!(cs in i))if(o.unsubscribe(),o.store=e??null,e==null)o.source.v=void 0,o.unsubscribe=Ea;else{var u=!0;o.unsubscribe=$l(e,c=>{u?o.source.v=c:M(o.source,c)}),u=!1}return e&&cs in i?Iv(e):y(o.source)}function Ca(e,t,i){let o=i[t];return o&&o.store!==e&&(o.unsubscribe(),o.unsubscribe=Ea),e}function Bs(){const e={};function t(){qa(()=>{for(var i in e)e[i].unsubscribe();Jn(e,cs,{enumerable:!1,value:!0})})}return[e,t]}function Dv(e){var t=va;try{return va=!1,[e(),va]}finally{va=t}}const Sv={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return ie&&Jf(`${e.name}.${String(t)}`),!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Ov(e,t,i){return new Proxy(ie?{props:e,exclude:t,name:i,other:{},to_proxy:[]}:{props:e,exclude:t},Sv)}function Ot(e,t,i,o){var u=!Ci||(i&sd)!==0,c=(i&ld)!==0,d=(i&cd)!==0,p=o,h=!0,_=()=>(h&&(h=!1,p=d?Jr(o):o),p),w;if(c){var T=In in e||Uf in e;w=br(e,t)?.set??(T&&t in e?F=>e[t]=F:void 0)}var b,E=!1;c?[b,E]=Dv(()=>e[t]):b=e[t],b===void 0&&o!==void 0&&(b=_(),w&&(u&&Xf(t),w(b)));var O;if(u?O=()=>{var F=e[t];return F===void 0?_():(h=!0,F)}:O=()=>{var F=e[t];return F!==void 0&&(p=void 0),F===void 0?p:F},u&&(i&ud)===0)return O;if(w){var L=e.$$legacy;return(function(F,N){return arguments.length>0?((!u||!N||L||E)&&w(N?O():F),F):O()})}var I=!1,k=((i&od)!==0?Ga:Cs)(()=>(I=!1,O()));ie&&(k.label=t),c&&y(k);var H=Ne;return(function(F,N){if(arguments.length>0){const G=N?y(k):u&&c?Jt(F):F;return M(k,G),I=!0,p!==void 0&&(p=G),F}return Ir&&I||(H.f&kn)!==0?k.v:y(k)})}if(ie){let e=function(t){if(!(t in globalThis)){let i;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(i!==void 0)return i;$f(t)},set:o=>{i=o}})}};var Dm=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const Cv="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Cv);_d();var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _a={exports:{}},Rv=_a.exports,zu;function Mv(){return zu||(zu=1,(function(e,t){(function(i,o){e.exports=o()})(Rv,(function(){var i=function(n,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])},i(n,r)};function o(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");i(n,r);function a(){this.constructor=n}n.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}var u=function(){return u=Object.assign||function(r){for(var a,s=1,l=arguments.length;s<l;s++){a=arguments[s];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(r[f]=a[f])}return r},u.apply(this,arguments)};function c(n,r,a){for(var s=0,l=r.length,f;s<l;s++)(f||!(s in r))&&(f||(f=Array.prototype.slice.call(r,0,s)),f[s]=r[s]);return n.concat(f||Array.prototype.slice.call(r))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Lv,p=Object.keys,h=Array.isArray;typeof Promise<"u"&&!d.Promise&&(d.Promise=Promise);function _(n,r){return typeof r!="object"||p(r).forEach(function(a){n[a]=r[a]}),n}var w=Object.getPrototypeOf,T={}.hasOwnProperty;function b(n,r){return T.call(n,r)}function E(n,r){typeof r=="function"&&(r=r(w(n))),(typeof Reflect>"u"?p:Reflect.ownKeys)(r).forEach(function(a){L(n,a,r[a])})}var O=Object.defineProperty;function L(n,r,a,s){O(n,r,_(a&&b(a,"get")&&typeof a.get=="function"?{get:a.get,set:a.set,configurable:!0}:{value:a,configurable:!0,writable:!0},s))}function I(n){return{from:function(r){return n.prototype=Object.create(r.prototype),L(n.prototype,"constructor",n),{extend:E.bind(null,n.prototype)}}}}var k=Object.getOwnPropertyDescriptor;function H(n,r){var a=k(n,r),s;return a||(s=w(n))&&H(s,r)}var F=[].slice;function N(n,r,a){return F.call(n,r,a)}function G(n,r){return r(n)}function J(n){if(!n)throw new Error("Assertion Failed")}function se(n){d.setImmediate?setImmediate(n):setTimeout(n,0)}function ne(n,r){return n.reduce(function(a,s,l){var f=r(s,l);return f&&(a[f[0]]=f[1]),a},{})}function oe(n,r){if(typeof r=="string"&&b(n,r))return n[r];if(!r)return n;if(typeof r!="string"){for(var a=[],s=0,l=r.length;s<l;++s){var f=oe(n,r[s]);a.push(f)}return a}var v=r.indexOf(".");if(v!==-1){var m=n[r.substr(0,v)];return m==null?void 0:oe(m,r.substr(v+1))}}function fe(n,r,a){if(!(!n||r===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof r!="string"&&"length"in r){J(typeof a!="string"&&"length"in a);for(var s=0,l=r.length;s<l;++s)fe(n,r[s],a[s])}else{var f=r.indexOf(".");if(f!==-1){var v=r.substr(0,f),m=r.substr(f+1);if(m==="")a===void 0?h(n)&&!isNaN(parseInt(v))?n.splice(v,1):delete n[v]:n[v]=a;else{var g=n[v];(!g||!b(n,v))&&(g=n[v]={}),fe(g,m,a)}}else a===void 0?h(n)&&!isNaN(parseInt(r))?n.splice(r,1):delete n[r]:n[r]=a}}function re(n,r){typeof r=="string"?fe(n,r,void 0):"length"in r&&[].map.call(r,function(a){fe(n,a,void 0)})}function ge(n){var r={};for(var a in n)b(n,a)&&(r[a]=n[a]);return r}var ze=[].concat;function Ke(n){return ze.apply([],n)}var Qe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ke([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(r){return r+n+"Array"})}))).filter(function(n){return d[n]}),Xe=new Set(Qe.map(function(n){return d[n]}));function Ae(n){var r={};for(var a in n)if(b(n,a)){var s=n[a];r[a]=!s||typeof s!="object"||Xe.has(s.constructor)?s:Ae(s)}return r}function ft(n){for(var r in n)if(b(n,r))return!1;return!0}var De=null;function He(n){De=new WeakMap;var r=te(n);return De=null,r}function te(n){if(!n||typeof n!="object")return n;var r=De.get(n);if(r)return r;if(h(n)){r=[],De.set(n,r);for(var a=0,s=n.length;a<s;++a)r.push(te(n[a]))}else if(Xe.has(n.constructor))r=n;else{var l=w(n);r=l===Object.prototype?{}:Object.create(l),De.set(n,r);for(var f in n)b(n,f)&&(r[f]=te(n[f]))}return r}var ye={}.toString;function Re(n){return ye.call(n).slice(8,-1)}var Ve=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ce=typeof Ve=="symbol"?function(n){var r;return n!=null&&(r=n[Ve])&&r.apply(n)}:function(){return null};function Be(n,r){var a=n.indexOf(r);return a>=0&&n.splice(a,1),a>=0}var dt={};function vt(n){var r,a,s,l;if(arguments.length===1){if(h(n))return n.slice();if(this===dt&&typeof n=="string")return[n];if(l=Ce(n)){for(a=[];s=l.next(),!s.done;)a.push(s.value);return a}if(n==null)return[n];if(r=n.length,typeof r=="number"){for(a=new Array(r);r--;)a[r]=n[r];return a}return[n]}for(r=arguments.length,a=new Array(r);r--;)a[r]=arguments[r];return a}var en=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ir=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],It=ir.concat(Ue),ar={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Bt(n,r){this.name=n,this.message=r}I(Bt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Dt(n,r){return n+". Errors: "+Object.keys(r).map(function(a){return r[a].toString()}).filter(function(a,s,l){return l.indexOf(a)===s}).join(`
`)}function jt(n,r,a,s){this.failures=r,this.failedKeys=s,this.successCount=a,this.message=Dt(n,r)}I(jt).from(Bt);function zt(n,r){this.name="BulkError",this.failures=Object.keys(r).map(function(a){return r[a]}),this.failuresByPos=r,this.message=Dt(n,this.failures)}I(zt).from(Bt);var Ht=It.reduce(function(n,r){return n[r]=r+"Error",n},{}),ei=Bt,ue=It.reduce(function(n,r){var a=r+"Error";function s(l,f){this.name=a,l?typeof l=="string"?(this.message="".concat(l).concat(f?`
 `+f:""),this.inner=f||null):typeof l=="object"&&(this.message="".concat(l.name," ").concat(l.message),this.inner=l):(this.message=ar[r]||a,this.inner=null)}return I(s).from(ei),n[r]=s,n},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var Pn=Ue.reduce(function(n,r){return n[r+"Error"]=ue[r],n},{});function Dr(n,r){if(!n||n instanceof Bt||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Pn[n.name])return n;var a=new Pn[n.name](r||n.message,n);return"stack"in n&&L(a,"stack",{get:function(){return this.inner.stack}}),a}var un=It.reduce(function(n,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(n[r+"Error"]=ue[r]),n},{});un.ModifyError=jt,un.DexieError=Bt,un.BulkError=zt;function Le(){}function q(n){return n}function V(n,r){return n==null||n===q?r:function(a){return r(n(a))}}function W(n,r){return function(){n.apply(this,arguments),r.apply(this,arguments)}}function ae(n,r){return n===Le?r:function(){var a=n.apply(this,arguments);a!==void 0&&(arguments[0]=a);var s=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var f=r.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?W(s,this.onsuccess):s),l&&(this.onerror=this.onerror?W(l,this.onerror):l),f!==void 0?f:a}}function pe(n,r){return n===Le?r:function(){n.apply(this,arguments);var a=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?W(a,this.onsuccess):a),s&&(this.onerror=this.onerror?W(s,this.onerror):s)}}function at(n,r){return n===Le?r:function(a){var s=n.apply(this,arguments);_(a,s);var l=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var v=r.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?W(l,this.onsuccess):l),f&&(this.onerror=this.onerror?W(f,this.onerror):f),s===void 0?v===void 0?void 0:v:_(s,v)}}function Se(n,r){return n===Le?r:function(){return r.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function be(n,r){return n===Le?r:function(){var a=n.apply(this,arguments);if(a&&typeof a.then=="function"){for(var s=this,l=arguments.length,f=new Array(l);l--;)f[l]=arguments[l];return a.then(function(){return r.apply(s,f)})}return r.apply(this,arguments)}}var je=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function We(n,r){je=n}var nt={},ke=100,En=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,w(n),n];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,w(r),n]})(),Bi=En[0],Ge=En[1],Rn=En[2],or=Ge&&Ge.then,Mn=Bi&&Bi.constructor,ti=!!Rn;function wc(){queueMicrotask(xc)}var ni=function(n,r){ri.push([n,r]),ji&&(wc(),ji=!1)},so=!0,ji=!0,sr=[],zi=[],uo=q,Nn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},le=Nn,ri=[],ur=0,Hi=[];function X(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=le;if(typeof n!="function"){if(n!==nt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&co(this,this._value);return}this._state=null,this._value=null,++r.ref,Ys(this,n)}var lo={get:function(){var n=le,r=Gi;function a(s,l){var f=this,v=!n.global&&(n!==le||r!==Gi),m=v&&!Fn(),g=new X(function(x,S){fo(f,new Gs(Qs(s,n,v,m),Qs(l,n,v,m),x,S,n))});return this._consoleTask&&(g._consoleTask=this._consoleTask),g}return a.prototype=nt,a},set:function(n){L(this,"then",n&&n.prototype===nt?lo:{get:function(){return n},set:lo.set})}};E(X.prototype,{then:lo,_then:function(n,r){fo(this,new Gs(null,null,n,r,le))},catch:function(n){if(arguments.length===1)return this.then(null,n);var r=arguments[0],a=arguments[1];return typeof r=="function"?this.then(null,function(s){return s instanceof r?a(s):Ui(s)}):this.then(null,function(s){return s&&s.name===r?a(s):Ui(s)})},finally:function(n){return this.then(function(r){return X.resolve(n()).then(function(){return r})},function(r){return X.resolve(n()).then(function(){return Ui(r)})})},timeout:function(n,r){var a=this;return n<1/0?new X(function(s,l){var f=setTimeout(function(){return l(new ue.Timeout(r))},n);a.then(s,l).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(X.prototype,Symbol.toStringTag,"Dexie.Promise"),Nn.env=Zs();function Gs(n,r,a,s,l){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=a,this.reject=s,this.psd=l}E(X,{all:function(){var n=vt.apply(null,arguments).map(Yi);return new X(function(r,a){n.length===0&&r([]);var s=n.length;n.forEach(function(l,f){return X.resolve(l).then(function(v){n[f]=v,--s||r(n)},a)})})},resolve:function(n){if(n instanceof X)return n;if(n&&typeof n.then=="function")return new X(function(a,s){n.then(a,s)});var r=new X(nt,!0,n);return r},reject:Ui,race:function(){var n=vt.apply(null,arguments).map(Yi);return new X(function(r,a){n.map(function(s){return X.resolve(s).then(r,a)})})},PSD:{get:function(){return le},set:function(n){return le=n}},totalEchoes:{get:function(){return Gi}},newPSD:Kn,usePSD:lr,scheduler:{get:function(){return ni},set:function(n){ni=n}},rejectionMapper:{get:function(){return uo},set:function(n){uo=n}},follow:function(n,r){return new X(function(a,s){return Kn(function(l,f){var v=le;v.unhandleds=[],v.onunhandled=f,v.finalize=W(function(){var m=this;Tc(function(){m.unhandleds.length===0?l():f(m.unhandleds[0])})},v.finalize),n()},r,a,s)})}}),Mn&&(Mn.allSettled&&L(X,"allSettled",function(){var n=vt.apply(null,arguments).map(Yi);return new X(function(r){n.length===0&&r([]);var a=n.length,s=new Array(a);n.forEach(function(l,f){return X.resolve(l).then(function(v){return s[f]={status:"fulfilled",value:v}},function(v){return s[f]={status:"rejected",reason:v}}).then(function(){return--a||r(s)})})})}),Mn.any&&typeof AggregateError<"u"&&L(X,"any",function(){var n=vt.apply(null,arguments).map(Yi);return new X(function(r,a){n.length===0&&a(new AggregateError([]));var s=n.length,l=new Array(s);n.forEach(function(f,v){return X.resolve(f).then(function(m){return r(m)},function(m){l[v]=m,--s||a(new AggregateError(l))})})})}),Mn.withResolvers&&(X.withResolvers=Mn.withResolvers));function Ys(n,r){try{r(function(a){if(n._state===null){if(a===n)throw new TypeError("A promise cannot be resolved with itself.");var s=n._lib&&Sr();a&&typeof a.then=="function"?Ys(n,function(l,f){a instanceof X?a._then(l,f):a.then(l,f)}):(n._state=!0,n._value=a,qs(n)),s&&Or()}},co.bind(null,n))}catch(a){co(n,a)}}function co(n,r){if(zi.push(r),n._state===null){var a=n._lib&&Sr();r=uo(r),n._state=!1,n._value=r,Ac(n),qs(n),a&&Or()}}function qs(n){var r=n._listeners;n._listeners=[];for(var a=0,s=r.length;a<s;++a)fo(n,r[a]);var l=n._PSD;--l.ref||l.finalize(),ur===0&&(++ur,ni(function(){--ur===0&&vo()},[]))}function fo(n,r){if(n._state===null){n._listeners.push(r);return}var a=n._state?r.onFulfilled:r.onRejected;if(a===null)return(n._state?r.resolve:r.reject)(n._value);++r.psd.ref,++ur,ni(Ec,[a,n,r])}function Ec(n,r,a){try{var s,l=r._value;!r._state&&zi.length&&(zi=[]),s=je&&r._consoleTask?r._consoleTask.run(function(){return n(l)}):n(l),!r._state&&zi.indexOf(l)===-1&&kc(r),a.resolve(s)}catch(f){a.reject(f)}finally{--ur===0&&vo(),--a.psd.ref||a.psd.finalize()}}function xc(){lr(Nn,function(){Sr()&&Or()})}function Sr(){var n=so;return so=!1,ji=!1,n}function Or(){var n,r,a;do for(;ri.length>0;)for(n=ri,ri=[],a=n.length,r=0;r<a;++r){var s=n[r];s[0].apply(null,s[1])}while(ri.length>0);so=!0,ji=!0}function vo(){var n=sr;sr=[],n.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var r=Hi.slice(0),a=r.length;a;)r[--a]()}function Tc(n){function r(){n(),Hi.splice(Hi.indexOf(r),1)}Hi.push(r),++ur,ni(function(){--ur===0&&vo()},[])}function Ac(n){sr.some(function(r){return r._value===n._value})||sr.push(n)}function kc(n){for(var r=sr.length;r;)if(sr[--r]._value===n._value){sr.splice(r,1);return}}function Ui(n){return new X(nt,!1,n)}function Ye(n,r){var a=le;return function(){var s=Sr(),l=le;try{return Bn(a,!0),n.apply(this,arguments)}catch(f){r&&r(f)}finally{Bn(l,!1),s&&Or()}}}var ut={awaits:0,echoes:0,id:0},Ic=0,Vi=[],Wi=0,Gi=0,Dc=0;function Kn(n,r,a,s){var l=le,f=Object.create(l);f.parent=l,f.ref=0,f.global=!1,f.id=++Dc,Nn.env,f.env=ti?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject}:{},r&&_(f,r),++l.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()};var v=lr(f,n,a,s);return f.ref===0&&f.finalize(),v}function Cr(){return ut.id||(ut.id=++Ic),++ut.awaits,ut.echoes+=ke,ut.id}function Fn(){return ut.awaits?(--ut.awaits===0&&(ut.id=0),ut.echoes=ut.awaits*ke,!0):!1}(""+or).indexOf("[native code]")===-1&&(Cr=Fn=Le);function Yi(n){return ut.echoes&&n&&n.constructor===Mn?(Cr(),n.then(function(r){return Fn(),r},function(r){return Fn(),$e(r)})):n}function Sc(n){++Gi,(!ut.echoes||--ut.echoes===0)&&(ut.echoes=ut.awaits=ut.id=0),Vi.push(le),Bn(n,!0)}function Oc(){var n=Vi[Vi.length-1];Vi.pop(),Bn(n,!1)}function Bn(n,r){var a=le;if((r?ut.echoes&&(!Wi++||n!==le):Wi&&(!--Wi||n!==le))&&queueMicrotask(r?Sc.bind(null,n):Oc),n!==le&&(le=n,a===Nn&&(Nn.env=Zs()),ti)){var s=Nn.env.Promise,l=n.env;(a.global||n.global)&&(Object.defineProperty(d,"Promise",l.PromiseProp),s.all=l.all,s.race=l.race,s.resolve=l.resolve,s.reject=l.reject,l.allSettled&&(s.allSettled=l.allSettled),l.any&&(s.any=l.any))}}function Zs(){var n=d.Promise;return ti?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function lr(n,r,a,s,l){var f=le;try{return Bn(n,!0),r(a,s,l)}finally{Bn(f,!1)}}function Qs(n,r,a,s){return typeof n!="function"?n:function(){var l=le;a&&Cr(),Bn(r,!0);try{return n.apply(this,arguments)}finally{Bn(l,!1),s&&queueMicrotask(Fn)}}}function ho(n){Promise===Mn&&ut.echoes===0?Wi===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}var $e=X.reject;function po(n,r,a,s){if(!n.idbdb||!n._state.openComplete&&!le.letThrough&&!n._vip){if(n._state.openComplete)return $e(new ue.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return $e(new ue.DatabaseClosed);n.open().catch(Le)}return n._state.dbReadyPromise.then(function(){return po(n,r,a,s)})}else{var l=n._createTransaction(r,a,n._dbSchema);try{l.create(),n._state.PR1398_maxLoop=3}catch(f){return f.name===Ht.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return po(n,r,a,s)})):$e(f)}return l._promise(r,function(f,v){return Kn(function(){return le.trans=l,s(f,v,l)})}).then(function(f){if(r==="readwrite")try{l.idbtrans.commit()}catch{}return r==="readonly"?f:l._completion.then(function(){return f})})}}var Xs="4.2.1",cr="ï¿¿",mo=-1/0,xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Js="String expected.",Lr=[],qi="__dbnames",yo="readonly",go="readwrite";function fr(n,r){return n?r?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:n:r}var $s={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Zi(n){return typeof n=="string"&&!/\./.test(n)?function(r){return r[n]===void 0&&n in r&&(r=He(r),delete r[n]),r}:function(r){return r}}function eu(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ie(n,r){try{var a=tu(n),s=tu(r);if(a!==s)return a==="Array"?1:s==="Array"?-1:a==="binary"?1:s==="binary"?-1:a==="string"?1:s==="string"?-1:a==="Date"?1:s!=="Date"?NaN:-1;switch(a){case"number":case"Date":case"string":return n>r?1:n<r?-1:0;case"binary":return Lc(nu(n),nu(r));case"Array":return Cc(n,r)}}catch{}return NaN}function Cc(n,r){for(var a=n.length,s=r.length,l=a<s?a:s,f=0;f<l;++f){var v=Ie(n[f],r[f]);if(v!==0)return v}return a===s?0:a<s?-1:1}function Lc(n,r){for(var a=n.length,s=r.length,l=a<s?a:s,f=0;f<l;++f)if(n[f]!==r[f])return n[f]<r[f]?-1:1;return a===s?0:a<s?-1:1}function tu(n){var r=typeof n;if(r!=="object")return r;if(ArrayBuffer.isView(n))return"binary";var a=Re(n);return a==="ArrayBuffer"?"binary":a}function nu(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function Qi(n,r,a){var s=n.schema.yProps;return s?(r&&a.numFailures>0&&(r=r.filter(function(l,f){return!a.failures[f]})),Promise.all(s.map(function(l){var f=l.updatesTable;return r?n.db.table(f).where("k").anyOf(r).delete():n.db.table(f).clear()})).then(function(){return a})):a}var ii=(function(){function n(r){this["@@propmod"]=r}return n.prototype.execute=function(r){var a,s=this["@@propmod"];if(s.add!==void 0){var l=s.add;if(h(l))return c(c([],h(r)?r:[],!0),l).sort();if(typeof l=="number")return(Number(r)||0)+l;if(typeof l=="bigint")try{return BigInt(r)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(s.remove!==void 0){var f=s.remove;if(h(f))return h(r)?r.filter(function(m){return!f.includes(m)}).sort():[];if(typeof f=="number")return Number(r)-f;if(typeof f=="bigint")try{return BigInt(r)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}var v=(a=s.replacePrefix)===null||a===void 0?void 0:a[0];return v&&typeof r=="string"&&r.startsWith(v)?s.replacePrefix[1]+r.substring(v.length):r},n})();function ru(n,r){for(var a=p(r),s=a.length,l=!1,f=0;f<s;++f){var v=a[f],m=r[v],g=oe(n,v);m instanceof ii?(fe(n,v,m.execute(g)),l=!0):g!==m&&(fe(n,v,m),l=!0)}return l}var iu=(function(){function n(){}return n.prototype._trans=function(r,a,s){var l=this._tx||le.trans,f=this.name,v=je&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function m(S,A,R){if(!R.schema[f])throw new ue.NotFound("Table "+f+" not part of transaction");return a(R.idbtrans,R)}var g=Sr();try{var x=l&&l.db._novip===this.db._novip?l===le.trans?l._promise(r,m,s):Kn(function(){return l._promise(r,m,s)},{trans:l,transless:le.transless||le}):po(this.db,r,[this.name],m);return v&&(x._consoleTask=v,x=x.catch(function(S){return console.trace(S),$e(S)})),x}finally{g&&Or()}},n.prototype.get=function(r,a){var s=this;return r&&r.constructor===Object?this.where(r).first(a):r==null?$e(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(l){return s.core.get({trans:l,key:r}).then(function(f){return s.hook.reading.fire(f)})}).then(a)},n.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(h(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var a=p(r);if(a.length===1)return this.where(a[0]).equals(r[a[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&a.every(function(R){return S.keyPath.indexOf(R)>=0})){for(var A=0;A<a.length;++A)if(a.indexOf(S.keyPath[A])===-1)return!1;return!0}return!1}).sort(function(S,A){return S.keyPath.length-A.keyPath.length})[0];if(s&&this.db._maxKey!==cr){var l=s.keyPath.slice(0,a.length);return this.where(l).equals(l.map(function(S){return r[S]}))}!s&&je&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var f=this.schema.idxByName;function v(S,A){return Ie(S,A)===0}var m=a.reduce(function(S,A){var R=S[0],Y=S[1],D=f[A],C=r[A];return[R||D,R||!D?fr(Y,D&&D.multi?function(P){var K=oe(P,A);return h(K)&&K.some(function(j){return v(C,j)})}:function(P){return v(C,oe(P,A))}):Y]},[null,null]),g=m[0],x=m[1];return g?this.where(g.name).equals(r[g.keyPath]).filter(x):s?this.filter(x):this.where(a).equals("")},n.prototype.filter=function(r){return this.toCollection().and(r)},n.prototype.count=function(r){return this.toCollection().count(r)},n.prototype.offset=function(r){return this.toCollection().offset(r)},n.prototype.limit=function(r){return this.toCollection().limit(r)},n.prototype.each=function(r){return this.toCollection().each(r)},n.prototype.toArray=function(r){return this.toCollection().toArray(r)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,h(r)?"[".concat(r.join("+"),"]"):r))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(r){var a=this,s=a.db,l=a.name;this.schema.mappedClass=r,r.prototype instanceof eu&&(r=(function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return Object.defineProperty(x.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),x.prototype.table=function(){return l},x})(r));for(var f=new Set,v=r.prototype;v;v=w(v))Object.getOwnPropertyNames(v).forEach(function(g){return f.add(g)});var m=function(g){if(!g)return g;var x=Object.create(r.prototype);for(var S in g)if(!f.has(S))try{x[S]=g[S]}catch{}return x};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),r},n.prototype.defineClass=function(){function r(a){_(this,a)}return this.mapToClass(r)},n.prototype.add=function(r,a){var s=this,l=this.schema.primKey,f=l.auto,v=l.keyPath,m=r;return v&&f&&(m=Zi(v)(r)),this._trans("readwrite",function(g){return s.core.mutate({trans:g,type:"add",keys:a!=null?[a]:null,values:[m]})}).then(function(g){return g.numFailures?X.reject(g.failures[0]):g.lastResult}).then(function(g){if(v)try{fe(r,v,g)}catch{}return g})},n.prototype.upsert=function(r,a){var s=this,l=this.schema.primKey.keyPath;return this._trans("readwrite",function(f){return s.core.get({trans:f,key:r}).then(function(v){var m=v??{};return ru(m,a),l&&fe(m,l,r),s.core.mutate({trans:f,type:"put",values:[m],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[a]}}).then(function(g){return g.numFailures?X.reject(g.failures[0]):!!v})})})},n.prototype.update=function(r,a){if(typeof r=="object"&&!h(r)){var s=oe(r,this.schema.primKey.keyPath);return s===void 0?$e(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(a)}else return this.where(":id").equals(r).modify(a)},n.prototype.put=function(r,a){var s=this,l=this.schema.primKey,f=l.auto,v=l.keyPath,m=r;return v&&f&&(m=Zi(v)(r)),this._trans("readwrite",function(g){return s.core.mutate({trans:g,type:"put",values:[m],keys:a!=null?[a]:null})}).then(function(g){return g.numFailures?X.reject(g.failures[0]):g.lastResult}).then(function(g){if(v)try{fe(r,v,g)}catch{}return g})},n.prototype.delete=function(r){var a=this;return this._trans("readwrite",function(s){return a.core.mutate({trans:s,type:"delete",keys:[r]}).then(function(l){return Qi(a,[r],l)}).then(function(l){return l.numFailures?X.reject(l.failures[0]):void 0})})},n.prototype.clear=function(){var r=this;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"deleteRange",range:$s}).then(function(s){return Qi(r,null,s)})}).then(function(a){return a.numFailures?X.reject(a.failures[0]):void 0})},n.prototype.bulkGet=function(r){var a=this;return this._trans("readonly",function(s){return a.core.getMany({keys:r,trans:s}).then(function(l){return l.map(function(f){return a.hook.reading.fire(f)})})})},n.prototype.bulkAdd=function(r,a,s){var l=this,f=Array.isArray(a)?a:void 0;s=s||(f?void 0:a);var v=s?s.allKeys:void 0;return this._trans("readwrite",function(m){var g=l.schema.primKey,x=g.auto,S=g.keyPath;if(S&&f)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var A=r.length,R=S&&x?r.map(Zi(S)):r;return l.core.mutate({trans:m,type:"add",keys:f,values:R,wantResults:v}).then(function(Y){var D=Y.numFailures,C=Y.results,P=Y.lastResult,K=Y.failures,j=v?C:P;if(D===0)return j;throw new zt("".concat(l.name,".bulkAdd(): ").concat(D," of ").concat(A," operations failed"),K)})})},n.prototype.bulkPut=function(r,a,s){var l=this,f=Array.isArray(a)?a:void 0;s=s||(f?void 0:a);var v=s?s.allKeys:void 0;return this._trans("readwrite",function(m){var g=l.schema.primKey,x=g.auto,S=g.keyPath;if(S&&f)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var A=r.length,R=S&&x?r.map(Zi(S)):r;return l.core.mutate({trans:m,type:"put",keys:f,values:R,wantResults:v}).then(function(Y){var D=Y.numFailures,C=Y.results,P=Y.lastResult,K=Y.failures,j=v?C:P;if(D===0)return j;throw new zt("".concat(l.name,".bulkPut(): ").concat(D," of ").concat(A," operations failed"),K)})})},n.prototype.bulkUpdate=function(r){var a=this,s=this.core,l=r.map(function(m){return m.key}),f=r.map(function(m){return m.changes}),v=[];return this._trans("readwrite",function(m){return s.getMany({trans:m,keys:l,cache:"clone"}).then(function(g){var x=[],S=[];r.forEach(function(R,Y){var D=R.key,C=R.changes,P=g[Y];if(P){for(var K=0,j=Object.keys(C);K<j.length;K++){var z=j[K],U=C[z];if(z===a.schema.primKey.keyPath){if(Ie(U,D)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else fe(P,z,U)}v.push(Y),x.push(D),S.push(P)}});var A=x.length;return s.mutate({trans:m,type:"put",keys:x,values:S,updates:{keys:l,changeSpecs:f}}).then(function(R){var Y=R.numFailures,D=R.failures;if(Y===0)return A;for(var C=0,P=Object.keys(D);C<P.length;C++){var K=P[C],j=v[Number(K)];if(j!=null){var z=D[K];delete D[K],D[j]=z}}throw new zt("".concat(a.name,".bulkUpdate(): ").concat(Y," of ").concat(A," operations failed"),D)})})})},n.prototype.bulkDelete=function(r){var a=this,s=r.length;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"delete",keys:r}).then(function(f){return Qi(a,r,f)})}).then(function(l){var f=l.numFailures,v=l.lastResult,m=l.failures;if(f===0)return v;throw new zt("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(s," operations failed"),m)})},n})();function ai(n){var r={},a=function(m,g){if(g){for(var x=arguments.length,S=new Array(x-1);--x;)S[x-1]=arguments[x];return r[m].subscribe.apply(null,S),n}else if(typeof m=="string")return r[m]};a.addEventType=f;for(var s=1,l=arguments.length;s<l;++s)f(arguments[s]);return a;function f(m,g,x){if(typeof m=="object")return v(m);g||(g=Se),x||(x=Le);var S={subscribers:[],fire:x,subscribe:function(A){S.subscribers.indexOf(A)===-1&&(S.subscribers.push(A),S.fire=g(S.fire,A))},unsubscribe:function(A){S.subscribers=S.subscribers.filter(function(R){return R!==A}),S.fire=S.subscribers.reduce(g,x)}};return r[m]=a[m]=S,S}function v(m){p(m).forEach(function(g){var x=m[g];if(h(x))f(g,m[g][0],m[g][1]);else if(x==="asap")var S=f(g,q,function(){for(var R=arguments.length,Y=new Array(R);R--;)Y[R]=arguments[R];S.subscribers.forEach(function(D){se(function(){D.apply(null,Y)})})});else throw new ue.InvalidArgument("Invalid event config")})}}function oi(n,r){return I(r).from({prototype:n}),r}function Pc(n){return oi(iu.prototype,function(a,s,l){this.db=n,this._tx=l,this.name=a,this.schema=s,this.hook=n._allTables[a]?n._allTables[a].hook:ai(null,{creating:[ae,Le],reading:[V,q],updating:[at,Le],deleting:[pe,Le]})})}function Pr(n,r){return!(n.filter||n.algorithm||n.or)&&(r?n.justLimit:!n.replayFilter)}function _o(n,r){n.filter=fr(n.filter,r)}function bo(n,r,a){var s=n.replayFilter;n.replayFilter=s?function(){return fr(s(),r())}:r,n.justLimit=a&&!s}function Rc(n,r){n.isMatch=fr(n.isMatch,r)}function Xi(n,r){if(n.isPrimKey)return r.primaryKey;var a=r.getIndexByKeyPath(n.index);if(!a)throw new ue.Schema("KeyPath "+n.index+" on object store "+r.name+" is not indexed");return a}function au(n,r,a){var s=Xi(n,r.schema);return r.openCursor({trans:a,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:s,range:n.range}})}function Ji(n,r,a,s){var l=n.replayFilter?fr(n.filter,n.replayFilter()):n.filter;if(n.or){var f={},v=function(m,g,x){if(!l||l(g,x,function(R){return g.stop(R)},function(R){return g.fail(R)})){var S=g.primaryKey,A=""+S;A==="[object ArrayBuffer]"&&(A=""+new Uint8Array(S)),b(f,A)||(f[A]=!0,r(m,g,x))}};return Promise.all([n.or._iterate(v,a),ou(au(n,s,a),n.algorithm,v,!n.keysOnly&&n.valueMapper)])}else return ou(au(n,s,a),fr(n.algorithm,l),r,!n.keysOnly&&n.valueMapper)}function ou(n,r,a,s){var l=s?function(v,m,g){return a(s(v),m,g)}:a,f=Ye(l);return n.then(function(v){if(v)return v.start(function(){var m=function(){return v.continue()};(!r||r(v,function(g){return m=g},function(g){v.stop(g),m=Le},function(g){v.fail(g),m=Le}))&&f(v.value,v,function(g){return m=g}),m()})})}var Mc=(function(){function n(){}return n.prototype._read=function(r,a){var s=this._ctx;return s.error?s.table._trans(null,$e.bind(null,s.error)):s.table._trans("readonly",r).then(a)},n.prototype._write=function(r){var a=this._ctx;return a.error?a.table._trans(null,$e.bind(null,a.error)):a.table._trans("readwrite",r,"locked")},n.prototype._addAlgorithm=function(r){var a=this._ctx;a.algorithm=fr(a.algorithm,r)},n.prototype._iterate=function(r,a){return Ji(this._ctx,r,a,this._ctx.table.core)},n.prototype.clone=function(r){var a=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return r&&_(s,r),a._ctx=s,a},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(r){var a=this._ctx;return this._read(function(s){return Ji(a,r,s,a.table.core)})},n.prototype.count=function(r){var a=this;return this._read(function(s){var l=a._ctx,f=l.table.core;if(Pr(l,!0))return f.count({trans:s,query:{index:Xi(l,f.schema),range:l.range}}).then(function(m){return Math.min(m,l.limit)});var v=0;return Ji(l,function(){return++v,!1},s,f).then(function(){return v})}).then(r)},n.prototype.sortBy=function(r,a){var s=r.split(".").reverse(),l=s[0],f=s.length-1;function v(x,S){return S?v(x[s[S]],S-1):x[l]}var m=this._ctx.dir==="next"?1:-1;function g(x,S){var A=v(x,f),R=v(S,f);return Ie(A,R)*m}return this.toArray(function(x){return x.sort(g)}).then(a)},n.prototype.toArray=function(r){var a=this;return this._read(function(s){var l=a._ctx;if(l.dir==="next"&&Pr(l,!0)&&l.limit>0){var f=l.valueMapper,v=Xi(l,l.table.core.schema);return l.table.core.query({trans:s,limit:l.limit,values:!0,query:{index:v,range:l.range}}).then(function(g){var x=g.result;return f?x.map(f):x})}else{var m=[];return Ji(l,function(g){return m.push(g)},s,l.table.core).then(function(){return m})}},r)},n.prototype.offset=function(r){var a=this._ctx;return r<=0?this:(a.offset+=r,Pr(a)?bo(a,function(){var s=r;return function(l,f){return s===0?!0:s===1?(--s,!1):(f(function(){l.advance(s),s=0}),!1)}}):bo(a,function(){var s=r;return function(){return--s<0}}),this)},n.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),bo(this._ctx,function(){var a=r;return function(s,l,f){return--a<=0&&l(f),a>=0}},!0),this},n.prototype.until=function(r,a){return _o(this._ctx,function(s,l,f){return r(s.value)?(l(f),a):!0}),this},n.prototype.first=function(r){return this.limit(1).toArray(function(a){return a[0]}).then(r)},n.prototype.last=function(r){return this.reverse().first(r)},n.prototype.filter=function(r){return _o(this._ctx,function(a){return r(a.value)}),Rc(this._ctx,r),this},n.prototype.and=function(r){return this.filter(r)},n.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(r){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(s,l){r(l.key,l)})},n.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},n.prototype.eachPrimaryKey=function(r){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(s,l){r(l.primaryKey,l)})},n.prototype.keys=function(r){var a=this._ctx;a.keysOnly=!a.isMatch;var s=[];return this.each(function(l,f){s.push(f.key)}).then(function(){return s}).then(r)},n.prototype.primaryKeys=function(r){var a=this._ctx;if(a.dir==="next"&&Pr(a,!0)&&a.limit>0)return this._read(function(l){var f=Xi(a,a.table.core.schema);return a.table.core.query({trans:l,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(l){var f=l.result;return f}).then(r);a.keysOnly=!a.isMatch;var s=[];return this.each(function(l,f){s.push(f.primaryKey)}).then(function(){return s}).then(r)},n.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},n.prototype.firstKey=function(r){return this.limit(1).keys(function(a){return a[0]}).then(r)},n.prototype.lastKey=function(r){return this.reverse().firstKey(r)},n.prototype.distinct=function(){var r=this._ctx,a=r.index&&r.table.schema.idxByName[r.index];if(!a||!a.multi)return this;var s={};return _o(this._ctx,function(l){var f=l.primaryKey.toString(),v=b(s,f);return s[f]=!0,!v}),this},n.prototype.modify=function(r){var a=this,s=this._ctx;return this._write(function(l){var f;typeof r=="function"?f=r:f=function(K){return ru(K,r)};var v=s.table.core,m=v.schema.primaryKey,g=m.outbound,x=m.extractKey,S=200,A=a.db._options.modifyChunkSize;A&&(typeof A=="object"?S=A[v.name]||A["*"]||200:S=A);var R=[],Y=0,D=[],C=function(K,j){var z=j.failures,U=j.numFailures;Y+=K-U;for(var B=0,Z=p(z);B<Z.length;B++){var $=Z[B];R.push(z[$])}},P=r===su;return a.clone().primaryKeys().then(function(K){var j=Pr(s)&&s.limit===1/0&&(typeof r!="function"||P)&&{index:s.index,range:s.range},z=function(U){var B=Math.min(S,K.length-U),Z=K.slice(U,U+B);return(P?Promise.resolve([]):v.getMany({trans:l,keys:Z,cache:"immutable"})).then(function($){var Q=[],ve=[],xe=g?[]:null,ee=P?Z:[];if(!P)for(var we=0;we<B;++we){var he=$[we],Oe={value:He(he),primKey:K[U+we]};f.call(Oe,Oe.value,Oe)!==!1&&(Oe.value==null?ee.push(K[U+we]):!g&&Ie(x(he),x(Oe.value))!==0?(ee.push(K[U+we]),Q.push(Oe.value)):(ve.push(Oe.value),g&&xe.push(K[U+we])))}return Promise.resolve(Q.length>0&&v.mutate({trans:l,type:"add",values:Q}).then(function(ce){for(var Je in ce.failures)ee.splice(parseInt(Je),1);C(Q.length,ce)})).then(function(){return(ve.length>0||j&&typeof r=="object")&&v.mutate({trans:l,type:"put",keys:xe,values:ve,criteria:j,changeSpec:typeof r!="function"&&r,isAdditionalChunk:U>0}).then(function(ce){return C(ve.length,ce)})}).then(function(){return(ee.length>0||j&&P)&&v.mutate({trans:l,type:"delete",keys:ee,criteria:j,isAdditionalChunk:U>0}).then(function(ce){return Qi(s.table,ee,ce)}).then(function(ce){return C(ee.length,ce)})}).then(function(){return K.length>U+B&&z(U+S)})})};return z(0).then(function(){if(R.length>0)throw new jt("Error modifying one or more objects",R,Y,D);return K.length})})})},n.prototype.delete=function(){var r=this._ctx,a=r.range;return Pr(r)&&!r.table.schema.yProps&&(r.isPrimKey||a.type===3)?this._write(function(s){var l=r.table.core.schema.primaryKey,f=a;return r.table.core.count({trans:s,query:{index:l,range:f}}).then(function(v){return r.table.core.mutate({trans:s,type:"deleteRange",range:f}).then(function(m){var g=m.failures,x=m.numFailures;if(x)throw new jt("Could not delete some values",Object.keys(g).map(function(S){return g[S]}),v-x);return v-x})})}):this.modify(su)},n})(),su=function(n,r){return r.value=null};function Nc(n){return oi(Mc.prototype,function(a,s){this.db=n;var l=$s,f=null;if(s)try{l=s()}catch(x){f=x}var v=a._ctx,m=v.table,g=m.hook.reading.fire;this._ctx={table:m,index:v.index,isPrimKey:!v.index||m.schema.primKey.keyPath&&v.index===m.schema.primKey.name,range:l,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:v.or,valueMapper:g!==q?g:null}})}function Kc(n,r){return n<r?-1:n===r?0:1}function Fc(n,r){return n>r?-1:n===r?0:1}function Ut(n,r,a){var s=n instanceof lu?new n.Collection(n):n;return s._ctx.error=a?new a(r):new TypeError(r),s}function Rr(n){return new n.Collection(n,function(){return uu("")}).limit(0)}function Bc(n){return n==="next"?function(r){return r.toUpperCase()}:function(r){return r.toLowerCase()}}function jc(n){return n==="next"?function(r){return r.toLowerCase()}:function(r){return r.toUpperCase()}}function zc(n,r,a,s,l,f){for(var v=Math.min(n.length,s.length),m=-1,g=0;g<v;++g){var x=r[g];if(x!==s[g])return l(n[g],a[g])<0?n.substr(0,g)+a[g]+a.substr(g+1):l(n[g],s[g])<0?n.substr(0,g)+s[g]+a.substr(g+1):m>=0?n.substr(0,m)+r[m]+a.substr(m+1):null;l(n[g],x)<0&&(m=g)}return v<s.length&&f==="next"?n+a.substr(n.length):v<n.length&&f==="prev"?n.substr(0,a.length):m<0?null:n.substr(0,m)+s[m]+a.substr(m+1)}function $i(n,r,a,s){var l,f,v,m,g,x,S,A=a.length;if(!a.every(function(C){return typeof C=="string"}))return Ut(n,Js);function R(C){l=Bc(C),f=jc(C),v=C==="next"?Kc:Fc;var P=a.map(function(K){return{lower:f(K),upper:l(K)}}).sort(function(K,j){return v(K.lower,j.lower)});m=P.map(function(K){return K.upper}),g=P.map(function(K){return K.lower}),x=C,S=C==="next"?"":s}R("next");var Y=new n.Collection(n,function(){return jn(m[0],g[A-1]+s)});Y._ondirectionchange=function(C){R(C)};var D=0;return Y._addAlgorithm(function(C,P,K){var j=C.key;if(typeof j!="string")return!1;var z=f(j);if(r(z,g,D))return!0;for(var U=null,B=D;B<A;++B){var Z=zc(j,z,m[B],g[B],v,x);Z===null&&U===null?D=B+1:(U===null||v(U,Z)>0)&&(U=Z)}return P(U!==null?function(){C.continue(U+S)}:K),!1}),Y}function jn(n,r,a,s){return{type:2,lower:n,upper:r,lowerOpen:a,upperOpen:s}}function uu(n){return{type:1,lower:n,upper:n}}var lu=(function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(r,a,s,l){s=s!==!1,l=l===!0;try{return this._cmp(r,a)>0||this._cmp(r,a)===0&&(s||l)&&!(s&&l)?Rr(this):new this.Collection(this,function(){return jn(r,a,!s,!l)})}catch{return Ut(this,xn)}},n.prototype.equals=function(r){return r==null?Ut(this,xn):new this.Collection(this,function(){return uu(r)})},n.prototype.above=function(r){return r==null?Ut(this,xn):new this.Collection(this,function(){return jn(r,void 0,!0)})},n.prototype.aboveOrEqual=function(r){return r==null?Ut(this,xn):new this.Collection(this,function(){return jn(r,void 0,!1)})},n.prototype.below=function(r){return r==null?Ut(this,xn):new this.Collection(this,function(){return jn(void 0,r,!1,!0)})},n.prototype.belowOrEqual=function(r){return r==null?Ut(this,xn):new this.Collection(this,function(){return jn(void 0,r)})},n.prototype.startsWith=function(r){return typeof r!="string"?Ut(this,Js):this.between(r,r+cr,!0,!0)},n.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):$i(this,function(a,s){return a.indexOf(s[0])===0},[r],cr)},n.prototype.equalsIgnoreCase=function(r){return $i(this,function(a,s){return a===s[0]},[r],"")},n.prototype.anyOfIgnoreCase=function(){var r=vt.apply(dt,arguments);return r.length===0?Rr(this):$i(this,function(a,s){return s.indexOf(a)!==-1},r,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var r=vt.apply(dt,arguments);return r.length===0?Rr(this):$i(this,function(a,s){return s.some(function(l){return a.indexOf(l)===0})},r,cr)},n.prototype.anyOf=function(){var r=this,a=vt.apply(dt,arguments),s=this._cmp;try{a.sort(s)}catch{return Ut(this,xn)}if(a.length===0)return Rr(this);var l=new this.Collection(this,function(){return jn(a[0],a[a.length-1])});l._ondirectionchange=function(v){s=v==="next"?r._ascending:r._descending,a.sort(s)};var f=0;return l._addAlgorithm(function(v,m,g){for(var x=v.key;s(x,a[f])>0;)if(++f,f===a.length)return m(g),!1;return s(x,a[f])===0?!0:(m(function(){v.continue(a[f])}),!1)}),l},n.prototype.notEqual=function(r){return this.inAnyRange([[mo,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var r=vt.apply(dt,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Ut(this,xn)}var a=r.reduce(function(s,l){return s?s.concat([[s[s.length-1][1],l]]):[[mo,l]]},null);return a.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(r,a){var s=this,l=this._cmp,f=this._ascending,v=this._descending,m=this._min,g=this._max;if(r.length===0)return Rr(this);if(!r.every(function(B){return B[0]!==void 0&&B[1]!==void 0&&f(B[0],B[1])<=0}))return Ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var x=!a||a.includeLowers!==!1,S=a&&a.includeUppers===!0;function A(B,Z){for(var $=0,Q=B.length;$<Q;++$){var ve=B[$];if(l(Z[0],ve[1])<0&&l(Z[1],ve[0])>0){ve[0]=m(ve[0],Z[0]),ve[1]=g(ve[1],Z[1]);break}}return $===Q&&B.push(Z),B}var R=f;function Y(B,Z){return R(B[0],Z[0])}var D;try{D=r.reduce(A,[]),D.sort(Y)}catch{return Ut(this,xn)}var C=0,P=S?function(B){return f(B,D[C][1])>0}:function(B){return f(B,D[C][1])>=0},K=x?function(B){return v(B,D[C][0])>0}:function(B){return v(B,D[C][0])>=0};function j(B){return!P(B)&&!K(B)}var z=P,U=new this.Collection(this,function(){return jn(D[0][0],D[D.length-1][1],!x,!S)});return U._ondirectionchange=function(B){B==="next"?(z=P,R=f):(z=K,R=v),D.sort(Y)},U._addAlgorithm(function(B,Z,$){for(var Q=B.key;z(Q);)if(++C,C===D.length)return Z($),!1;return j(Q)?!0:(s._cmp(Q,D[C][1])===0||s._cmp(Q,D[C][0])===0||Z(function(){R===f?B.continue(D[C][0]):B.continue(D[C][1])}),!1)}),U},n.prototype.startsWithAnyOf=function(){var r=vt.apply(dt,arguments);return r.every(function(a){return typeof a=="string"})?r.length===0?Rr(this):this.inAnyRange(r.map(function(a){return[a,a+cr]})):Ut(this,"startsWithAnyOf() only works with strings")},n})();function Hc(n){return oi(lu.prototype,function(a,s,l){if(this.db=n,this._ctx={table:a,index:s===":id"?null:s,or:l},this._cmp=this._ascending=Ie,this._descending=function(f,v){return Ie(v,f)},this._max=function(f,v){return Ie(f,v)>0?f:v},this._min=function(f,v){return Ie(f,v)<0?f:v},this._IDBKeyRange=n._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})}function ln(n){return Ye(function(r){return si(r),n(r.target.error),!1})}function si(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var ui="storagemutated",wo="x-storagemutated-1",zn=ai(null,ui),Uc=(function(){function n(){}return n.prototype._lock=function(){return J(!le.global),++this._reculock,this._reculock===1&&!le.global&&(le.lockOwnerFor=this),this},n.prototype._unlock=function(){if(J(!le.global),--this._reculock===0)for(le.global||(le.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{lr(r[1],r[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&le.lockOwnerFor!==this},n.prototype.create=function(r){var a=this;if(!this.mode)return this;var s=this.db.idbdb,l=this.db._state.dbOpenError;if(J(!this.idbtrans),!r&&!s)switch(l&&l.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(l);case"MissingAPIError":throw new ue.MissingAPI(l.message,l);default:throw new ue.OpenFailed(l)}if(!this.active)throw new ue.TransactionInactive;return J(this._completion._state===null),r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):s.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),r.onerror=Ye(function(f){si(f),a._reject(r.error)}),r.onabort=Ye(function(f){si(f),a.active&&a._reject(new ue.Abort(r.error)),a.active=!1,a.on("abort").fire(f)}),r.oncomplete=Ye(function(){a.active=!1,a._resolve(),"mutatedParts"in r&&zn.storagemutated.fire(r.mutatedParts)}),this},n.prototype._promise=function(r,a,s){var l=this;if(r==="readwrite"&&this.mode!=="readwrite")return $e(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return $e(new ue.TransactionInactive);if(this._locked())return new X(function(v,m){l._blockedFuncs.push([function(){l._promise(r,a,s).then(v,m)},le])});if(s)return Kn(function(){var v=new X(function(m,g){l._lock();var x=a(m,g,l);x&&x.then&&x.then(m,g)});return v.finally(function(){return l._unlock()}),v._lib=!0,v});var f=new X(function(v,m){var g=a(v,m,l);g&&g.then&&g.then(v,m)});return f._lib=!0,f},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(r){var a=this._root(),s=X.resolve(r);if(a._waitingFor)a._waitingFor=a._waitingFor.then(function(){return s});else{a._waitingFor=s,a._waitingQueue=[];var l=a.idbtrans.objectStore(a.storeNames[0]);(function v(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(l.get(-1/0).onsuccess=v)})()}var f=a._waitingFor;return new X(function(v,m){s.then(function(g){return a._waitingQueue.push(Ye(v.bind(null,g)))},function(g){return a._waitingQueue.push(Ye(m.bind(null,g)))}).finally(function(){a._waitingFor===f&&(a._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},n.prototype.table=function(r){var a=this._memoizedTables||(this._memoizedTables={});if(b(a,r))return a[r];var s=this.schema[r];if(!s)throw new ue.NotFound("Table "+r+" not part of transaction");var l=new this.db.Table(r,s,this);return l.core=this.db.core.table(r),a[r]=l,l},n})();function Vc(n){return oi(Uc.prototype,function(a,s,l,f,v){var m=this;a!=="readonly"&&s.forEach(function(g){var x,S=(x=l[g])===null||x===void 0?void 0:x.yProps;S&&(s=s.concat(S.map(function(A){return A.updatesTable})))}),this.db=n,this.mode=a,this.storeNames=s,this.schema=l,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=ai(this,"complete","error","abort"),this.parent=v||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X(function(g,x){m._resolve=g,m._reject=x}),this._completion.then(function(){m.active=!1,m.on.complete.fire()},function(g){var x=m.active;return m.active=!1,m.on.error.fire(g),m.parent?m.parent._reject(g):x&&m.idbtrans&&m.idbtrans.abort(),$e(g)})})}function Eo(n,r,a,s,l,f,v,m){return{name:n,keyPath:r,unique:a,multi:s,auto:l,compound:f,src:(a&&!v?"&":"")+(s?"*":"")+(l?"++":"")+cu(r),type:m}}function cu(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function xo(n,r,a){return{name:n,primKey:r,indexes:a,mappedClass:null,idxByName:ne(a,function(s){return[s.name,s]})}}function Wc(n){return n.length===1?n[0]:n}var li=function(n){try{return n.only([[]]),li=function(){return[[]]},[[]]}catch{return li=function(){return cr},cr}};function To(n){return n==null?function(){}:typeof n=="string"?Gc(n):function(r){return oe(r,n)}}function Gc(n){var r=n.split(".");return r.length===1?function(a){return a[n]}:function(a){return oe(a,n)}}function fu(n){return[].slice.call(n)}var Yc=0;function ci(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function qc(n,r,a){function s(A,R){var Y=fu(A.objectStoreNames);return{schema:{name:A.name,tables:Y.map(function(D){return R.objectStore(D)}).map(function(D){var C=D.keyPath,P=D.autoIncrement,K=h(C),j=C==null,z={},U={name:D.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j,compound:K,keyPath:C,autoIncrement:P,unique:!0,extractKey:To(C)},indexes:fu(D.indexNames).map(function(B){return D.index(B)}).map(function(B){var Z=B.name,$=B.unique,Q=B.multiEntry,ve=B.keyPath,xe=h(ve),ee={name:Z,compound:xe,keyPath:ve,unique:$,multiEntry:Q,extractKey:To(ve)};return z[ci(ve)]=ee,ee}),getIndexByKeyPath:function(B){return z[ci(B)]}};return z[":id"]=U.primaryKey,C!=null&&(z[ci(C)]=U.primaryKey),U})},hasGetAll:Y.length>0&&"getAll"in R.objectStore(Y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function l(A){if(A.type===3)return null;if(A.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var R=A.lower,Y=A.upper,D=A.lowerOpen,C=A.upperOpen,P=R===void 0?Y===void 0?null:r.upperBound(Y,!!C):Y===void 0?r.lowerBound(R,!!D):r.bound(R,Y,!!D,!!C);return P}function f(A){var R=A.name;function Y(P){var K=P.trans,j=P.type,z=P.keys,U=P.values,B=P.range;return new Promise(function(Z,$){Z=Ye(Z);var Q=K.objectStore(R),ve=Q.keyPath==null,xe=j==="put"||j==="add";if(!xe&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var ee=(z||U||{length:1}).length;if(z&&U&&z.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(ee===0)return Z({numFailures:0,failures:{},results:[],lastResult:void 0});var we,he=[],Oe=[],ce=0,Je=function(fn){++ce,si(fn)};if(j==="deleteRange"){if(B.type===4)return Z({numFailures:ce,failures:Oe,results:[],lastResult:void 0});B.type===3?he.push(we=Q.clear()):he.push(we=Q.delete(l(B)))}else{var bt=xe?ve?[U,z]:[U,null]:[z,null],cn=bt[0],Lt=bt[1];if(xe)for(var Yt=0;Yt<ee;++Yt)he.push(we=Lt&&Lt[Yt]!==void 0?Q[j](cn[Yt],Lt[Yt]):Q[j](cn[Yt])),we.onerror=Je;else for(var Yt=0;Yt<ee;++Yt)he.push(we=Q[j](cn[Yt])),we.onerror=Je}var Vn=function(fn){var vi=fn.target.result;he.forEach(function(tn,fa){return tn.error!=null&&(Oe[fa]=tn.error)}),Z({numFailures:ce,failures:Oe,results:j==="delete"?z:he.map(function(tn){return tn.result}),lastResult:vi})};we.onerror=function(fn){Je(fn),Vn(fn)},we.onsuccess=Vn})}function D(P){var K=P.trans,j=P.values,z=P.query,U=P.reverse,B=P.unique;return new Promise(function(Z,$){Z=Ye(Z);var Q=z.index,ve=z.range,xe=K.objectStore(R),ee=Q.isPrimaryKey?xe:xe.index(Q.name),we=U?B?"prevunique":"prev":B?"nextunique":"next",he=j||!("openKeyCursor"in ee)?ee.openCursor(l(ve),we):ee.openKeyCursor(l(ve),we);he.onerror=ln($),he.onsuccess=Ye(function(Oe){var ce=he.result;if(!ce){Z(null);return}ce.___id=++Yc,ce.done=!1;var Je=ce.continue.bind(ce),bt=ce.continuePrimaryKey;bt&&(bt=bt.bind(ce));var cn=ce.advance.bind(ce),Lt=function(){throw new Error("Cursor not started")},Yt=function(){throw new Error("Cursor not stopped")};ce.trans=K,ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=Lt,ce.fail=Ye($),ce.next=function(){var Vn=this,fn=1;return this.start(function(){return fn--?Vn.continue():Vn.stop()}).then(function(){return Vn})},ce.start=function(Vn){var fn=new Promise(function(tn,fa){tn=Ye(tn),he.onerror=ln(fa),ce.fail=fa,ce.stop=function(Nf){ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=Yt,tn(Nf)}}),vi=function(){if(he.result)try{Vn()}catch(tn){ce.fail(tn)}else ce.done=!0,ce.start=function(){throw new Error("Cursor behind last entry")},ce.stop()};return he.onsuccess=Ye(function(tn){he.onsuccess=vi,vi()}),ce.continue=Je,ce.continuePrimaryKey=bt,ce.advance=cn,vi(),fn},Z(ce)},$)})}function C(P){return function(K){return new Promise(function(j,z){j=Ye(j);var U=K.trans,B=K.values,Z=K.limit,$=K.query,Q=Z===1/0?void 0:Z,ve=$.index,xe=$.range,ee=U.objectStore(R),we=ve.isPrimaryKey?ee:ee.index(ve.name),he=l(xe);if(Z===0)return j({result:[]});if(P){var Oe=B?we.getAll(he,Q):we.getAllKeys(he,Q);Oe.onsuccess=function(cn){return j({result:cn.target.result})},Oe.onerror=ln(z)}else{var ce=0,Je=B||!("openKeyCursor"in we)?we.openCursor(he):we.openKeyCursor(he),bt=[];Je.onsuccess=function(cn){var Lt=Je.result;if(!Lt)return j({result:bt});if(bt.push(B?Lt.value:Lt.primaryKey),++ce===Z)return j({result:bt});Lt.continue()},Je.onerror=ln(z)}})}}return{name:R,schema:A,mutate:Y,getMany:function(P){var K=P.trans,j=P.keys;return new Promise(function(z,U){z=Ye(z);for(var B=K.objectStore(R),Z=j.length,$=new Array(Z),Q=0,ve=0,xe,ee=function(ce){var Je=ce.target;($[Je._pos]=Je.result)!=null,++ve===Q&&z($)},we=ln(U),he=0;he<Z;++he){var Oe=j[he];Oe!=null&&(xe=B.get(j[he]),xe._pos=he,xe.onsuccess=ee,xe.onerror=we,++Q)}Q===0&&z($)})},get:function(P){var K=P.trans,j=P.key;return new Promise(function(z,U){z=Ye(z);var B=K.objectStore(R),Z=B.get(j);Z.onsuccess=function($){return z($.target.result)},Z.onerror=ln(U)})},query:C(g),openCursor:D,count:function(P){var K=P.query,j=P.trans,z=K.index,U=K.range;return new Promise(function(B,Z){var $=j.objectStore(R),Q=z.isPrimaryKey?$:$.index(z.name),ve=l(U),xe=ve?Q.count(ve):Q.count();xe.onsuccess=Ye(function(ee){return B(ee.target.result)}),xe.onerror=ln(Z)})}}}var v=s(n,a),m=v.schema,g=v.hasGetAll,x=m.tables.map(function(A){return f(A)}),S={};return x.forEach(function(A){return S[A.name]=A}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(A){var R=S[A];if(!R)throw new Error("Table '".concat(A,"' not found"));return S[A]},MIN_KEY:-1/0,MAX_KEY:li(r),schema:m}}function Zc(n,r){return r.reduce(function(a,s){var l=s.create;return u(u({},a),l(a))},n)}function Qc(n,r,a,s){var l=a.IDBKeyRange;a.indexedDB;var f=Zc(qc(r,l,s),n.dbcore);return{dbcore:f}}function ea(n,r){var a=r.db,s=Qc(n._middlewares,a,n._deps,r);n.core=s.dbcore,n.tables.forEach(function(l){var f=l.name;n.core.schema.tables.some(function(v){return v.name===f})&&(l.core=n.core.table(f),n[f]instanceof n.Table&&(n[f].core=l.core))})}function ta(n,r,a,s){a.forEach(function(l){var f=s[l];r.forEach(function(v){var m=H(v,l);(!m||"value"in m&&m.value===void 0)&&(v===n.Transaction.prototype||v instanceof n.Transaction?L(v,l,{get:function(){return this.table(l)},set:function(g){O(this,l,{value:g,writable:!0,configurable:!0,enumerable:!0})}}):v[l]=new n.Table(l,f))})})}function Ao(n,r){r.forEach(function(a){for(var s in a)a[s]instanceof n.Table&&delete a[s]})}function Xc(n,r){return n._cfg.version-r._cfg.version}function Jc(n,r,a,s){var l=n._dbSchema;a.objectStoreNames.contains("$meta")&&!l.$meta&&(l.$meta=xo("$meta",vu("")[0],[]),n._storeNames.push("$meta"));var f=n._createTransaction("readwrite",n._storeNames,l);f.create(a),f._completion.catch(s);var v=f._reject.bind(f),m=le.transless||le;Kn(function(){if(le.trans=f,le.transless=m,r===0)p(l).forEach(function(g){Io(a,g,l[g].primKey,l[g].indexes)}),ea(n,a),X.follow(function(){return n.on.populate.fire(f)}).catch(v);else return ea(n,a),ef(n,f,r).then(function(g){return tf(n,g,f,a)}).catch(v)})}function $c(n,r){du(n._dbSchema,r),r.db.version%10===0&&!r.objectStoreNames.contains("$meta")&&r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var a=ra(n,n.idbdb,r);ia(n,n._dbSchema,r);for(var s=ko(a,n._dbSchema),l=function(x){if(x.change.length||x.recreate)return console.warn("Unable to patch indexes of table ".concat(x.name," because it has changes on the type of index or primary key.")),{value:void 0};var S=r.objectStore(x.name);x.add.forEach(function(A){je&&console.debug("Dexie upgrade patch: Creating missing index ".concat(x.name,".").concat(A.src)),na(S,A)})},f=0,v=s.change;f<v.length;f++){var m=v[f],g=l(m);if(typeof g=="object")return g.value}}function ef(n,r,a){return r.storeNames.includes("$meta")?r.table("$meta").get("version").then(function(s){return s??a}):X.resolve(a)}function tf(n,r,a,s){var l=[],f=n._versions,v=n._dbSchema=ra(n,n.idbdb,s),m=f.filter(function(x){return x._cfg.version>=r});if(m.length===0)return X.resolve();m.forEach(function(x){l.push(function(){var S=v,A=x._cfg.dbschema;ia(n,S,s),ia(n,A,s),v=n._dbSchema=A;var R=ko(S,A);R.add.forEach(function(j){Io(s,j[0],j[1].primKey,j[1].indexes)}),R.change.forEach(function(j){if(j.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var z=s.objectStore(j.name);j.add.forEach(function(U){return na(z,U)}),j.change.forEach(function(U){z.deleteIndex(U.name),na(z,U)}),j.del.forEach(function(U){return z.deleteIndex(U)})});var Y=x._cfg.contentUpgrade;if(Y&&x._cfg.version>r){ea(n,s),a._memoizedTables={};var D=ge(A);R.del.forEach(function(j){D[j]=S[j]}),Ao(n,[n.Transaction.prototype]),ta(n,[n.Transaction.prototype],p(D),D),a.schema=D;var C=en(Y);C&&Cr();var P,K=X.follow(function(){if(P=Y(a),P&&C){var j=Fn.bind(null,null);P.then(j,j)}});return P&&typeof P.then=="function"?X.resolve(P):K.then(function(){return P})}}),l.push(function(S){var A=x._cfg.dbschema;nf(A,S),Ao(n,[n.Transaction.prototype]),ta(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),a.schema=n._dbSchema}),l.push(function(S){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===x._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(A){return A!=="$meta"})):S.objectStore("$meta").put(x._cfg.version,"version"))})});function g(){return l.length?X.resolve(l.shift()(a.idbtrans)).then(g):X.resolve()}return g().then(function(){du(v,s)})}function ko(n,r){var a={del:[],add:[],change:[]},s;for(s in n)r[s]||a.del.push(s);for(s in r){var l=n[s],f=r[s];if(!l)a.add.push([s,f]);else{var v={name:s,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(l.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||l.primKey.auto!==f.primKey.auto)v.recreate=!0,a.change.push(v);else{var m=l.idxByName,g=f.idxByName,x=void 0;for(x in m)g[x]||v.del.push(x);for(x in g){var S=m[x],A=g[x];S?S.src!==A.src&&v.change.push(A):v.add.push(A)}(v.del.length>0||v.add.length>0||v.change.length>0)&&a.change.push(v)}}}return a}function Io(n,r,a,s){var l=n.db.createObjectStore(r,a.keyPath?{keyPath:a.keyPath,autoIncrement:a.auto}:{autoIncrement:a.auto});return s.forEach(function(f){return na(l,f)}),l}function du(n,r){p(n).forEach(function(a){r.db.objectStoreNames.contains(a)||(je&&console.debug("Dexie: Creating missing table",a),Io(r,a,n[a].primKey,n[a].indexes))})}function nf(n,r){[].slice.call(r.db.objectStoreNames).forEach(function(a){return n[a]==null&&r.db.deleteObjectStore(a)})}function na(n,r){n.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function ra(n,r,a){var s={},l=N(r.objectStoreNames,0);return l.forEach(function(f){for(var v=a.objectStore(f),m=v.keyPath,g=Eo(cu(m),m||"",!0,!1,!!v.autoIncrement,m&&typeof m!="string",!0),x=[],S=0;S<v.indexNames.length;++S){var A=v.index(v.indexNames[S]);m=A.keyPath;var R=Eo(A.name,m,!!A.unique,!!A.multiEntry,!1,m&&typeof m!="string",!1);x.push(R)}s[f]=xo(f,g,x)}),s}function rf(n,r,a){n.verno=r.version/10;var s=n._dbSchema=ra(n,r,a);n._storeNames=N(r.objectStoreNames,0),ta(n,[n._allTables],p(s),s)}function af(n,r){var a=ra(n,n.idbdb,r),s=ko(a,n._dbSchema);return!(s.add.length||s.change.some(function(l){return l.add.length||l.change.length}))}function ia(n,r,a){for(var s=a.db.objectStoreNames,l=0;l<s.length;++l){var f=s[l],v=a.objectStore(f);n._hasGetAll="getAll"in v;for(var m=0;m<v.indexNames.length;++m){var g=v.indexNames[m],x=v.index(g).keyPath,S=typeof x=="string"?x:"["+N(x).join("+")+"]";if(r[f]){var A=r[f].idxByName[S];A&&(A.name=g,delete r[f].idxByName[S],r[f].idxByName[g]=A)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function vu(n){return n.split(",").map(function(r,a){var s,l=r.split(":"),f=(s=l[1])===null||s===void 0?void 0:s.trim();r=l[0].trim();var v=r.replace(/([&*]|\+\+)/g,""),m=/^\[/.test(v)?v.match(/^\[(.*)\]$/)[1].split("+"):v;return Eo(v,m||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),h(m),a===0,f)})}var of=(function(){function n(){}return n.prototype._createTableSchema=function(r,a,s){return xo(r,a,s)},n.prototype._parseIndexSyntax=function(r){return vu(r)},n.prototype._parseStoresSpec=function(r,a){var s=this;p(r).forEach(function(l){if(r[l]!==null){var f=s._parseIndexSyntax(r[l]),v=f.shift();if(!v)throw new ue.Schema("Invalid schema for table "+l+": "+r[l]);if(v.unique=!0,v.multi)throw new ue.Schema("Primary key cannot be multiEntry*");f.forEach(function(g){if(g.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")});var m=s._createTableSchema(l,v,f);a[l]=m}})},n.prototype.stores=function(r){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,r):r;var s=a._versions,l={},f={};return s.forEach(function(v){_(l,v._cfg.storesSource),f=v._cfg.dbschema={},v._parseStoresSpec(l,f)}),a._dbSchema=f,Ao(a,[a._allTables,a,a.Transaction.prototype]),ta(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],p(f),f),a._storeNames=p(f),this},n.prototype.upgrade=function(r){return this._cfg.contentUpgrade=be(this._cfg.contentUpgrade||Le,r),this},n})();function sf(n){return oi(of.prototype,function(a){this.db=n,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Do(n,r){var a=n._dbNamesDB;return a||(a=n._dbNamesDB=new Tn(qi,{addons:[],indexedDB:n,IDBKeyRange:r}),a.version(1).stores({dbnames:"name"})),a.table("dbnames")}function So(n){return n&&typeof n.databases=="function"}function uf(n){var r=n.indexedDB,a=n.IDBKeyRange;return So(r)?Promise.resolve(r.databases()).then(function(s){return s.map(function(l){return l.name}).filter(function(l){return l!==qi})}):Do(r,a).toCollection().primaryKeys()}function lf(n,r){var a=n.indexedDB,s=n.IDBKeyRange;!So(a)&&r!==qi&&Do(a,s).put({name:r}).catch(Le)}function cf(n,r){var a=n.indexedDB,s=n.IDBKeyRange;!So(a)&&r!==qi&&Do(a,s).delete(r).catch(Le)}function Oo(n){return Kn(function(){return le.letThrough=!0,n()})}function ff(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(a){var s=function(){return indexedDB.databases().finally(a)};r=setInterval(s,100),s()}).finally(function(){return clearInterval(r)})}var Co;function Lo(n){return!("from"in n)}var _t=function(n,r){if(this)_(this,arguments.length?{d:1,from:n,to:arguments.length>1?r:n}:{d:0});else{var a=new _t;return n&&"d"in n&&_(a,n),a}};E(_t.prototype,(Co={add:function(n){return di(this,n),this},addKey:function(n){return fi(this,n,n),this},addKeys:function(n){var r=this;return n.forEach(function(a){return fi(r,a,a)}),this},hasKey:function(n){var r=aa(this).next(n).value;return r&&Ie(r.from,n)<=0&&Ie(r.to,n)>=0}},Co[Ve]=function(){return aa(this)},Co));function fi(n,r,a){var s=Ie(r,a);if(!isNaN(s)){if(s>0)throw RangeError();if(Lo(n))return _(n,{from:r,to:a,d:1});var l=n.l,f=n.r;if(Ie(a,n.from)<0)return l?fi(l,r,a):n.l={from:r,to:a,d:1,l:null,r:null},pu(n);if(Ie(r,n.to)>0)return f?fi(f,r,a):n.r={from:r,to:a,d:1,l:null,r:null},pu(n);Ie(r,n.from)<0&&(n.from=r,n.l=null,n.d=f?f.d+1:1),Ie(a,n.to)>0&&(n.to=a,n.r=null,n.d=n.l?n.l.d+1:1);var v=!n.r;l&&!n.l&&di(n,l),f&&v&&di(n,f)}}function di(n,r){function a(s,l){var f=l.from,v=l.to,m=l.l,g=l.r;fi(s,f,v),m&&a(s,m),g&&a(s,g)}Lo(r)||a(n,r)}function hu(n,r){var a=aa(r),s=a.next();if(s.done)return!1;for(var l=s.value,f=aa(n),v=f.next(l.from),m=v.value;!s.done&&!v.done;){if(Ie(m.from,l.to)<=0&&Ie(m.to,l.from)>=0)return!0;Ie(l.from,m.from)<0?l=(s=a.next(m.from)).value:m=(v=f.next(l.from)).value}return!1}function aa(n){var r=Lo(n)?null:{s:0,n};return{next:function(a){for(var s=arguments.length>0;r;)switch(r.s){case 0:if(r.s=1,s)for(;r.n.l&&Ie(a,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!s||Ie(a,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function pu(n){var r,a,s=(((r=n.r)===null||r===void 0?void 0:r.d)||0)-(((a=n.l)===null||a===void 0?void 0:a.d)||0),l=s>1?"r":s<-1?"l":"";if(l){var f=l==="r"?"l":"r",v=u({},n),m=n[l];n.from=m.from,n.to=m.to,n[l]=m[l],v[l]=m[f],n[f]=v,v.d=mu(v)}n.d=mu(n)}function mu(n){var r=n.r,a=n.l;return(r?a?Math.max(r.d,a.d):r.d:a?a.d:0)+1}function oa(n,r){return p(r).forEach(function(a){n[a]?di(n[a],r[a]):n[a]=Ae(r[a])}),n}function Po(n,r){return n.all||r.all||Object.keys(n).some(function(a){return r[a]&&hu(r[a],n[a])})}var dr={},Ro={},Mo=!1;function sa(n,r){oa(Ro,n),Mo||(Mo=!0,setTimeout(function(){Mo=!1;var a=Ro;Ro={},No(a,!1)},0))}function No(n,r){r===void 0&&(r=!1);var a=new Set;if(n.all)for(var s=0,l=Object.values(dr);s<l.length;s++){var f=l[s];yu(f,n,a,r)}else for(var v in n){var m=/^idb\:\/\/(.*)\/(.*)\//.exec(v);if(m){var g=m[1],x=m[2],f=dr["idb://".concat(g,"/").concat(x)];f&&yu(f,n,a,r)}}a.forEach(function(S){return S()})}function yu(n,r,a,s){for(var l=[],f=0,v=Object.entries(n.queries.query);f<v.length;f++){for(var m=v[f],g=m[0],x=m[1],S=[],A=0,R=x;A<R.length;A++){var Y=R[A];Po(r,Y.obsSet)?Y.subscribers.forEach(function(K){return a.add(K)}):s&&S.push(Y)}s&&l.push([g,S])}if(s)for(var D=0,C=l;D<C.length;D++){var P=C[D],g=P[0],S=P[1];n.queries.query[g]=S}}function df(n){var r=n._state,a=n._deps.indexedDB;if(r.isBeingOpened||n.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?$e(r.dbOpenError):n});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var s=r.openCanceller,l=Math.round(n.verno*10),f=!1;function v(){if(r.openCanceller!==s)throw new ue.DatabaseClosed("db.open() was cancelled")}var m=r.dbReadyResolve,g=null,x=!1,S=function(){return new X(function(A,R){if(v(),!a)throw new ue.MissingAPI;var Y=n.name,D=r.autoSchema||!l?a.open(Y):a.open(Y,l);if(!D)throw new ue.MissingAPI;D.onerror=ln(R),D.onblocked=Ye(n._fireOnBlocked),D.onupgradeneeded=Ye(function(C){if(g=D.transaction,r.autoSchema&&!n._options.allowEmptyDB){D.onerror=si,g.abort(),D.result.close();var P=a.deleteDatabase(Y);P.onsuccess=P.onerror=Ye(function(){R(new ue.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})}else{g.onerror=ln(R);var K=C.oldVersion>Math.pow(2,62)?0:C.oldVersion;x=K<1,n.idbdb=D.result,f&&$c(n,g),Jc(n,K/10,g,R)}},R),D.onsuccess=Ye(function(){g=null;var C=n.idbdb=D.result,P=N(C.objectStoreNames);if(P.length>0)try{var K=C.transaction(Wc(P),"readonly");if(r.autoSchema)rf(n,C,K);else if(ia(n,n._dbSchema,K),!af(n,K)&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),C.close(),l=C.version+1,f=!0,A(S());ea(n,K)}catch{}Lr.push(n),C.onversionchange=Ye(function(j){r.vcFired=!0,n.on("versionchange").fire(j)}),C.onclose=Ye(function(){n.close({disableAutoOpen:!1})}),x&&lf(n._deps,Y),A()},R)}).catch(function(A){switch(A?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),S();break;case"VersionError":if(l>0)return l=0,S();break}return X.reject(A)})};return X.race([s,(typeof navigator>"u"?X.resolve():ff()).then(S)]).then(function(){return v(),r.onReadyBeingFired=[],X.resolve(Oo(function(){return n.on.ready.fire(n.vip)})).then(function A(){if(r.onReadyBeingFired.length>0){var R=r.onReadyBeingFired.reduce(be,Le);return r.onReadyBeingFired=[],X.resolve(Oo(function(){return R(n.vip)})).then(A)}})}).finally(function(){r.openCanceller===s&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(A){r.dbOpenError=A;try{g&&g.abort()}catch{}return s===r.openCanceller&&n._close(),$e(A)}).finally(function(){r.openComplete=!0,m()}).then(function(){if(x){var A={};n.tables.forEach(function(R){R.schema.indexes.forEach(function(Y){Y.name&&(A["idb://".concat(n.name,"/").concat(R.name,"/").concat(Y.name)]=new _t(-1/0,[[[]]]))}),A["idb://".concat(n.name,"/").concat(R.name,"/")]=A["idb://".concat(n.name,"/").concat(R.name,"/:dels")]=new _t(-1/0,[[[]]])}),zn(ui).fire(A),No(A,!0)}return n})}function Ko(n){var r=function(v){return n.next(v)},a=function(v){return n.throw(v)},s=f(r),l=f(a);function f(v){return function(m){var g=v(m),x=g.value;return g.done?x:!x||typeof x.then!="function"?h(x)?Promise.all(x).then(s,l):s(x):x.then(s,l)}}return f(r)()}function vf(n,r,a){var s=arguments.length;if(s<2)throw new ue.InvalidArgument("Too few arguments");for(var l=new Array(s-1);--s;)l[s-1]=arguments[s];a=l.pop();var f=Ke(l);return[n,f,a]}function gu(n,r,a,s,l){return X.resolve().then(function(){var f=le.transless||le,v=n._createTransaction(r,a,n._dbSchema,s);v.explicit=!0;var m={trans:v,transless:f};if(s)v.idbtrans=s.idbtrans;else try{v.create(),v.idbtrans._explicit=!0,n._state.PR1398_maxLoop=3}catch(A){return A.name===Ht.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return gu(n,r,a,null,l)})):$e(A)}var g=en(l);g&&Cr();var x,S=X.follow(function(){if(x=l.call(v,v),x)if(g){var A=Fn.bind(null,null);x.then(A,A)}else typeof x.next=="function"&&typeof x.throw=="function"&&(x=Ko(x))},m);return(x&&typeof x.then=="function"?X.resolve(x).then(function(A){return v.active?A:$e(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return x})).then(function(A){return s&&v._resolve(),v._completion.then(function(){return A})}).catch(function(A){return v._reject(A),$e(A)})})}function ua(n,r,a){for(var s=h(n)?n.slice():[n],l=0;l<a;++l)s.push(r);return s}function hf(n){return u(u({},n),{table:function(r){var a=n.table(r),s=a.schema,l={},f=[];function v(C,P,K){var j=ci(C),z=l[j]=l[j]||[],U=C==null?0:typeof C=="string"?1:C.length,B=P>0,Z=u(u({},K),{name:B?"".concat(j,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:B,keyTail:P,keyLength:U,extractKey:To(C),unique:!B&&K.unique});if(z.push(Z),Z.isPrimaryKey||f.push(Z),U>1){var $=U===2?C[0]:C.slice(0,U-1);v($,P+1,K)}return z.sort(function(Q,ve){return Q.keyTail-ve.keyTail}),Z}var m=v(s.primaryKey.keyPath,0,s.primaryKey);l[":id"]=[m];for(var g=0,x=s.indexes;g<x.length;g++){var S=x[g];v(S.keyPath,0,S)}function A(C){var P=l[ci(C)];return P&&P[0]}function R(C,P){return{type:C.type===1?2:C.type,lower:ua(C.lower,C.lowerOpen?n.MAX_KEY:n.MIN_KEY,P),lowerOpen:!0,upper:ua(C.upper,C.upperOpen?n.MIN_KEY:n.MAX_KEY,P),upperOpen:!0}}function Y(C){var P=C.query.index;return P.isVirtual?u(u({},C),{query:{index:P.lowLevelIndex,range:R(C.query.range,P.keyTail)}}):C}var D=u(u({},a),{schema:u(u({},s),{primaryKey:m,indexes:f,getIndexByKeyPath:A}),count:function(C){return a.count(Y(C))},query:function(C){return a.query(Y(C))},openCursor:function(C){var P=C.query.index,K=P.keyTail,j=P.isVirtual,z=P.keyLength;if(!j)return a.openCursor(C);function U(B){function Z(Q){Q!=null?B.continue(ua(Q,C.reverse?n.MAX_KEY:n.MIN_KEY,K)):C.unique?B.continue(B.key.slice(0,z).concat(C.reverse?n.MIN_KEY:n.MAX_KEY,K)):B.continue()}var $=Object.create(B,{continue:{value:Z},continuePrimaryKey:{value:function(Q,ve){B.continuePrimaryKey(ua(Q,n.MAX_KEY,K),ve)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var Q=B.key;return z===1?Q[0]:Q.slice(0,z)}},value:{get:function(){return B.value}}});return $}return a.openCursor(Y(C)).then(function(B){return B&&U(B)})}});return D}})}var pf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:hf};function Fo(n,r,a,s){return a=a||{},s=s||"",p(n).forEach(function(l){if(!b(r,l))a[s+l]=void 0;else{var f=n[l],v=r[l];if(typeof f=="object"&&typeof v=="object"&&f&&v){var m=Re(f),g=Re(v);m!==g?a[s+l]=r[l]:m==="Object"?Fo(f,v,a,s+l+"."):f!==v&&(a[s+l]=r[l])}else f!==v&&(a[s+l]=r[l])}}),p(r).forEach(function(l){b(n,l)||(a[s+l]=r[l])}),a}function Bo(n,r){return r.type==="delete"?r.keys:r.keys||r.values.map(n.extractKey)}var mf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return u(u({},n),{table:function(r){var a=n.table(r),s=a.schema.primaryKey,l=u(u({},a),{mutate:function(f){var v=le.trans,m=v.table(r).hook,g=m.deleting,x=m.creating,S=m.updating;switch(f.type){case"add":if(x.fire===Le)break;return v._promise("readwrite",function(){return A(f)},!0);case"put":if(x.fire===Le&&S.fire===Le)break;return v._promise("readwrite",function(){return A(f)},!0);case"delete":if(g.fire===Le)break;return v._promise("readwrite",function(){return A(f)},!0);case"deleteRange":if(g.fire===Le)break;return v._promise("readwrite",function(){return R(f)},!0)}return a.mutate(f);function A(D){var C=le.trans,P=D.keys||Bo(s,D);if(!P)throw new Error("Keys missing");return D=D.type==="add"||D.type==="put"?u(u({},D),{keys:P}):u({},D),D.type!=="delete"&&(D.values=c([],D.values)),D.keys&&(D.keys=c([],D.keys)),yf(a,D,P).then(function(K){var j=P.map(function(z,U){var B=K[U],Z={onerror:null,onsuccess:null};if(D.type==="delete")g.fire.call(Z,z,B,C);else if(D.type==="add"||B===void 0){var $=x.fire.call(Z,z,D.values[U],C);z==null&&$!=null&&(z=$,D.keys[U]=z,s.outbound||fe(D.values[U],s.keyPath,z))}else{var Q=Fo(B,D.values[U]),ve=S.fire.call(Z,Q,z,B,C);if(ve){var xe=D.values[U];Object.keys(ve).forEach(function(ee){b(xe,ee)?xe[ee]=ve[ee]:fe(xe,ee,ve[ee])})}}return Z});return a.mutate(D).then(function(z){for(var U=z.failures,B=z.results,Z=z.numFailures,$=z.lastResult,Q=0;Q<P.length;++Q){var ve=B?B[Q]:P[Q],xe=j[Q];ve==null?xe.onerror&&xe.onerror(U[Q]):xe.onsuccess&&xe.onsuccess(D.type==="put"&&K[Q]?D.values[Q]:ve)}return{failures:U,results:B,numFailures:Z,lastResult:$}}).catch(function(z){return j.forEach(function(U){return U.onerror&&U.onerror(z)}),Promise.reject(z)})})}function R(D){return Y(D.trans,D.range,1e4)}function Y(D,C,P){return a.query({trans:D,values:!1,query:{index:s,range:C},limit:P}).then(function(K){var j=K.result;return A({type:"delete",keys:j,trans:D}).then(function(z){return z.numFailures>0?Promise.reject(z.failures[0]):j.length<P?{failures:[],numFailures:0,lastResult:void 0}:Y(D,u(u({},C),{lower:j[j.length-1],lowerOpen:!0}),P)})})}}});return l}})}};function yf(n,r,a){return r.type==="add"?Promise.resolve([]):n.getMany({trans:r.trans,keys:a,cache:"immutable"})}function _u(n,r,a){try{if(!r||r.keys.length<n.length)return null;for(var s=[],l=0,f=0;l<r.keys.length&&f<n.length;++l)Ie(r.keys[l],n[f])===0&&(s.push(a?He(r.values[l]):r.values[l]),++f);return s.length===n.length?s:null}catch{return null}}var gf={stack:"dbcore",level:-1,create:function(n){return{table:function(r){var a=n.table(r);return u(u({},a),{getMany:function(s){if(!s.cache)return a.getMany(s);var l=_u(s.keys,s.trans._cache,s.cache==="clone");return l?X.resolve(l):a.getMany(s).then(function(f){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?He(f):f},f})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),a.mutate(s)}})}}}};function bu(n,r){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function wu(n,r){switch(n){case"query":return r.values&&!r.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var _f={stack:"dbcore",level:0,name:"Observability",create:function(n){var r=n.schema.name,a=new _t(n.MIN_KEY,n.MAX_KEY);return u(u({},n),{transaction:function(s,l,f){if(le.subscr&&l!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(le.querier));return n.transaction(s,l,f)},table:function(s){var l=n.table(s),f=l.schema,v=f.primaryKey,m=f.indexes,g=v.extractKey,x=v.outbound,S=v.autoIncrement&&m.filter(function(D){return D.compound&&D.keyPath.includes(v.keyPath)}),A=u(u({},l),{mutate:function(D){var C,P,K=D.trans,j=D.mutatedParts||(D.mutatedParts={}),z=function(he){var Oe="idb://".concat(r,"/").concat(s,"/").concat(he);return j[Oe]||(j[Oe]=new _t)},U=z(""),B=z(":dels"),Z=D.type,$=D.type==="deleteRange"?[D.range]:D.type==="delete"?[D.keys]:D.values.length<50?[Bo(v,D).filter(function(he){return he}),D.values]:[],Q=$[0],ve=$[1],xe=D.trans._cache;if(h(Q)){U.addKeys(Q);var ee=Z==="delete"||Q.length===ve.length?_u(Q,xe):null;ee||B.addKeys(Q),(ee||ve)&&bf(z,f,ee,ve)}else if(Q){var we={from:(C=Q.lower)!==null&&C!==void 0?C:n.MIN_KEY,to:(P=Q.upper)!==null&&P!==void 0?P:n.MAX_KEY};B.add(we),U.add(we)}else U.add(a),B.add(a),f.indexes.forEach(function(he){return z(he.name).add(a)});return l.mutate(D).then(function(he){return Q&&(D.type==="add"||D.type==="put")&&(U.addKeys(he.results),S&&S.forEach(function(Oe){for(var ce=D.values.map(function(Lt){return Oe.extractKey(Lt)}),Je=Oe.keyPath.findIndex(function(Lt){return Lt===v.keyPath}),bt=0,cn=he.results.length;bt<cn;++bt)ce[bt][Je]=he.results[bt];z(Oe.name).addKeys(ce)})),K.mutatedParts=oa(K.mutatedParts||{},j),he})}}),R=function(D){var C,P,K=D.query,j=K.index,z=K.range;return[j,new _t((C=z.lower)!==null&&C!==void 0?C:n.MIN_KEY,(P=z.upper)!==null&&P!==void 0?P:n.MAX_KEY)]},Y={get:function(D){return[v,new _t(D.key)]},getMany:function(D){return[v,new _t().addKeys(D.keys)]},count:R,query:R,openCursor:R};return p(Y).forEach(function(D){A[D]=function(C){var P=le.subscr,K=!!P,j=bu(le,l)&&wu(D,C),z=j?C.obsSet={}:P;if(K){var U=function(ee){var we="idb://".concat(r,"/").concat(s,"/").concat(ee);return z[we]||(z[we]=new _t)},B=U(""),Z=U(":dels"),$=Y[D](C),Q=$[0],ve=$[1];if(D==="query"&&Q.isPrimaryKey&&!C.values?Z.add(ve):U(Q.name||"").add(ve),!Q.isPrimaryKey)if(D==="count")Z.add(a);else{var xe=D==="query"&&x&&C.values&&l.query(u(u({},C),{values:!1}));return l[D].apply(this,arguments).then(function(ee){if(D==="query"){if(x&&C.values)return xe.then(function(ce){var Je=ce.result;return B.addKeys(Je),ee});var we=C.values?ee.result.map(g):ee.result;C.values?B.addKeys(we):Z.addKeys(we)}else if(D==="openCursor"){var he=ee,Oe=C.values;return he&&Object.create(he,{key:{get:function(){return Z.addKey(he.primaryKey),he.key}},primaryKey:{get:function(){var ce=he.primaryKey;return Z.addKey(ce),ce}},value:{get:function(){return Oe&&B.addKey(he.primaryKey),he.value}}})}return ee})}}return l[D].apply(this,arguments)}}),A}})}};function bf(n,r,a,s){function l(f){var v=n(f.name||"");function m(x){return x!=null?f.extractKey(x):null}var g=function(x){return f.multiEntry&&h(x)?x.forEach(function(S){return v.addKey(S)}):v.addKey(x)};(a||s).forEach(function(x,S){var A=a&&m(a[S]),R=s&&m(s[S]);Ie(A,R)!==0&&(A!=null&&g(A),R!=null&&g(R))})}r.indexes.forEach(l)}function Eu(n,r,a){if(a.numFailures===0)return r;if(r.type==="deleteRange")return null;var s=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;if(a.numFailures===s)return null;var l=u({},r);return h(l.keys)&&(l.keys=l.keys.filter(function(f,v){return!(v in a.failures)})),"values"in l&&h(l.values)&&(l.values=l.values.filter(function(f,v){return!(v in a.failures)})),l}function wf(n,r){return r.lower===void 0?!0:r.lowerOpen?Ie(n,r.lower)>0:Ie(n,r.lower)>=0}function Ef(n,r){return r.upper===void 0?!0:r.upperOpen?Ie(n,r.upper)<0:Ie(n,r.upper)<=0}function jo(n,r){return wf(n,r)&&Ef(n,r)}function xu(n,r,a,s,l,f){if(!a||a.length===0)return n;var v=r.query.index,m=v.multiEntry,g=r.query.range,x=s.schema.primaryKey,S=x.extractKey,A=v.extractKey,R=(v.lowLevelIndex||v).extractKey,Y=a.reduce(function(D,C){var P=D,K=[];if(C.type==="add"||C.type==="put")for(var j=new _t,z=C.values.length-1;z>=0;--z){var U=C.values[z],B=S(U);if(!j.hasKey(B)){var Z=A(U);(m&&h(Z)?Z.some(function(ee){return jo(ee,g)}):jo(Z,g))&&(j.addKey(B),K.push(U))}}switch(C.type){case"add":{var $=new _t().addKeys(r.values?D.map(function(ee){return S(ee)}):D);P=D.concat(r.values?K.filter(function(ee){var we=S(ee);return $.hasKey(we)?!1:($.addKey(we),!0)}):K.map(function(ee){return S(ee)}).filter(function(ee){return $.hasKey(ee)?!1:($.addKey(ee),!0)}));break}case"put":{var Q=new _t().addKeys(C.values.map(function(ee){return S(ee)}));P=D.filter(function(ee){return!Q.hasKey(r.values?S(ee):ee)}).concat(r.values?K:K.map(function(ee){return S(ee)}));break}case"delete":var ve=new _t().addKeys(C.keys);P=D.filter(function(ee){return!ve.hasKey(r.values?S(ee):ee)});break;case"deleteRange":var xe=C.range;P=D.filter(function(ee){return!jo(S(ee),xe)});break}return P},n);return Y===n?n:(Y.sort(function(D,C){return Ie(R(D),R(C))||Ie(S(D),S(C))}),r.limit&&r.limit<1/0&&(Y.length>r.limit?Y.length=r.limit:n.length===r.limit&&Y.length<r.limit&&(l.dirty=!0)),f?Object.freeze(Y):Y)}function Tu(n,r){return Ie(n.lower,r.lower)===0&&Ie(n.upper,r.upper)===0&&!!n.lowerOpen==!!r.lowerOpen&&!!n.upperOpen==!!r.upperOpen}function xf(n,r,a,s){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;var l=Ie(n,r);if(l===0){if(a&&s)return 0;if(a)return 1;if(s)return-1}return l}function Tf(n,r,a,s){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;var l=Ie(n,r);if(l===0){if(a&&s)return 0;if(a)return-1;if(s)return 1}return l}function Af(n,r){return xf(n.lower,r.lower,n.lowerOpen,r.lowerOpen)<=0&&Tf(n.upper,r.upper,n.upperOpen,r.upperOpen)>=0}function kf(n,r,a,s){var l=dr["idb://".concat(n,"/").concat(r)];if(!l)return[];var f=l.queries[a];if(!f)return[null,!1,l,null];var v=s.query?s.query.index.name:null,m=f[v||""];if(!m)return[null,!1,l,null];switch(a){case"query":var g=m.find(function(A){return A.req.limit===s.limit&&A.req.values===s.values&&Tu(A.req.query.range,s.query.range)});if(g)return[g,!0,l,m];var x=m.find(function(A){var R="limit"in A.req?A.req.limit:1/0;return R>=s.limit&&(s.values?A.req.values:!0)&&Af(A.req.query.range,s.query.range)});return[x,!1,l,m];case"count":var S=m.find(function(A){return Tu(A.req.query.range,s.query.range)});return[S,!!S,l,m]}}function If(n,r,a,s){n.subscribers.add(a),s.addEventListener("abort",function(){n.subscribers.delete(a),n.subscribers.size===0&&Df(n,r)})}function Df(n,r){setTimeout(function(){n.subscribers.size===0&&Be(r,n)},3e3)}var Sf={stack:"dbcore",level:0,name:"Cache",create:function(n){var r=n.schema.name,a=u(u({},n),{transaction:function(s,l,f){var v=n.transaction(s,l,f);if(l==="readwrite"){var m=new AbortController,g=m.signal,x=function(S){return function(){if(m.abort(),l==="readwrite"){for(var A=new Set,R=0,Y=s;R<Y.length;R++){var D=Y[R],C=dr["idb://".concat(r,"/").concat(D)];if(C){var P=n.table(D),K=C.optimisticOps.filter(function(Oe){return Oe.trans===v});if(v._explicit&&S&&v.mutatedParts)for(var j=0,z=Object.values(C.queries.query);j<z.length;j++)for(var U=z[j],B=0,Z=U.slice();B<Z.length;B++){var $=Z[B];Po($.obsSet,v.mutatedParts)&&(Be(U,$),$.subscribers.forEach(function(Oe){return A.add(Oe)}))}else if(K.length>0){C.optimisticOps=C.optimisticOps.filter(function(Oe){return Oe.trans!==v});for(var Q=0,ve=Object.values(C.queries.query);Q<ve.length;Q++)for(var U=ve[Q],xe=0,ee=U.slice();xe<ee.length;xe++){var $=ee[xe];if($.res!=null&&v.mutatedParts)if(S&&!$.dirty){var we=Object.isFrozen($.res),he=xu($.res,$.req,K,P,$,we);$.dirty?(Be(U,$),$.subscribers.forEach(function(Je){return A.add(Je)})):he!==$.res&&($.res=he,$.promise=X.resolve({result:he}))}else $.dirty&&Be(U,$),$.subscribers.forEach(function(Je){return A.add(Je)})}}}}A.forEach(function(Oe){return Oe()})}}};v.addEventListener("abort",x(!1),{signal:g}),v.addEventListener("error",x(!1),{signal:g}),v.addEventListener("complete",x(!0),{signal:g})}return v},table:function(s){var l=n.table(s),f=l.schema.primaryKey,v=u(u({},l),{mutate:function(m){var g=le.trans;if(f.outbound||g.db._options.cache==="disabled"||g.explicit||g.idbtrans.mode!=="readwrite")return l.mutate(m);var x=dr["idb://".concat(r,"/").concat(s)];if(!x)return l.mutate(m);var S=l.mutate(m);return(m.type==="add"||m.type==="put")&&(m.values.length>=50||Bo(f,m).some(function(A){return A==null}))?S.then(function(A){var R=u(u({},m),{values:m.values.map(function(D,C){var P;if(A.failures[C])return D;var K=!((P=f.keyPath)===null||P===void 0)&&P.includes(".")?He(D):u({},D);return fe(K,f.keyPath,A.results[C]),K})}),Y=Eu(x,R,A);x.optimisticOps.push(Y),queueMicrotask(function(){return m.mutatedParts&&sa(m.mutatedParts)})}):(x.optimisticOps.push(m),m.mutatedParts&&sa(m.mutatedParts),S.then(function(A){if(A.numFailures>0){Be(x.optimisticOps,m);var R=Eu(x,m,A);R&&x.optimisticOps.push(R),m.mutatedParts&&sa(m.mutatedParts)}}),S.catch(function(){Be(x.optimisticOps,m),m.mutatedParts&&sa(m.mutatedParts)})),S},query:function(m){var g;if(!bu(le,l)||!wu("query",m))return l.query(m);var x=((g=le.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",S=le,A=S.requery,R=S.signal,Y=kf(r,s,"query",m),D=Y[0],C=Y[1],P=Y[2],K=Y[3];if(D&&C)D.obsSet=m.obsSet;else{var j=l.query(m).then(function(z){var U=z.result;if(D&&(D.res=U),x){for(var B=0,Z=U.length;B<Z;++B)Object.freeze(U[B]);Object.freeze(U)}else z.result=He(U);return z}).catch(function(z){return K&&D&&Be(K,D),Promise.reject(z)});D={obsSet:m.obsSet,promise:j,subscribers:new Set,type:"query",req:m,dirty:!1},K?K.push(D):(K=[D],P||(P=dr["idb://".concat(r,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),P.queries.query[m.query.index.name||""]=K)}return If(D,K,A,R),D.promise.then(function(z){return{result:xu(z.result,m,P?.optimisticOps,l,D,x)}})}});return v}});return a}};function la(n,r){return new Proxy(n,{get:function(a,s,l){return s==="db"?r:Reflect.get(a,s,l)}})}var Tn=(function(){function n(r,a){var s=this;this._middlewares={},this.verno=0;var l=n.dependencies;this._options=a=u({addons:n.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange};var f=a.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};v.dbReadyPromise=new X(function(g){v.dbReadyResolve=g}),v.openCanceller=new X(function(g,x){v.cancelOpen=x}),this._state=v,this.name=r,this.on=ai(this,"populate","blocked","versionchange","close",{ready:[be,Le]}),this.once=function(g,x){var S=function(){for(var A=[],R=0;R<arguments.length;R++)A[R]=arguments[R];s.on(g).unsubscribe(S),x.apply(s,A)};return s.on(g,S)},this.on.ready.subscribe=G(this.on.ready.subscribe,function(g){return function(x,S){n.vip(function(){var A=s._state;if(A.openComplete)A.dbOpenError||X.resolve().then(x),S&&g(x);else if(A.onReadyBeingFired)A.onReadyBeingFired.push(x),S&&g(x);else{g(x);var R=s;S||g(function Y(){R.on.ready.unsubscribe(x),R.on.ready.unsubscribe(Y)})}})}}),this.Collection=Nc(this),this.Table=Pc(this),this.Transaction=Vc(this),this.Version=sf(this),this.WhereClause=Hc(this),this.on("versionchange",function(g){g.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(g){!g.newVersion||g.newVersion<g.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(g.oldVersion/10))}),this._maxKey=li(a.IDBKeyRange),this._createTransaction=function(g,x,S,A){return new s.Transaction(g,x,S,s._options.chromeTransactionDurability,A)},this._fireOnBlocked=function(g){s.on("blocked").fire(g),Lr.filter(function(x){return x.name===s.name&&x!==s&&!x._state.vcFired}).map(function(x){return x.on("versionchange").fire(g)})},this.use(gf),this.use(Sf),this.use(_f),this.use(pf),this.use(mf);var m=new Proxy(this,{get:function(g,x,S){if(x==="_vip")return!0;if(x==="table")return function(R){return la(s.table(R),m)};var A=Reflect.get(g,x,S);return A instanceof iu?la(A,m):x==="tables"?A.map(function(R){return la(R,m)}):x==="_createTransaction"?function(){var R=A.apply(this,arguments);return la(R,m)}:A}});this.vip=m,f.forEach(function(g){return g(s)})}return n.prototype.version=function(r){if(isNaN(r)||r<.1)throw new ue.Type("Given version is not a positive number");if(r=Math.round(r*10)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var a=this._versions,s=a.filter(function(l){return l._cfg.version===r})[0];return s||(s=new this.Version(r),a.push(s),a.sort(Xc),s.stores({}),this._state.autoSchema=!1,s)},n.prototype._whenReady=function(r){var a=this;return this.idbdb&&(this._state.openComplete||le.letThrough||this._vip)?r():new X(function(s,l){if(a._state.openComplete)return l(new ue.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen){l(new ue.DatabaseClosed);return}a.open().catch(Le)}a._state.dbReadyPromise.then(s,l)}).then(r)},n.prototype.use=function(r){var a=r.stack,s=r.create,l=r.level,f=r.name;f&&this.unuse({stack:a,name:f});var v=this._middlewares[a]||(this._middlewares[a]=[]);return v.push({stack:a,create:s,level:l??10,name:f}),v.sort(function(m,g){return m.level-g.level}),this},n.prototype.unuse=function(r){var a=r.stack,s=r.name,l=r.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return l?f.create!==l:s?f.name!==s:!1})),this},n.prototype.open=function(){var r=this;return lr(Nn,function(){return df(r)})},n.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,a=Lr.indexOf(this);if(a>=0&&Lr.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new X(function(s){r.dbReadyResolve=s}),r.openCanceller=new X(function(s,l){r.cancelOpen=l}))},n.prototype.close=function(r){var a=r===void 0?{disableAutoOpen:!0}:r,s=a.disableAutoOpen,l=this._state;s?(l.isBeingOpened&&l.cancelOpen(new ue.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new ue.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},n.prototype.delete=function(r){var a=this;r===void 0&&(r={disableAutoOpen:!0});var s=arguments.length>0&&typeof arguments[0]!="object",l=this._state;return new X(function(f,v){var m=function(){a.close(r);var g=a._deps.indexedDB.deleteDatabase(a.name);g.onsuccess=Ye(function(){cf(a._deps,a.name),f()}),g.onerror=ln(v),g.onblocked=a._fireOnBlocked};if(s)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");l.isBeingOpened?l.dbReadyPromise.then(m):m()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var r=this;return p(this._allTables).map(function(a){return r._allTables[a]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var r=vf.apply(this,arguments);return this._transaction.apply(this,r)},n.prototype._transaction=function(r,a,s){var l=this,f=le.trans;(!f||f.db!==this||r.indexOf("!")!==-1)&&(f=null);var v=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");var m,g;try{if(g=a.map(function(S){var A=S instanceof l.Table?S.name:S;if(typeof A!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return A}),r=="r"||r===yo)m=yo;else if(r=="rw"||r==go)m=go;else throw new ue.InvalidArgument("Invalid transaction mode: "+r);if(f){if(f.mode===yo&&m===go)if(v)f=null;else throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f&&g.forEach(function(S){if(f&&f.storeNames.indexOf(S)===-1)if(v)f=null;else throw new ue.SubTransaction("Table "+S+" not included in parent transaction.")}),v&&f&&!f.active&&(f=null)}}catch(S){return f?f._promise(null,function(A,R){R(S)}):$e(S)}var x=gu.bind(null,this,m,g,f,s);return f?f._promise(m,x,"lock"):le.trans?lr(le.transless,function(){return l._whenReady(x)}):this._whenReady(x)},n.prototype.table=function(r){if(!b(this._allTables,r))throw new ue.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},n})(),Of=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Cf=(function(){function n(r){this._subscribe=r}return n.prototype.subscribe=function(r,a,s){return this._subscribe(!r||typeof r=="function"?{next:r,error:a,complete:s}:r)},n.prototype[Of]=function(){return this},n})(),ca;try{ca={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{ca={indexedDB:null,IDBKeyRange:null}}function Au(n){var r=!1,a,s=new Cf(function(l){var f=en(n);function v(K){var j=Sr();try{f&&Cr();var z=Kn(n,K);return f&&(z=z.finally(Fn)),z}finally{j&&Or()}}var m=!1,g,x={},S={},A={get closed(){return m},unsubscribe:function(){m||(m=!0,g&&g.abort(),R&&zn.storagemutated.unsubscribe(C))}};l.start&&l.start(A);var R=!1,Y=function(){return ho(P)};function D(){return Po(S,x)}var C=function(K){oa(x,K),D()&&Y()},P=function(){if(!(m||!ca.indexedDB)){x={};var K={};g&&g.abort(),g=new AbortController;var j={subscr:K,signal:g.signal,requery:Y,querier:n,trans:null},z=v(j);Promise.resolve(z).then(function(U){r=!0,a=U,!(m||j.signal.aborted)&&(x={},S=K,!ft(S)&&!R&&(zn(ui,C),R=!0),ho(function(){return!m&&l.next&&l.next(U)}))},function(U){r=!1,["DatabaseClosedError","AbortError"].includes(U?.name)||m||ho(function(){m||l.error&&l.error(U)})})}};return setTimeout(Y,0),A});return s.hasValue=function(){return r},s.getValue=function(){return a},s}var vr=Tn;E(vr,u(u({},un),{delete:function(n){var r=new vr(n,{addons:[]});return r.delete()},exists:function(n){return new vr(n,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return uf(vr.dependencies).then(n)}catch{return $e(new ue.MissingAPI)}},defineClass:function(){function n(r){_(this,r)}return n},ignoreTransaction:function(n){return le.trans?lr(le.transless,n):n()},vip:Oo,async:function(n){return function(){try{var r=Ko(n.apply(this,arguments));return!r||typeof r.then!="function"?X.resolve(r):r}catch(a){return $e(a)}}},spawn:function(n,r,a){try{var s=Ko(n.apply(a,r||[]));return!s||typeof s.then!="function"?X.resolve(s):s}catch(l){return $e(l)}},currentTransaction:{get:function(){return le.trans||null}},waitFor:function(n,r){var a=X.resolve(typeof n=="function"?vr.ignoreTransaction(n):n).timeout(r||6e4);return le.trans?le.trans.waitFor(a):a},Promise:X,debug:{get:function(){return je},set:function(n){We(n)}},derive:I,extend:_,props:E,override:G,Events:ai,on:zn,liveQuery:Au,extendObservabilitySet:oa,getByKeyPath:oe,setByKeyPath:fe,delByKeyPath:re,shallowClone:ge,deepClone:He,getObjectDiff:Fo,cmp:Ie,asap:se,minKey:mo,addons:[],connections:Lr,errnames:Ht,dependencies:ca,cache:dr,semVer:Xs,version:Xs.split(".").map(function(n){return parseInt(n)}).reduce(function(n,r,a){return n+r/Math.pow(10,a*2)})})),vr.maxKey=li(vr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zn(ui,function(n){if(!Hn){var r;r=new CustomEvent(wo,{detail:n}),Hn=!0,dispatchEvent(r),Hn=!1}}),addEventListener(wo,function(n){var r=n.detail;Hn||zo(r)}));function zo(n){var r=Hn;try{Hn=!0,zn.storagemutated.fire(n),No(n,!0)}finally{Hn=r}}var Hn=!1,Un,Ho=function(){};typeof BroadcastChannel<"u"&&(Ho=function(){Un=new BroadcastChannel(wo),Un.onmessage=function(n){return n.data&&zo(n.data)}},Ho(),typeof Un.unref=="function"&&Un.unref(),zn(ui,function(n){Hn||Un.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Tn.disableBfCache&&n.persisted){je&&console.debug("Dexie: handling persisted pagehide"),Un?.close();for(var r=0,a=Lr;r<a.length;r++){var s=a[r];s.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(n){!Tn.disableBfCache&&n.persisted&&(je&&console.debug("Dexie: handling persisted pageshow"),Ho(),zo({all:new _t(-1/0,[[]])}))}));function Lf(n){return new ii({add:n})}function Pf(n){return new ii({remove:n})}function Rf(n,r){return new ii({replacePrefix:[n,r]})}X.rejectionMapper=Dr,We(je);var Mf=Object.freeze({__proto__:null,Dexie:Tn,liveQuery:Au,Entity:eu,cmp:Ie,PropModification:ii,replacePrefix:Rf,add:Lf,remove:Pf,default:Tn,RangeSet:_t,mergeRanges:di,rangesOverlap:hu});return u(Tn,Mf,{default:Tn}),Tn}))})(_a)),_a.exports}var Nv=Mv();const fs=Pv(Nv),Hu=Symbol.for("Dexie"),La=globalThis[Hu]||(globalThis[Hu]=fs);if(fs.semVer!==La.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${fs.semVer} and ${La.semVer}`);const{liveQuery:Pa,mergeRanges:gm,rangesOverlap:_m,RangeSet:bm,cmp:wm,Entity:Em,PropModification:xm,replacePrefix:Tm,add:Am,remove:km,DexieYProvider:Im}=La;function Uu(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,o)}return i}function Ra(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Uu(Object(i),!0).forEach(function(o){qr(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Uu(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function Kr(e){"@babel/helpers - typeof";return Kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kr(e)}function qr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Kv(e,t){if(e==null)return{};var i={},o=Object.keys(e),u,c;for(c=0;c<o.length;c++)u=o[c],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function Fv(e,t){if(e==null)return{};var i=Kv(e,t),o,u;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(u=0;u<c.length;u++)o=c[u],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function Bv(e,t){return zv(e)||Uv(e,t)||js(e,t)||Wv()}function $t(e){return jv(e)||Hv(e)||js(e)||Vv()}function jv(e){if(Array.isArray(e))return ds(e)}function zv(e){if(Array.isArray(e))return e}function Hv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uv(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var o=[],u=!0,c=!1,d,p;try{for(i=i.call(e);!(u=(d=i.next()).done)&&(o.push(d.value),!(t&&o.length===t));u=!0);}catch(h){c=!0,p=h}finally{try{!u&&i.return!=null&&i.return()}finally{if(c)throw p}}return o}}function js(e,t){if(e){if(typeof e=="string")return ds(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ds(e,t)}}function ds(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function Vv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ni(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=js(e))||t){i&&(e=i);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(h){throw h},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,d=!1,p;return{s:function(){i=i.call(e)},n:function(){var h=i.next();return c=h.done,h},e:function(h){d=!0,p=h},f:function(){try{!c&&i.return!=null&&i.return()}finally{if(d)throw p}}}}var Gv="finalize",Yv="consider";function Zr(e,t,i){e.dispatchEvent(new CustomEvent(Gv,{detail:{items:t,info:i}}))}function tr(e,t,i){e.dispatchEvent(new CustomEvent(Yv,{detail:{items:t,info:i}}))}var Ja="draggedEntered",Ki="draggedLeft",$a="draggedOverIndex",zs="draggedLeftDocument",Ma={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function qv(e,t,i){e.dispatchEvent(new CustomEvent(Ja,{detail:{indexObj:t,draggedEl:i}}))}function Zv(e,t,i){e.dispatchEvent(new CustomEvent(Ki,{detail:{draggedEl:t,type:Ma.LEFT_FOR_ANOTHER,theOtherDz:i}}))}function Qv(e,t){e.dispatchEvent(new CustomEvent(Ki,{detail:{draggedEl:t,type:Ma.OUTSIDE_OF_ANY}}))}function Xv(e,t,i){e.dispatchEvent(new CustomEvent($a,{detail:{indexObj:t,draggedEl:i}}))}function Jv(e){window.dispatchEvent(new CustomEvent(zs,{detail:{draggedEl:e}}))}var Ct={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Ja,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:$a,DRAGGED_LEFT:Ki,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Kt={POINTER:"pointer",KEYBOARD:"keyboard"},eo="isDndShadowItem",to="data-is-dnd-shadow-item-internal",$v="data-is-dnd-shadow-item-hint",ec="id:dnd-shadow-placeholder-0000",eh="dnd-action-dragged-el",ot="id",vs=0;function tc(){vs++}function nc(){if(vs===0)throw new Error("Bug! trying to decrement when there are no dropzones");vs--}var Hs=typeof window>"u";function hs(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i,o=t?rh(e):e.getBoundingClientRect(),u=getComputedStyle(e),c=u.transform;if(c){var d,p,h,_;if(c.startsWith("matrix3d("))i=c.slice(9,-1).split(/, /),d=+i[0],p=+i[5],h=+i[12],_=+i[13];else if(c.startsWith("matrix("))i=c.slice(7,-1).split(/, /),d=+i[0],p=+i[3],h=+i[4],_=+i[5];else return o;var w=u.transformOrigin,T=o.x-h-(1-d)*parseFloat(w),b=o.y-_-(1-p)*parseFloat(w.slice(w.indexOf(" ")+1)),E=d?o.width/d:e.offsetWidth,O=p?o.height/p:e.offsetHeight;return{x:T,y:b,width:E,height:O,top:b,right:T+E,bottom:b+O,left:T}}else return o}function rc(e){var t=hs(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function ic(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function ac(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function th(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function no(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function Di(e){return ac(ic(e))}function Vu(e,t){var i=Di(e),o=rc(t);return no(i,o)}function Wu(e,t){var i=Di(e),o=Di(t);return th(i,o)}function nh(e){var t=ic(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function rh(e){for(var t=e.getBoundingClientRect(),i={top:t.top,bottom:t.bottom,left:t.left,right:t.right},o=!1,u=!1,c=e.parentElement;c&&c!==document.body;){var d=window.getComputedStyle(c),p=d.overflowY,h=d.overflowX,_=p==="scroll"||p==="auto",w=h==="scroll"||h==="auto";if(_||w){var T=c.getBoundingClientRect();if(_){var b=Math.max(i.top,T.top),E=Math.min(i.bottom,T.bottom);(b!==i.top||E!==i.bottom)&&(o=!0),i.top=b,i.bottom=E}if(w){var O=Math.max(i.left,T.left),L=Math.min(i.right,T.right);(O!==i.left||L!==i.right)&&(u=!0),i.left=O,i.right=L}}c=c.parentElement}return o||u?{top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:Math.max(0,i.right-i.left),height:Math.max(0,i.bottom-i.top)}:{top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:Math.max(0,t.right-t.left),height:Math.max(0,t.bottom-t.top)}}var jr;function Us(){jr=new Map}Us();function ih(e){var t=Array.from(e.children).findIndex(function(i){return i.getAttribute(to)});if(t>=0)return jr.has(e)||jr.set(e,new Map),jr.get(e).set(t,rc(e.children[t])),t}function ah(e,t){if(!Vu(e,t))return null;var i=t.children;if(i.length===0)return{index:0,isProximityBased:!0};for(var o=ih(t),u=0;u<i.length;u++)if(Vu(e,i[u])){var c=jr.has(t)&&jr.get(t).get(u);return c&&!no(Di(e),c)?{index:o,isProximityBased:!1}:{index:u,isProximityBased:!1}}for(var d=Number.MAX_VALUE,p=void 0,h=0;h<i.length;h++){var _=Wu(e,i[h]);_<d&&(d=_,p=h)}if(i.length>0){var w=i.length,T=i[w-1],b=T.cloneNode(!1);b.style.visibility="hidden",b.style.pointerEvents="none",t.appendChild(b);var E=Wu(e,b);E<d&&(p=w),t.removeChild(b)}return{index:p,isProximityBased:!0}}function mi(e){return JSON.stringify(e,null,2)}function Na(e){if(!e)throw new Error("cannot get depth of a falsy node");return oc(e,0)}function oc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?oc(e.parentElement,t+1):t-1}function oh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!{}.hasOwnProperty.call(t,i)||t[i]!==e[i])return!1;return!0}function sh(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var uh=200,Gu=10,ps;function lh(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uh,o=arguments.length>3?arguments[3]:void 0,u,c,d=!1,p,h=Array.from(t).sort(function(w,T){return Na(T)-Na(w)});function _(){var w=Di(e),T=o.multiScrollIfNeeded();if(!T&&p&&Math.abs(p.x-w.x)<Gu&&Math.abs(p.y-w.y)<Gu){ps=window.setTimeout(_,i);return}if(nh(e)){Jv(e);return}p=w;var b=!1,E=Ni(h),O;try{for(E.s();!(O=E.n()).done;){var L=O.value;T&&Us();var I=ah(e,L);if(I!==null){var k=I.index;b=!0,L!==u?(u&&Zv(u,e,L),qv(L,I,e),u=L):k!==c&&(Xv(L,I,e),c=k);break}}}catch(H){E.e(H)}finally{E.f()}!b&&d&&u?(Qv(u,e),u=void 0,c=void 0,d=!1):d=!0,ps=window.setTimeout(_,i)}_()}function ch(){clearTimeout(ps),Us()}var yi=30;function fh(){var e;function t(){e={directionObj:void 0,stepPx:0}}t();function i(c){var d=e,p=d.directionObj,h=d.stepPx;p&&(c.scrollBy(p.x*h,p.y*h),window.requestAnimationFrame(function(){return i(c)}))}function o(c){return yi-c}function u(c,d){if(!d)return!1;var p=dh(c,d),h=!!e.directionObj;if(p===null)return h&&t(),!1;var _=!1,w=!1;return d.scrollHeight>d.clientHeight&&(p.bottom<yi?(_=!0,e.directionObj={x:0,y:1},e.stepPx=o(p.bottom)):p.top<yi&&(_=!0,e.directionObj={x:0,y:-1},e.stepPx=o(p.top)),!h&&_)||d.scrollWidth>d.clientWidth&&(p.right<yi?(w=!0,e.directionObj={x:1,y:0},e.stepPx=o(p.right)):p.left<yi&&(w=!0,e.directionObj={x:-1,y:0},e.stepPx=o(p.left)),!h&&w)?(i(d),!0):(t(),!1)}return{scrollIfNeeded:u,resetScrolling:t}}function dh(e,t){var i=t===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:t.getBoundingClientRect();return no(e,i)?{top:e.y-i.top,bottom:i.bottom-e.y,left:e.x-i.left,right:i.right-e.x}:null}function vh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=ph(e),o=Array.from(i).sort(function(h,_){return Na(_)-Na(h)}),u=fh(),c=u.scrollIfNeeded,d=u.resetScrolling;function p(){var h=t();if(!h||!o)return!1;for(var _=o.filter(function(b){return no(h,b.getBoundingClientRect())||b===document.scrollingElement}),w=0;w<_.length;w++){var T=c(h,_[w]);if(T)return!0}return!1}return{multiScrollIfNeeded:i.size>0?p:function(){return!1},destroy:function(){return d()}}}function hh(e){if(!e)return[];for(var t=[],i=e;i;){var o=window.getComputedStyle(i),u=o.overflow;u.split(" ").some(function(c){return c.includes("auto")||c.includes("scroll")})&&t.push(i),i=i.parentElement}return t}function ph(e){var t=new Set,i=Ni(e),o;try{for(i.s();!(o=i.n()).done;){var u=o.value;hh(u).forEach(function(c){return t.add(c)})}}catch(c){i.e(c)}finally{i.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&t.add(document.scrollingElement),t}function mh(e){var t=e.cloneNode(!0),i=[],o=e.tagName==="SELECT",u=o?[e]:$t(e.querySelectorAll("select")),c=Ni(u),d;try{for(c.s();!(d=c.n()).done;){var p=d.value;i.push(p.value)}}catch(F){c.e(F)}finally{c.f()}if(u.length>0)for(var h=o?[t]:$t(t.querySelectorAll("select")),_=0;_<h.length;_++){var w=h[_],T=i[_],b=w.querySelector('option[value="'.concat(T,'"'));b&&b.setAttribute("selected",!0)}var E=e.tagName==="CANVAS",O=E?[e]:$t(e.querySelectorAll("canvas"));if(O.length>0)for(var L=E?[t]:$t(t.querySelectorAll("canvas")),I=0;I<L.length;I++){var k=O[I],H=L[I];H.width=k.width,H.height=k.height,k.width>0&&k.height>0&&H.getContext("2d").drawImage(k,0,0)}return t}var Si=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),yh=qr({},Si.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function sc(e){if(!Si[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Si)));return yh[e]}var gh=.2;function pr(e){return"".concat(e," ").concat(gh,"s ease")}function _h(e,t){var i=e.getBoundingClientRect(),o=mh(e);uc(e,o),o.id=eh,o.style.position="fixed";var u=i.top,c=i.left;if(o.style.top="".concat(u,"px"),o.style.left="".concat(c,"px"),t){var d=ac(i);u-=d.y-t.y,c-=d.x-t.x,window.setTimeout(function(){o.style.top="".concat(u,"px"),o.style.left="".concat(c,"px")},0)}return o.style.margin="0",o.style.boxSizing="border-box",o.style.height="".concat(i.height,"px"),o.style.width="".concat(i.width,"px"),o.style.transition="".concat(pr("top"),", ").concat(pr("left"),", ").concat(pr("background-color"),", ").concat(pr("opacity"),", ").concat(pr("color")," "),window.setTimeout(function(){return o.style.transition+=", ".concat(pr("width"),", ").concat(pr("height"))},0),o.style.zIndex="9999",o.style.cursor="grabbing",o}function bh(e){e.style.cursor="grab"}function wh(e,t,i,o){uc(t,e);var u=t.getBoundingClientRect(),c=e.getBoundingClientRect(),d=u.width-c.width,p=u.height-c.height;if(d||p){var h={left:(i-c.left)/c.width,top:(o-c.top)/c.height};sc(Si.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(u.height,"px"),e.style.width="".concat(u.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-h.left*d,"px"),e.style.top="".concat(parseFloat(e.style.top)-h.top*p,"px")}}function uc(e,t){var i=window.getComputedStyle(e);Array.from(i).filter(function(o){return o.startsWith("background")||o.startsWith("padding")||o.startsWith("font")||o.startsWith("text")||o.startsWith("align")||o.startsWith("justify")||o.startsWith("display")||o.startsWith("flex")||o.startsWith("border")||o==="opacity"||o==="color"||o==="list-style-type"||sc(Si.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(o==="width"||o==="height")}).forEach(function(o){return t.style.setProperty(o,i.getPropertyValue(o),i.getPropertyPriority(o))})}function Eh(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function lc(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function xh(e){e.style.visibility="hidden",e.setAttribute(to,"true")}function Th(e){e.style.visibility="",e.removeAttribute(to)}function ba(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(o){var u=t(o);Object.keys(u).forEach(function(c){o.style[c]=u[c]}),i(o).forEach(function(c){return o.classList.add(c)})})}function Ka(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(o){var u=t(o);Object.keys(u).forEach(function(c){o.style[c]=""}),i(o).forEach(function(c){return o.classList.contains(c)&&o.classList.remove(c)})})}function Ah(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var i=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=i}}var kh="--any--",Ih=100,Dh=20,ha=3,Sh=80,Yu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},qu="data-is-dnd-original-dragged-item",Pt,lt,Mt,ro,Ze,io,Xn,mt,hn,wt,Wn=!1,Vs=!1,Ws,Fi=!1,wa=[],xi,pn,_i=!1,an=new Map,et=new Map,Qo=new WeakMap;function Oh(e,t){an.has(t)||an.set(t,new Set),an.get(t).has(e)||(an.get(t).add(e),tc())}function Zu(e,t){an.get(t).delete(e),nc(),an.get(t).size===0&&an.delete(t)}function Ch(){var e=an.get(ro),t=Ni(e),i;try{for(t.s();!(i=t.n()).done;){var o=i.value;o.addEventListener(Ja,cc),o.addEventListener(Ki,fc),o.addEventListener($a,dc)}}catch(d){t.e(d)}finally{t.f()}window.addEventListener(zs,Qr);var u=Math.max.apply(Math,$t(Array.from(e.keys()).map(function(d){return et.get(d).dropAnimationDurationMs}))),c=u===0?Dh:Math.max(u,Ih);xi=vh(e,function(){return wt}),lh(lt,e,c*1.07,xi)}function Lh(){var e=an.get(ro),t=Ni(e),i;try{for(t.s();!(i=t.n()).done;){var o=i.value;o.removeEventListener(Ja,cc),o.removeEventListener(Ki,fc),o.removeEventListener($a,dc)}}catch(u){t.e(u)}finally{t.f()}window.removeEventListener(zs,Qr),xi&&(xi.destroy(),xi=void 0),ch()}function ao(e){return e.findIndex(function(t){return!!t[eo]})}function Ph(e){var t;return Ra(Ra({},e),{},(t={},qr(t,eo,!0),qr(t,ot,ec),t))}function cc(e){var t=et.get(e.currentTarget),i=t.items,o=t.dropFromOthersDisabled;if(!(o&&e.currentTarget!==Ze)){if(Fi=!1,i=i.filter(function(p){return p[ot]!==Xn[ot]&&p[ot]!==ec}),Ze!==e.currentTarget){var u=et.get(Ze).items,c=u.filter(function(p){return!p[eo]});tr(Ze,c,{trigger:Ct.DRAGGED_ENTERED_ANOTHER,id:Mt[ot],source:Kt.POINTER})}var d=e.detail.indexObj.index;mt=e.currentTarget,i.splice(d,0,Xn),tr(e.currentTarget,i,{trigger:Ct.DRAGGED_ENTERED,id:Mt[ot],source:Kt.POINTER})}}function fc(e){if(Wn){var t=et.get(e.currentTarget),i=t.items,o=t.dropFromOthersDisabled;if(!(o&&e.currentTarget!==Ze&&e.currentTarget!==mt)){var u=$t(i),c=ao(u);c!==-1&&u.splice(c,1);var d=mt;mt=void 0;var p=e.detail,h=p.type,_=p.theOtherDz;if(h===Ma.OUTSIDE_OF_ANY||h===Ma.LEFT_FOR_ANOTHER&&_!==Ze&&et.get(_).dropFromOthersDisabled){Fi=!0,mt=Ze;var w=d===Ze?u:$t(et.get(Ze).items);w.splice(io,0,Xn),tr(Ze,w,{trigger:Ct.DRAGGED_LEFT_ALL,id:Mt[ot],source:Kt.POINTER})}tr(e.currentTarget,u,{trigger:Ct.DRAGGED_LEFT,id:Mt[ot],source:Kt.POINTER})}}}function dc(e){var t=et.get(e.currentTarget),i=t.items,o=t.dropFromOthersDisabled;if(!(o&&e.currentTarget!==Ze)){var u=$t(i);Fi=!1;var c=e.detail.indexObj.index,d=ao(u);d!==-1&&u.splice(d,1),u.splice(c,0,Xn),tr(e.currentTarget,u,{trigger:Ct.DRAGGED_OVER_INDEX,id:Mt[ot],source:Kt.POINTER})}}function Fa(e){e.preventDefault();var t=e.touches?e.touches[0]:e;wt={x:t.clientX,y:t.clientY},lt.style.transform="translate3d(".concat(wt.x-hn.x,"px, ").concat(wt.y-hn.y,"px, 0)")}function Qr(){Vs=!0,window.removeEventListener("mousemove",Fa),window.removeEventListener("touchmove",Fa),window.removeEventListener("mouseup",Qr),window.removeEventListener("touchend",Qr),Lh(),bh(lt),mt||(mt=Ze);var e=et.get(mt),t=e.items,i=e.type;Ka(an.get(i),function(c){return et.get(c).dropTargetStyle},function(c){return et.get(c).dropTargetClasses});var o=ao(t);o===-1&&mt===Ze&&(o=io),t=t.map(function(c){return c[eo]?Mt:c});function u(){Ws(),Zr(mt,t,{trigger:Fi?Ct.DROPPED_OUTSIDE_OF_ANY:Ct.DROPPED_INTO_ZONE,id:Mt[ot],source:Kt.POINTER}),mt!==Ze&&Zr(Ze,et.get(Ze).items,{trigger:Ct.DROPPED_INTO_ANOTHER,id:Mt[ot],source:Kt.POINTER});var c=Array.from(mt.children).find(function(d){return d.getAttribute(to)});c&&Th(c),Nh()}et.get(mt).dropAnimationDisabled?u():Rh(o,u)}function Rh(e,t){var i=e>-1?hs(mt.children[e],!1):hs(mt,!1),o={x:i.left-parseFloat(lt.style.left),y:i.top-parseFloat(lt.style.top)},u=et.get(mt),c=u.dropAnimationDurationMs,d="transform ".concat(c,"ms ease");lt.style.transition=lt.style.transition?lt.style.transition+","+d:d,lt.style.transform="translate3d(".concat(o.x,"px, ").concat(o.y,"px, 0)"),window.setTimeout(t,c)}function Mh(e,t){wa.push({dz:e,destroy:t}),window.requestAnimationFrame(function(){lc(e),document.body.appendChild(e)})}function Nh(){lt&&lt.remove&&lt.remove(),Pt&&Pt.remove&&Pt.remove(),lt=void 0,Pt=void 0,Mt=void 0,ro=void 0,Ze=void 0,io=void 0,Xn=void 0,mt=void 0,hn=void 0,wt=void 0,Wn=!1,Vs=!1,Ws=void 0,Fi=!1,pn&&clearTimeout(pn),pn=void 0,_i=!1,wa.length&&(wa.forEach(function(e){var t=e.dz,i=e.destroy;i(),t.remove()}),wa=[])}function Kh(e,t){var i=!1,o={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Yu,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},u=new Map;function c(){window.addEventListener("mousemove",h,{passive:!1}),window.addEventListener("touchmove",h,{passive:!1,capture:!1}),window.addEventListener("mouseup",p,{passive:!1}),window.addEventListener("touchend",p,{passive:!1})}function d(){window.removeEventListener("mousemove",h),window.removeEventListener("touchmove",h),window.removeEventListener("mouseup",p),window.removeEventListener("touchend",p),pn&&(clearTimeout(pn),pn=void 0,_i=!1)}function p(b){if(d(),Pt=void 0,hn=void 0,wt=void 0,b.type==="touchend"){var E=new Event("click",{bubbles:!0,cancelable:!0});b.target.dispatchEvent(E)}}function h(b){var E=!!b.touches,O=E?b.touches[0]:b;if(E&&o.delayTouchStartMs>0&&!_i){wt={x:O.clientX,y:O.clientY},(Math.abs(wt.x-hn.x)>=ha||Math.abs(wt.y-hn.y)>=ha)&&(pn&&(clearTimeout(pn),pn=void 0),p(b));return}b.preventDefault(),wt={x:O.clientX,y:O.clientY},(Math.abs(wt.x-hn.x)>=ha||Math.abs(wt.y-hn.y)>=ha)&&(d(),w())}function _(b){if(!(b.target!==b.currentTarget&&(b.target.value!==void 0||b.target.isContentEditable))&&!b.button&&!Wn){var E=!!b.touches,O=E&&o.delayTouchStartMs>0;O||b.preventDefault(),b.stopPropagation();var L=E?b.touches[0]:b;hn={x:L.clientX,y:L.clientY},wt=Ra({},hn),Pt=b.currentTarget,O&&(_i=!1,pn=window.setTimeout(function(){Pt&&(_i=!0,d(),w())},o.delayTouchStartMs)),c()}}function w(){Wn=!0;var b=u.get(Pt);io=b,Ze=Pt.parentElement;var E=Ze.closest("dialog")||Ze.closest("[popover]")||Ze.getRootNode(),O=E.body||E,L=o.items,I=o.type,k=o.centreDraggedOnCursor,H=$t(L);Mt=H[b],ro=I,Xn=Ph(Mt),lt=_h(Pt,k&&wt),O.appendChild(lt);function F(){Pt.parentElement?window.requestAnimationFrame(F):(Pt.setAttribute(qu,!0),O.appendChild(Pt),Ch(),lc(Pt),Xn[ot]=Mt[ot],lt.focus())}window.requestAnimationFrame(F),ba(Array.from(an.get(o.type)).filter(function(N){return N===Ze||!et.get(N).dropFromOthersDisabled}),function(N){return et.get(N).dropTargetStyle},function(N){return et.get(N).dropTargetClasses}),H.splice(b,1,Xn),Ws=Ah(Ze),tr(Ze,H,{trigger:Ct.DRAG_STARTED,id:Mt[ot],source:Kt.POINTER}),window.addEventListener("mousemove",Fa,{passive:!1}),window.addEventListener("touchmove",Fa,{passive:!1,capture:!1}),window.addEventListener("mouseup",Qr,{passive:!1}),window.addEventListener("touchend",Qr,{passive:!1})}function T(b){var E=b.items,O=E===void 0?void 0:E,L=b.flipDurationMs,I=L===void 0?0:L,k=b.type,H=k===void 0?kh:k,F=b.dragDisabled,N=F===void 0?!1:F,G=b.morphDisabled,J=G===void 0?!1:G,se=b.dropFromOthersDisabled,ne=se===void 0?!1:se,oe=b.dropTargetStyle,fe=oe===void 0?Yu:oe,re=b.dropTargetClasses,ge=re===void 0?[]:re,ze=b.transformDraggedElement,Ke=ze===void 0?function(){}:ze,Qe=b.centreDraggedOnCursor,Xe=Qe===void 0?!1:Qe,Ae=b.dropAnimationDisabled,ft=Ae===void 0?!1:Ae,De=b.delayTouchStart,He=De===void 0?!1:De;o.dropAnimationDurationMs=I;var te=0;He===!0?te=Sh:typeof He=="number"&&isFinite(He)&&He>=0&&(te=He),o.delayTouchStartMs=te,o.type&&H!==o.type&&Zu(e,o.type),o.type=H,o.items=$t(O),o.dragDisabled=N,o.morphDisabled=J,o.transformDraggedElement=Ke,o.centreDraggedOnCursor=Xe,o.dropAnimationDisabled=ft,i&&Wn&&!Vs&&(!oh(fe,o.dropTargetStyle)||!sh(ge,o.dropTargetClasses))&&(Ka([e],function(){return o.dropTargetStyle},function(){return ge}),ba([e],function(){return fe},function(){return ge})),o.dropTargetStyle=fe,o.dropTargetClasses=$t(ge);function ye(Be,dt){return et.get(Be)?et.get(Be)[dt]:o[dt]}i&&Wn&&o.dropFromOthersDisabled!==ne&&(ne?Ka([e],function(Be){return ye(Be,"dropTargetStyle")},function(Be){return ye(Be,"dropTargetClasses")}):ba([e],function(Be){return ye(Be,"dropTargetStyle")},function(Be){return ye(Be,"dropTargetClasses")})),o.dropFromOthersDisabled=ne,et.set(e,o),Oh(e,H);for(var Re=Wn?ao(o.items):-1,Ve=0;Ve<e.children.length;Ve++){var Ce=e.children[Ve];if(Eh(Ce,N),Ve===Re){J||wh(lt,Ce,wt.x,wt.y),o.transformDraggedElement(lt,Mt,Ve),xh(Ce);continue}Ce.removeEventListener("mousedown",Qo.get(Ce)),Ce.removeEventListener("touchstart",Qo.get(Ce)),N||(Ce.addEventListener("mousedown",_),Ce.addEventListener("touchstart",_),Qo.set(Ce,_)),u.set(Ce,Ve),i||(i=!0)}}return T(t),{update:function(E){T(E)},destroy:function(){function E(){Zu(e,et.get(e).type),et.delete(e)}Wn&&!e.closest("[".concat(qu,"]"))?Mh(e,E):E()}}}var pa,ms={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},vc=(pa={},qr(pa,ms.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),qr(pa,ms.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),pa),Fh="dnd-action-aria-alert",rt;function ys(){rt||(rt=document.createElement("div"),(function(){rt.id=Fh,rt.style.position="fixed",rt.style.bottom="0",rt.style.left="0",rt.style.zIndex="-5",rt.style.opacity="0",rt.style.height="0",rt.style.width="0",rt.setAttribute("role","alert")})(),document.body.prepend(rt),Object.entries(vc).forEach(function(e){var t=Bv(e,2),i=t[0],o=t[1];return document.body.prepend(zh(i,o))}))}function Bh(){return Hs?null:(document.readyState==="complete"?ys():window.addEventListener("DOMContentLoaded",ys),Ra({},ms))}function jh(){Hs||!rt||(Object.keys(vc).forEach(function(e){var t;return(t=document.getElementById(e))===null||t===void 0?void 0:t.remove()}),rt.remove(),rt=void 0)}function zh(e,t){var i=document.createElement("div");return i.id=e,i.innerHTML="<p>".concat(t,"</p>"),i.style.display="none",i.style.position="fixed",i.style.zIndex="-5",i}function zr(e){if(!Hs){rt||ys(),rt.innerHTML="";var t=document.createTextNode(e);rt.appendChild(t),rt.style.display="none",rt.style.display="inline"}}var Hh="--any--",Qu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Zt=!1,gs,Et,Er="",mr,yn,Gn="",Ba=new WeakSet,Xu=new WeakMap,Ju=new WeakMap,_s=new Map,pt=new Map,rn=new Map,ja;function Uh(e,t){rn.size===0&&(ja=Bh(),window.addEventListener("keydown",hc),window.addEventListener("click",pc)),rn.has(t)||rn.set(t,new Set),rn.get(t).has(e)||(rn.get(t).add(e),tc())}function $u(e,t){Et===e&&Oi(),rn.get(t).delete(e),nc(),rn.get(t).size===0&&rn.delete(t),rn.size===0&&(window.removeEventListener("keydown",hc),window.removeEventListener("click",pc),ja=void 0,jh())}function hc(e){if(Zt)switch(e.key){case"Escape":{Oi();break}}}function pc(){Zt&&(Ba.has(document.activeElement)||Oi())}function Vh(e){if(Zt){var t=e.currentTarget;if(t!==Et){Er=t.getAttribute("aria-label")||"";var i=pt.get(Et),o=i.items,u=o.find(function(T){return T[ot]===yn}),c=o.indexOf(u),d=o.splice(c,1)[0],p=pt.get(t),h=p.items,_=p.autoAriaDisabled;t.getBoundingClientRect().top<Et.getBoundingClientRect().top||t.getBoundingClientRect().left<Et.getBoundingClientRect().left?(h.push(d),_||zr("Moved item ".concat(Gn," to the end of the list ").concat(Er))):(h.unshift(d),_||zr("Moved item ".concat(Gn," to the beginning of the list ").concat(Er)));var w=Et;Zr(w,o,{trigger:Ct.DROPPED_INTO_ANOTHER,id:yn,source:Kt.KEYBOARD}),Zr(t,h,{trigger:Ct.DROPPED_INTO_ZONE,id:yn,source:Kt.KEYBOARD}),Et=t}}}function mc(){_s.forEach(function(e,t){var i=e.update;return i(pt.get(t))})}function Oi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;pt.get(Et).autoAriaDisabled||zr("Stopped dragging item ".concat(Gn)),Ba.has(document.activeElement)&&document.activeElement.blur(),e&&tr(Et,pt.get(Et).items,{trigger:Ct.DRAG_STOPPED,id:yn,source:Kt.KEYBOARD}),Ka(rn.get(gs),function(t){return pt.get(t).dropTargetStyle},function(t){return pt.get(t).dropTargetClasses}),mr=null,yn=null,Gn="",gs=null,Et=null,Er="",Zt=!1,mc()}function Wh(e,t){var i={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Qu,dropTargetClasses:[],autoAriaDisabled:!1};function o(w,T,b){w.length<=1||w.splice(b,1,w.splice(T,1,w[b])[0])}function u(w){switch(w.key){case"Enter":case" ":{if((w.target.disabled!==void 0||w.target.href||w.target.isContentEditable)&&!Ba.has(w.target))return;w.preventDefault(),w.stopPropagation(),Zt?Oi():c(w);break}case"ArrowDown":case"ArrowRight":{if(!Zt)return;w.preventDefault(),w.stopPropagation();var T=pt.get(e),b=T.items,E=Array.from(e.children),O=E.indexOf(w.currentTarget);O<E.length-1&&(i.autoAriaDisabled||zr("Moved item ".concat(Gn," to position ").concat(O+2," in the list ").concat(Er)),o(b,O,O+1),Zr(e,b,{trigger:Ct.DROPPED_INTO_ZONE,id:yn,source:Kt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Zt)return;w.preventDefault(),w.stopPropagation();var L=pt.get(e),I=L.items,k=Array.from(e.children),H=k.indexOf(w.currentTarget);H>0&&(i.autoAriaDisabled||zr("Moved item ".concat(Gn," to position ").concat(H," in the list ").concat(Er)),o(I,H,H-1),Zr(e,I,{trigger:Ct.DROPPED_INTO_ZONE,id:yn,source:Kt.KEYBOARD}));break}}}function c(w){p(w.currentTarget),Et=e,gs=i.type,Zt=!0;var T=Array.from(rn.get(i.type)).filter(function(E){return E===Et||!pt.get(E).dropFromOthersDisabled});if(ba(T,function(E){return pt.get(E).dropTargetStyle},function(E){return pt.get(E).dropTargetClasses}),!i.autoAriaDisabled){var b="Started dragging item ".concat(Gn,". Use the arrow keys to move it within its list ").concat(Er);T.length>1&&(b+=", or tab to another list in order to move the item into it"),zr(b)}tr(e,pt.get(e).items,{trigger:Ct.DRAG_STARTED,id:yn,source:Kt.KEYBOARD}),mc()}function d(w){Zt&&w.currentTarget!==mr&&(w.stopPropagation(),Oi(!1),c(w))}function p(w){var T=pt.get(e),b=T.items,E=Array.from(e.children),O=E.indexOf(w);mr=w,mr.tabIndex=i.zoneItemTabIndex,yn=b[O][ot],Gn=E[O].getAttribute("aria-label")||""}function h(w){var T=w.items,b=T===void 0?[]:T,E=w.type,O=E===void 0?Hh:E,L=w.dragDisabled,I=L===void 0?!1:L,k=w.zoneTabIndex,H=k===void 0?0:k,F=w.zoneItemTabIndex,N=F===void 0?0:F,G=w.dropFromOthersDisabled,J=G===void 0?!1:G,se=w.dropTargetStyle,ne=se===void 0?Qu:se,oe=w.dropTargetClasses,fe=oe===void 0?[]:oe,re=w.autoAriaDisabled,ge=re===void 0?!1:re;i.items=$t(b),i.dragDisabled=I,i.dropFromOthersDisabled=J,i.zoneTabIndex=H,i.zoneItemTabIndex=N,i.dropTargetStyle=ne,i.dropTargetClasses=fe,i.autoAriaDisabled=ge,i.type&&O!==i.type&&$u(e,i.type),i.type=O,Uh(e,O),ge||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",I?ja.DND_ZONE_DRAG_DISABLED:ja.DND_ZONE_ACTIVE)),pt.set(e,i),Zt?e.tabIndex=e===Et||mr.contains(e)||i.dropFromOthersDisabled||Et&&i.type!==pt.get(Et).type?-1:0:e.tabIndex=i.zoneTabIndex,e.addEventListener("focus",Vh);for(var ze=function(Xe){var Ae=e.children[Xe];Ba.add(Ae),Ae.tabIndex=Zt?-1:i.zoneItemTabIndex,ge||Ae.setAttribute("role","listitem"),Ae.removeEventListener("keydown",Xu.get(Ae)),Ae.removeEventListener("click",Ju.get(Ae)),I||(Ae.addEventListener("keydown",u),Xu.set(Ae,u),Ae.addEventListener("click",d),Ju.set(Ae,d)),Zt&&i.items[Xe][ot]===yn&&(mr=Ae,mr.tabIndex=i.zoneItemTabIndex,Ae.focus())},Ke=0;Ke<e.children.length;Ke++)ze(Ke)}h(t);var _={update:function(T){h(T)},destroy:function(){$u(e,i.type),pt.delete(e),_s.delete(e)}};return _s.set(e,_),_}var Gh=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function yc(e,t){if(Yh(e))return{update:function(){},destroy:function(){}};el(t);var i=Kh(e,t),o=Wh(e,t);return{update:function(c){el(c),i.update(c),o.update(c)},destroy:function(){i.destroy(),o.destroy()}}}function Yh(e){return!!e.closest("[".concat($v,'="true"]'))}function el(e){var t=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var i=e.zoneTabIndex,o=e.zoneItemTabIndex;e.dropTargetStyle;var u=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var c=e.delayTouchStart;e.dropAnimationDisabled;var d=Fv(e,Gh);if(Object.keys(d).length>0&&console.warn("dndzone will ignore unknown options",d),!t)throw new Error("no 'items' key provided to dndzone");var p=t.find(function(w){return!{}.hasOwnProperty.call(w,ot)});if(p)throw new Error("missing '".concat(ot,"' property for item ").concat(mi(p)));if(u&&!Array.isArray(u))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Kr(u),", ").concat(mi(u)));if(i&&!tl(i))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Kr(i),", ").concat(mi(i)));if(o&&!tl(o))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Kr(o),", ").concat(mi(o)));if(c!==void 0&&c!==!1){var h=c===!0,_=typeof c=="number"&&isFinite(c)&&c>=0;if(!h&&!_)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(Kr(c),", ").concat(mi(c)))}}function tl(e){return!isNaN(e)&&(function(t){return(t|0)===t})(parseFloat(e))}const Ee=new La("TaskPlannerDB");Ee.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Ee.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(t=>{t.status="unchecked"}));Ee.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(t=>{t.archivedAt=Date.now()}));Ee.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify(t=>{t.archivedAt===void 0&&(t.archivedAt=null)}));Ee.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify((t,i)=>{t.columnIndex===void 0&&(t.columnIndex=t.order%5)}));function oo(e){return e.length===0?0:Math.max(...e.map(i=>i.order))+1}async function qh(){return(await Ee.lists.orderBy("order").toArray()).filter(t=>t.archivedAt==null)}async function Zh(){return await Ee.lists.orderBy("order").toArray()}async function Qh(e,t=null){if(e==null)throw new Error("List name cannot be null or undefined");const i=e.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const o=await Ee.lists.orderBy("order").toArray(),u=oo(o),c=5;let d;return t!==null&&t>=0&&t<c?d=t:d=u%c,await Ee.lists.add({name:i,order:u,archivedAt:null,columnIndex:d})}async function Xh(e=null){const t=await Ee.lists.orderBy("order").toArray(),i=oo(t),o=5;let u;return e!==null&&e>=0&&e<o?u=e:u=i%o,await Ee.lists.add({name:null,order:i,archivedAt:null,columnIndex:u})}async function Jh(e,t){const i=t.trim();if(i==="")throw new Error("List name cannot be empty");return await Ee.lists.update(e,{name:i})}async function Xo(e){return await Ee.tasks.where("listId").equals(e).filter(t=>t.status!=="archived").sortBy("order")}async function $h(){return(await Ee.tasks.where("status").equals("archived").toArray()).sort((t,i)=>{const o=t.archivedAt||0,u=i.archivedAt||0;return u!==o?u-o:(i.order||0)-(t.order||0)})}async function ep(e,t,i=null){let o=e;e===null&&(o=await Xh(i));const u=await Ee.tasks.where("listId").equals(o).filter(h=>h.status!=="archived").sortBy("order"),c=oo(u),d=t===""?"":t.trim();return await Ee.tasks.add({text:d,listId:o,order:c,status:"unchecked"})}async function tp(e,t){const i=t===""?"":t.trim();return await Ee.tasks.update(e,{text:i})}async function nl(e,t){if(!["unchecked","checked","archived"].includes(t))throw new Error(`Invalid status: ${t}`);const i={status:t};return t==="archived"?i.archivedAt=Date.now():t!=="archived"&&(i.archivedAt=null),await Ee.tasks.update(e,i)}async function np(e){const t=await Ee.tasks.get(e);if(!t)throw new Error(`Task ${e} not found`);const i=await Ee.lists.get(t.listId);if(!i)throw new Error(`Task's list ${t.listId} not found`);let o=!1;i.archivedAt!=null&&(await ip(t.listId),o=!0);const u=await Ee.tasks.where("listId").equals(t.listId).filter(p=>p.status!=="archived"&&p.id!==e).sortBy("order"),c=oo(u);return{taskUpdated:await Ee.tasks.update(e,{status:"checked",order:c}),listRestored:o}}async function Jo(e,t){if(!t||t.length===0)return;const i=t.map(p=>p.id),u=(await Ee.tasks.bulkGet(i)).filter(p=>p!==void 0);if(u.length===0)return;const c=u.filter(p=>p.listId!==e),d=new Set(c.map(p=>p.listId));await Ee.transaction("rw",Ee.tasks,async()=>{for(let p=0;p<t.length;p++){const h=t[p].id,_=u.find(T=>T.id===h);if(!_)continue;const w={order:p};_.listId!==e&&(w.listId=e),await Ee.tasks.update(h,w)}for(const p of d){const h=await Ee.tasks.where("listId").equals(p).filter(_=>_.status!=="archived").sortBy("order");for(let _=0;_<h.length;_++)await Ee.tasks.update(h[_].id,{order:_})}})}async function rp(e){const t=Date.now();return await Ee.lists.update(e,{archivedAt:t})}async function ip(e){return await Ee.lists.update(e,{archivedAt:null})}async function ap(e){const t=Date.now(),i=await Ee.tasks.where("listId").equals(e).filter(u=>u.status==="unchecked"||u.status==="checked").toArray(),o=i.map(u=>Ee.tasks.update(u.id,{status:"archived",archivedAt:t}));return await Promise.all(o),i.length}async function rl(e,t){if(!t||t.length===0)return;if(e<0||e>=5)throw new Error(`Invalid column index: ${e}`);const i=t.map(p=>p.id),o=await Ee.lists.bulkGet(i);if(o.filter(p=>!p).length>0)throw new Error("Cannot update order: some lists do not exist");const c=o.filter(p=>p!==void 0),d=c.filter(p=>(p.columnIndex??0)!==e);new Set(d.map(p=>p.columnIndex??0)),await Ee.transaction("rw",Ee.lists,async()=>{const p=new Set;for(let b=0;b<t.length;b++){const E=t[b].id,O=c.find(k=>k.id===E);if(!O)continue;const L={order:b},I=O.columnIndex??0;I!==e&&(L.columnIndex=e,p.add(I)),await Ee.lists.update(E,L)}const _=(await Ee.lists.orderBy("order").toArray()).filter(b=>b.archivedAt==null),w=Array(5).fill(null).map(()=>[]);for(const b of _){const E=b.columnIndex??0,O=E>=5?4:E;w[O].push(b)}const T=new Set([e,...p]);for(const b of T){const E=w[b];E.sort((O,L)=>(O.order??0)-(L.order??0));for(let O=0;O<E.length;O++)await Ee.lists.update(E[O].id,{order:O})}})}function bs(e){return e&&(e.isDndShadowItem===!0||typeof e.id=="string"&&e.id.startsWith("id:dnd-shadow-placeholder-"))}function op(e,t=5){if(!e||e.length===0)return Array(t).fill(null).map(()=>[]);const i=Array(t).fill(null).map(()=>[]),o=t-1;for(const u of e){let c=u.columnIndex??0;c>=t&&(c=o),i[c].push(u)}for(let u=0;u<i.length;u++)i[u].sort((c,d)=>(c.order??0)-(d.order??0));return i}function sp(e,t){if(!e||e.length===0)return null;for(let i=0;i<e.length;i++){const o=e[i];if(!Array.isArray(o))continue;const u=o.findIndex(c=>c.id===t);if(u!==-1)return{columnIndex:i,index:u}}return null}function up(e,t,i,o){const{columnIndex:u,index:c}=e;let d=u,p=c;if(t==="up"){if(c===0)return null;p=c-1}else if(t==="down"){const h=i[u]||[];if(c===h.length-1)return null;p=c+1}else if(t==="left"){if(u===0)return null;d=u-1,p=(i[d]||[]).length}else if(t==="right"){if(u===o-1)return null;d=u+1,p=(i[d]||[]).length}else return null;return{targetColumnIndex:d,targetIndex:p}}function lp(e,t,i,o){const u=sp(e,t);if(!u)return null;const{columnIndex:c,index:d}=u,p=up(u,i,e,o);if(!p)return null;const{targetColumnIndex:h,targetIndex:_}=p,w=e.map(I=>Array.isArray(I)?[...I]:[]),T=w[c];if(!T||T.length===0)return null;const[b]=T.splice(d,1);if(!b)return null;const E=w[h];if(!E)return null;const O=Math.min(Math.max(_,0),E.length);i==="left"||i==="right"?E.splice(O,0,{...b,columnIndex:h}):E.splice(O,0,b);const L=[];for(let I=0;I<w.length;I++){const k=w[I]||[];for(let H=0;H<k.length;H++){const F=k[H];L.push({...F,columnIndex:I,order:H})}}return{newColumns:w,updatedDraggableLists:L,targetColumnIndex:h,targetColumnItems:(w[h]||[]).map(I=>({id:I.id}))}}function cp(e,t,i){const o=i.filter(u=>(u.columnIndex??0)!==t);for(let u=0;u<e.length;u++){const c=e[u],d=i.find(h=>h.id===c.id),p=d?{...d,...c,columnIndex:t,order:u}:{...c,columnIndex:t,order:u};o.push(p)}return o}function fp(e,t,i,o){let u=!1;for(const _ of e){const w=(i||[]).find(T=>T.id===_.id);if(w)(w.columnIndex??0)!==t&&(u=!0);else{const T=o.find(b=>b.id===_.id);T&&(T.columnIndex??0)!==t&&(u=!0)}}const d=(i||[]).filter(_=>(_.columnIndex??0)===t).length;return e.length<d&&!u||e.length===0&&!u&&d>0}const za=160,dp=150,ws=1056,vp=816,Ha=16,hp=25,pp=10,$o=20,ma=10,mp=40,es=200,Es=10,yp=20;async function gp(e,t={}){const{maxAttempts:i=hp,retryInterval:o=pp,waitForTick:u=!0}=t;if(typeof document>"u")return null;u&&await nn();for(let c=0;c<i;c++){const d=e();if(d&&d instanceof HTMLElement)return d.focus(),d;c<i-1&&await new Promise(p=>setTimeout(p,o))}return null}async function gc(e){if(typeof document>"u")return null;await nn();const t=Array.from(document.querySelectorAll(`[data-id="${e}"]`));let i=t.find(o=>o instanceof HTMLElement&&o.getAttribute("role")==="group");return i||(i=t.find(o=>o instanceof HTMLElement&&o.tagName==="DIV")),i instanceof HTMLElement?(i.focus(),i):null}function _p(e,t,i){if(!e)return null;const o=e.querySelector(t);if(o){const u=o.querySelector(i);if(u&&u instanceof HTMLElement)return u}return null}function bp(e,t,i,o){const{getKeyboardListDrag:u,getLastKeyboardDraggedListId:c,getShouldRefocusListOnNextTab:d,setShouldRefocusListOnNextTab:p}=e;function h(_){const w=_.key,T=u(),b=T.active===!0,E=T.listId,O=c(),L=d();if(!b&&w==="Tab"&&L&&O!=null){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),p(!1),gc(O);return}if(!(!b||E==null)){if(w==="ArrowUp"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),t(E,"up");return}if(w==="ArrowDown"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),t(E,"down");return}if(w==="ArrowLeft"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),t(E,"left");return}if(w==="ArrowRight"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),t(E,"right");return}if(w==="Escape"||w==="Enter"||w===" "){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),i(),o();return}if(w==="Tab"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),i(),o();return}}}return document.addEventListener("keydown",h,!0),()=>{document.removeEventListener("keydown",h,!0)}}function wp(e){return e===""}function Ep(e){return e.trim()===""&&e.length>0}function _c(e){const t=e.trim(),i=Ep(e);return{text:i?"":t,isBlank:i}}function bc(e,t,i={}){const{ignoreElements:o=[],shouldClose:u=()=>!0,checkIgnoreClick:c=null}=i;function d(h){const _=typeof e=="function"?e():e;if(_&&!_.contains(h.target)&&!(c&&c(h))){for(const w of o){let T=null;if(typeof w=="function"?T=w():T=w,T&&T.contains(h.target))return}u()&&t()}}const p=setTimeout(()=>{document.addEventListener("click",d)},0);return()=>{clearTimeout(p),document.removeEventListener("click",d)}}function xp(e){const{getColumnIndex:t,setColumnIndex:i,getInput:o,setInput:u,getInputElement:c}=e;function d(E){i(E)}function p(E,O){if(E.key==="Enter"||E.key===" ")E.preventDefault(),E.stopPropagation(),d(O);else if(E.key==="Escape"){E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation();const L=E.currentTarget;L&&L instanceof HTMLElement&&L.blur()}}function h(E,O,L){if(E.key==="Escape"){const I=o()||"";if(L){i(null),u("");return}if(I.trim().length>0){_(O,!0);return}i(null),u("")}}async function _(E,O=!1){const L=o()||"";if(L===""||L.trim()===""){i(null),u("");return}const{text:I}=_c(L);try{if(await Qh(I||null,E),u(""),O)i(null);else{await nn();const k=c();k&&setTimeout(()=>{k.focus()},0)}}catch(k){console.error("Error creating list:",k)}}async function w(E){await _(E,!0)}function T(){if(t()!==null)return bc(c(),()=>{t()!==null&&(i(null),u(""))},{ignoreElements:[],shouldClose:()=>!o()||o().trim()===""})}function b(){const E=t(),O=c();if(E===null||!O)return;const L=setTimeout(()=>{O?.focus()},0);return()=>{clearTimeout(L)}}return{handleCreateListClick:d,handleCreateListKeydown:p,handleCreateListInputEscape:h,handleCreateList:_,handleCreateListOnTab:w,setupClickOutsideEffect:T,setupFocusEffect:b}}var Tp=Te("<button><!></button>");function gn(e,t){let i=Ot(t,"variant",3,"primary"),o=Ot(t,"size",3,"medium"),u=Ot(t,"disabled",3,!1),c=Ot(t,"type",3,"button"),d=Ov(t,["$$slots","$$events","$$legacy","variant","size","disabled","type","onclick","ariaLabel"]);const p="focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed",h={primary:"bg-grey-80 text-grey-110 hover:bg-grey-90 focus:bg-grey-90 disabled:bg-grey-50 disabled:text-grey-100",secondary:"bg-white text-grey-110 hover:bg-grey-20 focus:bg-grey-30 disabled:bg-white disabled:text-grey-60"},_={small:"px-2 py-1 text-sm",medium:"px-4 py-2",large:"px-6 py-3"},w=`${p} ${h[i()]} ${_[o()]}`;var T=Tp();kv(T,()=>({type:c(),disabled:u(),onclick:t.onclick,ariaLabel:t.ariaLabel,class:w,...d}));var b=_e(T);mv(b,t,"default",{}),de(e,T)}var Ap=Te('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),kp=Te('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><!> <!></div></div></div></div>');function Ip(e,t){nr(t,!0);let i=me(Jt(t.taskText||"")),o=me(!1),u=me(null),c=me(null),d=it(()=>()=>{if(!t.taskPosition||!t.isOpen)return"background-color: white; z-index: 10000;";const L=24,I=24,k=Ha,F=L+I+k+8-8,N=10,G=t.taskPosition.top-F,J=t.taskPosition.left-Ha+N,se=t.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${G}px; left: ${J}px; width: ${se}px;`});qe(()=>{t.isOpen&&(M(i,t.taskText||"",!0),M(o,!1))}),qe(()=>{t.isOpen&&y(u)&&setTimeout(()=>{y(u)?.focus(),y(u)?.select(),y(u)instanceof HTMLTextAreaElement&&(y(u).style.height="auto",y(u).style.height=`${Math.min(y(u).scrollHeight,za)}px`)},0)}),qe(()=>{if(y(u)&&y(u)instanceof HTMLTextAreaElement){const L=()=>{y(u).style.height="auto",y(u).style.height=`${Math.min(y(u).scrollHeight,za)}px`};return y(u).addEventListener("input",L),()=>{y(u).removeEventListener("input",L)}}});function p(){const L=y(i)??"",I=L.trim();if(I===""&&L.length>0){t.onSave(t.taskId,""),M(o,!1);return}if(L===""||I===""){M(o,!0);return}t.onSave(t.taskId,I),M(o,!1)}function h(){M(i,t.taskText||"",!0),M(o,!1),t.onCancel()}function _(L){L.target===L.currentTarget&&h()}function w(L){if(L.key==="Tab"){if(!y(c))return;const I=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),k=Array.from(y(c).querySelectorAll(I)).filter(J=>!(!(J instanceof HTMLElement)||J.hasAttribute("disabled")||J.getAttribute("aria-hidden")==="true"));if(k.length===0)return;const H=document.activeElement,F=k.indexOf(H);let N;L.shiftKey?F<=0?N=k.length-1:N=F-1:F===-1||F===k.length-1?N=0:N=F+1,L.preventDefault(),L.stopPropagation();const G=k[N];G&&G instanceof HTMLElement&&G.focus()}else L.key==="Escape"?h():L.key==="Enter"&&!L.shiftKey&&document.activeElement===y(u)&&(L.preventDefault(),p())}function T(){t.onArchive&&t.onArchive(t.taskId)}var b=Qn(),E=xt(b);{var O=L=>{var I=kp();I.__click=_,I.__keydown=w;var k=_e(I);k.__click=re=>re.stopPropagation();var H=Me(_e(k),2),F=_e(H);Wt(F,re=>M(u,re),()=>y(u));var N=Me(F,2);{var G=re=>{var ge=Ap();de(re,ge)};tt(N,re=>{y(o)&&re(G)})}var J=Me(H,2),se=_e(J);se.__click=T;var ne=Me(se,2),oe=_e(ne);gn(oe,{variant:"secondary",onclick:h,"aria-label":"Cancel editing and discard changes",children:(re,ge)=>{var ze=mn("Cancel");de(re,ze)},$$slots:{default:!0}});var fe=Me(oe,2);{let re=it(()=>y(o)?"Save disabled: task cannot be empty":"Save task changes");gn(fe,{variant:"primary",onclick:p,get disabled(){return y(o)},get"aria-label"(){return y(re)},children:(ge,ze)=>{var Ke=mn("Save");de(ge,Ke)},$$slots:{default:!0}})}Wt(k,re=>M(c,re),()=>y(c)),ct(re=>{er(k,re),er(F,`width: ${dp}px;`),Tt(F,"aria-describedby",y(o)?"validation-message":void 0)},[()=>y(d)()]),Fs(F,()=>y(i),re=>M(i,re)),de(L,I)};tt(E,L=>{t.isOpen&&L(O)})}de(e,b),rr()}$r(["click","keydown"]);var Dp=Te('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),Sp=Te('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-2 py-2 border border-grey-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border font-gilda text-[24px] text-grey-110 svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box; padding-left: 7px; padding-right: 7px; padding-top: 7px; padding-bottom: 7px;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><!> <div class="flex justify-end gap-3"><!> <!></div></div>',1),Op=Te('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-grey-100">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><!> <!></div>',1),Cp=Te('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-grey-10 text-grey-110 p-6 rounded-xl shadow-2xl border-2 border-grey-50 fixed box-border" role="document"><!></div></div>');function Lp(e,t){nr(t,!0);let i=me(Jt(t.listName||"")),o=me(!1),u=me(null),c=me(null),d=me("edit"),p=it(()=>()=>{if(!t.listPosition||!t.isOpen)return"background-color: white; z-index: 10000;";const H=24,F=24,N=Ha,se=H+F+N+1+7-8,ne=t.listPosition.top-se,oe=t.listPosition.left-Ha,fe=Math.max(t.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${ne}px; left: ${oe}px; width: ${fe}px; max-width: ${fe}px; box-sizing: border-box;`});qe(()=>{t.isOpen&&(M(i,t.listName||"",!0),M(o,!1),M(d,"edit"))}),qe(()=>{t.isOpen&&y(u)&&setTimeout(()=>{y(u)?.focus(),y(u)?.select()},0)});function h(){const F=(y(i)??"").trim();if(F===""){M(o,!0);return}t.onSave(t.listId,F),M(o,!1)}function _(){M(i,t.listName||"",!0),M(o,!1),t.onCancel()}function w(H){H.target===H.currentTarget&&_()}function T(H){if(H.key==="Tab"){if(!y(c))return;const F=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),N=Array.from(y(c).querySelectorAll(F)).filter(oe=>!(!(oe instanceof HTMLElement)||oe.hasAttribute("disabled")||oe.getAttribute("aria-hidden")==="true"));if(N.length===0)return;const G=document.activeElement,J=N.indexOf(G);let se;H.shiftKey?J<=0?se=N.length-1:se=J-1:J===-1||J===N.length-1?se=0:se=J+1,H.preventDefault(),H.stopPropagation();const ne=N[se];ne&&ne instanceof HTMLElement&&ne.focus()}else H.key==="Escape"?y(d)==="confirm-archive"?O():_():H.key==="Enter"&&!H.shiftKey&&y(d)==="edit"&&H.target===y(u)&&(H.preventDefault(),h())}function b(){M(d,"confirm-archive")}function E(){t.onArchive(t.listId),_()}function O(){M(d,"edit")}var L=Qn(),I=xt(L);{var k=H=>{var F=Cp();F.__click=w,F.__keydown=T;var N=_e(F);N.__click=ne=>ne.stopPropagation();var G=_e(N);{var J=ne=>{var oe=Sp(),fe=Me(xt(oe),2),re=_e(fe);Wt(re,De=>M(u,De),()=>y(u));var ge=Me(re,2);{var ze=De=>{var He=Dp();de(De,He)};tt(ge,De=>{y(o)&&De(ze)})}var Ke=Me(fe,2),Qe=_e(Ke);gn(Qe,{variant:"secondary",onclick:b,"aria-label":"Archive this list",children:(De,He)=>{var te=mn("Archive");de(De,te)},$$slots:{default:!0}});var Xe=Me(Qe,2),Ae=_e(Xe);gn(Ae,{variant:"secondary",onclick:_,"aria-label":"Cancel editing and discard changes",children:(De,He)=>{var te=mn("Cancel");de(De,te)},$$slots:{default:!0}});var ft=Me(Ae,2);{let De=it(()=>y(o)?"Save disabled: list name cannot be empty":"Save list name changes");gn(ft,{variant:"primary",onclick:h,get disabled(){return y(o)},get"aria-label"(){return y(De)},children:(He,te)=>{var ye=mn("Save");de(He,ye)},$$slots:{default:!0}})}ct(()=>Tt(re,"aria-describedby",y(o)?"validation-message":void 0)),Fs(re,()=>y(i),De=>M(i,De)),de(ne,oe)},se=ne=>{var oe=Qn(),fe=xt(oe);{var re=ge=>{var ze=Op(),Ke=Me(xt(ze),4),Qe=_e(Ke);gn(Qe,{variant:"secondary",onclick:O,"aria-label":"Cancel archiving",children:(Ae,ft)=>{var De=mn("Cancel");de(Ae,De)},$$slots:{default:!0}});var Xe=Me(Qe,2);gn(Xe,{variant:"primary",onclick:E,"aria-label":"Confirm archive list",children:(Ae,ft)=>{var De=mn("Archive");de(Ae,De)},$$slots:{default:!0}}),de(ge,ze)};tt(fe,ge=>{y(d)==="confirm-archive"&&ge(re)},!0)}de(ne,oe)};tt(G,ne=>{y(d)==="edit"?ne(J):ne(se,!1)})}Wt(N,ne=>M(c,ne),()=>y(c)),ct(ne=>er(N,ne),[()=>y(p)()]),de(H,F)};tt(I,H=>{t.isOpen&&H(k)})}de(e,L),rr()}$r(["click","keydown"]);var Pp=Te('<input type="checkbox" disabled class="cursor-pointer" aria-hidden="true" tabindex="-1"/> <textarea class="flex-1 break-words resize-none max-h-[10rem] overflow-y-auto text-body font-urbanist text-grey-100 placeholder:italic" rows="1" style="height: 24px;"></textarea>',1),Rp=Te('<input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-60" role="button" tabindex="0"> </span>',1),Mp=Te('<div class="flex items-center gap-2 py-1 border-b border-grey-50 hover:bg-grey-20 w-full print:hidden add-task-container add-task-button svelte-jtbpvm"><!></div>');function ts(e,t){nr(t,!0);let i=Ot(t,"isInputActive",11,!1),o=Ot(t,"inputValue",3,""),u=Ot(t,"buttonText",3,"Add Task"),c=Ot(t,"placeholder",3,"start typing..."),d=Ot(t,"marginLeft",3,!1),p=Ot(t,"containerElement",15,null),h=Ot(t,"textareaElement",15,null),_=me(null),w=me(null);qe(()=>{p(y(w)),h(y(_))}),qe(()=>{i()&&y(_)?setTimeout(()=>{if(y(_)?.focus(),y(_)instanceof HTMLTextAreaElement){y(_).style.height="auto";const k=y(_).scrollHeight;y(_).style.height=`${Math.max(24,Math.min(k,za))}px`}},0):!i()&&y(_)&&y(_)instanceof HTMLTextAreaElement&&(y(_).style.height="24px")}),qe(()=>{if(y(_)&&y(_)instanceof HTMLTextAreaElement){const k=()=>{y(_).style.height="auto";const H=y(_).scrollHeight;y(_).style.height=`${Math.max(24,Math.min(H,za))}px`};return y(_).addEventListener("input",k),()=>{y(_).removeEventListener("input",k)}}});function T(k){k.key==="Enter"&&!k.shiftKey?(k.preventDefault(),t.onSave?.()):k.key==="Escape"?(k.preventDefault(),t.onEscape?.(k,o())):k.key==="Tab"&&t.onSave?.({closeAfterSave:!0})}function b(k){if(k.key==="Enter"||k.key===" ")k.preventDefault(),t.onActivate?.();else if(k.key==="Escape"){k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation();const H=k.currentTarget;H&&H instanceof HTMLElement&&H.blur()}}var E=Mp(),O=_e(E);{var L=k=>{var H=Pp(),F=Me(xt(H),2);F.__input=N=>t.onInputChange?.(N.currentTarget.value),F.__keydown=T,Wt(F,N=>M(_,N),()=>y(_)),ct(()=>{Tt(F,"placeholder",c()),Ev(F,o())}),de(k,H)},I=k=>{var H=Rp(),F=Me(xt(H),2);F.__click=function(...G){t.onActivate?.apply(this,G)},F.__keydown=b;var N=_e(F);ct(()=>{Tt(F,"aria-label",t.ariaLabel||u()),_r(N,u())}),de(k,H)};tt(O,k=>{i()?k(L):k(I,!1)})}Wt(E,k=>M(w,k),()=>y(w)),ct(()=>er(E,d()?"margin-left: 1.5rem;":"")),de(e,E),rr()}$r(["input","keydown","click"]);function il(){let e=me(!1),t=me(null),i=me(null);function o(h){if(h&&h instanceof HTMLElement){const _=h.getBoundingClientRect();M(t,{top:_.top,left:_.left,width:_.width,height:_.height},!0),M(i,h,!0)}M(e,!0)}function u(){const h=y(i);M(e,!1),M(t,null),M(i,null),h&&h instanceof HTMLElement&&setTimeout(()=>{h.focus()},0)}function c(){M(e,!1),M(t,null),M(i,null)}function d(h){const _=h?.currentTarget||h?.target;o(_)}function p(h,_={}){const w=h.key;if(w==="Enter"||w===" "){h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation();const T=h.currentTarget;T&&o(T)}else if(w==="Escape")if(h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation(),_.onEscape)_.onEscape(h);else{const T=h.currentTarget;T&&T instanceof HTMLElement&&T.blur()}}return{get isOpen(){return y(e)},get position(){return y(t)},get element(){return y(i)},openModal:o,closeModal:u,closeModalWithoutFocus:c,handleClick:d,handleKeydown:p}}var Np=Te('<li class="flex items-center gap-2 py-1 border-b border-grey-50 cursor-move hover:bg-grey-20 w-full m-0 list-none"><input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),Kp=Te('<div class="-mt-6"><!></div>'),Fp=Te('<div class="task-list-wrapper m-0 p-0"><ul></ul> <!></div>'),Bp=Te("<p>Loading tasks...</p> <!>",1),jp=Te('<div class="flex flex-col mb-6 w-full"><div class="border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border"><div class="flex items-center transition-colors hover:bg-grey-20 hover:rounded py-1"><h2 role="button" tabindex="0" class="list-title cursor-pointer m-0 px-2 py-2 leading-none text-grey-110 font-gilda text-[24px] rounded -my-1 transition-colors flex-1 min-w-0 focus:outline-none"> </h2></div></div> <!></div> <!> <!>',1);function zp(e,t){nr(t,!0);const i=()=>Oa(y(p),"$tasksQuery",o),[o,u]=Bs();let c=Ot(t,"allLists",19,()=>[]),d=Ot(t,"stableLists",19,()=>[]),p=me(null),h=me(Jt([])),_=me(!1);const w=il(),T=il();let b=me(null),E=me(""),O=me(null),L=me(null),I=me(null),k=me(null),H=me(null),F=me(null),N=me(!1),G=me(!1),J=me(null),se=me(null);function ne(q){return Array.isArray(q)?[...q].sort((V,W)=>{const ae=V?.columnIndex??0,pe=W?.columnIndex??0;if(ae!==pe)return ae-pe;const at=V?.order??0,Se=W?.order??0;if(at!==Se)return at-Se;const be=V?.id??0,je=W?.id??0;return be-je}):[]}function oe(q,V,W){const ae=ne(V);if(!ae.length)return null;const pe=ae.findIndex(at=>at.id===q);return pe===-1?null:W==="next"?pe>=ae.length-1?null:ae[pe+1].id:W==="prev"?pe<=0?null:ae[pe-1].id:null}qe(()=>{d().some(V=>V.id===t.listId)&&t.listId?(!y(p)||y(se)!==t.listId)&&(Ca(M(p,Pa(()=>Xo(t.listId)),!0),"$tasksQuery",o),M(se,t.listId,!0)):(Ca(M(p,null),"$tasksQuery",o),M(se,null))}),qe(()=>{i()&&Array.isArray(i())&&M(h,i().filter(q=>q.status==="unchecked"||q.status==="checked"),!0)}),qe(()=>{if(!y(L))return;function q(V){const W=V.target;if((V.key==="Enter"||V.key===" ")&&W instanceof HTMLElement&&W.tagName==="H2"&&W.hasAttribute("role")&&W.getAttribute("role")==="button"){const ae=y(L)?.querySelector('h2[role="button"]');ae&&W===ae&&(V.preventDefault(),V.stopImmediatePropagation(),T.openModal(W))}}return y(L).addEventListener("keydown",q,!0),()=>{y(L)&&y(L).removeEventListener("keydown",q,!0)}}),qe(()=>{if(!y(I))return;function q(V){const W=V.target;if((V.key==="Enter"||V.key===" ")&&W instanceof HTMLElement&&W.hasAttribute("role")&&W.getAttribute("role")==="button"){const ae=y(I)?.querySelector('span[role="button"]');ae&&W===ae&&(V.preventDefault(),V.stopImmediatePropagation(),Xe())}}return y(I).addEventListener("keydown",q,!0),()=>{y(I)&&y(I).removeEventListener("keydown",q,!0)}}),qe(()=>{if(!y(O))return;async function q(V){const W=V.target;if((V.key==="Enter"||V.key===" ")&&W instanceof HTMLElement&&W.hasAttribute("data-no-drag")){V.preventDefault(),V.stopImmediatePropagation();const ae=W.closest("li[data-id]");if(ae){const pe=parseInt(ae.getAttribute("data-id")),at=y(h).find(Se=>Se.id===pe);at&&(M(b,pe,!0),M(E,at.text,!0),w.openModal(W))}return}if(V.key==="ArrowDown"||V.key==="ArrowUp"){const ae=document.activeElement;if(!ae)return;const pe=ae.closest("li[data-id]");if(!pe||!y(O).contains(pe))return;const at=pe.getAttribute("data-id");if(!at)return;const Se=parseInt(at);if(!y(h).find(ke=>ke.id===Se))return;const je=y(h).findIndex(ke=>ke.id===Se),We=je===0,nt=je===y(h).length-1;if(V.key==="ArrowDown"&&nt){V.preventDefault(),V.stopImmediatePropagation();const ke=oe(t.listId,c(),"next");ke!=null&&await fe(Se,ke)}else if(V.key==="ArrowUp"&&We){V.preventDefault(),V.stopImmediatePropagation();const ke=oe(t.listId,c(),"prev");ke!=null&&await re(Se,ke)}}}return y(O).addEventListener("keydown",q,!0),()=>{y(O).removeEventListener("keydown",q,!0)}});async function fe(q,V){try{const W=await Xo(V),ae=[{id:q},...W];await Jo(V,ae)}catch(W){console.error("Error moving task to next list:",W)}}async function re(q,V){try{const ae=[...await Xo(V),{id:q}];await Jo(V,ae)}catch(W){console.error("Error moving task to previous list:",W)}}function ge(q){M(h,q.detail.items.filter(V=>V&&typeof V.id=="number"),!0)}function ze(q,V){const W=q.key,ae=q.currentTarget,pe=q.target;if(!(!(ae instanceof HTMLElement)||ae!==pe)){if(W==="Enter"||W===" ")y(G)?(M(G,!1),M(J,V,!0),M(F,ae,!0),M(N,!0)):(M(G,!0),M(J,V,!0));else if(W==="Escape"){const at=typeof document<"u"?document.querySelectorAll('li[aria-grabbed="true"], li.svelte-dnd-action-dragged'):[];let Se=!1;if(y(O)&&y(O)instanceof HTMLElement){const We=window.getComputedStyle(y(O));We.boxShadow&&We.boxShadow!=="none"&&We.boxShadow.includes("inset")&&(Se=!0)}let be=0;if(typeof document<"u"){const We=document.querySelectorAll("ul");for(const nt of We)if(nt instanceof HTMLElement&&nt!==y(O)){const ke=window.getComputedStyle(nt);ke.boxShadow&&ke.boxShadow!=="none"&&ke.boxShadow.includes("inset")&&be++}}const je=at.length>0||Se||be>0;y(G)||je?(M(G,!1),M(J,V,!0),M(F,ae,!0),M(N,!0)):(q.preventDefault(),q.stopPropagation(),q.stopImmediatePropagation(),M(F,ae,!0),M(N,!0),ae instanceof HTMLElement&&ae.blur())}}}function Ke(q,V){const W=q.currentTarget;y(G)&&y(J)===V&&(M(G,!1),M(F,W,!0),M(N,!0))}qe(()=>{if(!y(O))return;async function q(V){const W=V.key;if(W==="Tab"&&y(N)&&y(F)){if(V.preventDefault(),V.stopImmediatePropagation(),V.stopPropagation(),M(N,!1),typeof document<"u"){let ke=y(F);if((!(ke instanceof HTMLElement)||!document.contains(ke))&&y(I)){const En=y(I).querySelector('span[role="button"]');En&&En instanceof HTMLElement&&(ke=En)}ke&&ke instanceof HTMLElement&&ke.focus()}return}if(W!=="ArrowDown"&&W!=="ArrowUp")return;const ae=document.activeElement;if(!ae)return;const pe=ae.closest("li[data-id]");if(!pe||!y(O).contains(pe))return;const at=pe.getAttribute("data-id");if(!at)return;const Se=parseInt(at);if(!y(h).find(ke=>ke.id===Se))return;const je=y(h).findIndex(ke=>ke.id===Se),We=je===0,nt=je===y(h).length-1;if(W==="ArrowDown"&&nt){V.preventDefault(),V.stopImmediatePropagation(),V.stopPropagation();const ke=oe(t.listId,c(),"next");ke!=null&&await fe(Se,ke)}else if(W==="ArrowUp"&&We){V.preventDefault(),V.stopImmediatePropagation(),V.stopPropagation();const ke=oe(t.listId,c(),"prev");ke!=null&&await re(Se,ke)}}return document.addEventListener("keydown",q,!0),()=>{document.removeEventListener("keydown",q,!0)}});async function Qe(q){const V=q.detail.items.filter(W=>W&&typeof W.id=="number");M(h,V,!0);try{await Jo(t.listId,V)}catch(W){console.error("Error updating task order:",W)}}function Xe(){M(_,!0)}async function Ae(q,V=""){if(q.key==="Escape"){const W=y(h).length===0;let ae=V||"";if(y(k)?ae=(y(k).value||"").toString():t.newTaskInput&&(ae=(t.newTaskInput||"").toString()),W){if(M(N,!0),y(I)){const pe=y(I).querySelector('span[role="button"]');pe&&pe instanceof HTMLElement?M(F,pe,!0):M(F,null)}else M(F,null);M(_,!1),t.onInputChange(""),await nn(),await nn(),await new Promise(pe=>requestAnimationFrame(pe)),await new Promise(pe=>setTimeout(pe,es));return}if(ae.length>0){await ft({closeAfterSave:!0});return}if(M(N,!0),y(I)){const pe=y(I).querySelector('span[role="button"]');pe&&pe instanceof HTMLElement?M(F,pe,!0):M(F,null)}else M(F,null);M(_,!1),t.onInputChange(""),await nn(),await nn(),await new Promise(pe=>requestAnimationFrame(pe)),await new Promise(pe=>setTimeout(pe,es))}}qe(()=>{if(y(_))return bc(()=>y(k),()=>{y(_)&&(M(_,!1),t.onInputChange(""))},{ignoreElements:[],shouldClose:()=>y(k)&&y(k).value.trim()!==""?!1:!t.newTaskInput||t.newTaskInput.trim()===""})});async function ft(q={}){const V=q&&typeof q=="object"&&q.closeAfterSave===!0;let W=t.newTaskInput||"";if(y(k)&&(W=(y(k).value||"").toString()),W=(W||"").toString(),wp(W)){M(_,!1),t.onInputChange(""),await nn(),await nn(),await new Promise(pe=>requestAnimationFrame(pe)),await new Promise(pe=>setTimeout(pe,es));return}const{text:ae}=_c(W);try{await ep(t.listId,ae),t.onInputChange(""),V&&M(_,!1)}catch(pe){console.error("Error creating task:",pe)}}async function De(q,V){try{await nl(q,V==="unchecked"?"checked":"unchecked")}catch(W){console.error("Error updating task status:",W)}}async function He(q){await nl(q,"archived")}function te(){return y(O)?_p(y(O),"li[data-id]",'span[role="button"]'):null}async function ye(q=$o,V=ma){y(L)&&await gp(()=>{if(y(I)){const W=y(I).querySelector('span[role="button"]');if(W&&W instanceof HTMLElement)return W}return null},{maxAttempts:q,retryInterval:V,waitForTick:!1})}async function Re(q){try{await He(q),y(b)===q&&(M(b,null),M(E,""),w.closeModalWithoutFocus(),await nn(),await new Promise(V=>setTimeout(V,Es)),setTimeout(()=>{const V=(W=0)=>{const ae=te();ae?ae.focus():W<$o?setTimeout(()=>V(W+1),ma):ye(mp,ma)};V()},yp))}catch(V){console.error("Error archiving task:",V)}}function Ve(q,V,W){const ae=W?.currentTarget||W?.target;M(b,q,!0),M(E,V,!0),w.openModal(ae)}function Ce(q,V,W){if(W.key==="Enter"||W.key===" ")M(b,q,!0),M(E,V,!0),w.handleKeydown(W);else if(W.key==="Escape"){W.preventDefault(),W.stopImmediatePropagation();const ae=W.currentTarget;ae&&ae instanceof HTMLElement&&(M(F,ae,!0),M(N,!0),ae.blur())}}async function Be(q,V){try{await tp(q,V),M(b,null),M(E,""),w.closeModal()}catch(W){console.error("Error updating task text:",W)}}function dt(){M(b,null),M(E,""),w.closeModal()}async function vt(q){await Re(q),setTimeout(()=>{if(typeof document>"u")return;const V=document.activeElement;y(L)&&(!V||!y(L).contains(V))&&ye($o,ma)},Es)}function en(q){T.handleClick(q)}function ir(q){T.handleKeydown(q)}async function Ue(q,V){try{await Jh(q,V),T.closeModal()}catch(W){console.error("Error updating list name:",W)}}function It(){T.closeModal()}async function ar(q){try{await ap(q),await rp(q)}catch(V){console.error("Error archiving list:",V)}}var Bt=jp(),Dt=xt(Bt),jt=_e(Dt),zt=_e(jt),Ht=_e(zt);Ht.__click=en,Ht.__keydown=ir;var ei=_e(Ht);Wt(jt,q=>M(H,q),()=>y(H));var ue=Me(jt,2);{var Pn=q=>{var V=Fp(),W=_e(V);Fr(W,21,()=>y(h),Se=>Se.id,(Se,be)=>{var je=Np(),We=_e(je);We.__change=()=>De(y(be).id,y(be).status),We.__keydown=Ge=>{if(Ge.key==="Enter"||Ge.key===" ")Ge.preventDefault(),Ge.stopPropagation(),De(y(be).id,y(be).status);else if(Ge.key==="Escape"){Ge.preventDefault(),Ge.stopPropagation(),Ge.stopImmediatePropagation();const Rn=Ge.currentTarget;if(Rn&&Rn instanceof HTMLElement){const or=Rn.closest("li[data-id]");or&&or instanceof HTMLElement&&(M(F,or,!0),M(N,!0)),Rn.blur()}}};var nt=Me(We,2);nt.__click=Ge=>Ve(y(be).id,y(be).text,Ge),nt.__keydown=Ge=>Ce(y(be).id,y(be).text,Ge);var ke=_e(nt),En=Me(nt,2);{var Bi=Ge=>{{let Rn=it(()=>`Archive task: ${y(be).text||"blank task"}`);gn(Ge,{variant:"secondary",size:"small",onclick:()=>Re(y(be).id),class:"print:hidden",get"aria-label"(){return y(Rn)},children:(or,Mn)=>{var ti=mn("Archive");de(or,ti)},$$slots:{default:!0}})}};tt(En,Ge=>{y(be).status==="checked"&&Ge(Bi)})}ct(()=>{Tt(je,"data-id",y(be).id),xv(We,y(be).status==="checked"),Tt(We,"aria-label",`Mark task "${y(be).text||"blank task"}" as ${y(be).status==="checked"?"unchecked":"checked"}`),Ii(nt,1,Zl(y(be).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100":"cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100")),Tt(nt,"aria-label",`Edit task: ${y(be).text||"blank task"}`),_r(ke,y(be).text||"Â ")}),gr("keydown",je,Ge=>ze(Ge,y(be).id),!0),gr("blur",je,Ge=>Ke(Ge,y(be).id)),de(Se,je)}),Wt(W,Se=>M(O,Se),()=>y(O)),Yl(W,(Se,be)=>yc?.(Se,be),()=>({items:y(h),type:"task",zoneTabIndex:-1,dropTargetStyle:{outline:"none",boxShadow:"inset 0 0 0 2px rgba(107, 143, 217, 0.4)",backgroundColor:"rgba(107, 143, 217, 0.04)",borderRadius:"4px"}}));var ae=Me(W,2);{var pe=Se=>{var be=Kp(),je=_e(be);ts(je,{get inputValue(){return t.newTaskInput},get onInputChange(){return t.onInputChange},onSave:ft,onEscape:Ae,onActivate:Xe,buttonText:"Add your first task",placeholder:"start typing...",get ariaLabel(){return`Add your first task to ${t.listName??""}`},marginLeft:!1,get isInputActive(){return y(_)},set isInputActive(We){M(_,We,!0)},get containerElement(){return y(I)},set containerElement(We){M(I,We,!0)},get textareaElement(){return y(k)},set textareaElement(We){M(k,We,!0)}}),de(Se,be)},at=Se=>{ts(Se,{get inputValue(){return t.newTaskInput},get onInputChange(){return t.onInputChange},onSave:ft,onEscape:Ae,onActivate:Xe,buttonText:"Add Task",placeholder:"start typing...",get ariaLabel(){return`Add new task to ${t.listName??""}`},marginLeft:!1,get isInputActive(){return y(_)},set isInputActive(be){M(_,be,!0)},get containerElement(){return y(I)},set containerElement(be){M(I,be,!0)},get textareaElement(){return y(k)},set textareaElement(be){M(k,be,!0)}})};tt(ae,Se=>{y(h).length===0?Se(pe):Se(at,!1)})}ct(()=>Ii(W,1,`space-y-0 m-0 p-0 list-none w-full ${y(h).length===0?"empty-drop-zone min-h-[24px]":""}`)),gr("consider",W,ge),gr("finalize",W,Qe),de(q,V)},Dr=q=>{var V=Bp(),W=Me(xt(V),2);ts(W,{get inputValue(){return t.newTaskInput},get onInputChange(){return t.onInputChange},onSave:ft,onEscape:Ae,onActivate:Xe,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${t.listName??""}`},marginLeft:!1,get isInputActive(){return y(_)},set isInputActive(ae){M(_,ae,!0)},get containerElement(){return y(I)},set containerElement(ae){M(I,ae,!0)},get textareaElement(){return y(k)},set textareaElement(ae){M(k,ae,!0)}}),de(q,V)};tt(ue,q=>{y(p)&&i()!==void 0?q(Pn):q(Dr,!1)})}Wt(Dt,q=>M(L,q),()=>y(L));var un=Me(Dt,2);Ip(un,{get isOpen(){return w.isOpen},get taskId(){return y(b)},get taskText(){return y(E)},get taskPosition(){return w.position},onSave:Be,onCancel:dt,onArchive:vt});var Le=Me(un,2);Lp(Le,{get isOpen(){return T.isOpen},get listId(){return t.listId},get listName(){return t.listName},get listPosition(){return T.position},onSave:Ue,onCancel:It,onArchive:ar}),ct(()=>{Tt(Dt,"data-list-id",t.listId),Tt(Ht,"aria-label",`Rename list: ${t.listName}`),_r(ei,t.listName)}),de(e,Bt),rr(),u()}$r(["click","keydown","change"]);var Hp=Te('<div class="flex flex-col mb-6 svelte-785piu" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),Up=Te('<div class="flex flex-col mb-6 svelte-785piu"></div>'),Vp=Te('<div class="empty-drop-zone min-h-[96px]" tabindex="-1"></div>'),Wp=Te('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Gp=Te('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Yp=Te('<div><div class="flex flex-col pt-0"><!> <!></div> <div><!></div></div>');function qp(e,t){nr(t,!0);let i=Ot(t,"createListInput",15,""),o=Ot(t,"createListInputElement",15,null),u=me(null),c=me(null),d=me(null);qe(()=>{if(typeof document>"u"||t.columnLists.length!==0||!y(c))return;const I=setTimeout(()=>{y(c)&&y(c).getAttribute("tabindex")!=="-1"&&y(c).setAttribute("tabindex","-1")},Es);return()=>{clearTimeout(I)}}),qe(()=>{if(!y(u)||!(y(u)instanceof HTMLElement))return;t.keyboardListDrag?.active===!0?(y(u).style.outline="none",y(u).style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",y(u).style.borderRadius="4px"):(y(u).style.outline="",y(u).style.boxShadow="",y(u).style.borderRadius="")});var p=Yp(),h=_e(p),_=_e(h);Fr(_,19,()=>t.columnLists,I=>I.id,(I,k)=>{const H=it(()=>bs(y(k))),F=it(()=>t.stableLists.find(fe=>fe.id===y(k).id)),N=it(()=>!y(F)&&!y(H)?y(k):null),G=it(()=>y(F)||y(N));var J=Qn(),se=xt(J);{var ne=fe=>{var re=Hp(),ge=_e(re);{let ze=it(()=>y(G).name??"Unnamed list"),Ke=it(()=>t.newTaskInputs[y(G).id]||"");zp(ge,{get listId(){return y(G).id},get listName(){return y(ze)},get newTaskInput(){return y(Ke)},onInputChange:Qe=>t.onInputChange(y(G).id,Qe),get allLists(){return t.allLists},get stableLists(){return t.stableLists}})}ct(()=>{Tt(re,"data-id",y(k).id),Tt(re,"aria-label",`List: ${y(G).name??"Unnamed list"}`),Tt(re,"aria-pressed",t.keyboardListDrag?.active&&t.keyboardListDrag?.listId===y(G).id?"true":"false")}),gr("keydown",re,ze=>t.onListKeyboardKeydown(ze,y(G).id),!0),de(fe,re)},oe=fe=>{var re=Up();ct(()=>Tt(re,"data-id",y(k).id)),de(fe,re)};tt(se,fe=>{y(G)?fe(ne):fe(oe,!1)})}de(I,J)});var w=Me(_,2);{var T=I=>{var k=Vp();Wt(k,H=>M(c,H),()=>y(c)),de(I,k)};tt(w,I=>{t.columnLists.length===0&&I(T)})}Wt(h,I=>M(u,I),()=>y(u)),Yl(h,(I,k)=>yc?.(I,k),()=>({items:t.columnLists,type:"list",zoneTabIndex:-1,dropTargetStyle:{outline:"none",boxShadow:"inset 0 0 0 2px rgba(107, 143, 217, 0.4)",borderRadius:"4px"}}));var b=Me(h,2),E=_e(b);{var O=I=>{var k=Wp(),H=_e(k),F=_e(H);F.__keydown=N=>{N.key==="Enter"&&!N.shiftKey?(N.preventDefault(),t.onCreateList(t.columnIndex)):N.key==="Escape"?t.onCreateListInputEscape(N,t.columnIndex,t.columnLists.length===0):N.key==="Tab"&&t.onCreateListOnTab(t.columnIndex)},Wt(F,N=>o(N),()=>o()),Fs(F,i),de(I,k)},L=I=>{var k=Gp(),H=_e(k);H.__click=()=>t.onCreateListClick(t.columnIndex),H.__keydown=F=>t.onCreateListKeydown(F,t.columnIndex),Wt(H,F=>M(d,F),()=>y(d)),de(I,k)};tt(E,I=>{t.createListColumnIndex===t.columnIndex?I(O):I(L,!1)})}ct(()=>{Ii(p,1,`flex flex-col pt-0 min-w-0 px-2 ${t.columnIndex<4?"border-r border-grey-50":""}`,"svelte-785piu"),Tt(p,"data-column-index",t.columnIndex),Ii(b,1,`flex flex-col mb-6 w-full print:hidden ${t.columnLists.length===0?"create-list-empty-column":""}`,"svelte-785piu")}),gr("consider",h,function(...I){t.onListConsider?.apply(this,I)}),gr("finalize",h,function(...I){t.onListFinalize?.apply(this,I)}),de(e,p),rr()}$r(["keydown","click"]);var Zp=Te("<p>Loading...</p>"),Qp=Te('<div class="grid grid-cols-5 w-full py-4 px-1"></div>'),Xp=Te('<div class="w-full h-full overflow-auto"><!></div>');function Jp(e,t){nr(t,!0);const i=()=>Oa(c,"$lists",o),[o,u]=Bs();let c=Pa(()=>qh()),d=it(()=>i()||[]),p=me(Jt([])),h=me(Jt({})),_=me(null),w=me(""),T=me(null),b=me(Jt({active:!1,listId:null,lastDraggedId:null,shouldRefocusOnNextTab:!1}));qe(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(y(h)).length===0){const te={};for(const ye of i())te[ye.id]="";M(h,te,!0)}}),qe(()=>{if(i()&&Array.isArray(i())&&i().length>0){const te={...y(h)};let ye=!1;for(const Re of i())Re.id in te||(te[Re.id]="",ye=!0);ye&&M(h,te,!0)}});let E=me(0);qe(()=>{if(i()&&Array.isArray(i())){const te=i().map(ye=>({id:ye.id,name:ye.name,order:ye.order,columnIndex:ye.columnIndex}));te.length!==y(E)&&M(E,te.length,!0),M(p,te,!0)}else y(E)>0&&M(E,0),M(p,[],!0)});const O=5;let L=it(()=>op(y(p),O));async function I(te,ye){const Re=y(L);if(!Re||Re.length===0)return;const Ve=lp(Re,te,ye,O);if(!Ve)return;const{updatedDraggableLists:Ce,targetColumnIndex:Be,targetColumnItems:dt}=Ve;M(p,Ce,!0);try{await rl(Be,dt)}catch(vt){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",vt)}y(b).active&&y(b).listId===te&&await gc(te)}function k(te){return y(b).active===!0&&y(b).listId===te}function H(te){M(b,{...y(b),active:!0,listId:te,shouldRefocusOnNextTab:!1},!0)}function F(){y(b).listId!=null?M(b,{...y(b),active:!1,listId:null,lastDraggedId:y(b).listId,shouldRefocusOnNextTab:!0},!0):M(b,{...y(b),active:!1,listId:null},!0)}function N(){if(typeof document>"u")return;const te=document.activeElement;te&&te instanceof HTMLElement&&te.blur()}function G(te,ye){const Re=te.currentTarget,Ve=te.target,Ce=te.key;if(!k(ye)){Ce==="Enter"||Ce===" "?Re instanceof HTMLElement&&Re===Ve&&(te.preventDefault(),te.stopPropagation(),te.stopImmediatePropagation(),ye!=null&&H(ye)):Ce==="Escape"&&Re instanceof HTMLElement&&Re===Ve&&(te.preventDefault(),te.stopPropagation(),te.stopImmediatePropagation(),ye!=null&&M(b,{...y(b),lastDraggedId:ye,shouldRefocusOnNextTab:!0},!0),Re.blur());return}}qe(()=>typeof document>"u"?void 0:bp({getKeyboardListDrag:()=>({active:y(b).active,listId:y(b).listId}),getLastKeyboardDraggedListId:()=>y(b).lastDraggedId,getShouldRefocusListOnNextTab:()=>y(b).shouldRefocusOnNextTab,setShouldRefocusListOnNextTab:ye=>{M(b,{...y(b),shouldRefocusOnNextTab:ye},!0)}},(ye,Re)=>I(ye,Re),()=>F(),()=>N()));function J(te,ye){y(h)[te]=ye}const se=xp({getColumnIndex:()=>y(_),setColumnIndex:te=>{M(_,te,!0)},getInput:()=>y(w),setInput:te=>{M(w,te,!0)},getInputElement:()=>y(T)}),{handleCreateListClick:ne,handleCreateListKeydown:oe,handleCreateListInputEscape:fe,handleCreateList:re,handleCreateListOnTab:ge,setupClickOutsideEffect:ze,setupFocusEffect:Ke}=se;qe(()=>ze()),qe(()=>Ke());function Qe(te,ye){const Re=te.detail.items||[];M(p,cp(Re,ye,y(p)),!0)}async function Xe(te,ye){const Re=(te.detail.items||[]).filter(Ce=>!bs(Ce)),Ve=(te.detail.items||[]).filter(Ce=>bs(Ce));if(Ve.length>0&&console.warn("[DRAG] finalize - WARNING: Placeholders still present in finalize!",Ve.length),!fp(Re,ye,i(),y(p)))try{await rl(ye,Re)}catch(Ce){console.error("[DRAG] finalize - ERROR updating list order:",Ce)}}var Ae=Xp(),ft=_e(Ae);{var De=te=>{var ye=Zp();de(te,ye)},He=te=>{var ye=Qn(),Re=xt(ye);{var Ve=Ce=>{var Be=Qp();Fr(Be,21,()=>y(L),ga,(dt,vt,en)=>{{let ir=it(()=>({active:y(b).active,listId:y(b).listId}));qp(dt,{columnIndex:en,get columnLists(){return y(vt)},get stableLists(){return y(d)},get newTaskInputs(){return y(h)},get createListColumnIndex(){return y(_)},get keyboardListDrag(){return y(ir)},onInputChange:J,onListKeyboardKeydown:G,onListConsider:Ue=>Qe(Ue,en),onListFinalize:Ue=>Xe(Ue,en),get onCreateListClick(){return ne},get onCreateListKeydown(){return oe},get onCreateListInputEscape(){return fe},get onCreateList(){return re},get onCreateListOnTab(){return ge},get allLists(){return i()},get createListInput(){return y(w)},set createListInput(Ue){M(w,Ue,!0)},get createListInputElement(){return y(T)},set createListInputElement(Ue){M(T,Ue,!0)}})}}),de(Ce,Be)};tt(Re,Ce=>{Array.isArray(i())&&Ce(Ve)},!0)}de(te,ye)};tt(ft,te=>{i()===void 0||i()===null?te(De):te(He,!1)})}de(e,Ae),rr(),u()}var $p=Te("<p>Loading...</p>"),em=Te("<p>Loading data...</p>"),tm=Te('<p class="text-grey-60">No archived lists or tasks</p>'),nm=Te('<span class="text-sm text-grey-60"> </span>'),rm=Te('<span class="text-xs bg-grey-30 px-2 py-1 rounded">[List Archived]</span> <!>',1),im=Te('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),am=Te('<p class="text-sm text-grey-60 italic">No archived tasks</p>'),om=Te('<li class="flex items-center gap-3 flex-wrap"><span class="line-through text-grey-100"> </span> <!></li>'),sm=Te('<div class="mb-4"><h4 class="text-sm font-medium text-grey-60 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),um=Te('<div class="border-b border-grey-50 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold text-grey-110"> </h3> <!></div></div> <div class="border-b border-grey-50 pb-4"><!></div>',1),lm=Te('<div class="grid grid-cols-2 gap-4"></div>'),cm=Te('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function fm(e,t){nr(t,!0);const i=()=>Oa(y(p),"$listsQuery",u),o=()=>Oa(y(d),"$archivedTasksQuery",u),[u,c]=Bs();let d=me(null),p=me(null);qe(()=>{Ca(M(d,Pa(()=>$h()),!0),"$archivedTasksQuery",u),Ca(M(p,Pa(()=>Zh()),!0),"$listsQuery",u)});function h(k){return k?new Date(k).toDateString():null}function _(k){return k?new Date(k).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let w=it(()=>{const k=y(d)?o():null,H=y(p)?i():null;if(!H||!Array.isArray(H))return[];const F={};if(k&&Array.isArray(k))for(const G of k)F[G.listId]||(F[G.listId]=[]),F[G.listId].push(G);const N=[];for(const G of H){const J=G.archivedAt!=null,se=F[G.id]&&F[G.id].length>0;if(J||se){const ne=F[G.id]||[],oe={};for(const fe of ne){const re=h(fe.archivedAt)||"Unknown";oe[re]||(oe[re]=[]),oe[re].push(fe)}N.push({list:G,listArchiveDate:G.archivedAt?h(G.archivedAt):null,tasksByDate:oe,hasTasks:ne.length>0})}}return N.sort((G,J)=>{if(G.list.order!==J.list.order)return G.list.order-J.list.order;const se=G.list.name??"Unnamed list",ne=J.list.name??"Unnamed list";return se.localeCompare(ne)}),N});function T(k){return k.sort((H,F)=>{if(H==="Unknown")return 1;if(F==="Unknown")return-1;const N=new Date(H).getTime();return new Date(F).getTime()-N})}async function b(k){try{(await np(k)).listRestored&&console.log("Task and its list have been restored")}catch(H){console.error("Error restoring task:",H)}}var E=cm(),O=Me(_e(E),2);{var L=k=>{var H=$p();de(k,H)},I=k=>{var H=Qn(),F=xt(H);{var N=J=>{var se=em();de(J,se)},G=J=>{var se=Qn(),ne=xt(se);{var oe=re=>{var ge=tm();de(re,ge)},fe=re=>{var ge=lm();Fr(ge,21,()=>y(w),ga,(ze,Ke)=>{const Qe=it(()=>y(Ke).list),Xe=it(()=>y(Qe).name??"Unnamed list"),Ae=it(()=>y(Qe).archivedAt!=null),ft=it(()=>y(Ke).listArchiveDate);var De=um(),He=xt(De),te=_e(He),ye=_e(te),Re=_e(ye),Ve=Me(ye,2);{var Ce=Ue=>{var It=rm(),ar=Me(xt(It),2);{var Bt=Dt=>{var jt=nm(),zt=_e(jt);ct(Ht=>_r(zt,`- ${Ht??""}`),[()=>_(y(ft))]),de(Dt,jt)};tt(ar,Dt=>{y(ft)&&Dt(Bt)})}de(Ue,It)},Be=Ue=>{var It=im();de(Ue,It)};tt(Ve,Ue=>{y(Ae)?Ue(Ce):Ue(Be,!1)})}var dt=Me(He,2),vt=_e(dt);{var en=Ue=>{var It=am();de(Ue,It)},ir=Ue=>{var It=Qn(),ar=xt(It);Fr(ar,17,()=>T(Object.keys(y(Ke).tasksByDate)),ga,(Bt,Dt)=>{const jt=it(()=>y(Ke).tasksByDate[y(Dt)]);var zt=sm(),Ht=_e(zt),ei=_e(Ht),ue=Me(Ht,2);Fr(ue,21,()=>y(jt),ga,(Pn,Dr)=>{var un=om(),Le=_e(un),q=_e(Le),V=Me(Le,2);gn(V,{variant:"primary",size:"small",onclick:()=>b(y(Dr).id),children:(W,ae)=>{var pe=mn("Restore");de(W,pe)},$$slots:{default:!0}}),ct(()=>_r(q,y(Dr).text)),de(Pn,un)}),ct(Pn=>_r(ei,Pn),[()=>y(Dt)==="Unknown"?"Unknown Date":_(y(Dt))]),de(Bt,zt)}),de(Ue,It)};tt(vt,Ue=>{y(Ke).hasTasks?Ue(ir,!1):Ue(en)})}ct(()=>_r(Re,y(Xe))),de(ze,De)}),de(re,ge)};tt(ne,re=>{y(w).length===0?re(oe):re(fe,!1)},!0)}de(J,se)};tt(F,J=>{!o()||!i()?J(N):J(G,!1)},!0)}de(k,H)};tt(O,k=>{!y(d)||!y(p)?k(L):k(I,!1)})}ct(()=>er(E,`width: ${ws}px;`)),de(e,E),rr(),c()}var dm=Te('<main class="min-h-screen flex flex-col items-center justify-center bg-grey-10 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><!></div> <div class="bg-grey-10 print:bg-grey-10 border-2 border-grey-50 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-grey-80 pointer-events-none z-0"></div> <div class="absolute inset-[16px] z-10"><!></div></div> <!></main>');function vm(e){function t(){window.print()}var i=dm(),o=_e(i),u=_e(o);gn(u,{variant:"primary",size:"large",onclick:t,children:(_,w)=>{var T=mn("Print");de(_,T)},$$slots:{default:!0}});var c=Me(o,2),d=Me(_e(c),2),p=_e(d);Jp(p,{});var h=Me(c,2);fm(h,{}),ct(()=>{er(o,`width: ${ws}px;`),er(c,`width: ${ws}px; height: ${vp}px;`)}),de(e,i)}const hm=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],pm=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function mm(){try{if(await Ee.lists.count()>0)return;await Ee.lists.bulkAdd(hm),await Ee.tasks.bulkAdd(pm),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await mm().catch(console.error),dv(vm,{target:document.getElementById("app")})))();
