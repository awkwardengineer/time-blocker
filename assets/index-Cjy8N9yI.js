(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();const jf="production",le=!jf.toLowerCase().startsWith("prod");var Ds=Array.isArray,Hf=Array.prototype.indexOf,Cs=Array.from,fr=Object.defineProperty,Lr=Object.getOwnPropertyDescriptor,Uf=Object.getOwnPropertyDescriptors,zf=Object.prototype,Vf=Array.prototype,sl=Object.getPrototypeOf,Cu=Object.isExtensible;const Na=()=>{};function Yf(t){for(var e=0;e<t.length;e++)t[e]()}function ul(){var t,e,i=new Promise((a,s)=>{t=a,e=s});return{promise:i,resolve:t,reject:e}}const Ot=2,Ls=4,Ps=8,ll=1<<24,Yn=16,Wn=32,Kr=64,oo=128,wn=512,jt=1024,Zt=2048,qn=4096,sn=8192,jn=16384,Os=32768,ai=65536,Fa=1<<17,cl=1<<18,di=1<<19,Wf=1<<20,dr=32768,vs=1<<21,so=1<<22,sr=1<<23,Pr=Symbol("$state"),qf=Symbol("legacy props"),Gf=Symbol(""),fl=Symbol("proxy path"),Zr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function dl(t){if(le){const e=new Error(`lifecycle_outside_component
\`${t}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Xf(){if(le){const t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Lu(){if(le){const t=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Qf(){if(le){const t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function Zf(t){if(le){const e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Jf(){if(le){const t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $f(t){if(le){const e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function ed(){if(le){const t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function td(t){if(le){const e=new Error(`props_invalid_value
Cannot do \`bind:${t}={undefined}\` when \`${t}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_invalid_value")}function nd(t){if(le){const e=new Error(`props_rest_readonly
Rest element properties of \`$props()\` such as \`${t}\` are readonly
https://svelte.dev/e/props_rest_readonly`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_rest_readonly")}function rd(t){if(le){const e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function id(){if(le){const t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ad(){if(le){const t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function od(){if(le){const t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function sd(){if(le){const t=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const hl=1,vl=2,pl=4,ud=8,ld=16,cd=1,fd=2,dd=4,hd=8,vd=16,pd=1,md=2,Lt=Symbol(),gd=Symbol("filename"),yd="http://www.w3.org/1999/xhtml",bd="@attach";var Ms="font-weight: bold",Rs="font-weight: normal";function _d(){le?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Ms,Rs):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Qo(t){le?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Ms,Rs):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function wd(){le?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Ms,Rs):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ml(t){return t===this.v}function Ed(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function gl(t){return!Ed(t,this.v)}let hi=!1,xd=!1;function kd(){hi=!0}function In(t,e){return t.label=e,yl(t.v,e),t}function yl(t,e){return t?.[fl]?.(e),t}function Td(t){const e=new Error,i=Ad();return i.length===0?null:(i.unshift(`
`),fr(e,"stack",{value:i.join(`
`)}),fr(e,"name",{value:t}),e)}function Ad(){const t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const e=new Error().stack;if(Error.stackTraceLimit=t,!e)return[];const i=e.split(`
`),a=[];for(let s=0;s<i.length;s++){const l=i[s],f=l.replaceAll("\\","/");if(l.trim()!=="Error"){if(l.includes("validate_each_keys"))return[];f.includes("svelte/src/internal")||f.includes("node_modules/.vite")||a.push(l)}}return a}let mt=null;function oi(t){mt=t}let si=null;function ja(t){si=t}let Yi=null;function Pu(t){Yi=t}function vr(t,e=!1,i){mt={p:mt,i:!1,c:null,e:null,s:t,x:null,l:hi&&!e?{s:null,u:null,$:[]}:null},le&&(mt.function=i,Yi=i)}function pr(t){var e=mt,i=e.e;if(i!==null){e.e=null;for(var a of i)Ol(a)}return e.i=!0,mt=e.p,le&&(Yi=mt?.function??null),{}}function Wi(){return!hi||mt!==null&&mt.l===null}let Ir=[];function bl(){var t=Ir;Ir=[],Yf(t)}function Br(t){if(Ir.length===0&&!Mi){var e=Ir;queueMicrotask(()=>{e===Ir&&bl()})}Ir.push(t)}function Sd(){for(;Ir.length>0;)bl()}const ps=new WeakMap;function _l(t){var e=Je;if(e===null)return Ze.f|=sr,t;if(le&&t instanceof Error&&!ps.has(t)&&ps.set(t,Id(t,e)),(e.f&Os)===0){if((e.f&oo)===0)throw le&&!e.parent&&t instanceof Error&&wl(t),t;e.b.error(t)}else ui(t,e)}function ui(t,e){for(;e!==null;){if((e.f&oo)!==0)try{e.b.error(t);return}catch(i){t=i}e=e.parent}throw le&&t instanceof Error&&wl(t),t}function Id(t,e){const i=Lr(t,"message");if(!(i&&!i.configurable)){for(var a=Fs?"  ":"	",s=`
${a}in ${e.fn?.name||"<unknown>"}`,l=e.ctx;l!==null;)s+=`
${a}in ${l.function?.[gd].split("/").pop()}`,l=l.p;return{message:t.message+`
${s}
`,stack:t.stack?.split(`
`).filter(f=>!f.includes("svelte/src/internal")).join(`
`)}}}function wl(t){const e=ps.get(t);e&&(fr(t,"message",{value:e.message}),fr(t,"stack",{value:e.stack}))}const xa=new Set;let rt=null,Ca=null,hn=null,dn=[],uo=null,ms=!1,Mi=!1;class Pn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){dn=[],Ca=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of e)this.#o(a,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(Ca=this,rt=null,Ou(i.render_effects),Ou(i.effects),Ca=null,this.#u?.resolve()),hn=null}#o(e,i){e.f^=jt;for(var a=e.first;a!==null;){var s=a.f,l=(s&(Wn|Kr))!==0,f=l&&(s&jt)!==0,h=f||(s&sn)!==0||this.skipped_effects.has(a);if((a.f&oo)!==0&&a.b?.is_pending()&&(i={parent:i,effect:a,effects:[],render_effects:[],block_effects:[]}),!h&&a.fn!==null){l?a.f^=jt:(s&Ls)!==0?i.effects.push(a):Gi(a)&&((a.f&Yn)!==0&&i.block_effects.push(a),Vi(a));var v=a.first;if(v!==null){a=v;continue}}var m=a.parent;for(a=a.next;a===null&&m!==null;)m===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),a=m.next,m=m.parent}}#s(e){for(const i of e)((i.f&Zt)!==0?this.#a:this.#i).push(i),this.#l(i.deps),Ht(i,jt)}#l(e){if(e!==null)for(const i of e)(i.f&Ot)===0||(i.f&dr)===0||(i.f^=dr,this.#l(i.deps))}capture(e,i){this.previous.has(e)||this.previous.set(e,i),(e.f&sr)===0&&(this.current.set(e,e.v),hn?.set(e,e.v))}activate(){rt=this,this.apply()}deactivate(){rt===this&&(rt=null,hn=null)}flush(){if(this.activate(),dn.length>0){if(El(),rt!==null&&rt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#c(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(xa.size>1){this.previous.clear();var e=hn,i=!0,a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const l of xa){if(l===this){i=!1;continue}const f=[];for(const[v,m]of this.current){if(l.current.has(v))if(i&&m!==l.current.get(v))l.current.set(v,m);else continue;f.push(v)}if(f.length===0)continue;const h=[...l.current.keys()].filter(v=>!this.current.has(v));if(h.length>0){var s=dn;dn=[];const v=new Set,m=new Map;for(const E of f)xl(E,h,v,m);if(dn.length>0){rt=l,l.apply();for(const E of dn)l.#o(E,a);l.deactivate()}dn=s}}rt=null,hn=e}this.committed=!0,xa.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#a)Ht(e,Zt),Mr(e);for(const e of this.#i)Ht(e,qn),Mr(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#u??=ul()).promise}static ensure(){if(rt===null){const e=rt=new Pn;xa.add(rt),Mi||Pn.enqueue(()=>{rt===e&&e.flush()})}return rt}static enqueue(e){Br(e)}apply(){}}function Dd(t){var e=Mi;Mi=!0;try{for(var i;;){if(Sd(),dn.length===0&&(rt?.flush(),dn.length===0))return uo=null,i;El()}}finally{Mi=e}}function El(){var t=lr;ms=!0;var e=le?new Set:null;try{var i=0;for(za(!0);dn.length>0;){var a=Pn.ensure();if(i++>1e3){if(le){var s=new Map;for(const f of a.current.keys())for(const[h,v]of f.updated??[]){var l=s.get(h);l||(l={error:v.error,count:0},s.set(h,l)),l.count+=v.count}for(const f of s.values())f.error&&console.error(f.error)}Cd()}if(a.process(dn),ur.clear(),le)for(const f of a.current.keys())e.add(f)}}finally{if(ms=!1,za(t),uo=null,le)for(const f of e)f.updated=null}}function Cd(){try{ed()}catch(t){le&&fr(t,"stack",{value:""}),ui(t,uo)}}let Fn=null;function Ou(t){var e=t.length;if(e!==0){for(var i=0;i<e;){var a=t[i++];if((a.f&(jn|sn))===0&&Gi(a)&&(Fn=new Set,Vi(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null&&a.ac===null?Bl(a):a.fn=null),Fn?.size>0)){ur.clear();for(const s of Fn){if((s.f&(jn|sn))!==0)continue;const l=[s];let f=s.parent;for(;f!==null;)Fn.has(f)&&(Fn.delete(f),l.push(f)),f=f.parent;for(let h=l.length-1;h>=0;h--){const v=l[h];(v.f&(jn|sn))===0&&Vi(v)}}Fn.clear()}}Fn=null}}function xl(t,e,i,a){if(!i.has(t)&&(i.add(t),t.reactions!==null))for(const s of t.reactions){const l=s.f;(l&Ot)!==0?xl(s,e,i,a):(l&(so|Yn))!==0&&(l&Zt)===0&&kl(s,e,a)&&(Ht(s,Zt),Mr(s))}}function kl(t,e,i){const a=i.get(t);if(a!==void 0)return a;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if((s.f&Ot)!==0&&kl(s,e,i))return i.set(s,!0),!0}return i.set(t,!1),!1}function Mr(t){for(var e=uo=t;e.parent!==null;){e=e.parent;var i=e.f;if(ms&&e===Je&&(i&Yn)!==0&&(i&cl)===0)return;if((i&(Kr|Wn))!==0){if((i&jt)===0)return;e.f^=jt}}dn.push(e)}function Ld(t){let e=0,i=Rr(0),a;return le&&In(i,"createSubscriber version"),()=>{Ui()&&(y(i),Hs(()=>(e===0&&(a=Fr(()=>t(()=>Ri(i)))),e+=1,()=>{Br(()=>{e-=1,e===0&&(a?.(),a=void 0,Ri(i))})})))}}var Pd=ai|di|oo;function Od(t,e,i){new Md(t,e,i)}class Md{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#b=Ld(()=>(this.#d=Rr(this.#f),le&&In(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(e,i,a){this.#t=e,this.#n=i,this.#u=a,this.parent=Je.b,this.#e=!!this.#n.pending,this.#a=Us(()=>{Je.b=this;{var s=this.#g();try{this.#i=Gt(()=>a(s))}catch(l){this.error(l)}this.#h>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},Pd)}#_(){try{this.#i=Gt(()=>this.#u(this.#t))}catch(e){this.error(e)}this.#e=!1}#w(){const e=this.#n.pending;e&&(this.#o=Gt(()=>e(this.#t)),Pn.enqueue(()=>{var i=this.#g();this.#i=this.#p(()=>(Pn.ensure(),Gt(()=>this.#u(i)))),this.#h>0?this.#m():(ei(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#g(){var e=this.#t;return this.#e&&(this.#c=zn(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var i=Je,a=Ze,s=mt;_n(this.#a),Qt(this.#a),oi(this.#a.ctx);try{return e()}catch(l){return _l(l),null}finally{_n(i),Qt(a),oi(s)}}#m(){const e=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),jl(this.#i,this.#l)),this.#o===null&&(this.#o=Gt(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}this.#h+=e,this.#h===0&&(this.#e=!1,this.#o&&ei(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(e){this.#y(e),this.#f+=e,this.#d&&ci(this.#d,this.#f)}get_effect_pending(){return this.#b(),y(this.#d)}error(e){var i=this.#n.onerror;let a=this.#n.failed;if(this.#v||!i&&!a)throw e;this.#i&&(Pt(this.#i),this.#i=null),this.#o&&(Pt(this.#o),this.#o=null),this.#s&&(Pt(this.#s),this.#s=null);var s=!1,l=!1;const f=()=>{if(s){wd();return}s=!0,l&&sd(),Pn.ensure(),this.#f=0,this.#s!==null&&ei(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,Gt(()=>this.#u(this.#t)))),this.#h>0?this.#m():this.#e=!1};var h=Ze;try{Qt(null),l=!0,i?.(e,f),l=!1}catch(v){ui(v,this.#a&&this.#a.parent)}finally{Qt(h)}a&&Br(()=>{this.#s=this.#p(()=>{Pn.ensure(),this.#v=!0;try{return Gt(()=>{a(this.#t,()=>e,()=>f)})}catch(v){return ui(v,this.#a.parent),null}finally{this.#v=!1}})})}}function La(t,e){return e}function Rd(t,e,i){for(var a=[],s=e.length,l=0;l<s;l++)zs(e[l].e,a,!0);Nl(a,()=>{var f=a.length===0&&i!==null;if(f){var h=i,v=h.parentNode;Xd(v),v.append(h),t.items.clear(),Dn(t,e[0].prev,e[s-1].next)}for(var m=0;m<s;m++){var E=e[m];f||(t.items.delete(E.k),Dn(t,E.prev,E.next)),Pt(E.e,!f)}t.first===e[0]&&(t.first=e[0].prev)})}function $r(t,e,i,a,s,l=null){var f=t,h=new Map,v=null,m=(e&pl)!==0,E=(e&hl)!==0,_=(e&vl)!==0;if(m){var w=t;f=w.appendChild(zn())}var x=null,D=Ks(()=>{var B=i();return Ds(B)?B:B==null?[]:Cs(B)}),L,C=!0;function T(){Kd(U,L,f,e,a),x!==null&&(L.length===0?(x.fragment?(f.before(x.fragment),x.fragment=null):Vs(x.effect),V.first=x.effect):ei(x.effect,()=>{x=null}))}var V=Us(()=>{L=y(D);for(var B=L.length,W=new Set,ee=rt,q=null,N=Pl(),Q=0;Q<B;Q+=1){var ie=L[Q],Y=a(ie,Q),me=C?null:h.get(Y);me?(E&&ci(me.v,ie),_?ci(me.i,Q):me.i=Q,N&&ee.skipped_effects.delete(me.e)):(me=Bd(C?f:null,q,ie,Y,Q,s,e,i),C&&(me.o=!0,q===null?v=me:q.next=me,q=me),h.set(Y,me)),W.add(Y)}if(B===0&&l&&!x)if(C)x={fragment:null,effect:Gt(()=>l(f))};else{var ve=document.createDocumentFragment(),ge=zn();ve.append(ge),x={fragment:ve,effect:Gt(()=>l(ge))}}if(!C)if(N){for(const[Ce,Ge]of h)W.has(Ce)||ee.skipped_effects.add(Ge.e);ee.oncommit(T),ee.ondiscard(()=>{})}else T();y(D)}),U={effect:V,items:h,first:v};C=!1}function Kd(t,e,i,a,s){var l=(a&ud)!==0,f=e.length,h=t.items,v=t.first,m,E=null,_,w=[],x=[],D,L,C,T;if(l)for(T=0;T<f;T+=1)D=e[T],L=s(D,T),C=h.get(L),C.o&&(C.a?.measure(),(_??=new Set).add(C));for(T=0;T<f;T+=1){if(D=e[T],L=s(D,T),C=h.get(L),t.first??=C,!C.o){C.o=!0;var V=E?E.next:v;Dn(t,E,C),Dn(t,C,V),Zo(C,V,i),E=C,w=[],x=[],v=E.next;continue}if((C.e.f&sn)!==0&&(Vs(C.e),l&&(C.a?.unfix(),(_??=new Set).delete(C))),C!==v){if(m!==void 0&&m.has(C)){if(w.length<x.length){var U=x[0],B;E=U.prev;var W=w[0],ee=w[w.length-1];for(B=0;B<w.length;B+=1)Zo(w[B],U,i);for(B=0;B<x.length;B+=1)m.delete(x[B]);Dn(t,W.prev,ee.next),Dn(t,E,W),Dn(t,ee,U),v=U,E=ee,T-=1,w=[],x=[]}else m.delete(C),Zo(C,v,i),Dn(t,C.prev,C.next),Dn(t,C,E===null?t.first:E.next),Dn(t,E,C),E=C;continue}for(w=[],x=[];v!==null&&v.k!==L;)(v.e.f&sn)===0&&(m??=new Set).add(v),x.push(v),v=v.next;if(v===null)continue;C=v}w.push(C),E=C,v=C.next}if(v!==null||m!==void 0){for(var q=m===void 0?[]:Cs(m);v!==null;)(v.e.f&sn)===0&&q.push(v),v=v.next;var N=q.length;if(N>0){var Q=(a&pl)!==0&&f===0?i:null;if(l){for(T=0;T<N;T+=1)q[T].a?.measure();for(T=0;T<N;T+=1)q[T].a?.fix()}Rd(t,q,Q)}}l&&Br(()=>{if(_!==void 0)for(C of _)C.a?.apply()})}function Bd(t,e,i,a,s,l,f,h){var v=(f&hl)!==0,m=(f&ld)===0,E=v?m?Sl(i,!1,!1):Rr(i):i,_=(f&vl)===0?s:Rr(s);le&&v&&(E.trace=()=>{var D=typeof _=="number"?s:_.v;h()[D]});var w={i:_,v:E,k:a,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var x=document.createDocumentFragment();x.append(t=zn())}return w.e=Gt(()=>l(t,E,_,h)),e!==null&&(e.next=w),w}finally{}}function Zo(t,e,i){for(var a=t.next?t.next.e.nodes_start:i,s=e?e.e.nodes_start:i,l=t.e.nodes_start;l!==null&&l!==a;){var f=qi(l);s.before(l),l=f}}function Dn(t,e,i){e===null?(t.first=i,t.effect.first=i&&i.e):(e.e===t.effect.last&&i!==null&&(t.effect.last=i.e),e.e.next&&(e.e.next.prev=null),e.next=i,e.e.next=i&&i.e),i===null?t.effect.last=e&&e.e:(i.e===t.effect.last&&e===null&&(t.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=e,i.e.prev=e&&e.e)}function Tl(t,e,i,a){const s=Wi()?lo:Ks;if(i.length===0&&t.length===0){a(e.map(s));return}var l=rt,f=Je,h=Nd();function v(){Promise.all(i.map(m=>jd(m))).then(m=>{h();try{a([...e.map(s),...m])}catch(E){(f.f&jn)===0&&ui(E,f)}l?.deactivate(),Ha()}).catch(m=>{ui(m,f)})}t.length>0?Promise.all(t).then(()=>{h();try{return v()}finally{l?.deactivate(),Ha()}}):v()}function Nd(){var t=Je,e=Ze,i=mt,a=rt;if(le)var s=si;return function(f=!0){_n(t),Qt(e),oi(i),f&&a?.activate(),le&&ja(s)}}function Ha(){_n(null),Qt(null),oi(null),le&&ja(null)}const Fd=new Set;function lo(t){var e=Ot|Zt,i=Ze!==null&&(Ze.f&Ot)!==0?Ze:null;return Je!==null&&(Je.f|=di),{ctx:mt,deps:null,effects:null,equals:ml,f:e,fn:t,reactions:null,rv:0,v:Lt,wv:0,parent:i??Je,ac:null}}function jd(t,e){let i=Je;i===null&&Xf();var a=i.b,s=void 0,l=Rr(Lt),f=!Ze,h=new Map;return nh(()=>{var v=ul();s=v.promise;try{Promise.resolve(t()).then(v.resolve,v.reject).then(()=>{m===rt&&m.committed&&m.deactivate(),Ha()})}catch(w){v.reject(w),Ha()}var m=rt;if(f){var E=!a.is_pending();a.update_pending_count(1),m.increment(E),h.get(m)?.reject(Zr),h.delete(m),h.set(m,v)}const _=(w,x=void 0)=>{if(m.activate(),x)x!==Zr&&(l.f|=sr,ci(l,x));else{(l.f&sr)!==0&&(l.f^=sr),ci(l,w);for(const[D,L]of h){if(h.delete(D),D===m)break;L.reject(Zr)}}f&&(a.update_pending_count(-1),m.decrement(E))};v.promise.then(_,w=>_(null,w||"unknown"))}),fo(()=>{for(const v of h.values())v.reject(Zr)}),le&&(l.f|=so),new Promise(v=>{function m(E){function _(){E===s?v(l):m(s)}E.then(_,_)}m(s)})}function wt(t){const e=lo(t);return Hl(e),e}function Ks(t){const e=lo(t);return e.equals=gl,e}function gs(t){var e=t.effects;if(e!==null){t.effects=null;for(var i=0;i<e.length;i+=1)Pt(e[i])}}let Jo=[];function Hd(t){for(var e=t.parent;e!==null;){if((e.f&Ot)===0)return(e.f&jn)===0?e:null;e=e.parent}return null}function Bs(t){var e,i=Je;if(_n(Hd(t)),le){let a=li;Mu(new Set);try{Jo.includes(t)&&Qf(),Jo.push(t),t.f&=~dr,gs(t),e=ys(t)}finally{_n(i),Mu(a),Jo.pop()}}else try{t.f&=~dr,gs(t),e=ys(t)}finally{_n(i)}return e}function Al(t){var e=Bs(t);if(t.equals(e)||(rt?.is_fork||(t.v=e),t.wv=zl()),!Nr)if(hn!==null)(Ui()||rt?.is_fork)&&hn.set(t,e);else{var i=(t.f&wn)===0?qn:jt;Ht(t,i)}}let li=new Set;const ur=new Map;function Mu(t){li=t}let Ns=!1;function Ud(){Ns=!0}function Rr(t,e){var i={f:0,v:t,reactions:null,equals:ml,rv:0,wv:0};return i}function _e(t,e){const i=Rr(t);return Hl(i),i}function Sl(t,e=!1,i=!0){const a=Rr(t);return e||(a.equals=gl),hi&&i&&mt!==null&&mt.l!==null&&(mt.l.s??=[]).push(a),a}function K(t,e,i=!1){Ze!==null&&(!On||(Ze.f&Fa)!==0)&&Wi()&&(Ze.f&(Ot|Yn|so|Fa))!==0&&!Hn?.includes(t)&&od();let a=i?on(e):e;return le&&yl(a,t.label),ci(t,a)}function ci(t,e){if(!t.equals(e)){var i=t.v;Nr?ur.set(t,e):ur.set(t,i),t.v=e;var a=Pn.ensure();if(a.capture(t,i),le){if(Je!==null){t.updated??=new Map;const s=(t.updated.get("")?.count??0)+1;if(t.updated.set("",{error:null,count:s}),s>5){const l=Td("updated at");if(l!==null){let f=t.updated.get(l.stack);f||(f={error:l,count:0},t.updated.set(l.stack,f)),f.count++}}}Je!==null&&(t.set_during_effect=!0)}(t.f&Ot)!==0&&((t.f&Zt)!==0&&Bs(t),Ht(t,(t.f&wn)!==0?jt:qn)),t.wv=zl(),Dl(t,Zt),Wi()&&Je!==null&&(Je.f&jt)!==0&&(Je.f&(Wn|Kr))===0&&(cn===null?ah([t]):cn.push(t)),!a.is_fork&&li.size>0&&!Ns&&Il()}return e}function Il(){Ns=!1;var t=lr;za(!0);const e=Array.from(li);try{for(const i of e)(i.f&jt)!==0&&Ht(i,qn),Gi(i)&&Vi(i)}finally{za(t)}li.clear()}function Ri(t){K(t,t.v+1)}function Dl(t,e){var i=t.reactions;if(i!==null)for(var a=Wi(),s=i.length,l=0;l<s;l++){var f=i[l],h=f.f;if(!(!a&&f===Je)){if(le&&(h&Fa)!==0){li.add(f);continue}var v=(h&Zt)===0;if(v&&Ht(f,e),(h&Ot)!==0){var m=f;hn?.delete(m),(h&dr)===0&&(h&wn&&(f.f|=dr),Dl(m,qn))}else v&&((h&Yn)!==0&&Fn!==null&&Fn.add(f),Mr(f))}}}const zd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function on(t){if(typeof t!="object"||t===null||Pr in t)return t;const e=sl(t);if(e!==zf&&e!==Vf)return t;var i=new Map,a=Ds(t),s=_e(0),l=Or,f=E=>{if(Or===l)return E();var _=Ze,w=Or;Qt(null),Nu(l);var x=E();return Qt(_),Nu(w),x};a&&(i.set("length",_e(t.length)),le&&(t=Wd(t)));var h="";let v=!1;function m(E){if(!v){v=!0,h=E,In(s,`${h} version`);for(const[_,w]of i)In(w,kr(h,_));v=!1}}return new Proxy(t,{defineProperty(E,_,w){(!("value"in w)||w.configurable===!1||w.enumerable===!1||w.writable===!1)&&id();var x=i.get(_);return x===void 0?x=f(()=>{var D=_e(w.value);return i.set(_,D),le&&typeof _=="string"&&In(D,kr(h,_)),D}):K(x,w.value,!0),!0},deleteProperty(E,_){var w=i.get(_);if(w===void 0){if(_ in E){const x=f(()=>_e(Lt));i.set(_,x),Ri(s),le&&In(x,kr(h,_))}}else K(w,Lt),Ri(s);return!0},get(E,_,w){if(_===Pr)return t;if(le&&_===fl)return m;var x=i.get(_),D=_ in E;if(x===void 0&&(!D||Lr(E,_)?.writable)&&(x=f(()=>{var C=on(D?E[_]:Lt),T=_e(C);return le&&In(T,kr(h,_)),T}),i.set(_,x)),x!==void 0){var L=y(x);return L===Lt?void 0:L}return Reflect.get(E,_,w)},getOwnPropertyDescriptor(E,_){var w=Reflect.getOwnPropertyDescriptor(E,_);if(w&&"value"in w){var x=i.get(_);x&&(w.value=y(x))}else if(w===void 0){var D=i.get(_),L=D?.v;if(D!==void 0&&L!==Lt)return{enumerable:!0,configurable:!0,value:L,writable:!0}}return w},has(E,_){if(_===Pr)return!0;var w=i.get(_),x=w!==void 0&&w.v!==Lt||Reflect.has(E,_);if(w!==void 0||Je!==null&&(!x||Lr(E,_)?.writable)){w===void 0&&(w=f(()=>{var L=x?on(E[_]):Lt,C=_e(L);return le&&In(C,kr(h,_)),C}),i.set(_,w));var D=y(w);if(D===Lt)return!1}return x},set(E,_,w,x){var D=i.get(_),L=_ in E;if(a&&_==="length")for(var C=w;C<D.v;C+=1){var T=i.get(C+"");T!==void 0?K(T,Lt):C in E&&(T=f(()=>_e(Lt)),i.set(C+"",T),le&&In(T,kr(h,C)))}if(D===void 0)(!L||Lr(E,_)?.writable)&&(D=f(()=>_e(void 0)),le&&In(D,kr(h,_)),K(D,on(w)),i.set(_,D));else{L=D.v!==Lt;var V=f(()=>on(w));K(D,V)}var U=Reflect.getOwnPropertyDescriptor(E,_);if(U?.set&&U.set.call(x,w),!L){if(a&&typeof _=="string"){var B=i.get("length"),W=Number(_);Number.isInteger(W)&&W>=B.v&&K(B,W+1)}Ri(s)}return!0},ownKeys(E){y(s);var _=Reflect.ownKeys(E).filter(D=>{var L=i.get(D);return L===void 0||L.v!==Lt});for(var[w,x]of i)x.v!==Lt&&!(w in E)&&_.push(w);return _},setPrototypeOf(){ad()}})}function kr(t,e){return typeof e=="symbol"?`${t}[Symbol(${e.description??""})]`:zd.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function Ki(t){try{if(t!==null&&typeof t=="object"&&Pr in t)return t[Pr]}catch{}return t}function Vd(t,e){return Object.is(Ki(t),Ki(e))}const Yd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Wd(t){return new Proxy(t,{get(e,i,a){var s=Reflect.get(e,i,a);return Yd.has(i)?function(...l){Ud();var f=s.apply(this,l);return Il(),f}:s}})}function qd(){const t=Array.prototype,e=Array.__svelte_cleanup;e&&e();const{indexOf:i,lastIndexOf:a,includes:s}=t;t.indexOf=function(l,f){const h=i.call(this,l,f);if(h===-1){for(let v=f??0;v<this.length;v+=1)if(Ki(this[v])===l){Qo("array.indexOf(...)");break}}return h},t.lastIndexOf=function(l,f){const h=a.call(this,l,f??this.length-1);if(h===-1){for(let v=0;v<=(f??this.length-1);v+=1)if(Ki(this[v])===l){Qo("array.lastIndexOf(...)");break}}return h},t.includes=function(l,f){const h=s.call(this,l,f);if(!h){for(let v=0;v<this.length;v+=1)if(Ki(this[v])===l){Qo("array.includes(...)");break}}return h},Array.__svelte_cleanup=()=>{t.indexOf=i,t.lastIndexOf=a,t.includes=s}}var Ru,Fs,Cl,Ll;function Gd(){if(Ru===void 0){Ru=window,Fs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,i=Text.prototype;Cl=Lr(e,"firstChild").get,Ll=Lr(e,"nextSibling").get,Cu(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Cu(i)&&(i.__t=void 0),le&&(t.__svelte_meta=null,qd())}}function zn(t=""){return document.createTextNode(t)}function Ua(t){return Cl.call(t)}function qi(t){return Ll.call(t)}function Ae(t,e){return Ua(t)}function Ft(t,e=!1){{var i=Ua(t);return i instanceof Comment&&i.data===""?qi(i):i}}function Qe(t,e=1,i=!1){let a=t;for(;e--;)a=qi(a);return a}function Xd(t){t.textContent=""}function Pl(){return!1}function Qd(t,e){if(e){const i=document.body;t.autofocus=!0,Br(()=>{document.activeElement===i&&t.focus()})}}let Ku=!1;function Zd(){Ku||(Ku=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function co(t){var e=Ze,i=Je;Qt(null),_n(null);try{return t()}finally{Qt(e),_n(i)}}function Jd(t,e,i,a=i){t.addEventListener(e,()=>co(i));const s=t.__on_r;s?t.__on_r=()=>{s(),a(!0)}:t.__on_r=()=>a(!0),Zd()}function $d(t){Je===null&&(Ze===null&&$f(t),Jf()),Nr&&Zf(t)}function eh(t,e){var i=e.last;i===null?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}function Kn(t,e,i){var a=Je;if(le)for(;a!==null&&(a.f&Fa)!==0;)a=a.parent;a!==null&&(a.f&sn)!==0&&(t|=sn);var s={ctx:mt,deps:null,nodes_start:null,nodes_end:null,f:t|Zt|wn,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(le&&(s.component_function=Yi),i)try{Vi(s),s.f|=Os}catch(h){throw Pt(s),h}else e!==null&&Mr(s);var l=s;if(i&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&di)===0&&(l=l.first,(t&Yn)!==0&&(t&ai)!==0&&l!==null&&(l.f|=ai)),l!==null&&(l.parent=a,a!==null&&eh(l,a),Ze!==null&&(Ze.f&Ot)!==0&&(t&Kr)===0)){var f=Ze;(f.effects??=[]).push(l)}return s}function Ui(){return Ze!==null&&!On}function fo(t){const e=Kn(Ps,null,!1);return Ht(e,jt),e.teardown=t,e}function $e(t){$d("$effect"),le&&fr(t,"name",{value:"$effect"});var e=Je.f,i=!Ze&&(e&Wn)!==0&&(e&Os)===0;if(i){var a=mt;(a.e??=[]).push(t)}else return Ol(t)}function Ol(t){return Kn(Ls|Wf,t,!1)}function th(t){Pn.ensure();const e=Kn(Kr|di,t,!0);return(i={})=>new Promise(a=>{i.outro?ei(e,()=>{Pt(e),a(void 0)}):(Pt(e),a(void 0))})}function js(t){return Kn(Ls,t,!1)}function nh(t){return Kn(so|di,t,!0)}function Hs(t,e=0){return Kn(Ps|e,t,!0)}function St(t,e=[],i=[],a=[]){Tl(a,e,i,s=>{Kn(Ps,()=>t(...s.map(y)),!0)})}function Us(t,e=0){var i=Kn(Yn|e,t,!0);return le&&(i.dev_stack=si),i}function Ml(t,e=0){var i=Kn(ll|e,t,!0);return le&&(i.dev_stack=si),i}function Gt(t){return Kn(Wn|di,t,!0)}function Rl(t){var e=t.teardown;if(e!==null){const i=Nr,a=Ze;Bu(!0),Qt(null);try{e.call(null)}finally{Bu(i),Qt(a)}}}function Kl(t,e=!1){var i=t.first;for(t.first=t.last=null;i!==null;){const s=i.ac;s!==null&&co(()=>{s.abort(Zr)});var a=i.next;(i.f&Kr)!==0?i.parent=null:Pt(i,e),i=a}}function rh(t){for(var e=t.first;e!==null;){var i=e.next;(e.f&Wn)===0&&Pt(e),e=i}}function Pt(t,e=!0){var i=!1;(e||(t.f&cl)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ih(t.nodes_start,t.nodes_end),i=!0),Kl(t,e&&!i),Va(t,0),Ht(t,jn);var a=t.transitions;if(a!==null)for(const l of a)l.stop();Rl(t);var s=t.parent;s!==null&&s.first!==null&&Bl(t),le&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ih(t,e){for(;t!==null;){var i=t===e?null:qi(t);t.remove(),t=i}}function Bl(t){var e=t.parent,i=t.prev,a=t.next;i!==null&&(i.next=a),a!==null&&(a.prev=i),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=i))}function ei(t,e,i=!0){var a=[];zs(t,a,!0),Nl(a,()=>{i&&Pt(t),e&&e()})}function Nl(t,e){var i=t.length;if(i>0){var a=()=>--i||e();for(var s of t)s.out(a)}else e()}function zs(t,e,i){if((t.f&sn)===0){if(t.f^=sn,t.transitions!==null)for(const f of t.transitions)(f.is_global||i)&&e.push(f);for(var a=t.first;a!==null;){var s=a.next,l=(a.f&ai)!==0||(a.f&Wn)!==0&&(t.f&Yn)!==0;zs(a,e,l?i:!1),a=s}}}function Vs(t){Fl(t,!0)}function Fl(t,e){if((t.f&sn)!==0){t.f^=sn,(t.f&jt)===0&&(Ht(t,Zt),Mr(t));for(var i=t.first;i!==null;){var a=i.next,s=(i.f&ai)!==0||(i.f&Wn)!==0;Fl(i,s?e:!1),i=a}if(t.transitions!==null)for(const l of t.transitions)(l.is_global||e)&&l.in()}}function jl(t,e){for(var i=t.nodes_start,a=t.nodes_end;i!==null;){var s=i===a?null:qi(i);e.append(i),i=s}}let lr=!1;function za(t){lr=t}let Nr=!1;function Bu(t){Nr=t}let Ze=null,On=!1;function Qt(t){Ze=t}let Je=null;function _n(t){Je=t}let Hn=null;function Hl(t){Ze!==null&&(Hn===null?Hn=[t]:Hn.push(t))}let Vt=null,rn=0,cn=null;function ah(t){cn=t}let Ul=1,zi=0,Or=zi;function Nu(t){Or=t}function zl(){return++Ul}function Gi(t){var e=t.f;if((e&Zt)!==0)return!0;if(e&Ot&&(t.f&=~dr),(e&qn)!==0){var i=t.deps;if(i!==null)for(var a=i.length,s=0;s<a;s++){var l=i[s];if(Gi(l)&&Al(l),l.wv>t.wv)return!0}(e&wn)!==0&&hn===null&&Ht(t,jt)}return!1}function Vl(t,e,i=!0){var a=t.reactions;if(a!==null&&!Hn?.includes(t))for(var s=0;s<a.length;s++){var l=a[s];(l.f&Ot)!==0?Vl(l,e,!1):e===l&&(i?Ht(l,Zt):(l.f&jt)!==0&&Ht(l,qn),Mr(l))}}function ys(t){var e=Vt,i=rn,a=cn,s=Ze,l=Hn,f=mt,h=On,v=Or,m=t.f;Vt=null,rn=0,cn=null,Ze=(m&(Wn|Kr))===0?t:null,Hn=null,oi(t.ctx),On=!1,Or=++zi,t.ac!==null&&(co(()=>{t.ac.abort(Zr)}),t.ac=null);try{t.f|=vs;var E=t.fn,_=E(),w=t.deps;if(Vt!==null){var x;if(Va(t,rn),w!==null&&rn>0)for(w.length=rn+Vt.length,x=0;x<Vt.length;x++)w[rn+x]=Vt[x];else t.deps=w=Vt;if(lr&&Ui()&&(t.f&wn)!==0)for(x=rn;x<w.length;x++)(w[x].reactions??=[]).push(t)}else w!==null&&rn<w.length&&(Va(t,rn),w.length=rn);if(Wi()&&cn!==null&&!On&&w!==null&&(t.f&(Ot|qn|Zt))===0)for(x=0;x<cn.length;x++)Vl(cn[x],t);return s!==null&&s!==t&&(zi++,cn!==null&&(a===null?a=cn:a.push(...cn))),(t.f&sr)!==0&&(t.f^=sr),_}catch(D){return _l(D)}finally{t.f^=vs,Vt=e,rn=i,cn=a,Ze=s,Hn=l,oi(f),On=h,Or=v}}function oh(t,e){let i=e.reactions;if(i!==null){var a=Hf.call(i,t);if(a!==-1){var s=i.length-1;s===0?i=e.reactions=null:(i[a]=i[s],i.pop())}}i===null&&(e.f&Ot)!==0&&(Vt===null||!Vt.includes(e))&&(Ht(e,qn),(e.f&wn)!==0&&(e.f^=wn,e.f&=~dr),gs(e),Va(e,0))}function Va(t,e){var i=t.deps;if(i!==null)for(var a=e;a<i.length;a++)oh(t,i[a])}function Vi(t){var e=t.f;if((e&jn)===0){Ht(t,jt);var i=Je,a=lr;if(Je=t,lr=!0,le){var s=Yi;Pu(t.component_function);var l=si;ja(t.dev_stack??si)}try{(e&(Yn|ll))!==0?rh(t):Kl(t),Rl(t);var f=ys(t);t.teardown=typeof f=="function"?f:null,t.wv=Ul;var h;le&&xd&&(t.f&Zt)!==0&&t.deps}finally{lr=a,Je=i,le&&(Pu(s),ja(l))}}}async function lt(){await Promise.resolve(),Dd()}function y(t){var e=t.f,i=(e&Ot)!==0;if(Ze!==null&&!On){var a=Je!==null&&(Je.f&jn)!==0;if(!a&&!Hn?.includes(t)){var s=Ze.deps;if((Ze.f&vs)!==0)t.rv<zi&&(t.rv=zi,Vt===null&&s!==null&&s[rn]===t?rn++:Vt===null?Vt=[t]:Vt.includes(t)||Vt.push(t));else{(Ze.deps??=[]).push(t);var l=t.reactions;l===null?t.reactions=[Ze]:l.includes(Ze)||l.push(Ze)}}}if(le&&Fd.delete(t),Nr){if(ur.has(t))return ur.get(t);if(i){var f=t,h=f.v;return((f.f&jt)===0&&f.reactions!==null||Wl(f))&&(h=Bs(f)),ur.set(f,h),h}}else i&&(!hn?.has(t)||rt?.is_fork&&!Ui())&&(f=t,Gi(f)&&Al(f),lr&&Ui()&&(f.f&wn)===0&&Yl(f));if(hn?.has(t))return hn.get(t);if((t.f&sr)!==0)throw t.v;return t.v}function Yl(t){if(t.deps!==null){t.f^=wn;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Ot)!==0&&(e.f&wn)===0&&Yl(e)}}function Wl(t){if(t.v===Lt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(ur.has(e)||(e.f&Ot)!==0&&Wl(e))return!0;return!1}function Fr(t){var e=On;try{return On=!0,t()}finally{On=e}}const sh=-7169;function Ht(t,e){t.f=t.f&sh|e}function uh(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const lh=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ch(t){return lh.includes(t)}const fh={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function dh(t){return t=t.toLowerCase(),fh[t]??t}const hh=["touchstart","touchmove"];function vh(t){return hh.includes(t)}const ql=new Set,bs=new Set;function Gl(t,e,i,a={}){function s(l){if(a.capture||Ci.call(e,l),!l.cancelBubble)return co(()=>i?.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Br(()=>{e.addEventListener(t,s,a)}):e.addEventListener(t,s,a),s}function ti(t,e,i,a,s){var l={capture:a,passive:s},f=Gl(t,e,i,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&fo(()=>{e.removeEventListener(t,f,l)})}function vi(t){for(var e=0;e<t.length;e++)ql.add(t[e]);for(var i of bs)i(t)}let Fu=null;function Ci(t){var e=this,i=e.ownerDocument,a=t.type,s=t.composedPath?.()||[],l=s[0]||t.target;Fu=t;var f=0,h=Fu===t&&t.__root;if(h){var v=s.indexOf(h);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var m=s.indexOf(e);if(m===-1)return;v<=m&&(f=v)}if(l=s[f]||t.target,l!==e){fr(t,"currentTarget",{configurable:!0,get(){return l||i}});var E=Ze,_=Je;Qt(null),_n(null);try{for(var w,x=[];l!==null;){var D=l.assignedSlot||l.parentNode||l.host||null;try{var L=l["__"+a];L!=null&&(!l.disabled||t.target===l)&&L.call(l,t)}catch(C){w?x.push(C):w=C}if(t.cancelBubble||D===e||D===null)break;l=D}if(w){for(let C of x)queueMicrotask(()=>{throw C});throw w}}finally{t.__root=e,delete t.currentTarget,Qt(E),_n(_)}}}function ph(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Ya(t,e){var i=Je;i.nodes_start===null&&(i.nodes_start=t,i.nodes_end=e)}function Re(t,e){var i=(e&pd)!==0,a=(e&md)!==0,s,l=!t.startsWith("<!>");return()=>{s===void 0&&(s=ph(l?t:"<!>"+t),i||(s=Ua(s)));var f=a||Fs?document.importNode(s,!0):s.cloneNode(!0);if(i){var h=Ua(f),v=f.lastChild;Ya(h,v)}else Ya(f,f);return f}}function Cn(t=""){{var e=zn(t+"");return Ya(e,e),e}}function cr(){var t=document.createDocumentFragment(),e=document.createComment(""),i=zn();return t.append(e,i),Ya(e,i),t}function ce(t,e){t!==null&&t.before(e)}function Dr(t,e){var i=e==null?"":typeof e=="object"?e+"":e;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=i+"")}function mh(t,e){return gh(t,e)}const qr=new Map;function gh(t,{target:e,anchor:i,props:a={},events:s,context:l,intro:f=!0}){Gd();var h=new Set,v=_=>{for(var w=0;w<_.length;w++){var x=_[w];if(!h.has(x)){h.add(x);var D=vh(x);e.addEventListener(x,Ci,{passive:D});var L=qr.get(x);L===void 0?(document.addEventListener(x,Ci,{passive:D}),qr.set(x,1)):qr.set(x,L+1)}}};v(Cs(ql)),bs.add(v);var m=void 0,E=th(()=>{var _=i??e.appendChild(zn());return Od(_,{pending:()=>{}},w=>{if(l){vr({});var x=mt;x.c=l}s&&(a.$$events=s),m=t(w,a)||{},l&&pr()}),()=>{for(var w of h){e.removeEventListener(w,Ci);var x=qr.get(w);--x===0?(document.removeEventListener(w,Ci),qr.delete(w)):qr.set(w,x)}bs.delete(v),_!==i&&_.parentNode?.removeChild(_)}});return yh.set(m,E),m}let yh=new WeakMap;class bh{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(e,i=!0){this.anchor=e,this.#u=i}#a=()=>{var e=rt;if(this.#e.has(e)){var i=this.#e.get(e),a=this.#t.get(i);if(a)Vs(a),this.#n.delete(i);else{var s=this.#r.get(i);s&&(this.#t.set(i,s.effect),this.#r.delete(i),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[l,f]of this.#e){if(this.#e.delete(l),l===e)break;const h=this.#r.get(f);h&&(Pt(h.effect),this.#r.delete(f))}for(const[l,f]of this.#t){if(l===i||this.#n.has(l))continue;const h=()=>{if(Array.from(this.#e.values()).includes(l)){var m=document.createDocumentFragment();jl(f,m),m.append(zn()),this.#r.set(l,{effect:f,fragment:m})}else Pt(f);this.#n.delete(l),this.#t.delete(l)};this.#u||!a?(this.#n.add(l),ei(f,h,!1)):h()}}};#i=e=>{this.#e.delete(e);const i=Array.from(this.#e.values());for(const[a,s]of this.#r)i.includes(a)||(Pt(s.effect),this.#r.delete(a))};ensure(e,i){var a=rt,s=Pl();if(i&&!this.#t.has(e)&&!this.#r.has(e))if(s){var l=document.createDocumentFragment(),f=zn();l.append(f),this.#r.set(e,{effect:Gt(()=>i(f)),fragment:l})}else this.#t.set(e,Gt(()=>i(this.anchor)));if(this.#e.set(a,e),s){for(const[h,v]of this.#t)h===e?a.skipped_effects.delete(v):a.skipped_effects.add(v);for(const[h,v]of this.#r)h===e?a.skipped_effects.delete(v.effect):a.skipped_effects.add(v.effect);a.oncommit(this.#a),a.ondiscard(this.#i)}else this.#a()}}function ht(t,e,i=!1){var a=new bh(t),s=i?ai:0;function l(f,h){a.ensure(f,h)}Us(()=>{var f=!1;e((h,v=!0)=>{f=!0,l(v,h)}),f||l(!1,null)},s)}function _h(t,e,i,a,s){var l=e.$$slots?.[i],f=!1;l===!0&&(l=e.children,f=!0),l===void 0||l(t,f?()=>a:a)}function wh(t,e){var i=void 0,a;Ml(()=>{i!==(i=e())&&(a&&(Pt(a),a=null),i&&(a=Gt(()=>{js(()=>i(t))})))})}function Xl(t){var e,i,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=Xl(t[e]))&&(a&&(a+=" "),a+=i)}else for(i in t)t[i]&&(a&&(a+=" "),a+=i);return a}function Eh(){for(var t,e,i=0,a="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=Xl(t))&&(a&&(a+=" "),a+=e);return a}function Ql(t){return typeof t=="object"?Eh(t):t??""}const ju=[...` 	
\r\fÂ \v\uFEFF`];function xh(t,e,i){var a=t==null?"":""+t;if(e&&(a=a?a+" "+e:e),i){for(var s in i)if(i[s])a=a?a+" "+s:s;else if(a.length)for(var l=s.length,f=0;(f=a.indexOf(s,f))>=0;){var h=f+l;(f===0||ju.includes(a[f-1]))&&(h===a.length||ju.includes(a[h]))?a=(f===0?"":a.substring(0,f))+a.substring(h+1):f=h}}return a===""?null:a}function Hu(t,e=!1){var i=e?" !important;":";",a="";for(var s in t){var l=t[s];l!=null&&l!==""&&(a+=" "+s+": "+l+i)}return a}function $o(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function kh(t,e){if(e){var i="",a,s;if(Array.isArray(e)?(a=e[0],s=e[1]):a=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,f=0,h=!1,v=[];a&&v.push(...Object.keys(a).map($o)),s&&v.push(...Object.keys(s).map($o));var m=0,E=-1;const L=t.length;for(var _=0;_<L;_++){var w=t[_];if(h?w==="/"&&t[_-1]==="*"&&(h=!1):l?l===w&&(l=!1):w==="/"&&t[_+1]==="*"?h=!0:w==='"'||w==="'"?l=w:w==="("?f++:w===")"&&f--,!h&&l===!1&&f===0){if(w===":"&&E===-1)E=_;else if(w===";"||_===L-1){if(E!==-1){var x=$o(t.substring(m,E).trim());if(!v.includes(x)){w!==";"&&_++;var D=t.substring(m,_).trim();i+=" "+D+";"}}m=_+1,E=-1}}}}return a&&(i+=Hu(a)),s&&(i+=Hu(s,!0)),i=i.trim(),i===""?null:i}return t==null?null:String(t)}function Wa(t,e,i,a,s,l){var f=t.__className;if(f!==i||f===void 0){var h=xh(i,a,l);h==null?t.removeAttribute("class"):e?t.className=h:t.setAttribute("class",h),t.__className=i}else if(l&&s!==l)for(var v in l){var m=!!l[v];(s==null||m!==!!s[v])&&t.classList.toggle(v,m)}return l}function es(t,e={},i,a){for(var s in i){var l=i[s];e[s]!==l&&(i[s]==null?t.style.removeProperty(s):t.style.setProperty(s,l,a))}}function hr(t,e,i,a){var s=t.__style;if(s!==e){var l=kh(e,a);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}else a&&(Array.isArray(a)?(es(t,i?.[0],a[0]),es(t,i?.[1],a[1],"important")):es(t,i,a));return a}function _s(t,e,i=!1){if(t.multiple){if(e==null)return;if(!Ds(e))return _d();for(var a of t.options)a.selected=e.includes(Uu(a));return}for(a of t.options){var s=Uu(a);if(Vd(s,e)){a.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function Th(t){var e=new MutationObserver(()=>{_s(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),fo(()=>{e.disconnect()})}function Uu(t){return"__value"in t?t.__value:t.value}const Ii=Symbol("class"),Di=Symbol("style"),Zl=Symbol("is custom element"),Jl=Symbol("is html");function Ah(t,e){var i=ho(t);i.value===(i.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Sh(t,e){var i=ho(t);i.checked!==(i.checked=e??void 0)&&(t.checked=e)}function Ih(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function At(t,e,i,a){var s=ho(t);s[e]!==(s[e]=i)&&(e==="loading"&&(t[Gf]=i),i==null?t.removeAttribute(e):typeof i!="string"&&$l(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function Dh(t,e,i,a,s=!1,l=!1){var f=ho(t),h=f[Zl],v=!f[Jl],m=e||{},E=t.tagName==="OPTION";for(var _ in e)_ in i||(i[_]=null);i.class?i.class=Ql(i.class):i[Ii]&&(i.class=null),i[Di]&&(i.style??=null);var w=$l(t);for(const B in i){let W=i[B];if(E&&B==="value"&&W==null){t.value=t.__value="",m[B]=W;continue}if(B==="class"){var x=t.namespaceURI==="http://www.w3.org/1999/xhtml";Wa(t,x,W,a,e?.[Ii],i[Ii]),m[B]=W,m[Ii]=i[Ii];continue}if(B==="style"){hr(t,W,e?.[Di],i[Di]),m[B]=W,m[Di]=i[Di];continue}var D=m[B];if(!(W===D&&!(W===void 0&&t.hasAttribute(B)))){m[B]=W;var L=B[0]+B[1];if(L!=="$$")if(L==="on"){const ee={},q="$$"+B;let N=B.slice(2);var C=ch(N);if(uh(N)&&(N=N.slice(0,-7),ee.capture=!0),!C&&D){if(W!=null)continue;t.removeEventListener(N,m[q],ee),m[q]=null}if(W!=null)if(C)t[`__${N}`]=W,vi([N]);else{let Q=function(ie){m[B].call(this,ie)};var U=Q;m[q]=Gl(N,t,Q,ee)}else C&&(t[`__${N}`]=void 0)}else if(B==="style")At(t,B,W);else if(B==="autofocus")Qd(t,!!W);else if(!h&&(B==="__value"||B==="value"&&W!=null))t.value=t.__value=W;else if(B==="selected"&&E)Ih(t,W);else{var T=B;v||(T=dh(T));var V=T==="defaultValue"||T==="defaultChecked";if(W==null&&!h&&!V)if(f[B]=null,T==="value"||T==="checked"){let ee=t;const q=e===void 0;if(T==="value"){let N=ee.defaultValue;ee.removeAttribute(T),ee.defaultValue=N,ee.value=ee.__value=q?N:null}else{let N=ee.defaultChecked;ee.removeAttribute(T),ee.defaultChecked=N,ee.checked=q?N:!1}}else t.removeAttribute(B);else V||w.includes(T)&&(h||typeof W!="string")?(t[T]=W,T in f&&(f[T]=Lt)):typeof W!="function"&&At(t,T,W)}}}return m}function Ch(t,e,i=[],a=[],s=[],l,f=!1,h=!1){Tl(s,i,a,v=>{var m=void 0,E={},_=t.nodeName==="SELECT",w=!1;if(Ml(()=>{var D=e(...v.map(y)),L=Dh(t,m,D,l,f,h);w&&_&&"value"in D&&_s(t,D.value);for(let T of Object.getOwnPropertySymbols(E))D[T]||Pt(E[T]);for(let T of Object.getOwnPropertySymbols(D)){var C=D[T];T.description===bd&&(!m||C!==m[T])&&(E[T]&&Pt(E[T]),E[T]=Gt(()=>wh(t,()=>C))),L[T]=C}m=L}),_){var x=t;js(()=>{_s(x,m.value,!0),Th(x)})}w=!0})}function ho(t){return t.__attributes??={[Zl]:t.nodeName.includes("-"),[Jl]:t.namespaceURI===yd}}var zu=new Map;function $l(t){var e=t.getAttribute("is")||t.nodeName,i=zu.get(e);if(i)return i;zu.set(e,i=[]);for(var a,s=t,l=Element.prototype;l!==s;){a=Uf(s);for(var f in a)a[f].set&&i.push(f);s=sl(s)}return i}function qa(t,e,i=e){var a=new WeakSet;Jd(t,"input",async s=>{le&&t.type==="checkbox"&&Lu();var l=s?t.defaultValue:t.value;if(l=ts(t)?ns(l):l,i(l),rt!==null&&a.add(rt),await lt(),l!==(l=e())){var f=t.selectionStart,h=t.selectionEnd,v=t.value.length;if(t.value=l??"",h!==null){var m=t.value.length;f===h&&h===v&&m>v?(t.selectionStart=m,t.selectionEnd=m):(t.selectionStart=f,t.selectionEnd=Math.min(h,m))}}}),Fr(e)==null&&t.value&&(i(ts(t)?ns(t.value):t.value),rt!==null&&a.add(rt)),Hs(()=>{le&&t.type==="checkbox"&&Lu();var s=e();if(t===document.activeElement){var l=Ca??rt;if(a.has(l))return}ts(t)&&s===ns(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function ts(t){var e=t.type;return e==="number"||e==="range"}function ns(t){return t===""?null:+t}function Vu(t,e){return t===e||t?.[Pr]===e}function Bt(t={},e,i,a){return js(()=>{var s,l;return Hs(()=>{s=l,l=[],Fr(()=>{t!==i(...l)&&(e(t,...l),s&&Vu(i(...s),t)&&e(null,...s))})}),()=>{Br(()=>{l&&Vu(i(...l),t)&&e(null,...l)})}}),t}function ec(t,e,i){if(t==null)return e(void 0),Na;const a=Fr(()=>t.subscribe(e,i));return a.unsubscribe?()=>a.unsubscribe():a}function Lh(t){let e;return ec(t,i=>e=i)(),e}let ka=!1,ws=Symbol();function Ga(t,e,i){const a=i[e]??={store:null,source:Sl(void 0),unsubscribe:Na};if(le&&(a.source.label=e),a.store!==t&&!(ws in i))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=Na;else{var s=!0;a.unsubscribe=ec(t,l=>{s?a.source.v=l:K(a.source,l)}),s=!1}return t&&ws in i?Lh(t):y(a.source)}function Xa(t,e,i){let a=i[e];return a&&a.store!==t&&(a.unsubscribe(),a.unsubscribe=Na),t}function Ys(){const t={};function e(){fo(()=>{for(var i in t)t[i].unsubscribe();fr(t,ws,{enumerable:!1,value:!0})})}return[t,e]}function Ph(t){var e=ka;try{return ka=!1,[t(),ka]}finally{ka=e}}const Oh={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return le&&nd(`${t.name}.${String(e)}`),!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Mh(t,e,i){return new Proxy(le?{props:t,exclude:e,name:i,other:{},to_proxy:[]}:{props:t,exclude:e},Oh)}function Nt(t,e,i,a){var s=!hi||(i&fd)!==0,l=(i&hd)!==0,f=(i&vd)!==0,h=a,v=!0,m=()=>(v&&(v=!1,h=f?Fr(a):a),h),E;if(l){var _=Pr in t||qf in t;E=Lr(t,e)?.set??(_&&e in t?U=>t[e]=U:void 0)}var w,x=!1;l?[w,x]=Ph(()=>t[e]):w=t[e],w===void 0&&a!==void 0&&(w=m(),E&&(s&&td(e),E(w)));var D;if(s?D=()=>{var U=t[e];return U===void 0?m():(v=!0,U)}:D=()=>{var U=t[e];return U!==void 0&&(h=void 0),U===void 0?h:U},s&&(i&dd)===0)return D;if(E){var L=t.$$legacy;return(function(U,B){return arguments.length>0?((!s||!B||L||x)&&E(B?D():U),U):D()})}var C=!1,T=((i&cd)!==0?lo:Ks)(()=>(C=!1,D()));le&&(T.label=e),l&&y(T);var V=Je;return(function(U,B){if(arguments.length>0){const W=B?y(T):s&&l?on(U):U;return K(T,W),C=!0,h!==void 0&&(h=W),U}return Nr&&C||(V.f&jn)!==0?T.v:y(T)})}if(le){let t=function(e){if(!(e in globalThis)){let i;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(i!==void 0)return i;rd(e)},set:a=>{i=a}})}};var sm=t;t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function Rh(t){mt===null&&dl("onMount"),hi&&mt.l!==null?Kh(mt).m.push(t):$e(()=>{const e=Fr(t);if(typeof e=="function")return e})}function tc(t){mt===null&&dl("onDestroy"),Rh(()=>()=>Fr(t))}function Kh(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Bh="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Bh);kd();var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pa={exports:{}},jh=Pa.exports,Yu;function Hh(){return Yu||(Yu=1,(function(t,e){(function(i,a){t.exports=a()})(jh,(function(){var i=function(n,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(o[c]=u[c])},i(n,r)};function a(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");i(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}var s=function(){return s=Object.assign||function(r){for(var o,u=1,c=arguments.length;u<c;u++){o=arguments[u];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(r[d]=o[d])}return r},s.apply(this,arguments)};function l(n,r,o){for(var u=0,c=r.length,d;u<c;u++)(d||!(u in r))&&(d||(d=Array.prototype.slice.call(r,0,u)),d[u]=r[u]);return n.concat(d||Array.prototype.slice.call(r))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Nh,h=Object.keys,v=Array.isArray;typeof Promise<"u"&&!f.Promise&&(f.Promise=Promise);function m(n,r){return typeof r!="object"||h(r).forEach(function(o){n[o]=r[o]}),n}var E=Object.getPrototypeOf,_={}.hasOwnProperty;function w(n,r){return _.call(n,r)}function x(n,r){typeof r=="function"&&(r=r(E(n))),(typeof Reflect>"u"?h:Reflect.ownKeys)(r).forEach(function(o){L(n,o,r[o])})}var D=Object.defineProperty;function L(n,r,o,u){D(n,r,m(o&&w(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},u))}function C(n){return{from:function(r){return n.prototype=Object.create(r.prototype),L(n.prototype,"constructor",n),{extend:x.bind(null,n.prototype)}}}}var T=Object.getOwnPropertyDescriptor;function V(n,r){var o=T(n,r),u;return o||(u=E(n))&&V(u,r)}var U=[].slice;function B(n,r,o){return U.call(n,r,o)}function W(n,r){return r(n)}function ee(n){if(!n)throw new Error("Assertion Failed")}function q(n){f.setImmediate?setImmediate(n):setTimeout(n,0)}function N(n,r){return n.reduce(function(o,u,c){var d=r(u,c);return d&&(o[d[0]]=d[1]),o},{})}function Q(n,r){if(typeof r=="string"&&w(n,r))return n[r];if(!r)return n;if(typeof r!="string"){for(var o=[],u=0,c=r.length;u<c;++u){var d=Q(n,r[u]);o.push(d)}return o}var p=r.indexOf(".");if(p!==-1){var g=n[r.substr(0,p)];return g==null?void 0:Q(g,r.substr(p+1))}}function ie(n,r,o){if(!(!n||r===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof r!="string"&&"length"in r){ee(typeof o!="string"&&"length"in o);for(var u=0,c=r.length;u<c;++u)ie(n,r[u],o[u])}else{var d=r.indexOf(".");if(d!==-1){var p=r.substr(0,d),g=r.substr(d+1);if(g==="")o===void 0?v(n)&&!isNaN(parseInt(p))?n.splice(p,1):delete n[p]:n[p]=o;else{var b=n[p];(!b||!w(n,p))&&(b=n[p]={}),ie(b,g,o)}}else o===void 0?v(n)&&!isNaN(parseInt(r))?n.splice(r,1):delete n[r]:n[r]=o}}function Y(n,r){typeof r=="string"?ie(n,r,void 0):"length"in r&&[].map.call(r,function(o){ie(n,o,void 0)})}function me(n){var r={};for(var o in n)w(n,o)&&(r[o]=n[o]);return r}var ve=[].concat;function ge(n){return ve.apply([],n)}var Ce="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ge([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(r){return r+n+"Array"})}))).filter(function(n){return f[n]}),Ge=new Set(Ce.map(function(n){return f[n]}));function st(n){var r={};for(var o in n)if(w(n,o)){var u=n[o];r[o]=!u||typeof u!="object"||Ge.has(u.constructor)?u:st(u)}return r}function ae(n){for(var r in n)if(w(n,r))return!1;return!0}var je=null;function Ee(n){je=new WeakMap;var r=Ne(n);return je=null,r}function Ne(n){if(!n||typeof n!="object")return n;var r=je.get(n);if(r)return r;if(v(n)){r=[],je.set(n,r);for(var o=0,u=n.length;o<u;++o)r.push(Ne(n[o]))}else if(Ge.has(n.constructor))r=n;else{var c=E(n);r=c===Object.prototype?{}:Object.create(c),je.set(n,r);for(var d in n)w(n,d)&&(r[d]=Ne(n[d]))}return r}var Le={}.toString;function nt(n){return Le.call(n).slice(8,-1)}var Ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Pe=typeof Ue=="symbol"?function(n){var r;return n!=null&&(r=n[Ue])&&r.apply(n)}:function(){return null};function G(n,r){var o=n.indexOf(r);return o>=0&&n.splice(o,1),o>=0}var $={};function pe(n){var r,o,u,c;if(arguments.length===1){if(v(n))return n.slice();if(this===$&&typeof n=="string")return[n];if(c=Pe(n)){for(o=[];u=c.next(),!u.done;)o.push(u.value);return o}if(n==null)return[n];if(r=n.length,typeof r=="number"){for(o=new Array(r);r--;)o[r]=n[r];return o}return[n]}for(r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return o}var ke=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Fe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ze=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ut=Fe.concat(ze),Jt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Et(n,r){this.name=n,this.message=r}C(Et).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ct(n,r){return n+". Errors: "+Object.keys(r).map(function(o){return r[o].toString()}).filter(function(o,u,c){return c.indexOf(o)===u}).join(`
`)}function Xe(n,r,o,u){this.failures=r,this.failedKeys=u,this.successCount=o,this.message=ct(n,r)}C(Xe).from(Et);function et(n,r){this.name="BulkError",this.failures=Object.keys(r).map(function(o){return r[o]}),this.failuresByPos=r,this.message=ct(n,this.failures)}C(et).from(Et);var bt=ut.reduce(function(n,r){return n[r]=r+"Error",n},{}),vn=Et,ue=ut.reduce(function(n,r){var o=r+"Error";function u(c,d){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Jt[r]||o,this.inner=null)}return C(u).from(vn),n[r]=u,n},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var Ut=ze.reduce(function(n,r){return n[r+"Error"]=ue[r],n},{});function $t(n,r){if(!n||n instanceof Et||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Ut[n.name])return n;var o=new Ut[n.name](r||n.message,n);return"stack"in n&&L(o,"stack",{get:function(){return this.inner.stack}}),o}var en=ut.reduce(function(n,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(n[r+"Error"]=ue[r]),n},{});en.ModifyError=Xe,en.DexieError=Et,en.BulkError=et;function Ke(){}function En(n){return n}function xn(n,r){return n==null||n===En?r:function(o){return r(n(o))}}function Yt(n,r){return function(){n.apply(this,arguments),r.apply(this,arguments)}}function Z(n,r){return n===Ke?r:function(){var o=n.apply(this,arguments);o!==void 0&&(arguments[0]=o);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=r.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?Yt(u,this.onsuccess):u),c&&(this.onerror=this.onerror?Yt(c,this.onerror):c),d!==void 0?d:o}}function de(n,r){return n===Ke?r:function(){n.apply(this,arguments);var o=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?Yt(o,this.onsuccess):o),u&&(this.onerror=this.onerror?Yt(u,this.onerror):u)}}function be(n,r){return n===Ke?r:function(o){var u=n.apply(this,arguments);m(o,u);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var p=r.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?Yt(c,this.onsuccess):c),d&&(this.onerror=this.onerror?Yt(d,this.onerror):d),u===void 0?p===void 0?void 0:p:m(u,p)}}function He(n,r){return n===Ke?r:function(){return r.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function at(n,r){return n===Ke?r:function(){var o=n.apply(this,arguments);if(o&&typeof o.then=="function"){for(var u=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return o.then(function(){return r.apply(u,d)})}return r.apply(this,arguments)}}var ot=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function it(n,r){ot=n}var De={},It=100,vt=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,E(n),n];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,E(r),n]})(),Dt=vt[0],un=vt[1],pn=vt[2],pi=un&&un.then,tt=Dt&&Dt.constructor,kn=!!pn;function mr(){queueMicrotask(Ac)}var jr=function(n,r){gi.push([n,r]),Zi&&(mr(),Zi=!1)},mi=!0,Zi=!0,gr=[],Ji=[],mo=En,Xn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ke,pgp:!1,env:{},finalize:Ke},fe=Xn,gi=[],yr=0,$i=[];function re(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=fe;if(typeof n!="function"){if(n!==De)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&yo(this,this._value);return}this._state=null,this._value=null,++r.ref,Zs(this,n)}var go={get:function(){var n=fe,r=ra;function o(u,c){var d=this,p=!n.global&&(n!==fe||r!==ra),g=p&&!Zn(),b=new re(function(k,I){bo(d,new Qs(eu(u,n,p,g),eu(c,n,p,g),k,I,n))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return o.prototype=De,o},set:function(n){L(this,"then",n&&n.prototype===De?go:{get:function(){return n},set:go.set})}};x(re.prototype,{then:go,_then:function(n,r){bo(this,new Qs(null,null,n,r,fe))},catch:function(n){if(arguments.length===1)return this.then(null,n);var r=arguments[0],o=arguments[1];return typeof r=="function"?this.then(null,function(u){return u instanceof r?o(u):ea(u)}):this.then(null,function(u){return u&&u.name===r?o(u):ea(u)})},finally:function(n){return this.then(function(r){return re.resolve(n()).then(function(){return r})},function(r){return re.resolve(n()).then(function(){return ea(r)})})},timeout:function(n,r){var o=this;return n<1/0?new re(function(u,c){var d=setTimeout(function(){return c(new ue.Timeout(r))},n);o.then(u,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(re.prototype,Symbol.toStringTag,"Dexie.Promise"),Xn.env=$s();function Qs(n,r,o,u,c){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=o,this.reject=u,this.psd=c}x(re,{all:function(){var n=pe.apply(null,arguments).map(ia);return new re(function(r,o){n.length===0&&r([]);var u=n.length;n.forEach(function(c,d){return re.resolve(c).then(function(p){n[d]=p,--u||r(n)},o)})})},resolve:function(n){if(n instanceof re)return n;if(n&&typeof n.then=="function")return new re(function(o,u){n.then(o,u)});var r=new re(De,!0,n);return r},reject:ea,race:function(){var n=pe.apply(null,arguments).map(ia);return new re(function(r,o){n.map(function(u){return re.resolve(u).then(r,o)})})},PSD:{get:function(){return fe},set:function(n){return fe=n}},totalEchoes:{get:function(){return ra}},newPSD:Qn,usePSD:br,scheduler:{get:function(){return jr},set:function(n){jr=n}},rejectionMapper:{get:function(){return mo},set:function(n){mo=n}},follow:function(n,r){return new re(function(o,u){return Qn(function(c,d){var p=fe;p.unhandleds=[],p.onunhandled=d,p.finalize=Yt(function(){var g=this;Sc(function(){g.unhandleds.length===0?c():d(g.unhandleds[0])})},p.finalize),n()},r,o,u)})}}),tt&&(tt.allSettled&&L(re,"allSettled",function(){var n=pe.apply(null,arguments).map(ia);return new re(function(r){n.length===0&&r([]);var o=n.length,u=new Array(o);n.forEach(function(c,d){return re.resolve(c).then(function(p){return u[d]={status:"fulfilled",value:p}},function(p){return u[d]={status:"rejected",reason:p}}).then(function(){return--o||r(u)})})})}),tt.any&&typeof AggregateError<"u"&&L(re,"any",function(){var n=pe.apply(null,arguments).map(ia);return new re(function(r,o){n.length===0&&o(new AggregateError([]));var u=n.length,c=new Array(u);n.forEach(function(d,p){return re.resolve(d).then(function(g){return r(g)},function(g){c[p]=g,--u||o(new AggregateError(c))})})})}),tt.withResolvers&&(re.withResolvers=tt.withResolvers));function Zs(n,r){try{r(function(o){if(n._state===null){if(o===n)throw new TypeError("A promise cannot be resolved with itself.");var u=n._lib&&Hr();o&&typeof o.then=="function"?Zs(n,function(c,d){o instanceof re?o._then(c,d):o.then(c,d)}):(n._state=!0,n._value=o,Js(n)),u&&Ur()}},yo.bind(null,n))}catch(o){yo(n,o)}}function yo(n,r){if(Ji.push(r),n._state===null){var o=n._lib&&Hr();r=mo(r),n._state=!1,n._value=r,Ic(n),Js(n),o&&Ur()}}function Js(n){var r=n._listeners;n._listeners=[];for(var o=0,u=r.length;o<u;++o)bo(n,r[o]);var c=n._PSD;--c.ref||c.finalize(),yr===0&&(++yr,jr(function(){--yr===0&&_o()},[]))}function bo(n,r){if(n._state===null){n._listeners.push(r);return}var o=n._state?r.onFulfilled:r.onRejected;if(o===null)return(n._state?r.resolve:r.reject)(n._value);++r.psd.ref,++yr,jr(Tc,[o,n,r])}function Tc(n,r,o){try{var u,c=r._value;!r._state&&Ji.length&&(Ji=[]),u=ot&&r._consoleTask?r._consoleTask.run(function(){return n(c)}):n(c),!r._state&&Ji.indexOf(c)===-1&&Dc(r),o.resolve(u)}catch(d){o.reject(d)}finally{--yr===0&&_o(),--o.psd.ref||o.psd.finalize()}}function Ac(){br(Xn,function(){Hr()&&Ur()})}function Hr(){var n=mi;return mi=!1,Zi=!1,n}function Ur(){var n,r,o;do for(;gi.length>0;)for(n=gi,gi=[],o=n.length,r=0;r<o;++r){var u=n[r];u[0].apply(null,u[1])}while(gi.length>0);mi=!0,Zi=!0}function _o(){var n=gr;gr=[],n.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var r=$i.slice(0),o=r.length;o;)r[--o]()}function Sc(n){function r(){n(),$i.splice($i.indexOf(r),1)}$i.push(r),++yr,jr(function(){--yr===0&&_o()},[])}function Ic(n){gr.some(function(r){return r._value===n._value})||gr.push(n)}function Dc(n){for(var r=gr.length;r;)if(gr[--r]._value===n._value){gr.splice(r,1);return}}function ea(n){return new re(De,!1,n)}function ft(n,r){var o=fe;return function(){var u=Hr(),c=fe;try{return Jn(o,!0),n.apply(this,arguments)}catch(d){r&&r(d)}finally{Jn(c,!1),u&&Ur()}}}var Tt={awaits:0,echoes:0,id:0},Cc=0,ta=[],na=0,ra=0,Lc=0;function Qn(n,r,o,u){var c=fe,d=Object.create(c);d.parent=c,d.ref=0,d.global=!1,d.id=++Lc,Xn.env,d.env=kn?{Promise:re,PromiseProp:{value:re,configurable:!0,writable:!0},all:re.all,race:re.race,allSettled:re.allSettled,any:re.any,resolve:re.resolve,reject:re.reject}:{},r&&m(d,r),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()};var p=br(d,n,o,u);return d.ref===0&&d.finalize(),p}function zr(){return Tt.id||(Tt.id=++Cc),++Tt.awaits,Tt.echoes+=It,Tt.id}function Zn(){return Tt.awaits?(--Tt.awaits===0&&(Tt.id=0),Tt.echoes=Tt.awaits*It,!0):!1}(""+pi).indexOf("[native code]")===-1&&(zr=Zn=Ke);function ia(n){return Tt.echoes&&n&&n.constructor===tt?(zr(),n.then(function(r){return Zn(),r},function(r){return Zn(),_t(r)})):n}function Pc(n){++ra,(!Tt.echoes||--Tt.echoes===0)&&(Tt.echoes=Tt.awaits=Tt.id=0),ta.push(fe),Jn(n,!0)}function Oc(){var n=ta[ta.length-1];ta.pop(),Jn(n,!1)}function Jn(n,r){var o=fe;if((r?Tt.echoes&&(!na++||n!==fe):na&&(!--na||n!==fe))&&queueMicrotask(r?Pc.bind(null,n):Oc),n!==fe&&(fe=n,o===Xn&&(Xn.env=$s()),kn)){var u=Xn.env.Promise,c=n.env;(o.global||n.global)&&(Object.defineProperty(f,"Promise",c.PromiseProp),u.all=c.all,u.race=c.race,u.resolve=c.resolve,u.reject=c.reject,c.allSettled&&(u.allSettled=c.allSettled),c.any&&(u.any=c.any))}}function $s(){var n=f.Promise;return kn?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function br(n,r,o,u,c){var d=fe;try{return Jn(n,!0),r(o,u,c)}finally{Jn(d,!1)}}function eu(n,r,o,u){return typeof n!="function"?n:function(){var c=fe;o&&zr(),Jn(r,!0);try{return n.apply(this,arguments)}finally{Jn(c,!1),u&&queueMicrotask(Zn)}}}function wo(n){Promise===tt&&Tt.echoes===0?na===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}var _t=re.reject;function Eo(n,r,o,u){if(!n.idbdb||!n._state.openComplete&&!fe.letThrough&&!n._vip){if(n._state.openComplete)return _t(new ue.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return _t(new ue.DatabaseClosed);n.open().catch(Ke)}return n._state.dbReadyPromise.then(function(){return Eo(n,r,o,u)})}else{var c=n._createTransaction(r,o,n._dbSchema);try{c.create(),n._state.PR1398_maxLoop=3}catch(d){return d.name===bt.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return Eo(n,r,o,u)})):_t(d)}return c._promise(r,function(d,p){return Qn(function(){return fe.trans=c,u(d,p,c)})}).then(function(d){if(r==="readwrite")try{c.idbtrans.commit()}catch{}return r==="readonly"?d:c._completion.then(function(){return d})})}}var tu="4.2.1",_r="ï¿¿",xo=-1/0,Bn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",nu="String expected.",Vr=[],aa="__dbnames",ko="readonly",To="readwrite";function wr(n,r){return n?r?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:n:r}var ru={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function oa(n){return typeof n=="string"&&!/\./.test(n)?function(r){return r[n]===void 0&&n in r&&(r=Ee(r),delete r[n]),r}:function(r){return r}}function iu(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ye(n,r){try{var o=au(n),u=au(r);if(o!==u)return o==="Array"?1:u==="Array"?-1:o==="binary"?1:u==="binary"?-1:o==="string"?1:u==="string"?-1:o==="Date"?1:u!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return n>r?1:n<r?-1:0;case"binary":return Rc(ou(n),ou(r));case"Array":return Mc(n,r)}}catch{}return NaN}function Mc(n,r){for(var o=n.length,u=r.length,c=o<u?o:u,d=0;d<c;++d){var p=Ye(n[d],r[d]);if(p!==0)return p}return o===u?0:o<u?-1:1}function Rc(n,r){for(var o=n.length,u=r.length,c=o<u?o:u,d=0;d<c;++d)if(n[d]!==r[d])return n[d]<r[d]?-1:1;return o===u?0:o<u?-1:1}function au(n){var r=typeof n;if(r!=="object")return r;if(ArrayBuffer.isView(n))return"binary";var o=nt(n);return o==="ArrayBuffer"?"binary":o}function ou(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function sa(n,r,o){var u=n.schema.yProps;return u?(r&&o.numFailures>0&&(r=r.filter(function(c,d){return!o.failures[d]})),Promise.all(u.map(function(c){var d=c.updatesTable;return r?n.db.table(d).where("k").anyOf(r).delete():n.db.table(d).clear()})).then(function(){return o})):o}var yi=(function(){function n(r){this["@@propmod"]=r}return n.prototype.execute=function(r){var o,u=this["@@propmod"];if(u.add!==void 0){var c=u.add;if(v(c))return l(l([],v(r)?r:[],!0),c).sort();if(typeof c=="number")return(Number(r)||0)+c;if(typeof c=="bigint")try{return BigInt(r)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(u.remove!==void 0){var d=u.remove;if(v(d))return v(r)?r.filter(function(g){return!d.includes(g)}).sort():[];if(typeof d=="number")return Number(r)-d;if(typeof d=="bigint")try{return BigInt(r)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}var p=(o=u.replacePrefix)===null||o===void 0?void 0:o[0];return p&&typeof r=="string"&&r.startsWith(p)?u.replacePrefix[1]+r.substring(p.length):r},n})();function su(n,r){for(var o=h(r),u=o.length,c=!1,d=0;d<u;++d){var p=o[d],g=r[p],b=Q(n,p);g instanceof yi?(ie(n,p,g.execute(b)),c=!0):b!==g&&(ie(n,p,g),c=!0)}return c}var uu=(function(){function n(){}return n.prototype._trans=function(r,o,u){var c=this._tx||fe.trans,d=this.name,p=ot&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function g(I,A,M){if(!M.schema[d])throw new ue.NotFound("Table "+d+" not part of transaction");return o(M.idbtrans,M)}var b=Hr();try{var k=c&&c.db._novip===this.db._novip?c===fe.trans?c._promise(r,g,u):Qn(function(){return c._promise(r,g,u)},{trans:c,transless:fe.transless||fe}):Eo(this.db,r,[this.name],g);return p&&(k._consoleTask=p,k=k.catch(function(I){return console.trace(I),_t(I)})),k}finally{b&&Ur()}},n.prototype.get=function(r,o){var u=this;return r&&r.constructor===Object?this.where(r).first(o):r==null?_t(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return u.core.get({trans:c,key:r}).then(function(d){return u.hook.reading.fire(d)})}).then(o)},n.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(v(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var o=h(r);if(o.length===1)return this.where(o[0]).equals(r[o[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(I){if(I.compound&&o.every(function(M){return I.keyPath.indexOf(M)>=0})){for(var A=0;A<o.length;++A)if(o.indexOf(I.keyPath[A])===-1)return!1;return!0}return!1}).sort(function(I,A){return I.keyPath.length-A.keyPath.length})[0];if(u&&this.db._maxKey!==_r){var c=u.keyPath.slice(0,o.length);return this.where(c).equals(c.map(function(I){return r[I]}))}!u&&ot&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var d=this.schema.idxByName;function p(I,A){return Ye(I,A)===0}var g=o.reduce(function(I,A){var M=I[0],X=I[1],S=d[A],P=r[A];return[M||S,M||!S?wr(X,S&&S.multi?function(O){var R=Q(O,A);return v(R)&&R.some(function(j){return p(P,j)})}:function(O){return p(P,Q(O,A))}):X]},[null,null]),b=g[0],k=g[1];return b?this.where(b.name).equals(r[b.keyPath]).filter(k):u?this.filter(k):this.where(o).equals("")},n.prototype.filter=function(r){return this.toCollection().and(r)},n.prototype.count=function(r){return this.toCollection().count(r)},n.prototype.offset=function(r){return this.toCollection().offset(r)},n.prototype.limit=function(r){return this.toCollection().limit(r)},n.prototype.each=function(r){return this.toCollection().each(r)},n.prototype.toArray=function(r){return this.toCollection().toArray(r)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,v(r)?"[".concat(r.join("+"),"]"):r))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(r){var o=this,u=o.db,c=o.name;this.schema.mappedClass=r,r.prototype instanceof iu&&(r=(function(b){a(k,b);function k(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(k.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),k.prototype.table=function(){return c},k})(r));for(var d=new Set,p=r.prototype;p;p=E(p))Object.getOwnPropertyNames(p).forEach(function(b){return d.add(b)});var g=function(b){if(!b)return b;var k=Object.create(r.prototype);for(var I in b)if(!d.has(I))try{k[I]=b[I]}catch{}return k};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),r},n.prototype.defineClass=function(){function r(o){m(this,o)}return this.mapToClass(r)},n.prototype.add=function(r,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,g=r;return p&&d&&(g=oa(p)(r)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"add",keys:o!=null?[o]:null,values:[g]})}).then(function(b){return b.numFailures?re.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{ie(r,p,b)}catch{}return b})},n.prototype.upsert=function(r,o){var u=this,c=this.schema.primKey.keyPath;return this._trans("readwrite",function(d){return u.core.get({trans:d,key:r}).then(function(p){var g=p??{};return su(g,o),c&&ie(g,c,r),u.core.mutate({trans:d,type:"put",values:[g],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[o]}}).then(function(b){return b.numFailures?re.reject(b.failures[0]):!!p})})})},n.prototype.update=function(r,o){if(typeof r=="object"&&!v(r)){var u=Q(r,this.schema.primKey.keyPath);return u===void 0?_t(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(o)}else return this.where(":id").equals(r).modify(o)},n.prototype.put=function(r,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,g=r;return p&&d&&(g=oa(p)(r)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"put",values:[g],keys:o!=null?[o]:null})}).then(function(b){return b.numFailures?re.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{ie(r,p,b)}catch{}return b})},n.prototype.delete=function(r){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"delete",keys:[r]}).then(function(c){return sa(o,[r],c)}).then(function(c){return c.numFailures?re.reject(c.failures[0]):void 0})})},n.prototype.clear=function(){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"deleteRange",range:ru}).then(function(u){return sa(r,null,u)})}).then(function(o){return o.numFailures?re.reject(o.failures[0]):void 0})},n.prototype.bulkGet=function(r){var o=this;return this._trans("readonly",function(u){return o.core.getMany({keys:r,trans:u}).then(function(c){return c.map(function(d){return o.hook.reading.fire(d)})})})},n.prototype.bulkAdd=function(r,o,u){var c=this,d=Array.isArray(o)?o:void 0;u=u||(d?void 0:o);var p=u?u.allKeys:void 0;return this._trans("readwrite",function(g){var b=c.schema.primKey,k=b.auto,I=b.keyPath;if(I&&d)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var A=r.length,M=I&&k?r.map(oa(I)):r;return c.core.mutate({trans:g,type:"add",keys:d,values:M,wantResults:p}).then(function(X){var S=X.numFailures,P=X.results,O=X.lastResult,R=X.failures,j=p?P:O;if(S===0)return j;throw new et("".concat(c.name,".bulkAdd(): ").concat(S," of ").concat(A," operations failed"),R)})})},n.prototype.bulkPut=function(r,o,u){var c=this,d=Array.isArray(o)?o:void 0;u=u||(d?void 0:o);var p=u?u.allKeys:void 0;return this._trans("readwrite",function(g){var b=c.schema.primKey,k=b.auto,I=b.keyPath;if(I&&d)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var A=r.length,M=I&&k?r.map(oa(I)):r;return c.core.mutate({trans:g,type:"put",keys:d,values:M,wantResults:p}).then(function(X){var S=X.numFailures,P=X.results,O=X.lastResult,R=X.failures,j=p?P:O;if(S===0)return j;throw new et("".concat(c.name,".bulkPut(): ").concat(S," of ").concat(A," operations failed"),R)})})},n.prototype.bulkUpdate=function(r){var o=this,u=this.core,c=r.map(function(g){return g.key}),d=r.map(function(g){return g.changes}),p=[];return this._trans("readwrite",function(g){return u.getMany({trans:g,keys:c,cache:"clone"}).then(function(b){var k=[],I=[];r.forEach(function(M,X){var S=M.key,P=M.changes,O=b[X];if(O){for(var R=0,j=Object.keys(P);R<j.length;R++){var H=j[R],z=P[H];if(H===o.schema.primKey.keyPath){if(Ye(z,S)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else ie(O,H,z)}p.push(X),k.push(S),I.push(O)}});var A=k.length;return u.mutate({trans:g,type:"put",keys:k,values:I,updates:{keys:c,changeSpecs:d}}).then(function(M){var X=M.numFailures,S=M.failures;if(X===0)return A;for(var P=0,O=Object.keys(S);P<O.length;P++){var R=O[P],j=p[Number(R)];if(j!=null){var H=S[R];delete S[R],S[j]=H}}throw new et("".concat(o.name,".bulkUpdate(): ").concat(X," of ").concat(A," operations failed"),S)})})})},n.prototype.bulkDelete=function(r){var o=this,u=r.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:r}).then(function(d){return sa(o,r,d)})}).then(function(c){var d=c.numFailures,p=c.lastResult,g=c.failures;if(d===0)return p;throw new et("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(u," operations failed"),g)})},n})();function bi(n){var r={},o=function(g,b){if(b){for(var k=arguments.length,I=new Array(k-1);--k;)I[k-1]=arguments[k];return r[g].subscribe.apply(null,I),n}else if(typeof g=="string")return r[g]};o.addEventType=d;for(var u=1,c=arguments.length;u<c;++u)d(arguments[u]);return o;function d(g,b,k){if(typeof g=="object")return p(g);b||(b=He),k||(k=Ke);var I={subscribers:[],fire:k,subscribe:function(A){I.subscribers.indexOf(A)===-1&&(I.subscribers.push(A),I.fire=b(I.fire,A))},unsubscribe:function(A){I.subscribers=I.subscribers.filter(function(M){return M!==A}),I.fire=I.subscribers.reduce(b,k)}};return r[g]=o[g]=I,I}function p(g){h(g).forEach(function(b){var k=g[b];if(v(k))d(b,g[b][0],g[b][1]);else if(k==="asap")var I=d(b,En,function(){for(var M=arguments.length,X=new Array(M);M--;)X[M]=arguments[M];I.subscribers.forEach(function(S){q(function(){S.apply(null,X)})})});else throw new ue.InvalidArgument("Invalid event config")})}}function _i(n,r){return C(r).from({prototype:n}),r}function Kc(n){return _i(uu.prototype,function(o,u,c){this.db=n,this._tx=c,this.name=o,this.schema=u,this.hook=n._allTables[o]?n._allTables[o].hook:bi(null,{creating:[Z,Ke],reading:[xn,En],updating:[be,Ke],deleting:[de,Ke]})})}function Yr(n,r){return!(n.filter||n.algorithm||n.or)&&(r?n.justLimit:!n.replayFilter)}function Ao(n,r){n.filter=wr(n.filter,r)}function So(n,r,o){var u=n.replayFilter;n.replayFilter=u?function(){return wr(u(),r())}:r,n.justLimit=o&&!u}function Bc(n,r){n.isMatch=wr(n.isMatch,r)}function ua(n,r){if(n.isPrimKey)return r.primaryKey;var o=r.getIndexByKeyPath(n.index);if(!o)throw new ue.Schema("KeyPath "+n.index+" on object store "+r.name+" is not indexed");return o}function lu(n,r,o){var u=ua(n,r.schema);return r.openCursor({trans:o,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:u,range:n.range}})}function la(n,r,o,u){var c=n.replayFilter?wr(n.filter,n.replayFilter()):n.filter;if(n.or){var d={},p=function(g,b,k){if(!c||c(b,k,function(M){return b.stop(M)},function(M){return b.fail(M)})){var I=b.primaryKey,A=""+I;A==="[object ArrayBuffer]"&&(A=""+new Uint8Array(I)),w(d,A)||(d[A]=!0,r(g,b,k))}};return Promise.all([n.or._iterate(p,o),cu(lu(n,u,o),n.algorithm,p,!n.keysOnly&&n.valueMapper)])}else return cu(lu(n,u,o),wr(n.algorithm,c),r,!n.keysOnly&&n.valueMapper)}function cu(n,r,o,u){var c=u?function(p,g,b){return o(u(p),g,b)}:o,d=ft(c);return n.then(function(p){if(p)return p.start(function(){var g=function(){return p.continue()};(!r||r(p,function(b){return g=b},function(b){p.stop(b),g=Ke},function(b){p.fail(b),g=Ke}))&&d(p.value,p,function(b){return g=b}),g()})})}var Nc=(function(){function n(){}return n.prototype._read=function(r,o){var u=this._ctx;return u.error?u.table._trans(null,_t.bind(null,u.error)):u.table._trans("readonly",r).then(o)},n.prototype._write=function(r){var o=this._ctx;return o.error?o.table._trans(null,_t.bind(null,o.error)):o.table._trans("readwrite",r,"locked")},n.prototype._addAlgorithm=function(r){var o=this._ctx;o.algorithm=wr(o.algorithm,r)},n.prototype._iterate=function(r,o){return la(this._ctx,r,o,this._ctx.table.core)},n.prototype.clone=function(r){var o=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return r&&m(u,r),o._ctx=u,o},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(r){var o=this._ctx;return this._read(function(u){return la(o,r,u,o.table.core)})},n.prototype.count=function(r){var o=this;return this._read(function(u){var c=o._ctx,d=c.table.core;if(Yr(c,!0))return d.count({trans:u,query:{index:ua(c,d.schema),range:c.range}}).then(function(g){return Math.min(g,c.limit)});var p=0;return la(c,function(){return++p,!1},u,d).then(function(){return p})}).then(r)},n.prototype.sortBy=function(r,o){var u=r.split(".").reverse(),c=u[0],d=u.length-1;function p(k,I){return I?p(k[u[I]],I-1):k[c]}var g=this._ctx.dir==="next"?1:-1;function b(k,I){var A=p(k,d),M=p(I,d);return Ye(A,M)*g}return this.toArray(function(k){return k.sort(b)}).then(o)},n.prototype.toArray=function(r){var o=this;return this._read(function(u){var c=o._ctx;if(c.dir==="next"&&Yr(c,!0)&&c.limit>0){var d=c.valueMapper,p=ua(c,c.table.core.schema);return c.table.core.query({trans:u,limit:c.limit,values:!0,query:{index:p,range:c.range}}).then(function(b){var k=b.result;return d?k.map(d):k})}else{var g=[];return la(c,function(b){return g.push(b)},u,c.table.core).then(function(){return g})}},r)},n.prototype.offset=function(r){var o=this._ctx;return r<=0?this:(o.offset+=r,Yr(o)?So(o,function(){var u=r;return function(c,d){return u===0?!0:u===1?(--u,!1):(d(function(){c.advance(u),u=0}),!1)}}):So(o,function(){var u=r;return function(){return--u<0}}),this)},n.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),So(this._ctx,function(){var o=r;return function(u,c,d){return--o<=0&&c(d),o>=0}},!0),this},n.prototype.until=function(r,o){return Ao(this._ctx,function(u,c,d){return r(u.value)?(c(d),o):!0}),this},n.prototype.first=function(r){return this.limit(1).toArray(function(o){return o[0]}).then(r)},n.prototype.last=function(r){return this.reverse().first(r)},n.prototype.filter=function(r){return Ao(this._ctx,function(o){return r(o.value)}),Bc(this._ctx,r),this},n.prototype.and=function(r){return this.filter(r)},n.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){r(c.key,c)})},n.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},n.prototype.eachPrimaryKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){r(c.primaryKey,c)})},n.prototype.keys=function(r){var o=this._ctx;o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.key)}).then(function(){return u}).then(r)},n.prototype.primaryKeys=function(r){var o=this._ctx;if(o.dir==="next"&&Yr(o,!0)&&o.limit>0)return this._read(function(c){var d=ua(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(c){var d=c.result;return d}).then(r);o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.primaryKey)}).then(function(){return u}).then(r)},n.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},n.prototype.firstKey=function(r){return this.limit(1).keys(function(o){return o[0]}).then(r)},n.prototype.lastKey=function(r){return this.reverse().firstKey(r)},n.prototype.distinct=function(){var r=this._ctx,o=r.index&&r.table.schema.idxByName[r.index];if(!o||!o.multi)return this;var u={};return Ao(this._ctx,function(c){var d=c.primaryKey.toString(),p=w(u,d);return u[d]=!0,!p}),this},n.prototype.modify=function(r){var o=this,u=this._ctx;return this._write(function(c){var d;typeof r=="function"?d=r:d=function(R){return su(R,r)};var p=u.table.core,g=p.schema.primaryKey,b=g.outbound,k=g.extractKey,I=200,A=o.db._options.modifyChunkSize;A&&(typeof A=="object"?I=A[p.name]||A["*"]||200:I=A);var M=[],X=0,S=[],P=function(R,j){var H=j.failures,z=j.numFailures;X+=R-z;for(var F=0,te=h(H);F<te.length;F++){var oe=te[F];M.push(H[oe])}},O=r===fu;return o.clone().primaryKeys().then(function(R){var j=Yr(u)&&u.limit===1/0&&(typeof r!="function"||O)&&{index:u.index,range:u.range},H=function(z){var F=Math.min(I,R.length-z),te=R.slice(z,z+F);return(O?Promise.resolve([]):p.getMany({trans:c,keys:te,cache:"immutable"})).then(function(oe){var ne=[],ye=[],Be=b?[]:null,se=O?te:[];if(!O)for(var Oe=0;Oe<F;++Oe){var we=oe[Oe],qe={value:Ee(we),primKey:R[z+Oe]};d.call(qe,qe.value,qe)!==!1&&(qe.value==null?se.push(R[z+Oe]):!b&&Ye(k(we),k(qe.value))!==0?(se.push(R[z+Oe]),ne.push(qe.value)):(ye.push(qe.value),b&&Be.push(R[z+Oe])))}return Promise.resolve(ne.length>0&&p.mutate({trans:c,type:"add",values:ne}).then(function(he){for(var gt in he.failures)se.splice(parseInt(gt),1);P(ne.length,he)})).then(function(){return(ye.length>0||j&&typeof r=="object")&&p.mutate({trans:c,type:"put",keys:Be,values:ye,criteria:j,changeSpec:typeof r!="function"&&r,isAdditionalChunk:z>0}).then(function(he){return P(ye.length,he)})}).then(function(){return(se.length>0||j&&O)&&p.mutate({trans:c,type:"delete",keys:se,criteria:j,isAdditionalChunk:z>0}).then(function(he){return sa(u.table,se,he)}).then(function(he){return P(se.length,he)})}).then(function(){return R.length>z+F&&H(z+I)})})};return H(0).then(function(){if(M.length>0)throw new Xe("Error modifying one or more objects",M,X,S);return R.length})})})},n.prototype.delete=function(){var r=this._ctx,o=r.range;return Yr(r)&&!r.table.schema.yProps&&(r.isPrimKey||o.type===3)?this._write(function(u){var c=r.table.core.schema.primaryKey,d=o;return r.table.core.count({trans:u,query:{index:c,range:d}}).then(function(p){return r.table.core.mutate({trans:u,type:"deleteRange",range:d}).then(function(g){var b=g.failures,k=g.numFailures;if(k)throw new Xe("Could not delete some values",Object.keys(b).map(function(I){return b[I]}),p-k);return p-k})})}):this.modify(fu)},n})(),fu=function(n,r){return r.value=null};function Fc(n){return _i(Nc.prototype,function(o,u){this.db=n;var c=ru,d=null;if(u)try{c=u()}catch(k){d=k}var p=o._ctx,g=p.table,b=g.hook.reading.fire;this._ctx={table:g,index:p.index,isPrimKey:!p.index||g.schema.primKey.keyPath&&p.index===g.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:p.or,valueMapper:b!==En?b:null}})}function jc(n,r){return n<r?-1:n===r?0:1}function Hc(n,r){return n>r?-1:n===r?0:1}function tn(n,r,o){var u=n instanceof hu?new n.Collection(n):n;return u._ctx.error=o?new o(r):new TypeError(r),u}function Wr(n){return new n.Collection(n,function(){return du("")}).limit(0)}function Uc(n){return n==="next"?function(r){return r.toUpperCase()}:function(r){return r.toLowerCase()}}function zc(n){return n==="next"?function(r){return r.toLowerCase()}:function(r){return r.toUpperCase()}}function Vc(n,r,o,u,c,d){for(var p=Math.min(n.length,u.length),g=-1,b=0;b<p;++b){var k=r[b];if(k!==u[b])return c(n[b],o[b])<0?n.substr(0,b)+o[b]+o.substr(b+1):c(n[b],u[b])<0?n.substr(0,b)+u[b]+o.substr(b+1):g>=0?n.substr(0,g)+r[g]+o.substr(g+1):null;c(n[b],k)<0&&(g=b)}return p<u.length&&d==="next"?n+o.substr(n.length):p<n.length&&d==="prev"?n.substr(0,o.length):g<0?null:n.substr(0,g)+u[g]+o.substr(g+1)}function ca(n,r,o,u){var c,d,p,g,b,k,I,A=o.length;if(!o.every(function(P){return typeof P=="string"}))return tn(n,nu);function M(P){c=Uc(P),d=zc(P),p=P==="next"?jc:Hc;var O=o.map(function(R){return{lower:d(R),upper:c(R)}}).sort(function(R,j){return p(R.lower,j.lower)});g=O.map(function(R){return R.upper}),b=O.map(function(R){return R.lower}),k=P,I=P==="next"?"":u}M("next");var X=new n.Collection(n,function(){return $n(g[0],b[A-1]+u)});X._ondirectionchange=function(P){M(P)};var S=0;return X._addAlgorithm(function(P,O,R){var j=P.key;if(typeof j!="string")return!1;var H=d(j);if(r(H,b,S))return!0;for(var z=null,F=S;F<A;++F){var te=Vc(j,H,g[F],b[F],p,k);te===null&&z===null?S=F+1:(z===null||p(z,te)>0)&&(z=te)}return O(z!==null?function(){P.continue(z+I)}:R),!1}),X}function $n(n,r,o,u){return{type:2,lower:n,upper:r,lowerOpen:o,upperOpen:u}}function du(n){return{type:1,lower:n,upper:n}}var hu=(function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(r,o,u,c){u=u!==!1,c=c===!0;try{return this._cmp(r,o)>0||this._cmp(r,o)===0&&(u||c)&&!(u&&c)?Wr(this):new this.Collection(this,function(){return $n(r,o,!u,!c)})}catch{return tn(this,Bn)}},n.prototype.equals=function(r){return r==null?tn(this,Bn):new this.Collection(this,function(){return du(r)})},n.prototype.above=function(r){return r==null?tn(this,Bn):new this.Collection(this,function(){return $n(r,void 0,!0)})},n.prototype.aboveOrEqual=function(r){return r==null?tn(this,Bn):new this.Collection(this,function(){return $n(r,void 0,!1)})},n.prototype.below=function(r){return r==null?tn(this,Bn):new this.Collection(this,function(){return $n(void 0,r,!1,!0)})},n.prototype.belowOrEqual=function(r){return r==null?tn(this,Bn):new this.Collection(this,function(){return $n(void 0,r)})},n.prototype.startsWith=function(r){return typeof r!="string"?tn(this,nu):this.between(r,r+_r,!0,!0)},n.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):ca(this,function(o,u){return o.indexOf(u[0])===0},[r],_r)},n.prototype.equalsIgnoreCase=function(r){return ca(this,function(o,u){return o===u[0]},[r],"")},n.prototype.anyOfIgnoreCase=function(){var r=pe.apply($,arguments);return r.length===0?Wr(this):ca(this,function(o,u){return u.indexOf(o)!==-1},r,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var r=pe.apply($,arguments);return r.length===0?Wr(this):ca(this,function(o,u){return u.some(function(c){return o.indexOf(c)===0})},r,_r)},n.prototype.anyOf=function(){var r=this,o=pe.apply($,arguments),u=this._cmp;try{o.sort(u)}catch{return tn(this,Bn)}if(o.length===0)return Wr(this);var c=new this.Collection(this,function(){return $n(o[0],o[o.length-1])});c._ondirectionchange=function(p){u=p==="next"?r._ascending:r._descending,o.sort(u)};var d=0;return c._addAlgorithm(function(p,g,b){for(var k=p.key;u(k,o[d])>0;)if(++d,d===o.length)return g(b),!1;return u(k,o[d])===0?!0:(g(function(){p.continue(o[d])}),!1)}),c},n.prototype.notEqual=function(r){return this.inAnyRange([[xo,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var r=pe.apply($,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return tn(this,Bn)}var o=r.reduce(function(u,c){return u?u.concat([[u[u.length-1][1],c]]):[[xo,c]]},null);return o.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(r,o){var u=this,c=this._cmp,d=this._ascending,p=this._descending,g=this._min,b=this._max;if(r.length===0)return Wr(this);if(!r.every(function(F){return F[0]!==void 0&&F[1]!==void 0&&d(F[0],F[1])<=0}))return tn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var k=!o||o.includeLowers!==!1,I=o&&o.includeUppers===!0;function A(F,te){for(var oe=0,ne=F.length;oe<ne;++oe){var ye=F[oe];if(c(te[0],ye[1])<0&&c(te[1],ye[0])>0){ye[0]=g(ye[0],te[0]),ye[1]=b(ye[1],te[1]);break}}return oe===ne&&F.push(te),F}var M=d;function X(F,te){return M(F[0],te[0])}var S;try{S=r.reduce(A,[]),S.sort(X)}catch{return tn(this,Bn)}var P=0,O=I?function(F){return d(F,S[P][1])>0}:function(F){return d(F,S[P][1])>=0},R=k?function(F){return p(F,S[P][0])>0}:function(F){return p(F,S[P][0])>=0};function j(F){return!O(F)&&!R(F)}var H=O,z=new this.Collection(this,function(){return $n(S[0][0],S[S.length-1][1],!k,!I)});return z._ondirectionchange=function(F){F==="next"?(H=O,M=d):(H=R,M=p),S.sort(X)},z._addAlgorithm(function(F,te,oe){for(var ne=F.key;H(ne);)if(++P,P===S.length)return te(oe),!1;return j(ne)?!0:(u._cmp(ne,S[P][1])===0||u._cmp(ne,S[P][0])===0||te(function(){M===d?F.continue(S[P][0]):F.continue(S[P][1])}),!1)}),z},n.prototype.startsWithAnyOf=function(){var r=pe.apply($,arguments);return r.every(function(o){return typeof o=="string"})?r.length===0?Wr(this):this.inAnyRange(r.map(function(o){return[o,o+_r]})):tn(this,"startsWithAnyOf() only works with strings")},n})();function Yc(n){return _i(hu.prototype,function(o,u,c){if(this.db=n,this._ctx={table:o,index:u===":id"?null:u,or:c},this._cmp=this._ascending=Ye,this._descending=function(d,p){return Ye(p,d)},this._max=function(d,p){return Ye(d,p)>0?d:p},this._min=function(d,p){return Ye(d,p)<0?d:p},this._IDBKeyRange=n._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})}function Tn(n){return ft(function(r){return wi(r),n(r.target.error),!1})}function wi(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var Ei="storagemutated",Io="x-storagemutated-1",er=bi(null,Ei),Wc=(function(){function n(){}return n.prototype._lock=function(){return ee(!fe.global),++this._reculock,this._reculock===1&&!fe.global&&(fe.lockOwnerFor=this),this},n.prototype._unlock=function(){if(ee(!fe.global),--this._reculock===0)for(fe.global||(fe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{br(r[1],r[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&fe.lockOwnerFor!==this},n.prototype.create=function(r){var o=this;if(!this.mode)return this;var u=this.db.idbdb,c=this.db._state.dbOpenError;if(ee(!this.idbtrans),!r&&!u)switch(c&&c.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(c);case"MissingAPIError":throw new ue.MissingAPI(c.message,c);default:throw new ue.OpenFailed(c)}if(!this.active)throw new ue.TransactionInactive;return ee(this._completion._state===null),r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):u.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),r.onerror=ft(function(d){wi(d),o._reject(r.error)}),r.onabort=ft(function(d){wi(d),o.active&&o._reject(new ue.Abort(r.error)),o.active=!1,o.on("abort").fire(d)}),r.oncomplete=ft(function(){o.active=!1,o._resolve(),"mutatedParts"in r&&er.storagemutated.fire(r.mutatedParts)}),this},n.prototype._promise=function(r,o,u){var c=this;if(r==="readwrite"&&this.mode!=="readwrite")return _t(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return _t(new ue.TransactionInactive);if(this._locked())return new re(function(p,g){c._blockedFuncs.push([function(){c._promise(r,o,u).then(p,g)},fe])});if(u)return Qn(function(){var p=new re(function(g,b){c._lock();var k=o(g,b,c);k&&k.then&&k.then(g,b)});return p.finally(function(){return c._unlock()}),p._lib=!0,p});var d=new re(function(p,g){var b=o(p,g,c);b&&b.then&&b.then(p,g)});return d._lib=!0,d},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(r){var o=this._root(),u=re.resolve(r);if(o._waitingFor)o._waitingFor=o._waitingFor.then(function(){return u});else{o._waitingFor=u,o._waitingQueue=[];var c=o.idbtrans.objectStore(o.storeNames[0]);(function p(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(c.get(-1/0).onsuccess=p)})()}var d=o._waitingFor;return new re(function(p,g){u.then(function(b){return o._waitingQueue.push(ft(p.bind(null,b)))},function(b){return o._waitingQueue.push(ft(g.bind(null,b)))}).finally(function(){o._waitingFor===d&&(o._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},n.prototype.table=function(r){var o=this._memoizedTables||(this._memoizedTables={});if(w(o,r))return o[r];var u=this.schema[r];if(!u)throw new ue.NotFound("Table "+r+" not part of transaction");var c=new this.db.Table(r,u,this);return c.core=this.db.core.table(r),o[r]=c,c},n})();function qc(n){return _i(Wc.prototype,function(o,u,c,d,p){var g=this;o!=="readonly"&&u.forEach(function(b){var k,I=(k=c[b])===null||k===void 0?void 0:k.yProps;I&&(u=u.concat(I.map(function(A){return A.updatesTable})))}),this.db=n,this.mode=o,this.storeNames=u,this.schema=c,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=bi(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new re(function(b,k){g._resolve=b,g._reject=k}),this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(b){var k=g.active;return g.active=!1,g.on.error.fire(b),g.parent?g.parent._reject(b):k&&g.idbtrans&&g.idbtrans.abort(),_t(b)})})}function Do(n,r,o,u,c,d,p,g){return{name:n,keyPath:r,unique:o,multi:u,auto:c,compound:d,src:(o&&!p?"&":"")+(u?"*":"")+(c?"++":"")+vu(r),type:g}}function vu(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Co(n,r,o){return{name:n,primKey:r,indexes:o,mappedClass:null,idxByName:N(o,function(u){return[u.name,u]})}}function Gc(n){return n.length===1?n[0]:n}var xi=function(n){try{return n.only([[]]),xi=function(){return[[]]},[[]]}catch{return xi=function(){return _r},_r}};function Lo(n){return n==null?function(){}:typeof n=="string"?Xc(n):function(r){return Q(r,n)}}function Xc(n){var r=n.split(".");return r.length===1?function(o){return o[n]}:function(o){return Q(o,n)}}function pu(n){return[].slice.call(n)}var Qc=0;function ki(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Zc(n,r,o){function u(A,M){var X=pu(A.objectStoreNames);return{schema:{name:A.name,tables:X.map(function(S){return M.objectStore(S)}).map(function(S){var P=S.keyPath,O=S.autoIncrement,R=v(P),j=P==null,H={},z={name:S.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j,compound:R,keyPath:P,autoIncrement:O,unique:!0,extractKey:Lo(P)},indexes:pu(S.indexNames).map(function(F){return S.index(F)}).map(function(F){var te=F.name,oe=F.unique,ne=F.multiEntry,ye=F.keyPath,Be=v(ye),se={name:te,compound:Be,keyPath:ye,unique:oe,multiEntry:ne,extractKey:Lo(ye)};return H[ki(ye)]=se,se}),getIndexByKeyPath:function(F){return H[ki(F)]}};return H[":id"]=z.primaryKey,P!=null&&(H[ki(P)]=z.primaryKey),z})},hasGetAll:X.length>0&&"getAll"in M.objectStore(X[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function c(A){if(A.type===3)return null;if(A.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=A.lower,X=A.upper,S=A.lowerOpen,P=A.upperOpen,O=M===void 0?X===void 0?null:r.upperBound(X,!!P):X===void 0?r.lowerBound(M,!!S):r.bound(M,X,!!S,!!P);return O}function d(A){var M=A.name;function X(O){var R=O.trans,j=O.type,H=O.keys,z=O.values,F=O.range;return new Promise(function(te,oe){te=ft(te);var ne=R.objectStore(M),ye=ne.keyPath==null,Be=j==="put"||j==="add";if(!Be&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var se=(H||z||{length:1}).length;if(H&&z&&H.length!==z.length)throw new Error("Given keys array must have same length as given values array.");if(se===0)return te({numFailures:0,failures:{},results:[],lastResult:void 0});var Oe,we=[],qe=[],he=0,gt=function(Sn){++he,wi(Sn)};if(j==="deleteRange"){if(F.type===4)return te({numFailures:he,failures:qe,results:[],lastResult:void 0});F.type===3?we.push(Oe=ne.clear()):we.push(Oe=ne.delete(c(F)))}else{var Rt=Be?ye?[z,H]:[z,null]:[H,null],An=Rt[0],Wt=Rt[1];if(Be)for(var ln=0;ln<se;++ln)we.push(Oe=Wt&&Wt[ln]!==void 0?ne[j](An[ln],Wt[ln]):ne[j](An[ln])),Oe.onerror=gt;else for(var ln=0;ln<se;++ln)we.push(Oe=ne[j](An[ln])),Oe.onerror=gt}var rr=function(Sn){var Si=Sn.target.result;we.forEach(function(mn,Ea){return mn.error!=null&&(qe[Ea]=mn.error)}),te({numFailures:he,failures:qe,results:j==="delete"?H:we.map(function(mn){return mn.result}),lastResult:Si})};Oe.onerror=function(Sn){gt(Sn),rr(Sn)},Oe.onsuccess=rr})}function S(O){var R=O.trans,j=O.values,H=O.query,z=O.reverse,F=O.unique;return new Promise(function(te,oe){te=ft(te);var ne=H.index,ye=H.range,Be=R.objectStore(M),se=ne.isPrimaryKey?Be:Be.index(ne.name),Oe=z?F?"prevunique":"prev":F?"nextunique":"next",we=j||!("openKeyCursor"in se)?se.openCursor(c(ye),Oe):se.openKeyCursor(c(ye),Oe);we.onerror=Tn(oe),we.onsuccess=ft(function(qe){var he=we.result;if(!he){te(null);return}he.___id=++Qc,he.done=!1;var gt=he.continue.bind(he),Rt=he.continuePrimaryKey;Rt&&(Rt=Rt.bind(he));var An=he.advance.bind(he),Wt=function(){throw new Error("Cursor not started")},ln=function(){throw new Error("Cursor not stopped")};he.trans=R,he.stop=he.continue=he.continuePrimaryKey=he.advance=Wt,he.fail=ft(oe),he.next=function(){var rr=this,Sn=1;return this.start(function(){return Sn--?rr.continue():rr.stop()}).then(function(){return rr})},he.start=function(rr){var Sn=new Promise(function(mn,Ea){mn=ft(mn),we.onerror=Tn(Ea),he.fail=Ea,he.stop=function(Ff){he.stop=he.continue=he.continuePrimaryKey=he.advance=ln,mn(Ff)}}),Si=function(){if(we.result)try{rr()}catch(mn){he.fail(mn)}else he.done=!0,he.start=function(){throw new Error("Cursor behind last entry")},he.stop()};return we.onsuccess=ft(function(mn){we.onsuccess=Si,Si()}),he.continue=gt,he.continuePrimaryKey=Rt,he.advance=An,Si(),Sn},te(he)},oe)})}function P(O){return function(R){return new Promise(function(j,H){j=ft(j);var z=R.trans,F=R.values,te=R.limit,oe=R.query,ne=te===1/0?void 0:te,ye=oe.index,Be=oe.range,se=z.objectStore(M),Oe=ye.isPrimaryKey?se:se.index(ye.name),we=c(Be);if(te===0)return j({result:[]});if(O){var qe=F?Oe.getAll(we,ne):Oe.getAllKeys(we,ne);qe.onsuccess=function(An){return j({result:An.target.result})},qe.onerror=Tn(H)}else{var he=0,gt=F||!("openKeyCursor"in Oe)?Oe.openCursor(we):Oe.openKeyCursor(we),Rt=[];gt.onsuccess=function(An){var Wt=gt.result;if(!Wt)return j({result:Rt});if(Rt.push(F?Wt.value:Wt.primaryKey),++he===te)return j({result:Rt});Wt.continue()},gt.onerror=Tn(H)}})}}return{name:M,schema:A,mutate:X,getMany:function(O){var R=O.trans,j=O.keys;return new Promise(function(H,z){H=ft(H);for(var F=R.objectStore(M),te=j.length,oe=new Array(te),ne=0,ye=0,Be,se=function(he){var gt=he.target;(oe[gt._pos]=gt.result)!=null,++ye===ne&&H(oe)},Oe=Tn(z),we=0;we<te;++we){var qe=j[we];qe!=null&&(Be=F.get(j[we]),Be._pos=we,Be.onsuccess=se,Be.onerror=Oe,++ne)}ne===0&&H(oe)})},get:function(O){var R=O.trans,j=O.key;return new Promise(function(H,z){H=ft(H);var F=R.objectStore(M),te=F.get(j);te.onsuccess=function(oe){return H(oe.target.result)},te.onerror=Tn(z)})},query:P(b),openCursor:S,count:function(O){var R=O.query,j=O.trans,H=R.index,z=R.range;return new Promise(function(F,te){var oe=j.objectStore(M),ne=H.isPrimaryKey?oe:oe.index(H.name),ye=c(z),Be=ye?ne.count(ye):ne.count();Be.onsuccess=ft(function(se){return F(se.target.result)}),Be.onerror=Tn(te)})}}}var p=u(n,o),g=p.schema,b=p.hasGetAll,k=g.tables.map(function(A){return d(A)}),I={};return k.forEach(function(A){return I[A.name]=A}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(A){var M=I[A];if(!M)throw new Error("Table '".concat(A,"' not found"));return I[A]},MIN_KEY:-1/0,MAX_KEY:xi(r),schema:g}}function Jc(n,r){return r.reduce(function(o,u){var c=u.create;return s(s({},o),c(o))},n)}function $c(n,r,o,u){var c=o.IDBKeyRange;o.indexedDB;var d=Jc(Zc(r,c,u),n.dbcore);return{dbcore:d}}function fa(n,r){var o=r.db,u=$c(n._middlewares,o,n._deps,r);n.core=u.dbcore,n.tables.forEach(function(c){var d=c.name;n.core.schema.tables.some(function(p){return p.name===d})&&(c.core=n.core.table(d),n[d]instanceof n.Table&&(n[d].core=c.core))})}function da(n,r,o,u){o.forEach(function(c){var d=u[c];r.forEach(function(p){var g=V(p,c);(!g||"value"in g&&g.value===void 0)&&(p===n.Transaction.prototype||p instanceof n.Transaction?L(p,c,{get:function(){return this.table(c)},set:function(b){D(this,c,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):p[c]=new n.Table(c,d))})})}function Po(n,r){r.forEach(function(o){for(var u in o)o[u]instanceof n.Table&&delete o[u]})}function ef(n,r){return n._cfg.version-r._cfg.version}function tf(n,r,o,u){var c=n._dbSchema;o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Co("$meta",gu("")[0],[]),n._storeNames.push("$meta"));var d=n._createTransaction("readwrite",n._storeNames,c);d.create(o),d._completion.catch(u);var p=d._reject.bind(d),g=fe.transless||fe;Qn(function(){if(fe.trans=d,fe.transless=g,r===0)h(c).forEach(function(b){Mo(o,b,c[b].primKey,c[b].indexes)}),fa(n,o),re.follow(function(){return n.on.populate.fire(d)}).catch(p);else return fa(n,o),rf(n,d,r).then(function(b){return af(n,b,d,o)}).catch(p)})}function nf(n,r){mu(n._dbSchema,r),r.db.version%10===0&&!r.objectStoreNames.contains("$meta")&&r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var o=va(n,n.idbdb,r);pa(n,n._dbSchema,r);for(var u=Oo(o,n._dbSchema),c=function(k){if(k.change.length||k.recreate)return console.warn("Unable to patch indexes of table ".concat(k.name," because it has changes on the type of index or primary key.")),{value:void 0};var I=r.objectStore(k.name);k.add.forEach(function(A){ot&&console.debug("Dexie upgrade patch: Creating missing index ".concat(k.name,".").concat(A.src)),ha(I,A)})},d=0,p=u.change;d<p.length;d++){var g=p[d],b=c(g);if(typeof b=="object")return b.value}}function rf(n,r,o){return r.storeNames.includes("$meta")?r.table("$meta").get("version").then(function(u){return u??o}):re.resolve(o)}function af(n,r,o,u){var c=[],d=n._versions,p=n._dbSchema=va(n,n.idbdb,u),g=d.filter(function(k){return k._cfg.version>=r});if(g.length===0)return re.resolve();g.forEach(function(k){c.push(function(){var I=p,A=k._cfg.dbschema;pa(n,I,u),pa(n,A,u),p=n._dbSchema=A;var M=Oo(I,A);M.add.forEach(function(j){Mo(u,j[0],j[1].primKey,j[1].indexes)}),M.change.forEach(function(j){if(j.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var H=u.objectStore(j.name);j.add.forEach(function(z){return ha(H,z)}),j.change.forEach(function(z){H.deleteIndex(z.name),ha(H,z)}),j.del.forEach(function(z){return H.deleteIndex(z)})});var X=k._cfg.contentUpgrade;if(X&&k._cfg.version>r){fa(n,u),o._memoizedTables={};var S=me(A);M.del.forEach(function(j){S[j]=I[j]}),Po(n,[n.Transaction.prototype]),da(n,[n.Transaction.prototype],h(S),S),o.schema=S;var P=ke(X);P&&zr();var O,R=re.follow(function(){if(O=X(o),O&&P){var j=Zn.bind(null,null);O.then(j,j)}});return O&&typeof O.then=="function"?re.resolve(O):R.then(function(){return O})}}),c.push(function(I){var A=k._cfg.dbschema;of(A,I),Po(n,[n.Transaction.prototype]),da(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),o.schema=n._dbSchema}),c.push(function(I){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===k._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(A){return A!=="$meta"})):I.objectStore("$meta").put(k._cfg.version,"version"))})});function b(){return c.length?re.resolve(c.shift()(o.idbtrans)).then(b):re.resolve()}return b().then(function(){mu(p,u)})}function Oo(n,r){var o={del:[],add:[],change:[]},u;for(u in n)r[u]||o.del.push(u);for(u in r){var c=n[u],d=r[u];if(!c)o.add.push([u,d]);else{var p={name:u,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)p.recreate=!0,o.change.push(p);else{var g=c.idxByName,b=d.idxByName,k=void 0;for(k in g)b[k]||p.del.push(k);for(k in b){var I=g[k],A=b[k];I?I.src!==A.src&&p.change.push(A):p.add.push(A)}(p.del.length>0||p.add.length>0||p.change.length>0)&&o.change.push(p)}}}return o}function Mo(n,r,o,u){var c=n.db.createObjectStore(r,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return u.forEach(function(d){return ha(c,d)}),c}function mu(n,r){h(n).forEach(function(o){r.db.objectStoreNames.contains(o)||(ot&&console.debug("Dexie: Creating missing table",o),Mo(r,o,n[o].primKey,n[o].indexes))})}function of(n,r){[].slice.call(r.db.objectStoreNames).forEach(function(o){return n[o]==null&&r.db.deleteObjectStore(o)})}function ha(n,r){n.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function va(n,r,o){var u={},c=B(r.objectStoreNames,0);return c.forEach(function(d){for(var p=o.objectStore(d),g=p.keyPath,b=Do(vu(g),g||"",!0,!1,!!p.autoIncrement,g&&typeof g!="string",!0),k=[],I=0;I<p.indexNames.length;++I){var A=p.index(p.indexNames[I]);g=A.keyPath;var M=Do(A.name,g,!!A.unique,!!A.multiEntry,!1,g&&typeof g!="string",!1);k.push(M)}u[d]=Co(d,b,k)}),u}function sf(n,r,o){n.verno=r.version/10;var u=n._dbSchema=va(n,r,o);n._storeNames=B(r.objectStoreNames,0),da(n,[n._allTables],h(u),u)}function uf(n,r){var o=va(n,n.idbdb,r),u=Oo(o,n._dbSchema);return!(u.add.length||u.change.some(function(c){return c.add.length||c.change.length}))}function pa(n,r,o){for(var u=o.db.objectStoreNames,c=0;c<u.length;++c){var d=u[c],p=o.objectStore(d);n._hasGetAll="getAll"in p;for(var g=0;g<p.indexNames.length;++g){var b=p.indexNames[g],k=p.index(b).keyPath,I=typeof k=="string"?k:"["+B(k).join("+")+"]";if(r[d]){var A=r[d].idxByName[I];A&&(A.name=b,delete r[d].idxByName[I],r[d].idxByName[b]=A)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function gu(n){return n.split(",").map(function(r,o){var u,c=r.split(":"),d=(u=c[1])===null||u===void 0?void 0:u.trim();r=c[0].trim();var p=r.replace(/([&*]|\+\+)/g,""),g=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return Do(p,g||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),v(g),o===0,d)})}var lf=(function(){function n(){}return n.prototype._createTableSchema=function(r,o,u){return Co(r,o,u)},n.prototype._parseIndexSyntax=function(r){return gu(r)},n.prototype._parseStoresSpec=function(r,o){var u=this;h(r).forEach(function(c){if(r[c]!==null){var d=u._parseIndexSyntax(r[c]),p=d.shift();if(!p)throw new ue.Schema("Invalid schema for table "+c+": "+r[c]);if(p.unique=!0,p.multi)throw new ue.Schema("Primary key cannot be multiEntry*");d.forEach(function(b){if(b.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")});var g=u._createTableSchema(c,p,d);o[c]=g}})},n.prototype.stores=function(r){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,r):r;var u=o._versions,c={},d={};return u.forEach(function(p){m(c,p._cfg.storesSource),d=p._cfg.dbschema={},p._parseStoresSpec(c,d)}),o._dbSchema=d,Po(o,[o._allTables,o,o.Transaction.prototype]),da(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],h(d),d),o._storeNames=h(d),this},n.prototype.upgrade=function(r){return this._cfg.contentUpgrade=at(this._cfg.contentUpgrade||Ke,r),this},n})();function cf(n){return _i(lf.prototype,function(o){this.db=n,this._cfg={version:o,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ro(n,r){var o=n._dbNamesDB;return o||(o=n._dbNamesDB=new Nn(aa,{addons:[],indexedDB:n,IDBKeyRange:r}),o.version(1).stores({dbnames:"name"})),o.table("dbnames")}function Ko(n){return n&&typeof n.databases=="function"}function ff(n){var r=n.indexedDB,o=n.IDBKeyRange;return Ko(r)?Promise.resolve(r.databases()).then(function(u){return u.map(function(c){return c.name}).filter(function(c){return c!==aa})}):Ro(r,o).toCollection().primaryKeys()}function df(n,r){var o=n.indexedDB,u=n.IDBKeyRange;!Ko(o)&&r!==aa&&Ro(o,u).put({name:r}).catch(Ke)}function hf(n,r){var o=n.indexedDB,u=n.IDBKeyRange;!Ko(o)&&r!==aa&&Ro(o,u).delete(r).catch(Ke)}function Bo(n){return Qn(function(){return fe.letThrough=!0,n()})}function vf(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(o){var u=function(){return indexedDB.databases().finally(o)};r=setInterval(u,100),u()}).finally(function(){return clearInterval(r)})}var No;function Fo(n){return!("from"in n)}var Mt=function(n,r){if(this)m(this,arguments.length?{d:1,from:n,to:arguments.length>1?r:n}:{d:0});else{var o=new Mt;return n&&"d"in n&&m(o,n),o}};x(Mt.prototype,(No={add:function(n){return Ai(this,n),this},addKey:function(n){return Ti(this,n,n),this},addKeys:function(n){var r=this;return n.forEach(function(o){return Ti(r,o,o)}),this},hasKey:function(n){var r=ma(this).next(n).value;return r&&Ye(r.from,n)<=0&&Ye(r.to,n)>=0}},No[Ue]=function(){return ma(this)},No));function Ti(n,r,o){var u=Ye(r,o);if(!isNaN(u)){if(u>0)throw RangeError();if(Fo(n))return m(n,{from:r,to:o,d:1});var c=n.l,d=n.r;if(Ye(o,n.from)<0)return c?Ti(c,r,o):n.l={from:r,to:o,d:1,l:null,r:null},bu(n);if(Ye(r,n.to)>0)return d?Ti(d,r,o):n.r={from:r,to:o,d:1,l:null,r:null},bu(n);Ye(r,n.from)<0&&(n.from=r,n.l=null,n.d=d?d.d+1:1),Ye(o,n.to)>0&&(n.to=o,n.r=null,n.d=n.l?n.l.d+1:1);var p=!n.r;c&&!n.l&&Ai(n,c),d&&p&&Ai(n,d)}}function Ai(n,r){function o(u,c){var d=c.from,p=c.to,g=c.l,b=c.r;Ti(u,d,p),g&&o(u,g),b&&o(u,b)}Fo(r)||o(n,r)}function yu(n,r){var o=ma(r),u=o.next();if(u.done)return!1;for(var c=u.value,d=ma(n),p=d.next(c.from),g=p.value;!u.done&&!p.done;){if(Ye(g.from,c.to)<=0&&Ye(g.to,c.from)>=0)return!0;Ye(c.from,g.from)<0?c=(u=o.next(g.from)).value:g=(p=d.next(c.from)).value}return!1}function ma(n){var r=Fo(n)?null:{s:0,n};return{next:function(o){for(var u=arguments.length>0;r;)switch(r.s){case 0:if(r.s=1,u)for(;r.n.l&&Ye(o,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!u||Ye(o,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function bu(n){var r,o,u=(((r=n.r)===null||r===void 0?void 0:r.d)||0)-(((o=n.l)===null||o===void 0?void 0:o.d)||0),c=u>1?"r":u<-1?"l":"";if(c){var d=c==="r"?"l":"r",p=s({},n),g=n[c];n.from=g.from,n.to=g.to,n[c]=g[c],p[c]=g[d],n[d]=p,p.d=_u(p)}n.d=_u(n)}function _u(n){var r=n.r,o=n.l;return(r?o?Math.max(r.d,o.d):r.d:o?o.d:0)+1}function ga(n,r){return h(r).forEach(function(o){n[o]?Ai(n[o],r[o]):n[o]=st(r[o])}),n}function jo(n,r){return n.all||r.all||Object.keys(n).some(function(o){return r[o]&&yu(r[o],n[o])})}var Er={},Ho={},Uo=!1;function ya(n,r){ga(Ho,n),Uo||(Uo=!0,setTimeout(function(){Uo=!1;var o=Ho;Ho={},zo(o,!1)},0))}function zo(n,r){r===void 0&&(r=!1);var o=new Set;if(n.all)for(var u=0,c=Object.values(Er);u<c.length;u++){var d=c[u];wu(d,n,o,r)}else for(var p in n){var g=/^idb\:\/\/(.*)\/(.*)\//.exec(p);if(g){var b=g[1],k=g[2],d=Er["idb://".concat(b,"/").concat(k)];d&&wu(d,n,o,r)}}o.forEach(function(I){return I()})}function wu(n,r,o,u){for(var c=[],d=0,p=Object.entries(n.queries.query);d<p.length;d++){for(var g=p[d],b=g[0],k=g[1],I=[],A=0,M=k;A<M.length;A++){var X=M[A];jo(r,X.obsSet)?X.subscribers.forEach(function(R){return o.add(R)}):u&&I.push(X)}u&&c.push([b,I])}if(u)for(var S=0,P=c;S<P.length;S++){var O=P[S],b=O[0],I=O[1];n.queries.query[b]=I}}function pf(n){var r=n._state,o=n._deps.indexedDB;if(r.isBeingOpened||n.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?_t(r.dbOpenError):n});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var u=r.openCanceller,c=Math.round(n.verno*10),d=!1;function p(){if(r.openCanceller!==u)throw new ue.DatabaseClosed("db.open() was cancelled")}var g=r.dbReadyResolve,b=null,k=!1,I=function(){return new re(function(A,M){if(p(),!o)throw new ue.MissingAPI;var X=n.name,S=r.autoSchema||!c?o.open(X):o.open(X,c);if(!S)throw new ue.MissingAPI;S.onerror=Tn(M),S.onblocked=ft(n._fireOnBlocked),S.onupgradeneeded=ft(function(P){if(b=S.transaction,r.autoSchema&&!n._options.allowEmptyDB){S.onerror=wi,b.abort(),S.result.close();var O=o.deleteDatabase(X);O.onsuccess=O.onerror=ft(function(){M(new ue.NoSuchDatabase("Database ".concat(X," doesnt exist")))})}else{b.onerror=Tn(M);var R=P.oldVersion>Math.pow(2,62)?0:P.oldVersion;k=R<1,n.idbdb=S.result,d&&nf(n,b),tf(n,R/10,b,M)}},M),S.onsuccess=ft(function(){b=null;var P=n.idbdb=S.result,O=B(P.objectStoreNames);if(O.length>0)try{var R=P.transaction(Gc(O),"readonly");if(r.autoSchema)sf(n,P,R);else if(pa(n,n._dbSchema,R),!uf(n,R)&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),P.close(),c=P.version+1,d=!0,A(I());fa(n,R)}catch{}Vr.push(n),P.onversionchange=ft(function(j){r.vcFired=!0,n.on("versionchange").fire(j)}),P.onclose=ft(function(){n.close({disableAutoOpen:!1})}),k&&df(n._deps,X),A()},M)}).catch(function(A){switch(A?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),I();break;case"VersionError":if(c>0)return c=0,I();break}return re.reject(A)})};return re.race([u,(typeof navigator>"u"?re.resolve():vf()).then(I)]).then(function(){return p(),r.onReadyBeingFired=[],re.resolve(Bo(function(){return n.on.ready.fire(n.vip)})).then(function A(){if(r.onReadyBeingFired.length>0){var M=r.onReadyBeingFired.reduce(at,Ke);return r.onReadyBeingFired=[],re.resolve(Bo(function(){return M(n.vip)})).then(A)}})}).finally(function(){r.openCanceller===u&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(A){r.dbOpenError=A;try{b&&b.abort()}catch{}return u===r.openCanceller&&n._close(),_t(A)}).finally(function(){r.openComplete=!0,g()}).then(function(){if(k){var A={};n.tables.forEach(function(M){M.schema.indexes.forEach(function(X){X.name&&(A["idb://".concat(n.name,"/").concat(M.name,"/").concat(X.name)]=new Mt(-1/0,[[[]]]))}),A["idb://".concat(n.name,"/").concat(M.name,"/")]=A["idb://".concat(n.name,"/").concat(M.name,"/:dels")]=new Mt(-1/0,[[[]]])}),er(Ei).fire(A),zo(A,!0)}return n})}function Vo(n){var r=function(p){return n.next(p)},o=function(p){return n.throw(p)},u=d(r),c=d(o);function d(p){return function(g){var b=p(g),k=b.value;return b.done?k:!k||typeof k.then!="function"?v(k)?Promise.all(k).then(u,c):u(k):k.then(u,c)}}return d(r)()}function mf(n,r,o){var u=arguments.length;if(u<2)throw new ue.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];o=c.pop();var d=ge(c);return[n,d,o]}function Eu(n,r,o,u,c){return re.resolve().then(function(){var d=fe.transless||fe,p=n._createTransaction(r,o,n._dbSchema,u);p.explicit=!0;var g={trans:p,transless:d};if(u)p.idbtrans=u.idbtrans;else try{p.create(),p.idbtrans._explicit=!0,n._state.PR1398_maxLoop=3}catch(A){return A.name===bt.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return Eu(n,r,o,null,c)})):_t(A)}var b=ke(c);b&&zr();var k,I=re.follow(function(){if(k=c.call(p,p),k)if(b){var A=Zn.bind(null,null);k.then(A,A)}else typeof k.next=="function"&&typeof k.throw=="function"&&(k=Vo(k))},g);return(k&&typeof k.then=="function"?re.resolve(k).then(function(A){return p.active?A:_t(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):I.then(function(){return k})).then(function(A){return u&&p._resolve(),p._completion.then(function(){return A})}).catch(function(A){return p._reject(A),_t(A)})})}function ba(n,r,o){for(var u=v(n)?n.slice():[n],c=0;c<o;++c)u.push(r);return u}function gf(n){return s(s({},n),{table:function(r){var o=n.table(r),u=o.schema,c={},d=[];function p(P,O,R){var j=ki(P),H=c[j]=c[j]||[],z=P==null?0:typeof P=="string"?1:P.length,F=O>0,te=s(s({},R),{name:F?"".concat(j,"(virtual-from:").concat(R.name,")"):R.name,lowLevelIndex:R,isVirtual:F,keyTail:O,keyLength:z,extractKey:Lo(P),unique:!F&&R.unique});if(H.push(te),te.isPrimaryKey||d.push(te),z>1){var oe=z===2?P[0]:P.slice(0,z-1);p(oe,O+1,R)}return H.sort(function(ne,ye){return ne.keyTail-ye.keyTail}),te}var g=p(u.primaryKey.keyPath,0,u.primaryKey);c[":id"]=[g];for(var b=0,k=u.indexes;b<k.length;b++){var I=k[b];p(I.keyPath,0,I)}function A(P){var O=c[ki(P)];return O&&O[0]}function M(P,O){return{type:P.type===1?2:P.type,lower:ba(P.lower,P.lowerOpen?n.MAX_KEY:n.MIN_KEY,O),lowerOpen:!0,upper:ba(P.upper,P.upperOpen?n.MIN_KEY:n.MAX_KEY,O),upperOpen:!0}}function X(P){var O=P.query.index;return O.isVirtual?s(s({},P),{query:{index:O.lowLevelIndex,range:M(P.query.range,O.keyTail)}}):P}var S=s(s({},o),{schema:s(s({},u),{primaryKey:g,indexes:d,getIndexByKeyPath:A}),count:function(P){return o.count(X(P))},query:function(P){return o.query(X(P))},openCursor:function(P){var O=P.query.index,R=O.keyTail,j=O.isVirtual,H=O.keyLength;if(!j)return o.openCursor(P);function z(F){function te(ne){ne!=null?F.continue(ba(ne,P.reverse?n.MAX_KEY:n.MIN_KEY,R)):P.unique?F.continue(F.key.slice(0,H).concat(P.reverse?n.MIN_KEY:n.MAX_KEY,R)):F.continue()}var oe=Object.create(F,{continue:{value:te},continuePrimaryKey:{value:function(ne,ye){F.continuePrimaryKey(ba(ne,n.MAX_KEY,R),ye)}},primaryKey:{get:function(){return F.primaryKey}},key:{get:function(){var ne=F.key;return H===1?ne[0]:ne.slice(0,H)}},value:{get:function(){return F.value}}});return oe}return o.openCursor(X(P)).then(function(F){return F&&z(F)})}});return S}})}var yf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:gf};function Yo(n,r,o,u){return o=o||{},u=u||"",h(n).forEach(function(c){if(!w(r,c))o[u+c]=void 0;else{var d=n[c],p=r[c];if(typeof d=="object"&&typeof p=="object"&&d&&p){var g=nt(d),b=nt(p);g!==b?o[u+c]=r[c]:g==="Object"?Yo(d,p,o,u+c+"."):d!==p&&(o[u+c]=r[c])}else d!==p&&(o[u+c]=r[c])}}),h(r).forEach(function(c){w(n,c)||(o[u+c]=r[c])}),o}function Wo(n,r){return r.type==="delete"?r.keys:r.keys||r.values.map(n.extractKey)}var bf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return s(s({},n),{table:function(r){var o=n.table(r),u=o.schema.primaryKey,c=s(s({},o),{mutate:function(d){var p=fe.trans,g=p.table(r).hook,b=g.deleting,k=g.creating,I=g.updating;switch(d.type){case"add":if(k.fire===Ke)break;return p._promise("readwrite",function(){return A(d)},!0);case"put":if(k.fire===Ke&&I.fire===Ke)break;return p._promise("readwrite",function(){return A(d)},!0);case"delete":if(b.fire===Ke)break;return p._promise("readwrite",function(){return A(d)},!0);case"deleteRange":if(b.fire===Ke)break;return p._promise("readwrite",function(){return M(d)},!0)}return o.mutate(d);function A(S){var P=fe.trans,O=S.keys||Wo(u,S);if(!O)throw new Error("Keys missing");return S=S.type==="add"||S.type==="put"?s(s({},S),{keys:O}):s({},S),S.type!=="delete"&&(S.values=l([],S.values)),S.keys&&(S.keys=l([],S.keys)),_f(o,S,O).then(function(R){var j=O.map(function(H,z){var F=R[z],te={onerror:null,onsuccess:null};if(S.type==="delete")b.fire.call(te,H,F,P);else if(S.type==="add"||F===void 0){var oe=k.fire.call(te,H,S.values[z],P);H==null&&oe!=null&&(H=oe,S.keys[z]=H,u.outbound||ie(S.values[z],u.keyPath,H))}else{var ne=Yo(F,S.values[z]),ye=I.fire.call(te,ne,H,F,P);if(ye){var Be=S.values[z];Object.keys(ye).forEach(function(se){w(Be,se)?Be[se]=ye[se]:ie(Be,se,ye[se])})}}return te});return o.mutate(S).then(function(H){for(var z=H.failures,F=H.results,te=H.numFailures,oe=H.lastResult,ne=0;ne<O.length;++ne){var ye=F?F[ne]:O[ne],Be=j[ne];ye==null?Be.onerror&&Be.onerror(z[ne]):Be.onsuccess&&Be.onsuccess(S.type==="put"&&R[ne]?S.values[ne]:ye)}return{failures:z,results:F,numFailures:te,lastResult:oe}}).catch(function(H){return j.forEach(function(z){return z.onerror&&z.onerror(H)}),Promise.reject(H)})})}function M(S){return X(S.trans,S.range,1e4)}function X(S,P,O){return o.query({trans:S,values:!1,query:{index:u,range:P},limit:O}).then(function(R){var j=R.result;return A({type:"delete",keys:j,trans:S}).then(function(H){return H.numFailures>0?Promise.reject(H.failures[0]):j.length<O?{failures:[],numFailures:0,lastResult:void 0}:X(S,s(s({},P),{lower:j[j.length-1],lowerOpen:!0}),O)})})}}});return c}})}};function _f(n,r,o){return r.type==="add"?Promise.resolve([]):n.getMany({trans:r.trans,keys:o,cache:"immutable"})}function xu(n,r,o){try{if(!r||r.keys.length<n.length)return null;for(var u=[],c=0,d=0;c<r.keys.length&&d<n.length;++c)Ye(r.keys[c],n[d])===0&&(u.push(o?Ee(r.values[c]):r.values[c]),++d);return u.length===n.length?u:null}catch{return null}}var wf={stack:"dbcore",level:-1,create:function(n){return{table:function(r){var o=n.table(r);return s(s({},o),{getMany:function(u){if(!u.cache)return o.getMany(u);var c=xu(u.keys,u.trans._cache,u.cache==="clone");return c?re.resolve(c):o.getMany(u).then(function(d){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?Ee(d):d},d})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),o.mutate(u)}})}}}};function ku(n,r){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function Tu(n,r){switch(n){case"query":return r.values&&!r.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Ef={stack:"dbcore",level:0,name:"Observability",create:function(n){var r=n.schema.name,o=new Mt(n.MIN_KEY,n.MAX_KEY);return s(s({},n),{transaction:function(u,c,d){if(fe.subscr&&c!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(fe.querier));return n.transaction(u,c,d)},table:function(u){var c=n.table(u),d=c.schema,p=d.primaryKey,g=d.indexes,b=p.extractKey,k=p.outbound,I=p.autoIncrement&&g.filter(function(S){return S.compound&&S.keyPath.includes(p.keyPath)}),A=s(s({},c),{mutate:function(S){var P,O,R=S.trans,j=S.mutatedParts||(S.mutatedParts={}),H=function(we){var qe="idb://".concat(r,"/").concat(u,"/").concat(we);return j[qe]||(j[qe]=new Mt)},z=H(""),F=H(":dels"),te=S.type,oe=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[Wo(p,S).filter(function(we){return we}),S.values]:[],ne=oe[0],ye=oe[1],Be=S.trans._cache;if(v(ne)){z.addKeys(ne);var se=te==="delete"||ne.length===ye.length?xu(ne,Be):null;se||F.addKeys(ne),(se||ye)&&xf(H,d,se,ye)}else if(ne){var Oe={from:(P=ne.lower)!==null&&P!==void 0?P:n.MIN_KEY,to:(O=ne.upper)!==null&&O!==void 0?O:n.MAX_KEY};F.add(Oe),z.add(Oe)}else z.add(o),F.add(o),d.indexes.forEach(function(we){return H(we.name).add(o)});return c.mutate(S).then(function(we){return ne&&(S.type==="add"||S.type==="put")&&(z.addKeys(we.results),I&&I.forEach(function(qe){for(var he=S.values.map(function(Wt){return qe.extractKey(Wt)}),gt=qe.keyPath.findIndex(function(Wt){return Wt===p.keyPath}),Rt=0,An=we.results.length;Rt<An;++Rt)he[Rt][gt]=we.results[Rt];H(qe.name).addKeys(he)})),R.mutatedParts=ga(R.mutatedParts||{},j),we})}}),M=function(S){var P,O,R=S.query,j=R.index,H=R.range;return[j,new Mt((P=H.lower)!==null&&P!==void 0?P:n.MIN_KEY,(O=H.upper)!==null&&O!==void 0?O:n.MAX_KEY)]},X={get:function(S){return[p,new Mt(S.key)]},getMany:function(S){return[p,new Mt().addKeys(S.keys)]},count:M,query:M,openCursor:M};return h(X).forEach(function(S){A[S]=function(P){var O=fe.subscr,R=!!O,j=ku(fe,c)&&Tu(S,P),H=j?P.obsSet={}:O;if(R){var z=function(se){var Oe="idb://".concat(r,"/").concat(u,"/").concat(se);return H[Oe]||(H[Oe]=new Mt)},F=z(""),te=z(":dels"),oe=X[S](P),ne=oe[0],ye=oe[1];if(S==="query"&&ne.isPrimaryKey&&!P.values?te.add(ye):z(ne.name||"").add(ye),!ne.isPrimaryKey)if(S==="count")te.add(o);else{var Be=S==="query"&&k&&P.values&&c.query(s(s({},P),{values:!1}));return c[S].apply(this,arguments).then(function(se){if(S==="query"){if(k&&P.values)return Be.then(function(he){var gt=he.result;return F.addKeys(gt),se});var Oe=P.values?se.result.map(b):se.result;P.values?F.addKeys(Oe):te.addKeys(Oe)}else if(S==="openCursor"){var we=se,qe=P.values;return we&&Object.create(we,{key:{get:function(){return te.addKey(we.primaryKey),we.key}},primaryKey:{get:function(){var he=we.primaryKey;return te.addKey(he),he}},value:{get:function(){return qe&&F.addKey(we.primaryKey),we.value}}})}return se})}}return c[S].apply(this,arguments)}}),A}})}};function xf(n,r,o,u){function c(d){var p=n(d.name||"");function g(k){return k!=null?d.extractKey(k):null}var b=function(k){return d.multiEntry&&v(k)?k.forEach(function(I){return p.addKey(I)}):p.addKey(k)};(o||u).forEach(function(k,I){var A=o&&g(o[I]),M=u&&g(u[I]);Ye(A,M)!==0&&(A!=null&&b(A),M!=null&&b(M))})}r.indexes.forEach(c)}function Au(n,r,o){if(o.numFailures===0)return r;if(r.type==="deleteRange")return null;var u=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;if(o.numFailures===u)return null;var c=s({},r);return v(c.keys)&&(c.keys=c.keys.filter(function(d,p){return!(p in o.failures)})),"values"in c&&v(c.values)&&(c.values=c.values.filter(function(d,p){return!(p in o.failures)})),c}function kf(n,r){return r.lower===void 0?!0:r.lowerOpen?Ye(n,r.lower)>0:Ye(n,r.lower)>=0}function Tf(n,r){return r.upper===void 0?!0:r.upperOpen?Ye(n,r.upper)<0:Ye(n,r.upper)<=0}function qo(n,r){return kf(n,r)&&Tf(n,r)}function Su(n,r,o,u,c,d){if(!o||o.length===0)return n;var p=r.query.index,g=p.multiEntry,b=r.query.range,k=u.schema.primaryKey,I=k.extractKey,A=p.extractKey,M=(p.lowLevelIndex||p).extractKey,X=o.reduce(function(S,P){var O=S,R=[];if(P.type==="add"||P.type==="put")for(var j=new Mt,H=P.values.length-1;H>=0;--H){var z=P.values[H],F=I(z);if(!j.hasKey(F)){var te=A(z);(g&&v(te)?te.some(function(se){return qo(se,b)}):qo(te,b))&&(j.addKey(F),R.push(z))}}switch(P.type){case"add":{var oe=new Mt().addKeys(r.values?S.map(function(se){return I(se)}):S);O=S.concat(r.values?R.filter(function(se){var Oe=I(se);return oe.hasKey(Oe)?!1:(oe.addKey(Oe),!0)}):R.map(function(se){return I(se)}).filter(function(se){return oe.hasKey(se)?!1:(oe.addKey(se),!0)}));break}case"put":{var ne=new Mt().addKeys(P.values.map(function(se){return I(se)}));O=S.filter(function(se){return!ne.hasKey(r.values?I(se):se)}).concat(r.values?R:R.map(function(se){return I(se)}));break}case"delete":var ye=new Mt().addKeys(P.keys);O=S.filter(function(se){return!ye.hasKey(r.values?I(se):se)});break;case"deleteRange":var Be=P.range;O=S.filter(function(se){return!qo(I(se),Be)});break}return O},n);return X===n?n:(X.sort(function(S,P){return Ye(M(S),M(P))||Ye(I(S),I(P))}),r.limit&&r.limit<1/0&&(X.length>r.limit?X.length=r.limit:n.length===r.limit&&X.length<r.limit&&(c.dirty=!0)),d?Object.freeze(X):X)}function Iu(n,r){return Ye(n.lower,r.lower)===0&&Ye(n.upper,r.upper)===0&&!!n.lowerOpen==!!r.lowerOpen&&!!n.upperOpen==!!r.upperOpen}function Af(n,r,o,u){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;var c=Ye(n,r);if(c===0){if(o&&u)return 0;if(o)return 1;if(u)return-1}return c}function Sf(n,r,o,u){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;var c=Ye(n,r);if(c===0){if(o&&u)return 0;if(o)return-1;if(u)return 1}return c}function If(n,r){return Af(n.lower,r.lower,n.lowerOpen,r.lowerOpen)<=0&&Sf(n.upper,r.upper,n.upperOpen,r.upperOpen)>=0}function Df(n,r,o,u){var c=Er["idb://".concat(n,"/").concat(r)];if(!c)return[];var d=c.queries[o];if(!d)return[null,!1,c,null];var p=u.query?u.query.index.name:null,g=d[p||""];if(!g)return[null,!1,c,null];switch(o){case"query":var b=g.find(function(A){return A.req.limit===u.limit&&A.req.values===u.values&&Iu(A.req.query.range,u.query.range)});if(b)return[b,!0,c,g];var k=g.find(function(A){var M="limit"in A.req?A.req.limit:1/0;return M>=u.limit&&(u.values?A.req.values:!0)&&If(A.req.query.range,u.query.range)});return[k,!1,c,g];case"count":var I=g.find(function(A){return Iu(A.req.query.range,u.query.range)});return[I,!!I,c,g]}}function Cf(n,r,o,u){n.subscribers.add(o),u.addEventListener("abort",function(){n.subscribers.delete(o),n.subscribers.size===0&&Lf(n,r)})}function Lf(n,r){setTimeout(function(){n.subscribers.size===0&&G(r,n)},3e3)}var Pf={stack:"dbcore",level:0,name:"Cache",create:function(n){var r=n.schema.name,o=s(s({},n),{transaction:function(u,c,d){var p=n.transaction(u,c,d);if(c==="readwrite"){var g=new AbortController,b=g.signal,k=function(I){return function(){if(g.abort(),c==="readwrite"){for(var A=new Set,M=0,X=u;M<X.length;M++){var S=X[M],P=Er["idb://".concat(r,"/").concat(S)];if(P){var O=n.table(S),R=P.optimisticOps.filter(function(qe){return qe.trans===p});if(p._explicit&&I&&p.mutatedParts)for(var j=0,H=Object.values(P.queries.query);j<H.length;j++)for(var z=H[j],F=0,te=z.slice();F<te.length;F++){var oe=te[F];jo(oe.obsSet,p.mutatedParts)&&(G(z,oe),oe.subscribers.forEach(function(qe){return A.add(qe)}))}else if(R.length>0){P.optimisticOps=P.optimisticOps.filter(function(qe){return qe.trans!==p});for(var ne=0,ye=Object.values(P.queries.query);ne<ye.length;ne++)for(var z=ye[ne],Be=0,se=z.slice();Be<se.length;Be++){var oe=se[Be];if(oe.res!=null&&p.mutatedParts)if(I&&!oe.dirty){var Oe=Object.isFrozen(oe.res),we=Su(oe.res,oe.req,R,O,oe,Oe);oe.dirty?(G(z,oe),oe.subscribers.forEach(function(gt){return A.add(gt)})):we!==oe.res&&(oe.res=we,oe.promise=re.resolve({result:we}))}else oe.dirty&&G(z,oe),oe.subscribers.forEach(function(gt){return A.add(gt)})}}}}A.forEach(function(qe){return qe()})}}};p.addEventListener("abort",k(!1),{signal:b}),p.addEventListener("error",k(!1),{signal:b}),p.addEventListener("complete",k(!0),{signal:b})}return p},table:function(u){var c=n.table(u),d=c.schema.primaryKey,p=s(s({},c),{mutate:function(g){var b=fe.trans;if(d.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return c.mutate(g);var k=Er["idb://".concat(r,"/").concat(u)];if(!k)return c.mutate(g);var I=c.mutate(g);return(g.type==="add"||g.type==="put")&&(g.values.length>=50||Wo(d,g).some(function(A){return A==null}))?I.then(function(A){var M=s(s({},g),{values:g.values.map(function(S,P){var O;if(A.failures[P])return S;var R=!((O=d.keyPath)===null||O===void 0)&&O.includes(".")?Ee(S):s({},S);return ie(R,d.keyPath,A.results[P]),R})}),X=Au(k,M,A);k.optimisticOps.push(X),queueMicrotask(function(){return g.mutatedParts&&ya(g.mutatedParts)})}):(k.optimisticOps.push(g),g.mutatedParts&&ya(g.mutatedParts),I.then(function(A){if(A.numFailures>0){G(k.optimisticOps,g);var M=Au(k,g,A);M&&k.optimisticOps.push(M),g.mutatedParts&&ya(g.mutatedParts)}}),I.catch(function(){G(k.optimisticOps,g),g.mutatedParts&&ya(g.mutatedParts)})),I},query:function(g){var b;if(!ku(fe,c)||!Tu("query",g))return c.query(g);var k=((b=fe.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",I=fe,A=I.requery,M=I.signal,X=Df(r,u,"query",g),S=X[0],P=X[1],O=X[2],R=X[3];if(S&&P)S.obsSet=g.obsSet;else{var j=c.query(g).then(function(H){var z=H.result;if(S&&(S.res=z),k){for(var F=0,te=z.length;F<te;++F)Object.freeze(z[F]);Object.freeze(z)}else H.result=Ee(z);return H}).catch(function(H){return R&&S&&G(R,S),Promise.reject(H)});S={obsSet:g.obsSet,promise:j,subscribers:new Set,type:"query",req:g,dirty:!1},R?R.push(S):(R=[S],O||(O=Er["idb://".concat(r,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),O.queries.query[g.query.index.name||""]=R)}return Cf(S,R,A,M),S.promise.then(function(H){return{result:Su(H.result,g,O?.optimisticOps,c,S,k)}})}});return p}});return o}};function _a(n,r){return new Proxy(n,{get:function(o,u,c){return u==="db"?r:Reflect.get(o,u,c)}})}var Nn=(function(){function n(r,o){var u=this;this._middlewares={},this.verno=0;var c=n.dependencies;this._options=o=s({addons:n.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange};var d=o.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var p={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ke,dbReadyPromise:null,cancelOpen:Ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};p.dbReadyPromise=new re(function(b){p.dbReadyResolve=b}),p.openCanceller=new re(function(b,k){p.cancelOpen=k}),this._state=p,this.name=r,this.on=bi(this,"populate","blocked","versionchange","close",{ready:[at,Ke]}),this.once=function(b,k){var I=function(){for(var A=[],M=0;M<arguments.length;M++)A[M]=arguments[M];u.on(b).unsubscribe(I),k.apply(u,A)};return u.on(b,I)},this.on.ready.subscribe=W(this.on.ready.subscribe,function(b){return function(k,I){n.vip(function(){var A=u._state;if(A.openComplete)A.dbOpenError||re.resolve().then(k),I&&b(k);else if(A.onReadyBeingFired)A.onReadyBeingFired.push(k),I&&b(k);else{b(k);var M=u;I||b(function X(){M.on.ready.unsubscribe(k),M.on.ready.unsubscribe(X)})}})}}),this.Collection=Fc(this),this.Table=Kc(this),this.Transaction=qc(this),this.Version=cf(this),this.WhereClause=Yc(this),this.on("versionchange",function(b){b.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=xi(o.IDBKeyRange),this._createTransaction=function(b,k,I,A){return new u.Transaction(b,k,I,u._options.chromeTransactionDurability,A)},this._fireOnBlocked=function(b){u.on("blocked").fire(b),Vr.filter(function(k){return k.name===u.name&&k!==u&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(b)})},this.use(wf),this.use(Pf),this.use(Ef),this.use(yf),this.use(bf);var g=new Proxy(this,{get:function(b,k,I){if(k==="_vip")return!0;if(k==="table")return function(M){return _a(u.table(M),g)};var A=Reflect.get(b,k,I);return A instanceof uu?_a(A,g):k==="tables"?A.map(function(M){return _a(M,g)}):k==="_createTransaction"?function(){var M=A.apply(this,arguments);return _a(M,g)}:A}});this.vip=g,d.forEach(function(b){return b(u)})}return n.prototype.version=function(r){if(isNaN(r)||r<.1)throw new ue.Type("Given version is not a positive number");if(r=Math.round(r*10)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var o=this._versions,u=o.filter(function(c){return c._cfg.version===r})[0];return u||(u=new this.Version(r),o.push(u),o.sort(ef),u.stores({}),this._state.autoSchema=!1,u)},n.prototype._whenReady=function(r){var o=this;return this.idbdb&&(this._state.openComplete||fe.letThrough||this._vip)?r():new re(function(u,c){if(o._state.openComplete)return c(new ue.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen){c(new ue.DatabaseClosed);return}o.open().catch(Ke)}o._state.dbReadyPromise.then(u,c)}).then(r)},n.prototype.use=function(r){var o=r.stack,u=r.create,c=r.level,d=r.name;d&&this.unuse({stack:o,name:d});var p=this._middlewares[o]||(this._middlewares[o]=[]);return p.push({stack:o,create:u,level:c??10,name:d}),p.sort(function(g,b){return g.level-b.level}),this},n.prototype.unuse=function(r){var o=r.stack,u=r.name,c=r.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return c?d.create!==c:u?d.name!==u:!1})),this},n.prototype.open=function(){var r=this;return br(Xn,function(){return pf(r)})},n.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,o=Vr.indexOf(this);if(o>=0&&Vr.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new re(function(u){r.dbReadyResolve=u}),r.openCanceller=new re(function(u,c){r.cancelOpen=c}))},n.prototype.close=function(r){var o=r===void 0?{disableAutoOpen:!0}:r,u=o.disableAutoOpen,c=this._state;u?(c.isBeingOpened&&c.cancelOpen(new ue.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new ue.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},n.prototype.delete=function(r){var o=this;r===void 0&&(r={disableAutoOpen:!0});var u=arguments.length>0&&typeof arguments[0]!="object",c=this._state;return new re(function(d,p){var g=function(){o.close(r);var b=o._deps.indexedDB.deleteDatabase(o.name);b.onsuccess=ft(function(){hf(o._deps,o.name),d()}),b.onerror=Tn(p),b.onblocked=o._fireOnBlocked};if(u)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(g):g()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var r=this;return h(this._allTables).map(function(o){return r._allTables[o]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var r=mf.apply(this,arguments);return this._transaction.apply(this,r)},n.prototype._transaction=function(r,o,u){var c=this,d=fe.trans;(!d||d.db!==this||r.indexOf("!")!==-1)&&(d=null);var p=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");var g,b;try{if(b=o.map(function(I){var A=I instanceof c.Table?I.name:I;if(typeof A!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return A}),r=="r"||r===ko)g=ko;else if(r=="rw"||r==To)g=To;else throw new ue.InvalidArgument("Invalid transaction mode: "+r);if(d){if(d.mode===ko&&g===To)if(p)d=null;else throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d&&b.forEach(function(I){if(d&&d.storeNames.indexOf(I)===-1)if(p)d=null;else throw new ue.SubTransaction("Table "+I+" not included in parent transaction.")}),p&&d&&!d.active&&(d=null)}}catch(I){return d?d._promise(null,function(A,M){M(I)}):_t(I)}var k=Eu.bind(null,this,g,b,d,u);return d?d._promise(g,k,"lock"):fe.trans?br(fe.transless,function(){return c._whenReady(k)}):this._whenReady(k)},n.prototype.table=function(r){if(!w(this._allTables,r))throw new ue.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},n})(),Of=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Mf=(function(){function n(r){this._subscribe=r}return n.prototype.subscribe=function(r,o,u){return this._subscribe(!r||typeof r=="function"?{next:r,error:o,complete:u}:r)},n.prototype[Of]=function(){return this},n})(),wa;try{wa={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{wa={indexedDB:null,IDBKeyRange:null}}function Du(n){var r=!1,o,u=new Mf(function(c){var d=ke(n);function p(R){var j=Hr();try{d&&zr();var H=Qn(n,R);return d&&(H=H.finally(Zn)),H}finally{j&&Ur()}}var g=!1,b,k={},I={},A={get closed(){return g},unsubscribe:function(){g||(g=!0,b&&b.abort(),M&&er.storagemutated.unsubscribe(P))}};c.start&&c.start(A);var M=!1,X=function(){return wo(O)};function S(){return jo(I,k)}var P=function(R){ga(k,R),S()&&X()},O=function(){if(!(g||!wa.indexedDB)){k={};var R={};b&&b.abort(),b=new AbortController;var j={subscr:R,signal:b.signal,requery:X,querier:n,trans:null},H=p(j);Promise.resolve(H).then(function(z){r=!0,o=z,!(g||j.signal.aborted)&&(k={},I=R,!ae(I)&&!M&&(er(Ei,P),M=!0),wo(function(){return!g&&c.next&&c.next(z)}))},function(z){r=!1,["DatabaseClosedError","AbortError"].includes(z?.name)||g||wo(function(){g||c.error&&c.error(z)})})}};return setTimeout(X,0),A});return u.hasValue=function(){return r},u.getValue=function(){return o},u}var xr=Nn;x(xr,s(s({},en),{delete:function(n){var r=new xr(n,{addons:[]});return r.delete()},exists:function(n){return new xr(n,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return ff(xr.dependencies).then(n)}catch{return _t(new ue.MissingAPI)}},defineClass:function(){function n(r){m(this,r)}return n},ignoreTransaction:function(n){return fe.trans?br(fe.transless,n):n()},vip:Bo,async:function(n){return function(){try{var r=Vo(n.apply(this,arguments));return!r||typeof r.then!="function"?re.resolve(r):r}catch(o){return _t(o)}}},spawn:function(n,r,o){try{var u=Vo(n.apply(o,r||[]));return!u||typeof u.then!="function"?re.resolve(u):u}catch(c){return _t(c)}},currentTransaction:{get:function(){return fe.trans||null}},waitFor:function(n,r){var o=re.resolve(typeof n=="function"?xr.ignoreTransaction(n):n).timeout(r||6e4);return fe.trans?fe.trans.waitFor(o):o},Promise:re,debug:{get:function(){return ot},set:function(n){it(n)}},derive:C,extend:m,props:x,override:W,Events:bi,on:er,liveQuery:Du,extendObservabilitySet:ga,getByKeyPath:Q,setByKeyPath:ie,delByKeyPath:Y,shallowClone:me,deepClone:Ee,getObjectDiff:Yo,cmp:Ye,asap:q,minKey:xo,addons:[],connections:Vr,errnames:bt,dependencies:wa,cache:Er,semVer:tu,version:tu.split(".").map(function(n){return parseInt(n)}).reduce(function(n,r,o){return n+r/Math.pow(10,o*2)})})),xr.maxKey=xi(xr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(er(Ei,function(n){if(!tr){var r;r=new CustomEvent(Io,{detail:n}),tr=!0,dispatchEvent(r),tr=!1}}),addEventListener(Io,function(n){var r=n.detail;tr||Go(r)}));function Go(n){var r=tr;try{tr=!0,er.storagemutated.fire(n),zo(n,!0)}finally{tr=r}}var tr=!1,nr,Xo=function(){};typeof BroadcastChannel<"u"&&(Xo=function(){nr=new BroadcastChannel(Io),nr.onmessage=function(n){return n.data&&Go(n.data)}},Xo(),typeof nr.unref=="function"&&nr.unref(),er(Ei,function(n){tr||nr.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Nn.disableBfCache&&n.persisted){ot&&console.debug("Dexie: handling persisted pagehide"),nr?.close();for(var r=0,o=Vr;r<o.length;r++){var u=o[r];u.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(n){!Nn.disableBfCache&&n.persisted&&(ot&&console.debug("Dexie: handling persisted pageshow"),Xo(),Go({all:new Mt(-1/0,[[]])}))}));function Rf(n){return new yi({add:n})}function Kf(n){return new yi({remove:n})}function Bf(n,r){return new yi({replacePrefix:[n,r]})}re.rejectionMapper=$t,it(ot);var Nf=Object.freeze({__proto__:null,Dexie:Nn,liveQuery:Du,Entity:iu,cmp:Ye,PropModification:yi,replacePrefix:Bf,add:Rf,remove:Kf,default:Nn,RangeSet:Mt,mergeRanges:Ai,rangesOverlap:yu});return s(Nn,Nf,{default:Nn}),Nn}))})(Pa)),Pa.exports}var Uh=Hh();const Es=Fh(Uh),Wu=Symbol.for("Dexie"),Qa=globalThis[Wu]||(globalThis[Wu]=Es);if(Es.semVer!==Qa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Es.semVer} and ${Qa.semVer}`);const{liveQuery:Za,mergeRanges:Zp,rangesOverlap:Jp,RangeSet:$p,cmp:em,Entity:tm,PropModification:nm,replacePrefix:rm,add:im,remove:am,DexieYProvider:om}=Qa;function qu(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function Rn(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?qu(Object(i),!0).forEach(function(a){zh(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qu(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Oa(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oa=function(e){return typeof e}:Oa=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(t)}function zh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Vn(){return Vn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Vn.apply(this,arguments)}function Vh(t,e){if(t==null)return{};var i={},a=Object.keys(t),s,l;for(l=0;l<a.length;l++)s=a[l],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function Yh(t,e){if(t==null)return{};var i=Vh(t,e),a,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)a=l[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var Wh="1.15.6";function Un(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Gn=Un(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xi=Un(/Edge/i),Gu=Un(/firefox/i),Bi=Un(/safari/i)&&!Un(/chrome/i)&&!Un(/android/i),Ws=Un(/iP(ad|od|hone)/i),nc=Un(/chrome/i)&&Un(/android/i),rc={capture:!1,passive:!1};function We(t,e,i){t.addEventListener(e,i,!Gn&&rc)}function Ve(t,e,i){t.removeEventListener(e,i,!Gn&&rc)}function Ja(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ic(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function bn(t,e,i,a){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Ja(t,e):Ja(t,e))||a&&t===i)return t;if(t===i)break}while(t=ic(t))}return null}var Xu=/\s+/g;function nn(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(Xu," ").replace(" "+e+" "," ");t.className=(a+(i?" "+e:"")).replace(Xu," ")}}function Te(t,e,i){var a=t&&t.style;if(a){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=i+(typeof i=="string"?"":"px")}}function ni(t,e){var i="";if(typeof t=="string")i=t;else do{var a=Te(t,"transform");a&&a!=="none"&&(i=a+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function ac(t,e,i){if(t){var a=t.getElementsByTagName(e),s=0,l=a.length;if(i)for(;s<l;s++)i(a[s],s);return a}return[]}function Mn(){var t=document.scrollingElement;return t||document.documentElement}function kt(t,e,i,a,s){if(!(!t.getBoundingClientRect&&t!==window)){var l,f,h,v,m,E,_;if(t!==window&&t.parentNode&&t!==Mn()?(l=t.getBoundingClientRect(),f=l.top,h=l.left,v=l.bottom,m=l.right,E=l.height,_=l.width):(f=0,h=0,v=window.innerHeight,m=window.innerWidth,E=window.innerHeight,_=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!Gn))do if(s&&s.getBoundingClientRect&&(Te(s,"transform")!=="none"||i&&Te(s,"position")!=="static")){var w=s.getBoundingClientRect();f-=w.top+parseInt(Te(s,"border-top-width")),h-=w.left+parseInt(Te(s,"border-left-width")),v=f+l.height,m=h+l.width;break}while(s=s.parentNode);if(a&&t!==window){var x=ni(s||t),D=x&&x.a,L=x&&x.d;x&&(f/=L,h/=D,_/=D,E/=L,v=f+E,m=h+_)}return{top:f,left:h,bottom:v,right:m,width:_,height:E}}}function Qu(t,e,i){for(var a=or(t,!0),s=kt(t)[e];a;){var l=kt(a)[i],f=void 0;if(f=s>=l,!f)return a;if(a===Mn())break;a=or(a,!1)}return!1}function fi(t,e,i,a){for(var s=0,l=0,f=t.children;l<f.length;){if(f[l].style.display!=="none"&&f[l]!==xe.ghost&&(a||f[l]!==xe.dragged)&&bn(f[l],i.draggable,t,!1)){if(s===e)return f[l];s++}l++}return null}function qs(t,e){for(var i=t.lastElementChild;i&&(i===xe.ghost||Te(i,"display")==="none"||e&&!Ja(i,e));)i=i.previousElementSibling;return i||null}function fn(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==xe.clone&&(!e||Ja(t,e))&&i++;return i}function Zu(t){var e=0,i=0,a=Mn();if(t)do{var s=ni(t),l=s.a,f=s.d;e+=t.scrollLeft*l,i+=t.scrollTop*f}while(t!==a&&(t=t.parentNode));return[e,i]}function qh(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[i][a])return Number(i)}return-1}function or(t,e){if(!t||!t.getBoundingClientRect)return Mn();var i=t,a=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Te(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Mn();if(a||e)return i;a=!0}}while(i=i.parentNode);return Mn()}function Gh(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function rs(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ni;function oc(t,e){return function(){if(!Ni){var i=arguments,a=this;i.length===1?t.call(a,i[0]):t.apply(a,i),Ni=setTimeout(function(){Ni=void 0},e)}}}function Xh(){clearTimeout(Ni),Ni=void 0}function sc(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function uc(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function lc(t,e,i){var a={};return Array.from(t.children).forEach(function(s){var l,f,h,v;if(!(!bn(s,e.draggable,t,!1)||s.animated||s===i)){var m=kt(s);a.left=Math.min((l=a.left)!==null&&l!==void 0?l:1/0,m.left),a.top=Math.min((f=a.top)!==null&&f!==void 0?f:1/0,m.top),a.right=Math.max((h=a.right)!==null&&h!==void 0?h:-1/0,m.right),a.bottom=Math.max((v=a.bottom)!==null&&v!==void 0?v:-1/0,m.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Xt="Sortable"+new Date().getTime();function Qh(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(s){if(!(Te(s,"display")==="none"||s===xe.ghost)){t.push({target:s,rect:kt(s)});var l=Rn({},t[t.length-1].rect);if(s.thisAnimationDuration){var f=ni(s,!0);f&&(l.top-=f.f,l.left-=f.e)}s.fromRect=l}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(qh(t,{target:a}),1)},animateAll:function(a){var s=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var l=!1,f=0;t.forEach(function(h){var v=0,m=h.target,E=m.fromRect,_=kt(m),w=m.prevFromRect,x=m.prevToRect,D=h.rect,L=ni(m,!0);L&&(_.top-=L.f,_.left-=L.e),m.toRect=_,m.thisAnimationDuration&&rs(w,_)&&!rs(E,_)&&(D.top-_.top)/(D.left-_.left)===(E.top-_.top)/(E.left-_.left)&&(v=Jh(D,w,x,s.options)),rs(_,E)||(m.prevFromRect=E,m.prevToRect=_,v||(v=s.options.animation),s.animate(m,D,_,v)),v&&(l=!0,f=Math.max(f,v),clearTimeout(m.animationResetTimer),m.animationResetTimer=setTimeout(function(){m.animationTime=0,m.prevFromRect=null,m.fromRect=null,m.prevToRect=null,m.thisAnimationDuration=null},v),m.thisAnimationDuration=v)}),clearTimeout(e),l?e=setTimeout(function(){typeof a=="function"&&a()},f):typeof a=="function"&&a(),t=[]},animate:function(a,s,l,f){if(f){Te(a,"transition",""),Te(a,"transform","");var h=ni(this.el),v=h&&h.a,m=h&&h.d,E=(s.left-l.left)/(v||1),_=(s.top-l.top)/(m||1);a.animatingX=!!E,a.animatingY=!!_,Te(a,"transform","translate3d("+E+"px,"+_+"px,0)"),this.forRepaintDummy=Zh(a),Te(a,"transition","transform "+f+"ms"+(this.options.easing?" "+this.options.easing:"")),Te(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){Te(a,"transition",""),Te(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},f)}}}}function Zh(t){return t.offsetWidth}function Jh(t,e,i,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*a.animation}var Gr=[],is={initializeByDefault:!0},Qi={mount:function(e){for(var i in is)is.hasOwnProperty(i)&&!(i in e)&&(e[i]=is[i]);Gr.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Gr.push(e)},pluginEvent:function(e,i,a){var s=this;this.eventCanceled=!1,a.cancel=function(){s.eventCanceled=!0};var l=e+"Global";Gr.forEach(function(f){i[f.pluginName]&&(i[f.pluginName][l]&&i[f.pluginName][l](Rn({sortable:i},a)),i.options[f.pluginName]&&i[f.pluginName][e]&&i[f.pluginName][e](Rn({sortable:i},a)))})},initializePlugins:function(e,i,a,s){Gr.forEach(function(h){var v=h.pluginName;if(!(!e.options[v]&&!h.initializeByDefault)){var m=new h(e,i,e.options);m.sortable=e,m.options=e.options,e[v]=m,Vn(a,m.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var f=this.modifyOption(e,l,e.options[l]);typeof f<"u"&&(e.options[l]=f)}},getEventProperties:function(e,i){var a={};return Gr.forEach(function(s){typeof s.eventProperties=="function"&&Vn(a,s.eventProperties.call(i[s.pluginName],e))}),a},modifyOption:function(e,i,a){var s;return Gr.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[i]=="function"&&(s=l.optionListeners[i].call(e[l.pluginName],a))}),s}};function $h(t){var e=t.sortable,i=t.rootEl,a=t.name,s=t.targetEl,l=t.cloneEl,f=t.toEl,h=t.fromEl,v=t.oldIndex,m=t.newIndex,E=t.oldDraggableIndex,_=t.newDraggableIndex,w=t.originalEvent,x=t.putSortable,D=t.extraEventProperties;if(e=e||i&&i[Xt],!!e){var L,C=e.options,T="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Gn&&!Xi?L=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(L=document.createEvent("Event"),L.initEvent(a,!0,!0)),L.to=f||i,L.from=h||i,L.item=s||i,L.clone=l,L.oldIndex=v,L.newIndex=m,L.oldDraggableIndex=E,L.newDraggableIndex=_,L.originalEvent=w,L.pullMode=x?x.lastPutMode:void 0;var V=Rn(Rn({},D),Qi.getEventProperties(a,e));for(var U in V)L[U]=V[U];i&&i.dispatchEvent(L),C[T]&&C[T].call(e,L)}}var ev=["evt"],qt=function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.evt,l=Yh(a,ev);Qi.pluginEvent.bind(xe)(e,i,Rn({dragEl:J,parentEl:yt,ghostEl:Ie,rootEl:dt,nextEl:Sr,lastDownEl:Ma,cloneEl:pt,cloneHidden:ar,dragStarted:Li,putSortable:Ct,activeSortable:xe.active,originalEvent:s,oldIndex:Jr,oldDraggableIndex:Fi,newIndex:an,newDraggableIndex:ir,hideGhostForTarget:hc,unhideGhostForTarget:vc,cloneNowHidden:function(){ar=!0},cloneNowShown:function(){ar=!1},dispatchSortableEvent:function(h){zt({sortable:i,name:h,originalEvent:s})}},l))};function zt(t){$h(Rn({putSortable:Ct,cloneEl:pt,targetEl:J,rootEl:dt,oldIndex:Jr,oldDraggableIndex:Fi,newIndex:an,newDraggableIndex:ir},t))}var J,yt,Ie,dt,Sr,Ma,pt,ar,Jr,an,Fi,ir,Ta,Ct,Qr=!1,$a=!1,eo=[],Tr,gn,as,os,Ju,$u,Li,Xr,ji,Hi=!1,Aa=!1,Ra,Kt,ss=[],xs=!1,to=[],vo=typeof document<"u",Sa=Ws,el=Xi||Gn?"cssFloat":"float",tv=vo&&!nc&&!Ws&&"draggable"in document.createElement("div"),cc=(function(){if(vo){if(Gn)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),fc=function(e,i){var a=Te(e),s=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),l=fi(e,0,i),f=fi(e,1,i),h=l&&Te(l),v=f&&Te(f),m=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+kt(l).width,E=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+kt(f).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&h.float&&h.float!=="none"){var _=h.float==="left"?"left":"right";return f&&(v.clear==="both"||v.clear===_)?"vertical":"horizontal"}return l&&(h.display==="block"||h.display==="flex"||h.display==="table"||h.display==="grid"||m>=s&&a[el]==="none"||f&&a[el]==="none"&&m+E>s)?"vertical":"horizontal"},nv=function(e,i,a){var s=a?e.left:e.top,l=a?e.right:e.bottom,f=a?e.width:e.height,h=a?i.left:i.top,v=a?i.right:i.bottom,m=a?i.width:i.height;return s===h||l===v||s+f/2===h+m/2},rv=function(e,i){var a;return eo.some(function(s){var l=s[Xt].options.emptyInsertThreshold;if(!(!l||qs(s))){var f=kt(s),h=e>=f.left-l&&e<=f.right+l,v=i>=f.top-l&&i<=f.bottom+l;if(h&&v)return a=s}}),a},dc=function(e){function i(l,f){return function(h,v,m,E){var _=h.options.group.name&&v.options.group.name&&h.options.group.name===v.options.group.name;if(l==null&&(f||_))return!0;if(l==null||l===!1)return!1;if(f&&l==="clone")return l;if(typeof l=="function")return i(l(h,v,m,E),f)(h,v,m,E);var w=(f?h:v).options.group.name;return l===!0||typeof l=="string"&&l===w||l.join&&l.indexOf(w)>-1}}var a={},s=e.group;(!s||Oa(s)!="object")&&(s={name:s}),a.name=s.name,a.checkPull=i(s.pull,!0),a.checkPut=i(s.put),a.revertClone=s.revertClone,e.group=a},hc=function(){!cc&&Ie&&Te(Ie,"display","none")},vc=function(){!cc&&Ie&&Te(Ie,"display","")};vo&&!nc&&document.addEventListener("click",function(t){if($a)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),$a=!1,!1},!0);var Ar=function(e){if(J){e=e.touches?e.touches[0]:e;var i=rv(e.clientX,e.clientY);if(i){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);a.target=a.rootEl=i,a.preventDefault=void 0,a.stopPropagation=void 0,i[Xt]._onDragOver(a)}}},iv=function(e){J&&J.parentNode[Xt]._isOutsideThisEl(e.target)};function xe(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Vn({},e),t[Xt]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fc(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(f,h){f.setData("Text",h.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:xe.supportPointer!==!1&&"PointerEvent"in window&&(!Bi||Ws),emptyInsertThreshold:5};Qi.initializePlugins(this,t,i);for(var a in i)!(a in e)&&(e[a]=i[a]);dc(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:tv,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?We(t,"pointerdown",this._onTapStart):(We(t,"mousedown",this._onTapStart),We(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(We(t,"dragover",this),We(t,"dragenter",this)),eo.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Vn(this,Qh())}xe.prototype={constructor:xe,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Xr=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,J):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,a=this.el,s=this.options,l=s.preventOnFilter,f=e.type,h=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,v=(h||e).target,m=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||v,E=s.filter;if(dv(a),!J&&!(/mousedown|pointerdown/.test(f)&&e.button!==0||s.disabled)&&!m.isContentEditable&&!(!this.nativeDraggable&&Bi&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=bn(v,s.draggable,a,!1),!(v&&v.animated)&&Ma!==v)){if(Jr=fn(v),Fi=fn(v,s.draggable),typeof E=="function"){if(E.call(this,e,v,this)){zt({sortable:i,rootEl:m,name:"filter",targetEl:v,toEl:a,fromEl:a}),qt("filter",i,{evt:e}),l&&e.preventDefault();return}}else if(E&&(E=E.split(",").some(function(_){if(_=bn(m,_.trim(),a,!1),_)return zt({sortable:i,rootEl:_,name:"filter",targetEl:v,fromEl:a,toEl:a}),qt("filter",i,{evt:e}),!0}),E)){l&&e.preventDefault();return}s.handle&&!bn(m,s.handle,a,!1)||this._prepareDragStart(e,h,v)}}},_prepareDragStart:function(e,i,a){var s=this,l=s.el,f=s.options,h=l.ownerDocument,v;if(a&&!J&&a.parentNode===l){var m=kt(a);if(dt=l,J=a,yt=J.parentNode,Sr=J.nextSibling,Ma=a,Ta=f.group,xe.dragged=J,Tr={target:J,clientX:(i||e).clientX,clientY:(i||e).clientY},Ju=Tr.clientX-m.left,$u=Tr.clientY-m.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,J.style["will-change"]="all",v=function(){if(qt("delayEnded",s,{evt:e}),xe.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Gu&&s.nativeDraggable&&(J.draggable=!0),s._triggerDragStart(e,i),zt({sortable:s,name:"choose",originalEvent:e}),nn(J,f.chosenClass,!0)},f.ignore.split(",").forEach(function(E){ac(J,E.trim(),us)}),We(h,"dragover",Ar),We(h,"mousemove",Ar),We(h,"touchmove",Ar),f.supportPointer?(We(h,"pointerup",s._onDrop),!this.nativeDraggable&&We(h,"pointercancel",s._onDrop)):(We(h,"mouseup",s._onDrop),We(h,"touchend",s._onDrop),We(h,"touchcancel",s._onDrop)),Gu&&this.nativeDraggable&&(this.options.touchStartThreshold=4,J.draggable=!0),qt("delayStart",this,{evt:e}),f.delay&&(!f.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Xi||Gn))){if(xe.eventCanceled){this._onDrop();return}f.supportPointer?(We(h,"pointerup",s._disableDelayedDrag),We(h,"pointercancel",s._disableDelayedDrag)):(We(h,"mouseup",s._disableDelayedDrag),We(h,"touchend",s._disableDelayedDrag),We(h,"touchcancel",s._disableDelayedDrag)),We(h,"mousemove",s._delayedDragTouchMoveHandler),We(h,"touchmove",s._delayedDragTouchMoveHandler),f.supportPointer&&We(h,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(v,f.delay)}else v()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){J&&us(J),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ve(e,"mouseup",this._disableDelayedDrag),Ve(e,"touchend",this._disableDelayedDrag),Ve(e,"touchcancel",this._disableDelayedDrag),Ve(e,"pointerup",this._disableDelayedDrag),Ve(e,"pointercancel",this._disableDelayedDrag),Ve(e,"mousemove",this._delayedDragTouchMoveHandler),Ve(e,"touchmove",this._delayedDragTouchMoveHandler),Ve(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?We(document,"pointermove",this._onTouchMove):i?We(document,"touchmove",this._onTouchMove):We(document,"mousemove",this._onTouchMove):(We(J,"dragend",this),We(dt,"dragstart",this._onDragStart));try{document.selection?Ka(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Qr=!1,dt&&J){qt("dragStarted",this,{evt:i}),this.nativeDraggable&&We(document,"dragover",iv);var a=this.options;!e&&nn(J,a.dragClass,!1),nn(J,a.ghostClass,!0),xe.active=this,e&&this._appendGhost(),zt({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(gn){this._lastX=gn.clientX,this._lastY=gn.clientY,hc();for(var e=document.elementFromPoint(gn.clientX,gn.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(gn.clientX,gn.clientY),e!==i);)i=e;if(J.parentNode[Xt]._isOutsideThisEl(e),i)do{if(i[Xt]){var a=void 0;if(a=i[Xt]._onDragOver({clientX:gn.clientX,clientY:gn.clientY,target:e,rootEl:i}),a&&!this.options.dragoverBubble)break}e=i}while(i=ic(i));vc()}},_onTouchMove:function(e){if(Tr){var i=this.options,a=i.fallbackTolerance,s=i.fallbackOffset,l=e.touches?e.touches[0]:e,f=Ie&&ni(Ie,!0),h=Ie&&f&&f.a,v=Ie&&f&&f.d,m=Sa&&Kt&&Zu(Kt),E=(l.clientX-Tr.clientX+s.x)/(h||1)+(m?m[0]-ss[0]:0)/(h||1),_=(l.clientY-Tr.clientY+s.y)/(v||1)+(m?m[1]-ss[1]:0)/(v||1);if(!xe.active&&!Qr){if(a&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(Ie){f?(f.e+=E-(as||0),f.f+=_-(os||0)):f={a:1,b:0,c:0,d:1,e:E,f:_};var w="matrix(".concat(f.a,",").concat(f.b,",").concat(f.c,",").concat(f.d,",").concat(f.e,",").concat(f.f,")");Te(Ie,"webkitTransform",w),Te(Ie,"mozTransform",w),Te(Ie,"msTransform",w),Te(Ie,"transform",w),as=E,os=_,gn=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ie){var e=this.options.fallbackOnBody?document.body:dt,i=kt(J,!0,Sa,!0,e),a=this.options;if(Sa){for(Kt=e;Te(Kt,"position")==="static"&&Te(Kt,"transform")==="none"&&Kt!==document;)Kt=Kt.parentNode;Kt!==document.body&&Kt!==document.documentElement?(Kt===document&&(Kt=Mn()),i.top+=Kt.scrollTop,i.left+=Kt.scrollLeft):Kt=Mn(),ss=Zu(Kt)}Ie=J.cloneNode(!0),nn(Ie,a.ghostClass,!1),nn(Ie,a.fallbackClass,!0),nn(Ie,a.dragClass,!0),Te(Ie,"transition",""),Te(Ie,"transform",""),Te(Ie,"box-sizing","border-box"),Te(Ie,"margin",0),Te(Ie,"top",i.top),Te(Ie,"left",i.left),Te(Ie,"width",i.width),Te(Ie,"height",i.height),Te(Ie,"opacity","0.8"),Te(Ie,"position",Sa?"absolute":"fixed"),Te(Ie,"zIndex","100000"),Te(Ie,"pointerEvents","none"),xe.ghost=Ie,e.appendChild(Ie),Te(Ie,"transform-origin",Ju/parseInt(Ie.style.width)*100+"% "+$u/parseInt(Ie.style.height)*100+"%")}},_onDragStart:function(e,i){var a=this,s=e.dataTransfer,l=a.options;if(qt("dragStart",this,{evt:e}),xe.eventCanceled){this._onDrop();return}qt("setupClone",this),xe.eventCanceled||(pt=uc(J),pt.removeAttribute("id"),pt.draggable=!1,pt.style["will-change"]="",this._hideClone(),nn(pt,this.options.chosenClass,!1),xe.clone=pt),a.cloneId=Ka(function(){qt("clone",a),!xe.eventCanceled&&(a.options.removeCloneOnHide||dt.insertBefore(pt,J),a._hideClone(),zt({sortable:a,name:"clone"}))}),!i&&nn(J,l.dragClass,!0),i?($a=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Ve(document,"mouseup",a._onDrop),Ve(document,"touchend",a._onDrop),Ve(document,"touchcancel",a._onDrop),s&&(s.effectAllowed="move",l.setData&&l.setData.call(a,s,J)),We(document,"drop",a),Te(J,"transform","translateZ(0)")),Qr=!0,a._dragStartId=Ka(a._dragStarted.bind(a,i,e)),We(document,"selectstart",a),Li=!0,window.getSelection().removeAllRanges(),Bi&&Te(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,a=e.target,s,l,f,h=this.options,v=h.group,m=xe.active,E=Ta===v,_=h.sort,w=Ct||m,x,D=this,L=!1;if(xs)return;function C(ae,je){qt(ae,D,Rn({evt:e,isOwner:E,axis:x?"vertical":"horizontal",revert:f,dragRect:s,targetRect:l,canSort:_,fromSortable:w,target:a,completed:V,onMove:function(Ne,Le){return Ia(dt,i,J,s,Ne,kt(Ne),e,Le)},changed:U},je))}function T(){C("dragOverAnimationCapture"),D.captureAnimationState(),D!==w&&w.captureAnimationState()}function V(ae){return C("dragOverCompleted",{insertion:ae}),ae&&(E?m._hideClone():m._showClone(D),D!==w&&(nn(J,Ct?Ct.options.ghostClass:m.options.ghostClass,!1),nn(J,h.ghostClass,!0)),Ct!==D&&D!==xe.active?Ct=D:D===xe.active&&Ct&&(Ct=null),w===D&&(D._ignoreWhileAnimating=a),D.animateAll(function(){C("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(a===J&&!J.animated||a===i&&!a.animated)&&(Xr=null),!h.dragoverBubble&&!e.rootEl&&a!==document&&(J.parentNode[Xt]._isOutsideThisEl(e.target),!ae&&Ar(e)),!h.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),L=!0}function U(){an=fn(J),ir=fn(J,h.draggable),zt({sortable:D,name:"change",toEl:i,newIndex:an,newDraggableIndex:ir,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=bn(a,h.draggable,i,!0),C("dragOver"),xe.eventCanceled)return L;if(J.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||D._ignoreWhileAnimating===a)return V(!1);if($a=!1,m&&!h.disabled&&(E?_||(f=yt!==dt):Ct===this||(this.lastPutMode=Ta.checkPull(this,m,J,e))&&v.checkPut(this,m,J,e))){if(x=this._getDirection(e,a)==="vertical",s=kt(J),C("dragOverValid"),xe.eventCanceled)return L;if(f)return yt=dt,T(),this._hideClone(),C("revert"),xe.eventCanceled||(Sr?dt.insertBefore(J,Sr):dt.appendChild(J)),V(!0);var B=qs(i,h.draggable);if(!B||uv(e,x,this)&&!B.animated){if(B===J)return V(!1);if(B&&i===e.target&&(a=B),a&&(l=kt(a)),Ia(dt,i,J,s,a,l,e,!!a)!==!1)return T(),B&&B.nextSibling?i.insertBefore(J,B.nextSibling):i.appendChild(J),yt=i,U(),V(!0)}else if(B&&sv(e,x,this)){var W=fi(i,0,h,!0);if(W===J)return V(!1);if(a=W,l=kt(a),Ia(dt,i,J,s,a,l,e,!1)!==!1)return T(),i.insertBefore(J,W),yt=i,U(),V(!0)}else if(a.parentNode===i){l=kt(a);var ee=0,q,N=J.parentNode!==i,Q=!nv(J.animated&&J.toRect||s,a.animated&&a.toRect||l,x),ie=x?"top":"left",Y=Qu(a,"top","top")||Qu(J,"top","top"),me=Y?Y.scrollTop:void 0;Xr!==a&&(q=l[ie],Hi=!1,Aa=!Q&&h.invertSwap||N),ee=lv(e,a,l,x,Q?1:h.swapThreshold,h.invertedSwapThreshold==null?h.swapThreshold:h.invertedSwapThreshold,Aa,Xr===a);var ve;if(ee!==0){var ge=fn(J);do ge-=ee,ve=yt.children[ge];while(ve&&(Te(ve,"display")==="none"||ve===Ie))}if(ee===0||ve===a)return V(!1);Xr=a,ji=ee;var Ce=a.nextElementSibling,Ge=!1;Ge=ee===1;var st=Ia(dt,i,J,s,a,l,e,Ge);if(st!==!1)return(st===1||st===-1)&&(Ge=st===1),xs=!0,setTimeout(ov,30),T(),Ge&&!Ce?i.appendChild(J):a.parentNode.insertBefore(J,Ge?Ce:a),Y&&sc(Y,0,me-Y.scrollTop),yt=J.parentNode,q!==void 0&&!Aa&&(Ra=Math.abs(q-kt(a)[ie])),U(),V(!0)}if(i.contains(J))return V(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ve(document,"mousemove",this._onTouchMove),Ve(document,"touchmove",this._onTouchMove),Ve(document,"pointermove",this._onTouchMove),Ve(document,"dragover",Ar),Ve(document,"mousemove",Ar),Ve(document,"touchmove",Ar)},_offUpEvents:function(){var e=this.el.ownerDocument;Ve(e,"mouseup",this._onDrop),Ve(e,"touchend",this._onDrop),Ve(e,"pointerup",this._onDrop),Ve(e,"pointercancel",this._onDrop),Ve(e,"touchcancel",this._onDrop),Ve(document,"selectstart",this)},_onDrop:function(e){var i=this.el,a=this.options;if(an=fn(J),ir=fn(J,a.draggable),qt("drop",this,{evt:e}),yt=J&&J.parentNode,an=fn(J),ir=fn(J,a.draggable),xe.eventCanceled){this._nulling();return}Qr=!1,Aa=!1,Hi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ks(this.cloneId),ks(this._dragStartId),this.nativeDraggable&&(Ve(document,"drop",this),Ve(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Bi&&Te(document.body,"user-select",""),Te(J,"transform",""),e&&(Li&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),Ie&&Ie.parentNode&&Ie.parentNode.removeChild(Ie),(dt===yt||Ct&&Ct.lastPutMode!=="clone")&&pt&&pt.parentNode&&pt.parentNode.removeChild(pt),J&&(this.nativeDraggable&&Ve(J,"dragend",this),us(J),J.style["will-change"]="",Li&&!Qr&&nn(J,Ct?Ct.options.ghostClass:this.options.ghostClass,!1),nn(J,this.options.chosenClass,!1),zt({sortable:this,name:"unchoose",toEl:yt,newIndex:null,newDraggableIndex:null,originalEvent:e}),dt!==yt?(an>=0&&(zt({rootEl:yt,name:"add",toEl:yt,fromEl:dt,originalEvent:e}),zt({sortable:this,name:"remove",toEl:yt,originalEvent:e}),zt({rootEl:yt,name:"sort",toEl:yt,fromEl:dt,originalEvent:e}),zt({sortable:this,name:"sort",toEl:yt,originalEvent:e})),Ct&&Ct.save()):an!==Jr&&an>=0&&(zt({sortable:this,name:"update",toEl:yt,originalEvent:e}),zt({sortable:this,name:"sort",toEl:yt,originalEvent:e})),xe.active&&((an==null||an===-1)&&(an=Jr,ir=Fi),zt({sortable:this,name:"end",toEl:yt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){qt("nulling",this),dt=J=yt=Ie=Sr=pt=Ma=ar=Tr=gn=Li=an=ir=Jr=Fi=Xr=ji=Ct=Ta=xe.dragged=xe.ghost=xe.clone=xe.active=null,to.forEach(function(e){e.checked=!0}),to.length=as=os=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":J&&(this._onDragOver(e),av(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,a=this.el.children,s=0,l=a.length,f=this.options;s<l;s++)i=a[s],bn(i,f.draggable,this.el,!1)&&e.push(i.getAttribute(f.dataIdAttr)||fv(i));return e},sort:function(e,i){var a={},s=this.el;this.toArray().forEach(function(l,f){var h=s.children[f];bn(h,this.options.draggable,s,!1)&&(a[l]=h)},this),i&&this.captureAnimationState(),e.forEach(function(l){a[l]&&(s.removeChild(a[l]),s.appendChild(a[l]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return bn(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var a=this.options;if(i===void 0)return a[e];var s=Qi.modifyOption(this,e,i);typeof s<"u"?a[e]=s:a[e]=i,e==="group"&&dc(a)},destroy:function(){qt("destroy",this);var e=this.el;e[Xt]=null,Ve(e,"mousedown",this._onTapStart),Ve(e,"touchstart",this._onTapStart),Ve(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ve(e,"dragover",this),Ve(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),eo.splice(eo.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ar){if(qt("hideClone",this),xe.eventCanceled)return;Te(pt,"display","none"),this.options.removeCloneOnHide&&pt.parentNode&&pt.parentNode.removeChild(pt),ar=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ar){if(qt("showClone",this),xe.eventCanceled)return;J.parentNode==dt&&!this.options.group.revertClone?dt.insertBefore(pt,J):Sr?dt.insertBefore(pt,Sr):dt.appendChild(pt),this.options.group.revertClone&&this.animate(J,pt),Te(pt,"display",""),ar=!1}}};function av(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ia(t,e,i,a,s,l,f,h){var v,m=t[Xt],E=m.options.onMove,_;return window.CustomEvent&&!Gn&&!Xi?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=e,v.from=t,v.dragged=i,v.draggedRect=a,v.related=s||e,v.relatedRect=l||kt(e),v.willInsertAfter=h,v.originalEvent=f,t.dispatchEvent(v),E&&(_=E.call(m,v,f)),_}function us(t){t.draggable=!1}function ov(){xs=!1}function sv(t,e,i){var a=kt(fi(i.el,0,i.options,!0)),s=lc(i.el,i.options,Ie),l=10;return e?t.clientX<s.left-l||t.clientY<a.top&&t.clientX<a.right:t.clientY<s.top-l||t.clientY<a.bottom&&t.clientX<a.left}function uv(t,e,i){var a=kt(qs(i.el,i.options.draggable)),s=lc(i.el,i.options,Ie),l=10;return e?t.clientX>s.right+l||t.clientY>a.bottom&&t.clientX>a.left:t.clientY>s.bottom+l||t.clientX>a.right&&t.clientY>a.top}function lv(t,e,i,a,s,l,f,h){var v=a?t.clientY:t.clientX,m=a?i.height:i.width,E=a?i.top:i.left,_=a?i.bottom:i.right,w=!1;if(!f){if(h&&Ra<m*s){if(!Hi&&(ji===1?v>E+m*l/2:v<_-m*l/2)&&(Hi=!0),Hi)w=!0;else if(ji===1?v<E+Ra:v>_-Ra)return-ji}else if(v>E+m*(1-s)/2&&v<_-m*(1-s)/2)return cv(e)}return w=w||f,w&&(v<E+m*l/2||v>_-m*l/2)?v>E+m/2?1:-1:0}function cv(t){return fn(J)<fn(t)?1:-1}function fv(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,a=0;i--;)a+=e.charCodeAt(i);return a.toString(36)}function dv(t){to.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var a=e[i];a.checked&&to.push(a)}}function Ka(t){return setTimeout(t,0)}function ks(t){return clearTimeout(t)}vo&&We(document,"touchmove",function(t){(xe.active||Qr)&&t.cancelable&&t.preventDefault()});xe.utils={on:We,off:Ve,css:Te,find:ac,is:function(e,i){return!!bn(e,i,e,!1)},extend:Gh,throttle:oc,closest:bn,toggleClass:nn,clone:uc,index:fn,nextTick:Ka,cancelNextTick:ks,detectDirection:fc,getChild:fi,expando:Xt};xe.get=function(t){return t[Xt]};xe.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(xe.utils=Rn(Rn({},xe.utils),a.utils)),Qi.mount(a)})};xe.create=function(t,e){return new xe(t,e)};xe.version=Wh;var xt=[],Pi,Ts,As=!1,ls,cs,no,Oi;function hv(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var a=i.originalEvent;this.sortable.nativeDraggable?We(document,"dragover",this._handleAutoScroll):this.options.supportPointer?We(document,"pointermove",this._handleFallbackAutoScroll):a.touches?We(document,"touchmove",this._handleFallbackAutoScroll):We(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var a=i.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Ve(document,"dragover",this._handleAutoScroll):(Ve(document,"pointermove",this._handleFallbackAutoScroll),Ve(document,"touchmove",this._handleFallbackAutoScroll),Ve(document,"mousemove",this._handleFallbackAutoScroll)),tl(),Ba(),Xh()},nulling:function(){no=Ts=Pi=As=Oi=ls=cs=null,xt.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,a){var s=this,l=(i.touches?i.touches[0]:i).clientX,f=(i.touches?i.touches[0]:i).clientY,h=document.elementFromPoint(l,f);if(no=i,a||this.options.forceAutoScrollFallback||Xi||Gn||Bi){fs(i,this.options,h,a);var v=or(h,!0);As&&(!Oi||l!==ls||f!==cs)&&(Oi&&tl(),Oi=setInterval(function(){var m=or(document.elementFromPoint(l,f),!0);m!==v&&(v=m,Ba()),fs(i,s.options,m,a)},10),ls=l,cs=f)}else{if(!this.options.bubbleScroll||or(h,!0)===Mn()){Ba();return}fs(i,this.options,or(h,!1),!1)}}},Vn(t,{pluginName:"scroll",initializeByDefault:!0})}function Ba(){xt.forEach(function(t){clearInterval(t.pid)}),xt=[]}function tl(){clearInterval(Oi)}var fs=oc(function(t,e,i,a){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,f=e.scrollSensitivity,h=e.scrollSpeed,v=Mn(),m=!1,E;Ts!==i&&(Ts=i,Ba(),Pi=e.scroll,E=e.scrollFn,Pi===!0&&(Pi=or(i,!0)));var _=0,w=Pi;do{var x=w,D=kt(x),L=D.top,C=D.bottom,T=D.left,V=D.right,U=D.width,B=D.height,W=void 0,ee=void 0,q=x.scrollWidth,N=x.scrollHeight,Q=Te(x),ie=x.scrollLeft,Y=x.scrollTop;x===v?(W=U<q&&(Q.overflowX==="auto"||Q.overflowX==="scroll"||Q.overflowX==="visible"),ee=B<N&&(Q.overflowY==="auto"||Q.overflowY==="scroll"||Q.overflowY==="visible")):(W=U<q&&(Q.overflowX==="auto"||Q.overflowX==="scroll"),ee=B<N&&(Q.overflowY==="auto"||Q.overflowY==="scroll"));var me=W&&(Math.abs(V-s)<=f&&ie+U<q)-(Math.abs(T-s)<=f&&!!ie),ve=ee&&(Math.abs(C-l)<=f&&Y+B<N)-(Math.abs(L-l)<=f&&!!Y);if(!xt[_])for(var ge=0;ge<=_;ge++)xt[ge]||(xt[ge]={});(xt[_].vx!=me||xt[_].vy!=ve||xt[_].el!==x)&&(xt[_].el=x,xt[_].vx=me,xt[_].vy=ve,clearInterval(xt[_].pid),(me!=0||ve!=0)&&(m=!0,xt[_].pid=setInterval((function(){a&&this.layer===0&&xe.active._onTouchMove(no);var Ce=xt[this.layer].vy?xt[this.layer].vy*h:0,Ge=xt[this.layer].vx?xt[this.layer].vx*h:0;typeof E=="function"&&E.call(xe.dragged.parentNode[Xt],Ge,Ce,t,no,xt[this.layer].el)!=="continue"||sc(xt[this.layer].el,Ge,Ce)}).bind({layer:_}),24))),_++}while(e.bubbleScroll&&w!==v&&(w=or(w,!1)));As=m}},30),pc=function(e){var i=e.originalEvent,a=e.putSortable,s=e.dragEl,l=e.activeSortable,f=e.dispatchSortableEvent,h=e.hideGhostForTarget,v=e.unhideGhostForTarget;if(i){var m=a||l;h();var E=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,_=document.elementFromPoint(E.clientX,E.clientY);v(),m&&!m.el.contains(_)&&(f("spill"),this.onSpill({dragEl:s,putSortable:a}))}};function Gs(){}Gs.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var s=fi(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),a&&a.animateAll()},drop:pc};Vn(Gs,{pluginName:"revertOnSpill"});function Xs(){}Xs.prototype={onSpill:function(e){var i=e.dragEl,a=e.putSortable,s=a||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:pc};Vn(Xs,{pluginName:"removeOnSpill"});xe.mount(new hv);xe.mount(Xs,Gs);class vv{constructor(){this.state={lists:[],isDragActive:!1,pendingUpdates:new Map,version:0},this.listeners=new Set}subscribe(e){return this.listeners.add(e),e(this.getState()),()=>this.listeners.delete(e)}getState(){return{lists:[...this.state.lists],isDragActive:this.state.isDragActive,version:this.state.version}}initializeFromQuery(e){this.state.isDragActive||Array.isArray(e)&&(this.state.lists=e.map(i=>({id:i.id,name:i.name,order:i.order,columnIndex:i.columnIndex??0})),this.state.version++,this.notify())}startDrag(){this.state.isDragActive||(this.state.isDragActive=!0,this.state.pendingUpdates.clear(),this.state.version++,this.notify())}updateDragState(e,i){if(!this.state.isDragActive){console.warn("[DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[DRAG STATE] updateDragState called with invalid items");return}this.state.pendingUpdates.set(e,{items:i.map(a=>({...a})),timestamp:Date.now()}),this.applyPendingUpdates(),this.state.version++,this.notify()}applyPendingUpdates(){const e=new Set;this.state.pendingUpdates.forEach(({items:s})=>{s.forEach(l=>e.add(l.id))});const i=new Set(this.state.pendingUpdates.keys());let a=this.state.lists.filter(s=>{const l=s.columnIndex??0;return!e.has(s.id)&&!i.has(l)});this.state.pendingUpdates.forEach(({items:s},l)=>{const f=s.map((h,v)=>({...this.state.lists.find(E=>E.id===h.id)||h,columnIndex:l,order:v}));a=[...a,...f]}),this.state.lists=a}completeDrag(e=!0){this.state.isDragActive&&(e?this.state.pendingUpdates.clear():this.state.pendingUpdates.clear(),this.state.isDragActive=!1,this.state.version++,this.notify())}notify(){const e=this.getState();this.listeners.forEach(i=>{try{i(e)}catch(a){console.error("[DRAG STATE] Error in state change listener:",a)}})}getListsForColumn(e){return this.state.lists.filter(i=>(i.columnIndex??0)===e)}isDragActive(){return this.state.isDragActive}}const yn=new vv,Me=new Qa("TaskPlannerDB");Me.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Me.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.toCollection().modify(e=>{e.status="unchecked"}));Me.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.where("status").equals("archived").modify(e=>{e.archivedAt=Date.now()}));Me.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify(e=>{e.archivedAt===void 0&&(e.archivedAt=null)}));Me.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify((e,i)=>{e.columnIndex===void 0&&(e.columnIndex=e.order%5)}));function po(t){return t.length===0?0:Math.max(...t.map(i=>i.order))+1}async function pv(){return(await Me.lists.orderBy("order").toArray()).filter(e=>e.archivedAt==null)}async function mv(){return await Me.lists.orderBy("order").toArray()}async function gv(t,e=null){if(t==null)throw new Error("List name cannot be null or undefined");const i=t.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const a=await Me.lists.orderBy("order").toArray(),s=po(a),l=5;let f;return e!==null&&e>=0&&e<l?f=e:f=s%l,await Me.lists.add({name:i,order:s,archivedAt:null,columnIndex:f})}async function yv(t=null){const e=await Me.lists.orderBy("order").toArray(),i=po(e),a=5;let s;return t!==null&&t>=0&&t<a?s=t:s=i%a,await Me.lists.add({name:null,order:i,archivedAt:null,columnIndex:s})}async function bv(t,e){const i=e.trim();if(i==="")throw new Error("List name cannot be empty");return await Me.lists.update(t,{name:i})}async function Cr(t){return await Me.tasks.where("listId").equals(t).filter(e=>e.status!=="archived").sortBy("order")}async function _v(){return(await Me.tasks.where("status").equals("archived").toArray()).sort((e,i)=>{const a=e.archivedAt||0,s=i.archivedAt||0;return s!==a?s-a:(i.order||0)-(e.order||0)})}async function wv(t,e,i=null){let a=t;t===null&&(a=await yv(i));const s=await Me.tasks.where("listId").equals(a).filter(v=>v.status!=="archived").sortBy("order"),l=po(s),f=e===""?"":e.trim();return await Me.tasks.add({text:f,listId:a,order:l,status:"unchecked"})}async function Ev(t,e){const i=e===""?"":e.trim();return await Me.tasks.update(t,{text:i})}async function nl(t,e){if(!["unchecked","checked","archived"].includes(e))throw new Error(`Invalid status: ${e}`);const i={status:e};return e==="archived"?i.archivedAt=Date.now():e!=="archived"&&(i.archivedAt=null),await Me.tasks.update(t,i)}async function xv(t){const e=await Me.tasks.get(t);if(!e)throw new Error(`Task ${t} not found`);const i=await Me.lists.get(e.listId);if(!i)throw new Error(`Task's list ${e.listId} not found`);let a=!1;i.archivedAt!=null&&(await Tv(e.listId),a=!0);const s=await Me.tasks.where("listId").equals(e.listId).filter(h=>h.status!=="archived"&&h.id!==t).sortBy("order"),l=po(s);return{taskUpdated:await Me.tasks.update(t,{status:"checked",order:l}),listRestored:a}}async function ri(t,e){if(!e||e.length===0)return;const i=e.map(h=>h.id),s=(await Me.tasks.bulkGet(i)).filter(h=>h!==void 0);if(s.length===0)return;const l=s.filter(h=>h.listId!==t),f=new Set(l.map(h=>h.listId));await Me.transaction("rw",Me.tasks,async()=>{for(let h=0;h<e.length;h++){const v=e[h].id,m=s.find(_=>_.id===v);if(!m)continue;const E={order:h};m.listId!==t&&(E.listId=t),await Me.tasks.update(v,E)}for(const h of f){const v=await Me.tasks.where("listId").equals(h).filter(m=>m.status!=="archived").sortBy("order");for(let m=0;m<v.length;m++)await Me.tasks.update(v[m].id,{order:m})}})}async function kv(t){const e=Date.now();return await Me.lists.update(t,{archivedAt:e})}async function Tv(t){return await Me.lists.update(t,{archivedAt:null})}async function Av(t){const e=Date.now(),i=await Me.tasks.where("listId").equals(t).filter(s=>s.status==="unchecked"||s.status==="checked").toArray(),a=i.map(s=>Me.tasks.update(s.id,{status:"archived",archivedAt:e}));return await Promise.all(a),i.length}async function rl(t,e){if(!e||e.length===0)return;if(t<0||t>=5)throw new Error(`Invalid column index: ${t}`);const i=e.map(h=>h.id),a=await Me.lists.bulkGet(i);if(a.filter(h=>!h).length>0)throw new Error("Cannot update order: some lists do not exist");const l=a.filter(h=>h!==void 0),f=l.filter(h=>(h.columnIndex??0)!==t);new Set(f.map(h=>h.columnIndex??0)),await Me.transaction("rw",Me.lists,async()=>{const h=new Set;for(let w=0;w<e.length;w++){const x=e[w].id,D=l.find(T=>T.id===x);if(!D)continue;const L={order:w},C=D.columnIndex??0;C!==t&&(L.columnIndex=t,h.add(C)),await Me.lists.update(x,L)}const m=(await Me.lists.orderBy("order").toArray()).filter(w=>w.archivedAt==null),E=Array(5).fill(null).map(()=>[]);for(const w of m){const x=w.columnIndex??0,D=x>=5?4:x;E[D].push(w)}const _=new Set([t,...h]);for(const w of _){const x=E[w];x.sort((D,L)=>(D.order??0)-(L.order??0));for(let D=0;D<x.length;D++)await Me.lists.update(x[D].id,{order:D})}})}function mc(t){return t&&(t.isDndShadowItem===!0||typeof t.id=="string"&&t.id.startsWith("id:dnd-shadow-placeholder-"))}function gc(t,e=5){if(!t||t.length===0)return Array(e).fill(null).map(()=>[]);const i=Array(e).fill(null).map(()=>[]),a=e-1;for(const s of t){let l=s.columnIndex??0;l>=e&&(l=a),i[l].push(s)}for(let s=0;s<i.length;s++)i[s].sort((l,f)=>(l.order??0)-(f.order??0));return i}function Sv(t,e){if(!t||t.length===0)return null;for(let i=0;i<t.length;i++){const a=t[i];if(!Array.isArray(a))continue;const s=a.findIndex(l=>l.id===e);if(s!==-1)return{columnIndex:i,index:s}}return null}function Iv(t,e,i,a){const{columnIndex:s,index:l}=t;let f=s,h=l;if(e==="up"){if(l===0)return null;h=l-1}else if(e==="down"){const v=i[s]||[];if(l===v.length-1)return null;h=l+1}else if(e==="left"){if(s===0)return null;f=s-1,h=(i[f]||[]).length}else if(e==="right"){if(s===a-1)return null;f=s+1,h=(i[f]||[]).length}else return null;return{targetColumnIndex:f,targetIndex:h}}function Dv(t,e,i,a){const s=Sv(t,e);if(!s)return null;const{columnIndex:l,index:f}=s,h=Iv(s,i,t,a);if(!h)return null;const{targetColumnIndex:v,targetIndex:m}=h,E=t.map(C=>Array.isArray(C)?[...C]:[]),_=E[l];if(!_||_.length===0)return null;const[w]=_.splice(f,1);if(!w)return null;const x=E[v];if(!x)return null;const D=Math.min(Math.max(m,0),x.length);i==="left"||i==="right"?x.splice(D,0,{...w,columnIndex:v}):x.splice(D,0,w);const L=[];for(let C=0;C<E.length;C++){const T=E[C]||[];for(let V=0;V<T.length;V++){const U=T[V];L.push({...U,columnIndex:C,order:V})}}return{newColumns:E,updatedDraggableLists:L,targetColumnIndex:v,targetColumnItems:(E[v]||[]).map(C=>({id:C.id}))}}function Cv(t){return Array.isArray(t)?t.filter(e=>!mc(e)):[]}function ii(t){t instanceof HTMLElement&&(t.style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",t.style.backgroundColor="rgba(107, 143, 217, 0.04)",t.style.borderRadius="4px")}function yc(t){t instanceof HTMLElement&&(t.style.removeProperty("box-shadow"),t.style.removeProperty("background-color"),t.style.removeProperty("border-radius"))}const ro=160,Lv=150,Ss=1056,Pv=816,io=16,Ov=25,Mv=10,ds=20,Da=10,Rv=40,il=200,al=10,Kv=20;async function Bv(t,e={}){const{maxAttempts:i=Ov,retryInterval:a=Mv,waitForTick:s=!0}=e;if(typeof document>"u")return null;s&&await lt();for(let l=0;l<i;l++){const f=t();if(f&&f instanceof HTMLElement)return f.focus(),f;l<i-1&&await new Promise(h=>setTimeout(h,a))}return null}async function bc(t){if(typeof document>"u")return null;await lt();const e=document.querySelector(`div[data-id="${t}"][role="group"]`);if(e instanceof HTMLElement)return e.focus(),e;const i=document.querySelector(`div[data-id="${t}"]`);return i instanceof HTMLElement?(i.focus(),i):null}function Nv(t,e,i){if(!t)return null;const a=t.querySelector(e);if(a){const s=a.querySelector(i);if(s&&s instanceof HTMLElement)return s}return null}function Fv(t,e,i,a){const{getKeyboardListDrag:s,getLastKeyboardDraggedListId:l,getShouldRefocusListOnNextTab:f,setShouldRefocusListOnNextTab:h}=t;function v(m){const E=m.key,_=s(),w=_.active===!0,x=_.listId,D=l(),L=f();if(!w&&E==="Tab"&&L&&D!=null){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),h(!1),bc(D);return}if(!(!w||x==null)){if(E==="ArrowUp"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"up");return}if(E==="ArrowDown"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"down");return}if(E==="ArrowLeft"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"left");return}if(E==="ArrowRight"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"right");return}if(E==="Escape"||E==="Enter"||E===" "){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),i(),a();return}if(E==="Tab"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),i(),a();return}}}return document.addEventListener("keydown",v,!0),()=>{document.removeEventListener("keydown",v,!0)}}function jv(t){return t===""}function Hv(t){return t.trim()===""&&t.length>0}function _c(t){const e=t.trim(),i=Hv(t);return{text:i?"":e,isBlank:i}}function wc(t,e,i={}){const{ignoreElements:a=[],shouldClose:s=()=>!0,checkIgnoreClick:l=null}=i;function f(v){const m=typeof t=="function"?t():t;if(m&&!m.contains(v.target)&&!(l&&l(v))){for(const E of a){let _=null;if(typeof E=="function"?_=E():_=E,_&&_.contains(v.target))return}s()&&e()}}const h=setTimeout(()=>{document.addEventListener("click",f)},0);return()=>{clearTimeout(h),document.removeEventListener("click",f)}}function Uv(t){const{getColumnIndex:e,setColumnIndex:i,getInput:a,setInput:s,getInputElement:l}=t;function f(x){i(x)}function h(x,D){if(x.key==="Enter"||x.key===" ")x.preventDefault(),x.stopPropagation(),f(D);else if(x.key==="Escape"){x.preventDefault(),x.stopPropagation(),x.stopImmediatePropagation();const L=x.currentTarget;L&&L instanceof HTMLElement&&L.blur()}}function v(x,D,L){if(x.key==="Escape"){const C=a()||"";if(L){i(null),s("");return}if(C.trim().length>0){m(D,!0);return}i(null),s("")}}async function m(x,D=!1){const L=a()||"";if(L===""||L.trim()===""){i(null),s("");return}const{text:C}=_c(L);try{if(await gv(C||null,x),s(""),D)i(null);else{await lt();const T=l();T&&setTimeout(()=>{T.focus()},0)}}catch(T){console.error("Error creating list:",T)}}async function E(x){await m(x,!0)}function _(){if(e()!==null)return wc(l(),()=>{e()!==null&&(i(null),s(""))},{ignoreElements:[],shouldClose:()=>!a()||a().trim()===""})}function w(){const x=e(),D=l();if(x===null||!D)return;const L=setTimeout(()=>{D?.focus()},0);return()=>{clearTimeout(L)}}return{handleCreateListClick:f,handleCreateListKeydown:h,handleCreateListInputEscape:v,handleCreateList:m,handleCreateListOnTab:E,setupClickOutsideEffect:_,setupFocusEffect:w}}class zv{constructor(){this.state=new Map,this.globalDragActive=!1,this.listeners=new Map}subscribe(e,i){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(i);const a=this.getState(e);return i(a),()=>{const s=this.listeners.get(e);s&&(s.delete(i),s.size===0&&this.listeners.delete(e))}}getState(e){const i=this.state.get(e);return i?{tasks:[...i.tasks],isDragActive:i.isDragActive||!1,version:i.version||0}:{tasks:[],isDragActive:!1,version:0}}initializeFromQuery(e,i){if(this.globalDragActive||!Array.isArray(i))return;const a=i.filter(l=>l.status==="unchecked"||l.status==="checked");this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(e);if(!s.isDragActive){const l=a.map(h=>`${h.id}:${h.status}:${h.text||""}`).join(","),f=s.tasks.map(h=>`${h.id}:${h.status}:${h.text||""}`).join(",");l!==f&&(s.tasks=a.map(h=>({...h})),s.version++,this.notify(e))}}startDrag(e,i){this.globalDragActive=!0,[e,i].forEach(a=>{this.state.has(a)||this.state.set(a,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(a);s.isDragActive=!0,s.pendingUpdates=null,s.version++,this.notify(a)})}updateDragState(e,i){if(!this.globalDragActive){console.warn("[TASK DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[TASK DRAG STATE] updateDragState called with invalid tasks");return}this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const a=this.state.get(e);[...a.tasks],a.pendingUpdates={tasks:i.map(s=>({...s})),timestamp:Date.now()},a.pendingUpdates&&(a.tasks=[...a.pendingUpdates.tasks],a.pendingUpdates=null),a.version++,this.notify(e)}completeDrag(e,i,a=!0){this.globalDragActive=!1,[e,i].forEach(s=>{const l=this.state.get(s);l&&(l.pendingUpdates=null,l.isDragActive=!1,l.version++,this.notify(s))})}notify(e){const i=this.getState(e),a=this.listeners.get(e);a&&a.forEach(s=>{try{s(i)}catch(l){console.error("[TASK DRAG STATE] Error in state change listener:",l)}})}isDragActive(){return this.globalDragActive}isDragActiveForList(e){const i=this.state.get(e);return i?i.isDragActive:!1}}const Se=new zv;function Vv(t){return Array.isArray(t)?t.filter(e=>e&&typeof e.id=="number"):[]}function ao(t,e,i){if(!Array.isArray(e)||e.length===0)return null;const a=e.find(_=>_.id===t);if(!a)return null;const s=a.columnIndex??0;a.order;const l=5,f=Array(l).fill(null).map(()=>[]);for(const _ of e){const w=_.columnIndex??0,x=w>=l?l-1:w;f[x].push(_)}for(let _=0;_<f.length;_++)f[_].sort((w,x)=>(w.order??0)-(x.order??0));const h=f[s],v=h.findIndex(_=>_.id===t);if(v===-1)return null;const m=v===h.length-1,E=v===0;if(i==="next"){if(!m)return h[v+1].id;for(let _=s+1;_<l;_++){const w=f[_];if(w.length>0)return w[0].id}return null}if(i==="prev"){if(!E)return h[v-1].id;for(let _=s-1;_>=0;_--){const w=f[_];if(w.length>0)return w[w.length-1].id}return null}return null}async function Ec(t,e){try{const i=await Cr(e),a=[{id:t},...i];await ri(e,a)}catch(i){throw console.error("Error moving task to next list:",i),i}}async function Is(t,e){try{const a=[...await Cr(e),{id:t}];await ri(e,a)}catch(i){throw console.error("Error moving task to previous list:",i),i}}function Yv(){return typeof document>"u"?!1:document.querySelectorAll('.sortable-ghost, [aria-grabbed="true"]').length>0}function xc(t){if(!t||!(t instanceof HTMLElement))return!1;const e=window.getComputedStyle(t);return e.boxShadow&&e.boxShadow!=="none"&&e.boxShadow.includes("inset")}function Wv(){if(typeof document>"u")return[];const t=document.querySelectorAll("ul"),e=[];for(const i of t)i instanceof HTMLElement&&xc(i)&&e.push(i);return e}function kc(){return Yv()||Wv().length>0}function qv(t,e){const{getIsKeyboardTaskDragging:i,setIsKeyboardTaskDragging:a,setLastKeyboardDraggedTaskId:s,setLastBlurredTaskElement:l,setShouldRefocusTaskOnNextTab:f}=t;return function(v,m){const E=v.key,_=v.currentTarget,w=v.target;if(!(!(_ instanceof HTMLElement)||_!==w)){if(E==="Enter"||E===" ")if(!i())a(!0),s(m);else{a(!1),s(m),l(_),f(!0);const D=e();if(D){const L=D.getAttribute("data-list-id");if(L){const C=parseInt(L);Se.globalDragActive&&Se.completeDrag(C,C,!0)}}}else if(E==="Escape"){const x=i(),D=e(),L=kc()||D&&xc(D);if(x||L){a(!1),s(m),l(_),f(!0);const C=e();if(C){const T=C.getAttribute("data-list-id");if(T){const V=parseInt(T);Se.globalDragActive&&Se.completeDrag(V,V,!1)}}v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),_ instanceof HTMLElement&&_.blur()}else v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),l(_),f(!0),_ instanceof HTMLElement&&_.blur()}}}}function Gv(t){const{getIsKeyboardTaskDragging:e,getLastKeyboardDraggedTaskId:i,setLastBlurredTaskElement:a,setShouldRefocusTaskOnNextTab:s}=t;return function(f,h){const v=f.currentTarget,m=e(),E=i();m&&E===h&&(a(v),s(!0))}}function Xv(t,e,i,a,s,l,f){const{getIsKeyboardTaskDragging:h,getLastBlurredTaskElement:v,getShouldRefocusTaskOnNextTab:m,setIsKeyboardTaskDragging:E,setLastKeyboardDraggedTaskId:_,setLastBlurredTaskElement:w,setShouldRefocusTaskOnNextTab:x}=t;let D=!1;async function L(C){const T=C.key,V=h(),U=kc();if((T==="ArrowDown"||T==="ArrowUp"||T==="ArrowLeft"||T==="ArrowRight")&&D){C.preventDefault(),C.stopPropagation();return}if(T==="Tab"){if(U||V){if(C.preventDefault(),C.stopImmediatePropagation(),C.stopPropagation(),E(!1),typeof document<"u"&&document.activeElement){const Ne=document.activeElement.closest("li[data-id]");if(Ne&&Ne instanceof HTMLElement){const Le=Ne.getAttribute("data-id");if(Le){const Ue=parseInt(Le);_(Ue),w(Ne),x(!0)}const nt=Ne.closest("ul[data-list-id]");if(nt){const Ue=nt.getAttribute("data-list-id");if(Ue){const Pe=parseInt(Ue);Se.globalDragActive&&Se.completeDrag(Pe,Pe,!0)}}}}return}const ae=m(),je=v();if(T==="Tab"&&ae&&je){if(C.preventDefault(),C.stopImmediatePropagation(),C.stopPropagation(),x(!1),typeof document<"u"){let Ee=je;if((!(Ee instanceof HTMLElement)||!document.contains(Ee))&&f){const Ne=f.querySelector('span[role="button"]');Ne&&Ne instanceof HTMLElement&&(Ee=Ne)}Ee&&Ee instanceof HTMLElement&&Ee.focus()}return}}if(!V||T!=="ArrowDown"&&T!=="ArrowUp"&&T!=="ArrowLeft"&&T!=="ArrowRight")return;const B=document.activeElement;if(!B)return;const W=B.closest("li[data-id]");if(!W)return;const ee=W.getAttribute("data-id");if(!ee)return;const q=parseInt(ee),N=W.closest("ul[data-list-id]");if(!N)return;const Q=N.getAttribute("data-list-id");if(!Q)return;const Y=parseInt(Q),ve=Se.getState(Y).tasks,ge=ve.find(ae=>ae.id===q);if(!ge)return;const Ce=ve.findIndex(ae=>ae.id===q);if(Ce===-1)return;const Ge=Ce===0,st=Ce===ve.length-1;C.preventDefault(),C.stopImmediatePropagation(),C.stopPropagation(),D=!0;try{if(T==="ArrowDown")if(st){const ae=ao(Y,a,"next");if(ae!=null){Se.globalDragActive||Se.startDrag(Y,ae);const je=ve.find(G=>G.id===q);if(!je)return;const Ee=ve.filter(G=>G.id!==q);Se.updateDragState(Y,Ee);let Ne=Se.getState(ae),Le=Ne?.tasks||[];if(Le.length===0&&Ne.version===0&&!Se.state.has(ae)){const $=(await Cr(ae)).filter(pe=>pe.status==="unchecked"||pe.status==="checked");Se.initializeFromQuery(ae,$),Ne=Se.getState(ae),Le=Ne?.tasks||[]}const Ue=[{...je,listId:ae},...Le];Se.updateDragState(ae,Ue),await Ec(q,ae),await lt();const Pe=document.querySelector(`li[data-id="${q}"]`);Pe instanceof HTMLElement&&Pe.focus()}}else{const ae=[...ve],[je]=ae.splice(Ce,1);ae.splice(Ce+1,0,je),Se.globalDragActive||Se.startDrag(Y,Y),Se.updateDragState(Y,ae),await ri(Y,ae),await lt();let Ee=e?.querySelector(`li[data-id="${q}"]`);if(Ee||(Ee=document.querySelector(`li[data-id="${q}"]`)),Ee instanceof HTMLElement&&(Ee.focus(),await lt(),await new Promise(Le=>setTimeout(Le,50)),document.activeElement!==Ee)){const Le=document.querySelector(`li[data-id="${q}"]`);Le instanceof HTMLElement&&Le.focus()}}else if(T==="ArrowUp")if(Ge){const ae=ao(Y,a,"prev");if(ae!=null){const je=a.find(Le=>Le.id===Y),Ee=a.find(Le=>Le.id===ae);if(je&&Ee&&(je.columnIndex??0)!==(Ee.columnIndex??0)){Se.globalDragActive||Se.startDrag(Y,ae);const Le=ve.find(ke=>ke.id===q);if(!Le)return;const nt=ve.filter(ke=>ke.id!==q);Se.updateDragState(Y,nt);let Ue=Se.getState(ae),Pe=Ue?.tasks||[];if(Pe.length===0&&Ue.version===0&&!Se.state.has(ae)){const Fe=(await Cr(ae)).filter(ze=>ze.status==="unchecked"||ze.status==="checked");Se.initializeFromQuery(ae,Fe),Ue=Se.getState(ae),Pe=Ue?.tasks||[]}const G={...Le,listId:ae},$=[...Pe,G];Se.updateDragState(ae,$),await Is(q,ae),await lt();const pe=document.querySelector(`li[data-id="${q}"]`);pe instanceof HTMLElement&&pe.focus()}else{Se.globalDragActive||Se.startDrag(Y,ae);const Le=ve.find(ke=>ke.id===q);if(!Le)return;const nt=ve.filter(ke=>ke.id!==q);Se.updateDragState(Y,nt);let Ue=Se.getState(ae),Pe=Ue?.tasks||[];if(Pe.length===0&&Ue.version===0&&!Se.state.has(ae)){const Fe=(await Cr(ae)).filter(ze=>ze.status==="unchecked"||ze.status==="checked");Se.initializeFromQuery(ae,Fe),Ue=Se.getState(ae),Pe=Ue?.tasks||[]}const G={...Le,listId:ae},$=[...Pe,G];Se.updateDragState(ae,$),await Is(q,ae),await lt();const pe=document.querySelector(`li[data-id="${q}"]`);pe instanceof HTMLElement&&pe.focus()}}else return}else{const ae=[...ve],[je]=ae.splice(Ce,1);ae.splice(Ce-1,0,je),Se.globalDragActive||Se.startDrag(Y,Y),Se.updateDragState(Y,ae),await ri(Y,ae),await lt();let Ee=e?.querySelector(`li[data-id="${q}"]`);Ee||(Ee=document.querySelector(`li[data-id="${q}"]`)),Ee instanceof HTMLElement&&Ee.focus()}else if(T==="ArrowLeft"||T==="ArrowRight"){const ae=a.find(Ue=>Ue.id===i);if(!ae)return;const je=ae.columnIndex??0,Ee=T==="ArrowLeft"?je-1:je+1;if(Ee<0||Ee>=5)return;const Le=gc(a,5)[Ee]||[];let nt=null;if(Le.length>0){const Ue=Math.min(Ce,Le.length-1);nt=Le[Ue]?.id}if(nt!=null){const Ue=await Cr(nt),Pe=Math.min(Ce,Ue.length),G=[...Ue];G.splice(Pe,0,ge),await ri(nt,G)}}}finally{D=!1}}return document.addEventListener("keydown",L,!0),()=>{document.removeEventListener("keydown",L,!0)}}function Qv(t,e){if(!t)return()=>{};function i(a){const s=a.target;if((a.key==="Enter"||a.key===" ")&&s instanceof HTMLElement&&s.tagName==="H2"&&s.hasAttribute("role")&&s.getAttribute("role")==="button"){const l=t?.querySelector('h2[role="button"]');l&&s===l&&(a.preventDefault(),a.stopImmediatePropagation(),e.openModal(s))}}return t.addEventListener("keydown",i,!0),()=>{t&&t.removeEventListener("keydown",i,!0)}}function Zv(t,e){if(!t)return()=>{};function i(a){const s=a.target;if((a.key==="Enter"||a.key===" ")&&s instanceof HTMLElement&&s.hasAttribute("role")&&s.getAttribute("role")==="button"){const l=t?.querySelector('span[role="button"]');l&&s===l&&(a.preventDefault(),a.stopImmediatePropagation(),e())}}return t.addEventListener("keydown",i,!0),()=>{t&&t.removeEventListener("keydown",i,!0)}}function Jv(t,e,i,a,s){if(!t)return()=>{};const{onTaskTextEdit:l}=s;async function f(h){const v=h.target;if((h.key==="Enter"||h.key===" ")&&v instanceof HTMLElement&&v.hasAttribute("data-no-drag")){h.preventDefault(),h.stopImmediatePropagation();const m=v.closest("li[data-id]");if(m){const E=parseInt(m.getAttribute("data-id")),_=e.find(w=>w.id===E);_&&l&&l(E,_.text,v)}return}if(h.key==="ArrowDown"||h.key==="ArrowUp"){const m=document.activeElement;if(!m)return;const E=m.closest("li[data-id]");if(!E||!t.contains(E))return;const _=E.getAttribute("data-id");if(!_)return;const w=parseInt(_);if(!e.find(T=>T.id===w))return;const D=e.findIndex(T=>T.id===w),L=D===0,C=D===e.length-1;if(h.key==="ArrowDown"&&C){h.preventDefault(),h.stopImmediatePropagation();const T=ao(i,a,"next");T!=null&&await Ec(w,T)}else if(h.key==="ArrowUp"&&L){h.preventDefault(),h.stopImmediatePropagation();const T=ao(i,a,"prev");T!=null&&await Is(w,T)}}}return t.addEventListener("keydown",f,!0),()=>{t.removeEventListener("keydown",f,!0)}}var $v=Re("<button><!></button>");function Ln(t,e){let i=Nt(e,"variant",3,"primary"),a=Nt(e,"size",3,"medium"),s=Nt(e,"disabled",3,!1),l=Nt(e,"type",3,"button"),f=Mh(e,["$$slots","$$events","$$legacy","variant","size","disabled","type","onclick","ariaLabel"]);const h="focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed",v={primary:"bg-grey-80 text-grey-110 hover:bg-grey-90 focus:bg-grey-90 disabled:bg-grey-50 disabled:text-grey-100",secondary:"bg-white text-grey-110 hover:bg-grey-20 focus:bg-grey-30 disabled:bg-white disabled:text-grey-60"},m={small:"px-2 py-1 text-sm",medium:"px-4 py-2",large:"px-6 py-3"},E=`${h} ${v[i()]} ${m[a()]}`;var _=$v();Ch(_,()=>({type:l(),disabled:s(),onclick:e.onclick,ariaLabel:e.ariaLabel,class:E,...f}));var w=Ae(_);_h(w,e,"default",{}),ce(t,_)}var ep=Re('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),tp=Re('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><!> <!></div></div></div></div>');function np(t,e){vr(e,!0);let i=_e(on(e.taskText||"")),a=_e(!1),s=_e(null),l=_e(null),f=wt(()=>()=>{if(!e.taskPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const L=24,C=24,T=io,U=L+C+T+8-8,B=10,W=e.taskPosition.top-U,ee=e.taskPosition.left-io+B,q=e.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${W}px; left: ${ee}px; width: ${q}px;`});$e(()=>{e.isOpen&&(K(i,e.taskText||"",!0),K(a,!1))}),$e(()=>{e.isOpen&&y(s)&&setTimeout(()=>{y(s)?.focus(),y(s)?.select(),y(s)instanceof HTMLTextAreaElement&&(y(s).style.height="auto",y(s).style.height=`${Math.min(y(s).scrollHeight,ro)}px`)},0)}),$e(()=>{if(y(s)&&y(s)instanceof HTMLTextAreaElement){const L=()=>{y(s).style.height="auto",y(s).style.height=`${Math.min(y(s).scrollHeight,ro)}px`};return y(s).addEventListener("input",L),()=>{y(s).removeEventListener("input",L)}}});function h(){const L=y(i)??"",C=L.trim();if(C===""&&L.length>0){e.onSave(e.taskId,""),K(a,!1);return}if(L===""||C===""){K(a,!0);return}e.onSave(e.taskId,C),K(a,!1)}function v(){K(i,e.taskText||"",!0),K(a,!1),e.onCancel()}function m(L){L.target===L.currentTarget&&v()}function E(L){if(L.key==="Tab"){if(!y(l))return;const C=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),T=Array.from(y(l).querySelectorAll(C)).filter(ee=>!(!(ee instanceof HTMLElement)||ee.hasAttribute("disabled")||ee.getAttribute("aria-hidden")==="true"));if(T.length===0)return;const V=document.activeElement,U=T.indexOf(V);let B;L.shiftKey?U<=0?B=T.length-1:B=U-1:U===-1||U===T.length-1?B=0:B=U+1,L.preventDefault(),L.stopPropagation();const W=T[B];W&&W instanceof HTMLElement&&W.focus()}else L.key==="Escape"?v():L.key==="Enter"&&!L.shiftKey&&document.activeElement===y(s)&&(L.preventDefault(),h())}function _(){e.onArchive&&e.onArchive(e.taskId)}var w=cr(),x=Ft(w);{var D=L=>{var C=tp();C.__click=m,C.__keydown=E;var T=Ae(C);T.__click=Y=>Y.stopPropagation();var V=Qe(Ae(T),2),U=Ae(V);U.__keydown=Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),Y.stopPropagation(),h())},Bt(U,Y=>K(s,Y),()=>y(s));var B=Qe(U,2);{var W=Y=>{var me=ep();ce(Y,me)};ht(B,Y=>{y(a)&&Y(W)})}var ee=Qe(V,2),q=Ae(ee);q.__click=_;var N=Qe(q,2),Q=Ae(N);Ln(Q,{variant:"secondary",onclick:v,"aria-label":"Cancel editing and discard changes",children:(Y,me)=>{var ve=Cn("Cancel");ce(Y,ve)},$$slots:{default:!0}});var ie=Qe(Q,2);{let Y=wt(()=>y(a)?"Save disabled: task cannot be empty":"Save task changes");Ln(ie,{variant:"primary",onclick:h,get disabled(){return y(a)},get"aria-label"(){return y(Y)},children:(me,ve)=>{var ge=Cn("Save");ce(me,ge)},$$slots:{default:!0}})}Bt(T,Y=>K(l,Y),()=>y(l)),St(Y=>{hr(T,Y),hr(U,`width: ${Lv}px;`),At(U,"aria-describedby",y(a)?"validation-message":void 0)},[()=>y(f)()]),qa(U,()=>y(i),Y=>K(i,Y)),ce(L,C)};ht(x,L=>{e.isOpen&&L(D)})}ce(t,w),pr()}vi(["click","keydown"]);var rp=Re('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),ip=Re('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-2 py-2 border border-grey-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border font-gilda text-[24px] text-grey-110 svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box; padding-left: 7px; padding-right: 7px; padding-top: 7px; padding-bottom: 7px;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><!> <div class="flex justify-end gap-3"><!> <!></div></div>',1),ap=Re('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-grey-100">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><!> <!></div>',1),op=Re('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-grey-10 text-grey-110 p-6 rounded-xl shadow-2xl border-2 border-grey-50 fixed box-border" role="document"><!></div></div>');function sp(t,e){vr(e,!0);let i=_e(on(e.listName||"")),a=_e(!1),s=_e(null),l=_e(null),f=_e("edit"),h=_e(null),v=wt(()=>()=>{if(!e.listPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const N=24,Q=24,ie=io,ve=N+Q+ie+1+7-8,ge=e.listPosition.top-ve,Ce=e.listPosition.left-io,Ge=Math.max(e.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${ge}px; left: ${Ce}px; width: ${Ge}px; max-width: ${Ge}px; box-sizing: border-box;`});$e(()=>{e.isOpen&&(K(i,e.listName||"",!0),K(a,!1),K(f,"edit"))}),$e(()=>{e.isOpen&&y(s)&&setTimeout(()=>{y(s)?.focus(),y(s)?.select()},0)});function m(){const Q=(y(i)??"").trim();if(Q===""){K(a,!0);return}e.onSave(e.listId,Q),K(a,!1)}function E(){K(i,e.listName||"",!0),K(a,!1),e.onCancel()}function _(N){N.target===N.currentTarget&&(N.preventDefault(),N.stopPropagation(),E())}function w(N){N.target===N.currentTarget?K(h,N.target,!0):K(h,null),N.stopPropagation(),N.preventDefault()}function x(N){N.target===N.currentTarget&&y(h)===N.currentTarget&&(N.preventDefault(),N.stopPropagation(),E()),K(h,null),N.stopPropagation()}function D(N){N.stopPropagation(),N.preventDefault()}function L(N){return N.preventDefault(),N.stopPropagation(),!1}function C(N){return N.preventDefault(),N.stopPropagation(),!1}function T(N){if(N.key==="Tab"){if(!y(l))return;const Q=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),ie=Array.from(y(l).querySelectorAll(Q)).filter(Ce=>!(!(Ce instanceof HTMLElement)||Ce.hasAttribute("disabled")||Ce.getAttribute("aria-hidden")==="true"));if(ie.length===0)return;const Y=document.activeElement,me=ie.indexOf(Y);let ve;N.shiftKey?me<=0?ve=ie.length-1:ve=me-1:me===-1||me===ie.length-1?ve=0:ve=me+1,N.preventDefault(),N.stopPropagation();const ge=ie[ve];ge&&ge instanceof HTMLElement&&ge.focus()}else N.key==="Escape"?y(f)==="confirm-archive"?B():E():N.key==="Enter"&&!N.shiftKey&&y(f)==="edit"&&N.target===y(s)&&(N.preventDefault(),m())}function V(){K(f,"confirm-archive")}function U(){e.onArchive(e.listId),E()}function B(){K(f,"edit")}var W=cr(),ee=Ft(W);{var q=N=>{var Q=op();Q.__click=_,Q.__mousedown=w,Q.__mouseup=x,Q.__mousemove=D,Q.__keydown=T;var ie=Ae(Q);ie.__click=ge=>ge.stopPropagation(),ie.__mousedown=ge=>ge.stopPropagation(),ie.__mouseup=ge=>ge.stopPropagation();var Y=Ae(ie);{var me=ge=>{var Ce=ip(),Ge=Qe(Ft(Ce),2),st=Ae(Ge);Bt(st,Pe=>K(s,Pe),()=>y(s));var ae=Qe(st,2);{var je=Pe=>{var G=rp();ce(Pe,G)};ht(ae,Pe=>{y(a)&&Pe(je)})}var Ee=Qe(Ge,2),Ne=Ae(Ee);Ln(Ne,{variant:"secondary",onclick:V,"aria-label":"Archive this list",children:(Pe,G)=>{var $=Cn("Archive");ce(Pe,$)},$$slots:{default:!0}});var Le=Qe(Ne,2),nt=Ae(Le);Ln(nt,{variant:"secondary",onclick:E,"aria-label":"Cancel editing and discard changes",children:(Pe,G)=>{var $=Cn("Cancel");ce(Pe,$)},$$slots:{default:!0}});var Ue=Qe(nt,2);{let Pe=wt(()=>y(a)?"Save disabled: list name cannot be empty":"Save list name changes");Ln(Ue,{variant:"primary",onclick:m,get disabled(){return y(a)},get"aria-label"(){return y(Pe)},children:(G,$)=>{var pe=Cn("Save");ce(G,pe)},$$slots:{default:!0}})}St(()=>At(st,"aria-describedby",y(a)?"validation-message":void 0)),qa(st,()=>y(i),Pe=>K(i,Pe)),ce(ge,Ce)},ve=ge=>{var Ce=cr(),Ge=Ft(Ce);{var st=ae=>{var je=ap(),Ee=Qe(Ft(je),4),Ne=Ae(Ee);Ln(Ne,{variant:"secondary",onclick:B,"aria-label":"Cancel archiving",children:(nt,Ue)=>{var Pe=Cn("Cancel");ce(nt,Pe)},$$slots:{default:!0}});var Le=Qe(Ne,2);Ln(Le,{variant:"primary",onclick:U,"aria-label":"Confirm archive list",children:(nt,Ue)=>{var Pe=Cn("Archive");ce(nt,Pe)},$$slots:{default:!0}}),ce(ae,je)};ht(Ge,ae=>{y(f)==="confirm-archive"&&ae(st)},!0)}ce(ge,Ce)};ht(Y,ge=>{y(f)==="edit"?ge(me):ge(ve,!1)})}Bt(ie,ge=>K(l,ge),()=>y(l)),St(ge=>hr(ie,ge),[()=>y(v)()]),ti("dragstart",Q,L),ti("drag",Q,C),ti("dragend",Q,C),ce(N,Q)};ht(ee,N=>{e.isOpen&&N(q)})}ce(t,W),pr()}vi(["click","mousedown","mouseup","mousemove","keydown"]);var up=Re('<input type="checkbox" disabled class="cursor-pointer" aria-hidden="true" tabindex="-1"/> <textarea class="flex-1 break-words resize-none max-h-[10rem] overflow-y-auto text-body font-urbanist text-grey-100 placeholder:italic" rows="1" style="height: 24px;"></textarea>',1),lp=Re('<input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-60" role="button" tabindex="0"> </span>',1),cp=Re('<div class="flex items-center gap-2 py-1 border-b border-grey-50 hover:bg-grey-20 w-full print:hidden add-task-container add-task-button svelte-jtbpvm"><!></div>');function hs(t,e){vr(e,!0);let i=Nt(e,"isInputActive",11,!1),a=Nt(e,"inputValue",3,""),s=Nt(e,"buttonText",3,"Add Task"),l=Nt(e,"placeholder",3,"start typing..."),f=Nt(e,"marginLeft",3,!1),h=Nt(e,"containerElement",15,null),v=Nt(e,"textareaElement",15,null),m=_e(null),E=_e(null);$e(()=>{h(y(E)),v(y(m))}),$e(()=>{i()&&y(m)?setTimeout(()=>{if(y(m)?.focus(),y(m)instanceof HTMLTextAreaElement){y(m).style.height="auto";const T=y(m).scrollHeight;y(m).style.height=`${Math.max(24,Math.min(T,ro))}px`}},0):!i()&&y(m)&&y(m)instanceof HTMLTextAreaElement&&(y(m).style.height="24px")}),$e(()=>{if(y(m)&&y(m)instanceof HTMLTextAreaElement){const T=()=>{y(m).style.height="auto";const V=y(m).scrollHeight;y(m).style.height=`${Math.max(24,Math.min(V,ro))}px`};return y(m).addEventListener("input",T),()=>{y(m).removeEventListener("input",T)}}});function _(T){T.key==="Enter"&&!T.shiftKey?(T.preventDefault(),e.onSave?.()):T.key==="Escape"?(T.preventDefault(),e.onEscape?.(T,a())):T.key==="Tab"&&e.onSave?.({closeAfterSave:!0})}function w(T){if(T.key==="Enter"||T.key===" ")T.preventDefault(),e.onActivate?.();else if(T.key==="Escape"){T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation();const V=T.currentTarget;V&&V instanceof HTMLElement&&V.blur()}}var x=cp(),D=Ae(x);{var L=T=>{var V=up(),U=Qe(Ft(V),2);U.__input=B=>e.onInputChange?.(B.currentTarget.value),U.__keydown=_,Bt(U,B=>K(m,B),()=>y(m)),St(()=>{At(U,"placeholder",l()),Ah(U,a())}),ce(T,V)},C=T=>{var V=lp(),U=Qe(Ft(V),2);U.__click=function(...W){e.onActivate?.apply(this,W)},U.__keydown=w;var B=Ae(U);St(()=>{At(U,"aria-label",e.ariaLabel||s()),Dr(B,s())}),ce(T,V)};ht(D,T=>{i()?T(L):T(C,!1)})}Bt(x,T=>K(E,T),()=>y(E)),St(()=>hr(x,f()?"margin-left: 1.5rem;":"")),ce(t,x),pr()}vi(["input","keydown","click"]);function ol(){let t=_e(!1),e=_e(null),i=_e(null);function a(v){if(v&&v instanceof HTMLElement){const m=v.getBoundingClientRect();K(e,{top:m.top,left:m.left,width:m.width,height:m.height},!0),K(i,v,!0)}K(t,!0)}function s(){const v=y(i);K(t,!1),K(e,null),K(i,null),v&&v instanceof HTMLElement&&setTimeout(()=>{v.focus()},0)}function l(){K(t,!1),K(e,null),K(i,null)}function f(v){const m=v?.currentTarget||v?.target;a(m)}function h(v,m={}){const E=v.key;if(E==="Enter"||E===" "){v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation();const _=v.currentTarget;_&&a(_)}else if(E==="Escape")if(v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),m.onEscape)m.onEscape(v);else{const _=v.currentTarget;_&&_ instanceof HTMLElement&&_.blur()}}return{get isOpen(){return y(t)},get position(){return y(e)},get element(){return y(i)},openModal:a,closeModal:s,closeModalWithoutFocus:l,handleClick:f,handleKeydown:h}}var fp=Re('<li tabindex="0" role="listitem" class="flex items-center gap-2 py-1 border-b border-grey-50 cursor-move hover:bg-grey-20 w-full m-0 list-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"><input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false"> </span> <!></li>'),dp=Re('<div class="-mt-6"><!></div>'),hp=Re('<div class="task-list-wrapper m-0 p-0"><ul></ul> <!></div>'),vp=Re("<p>Loading tasks...</p> <!>",1),pp=Re('<div class="flex flex-col w-full"><div class="border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border"><div class="flex items-center transition-colors hover:bg-grey-20 hover:rounded py-1"><h2 role="button" tabindex="0" class="list-title cursor-pointer m-0 px-2 py-2 leading-none text-grey-110 font-gilda text-[24px] rounded -my-1 transition-colors flex-1 min-w-0 focus:outline-none"> </h2></div></div> <!></div> <!> <!>',1);function mp(t,e){vr(e,!0);const i=()=>Ga(y(h),"$tasksQuery",a),[a,s]=Ys();let l=Nt(e,"allLists",19,()=>[]),f=Nt(e,"stableLists",19,()=>[]),h=_e(null),v=_e(on([])),m=_e(!1);const E=ol(),_=ol();let w=_e(null),x=_e(""),D=_e(null),L=_e(null),C=_e(null),T=_e(null),V=_e(null),U=_e(null),B=_e(!1),W=_e(!1),ee=_e(null),q=_e(null),N=_e(null),Q=_e(!1);function ie(Z,de=null){if(!Z)return[];const be=Array.from(Z.children),He=de||e.listId,ot=Se.getState(He).tasks,it=e.listId!==He?Se.getState(e.listId):null,De=it?it.tasks:[];return be.map(It=>{const vt=It.getAttribute("data-id");if(!vt)return null;const Dt=parseInt(vt,10);let un=ot.find(pn=>pn.id===Dt);return!un&&De.length>0&&(un=De.find(pn=>pn.id===Dt)),un||(un=y(v).find(pn=>pn.id===Dt)),un||{id:Dt}}).filter(Boolean)}async function Y(Z){const{oldIndex:de,newIndex:be,from:He,to:at}=Z,ot=e.listId,it=at?.dataset?.listId?parseInt(at.dataset.listId):e.listId;await lt();const De=at||y(D),It=ie(De,it),vt=Vv(It);if(vt.length!==0){if(Se.startDrag(ot,it),Se.updateDragState(it,vt),ot!==it){const un=Se.getState(ot).tasks.filter(pn=>!vt.some(pi=>pi.id===pn.id));Se.updateDragState(ot,un)}await lt();try{await ri(it,vt),Se.completeDrag(ot,it,!0)}catch(Dt){console.error("[TASK DRAG] Failed to save task order:",Dt),Se.completeDrag(ot,it,!1)}}}function me(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(de=>{de instanceof HTMLElement&&ii(de)})}function ve(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(de=>{de instanceof HTMLElement&&yc(de)})}function ge(){!y(D)||y(N)||K(N,new xe(y(D),{animation:150,ghostClass:"sortable-ghost-task",group:"tasks",draggable:"li[data-id]",filter:"[data-no-drag]",preventOnFilter:!1,emptyInsertThreshold:50,swapThreshold:.65,onStart:Z=>{typeof document<"u"&&document.body.classList.add("task-dragging-active"),K(Q,!1);const de=Z.item;de&&de instanceof HTMLElement&&document.querySelectorAll("ul[data-list-id]").forEach(He=>{Array.from(He.children).forEach(ot=>{ot!==de&&ot.classList.contains("sortable-ghost-task")&&ot.classList.remove("sortable-ghost-task")})}),me()},onMove:Z=>{Z.to&&Z.to instanceof HTMLElement&&ii(Z.to),Z.from&&Z.from instanceof HTMLElement&&ii(Z.from)},onEnd:Z=>{typeof document<"u"&&document.body.classList.remove("task-dragging-active"),ve(),K(Q,!0),setTimeout(()=>{K(Q,!1)},100),Y(Z)}}),!0)}$e(()=>{if(y(N)&&y(q)!==null&&y(q)!==e.listId&&(y(N).destroy(),K(N,null)),y(D)&&!y(N)){const Z=setTimeout(()=>{!y(N)&&y(D)&&ge()},10);return()=>{clearTimeout(Z)}}}),tc(()=>{y(N)&&(y(N).destroy(),K(N,null))}),$e(()=>{f().some(de=>de.id===e.listId)&&e.listId?(!y(h)||y(q)!==e.listId)&&(y(q)!==e.listId&&K(v,[],!0),Xa(K(h,Za(()=>Cr(e.listId)),!0),"$tasksQuery",a),K(q,e.listId,!0)):(Xa(K(h,null),"$tasksQuery",a),K(q,null),K(v,[],!0))}),$e(()=>{if(!e.listId)return;const Z=Se.subscribe(e.listId,de=>{const be=de.tasks.map(at=>`${at.id}:${at.status}:${at.text||""}`).join(","),He=y(v).map(at=>`${at.id}:${at.status}:${at.text||""}`).join(",");be!==He&&K(v,de.tasks,!0)});return()=>{Z()}}),$e(()=>{e.listId&&i()&&Array.isArray(i())&&Se.initializeFromQuery(e.listId,i())});const Ce=wt(()=>e.listId&&(f().some(Z=>Z.id===e.listId)||l().some(Z=>Z.id===e.listId)));$e(()=>Qv(y(L),_)),$e(()=>Zv(y(C),je)),$e(()=>Jv(y(D),y(v),e.listId,l(),{onTaskTextEdit:(Z,de,be)=>{K(w,Z,!0),K(x,de,!0),E.openModal(be)}}));const Ge={getIsKeyboardTaskDragging:()=>y(W),setIsKeyboardTaskDragging:Z=>{K(W,Z,!0)},getLastKeyboardDraggedTaskId:()=>y(ee),setLastKeyboardDraggedTaskId:Z=>{K(ee,Z,!0)},getLastBlurredTaskElement:()=>y(U),setLastBlurredTaskElement:Z=>{K(U,Z,!0)},getShouldRefocusTaskOnNextTab:()=>y(B),setShouldRefocusTaskOnNextTab:Z=>{K(B,Z,!0)}},st=qv(Ge,()=>y(D)),ae=Gv(Ge);$e(()=>{if(y(D))return Xv(Ge,y(D),e.listId,l(),()=>y(v),Z=>{K(v,Z,!0)},y(C))});function je(){K(m,!0)}async function Ee(Z,de=""){if(Z.key==="Escape"){let be=de||"";if(y(T)?be=(y(T).value||"").toString():e.newTaskInput&&(be=(e.newTaskInput||"").toString()),be.length>0){await Ne({closeAfterSave:!0});return}if(K(B,!0),y(C)){const He=y(C).querySelector('span[role="button"]');He&&He instanceof HTMLElement?K(U,He,!0):K(U,null)}else K(U,null);K(m,!1),e.onInputChange(""),await lt(),await lt(),await new Promise(He=>requestAnimationFrame(He)),await new Promise(He=>setTimeout(He,il))}}$e(()=>{if(y(m))return wc(()=>y(T),()=>{y(m)&&(K(m,!1),e.onInputChange(""))},{ignoreElements:[],shouldClose:()=>y(T)&&y(T).value.trim()!==""?!1:!e.newTaskInput||e.newTaskInput.trim()===""})});async function Ne(Z={}){const de=Z&&typeof Z=="object"&&Z.closeAfterSave===!0;let be=e.newTaskInput||"";if(y(T)&&(be=(y(T).value||"").toString()),be=(be||"").toString(),jv(be)){K(m,!1),e.onInputChange(""),await lt(),await lt(),await new Promise(at=>requestAnimationFrame(at)),await new Promise(at=>setTimeout(at,il));return}const{text:He}=_c(be);try{const at=await wv(e.listId,He),it=(y(v).length>0?Math.max(...y(v).map(It=>It.order||0)):-1)+1,De={id:at,text:He,listId:e.listId,order:it,status:"unchecked"};K(v,[...y(v),De],!0),e.onInputChange(""),de&&K(m,!1)}catch(at){console.error("Error creating task:",at)}}async function Le(Z,de){try{await nl(Z,de==="unchecked"?"checked":"unchecked")}catch(be){console.error("Error updating task status:",be)}}async function nt(Z){await nl(Z,"archived")}function Ue(){return y(D)?Nv(y(D),"li[data-id]",'span[role="button"]'):null}async function Pe(Z=ds,de=Da){y(L)&&await Bv(()=>{if(y(C)){const be=y(C).querySelector('span[role="button"]');if(be&&be instanceof HTMLElement)return be}return null},{maxAttempts:Z,retryInterval:de,waitForTick:!1})}async function G(Z){try{await nt(Z),y(w)===Z&&(K(w,null),K(x,""),E.closeModalWithoutFocus(),await lt(),await new Promise(de=>setTimeout(de,al)),setTimeout(()=>{const de=(be=0)=>{const He=Ue();He?He.focus():be<ds?setTimeout(()=>de(be+1),Da):Pe(Rv,Da)};de()},Kv))}catch(de){console.error("Error archiving task:",de)}}function $(Z,de,be){if(y(Q))return;const He=be?.currentTarget||be?.target;K(w,Z,!0),K(x,de,!0),E.openModal(He)}function pe(Z,de,be){if(be.key==="Enter"||be.key===" ")K(w,Z,!0),K(x,de,!0),E.handleKeydown(be);else if(be.key==="Escape"){be.preventDefault(),be.stopImmediatePropagation();const He=be.currentTarget;He&&He instanceof HTMLElement&&(K(U,He,!0),K(B,!0),He.blur())}}async function ke(Z,de){try{await Ev(Z,de),K(w,null),K(x,""),E.closeModal()}catch(be){console.error("Error updating task text:",be)}}function Fe(){K(w,null),K(x,""),E.closeModal()}async function ze(Z){await G(Z),setTimeout(()=>{if(typeof document>"u")return;const de=document.activeElement;y(L)&&(!de||!y(L).contains(de))&&Pe(ds,Da)},al)}function ut(Z){_.handleClick(Z)}function Jt(Z){_.handleKeydown(Z)}async function Et(Z,de){try{await bv(Z,de),_.closeModal()}catch(be){console.error("Error updating list name:",be)}}function ct(){_.closeModal()}async function Xe(Z){try{await Av(Z),await kv(Z)}catch(de){console.error("Error archiving list:",de)}}var et=pp(),bt=Ft(et),vn=Ae(bt),ue=Ae(vn),Ut=Ae(ue);Ut.__click=ut,Ut.__keydown=Jt;var $t=Ae(Ut);Bt(vn,Z=>K(V,Z),()=>y(V));var en=Qe(vn,2);{var Ke=Z=>{var de=hp(),be=Ae(de);$r(be,21,()=>y(v),it=>it.id,(it,De)=>{var It=fp(),vt=Ae(It);vt.__change=()=>Le(y(De).id,y(De).status),vt.__keydown=tt=>{if(tt.key==="Enter"||tt.key===" ")tt.preventDefault(),tt.stopPropagation(),tt.stopImmediatePropagation(),Le(y(De).id,y(De).status);else if(tt.key==="Escape"){tt.preventDefault(),tt.stopPropagation(),tt.stopImmediatePropagation();const kn=tt.currentTarget;if(kn&&kn instanceof HTMLElement){const mr=kn.closest("li[data-id]");mr&&mr instanceof HTMLElement&&(K(U,mr,!0),K(B,!0)),kn.blur()}}};var Dt=Qe(vt,2);Dt.__click=tt=>$(y(De).id,y(De).text,tt),Dt.__keydown=tt=>pe(y(De).id,y(De).text,tt);var un=Ae(Dt),pn=Qe(Dt,2);{var pi=tt=>{{let kn=wt(()=>`Archive task: ${y(De).text||"blank task"}`);Ln(tt,{variant:"secondary",size:"small",onclick:()=>G(y(De).id),class:"print:hidden",get"aria-label"(){return y(kn)},children:(mr,jr)=>{var mi=Cn("Archive");ce(mr,mi)},$$slots:{default:!0}})}};ht(pn,tt=>{y(De).status==="checked"&&tt(pi)})}St(()=>{At(It,"data-id",y(De).id),At(It,"aria-label",`Task: ${y(De).text||"blank task"}`),Sh(vt,y(De).status==="checked"),At(vt,"aria-label",`Mark task "${y(De).text||"blank task"}" as ${y(De).status==="checked"?"unchecked":"checked"}`),Wa(Dt,1,Ql(y(De).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100":"cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100")),At(Dt,"aria-label",`Edit task: ${y(De).text||"blank task"}`),Dr(un,y(De).text||"Â ")}),ti("keydown",It,tt=>st(tt,y(De).id),!0),ti("blur",It,tt=>ae(tt,y(De).id)),ce(it,It)}),Bt(be,it=>K(D,it),()=>y(D));var He=Qe(be,2);{var at=it=>{var De=dp(),It=Ae(De);hs(It,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Ne,onEscape:Ee,onActivate:je,buttonText:"Add your first task",placeholder:"start typing...",get ariaLabel(){return`Add your first task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return y(m)},set isInputActive(vt){K(m,vt,!0)},get containerElement(){return y(C)},set containerElement(vt){K(C,vt,!0)},get textareaElement(){return y(T)},set textareaElement(vt){K(T,vt,!0)}}),ce(it,De)},ot=it=>{hs(it,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Ne,onEscape:Ee,onActivate:je,buttonText:"Add Task",placeholder:"start typing...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return y(m)},set isInputActive(De){K(m,De,!0)},get containerElement(){return y(C)},set containerElement(De){K(C,De,!0)},get textareaElement(){return y(T)},set textareaElement(De){K(T,De,!0)}})};ht(He,it=>{y(v).length===0?it(at):it(ot,!1)})}St(()=>{At(be,"data-list-id",e.listId),Wa(be,1,`space-y-0 m-0 p-0 list-none w-full ${y(v).length===0?"empty-drop-zone min-h-[24px]":""}`)}),ce(Z,de)},En=Z=>{var de=vp(),be=Qe(Ft(de),2);hs(be,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Ne,onEscape:Ee,onActivate:je,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return y(m)},set isInputActive(He){K(m,He,!0)},get containerElement(){return y(C)},set containerElement(He){K(C,He,!0)},get textareaElement(){return y(T)},set textareaElement(He){K(T,He,!0)}}),ce(Z,de)};ht(en,Z=>{y(Ce)?Z(Ke):Z(En,!1)})}Bt(bt,Z=>K(L,Z),()=>y(L));var xn=Qe(bt,2);np(xn,{get isOpen(){return E.isOpen},get taskId(){return y(w)},get taskText(){return y(x)},get taskPosition(){return E.position},onSave:ke,onCancel:Fe,onArchive:ze});var Yt=Qe(xn,2);sp(Yt,{get isOpen(){return _.isOpen},get listId(){return e.listId},get listName(){return e.listName},get listPosition(){return _.position},onSave:Et,onCancel:ct,onArchive:Xe}),St(()=>{At(bt,"data-list-id",e.listId),At(Ut,"aria-label",`Rename list: ${e.listName}`),Dr($t,e.listName)}),ce(t,et),pr(),s()}vi(["click","keydown","change"]);var gp=Re('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),yp=Re('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),bp=Re('<div class="create-list-container flex flex-col w-full print:hidden create-list-empty-column"><!></div>'),_p=Re('<div class="flex flex-col" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),wp=Re('<div class="flex flex-col"></div>'),Ep=Re('<div class="empty-drop-zone min-h-[96px]" tabindex="-1"></div>'),xp=Re('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),kp=Re('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Tp=Re('<div class="create-list-container flex flex-col w-full print:hidden"><!></div>'),Ap=Re('<div><!> <div class="sortable-column-container flex flex-col pt-0 gap-y-6 min-h-0 overflow-y-auto overflow-x-hidden px-1"><!> <!></div> <!></div>');function Sp(t,e){vr(e,!0);let i=Nt(e,"createListInput",15,""),a=Nt(e,"createListInputElement",15,null),s=Nt(e,"onColumnElementReady",3,()=>{}),l=_e(null),f=_e(null),h=_e(null),v=_e(null);$e(()=>{y(l)&&s()&&s()(y(l),e.columnIndex)}),$e(()=>{if(!y(f)||!(y(f)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(y(f).style.outline="none",y(f).style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",y(f).style.borderRadius="4px"):(y(f).style.outline="",y(f).style.boxShadow="",y(f).style.borderRadius="")}),$e(()=>{if(!y(l)||!(y(l)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(y(l).style.flex="1 1 auto",y(l).style.minHeight="0"):(y(l).style.flex="",y(l).style.minHeight="")});var m=Ap(),E=Ae(m);{var _=V=>{var U=bp(),B=Ae(U);{var W=q=>{var N=gp(),Q=Ae(N),ie=Ae(Q);ie.__keydown=Y=>{Y.key==="Enter"&&!Y.shiftKey?(Y.preventDefault(),e.onCreateList(e.columnIndex)):Y.key==="Escape"?e.onCreateListInputEscape(Y,e.columnIndex,!0):Y.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Bt(ie,Y=>a(Y),()=>a()),qa(ie,i),ce(q,N)},ee=q=>{var N=yp(),Q=Ae(N);Q.__click=()=>e.onCreateListClick(e.columnIndex),Q.__keydown=ie=>e.onCreateListKeydown(ie,e.columnIndex),Bt(Q,ie=>K(v,ie),()=>y(v)),ce(q,N)};ht(B,q=>{e.createListColumnIndex===e.columnIndex?q(W):q(ee,!1)})}ce(V,U)};ht(E,V=>{e.columnLists.length===0&&V(_)})}var w=Qe(E,2),x=Ae(w);$r(x,19,()=>e.columnLists,V=>V.id,(V,U)=>{const B=wt(()=>mc(y(U))),W=wt(()=>e.stableLists.find(me=>me.id===y(U).id)),ee=wt(()=>!y(W)&&!y(B)?y(U):null),q=wt(()=>y(W)||y(ee));var N=cr(),Q=Ft(N);{var ie=me=>{var ve=_p(),ge=Ae(ve);{let Ce=wt(()=>y(q).name??"Unnamed list"),Ge=wt(()=>e.newTaskInputs[y(q).id]||"");mp(ge,{get listId(){return y(q).id},get listName(){return y(Ce)},get newTaskInput(){return y(Ge)},onInputChange:st=>e.onInputChange(y(q).id,st),get allLists(){return e.allLists},get stableLists(){return e.stableLists}})}St(()=>{At(ve,"data-id",y(U).id),At(ve,"aria-label",`List: ${y(q).name??"Unnamed list"}`),At(ve,"aria-pressed",e.keyboardListDrag?.active&&e.keyboardListDrag?.listId===y(q).id?"true":"false")}),ti("keydown",ve,Ce=>e.onListKeyboardKeydown(Ce,y(q).id),!0),ce(me,ve)},Y=me=>{var ve=wp();St(()=>At(ve,"data-id",y(U).id)),ce(me,ve)};ht(Q,me=>{y(q)?me(ie):me(Y,!1)})}ce(V,N)});var D=Qe(x,2);{var L=V=>{var U=Ep();Bt(U,B=>K(h,B),()=>y(h)),ce(V,U)};ht(D,V=>{e.columnLists.length===0&&V(L)})}Bt(w,V=>K(l,V),()=>y(l));var C=Qe(w,2);{var T=V=>{var U=Tp(),B=Ae(U);{var W=q=>{var N=xp(),Q=Ae(N),ie=Ae(Q);ie.__keydown=Y=>{Y.key==="Enter"&&!Y.shiftKey?(Y.preventDefault(),e.onCreateList(e.columnIndex)):Y.key==="Escape"?e.onCreateListInputEscape(Y,e.columnIndex,!1):Y.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Bt(ie,Y=>a(Y),()=>a()),qa(ie,i),ce(q,N)},ee=q=>{var N=kp(),Q=Ae(N);Q.__click=()=>e.onCreateListClick(e.columnIndex),Q.__keydown=ie=>e.onCreateListKeydown(ie,e.columnIndex),Bt(Q,ie=>K(v,ie),()=>y(v)),ce(q,N)};ht(B,q=>{e.createListColumnIndex===e.columnIndex?q(W):q(ee,!1)})}ce(V,U)};ht(C,V=>{e.columnLists.length>0&&V(T)})}Bt(m,V=>K(f,V),()=>y(f)),St(()=>{Wa(m,1,`flex flex-col pt-0 min-w-0 px-2 h-full gap-y-6 ${e.columnIndex<4?"border-r border-grey-50":""}`,"svelte-785piu"),At(m,"data-column-index",e.columnIndex)}),ce(t,m),pr()}vi(["keydown","click"]);var Ip=Re("<p>Loading...</p>"),Dp=Re('<div class="grid grid-cols-5 w-full h-full py-4 px-1"></div>'),Cp=Re('<div class="w-full h-full overflow-hidden"><!></div>');function Lp(t,e){vr(e,!0);const i=()=>Ga(l,"$lists",a),[a,s]=Ys();let l=Za(()=>pv()),f=wt(()=>i()||[]),h=_e(on([])),v=_e(on({})),m=_e(null),E=_e(""),_=_e(null),w=_e(on({active:!1,listId:null,lastDraggedId:null,shouldRefocusOnNextTab:!1})),x=on(new Map);function D(G){x.forEach($=>{$&&$.option("disabled",G)})}$e(()=>{if(typeof document>"u")return;const G=new MutationObserver(()=>{const pe=document.querySelector(".modal-backdrop");D(!!pe)});G.observe(document.body,{childList:!0,subtree:!0});const $=document.querySelector(".modal-backdrop");return D(!!$),()=>{G.disconnect()}});function L(G,$){if(!G)return[];const pe=Array.from(G.children),ke=new Set,Fe=[],ut=yn.getState().lists;for(const Jt of pe){const Et=Jt.getAttribute("data-id");if(!Et)continue;const ct=parseInt(Et,10);if(ke.has(ct))continue;ke.add(ct);const Xe=ut.find(et=>et.id===ct);if(Xe)Fe.push({...Xe,columnIndex:$});else{const et=y(h).find(bt=>bt.id===ct);et&&Fe.push({...et,columnIndex:$})}}return Fe}function C(G){if(!G)return null;let $=G;for(;$&&$!==document.body;){if($ instanceof HTMLElement){const pe=$.getAttribute("data-column-index");if(pe!==null)return parseInt(pe,10)}$=$.parentElement}return null}async function T(G,$){const{to:pe}=G,ke=pe,Fe=C(ke);if(Fe===null){console.error("[LIST DRAG] Could not determine target column index");return}const ze=Fe!==$;if(await lt(),ze){const Xe=document.querySelectorAll("[data-column-index]"),et=new Map;Xe.forEach(bt=>{if(bt.getAttribute("data-column-index")===null)return;const ue=bt.firstElementChild;if(!ue||!(ue instanceof HTMLElement))return;Array.from(ue.children).forEach($t=>{const en=$t.getAttribute("data-id");if(!en)return;const Ke=parseInt(en,10);et.has(Ke)?$t.remove():et.set(Ke,$t)})}),await lt()}const ut=L(ke,Fe),Jt=Cv(ut),Et=new Set,ct=Jt.filter(Xe=>Et.has(Xe.id)?!1:(Et.add(Xe.id),!0));if(ct.length!==0){if(yn.startDrag(),yn.updateDragState(Fe,ct),await lt(),await lt(),ze){const Xe=document.querySelectorAll("[data-column-index]"),et=new Map;Xe.forEach($t=>{if($t.getAttribute("data-column-index")===null)return;const Ke=$t.firstElementChild;if(!Ke||!(Ke instanceof HTMLElement))return;Array.from(Ke.children).forEach(xn=>{const Yt=xn.getAttribute("data-id");if(!Yt)return;const Z=parseInt(Yt,10);et.has(Z)?xn.remove():et.set(Z,xn)})}),await lt(),await lt();const bt=x.get($),vn=x.get(Fe);bt&&(bt.destroy(),x.delete($)),vn&&(vn.destroy(),x.delete(Fe)),await lt();const ue=document.querySelector(`[data-column-index="${$}"] .sortable-column-container`),Ut=document.querySelector(`[data-column-index="${Fe}"] .sortable-column-container`);ue&&setTimeout(()=>{B(ue,$)},10),Ut&&setTimeout(()=>{B(Ut,Fe)},10)}try{if(await rl(Fe,ct),yn.completeDrag(!0),ct.length===0){const Xe=document.querySelector(`[data-column-index="${Fe}"] .sortable-column-container`);if(Xe){const et=x.get(Fe);et&&(et.destroy(),x.delete(Fe)),await lt(),B(Xe,Fe)}}}catch(Xe){console.error("[LIST DRAG] Failed to save list order:",Xe),yn.completeDrag(!1)}}}function V(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach($=>{$ instanceof HTMLElement&&ii($)})}function U(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach($=>{$ instanceof HTMLElement&&yc($)})}function B(G,$){if(!G||x.has($))return;const pe=new xe(G,{animation:150,ghostClass:"sortable-ghost-list",group:"lists",draggable:"[data-id]",filter:"ul, li, .create-list-container, .empty-drop-zone",preventOnFilter:!1,delay:50,delayOnStartOnly:!0,distance:5,emptyInsertThreshold:50,forceFallback:!0,fallbackOnBody:!0,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onStart:ke=>{if(typeof document<"u"){if(document.querySelector(".modal-backdrop")){pe.option("disabled",!0),setTimeout(()=>{pe.option("disabled",!1)},0);return}document.body.classList.add("list-dragging-active")}V()},onMove:ke=>{ke.to&&ke.to instanceof HTMLElement&&ii(ke.to),ke.from&&ke.from instanceof HTMLElement&&ii(ke.from)},onEnd:ke=>{typeof document<"u"&&document.body.classList.remove("list-dragging-active"),U(),T(ke,$)}});x.set($,pe)}tc(()=>{x.forEach(G=>{G&&G.destroy()}),x.clear()}),$e(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(y(v)).length===0){const G={};for(const $ of i())G[$.id]="";K(v,G,!0)}}),$e(()=>{if(i()&&Array.isArray(i())&&i().length>0){const G={...y(v)};let $=!1;for(const pe of i())pe.id in G||(G[pe.id]="",$=!0);$&&K(v,G,!0)}}),$e(()=>{const G=yn.subscribe($=>{K(h,$.lists,!0)});return()=>{G()}}),$e(()=>{i()&&Array.isArray(i())&&yn.initializeFromQuery(i())});const W=5;let ee=wt(()=>gc(y(h),W));async function q(G,$){const pe=y(ee);if(!pe||pe.length===0)return;const ke=Dv(pe,G,$,W);if(!ke)return;ke.updatedDraggableLists;const Fe="targetColumnIndex"in ke&&ke.targetColumnIndex!==void 0?Number(ke.targetColumnIndex):0,ze="targetColumnItems"in ke&&ke.targetColumnItems!==void 0&&Array.isArray(ke.targetColumnItems)?ke.targetColumnItems:[];if(ze.length!==0){yn.startDrag(),yn.updateDragState(Fe,ze);try{const ut=Array.isArray(ze)?ze:[];await rl(Fe,ut),yn.completeDrag(!0)}catch(ut){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",ut),yn.completeDrag(!1)}y(w).active&&y(w).listId===G&&await bc(G)}}function N(G){return y(w).active===!0&&y(w).listId===G}function Q(G){K(w,{...y(w),active:!0,listId:G,shouldRefocusOnNextTab:!1},!0)}function ie(){y(w).listId!=null?K(w,{...y(w),active:!1,listId:null,lastDraggedId:y(w).listId,shouldRefocusOnNextTab:!0},!0):K(w,{...y(w),active:!1,listId:null},!0)}function Y(){if(typeof document>"u")return;const G=document.activeElement;G&&G instanceof HTMLElement&&G.blur()}function me(G,$){const pe=G.currentTarget,ke=G.target,Fe=G.key;if(!N($)){Fe==="Enter"||Fe===" "?pe instanceof HTMLElement&&pe===ke&&(G.preventDefault(),G.stopPropagation(),G.stopImmediatePropagation(),$!=null&&Q($)):Fe==="Escape"&&pe instanceof HTMLElement&&pe===ke&&(G.preventDefault(),G.stopPropagation(),G.stopImmediatePropagation(),$!=null&&K(w,{...y(w),lastDraggedId:$,shouldRefocusOnNextTab:!0},!0),pe.blur());return}}$e(()=>{typeof document>"u"||(y(w).active?document.body.classList.add("keyboard-list-dragging-active"):document.body.classList.remove("keyboard-list-dragging-active"))}),$e(()=>typeof document>"u"?void 0:Fv({getKeyboardListDrag:()=>({active:y(w).active,listId:y(w).listId}),getLastKeyboardDraggedListId:()=>y(w).lastDraggedId,getShouldRefocusListOnNextTab:()=>y(w).shouldRefocusOnNextTab,setShouldRefocusListOnNextTab:$=>{K(w,{...y(w),shouldRefocusOnNextTab:$},!0)}},($,pe)=>q($,pe),()=>ie(),()=>Y()));function ve(G,$){y(v)[G]=$}const ge=Uv({getColumnIndex:()=>y(m),setColumnIndex:G=>{K(m,G,!0)},getInput:()=>y(E),setInput:G=>{K(E,G,!0)},getInputElement:()=>y(_)}),{handleCreateListClick:Ce,handleCreateListKeydown:Ge,handleCreateListInputEscape:st,handleCreateList:ae,handleCreateListOnTab:je,setupClickOutsideEffect:Ee,setupFocusEffect:Ne}=ge;$e(()=>Ee()),$e(()=>Ne());var Le=Cp(),nt=Ae(Le);{var Ue=G=>{var $=Ip();ce(G,$)},Pe=G=>{var $=cr(),pe=Ft($);{var ke=Fe=>{var ze=Dp();$r(ze,21,()=>y(ee),La,(ut,Jt,Et)=>{{let ct=wt(()=>({active:y(w).active,listId:y(w).listId}));Sp(ut,{columnIndex:Et,get columnLists(){return y(Jt)},get stableLists(){return y(f)},get newTaskInputs(){return y(v)},get createListColumnIndex(){return y(m)},get keyboardListDrag(){return y(ct)},onInputChange:ve,onListKeyboardKeydown:me,get onCreateListClick(){return Ce},get onCreateListKeydown(){return Ge},get onCreateListInputEscape(){return st},get onCreateList(){return ae},get onCreateListOnTab(){return je},onColumnElementReady:(Xe,et)=>{Xe&&setTimeout(()=>{B(Xe,et)},10)},get allLists(){return i()},get createListInput(){return y(E)},set createListInput(Xe){K(E,Xe,!0)},get createListInputElement(){return y(_)},set createListInputElement(Xe){K(_,Xe,!0)}})}}),ce(Fe,ze)};ht(pe,Fe=>{Array.isArray(i())&&Fe(ke)},!0)}ce(G,$)};ht(nt,G=>{i()===void 0||i()===null?G(Ue):G(Pe,!1)})}ce(t,Le),pr(),s()}var Pp=Re("<p>Loading...</p>"),Op=Re("<p>Loading data...</p>"),Mp=Re('<p class="text-grey-60">No archived lists or tasks</p>'),Rp=Re('<span class="text-sm text-grey-60"> </span>'),Kp=Re('<span class="text-xs bg-grey-30 px-2 py-1 rounded">[List Archived]</span> <!>',1),Bp=Re('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),Np=Re('<p class="text-sm text-grey-60 italic">No archived tasks</p>'),Fp=Re('<li class="flex items-center gap-3 flex-wrap"><span class="line-through text-grey-100"> </span> <!></li>'),jp=Re('<div class="mb-4"><h4 class="text-sm font-medium text-grey-60 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),Hp=Re('<div class="border-b border-grey-50 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold text-grey-110"> </h3> <!></div></div> <div class="border-b border-grey-50 pb-4"><!></div>',1),Up=Re('<div class="grid grid-cols-2 gap-4"></div>'),zp=Re('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function Vp(t,e){vr(e,!0);const i=()=>Ga(y(h),"$listsQuery",s),a=()=>Ga(y(f),"$archivedTasksQuery",s),[s,l]=Ys();let f=_e(null),h=_e(null);$e(()=>{Xa(K(f,Za(()=>_v()),!0),"$archivedTasksQuery",s),Xa(K(h,Za(()=>mv()),!0),"$listsQuery",s)});function v(T){return T?new Date(T).toDateString():null}function m(T){return T?new Date(T).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let E=wt(()=>{const T=y(f)?a():null,V=y(h)?i():null;if(!V||!Array.isArray(V))return[];const U={};if(T&&Array.isArray(T))for(const W of T)U[W.listId]||(U[W.listId]=[]),U[W.listId].push(W);const B=[];for(const W of V){const ee=W.archivedAt!=null,q=U[W.id]&&U[W.id].length>0;if(ee||q){const N=U[W.id]||[],Q={};for(const ie of N){const Y=v(ie.archivedAt)||"Unknown";Q[Y]||(Q[Y]=[]),Q[Y].push(ie)}B.push({list:W,listArchiveDate:W.archivedAt?v(W.archivedAt):null,tasksByDate:Q,hasTasks:N.length>0})}}return B.sort((W,ee)=>{if(W.list.order!==ee.list.order)return W.list.order-ee.list.order;const q=W.list.name??"Unnamed list",N=ee.list.name??"Unnamed list";return q.localeCompare(N)}),B});function _(T){return T.sort((V,U)=>{if(V==="Unknown")return 1;if(U==="Unknown")return-1;const B=new Date(V).getTime();return new Date(U).getTime()-B})}async function w(T){try{(await xv(T)).listRestored&&console.log("Task and its list have been restored")}catch(V){console.error("Error restoring task:",V)}}var x=zp(),D=Qe(Ae(x),2);{var L=T=>{var V=Pp();ce(T,V)},C=T=>{var V=cr(),U=Ft(V);{var B=ee=>{var q=Op();ce(ee,q)},W=ee=>{var q=cr(),N=Ft(q);{var Q=Y=>{var me=Mp();ce(Y,me)},ie=Y=>{var me=Up();$r(me,21,()=>y(E),La,(ve,ge)=>{const Ce=wt(()=>y(ge).list),Ge=wt(()=>y(Ce).name??"Unnamed list"),st=wt(()=>y(Ce).archivedAt!=null),ae=wt(()=>y(ge).listArchiveDate);var je=Hp(),Ee=Ft(je),Ne=Ae(Ee),Le=Ae(Ne),nt=Ae(Le),Ue=Qe(Le,2);{var Pe=ze=>{var ut=Kp(),Jt=Qe(Ft(ut),2);{var Et=ct=>{var Xe=Rp(),et=Ae(Xe);St(bt=>Dr(et,`- ${bt??""}`),[()=>m(y(ae))]),ce(ct,Xe)};ht(Jt,ct=>{y(ae)&&ct(Et)})}ce(ze,ut)},G=ze=>{var ut=Bp();ce(ze,ut)};ht(Ue,ze=>{y(st)?ze(Pe):ze(G,!1)})}var $=Qe(Ee,2),pe=Ae($);{var ke=ze=>{var ut=Np();ce(ze,ut)},Fe=ze=>{var ut=cr(),Jt=Ft(ut);$r(Jt,17,()=>_(Object.keys(y(ge).tasksByDate)),La,(Et,ct)=>{const Xe=wt(()=>y(ge).tasksByDate[y(ct)]);var et=jp(),bt=Ae(et),vn=Ae(bt),ue=Qe(bt,2);$r(ue,21,()=>y(Xe),La,(Ut,$t)=>{var en=Fp(),Ke=Ae(en),En=Ae(Ke),xn=Qe(Ke,2);Ln(xn,{variant:"primary",size:"small",onclick:()=>w(y($t).id),children:(Yt,Z)=>{var de=Cn("Restore");ce(Yt,de)},$$slots:{default:!0}}),St(()=>Dr(En,y($t).text)),ce(Ut,en)}),St(Ut=>Dr(vn,Ut),[()=>y(ct)==="Unknown"?"Unknown Date":m(y(ct))]),ce(Et,et)}),ce(ze,ut)};ht(pe,ze=>{y(ge).hasTasks?ze(Fe,!1):ze(ke)})}St(()=>Dr(nt,y(Ge))),ce(ve,je)}),ce(Y,me)};ht(N,Y=>{y(E).length===0?Y(Q):Y(ie,!1)},!0)}ce(ee,q)};ht(U,ee=>{!a()||!i()?ee(B):ee(W,!1)},!0)}ce(T,V)};ht(D,T=>{!y(f)||!y(h)?T(L):T(C,!1)})}St(()=>hr(x,`width: ${Ss}px;`)),ce(t,x),pr(),l()}var Yp=Re('<main class="min-h-screen flex flex-col items-center justify-center bg-grey-10 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><!></div> <div class="bg-grey-10 print:bg-grey-10 border-2 border-grey-50 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-grey-80 pointer-events-none z-0"></div> <div class="absolute inset-[16px] z-10"><!></div></div> <!></main>');function Wp(t){function e(){window.print()}var i=Yp(),a=Ae(i),s=Ae(a);Ln(s,{variant:"primary",size:"large",onclick:e,children:(m,E)=>{var _=Cn("Print");ce(m,_)},$$slots:{default:!0}});var l=Qe(a,2),f=Qe(Ae(l),2),h=Ae(f);Lp(h,{});var v=Qe(l,2);Vp(v,{}),St(()=>{hr(a,`width: ${Ss}px;`),hr(l,`width: ${Ss}px; height: ${Pv}px;`)}),ce(t,i)}const qp=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],Gp=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function Xp(){try{if(await Me.lists.count()>0)return;await Me.lists.bulkAdd(qp),await Me.tasks.bulkAdd(Gp),console.log("Database seeded with mock data")}catch(t){throw console.error("Error seeding database:",t),t}}(async()=>{await Xp().catch(console.error);const t=document.getElementById("app");if(!t){console.error("App element not found!");return}mh(Wp,{target:t})})();
