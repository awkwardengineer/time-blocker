(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(s){if(s.ep)return;s.ep=!0;const u=i(s);fetch(s.href,u)}})();const Wf="production",be=!Wf.toLowerCase().startsWith("prod");var Os=Array.isArray,qf=Array.prototype.indexOf,Ms=Array.from,mr=Object.defineProperty,Mr=Object.getOwnPropertyDescriptor,hu=Object.getOwnPropertyDescriptors,Gf=Object.prototype,Xf=Array.prototype,Rs=Object.getPrototypeOf,Ml=Object.isExtensible;const Ba=()=>{};function Qf(t){for(var e=0;e<t.length;e++)t[e]()}function vu(){var t,e,i=new Promise((a,s)=>{t=a,e=s});return{promise:i,resolve:t,reject:e}}const jt=2,Ks=4,Ns=8,pu=1<<24,Qn=16,Zn=32,Br=64,so=128,Tn=512,Wt=1024,on=2048,Jn=4096,fn=8192,Vn=16384,Bs=32768,oi=65536,Fa=1<<17,mu=1<<18,hi=1<<19,Zf=1<<20,gr=32768,gs=1<<21,lo=1<<22,dr=1<<23,Yn=Symbol("$state"),Jf=Symbol("legacy props"),$f=Symbol(""),gu=Symbol("proxy path"),$r=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function yu(t){if(be){const e=new Error(`lifecycle_outside_component
\`${t}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ed(){if(be){const t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Rl(){if(be){const t=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function td(){if(be){const t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function nd(t){if(be){const e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function rd(){if(be){const t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function id(t){if(be){const e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function ad(){if(be){const t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function od(t){if(be){const e=new Error(`props_invalid_value
Cannot do \`bind:${t}={undefined}\` when \`${t}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_invalid_value")}function sd(t){if(be){const e=new Error(`props_rest_readonly
Rest element properties of \`$props()\` such as \`${t}\` are readonly
https://svelte.dev/e/props_rest_readonly`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_rest_readonly")}function ld(t){if(be){const e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function ud(){if(be){const t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function cd(){if(be){const t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fd(){if(be){const t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function dd(){if(be){const t=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const bu=1,_u=2,wu=4,hd=8,vd=16,pd=1,md=2,gd=4,yd=8,bd=16,_d=1,wd=2,Bt=Symbol(),xd=Symbol("filename"),Ed="http://www.w3.org/1999/xhtml",kd="@attach";var Fs="font-weight: bold",js="font-weight: normal";function Td(){be?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Fs,js):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function $o(t){be?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Fs,js):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Sd(){be?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Fs,js):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function xu(t){return t===this.v}function Eu(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function ku(t){return!Eu(t,this.v)}let vi=!1,Ad=!1;function Id(){vi=!0}function Cn(t,e){return t.label=e,Tu(t.v,e),t}function Tu(t,e){return t?.[gu]?.(e),t}function Dd(t){const e=new Error,i=Cd();return i.length===0?null:(i.unshift(`
`),mr(e,"stack",{value:i.join(`
`)}),mr(e,"name",{value:t}),e)}function Cd(){const t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const e=new Error().stack;if(Error.stackTraceLimit=t,!e)return[];const i=e.split(`
`),a=[];for(let s=0;s<i.length;s++){const u=i[s],d=u.replaceAll("\\","/");if(u.trim()!=="Error"){if(u.includes("validate_each_keys"))return[];d.includes("svelte/src/internal")||d.includes("node_modules/.vite")||a.push(u)}}return a}let kt=null;function si(t){kt=t}let li=null;function ja(t){li=t}let Yi=null;function Kl(t){Yi=t}function Bn(t,e=!1,i){kt={p:kt,i:!1,c:null,e:null,s:t,x:null,l:vi&&!e?{s:null,u:null,$:[]}:null},be&&(kt.function=i,Yi=i)}function Fn(t){var e=kt,i=e.e;if(i!==null){e.e=null;for(var a of i)ju(a)}return e.i=!0,kt=e.p,be&&(Yi=kt?.function??null),{}}function Wi(){return!vi||kt!==null&&kt.l===null}let Pr=[];function Su(){var t=Pr;Pr=[],Qf(t)}function Fr(t){if(Pr.length===0&&!Mi){var e=Pr;queueMicrotask(()=>{e===Pr&&Su()})}Pr.push(t)}function Ld(){for(;Pr.length>0;)Su()}const ys=new WeakMap;function Au(t){var e=lt;if(e===null)return ot.f|=dr,t;if(be&&t instanceof Error&&!ys.has(t)&&ys.set(t,Pd(t,e)),(e.f&Bs)===0){if((e.f&so)===0)throw be&&!e.parent&&t instanceof Error&&Iu(t),t;e.b.error(t)}else ui(t,e)}function ui(t,e){for(;e!==null;){if((e.f&so)!==0)try{e.b.error(t);return}catch(i){t=i}e=e.parent}throw be&&t instanceof Error&&Iu(t),t}function Pd(t,e){const i=Mr(t,"message");if(!(i&&!i.configurable)){for(var a=Vs?"  ":"	",s=`
${a}in ${e.fn?.name||"<unknown>"}`,u=e.ctx;u!==null;)s+=`
${a}in ${u.function?.[xd].split("/").pop()}`,u=u.p;return{message:t.message+`
${s}
`,stack:t.stack?.split(`
`).filter(d=>!d.includes("svelte/src/internal")).join(`
`)}}}function Iu(t){const e=ys.get(t);e&&(mr(t,"message",{value:e.message}),mr(t,"stack",{value:e.stack}))}const Ea=new Set;let dt=null,Ca=null,gn=null,mn=[],uo=null,bs=!1,Mi=!1;class Mn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){mn=[],Ca=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of e)this.#o(a,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(Ca=this,dt=null,Nl(i.render_effects),Nl(i.effects),Ca=null,this.#l?.resolve()),gn=null}#o(e,i){e.f^=Wt;for(var a=e.first;a!==null;){var s=a.f,u=(s&(Zn|Br))!==0,d=u&&(s&Wt)!==0,v=d||(s&fn)!==0||this.skipped_effects.has(a);if((a.f&so)!==0&&a.b?.is_pending()&&(i={parent:i,effect:a,effects:[],render_effects:[],block_effects:[]}),!v&&a.fn!==null){u?a.f^=Wt:(s&Ks)!==0?i.effects.push(a):Gi(a)&&((a.f&Qn)!==0&&i.block_effects.push(a),Vi(a));var p=a.first;if(p!==null){a=p;continue}}var m=a.parent;for(a=a.next;a===null&&m!==null;)m===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),a=m.next,m=m.parent}}#s(e){for(const i of e)((i.f&on)!==0?this.#a:this.#i).push(i),this.#u(i.deps),qt(i,Wt)}#u(e){if(e!==null)for(const i of e)(i.f&jt)===0||(i.f&gr)===0||(i.f^=gr,this.#u(i.deps))}capture(e,i){this.previous.has(e)||this.previous.set(e,i),(e.f&dr)===0&&(this.current.set(e,e.v),gn?.set(e,e.v))}activate(){dt=this,this.apply()}deactivate(){dt===this&&(dt=null,gn=null)}flush(){if(this.activate(),mn.length>0){if(Du(),dt!==null&&dt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#c(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Ea.size>1){this.previous.clear();var e=gn,i=!0,a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const u of Ea){if(u===this){i=!1;continue}const d=[];for(const[p,m]of this.current){if(u.current.has(p))if(i&&m!==u.current.get(p))u.current.set(p,m);else continue;d.push(p)}if(d.length===0)continue;const v=[...u.current.keys()].filter(p=>!this.current.has(p));if(v.length>0){var s=mn;mn=[];const p=new Set,m=new Map;for(const x of d)Cu(x,v,p,m);if(mn.length>0){dt=u,u.apply();for(const x of mn)u.#o(x,a);u.deactivate()}mn=s}}dt=null,gn=e}this.committed=!0,Ea.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#a)qt(e,on),Kr(e);for(const e of this.#i)qt(e,Jn),Kr(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#l??=vu()).promise}static ensure(){if(dt===null){const e=dt=new Mn;Ea.add(dt),Mi||Mn.enqueue(()=>{dt===e&&e.flush()})}return dt}static enqueue(e){Fr(e)}apply(){}}function Od(t){var e=Mi;Mi=!0;try{for(var i;;){if(Ld(),mn.length===0&&(dt?.flush(),mn.length===0))return uo=null,i;Du()}}finally{Mi=e}}function Du(){var t=vr;bs=!0;var e=be?new Set:null;try{var i=0;for(za(!0);mn.length>0;){var a=Mn.ensure();if(i++>1e3){if(be){var s=new Map;for(const d of a.current.keys())for(const[v,p]of d.updated??[]){var u=s.get(v);u||(u={error:p.error,count:0},s.set(v,u)),u.count+=p.count}for(const d of s.values())d.error&&console.error(d.error)}Md()}if(a.process(mn),hr.clear(),be)for(const d of a.current.keys())e.add(d)}}finally{if(bs=!1,za(t),uo=null,be)for(const d of e)d.updated=null}}function Md(){try{ad()}catch(t){be&&mr(t,"stack",{value:""}),ui(t,uo)}}let zn=null;function Nl(t){var e=t.length;if(e!==0){for(var i=0;i<e;){var a=t[i++];if((a.f&(Vn|fn))===0&&Gi(a)&&(zn=new Set,Vi(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null&&a.ac===null?Vu(a):a.fn=null),zn?.size>0)){hr.clear();for(const s of zn){if((s.f&(Vn|fn))!==0)continue;const u=[s];let d=s.parent;for(;d!==null;)zn.has(d)&&(zn.delete(d),u.push(d)),d=d.parent;for(let v=u.length-1;v>=0;v--){const p=u[v];(p.f&(Vn|fn))===0&&Vi(p)}}zn.clear()}}zn=null}}function Cu(t,e,i,a){if(!i.has(t)&&(i.add(t),t.reactions!==null))for(const s of t.reactions){const u=s.f;(u&jt)!==0?Cu(s,e,i,a):(u&(lo|Qn))!==0&&(u&on)===0&&Lu(s,e,a)&&(qt(s,on),Kr(s))}}function Lu(t,e,i){const a=i.get(t);if(a!==void 0)return a;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if((s.f&jt)!==0&&Lu(s,e,i))return i.set(s,!0),!0}return i.set(t,!1),!1}function Kr(t){for(var e=uo=t;e.parent!==null;){e=e.parent;var i=e.f;if(bs&&e===lt&&(i&Qn)!==0&&(i&mu)===0)return;if((i&(Br|Zn))!==0){if((i&Wt)===0)return;e.f^=Wt}}mn.push(e)}function Rd(t){let e=0,i=Nr(0),a;return be&&Cn(i,"createSubscriber version"),()=>{Ui()&&(f(i),po(()=>(e===0&&(a=br(()=>t(()=>Ri(i)))),e+=1,()=>{Fr(()=>{e-=1,e===0&&(a?.(),a=void 0,Ri(i))})})))}}var Kd=oi|hi|so;function Nd(t,e,i){new Bd(t,e,i)}class Bd{parent;#e=!1;#t;#r=null;#n;#l;#a;#i=null;#o=null;#s=null;#u=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#b=Rd(()=>(this.#d=Nr(this.#f),be&&Cn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(e,i,a){this.#t=e,this.#n=i,this.#l=a,this.parent=lt.b,this.#e=!!this.#n.pending,this.#a=Ys(()=>{lt.b=this;{var s=this.#g();try{this.#i=nn(()=>a(s))}catch(u){this.error(u)}this.#h>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},Kd)}#_(){try{this.#i=nn(()=>this.#l(this.#t))}catch(e){this.error(e)}this.#e=!1}#w(){const e=this.#n.pending;e&&(this.#o=nn(()=>e(this.#t)),Mn.enqueue(()=>{var i=this.#g();this.#i=this.#p(()=>(Mn.ensure(),nn(()=>this.#l(i)))),this.#h>0?this.#m():(ti(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#g(){var e=this.#t;return this.#e&&(this.#c=Gn(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var i=lt,a=ot,s=kt;kn(this.#a),an(this.#a),si(this.#a.ctx);try{return e()}catch(u){return Au(u),null}finally{kn(i),an(a),si(s)}}#m(){const e=this.#n.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),qu(this.#i,this.#u)),this.#o===null&&(this.#o=nn(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}this.#h+=e,this.#h===0&&(this.#e=!1,this.#o&&ti(this.#o,()=>{this.#o=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(e){this.#y(e),this.#f+=e,this.#d&&fi(this.#d,this.#f)}get_effect_pending(){return this.#b(),f(this.#d)}error(e){var i=this.#n.onerror;let a=this.#n.failed;if(this.#v||!i&&!a)throw e;this.#i&&(Ft(this.#i),this.#i=null),this.#o&&(Ft(this.#o),this.#o=null),this.#s&&(Ft(this.#s),this.#s=null);var s=!1,u=!1;const d=()=>{if(s){Sd();return}s=!0,u&&dd(),Mn.ensure(),this.#f=0,this.#s!==null&&ti(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,nn(()=>this.#l(this.#t)))),this.#h>0?this.#m():this.#e=!1};var v=ot;try{an(null),u=!0,i?.(e,d),u=!1}catch(p){ui(p,this.#a&&this.#a.parent)}finally{an(v)}a&&Fr(()=>{this.#s=this.#p(()=>{Mn.ensure(),this.#v=!0;try{return nn(()=>{a(this.#t,()=>e,()=>d)})}catch(p){return ui(p,this.#a.parent),null}finally{this.#v=!1}})})}}function La(t,e){return e}function Fd(t,e,i){for(var a=[],s=e.length,u=0;u<s;u++)Ws(e[u].e,a,!0);Yu(a,()=>{var d=a.length===0&&i!==null;if(d){var v=i,p=v.parentNode;$d(p),p.append(v),t.items.clear(),Ln(t,e[0].prev,e[s-1].next)}for(var m=0;m<s;m++){var x=e[m];d||(t.items.delete(x.k),Ln(t,x.prev,x.next)),Ft(x.e,!d)}t.first===e[0]&&(t.first=e[0].prev)})}function yn(t,e,i,a,s,u=null){var d=t,v=new Map,p=null,m=(e&wu)!==0,x=(e&bu)!==0,_=(e&_u)!==0;if(m){var w=t;d=w.appendChild(Gn())}var E=null,L=Hs(()=>{var R=i();return Os(R)?R:R==null?[]:Ms(R)}),D,A=!0;function T(){jd(B,D,d,e,a),E!==null&&(D.length===0?(E.fragment?(d.before(E.fragment),E.fragment=null):qs(E.effect),K.first=E.effect):ti(E.effect,()=>{E=null}))}var K=Ys(()=>{D=f(L);for(var R=D.length,U=new Set,ee=dt,Y=null,H=Fu(),Z=0;Z<R;Z+=1){var re=D[Z],X=a(re,Z),Te=A?null:v.get(X);Te?(x&&fi(Te.v,re),_?fi(Te.i,Z):Te.i=Z,H&&ee.skipped_effects.delete(Te.e)):(Te=Hd(A?d:null,Y,re,X,Z,s,e,i),A&&(Te.o=!0,Y===null?p=Te:Y.next=Te,Y=Te),v.set(X,Te)),U.add(X)}if(R===0&&u&&!E)if(A)E={fragment:null,effect:nn(()=>u(d))};else{var ke=document.createDocumentFragment(),Se=Gn();ke.append(Se),E={fragment:ke,effect:nn(()=>u(Se))}}if(!A)if(H){for(const[Be,Ze]of v)U.has(Be)||ee.skipped_effects.add(Ze.e);ee.oncommit(T),ee.ondiscard(()=>{})}else T();f(L)}),B={effect:K,items:v,first:p};A=!1}function jd(t,e,i,a,s){var u=(a&hd)!==0,d=e.length,v=t.items,p=t.first,m,x=null,_,w=[],E=[],L,D,A,T;if(u)for(T=0;T<d;T+=1)L=e[T],D=s(L,T),A=v.get(D),A.o&&(A.a?.measure(),(_??=new Set).add(A));for(T=0;T<d;T+=1){if(L=e[T],D=s(L,T),A=v.get(D),t.first??=A,!A.o){A.o=!0;var K=x?x.next:p;Ln(t,x,A),Ln(t,A,K),es(A,K,i),x=A,w=[],E=[],p=x.next;continue}if((A.e.f&fn)!==0&&(qs(A.e),u&&(A.a?.unfix(),(_??=new Set).delete(A))),A!==p){if(m!==void 0&&m.has(A)){if(w.length<E.length){var B=E[0],R;x=B.prev;var U=w[0],ee=w[w.length-1];for(R=0;R<w.length;R+=1)es(w[R],B,i);for(R=0;R<E.length;R+=1)m.delete(E[R]);Ln(t,U.prev,ee.next),Ln(t,x,U),Ln(t,ee,B),p=B,x=ee,T-=1,w=[],E=[]}else m.delete(A),es(A,p,i),Ln(t,A.prev,A.next),Ln(t,A,x===null?t.first:x.next),Ln(t,x,A),x=A;continue}for(w=[],E=[];p!==null&&p.k!==D;)(p.e.f&fn)===0&&(m??=new Set).add(p),E.push(p),p=p.next;if(p===null)continue;A=p}w.push(A),x=A,p=A.next}if(p!==null||m!==void 0){for(var Y=m===void 0?[]:Ms(m);p!==null;)(p.e.f&fn)===0&&Y.push(p),p=p.next;var H=Y.length;if(H>0){var Z=(a&wu)!==0&&d===0?i:null;if(u){for(T=0;T<H;T+=1)Y[T].a?.measure();for(T=0;T<H;T+=1)Y[T].a?.fix()}Fd(t,Y,Z)}}u&&Fr(()=>{if(_!==void 0)for(A of _)A.a?.apply()})}function Hd(t,e,i,a,s,u,d,v){var p=(d&bu)!==0,m=(d&vd)===0,x=p?m?Mu(i,!1,!1):Nr(i):i,_=(d&_u)===0?s:Nr(s);be&&p&&(x.trace=()=>{var L=typeof _=="number"?s:_.v;v()[L]});var w={i:_,v:x,k:a,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var E=document.createDocumentFragment();E.append(t=Gn())}return w.e=nn(()=>u(t,x,_,v)),e!==null&&(e.next=w),w}finally{}}function es(t,e,i){for(var a=t.next?t.next.e.nodes_start:i,s=e?e.e.nodes_start:i,u=t.e.nodes_start;u!==null&&u!==a;){var d=qi(u);s.before(u),u=d}}function Ln(t,e,i){e===null?(t.first=i,t.effect.first=i&&i.e):(e.e===t.effect.last&&i!==null&&(t.effect.last=i.e),e.e.next&&(e.e.next.prev=null),e.next=i,e.e.next=i&&i.e),i===null?t.effect.last=e&&e.e:(i.e===t.effect.last&&e===null&&(t.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=e,i.e.prev=e&&e.e)}function Pu(t,e,i,a){const s=Wi()?co:Hs;if(i.length===0&&t.length===0){a(e.map(s));return}var u=dt,d=lt,v=Ud();function p(){Promise.all(i.map(m=>Vd(m))).then(m=>{v();try{a([...e.map(s),...m])}catch(x){(d.f&Vn)===0&&ui(x,d)}u?.deactivate(),Ha()}).catch(m=>{ui(m,d)})}t.length>0?Promise.all(t).then(()=>{v();try{return p()}finally{u?.deactivate(),Ha()}}):p()}function Ud(){var t=lt,e=ot,i=kt,a=dt;if(be)var s=li;return function(d=!0){kn(t),an(e),si(i),d&&a?.activate(),be&&ja(s)}}function Ha(){kn(null),an(null),si(null),be&&ja(null)}const zd=new Set;function co(t){var e=jt|on,i=ot!==null&&(ot.f&jt)!==0?ot:null;return lt!==null&&(lt.f|=hi),{ctx:kt,deps:null,effects:null,equals:xu,f:e,fn:t,reactions:null,rv:0,v:Bt,wv:0,parent:i??lt,ac:null}}function Vd(t,e){let i=lt;i===null&&ed();var a=i.b,s=void 0,u=Nr(Bt),d=!ot,v=new Map;return oh(()=>{var p=vu();s=p.promise;try{Promise.resolve(t()).then(p.resolve,p.reject).then(()=>{m===dt&&m.committed&&m.deactivate(),Ha()})}catch(w){p.reject(w),Ha()}var m=dt;if(d){var x=!a.is_pending();a.update_pending_count(1),m.increment(x),v.get(m)?.reject($r),v.delete(m),v.set(m,p)}const _=(w,E=void 0)=>{if(m.activate(),E)E!==$r&&(u.f|=dr,fi(u,E));else{(u.f&dr)!==0&&(u.f^=dr),fi(u,w);for(const[L,D]of v){if(v.delete(L),L===m)break;D.reject($r)}}d&&(a.update_pending_count(-1),m.decrement(x))};p.promise.then(_,w=>_(null,w||"unknown"))}),ho(()=>{for(const p of v.values())p.reject($r)}),be&&(u.f|=lo),new Promise(p=>{function m(x){function _(){x===s?p(u):m(s)}x.then(_,_)}m(s)})}function It(t){const e=co(t);return Gu(e),e}function Hs(t){const e=co(t);return e.equals=ku,e}function _s(t){var e=t.effects;if(e!==null){t.effects=null;for(var i=0;i<e.length;i+=1)Ft(e[i])}}let ts=[];function Yd(t){for(var e=t.parent;e!==null;){if((e.f&jt)===0)return(e.f&Vn)===0?e:null;e=e.parent}return null}function Us(t){var e,i=lt;if(kn(Yd(t)),be){let a=ci;Bl(new Set);try{ts.includes(t)&&td(),ts.push(t),t.f&=~gr,_s(t),e=ws(t)}finally{kn(i),Bl(a),ts.pop()}}else try{t.f&=~gr,_s(t),e=ws(t)}finally{kn(i)}return e}function Ou(t){var e=Us(t);if(t.equals(e)||(dt?.is_fork||(t.v=e),t.wv=Qu()),!jr)if(gn!==null)(Ui()||dt?.is_fork)&&gn.set(t,e);else{var i=(t.f&Tn)===0?Jn:Wt;qt(t,i)}}let ci=new Set;const hr=new Map;function Bl(t){ci=t}let zs=!1;function Wd(){zs=!0}function Nr(t,e){var i={f:0,v:t,reactions:null,equals:xu,rv:0,wv:0};return i}function he(t,e){const i=Nr(t);return Gu(i),i}function Mu(t,e=!1,i=!0){const a=Nr(t);return e||(a.equals=ku),vi&&i&&kt!==null&&kt.l!==null&&(kt.l.s??=[]).push(a),a}function I(t,e,i=!1){ot!==null&&(!Rn||(ot.f&Fa)!==0)&&Wi()&&(ot.f&(jt|Qn|lo|Fa))!==0&&!Wn?.includes(t)&&fd();let a=i?Dt(e):e;return be&&Tu(a,t.label),fi(t,a)}function fi(t,e){if(!t.equals(e)){var i=t.v;jr?hr.set(t,e):hr.set(t,i),t.v=e;var a=Mn.ensure();if(a.capture(t,i),be){if(lt!==null){t.updated??=new Map;const s=(t.updated.get("")?.count??0)+1;if(t.updated.set("",{error:null,count:s}),s>5){const u=Dd("updated at");if(u!==null){let d=t.updated.get(u.stack);d||(d={error:u,count:0},t.updated.set(u.stack,d)),d.count++}}}lt!==null&&(t.set_during_effect=!0)}(t.f&jt)!==0&&((t.f&on)!==0&&Us(t),qt(t,(t.f&Tn)!==0?Wt:Jn)),t.wv=Qu(),Ku(t,on),Wi()&&lt!==null&&(lt.f&Wt)!==0&&(lt.f&(Zn|Br))===0&&(vn===null?uh([t]):vn.push(t)),!a.is_fork&&ci.size>0&&!zs&&Ru()}return e}function Ru(){zs=!1;var t=vr;za(!0);const e=Array.from(ci);try{for(const i of e)(i.f&Wt)!==0&&qt(i,Jn),Gi(i)&&Vi(i)}finally{za(t)}ci.clear()}function Ri(t){I(t,t.v+1)}function Ku(t,e){var i=t.reactions;if(i!==null)for(var a=Wi(),s=i.length,u=0;u<s;u++){var d=i[u],v=d.f;if(!(!a&&d===lt)){if(be&&(v&Fa)!==0){ci.add(d);continue}var p=(v&on)===0;if(p&&qt(d,e),(v&jt)!==0){var m=d;gn?.delete(m),(v&gr)===0&&(v&Tn&&(d.f|=gr),Ku(m,Jn))}else p&&((v&Qn)!==0&&zn!==null&&zn.add(d),Kr(d))}}}const qd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Dt(t){if(typeof t!="object"||t===null||Yn in t)return t;const e=Rs(t);if(e!==Gf&&e!==Xf)return t;var i=new Map,a=Os(t),s=he(0),u=Rr,d=x=>{if(Rr===u)return x();var _=ot,w=Rr;an(null),Ul(u);var E=x();return an(_),Ul(w),E};a&&(i.set("length",he(t.length)),be&&(t=Qd(t)));var v="";let p=!1;function m(x){if(!p){p=!0,v=x,Cn(s,`${v} version`);for(const[_,w]of i)Cn(w,Ir(v,_));p=!1}}return new Proxy(t,{defineProperty(x,_,w){(!("value"in w)||w.configurable===!1||w.enumerable===!1||w.writable===!1)&&ud();var E=i.get(_);return E===void 0?E=d(()=>{var L=he(w.value);return i.set(_,L),be&&typeof _=="string"&&Cn(L,Ir(v,_)),L}):I(E,w.value,!0),!0},deleteProperty(x,_){var w=i.get(_);if(w===void 0){if(_ in x){const E=d(()=>he(Bt));i.set(_,E),Ri(s),be&&Cn(E,Ir(v,_))}}else I(w,Bt),Ri(s);return!0},get(x,_,w){if(_===Yn)return t;if(be&&_===gu)return m;var E=i.get(_),L=_ in x;if(E===void 0&&(!L||Mr(x,_)?.writable)&&(E=d(()=>{var A=Dt(L?x[_]:Bt),T=he(A);return be&&Cn(T,Ir(v,_)),T}),i.set(_,E)),E!==void 0){var D=f(E);return D===Bt?void 0:D}return Reflect.get(x,_,w)},getOwnPropertyDescriptor(x,_){var w=Reflect.getOwnPropertyDescriptor(x,_);if(w&&"value"in w){var E=i.get(_);E&&(w.value=f(E))}else if(w===void 0){var L=i.get(_),D=L?.v;if(L!==void 0&&D!==Bt)return{enumerable:!0,configurable:!0,value:D,writable:!0}}return w},has(x,_){if(_===Yn)return!0;var w=i.get(_),E=w!==void 0&&w.v!==Bt||Reflect.has(x,_);if(w!==void 0||lt!==null&&(!E||Mr(x,_)?.writable)){w===void 0&&(w=d(()=>{var D=E?Dt(x[_]):Bt,A=he(D);return be&&Cn(A,Ir(v,_)),A}),i.set(_,w));var L=f(w);if(L===Bt)return!1}return E},set(x,_,w,E){var L=i.get(_),D=_ in x;if(a&&_==="length")for(var A=w;A<L.v;A+=1){var T=i.get(A+"");T!==void 0?I(T,Bt):A in x&&(T=d(()=>he(Bt)),i.set(A+"",T),be&&Cn(T,Ir(v,A)))}if(L===void 0)(!D||Mr(x,_)?.writable)&&(L=d(()=>he(void 0)),be&&Cn(L,Ir(v,_)),I(L,Dt(w)),i.set(_,L));else{D=L.v!==Bt;var K=d(()=>Dt(w));I(L,K)}var B=Reflect.getOwnPropertyDescriptor(x,_);if(B?.set&&B.set.call(E,w),!D){if(a&&typeof _=="string"){var R=i.get("length"),U=Number(_);Number.isInteger(U)&&U>=R.v&&I(R,U+1)}Ri(s)}return!0},ownKeys(x){f(s);var _=Reflect.ownKeys(x).filter(L=>{var D=i.get(L);return D===void 0||D.v!==Bt});for(var[w,E]of i)E.v!==Bt&&!(w in x)&&_.push(w);return _},setPrototypeOf(){cd()}})}function Ir(t,e){return typeof e=="symbol"?`${t}[Symbol(${e.description??""})]`:qd.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function Ki(t){try{if(t!==null&&typeof t=="object"&&Yn in t)return t[Yn]}catch{}return t}function Gd(t,e){return Object.is(Ki(t),Ki(e))}const Xd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Qd(t){return new Proxy(t,{get(e,i,a){var s=Reflect.get(e,i,a);return Xd.has(i)?function(...u){Wd();var d=s.apply(this,u);return Ru(),d}:s}})}function Zd(){const t=Array.prototype,e=Array.__svelte_cleanup;e&&e();const{indexOf:i,lastIndexOf:a,includes:s}=t;t.indexOf=function(u,d){const v=i.call(this,u,d);if(v===-1){for(let p=d??0;p<this.length;p+=1)if(Ki(this[p])===u){$o("array.indexOf(...)");break}}return v},t.lastIndexOf=function(u,d){const v=a.call(this,u,d??this.length-1);if(v===-1){for(let p=0;p<=(d??this.length-1);p+=1)if(Ki(this[p])===u){$o("array.lastIndexOf(...)");break}}return v},t.includes=function(u,d){const v=s.call(this,u,d);if(!v){for(let p=0;p<this.length;p+=1)if(Ki(this[p])===u){$o("array.includes(...)");break}}return v},Array.__svelte_cleanup=()=>{t.indexOf=i,t.lastIndexOf=a,t.includes=s}}var Fl,Vs,Nu,Bu;function Jd(){if(Fl===void 0){Fl=window,Vs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,i=Text.prototype;Nu=Mr(e,"firstChild").get,Bu=Mr(e,"nextSibling").get,Ml(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ml(i)&&(i.__t=void 0),be&&(t.__svelte_meta=null,Zd())}}function Gn(t=""){return document.createTextNode(t)}function Ua(t){return Nu.call(t)}function qi(t){return Bu.call(t)}function ve(t,e){return Ua(t)}function Yt(t,e=!1){{var i=Ua(t);return i instanceof Comment&&i.data===""?qi(i):i}}function Re(t,e=1,i=!1){let a=t;for(;e--;)a=qi(a);return a}function $d(t){t.textContent=""}function Fu(){return!1}function eh(t,e){if(e){const i=document.body;t.autofocus=!0,Fr(()=>{document.activeElement===i&&t.focus()})}}let jl=!1;function th(){jl||(jl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function fo(t){var e=ot,i=lt;an(null),kn(null);try{return t()}finally{an(e),kn(i)}}function nh(t,e,i,a=i){t.addEventListener(e,()=>fo(i));const s=t.__on_r;s?t.__on_r=()=>{s(),a(!0)}:t.__on_r=()=>a(!0),th()}function rh(t){lt===null&&(ot===null&&id(t),rd()),jr&&nd(t)}function ih(t,e){var i=e.last;i===null?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}function jn(t,e,i){var a=lt;if(be)for(;a!==null&&(a.f&Fa)!==0;)a=a.parent;a!==null&&(a.f&fn)!==0&&(t|=fn);var s={ctx:kt,deps:null,nodes_start:null,nodes_end:null,f:t|on|Tn,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(be&&(s.component_function=Yi),i)try{Vi(s),s.f|=Bs}catch(v){throw Ft(s),v}else e!==null&&Kr(s);var u=s;if(i&&u.deps===null&&u.teardown===null&&u.nodes_start===null&&u.first===u.last&&(u.f&hi)===0&&(u=u.first,(t&Qn)!==0&&(t&oi)!==0&&u!==null&&(u.f|=oi)),u!==null&&(u.parent=a,a!==null&&ih(u,a),ot!==null&&(ot.f&jt)!==0&&(t&Br)===0)){var d=ot;(d.effects??=[]).push(u)}return s}function Ui(){return ot!==null&&!Rn}function ho(t){const e=jn(Ns,null,!1);return qt(e,Wt),e.teardown=t,e}function at(t){rh("$effect"),be&&mr(t,"name",{value:"$effect"});var e=lt.f,i=!ot&&(e&Zn)!==0&&(e&Bs)===0;if(i){var a=kt;(a.e??=[]).push(t)}else return ju(t)}function ju(t){return jn(Ks|Zf,t,!1)}function ah(t){Mn.ensure();const e=jn(Br|hi,t,!0);return(i={})=>new Promise(a=>{i.outro?ti(e,()=>{Ft(e),a(void 0)}):(Ft(e),a(void 0))})}function vo(t){return jn(Ks,t,!1)}function oh(t){return jn(lo|hi,t,!0)}function po(t,e=0){return jn(Ns|e,t,!0)}function gt(t,e=[],i=[],a=[]){Pu(a,e,i,s=>{jn(Ns,()=>t(...s.map(f)),!0)})}function Ys(t,e=0){var i=jn(Qn|e,t,!0);return be&&(i.dev_stack=li),i}function Hu(t,e=0){var i=jn(pu|e,t,!0);return be&&(i.dev_stack=li),i}function nn(t){return jn(Zn|hi,t,!0)}function Uu(t){var e=t.teardown;if(e!==null){const i=jr,a=ot;Hl(!0),an(null);try{e.call(null)}finally{Hl(i),an(a)}}}function zu(t,e=!1){var i=t.first;for(t.first=t.last=null;i!==null;){const s=i.ac;s!==null&&fo(()=>{s.abort($r)});var a=i.next;(i.f&Br)!==0?i.parent=null:Ft(i,e),i=a}}function sh(t){for(var e=t.first;e!==null;){var i=e.next;(e.f&Zn)===0&&Ft(e),e=i}}function Ft(t,e=!0){var i=!1;(e||(t.f&mu)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(lh(t.nodes_start,t.nodes_end),i=!0),zu(t,e&&!i),Va(t,0),qt(t,Vn);var a=t.transitions;if(a!==null)for(const u of a)u.stop();Uu(t);var s=t.parent;s!==null&&s.first!==null&&Vu(t),be&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function lh(t,e){for(;t!==null;){var i=t===e?null:qi(t);t.remove(),t=i}}function Vu(t){var e=t.parent,i=t.prev,a=t.next;i!==null&&(i.next=a),a!==null&&(a.prev=i),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=i))}function ti(t,e,i=!0){var a=[];Ws(t,a,!0),Yu(a,()=>{i&&Ft(t),e&&e()})}function Yu(t,e){var i=t.length;if(i>0){var a=()=>--i||e();for(var s of t)s.out(a)}else e()}function Ws(t,e,i){if((t.f&fn)===0){if(t.f^=fn,t.transitions!==null)for(const d of t.transitions)(d.is_global||i)&&e.push(d);for(var a=t.first;a!==null;){var s=a.next,u=(a.f&oi)!==0||(a.f&Zn)!==0&&(t.f&Qn)!==0;Ws(a,e,u?i:!1),a=s}}}function qs(t){Wu(t,!0)}function Wu(t,e){if((t.f&fn)!==0){t.f^=fn,(t.f&Wt)===0&&(qt(t,on),Kr(t));for(var i=t.first;i!==null;){var a=i.next,s=(i.f&oi)!==0||(i.f&Zn)!==0;Wu(i,s?e:!1),i=a}if(t.transitions!==null)for(const u of t.transitions)(u.is_global||e)&&u.in()}}function qu(t,e){for(var i=t.nodes_start,a=t.nodes_end;i!==null;){var s=i===a?null:qi(i);e.append(i),i=s}}let vr=!1;function za(t){vr=t}let jr=!1;function Hl(t){jr=t}let ot=null,Rn=!1;function an(t){ot=t}let lt=null;function kn(t){lt=t}let Wn=null;function Gu(t){ot!==null&&(Wn===null?Wn=[t]:Wn.push(t))}let Zt=null,un=0,vn=null;function uh(t){vn=t}let Xu=1,zi=0,Rr=zi;function Ul(t){Rr=t}function Qu(){return++Xu}function Gi(t){var e=t.f;if((e&on)!==0)return!0;if(e&jt&&(t.f&=~gr),(e&Jn)!==0){var i=t.deps;if(i!==null)for(var a=i.length,s=0;s<a;s++){var u=i[s];if(Gi(u)&&Ou(u),u.wv>t.wv)return!0}(e&Tn)!==0&&gn===null&&qt(t,Wt)}return!1}function Zu(t,e,i=!0){var a=t.reactions;if(a!==null&&!Wn?.includes(t))for(var s=0;s<a.length;s++){var u=a[s];(u.f&jt)!==0?Zu(u,e,!1):e===u&&(i?qt(u,on):(u.f&Wt)!==0&&qt(u,Jn),Kr(u))}}function ws(t){var e=Zt,i=un,a=vn,s=ot,u=Wn,d=kt,v=Rn,p=Rr,m=t.f;Zt=null,un=0,vn=null,ot=(m&(Zn|Br))===0?t:null,Wn=null,si(t.ctx),Rn=!1,Rr=++zi,t.ac!==null&&(fo(()=>{t.ac.abort($r)}),t.ac=null);try{t.f|=gs;var x=t.fn,_=x(),w=t.deps;if(Zt!==null){var E;if(Va(t,un),w!==null&&un>0)for(w.length=un+Zt.length,E=0;E<Zt.length;E++)w[un+E]=Zt[E];else t.deps=w=Zt;if(vr&&Ui()&&(t.f&Tn)!==0)for(E=un;E<w.length;E++)(w[E].reactions??=[]).push(t)}else w!==null&&un<w.length&&(Va(t,un),w.length=un);if(Wi()&&vn!==null&&!Rn&&w!==null&&(t.f&(jt|Jn|on))===0)for(E=0;E<vn.length;E++)Zu(vn[E],t);return s!==null&&s!==t&&(zi++,vn!==null&&(a===null?a=vn:a.push(...vn))),(t.f&dr)!==0&&(t.f^=dr),_}catch(L){return Au(L)}finally{t.f^=gs,Zt=e,un=i,vn=a,ot=s,Wn=u,si(d),Rn=v,Rr=p}}function ch(t,e){let i=e.reactions;if(i!==null){var a=qf.call(i,t);if(a!==-1){var s=i.length-1;s===0?i=e.reactions=null:(i[a]=i[s],i.pop())}}i===null&&(e.f&jt)!==0&&(Zt===null||!Zt.includes(e))&&(qt(e,Jn),(e.f&Tn)!==0&&(e.f^=Tn,e.f&=~gr),_s(e),Va(e,0))}function Va(t,e){var i=t.deps;if(i!==null)for(var a=e;a<i.length;a++)ch(t,i[a])}function Vi(t){var e=t.f;if((e&Vn)===0){qt(t,Wt);var i=lt,a=vr;if(lt=t,vr=!0,be){var s=Yi;Kl(t.component_function);var u=li;ja(t.dev_stack??li)}try{(e&(Qn|pu))!==0?sh(t):zu(t),Uu(t);var d=ws(t);t.teardown=typeof d=="function"?d:null,t.wv=Xu;var v;be&&Ad&&(t.f&on)!==0&&t.deps}finally{vr=a,lt=i,be&&(Kl(s),ja(u))}}}async function ht(){await Promise.resolve(),Od()}function f(t){var e=t.f,i=(e&jt)!==0;if(ot!==null&&!Rn){var a=lt!==null&&(lt.f&Vn)!==0;if(!a&&!Wn?.includes(t)){var s=ot.deps;if((ot.f&gs)!==0)t.rv<zi&&(t.rv=zi,Zt===null&&s!==null&&s[un]===t?un++:Zt===null?Zt=[t]:Zt.includes(t)||Zt.push(t));else{(ot.deps??=[]).push(t);var u=t.reactions;u===null?t.reactions=[ot]:u.includes(ot)||u.push(ot)}}}if(be&&zd.delete(t),jr){if(hr.has(t))return hr.get(t);if(i){var d=t,v=d.v;return((d.f&Wt)===0&&d.reactions!==null||$u(d))&&(v=Us(d)),hr.set(d,v),v}}else i&&(!gn?.has(t)||dt?.is_fork&&!Ui())&&(d=t,Gi(d)&&Ou(d),vr&&Ui()&&(d.f&Tn)===0&&Ju(d));if(gn?.has(t))return gn.get(t);if((t.f&dr)!==0)throw t.v;return t.v}function Ju(t){if(t.deps!==null){t.f^=Tn;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&jt)!==0&&(e.f&Tn)===0&&Ju(e)}}function $u(t){if(t.v===Bt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(hr.has(e)||(e.f&jt)!==0&&$u(e))return!0;return!1}function br(t){var e=Rn;try{return Rn=!0,t()}finally{Rn=e}}const fh=-7169;function qt(t,e){t.f=t.f&fh|e}function dh(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Yn in t)xs(t);else if(!Array.isArray(t))for(let e in t){const i=t[e];typeof i=="object"&&i&&Yn in i&&xs(i)}}}function xs(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let a in t)try{xs(t[a],e)}catch{}const i=Rs(t);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const a=hu(i);for(let s in a){const u=a[s].get;if(u)try{u.call(t)}catch{}}}}}function hh(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const vh=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ph(t){return vh.includes(t)}const mh={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function gh(t){return t=t.toLowerCase(),mh[t]??t}const yh=["touchstart","touchmove"];function bh(t){return yh.includes(t)}const ec=new Set,Es=new Set;function tc(t,e,i,a={}){function s(u){if(a.capture||Ci.call(e,u),!u.cancelBubble)return fo(()=>i?.call(this,u))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Fr(()=>{e.addEventListener(t,s,a)}):e.addEventListener(t,s,a),s}function ni(t,e,i,a,s){var u={capture:a,passive:s},d=tc(t,e,i,u);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ho(()=>{e.removeEventListener(t,d,u)})}function Hr(t){for(var e=0;e<t.length;e++)ec.add(t[e]);for(var i of Es)i(t)}let zl=null;function Ci(t){var e=this,i=e.ownerDocument,a=t.type,s=t.composedPath?.()||[],u=s[0]||t.target;zl=t;var d=0,v=zl===t&&t.__root;if(v){var p=s.indexOf(v);if(p!==-1&&(e===document||e===window)){t.__root=e;return}var m=s.indexOf(e);if(m===-1)return;p<=m&&(d=p)}if(u=s[d]||t.target,u!==e){mr(t,"currentTarget",{configurable:!0,get(){return u||i}});var x=ot,_=lt;an(null),kn(null);try{for(var w,E=[];u!==null;){var L=u.assignedSlot||u.parentNode||u.host||null;try{var D=u["__"+a];D!=null&&(!u.disabled||t.target===u)&&D.call(u,t)}catch(A){w?E.push(A):w=A}if(t.cancelBubble||L===e||L===null)break;u=L}if(w){for(let A of E)queueMicrotask(()=>{throw A});throw w}}finally{t.__root=e,delete t.currentTarget,an(x),kn(_)}}}function _h(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Ya(t,e){var i=lt;i.nodes_start===null&&(i.nodes_start=t,i.nodes_end=e)}function Oe(t,e){var i=(e&_d)!==0,a=(e&wd)!==0,s,u=!t.startsWith("<!>");return()=>{s===void 0&&(s=_h(u?t:"<!>"+t),i||(s=Ua(s)));var d=a||Vs?document.importNode(s,!0):s.cloneNode(!0);if(i){var v=Ua(d),p=d.lastChild;Ya(v,p)}else Ya(d,d);return d}}function Pn(t=""){{var e=Gn(t+"");return Ya(e,e),e}}function pr(){var t=document.createDocumentFragment(),e=document.createComment(""),i=Gn();return t.append(e,i),Ya(e,i),t}function ye(t,e){t!==null&&t.before(e)}function Jt(t,e){var i=e==null?"":typeof e=="object"?e+"":e;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=i+"")}function Vl(t,e){return wh(t,e)}const Xr=new Map;function wh(t,{target:e,anchor:i,props:a={},events:s,context:u,intro:d=!0}){Jd();var v=new Set,p=_=>{for(var w=0;w<_.length;w++){var E=_[w];if(!v.has(E)){v.add(E);var L=bh(E);e.addEventListener(E,Ci,{passive:L});var D=Xr.get(E);D===void 0?(document.addEventListener(E,Ci,{passive:L}),Xr.set(E,1)):Xr.set(E,D+1)}}};p(Ms(ec)),Es.add(p);var m=void 0,x=ah(()=>{var _=i??e.appendChild(Gn());return Nd(_,{pending:()=>{}},w=>{if(u){Bn({});var E=kt;E.c=u}s&&(a.$$events=s),m=t(w,a)||{},u&&Fn()}),()=>{for(var w of v){e.removeEventListener(w,Ci);var E=Xr.get(w);--E===0?(document.removeEventListener(w,Ci),Xr.delete(w)):Xr.set(w,E)}Es.delete(p),_!==i&&_.parentNode?.removeChild(_)}});return xh.set(m,x),m}let xh=new WeakMap;class Eh{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(e,i=!0){this.anchor=e,this.#l=i}#a=()=>{var e=dt;if(this.#e.has(e)){var i=this.#e.get(e),a=this.#t.get(i);if(a)qs(a),this.#n.delete(i);else{var s=this.#r.get(i);s&&(this.#t.set(i,s.effect),this.#r.delete(i),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[u,d]of this.#e){if(this.#e.delete(u),u===e)break;const v=this.#r.get(d);v&&(Ft(v.effect),this.#r.delete(d))}for(const[u,d]of this.#t){if(u===i||this.#n.has(u))continue;const v=()=>{if(Array.from(this.#e.values()).includes(u)){var m=document.createDocumentFragment();qu(d,m),m.append(Gn()),this.#r.set(u,{effect:d,fragment:m})}else Ft(d);this.#n.delete(u),this.#t.delete(u)};this.#l||!a?(this.#n.add(u),ti(d,v,!1)):v()}}};#i=e=>{this.#e.delete(e);const i=Array.from(this.#e.values());for(const[a,s]of this.#r)i.includes(a)||(Ft(s.effect),this.#r.delete(a))};ensure(e,i){var a=dt,s=Fu();if(i&&!this.#t.has(e)&&!this.#r.has(e))if(s){var u=document.createDocumentFragment(),d=Gn();u.append(d),this.#r.set(e,{effect:nn(()=>i(d)),fragment:u})}else this.#t.set(e,nn(()=>i(this.anchor)));if(this.#e.set(a,e),s){for(const[v,p]of this.#t)v===e?a.skipped_effects.delete(p):a.skipped_effects.add(p);for(const[v,p]of this.#r)v===e?a.skipped_effects.delete(p.effect):a.skipped_effects.add(p.effect);a.oncommit(this.#a),a.ondiscard(this.#i)}else this.#a()}}function wt(t,e,i=!1){var a=new Eh(t),s=i?oi:0;function u(d,v){a.ensure(d,v)}Ys(()=>{var d=!1;e((v,p=!0)=>{d=!0,u(p,v)}),d||u(!1,null)},s)}function kh(t,e,i,a,s){var u=e.$$slots?.[i],d=!1;u===!0&&(u=e.children,d=!0),u===void 0||u(t,d?()=>a:a)}function Yl(t,e,i){vo(()=>{var a=br(()=>e(t,i?.())||{});if(i&&a?.update){var s=!1,u={};po(()=>{var d=i();dh(d),s&&Eu(u,d)&&(u=d,a.update(d))}),s=!0}if(a?.destroy)return()=>a.destroy()})}function Th(t,e){var i=void 0,a;Hu(()=>{i!==(i=e())&&(a&&(Ft(a),a=null),i&&(a=nn(()=>{vo(()=>i(t))})))})}function nc(t){var e,i,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=nc(t[e]))&&(a&&(a+=" "),a+=i)}else for(i in t)t[i]&&(a&&(a+=" "),a+=i);return a}function Sh(){for(var t,e,i=0,a="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=nc(t))&&(a&&(a+=" "),a+=e);return a}function rc(t){return typeof t=="object"?Sh(t):t??""}const Wl=[...` 	
\r\fÂ \v\uFEFF`];function Ah(t,e,i){var a=t==null?"":""+t;if(e&&(a=a?a+" "+e:e),i){for(var s in i)if(i[s])a=a?a+" "+s:s;else if(a.length)for(var u=s.length,d=0;(d=a.indexOf(s,d))>=0;){var v=d+u;(d===0||Wl.includes(a[d-1]))&&(v===a.length||Wl.includes(a[v]))?a=(d===0?"":a.substring(0,d))+a.substring(v+1):d=v}}return a===""?null:a}function ql(t,e=!1){var i=e?" !important;":";",a="";for(var s in t){var u=t[s];u!=null&&u!==""&&(a+=" "+s+": "+u+i)}return a}function ns(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Ih(t,e){if(e){var i="",a,s;if(Array.isArray(e)?(a=e[0],s=e[1]):a=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var u=!1,d=0,v=!1,p=[];a&&p.push(...Object.keys(a).map(ns)),s&&p.push(...Object.keys(s).map(ns));var m=0,x=-1;const D=t.length;for(var _=0;_<D;_++){var w=t[_];if(v?w==="/"&&t[_-1]==="*"&&(v=!1):u?u===w&&(u=!1):w==="/"&&t[_+1]==="*"?v=!0:w==='"'||w==="'"?u=w:w==="("?d++:w===")"&&d--,!v&&u===!1&&d===0){if(w===":"&&x===-1)x=_;else if(w===";"||_===D-1){if(x!==-1){var E=ns(t.substring(m,x).trim());if(!p.includes(E)){w!==";"&&_++;var L=t.substring(m,_).trim();i+=" "+L+";"}}m=_+1,x=-1}}}}return a&&(i+=ql(a)),s&&(i+=ql(s,!0)),i=i.trim(),i===""?null:i}return t==null?null:String(t)}function Wa(t,e,i,a,s,u){var d=t.__className;if(d!==i||d===void 0){var v=Ah(i,a,u);v==null?t.removeAttribute("class"):e?t.className=v:t.setAttribute("class",v),t.__className=i}else if(u&&s!==u)for(var p in u){var m=!!u[p];(s==null||m!==!!s[p])&&t.classList.toggle(p,m)}return u}function rs(t,e={},i,a){for(var s in i){var u=i[s];e[s]!==u&&(i[s]==null?t.style.removeProperty(s):t.style.setProperty(s,u,a))}}function yr(t,e,i,a){var s=t.__style;if(s!==e){var u=Ih(e,a);u==null?t.removeAttribute("style"):t.style.cssText=u,t.__style=e}else a&&(Array.isArray(a)?(rs(t,i?.[0],a[0]),rs(t,i?.[1],a[1],"important")):rs(t,i,a));return a}function ks(t,e,i=!1){if(t.multiple){if(e==null)return;if(!Os(e))return Td();for(var a of t.options)a.selected=e.includes(Gl(a));return}for(a of t.options){var s=Gl(a);if(Gd(s,e)){a.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function Dh(t){var e=new MutationObserver(()=>{ks(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ho(()=>{e.disconnect()})}function Gl(t){return"__value"in t?t.__value:t.value}const Ii=Symbol("class"),Di=Symbol("style"),ic=Symbol("is custom element"),ac=Symbol("is html");function Ch(t,e){var i=mo(t);i.value===(i.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Lh(t,e){var i=mo(t);i.checked!==(i.checked=e??void 0)&&(t.checked=e)}function Ph(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function ft(t,e,i,a){var s=mo(t);s[e]!==(s[e]=i)&&(e==="loading"&&(t[$f]=i),i==null?t.removeAttribute(e):typeof i!="string"&&oc(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function Oh(t,e,i,a,s=!1,u=!1){var d=mo(t),v=d[ic],p=!d[ac],m=e||{},x=t.tagName==="OPTION";for(var _ in e)_ in i||(i[_]=null);i.class?i.class=rc(i.class):i[Ii]&&(i.class=null),i[Di]&&(i.style??=null);var w=oc(t);for(const R in i){let U=i[R];if(x&&R==="value"&&U==null){t.value=t.__value="",m[R]=U;continue}if(R==="class"){var E=t.namespaceURI==="http://www.w3.org/1999/xhtml";Wa(t,E,U,a,e?.[Ii],i[Ii]),m[R]=U,m[Ii]=i[Ii];continue}if(R==="style"){yr(t,U,e?.[Di],i[Di]),m[R]=U,m[Di]=i[Di];continue}var L=m[R];if(!(U===L&&!(U===void 0&&t.hasAttribute(R)))){m[R]=U;var D=R[0]+R[1];if(D!=="$$")if(D==="on"){const ee={},Y="$$"+R;let H=R.slice(2);var A=ph(H);if(hh(H)&&(H=H.slice(0,-7),ee.capture=!0),!A&&L){if(U!=null)continue;t.removeEventListener(H,m[Y],ee),m[Y]=null}if(U!=null)if(A)t[`__${H}`]=U,Hr([H]);else{let Z=function(re){m[R].call(this,re)};var B=Z;m[Y]=tc(H,t,Z,ee)}else A&&(t[`__${H}`]=void 0)}else if(R==="style")ft(t,R,U);else if(R==="autofocus")eh(t,!!U);else if(!v&&(R==="__value"||R==="value"&&U!=null))t.value=t.__value=U;else if(R==="selected"&&x)Ph(t,U);else{var T=R;p||(T=gh(T));var K=T==="defaultValue"||T==="defaultChecked";if(U==null&&!v&&!K)if(d[R]=null,T==="value"||T==="checked"){let ee=t;const Y=e===void 0;if(T==="value"){let H=ee.defaultValue;ee.removeAttribute(T),ee.defaultValue=H,ee.value=ee.__value=Y?H:null}else{let H=ee.defaultChecked;ee.removeAttribute(T),ee.defaultChecked=H,ee.checked=Y?H:!1}}else t.removeAttribute(R);else K||w.includes(T)&&(v||typeof U!="string")?(t[T]=U,T in d&&(d[T]=Bt)):typeof U!="function"&&ft(t,T,U)}}}return m}function Mh(t,e,i=[],a=[],s=[],u,d=!1,v=!1){Pu(s,i,a,p=>{var m=void 0,x={},_=t.nodeName==="SELECT",w=!1;if(Hu(()=>{var L=e(...p.map(f)),D=Oh(t,m,L,u,d,v);w&&_&&"value"in L&&ks(t,L.value);for(let T of Object.getOwnPropertySymbols(x))L[T]||Ft(x[T]);for(let T of Object.getOwnPropertySymbols(L)){var A=L[T];T.description===kd&&(!m||A!==m[T])&&(x[T]&&Ft(x[T]),x[T]=nn(()=>Th(t,()=>A))),D[T]=A}m=D}),_){var E=t;vo(()=>{ks(E,m.value,!0),Dh(E)})}w=!0})}function mo(t){return t.__attributes??={[ic]:t.nodeName.includes("-"),[ac]:t.namespaceURI===Ed}}var Xl=new Map;function oc(t){var e=t.getAttribute("is")||t.nodeName,i=Xl.get(e);if(i)return i;Xl.set(e,i=[]);for(var a,s=t,u=Element.prototype;u!==s;){a=hu(s);for(var d in a)a[d].set&&i.push(d);s=Rs(s)}return i}function qa(t,e,i=e){var a=new WeakSet;nh(t,"input",async s=>{be&&t.type==="checkbox"&&Rl();var u=s?t.defaultValue:t.value;if(u=is(t)?as(u):u,i(u),dt!==null&&a.add(dt),await ht(),u!==(u=e())){var d=t.selectionStart,v=t.selectionEnd,p=t.value.length;if(t.value=u??"",v!==null){var m=t.value.length;d===v&&v===p&&m>p?(t.selectionStart=m,t.selectionEnd=m):(t.selectionStart=d,t.selectionEnd=Math.min(v,m))}}}),br(e)==null&&t.value&&(i(is(t)?as(t.value):t.value),dt!==null&&a.add(dt)),po(()=>{be&&t.type==="checkbox"&&Rl();var s=e();if(t===document.activeElement){var u=Ca??dt;if(a.has(u))return}is(t)&&s===as(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function is(t){var e=t.type;return e==="number"||e==="range"}function as(t){return t===""?null:+t}function Ql(t,e){return t===e||t?.[Yn]===e}function Pt(t={},e,i,a){return vo(()=>{var s,u;return po(()=>{s=u,u=[],br(()=>{t!==i(...u)&&(e(t,...u),s&&Ql(i(...s),t)&&e(null,...s))})}),()=>{Fr(()=>{u&&Ql(i(...u),t)&&e(null,...u)})}}),t}function sc(t,e,i){if(t==null)return e(void 0),Ba;const a=br(()=>t.subscribe(e,i));return a.unsubscribe?()=>a.unsubscribe():a}function Rh(t){let e;return sc(t,i=>e=i)(),e}let ka=!1,Ts=Symbol();function Ga(t,e,i){const a=i[e]??={store:null,source:Mu(void 0),unsubscribe:Ba};if(be&&(a.source.label=e),a.store!==t&&!(Ts in i))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=Ba;else{var s=!0;a.unsubscribe=sc(t,u=>{s?a.source.v=u:I(a.source,u)}),s=!1}return t&&Ts in i?Rh(t):f(a.source)}function Xa(t,e,i){let a=i[e];return a&&a.store!==t&&(a.unsubscribe(),a.unsubscribe=Ba),t}function Gs(){const t={};function e(){ho(()=>{for(var i in t)t[i].unsubscribe();mr(t,Ts,{enumerable:!1,value:!0})})}return[t,e]}function Kh(t){var e=ka;try{return ka=!1,[t(),ka]}finally{ka=e}}const Nh={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return be&&sd(`${t.name}.${String(e)}`),!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Bh(t,e,i){return new Proxy(be?{props:t,exclude:e,name:i,other:{},to_proxy:[]}:{props:t,exclude:e},Nh)}function Vt(t,e,i,a){var s=!vi||(i&md)!==0,u=(i&yd)!==0,d=(i&bd)!==0,v=a,p=!0,m=()=>(p&&(p=!1,v=d?br(a):a),v),x;if(u){var _=Yn in t||Jf in t;x=Mr(t,e)?.set??(_&&e in t?B=>t[e]=B:void 0)}var w,E=!1;u?[w,E]=Kh(()=>t[e]):w=t[e],w===void 0&&a!==void 0&&(w=m(),x&&(s&&od(e),x(w)));var L;if(s?L=()=>{var B=t[e];return B===void 0?m():(p=!0,B)}:L=()=>{var B=t[e];return B!==void 0&&(v=void 0),B===void 0?v:B},s&&(i&gd)===0)return L;if(x){var D=t.$$legacy;return(function(B,R){return arguments.length>0?((!s||!R||D||E)&&x(R?L():B),B):L()})}var A=!1,T=((i&pd)!==0?co:Hs)(()=>(A=!1,L()));be&&(T.label=e),u&&f(T);var K=lt;return(function(B,R){if(arguments.length>0){const U=R?f(T):s&&u?Dt(B):B;return I(T,U),A=!0,v!==void 0&&(v=U),B}return jr&&A||(K.f&Vn)!==0?T.v:f(T)})}if(be){let t=function(e){if(!(e in globalThis)){let i;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(i!==void 0)return i;ld(e)},set:a=>{i=a}})}};var _m=t;t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function Qa(t){kt===null&&yu("onMount"),vi&&kt.l!==null?Fh(kt).m.push(t):at(()=>{const e=br(t);if(typeof e=="function")return e})}function Xs(t){kt===null&&yu("onDestroy"),Qa(()=>()=>br(t))}function Fh(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const jh="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(jh);Id();var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pa={exports:{}},zh=Pa.exports,Zl;function Vh(){return Zl||(Zl=1,(function(t,e){(function(i,a){t.exports=a()})(zh,(function(){var i=function(n,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(o[c]=l[c])},i(n,r)};function a(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");i(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}var s=function(){return s=Object.assign||function(r){for(var o,l=1,c=arguments.length;l<c;l++){o=arguments[l];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(r[h]=o[h])}return r},s.apply(this,arguments)};function u(n,r,o){for(var l=0,c=r.length,h;l<c;l++)(h||!(l in r))&&(h||(h=Array.prototype.slice.call(r,0,l)),h[l]=r[l]);return n.concat(h||Array.prototype.slice.call(r))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Hh,v=Object.keys,p=Array.isArray;typeof Promise<"u"&&!d.Promise&&(d.Promise=Promise);function m(n,r){return typeof r!="object"||v(r).forEach(function(o){n[o]=r[o]}),n}var x=Object.getPrototypeOf,_={}.hasOwnProperty;function w(n,r){return _.call(n,r)}function E(n,r){typeof r=="function"&&(r=r(x(n))),(typeof Reflect>"u"?v:Reflect.ownKeys)(r).forEach(function(o){D(n,o,r[o])})}var L=Object.defineProperty;function D(n,r,o,l){L(n,r,m(o&&w(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},l))}function A(n){return{from:function(r){return n.prototype=Object.create(r.prototype),D(n.prototype,"constructor",n),{extend:E.bind(null,n.prototype)}}}}var T=Object.getOwnPropertyDescriptor;function K(n,r){var o=T(n,r),l;return o||(l=x(n))&&K(l,r)}var B=[].slice;function R(n,r,o){return B.call(n,r,o)}function U(n,r){return r(n)}function ee(n){if(!n)throw new Error("Assertion Failed")}function Y(n){d.setImmediate?setImmediate(n):setTimeout(n,0)}function H(n,r){return n.reduce(function(o,l,c){var h=r(l,c);return h&&(o[h[0]]=h[1]),o},{})}function Z(n,r){if(typeof r=="string"&&w(n,r))return n[r];if(!r)return n;if(typeof r!="string"){for(var o=[],l=0,c=r.length;l<c;++l){var h=Z(n,r[l]);o.push(h)}return o}var g=r.indexOf(".");if(g!==-1){var y=n[r.substr(0,g)];return y==null?void 0:Z(y,r.substr(g+1))}}function re(n,r,o){if(!(!n||r===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof r!="string"&&"length"in r){ee(typeof o!="string"&&"length"in o);for(var l=0,c=r.length;l<c;++l)re(n,r[l],o[l])}else{var h=r.indexOf(".");if(h!==-1){var g=r.substr(0,h),y=r.substr(h+1);if(y==="")o===void 0?p(n)&&!isNaN(parseInt(g))?n.splice(g,1):delete n[g]:n[g]=o;else{var b=n[g];(!b||!w(n,g))&&(b=n[g]={}),re(b,y,o)}}else o===void 0?p(n)&&!isNaN(parseInt(r))?n.splice(r,1):delete n[r]:n[r]=o}}function X(n,r){typeof r=="string"?re(n,r,void 0):"length"in r&&[].map.call(r,function(o){re(n,o,void 0)})}function Te(n){var r={};for(var o in n)w(n,o)&&(r[o]=n[o]);return r}var ke=[].concat;function Se(n){return ke.apply([],n)}var Be="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Se([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(r){return r+n+"Array"})}))).filter(function(n){return d[n]}),Ze=new Set(Be.map(function(n){return d[n]}));function pt(n){var r={};for(var o in n)if(w(n,o)){var l=n[o];r[o]=!l||typeof l!="object"||Ze.has(l.constructor)?l:pt(l)}return r}function ce(n){for(var r in n)if(w(n,r))return!1;return!0}var Ue=null;function Ce(n){Ue=new WeakMap;var r=Ye(n);return Ue=null,r}function Ye(n){if(!n||typeof n!="object")return n;var r=Ue.get(n);if(r)return r;if(p(n)){r=[],Ue.set(n,r);for(var o=0,l=n.length;o<l;++o)r.push(Ye(n[o]))}else if(Ze.has(n.constructor))r=n;else{var c=x(n);r=c===Object.prototype?{}:Object.create(c),Ue.set(n,r);for(var h in n)w(n,h)&&(r[h]=Ye(n[h]))}return r}var Fe={}.toString;function st(n){return Fe.call(n).slice(8,-1)}var Xe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ne=typeof Xe=="symbol"?function(n){var r;return n!=null&&(r=n[Xe])&&r.apply(n)}:function(){return null};function $(n,r){var o=n.indexOf(r);return o>=0&&n.splice(o,1),o>=0}var oe={};function xe(n){var r,o,l,c;if(arguments.length===1){if(p(n))return n.slice();if(this===oe&&typeof n=="string")return[n];if(c=Ne(n)){for(o=[];l=c.next(),!l.done;)o.push(l.value);return o}if(n==null)return[n];if(r=n.length,typeof r=="number"){for(o=new Array(r);r--;)o[r]=n[r];return o}return[n]}for(r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return o}var Pe=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ze=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],We=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],rt=ze.concat(We),Ot={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function xt(n,r){this.name=n,this.message=r}A(xt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function mt(n,r){return n+". Errors: "+Object.keys(r).map(function(o){return r[o].toString()}).filter(function(o,l,c){return c.indexOf(o)===l}).join(`
`)}function $e(n,r,o,l){this.failures=r,this.failedKeys=l,this.successCount=o,this.message=mt(n,r)}A($e).from(xt);function it(n,r){this.name="BulkError",this.failures=Object.keys(r).map(function(o){return r[o]}),this.failuresByPos=r,this.message=mt(n,this.failures)}A(it).from(xt);var yt=rt.reduce(function(n,r){return n[r]=r+"Error",n},{}),$t=xt,ge=rt.reduce(function(n,r){var o=r+"Error";function l(c,h){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(h?`
 `+h:""),this.inner=h||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Ot[r]||o,this.inner=null)}return A(l).from($t),n[r]=l,n},{});ge.Syntax=SyntaxError,ge.Type=TypeError,ge.Range=RangeError;var Mt=We.reduce(function(n,r){return n[r+"Error"]=ge[r],n},{});function Gt(n,r){if(!n||n instanceof xt||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Mt[n.name])return n;var o=new Mt[n.name](r||n.message,n);return"stack"in n&&D(o,"stack",{get:function(){return this.inner.stack}}),o}var Xt=rt.reduce(function(n,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(n[r+"Error"]=ge[r]),n},{});Xt.ModifyError=$e,Xt.DexieError=xt,Xt.BulkError=it;function Ve(){}function F(n){return n}function V(n,r){return n==null||n===F?r:function(o){return r(n(o))}}function J(n,r){return function(){n.apply(this,arguments),r.apply(this,arguments)}}function M(n,r){return n===Ve?r:function(){var o=n.apply(this,arguments);o!==void 0&&(arguments[0]=o);var l=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var h=r.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?J(l,this.onsuccess):l),c&&(this.onerror=this.onerror?J(c,this.onerror):c),h!==void 0?h:o}}function te(n,r){return n===Ve?r:function(){n.apply(this,arguments);var o=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?J(o,this.onsuccess):o),l&&(this.onerror=this.onerror?J(l,this.onerror):l)}}function ie(n,r){return n===Ve?r:function(o){var l=n.apply(this,arguments);m(o,l);var c=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var g=r.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?J(c,this.onsuccess):c),h&&(this.onerror=this.onerror?J(h,this.onerror):h),l===void 0?g===void 0?void 0:g:m(l,g)}}function se(n,r){return n===Ve?r:function(){return r.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function _e(n,r){return n===Ve?r:function(){var o=n.apply(this,arguments);if(o&&typeof o.then=="function"){for(var l=this,c=arguments.length,h=new Array(c);c--;)h[c]=arguments[c];return o.then(function(){return r.apply(l,h)})}return r.apply(this,arguments)}}var we=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function je(n,r){we=n}var ue={},vt=100,ut=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,x(n),n];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,x(r),n]})(),Kt=ut[0],dn=ut[1],bn=ut[2],pi=dn&&dn.then,ct=Kt&&Kt.constructor,Sn=!!bn;function _r(){queueMicrotask(Pc)}var Ur=function(n,r){gi.push([n,r]),Zi&&(_r(),Zi=!1)},mi=!0,Zi=!0,wr=[],Ji=[],bo=F,er={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ve,pgp:!1,env:{},finalize:Ve},Ee=er,gi=[],xr=0,$i=[];function de(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=Ee;if(typeof n!="function"){if(n!==ue)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&wo(this,this._value);return}this._state=null,this._value=null,++r.ref,tl(this,n)}var _o={get:function(){var n=Ee,r=ra;function o(l,c){var h=this,g=!n.global&&(n!==Ee||r!==ra),y=g&&!nr(),b=new de(function(k,P){xo(h,new el(il(l,n,g,y),il(c,n,g,y),k,P,n))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return o.prototype=ue,o},set:function(n){D(this,"then",n&&n.prototype===ue?_o:{get:function(){return n},set:_o.set})}};E(de.prototype,{then:_o,_then:function(n,r){xo(this,new el(null,null,n,r,Ee))},catch:function(n){if(arguments.length===1)return this.then(null,n);var r=arguments[0],o=arguments[1];return typeof r=="function"?this.then(null,function(l){return l instanceof r?o(l):ea(l)}):this.then(null,function(l){return l&&l.name===r?o(l):ea(l)})},finally:function(n){return this.then(function(r){return de.resolve(n()).then(function(){return r})},function(r){return de.resolve(n()).then(function(){return ea(r)})})},timeout:function(n,r){var o=this;return n<1/0?new de(function(l,c){var h=setTimeout(function(){return c(new ge.Timeout(r))},n);o.then(l,c).finally(clearTimeout.bind(null,h))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&D(de.prototype,Symbol.toStringTag,"Dexie.Promise"),er.env=rl();function el(n,r,o,l,c){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=o,this.reject=l,this.psd=c}E(de,{all:function(){var n=xe.apply(null,arguments).map(ia);return new de(function(r,o){n.length===0&&r([]);var l=n.length;n.forEach(function(c,h){return de.resolve(c).then(function(g){n[h]=g,--l||r(n)},o)})})},resolve:function(n){if(n instanceof de)return n;if(n&&typeof n.then=="function")return new de(function(o,l){n.then(o,l)});var r=new de(ue,!0,n);return r},reject:ea,race:function(){var n=xe.apply(null,arguments).map(ia);return new de(function(r,o){n.map(function(l){return de.resolve(l).then(r,o)})})},PSD:{get:function(){return Ee},set:function(n){return Ee=n}},totalEchoes:{get:function(){return ra}},newPSD:tr,usePSD:Er,scheduler:{get:function(){return Ur},set:function(n){Ur=n}},rejectionMapper:{get:function(){return bo},set:function(n){bo=n}},follow:function(n,r){return new de(function(o,l){return tr(function(c,h){var g=Ee;g.unhandleds=[],g.onunhandled=h,g.finalize=J(function(){var y=this;Oc(function(){y.unhandleds.length===0?c():h(y.unhandleds[0])})},g.finalize),n()},r,o,l)})}}),ct&&(ct.allSettled&&D(de,"allSettled",function(){var n=xe.apply(null,arguments).map(ia);return new de(function(r){n.length===0&&r([]);var o=n.length,l=new Array(o);n.forEach(function(c,h){return de.resolve(c).then(function(g){return l[h]={status:"fulfilled",value:g}},function(g){return l[h]={status:"rejected",reason:g}}).then(function(){return--o||r(l)})})})}),ct.any&&typeof AggregateError<"u"&&D(de,"any",function(){var n=xe.apply(null,arguments).map(ia);return new de(function(r,o){n.length===0&&o(new AggregateError([]));var l=n.length,c=new Array(l);n.forEach(function(h,g){return de.resolve(h).then(function(y){return r(y)},function(y){c[g]=y,--l||o(new AggregateError(c))})})})}),ct.withResolvers&&(de.withResolvers=ct.withResolvers));function tl(n,r){try{r(function(o){if(n._state===null){if(o===n)throw new TypeError("A promise cannot be resolved with itself.");var l=n._lib&&zr();o&&typeof o.then=="function"?tl(n,function(c,h){o instanceof de?o._then(c,h):o.then(c,h)}):(n._state=!0,n._value=o,nl(n)),l&&Vr()}},wo.bind(null,n))}catch(o){wo(n,o)}}function wo(n,r){if(Ji.push(r),n._state===null){var o=n._lib&&zr();r=bo(r),n._state=!1,n._value=r,Mc(n),nl(n),o&&Vr()}}function nl(n){var r=n._listeners;n._listeners=[];for(var o=0,l=r.length;o<l;++o)xo(n,r[o]);var c=n._PSD;--c.ref||c.finalize(),xr===0&&(++xr,Ur(function(){--xr===0&&Eo()},[]))}function xo(n,r){if(n._state===null){n._listeners.push(r);return}var o=n._state?r.onFulfilled:r.onRejected;if(o===null)return(n._state?r.resolve:r.reject)(n._value);++r.psd.ref,++xr,Ur(Lc,[o,n,r])}function Lc(n,r,o){try{var l,c=r._value;!r._state&&Ji.length&&(Ji=[]),l=we&&r._consoleTask?r._consoleTask.run(function(){return n(c)}):n(c),!r._state&&Ji.indexOf(c)===-1&&Rc(r),o.resolve(l)}catch(h){o.reject(h)}finally{--xr===0&&Eo(),--o.psd.ref||o.psd.finalize()}}function Pc(){Er(er,function(){zr()&&Vr()})}function zr(){var n=mi;return mi=!1,Zi=!1,n}function Vr(){var n,r,o;do for(;gi.length>0;)for(n=gi,gi=[],o=n.length,r=0;r<o;++r){var l=n[r];l[0].apply(null,l[1])}while(gi.length>0);mi=!0,Zi=!0}function Eo(){var n=wr;wr=[],n.forEach(function(l){l._PSD.onunhandled.call(null,l._value,l)});for(var r=$i.slice(0),o=r.length;o;)r[--o]()}function Oc(n){function r(){n(),$i.splice($i.indexOf(r),1)}$i.push(r),++xr,Ur(function(){--xr===0&&Eo()},[])}function Mc(n){wr.some(function(r){return r._value===n._value})||wr.push(n)}function Rc(n){for(var r=wr.length;r;)if(wr[--r]._value===n._value){wr.splice(r,1);return}}function ea(n){return new de(ue,!1,n)}function bt(n,r){var o=Ee;return function(){var l=zr(),c=Ee;try{return rr(o,!0),n.apply(this,arguments)}catch(h){r&&r(h)}finally{rr(c,!1),l&&Vr()}}}var Rt={awaits:0,echoes:0,id:0},Kc=0,ta=[],na=0,ra=0,Nc=0;function tr(n,r,o,l){var c=Ee,h=Object.create(c);h.parent=c,h.ref=0,h.global=!1,h.id=++Nc,er.env,h.env=Sn?{Promise:de,PromiseProp:{value:de,configurable:!0,writable:!0},all:de.all,race:de.race,allSettled:de.allSettled,any:de.any,resolve:de.resolve,reject:de.reject}:{},r&&m(h,r),++c.ref,h.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=Er(h,n,o,l);return h.ref===0&&h.finalize(),g}function Yr(){return Rt.id||(Rt.id=++Kc),++Rt.awaits,Rt.echoes+=vt,Rt.id}function nr(){return Rt.awaits?(--Rt.awaits===0&&(Rt.id=0),Rt.echoes=Rt.awaits*vt,!0):!1}(""+pi).indexOf("[native code]")===-1&&(Yr=nr=Ve);function ia(n){return Rt.echoes&&n&&n.constructor===ct?(Yr(),n.then(function(r){return nr(),r},function(r){return nr(),At(r)})):n}function Bc(n){++ra,(!Rt.echoes||--Rt.echoes===0)&&(Rt.echoes=Rt.awaits=Rt.id=0),ta.push(Ee),rr(n,!0)}function Fc(){var n=ta[ta.length-1];ta.pop(),rr(n,!1)}function rr(n,r){var o=Ee;if((r?Rt.echoes&&(!na++||n!==Ee):na&&(!--na||n!==Ee))&&queueMicrotask(r?Bc.bind(null,n):Fc),n!==Ee&&(Ee=n,o===er&&(er.env=rl()),Sn)){var l=er.env.Promise,c=n.env;(o.global||n.global)&&(Object.defineProperty(d,"Promise",c.PromiseProp),l.all=c.all,l.race=c.race,l.resolve=c.resolve,l.reject=c.reject,c.allSettled&&(l.allSettled=c.allSettled),c.any&&(l.any=c.any))}}function rl(){var n=d.Promise;return Sn?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function Er(n,r,o,l,c){var h=Ee;try{return rr(n,!0),r(o,l,c)}finally{rr(h,!1)}}function il(n,r,o,l){return typeof n!="function"?n:function(){var c=Ee;o&&Yr(),rr(r,!0);try{return n.apply(this,arguments)}finally{rr(c,!1),l&&queueMicrotask(nr)}}}function ko(n){Promise===ct&&Rt.echoes===0?na===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}var At=de.reject;function To(n,r,o,l){if(!n.idbdb||!n._state.openComplete&&!Ee.letThrough&&!n._vip){if(n._state.openComplete)return At(new ge.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return At(new ge.DatabaseClosed);n.open().catch(Ve)}return n._state.dbReadyPromise.then(function(){return To(n,r,o,l)})}else{var c=n._createTransaction(r,o,n._dbSchema);try{c.create(),n._state.PR1398_maxLoop=3}catch(h){return h.name===yt.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return To(n,r,o,l)})):At(h)}return c._promise(r,function(h,g){return tr(function(){return Ee.trans=c,l(h,g,c)})}).then(function(h){if(r==="readwrite")try{c.idbtrans.commit()}catch{}return r==="readonly"?h:c._completion.then(function(){return h})})}}var al="4.2.1",kr="ï¿¿",So=-1/0,Hn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ol="String expected.",Wr=[],aa="__dbnames",Ao="readonly",Io="readwrite";function Tr(n,r){return n?r?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:n:r}var sl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function oa(n){return typeof n=="string"&&!/\./.test(n)?function(r){return r[n]===void 0&&n in r&&(r=Ce(r),delete r[n]),r}:function(r){return r}}function ll(){throw ge.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function et(n,r){try{var o=ul(n),l=ul(r);if(o!==l)return o==="Array"?1:l==="Array"?-1:o==="binary"?1:l==="binary"?-1:o==="string"?1:l==="string"?-1:o==="Date"?1:l!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return n>r?1:n<r?-1:0;case"binary":return Hc(cl(n),cl(r));case"Array":return jc(n,r)}}catch{}return NaN}function jc(n,r){for(var o=n.length,l=r.length,c=o<l?o:l,h=0;h<c;++h){var g=et(n[h],r[h]);if(g!==0)return g}return o===l?0:o<l?-1:1}function Hc(n,r){for(var o=n.length,l=r.length,c=o<l?o:l,h=0;h<c;++h)if(n[h]!==r[h])return n[h]<r[h]?-1:1;return o===l?0:o<l?-1:1}function ul(n){var r=typeof n;if(r!=="object")return r;if(ArrayBuffer.isView(n))return"binary";var o=st(n);return o==="ArrayBuffer"?"binary":o}function cl(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function sa(n,r,o){var l=n.schema.yProps;return l?(r&&o.numFailures>0&&(r=r.filter(function(c,h){return!o.failures[h]})),Promise.all(l.map(function(c){var h=c.updatesTable;return r?n.db.table(h).where("k").anyOf(r).delete():n.db.table(h).clear()})).then(function(){return o})):o}var yi=(function(){function n(r){this["@@propmod"]=r}return n.prototype.execute=function(r){var o,l=this["@@propmod"];if(l.add!==void 0){var c=l.add;if(p(c))return u(u([],p(r)?r:[],!0),c).sort();if(typeof c=="number")return(Number(r)||0)+c;if(typeof c=="bigint")try{return BigInt(r)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(l.remove!==void 0){var h=l.remove;if(p(h))return p(r)?r.filter(function(y){return!h.includes(y)}).sort():[];if(typeof h=="number")return Number(r)-h;if(typeof h=="bigint")try{return BigInt(r)-h}catch{return BigInt(0)-h}throw new TypeError("Invalid subtrahend ".concat(h))}var g=(o=l.replacePrefix)===null||o===void 0?void 0:o[0];return g&&typeof r=="string"&&r.startsWith(g)?l.replacePrefix[1]+r.substring(g.length):r},n})();function fl(n,r){for(var o=v(r),l=o.length,c=!1,h=0;h<l;++h){var g=o[h],y=r[g],b=Z(n,g);y instanceof yi?(re(n,g,y.execute(b)),c=!0):b!==y&&(re(n,g,y),c=!0)}return c}var dl=(function(){function n(){}return n.prototype._trans=function(r,o,l){var c=this._tx||Ee.trans,h=this.name,g=we&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function y(P,S,j){if(!j.schema[h])throw new ge.NotFound("Table "+h+" not part of transaction");return o(j.idbtrans,j)}var b=zr();try{var k=c&&c.db._novip===this.db._novip?c===Ee.trans?c._promise(r,y,l):tr(function(){return c._promise(r,y,l)},{trans:c,transless:Ee.transless||Ee}):To(this.db,r,[this.name],y);return g&&(k._consoleTask=g,k=k.catch(function(P){return console.trace(P),At(P)})),k}finally{b&&Vr()}},n.prototype.get=function(r,o){var l=this;return r&&r.constructor===Object?this.where(r).first(o):r==null?At(new ge.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return l.core.get({trans:c,key:r}).then(function(h){return l.hook.reading.fire(h)})}).then(o)},n.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(p(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var o=v(r);if(o.length===1)return this.where(o[0]).equals(r[o[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(P){if(P.compound&&o.every(function(j){return P.keyPath.indexOf(j)>=0})){for(var S=0;S<o.length;++S)if(o.indexOf(P.keyPath[S])===-1)return!1;return!0}return!1}).sort(function(P,S){return P.keyPath.length-S.keyPath.length})[0];if(l&&this.db._maxKey!==kr){var c=l.keyPath.slice(0,o.length);return this.where(c).equals(c.map(function(P){return r[P]}))}!l&&we&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var h=this.schema.idxByName;function g(P,S){return et(P,S)===0}var y=o.reduce(function(P,S){var j=P[0],ne=P[1],C=h[S],O=r[S];return[j||C,j||!C?Tr(ne,C&&C.multi?function(N){var z=Z(N,S);return p(z)&&z.some(function(q){return g(O,q)})}:function(N){return g(O,Z(N,S))}):ne]},[null,null]),b=y[0],k=y[1];return b?this.where(b.name).equals(r[b.keyPath]).filter(k):l?this.filter(k):this.where(o).equals("")},n.prototype.filter=function(r){return this.toCollection().and(r)},n.prototype.count=function(r){return this.toCollection().count(r)},n.prototype.offset=function(r){return this.toCollection().offset(r)},n.prototype.limit=function(r){return this.toCollection().limit(r)},n.prototype.each=function(r){return this.toCollection().each(r)},n.prototype.toArray=function(r){return this.toCollection().toArray(r)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,p(r)?"[".concat(r.join("+"),"]"):r))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(r){var o=this,l=o.db,c=o.name;this.schema.mappedClass=r,r.prototype instanceof ll&&(r=(function(b){a(k,b);function k(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(k.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),k.prototype.table=function(){return c},k})(r));for(var h=new Set,g=r.prototype;g;g=x(g))Object.getOwnPropertyNames(g).forEach(function(b){return h.add(b)});var y=function(b){if(!b)return b;var k=Object.create(r.prototype);for(var P in b)if(!h.has(P))try{k[P]=b[P]}catch{}return k};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=y,this.hook("reading",y),r},n.prototype.defineClass=function(){function r(o){m(this,o)}return this.mapToClass(r)},n.prototype.add=function(r,o){var l=this,c=this.schema.primKey,h=c.auto,g=c.keyPath,y=r;return g&&h&&(y=oa(g)(r)),this._trans("readwrite",function(b){return l.core.mutate({trans:b,type:"add",keys:o!=null?[o]:null,values:[y]})}).then(function(b){return b.numFailures?de.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{re(r,g,b)}catch{}return b})},n.prototype.upsert=function(r,o){var l=this,c=this.schema.primKey.keyPath;return this._trans("readwrite",function(h){return l.core.get({trans:h,key:r}).then(function(g){var y=g??{};return fl(y,o),c&&re(y,c,r),l.core.mutate({trans:h,type:"put",values:[y],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[o]}}).then(function(b){return b.numFailures?de.reject(b.failures[0]):!!g})})})},n.prototype.update=function(r,o){if(typeof r=="object"&&!p(r)){var l=Z(r,this.schema.primKey.keyPath);return l===void 0?At(new ge.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(o)}else return this.where(":id").equals(r).modify(o)},n.prototype.put=function(r,o){var l=this,c=this.schema.primKey,h=c.auto,g=c.keyPath,y=r;return g&&h&&(y=oa(g)(r)),this._trans("readwrite",function(b){return l.core.mutate({trans:b,type:"put",values:[y],keys:o!=null?[o]:null})}).then(function(b){return b.numFailures?de.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{re(r,g,b)}catch{}return b})},n.prototype.delete=function(r){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"delete",keys:[r]}).then(function(c){return sa(o,[r],c)}).then(function(c){return c.numFailures?de.reject(c.failures[0]):void 0})})},n.prototype.clear=function(){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"deleteRange",range:sl}).then(function(l){return sa(r,null,l)})}).then(function(o){return o.numFailures?de.reject(o.failures[0]):void 0})},n.prototype.bulkGet=function(r){var o=this;return this._trans("readonly",function(l){return o.core.getMany({keys:r,trans:l}).then(function(c){return c.map(function(h){return o.hook.reading.fire(h)})})})},n.prototype.bulkAdd=function(r,o,l){var c=this,h=Array.isArray(o)?o:void 0;l=l||(h?void 0:o);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(y){var b=c.schema.primKey,k=b.auto,P=b.keyPath;if(P&&h)throw new ge.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==r.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var S=r.length,j=P&&k?r.map(oa(P)):r;return c.core.mutate({trans:y,type:"add",keys:h,values:j,wantResults:g}).then(function(ne){var C=ne.numFailures,O=ne.results,N=ne.lastResult,z=ne.failures,q=g?O:N;if(C===0)return q;throw new it("".concat(c.name,".bulkAdd(): ").concat(C," of ").concat(S," operations failed"),z)})})},n.prototype.bulkPut=function(r,o,l){var c=this,h=Array.isArray(o)?o:void 0;l=l||(h?void 0:o);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(y){var b=c.schema.primKey,k=b.auto,P=b.keyPath;if(P&&h)throw new ge.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==r.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var S=r.length,j=P&&k?r.map(oa(P)):r;return c.core.mutate({trans:y,type:"put",keys:h,values:j,wantResults:g}).then(function(ne){var C=ne.numFailures,O=ne.results,N=ne.lastResult,z=ne.failures,q=g?O:N;if(C===0)return q;throw new it("".concat(c.name,".bulkPut(): ").concat(C," of ").concat(S," operations failed"),z)})})},n.prototype.bulkUpdate=function(r){var o=this,l=this.core,c=r.map(function(y){return y.key}),h=r.map(function(y){return y.changes}),g=[];return this._trans("readwrite",function(y){return l.getMany({trans:y,keys:c,cache:"clone"}).then(function(b){var k=[],P=[];r.forEach(function(j,ne){var C=j.key,O=j.changes,N=b[ne];if(N){for(var z=0,q=Object.keys(O);z<q.length;z++){var G=q[z],Q=O[G];if(G===o.schema.primKey.keyPath){if(et(Q,C)!==0)throw new ge.Constraint("Cannot update primary key in bulkUpdate()")}else re(N,G,Q)}g.push(ne),k.push(C),P.push(N)}});var S=k.length;return l.mutate({trans:y,type:"put",keys:k,values:P,updates:{keys:c,changeSpecs:h}}).then(function(j){var ne=j.numFailures,C=j.failures;if(ne===0)return S;for(var O=0,N=Object.keys(C);O<N.length;O++){var z=N[O],q=g[Number(z)];if(q!=null){var G=C[z];delete C[z],C[q]=G}}throw new it("".concat(o.name,".bulkUpdate(): ").concat(ne," of ").concat(S," operations failed"),C)})})})},n.prototype.bulkDelete=function(r){var o=this,l=r.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:r}).then(function(h){return sa(o,r,h)})}).then(function(c){var h=c.numFailures,g=c.lastResult,y=c.failures;if(h===0)return g;throw new it("".concat(o.name,".bulkDelete(): ").concat(h," of ").concat(l," operations failed"),y)})},n})();function bi(n){var r={},o=function(y,b){if(b){for(var k=arguments.length,P=new Array(k-1);--k;)P[k-1]=arguments[k];return r[y].subscribe.apply(null,P),n}else if(typeof y=="string")return r[y]};o.addEventType=h;for(var l=1,c=arguments.length;l<c;++l)h(arguments[l]);return o;function h(y,b,k){if(typeof y=="object")return g(y);b||(b=se),k||(k=Ve);var P={subscribers:[],fire:k,subscribe:function(S){P.subscribers.indexOf(S)===-1&&(P.subscribers.push(S),P.fire=b(P.fire,S))},unsubscribe:function(S){P.subscribers=P.subscribers.filter(function(j){return j!==S}),P.fire=P.subscribers.reduce(b,k)}};return r[y]=o[y]=P,P}function g(y){v(y).forEach(function(b){var k=y[b];if(p(k))h(b,y[b][0],y[b][1]);else if(k==="asap")var P=h(b,F,function(){for(var j=arguments.length,ne=new Array(j);j--;)ne[j]=arguments[j];P.subscribers.forEach(function(C){Y(function(){C.apply(null,ne)})})});else throw new ge.InvalidArgument("Invalid event config")})}}function _i(n,r){return A(r).from({prototype:n}),r}function Uc(n){return _i(dl.prototype,function(o,l,c){this.db=n,this._tx=c,this.name=o,this.schema=l,this.hook=n._allTables[o]?n._allTables[o].hook:bi(null,{creating:[M,Ve],reading:[V,F],updating:[ie,Ve],deleting:[te,Ve]})})}function qr(n,r){return!(n.filter||n.algorithm||n.or)&&(r?n.justLimit:!n.replayFilter)}function Do(n,r){n.filter=Tr(n.filter,r)}function Co(n,r,o){var l=n.replayFilter;n.replayFilter=l?function(){return Tr(l(),r())}:r,n.justLimit=o&&!l}function zc(n,r){n.isMatch=Tr(n.isMatch,r)}function la(n,r){if(n.isPrimKey)return r.primaryKey;var o=r.getIndexByKeyPath(n.index);if(!o)throw new ge.Schema("KeyPath "+n.index+" on object store "+r.name+" is not indexed");return o}function hl(n,r,o){var l=la(n,r.schema);return r.openCursor({trans:o,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:l,range:n.range}})}function ua(n,r,o,l){var c=n.replayFilter?Tr(n.filter,n.replayFilter()):n.filter;if(n.or){var h={},g=function(y,b,k){if(!c||c(b,k,function(j){return b.stop(j)},function(j){return b.fail(j)})){var P=b.primaryKey,S=""+P;S==="[object ArrayBuffer]"&&(S=""+new Uint8Array(P)),w(h,S)||(h[S]=!0,r(y,b,k))}};return Promise.all([n.or._iterate(g,o),vl(hl(n,l,o),n.algorithm,g,!n.keysOnly&&n.valueMapper)])}else return vl(hl(n,l,o),Tr(n.algorithm,c),r,!n.keysOnly&&n.valueMapper)}function vl(n,r,o,l){var c=l?function(g,y,b){return o(l(g),y,b)}:o,h=bt(c);return n.then(function(g){if(g)return g.start(function(){var y=function(){return g.continue()};(!r||r(g,function(b){return y=b},function(b){g.stop(b),y=Ve},function(b){g.fail(b),y=Ve}))&&h(g.value,g,function(b){return y=b}),y()})})}var Vc=(function(){function n(){}return n.prototype._read=function(r,o){var l=this._ctx;return l.error?l.table._trans(null,At.bind(null,l.error)):l.table._trans("readonly",r).then(o)},n.prototype._write=function(r){var o=this._ctx;return o.error?o.table._trans(null,At.bind(null,o.error)):o.table._trans("readwrite",r,"locked")},n.prototype._addAlgorithm=function(r){var o=this._ctx;o.algorithm=Tr(o.algorithm,r)},n.prototype._iterate=function(r,o){return ua(this._ctx,r,o,this._ctx.table.core)},n.prototype.clone=function(r){var o=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return r&&m(l,r),o._ctx=l,o},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(r){var o=this._ctx;return this._read(function(l){return ua(o,r,l,o.table.core)})},n.prototype.count=function(r){var o=this;return this._read(function(l){var c=o._ctx,h=c.table.core;if(qr(c,!0))return h.count({trans:l,query:{index:la(c,h.schema),range:c.range}}).then(function(y){return Math.min(y,c.limit)});var g=0;return ua(c,function(){return++g,!1},l,h).then(function(){return g})}).then(r)},n.prototype.sortBy=function(r,o){var l=r.split(".").reverse(),c=l[0],h=l.length-1;function g(k,P){return P?g(k[l[P]],P-1):k[c]}var y=this._ctx.dir==="next"?1:-1;function b(k,P){var S=g(k,h),j=g(P,h);return et(S,j)*y}return this.toArray(function(k){return k.sort(b)}).then(o)},n.prototype.toArray=function(r){var o=this;return this._read(function(l){var c=o._ctx;if(c.dir==="next"&&qr(c,!0)&&c.limit>0){var h=c.valueMapper,g=la(c,c.table.core.schema);return c.table.core.query({trans:l,limit:c.limit,values:!0,query:{index:g,range:c.range}}).then(function(b){var k=b.result;return h?k.map(h):k})}else{var y=[];return ua(c,function(b){return y.push(b)},l,c.table.core).then(function(){return y})}},r)},n.prototype.offset=function(r){var o=this._ctx;return r<=0?this:(o.offset+=r,qr(o)?Co(o,function(){var l=r;return function(c,h){return l===0?!0:l===1?(--l,!1):(h(function(){c.advance(l),l=0}),!1)}}):Co(o,function(){var l=r;return function(){return--l<0}}),this)},n.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),Co(this._ctx,function(){var o=r;return function(l,c,h){return--o<=0&&c(h),o>=0}},!0),this},n.prototype.until=function(r,o){return Do(this._ctx,function(l,c,h){return r(l.value)?(c(h),o):!0}),this},n.prototype.first=function(r){return this.limit(1).toArray(function(o){return o[0]}).then(r)},n.prototype.last=function(r){return this.reverse().first(r)},n.prototype.filter=function(r){return Do(this._ctx,function(o){return r(o.value)}),zc(this._ctx,r),this},n.prototype.and=function(r){return this.filter(r)},n.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,c){r(c.key,c)})},n.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},n.prototype.eachPrimaryKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,c){r(c.primaryKey,c)})},n.prototype.keys=function(r){var o=this._ctx;o.keysOnly=!o.isMatch;var l=[];return this.each(function(c,h){l.push(h.key)}).then(function(){return l}).then(r)},n.prototype.primaryKeys=function(r){var o=this._ctx;if(o.dir==="next"&&qr(o,!0)&&o.limit>0)return this._read(function(c){var h=la(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:h,range:o.range}})}).then(function(c){var h=c.result;return h}).then(r);o.keysOnly=!o.isMatch;var l=[];return this.each(function(c,h){l.push(h.primaryKey)}).then(function(){return l}).then(r)},n.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},n.prototype.firstKey=function(r){return this.limit(1).keys(function(o){return o[0]}).then(r)},n.prototype.lastKey=function(r){return this.reverse().firstKey(r)},n.prototype.distinct=function(){var r=this._ctx,o=r.index&&r.table.schema.idxByName[r.index];if(!o||!o.multi)return this;var l={};return Do(this._ctx,function(c){var h=c.primaryKey.toString(),g=w(l,h);return l[h]=!0,!g}),this},n.prototype.modify=function(r){var o=this,l=this._ctx;return this._write(function(c){var h;typeof r=="function"?h=r:h=function(z){return fl(z,r)};var g=l.table.core,y=g.schema.primaryKey,b=y.outbound,k=y.extractKey,P=200,S=o.db._options.modifyChunkSize;S&&(typeof S=="object"?P=S[g.name]||S["*"]||200:P=S);var j=[],ne=0,C=[],O=function(z,q){var G=q.failures,Q=q.numFailures;ne+=z-Q;for(var W=0,le=v(G);W<le.length;W++){var pe=le[W];j.push(G[pe])}},N=r===pl;return o.clone().primaryKeys().then(function(z){var q=qr(l)&&l.limit===1/0&&(typeof r!="function"||N)&&{index:l.index,range:l.range},G=function(Q){var W=Math.min(P,z.length-Q),le=z.slice(Q,Q+W);return(N?Promise.resolve([]):g.getMany({trans:c,keys:le,cache:"immutable"})).then(function(pe){var fe=[],De=[],Qe=b?[]:null,me=N?le:[];if(!N)for(var qe=0;qe<W;++qe){var Le=pe[qe],nt={value:Ce(Le),primKey:z[Q+qe]};h.call(nt,nt.value,nt)!==!1&&(nt.value==null?me.push(z[Q+qe]):!b&&et(k(Le),k(nt.value))!==0?(me.push(z[Q+qe]),fe.push(nt.value)):(De.push(nt.value),b&&Qe.push(z[Q+qe])))}return Promise.resolve(fe.length>0&&g.mutate({trans:c,type:"add",values:fe}).then(function(Ae){for(var Tt in Ae.failures)me.splice(parseInt(Tt),1);O(fe.length,Ae)})).then(function(){return(De.length>0||q&&typeof r=="object")&&g.mutate({trans:c,type:"put",keys:Qe,values:De,criteria:q,changeSpec:typeof r!="function"&&r,isAdditionalChunk:Q>0}).then(function(Ae){return O(De.length,Ae)})}).then(function(){return(me.length>0||q&&N)&&g.mutate({trans:c,type:"delete",keys:me,criteria:q,isAdditionalChunk:Q>0}).then(function(Ae){return sa(l.table,me,Ae)}).then(function(Ae){return O(me.length,Ae)})}).then(function(){return z.length>Q+W&&G(Q+P)})})};return G(0).then(function(){if(j.length>0)throw new $e("Error modifying one or more objects",j,ne,C);return z.length})})})},n.prototype.delete=function(){var r=this._ctx,o=r.range;return qr(r)&&!r.table.schema.yProps&&(r.isPrimKey||o.type===3)?this._write(function(l){var c=r.table.core.schema.primaryKey,h=o;return r.table.core.count({trans:l,query:{index:c,range:h}}).then(function(g){return r.table.core.mutate({trans:l,type:"deleteRange",range:h}).then(function(y){var b=y.failures,k=y.numFailures;if(k)throw new $e("Could not delete some values",Object.keys(b).map(function(P){return b[P]}),g-k);return g-k})})}):this.modify(pl)},n})(),pl=function(n,r){return r.value=null};function Yc(n){return _i(Vc.prototype,function(o,l){this.db=n;var c=sl,h=null;if(l)try{c=l()}catch(k){h=k}var g=o._ctx,y=g.table,b=y.hook.reading.fire;this._ctx={table:y,index:g.index,isPrimKey:!g.index||y.schema.primKey.keyPath&&g.index===y.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:g.or,valueMapper:b!==F?b:null}})}function Wc(n,r){return n<r?-1:n===r?0:1}function qc(n,r){return n>r?-1:n===r?0:1}function sn(n,r,o){var l=n instanceof gl?new n.Collection(n):n;return l._ctx.error=o?new o(r):new TypeError(r),l}function Gr(n){return new n.Collection(n,function(){return ml("")}).limit(0)}function Gc(n){return n==="next"?function(r){return r.toUpperCase()}:function(r){return r.toLowerCase()}}function Xc(n){return n==="next"?function(r){return r.toLowerCase()}:function(r){return r.toUpperCase()}}function Qc(n,r,o,l,c,h){for(var g=Math.min(n.length,l.length),y=-1,b=0;b<g;++b){var k=r[b];if(k!==l[b])return c(n[b],o[b])<0?n.substr(0,b)+o[b]+o.substr(b+1):c(n[b],l[b])<0?n.substr(0,b)+l[b]+o.substr(b+1):y>=0?n.substr(0,y)+r[y]+o.substr(y+1):null;c(n[b],k)<0&&(y=b)}return g<l.length&&h==="next"?n+o.substr(n.length):g<n.length&&h==="prev"?n.substr(0,o.length):y<0?null:n.substr(0,y)+l[y]+o.substr(y+1)}function ca(n,r,o,l){var c,h,g,y,b,k,P,S=o.length;if(!o.every(function(O){return typeof O=="string"}))return sn(n,ol);function j(O){c=Gc(O),h=Xc(O),g=O==="next"?Wc:qc;var N=o.map(function(z){return{lower:h(z),upper:c(z)}}).sort(function(z,q){return g(z.lower,q.lower)});y=N.map(function(z){return z.upper}),b=N.map(function(z){return z.lower}),k=O,P=O==="next"?"":l}j("next");var ne=new n.Collection(n,function(){return ir(y[0],b[S-1]+l)});ne._ondirectionchange=function(O){j(O)};var C=0;return ne._addAlgorithm(function(O,N,z){var q=O.key;if(typeof q!="string")return!1;var G=h(q);if(r(G,b,C))return!0;for(var Q=null,W=C;W<S;++W){var le=Qc(q,G,y[W],b[W],g,k);le===null&&Q===null?C=W+1:(Q===null||g(Q,le)>0)&&(Q=le)}return N(Q!==null?function(){O.continue(Q+P)}:z),!1}),ne}function ir(n,r,o,l){return{type:2,lower:n,upper:r,lowerOpen:o,upperOpen:l}}function ml(n){return{type:1,lower:n,upper:n}}var gl=(function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(r,o,l,c){l=l!==!1,c=c===!0;try{return this._cmp(r,o)>0||this._cmp(r,o)===0&&(l||c)&&!(l&&c)?Gr(this):new this.Collection(this,function(){return ir(r,o,!l,!c)})}catch{return sn(this,Hn)}},n.prototype.equals=function(r){return r==null?sn(this,Hn):new this.Collection(this,function(){return ml(r)})},n.prototype.above=function(r){return r==null?sn(this,Hn):new this.Collection(this,function(){return ir(r,void 0,!0)})},n.prototype.aboveOrEqual=function(r){return r==null?sn(this,Hn):new this.Collection(this,function(){return ir(r,void 0,!1)})},n.prototype.below=function(r){return r==null?sn(this,Hn):new this.Collection(this,function(){return ir(void 0,r,!1,!0)})},n.prototype.belowOrEqual=function(r){return r==null?sn(this,Hn):new this.Collection(this,function(){return ir(void 0,r)})},n.prototype.startsWith=function(r){return typeof r!="string"?sn(this,ol):this.between(r,r+kr,!0,!0)},n.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):ca(this,function(o,l){return o.indexOf(l[0])===0},[r],kr)},n.prototype.equalsIgnoreCase=function(r){return ca(this,function(o,l){return o===l[0]},[r],"")},n.prototype.anyOfIgnoreCase=function(){var r=xe.apply(oe,arguments);return r.length===0?Gr(this):ca(this,function(o,l){return l.indexOf(o)!==-1},r,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var r=xe.apply(oe,arguments);return r.length===0?Gr(this):ca(this,function(o,l){return l.some(function(c){return o.indexOf(c)===0})},r,kr)},n.prototype.anyOf=function(){var r=this,o=xe.apply(oe,arguments),l=this._cmp;try{o.sort(l)}catch{return sn(this,Hn)}if(o.length===0)return Gr(this);var c=new this.Collection(this,function(){return ir(o[0],o[o.length-1])});c._ondirectionchange=function(g){l=g==="next"?r._ascending:r._descending,o.sort(l)};var h=0;return c._addAlgorithm(function(g,y,b){for(var k=g.key;l(k,o[h])>0;)if(++h,h===o.length)return y(b),!1;return l(k,o[h])===0?!0:(y(function(){g.continue(o[h])}),!1)}),c},n.prototype.notEqual=function(r){return this.inAnyRange([[So,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var r=xe.apply(oe,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return sn(this,Hn)}var o=r.reduce(function(l,c){return l?l.concat([[l[l.length-1][1],c]]):[[So,c]]},null);return o.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(r,o){var l=this,c=this._cmp,h=this._ascending,g=this._descending,y=this._min,b=this._max;if(r.length===0)return Gr(this);if(!r.every(function(W){return W[0]!==void 0&&W[1]!==void 0&&h(W[0],W[1])<=0}))return sn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ge.InvalidArgument);var k=!o||o.includeLowers!==!1,P=o&&o.includeUppers===!0;function S(W,le){for(var pe=0,fe=W.length;pe<fe;++pe){var De=W[pe];if(c(le[0],De[1])<0&&c(le[1],De[0])>0){De[0]=y(De[0],le[0]),De[1]=b(De[1],le[1]);break}}return pe===fe&&W.push(le),W}var j=h;function ne(W,le){return j(W[0],le[0])}var C;try{C=r.reduce(S,[]),C.sort(ne)}catch{return sn(this,Hn)}var O=0,N=P?function(W){return h(W,C[O][1])>0}:function(W){return h(W,C[O][1])>=0},z=k?function(W){return g(W,C[O][0])>0}:function(W){return g(W,C[O][0])>=0};function q(W){return!N(W)&&!z(W)}var G=N,Q=new this.Collection(this,function(){return ir(C[0][0],C[C.length-1][1],!k,!P)});return Q._ondirectionchange=function(W){W==="next"?(G=N,j=h):(G=z,j=g),C.sort(ne)},Q._addAlgorithm(function(W,le,pe){for(var fe=W.key;G(fe);)if(++O,O===C.length)return le(pe),!1;return q(fe)?!0:(l._cmp(fe,C[O][1])===0||l._cmp(fe,C[O][0])===0||le(function(){j===h?W.continue(C[O][0]):W.continue(C[O][1])}),!1)}),Q},n.prototype.startsWithAnyOf=function(){var r=xe.apply(oe,arguments);return r.every(function(o){return typeof o=="string"})?r.length===0?Gr(this):this.inAnyRange(r.map(function(o){return[o,o+kr]})):sn(this,"startsWithAnyOf() only works with strings")},n})();function Zc(n){return _i(gl.prototype,function(o,l,c){if(this.db=n,this._ctx={table:o,index:l===":id"?null:l,or:c},this._cmp=this._ascending=et,this._descending=function(h,g){return et(g,h)},this._max=function(h,g){return et(h,g)>0?h:g},this._min=function(h,g){return et(h,g)<0?h:g},this._IDBKeyRange=n._deps.IDBKeyRange,!this._IDBKeyRange)throw new ge.MissingAPI})}function An(n){return bt(function(r){return wi(r),n(r.target.error),!1})}function wi(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var xi="storagemutated",Lo="x-storagemutated-1",ar=bi(null,xi),Jc=(function(){function n(){}return n.prototype._lock=function(){return ee(!Ee.global),++this._reculock,this._reculock===1&&!Ee.global&&(Ee.lockOwnerFor=this),this},n.prototype._unlock=function(){if(ee(!Ee.global),--this._reculock===0)for(Ee.global||(Ee.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{Er(r[1],r[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&Ee.lockOwnerFor!==this},n.prototype.create=function(r){var o=this;if(!this.mode)return this;var l=this.db.idbdb,c=this.db._state.dbOpenError;if(ee(!this.idbtrans),!r&&!l)switch(c&&c.name){case"DatabaseClosedError":throw new ge.DatabaseClosed(c);case"MissingAPIError":throw new ge.MissingAPI(c.message,c);default:throw new ge.OpenFailed(c)}if(!this.active)throw new ge.TransactionInactive;return ee(this._completion._state===null),r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):l.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),r.onerror=bt(function(h){wi(h),o._reject(r.error)}),r.onabort=bt(function(h){wi(h),o.active&&o._reject(new ge.Abort(r.error)),o.active=!1,o.on("abort").fire(h)}),r.oncomplete=bt(function(){o.active=!1,o._resolve(),"mutatedParts"in r&&ar.storagemutated.fire(r.mutatedParts)}),this},n.prototype._promise=function(r,o,l){var c=this;if(r==="readwrite"&&this.mode!=="readwrite")return At(new ge.ReadOnly("Transaction is readonly"));if(!this.active)return At(new ge.TransactionInactive);if(this._locked())return new de(function(g,y){c._blockedFuncs.push([function(){c._promise(r,o,l).then(g,y)},Ee])});if(l)return tr(function(){var g=new de(function(y,b){c._lock();var k=o(y,b,c);k&&k.then&&k.then(y,b)});return g.finally(function(){return c._unlock()}),g._lib=!0,g});var h=new de(function(g,y){var b=o(g,y,c);b&&b.then&&b.then(g,y)});return h._lib=!0,h},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(r){var o=this._root(),l=de.resolve(r);if(o._waitingFor)o._waitingFor=o._waitingFor.then(function(){return l});else{o._waitingFor=l,o._waitingQueue=[];var c=o.idbtrans.objectStore(o.storeNames[0]);(function g(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(c.get(-1/0).onsuccess=g)})()}var h=o._waitingFor;return new de(function(g,y){l.then(function(b){return o._waitingQueue.push(bt(g.bind(null,b)))},function(b){return o._waitingQueue.push(bt(y.bind(null,b)))}).finally(function(){o._waitingFor===h&&(o._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ge.Abort))},n.prototype.table=function(r){var o=this._memoizedTables||(this._memoizedTables={});if(w(o,r))return o[r];var l=this.schema[r];if(!l)throw new ge.NotFound("Table "+r+" not part of transaction");var c=new this.db.Table(r,l,this);return c.core=this.db.core.table(r),o[r]=c,c},n})();function $c(n){return _i(Jc.prototype,function(o,l,c,h,g){var y=this;o!=="readonly"&&l.forEach(function(b){var k,P=(k=c[b])===null||k===void 0?void 0:k.yProps;P&&(l=l.concat(P.map(function(S){return S.updatesTable})))}),this.db=n,this.mode=o,this.storeNames=l,this.schema=c,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=bi(this,"complete","error","abort"),this.parent=g||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new de(function(b,k){y._resolve=b,y._reject=k}),this._completion.then(function(){y.active=!1,y.on.complete.fire()},function(b){var k=y.active;return y.active=!1,y.on.error.fire(b),y.parent?y.parent._reject(b):k&&y.idbtrans&&y.idbtrans.abort(),At(b)})})}function Po(n,r,o,l,c,h,g,y){return{name:n,keyPath:r,unique:o,multi:l,auto:c,compound:h,src:(o&&!g?"&":"")+(l?"*":"")+(c?"++":"")+yl(r),type:y}}function yl(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Oo(n,r,o){return{name:n,primKey:r,indexes:o,mappedClass:null,idxByName:H(o,function(l){return[l.name,l]})}}function ef(n){return n.length===1?n[0]:n}var Ei=function(n){try{return n.only([[]]),Ei=function(){return[[]]},[[]]}catch{return Ei=function(){return kr},kr}};function Mo(n){return n==null?function(){}:typeof n=="string"?tf(n):function(r){return Z(r,n)}}function tf(n){var r=n.split(".");return r.length===1?function(o){return o[n]}:function(o){return Z(o,n)}}function bl(n){return[].slice.call(n)}var nf=0;function ki(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function rf(n,r,o){function l(S,j){var ne=bl(S.objectStoreNames);return{schema:{name:S.name,tables:ne.map(function(C){return j.objectStore(C)}).map(function(C){var O=C.keyPath,N=C.autoIncrement,z=p(O),q=O==null,G={},Q={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:q,compound:z,keyPath:O,autoIncrement:N,unique:!0,extractKey:Mo(O)},indexes:bl(C.indexNames).map(function(W){return C.index(W)}).map(function(W){var le=W.name,pe=W.unique,fe=W.multiEntry,De=W.keyPath,Qe=p(De),me={name:le,compound:Qe,keyPath:De,unique:pe,multiEntry:fe,extractKey:Mo(De)};return G[ki(De)]=me,me}),getIndexByKeyPath:function(W){return G[ki(W)]}};return G[":id"]=Q.primaryKey,O!=null&&(G[ki(O)]=Q.primaryKey),Q})},hasGetAll:ne.length>0&&"getAll"in j.objectStore(ne[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function c(S){if(S.type===3)return null;if(S.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var j=S.lower,ne=S.upper,C=S.lowerOpen,O=S.upperOpen,N=j===void 0?ne===void 0?null:r.upperBound(ne,!!O):ne===void 0?r.lowerBound(j,!!C):r.bound(j,ne,!!C,!!O);return N}function h(S){var j=S.name;function ne(N){var z=N.trans,q=N.type,G=N.keys,Q=N.values,W=N.range;return new Promise(function(le,pe){le=bt(le);var fe=z.objectStore(j),De=fe.keyPath==null,Qe=q==="put"||q==="add";if(!Qe&&q!=="delete"&&q!=="deleteRange")throw new Error("Invalid operation type: "+q);var me=(G||Q||{length:1}).length;if(G&&Q&&G.length!==Q.length)throw new Error("Given keys array must have same length as given values array.");if(me===0)return le({numFailures:0,failures:{},results:[],lastResult:void 0});var qe,Le=[],nt=[],Ae=0,Tt=function(Dn){++Ae,wi(Dn)};if(q==="deleteRange"){if(W.type===4)return le({numFailures:Ae,failures:nt,results:[],lastResult:void 0});W.type===3?Le.push(qe=fe.clear()):Le.push(qe=fe.delete(c(W)))}else{var Ut=Qe?De?[Q,G]:[Q,null]:[G,null],In=Ut[0],en=Ut[1];if(Qe)for(var hn=0;hn<me;++hn)Le.push(qe=en&&en[hn]!==void 0?fe[q](In[hn],en[hn]):fe[q](In[hn])),qe.onerror=Tt;else for(var hn=0;hn<me;++hn)Le.push(qe=fe[q](In[hn])),qe.onerror=Tt}var lr=function(Dn){var Ai=Dn.target.result;Le.forEach(function(_n,xa){return _n.error!=null&&(nt[xa]=_n.error)}),le({numFailures:Ae,failures:nt,results:q==="delete"?G:Le.map(function(_n){return _n.result}),lastResult:Ai})};qe.onerror=function(Dn){Tt(Dn),lr(Dn)},qe.onsuccess=lr})}function C(N){var z=N.trans,q=N.values,G=N.query,Q=N.reverse,W=N.unique;return new Promise(function(le,pe){le=bt(le);var fe=G.index,De=G.range,Qe=z.objectStore(j),me=fe.isPrimaryKey?Qe:Qe.index(fe.name),qe=Q?W?"prevunique":"prev":W?"nextunique":"next",Le=q||!("openKeyCursor"in me)?me.openCursor(c(De),qe):me.openKeyCursor(c(De),qe);Le.onerror=An(pe),Le.onsuccess=bt(function(nt){var Ae=Le.result;if(!Ae){le(null);return}Ae.___id=++nf,Ae.done=!1;var Tt=Ae.continue.bind(Ae),Ut=Ae.continuePrimaryKey;Ut&&(Ut=Ut.bind(Ae));var In=Ae.advance.bind(Ae),en=function(){throw new Error("Cursor not started")},hn=function(){throw new Error("Cursor not stopped")};Ae.trans=z,Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=en,Ae.fail=bt(pe),Ae.next=function(){var lr=this,Dn=1;return this.start(function(){return Dn--?lr.continue():lr.stop()}).then(function(){return lr})},Ae.start=function(lr){var Dn=new Promise(function(_n,xa){_n=bt(_n),Le.onerror=An(xa),Ae.fail=xa,Ae.stop=function(Yf){Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=hn,_n(Yf)}}),Ai=function(){if(Le.result)try{lr()}catch(_n){Ae.fail(_n)}else Ae.done=!0,Ae.start=function(){throw new Error("Cursor behind last entry")},Ae.stop()};return Le.onsuccess=bt(function(_n){Le.onsuccess=Ai,Ai()}),Ae.continue=Tt,Ae.continuePrimaryKey=Ut,Ae.advance=In,Ai(),Dn},le(Ae)},pe)})}function O(N){return function(z){return new Promise(function(q,G){q=bt(q);var Q=z.trans,W=z.values,le=z.limit,pe=z.query,fe=le===1/0?void 0:le,De=pe.index,Qe=pe.range,me=Q.objectStore(j),qe=De.isPrimaryKey?me:me.index(De.name),Le=c(Qe);if(le===0)return q({result:[]});if(N){var nt=W?qe.getAll(Le,fe):qe.getAllKeys(Le,fe);nt.onsuccess=function(In){return q({result:In.target.result})},nt.onerror=An(G)}else{var Ae=0,Tt=W||!("openKeyCursor"in qe)?qe.openCursor(Le):qe.openKeyCursor(Le),Ut=[];Tt.onsuccess=function(In){var en=Tt.result;if(!en)return q({result:Ut});if(Ut.push(W?en.value:en.primaryKey),++Ae===le)return q({result:Ut});en.continue()},Tt.onerror=An(G)}})}}return{name:j,schema:S,mutate:ne,getMany:function(N){var z=N.trans,q=N.keys;return new Promise(function(G,Q){G=bt(G);for(var W=z.objectStore(j),le=q.length,pe=new Array(le),fe=0,De=0,Qe,me=function(Ae){var Tt=Ae.target;(pe[Tt._pos]=Tt.result)!=null,++De===fe&&G(pe)},qe=An(Q),Le=0;Le<le;++Le){var nt=q[Le];nt!=null&&(Qe=W.get(q[Le]),Qe._pos=Le,Qe.onsuccess=me,Qe.onerror=qe,++fe)}fe===0&&G(pe)})},get:function(N){var z=N.trans,q=N.key;return new Promise(function(G,Q){G=bt(G);var W=z.objectStore(j),le=W.get(q);le.onsuccess=function(pe){return G(pe.target.result)},le.onerror=An(Q)})},query:O(b),openCursor:C,count:function(N){var z=N.query,q=N.trans,G=z.index,Q=z.range;return new Promise(function(W,le){var pe=q.objectStore(j),fe=G.isPrimaryKey?pe:pe.index(G.name),De=c(Q),Qe=De?fe.count(De):fe.count();Qe.onsuccess=bt(function(me){return W(me.target.result)}),Qe.onerror=An(le)})}}}var g=l(n,o),y=g.schema,b=g.hasGetAll,k=y.tables.map(function(S){return h(S)}),P={};return k.forEach(function(S){return P[S.name]=S}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(S){var j=P[S];if(!j)throw new Error("Table '".concat(S,"' not found"));return P[S]},MIN_KEY:-1/0,MAX_KEY:Ei(r),schema:y}}function af(n,r){return r.reduce(function(o,l){var c=l.create;return s(s({},o),c(o))},n)}function of(n,r,o,l){var c=o.IDBKeyRange;o.indexedDB;var h=af(rf(r,c,l),n.dbcore);return{dbcore:h}}function fa(n,r){var o=r.db,l=of(n._middlewares,o,n._deps,r);n.core=l.dbcore,n.tables.forEach(function(c){var h=c.name;n.core.schema.tables.some(function(g){return g.name===h})&&(c.core=n.core.table(h),n[h]instanceof n.Table&&(n[h].core=c.core))})}function da(n,r,o,l){o.forEach(function(c){var h=l[c];r.forEach(function(g){var y=K(g,c);(!y||"value"in y&&y.value===void 0)&&(g===n.Transaction.prototype||g instanceof n.Transaction?D(g,c,{get:function(){return this.table(c)},set:function(b){L(this,c,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):g[c]=new n.Table(c,h))})})}function Ro(n,r){r.forEach(function(o){for(var l in o)o[l]instanceof n.Table&&delete o[l]})}function sf(n,r){return n._cfg.version-r._cfg.version}function lf(n,r,o,l){var c=n._dbSchema;o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Oo("$meta",wl("")[0],[]),n._storeNames.push("$meta"));var h=n._createTransaction("readwrite",n._storeNames,c);h.create(o),h._completion.catch(l);var g=h._reject.bind(h),y=Ee.transless||Ee;tr(function(){if(Ee.trans=h,Ee.transless=y,r===0)v(c).forEach(function(b){No(o,b,c[b].primKey,c[b].indexes)}),fa(n,o),de.follow(function(){return n.on.populate.fire(h)}).catch(g);else return fa(n,o),cf(n,h,r).then(function(b){return ff(n,b,h,o)}).catch(g)})}function uf(n,r){_l(n._dbSchema,r),r.db.version%10===0&&!r.objectStoreNames.contains("$meta")&&r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var o=va(n,n.idbdb,r);pa(n,n._dbSchema,r);for(var l=Ko(o,n._dbSchema),c=function(k){if(k.change.length||k.recreate)return console.warn("Unable to patch indexes of table ".concat(k.name," because it has changes on the type of index or primary key.")),{value:void 0};var P=r.objectStore(k.name);k.add.forEach(function(S){we&&console.debug("Dexie upgrade patch: Creating missing index ".concat(k.name,".").concat(S.src)),ha(P,S)})},h=0,g=l.change;h<g.length;h++){var y=g[h],b=c(y);if(typeof b=="object")return b.value}}function cf(n,r,o){return r.storeNames.includes("$meta")?r.table("$meta").get("version").then(function(l){return l??o}):de.resolve(o)}function ff(n,r,o,l){var c=[],h=n._versions,g=n._dbSchema=va(n,n.idbdb,l),y=h.filter(function(k){return k._cfg.version>=r});if(y.length===0)return de.resolve();y.forEach(function(k){c.push(function(){var P=g,S=k._cfg.dbschema;pa(n,P,l),pa(n,S,l),g=n._dbSchema=S;var j=Ko(P,S);j.add.forEach(function(q){No(l,q[0],q[1].primKey,q[1].indexes)}),j.change.forEach(function(q){if(q.recreate)throw new ge.Upgrade("Not yet support for changing primary key");var G=l.objectStore(q.name);q.add.forEach(function(Q){return ha(G,Q)}),q.change.forEach(function(Q){G.deleteIndex(Q.name),ha(G,Q)}),q.del.forEach(function(Q){return G.deleteIndex(Q)})});var ne=k._cfg.contentUpgrade;if(ne&&k._cfg.version>r){fa(n,l),o._memoizedTables={};var C=Te(S);j.del.forEach(function(q){C[q]=P[q]}),Ro(n,[n.Transaction.prototype]),da(n,[n.Transaction.prototype],v(C),C),o.schema=C;var O=Pe(ne);O&&Yr();var N,z=de.follow(function(){if(N=ne(o),N&&O){var q=nr.bind(null,null);N.then(q,q)}});return N&&typeof N.then=="function"?de.resolve(N):z.then(function(){return N})}}),c.push(function(P){var S=k._cfg.dbschema;df(S,P),Ro(n,[n.Transaction.prototype]),da(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),o.schema=n._dbSchema}),c.push(function(P){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===k._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(S){return S!=="$meta"})):P.objectStore("$meta").put(k._cfg.version,"version"))})});function b(){return c.length?de.resolve(c.shift()(o.idbtrans)).then(b):de.resolve()}return b().then(function(){_l(g,l)})}function Ko(n,r){var o={del:[],add:[],change:[]},l;for(l in n)r[l]||o.del.push(l);for(l in r){var c=n[l],h=r[l];if(!c)o.add.push([l,h]);else{var g={name:l,def:h,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(h.primKey.keyPath||"")||c.primKey.auto!==h.primKey.auto)g.recreate=!0,o.change.push(g);else{var y=c.idxByName,b=h.idxByName,k=void 0;for(k in y)b[k]||g.del.push(k);for(k in b){var P=y[k],S=b[k];P?P.src!==S.src&&g.change.push(S):g.add.push(S)}(g.del.length>0||g.add.length>0||g.change.length>0)&&o.change.push(g)}}}return o}function No(n,r,o,l){var c=n.db.createObjectStore(r,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return l.forEach(function(h){return ha(c,h)}),c}function _l(n,r){v(n).forEach(function(o){r.db.objectStoreNames.contains(o)||(we&&console.debug("Dexie: Creating missing table",o),No(r,o,n[o].primKey,n[o].indexes))})}function df(n,r){[].slice.call(r.db.objectStoreNames).forEach(function(o){return n[o]==null&&r.db.deleteObjectStore(o)})}function ha(n,r){n.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function va(n,r,o){var l={},c=R(r.objectStoreNames,0);return c.forEach(function(h){for(var g=o.objectStore(h),y=g.keyPath,b=Po(yl(y),y||"",!0,!1,!!g.autoIncrement,y&&typeof y!="string",!0),k=[],P=0;P<g.indexNames.length;++P){var S=g.index(g.indexNames[P]);y=S.keyPath;var j=Po(S.name,y,!!S.unique,!!S.multiEntry,!1,y&&typeof y!="string",!1);k.push(j)}l[h]=Oo(h,b,k)}),l}function hf(n,r,o){n.verno=r.version/10;var l=n._dbSchema=va(n,r,o);n._storeNames=R(r.objectStoreNames,0),da(n,[n._allTables],v(l),l)}function vf(n,r){var o=va(n,n.idbdb,r),l=Ko(o,n._dbSchema);return!(l.add.length||l.change.some(function(c){return c.add.length||c.change.length}))}function pa(n,r,o){for(var l=o.db.objectStoreNames,c=0;c<l.length;++c){var h=l[c],g=o.objectStore(h);n._hasGetAll="getAll"in g;for(var y=0;y<g.indexNames.length;++y){var b=g.indexNames[y],k=g.index(b).keyPath,P=typeof k=="string"?k:"["+R(k).join("+")+"]";if(r[h]){var S=r[h].idxByName[P];S&&(S.name=b,delete r[h].idxByName[P],r[h].idxByName[b]=S)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function wl(n){return n.split(",").map(function(r,o){var l,c=r.split(":"),h=(l=c[1])===null||l===void 0?void 0:l.trim();r=c[0].trim();var g=r.replace(/([&*]|\+\+)/g,""),y=/^\[/.test(g)?g.match(/^\[(.*)\]$/)[1].split("+"):g;return Po(g,y||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),p(y),o===0,h)})}var pf=(function(){function n(){}return n.prototype._createTableSchema=function(r,o,l){return Oo(r,o,l)},n.prototype._parseIndexSyntax=function(r){return wl(r)},n.prototype._parseStoresSpec=function(r,o){var l=this;v(r).forEach(function(c){if(r[c]!==null){var h=l._parseIndexSyntax(r[c]),g=h.shift();if(!g)throw new ge.Schema("Invalid schema for table "+c+": "+r[c]);if(g.unique=!0,g.multi)throw new ge.Schema("Primary key cannot be multiEntry*");h.forEach(function(b){if(b.auto)throw new ge.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new ge.Schema("Index must have a name and cannot be an empty string")});var y=l._createTableSchema(c,g,h);o[c]=y}})},n.prototype.stores=function(r){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,r):r;var l=o._versions,c={},h={};return l.forEach(function(g){m(c,g._cfg.storesSource),h=g._cfg.dbschema={},g._parseStoresSpec(c,h)}),o._dbSchema=h,Ro(o,[o._allTables,o,o.Transaction.prototype]),da(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],v(h),h),o._storeNames=v(h),this},n.prototype.upgrade=function(r){return this._cfg.contentUpgrade=_e(this._cfg.contentUpgrade||Ve,r),this},n})();function mf(n){return _i(pf.prototype,function(o){this.db=n,this._cfg={version:o,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Bo(n,r){var o=n._dbNamesDB;return o||(o=n._dbNamesDB=new Un(aa,{addons:[],indexedDB:n,IDBKeyRange:r}),o.version(1).stores({dbnames:"name"})),o.table("dbnames")}function Fo(n){return n&&typeof n.databases=="function"}function gf(n){var r=n.indexedDB,o=n.IDBKeyRange;return Fo(r)?Promise.resolve(r.databases()).then(function(l){return l.map(function(c){return c.name}).filter(function(c){return c!==aa})}):Bo(r,o).toCollection().primaryKeys()}function yf(n,r){var o=n.indexedDB,l=n.IDBKeyRange;!Fo(o)&&r!==aa&&Bo(o,l).put({name:r}).catch(Ve)}function bf(n,r){var o=n.indexedDB,l=n.IDBKeyRange;!Fo(o)&&r!==aa&&Bo(o,l).delete(r).catch(Ve)}function jo(n){return tr(function(){return Ee.letThrough=!0,n()})}function _f(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(o){var l=function(){return indexedDB.databases().finally(o)};r=setInterval(l,100),l()}).finally(function(){return clearInterval(r)})}var Ho;function Uo(n){return!("from"in n)}var Ht=function(n,r){if(this)m(this,arguments.length?{d:1,from:n,to:arguments.length>1?r:n}:{d:0});else{var o=new Ht;return n&&"d"in n&&m(o,n),o}};E(Ht.prototype,(Ho={add:function(n){return Si(this,n),this},addKey:function(n){return Ti(this,n,n),this},addKeys:function(n){var r=this;return n.forEach(function(o){return Ti(r,o,o)}),this},hasKey:function(n){var r=ma(this).next(n).value;return r&&et(r.from,n)<=0&&et(r.to,n)>=0}},Ho[Xe]=function(){return ma(this)},Ho));function Ti(n,r,o){var l=et(r,o);if(!isNaN(l)){if(l>0)throw RangeError();if(Uo(n))return m(n,{from:r,to:o,d:1});var c=n.l,h=n.r;if(et(o,n.from)<0)return c?Ti(c,r,o):n.l={from:r,to:o,d:1,l:null,r:null},El(n);if(et(r,n.to)>0)return h?Ti(h,r,o):n.r={from:r,to:o,d:1,l:null,r:null},El(n);et(r,n.from)<0&&(n.from=r,n.l=null,n.d=h?h.d+1:1),et(o,n.to)>0&&(n.to=o,n.r=null,n.d=n.l?n.l.d+1:1);var g=!n.r;c&&!n.l&&Si(n,c),h&&g&&Si(n,h)}}function Si(n,r){function o(l,c){var h=c.from,g=c.to,y=c.l,b=c.r;Ti(l,h,g),y&&o(l,y),b&&o(l,b)}Uo(r)||o(n,r)}function xl(n,r){var o=ma(r),l=o.next();if(l.done)return!1;for(var c=l.value,h=ma(n),g=h.next(c.from),y=g.value;!l.done&&!g.done;){if(et(y.from,c.to)<=0&&et(y.to,c.from)>=0)return!0;et(c.from,y.from)<0?c=(l=o.next(y.from)).value:y=(g=h.next(c.from)).value}return!1}function ma(n){var r=Uo(n)?null:{s:0,n};return{next:function(o){for(var l=arguments.length>0;r;)switch(r.s){case 0:if(r.s=1,l)for(;r.n.l&&et(o,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!l||et(o,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function El(n){var r,o,l=(((r=n.r)===null||r===void 0?void 0:r.d)||0)-(((o=n.l)===null||o===void 0?void 0:o.d)||0),c=l>1?"r":l<-1?"l":"";if(c){var h=c==="r"?"l":"r",g=s({},n),y=n[c];n.from=y.from,n.to=y.to,n[c]=y[c],g[c]=y[h],n[h]=g,g.d=kl(g)}n.d=kl(n)}function kl(n){var r=n.r,o=n.l;return(r?o?Math.max(r.d,o.d):r.d:o?o.d:0)+1}function ga(n,r){return v(r).forEach(function(o){n[o]?Si(n[o],r[o]):n[o]=pt(r[o])}),n}function zo(n,r){return n.all||r.all||Object.keys(n).some(function(o){return r[o]&&xl(r[o],n[o])})}var Sr={},Vo={},Yo=!1;function ya(n,r){ga(Vo,n),Yo||(Yo=!0,setTimeout(function(){Yo=!1;var o=Vo;Vo={},Wo(o,!1)},0))}function Wo(n,r){r===void 0&&(r=!1);var o=new Set;if(n.all)for(var l=0,c=Object.values(Sr);l<c.length;l++){var h=c[l];Tl(h,n,o,r)}else for(var g in n){var y=/^idb\:\/\/(.*)\/(.*)\//.exec(g);if(y){var b=y[1],k=y[2],h=Sr["idb://".concat(b,"/").concat(k)];h&&Tl(h,n,o,r)}}o.forEach(function(P){return P()})}function Tl(n,r,o,l){for(var c=[],h=0,g=Object.entries(n.queries.query);h<g.length;h++){for(var y=g[h],b=y[0],k=y[1],P=[],S=0,j=k;S<j.length;S++){var ne=j[S];zo(r,ne.obsSet)?ne.subscribers.forEach(function(z){return o.add(z)}):l&&P.push(ne)}l&&c.push([b,P])}if(l)for(var C=0,O=c;C<O.length;C++){var N=O[C],b=N[0],P=N[1];n.queries.query[b]=P}}function wf(n){var r=n._state,o=n._deps.indexedDB;if(r.isBeingOpened||n.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?At(r.dbOpenError):n});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var l=r.openCanceller,c=Math.round(n.verno*10),h=!1;function g(){if(r.openCanceller!==l)throw new ge.DatabaseClosed("db.open() was cancelled")}var y=r.dbReadyResolve,b=null,k=!1,P=function(){return new de(function(S,j){if(g(),!o)throw new ge.MissingAPI;var ne=n.name,C=r.autoSchema||!c?o.open(ne):o.open(ne,c);if(!C)throw new ge.MissingAPI;C.onerror=An(j),C.onblocked=bt(n._fireOnBlocked),C.onupgradeneeded=bt(function(O){if(b=C.transaction,r.autoSchema&&!n._options.allowEmptyDB){C.onerror=wi,b.abort(),C.result.close();var N=o.deleteDatabase(ne);N.onsuccess=N.onerror=bt(function(){j(new ge.NoSuchDatabase("Database ".concat(ne," doesnt exist")))})}else{b.onerror=An(j);var z=O.oldVersion>Math.pow(2,62)?0:O.oldVersion;k=z<1,n.idbdb=C.result,h&&uf(n,b),lf(n,z/10,b,j)}},j),C.onsuccess=bt(function(){b=null;var O=n.idbdb=C.result,N=R(O.objectStoreNames);if(N.length>0)try{var z=O.transaction(ef(N),"readonly");if(r.autoSchema)hf(n,O,z);else if(pa(n,n._dbSchema,z),!vf(n,z)&&!h)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),O.close(),c=O.version+1,h=!0,S(P());fa(n,z)}catch{}Wr.push(n),O.onversionchange=bt(function(q){r.vcFired=!0,n.on("versionchange").fire(q)}),O.onclose=bt(function(){n.close({disableAutoOpen:!1})}),k&&yf(n._deps,ne),S()},j)}).catch(function(S){switch(S?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),P();break;case"VersionError":if(c>0)return c=0,P();break}return de.reject(S)})};return de.race([l,(typeof navigator>"u"?de.resolve():_f()).then(P)]).then(function(){return g(),r.onReadyBeingFired=[],de.resolve(jo(function(){return n.on.ready.fire(n.vip)})).then(function S(){if(r.onReadyBeingFired.length>0){var j=r.onReadyBeingFired.reduce(_e,Ve);return r.onReadyBeingFired=[],de.resolve(jo(function(){return j(n.vip)})).then(S)}})}).finally(function(){r.openCanceller===l&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(S){r.dbOpenError=S;try{b&&b.abort()}catch{}return l===r.openCanceller&&n._close(),At(S)}).finally(function(){r.openComplete=!0,y()}).then(function(){if(k){var S={};n.tables.forEach(function(j){j.schema.indexes.forEach(function(ne){ne.name&&(S["idb://".concat(n.name,"/").concat(j.name,"/").concat(ne.name)]=new Ht(-1/0,[[[]]]))}),S["idb://".concat(n.name,"/").concat(j.name,"/")]=S["idb://".concat(n.name,"/").concat(j.name,"/:dels")]=new Ht(-1/0,[[[]]])}),ar(xi).fire(S),Wo(S,!0)}return n})}function qo(n){var r=function(g){return n.next(g)},o=function(g){return n.throw(g)},l=h(r),c=h(o);function h(g){return function(y){var b=g(y),k=b.value;return b.done?k:!k||typeof k.then!="function"?p(k)?Promise.all(k).then(l,c):l(k):k.then(l,c)}}return h(r)()}function xf(n,r,o){var l=arguments.length;if(l<2)throw new ge.InvalidArgument("Too few arguments");for(var c=new Array(l-1);--l;)c[l-1]=arguments[l];o=c.pop();var h=Se(c);return[n,h,o]}function Sl(n,r,o,l,c){return de.resolve().then(function(){var h=Ee.transless||Ee,g=n._createTransaction(r,o,n._dbSchema,l);g.explicit=!0;var y={trans:g,transless:h};if(l)g.idbtrans=l.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,n._state.PR1398_maxLoop=3}catch(S){return S.name===yt.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return Sl(n,r,o,null,c)})):At(S)}var b=Pe(c);b&&Yr();var k,P=de.follow(function(){if(k=c.call(g,g),k)if(b){var S=nr.bind(null,null);k.then(S,S)}else typeof k.next=="function"&&typeof k.throw=="function"&&(k=qo(k))},y);return(k&&typeof k.then=="function"?de.resolve(k).then(function(S){return g.active?S:At(new ge.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):P.then(function(){return k})).then(function(S){return l&&g._resolve(),g._completion.then(function(){return S})}).catch(function(S){return g._reject(S),At(S)})})}function ba(n,r,o){for(var l=p(n)?n.slice():[n],c=0;c<o;++c)l.push(r);return l}function Ef(n){return s(s({},n),{table:function(r){var o=n.table(r),l=o.schema,c={},h=[];function g(O,N,z){var q=ki(O),G=c[q]=c[q]||[],Q=O==null?0:typeof O=="string"?1:O.length,W=N>0,le=s(s({},z),{name:W?"".concat(q,"(virtual-from:").concat(z.name,")"):z.name,lowLevelIndex:z,isVirtual:W,keyTail:N,keyLength:Q,extractKey:Mo(O),unique:!W&&z.unique});if(G.push(le),le.isPrimaryKey||h.push(le),Q>1){var pe=Q===2?O[0]:O.slice(0,Q-1);g(pe,N+1,z)}return G.sort(function(fe,De){return fe.keyTail-De.keyTail}),le}var y=g(l.primaryKey.keyPath,0,l.primaryKey);c[":id"]=[y];for(var b=0,k=l.indexes;b<k.length;b++){var P=k[b];g(P.keyPath,0,P)}function S(O){var N=c[ki(O)];return N&&N[0]}function j(O,N){return{type:O.type===1?2:O.type,lower:ba(O.lower,O.lowerOpen?n.MAX_KEY:n.MIN_KEY,N),lowerOpen:!0,upper:ba(O.upper,O.upperOpen?n.MIN_KEY:n.MAX_KEY,N),upperOpen:!0}}function ne(O){var N=O.query.index;return N.isVirtual?s(s({},O),{query:{index:N.lowLevelIndex,range:j(O.query.range,N.keyTail)}}):O}var C=s(s({},o),{schema:s(s({},l),{primaryKey:y,indexes:h,getIndexByKeyPath:S}),count:function(O){return o.count(ne(O))},query:function(O){return o.query(ne(O))},openCursor:function(O){var N=O.query.index,z=N.keyTail,q=N.isVirtual,G=N.keyLength;if(!q)return o.openCursor(O);function Q(W){function le(fe){fe!=null?W.continue(ba(fe,O.reverse?n.MAX_KEY:n.MIN_KEY,z)):O.unique?W.continue(W.key.slice(0,G).concat(O.reverse?n.MIN_KEY:n.MAX_KEY,z)):W.continue()}var pe=Object.create(W,{continue:{value:le},continuePrimaryKey:{value:function(fe,De){W.continuePrimaryKey(ba(fe,n.MAX_KEY,z),De)}},primaryKey:{get:function(){return W.primaryKey}},key:{get:function(){var fe=W.key;return G===1?fe[0]:fe.slice(0,G)}},value:{get:function(){return W.value}}});return pe}return o.openCursor(ne(O)).then(function(W){return W&&Q(W)})}});return C}})}var kf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ef};function Go(n,r,o,l){return o=o||{},l=l||"",v(n).forEach(function(c){if(!w(r,c))o[l+c]=void 0;else{var h=n[c],g=r[c];if(typeof h=="object"&&typeof g=="object"&&h&&g){var y=st(h),b=st(g);y!==b?o[l+c]=r[c]:y==="Object"?Go(h,g,o,l+c+"."):h!==g&&(o[l+c]=r[c])}else h!==g&&(o[l+c]=r[c])}}),v(r).forEach(function(c){w(n,c)||(o[l+c]=r[c])}),o}function Xo(n,r){return r.type==="delete"?r.keys:r.keys||r.values.map(n.extractKey)}var Tf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return s(s({},n),{table:function(r){var o=n.table(r),l=o.schema.primaryKey,c=s(s({},o),{mutate:function(h){var g=Ee.trans,y=g.table(r).hook,b=y.deleting,k=y.creating,P=y.updating;switch(h.type){case"add":if(k.fire===Ve)break;return g._promise("readwrite",function(){return S(h)},!0);case"put":if(k.fire===Ve&&P.fire===Ve)break;return g._promise("readwrite",function(){return S(h)},!0);case"delete":if(b.fire===Ve)break;return g._promise("readwrite",function(){return S(h)},!0);case"deleteRange":if(b.fire===Ve)break;return g._promise("readwrite",function(){return j(h)},!0)}return o.mutate(h);function S(C){var O=Ee.trans,N=C.keys||Xo(l,C);if(!N)throw new Error("Keys missing");return C=C.type==="add"||C.type==="put"?s(s({},C),{keys:N}):s({},C),C.type!=="delete"&&(C.values=u([],C.values)),C.keys&&(C.keys=u([],C.keys)),Sf(o,C,N).then(function(z){var q=N.map(function(G,Q){var W=z[Q],le={onerror:null,onsuccess:null};if(C.type==="delete")b.fire.call(le,G,W,O);else if(C.type==="add"||W===void 0){var pe=k.fire.call(le,G,C.values[Q],O);G==null&&pe!=null&&(G=pe,C.keys[Q]=G,l.outbound||re(C.values[Q],l.keyPath,G))}else{var fe=Go(W,C.values[Q]),De=P.fire.call(le,fe,G,W,O);if(De){var Qe=C.values[Q];Object.keys(De).forEach(function(me){w(Qe,me)?Qe[me]=De[me]:re(Qe,me,De[me])})}}return le});return o.mutate(C).then(function(G){for(var Q=G.failures,W=G.results,le=G.numFailures,pe=G.lastResult,fe=0;fe<N.length;++fe){var De=W?W[fe]:N[fe],Qe=q[fe];De==null?Qe.onerror&&Qe.onerror(Q[fe]):Qe.onsuccess&&Qe.onsuccess(C.type==="put"&&z[fe]?C.values[fe]:De)}return{failures:Q,results:W,numFailures:le,lastResult:pe}}).catch(function(G){return q.forEach(function(Q){return Q.onerror&&Q.onerror(G)}),Promise.reject(G)})})}function j(C){return ne(C.trans,C.range,1e4)}function ne(C,O,N){return o.query({trans:C,values:!1,query:{index:l,range:O},limit:N}).then(function(z){var q=z.result;return S({type:"delete",keys:q,trans:C}).then(function(G){return G.numFailures>0?Promise.reject(G.failures[0]):q.length<N?{failures:[],numFailures:0,lastResult:void 0}:ne(C,s(s({},O),{lower:q[q.length-1],lowerOpen:!0}),N)})})}}});return c}})}};function Sf(n,r,o){return r.type==="add"?Promise.resolve([]):n.getMany({trans:r.trans,keys:o,cache:"immutable"})}function Al(n,r,o){try{if(!r||r.keys.length<n.length)return null;for(var l=[],c=0,h=0;c<r.keys.length&&h<n.length;++c)et(r.keys[c],n[h])===0&&(l.push(o?Ce(r.values[c]):r.values[c]),++h);return l.length===n.length?l:null}catch{return null}}var Af={stack:"dbcore",level:-1,create:function(n){return{table:function(r){var o=n.table(r);return s(s({},o),{getMany:function(l){if(!l.cache)return o.getMany(l);var c=Al(l.keys,l.trans._cache,l.cache==="clone");return c?de.resolve(c):o.getMany(l).then(function(h){return l.trans._cache={keys:l.keys,values:l.cache==="clone"?Ce(h):h},h})},mutate:function(l){return l.type!=="add"&&(l.trans._cache=null),o.mutate(l)}})}}}};function Il(n,r){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function Dl(n,r){switch(n){case"query":return r.values&&!r.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var If={stack:"dbcore",level:0,name:"Observability",create:function(n){var r=n.schema.name,o=new Ht(n.MIN_KEY,n.MAX_KEY);return s(s({},n),{transaction:function(l,c,h){if(Ee.subscr&&c!=="readonly")throw new ge.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ee.querier));return n.transaction(l,c,h)},table:function(l){var c=n.table(l),h=c.schema,g=h.primaryKey,y=h.indexes,b=g.extractKey,k=g.outbound,P=g.autoIncrement&&y.filter(function(C){return C.compound&&C.keyPath.includes(g.keyPath)}),S=s(s({},c),{mutate:function(C){var O,N,z=C.trans,q=C.mutatedParts||(C.mutatedParts={}),G=function(Le){var nt="idb://".concat(r,"/").concat(l,"/").concat(Le);return q[nt]||(q[nt]=new Ht)},Q=G(""),W=G(":dels"),le=C.type,pe=C.type==="deleteRange"?[C.range]:C.type==="delete"?[C.keys]:C.values.length<50?[Xo(g,C).filter(function(Le){return Le}),C.values]:[],fe=pe[0],De=pe[1],Qe=C.trans._cache;if(p(fe)){Q.addKeys(fe);var me=le==="delete"||fe.length===De.length?Al(fe,Qe):null;me||W.addKeys(fe),(me||De)&&Df(G,h,me,De)}else if(fe){var qe={from:(O=fe.lower)!==null&&O!==void 0?O:n.MIN_KEY,to:(N=fe.upper)!==null&&N!==void 0?N:n.MAX_KEY};W.add(qe),Q.add(qe)}else Q.add(o),W.add(o),h.indexes.forEach(function(Le){return G(Le.name).add(o)});return c.mutate(C).then(function(Le){return fe&&(C.type==="add"||C.type==="put")&&(Q.addKeys(Le.results),P&&P.forEach(function(nt){for(var Ae=C.values.map(function(en){return nt.extractKey(en)}),Tt=nt.keyPath.findIndex(function(en){return en===g.keyPath}),Ut=0,In=Le.results.length;Ut<In;++Ut)Ae[Ut][Tt]=Le.results[Ut];G(nt.name).addKeys(Ae)})),z.mutatedParts=ga(z.mutatedParts||{},q),Le})}}),j=function(C){var O,N,z=C.query,q=z.index,G=z.range;return[q,new Ht((O=G.lower)!==null&&O!==void 0?O:n.MIN_KEY,(N=G.upper)!==null&&N!==void 0?N:n.MAX_KEY)]},ne={get:function(C){return[g,new Ht(C.key)]},getMany:function(C){return[g,new Ht().addKeys(C.keys)]},count:j,query:j,openCursor:j};return v(ne).forEach(function(C){S[C]=function(O){var N=Ee.subscr,z=!!N,q=Il(Ee,c)&&Dl(C,O),G=q?O.obsSet={}:N;if(z){var Q=function(me){var qe="idb://".concat(r,"/").concat(l,"/").concat(me);return G[qe]||(G[qe]=new Ht)},W=Q(""),le=Q(":dels"),pe=ne[C](O),fe=pe[0],De=pe[1];if(C==="query"&&fe.isPrimaryKey&&!O.values?le.add(De):Q(fe.name||"").add(De),!fe.isPrimaryKey)if(C==="count")le.add(o);else{var Qe=C==="query"&&k&&O.values&&c.query(s(s({},O),{values:!1}));return c[C].apply(this,arguments).then(function(me){if(C==="query"){if(k&&O.values)return Qe.then(function(Ae){var Tt=Ae.result;return W.addKeys(Tt),me});var qe=O.values?me.result.map(b):me.result;O.values?W.addKeys(qe):le.addKeys(qe)}else if(C==="openCursor"){var Le=me,nt=O.values;return Le&&Object.create(Le,{key:{get:function(){return le.addKey(Le.primaryKey),Le.key}},primaryKey:{get:function(){var Ae=Le.primaryKey;return le.addKey(Ae),Ae}},value:{get:function(){return nt&&W.addKey(Le.primaryKey),Le.value}}})}return me})}}return c[C].apply(this,arguments)}}),S}})}};function Df(n,r,o,l){function c(h){var g=n(h.name||"");function y(k){return k!=null?h.extractKey(k):null}var b=function(k){return h.multiEntry&&p(k)?k.forEach(function(P){return g.addKey(P)}):g.addKey(k)};(o||l).forEach(function(k,P){var S=o&&y(o[P]),j=l&&y(l[P]);et(S,j)!==0&&(S!=null&&b(S),j!=null&&b(j))})}r.indexes.forEach(c)}function Cl(n,r,o){if(o.numFailures===0)return r;if(r.type==="deleteRange")return null;var l=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;if(o.numFailures===l)return null;var c=s({},r);return p(c.keys)&&(c.keys=c.keys.filter(function(h,g){return!(g in o.failures)})),"values"in c&&p(c.values)&&(c.values=c.values.filter(function(h,g){return!(g in o.failures)})),c}function Cf(n,r){return r.lower===void 0?!0:r.lowerOpen?et(n,r.lower)>0:et(n,r.lower)>=0}function Lf(n,r){return r.upper===void 0?!0:r.upperOpen?et(n,r.upper)<0:et(n,r.upper)<=0}function Qo(n,r){return Cf(n,r)&&Lf(n,r)}function Ll(n,r,o,l,c,h){if(!o||o.length===0)return n;var g=r.query.index,y=g.multiEntry,b=r.query.range,k=l.schema.primaryKey,P=k.extractKey,S=g.extractKey,j=(g.lowLevelIndex||g).extractKey,ne=o.reduce(function(C,O){var N=C,z=[];if(O.type==="add"||O.type==="put")for(var q=new Ht,G=O.values.length-1;G>=0;--G){var Q=O.values[G],W=P(Q);if(!q.hasKey(W)){var le=S(Q);(y&&p(le)?le.some(function(me){return Qo(me,b)}):Qo(le,b))&&(q.addKey(W),z.push(Q))}}switch(O.type){case"add":{var pe=new Ht().addKeys(r.values?C.map(function(me){return P(me)}):C);N=C.concat(r.values?z.filter(function(me){var qe=P(me);return pe.hasKey(qe)?!1:(pe.addKey(qe),!0)}):z.map(function(me){return P(me)}).filter(function(me){return pe.hasKey(me)?!1:(pe.addKey(me),!0)}));break}case"put":{var fe=new Ht().addKeys(O.values.map(function(me){return P(me)}));N=C.filter(function(me){return!fe.hasKey(r.values?P(me):me)}).concat(r.values?z:z.map(function(me){return P(me)}));break}case"delete":var De=new Ht().addKeys(O.keys);N=C.filter(function(me){return!De.hasKey(r.values?P(me):me)});break;case"deleteRange":var Qe=O.range;N=C.filter(function(me){return!Qo(P(me),Qe)});break}return N},n);return ne===n?n:(ne.sort(function(C,O){return et(j(C),j(O))||et(P(C),P(O))}),r.limit&&r.limit<1/0&&(ne.length>r.limit?ne.length=r.limit:n.length===r.limit&&ne.length<r.limit&&(c.dirty=!0)),h?Object.freeze(ne):ne)}function Pl(n,r){return et(n.lower,r.lower)===0&&et(n.upper,r.upper)===0&&!!n.lowerOpen==!!r.lowerOpen&&!!n.upperOpen==!!r.upperOpen}function Pf(n,r,o,l){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;var c=et(n,r);if(c===0){if(o&&l)return 0;if(o)return 1;if(l)return-1}return c}function Of(n,r,o,l){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;var c=et(n,r);if(c===0){if(o&&l)return 0;if(o)return-1;if(l)return 1}return c}function Mf(n,r){return Pf(n.lower,r.lower,n.lowerOpen,r.lowerOpen)<=0&&Of(n.upper,r.upper,n.upperOpen,r.upperOpen)>=0}function Rf(n,r,o,l){var c=Sr["idb://".concat(n,"/").concat(r)];if(!c)return[];var h=c.queries[o];if(!h)return[null,!1,c,null];var g=l.query?l.query.index.name:null,y=h[g||""];if(!y)return[null,!1,c,null];switch(o){case"query":var b=y.find(function(S){return S.req.limit===l.limit&&S.req.values===l.values&&Pl(S.req.query.range,l.query.range)});if(b)return[b,!0,c,y];var k=y.find(function(S){var j="limit"in S.req?S.req.limit:1/0;return j>=l.limit&&(l.values?S.req.values:!0)&&Mf(S.req.query.range,l.query.range)});return[k,!1,c,y];case"count":var P=y.find(function(S){return Pl(S.req.query.range,l.query.range)});return[P,!!P,c,y]}}function Kf(n,r,o,l){n.subscribers.add(o),l.addEventListener("abort",function(){n.subscribers.delete(o),n.subscribers.size===0&&Nf(n,r)})}function Nf(n,r){setTimeout(function(){n.subscribers.size===0&&$(r,n)},3e3)}var Bf={stack:"dbcore",level:0,name:"Cache",create:function(n){var r=n.schema.name,o=s(s({},n),{transaction:function(l,c,h){var g=n.transaction(l,c,h);if(c==="readwrite"){var y=new AbortController,b=y.signal,k=function(P){return function(){if(y.abort(),c==="readwrite"){for(var S=new Set,j=0,ne=l;j<ne.length;j++){var C=ne[j],O=Sr["idb://".concat(r,"/").concat(C)];if(O){var N=n.table(C),z=O.optimisticOps.filter(function(nt){return nt.trans===g});if(g._explicit&&P&&g.mutatedParts)for(var q=0,G=Object.values(O.queries.query);q<G.length;q++)for(var Q=G[q],W=0,le=Q.slice();W<le.length;W++){var pe=le[W];zo(pe.obsSet,g.mutatedParts)&&($(Q,pe),pe.subscribers.forEach(function(nt){return S.add(nt)}))}else if(z.length>0){O.optimisticOps=O.optimisticOps.filter(function(nt){return nt.trans!==g});for(var fe=0,De=Object.values(O.queries.query);fe<De.length;fe++)for(var Q=De[fe],Qe=0,me=Q.slice();Qe<me.length;Qe++){var pe=me[Qe];if(pe.res!=null&&g.mutatedParts)if(P&&!pe.dirty){var qe=Object.isFrozen(pe.res),Le=Ll(pe.res,pe.req,z,N,pe,qe);pe.dirty?($(Q,pe),pe.subscribers.forEach(function(Tt){return S.add(Tt)})):Le!==pe.res&&(pe.res=Le,pe.promise=de.resolve({result:Le}))}else pe.dirty&&$(Q,pe),pe.subscribers.forEach(function(Tt){return S.add(Tt)})}}}}S.forEach(function(nt){return nt()})}}};g.addEventListener("abort",k(!1),{signal:b}),g.addEventListener("error",k(!1),{signal:b}),g.addEventListener("complete",k(!0),{signal:b})}return g},table:function(l){var c=n.table(l),h=c.schema.primaryKey,g=s(s({},c),{mutate:function(y){var b=Ee.trans;if(h.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return c.mutate(y);var k=Sr["idb://".concat(r,"/").concat(l)];if(!k)return c.mutate(y);var P=c.mutate(y);return(y.type==="add"||y.type==="put")&&(y.values.length>=50||Xo(h,y).some(function(S){return S==null}))?P.then(function(S){var j=s(s({},y),{values:y.values.map(function(C,O){var N;if(S.failures[O])return C;var z=!((N=h.keyPath)===null||N===void 0)&&N.includes(".")?Ce(C):s({},C);return re(z,h.keyPath,S.results[O]),z})}),ne=Cl(k,j,S);k.optimisticOps.push(ne),queueMicrotask(function(){return y.mutatedParts&&ya(y.mutatedParts)})}):(k.optimisticOps.push(y),y.mutatedParts&&ya(y.mutatedParts),P.then(function(S){if(S.numFailures>0){$(k.optimisticOps,y);var j=Cl(k,y,S);j&&k.optimisticOps.push(j),y.mutatedParts&&ya(y.mutatedParts)}}),P.catch(function(){$(k.optimisticOps,y),y.mutatedParts&&ya(y.mutatedParts)})),P},query:function(y){var b;if(!Il(Ee,c)||!Dl("query",y))return c.query(y);var k=((b=Ee.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",P=Ee,S=P.requery,j=P.signal,ne=Rf(r,l,"query",y),C=ne[0],O=ne[1],N=ne[2],z=ne[3];if(C&&O)C.obsSet=y.obsSet;else{var q=c.query(y).then(function(G){var Q=G.result;if(C&&(C.res=Q),k){for(var W=0,le=Q.length;W<le;++W)Object.freeze(Q[W]);Object.freeze(Q)}else G.result=Ce(Q);return G}).catch(function(G){return z&&C&&$(z,C),Promise.reject(G)});C={obsSet:y.obsSet,promise:q,subscribers:new Set,type:"query",req:y,dirty:!1},z?z.push(C):(z=[C],N||(N=Sr["idb://".concat(r,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),N.queries.query[y.query.index.name||""]=z)}return Kf(C,z,S,j),C.promise.then(function(G){return{result:Ll(G.result,y,N?.optimisticOps,c,C,k)}})}});return g}});return o}};function _a(n,r){return new Proxy(n,{get:function(o,l,c){return l==="db"?r:Reflect.get(o,l,c)}})}var Un=(function(){function n(r,o){var l=this;this._middlewares={},this.verno=0;var c=n.dependencies;this._options=o=s({addons:n.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange};var h=o.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ve,dbReadyPromise:null,cancelOpen:Ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};g.dbReadyPromise=new de(function(b){g.dbReadyResolve=b}),g.openCanceller=new de(function(b,k){g.cancelOpen=k}),this._state=g,this.name=r,this.on=bi(this,"populate","blocked","versionchange","close",{ready:[_e,Ve]}),this.once=function(b,k){var P=function(){for(var S=[],j=0;j<arguments.length;j++)S[j]=arguments[j];l.on(b).unsubscribe(P),k.apply(l,S)};return l.on(b,P)},this.on.ready.subscribe=U(this.on.ready.subscribe,function(b){return function(k,P){n.vip(function(){var S=l._state;if(S.openComplete)S.dbOpenError||de.resolve().then(k),P&&b(k);else if(S.onReadyBeingFired)S.onReadyBeingFired.push(k),P&&b(k);else{b(k);var j=l;P||b(function ne(){j.on.ready.unsubscribe(k),j.on.ready.unsubscribe(ne)})}})}}),this.Collection=Yc(this),this.Table=Uc(this),this.Transaction=$c(this),this.Version=mf(this),this.WhereClause=Zc(this),this.on("versionchange",function(b){b.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=Ei(o.IDBKeyRange),this._createTransaction=function(b,k,P,S){return new l.Transaction(b,k,P,l._options.chromeTransactionDurability,S)},this._fireOnBlocked=function(b){l.on("blocked").fire(b),Wr.filter(function(k){return k.name===l.name&&k!==l&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(b)})},this.use(Af),this.use(Bf),this.use(If),this.use(kf),this.use(Tf);var y=new Proxy(this,{get:function(b,k,P){if(k==="_vip")return!0;if(k==="table")return function(j){return _a(l.table(j),y)};var S=Reflect.get(b,k,P);return S instanceof dl?_a(S,y):k==="tables"?S.map(function(j){return _a(j,y)}):k==="_createTransaction"?function(){var j=S.apply(this,arguments);return _a(j,y)}:S}});this.vip=y,h.forEach(function(b){return b(l)})}return n.prototype.version=function(r){if(isNaN(r)||r<.1)throw new ge.Type("Given version is not a positive number");if(r=Math.round(r*10)/10,this.idbdb||this._state.isBeingOpened)throw new ge.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var o=this._versions,l=o.filter(function(c){return c._cfg.version===r})[0];return l||(l=new this.Version(r),o.push(l),o.sort(sf),l.stores({}),this._state.autoSchema=!1,l)},n.prototype._whenReady=function(r){var o=this;return this.idbdb&&(this._state.openComplete||Ee.letThrough||this._vip)?r():new de(function(l,c){if(o._state.openComplete)return c(new ge.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen){c(new ge.DatabaseClosed);return}o.open().catch(Ve)}o._state.dbReadyPromise.then(l,c)}).then(r)},n.prototype.use=function(r){var o=r.stack,l=r.create,c=r.level,h=r.name;h&&this.unuse({stack:o,name:h});var g=this._middlewares[o]||(this._middlewares[o]=[]);return g.push({stack:o,create:l,level:c??10,name:h}),g.sort(function(y,b){return y.level-b.level}),this},n.prototype.unuse=function(r){var o=r.stack,l=r.name,c=r.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(h){return c?h.create!==c:l?h.name!==l:!1})),this},n.prototype.open=function(){var r=this;return Er(er,function(){return wf(r)})},n.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,o=Wr.indexOf(this);if(o>=0&&Wr.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new de(function(l){r.dbReadyResolve=l}),r.openCanceller=new de(function(l,c){r.cancelOpen=c}))},n.prototype.close=function(r){var o=r===void 0?{disableAutoOpen:!0}:r,l=o.disableAutoOpen,c=this._state;l?(c.isBeingOpened&&c.cancelOpen(new ge.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new ge.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},n.prototype.delete=function(r){var o=this;r===void 0&&(r={disableAutoOpen:!0});var l=arguments.length>0&&typeof arguments[0]!="object",c=this._state;return new de(function(h,g){var y=function(){o.close(r);var b=o._deps.indexedDB.deleteDatabase(o.name);b.onsuccess=bt(function(){bf(o._deps,o.name),h()}),b.onerror=An(g),b.onblocked=o._fireOnBlocked};if(l)throw new ge.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(y):y()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var r=this;return v(this._allTables).map(function(o){return r._allTables[o]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var r=xf.apply(this,arguments);return this._transaction.apply(this,r)},n.prototype._transaction=function(r,o,l){var c=this,h=Ee.trans;(!h||h.db!==this||r.indexOf("!")!==-1)&&(h=null);var g=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");var y,b;try{if(b=o.map(function(P){var S=P instanceof c.Table?P.name:P;if(typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),r=="r"||r===Ao)y=Ao;else if(r=="rw"||r==Io)y=Io;else throw new ge.InvalidArgument("Invalid transaction mode: "+r);if(h){if(h.mode===Ao&&y===Io)if(g)h=null;else throw new ge.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h&&b.forEach(function(P){if(h&&h.storeNames.indexOf(P)===-1)if(g)h=null;else throw new ge.SubTransaction("Table "+P+" not included in parent transaction.")}),g&&h&&!h.active&&(h=null)}}catch(P){return h?h._promise(null,function(S,j){j(P)}):At(P)}var k=Sl.bind(null,this,y,b,h,l);return h?h._promise(y,k,"lock"):Ee.trans?Er(Ee.transless,function(){return c._whenReady(k)}):this._whenReady(k)},n.prototype.table=function(r){if(!w(this._allTables,r))throw new ge.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},n})(),Ff=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jf=(function(){function n(r){this._subscribe=r}return n.prototype.subscribe=function(r,o,l){return this._subscribe(!r||typeof r=="function"?{next:r,error:o,complete:l}:r)},n.prototype[Ff]=function(){return this},n})(),wa;try{wa={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{wa={indexedDB:null,IDBKeyRange:null}}function Ol(n){var r=!1,o,l=new jf(function(c){var h=Pe(n);function g(z){var q=zr();try{h&&Yr();var G=tr(n,z);return h&&(G=G.finally(nr)),G}finally{q&&Vr()}}var y=!1,b,k={},P={},S={get closed(){return y},unsubscribe:function(){y||(y=!0,b&&b.abort(),j&&ar.storagemutated.unsubscribe(O))}};c.start&&c.start(S);var j=!1,ne=function(){return ko(N)};function C(){return zo(P,k)}var O=function(z){ga(k,z),C()&&ne()},N=function(){if(!(y||!wa.indexedDB)){k={};var z={};b&&b.abort(),b=new AbortController;var q={subscr:z,signal:b.signal,requery:ne,querier:n,trans:null},G=g(q);Promise.resolve(G).then(function(Q){r=!0,o=Q,!(y||q.signal.aborted)&&(k={},P=z,!ce(P)&&!j&&(ar(xi,O),j=!0),ko(function(){return!y&&c.next&&c.next(Q)}))},function(Q){r=!1,["DatabaseClosedError","AbortError"].includes(Q?.name)||y||ko(function(){y||c.error&&c.error(Q)})})}};return setTimeout(ne,0),S});return l.hasValue=function(){return r},l.getValue=function(){return o},l}var Ar=Un;E(Ar,s(s({},Xt),{delete:function(n){var r=new Ar(n,{addons:[]});return r.delete()},exists:function(n){return new Ar(n,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return gf(Ar.dependencies).then(n)}catch{return At(new ge.MissingAPI)}},defineClass:function(){function n(r){m(this,r)}return n},ignoreTransaction:function(n){return Ee.trans?Er(Ee.transless,n):n()},vip:jo,async:function(n){return function(){try{var r=qo(n.apply(this,arguments));return!r||typeof r.then!="function"?de.resolve(r):r}catch(o){return At(o)}}},spawn:function(n,r,o){try{var l=qo(n.apply(o,r||[]));return!l||typeof l.then!="function"?de.resolve(l):l}catch(c){return At(c)}},currentTransaction:{get:function(){return Ee.trans||null}},waitFor:function(n,r){var o=de.resolve(typeof n=="function"?Ar.ignoreTransaction(n):n).timeout(r||6e4);return Ee.trans?Ee.trans.waitFor(o):o},Promise:de,debug:{get:function(){return we},set:function(n){je(n)}},derive:A,extend:m,props:E,override:U,Events:bi,on:ar,liveQuery:Ol,extendObservabilitySet:ga,getByKeyPath:Z,setByKeyPath:re,delByKeyPath:X,shallowClone:Te,deepClone:Ce,getObjectDiff:Go,cmp:et,asap:Y,minKey:So,addons:[],connections:Wr,errnames:yt,dependencies:wa,cache:Sr,semVer:al,version:al.split(".").map(function(n){return parseInt(n)}).reduce(function(n,r,o){return n+r/Math.pow(10,o*2)})})),Ar.maxKey=Ei(Ar.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ar(xi,function(n){if(!or){var r;r=new CustomEvent(Lo,{detail:n}),or=!0,dispatchEvent(r),or=!1}}),addEventListener(Lo,function(n){var r=n.detail;or||Zo(r)}));function Zo(n){var r=or;try{or=!0,ar.storagemutated.fire(n),Wo(n,!0)}finally{or=r}}var or=!1,sr,Jo=function(){};typeof BroadcastChannel<"u"&&(Jo=function(){sr=new BroadcastChannel(Lo),sr.onmessage=function(n){return n.data&&Zo(n.data)}},Jo(),typeof sr.unref=="function"&&sr.unref(),ar(xi,function(n){or||sr.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Un.disableBfCache&&n.persisted){we&&console.debug("Dexie: handling persisted pagehide"),sr?.close();for(var r=0,o=Wr;r<o.length;r++){var l=o[r];l.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(n){!Un.disableBfCache&&n.persisted&&(we&&console.debug("Dexie: handling persisted pageshow"),Jo(),Zo({all:new Ht(-1/0,[[]])}))}));function Hf(n){return new yi({add:n})}function Uf(n){return new yi({remove:n})}function zf(n,r){return new yi({replacePrefix:[n,r]})}de.rejectionMapper=Gt,je(we);var Vf=Object.freeze({__proto__:null,Dexie:Un,liveQuery:Ol,Entity:ll,cmp:et,PropModification:yi,replacePrefix:zf,add:Hf,remove:Uf,default:Un,RangeSet:Ht,mergeRanges:Si,rangesOverlap:xl});return s(Un,Vf,{default:Un}),Un}))})(Pa)),Pa.exports}var Yh=Vh();const Ss=Uh(Yh),Jl=Symbol.for("Dexie"),Za=globalThis[Jl]||(globalThis[Jl]=Ss);if(Ss.semVer!==Za.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ss.semVer} and ${Za.semVer}`);const{liveQuery:Ja,mergeRanges:cm,rangesOverlap:fm,RangeSet:dm,cmp:hm,Entity:vm,PropModification:pm,replacePrefix:mm,add:gm,remove:ym,DexieYProvider:bm}=Za;function $l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function Nn(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?$l(Object(i),!0).forEach(function(a){Wh(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$l(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Oa(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oa=function(e){return typeof e}:Oa=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(t)}function Wh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Xn(){return Xn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Xn.apply(this,arguments)}function qh(t,e){if(t==null)return{};var i={},a=Object.keys(t),s,u;for(u=0;u<a.length;u++)s=a[u],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function Gh(t,e){if(t==null)return{};var i=qh(t,e),a,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(s=0;s<u.length;s++)a=u[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var Xh="1.15.6";function qn(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var $n=qn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xi=qn(/Edge/i),eu=qn(/firefox/i),Ni=qn(/safari/i)&&!qn(/chrome/i)&&!qn(/android/i),Qs=qn(/iP(ad|od|hone)/i),lc=qn(/chrome/i)&&qn(/android/i),uc={capture:!1,passive:!1};function tt(t,e,i){t.addEventListener(e,i,!$n&&uc)}function Je(t,e,i){t.removeEventListener(e,i,!$n&&uc)}function $a(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function cc(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function En(t,e,i,a){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&$a(t,e):$a(t,e))||a&&t===i)return t;if(t===i)break}while(t=cc(t))}return null}var tu=/\s+/g;function ln(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(tu," ").replace(" "+e+" "," ");t.className=(a+(i?" "+e:"")).replace(tu," ")}}function Me(t,e,i){var a=t&&t.style;if(a){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=i+(typeof i=="string"?"":"px")}}function ri(t,e){var i="";if(typeof t=="string")i=t;else do{var a=Me(t,"transform");a&&a!=="none"&&(i=a+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function fc(t,e,i){if(t){var a=t.getElementsByTagName(e),s=0,u=a.length;if(i)for(;s<u;s++)i(a[s],s);return a}return[]}function Kn(){var t=document.scrollingElement;return t||document.documentElement}function Lt(t,e,i,a,s){if(!(!t.getBoundingClientRect&&t!==window)){var u,d,v,p,m,x,_;if(t!==window&&t.parentNode&&t!==Kn()?(u=t.getBoundingClientRect(),d=u.top,v=u.left,p=u.bottom,m=u.right,x=u.height,_=u.width):(d=0,v=0,p=window.innerHeight,m=window.innerWidth,x=window.innerHeight,_=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!$n))do if(s&&s.getBoundingClientRect&&(Me(s,"transform")!=="none"||i&&Me(s,"position")!=="static")){var w=s.getBoundingClientRect();d-=w.top+parseInt(Me(s,"border-top-width")),v-=w.left+parseInt(Me(s,"border-left-width")),p=d+u.height,m=v+u.width;break}while(s=s.parentNode);if(a&&t!==window){var E=ri(s||t),L=E&&E.a,D=E&&E.d;E&&(d/=D,v/=L,_/=L,x/=D,p=d+x,m=v+_)}return{top:d,left:v,bottom:p,right:m,width:_,height:x}}}function nu(t,e,i){for(var a=fr(t,!0),s=Lt(t)[e];a;){var u=Lt(a)[i],d=void 0;if(d=s>=u,!d)return a;if(a===Kn())break;a=fr(a,!1)}return!1}function di(t,e,i,a){for(var s=0,u=0,d=t.children;u<d.length;){if(d[u].style.display!=="none"&&d[u]!==Ie.ghost&&(a||d[u]!==Ie.dragged)&&En(d[u],i.draggable,t,!1)){if(s===e)return d[u];s++}u++}return null}function Zs(t,e){for(var i=t.lastElementChild;i&&(i===Ie.ghost||Me(i,"display")==="none"||e&&!$a(i,e));)i=i.previousElementSibling;return i||null}function pn(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ie.clone&&(!e||$a(t,e))&&i++;return i}function ru(t){var e=0,i=0,a=Kn();if(t)do{var s=ri(t),u=s.a,d=s.d;e+=t.scrollLeft*u,i+=t.scrollTop*d}while(t!==a&&(t=t.parentNode));return[e,i]}function Qh(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[i][a])return Number(i)}return-1}function fr(t,e){if(!t||!t.getBoundingClientRect)return Kn();var i=t,a=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Me(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Kn();if(a||e)return i;a=!0}}while(i=i.parentNode);return Kn()}function Zh(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function os(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Bi;function dc(t,e){return function(){if(!Bi){var i=arguments,a=this;i.length===1?t.call(a,i[0]):t.apply(a,i),Bi=setTimeout(function(){Bi=void 0},e)}}}function Jh(){clearTimeout(Bi),Bi=void 0}function hc(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function vc(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function pc(t,e,i){var a={};return Array.from(t.children).forEach(function(s){var u,d,v,p;if(!(!En(s,e.draggable,t,!1)||s.animated||s===i)){var m=Lt(s);a.left=Math.min((u=a.left)!==null&&u!==void 0?u:1/0,m.left),a.top=Math.min((d=a.top)!==null&&d!==void 0?d:1/0,m.top),a.right=Math.max((v=a.right)!==null&&v!==void 0?v:-1/0,m.right),a.bottom=Math.max((p=a.bottom)!==null&&p!==void 0?p:-1/0,m.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var rn="Sortable"+new Date().getTime();function $h(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(s){if(!(Me(s,"display")==="none"||s===Ie.ghost)){t.push({target:s,rect:Lt(s)});var u=Nn({},t[t.length-1].rect);if(s.thisAnimationDuration){var d=ri(s,!0);d&&(u.top-=d.f,u.left-=d.e)}s.fromRect=u}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(Qh(t,{target:a}),1)},animateAll:function(a){var s=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var u=!1,d=0;t.forEach(function(v){var p=0,m=v.target,x=m.fromRect,_=Lt(m),w=m.prevFromRect,E=m.prevToRect,L=v.rect,D=ri(m,!0);D&&(_.top-=D.f,_.left-=D.e),m.toRect=_,m.thisAnimationDuration&&os(w,_)&&!os(x,_)&&(L.top-_.top)/(L.left-_.left)===(x.top-_.top)/(x.left-_.left)&&(p=tv(L,w,E,s.options)),os(_,x)||(m.prevFromRect=x,m.prevToRect=_,p||(p=s.options.animation),s.animate(m,L,_,p)),p&&(u=!0,d=Math.max(d,p),clearTimeout(m.animationResetTimer),m.animationResetTimer=setTimeout(function(){m.animationTime=0,m.prevFromRect=null,m.fromRect=null,m.prevToRect=null,m.thisAnimationDuration=null},p),m.thisAnimationDuration=p)}),clearTimeout(e),u?e=setTimeout(function(){typeof a=="function"&&a()},d):typeof a=="function"&&a(),t=[]},animate:function(a,s,u,d){if(d){Me(a,"transition",""),Me(a,"transform","");var v=ri(this.el),p=v&&v.a,m=v&&v.d,x=(s.left-u.left)/(p||1),_=(s.top-u.top)/(m||1);a.animatingX=!!x,a.animatingY=!!_,Me(a,"transform","translate3d("+x+"px,"+_+"px,0)"),this.forRepaintDummy=ev(a),Me(a,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),Me(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){Me(a,"transition",""),Me(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},d)}}}}function ev(t){return t.offsetWidth}function tv(t,e,i,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*a.animation}var Qr=[],ss={initializeByDefault:!0},Qi={mount:function(e){for(var i in ss)ss.hasOwnProperty(i)&&!(i in e)&&(e[i]=ss[i]);Qr.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Qr.push(e)},pluginEvent:function(e,i,a){var s=this;this.eventCanceled=!1,a.cancel=function(){s.eventCanceled=!0};var u=e+"Global";Qr.forEach(function(d){i[d.pluginName]&&(i[d.pluginName][u]&&i[d.pluginName][u](Nn({sortable:i},a)),i.options[d.pluginName]&&i[d.pluginName][e]&&i[d.pluginName][e](Nn({sortable:i},a)))})},initializePlugins:function(e,i,a,s){Qr.forEach(function(v){var p=v.pluginName;if(!(!e.options[p]&&!v.initializeByDefault)){var m=new v(e,i,e.options);m.sortable=e,m.options=e.options,e[p]=m,Xn(a,m.defaults)}});for(var u in e.options)if(e.options.hasOwnProperty(u)){var d=this.modifyOption(e,u,e.options[u]);typeof d<"u"&&(e.options[u]=d)}},getEventProperties:function(e,i){var a={};return Qr.forEach(function(s){typeof s.eventProperties=="function"&&Xn(a,s.eventProperties.call(i[s.pluginName],e))}),a},modifyOption:function(e,i,a){var s;return Qr.forEach(function(u){e[u.pluginName]&&u.optionListeners&&typeof u.optionListeners[i]=="function"&&(s=u.optionListeners[i].call(e[u.pluginName],a))}),s}};function nv(t){var e=t.sortable,i=t.rootEl,a=t.name,s=t.targetEl,u=t.cloneEl,d=t.toEl,v=t.fromEl,p=t.oldIndex,m=t.newIndex,x=t.oldDraggableIndex,_=t.newDraggableIndex,w=t.originalEvent,E=t.putSortable,L=t.extraEventProperties;if(e=e||i&&i[rn],!!e){var D,A=e.options,T="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!$n&&!Xi?D=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(D=document.createEvent("Event"),D.initEvent(a,!0,!0)),D.to=d||i,D.from=v||i,D.item=s||i,D.clone=u,D.oldIndex=p,D.newIndex=m,D.oldDraggableIndex=x,D.newDraggableIndex=_,D.originalEvent=w,D.pullMode=E?E.lastPutMode:void 0;var K=Nn(Nn({},L),Qi.getEventProperties(a,e));for(var B in K)D[B]=K[B];i&&i.dispatchEvent(D),A[T]&&A[T].call(e,D)}}var rv=["evt"],tn=function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.evt,u=Gh(a,rv);Qi.pluginEvent.bind(Ie)(e,i,Nn({dragEl:ae,parentEl:St,ghostEl:He,rootEl:_t,nextEl:Lr,lastDownEl:Ma,cloneEl:Et,cloneHidden:cr,dragStarted:Li,putSortable:Nt,activeSortable:Ie.active,originalEvent:s,oldIndex:ei,oldDraggableIndex:Fi,newIndex:cn,newDraggableIndex:ur,hideGhostForTarget:bc,unhideGhostForTarget:_c,cloneNowHidden:function(){cr=!0},cloneNowShown:function(){cr=!1},dispatchSortableEvent:function(v){Qt({sortable:i,name:v,originalEvent:s})}},u))};function Qt(t){nv(Nn({putSortable:Nt,cloneEl:Et,targetEl:ae,rootEl:_t,oldIndex:ei,oldDraggableIndex:Fi,newIndex:cn,newDraggableIndex:ur},t))}var ae,St,He,_t,Lr,Ma,Et,cr,ei,cn,Fi,ur,Ta,Nt,Jr=!1,eo=!1,to=[],Dr,wn,ls,us,iu,au,Li,Zr,ji,Hi=!1,Sa=!1,Ra,zt,cs=[],As=!1,no=[],go=typeof document<"u",Aa=Qs,ou=Xi||$n?"cssFloat":"float",iv=go&&!lc&&!Qs&&"draggable"in document.createElement("div"),mc=(function(){if(go){if($n)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),gc=function(e,i){var a=Me(e),s=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),u=di(e,0,i),d=di(e,1,i),v=u&&Me(u),p=d&&Me(d),m=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Lt(u).width,x=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+Lt(d).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&v.float&&v.float!=="none"){var _=v.float==="left"?"left":"right";return d&&(p.clear==="both"||p.clear===_)?"vertical":"horizontal"}return u&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||m>=s&&a[ou]==="none"||d&&a[ou]==="none"&&m+x>s)?"vertical":"horizontal"},av=function(e,i,a){var s=a?e.left:e.top,u=a?e.right:e.bottom,d=a?e.width:e.height,v=a?i.left:i.top,p=a?i.right:i.bottom,m=a?i.width:i.height;return s===v||u===p||s+d/2===v+m/2},ov=function(e,i){var a;return to.some(function(s){var u=s[rn].options.emptyInsertThreshold;if(!(!u||Zs(s))){var d=Lt(s),v=e>=d.left-u&&e<=d.right+u,p=i>=d.top-u&&i<=d.bottom+u;if(v&&p)return a=s}}),a},yc=function(e){function i(u,d){return function(v,p,m,x){var _=v.options.group.name&&p.options.group.name&&v.options.group.name===p.options.group.name;if(u==null&&(d||_))return!0;if(u==null||u===!1)return!1;if(d&&u==="clone")return u;if(typeof u=="function")return i(u(v,p,m,x),d)(v,p,m,x);var w=(d?v:p).options.group.name;return u===!0||typeof u=="string"&&u===w||u.join&&u.indexOf(w)>-1}}var a={},s=e.group;(!s||Oa(s)!="object")&&(s={name:s}),a.name=s.name,a.checkPull=i(s.pull,!0),a.checkPut=i(s.put),a.revertClone=s.revertClone,e.group=a},bc=function(){!mc&&He&&Me(He,"display","none")},_c=function(){!mc&&He&&Me(He,"display","")};go&&!lc&&document.addEventListener("click",function(t){if(eo)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),eo=!1,!1},!0);var Cr=function(e){if(ae){e=e.touches?e.touches[0]:e;var i=ov(e.clientX,e.clientY);if(i){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);a.target=a.rootEl=i,a.preventDefault=void 0,a.stopPropagation=void 0,i[rn]._onDragOver(a)}}},sv=function(e){ae&&ae.parentNode[rn]._isOutsideThisEl(e.target)};function Ie(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Xn({},e),t[rn]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return gc(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,v){d.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ie.supportPointer!==!1&&"PointerEvent"in window&&(!Ni||Qs),emptyInsertThreshold:5};Qi.initializePlugins(this,t,i);for(var a in i)!(a in e)&&(e[a]=i[a]);yc(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:iv,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?tt(t,"pointerdown",this._onTapStart):(tt(t,"mousedown",this._onTapStart),tt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(tt(t,"dragover",this),tt(t,"dragenter",this)),to.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xn(this,$h())}Ie.prototype={constructor:Ie,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Zr=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,ae):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,a=this.el,s=this.options,u=s.preventOnFilter,d=e.type,v=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,p=(v||e).target,m=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||p,x=s.filter;if(pv(a),!ae&&!(/mousedown|pointerdown/.test(d)&&e.button!==0||s.disabled)&&!m.isContentEditable&&!(!this.nativeDraggable&&Ni&&p&&p.tagName.toUpperCase()==="SELECT")&&(p=En(p,s.draggable,a,!1),!(p&&p.animated)&&Ma!==p)){if(ei=pn(p),Fi=pn(p,s.draggable),typeof x=="function"){if(x.call(this,e,p,this)){Qt({sortable:i,rootEl:m,name:"filter",targetEl:p,toEl:a,fromEl:a}),tn("filter",i,{evt:e}),u&&e.preventDefault();return}}else if(x&&(x=x.split(",").some(function(_){if(_=En(m,_.trim(),a,!1),_)return Qt({sortable:i,rootEl:_,name:"filter",targetEl:p,fromEl:a,toEl:a}),tn("filter",i,{evt:e}),!0}),x)){u&&e.preventDefault();return}s.handle&&!En(m,s.handle,a,!1)||this._prepareDragStart(e,v,p)}}},_prepareDragStart:function(e,i,a){var s=this,u=s.el,d=s.options,v=u.ownerDocument,p;if(a&&!ae&&a.parentNode===u){var m=Lt(a);if(_t=u,ae=a,St=ae.parentNode,Lr=ae.nextSibling,Ma=a,Ta=d.group,Ie.dragged=ae,Dr={target:ae,clientX:(i||e).clientX,clientY:(i||e).clientY},iu=Dr.clientX-m.left,au=Dr.clientY-m.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,ae.style["will-change"]="all",p=function(){if(tn("delayEnded",s,{evt:e}),Ie.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!eu&&s.nativeDraggable&&(ae.draggable=!0),s._triggerDragStart(e,i),Qt({sortable:s,name:"choose",originalEvent:e}),ln(ae,d.chosenClass,!0)},d.ignore.split(",").forEach(function(x){fc(ae,x.trim(),fs)}),tt(v,"dragover",Cr),tt(v,"mousemove",Cr),tt(v,"touchmove",Cr),d.supportPointer?(tt(v,"pointerup",s._onDrop),!this.nativeDraggable&&tt(v,"pointercancel",s._onDrop)):(tt(v,"mouseup",s._onDrop),tt(v,"touchend",s._onDrop),tt(v,"touchcancel",s._onDrop)),eu&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ae.draggable=!0),tn("delayStart",this,{evt:e}),d.delay&&(!d.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Xi||$n))){if(Ie.eventCanceled){this._onDrop();return}d.supportPointer?(tt(v,"pointerup",s._disableDelayedDrag),tt(v,"pointercancel",s._disableDelayedDrag)):(tt(v,"mouseup",s._disableDelayedDrag),tt(v,"touchend",s._disableDelayedDrag),tt(v,"touchcancel",s._disableDelayedDrag)),tt(v,"mousemove",s._delayedDragTouchMoveHandler),tt(v,"touchmove",s._delayedDragTouchMoveHandler),d.supportPointer&&tt(v,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(p,d.delay)}else p()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ae&&fs(ae),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Je(e,"mouseup",this._disableDelayedDrag),Je(e,"touchend",this._disableDelayedDrag),Je(e,"touchcancel",this._disableDelayedDrag),Je(e,"pointerup",this._disableDelayedDrag),Je(e,"pointercancel",this._disableDelayedDrag),Je(e,"mousemove",this._delayedDragTouchMoveHandler),Je(e,"touchmove",this._delayedDragTouchMoveHandler),Je(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?tt(document,"pointermove",this._onTouchMove):i?tt(document,"touchmove",this._onTouchMove):tt(document,"mousemove",this._onTouchMove):(tt(ae,"dragend",this),tt(_t,"dragstart",this._onDragStart));try{document.selection?Ka(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Jr=!1,_t&&ae){tn("dragStarted",this,{evt:i}),this.nativeDraggable&&tt(document,"dragover",sv);var a=this.options;!e&&ln(ae,a.dragClass,!1),ln(ae,a.ghostClass,!0),Ie.active=this,e&&this._appendGhost(),Qt({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(wn){this._lastX=wn.clientX,this._lastY=wn.clientY,bc();for(var e=document.elementFromPoint(wn.clientX,wn.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(wn.clientX,wn.clientY),e!==i);)i=e;if(ae.parentNode[rn]._isOutsideThisEl(e),i)do{if(i[rn]){var a=void 0;if(a=i[rn]._onDragOver({clientX:wn.clientX,clientY:wn.clientY,target:e,rootEl:i}),a&&!this.options.dragoverBubble)break}e=i}while(i=cc(i));_c()}},_onTouchMove:function(e){if(Dr){var i=this.options,a=i.fallbackTolerance,s=i.fallbackOffset,u=e.touches?e.touches[0]:e,d=He&&ri(He,!0),v=He&&d&&d.a,p=He&&d&&d.d,m=Aa&&zt&&ru(zt),x=(u.clientX-Dr.clientX+s.x)/(v||1)+(m?m[0]-cs[0]:0)/(v||1),_=(u.clientY-Dr.clientY+s.y)/(p||1)+(m?m[1]-cs[1]:0)/(p||1);if(!Ie.active&&!Jr){if(a&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(He){d?(d.e+=x-(ls||0),d.f+=_-(us||0)):d={a:1,b:0,c:0,d:1,e:x,f:_};var w="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");Me(He,"webkitTransform",w),Me(He,"mozTransform",w),Me(He,"msTransform",w),Me(He,"transform",w),ls=x,us=_,wn=u}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!He){var e=this.options.fallbackOnBody?document.body:_t,i=Lt(ae,!0,Aa,!0,e),a=this.options;if(Aa){for(zt=e;Me(zt,"position")==="static"&&Me(zt,"transform")==="none"&&zt!==document;)zt=zt.parentNode;zt!==document.body&&zt!==document.documentElement?(zt===document&&(zt=Kn()),i.top+=zt.scrollTop,i.left+=zt.scrollLeft):zt=Kn(),cs=ru(zt)}He=ae.cloneNode(!0),ln(He,a.ghostClass,!1),ln(He,a.fallbackClass,!0),ln(He,a.dragClass,!0),Me(He,"transition",""),Me(He,"transform",""),Me(He,"box-sizing","border-box"),Me(He,"margin",0),Me(He,"top",i.top),Me(He,"left",i.left),Me(He,"width",i.width),Me(He,"height",i.height),Me(He,"opacity","0.8"),Me(He,"position",Aa?"absolute":"fixed"),Me(He,"zIndex","100000"),Me(He,"pointerEvents","none"),Ie.ghost=He,e.appendChild(He),Me(He,"transform-origin",iu/parseInt(He.style.width)*100+"% "+au/parseInt(He.style.height)*100+"%")}},_onDragStart:function(e,i){var a=this,s=e.dataTransfer,u=a.options;if(tn("dragStart",this,{evt:e}),Ie.eventCanceled){this._onDrop();return}tn("setupClone",this),Ie.eventCanceled||(Et=vc(ae),Et.removeAttribute("id"),Et.draggable=!1,Et.style["will-change"]="",this._hideClone(),ln(Et,this.options.chosenClass,!1),Ie.clone=Et),a.cloneId=Ka(function(){tn("clone",a),!Ie.eventCanceled&&(a.options.removeCloneOnHide||_t.insertBefore(Et,ae),a._hideClone(),Qt({sortable:a,name:"clone"}))}),!i&&ln(ae,u.dragClass,!0),i?(eo=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Je(document,"mouseup",a._onDrop),Je(document,"touchend",a._onDrop),Je(document,"touchcancel",a._onDrop),s&&(s.effectAllowed="move",u.setData&&u.setData.call(a,s,ae)),tt(document,"drop",a),Me(ae,"transform","translateZ(0)")),Jr=!0,a._dragStartId=Ka(a._dragStarted.bind(a,i,e)),tt(document,"selectstart",a),Li=!0,window.getSelection().removeAllRanges(),Ni&&Me(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,a=e.target,s,u,d,v=this.options,p=v.group,m=Ie.active,x=Ta===p,_=v.sort,w=Nt||m,E,L=this,D=!1;if(As)return;function A(ce,Ue){tn(ce,L,Nn({evt:e,isOwner:x,axis:E?"vertical":"horizontal",revert:d,dragRect:s,targetRect:u,canSort:_,fromSortable:w,target:a,completed:K,onMove:function(Ye,Fe){return Ia(_t,i,ae,s,Ye,Lt(Ye),e,Fe)},changed:B},Ue))}function T(){A("dragOverAnimationCapture"),L.captureAnimationState(),L!==w&&w.captureAnimationState()}function K(ce){return A("dragOverCompleted",{insertion:ce}),ce&&(x?m._hideClone():m._showClone(L),L!==w&&(ln(ae,Nt?Nt.options.ghostClass:m.options.ghostClass,!1),ln(ae,v.ghostClass,!0)),Nt!==L&&L!==Ie.active?Nt=L:L===Ie.active&&Nt&&(Nt=null),w===L&&(L._ignoreWhileAnimating=a),L.animateAll(function(){A("dragOverAnimationComplete"),L._ignoreWhileAnimating=null}),L!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(a===ae&&!ae.animated||a===i&&!a.animated)&&(Zr=null),!v.dragoverBubble&&!e.rootEl&&a!==document&&(ae.parentNode[rn]._isOutsideThisEl(e.target),!ce&&Cr(e)),!v.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),D=!0}function B(){cn=pn(ae),ur=pn(ae,v.draggable),Qt({sortable:L,name:"change",toEl:i,newIndex:cn,newDraggableIndex:ur,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=En(a,v.draggable,i,!0),A("dragOver"),Ie.eventCanceled)return D;if(ae.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||L._ignoreWhileAnimating===a)return K(!1);if(eo=!1,m&&!v.disabled&&(x?_||(d=St!==_t):Nt===this||(this.lastPutMode=Ta.checkPull(this,m,ae,e))&&p.checkPut(this,m,ae,e))){if(E=this._getDirection(e,a)==="vertical",s=Lt(ae),A("dragOverValid"),Ie.eventCanceled)return D;if(d)return St=_t,T(),this._hideClone(),A("revert"),Ie.eventCanceled||(Lr?_t.insertBefore(ae,Lr):_t.appendChild(ae)),K(!0);var R=Zs(i,v.draggable);if(!R||fv(e,E,this)&&!R.animated){if(R===ae)return K(!1);if(R&&i===e.target&&(a=R),a&&(u=Lt(a)),Ia(_t,i,ae,s,a,u,e,!!a)!==!1)return T(),R&&R.nextSibling?i.insertBefore(ae,R.nextSibling):i.appendChild(ae),St=i,B(),K(!0)}else if(R&&cv(e,E,this)){var U=di(i,0,v,!0);if(U===ae)return K(!1);if(a=U,u=Lt(a),Ia(_t,i,ae,s,a,u,e,!1)!==!1)return T(),i.insertBefore(ae,U),St=i,B(),K(!0)}else if(a.parentNode===i){u=Lt(a);var ee=0,Y,H=ae.parentNode!==i,Z=!av(ae.animated&&ae.toRect||s,a.animated&&a.toRect||u,E),re=E?"top":"left",X=nu(a,"top","top")||nu(ae,"top","top"),Te=X?X.scrollTop:void 0;Zr!==a&&(Y=u[re],Hi=!1,Sa=!Z&&v.invertSwap||H),ee=dv(e,a,u,E,Z?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,Sa,Zr===a);var ke;if(ee!==0){var Se=pn(ae);do Se-=ee,ke=St.children[Se];while(ke&&(Me(ke,"display")==="none"||ke===He))}if(ee===0||ke===a)return K(!1);Zr=a,ji=ee;var Be=a.nextElementSibling,Ze=!1;Ze=ee===1;var pt=Ia(_t,i,ae,s,a,u,e,Ze);if(pt!==!1)return(pt===1||pt===-1)&&(Ze=pt===1),As=!0,setTimeout(uv,30),T(),Ze&&!Be?i.appendChild(ae):a.parentNode.insertBefore(ae,Ze?Be:a),X&&hc(X,0,Te-X.scrollTop),St=ae.parentNode,Y!==void 0&&!Sa&&(Ra=Math.abs(Y-Lt(a)[re])),B(),K(!0)}if(i.contains(ae))return K(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Je(document,"mousemove",this._onTouchMove),Je(document,"touchmove",this._onTouchMove),Je(document,"pointermove",this._onTouchMove),Je(document,"dragover",Cr),Je(document,"mousemove",Cr),Je(document,"touchmove",Cr)},_offUpEvents:function(){var e=this.el.ownerDocument;Je(e,"mouseup",this._onDrop),Je(e,"touchend",this._onDrop),Je(e,"pointerup",this._onDrop),Je(e,"pointercancel",this._onDrop),Je(e,"touchcancel",this._onDrop),Je(document,"selectstart",this)},_onDrop:function(e){var i=this.el,a=this.options;if(cn=pn(ae),ur=pn(ae,a.draggable),tn("drop",this,{evt:e}),St=ae&&ae.parentNode,cn=pn(ae),ur=pn(ae,a.draggable),Ie.eventCanceled){this._nulling();return}Jr=!1,Sa=!1,Hi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Is(this.cloneId),Is(this._dragStartId),this.nativeDraggable&&(Je(document,"drop",this),Je(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ni&&Me(document.body,"user-select",""),Me(ae,"transform",""),e&&(Li&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),He&&He.parentNode&&He.parentNode.removeChild(He),(_t===St||Nt&&Nt.lastPutMode!=="clone")&&Et&&Et.parentNode&&Et.parentNode.removeChild(Et),ae&&(this.nativeDraggable&&Je(ae,"dragend",this),fs(ae),ae.style["will-change"]="",Li&&!Jr&&ln(ae,Nt?Nt.options.ghostClass:this.options.ghostClass,!1),ln(ae,this.options.chosenClass,!1),Qt({sortable:this,name:"unchoose",toEl:St,newIndex:null,newDraggableIndex:null,originalEvent:e}),_t!==St?(cn>=0&&(Qt({rootEl:St,name:"add",toEl:St,fromEl:_t,originalEvent:e}),Qt({sortable:this,name:"remove",toEl:St,originalEvent:e}),Qt({rootEl:St,name:"sort",toEl:St,fromEl:_t,originalEvent:e}),Qt({sortable:this,name:"sort",toEl:St,originalEvent:e})),Nt&&Nt.save()):cn!==ei&&cn>=0&&(Qt({sortable:this,name:"update",toEl:St,originalEvent:e}),Qt({sortable:this,name:"sort",toEl:St,originalEvent:e})),Ie.active&&((cn==null||cn===-1)&&(cn=ei,ur=Fi),Qt({sortable:this,name:"end",toEl:St,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){tn("nulling",this),_t=ae=St=He=Lr=Et=Ma=cr=Dr=wn=Li=cn=ur=ei=Fi=Zr=ji=Nt=Ta=Ie.dragged=Ie.ghost=Ie.clone=Ie.active=null,no.forEach(function(e){e.checked=!0}),no.length=ls=us=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ae&&(this._onDragOver(e),lv(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,a=this.el.children,s=0,u=a.length,d=this.options;s<u;s++)i=a[s],En(i,d.draggable,this.el,!1)&&e.push(i.getAttribute(d.dataIdAttr)||vv(i));return e},sort:function(e,i){var a={},s=this.el;this.toArray().forEach(function(u,d){var v=s.children[d];En(v,this.options.draggable,s,!1)&&(a[u]=v)},this),i&&this.captureAnimationState(),e.forEach(function(u){a[u]&&(s.removeChild(a[u]),s.appendChild(a[u]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return En(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var a=this.options;if(i===void 0)return a[e];var s=Qi.modifyOption(this,e,i);typeof s<"u"?a[e]=s:a[e]=i,e==="group"&&yc(a)},destroy:function(){tn("destroy",this);var e=this.el;e[rn]=null,Je(e,"mousedown",this._onTapStart),Je(e,"touchstart",this._onTapStart),Je(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Je(e,"dragover",this),Je(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),to.splice(to.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cr){if(tn("hideClone",this),Ie.eventCanceled)return;Me(Et,"display","none"),this.options.removeCloneOnHide&&Et.parentNode&&Et.parentNode.removeChild(Et),cr=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cr){if(tn("showClone",this),Ie.eventCanceled)return;ae.parentNode==_t&&!this.options.group.revertClone?_t.insertBefore(Et,ae):Lr?_t.insertBefore(Et,Lr):_t.appendChild(Et),this.options.group.revertClone&&this.animate(ae,Et),Me(Et,"display",""),cr=!1}}};function lv(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ia(t,e,i,a,s,u,d,v){var p,m=t[rn],x=m.options.onMove,_;return window.CustomEvent&&!$n&&!Xi?p=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent("move",!0,!0)),p.to=e,p.from=t,p.dragged=i,p.draggedRect=a,p.related=s||e,p.relatedRect=u||Lt(e),p.willInsertAfter=v,p.originalEvent=d,t.dispatchEvent(p),x&&(_=x.call(m,p,d)),_}function fs(t){t.draggable=!1}function uv(){As=!1}function cv(t,e,i){var a=Lt(di(i.el,0,i.options,!0)),s=pc(i.el,i.options,He),u=10;return e?t.clientX<s.left-u||t.clientY<a.top&&t.clientX<a.right:t.clientY<s.top-u||t.clientY<a.bottom&&t.clientX<a.left}function fv(t,e,i){var a=Lt(Zs(i.el,i.options.draggable)),s=pc(i.el,i.options,He),u=10;return e?t.clientX>s.right+u||t.clientY>a.bottom&&t.clientX>a.left:t.clientY>s.bottom+u||t.clientX>a.right&&t.clientY>a.top}function dv(t,e,i,a,s,u,d,v){var p=a?t.clientY:t.clientX,m=a?i.height:i.width,x=a?i.top:i.left,_=a?i.bottom:i.right,w=!1;if(!d){if(v&&Ra<m*s){if(!Hi&&(ji===1?p>x+m*u/2:p<_-m*u/2)&&(Hi=!0),Hi)w=!0;else if(ji===1?p<x+Ra:p>_-Ra)return-ji}else if(p>x+m*(1-s)/2&&p<_-m*(1-s)/2)return hv(e)}return w=w||d,w&&(p<x+m*u/2||p>_-m*u/2)?p>x+m/2?1:-1:0}function hv(t){return pn(ae)<pn(t)?1:-1}function vv(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,a=0;i--;)a+=e.charCodeAt(i);return a.toString(36)}function pv(t){no.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var a=e[i];a.checked&&no.push(a)}}function Ka(t){return setTimeout(t,0)}function Is(t){return clearTimeout(t)}go&&tt(document,"touchmove",function(t){(Ie.active||Jr)&&t.cancelable&&t.preventDefault()});Ie.utils={on:tt,off:Je,css:Me,find:fc,is:function(e,i){return!!En(e,i,e,!1)},extend:Zh,throttle:dc,closest:En,toggleClass:ln,clone:vc,index:pn,nextTick:Ka,cancelNextTick:Is,detectDirection:gc,getChild:di,expando:rn};Ie.get=function(t){return t[rn]};Ie.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(Ie.utils=Nn(Nn({},Ie.utils),a.utils)),Qi.mount(a)})};Ie.create=function(t,e){return new Ie(t,e)};Ie.version=Xh;var Ct=[],Pi,Ds,Cs=!1,ds,hs,ro,Oi;function mv(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var a=i.originalEvent;this.sortable.nativeDraggable?tt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?tt(document,"pointermove",this._handleFallbackAutoScroll):a.touches?tt(document,"touchmove",this._handleFallbackAutoScroll):tt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var a=i.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Je(document,"dragover",this._handleAutoScroll):(Je(document,"pointermove",this._handleFallbackAutoScroll),Je(document,"touchmove",this._handleFallbackAutoScroll),Je(document,"mousemove",this._handleFallbackAutoScroll)),su(),Na(),Jh()},nulling:function(){ro=Ds=Pi=Cs=Oi=ds=hs=null,Ct.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,a){var s=this,u=(i.touches?i.touches[0]:i).clientX,d=(i.touches?i.touches[0]:i).clientY,v=document.elementFromPoint(u,d);if(ro=i,a||this.options.forceAutoScrollFallback||Xi||$n||Ni){vs(i,this.options,v,a);var p=fr(v,!0);Cs&&(!Oi||u!==ds||d!==hs)&&(Oi&&su(),Oi=setInterval(function(){var m=fr(document.elementFromPoint(u,d),!0);m!==p&&(p=m,Na()),vs(i,s.options,m,a)},10),ds=u,hs=d)}else{if(!this.options.bubbleScroll||fr(v,!0)===Kn()){Na();return}vs(i,this.options,fr(v,!1),!1)}}},Xn(t,{pluginName:"scroll",initializeByDefault:!0})}function Na(){Ct.forEach(function(t){clearInterval(t.pid)}),Ct=[]}function su(){clearInterval(Oi)}var vs=dc(function(t,e,i,a){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,u=(t.touches?t.touches[0]:t).clientY,d=e.scrollSensitivity,v=e.scrollSpeed,p=Kn(),m=!1,x;Ds!==i&&(Ds=i,Na(),Pi=e.scroll,x=e.scrollFn,Pi===!0&&(Pi=fr(i,!0)));var _=0,w=Pi;do{var E=w,L=Lt(E),D=L.top,A=L.bottom,T=L.left,K=L.right,B=L.width,R=L.height,U=void 0,ee=void 0,Y=E.scrollWidth,H=E.scrollHeight,Z=Me(E),re=E.scrollLeft,X=E.scrollTop;E===p?(U=B<Y&&(Z.overflowX==="auto"||Z.overflowX==="scroll"||Z.overflowX==="visible"),ee=R<H&&(Z.overflowY==="auto"||Z.overflowY==="scroll"||Z.overflowY==="visible")):(U=B<Y&&(Z.overflowX==="auto"||Z.overflowX==="scroll"),ee=R<H&&(Z.overflowY==="auto"||Z.overflowY==="scroll"));var Te=U&&(Math.abs(K-s)<=d&&re+B<Y)-(Math.abs(T-s)<=d&&!!re),ke=ee&&(Math.abs(A-u)<=d&&X+R<H)-(Math.abs(D-u)<=d&&!!X);if(!Ct[_])for(var Se=0;Se<=_;Se++)Ct[Se]||(Ct[Se]={});(Ct[_].vx!=Te||Ct[_].vy!=ke||Ct[_].el!==E)&&(Ct[_].el=E,Ct[_].vx=Te,Ct[_].vy=ke,clearInterval(Ct[_].pid),(Te!=0||ke!=0)&&(m=!0,Ct[_].pid=setInterval((function(){a&&this.layer===0&&Ie.active._onTouchMove(ro);var Be=Ct[this.layer].vy?Ct[this.layer].vy*v:0,Ze=Ct[this.layer].vx?Ct[this.layer].vx*v:0;typeof x=="function"&&x.call(Ie.dragged.parentNode[rn],Ze,Be,t,ro,Ct[this.layer].el)!=="continue"||hc(Ct[this.layer].el,Ze,Be)}).bind({layer:_}),24))),_++}while(e.bubbleScroll&&w!==p&&(w=fr(w,!1)));Cs=m}},30),wc=function(e){var i=e.originalEvent,a=e.putSortable,s=e.dragEl,u=e.activeSortable,d=e.dispatchSortableEvent,v=e.hideGhostForTarget,p=e.unhideGhostForTarget;if(i){var m=a||u;v();var x=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,_=document.elementFromPoint(x.clientX,x.clientY);p(),m&&!m.el.contains(_)&&(d("spill"),this.onSpill({dragEl:s,putSortable:a}))}};function Js(){}Js.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var s=di(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),a&&a.animateAll()},drop:wc};Xn(Js,{pluginName:"revertOnSpill"});function $s(){}$s.prototype={onSpill:function(e){var i=e.dragEl,a=e.putSortable,s=a||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:wc};Xn($s,{pluginName:"removeOnSpill"});Ie.mount(new mv);Ie.mount($s,Js);class gv{constructor(){this.state={lists:[],isDragActive:!1,pendingUpdates:new Map,version:0},this.listeners=new Set}subscribe(e){return this.listeners.add(e),e(this.getState()),()=>this.listeners.delete(e)}getState(){return{lists:[...this.state.lists],isDragActive:this.state.isDragActive,version:this.state.version}}initializeFromQuery(e){this.state.isDragActive||Array.isArray(e)&&(this.state.lists=e.map(i=>({id:i.id,name:i.name,order:i.order,columnIndex:i.columnIndex??0})),this.state.version++,this.notify())}startDrag(){this.state.isDragActive||(this.state.isDragActive=!0,this.state.pendingUpdates.clear(),this.state.version++,this.notify())}updateDragState(e,i){if(!this.state.isDragActive){console.warn("[DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[DRAG STATE] updateDragState called with invalid items");return}this.state.pendingUpdates.set(e,{items:i.map(a=>({...a})),timestamp:Date.now()}),this.applyPendingUpdates(),this.state.version++,this.notify()}applyPendingUpdates(){const e=new Set;this.state.pendingUpdates.forEach(({items:s})=>{s.forEach(u=>e.add(u.id))});const i=new Set(this.state.pendingUpdates.keys());let a=this.state.lists.filter(s=>{const u=s.columnIndex??0;return!e.has(s.id)&&!i.has(u)});this.state.pendingUpdates.forEach(({items:s},u)=>{const d=s.map((v,p)=>({...this.state.lists.find(x=>x.id===v.id)||v,columnIndex:u,order:p}));a=[...a,...d]}),this.state.lists=a}completeDrag(e=!0){this.state.isDragActive&&(e?this.state.pendingUpdates.clear():this.state.pendingUpdates.clear(),this.state.isDragActive=!1,this.state.version++,this.notify())}notify(){const e=this.getState();this.listeners.forEach(i=>{try{i(e)}catch(a){console.error("[DRAG STATE] Error in state change listener:",a)}})}getListsForColumn(e){return this.state.lists.filter(i=>(i.columnIndex??0)===e)}isDragActive(){return this.state.isDragActive}}const xn=new gv,Ge=new Za("TaskPlannerDB");Ge.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Ge.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.toCollection().modify(e=>{e.status="unchecked"}));Ge.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.where("status").equals("archived").modify(e=>{e.archivedAt=Date.now()}));Ge.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify(e=>{e.archivedAt===void 0&&(e.archivedAt=null)}));Ge.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify((e,i)=>{e.columnIndex===void 0&&(e.columnIndex=e.order%5)}));function yo(t){return t.length===0?0:Math.max(...t.map(i=>i.order))+1}async function yv(){return(await Ge.lists.orderBy("order").toArray()).filter(e=>e.archivedAt==null)}async function bv(){return await Ge.lists.orderBy("order").toArray()}async function _v(t,e=null){if(t==null)throw new Error("List name cannot be null or undefined");const i=t.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const a=await Ge.lists.orderBy("order").toArray(),s=yo(a),u=5;let d;return e!==null&&e>=0&&e<u?d=e:d=s%u,await Ge.lists.add({name:i,order:s,archivedAt:null,columnIndex:d})}async function wv(t=null){const e=await Ge.lists.orderBy("order").toArray(),i=yo(e),a=5;let s;return t!==null&&t>=0&&t<a?s=t:s=i%a,await Ge.lists.add({name:null,order:i,archivedAt:null,columnIndex:s})}async function xv(t,e){const i=e.trim();if(i==="")throw new Error("List name cannot be empty");return await Ge.lists.update(t,{name:i})}async function Or(t){return await Ge.tasks.where("listId").equals(t).filter(e=>e.status!=="archived").sortBy("order")}async function Ev(){return(await Ge.tasks.where("status").equals("archived").toArray()).sort((e,i)=>{const a=e.archivedAt||0,s=i.archivedAt||0;return s!==a?s-a:(i.order||0)-(e.order||0)})}async function kv(t,e,i=null){let a=t;t===null&&(a=await wv(i));const s=await Ge.tasks.where("listId").equals(a).filter(p=>p.status!=="archived").sortBy("order"),u=yo(s),d=e===""?"":e.trim();return await Ge.tasks.add({text:d,listId:a,order:u,status:"unchecked"})}async function Tv(t,e){const i=e===""?"":e.trim();return await Ge.tasks.update(t,{text:i})}async function lu(t,e){if(!["unchecked","checked","archived"].includes(e))throw new Error(`Invalid status: ${e}`);const i={status:e};return e==="archived"?i.archivedAt=Date.now():e!=="archived"&&(i.archivedAt=null),await Ge.tasks.update(t,i)}async function Sv(t){const e=await Ge.tasks.get(t);if(!e)throw new Error(`Task ${t} not found`);const i=await Ge.lists.get(e.listId);if(!i)throw new Error(`Task's list ${e.listId} not found`);let a=!1;i.archivedAt!=null&&(await Iv(e.listId),a=!0);const s=await Ge.tasks.where("listId").equals(e.listId).filter(v=>v.status!=="archived"&&v.id!==t).sortBy("order"),u=yo(s);return{taskUpdated:await Ge.tasks.update(t,{status:"checked",order:u}),listRestored:a}}async function ii(t,e){if(!e||e.length===0)return;const i=e.map(v=>v.id),s=(await Ge.tasks.bulkGet(i)).filter(v=>v!==void 0);if(s.length===0)return;const u=s.filter(v=>v.listId!==t),d=new Set(u.map(v=>v.listId));await Ge.transaction("rw",Ge.tasks,async()=>{for(let v=0;v<e.length;v++){const p=e[v].id,m=s.find(_=>_.id===p);if(!m)continue;const x={order:v};m.listId!==t&&(x.listId=t),await Ge.tasks.update(p,x)}for(const v of d){const p=await Ge.tasks.where("listId").equals(v).filter(m=>m.status!=="archived").sortBy("order");for(let m=0;m<p.length;m++)await Ge.tasks.update(p[m].id,{order:m})}})}async function Av(t){const e=Date.now();return await Ge.lists.update(t,{archivedAt:e})}async function Iv(t){return await Ge.lists.update(t,{archivedAt:null})}async function Dv(t){const e=Date.now(),i=await Ge.tasks.where("listId").equals(t).filter(s=>s.status==="unchecked"||s.status==="checked").toArray(),a=i.map(s=>Ge.tasks.update(s.id,{status:"archived",archivedAt:e}));return await Promise.all(a),i.length}async function uu(t,e){if(!e||e.length===0)return;if(t<0||t>=5)throw new Error(`Invalid column index: ${t}`);const i=e.map(v=>v.id),a=await Ge.lists.bulkGet(i);if(a.filter(v=>!v).length>0)throw new Error("Cannot update order: some lists do not exist");const u=a.filter(v=>v!==void 0),d=u.filter(v=>(v.columnIndex??0)!==t);new Set(d.map(v=>v.columnIndex??0)),await Ge.transaction("rw",Ge.lists,async()=>{const v=new Set;for(let w=0;w<e.length;w++){const E=e[w].id,L=u.find(T=>T.id===E);if(!L)continue;const D={order:w},A=L.columnIndex??0;A!==t&&(D.columnIndex=t,v.add(A)),await Ge.lists.update(E,D)}const m=(await Ge.lists.orderBy("order").toArray()).filter(w=>w.archivedAt==null),x=Array(5).fill(null).map(()=>[]);for(const w of m){const E=w.columnIndex??0,L=E>=5?4:E;x[L].push(w)}const _=new Set([t,...v]);for(const w of _){const E=x[w];E.sort((L,D)=>(L.order??0)-(D.order??0));for(let L=0;L<E.length;L++)await Ge.lists.update(E[L].id,{order:L})}})}function xc(t){return t&&(t.isDndShadowItem===!0||typeof t.id=="string"&&t.id.startsWith("id:dnd-shadow-placeholder-"))}function Ec(t,e=5){if(!t||t.length===0)return Array(e).fill(null).map(()=>[]);const i=Array(e).fill(null).map(()=>[]),a=e-1;for(const s of t){let u=s.columnIndex??0;u>=e&&(u=a),i[u].push(s)}for(let s=0;s<i.length;s++)i[s].sort((u,d)=>(u.order??0)-(d.order??0));return i}function Cv(t,e){if(!t||t.length===0)return null;for(let i=0;i<t.length;i++){const a=t[i];if(!Array.isArray(a))continue;const s=a.findIndex(u=>u.id===e);if(s!==-1)return{columnIndex:i,index:s}}return null}function Lv(t,e,i,a){const{columnIndex:s,index:u}=t;let d=s,v=u;if(e==="up"){if(u===0)return null;v=u-1}else if(e==="down"){const p=i[s]||[];if(u===p.length-1)return null;v=u+1}else if(e==="left"){if(s===0)return null;d=s-1,v=(i[d]||[]).length}else if(e==="right"){if(s===a-1)return null;d=s+1,v=(i[d]||[]).length}else return null;return{targetColumnIndex:d,targetIndex:v}}function Pv(t,e,i,a){const s=Cv(t,e);if(!s)return null;const{columnIndex:u,index:d}=s,v=Lv(s,i,t,a);if(!v)return null;const{targetColumnIndex:p,targetIndex:m}=v,x=t.map(A=>Array.isArray(A)?[...A]:[]),_=x[u];if(!_||_.length===0)return null;const[w]=_.splice(d,1);if(!w)return null;const E=x[p];if(!E)return null;const L=Math.min(Math.max(m,0),E.length);i==="left"||i==="right"?E.splice(L,0,{...w,columnIndex:p}):E.splice(L,0,w);const D=[];for(let A=0;A<x.length;A++){const T=x[A]||[];for(let K=0;K<T.length;K++){const B=T[K];D.push({...B,columnIndex:A,order:K})}}return{newColumns:x,updatedDraggableLists:D,targetColumnIndex:p,targetColumnItems:(x[p]||[]).map(A=>({id:A.id}))}}function Ov(t){return Array.isArray(t)?t.filter(e=>!xc(e)):[]}function ai(t){t instanceof HTMLElement&&(t.style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",t.style.backgroundColor="rgba(107, 143, 217, 0.04)",t.style.borderRadius="4px")}function kc(t){t instanceof HTMLElement&&(t.style.removeProperty("box-shadow"),t.style.removeProperty("background-color"),t.style.removeProperty("border-radius"))}const io=160,Mv=150,Ls=1056,Rv=816,ao=16,Kv=25,Nv=10,ps=20,Da=10,Bv=40,cu=200,fu=10,Fv=20;async function jv(t,e={}){const{maxAttempts:i=Kv,retryInterval:a=Nv,waitForTick:s=!0}=e;if(typeof document>"u")return null;s&&await ht();for(let u=0;u<i;u++){const d=t();if(d&&d instanceof HTMLElement)return d.focus(),d;u<i-1&&await new Promise(v=>setTimeout(v,a))}return null}async function Tc(t){if(typeof document>"u")return null;await ht();const e=document.querySelector(`div[data-id="${t}"][role="group"]`);if(e instanceof HTMLElement)return e.focus(),e;const i=document.querySelector(`div[data-id="${t}"]`);return i instanceof HTMLElement?(i.focus(),i):null}function Hv(t,e,i){if(!t)return null;const a=t.querySelector(e);if(a){const s=a.querySelector(i);if(s&&s instanceof HTMLElement)return s}return null}function Uv(t,e,i,a){const{getKeyboardListDrag:s,getLastKeyboardDraggedListId:u,getShouldRefocusListOnNextTab:d,setShouldRefocusListOnNextTab:v}=t;function p(m){const x=m.key,_=s(),w=_.active===!0,E=_.listId,L=u(),D=d();if(!w&&x==="Tab"&&D&&L!=null){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),v(!1),Tc(L);return}if(!(!w||E==null)){if(x==="ArrowUp"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(E,"up");return}if(x==="ArrowDown"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(E,"down");return}if(x==="ArrowLeft"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(E,"left");return}if(x==="ArrowRight"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(E,"right");return}if(x==="Escape"||x==="Enter"||x===" "){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),i(),a();return}if(x==="Tab"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),i(),a();return}}}return document.addEventListener("keydown",p,!0),()=>{document.removeEventListener("keydown",p,!0)}}function zv(t){return t===""}function Vv(t){return t.trim()===""&&t.length>0}function Sc(t){const e=t.trim(),i=Vv(t);return{text:i?"":e,isBlank:i}}function Ac(t,e,i={}){const{ignoreElements:a=[],shouldClose:s=()=>!0,checkIgnoreClick:u=null}=i;function d(p){const m=typeof t=="function"?t():t;if(m&&!m.contains(p.target)&&!(u&&u(p))){for(const x of a){let _=null;if(typeof x=="function"?_=x():_=x,_&&_.contains(p.target))return}s()&&e()}}const v=setTimeout(()=>{document.addEventListener("click",d)},0);return()=>{clearTimeout(v),document.removeEventListener("click",d)}}function Yv(t){const{getColumnIndex:e,setColumnIndex:i,getInput:a,setInput:s,getInputElement:u}=t;function d(E){i(E)}function v(E,L){if(E.key==="Enter"||E.key===" ")E.preventDefault(),E.stopPropagation(),d(L);else if(E.key==="Escape"){E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation();const D=E.currentTarget;D&&D instanceof HTMLElement&&D.blur()}}function p(E,L,D){if(E.key==="Escape"){const A=a()||"";if(D){i(null),s("");return}if(A.trim().length>0){m(L,!0);return}i(null),s("")}}async function m(E,L=!1){const D=a()||"";if(D===""||D.trim()===""){i(null),s("");return}const{text:A}=Sc(D);try{if(await _v(A||null,E),s(""),L)i(null);else{await ht();const T=u();T&&setTimeout(()=>{T.focus()},0)}}catch(T){console.error("Error creating list:",T)}}async function x(E){await m(E,!0)}function _(){if(e()!==null)return Ac(u(),()=>{e()!==null&&(i(null),s(""))},{ignoreElements:[],shouldClose:()=>!a()||a().trim()===""})}function w(){const E=e(),L=u();if(E===null||!L)return;const D=setTimeout(()=>{L?.focus()},0);return()=>{clearTimeout(D)}}return{handleCreateListClick:d,handleCreateListKeydown:v,handleCreateListInputEscape:p,handleCreateList:m,handleCreateListOnTab:x,setupClickOutsideEffect:_,setupFocusEffect:w}}class Wv{constructor(){this.state=new Map,this.globalDragActive=!1,this.listeners=new Map}subscribe(e,i){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(i);const a=this.getState(e);return i(a),()=>{const s=this.listeners.get(e);s&&(s.delete(i),s.size===0&&this.listeners.delete(e))}}getState(e){const i=this.state.get(e);return i?{tasks:[...i.tasks],isDragActive:i.isDragActive||!1,version:i.version||0}:{tasks:[],isDragActive:!1,version:0}}initializeFromQuery(e,i){if(this.globalDragActive||!Array.isArray(i))return;const a=i.filter(u=>u.status==="unchecked"||u.status==="checked");this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(e);if(!s.isDragActive){const u=a.map(v=>`${v.id}:${v.status}:${v.text||""}`).join(","),d=s.tasks.map(v=>`${v.id}:${v.status}:${v.text||""}`).join(",");u!==d&&(s.tasks=a.map(v=>({...v})),s.version++,this.notify(e))}}startDrag(e,i){this.globalDragActive=!0,[e,i].forEach(a=>{this.state.has(a)||this.state.set(a,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(a);s.isDragActive=!0,s.pendingUpdates=null,s.version++,this.notify(a)})}updateDragState(e,i){if(!this.globalDragActive){console.warn("[TASK DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[TASK DRAG STATE] updateDragState called with invalid tasks");return}this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const a=this.state.get(e);[...a.tasks],a.pendingUpdates={tasks:i.map(s=>({...s})),timestamp:Date.now()},a.pendingUpdates&&(a.tasks=[...a.pendingUpdates.tasks],a.pendingUpdates=null),a.version++,this.notify(e)}completeDrag(e,i,a=!0){this.globalDragActive=!1,[e,i].forEach(s=>{const u=this.state.get(s);u&&(u.pendingUpdates=null,u.isDragActive=!1,u.version++,this.notify(s))})}notify(e){const i=this.getState(e),a=this.listeners.get(e);a&&a.forEach(s=>{try{s(i)}catch(u){console.error("[TASK DRAG STATE] Error in state change listener:",u)}})}isDragActive(){return this.globalDragActive}isDragActiveForList(e){const i=this.state.get(e);return i?i.isDragActive:!1}}const Ke=new Wv;function qv(t){return Array.isArray(t)?t.filter(e=>e&&typeof e.id=="number"):[]}function oo(t,e,i){if(!Array.isArray(e)||e.length===0)return null;const a=e.find(_=>_.id===t);if(!a)return null;const s=a.columnIndex??0;a.order;const u=5,d=Array(u).fill(null).map(()=>[]);for(const _ of e){const w=_.columnIndex??0,E=w>=u?u-1:w;d[E].push(_)}for(let _=0;_<d.length;_++)d[_].sort((w,E)=>(w.order??0)-(E.order??0));const v=d[s],p=v.findIndex(_=>_.id===t);if(p===-1)return null;const m=p===v.length-1,x=p===0;if(i==="next"){if(!m)return v[p+1].id;for(let _=s+1;_<u;_++){const w=d[_];if(w.length>0)return w[0].id}return null}if(i==="prev"){if(!x)return v[p-1].id;for(let _=s-1;_>=0;_--){const w=d[_];if(w.length>0)return w[w.length-1].id}return null}return null}async function Ic(t,e){try{const i=await Or(e),a=[{id:t},...i];await ii(e,a)}catch(i){throw console.error("Error moving task to next list:",i),i}}async function Ps(t,e){try{const a=[...await Or(e),{id:t}];await ii(e,a)}catch(i){throw console.error("Error moving task to previous list:",i),i}}function Gv(){return typeof document>"u"?!1:document.querySelectorAll('.sortable-ghost, [aria-grabbed="true"]').length>0}function Dc(t){if(!t||!(t instanceof HTMLElement))return!1;const e=window.getComputedStyle(t);return e.boxShadow&&e.boxShadow!=="none"&&e.boxShadow.includes("inset")}function Xv(){if(typeof document>"u")return[];const t=document.querySelectorAll("ul"),e=[];for(const i of t)i instanceof HTMLElement&&Dc(i)&&e.push(i);return e}function Cc(){return Gv()||Xv().length>0}function Qv(t,e){const{getIsKeyboardTaskDragging:i,setIsKeyboardTaskDragging:a,setLastKeyboardDraggedTaskId:s,setLastBlurredTaskElement:u,setShouldRefocusTaskOnNextTab:d}=t;return function(p,m){const x=p.key,_=p.currentTarget,w=p.target;if(!(!(_ instanceof HTMLElement)||_!==w)){if(x==="Enter"||x===" ")if(!i())a(!0),s(m);else{a(!1),s(m),u(_),d(!0);const L=e();if(L){const D=L.getAttribute("data-list-id");if(D){const A=parseInt(D);Ke.globalDragActive&&Ke.completeDrag(A,A,!0)}}}else if(x==="Escape"){const E=i(),L=e(),D=Cc()||L&&Dc(L);if(E||D){a(!1),s(m),u(_),d(!0);const A=e();if(A){const T=A.getAttribute("data-list-id");if(T){const K=parseInt(T);Ke.globalDragActive&&Ke.completeDrag(K,K,!1)}}p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation(),_ instanceof HTMLElement&&_.blur()}else p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation(),u(_),d(!0),_ instanceof HTMLElement&&_.blur()}}}}function Zv(t){const{getIsKeyboardTaskDragging:e,getLastKeyboardDraggedTaskId:i,setLastBlurredTaskElement:a,setShouldRefocusTaskOnNextTab:s}=t;return function(d,v){const p=d.currentTarget,m=e(),x=i();m&&x===v&&(a(p),s(!0))}}function Jv(t,e,i,a,s,u,d){const{getIsKeyboardTaskDragging:v,getLastBlurredTaskElement:p,getShouldRefocusTaskOnNextTab:m,setIsKeyboardTaskDragging:x,setLastKeyboardDraggedTaskId:_,setLastBlurredTaskElement:w,setShouldRefocusTaskOnNextTab:E}=t;let L=!1;async function D(A){const T=A.key,K=v(),B=Cc();if((T==="ArrowDown"||T==="ArrowUp"||T==="ArrowLeft"||T==="ArrowRight")&&L){A.preventDefault(),A.stopPropagation();return}if(T==="Tab"){if(B||K){if(A.preventDefault(),A.stopImmediatePropagation(),A.stopPropagation(),x(!1),typeof document<"u"&&document.activeElement){const Ye=document.activeElement.closest("li[data-id]");if(Ye&&Ye instanceof HTMLElement){const Fe=Ye.getAttribute("data-id");if(Fe){const Xe=parseInt(Fe);_(Xe),w(Ye),E(!0)}const st=Ye.closest("ul[data-list-id]");if(st){const Xe=st.getAttribute("data-list-id");if(Xe){const Ne=parseInt(Xe);Ke.globalDragActive&&Ke.completeDrag(Ne,Ne,!0)}}}}return}const ce=m(),Ue=p();if(T==="Tab"&&ce&&Ue){if(A.preventDefault(),A.stopImmediatePropagation(),A.stopPropagation(),E(!1),typeof document<"u"){let Ce=Ue;if((!(Ce instanceof HTMLElement)||!document.contains(Ce))&&d){const Ye=d.querySelector('span[role="button"]');Ye&&Ye instanceof HTMLElement&&(Ce=Ye)}Ce&&Ce instanceof HTMLElement&&Ce.focus()}return}}if(!K||T!=="ArrowDown"&&T!=="ArrowUp"&&T!=="ArrowLeft"&&T!=="ArrowRight")return;const R=document.activeElement;if(!R)return;const U=R.closest("li[data-id]");if(!U)return;const ee=U.getAttribute("data-id");if(!ee)return;const Y=parseInt(ee),H=U.closest("ul[data-list-id]");if(!H)return;const Z=H.getAttribute("data-list-id");if(!Z)return;const X=parseInt(Z),ke=Ke.getState(X).tasks,Se=ke.find(ce=>ce.id===Y);if(!Se)return;const Be=ke.findIndex(ce=>ce.id===Y);if(Be===-1)return;const Ze=Be===0,pt=Be===ke.length-1;A.preventDefault(),A.stopImmediatePropagation(),A.stopPropagation(),L=!0;try{if(T==="ArrowDown")if(pt){const ce=oo(X,a,"next");if(ce!=null){Ke.globalDragActive||Ke.startDrag(X,ce);const Ue=ke.find($=>$.id===Y);if(!Ue)return;const Ce=ke.filter($=>$.id!==Y);Ke.updateDragState(X,Ce);let Ye=Ke.getState(ce),Fe=Ye?.tasks||[];if(Fe.length===0&&Ye.version===0&&!Ke.state.has(ce)){const oe=(await Or(ce)).filter(xe=>xe.status==="unchecked"||xe.status==="checked");Ke.initializeFromQuery(ce,oe),Ye=Ke.getState(ce),Fe=Ye?.tasks||[]}const Xe=[{...Ue,listId:ce},...Fe];Ke.updateDragState(ce,Xe),await Ic(Y,ce),await ht();const Ne=document.querySelector(`li[data-id="${Y}"]`);Ne instanceof HTMLElement&&Ne.focus()}}else{const ce=[...ke],[Ue]=ce.splice(Be,1);ce.splice(Be+1,0,Ue),Ke.globalDragActive||Ke.startDrag(X,X),Ke.updateDragState(X,ce),await ii(X,ce),await ht();let Ce=e?.querySelector(`li[data-id="${Y}"]`);if(Ce||(Ce=document.querySelector(`li[data-id="${Y}"]`)),Ce instanceof HTMLElement&&(Ce.focus(),await ht(),await new Promise(Fe=>setTimeout(Fe,50)),document.activeElement!==Ce)){const Fe=document.querySelector(`li[data-id="${Y}"]`);Fe instanceof HTMLElement&&Fe.focus()}}else if(T==="ArrowUp")if(Ze){const ce=oo(X,a,"prev");if(ce!=null){const Ue=a.find(Fe=>Fe.id===X),Ce=a.find(Fe=>Fe.id===ce);if(Ue&&Ce&&(Ue.columnIndex??0)!==(Ce.columnIndex??0)){Ke.globalDragActive||Ke.startDrag(X,ce);const Fe=ke.find(Pe=>Pe.id===Y);if(!Fe)return;const st=ke.filter(Pe=>Pe.id!==Y);Ke.updateDragState(X,st);let Xe=Ke.getState(ce),Ne=Xe?.tasks||[];if(Ne.length===0&&Xe.version===0&&!Ke.state.has(ce)){const ze=(await Or(ce)).filter(We=>We.status==="unchecked"||We.status==="checked");Ke.initializeFromQuery(ce,ze),Xe=Ke.getState(ce),Ne=Xe?.tasks||[]}const $={...Fe,listId:ce},oe=[...Ne,$];Ke.updateDragState(ce,oe),await Ps(Y,ce),await ht();const xe=document.querySelector(`li[data-id="${Y}"]`);xe instanceof HTMLElement&&xe.focus()}else{Ke.globalDragActive||Ke.startDrag(X,ce);const Fe=ke.find(Pe=>Pe.id===Y);if(!Fe)return;const st=ke.filter(Pe=>Pe.id!==Y);Ke.updateDragState(X,st);let Xe=Ke.getState(ce),Ne=Xe?.tasks||[];if(Ne.length===0&&Xe.version===0&&!Ke.state.has(ce)){const ze=(await Or(ce)).filter(We=>We.status==="unchecked"||We.status==="checked");Ke.initializeFromQuery(ce,ze),Xe=Ke.getState(ce),Ne=Xe?.tasks||[]}const $={...Fe,listId:ce},oe=[...Ne,$];Ke.updateDragState(ce,oe),await Ps(Y,ce),await ht();const xe=document.querySelector(`li[data-id="${Y}"]`);xe instanceof HTMLElement&&xe.focus()}}else return}else{const ce=[...ke],[Ue]=ce.splice(Be,1);ce.splice(Be-1,0,Ue),Ke.globalDragActive||Ke.startDrag(X,X),Ke.updateDragState(X,ce),await ii(X,ce),await ht();let Ce=e?.querySelector(`li[data-id="${Y}"]`);Ce||(Ce=document.querySelector(`li[data-id="${Y}"]`)),Ce instanceof HTMLElement&&Ce.focus()}else if(T==="ArrowLeft"||T==="ArrowRight"){const ce=a.find(Xe=>Xe.id===i);if(!ce)return;const Ue=ce.columnIndex??0,Ce=T==="ArrowLeft"?Ue-1:Ue+1;if(Ce<0||Ce>=5)return;const Fe=Ec(a,5)[Ce]||[];let st=null;if(Fe.length>0){const Xe=Math.min(Be,Fe.length-1);st=Fe[Xe]?.id}if(st!=null){const Xe=await Or(st),Ne=Math.min(Be,Xe.length),$=[...Xe];$.splice(Ne,0,Se),await ii(st,$)}}}finally{L=!1}}return document.addEventListener("keydown",D,!0),()=>{document.removeEventListener("keydown",D,!0)}}function $v(t,e){if(!t)return()=>{};function i(a){const s=a.target;if((a.key==="Enter"||a.key===" ")&&s instanceof HTMLElement&&s.tagName==="H2"&&s.hasAttribute("role")&&s.getAttribute("role")==="button"){const u=t?.querySelector('h2[role="button"]');u&&s===u&&(a.preventDefault(),a.stopImmediatePropagation(),e.openModal(s))}}return t.addEventListener("keydown",i,!0),()=>{t&&t.removeEventListener("keydown",i,!0)}}function ep(t,e){if(!t)return()=>{};function i(a){const s=a.target;if((a.key==="Enter"||a.key===" ")&&s instanceof HTMLElement&&s.hasAttribute("role")&&s.getAttribute("role")==="button"){const u=t?.querySelector('span[role="button"]');u&&s===u&&(a.preventDefault(),a.stopImmediatePropagation(),e())}}return t.addEventListener("keydown",i,!0),()=>{t&&t.removeEventListener("keydown",i,!0)}}function tp(t,e,i,a,s){if(!t)return()=>{};const{onTaskTextEdit:u}=s;async function d(v){const p=v.target;if((v.key==="Enter"||v.key===" ")&&p instanceof HTMLElement&&p.hasAttribute("data-no-drag")){v.preventDefault(),v.stopImmediatePropagation();const m=p.closest("li[data-id]");if(m){const x=parseInt(m.getAttribute("data-id")),_=e.find(w=>w.id===x);_&&u&&u(x,_.text,p)}return}if(v.key==="ArrowDown"||v.key==="ArrowUp"){const m=document.activeElement;if(!m)return;const x=m.closest("li[data-id]");if(!x||!t.contains(x))return;const _=x.getAttribute("data-id");if(!_)return;const w=parseInt(_);if(!e.find(T=>T.id===w))return;const L=e.findIndex(T=>T.id===w),D=L===0,A=L===e.length-1;if(v.key==="ArrowDown"&&A){v.preventDefault(),v.stopImmediatePropagation();const T=oo(i,a,"next");T!=null&&await Ic(w,T)}else if(v.key==="ArrowUp"&&D){v.preventDefault(),v.stopImmediatePropagation();const T=oo(i,a,"prev");T!=null&&await Ps(w,T)}}}return t.addEventListener("keydown",d,!0),()=>{t.removeEventListener("keydown",d,!0)}}var np=Oe("<button><!></button>");function On(t,e){let i=Vt(e,"variant",3,"primary"),a=Vt(e,"size",3,"medium"),s=Vt(e,"disabled",3,!1),u=Vt(e,"type",3,"button"),d=Bh(e,["$$slots","$$events","$$legacy","variant","size","disabled","type","onclick","ariaLabel"]);const v="focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed",p={primary:"bg-grey-80 text-grey-110 hover:bg-grey-90 focus:bg-grey-90 disabled:bg-grey-50 disabled:text-grey-100",secondary:"bg-white text-grey-110 hover:bg-grey-20 focus:bg-grey-30 disabled:bg-white disabled:text-grey-60"},m={small:"px-2 py-1 text-sm",medium:"px-4 py-2",large:"px-6 py-3"},x=`${v} ${p[i()]} ${m[a()]}`;var _=np();Mh(_,()=>({type:u(),disabled:s(),onclick:e.onclick,ariaLabel:e.ariaLabel,class:x,...d}));var w=ve(_);kh(w,e,"default",{}),ye(t,_)}var rp=Oe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),ip=Oe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><!> <!></div></div></div></div>');function ap(t,e){Bn(e,!0);let i=he(Dt(e.taskText||"")),a=he(!1),s=he(null),u=he(null),d=It(()=>()=>{if(!e.taskPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const D=24,A=24,T=ao,B=D+A+T+8-8,R=10,U=e.taskPosition.top-B,ee=e.taskPosition.left-ao+R,Y=e.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${U}px; left: ${ee}px; width: ${Y}px;`});at(()=>{e.isOpen&&(I(i,e.taskText||"",!0),I(a,!1))}),at(()=>{e.isOpen&&f(s)&&setTimeout(()=>{f(s)?.focus(),f(s)?.select(),f(s)instanceof HTMLTextAreaElement&&(f(s).style.height="auto",f(s).style.height=`${Math.min(f(s).scrollHeight,io)}px`)},0)}),at(()=>{if(f(s)&&f(s)instanceof HTMLTextAreaElement){const D=()=>{f(s).style.height="auto",f(s).style.height=`${Math.min(f(s).scrollHeight,io)}px`};return f(s).addEventListener("input",D),()=>{f(s).removeEventListener("input",D)}}});function v(){const D=f(i)??"",A=D.trim();if(A===""&&D.length>0){e.onSave(e.taskId,""),I(a,!1);return}if(D===""||A===""){I(a,!0);return}e.onSave(e.taskId,A),I(a,!1)}function p(){I(i,e.taskText||"",!0),I(a,!1),e.onCancel()}function m(D){D.target===D.currentTarget&&p()}function x(D){if(D.key==="Tab"){if(!f(u))return;const A=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),T=Array.from(f(u).querySelectorAll(A)).filter(ee=>!(!(ee instanceof HTMLElement)||ee.hasAttribute("disabled")||ee.getAttribute("aria-hidden")==="true"));if(T.length===0)return;const K=document.activeElement,B=T.indexOf(K);let R;D.shiftKey?B<=0?R=T.length-1:R=B-1:B===-1||B===T.length-1?R=0:R=B+1,D.preventDefault(),D.stopPropagation();const U=T[R];U&&U instanceof HTMLElement&&U.focus()}else D.key==="Escape"?p():D.key==="Enter"&&!D.shiftKey&&document.activeElement===f(s)&&(D.preventDefault(),v())}function _(){e.onArchive&&e.onArchive(e.taskId)}var w=pr(),E=Yt(w);{var L=D=>{var A=ip();A.__click=m,A.__keydown=x;var T=ve(A);T.__click=X=>X.stopPropagation();var K=Re(ve(T),2),B=ve(K);B.__keydown=X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),X.stopPropagation(),v())},Pt(B,X=>I(s,X),()=>f(s));var R=Re(B,2);{var U=X=>{var Te=rp();ye(X,Te)};wt(R,X=>{f(a)&&X(U)})}var ee=Re(K,2),Y=ve(ee);Y.__click=_;var H=Re(Y,2),Z=ve(H);On(Z,{variant:"secondary",onclick:p,"aria-label":"Cancel editing and discard changes",children:(X,Te)=>{var ke=Pn("Cancel");ye(X,ke)},$$slots:{default:!0}});var re=Re(Z,2);{let X=It(()=>f(a)?"Save disabled: task cannot be empty":"Save task changes");On(re,{variant:"primary",onclick:v,get disabled(){return f(a)},get"aria-label"(){return f(X)},children:(Te,ke)=>{var Se=Pn("Save");ye(Te,Se)},$$slots:{default:!0}})}Pt(T,X=>I(u,X),()=>f(u)),gt(X=>{yr(T,X),yr(B,`width: ${Mv}px;`),ft(B,"aria-describedby",f(a)?"validation-message":void 0)},[()=>f(d)()]),qa(B,()=>f(i),X=>I(i,X)),ye(D,A)};wt(E,D=>{e.isOpen&&D(L)})}ye(t,w),Fn()}Hr(["click","keydown"]);var op=Oe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),sp=Oe('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-2 py-2 border border-grey-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border font-gilda text-[24px] text-grey-110 svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box; padding-left: 7px; padding-right: 7px; padding-top: 7px; padding-bottom: 7px;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><!> <div class="flex justify-end gap-3"><!> <!></div></div>',1),lp=Oe('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-grey-100">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><!> <!></div>',1),up=Oe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-grey-10 text-grey-110 p-6 rounded-xl shadow-2xl border-2 border-grey-50 fixed box-border" role="document"><!></div></div>');function cp(t,e){Bn(e,!0);let i=he(Dt(e.listName||"")),a=he(!1),s=he(null),u=he(null),d=he("edit"),v=he(null),p=It(()=>()=>{if(!e.listPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const H=24,Z=24,re=ao,ke=H+Z+re+1+7-8,Se=e.listPosition.top-ke,Be=e.listPosition.left-ao,Ze=Math.max(e.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${Se}px; left: ${Be}px; width: ${Ze}px; max-width: ${Ze}px; box-sizing: border-box;`});at(()=>{e.isOpen&&(I(i,e.listName||"",!0),I(a,!1),I(d,"edit"))}),at(()=>{e.isOpen&&f(s)&&setTimeout(()=>{f(s)?.focus(),f(s)?.select()},0)});function m(){const Z=(f(i)??"").trim();if(Z===""){I(a,!0);return}e.onSave(e.listId,Z),I(a,!1)}function x(){I(i,e.listName||"",!0),I(a,!1),e.onCancel()}function _(H){H.target===H.currentTarget&&(H.preventDefault(),H.stopPropagation(),x())}function w(H){H.target===H.currentTarget?I(v,H.target,!0):I(v,null),H.stopPropagation(),H.preventDefault()}function E(H){H.target===H.currentTarget&&f(v)===H.currentTarget&&(H.preventDefault(),H.stopPropagation(),x()),I(v,null),H.stopPropagation()}function L(H){H.stopPropagation(),H.preventDefault()}function D(H){return H.preventDefault(),H.stopPropagation(),!1}function A(H){return H.preventDefault(),H.stopPropagation(),!1}function T(H){if(H.key==="Tab"){if(!f(u))return;const Z=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),re=Array.from(f(u).querySelectorAll(Z)).filter(Be=>!(!(Be instanceof HTMLElement)||Be.hasAttribute("disabled")||Be.getAttribute("aria-hidden")==="true"));if(re.length===0)return;const X=document.activeElement,Te=re.indexOf(X);let ke;H.shiftKey?Te<=0?ke=re.length-1:ke=Te-1:Te===-1||Te===re.length-1?ke=0:ke=Te+1,H.preventDefault(),H.stopPropagation();const Se=re[ke];Se&&Se instanceof HTMLElement&&Se.focus()}else H.key==="Escape"?f(d)==="confirm-archive"?R():x():H.key==="Enter"&&!H.shiftKey&&f(d)==="edit"&&H.target===f(s)&&(H.preventDefault(),m())}function K(){I(d,"confirm-archive")}function B(){e.onArchive(e.listId),x()}function R(){I(d,"edit")}var U=pr(),ee=Yt(U);{var Y=H=>{var Z=up();Z.__click=_,Z.__mousedown=w,Z.__mouseup=E,Z.__mousemove=L,Z.__keydown=T;var re=ve(Z);re.__click=Se=>Se.stopPropagation(),re.__mousedown=Se=>Se.stopPropagation(),re.__mouseup=Se=>Se.stopPropagation();var X=ve(re);{var Te=Se=>{var Be=sp(),Ze=Re(Yt(Be),2),pt=ve(Ze);Pt(pt,Ne=>I(s,Ne),()=>f(s));var ce=Re(pt,2);{var Ue=Ne=>{var $=op();ye(Ne,$)};wt(ce,Ne=>{f(a)&&Ne(Ue)})}var Ce=Re(Ze,2),Ye=ve(Ce);On(Ye,{variant:"secondary",onclick:K,"aria-label":"Archive this list",children:(Ne,$)=>{var oe=Pn("Archive");ye(Ne,oe)},$$slots:{default:!0}});var Fe=Re(Ye,2),st=ve(Fe);On(st,{variant:"secondary",onclick:x,"aria-label":"Cancel editing and discard changes",children:(Ne,$)=>{var oe=Pn("Cancel");ye(Ne,oe)},$$slots:{default:!0}});var Xe=Re(st,2);{let Ne=It(()=>f(a)?"Save disabled: list name cannot be empty":"Save list name changes");On(Xe,{variant:"primary",onclick:m,get disabled(){return f(a)},get"aria-label"(){return f(Ne)},children:($,oe)=>{var xe=Pn("Save");ye($,xe)},$$slots:{default:!0}})}gt(()=>ft(pt,"aria-describedby",f(a)?"validation-message":void 0)),qa(pt,()=>f(i),Ne=>I(i,Ne)),ye(Se,Be)},ke=Se=>{var Be=pr(),Ze=Yt(Be);{var pt=ce=>{var Ue=lp(),Ce=Re(Yt(Ue),4),Ye=ve(Ce);On(Ye,{variant:"secondary",onclick:R,"aria-label":"Cancel archiving",children:(st,Xe)=>{var Ne=Pn("Cancel");ye(st,Ne)},$$slots:{default:!0}});var Fe=Re(Ye,2);On(Fe,{variant:"primary",onclick:B,"aria-label":"Confirm archive list",children:(st,Xe)=>{var Ne=Pn("Archive");ye(st,Ne)},$$slots:{default:!0}}),ye(ce,Ue)};wt(Ze,ce=>{f(d)==="confirm-archive"&&ce(pt)},!0)}ye(Se,Be)};wt(X,Se=>{f(d)==="edit"?Se(Te):Se(ke,!1)})}Pt(re,Se=>I(u,Se),()=>f(u)),gt(Se=>yr(re,Se),[()=>f(p)()]),ni("dragstart",Z,D),ni("drag",Z,A),ni("dragend",Z,A),ye(H,Z)};wt(ee,H=>{e.isOpen&&H(Y)})}ye(t,U),Fn()}Hr(["click","mousedown","mouseup","mousemove","keydown"]);var fp=Oe('<input type="checkbox" disabled class="cursor-pointer" aria-hidden="true" tabindex="-1"/> <textarea class="flex-1 break-words resize-none max-h-[10rem] overflow-y-auto text-body font-urbanist text-grey-100 placeholder:italic" rows="1" style="height: 24px;"></textarea>',1),dp=Oe('<input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-60" role="button" tabindex="0"> </span>',1),hp=Oe('<div class="flex items-center gap-2 py-1 border-b border-grey-50 hover:bg-grey-20 w-full print:hidden add-task-container add-task-button svelte-jtbpvm"><!></div>');function ms(t,e){Bn(e,!0);let i=Vt(e,"isInputActive",11,!1),a=Vt(e,"inputValue",3,""),s=Vt(e,"buttonText",3,"Add Task"),u=Vt(e,"placeholder",3,"start typing..."),d=Vt(e,"marginLeft",3,!1),v=Vt(e,"containerElement",15,null),p=Vt(e,"textareaElement",15,null),m=he(null),x=he(null);at(()=>{v(f(x)),p(f(m))}),at(()=>{i()&&f(m)?setTimeout(()=>{if(f(m)?.focus(),f(m)instanceof HTMLTextAreaElement){f(m).style.height="auto";const T=f(m).scrollHeight;f(m).style.height=`${Math.max(24,Math.min(T,io))}px`}},0):!i()&&f(m)&&f(m)instanceof HTMLTextAreaElement&&(f(m).style.height="24px")}),at(()=>{if(f(m)&&f(m)instanceof HTMLTextAreaElement){const T=()=>{f(m).style.height="auto";const K=f(m).scrollHeight;f(m).style.height=`${Math.max(24,Math.min(K,io))}px`};return f(m).addEventListener("input",T),()=>{f(m).removeEventListener("input",T)}}});function _(T){T.key==="Enter"&&!T.shiftKey?(T.preventDefault(),e.onSave?.()):T.key==="Escape"?(T.preventDefault(),e.onEscape?.(T,a())):T.key==="Tab"&&e.onSave?.({closeAfterSave:!0})}function w(T){if(T.key==="Enter"||T.key===" ")T.preventDefault(),e.onActivate?.();else if(T.key==="Escape"){T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation();const K=T.currentTarget;K&&K instanceof HTMLElement&&K.blur()}}var E=hp(),L=ve(E);{var D=T=>{var K=fp(),B=Re(Yt(K),2);B.__input=R=>e.onInputChange?.(R.currentTarget.value),B.__keydown=_,Pt(B,R=>I(m,R),()=>f(m)),gt(()=>{ft(B,"placeholder",u()),Ch(B,a())}),ye(T,K)},A=T=>{var K=dp(),B=Re(Yt(K),2);B.__click=function(...U){e.onActivate?.apply(this,U)},B.__keydown=w;var R=ve(B);gt(()=>{ft(B,"aria-label",e.ariaLabel||s()),Jt(R,s())}),ye(T,K)};wt(L,T=>{i()?T(D):T(A,!1)})}Pt(E,T=>I(x,T),()=>f(x)),gt(()=>yr(E,d()?"margin-left: 1.5rem;":"")),ye(t,E),Fn()}Hr(["input","keydown","click"]);function du(){let t=he(!1),e=he(null),i=he(null);function a(p){if(p&&p instanceof HTMLElement){const m=p.getBoundingClientRect();I(e,{top:m.top,left:m.left,width:m.width,height:m.height},!0),I(i,p,!0)}I(t,!0)}function s(){const p=f(i);I(t,!1),I(e,null),I(i,null),p&&p instanceof HTMLElement&&setTimeout(()=>{p.focus()},0)}function u(){I(t,!1),I(e,null),I(i,null)}function d(p){const m=p?.currentTarget||p?.target;a(m)}function v(p,m={}){const x=p.key;if(x==="Enter"||x===" "){p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation();const _=p.currentTarget;_&&a(_)}else if(x==="Escape")if(p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation(),m.onEscape)m.onEscape(p);else{const _=p.currentTarget;_&&_ instanceof HTMLElement&&_.blur()}}return{get isOpen(){return f(t)},get position(){return f(e)},get element(){return f(i)},openModal:a,closeModal:s,closeModalWithoutFocus:u,handleClick:d,handleKeydown:v}}var vp=Oe('<li tabindex="0" role="listitem" class="flex items-center gap-2 py-1 border-b border-grey-50 cursor-move hover:bg-grey-20 w-full m-0 list-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"><input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false"> </span> <!></li>'),pp=Oe('<div class="-mt-6"><!></div>'),mp=Oe('<div class="task-list-wrapper m-0 p-0"><ul></ul> <!></div>'),gp=Oe("<p>Loading tasks...</p> <!>",1),yp=Oe('<div class="flex flex-col w-full"><div class="border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border"><div class="flex items-center transition-colors hover:bg-grey-20 hover:rounded py-1"><h2 role="button" tabindex="0" class="list-title cursor-pointer m-0 px-2 py-2 leading-none text-grey-110 font-gilda text-[24px] rounded -my-1 transition-colors flex-1 min-w-0 focus:outline-none"> </h2></div></div> <!></div> <!> <!>',1);function bp(t,e){Bn(e,!0);const i=()=>Ga(f(v),"$tasksQuery",a),[a,s]=Gs();let u=Vt(e,"allLists",19,()=>[]),d=Vt(e,"stableLists",19,()=>[]),v=he(null),p=he(Dt([])),m=he(!1);const x=du(),_=du();let w=he(null),E=he(""),L=he(null),D=he(null),A=he(null),T=he(null),K=he(null),B=he(null),R=he(!1),U=he(!1),ee=he(null),Y=he(null),H=he(null),Z=he(!1);function re(M,te=null){if(!M)return[];const ie=Array.from(M.children),se=te||e.listId,we=Ke.getState(se).tasks,je=e.listId!==se?Ke.getState(e.listId):null,ue=je?je.tasks:[];return ie.map(vt=>{const ut=vt.getAttribute("data-id");if(!ut)return null;const Kt=parseInt(ut,10);let dn=we.find(bn=>bn.id===Kt);return!dn&&ue.length>0&&(dn=ue.find(bn=>bn.id===Kt)),dn||(dn=f(p).find(bn=>bn.id===Kt)),dn||{id:Kt}}).filter(Boolean)}async function X(M){const{oldIndex:te,newIndex:ie,from:se,to:_e}=M,we=e.listId,je=_e?.dataset?.listId?parseInt(_e.dataset.listId):e.listId;await ht();const ue=_e||f(L),vt=re(ue,je),ut=qv(vt);if(ut.length!==0){if(Ke.startDrag(we,je),Ke.updateDragState(je,ut),we!==je){const dn=Ke.getState(we).tasks.filter(bn=>!ut.some(pi=>pi.id===bn.id));Ke.updateDragState(we,dn)}await ht();try{await ii(je,ut),Ke.completeDrag(we,je,!0)}catch(Kt){console.error("[TASK DRAG] Failed to save task order:",Kt),Ke.completeDrag(we,je,!1)}}}function Te(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(te=>{te instanceof HTMLElement&&ai(te)})}function ke(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(te=>{te instanceof HTMLElement&&kc(te)})}function Se(){!f(L)||f(H)||I(H,new Ie(f(L),{animation:150,ghostClass:"sortable-ghost-task",group:"tasks",draggable:"li[data-id]",filter:"[data-no-drag]",preventOnFilter:!1,emptyInsertThreshold:50,swapThreshold:.65,onStart:M=>{typeof document<"u"&&document.body.classList.add("task-dragging-active"),I(Z,!1);const te=M.item;te&&te instanceof HTMLElement&&document.querySelectorAll("ul[data-list-id]").forEach(se=>{Array.from(se.children).forEach(we=>{we!==te&&we.classList.contains("sortable-ghost-task")&&we.classList.remove("sortable-ghost-task")})}),Te()},onMove:M=>{M.to&&M.to instanceof HTMLElement&&ai(M.to),M.from&&M.from instanceof HTMLElement&&ai(M.from)},onEnd:M=>{typeof document<"u"&&document.body.classList.remove("task-dragging-active"),ke(),I(Z,!0),setTimeout(()=>{I(Z,!1)},100),X(M)}}),!0)}at(()=>{if(f(H)&&f(Y)!==null&&f(Y)!==e.listId&&(f(H).destroy(),I(H,null)),f(L)&&!f(H)){const M=setTimeout(()=>{!f(H)&&f(L)&&Se()},10);return()=>{clearTimeout(M)}}}),Xs(()=>{f(H)&&(f(H).destroy(),I(H,null))}),at(()=>{d().some(te=>te.id===e.listId)&&e.listId?(!f(v)||f(Y)!==e.listId)&&(f(Y)!==e.listId&&I(p,[],!0),Xa(I(v,Ja(()=>Or(e.listId)),!0),"$tasksQuery",a),I(Y,e.listId,!0)):(Xa(I(v,null),"$tasksQuery",a),I(Y,null),I(p,[],!0))}),at(()=>{if(!e.listId)return;const M=Ke.subscribe(e.listId,te=>{const ie=te.tasks.map(_e=>`${_e.id}:${_e.status}:${_e.text||""}`).join(","),se=f(p).map(_e=>`${_e.id}:${_e.status}:${_e.text||""}`).join(",");ie!==se&&I(p,te.tasks,!0)});return()=>{M()}}),at(()=>{e.listId&&i()&&Array.isArray(i())&&Ke.initializeFromQuery(e.listId,i())});const Be=It(()=>e.listId&&(d().some(M=>M.id===e.listId)||u().some(M=>M.id===e.listId)));at(()=>$v(f(D),_)),at(()=>ep(f(A),Ue)),at(()=>tp(f(L),f(p),e.listId,u(),{onTaskTextEdit:(M,te,ie)=>{I(w,M,!0),I(E,te,!0),x.openModal(ie)}}));const Ze={getIsKeyboardTaskDragging:()=>f(U),setIsKeyboardTaskDragging:M=>{I(U,M,!0)},getLastKeyboardDraggedTaskId:()=>f(ee),setLastKeyboardDraggedTaskId:M=>{I(ee,M,!0)},getLastBlurredTaskElement:()=>f(B),setLastBlurredTaskElement:M=>{I(B,M,!0)},getShouldRefocusTaskOnNextTab:()=>f(R),setShouldRefocusTaskOnNextTab:M=>{I(R,M,!0)}},pt=Qv(Ze,()=>f(L)),ce=Zv(Ze);at(()=>{if(f(L))return Jv(Ze,f(L),e.listId,u(),()=>f(p),M=>{I(p,M,!0)},f(A))});function Ue(){I(m,!0)}async function Ce(M,te=""){if(M.key==="Escape"){let ie=te||"";if(f(T)?ie=(f(T).value||"").toString():e.newTaskInput&&(ie=(e.newTaskInput||"").toString()),ie.length>0){await Ye({closeAfterSave:!0});return}if(I(R,!0),f(A)){const se=f(A).querySelector('span[role="button"]');se&&se instanceof HTMLElement?I(B,se,!0):I(B,null)}else I(B,null);I(m,!1),e.onInputChange(""),await ht(),await ht(),await new Promise(se=>requestAnimationFrame(se)),await new Promise(se=>setTimeout(se,cu))}}at(()=>{if(f(m))return Ac(()=>f(T),()=>{f(m)&&(I(m,!1),e.onInputChange(""))},{ignoreElements:[],shouldClose:()=>f(T)&&f(T).value.trim()!==""?!1:!e.newTaskInput||e.newTaskInput.trim()===""})});async function Ye(M={}){const te=M&&typeof M=="object"&&M.closeAfterSave===!0;let ie=e.newTaskInput||"";if(f(T)&&(ie=(f(T).value||"").toString()),ie=(ie||"").toString(),zv(ie)){I(m,!1),e.onInputChange(""),await ht(),await ht(),await new Promise(_e=>requestAnimationFrame(_e)),await new Promise(_e=>setTimeout(_e,cu));return}const{text:se}=Sc(ie);try{const _e=await kv(e.listId,se),je=(f(p).length>0?Math.max(...f(p).map(vt=>vt.order||0)):-1)+1,ue={id:_e,text:se,listId:e.listId,order:je,status:"unchecked"};I(p,[...f(p),ue],!0),e.onInputChange(""),te&&I(m,!1)}catch(_e){console.error("Error creating task:",_e)}}async function Fe(M,te){try{await lu(M,te==="unchecked"?"checked":"unchecked")}catch(ie){console.error("Error updating task status:",ie)}}async function st(M){await lu(M,"archived")}function Xe(){return f(L)?Hv(f(L),"li[data-id]",'span[role="button"]'):null}async function Ne(M=ps,te=Da){f(D)&&await jv(()=>{if(f(A)){const ie=f(A).querySelector('span[role="button"]');if(ie&&ie instanceof HTMLElement)return ie}return null},{maxAttempts:M,retryInterval:te,waitForTick:!1})}async function $(M){try{await st(M),f(w)===M&&(I(w,null),I(E,""),x.closeModalWithoutFocus(),await ht(),await new Promise(te=>setTimeout(te,fu)),setTimeout(()=>{const te=(ie=0)=>{const se=Xe();se?se.focus():ie<ps?setTimeout(()=>te(ie+1),Da):Ne(Bv,Da)};te()},Fv))}catch(te){console.error("Error archiving task:",te)}}function oe(M,te,ie){if(f(Z))return;const se=ie?.currentTarget||ie?.target;I(w,M,!0),I(E,te,!0),x.openModal(se)}function xe(M,te,ie){if(ie.key==="Enter"||ie.key===" ")I(w,M,!0),I(E,te,!0),x.handleKeydown(ie);else if(ie.key==="Escape"){ie.preventDefault(),ie.stopImmediatePropagation();const se=ie.currentTarget;se&&se instanceof HTMLElement&&(I(B,se,!0),I(R,!0),se.blur())}}async function Pe(M,te){try{await Tv(M,te),I(w,null),I(E,""),x.closeModal()}catch(ie){console.error("Error updating task text:",ie)}}function ze(){I(w,null),I(E,""),x.closeModal()}async function We(M){await $(M),setTimeout(()=>{if(typeof document>"u")return;const te=document.activeElement;f(D)&&(!te||!f(D).contains(te))&&Ne(ps,Da)},fu)}function rt(M){_.handleClick(M)}function Ot(M){_.handleKeydown(M)}async function xt(M,te){try{await xv(M,te),_.closeModal()}catch(ie){console.error("Error updating list name:",ie)}}function mt(){_.closeModal()}async function $e(M){try{await Dv(M),await Av(M)}catch(te){console.error("Error archiving list:",te)}}var it=yp(),yt=Yt(it),$t=ve(yt),ge=ve($t),Mt=ve(ge);Mt.__click=rt,Mt.__keydown=Ot;var Gt=ve(Mt);Pt($t,M=>I(K,M),()=>f(K));var Xt=Re($t,2);{var Ve=M=>{var te=mp(),ie=ve(te);yn(ie,21,()=>f(p),je=>je.id,(je,ue)=>{var vt=vp(),ut=ve(vt);ut.__change=()=>Fe(f(ue).id,f(ue).status),ut.__keydown=ct=>{if(ct.key==="Enter"||ct.key===" ")ct.preventDefault(),ct.stopPropagation(),ct.stopImmediatePropagation(),Fe(f(ue).id,f(ue).status);else if(ct.key==="Escape"){ct.preventDefault(),ct.stopPropagation(),ct.stopImmediatePropagation();const Sn=ct.currentTarget;if(Sn&&Sn instanceof HTMLElement){const _r=Sn.closest("li[data-id]");_r&&_r instanceof HTMLElement&&(I(B,_r,!0),I(R,!0)),Sn.blur()}}};var Kt=Re(ut,2);Kt.__click=ct=>oe(f(ue).id,f(ue).text,ct),Kt.__keydown=ct=>xe(f(ue).id,f(ue).text,ct);var dn=ve(Kt),bn=Re(Kt,2);{var pi=ct=>{{let Sn=It(()=>`Archive task: ${f(ue).text||"blank task"}`);On(ct,{variant:"secondary",size:"small",onclick:()=>$(f(ue).id),class:"print:hidden",get"aria-label"(){return f(Sn)},children:(_r,Ur)=>{var mi=Pn("Archive");ye(_r,mi)},$$slots:{default:!0}})}};wt(bn,ct=>{f(ue).status==="checked"&&ct(pi)})}gt(()=>{ft(vt,"data-id",f(ue).id),ft(vt,"aria-label",`Task: ${f(ue).text||"blank task"}`),Lh(ut,f(ue).status==="checked"),ft(ut,"aria-label",`Mark task "${f(ue).text||"blank task"}" as ${f(ue).status==="checked"?"unchecked":"checked"}`),Wa(Kt,1,rc(f(ue).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100":"cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100")),ft(Kt,"aria-label",`Edit task: ${f(ue).text||"blank task"}`),Jt(dn,f(ue).text||"Â ")}),ni("keydown",vt,ct=>pt(ct,f(ue).id),!0),ni("blur",vt,ct=>ce(ct,f(ue).id)),ye(je,vt)}),Pt(ie,je=>I(L,je),()=>f(L));var se=Re(ie,2);{var _e=je=>{var ue=pp(),vt=ve(ue);ms(vt,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Ye,onEscape:Ce,onActivate:Ue,buttonText:"Add your first task",placeholder:"start typing...",get ariaLabel(){return`Add your first task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return f(m)},set isInputActive(ut){I(m,ut,!0)},get containerElement(){return f(A)},set containerElement(ut){I(A,ut,!0)},get textareaElement(){return f(T)},set textareaElement(ut){I(T,ut,!0)}}),ye(je,ue)},we=je=>{ms(je,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Ye,onEscape:Ce,onActivate:Ue,buttonText:"Add Task",placeholder:"start typing...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return f(m)},set isInputActive(ue){I(m,ue,!0)},get containerElement(){return f(A)},set containerElement(ue){I(A,ue,!0)},get textareaElement(){return f(T)},set textareaElement(ue){I(T,ue,!0)}})};wt(se,je=>{f(p).length===0?je(_e):je(we,!1)})}gt(()=>{ft(ie,"data-list-id",e.listId),Wa(ie,1,`space-y-0 m-0 p-0 list-none w-full ${f(p).length===0?"empty-drop-zone min-h-[24px]":""}`)}),ye(M,te)},F=M=>{var te=gp(),ie=Re(Yt(te),2);ms(ie,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Ye,onEscape:Ce,onActivate:Ue,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return f(m)},set isInputActive(se){I(m,se,!0)},get containerElement(){return f(A)},set containerElement(se){I(A,se,!0)},get textareaElement(){return f(T)},set textareaElement(se){I(T,se,!0)}}),ye(M,te)};wt(Xt,M=>{f(Be)?M(Ve):M(F,!1)})}Pt(yt,M=>I(D,M),()=>f(D));var V=Re(yt,2);ap(V,{get isOpen(){return x.isOpen},get taskId(){return f(w)},get taskText(){return f(E)},get taskPosition(){return x.position},onSave:Pe,onCancel:ze,onArchive:We});var J=Re(V,2);cp(J,{get isOpen(){return _.isOpen},get listId(){return e.listId},get listName(){return e.listName},get listPosition(){return _.position},onSave:xt,onCancel:mt,onArchive:$e}),gt(()=>{ft(yt,"data-list-id",e.listId),ft(Mt,"aria-label",`Rename list: ${e.listName}`),Jt(Gt,e.listName)}),ye(t,it),Fn(),s()}Hr(["click","keydown","change"]);var _p=Oe('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),wp=Oe('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),xp=Oe('<div class="create-list-container flex flex-col w-full print:hidden create-list-empty-column"><!></div>'),Ep=Oe('<div class="flex flex-col" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),kp=Oe('<div class="flex flex-col"></div>'),Tp=Oe('<div class="empty-drop-zone min-h-[96px]" tabindex="-1"></div>'),Sp=Oe('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Ap=Oe('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Ip=Oe('<div class="create-list-container flex flex-col w-full print:hidden"><!></div>'),Dp=Oe('<div><!> <div class="sortable-column-container flex flex-col pt-0 gap-y-6 min-h-0 overflow-y-auto overflow-x-hidden px-1"><!> <!></div> <!></div>');function Cp(t,e){Bn(e,!0);let i=Vt(e,"createListInput",15,""),a=Vt(e,"createListInputElement",15,null),s=Vt(e,"onColumnElementReady",3,()=>{}),u=he(null),d=he(null),v=he(null),p=he(null);at(()=>{f(u)&&s()&&s()(f(u),e.columnIndex)}),at(()=>{if(!f(d)||!(f(d)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(f(d).style.outline="none",f(d).style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",f(d).style.borderRadius="4px"):(f(d).style.outline="",f(d).style.boxShadow="",f(d).style.borderRadius="")}),at(()=>{if(!f(u)||!(f(u)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(f(u).style.flex="1 1 auto",f(u).style.minHeight="0"):(f(u).style.flex="",f(u).style.minHeight="")});var m=Dp(),x=ve(m);{var _=K=>{var B=xp(),R=ve(B);{var U=Y=>{var H=_p(),Z=ve(H),re=ve(Z);re.__keydown=X=>{X.key==="Enter"&&!X.shiftKey?(X.preventDefault(),e.onCreateList(e.columnIndex)):X.key==="Escape"?e.onCreateListInputEscape(X,e.columnIndex,!0):X.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Pt(re,X=>a(X),()=>a()),qa(re,i),ye(Y,H)},ee=Y=>{var H=wp(),Z=ve(H);Z.__click=()=>e.onCreateListClick(e.columnIndex),Z.__keydown=re=>e.onCreateListKeydown(re,e.columnIndex),Pt(Z,re=>I(p,re),()=>f(p)),ye(Y,H)};wt(R,Y=>{e.createListColumnIndex===e.columnIndex?Y(U):Y(ee,!1)})}ye(K,B)};wt(x,K=>{e.columnLists.length===0&&K(_)})}var w=Re(x,2),E=ve(w);yn(E,19,()=>e.columnLists,K=>K.id,(K,B)=>{const R=It(()=>xc(f(B))),U=It(()=>e.stableLists.find(Te=>Te.id===f(B).id)),ee=It(()=>!f(U)&&!f(R)?f(B):null),Y=It(()=>f(U)||f(ee));var H=pr(),Z=Yt(H);{var re=Te=>{var ke=Ep(),Se=ve(ke);{let Be=It(()=>f(Y).name??"Unnamed list"),Ze=It(()=>e.newTaskInputs[f(Y).id]||"");bp(Se,{get listId(){return f(Y).id},get listName(){return f(Be)},get newTaskInput(){return f(Ze)},onInputChange:pt=>e.onInputChange(f(Y).id,pt),get allLists(){return e.allLists},get stableLists(){return e.stableLists}})}gt(()=>{ft(ke,"data-id",f(B).id),ft(ke,"aria-label",`List: ${f(Y).name??"Unnamed list"}`),ft(ke,"aria-pressed",e.keyboardListDrag?.active&&e.keyboardListDrag?.listId===f(Y).id?"true":"false")}),ni("keydown",ke,Be=>e.onListKeyboardKeydown(Be,f(Y).id),!0),ye(Te,ke)},X=Te=>{var ke=kp();gt(()=>ft(ke,"data-id",f(B).id)),ye(Te,ke)};wt(Z,Te=>{f(Y)?Te(re):Te(X,!1)})}ye(K,H)});var L=Re(E,2);{var D=K=>{var B=Tp();Pt(B,R=>I(v,R),()=>f(v)),ye(K,B)};wt(L,K=>{e.columnLists.length===0&&K(D)})}Pt(w,K=>I(u,K),()=>f(u));var A=Re(w,2);{var T=K=>{var B=Ip(),R=ve(B);{var U=Y=>{var H=Sp(),Z=ve(H),re=ve(Z);re.__keydown=X=>{X.key==="Enter"&&!X.shiftKey?(X.preventDefault(),e.onCreateList(e.columnIndex)):X.key==="Escape"?e.onCreateListInputEscape(X,e.columnIndex,!1):X.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Pt(re,X=>a(X),()=>a()),qa(re,i),ye(Y,H)},ee=Y=>{var H=Ap(),Z=ve(H);Z.__click=()=>e.onCreateListClick(e.columnIndex),Z.__keydown=re=>e.onCreateListKeydown(re,e.columnIndex),Pt(Z,re=>I(p,re),()=>f(p)),ye(Y,H)};wt(R,Y=>{e.createListColumnIndex===e.columnIndex?Y(U):Y(ee,!1)})}ye(K,B)};wt(A,K=>{e.columnLists.length>0&&K(T)})}Pt(m,K=>I(d,K),()=>f(d)),gt(()=>{Wa(m,1,`flex flex-col pt-0 min-w-0 px-2 h-full gap-y-6 ${e.columnIndex<4?"border-r border-grey-50":""}`,"svelte-785piu"),ft(m,"data-column-index",e.columnIndex)}),ye(t,m),Fn()}Hr(["keydown","click"]);var Lp=Oe("<p>Loading...</p>"),Pp=Oe('<div class="grid grid-cols-5 w-full h-full py-4 px-1"></div>'),Op=Oe('<div class="w-full h-full overflow-hidden"><!></div>');function Mp(t,e){Bn(e,!0);const i=()=>Ga(u,"$lists",a),[a,s]=Gs();let u=Ja(()=>yv()),d=It(()=>i()||[]),v=he(Dt([])),p=he(Dt({})),m=he(null),x=he(""),_=he(null),w=he(Dt({active:!1,listId:null,lastDraggedId:null,shouldRefocusOnNextTab:!1})),E=Dt(new Map);function L($){E.forEach(oe=>{oe&&oe.option("disabled",$)})}at(()=>{if(typeof document>"u")return;const $=new MutationObserver(()=>{const xe=document.querySelector(".modal-backdrop");L(!!xe)});$.observe(document.body,{childList:!0,subtree:!0});const oe=document.querySelector(".modal-backdrop");return L(!!oe),()=>{$.disconnect()}});function D($,oe){if(!$)return[];const xe=Array.from($.children),Pe=new Set,ze=[],rt=xn.getState().lists;for(const Ot of xe){const xt=Ot.getAttribute("data-id");if(!xt)continue;const mt=parseInt(xt,10);if(Pe.has(mt))continue;Pe.add(mt);const $e=rt.find(it=>it.id===mt);if($e)ze.push({...$e,columnIndex:oe});else{const it=f(v).find(yt=>yt.id===mt);it&&ze.push({...it,columnIndex:oe})}}return ze}function A($){if(!$)return null;let oe=$;for(;oe&&oe!==document.body;){if(oe instanceof HTMLElement){const xe=oe.getAttribute("data-column-index");if(xe!==null)return parseInt(xe,10)}oe=oe.parentElement}return null}async function T($,oe){const{to:xe}=$,Pe=xe,ze=A(Pe);if(ze===null){console.error("[LIST DRAG] Could not determine target column index");return}const We=ze!==oe;if(await ht(),We){const $e=document.querySelectorAll("[data-column-index]"),it=new Map;$e.forEach(yt=>{if(yt.getAttribute("data-column-index")===null)return;const ge=yt.firstElementChild;if(!ge||!(ge instanceof HTMLElement))return;Array.from(ge.children).forEach(Gt=>{const Xt=Gt.getAttribute("data-id");if(!Xt)return;const Ve=parseInt(Xt,10);it.has(Ve)?Gt.remove():it.set(Ve,Gt)})}),await ht()}const rt=D(Pe,ze),Ot=Ov(rt),xt=new Set,mt=Ot.filter($e=>xt.has($e.id)?!1:(xt.add($e.id),!0));if(mt.length!==0){if(xn.startDrag(),xn.updateDragState(ze,mt),await ht(),await ht(),We){const $e=document.querySelectorAll("[data-column-index]"),it=new Map;$e.forEach(Gt=>{if(Gt.getAttribute("data-column-index")===null)return;const Ve=Gt.firstElementChild;if(!Ve||!(Ve instanceof HTMLElement))return;Array.from(Ve.children).forEach(V=>{const J=V.getAttribute("data-id");if(!J)return;const M=parseInt(J,10);it.has(M)?V.remove():it.set(M,V)})}),await ht(),await ht();const yt=E.get(oe),$t=E.get(ze);yt&&(yt.destroy(),E.delete(oe)),$t&&($t.destroy(),E.delete(ze)),await ht();const ge=document.querySelector(`[data-column-index="${oe}"] .sortable-column-container`),Mt=document.querySelector(`[data-column-index="${ze}"] .sortable-column-container`);ge&&setTimeout(()=>{R(ge,oe)},10),Mt&&setTimeout(()=>{R(Mt,ze)},10)}try{if(await uu(ze,mt),xn.completeDrag(!0),mt.length===0){const $e=document.querySelector(`[data-column-index="${ze}"] .sortable-column-container`);if($e){const it=E.get(ze);it&&(it.destroy(),E.delete(ze)),await ht(),R($e,ze)}}}catch($e){console.error("[LIST DRAG] Failed to save list order:",$e),xn.completeDrag(!1)}}}function K(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach(oe=>{oe instanceof HTMLElement&&ai(oe)})}function B(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach(oe=>{oe instanceof HTMLElement&&kc(oe)})}function R($,oe){if(!$||E.has(oe))return;const xe=new Ie($,{animation:150,ghostClass:"sortable-ghost-list",group:"lists",draggable:"[data-id]",filter:"ul, li, .create-list-container, .empty-drop-zone",preventOnFilter:!1,delay:50,delayOnStartOnly:!0,distance:5,emptyInsertThreshold:50,forceFallback:!0,fallbackOnBody:!0,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onStart:Pe=>{if(typeof document<"u"){if(document.querySelector(".modal-backdrop")){xe.option("disabled",!0),setTimeout(()=>{xe.option("disabled",!1)},0);return}document.body.classList.add("list-dragging-active")}K()},onMove:Pe=>{Pe.to&&Pe.to instanceof HTMLElement&&ai(Pe.to),Pe.from&&Pe.from instanceof HTMLElement&&ai(Pe.from)},onEnd:Pe=>{typeof document<"u"&&document.body.classList.remove("list-dragging-active"),B(),T(Pe,oe)}});E.set(oe,xe)}Xs(()=>{E.forEach($=>{$&&$.destroy()}),E.clear()}),at(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(f(p)).length===0){const $={};for(const oe of i())$[oe.id]="";I(p,$,!0)}}),at(()=>{if(i()&&Array.isArray(i())&&i().length>0){const $={...f(p)};let oe=!1;for(const xe of i())xe.id in $||($[xe.id]="",oe=!0);oe&&I(p,$,!0)}}),at(()=>{const $=xn.subscribe(oe=>{I(v,oe.lists,!0)});return()=>{$()}}),at(()=>{i()&&Array.isArray(i())&&xn.initializeFromQuery(i())});const U=5;let ee=It(()=>Ec(f(v),U));async function Y($,oe){const xe=f(ee);if(!xe||xe.length===0)return;const Pe=Pv(xe,$,oe,U);if(!Pe)return;Pe.updatedDraggableLists;const ze="targetColumnIndex"in Pe&&Pe.targetColumnIndex!==void 0?Number(Pe.targetColumnIndex):0,We="targetColumnItems"in Pe&&Pe.targetColumnItems!==void 0&&Array.isArray(Pe.targetColumnItems)?Pe.targetColumnItems:[];if(We.length!==0){xn.startDrag(),xn.updateDragState(ze,We);try{const rt=Array.isArray(We)?We:[];await uu(ze,rt),xn.completeDrag(!0)}catch(rt){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",rt),xn.completeDrag(!1)}f(w).active&&f(w).listId===$&&await Tc($)}}function H($){return f(w).active===!0&&f(w).listId===$}function Z($){I(w,{...f(w),active:!0,listId:$,shouldRefocusOnNextTab:!1},!0)}function re(){f(w).listId!=null?I(w,{...f(w),active:!1,listId:null,lastDraggedId:f(w).listId,shouldRefocusOnNextTab:!0},!0):I(w,{...f(w),active:!1,listId:null},!0)}function X(){if(typeof document>"u")return;const $=document.activeElement;$&&$ instanceof HTMLElement&&$.blur()}function Te($,oe){const xe=$.currentTarget,Pe=$.target,ze=$.key;if(!H(oe)){ze==="Enter"||ze===" "?xe instanceof HTMLElement&&xe===Pe&&($.preventDefault(),$.stopPropagation(),$.stopImmediatePropagation(),oe!=null&&Z(oe)):ze==="Escape"&&xe instanceof HTMLElement&&xe===Pe&&($.preventDefault(),$.stopPropagation(),$.stopImmediatePropagation(),oe!=null&&I(w,{...f(w),lastDraggedId:oe,shouldRefocusOnNextTab:!0},!0),xe.blur());return}}at(()=>{typeof document>"u"||(f(w).active?document.body.classList.add("keyboard-list-dragging-active"):document.body.classList.remove("keyboard-list-dragging-active"))}),at(()=>typeof document>"u"?void 0:Uv({getKeyboardListDrag:()=>({active:f(w).active,listId:f(w).listId}),getLastKeyboardDraggedListId:()=>f(w).lastDraggedId,getShouldRefocusListOnNextTab:()=>f(w).shouldRefocusOnNextTab,setShouldRefocusListOnNextTab:oe=>{I(w,{...f(w),shouldRefocusOnNextTab:oe},!0)}},(oe,xe)=>Y(oe,xe),()=>re(),()=>X()));function ke($,oe){f(p)[$]=oe}const Se=Yv({getColumnIndex:()=>f(m),setColumnIndex:$=>{I(m,$,!0)},getInput:()=>f(x),setInput:$=>{I(x,$,!0)},getInputElement:()=>f(_)}),{handleCreateListClick:Be,handleCreateListKeydown:Ze,handleCreateListInputEscape:pt,handleCreateList:ce,handleCreateListOnTab:Ue,setupClickOutsideEffect:Ce,setupFocusEffect:Ye}=Se;at(()=>Ce()),at(()=>Ye());var Fe=Op(),st=ve(Fe);{var Xe=$=>{var oe=Lp();ye($,oe)},Ne=$=>{var oe=pr(),xe=Yt(oe);{var Pe=ze=>{var We=Pp();yn(We,21,()=>f(ee),La,(rt,Ot,xt)=>{{let mt=It(()=>({active:f(w).active,listId:f(w).listId}));Cp(rt,{columnIndex:xt,get columnLists(){return f(Ot)},get stableLists(){return f(d)},get newTaskInputs(){return f(p)},get createListColumnIndex(){return f(m)},get keyboardListDrag(){return f(mt)},onInputChange:ke,onListKeyboardKeydown:Te,get onCreateListClick(){return Be},get onCreateListKeydown(){return Ze},get onCreateListInputEscape(){return pt},get onCreateList(){return ce},get onCreateListOnTab(){return Ue},onColumnElementReady:($e,it)=>{$e&&setTimeout(()=>{R($e,it)},10)},get allLists(){return i()},get createListInput(){return f(x)},set createListInput($e){I(x,$e,!0)},get createListInputElement(){return f(_)},set createListInputElement($e){I(_,$e,!0)}})}}),ye(ze,We)};wt(xe,ze=>{Array.isArray(i())&&ze(Pe)},!0)}ye($,oe)};wt(st,$=>{i()===void 0||i()===null?$(Xe):$(Ne,!1)})}ye(t,Fe),Fn(),s()}var Rp=Oe("<p>Loading...</p>"),Kp=Oe("<p>Loading data...</p>"),Np=Oe('<p class="text-grey-60">No archived lists or tasks</p>'),Bp=Oe('<span class="text-sm text-grey-60"> </span>'),Fp=Oe('<span class="text-xs bg-grey-30 px-2 py-1 rounded">[List Archived]</span> <!>',1),jp=Oe('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),Hp=Oe('<p class="text-sm text-grey-60 italic">No archived tasks</p>'),Up=Oe('<li class="flex items-center gap-3 flex-wrap"><span class="line-through text-grey-100"> </span> <!></li>'),zp=Oe('<div class="mb-4"><h4 class="text-sm font-medium text-grey-60 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),Vp=Oe('<div class="border-b border-grey-50 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold text-grey-110"> </h3> <!></div></div> <div class="border-b border-grey-50 pb-4"><!></div>',1),Yp=Oe('<div class="grid grid-cols-2 gap-4"></div>'),Wp=Oe('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function qp(t,e){Bn(e,!0);const i=()=>Ga(f(v),"$listsQuery",s),a=()=>Ga(f(d),"$archivedTasksQuery",s),[s,u]=Gs();let d=he(null),v=he(null);at(()=>{Xa(I(d,Ja(()=>Ev()),!0),"$archivedTasksQuery",s),Xa(I(v,Ja(()=>bv()),!0),"$listsQuery",s)});function p(T){return T?new Date(T).toDateString():null}function m(T){return T?new Date(T).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let x=It(()=>{const T=f(d)?a():null,K=f(v)?i():null;if(!K||!Array.isArray(K))return[];const B={};if(T&&Array.isArray(T))for(const U of T)B[U.listId]||(B[U.listId]=[]),B[U.listId].push(U);const R=[];for(const U of K){const ee=U.archivedAt!=null,Y=B[U.id]&&B[U.id].length>0;if(ee||Y){const H=B[U.id]||[],Z={};for(const re of H){const X=p(re.archivedAt)||"Unknown";Z[X]||(Z[X]=[]),Z[X].push(re)}R.push({list:U,listArchiveDate:U.archivedAt?p(U.archivedAt):null,tasksByDate:Z,hasTasks:H.length>0})}}return R.sort((U,ee)=>{if(U.list.order!==ee.list.order)return U.list.order-ee.list.order;const Y=U.list.name??"Unnamed list",H=ee.list.name??"Unnamed list";return Y.localeCompare(H)}),R});function _(T){return T.sort((K,B)=>{if(K==="Unknown")return 1;if(B==="Unknown")return-1;const R=new Date(K).getTime();return new Date(B).getTime()-R})}async function w(T){try{(await Sv(T)).listRestored&&console.log("Task and its list have been restored")}catch(K){console.error("Error restoring task:",K)}}var E=Wp(),L=Re(ve(E),2);{var D=T=>{var K=Rp();ye(T,K)},A=T=>{var K=pr(),B=Yt(K);{var R=ee=>{var Y=Kp();ye(ee,Y)},U=ee=>{var Y=pr(),H=Yt(Y);{var Z=X=>{var Te=Np();ye(X,Te)},re=X=>{var Te=Yp();yn(Te,21,()=>f(x),La,(ke,Se)=>{const Be=It(()=>f(Se).list),Ze=It(()=>f(Be).name??"Unnamed list"),pt=It(()=>f(Be).archivedAt!=null),ce=It(()=>f(Se).listArchiveDate);var Ue=Vp(),Ce=Yt(Ue),Ye=ve(Ce),Fe=ve(Ye),st=ve(Fe),Xe=Re(Fe,2);{var Ne=We=>{var rt=Fp(),Ot=Re(Yt(rt),2);{var xt=mt=>{var $e=Bp(),it=ve($e);gt(yt=>Jt(it,`- ${yt??""}`),[()=>m(f(ce))]),ye(mt,$e)};wt(Ot,mt=>{f(ce)&&mt(xt)})}ye(We,rt)},$=We=>{var rt=jp();ye(We,rt)};wt(Xe,We=>{f(pt)?We(Ne):We($,!1)})}var oe=Re(Ce,2),xe=ve(oe);{var Pe=We=>{var rt=Hp();ye(We,rt)},ze=We=>{var rt=pr(),Ot=Yt(rt);yn(Ot,17,()=>_(Object.keys(f(Se).tasksByDate)),La,(xt,mt)=>{const $e=It(()=>f(Se).tasksByDate[f(mt)]);var it=zp(),yt=ve(it),$t=ve(yt),ge=Re(yt,2);yn(ge,21,()=>f($e),La,(Mt,Gt)=>{var Xt=Up(),Ve=ve(Xt),F=ve(Ve),V=Re(Ve,2);On(V,{variant:"primary",size:"small",onclick:()=>w(f(Gt).id),children:(J,M)=>{var te=Pn("Restore");ye(J,te)},$$slots:{default:!0}}),gt(()=>Jt(F,f(Gt).text)),ye(Mt,Xt)}),gt(Mt=>Jt($t,Mt),[()=>f(mt)==="Unknown"?"Unknown Date":m(f(mt))]),ye(xt,it)}),ye(We,rt)};wt(xe,We=>{f(Se).hasTasks?We(ze,!1):We(Pe)})}gt(()=>Jt(st,f(Ze))),ye(ke,Ue)}),ye(X,Te)};wt(H,X=>{f(x).length===0?X(Z):X(re,!1)},!0)}ye(ee,Y)};wt(B,ee=>{!a()||!i()?ee(R):ee(U,!1)},!0)}ye(T,K)};wt(L,T=>{!f(d)||!f(v)?T(D):T(A,!1)})}gt(()=>yr(E,`width: ${Ls}px;`)),ye(t,E),Fn(),u()}var Gp=Oe('<main class="min-h-screen flex flex-col items-center justify-center bg-grey-10 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-between print:hidden"><div class="flex gap-4"><a href="#/prototype/sortablejs" class="text-blue-500 hover:underline">SortableJS Basic</a> <a href="?prototype=nested" class="text-blue-500 hover:underline">SortableJS Nested</a></div> <!></div> <div class="bg-grey-10 print:bg-grey-10 border-2 border-grey-50 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-grey-80 pointer-events-none z-0"></div> <div class="absolute inset-[16px] z-10"><!></div></div> <!></main>');function Xp(t){function e(){window.print()}var i=Gp(),a=ve(i),s=Re(ve(a),2);On(s,{variant:"primary",size:"large",onclick:e,children:(m,x)=>{var _=Pn("Print");ye(m,_)},$$slots:{default:!0}});var u=Re(a,2),d=Re(ve(u),2),v=ve(d);Mp(v,{});var p=Re(u,2);qp(p,{}),gt(()=>{yr(a,`width: ${Ls}px;`),yr(u,`width: ${Ls}px; height: ${Rv}px;`)}),ye(t,i)}var Qp=Oe('<li class="p-3 bg-grey-20 rounded cursor-move hover:bg-grey-30"> </li>'),Zp=Oe('<li class="p-3 bg-grey-20 rounded cursor-move hover:bg-grey-30"> </li>'),Jp=Oe('<div class="min-h-screen bg-grey-10 p-8"><div class="max-w-6xl mx-auto"><h1 class="text-3xl font-bold mb-4">SortableJS Prototype</h1> <p class="mb-6 text-grey-100">Testing SortableJS integration with Svelte 5</p> <p class="mb-4 text-sm text-grey-80">Component loaded successfully!</p> <div class="grid grid-cols-2 gap-8"><div class="bg-white p-4 rounded shadow"><h2 class="text-xl font-semibold mb-4">List 1</h2> <ul id="list1" class="space-y-2"></ul></div> <div class="bg-white p-4 rounded shadow"><h2 class="text-xl font-semibold mb-4">List 2</h2> <ul id="list2" class="space-y-2"></ul></div></div> <div class="mt-8 p-4 bg-grey-20 rounded"><h3 class="font-semibold mb-2">State:</h3> <pre class="text-sm overflow-auto"> </pre></div></div></div>');function $p(t,e){Bn(e,!0),console.log("SortableJSPrototype component script running");let i=he(Dt([{id:1,text:"Task 1"},{id:2,text:"Task 2"},{id:3,text:"Task 3"},{id:4,text:"Task 4"},{id:5,text:"Task 5"}])),a=he(Dt([{id:6,text:"Task 6"},{id:7,text:"Task 7"},{id:8,text:"Task 8"}])),s=he(null),u=he(null),d=he(null),v=he(null);Qa(()=>{if(console.log("SortableJSPrototype onMount called",{list1Element:f(s),list2Element:f(u)}),!f(s)||!f(u)){console.warn("List elements not ready yet");return}return I(d,new Ie(f(s),{animation:150,ghostClass:"sortable-ghost",group:"tasks",onEnd:K=>{const{oldIndex:B,newIndex:R,from:U,to:ee}=K;if(U===ee){if(U===f(s)){const Y=Array.from(f(s).children);I(i,Y.map((H,Z)=>{const re=parseInt(H.dataset.id);return f(i).find(X=>X.id===re)||{id:re,text:`Task ${re}`}}),!0)}else if(U===f(u)){const Y=Array.from(f(u).children);I(a,Y.map((H,Z)=>{const re=parseInt(H.dataset.id);return f(a).find(X=>X.id===re)||{id:re,text:`Task ${re}`}}),!0)}}else if(U===f(s)&&ee===f(u)){const Y=f(i)[B];I(i,f(i).filter((H,Z)=>Z!==B),!0),I(a,[...f(a).slice(0,R),Y,...f(a).slice(R)],!0)}else if(U===f(u)&&ee===f(s)){const Y=f(a)[B];I(a,f(a).filter((H,Z)=>Z!==B),!0),I(i,[...f(i).slice(0,R),Y,...f(i).slice(R)],!0)}console.log("Drag ended:",{oldIndex:B,newIndex:R,from:U.id,to:ee.id}),console.log("List 1 tasks:",f(i)),console.log("List 2 tasks:",f(a))}}),!0),I(v,new Ie(f(u),{animation:150,ghostClass:"sortable-ghost",group:"tasks",onEnd:K=>{const{oldIndex:B,newIndex:R,from:U,to:ee}=K;if(U===ee){if(U===f(s)){const Y=Array.from(f(s).children);I(i,Y.map((H,Z)=>{const re=parseInt(H.dataset.id);return f(i).find(X=>X.id===re)||{id:re,text:`Task ${re}`}}),!0)}else if(U===f(u)){const Y=Array.from(f(u).children);I(a,Y.map((H,Z)=>{const re=parseInt(H.dataset.id);return f(a).find(X=>X.id===re)||{id:re,text:`Task ${re}`}}),!0)}}else if(U===f(s)&&ee===f(u)){const Y=f(i)[B];I(i,f(i).filter((H,Z)=>Z!==B),!0),I(a,[...f(a).slice(0,R),Y,...f(a).slice(R)],!0)}else if(U===f(u)&&ee===f(s)){const Y=f(a)[B];I(a,f(a).filter((H,Z)=>Z!==B),!0),I(i,[...f(i).slice(0,R),Y,...f(i).slice(R)],!0)}console.log("Drag ended:",{oldIndex:B,newIndex:R,from:U.id,to:ee.id}),console.log("List 1 tasks:",f(i)),console.log("List 2 tasks:",f(a))}}),!0),()=>{f(d)&&f(d).destroy(),f(v)&&f(v).destroy()}});var p=Jp(),m=ve(p),x=Re(ve(m),6),_=ve(x),w=Re(ve(_),2);yn(w,21,()=>f(i),K=>K.id,(K,B)=>{var R=Qp(),U=ve(R);gt(()=>{ft(R,"data-id",f(B).id),Jt(U,f(B).text)}),ye(K,R)}),Pt(w,K=>I(s,K),()=>f(s));var E=Re(_,2),L=Re(ve(E),2);yn(L,21,()=>f(a),K=>K.id,(K,B)=>{var R=Zp(),U=ve(R);gt(()=>{ft(R,"data-id",f(B).id),Jt(U,f(B).text)}),ye(K,R)}),Pt(L,K=>I(u,K),()=>f(u));var D=Re(x,2),A=Re(ve(D),2),T=ve(A);gt(K=>Jt(T,K),[()=>JSON.stringify({list1Tasks:f(i),list2Tasks:f(a)},null,2)]),ye(t,p),Fn()}var em=Oe('<li class="p-2 bg-white rounded cursor-move hover:bg-grey-30 svelte-1auxyjb" tabindex="0" role="button"> </li>'),tm=Oe('<div class="list-container border-2 border-grey-50 rounded p-4 bg-grey-20 svelte-1auxyjb" tabindex="0" role="button"><h3 class="font-semibold mb-2 cursor-move"> </h3> <ul class="space-y-2 min-h-[50px]"></ul></div>'),nm=Oe('<li class="p-2 bg-white rounded cursor-move hover:bg-grey-30 svelte-1auxyjb" tabindex="0" role="button"> </li>'),rm=Oe('<div class="list-container border-2 border-grey-50 rounded p-4 bg-grey-20 svelte-1auxyjb" tabindex="0" role="button"><h3 class="font-semibold mb-2 cursor-move"> </h3> <ul class="space-y-2 min-h-[50px]"></ul></div>'),im=Oe('<div class="min-h-screen bg-grey-10 p-8"><div class="max-w-7xl mx-auto"><h1 class="text-3xl font-bold mb-4">SortableJS Nested Containers Prototype</h1> <p class="mb-6 text-grey-100">Testing nested drag-and-drop: Columns â Lists â Tasks</p> <div class="mb-4 p-3 bg-blue-50 rounded text-sm"><p class="font-semibold mb-2">Keyboard Controls:</p> <ul class="list-disc list-inside space-y-1"><li class="svelte-1auxyjb"><strong>Enter/Space</strong> on item: Start/End keyboard drag</li> <li class="svelte-1auxyjb"><strong>Arrow Keys</strong>: Move item during drag</li> <li class="svelte-1auxyjb"><strong>Tab/Enter/Space/Escape</strong>: Drop item</li> <li class="svelte-1auxyjb"><strong>Tab</strong> after drop: Resume focus on dropped item</li></ul></div> <div class="grid grid-cols-2 gap-8"><div class="bg-white p-4 rounded shadow"><h2 class="text-xl font-semibold mb-4">Column 1</h2> <div id="column1" class="space-y-4"></div></div> <div class="bg-white p-4 rounded shadow"><h2 class="text-xl font-semibold mb-4">Column 2</h2> <div id="column2" class="space-y-4"></div></div></div> <div class="mt-8 p-4 bg-grey-20 rounded"><h3 class="font-semibold mb-2">State:</h3> <pre class="text-sm overflow-auto max-h-96"> </pre></div></div></div>');function am(t,e){Bn(e,!0);const i=150,a=100,s=100,u=200,d=10;let v=he(!1),p=he(null),m=he(null),x=he(null),_=he(null),w=he(!1),E=he(!1),L=he(null),D=he(Dt([{id:1,name:"List 1",tasks:[{id:1,text:"Task 1-1"},{id:2,text:"Task 1-2"},{id:3,text:"Task 1-3"}]},{id:2,name:"List 2",tasks:[{id:4,text:"Task 2-1"},{id:5,text:"Task 2-2"}]},{id:3,name:"List 3",tasks:[{id:6,text:"Task 3-1"},{id:7,text:"Task 3-2"}]}])),A=he(Dt([{id:4,name:"List 4",tasks:[{id:8,text:"Task 4-1"},{id:9,text:"Task 4-2"},{id:10,text:"Task 4-3"}]},{id:5,name:"List 5",tasks:[{id:11,text:"Task 5-1"},{id:12,text:"Task 5-2"},{id:13,text:"Task 5-3"},{id:14,text:"Task 5-4"}]},{id:6,name:"List 6",tasks:[{id:15,text:"Task 6-1"}]}])),T=he(null),K=he(null);Dt(new Map);let B=Dt(new Map),R=Dt(new Map),U=Dt(new Map);function ee(){return[...f(D),...f(A)]}function Y(F,V){return F&&(B.set(V,F),setTimeout(()=>{!U.has(V)&&B.has(V)&&H(V)},d)),{update(J){B.delete(V),F&&B.set(J,F)},destroy(){B.delete(V);const J=U.get(V);J&&(J.destroy(),U.delete(V))}}}function H(F){const V=B.get(F);if(!V||U.has(F))return;const J=new Ie(V,{animation:i,ghostClass:"sortable-ghost",group:"tasks",draggable:"li[data-task-id]",onStart:()=>{I(E,!0),I(L,"task"),ze()},onEnd:M=>{pt(M,F),I(E,!1),I(L,null),We()}});U.set(F,J)}function Z(F){return{animation:i,ghostClass:"sortable-ghost",group:"lists",draggable:".list-container",filter:"ul, li",preventOnFilter:!1,onStart:()=>{I(E,!0),I(L,"list"),ze()},onEnd:V=>{F(V),I(E,!1),I(L,null),We()}}}Qa(()=>{if(f(T)&&f(K)){const F=new Ie(f(T),Z(J=>{Se(J,1,2)}));R.set(f(T),F);const V=new Ie(f(K),Z(J=>{Se(J,2,1)}));R.set(f(K),V)}setTimeout(()=>{re()},a)});function re(){const F=ee(),V=new Set(F.map(J=>J.id));U.forEach((J,M)=>{V.has(M)||(J.destroy(),U.delete(M))}),F.forEach(J=>{H(J.id)})}async function X(){U.forEach(F=>F.destroy()),U.clear(),await ht(),await ht(),await new Promise(F=>setTimeout(F,s)),re(),setTimeout(()=>{ee().forEach(V=>{U.has(V.id)||H(V.id)})},u)}function Te(F,V){return Array.from(F.children).map(M=>{const te=parseInt(M.dataset.listId);return V.find(ie=>ie.id===te)}).filter(Boolean)}function ke(F,V,J,M){const te=F[J],ie=F.filter((_e,we)=>we!==J),se=[...V.slice(0,M),te,...V.slice(M)];return{newFromLists:ie,newToLists:se}}function Se(F,V,J){const{oldIndex:M,newIndex:te,from:ie,to:se}=F;if(ie===se)V===1?I(D,Te(f(T),f(D)),!0):I(A,Te(f(K),f(A)),!0);else{const _e=f(V===1?D:A),we=f(J===1?D:A),{newFromLists:je,newToLists:ue}=ke(_e,we,M,te);V===1?(I(D,je,!0),I(A,ue,!0)):(I(A,je,!0),I(D,ue,!0)),X()}}function Be(F,V){return Array.from(F.children).map(M=>{const te=parseInt(M.dataset.taskId);return V.find(ie=>ie.id===te)}).filter(Boolean)}function Ze(F){f(D).find(V=>V.id===F)?I(D,[...f(D)],!0):I(A,[...f(A)],!0)}function pt(F,V){const{oldIndex:J,newIndex:M,from:te,to:ie}=F,se=parseInt(ie.dataset.listId),_e=ee(),we=_e.find(ue=>ue.id===V),je=_e.find(ue=>ue.id===se);if(!(!we||!je)){if(V===se)we.tasks=Be(ie,we.tasks);else{const ue=we.tasks[J];we.tasks=we.tasks.filter((vt,ut)=>ut!==J),je.tasks=[...je.tasks.slice(0,M),ue,...je.tasks.slice(M)]}Ze(V),V!==se&&Ze(se)}}function ce(F){return document.querySelector(`li[data-task-id="${F}"]`)}function Ue(F){return document.querySelector(`.list-container[data-list-id="${F}"]`)}function Ce(F){const V=Ue(F);return V?V.querySelector("ul[data-list-id]"):null}function Ye(F){const V=F.closest("ul[data-list-id]");return V?parseInt(V.dataset.listId):null}function Fe(F,V){const M=ee().find(te=>te.id===V);return M?M.tasks.findIndex(te=>te.id===F):-1}function st(F,V){return Array.from(V.children).findIndex(M=>parseInt(M.dataset.listId)===F)}function Xe(F){return f(D).find(V=>V.id===F)?{element:f(T),lists:f(D),columnNum:1}:f(A).find(V=>V.id===F)?{element:f(K),lists:f(A),columnNum:2}:null}function Ne(F,V){const J=Xe(F);if(!J)return null;const M=st(F,J.element);if(M===-1)return null;if(V==="up"&&M>0)return parseInt(J.element.children[M-1].dataset.listId);if(V==="down"&&M<J.element.children.length-1)return parseInt(J.element.children[M+1].dataset.listId);if(V==="left"&&J.columnNum===2){const te=Math.min(M,f(D).length);return f(D)[te]?.id||null}else if(V==="right"&&J.columnNum===1){const te=Math.min(M,f(A).length);return f(A)[te]?.id||null}return null}function $(F,V){const J=ce(F);if(!J)return!1;const M=Ye(J);if(!M)return!1;const te=ee(),ie=te.find(ue=>ue.id===M);if(!ie)return!1;const se=Fe(F,M);if(se===-1)return!1;let _e=M,we=se;if(V==="up")if(se>0)we=se-1;else{const ue=Ne(M,"up");if(ue){_e=ue;const vt=te.find(ut=>ut.id===_e);if(vt&&vt.tasks.length>0)we=vt.tasks.length;else return!1}else return!1}else if(V==="down")if(se<ie.tasks.length-1)we=se+1;else{const ue=Ne(M,"down");if(ue)_e=ue,we=0;else return!1}else if(V==="left"||V==="right"){const ue=Ne(M,V);if(ue){_e=ue;const vt=te.find(ut=>ut.id===_e);if(vt)we=Math.min(se,vt.tasks.length);else return!1}else return!1}else return!1;const je=ie.tasks[se];if(!je)return!1;if(M===_e){const ue=[...ie.tasks];ue.splice(se,1),ue.splice(we,0,je),ie.tasks=ue,Ze(M)}else{const ue=te.find(vt=>vt.id===_e);if(!ue)return!1;ie.tasks=ie.tasks.filter((vt,ut)=>ut!==se),ue.tasks=[...ue.tasks.slice(0,we),je,...ue.tasks.slice(we)],Ze(M),Ze(_e)}return I(p,F,!0),!0}function oe(F,V){const J=Xe(F);if(!J)return!1;const M=st(F,J.element);if(M===-1)return!1;let te=J,ie=M;if(V==="up"&&M>0)ie=M-1;else if(V==="down"&&M<J.lists.length-1)ie=M+1;else if(V==="left"&&J.columnNum===2)te={element:f(T),lists:f(D),columnNum:1},ie=Math.min(M,f(D).length);else if(V==="right"&&J.columnNum===1)te={element:f(K),lists:f(A),columnNum:2},ie=Math.min(M,f(A).length);else return!1;const se=J.lists[M];if(!se)return!1;if(J.columnNum===te.columnNum){const _e=[...J.lists];_e.splice(M,1),_e.splice(ie,0,se),J.columnNum===1?I(D,_e,!0):I(A,_e,!0)}else J.columnNum===1?(I(D,f(D).filter((_e,we)=>we!==M),!0),I(A,[...f(A).slice(0,ie),se,...f(A).slice(ie)],!0)):(I(A,f(A).filter((_e,we)=>we!==M),!0),I(D,[...f(D).slice(0,ie),se,...f(D).slice(ie)],!0)),X();return I(p,F,!0),!0}function xe(F){F instanceof HTMLElement&&(F.classList.add("keyboard-drop-zone"),F.style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",F.style.backgroundColor="rgba(107, 143, 217, 0.04)")}function Pe(F){F instanceof HTMLElement&&(F.classList.remove("keyboard-drop-zone"),F.style.removeProperty("box-shadow"),F.style.removeProperty("background-color"))}function ze(){!f(E)||!f(L)||(f(L)==="task"?ee().forEach(F=>{const V=Ce(F.id);V&&xe(V)}):f(L)==="list"&&(f(T)&&xe(f(T)),f(K)&&xe(f(K))))}function We(){document.querySelectorAll(".keyboard-drop-zone").forEach(F=>{Pe(F)})}function rt(){if(document.querySelectorAll(".keyboard-drag-active").forEach(V=>{V.classList.remove("keyboard-drag-active"),V instanceof HTMLElement&&(V.style.removeProperty("border"),V.style.removeProperty("background-color"))}),f(E)||We(),!f(v)||!f(p)||!f(m))return;const F=f(m)==="task"?ce(f(p)):Ue(f(p));F&&(F.classList.add("keyboard-drag-active"),document.activeElement!==F&&F instanceof HTMLElement&&F.focus()),f(m)==="task"?ee().forEach(V=>{const J=Ce(V.id);J&&xe(J)}):f(m)==="list"&&(f(T)&&xe(f(T)),f(K)&&xe(f(K)))}function Ot(F,V,J){const M=F.key;M==="Enter"||M===" "?(F.preventDefault(),F.stopPropagation(),f(v)?f(p)===V&&f(m)===J&&(I(v,!1),I(_,F.currentTarget,!0),I(w,!0),I(p,null),I(m,null),I(x,null),rt(),F.currentTarget instanceof HTMLElement&&F.currentTarget.blur()):(I(v,!0),I(p,V,!0),I(m,J,!0),I(x,F.currentTarget,!0),rt())):M==="Escape"&&(f(v)||(F.preventDefault(),F.stopPropagation(),F.currentTarget instanceof HTMLElement&&F.currentTarget.blur()))}function xt(F){const V=F.key;if(!f(v)&&V==="Tab"&&f(w)&&f(_)){F.preventDefault(),f(_).focus(),I(w,!1),I(_,null);return}if(V==="Escape"){if(f(v)){F.preventDefault(),F.stopPropagation(),F.stopImmediatePropagation();const J=f(x);I(v,!1),I(_,J,!0),I(w,!0),I(p,null),I(m,null),I(x,null),rt(),J instanceof HTMLElement&&J.blur()}else{const J=document.activeElement;J&&(J.hasAttribute("data-task-id")||J.classList.contains("list-container"))&&(F.preventDefault(),F.stopPropagation(),J instanceof HTMLElement&&J.blur())}return}if(f(v)){if(V==="ArrowUp"||V==="ArrowDown"||V==="ArrowLeft"||V==="ArrowRight"){F.preventDefault(),F.stopPropagation();const J=V==="ArrowUp"?"up":V==="ArrowDown"?"down":V==="ArrowLeft"?"left":"right";f(m)==="task"?$(f(p),J)&&ht().then(()=>{const te=ce(f(p));te&&I(x,te,!0),rt()}):f(m)==="list"&&oe(f(p),J)&&ht().then(()=>{const te=Ue(f(p));te&&I(x,te,!0),rt()})}else if(V==="Tab"||V==="Enter"||V===" "){F.preventDefault(),F.stopPropagation(),F.stopImmediatePropagation();const J=f(x);I(v,!1),I(_,J,!0),I(w,!0),I(p,null),I(m,null),I(x,null),rt(),J instanceof HTMLElement&&J.blur()}}}Qa(()=>{document.addEventListener("keydown",xt,!0)}),Xs(()=>{document.removeEventListener("keydown",xt,!0)}),at(()=>{rt()}),at(()=>()=>{R.forEach(F=>F.destroy()),U.forEach(F=>F.destroy())});var mt=im(),$e=ve(mt),it=Re(ve($e),6),yt=ve(it),$t=Re(ve(yt),2);yn($t,21,()=>f(D),F=>F.id,(F,V)=>{var J=tm();J.__keydown=se=>Ot(se,f(V).id,"list");var M=ve(J),te=ve(M),ie=Re(M,2);yn(ie,21,()=>f(V).tasks,se=>se.id,(se,_e)=>{var we=em();we.__keydown=ue=>Ot(ue,f(_e).id,"task");var je=ve(we);gt(()=>{ft(we,"data-task-id",f(_e).id),ft(we,"aria-grabbed",f(v)&&f(p)===f(_e).id&&f(m)==="task"),Jt(je,f(_e).text)}),ye(se,we)}),Yl(ie,(se,_e)=>Y?.(se,_e),()=>f(V).id),gt(()=>{ft(J,"data-list-id",f(V).id),ft(J,"aria-grabbed",f(v)&&f(p)===f(V).id&&f(m)==="list"),Jt(te,f(V).name),ft(ie,"data-list-id",f(V).id)}),ye(F,J)}),Pt($t,F=>I(T,F),()=>f(T));var ge=Re(yt,2),Mt=Re(ve(ge),2);yn(Mt,21,()=>f(A),F=>F.id,(F,V)=>{var J=rm();J.__keydown=se=>Ot(se,f(V).id,"list");var M=ve(J),te=ve(M),ie=Re(M,2);yn(ie,21,()=>f(V).tasks,se=>se.id,(se,_e)=>{var we=nm();we.__keydown=ue=>Ot(ue,f(_e).id,"task");var je=ve(we);gt(()=>{ft(we,"data-task-id",f(_e).id),ft(we,"aria-grabbed",f(v)&&f(p)===f(_e).id&&f(m)==="task"),Jt(je,f(_e).text)}),ye(se,we)}),Yl(ie,(se,_e)=>Y?.(se,_e),()=>f(V).id),gt(()=>{ft(J,"data-list-id",f(V).id),ft(J,"aria-grabbed",f(v)&&f(p)===f(V).id&&f(m)==="list"),Jt(te,f(V).name),ft(ie,"data-list-id",f(V).id)}),ye(F,J)}),Pt(Mt,F=>I(K,F),()=>f(K));var Gt=Re(it,2),Xt=Re(ve(Gt),2),Ve=ve(Xt);gt(F=>Jt(Ve,F),[()=>JSON.stringify({column1Lists:f(D),column2Lists:f(A)},null,2)]),ye(t,mt),Fn()}Hr(["keydown"]);const om=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],sm=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function lm(){try{if(await Ge.lists.count()>0)return;await Ge.lists.bulkAdd(om),await Ge.tasks.bulkAdd(sm),console.log("Database seeded with mock data")}catch(t){throw console.error("Error seeding database:",t),t}}(async()=>{await lm().catch(console.error);const t=window.location.hash,e=window.location.pathname,a=new URLSearchParams(window.location.search).get("prototype")||(t.includes("nested")?"nested":t.includes("sortablejs")?"sortablejs":null),s=t==="#/prototype/sortablejs"||t==="#prototype/sortablejs"||t==="#/prototype/nested"||t==="#prototype/nested"||t.includes("prototype/sortablejs")||t.includes("prototype/nested")||e.includes("/prototype/sortablejs")||e.includes("/prototype/nested")||a==="sortablejs"||a==="nested";console.log("Route check:",{hash:t,pathname:e,search:window.location.search,isPrototypeRoute:s,fullUrl:window.location.href});const u=document.getElementById("app");if(!u){console.error("App element not found!");return}if(console.log("App element found:",u),s){const d=a==="nested"?am:$p;console.log(`Mounting SortableJS Prototype (${a||"basic"})`);try{Vl(d,{target:u}),console.log("Prototype mounted successfully")}catch(v){console.error("Error mounting prototype:",v)}}else{console.log("Mounting main App");try{Vl(Xp,{target:u}),console.log("Main app mounted successfully")}catch(d){console.error("Error mounting main app:",d)}}window.addEventListener("hashchange",()=>{window.location.reload()})})();
