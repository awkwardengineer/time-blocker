(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function a(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(c){if(c.ep)return;c.ep=!0;const f=a(c);fetch(c.href,f)}})();const qc="production",X=!qc.toLowerCase().startsWith("prod");var pu=Array.isArray,Zc=Array.prototype.indexOf,Mo=Array.from,Rn=Object.defineProperty,pr=Object.getOwnPropertyDescriptor,yu=Object.getOwnPropertyDescriptors,$c=Object.prototype,Qc=Array.prototype,No=Object.getPrototypeOf,js=Object.isExtensible;const Wi=()=>{};function Xc(e){for(var r=0;r<e.length;r++)e[r]()}function mu(){var e,r,a=new Promise((u,c)=>{e=u,r=c});return{promise:a,resolve:e,reject:r}}const Ze=2,Lo=4,Fo=8,Jc=1<<24,ln=16,cn=32,tr=64,ua=128,jt=512,tt=1024,mt=2048,fn=4096,Et=8192,kn=16384,Ko=32768,_r=65536,Gi=1<<17,gu=1<<18,Sr=1<<19,ef=1<<20,Mn=32768,po=1<<21,la=1<<22,Dn=1<<23,An=Symbol("$state"),tf=Symbol(""),_u=Symbol("proxy path"),hr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function nf(){if(X){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function zs(){if(X){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function rf(){if(X){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function af(e){if(X){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function of(){if(X){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function sf(e){if(X){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function uf(){if(X){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function lf(e){if(X){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function cf(){if(X){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ff(){if(X){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function df(){if(X){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function hf(){if(X){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const bu=1,wu=2,Eu=4,vf=8,pf=16,yf=1,mf=2,Xe=Symbol(),gf=Symbol("filename"),_f="http://www.w3.org/1999/xhtml";var xu="font-weight: bold",Tu="font-weight: normal";function so(e){X?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,xu,Tu):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function bf(){X?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",xu,Tu):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ku(e){return e===this.v}function Du(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Au(e){return!Du(e,this.v)}let wf=!1;function Gt(e,r){return e.label=r,Su(e.v,r),e}function Su(e,r){return e?.[_u]?.(r),e}function Ef(e){const r=new Error,a=xf();return a.length===0?null:(a.unshift(`
`),Rn(r,"stack",{value:a.join(`
`)}),Rn(r,"name",{value:e}),r)}function xf(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const a=r.split(`
`),u=[];for(let c=0;c<a.length;c++){const f=a[c],v=f.replaceAll("\\","/");if(f.trim()!=="Error"){if(f.includes("validate_each_keys"))return[];v.includes("svelte/src/internal")||v.includes("node_modules/.vite")||u.push(f)}}return u}let vt=null;function br(e){vt=e}let Xr=null;function Yi(e){Xr=e}let ai=null;function Vs(e){ai=e}function nr(e,r=!1,a){vt={p:vt,i:!1,c:null,e:null,s:e,x:null,l:null},X&&(vt.function=a,ai=a)}function rr(e){var r=vt,a=r.e;if(a!==null){r.e=null;for(var u of a)Uu(u)}return r.i=!0,vt=r.p,X&&(ai=vt?.function??null),{}}function Ou(){return!0}let $n=[];function Iu(){var e=$n;$n=[],Xc(e)}function Or(e){if($n.length===0&&!Zr){var r=$n;queueMicrotask(()=>{r===$n&&Iu()})}$n.push(e)}function Tf(){for(;$n.length>0;)Iu()}const yo=new WeakMap;function Cu(e){var r=Te;if(r===null)return be.f|=Dn,e;if(X&&e instanceof Error&&!yo.has(e)&&yo.set(e,kf(e,r)),(r.f&Ko)===0){if((r.f&ua)===0)throw X&&!r.parent&&e instanceof Error&&Pu(e),e;r.b.error(e)}else wr(e,r)}function wr(e,r){for(;r!==null;){if((r.f&ua)!==0)try{r.b.error(e);return}catch(a){e=a}r=r.parent}throw X&&e instanceof Error&&Pu(e),e}function kf(e,r){const a=pr(e,"message");if(!(a&&!a.configurable)){for(var u=Ho?"  ":"	",c=`
${u}in ${r.fn?.name||"<unknown>"}`,f=r.ctx;f!==null;)c+=`
${u}in ${f.function?.[gf].split("/").pop()}`,f=f.p;return{message:e.message+`
${c}
`,stack:e.stack?.split(`
`).filter(v=>!v.includes("svelte/src/internal")).join(`
`)}}}function Pu(e){const r=yo.get(e);r&&(Rn(e,"message",{value:r.message}),Rn(e,"stack",{value:r.stack}))}const Ki=new Set;let ke=null,zi=null,Ot=null,At=[],ca=null,mo=!1,Zr=!1;class Xt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){At=[],zi=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const u of r)this.#o(u,a);this.is_fork||this.#c(),this.is_deferred()?(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects)):(zi=this,ke=null,Hs(a.render_effects),Hs(a.effects),zi=null,this.#u?.resolve()),Ot=null}#o(r,a){r.f^=tt;for(var u=r.first;u!==null;){var c=u.f,f=(c&(cn|tr))!==0,v=f&&(c&tt)!==0,g=v||(c&Et)!==0||this.skipped_effects.has(u);if((u.f&ua)!==0&&u.b?.is_pending()&&(a={parent:a,effect:u,effects:[],render_effects:[],block_effects:[]}),!g&&u.fn!==null){f?u.f^=tt:(c&Lo)!==0?a.effects.push(u):si(u)&&((u.f&ln)!==0&&a.block_effects.push(u),ti(u));var y=u.first;if(y!==null){u=y;continue}}var D=u.parent;for(u=u.next;u===null&&D!==null;)D===a.effect&&(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects),a=a.parent),u=D.next,D=D.parent}}#s(r){for(const a of r)((a.f&mt)!==0?this.#a:this.#i).push(a),this.#l(a.deps),nt(a,tt)}#l(r){if(r!==null)for(const a of r)(a.f&Ze)===0||(a.f&Mn)===0||(a.f^=Mn,this.#l(a.deps))}capture(r,a){this.previous.has(r)||this.previous.set(r,a),(r.f&Dn)===0&&(this.current.set(r,r.v),Ot?.set(r,r.v))}activate(){ke=this,this.apply()}deactivate(){ke===this&&(ke=null,Ot=null)}flush(){if(this.activate(),At.length>0){if(Ru(),ke!==null&&ke!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Ki.size>1){this.previous.clear();var r=Ot,a=!0,u={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const f of Ki){if(f===this){a=!1;continue}const v=[];for(const[y,D]of this.current){if(f.current.has(y))if(a&&D!==f.current.get(y))f.current.set(y,D);else continue;v.push(y)}if(v.length===0)continue;const g=[...f.current.keys()].filter(y=>!this.current.has(y));if(g.length>0){var c=At;At=[];const y=new Set,D=new Map;for(const E of v)Mu(E,g,y,D);if(At.length>0){ke=f,f.apply();for(const E of At)f.#o(E,u);f.deactivate()}At=c}}ke=null,Ot=r}this.committed=!0,Ki.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)nt(r,mt),Jn(r);for(const r of this.#i)nt(r,fn),Jn(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=mu()).promise}static ensure(){if(ke===null){const r=ke=new Xt;Ki.add(ke),Zr||Xt.enqueue(()=>{ke===r&&r.flush()})}return ke}static enqueue(r){Or(r)}apply(){}}function Df(e){var r=Zr;Zr=!0;try{for(var a;;){if(Tf(),At.length===0&&(ke?.flush(),At.length===0))return ca=null,a;Ru()}}finally{Zr=r}}function Ru(){var e=On;mo=!0;var r=X?new Set:null;try{var a=0;for($i(!0);At.length>0;){var u=Xt.ensure();if(a++>1e3){if(X){var c=new Map;for(const v of u.current.keys())for(const[g,y]of v.updated??[]){var f=c.get(g);f||(f={error:y.error,count:0},c.set(g,f)),f.count+=y.count}for(const v of c.values())v.error&&console.error(v.error)}Af()}if(u.process(At),Sn.clear(),X)for(const v of u.current.keys())r.add(v)}}finally{if(mo=!1,$i(e),ca=null,X)for(const v of r)v.updated=null}}function Af(){try{uf()}catch(e){X&&Rn(e,"stack",{value:""}),wr(e,ca)}}let on=null;function Hs(e){var r=e.length;if(r!==0){for(var a=0;a<r;){var u=e[a++];if((u.f&(kn|Et))===0&&si(u)&&(on=new Set,ti(u),u.deps===null&&u.first===null&&u.nodes_start===null&&(u.teardown===null&&u.ac===null?qu(u):u.fn=null),on?.size>0)){Sn.clear();for(const c of on){if((c.f&(kn|Et))!==0)continue;const f=[c];let v=c.parent;for(;v!==null;)on.has(v)&&(on.delete(v),f.push(v)),v=v.parent;for(let g=f.length-1;g>=0;g--){const y=f[g];(y.f&(kn|Et))===0&&ti(y)}}on.clear()}}on=null}}function Mu(e,r,a,u){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const c of e.reactions){const f=c.f;(f&Ze)!==0?Mu(c,r,a,u):(f&(la|ln))!==0&&(f&mt)===0&&Nu(c,r,u)&&(nt(c,mt),Jn(c))}}function Nu(e,r,a){const u=a.get(e);if(u!==void 0)return u;if(e.deps!==null)for(const c of e.deps){if(r.includes(c))return!0;if((c.f&Ze)!==0&&Nu(c,r,a))return a.set(c,!0),!0}return a.set(e,!1),!1}function Jn(e){for(var r=ca=e;r.parent!==null;){r=r.parent;var a=r.f;if(mo&&r===Te&&(a&ln)!==0&&(a&gu)===0)return;if((a&(tr|cn))!==0){if((a&tt)===0)return;r.f^=tt}}At.push(r)}function Sf(e){let r=0,a=er(0),u;return X&&Gt(a,"createSubscriber version"),()=>{Jr()&&(C(a),ha(()=>(r===0&&(u=ui(()=>e(()=>$r(a)))),r+=1,()=>{Or(()=>{r-=1,r===0&&(u?.(),u=void 0,$r(a))})})))}}var Of=_r|Sr|ua;function If(e,r,a){new Cf(e,r,a)}class Cf{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#_=Sf(()=>(this.#d=er(this.#f),X&&Gt(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,a,u){this.#t=r,this.#n=a,this.#u=u,this.parent=Te.b,this.#e=!!this.#n.pending,this.#a=Wo(()=>{Te.b=this;{var c=this.#m();try{this.#i=St(()=>u(c))}catch(f){this.error(f)}this.#h>0?this.#y():this.#e=!1}return()=>{this.#c?.remove()}},Of)}#b(){try{this.#i=St(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=St(()=>r(this.#t)),Xt.enqueue(()=>{var a=this.#m();this.#i=this.#p(()=>(Xt.ensure(),St(()=>this.#u(a)))),this.#h>0?this.#y():(yr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#m(){var r=this.#t;return this.#e&&(this.#c=Nn(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var a=Te,u=be,c=vt;Bt(this.#a),dt(this.#a),br(this.#a.ctx);try{return r()}catch(f){return Cu(f),null}finally{Bt(a),dt(u),br(c)}}#y(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Qu(this.#i,this.#l)),this.#o===null&&(this.#o=St(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#e=!1,this.#o&&yr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&xr(this.#d,this.#f)}get_effect_pending(){return this.#_(),C(this.#d)}error(r){var a=this.#n.onerror;let u=this.#n.failed;if(this.#v||!a&&!u)throw r;this.#i&&(pt(this.#i),this.#i=null),this.#o&&(pt(this.#o),this.#o=null),this.#s&&(pt(this.#s),this.#s=null);var c=!1,f=!1;const v=()=>{if(c){bf();return}c=!0,f&&hf(),Xt.ensure(),this.#f=0,this.#s!==null&&yr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,St(()=>this.#u(this.#t)))),this.#h>0?this.#y():this.#e=!1};var g=be;try{dt(null),f=!0,a?.(r,v),f=!1}catch(y){wr(y,this.#a&&this.#a.parent)}finally{dt(g)}u&&Or(()=>{this.#s=this.#p(()=>{Xt.ensure(),this.#v=!0;try{return St(()=>{u(this.#t,()=>r,()=>v)})}catch(y){return wr(y,this.#a.parent),null}finally{this.#v=!1}})})}}function Lu(e,r){return r}function Pf(e,r,a){for(var u=[],c=r.length,f=0;f<c;f++)Go(r[f].e,u,!0);Zu(u,()=>{var v=u.length===0&&a!==null;if(v){var g=a,y=g.parentNode;Yf(y),y.append(g),e.items.clear(),Yt(e,r[0].prev,r[c-1].next)}for(var D=0;D<c;D++){var E=r[D];v||(e.items.delete(E.k),Yt(e,E.prev,E.next)),pt(E.e,!v)}e.first===r[0]&&(e.first=r[0].prev)})}function Bo(e,r,a,u,c,f=null){var v=e,g=new Map,y=null,D=(r&Eu)!==0,E=(r&bu)!==0,A=(r&wu)!==0;if(D){var _=e;v=_.appendChild(Nn())}var T=null,R=Bf(()=>{var q=a();return pu(q)?q:q==null?[]:Mo(q)}),F,M=!0;function z(){Rf(ie,F,v,r,u),T!==null&&(F.length===0?(T.fragment?(v.before(T.fragment),T.fragment=null):Yo(T.effect),ne.first=T.effect):yr(T.effect,()=>{T=null}))}var ne=Wo(()=>{F=C(R);for(var q=F.length,ae=new Set,oe=ke,de=null,se=Hu(),ce=0;ce<q;ce+=1){var fe=F[ce],he=u(fe,ce),ge=M?null:g.get(he);ge?(E&&xr(ge.v,fe),A?xr(ge.i,ce):ge.i=ce,se&&oe.skipped_effects.delete(ge.e)):(ge=Mf(M?v:null,de,fe,he,ce,c,r,a),M&&(ge.o=!0,de===null?y=ge:de.next=ge,de=ge),g.set(he,ge)),ae.add(he)}if(q===0&&f&&!T)if(M)T={fragment:null,effect:St(()=>f(v))};else{var Re=document.createDocumentFragment(),He=Nn();Re.append(He),T={fragment:Re,effect:St(()=>f(He))}}if(!M)if(se){for(const[st,Ue]of g)ae.has(st)||oe.skipped_effects.add(Ue.e);oe.oncommit(z),oe.ondiscard(()=>{})}else z();C(R)}),ie={effect:ne,items:g,first:y};M=!1}function Rf(e,r,a,u,c){var f=(u&vf)!==0,v=r.length,g=e.items,y=e.first,D,E=null,A,_=[],T=[],R,F,M,z;if(f)for(z=0;z<v;z+=1)R=r[z],F=c(R,z),M=g.get(F),M.o&&(M.a?.measure(),(A??=new Set).add(M));for(z=0;z<v;z+=1){if(R=r[z],F=c(R,z),M=g.get(F),e.first??=M,!M.o){M.o=!0;var ne=E?E.next:y;Yt(e,E,M),Yt(e,M,ne),uo(M,ne,a),E=M,_=[],T=[],y=E.next;continue}if((M.e.f&Et)!==0&&(Yo(M.e),f&&(M.a?.unfix(),(A??=new Set).delete(M))),M!==y){if(D!==void 0&&D.has(M)){if(_.length<T.length){var ie=T[0],q;E=ie.prev;var ae=_[0],oe=_[_.length-1];for(q=0;q<_.length;q+=1)uo(_[q],ie,a);for(q=0;q<T.length;q+=1)D.delete(T[q]);Yt(e,ae.prev,oe.next),Yt(e,E,ae),Yt(e,oe,ie),y=ie,E=oe,z-=1,_=[],T=[]}else D.delete(M),uo(M,y,a),Yt(e,M.prev,M.next),Yt(e,M,E===null?e.first:E.next),Yt(e,E,M),E=M;continue}for(_=[],T=[];y!==null&&y.k!==F;)(y.e.f&Et)===0&&(D??=new Set).add(y),T.push(y),y=y.next;if(y===null)continue;M=y}_.push(M),E=M,y=M.next}if(y!==null||D!==void 0){for(var de=D===void 0?[]:Mo(D);y!==null;)(y.e.f&Et)===0&&de.push(y),y=y.next;var se=de.length;if(se>0){var ce=(u&Eu)!==0&&v===0?a:null;if(f){for(z=0;z<se;z+=1)de[z].a?.measure();for(z=0;z<se;z+=1)de[z].a?.fix()}Pf(e,de,ce)}}f&&Or(()=>{if(A!==void 0)for(M of A)M.a?.apply()})}function Mf(e,r,a,u,c,f,v,g){var y=(v&bu)!==0,D=(v&pf)===0,E=y?D?Ku(a,!1,!1):er(a):a,A=(v&wu)===0?c:er(c);X&&y&&(E.trace=()=>{var R=typeof A=="number"?c:A.v;g()[R]});var _={i:A,v:E,k:u,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var T=document.createDocumentFragment();T.append(e=Nn())}return _.e=St(()=>f(e,E,A,g)),r!==null&&(r.next=_),_}finally{}}function uo(e,r,a){for(var u=e.next?e.next.e.nodes_start:a,c=r?r.e.nodes_start:a,f=e.e.nodes_start;f!==null&&f!==u;){var v=oi(f);c.before(f),f=v}}function Yt(e,r,a){r===null?(e.first=a,e.effect.first=a&&a.e):(r.e===e.effect.last&&a!==null&&(e.effect.last=a.e),r.e.next&&(r.e.next.prev=null),r.next=a,r.e.next=a&&a.e),a===null?e.effect.last=r&&r.e:(a.e===e.effect.last&&r===null&&(e.effect.last=a.e.prev),a.e.prev&&(a.e.prev.next=null),a.prev=r,a.e.prev=r&&r.e)}function Nf(e,r,a,u){const c=jo;if(a.length===0&&e.length===0){u(r.map(c));return}var f=ke,v=Te,g=Lf();function y(){Promise.all(a.map(D=>Kf(D))).then(D=>{g();try{u([...r.map(c),...D])}catch(E){(v.f&kn)===0&&wr(E,v)}f?.deactivate(),qi()}).catch(D=>{wr(D,v)})}e.length>0?Promise.all(e).then(()=>{g();try{return y()}finally{f?.deactivate(),qi()}}):y()}function Lf(){var e=Te,r=be,a=vt,u=ke;if(X)var c=Xr;return function(v=!0){Bt(e),dt(r),br(a),v&&u?.activate(),X&&Yi(c)}}function qi(){Bt(null),dt(null),br(null),X&&Yi(null)}const Ff=new Set;function jo(e){var r=Ze|mt,a=be!==null&&(be.f&Ze)!==0?be:null;return Te!==null&&(Te.f|=Sr),{ctx:vt,deps:null,effects:null,equals:ku,f:r,fn:e,reactions:null,rv:0,v:Xe,wv:0,parent:a??Te,ac:null}}function Kf(e,r){let a=Te;a===null&&nf();var u=a.b,c=void 0,f=er(Xe),v=!be,g=new Map;return Jf(()=>{var y=mu();c=y.promise;try{Promise.resolve(e()).then(y.resolve,y.reject).then(()=>{D===ke&&D.committed&&D.deactivate(),qi()})}catch(_){y.reject(_),qi()}var D=ke;if(v){var E=!u.is_pending();u.update_pending_count(1),D.increment(E),g.get(D)?.reject(hr),g.delete(D),g.set(D,y)}const A=(_,T=void 0)=>{if(D.activate(),T)T!==hr&&(f.f|=Dn,xr(f,T));else{(f.f&Dn)!==0&&(f.f^=Dn),xr(f,_);for(const[R,F]of g){if(g.delete(R),R===D)break;F.reject(hr)}}v&&(u.update_pending_count(-1),D.decrement(E))};y.promise.then(A,_=>A(null,_||"unknown"))}),Uo(()=>{for(const y of g.values())y.reject(hr)}),X&&(f.f|=la),new Promise(y=>{function D(E){function A(){E===c?y(f):D(c)}E.then(A,A)}D(c)})}function fa(e){const r=jo(e);return Xu(r),r}function Bf(e){const r=jo(e);return r.equals=Au,r}function go(e){var r=e.effects;if(r!==null){e.effects=null;for(var a=0;a<r.length;a+=1)pt(r[a])}}let lo=[];function jf(e){for(var r=e.parent;r!==null;){if((r.f&Ze)===0)return(r.f&kn)===0?r:null;r=r.parent}return null}function zo(e){var r,a=Te;if(Bt(jf(e)),X){let u=Er;Us(new Set);try{lo.includes(e)&&rf(),lo.push(e),e.f&=~Mn,go(e),r=_o(e)}finally{Bt(a),Us(u),lo.pop()}}else try{e.f&=~Mn,go(e),r=_o(e)}finally{Bt(a)}return r}function Fu(e){var r=zo(e);if(e.equals(r)||(ke?.is_fork||(e.v=r),e.wv=el()),!Ir)if(Ot!==null)(Jr()||ke?.is_fork)&&Ot.set(e,r);else{var a=(e.f&jt)===0?fn:tt;nt(e,a)}}let Er=new Set;const Sn=new Map;function Us(e){Er=e}let Vo=!1;function zf(){Vo=!0}function er(e,r){var a={f:0,v:e,reactions:null,equals:ku,rv:0,wv:0};return a}function me(e,r){const a=er(e);return Xu(a),a}function Ku(e,r=!1,a=!0){const u=er(e);return r||(u.equals=Au),u}function j(e,r,a=!1){be!==null&&(!Jt||(be.f&Gi)!==0)&&Ou()&&(be.f&(Ze|ln|la|Gi))!==0&&!un?.includes(e)&&df();let u=a?sn(r):r;return X&&Su(u,e.label),xr(e,u)}function xr(e,r){if(!e.equals(r)){var a=e.v;Ir?Sn.set(e,r):Sn.set(e,a),e.v=r;var u=Xt.ensure();if(u.capture(e,a),X){if(Te!==null){e.updated??=new Map;const c=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:c}),c>5){const f=Ef("updated at");if(f!==null){let v=e.updated.get(f.stack);v||(v={error:f,count:0},e.updated.set(f.stack,v)),v.count++}}}Te!==null&&(e.set_during_effect=!0)}(e.f&Ze)!==0&&((e.f&mt)!==0&&zo(e),nt(e,(e.f&jt)!==0?tt:fn)),e.wv=el(),ju(e,mt),Te!==null&&(Te.f&tt)!==0&&(Te.f&(cn|tr))===0&&(kt===null?nd([e]):kt.push(e)),!u.is_fork&&Er.size>0&&!Vo&&Bu()}return r}function Bu(){Vo=!1;var e=On;$i(!0);const r=Array.from(Er);try{for(const a of r)(a.f&tt)!==0&&nt(a,fn),si(a)&&ti(a)}finally{$i(e)}Er.clear()}function $r(e){j(e,e.v+1)}function ju(e,r){var a=e.reactions;if(a!==null)for(var u=a.length,c=0;c<u;c++){var f=a[c],v=f.f;if(X&&(v&Gi)!==0){Er.add(f);continue}var g=(v&mt)===0;if(g&&nt(f,r),(v&Ze)!==0){var y=f;Ot?.delete(y),(v&Mn)===0&&(v&jt&&(f.f|=Mn),ju(y,fn))}else g&&((v&ln)!==0&&on!==null&&on.add(f),Jn(f))}}const Vf=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function sn(e){if(typeof e!="object"||e===null||An in e)return e;const r=No(e);if(r!==$c&&r!==Qc)return e;var a=new Map,u=pu(e),c=me(0),f=Qn,v=E=>{if(Qn===f)return E();var A=be,_=Qn;dt(null),qs(f);var T=E();return dt(A),qs(_),T};u&&(a.set("length",me(e.length)),X&&(e=Uf(e)));var g="";let y=!1;function D(E){if(!y){y=!0,g=E,Gt(c,`${g} version`);for(const[A,_]of a)Gt(_,Yn(g,A));y=!1}}return new Proxy(e,{defineProperty(E,A,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&cf();var T=a.get(A);return T===void 0?T=v(()=>{var R=me(_.value);return a.set(A,R),X&&typeof A=="string"&&Gt(R,Yn(g,A)),R}):j(T,_.value,!0),!0},deleteProperty(E,A){var _=a.get(A);if(_===void 0){if(A in E){const T=v(()=>me(Xe));a.set(A,T),$r(c),X&&Gt(T,Yn(g,A))}}else j(_,Xe),$r(c);return!0},get(E,A,_){if(A===An)return e;if(X&&A===_u)return D;var T=a.get(A),R=A in E;if(T===void 0&&(!R||pr(E,A)?.writable)&&(T=v(()=>{var M=sn(R?E[A]:Xe),z=me(M);return X&&Gt(z,Yn(g,A)),z}),a.set(A,T)),T!==void 0){var F=C(T);return F===Xe?void 0:F}return Reflect.get(E,A,_)},getOwnPropertyDescriptor(E,A){var _=Reflect.getOwnPropertyDescriptor(E,A);if(_&&"value"in _){var T=a.get(A);T&&(_.value=C(T))}else if(_===void 0){var R=a.get(A),F=R?.v;if(R!==void 0&&F!==Xe)return{enumerable:!0,configurable:!0,value:F,writable:!0}}return _},has(E,A){if(A===An)return!0;var _=a.get(A),T=_!==void 0&&_.v!==Xe||Reflect.has(E,A);if(_!==void 0||Te!==null&&(!T||pr(E,A)?.writable)){_===void 0&&(_=v(()=>{var F=T?sn(E[A]):Xe,M=me(F);return X&&Gt(M,Yn(g,A)),M}),a.set(A,_));var R=C(_);if(R===Xe)return!1}return T},set(E,A,_,T){var R=a.get(A),F=A in E;if(u&&A==="length")for(var M=_;M<R.v;M+=1){var z=a.get(M+"");z!==void 0?j(z,Xe):M in E&&(z=v(()=>me(Xe)),a.set(M+"",z),X&&Gt(z,Yn(g,M)))}if(R===void 0)(!F||pr(E,A)?.writable)&&(R=v(()=>me(void 0)),X&&Gt(R,Yn(g,A)),j(R,sn(_)),a.set(A,R));else{F=R.v!==Xe;var ne=v(()=>sn(_));j(R,ne)}var ie=Reflect.getOwnPropertyDescriptor(E,A);if(ie?.set&&ie.set.call(T,_),!F){if(u&&typeof A=="string"){var q=a.get("length"),ae=Number(A);Number.isInteger(ae)&&ae>=q.v&&j(q,ae+1)}$r(c)}return!0},ownKeys(E){C(c);var A=Reflect.ownKeys(E).filter(R=>{var F=a.get(R);return F===void 0||F.v!==Xe});for(var[_,T]of a)T.v!==Xe&&!(_ in E)&&A.push(_);return A},setPrototypeOf(){ff()}})}function Yn(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:Vf.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function co(e){try{if(e!==null&&typeof e=="object"&&An in e)return e[An]}catch{}return e}const Hf=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Uf(e){return new Proxy(e,{get(r,a,u){var c=Reflect.get(r,a,u);return Hf.has(a)?function(...f){zf();var v=c.apply(this,f);return Bu(),v}:c}})}function Wf(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:a,lastIndexOf:u,includes:c}=e;e.indexOf=function(f,v){const g=a.call(this,f,v);if(g===-1){for(let y=v??0;y<this.length;y+=1)if(co(this[y])===f){so("array.indexOf(...)");break}}return g},e.lastIndexOf=function(f,v){const g=u.call(this,f,v??this.length-1);if(g===-1){for(let y=0;y<=(v??this.length-1);y+=1)if(co(this[y])===f){so("array.lastIndexOf(...)");break}}return g},e.includes=function(f,v){const g=c.call(this,f,v);if(!g){for(let y=0;y<this.length;y+=1)if(co(this[y])===f){so("array.includes(...)");break}}return g},Array.__svelte_cleanup=()=>{e.indexOf=a,e.lastIndexOf=u,e.includes=c}}var Ws,Ho,zu,Vu;function Gf(){if(Ws===void 0){Ws=window,Ho=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,a=Text.prototype;zu=pr(r,"firstChild").get,Vu=pr(r,"nextSibling").get,js(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),js(a)&&(a.__t=void 0),X&&(e.__svelte_meta=null,Wf())}}function Nn(e=""){return document.createTextNode(e)}function Zi(e){return zu.call(e)}function oi(e){return Vu.call(e)}function Ee(e,r){return Zi(e)}function en(e,r=!1){{var a=Zi(e);return a instanceof Comment&&a.data===""?oi(a):a}}function Ae(e,r=1,a=!1){let u=e;for(;r--;)u=oi(u);return u}function Yf(e){e.textContent=""}function Hu(){return!1}let Gs=!1;function qf(){Gs||(Gs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function da(e){var r=be,a=Te;dt(null),Bt(null);try{return e()}finally{dt(r),Bt(a)}}function Zf(e,r,a,u=a){e.addEventListener(r,()=>da(a));const c=e.__on_r;c?e.__on_r=()=>{c(),u(!0)}:e.__on_r=()=>u(!0),qf()}function $f(e){Te===null&&(be===null&&sf(e),of()),Ir&&af(e)}function Qf(e,r){var a=r.last;a===null?r.last=r.first=e:(a.next=e,e.prev=a,r.last=e)}function dn(e,r,a){var u=Te;if(X)for(;u!==null&&(u.f&Gi)!==0;)u=u.parent;u!==null&&(u.f&Et)!==0&&(e|=Et);var c={ctx:vt,deps:null,nodes_start:null,nodes_end:null,f:e|mt|jt,first:null,fn:r,last:null,next:null,parent:u,b:u&&u.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(X&&(c.component_function=ai),a)try{ti(c),c.f|=Ko}catch(g){throw pt(c),g}else r!==null&&Jn(c);var f=c;if(a&&f.deps===null&&f.teardown===null&&f.nodes_start===null&&f.first===f.last&&(f.f&Sr)===0&&(f=f.first,(e&ln)!==0&&(e&_r)!==0&&f!==null&&(f.f|=_r)),f!==null&&(f.parent=u,u!==null&&Qf(f,u),be!==null&&(be.f&Ze)!==0&&(e&tr)===0)){var v=be;(v.effects??=[]).push(f)}return c}function Jr(){return be!==null&&!Jt}function Uo(e){const r=dn(Fo,null,!1);return nt(r,tt),r.teardown=e,r}function wt(e){$f("$effect"),X&&Rn(e,"name",{value:"$effect"});var r=Te.f,a=!be&&(r&cn)!==0&&(r&Ko)===0;if(a){var u=vt;(u.e??=[]).push(e)}else return Uu(e)}function Uu(e){return dn(Lo|ef,e,!1)}function Xf(e){Xt.ensure();const r=dn(tr|Sr,e,!0);return(a={})=>new Promise(u=>{a.outro?yr(r,()=>{pt(r),u(void 0)}):(pt(r),u(void 0))})}function Wu(e){return dn(Lo,e,!1)}function Jf(e){return dn(la|Sr,e,!0)}function ha(e,r=0){return dn(Fo|r,e,!0)}function $t(e,r=[],a=[],u=[]){Nf(u,r,a,c=>{dn(Fo,()=>e(...c.map(C)),!0)})}function Wo(e,r=0){var a=dn(ln|r,e,!0);return X&&(a.dev_stack=Xr),a}function St(e){return dn(cn|Sr,e,!0)}function Gu(e){var r=e.teardown;if(r!==null){const a=Ir,u=be;Ys(!0),dt(null);try{r.call(null)}finally{Ys(a),dt(u)}}}function Yu(e,r=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const c=a.ac;c!==null&&da(()=>{c.abort(hr)});var u=a.next;(a.f&tr)!==0?a.parent=null:pt(a,r),a=u}}function ed(e){for(var r=e.first;r!==null;){var a=r.next;(r.f&cn)===0&&pt(r),r=a}}function pt(e,r=!0){var a=!1;(r||(e.f&gu)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(td(e.nodes_start,e.nodes_end),a=!0),Yu(e,r&&!a),Qi(e,0),nt(e,kn);var u=e.transitions;if(u!==null)for(const f of u)f.stop();Gu(e);var c=e.parent;c!==null&&c.first!==null&&qu(e),X&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function td(e,r){for(;e!==null;){var a=e===r?null:oi(e);e.remove(),e=a}}function qu(e){var r=e.parent,a=e.prev,u=e.next;a!==null&&(a.next=u),u!==null&&(u.prev=a),r!==null&&(r.first===e&&(r.first=u),r.last===e&&(r.last=a))}function yr(e,r,a=!0){var u=[];Go(e,u,!0),Zu(u,()=>{a&&pt(e),r&&r()})}function Zu(e,r){var a=e.length;if(a>0){var u=()=>--a||r();for(var c of e)c.out(u)}else r()}function Go(e,r,a){if((e.f&Et)===0){if(e.f^=Et,e.transitions!==null)for(const v of e.transitions)(v.is_global||a)&&r.push(v);for(var u=e.first;u!==null;){var c=u.next,f=(u.f&_r)!==0||(u.f&cn)!==0&&(e.f&ln)!==0;Go(u,r,f?a:!1),u=c}}}function Yo(e){$u(e,!0)}function $u(e,r){if((e.f&Et)!==0){e.f^=Et,(e.f&tt)===0&&(nt(e,mt),Jn(e));for(var a=e.first;a!==null;){var u=a.next,c=(a.f&_r)!==0||(a.f&cn)!==0;$u(a,c?r:!1),a=u}if(e.transitions!==null)for(const f of e.transitions)(f.is_global||r)&&f.in()}}function Qu(e,r){for(var a=e.nodes_start,u=e.nodes_end;a!==null;){var c=a===u?null:oi(a);r.append(a),a=c}}let On=!1;function $i(e){On=e}let Ir=!1;function Ys(e){Ir=e}let be=null,Jt=!1;function dt(e){be=e}let Te=null;function Bt(e){Te=e}let un=null;function Xu(e){be!==null&&(un===null?un=[e]:un.push(e))}let at=null,bt=0,kt=null;function nd(e){kt=e}let Ju=1,ei=0,Qn=ei;function qs(e){Qn=e}function el(){return++Ju}function si(e){var r=e.f;if((r&mt)!==0)return!0;if(r&Ze&&(e.f&=~Mn),(r&fn)!==0){var a=e.deps;if(a!==null)for(var u=a.length,c=0;c<u;c++){var f=a[c];if(si(f)&&Fu(f),f.wv>e.wv)return!0}(r&jt)!==0&&Ot===null&&nt(e,tt)}return!1}function tl(e,r,a=!0){var u=e.reactions;if(u!==null&&!un?.includes(e))for(var c=0;c<u.length;c++){var f=u[c];(f.f&Ze)!==0?tl(f,r,!1):r===f&&(a?nt(f,mt):(f.f&tt)!==0&&nt(f,fn),Jn(f))}}function _o(e){var r=at,a=bt,u=kt,c=be,f=un,v=vt,g=Jt,y=Qn,D=e.f;at=null,bt=0,kt=null,be=(D&(cn|tr))===0?e:null,un=null,br(e.ctx),Jt=!1,Qn=++ei,e.ac!==null&&(da(()=>{e.ac.abort(hr)}),e.ac=null);try{e.f|=po;var E=e.fn,A=E(),_=e.deps;if(at!==null){var T;if(Qi(e,bt),_!==null&&bt>0)for(_.length=bt+at.length,T=0;T<at.length;T++)_[bt+T]=at[T];else e.deps=_=at;if(On&&Jr()&&(e.f&jt)!==0)for(T=bt;T<_.length;T++)(_[T].reactions??=[]).push(e)}else _!==null&&bt<_.length&&(Qi(e,bt),_.length=bt);if(Ou()&&kt!==null&&!Jt&&_!==null&&(e.f&(Ze|fn|mt))===0)for(T=0;T<kt.length;T++)tl(kt[T],e);return c!==null&&c!==e&&(ei++,kt!==null&&(u===null?u=kt:u.push(...kt))),(e.f&Dn)!==0&&(e.f^=Dn),A}catch(R){return Cu(R)}finally{e.f^=po,at=r,bt=a,kt=u,be=c,un=f,br(v),Jt=g,Qn=y}}function rd(e,r){let a=r.reactions;if(a!==null){var u=Zc.call(a,e);if(u!==-1){var c=a.length-1;c===0?a=r.reactions=null:(a[u]=a[c],a.pop())}}a===null&&(r.f&Ze)!==0&&(at===null||!at.includes(r))&&(nt(r,fn),(r.f&jt)!==0&&(r.f^=jt,r.f&=~Mn),go(r),Qi(r,0))}function Qi(e,r){var a=e.deps;if(a!==null)for(var u=r;u<a.length;u++)rd(e,a[u])}function ti(e){var r=e.f;if((r&kn)===0){nt(e,tt);var a=Te,u=On;if(Te=e,On=!0,X){var c=ai;Vs(e.component_function);var f=Xr;Yi(e.dev_stack??Xr)}try{(r&(ln|Jc))!==0?ed(e):Yu(e),Gu(e);var v=_o(e);e.teardown=typeof v=="function"?v:null,e.wv=Ju;var g;X&&wf&&(e.f&mt)!==0&&e.deps}finally{On=u,Te=a,X&&(Vs(c),Yi(f))}}}async function id(){await Promise.resolve(),Df()}function C(e){var r=e.f,a=(r&Ze)!==0;if(be!==null&&!Jt){var u=Te!==null&&(Te.f&kn)!==0;if(!u&&!un?.includes(e)){var c=be.deps;if((be.f&po)!==0)e.rv<ei&&(e.rv=ei,at===null&&c!==null&&c[bt]===e?bt++:at===null?at=[e]:at.includes(e)||at.push(e));else{(be.deps??=[]).push(e);var f=e.reactions;f===null?e.reactions=[be]:f.includes(be)||f.push(be)}}}if(X&&Ff.delete(e),Ir){if(Sn.has(e))return Sn.get(e);if(a){var v=e,g=v.v;return((v.f&tt)===0&&v.reactions!==null||rl(v))&&(g=zo(v)),Sn.set(v,g),g}}else a&&(!Ot?.has(e)||ke?.is_fork&&!Jr())&&(v=e,si(v)&&Fu(v),On&&Jr()&&(v.f&jt)===0&&nl(v));if(Ot?.has(e))return Ot.get(e);if((e.f&Dn)!==0)throw e.v;return e.v}function nl(e){if(e.deps!==null){e.f^=jt;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&Ze)!==0&&(r.f&jt)===0&&nl(r)}}function rl(e){if(e.v===Xe)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(Sn.has(r)||(r.f&Ze)!==0&&rl(r))return!0;return!1}function ui(e){var r=Jt;try{return Jt=!0,e()}finally{Jt=r}}const ad=-7169;function nt(e,r){e.f=e.f&ad|r}function od(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(An in e)bo(e);else if(!Array.isArray(e))for(let r in e){const a=e[r];typeof a=="object"&&a&&An in a&&bo(a)}}}function bo(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let u in e)try{bo(e[u],r)}catch{}const a=No(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const u=yu(a);for(let c in u){const f=u[c].get;if(f)try{f.call(e)}catch{}}}}}const sd=["touchstart","touchmove"];function ud(e){return sd.includes(e)}const il=new Set,wo=new Set;function ld(e,r,a,u={}){function c(f){if(u.capture||Yr.call(r,f),!f.cancelBubble)return da(()=>a?.call(this,f))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Or(()=>{r.addEventListener(e,c,u)}):r.addEventListener(e,c,u),c}function Zs(e,r,a,u,c){var f={capture:u,passive:c},v=ld(e,r,a,f);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&Uo(()=>{r.removeEventListener(e,v,f)})}function Cr(e){for(var r=0;r<e.length;r++)il.add(e[r]);for(var a of wo)a(e)}let $s=null;function Yr(e){var r=this,a=r.ownerDocument,u=e.type,c=e.composedPath?.()||[],f=c[0]||e.target;$s=e;var v=0,g=$s===e&&e.__root;if(g){var y=c.indexOf(g);if(y!==-1&&(r===document||r===window)){e.__root=r;return}var D=c.indexOf(r);if(D===-1)return;y<=D&&(v=y)}if(f=c[v]||e.target,f!==r){Rn(e,"currentTarget",{configurable:!0,get(){return f||a}});var E=be,A=Te;dt(null),Bt(null);try{for(var _,T=[];f!==null;){var R=f.assignedSlot||f.parentNode||f.host||null;try{var F=f["__"+u];F!=null&&(!f.disabled||e.target===f)&&F.call(f,e)}catch(M){_?T.push(M):_=M}if(e.cancelBubble||R===r||R===null)break;f=R}if(_){for(let M of T)queueMicrotask(()=>{throw M});throw _}}finally{e.__root=r,delete e.currentTarget,dt(E),Bt(A)}}}function cd(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function Eo(e,r){var a=Te;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=r)}function ze(e,r){var a=(r&yf)!==0,u=(r&mf)!==0,c,f=!e.startsWith("<!>");return()=>{c===void 0&&(c=cd(f?e:"<!>"+e),a||(c=Zi(c)));var v=u||Ho?document.importNode(c,!0):c.cloneNode(!0);if(a){var g=Zi(v),y=v.lastChild;Eo(g,y)}else Eo(v,v);return v}}function In(){var e=document.createDocumentFragment(),r=document.createComment(""),a=Nn();return e.append(r,a),Eo(r,a),e}function De(e,r){e!==null&&e.before(r)}function Cn(e,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function fd(e,r){return dd(e,r)}const dr=new Map;function dd(e,{target:r,anchor:a,props:u={},events:c,context:f,intro:v=!0}){Gf();var g=new Set,y=A=>{for(var _=0;_<A.length;_++){var T=A[_];if(!g.has(T)){g.add(T);var R=ud(T);r.addEventListener(T,Yr,{passive:R});var F=dr.get(T);F===void 0?(document.addEventListener(T,Yr,{passive:R}),dr.set(T,1)):dr.set(T,F+1)}}};y(Mo(il)),wo.add(y);var D=void 0,E=Xf(()=>{var A=a??r.appendChild(Nn());return If(A,{pending:()=>{}},_=>{if(f){nr({});var T=vt;T.c=f}c&&(u.$$events=c),D=e(_,u)||{},f&&rr()}),()=>{for(var _ of g){r.removeEventListener(_,Yr);var T=dr.get(_);--T===0?(document.removeEventListener(_,Yr),dr.delete(_)):dr.set(_,T)}wo.delete(y),A!==a&&A.parentNode?.removeChild(A)}});return hd.set(D,E),D}let hd=new WeakMap;class vd{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,a=!0){this.anchor=r,this.#u=a}#a=()=>{var r=ke;if(this.#e.has(r)){var a=this.#e.get(r),u=this.#t.get(a);if(u)Yo(u),this.#n.delete(a);else{var c=this.#r.get(a);c&&(this.#t.set(a,c.effect),this.#r.delete(a),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),u=c.effect)}for(const[f,v]of this.#e){if(this.#e.delete(f),f===r)break;const g=this.#r.get(v);g&&(pt(g.effect),this.#r.delete(v))}for(const[f,v]of this.#t){if(f===a||this.#n.has(f))continue;const g=()=>{if(Array.from(this.#e.values()).includes(f)){var D=document.createDocumentFragment();Qu(v,D),D.append(Nn()),this.#r.set(f,{effect:v,fragment:D})}else pt(v);this.#n.delete(f),this.#t.delete(f)};this.#u||!u?(this.#n.add(f),yr(v,g,!1)):g()}}};#i=r=>{this.#e.delete(r);const a=Array.from(this.#e.values());for(const[u,c]of this.#r)a.includes(u)||(pt(c.effect),this.#r.delete(u))};ensure(r,a){var u=ke,c=Hu();if(a&&!this.#t.has(r)&&!this.#r.has(r))if(c){var f=document.createDocumentFragment(),v=Nn();f.append(v),this.#r.set(r,{effect:St(()=>a(v)),fragment:f})}else this.#t.set(r,St(()=>a(this.anchor)));if(this.#e.set(u,r),c){for(const[g,y]of this.#t)g===r?u.skipped_effects.delete(y):u.skipped_effects.add(y);for(const[g,y]of this.#r)g===r?u.skipped_effects.delete(y.effect):u.skipped_effects.add(y.effect);u.oncommit(this.#a),u.ondiscard(this.#i)}else this.#a()}}function ht(e,r,a=!1){var u=new vd(e),c=a?_r:0;function f(v,g){u.ensure(v,g)}Wo(()=>{var v=!1;r((g,y=!0)=>{v=!0,f(y,g)}),v||f(!1,null)},c)}function pd(e,r,a){Wu(()=>{var u=ui(()=>r(e,a?.())||{});if(a&&u?.update){var c=!1,f={};ha(()=>{var v=a();od(v),c&&Du(f,v)&&(f=v,u.update(v))}),c=!0}if(u?.destroy)return()=>u.destroy()})}function al(e){var r,a,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(r=0;r<c;r++)e[r]&&(a=al(e[r]))&&(u&&(u+=" "),u+=a)}else for(a in e)e[a]&&(u&&(u+=" "),u+=a);return u}function yd(){for(var e,r,a=0,u="",c=arguments.length;a<c;a++)(e=arguments[a])&&(r=al(e))&&(u&&(u+=" "),u+=r);return u}function md(e){return typeof e=="object"?yd(e):e??""}function gd(e,r,a){var u=e==null?"":""+e;return u===""?null:u}function _d(e,r){return e==null?null:String(e)}function bd(e,r,a,u,c,f){var v=e.__className;if(v!==a||v===void 0){var g=gd(a);g==null?e.removeAttribute("class"):e.className=g,e.__className=a}return f}function ol(e,r,a,u){var c=e.__style;if(c!==r){var f=_d(r);f==null?e.removeAttribute("style"):e.style.cssText=f,e.__style=r}return u}const wd=Symbol("is custom element"),Ed=Symbol("is html");function xd(e,r){var a=qo(e);a.value===(a.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Td(e,r){var a=qo(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function Lt(e,r,a,u){var c=qo(e);c[r]!==(c[r]=a)&&(r==="loading"&&(e[tf]=a),a==null?e.removeAttribute(r):typeof a!="string"&&kd(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function qo(e){return e.__attributes??={[wd]:e.nodeName.includes("-"),[Ed]:e.namespaceURI===_f}}var Qs=new Map;function kd(e){var r=e.getAttribute("is")||e.nodeName,a=Qs.get(r);if(a)return a;Qs.set(r,a=[]);for(var u,c=e,f=Element.prototype;f!==c;){u=yu(c);for(var v in u)u[v].set&&a.push(v);c=No(c)}return a}function sl(e,r,a=r){var u=new WeakSet;Zf(e,"input",async c=>{X&&e.type==="checkbox"&&zs();var f=c?e.defaultValue:e.value;if(f=fo(e)?ho(f):f,a(f),ke!==null&&u.add(ke),await id(),f!==(f=r())){var v=e.selectionStart,g=e.selectionEnd,y=e.value.length;if(e.value=f??"",g!==null){var D=e.value.length;v===g&&g===y&&D>y?(e.selectionStart=D,e.selectionEnd=D):(e.selectionStart=v,e.selectionEnd=Math.min(g,D))}}}),ui(r)==null&&e.value&&(a(fo(e)?ho(e.value):e.value),ke!==null&&u.add(ke)),ha(()=>{X&&e.type==="checkbox"&&zs();var c=r();if(e===document.activeElement){var f=zi??ke;if(u.has(f))return}fo(e)&&c===ho(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function fo(e){var r=e.type;return r==="number"||r==="range"}function ho(e){return e===""?null:+e}function Xs(e,r){return e===r||e?.[An]===r}function Tr(e={},r,a,u){return Wu(()=>{var c,f;return ha(()=>{c=f,f=[],ui(()=>{e!==a(...f)&&(r(e,...f),c&&Xs(a(...c),e)&&r(null,...c))})}),()=>{Or(()=>{f&&Xs(a(...f),e)&&r(null,...f)})}}),e}function ul(e,r,a){if(e==null)return r(void 0),Wi;const u=ui(()=>e.subscribe(r,a));return u.unsubscribe?()=>u.unsubscribe():u}function Dd(e){let r;return ul(e,a=>r=a)(),r}let xo=Symbol();function Xi(e,r,a){const u=a[r]??={store:null,source:Ku(void 0),unsubscribe:Wi};if(X&&(u.source.label=r),u.store!==e&&!(xo in a))if(u.unsubscribe(),u.store=e??null,e==null)u.source.v=void 0,u.unsubscribe=Wi;else{var c=!0;u.unsubscribe=ul(e,f=>{c?u.source.v=f:j(u.source,f)}),c=!1}return e&&xo in a?Dd(e):C(u.source)}function To(e,r,a){let u=a[r];return u&&u.store!==e&&(u.unsubscribe(),u.unsubscribe=Wi),e}function Zo(){const e={};function r(){Uo(()=>{for(var a in e)e[a].unsubscribe();Rn(e,xo,{enumerable:!1,value:!0})})}return[e,r]}if(X){let e=function(r){if(!(r in globalThis)){let a;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(a!==void 0)return a;lf(r)},set:u=>{a=u}})}};var Bv=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const Ad="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ad);var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vi={exports:{}},Id=Vi.exports,Js;function Cd(){return Js||(Js=1,(function(e,r){(function(a,u){e.exports=u()})(Id,(function(){var a=function(t,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},a(t,n)};function u(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var c=function(){return c=Object.assign||function(n){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},c.apply(this,arguments)};function f(t,n,i){for(var o=0,s=n.length,l;o<s;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return t.concat(l||Array.prototype.slice.call(n))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Sd,g=Object.keys,y=Array.isArray;typeof Promise<"u"&&!v.Promise&&(v.Promise=Promise);function D(t,n){return typeof n!="object"||g(n).forEach(function(i){t[i]=n[i]}),t}var E=Object.getPrototypeOf,A={}.hasOwnProperty;function _(t,n){return A.call(t,n)}function T(t,n){typeof n=="function"&&(n=n(E(t))),(typeof Reflect>"u"?g:Reflect.ownKeys)(n).forEach(function(i){F(t,i,n[i])})}var R=Object.defineProperty;function F(t,n,i,o){R(t,n,D(i&&_(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function M(t){return{from:function(n){return t.prototype=Object.create(n.prototype),F(t.prototype,"constructor",t),{extend:T.bind(null,t.prototype)}}}}var z=Object.getOwnPropertyDescriptor;function ne(t,n){var i=z(t,n),o;return i||(o=E(t))&&ne(o,n)}var ie=[].slice;function q(t,n,i){return ie.call(t,n,i)}function ae(t,n){return n(t)}function oe(t){if(!t)throw new Error("Assertion Failed")}function de(t){v.setImmediate?setImmediate(t):setTimeout(t,0)}function se(t,n){return t.reduce(function(i,o,s){var l=n(o,s);return l&&(i[l[0]]=l[1]),i},{})}function ce(t,n){if(typeof n=="string"&&_(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],o=0,s=n.length;o<s;++o){var l=ce(t,n[o]);i.push(l)}return i}var d=n.indexOf(".");if(d!==-1){var h=t[n.substr(0,d)];return h==null?void 0:ce(h,n.substr(d+1))}}function fe(t,n,i){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){oe(typeof i!="string"&&"length"in i);for(var o=0,s=n.length;o<s;++o)fe(t,n[o],i[o])}else{var l=n.indexOf(".");if(l!==-1){var d=n.substr(0,l),h=n.substr(l+1);if(h==="")i===void 0?y(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=i;else{var p=t[d];(!p||!_(t,d))&&(p=t[d]={}),fe(p,h,i)}}else i===void 0?y(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function he(t,n){typeof n=="string"?fe(t,n,void 0):"length"in n&&[].map.call(n,function(i){fe(t,i,void 0)})}function ge(t){var n={};for(var i in t)_(t,i)&&(n[i]=t[i]);return n}var Re=[].concat;function He(t){return Re.apply([],t)}var st="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(He([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return v[t]}),Ue=new Set(st.map(function(t){return v[t]}));function Se(t){var n={};for(var i in t)if(_(t,i)){var o=t[i];n[i]=!o||typeof o!="object"||Ue.has(o.constructor)?o:Se(o)}return n}function zt(t){for(var n in t)if(_(t,n))return!1;return!0}var rt=null;function Me(t){rt=new WeakMap;var n=xt(t);return rt=null,n}function xt(t){if(!t||typeof t!="object")return t;var n=rt.get(t);if(n)return n;if(y(t)){n=[],rt.set(t,n);for(var i=0,o=t.length;i<o;++i)n.push(xt(t[i]))}else if(Ue.has(t.constructor))n=t;else{var s=E(t);n=s===Object.prototype?{}:Object.create(s),rt.set(t,n);for(var l in t)_(t,l)&&(n[l]=xt(t[l]))}return n}var Ct={}.toString;function tn(t){return Ct.call(t).slice(8,-1)}var ut=typeof Symbol<"u"?Symbol.iterator:"@@iterator",it=typeof ut=="symbol"?function(t){var n;return t!=null&&(n=t[ut])&&n.apply(t)}:function(){return null};function Fe(t,n){var i=t.indexOf(n);return i>=0&&t.splice(i,1),i>=0}var Pt={};function Rt(t){var n,i,o,s;if(arguments.length===1){if(y(t))return t.slice();if(this===Pt&&typeof t=="string")return[t];if(s=it(t)){for(i=[];o=s.next(),!o.done;)i.push(o.value);return i}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(i=new Array(n);n--;)i[n]=t[n];return i}return[t]}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var ir=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ea=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],te=Ea.concat(W),Z={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _e(t,n){this.name=t,this.message=n}M(_e).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ve(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,o,s){return s.indexOf(i)===o}).join(`
`)}function Ke(t,n,i,o){this.failures=n,this.failedKeys=o,this.successCount=i,this.message=ve(t,n)}M(Ke).from(_e);function we(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=ve(t,this.failures)}M(we).from(_e);var gt=te.reduce(function(t,n){return t[n]=n+"Error",t},{}),Be=_e,$=te.reduce(function(t,n){var i=n+"Error";function o(s,l){this.name=i,s?typeof s=="string"?(this.message="".concat(s).concat(l?`
 `+l:""),this.inner=l||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=Z[n]||i,this.inner=null)}return M(o).from(Be),t[n]=o,t},{});$.Syntax=SyntaxError,$.Type=TypeError,$.Range=RangeError;var Fn=W.reduce(function(t,n){return t[n+"Error"]=$[n],t},{});function hn(t,n){if(!t||t instanceof _e||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Fn[t.name])return t;var i=new Fn[t.name](n||t.message,t);return"stack"in t&&F(i,"stack",{get:function(){return this.inner.stack}}),i}var ar=te.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=$[n]),t},{});ar.ModifyError=Ke,ar.DexieError=_e,ar.BulkError=we;function xe(){}function Kn(t){return t}function nn(t,n){return t==null||t===Kn?n:function(i){return n(t(i))}}function Mt(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function Al(t,n){return t===xe?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var l=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Mt(o,this.onsuccess):o),s&&(this.onerror=this.onerror?Mt(s,this.onerror):s),l!==void 0?l:i}}function Sl(t,n){return t===xe?n:function(){t.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Mt(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Mt(o,this.onerror):o)}}function Ol(t,n){return t===xe?n:function(i){var o=t.apply(this,arguments);D(i,o);var s=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Mt(s,this.onsuccess):s),l&&(this.onerror=this.onerror?Mt(l,this.onerror):l),o===void 0?d===void 0?void 0:d:D(o,d)}}function Il(t,n){return t===xe?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function xa(t,n){return t===xe?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return i.then(function(){return n.apply(o,l)})}return n.apply(this,arguments)}}var Vt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ns(t,n){Vt=t}var Pr={},rs=100,Ta=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,E(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,E(n),t]})(),is=Ta[0],as=Ta[1],Cl=Ta[2],Pl=as&&as.then,Bn=is&&is.constructor,ka=!!Cl;function Rl(){queueMicrotask(Nl)}var Rr=function(t,n){Mr.push([t,n]),di&&(Rl(),di=!1)},Da=!0,di=!0,jn=[],hi=[],Aa=Kn,vn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xe,pgp:!1,env:{},finalize:xe},Q=vn,Mr=[],zn=0,vi=[];function U(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=Q;if(typeof t!="function"){if(t!==Pr)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Oa(this,this._value);return}this._state=null,this._value=null,++n.ref,ss(this,t)}var Sa={get:function(){var t=Q,n=gi;function i(o,s){var l=this,d=!t.global&&(t!==Q||n!==gi),h=d&&!yn(),p=new U(function(m,x){Ia(l,new os(cs(o,t,d,h),cs(s,t,d,h),m,x,t))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return i.prototype=Pr,i},set:function(t){F(this,"then",t&&t.prototype===Pr?Sa:{get:function(){return t},set:Sa.set})}};T(U.prototype,{then:Sa,_then:function(t,n){Ia(this,new os(null,null,t,n,Q))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],i=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?i(o):pi(o)}):this.then(null,function(o){return o&&o.name===n?i(o):pi(o)})},finally:function(t){return this.then(function(n){return U.resolve(t()).then(function(){return n})},function(n){return U.resolve(t()).then(function(){return pi(n)})})},timeout:function(t,n){var i=this;return t<1/0?new U(function(o,s){var l=setTimeout(function(){return s(new $.Timeout(n))},t);i.then(o,s).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&F(U.prototype,Symbol.toStringTag,"Dexie.Promise"),vn.env=ls();function os(t,n,i,o,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=o,this.psd=s}T(U,{all:function(){var t=Rt.apply(null,arguments).map(_i);return new U(function(n,i){t.length===0&&n([]);var o=t.length;t.forEach(function(s,l){return U.resolve(s).then(function(d){t[l]=d,--o||n(t)},i)})})},resolve:function(t){if(t instanceof U)return t;if(t&&typeof t.then=="function")return new U(function(i,o){t.then(i,o)});var n=new U(Pr,!0,t);return n},reject:pi,race:function(){var t=Rt.apply(null,arguments).map(_i);return new U(function(n,i){t.map(function(o){return U.resolve(o).then(n,i)})})},PSD:{get:function(){return Q},set:function(t){return Q=t}},totalEchoes:{get:function(){return gi}},newPSD:pn,usePSD:Vn,scheduler:{get:function(){return Rr},set:function(t){Rr=t}},rejectionMapper:{get:function(){return Aa},set:function(t){Aa=t}},follow:function(t,n){return new U(function(i,o){return pn(function(s,l){var d=Q;d.unhandleds=[],d.onunhandled=l,d.finalize=Mt(function(){var h=this;Ll(function(){h.unhandleds.length===0?s():l(h.unhandleds[0])})},d.finalize),t()},n,i,o)})}}),Bn&&(Bn.allSettled&&F(U,"allSettled",function(){var t=Rt.apply(null,arguments).map(_i);return new U(function(n){t.length===0&&n([]);var i=t.length,o=new Array(i);t.forEach(function(s,l){return U.resolve(s).then(function(d){return o[l]={status:"fulfilled",value:d}},function(d){return o[l]={status:"rejected",reason:d}}).then(function(){return--i||n(o)})})})}),Bn.any&&typeof AggregateError<"u"&&F(U,"any",function(){var t=Rt.apply(null,arguments).map(_i);return new U(function(n,i){t.length===0&&i(new AggregateError([]));var o=t.length,s=new Array(o);t.forEach(function(l,d){return U.resolve(l).then(function(h){return n(h)},function(h){s[d]=h,--o||i(new AggregateError(s))})})})}),Bn.withResolvers&&(U.withResolvers=Bn.withResolvers));function ss(t,n){try{n(function(i){if(t._state===null){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&or();i&&typeof i.then=="function"?ss(t,function(s,l){i instanceof U?i._then(s,l):i.then(s,l)}):(t._state=!0,t._value=i,us(t)),o&&sr()}},Oa.bind(null,t))}catch(i){Oa(t,i)}}function Oa(t,n){if(hi.push(n),t._state===null){var i=t._lib&&or();n=Aa(n),t._state=!1,t._value=n,Fl(t),us(t),i&&sr()}}function us(t){var n=t._listeners;t._listeners=[];for(var i=0,o=n.length;i<o;++i)Ia(t,n[i]);var s=t._PSD;--s.ref||s.finalize(),zn===0&&(++zn,Rr(function(){--zn===0&&Ca()},[]))}function Ia(t,n){if(t._state===null){t._listeners.push(n);return}var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++zn,Rr(Ml,[i,t,n])}function Ml(t,n,i){try{var o,s=n._value;!n._state&&hi.length&&(hi=[]),o=Vt&&n._consoleTask?n._consoleTask.run(function(){return t(s)}):t(s),!n._state&&hi.indexOf(s)===-1&&Kl(n),i.resolve(o)}catch(l){i.reject(l)}finally{--zn===0&&Ca(),--i.psd.ref||i.psd.finalize()}}function Nl(){Vn(vn,function(){or()&&sr()})}function or(){var t=Da;return Da=!1,di=!1,t}function sr(){var t,n,i;do for(;Mr.length>0;)for(t=Mr,Mr=[],i=t.length,n=0;n<i;++n){var o=t[n];o[0].apply(null,o[1])}while(Mr.length>0);Da=!0,di=!0}function Ca(){var t=jn;jn=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=vi.slice(0),i=n.length;i;)n[--i]()}function Ll(t){function n(){t(),vi.splice(vi.indexOf(n),1)}vi.push(n),++zn,Rr(function(){--zn===0&&Ca()},[])}function Fl(t){jn.some(function(n){return n._value===t._value})||jn.push(t)}function Kl(t){for(var n=jn.length;n;)if(jn[--n]._value===t._value){jn.splice(n,1);return}}function pi(t){return new U(Pr,!1,t)}function Oe(t,n){var i=Q;return function(){var o=or(),s=Q;try{return mn(i,!0),t.apply(this,arguments)}catch(l){n&&n(l)}finally{mn(s,!1),o&&sr()}}}var We={awaits:0,echoes:0,id:0},Bl=0,yi=[],mi=0,gi=0,jl=0;function pn(t,n,i,o){var s=Q,l=Object.create(s);l.parent=s,l.ref=0,l.global=!1,l.id=++jl,vn.env,l.env=ka?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject}:{},n&&D(l,n),++s.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=Vn(l,t,i,o);return l.ref===0&&l.finalize(),d}function ur(){return We.id||(We.id=++Bl),++We.awaits,We.echoes+=rs,We.id}function yn(){return We.awaits?(--We.awaits===0&&(We.id=0),We.echoes=We.awaits*rs,!0):!1}(""+Pl).indexOf("[native code]")===-1&&(ur=yn=xe);function _i(t){return We.echoes&&t&&t.constructor===Bn?(ur(),t.then(function(n){return yn(),n},function(n){return yn(),Ne(n)})):t}function zl(t){++gi,(!We.echoes||--We.echoes===0)&&(We.echoes=We.awaits=We.id=0),yi.push(Q),mn(t,!0)}function Vl(){var t=yi[yi.length-1];yi.pop(),mn(t,!1)}function mn(t,n){var i=Q;if((n?We.echoes&&(!mi++||t!==Q):mi&&(!--mi||t!==Q))&&queueMicrotask(n?zl.bind(null,t):Vl),t!==Q&&(Q=t,i===vn&&(vn.env=ls()),ka)){var o=vn.env.Promise,s=t.env;(i.global||t.global)&&(Object.defineProperty(v,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function ls(){var t=v.Promise;return ka?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Vn(t,n,i,o,s){var l=Q;try{return mn(t,!0),n(i,o,s)}finally{mn(l,!1)}}function cs(t,n,i,o){return typeof t!="function"?t:function(){var s=Q;i&&ur(),mn(n,!0);try{return t.apply(this,arguments)}finally{mn(s,!1),o&&queueMicrotask(yn)}}}function Pa(t){Promise===Bn&&We.echoes===0?mi===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var Ne=U.reject;function Ra(t,n,i,o){if(!t.idbdb||!t._state.openComplete&&!Q.letThrough&&!t._vip){if(t._state.openComplete)return Ne(new $.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Ne(new $.DatabaseClosed);t.open().catch(xe)}return t._state.dbReadyPromise.then(function(){return Ra(t,n,i,o)})}else{var s=t._createTransaction(n,i,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(l){return l.name===gt.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Ra(t,n,i,o)})):Ne(l)}return s._promise(n,function(l,d){return pn(function(){return Q.trans=s,o(l,d,s)})}).then(function(l){if(n==="readwrite")try{s.idbtrans.commit()}catch{}return n==="readonly"?l:s._completion.then(function(){return l})})}}var fs="4.2.1",Hn="",Ma=-1/0,rn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ds="String expected.",lr=[],bi="__dbnames",Na="readonly",La="readwrite";function Un(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var hs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function wi(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=Me(n),delete n[t]),n}:function(n){return n}}function vs(){throw $.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function pe(t,n){try{var i=ps(t),o=ps(n);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return Ul(ys(t),ys(n));case"Array":return Hl(t,n)}}catch{}return NaN}function Hl(t,n){for(var i=t.length,o=n.length,s=i<o?i:o,l=0;l<s;++l){var d=pe(t[l],n[l]);if(d!==0)return d}return i===o?0:i<o?-1:1}function Ul(t,n){for(var i=t.length,o=n.length,s=i<o?i:o,l=0;l<s;++l)if(t[l]!==n[l])return t[l]<n[l]?-1:1;return i===o?0:i<o?-1:1}function ps(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var i=tn(t);return i==="ArrayBuffer"?"binary":i}function ys(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Ei(t,n,i){var o=t.schema.yProps;return o?(n&&i.numFailures>0&&(n=n.filter(function(s,l){return!i.failures[l]})),Promise.all(o.map(function(s){var l=s.updatesTable;return n?t.db.table(l).where("k").anyOf(n).delete():t.db.table(l).clear()})).then(function(){return i})):i}var Nr=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var i,o=this["@@propmod"];if(o.add!==void 0){var s=o.add;if(y(s))return f(f([],y(n)?n:[],!0),s).sort();if(typeof s=="number")return(Number(n)||0)+s;if(typeof s=="bigint")try{return BigInt(n)+s}catch{return BigInt(0)+s}throw new TypeError("Invalid term ".concat(s))}if(o.remove!==void 0){var l=o.remove;if(y(l))return y(n)?n.filter(function(h){return!l.includes(h)}).sort():[];if(typeof l=="number")return Number(n)-l;if(typeof l=="bigint")try{return BigInt(n)-l}catch{return BigInt(0)-l}throw new TypeError("Invalid subtrahend ".concat(l))}var d=(i=o.replacePrefix)===null||i===void 0?void 0:i[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function ms(t,n){for(var i=g(n),o=i.length,s=!1,l=0;l<o;++l){var d=i[l],h=n[d],p=ce(t,d);h instanceof Nr?(fe(t,d,h.execute(p)),s=!0):p!==h&&(fe(t,d,h),s=!0)}return s}var gs=(function(){function t(){}return t.prototype._trans=function(n,i,o){var s=this._tx||Q.trans,l=this.name,d=Vt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function h(x,b,O){if(!O.schema[l])throw new $.NotFound("Table "+l+" not part of transaction");return i(O.idbtrans,O)}var p=or();try{var m=s&&s.db._novip===this.db._novip?s===Q.trans?s._promise(n,h,o):pn(function(){return s._promise(n,h,o)},{trans:s,transless:Q.transless||Q}):Ra(this.db,n,[this.name],h);return d&&(m._consoleTask=d,m=m.catch(function(x){return console.trace(x),Ne(x)})),m}finally{p&&sr()}},t.prototype.get=function(n,i){var o=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?Ne(new $.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:n}).then(function(l){return o.hook.reading.fire(l)})}).then(i)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(y(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=g(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&i.every(function(O){return x.keyPath.indexOf(O)>=0})){for(var b=0;b<i.length;++b)if(i.indexOf(x.keyPath[b])===-1)return!1;return!0}return!1}).sort(function(x,b){return x.keyPath.length-b.keyPath.length})[0];if(o&&this.db._maxKey!==Hn){var s=o.keyPath.slice(0,i.length);return this.where(s).equals(s.map(function(x){return n[x]}))}!o&&Vt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var l=this.schema.idxByName;function d(x,b){return pe(x,b)===0}var h=i.reduce(function(x,b){var O=x[0],B=x[1],w=l[b],k=n[b];return[O||w,O||!w?Un(B,w&&w.multi?function(S){var I=ce(S,b);return y(I)&&I.some(function(N){return d(k,N)})}:function(S){return d(k,ce(S,b))}):B]},[null,null]),p=h[0],m=h[1];return p?this.where(p.name).equals(n[p.keyPath]).filter(m):o?this.filter(m):this.where(i).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,y(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var i=this,o=i.db,s=i.name;this.schema.mappedClass=n,n.prototype instanceof vs&&(n=(function(p){u(m,p);function m(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(m.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),m.prototype.table=function(){return s},m})(n));for(var l=new Set,d=n.prototype;d;d=E(d))Object.getOwnPropertyNames(d).forEach(function(p){return l.add(p)});var h=function(p){if(!p)return p;var m=Object.create(n.prototype);for(var x in p)if(!l.has(x))try{m[x]=p[x]}catch{}return m};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=h,this.hook("reading",h),n},t.prototype.defineClass=function(){function n(i){D(this,i)}return this.mapToClass(n)},t.prototype.add=function(n,i){var o=this,s=this.schema.primKey,l=s.auto,d=s.keyPath,h=n;return d&&l&&(h=wi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"add",keys:i!=null?[i]:null,values:[h]})}).then(function(p){return p.numFailures?U.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{fe(n,d,p)}catch{}return p})},t.prototype.upsert=function(n,i){var o=this,s=this.schema.primKey.keyPath;return this._trans("readwrite",function(l){return o.core.get({trans:l,key:n}).then(function(d){var h=d??{};return ms(h,i),s&&fe(h,s,n),o.core.mutate({trans:l,type:"put",values:[h],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[i]}}).then(function(p){return p.numFailures?U.reject(p.failures[0]):!!d})})})},t.prototype.update=function(n,i){if(typeof n=="object"&&!y(n)){var o=ce(n,this.schema.primKey.keyPath);return o===void 0?Ne(new $.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(n).modify(i)},t.prototype.put=function(n,i){var o=this,s=this.schema.primKey,l=s.auto,d=s.keyPath,h=n;return d&&l&&(h=wi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"put",values:[h],keys:i!=null?[i]:null})}).then(function(p){return p.numFailures?U.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{fe(n,d,p)}catch{}return p})},t.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(s){return Ei(i,[n],s)}).then(function(s){return s.numFailures?U.reject(s.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:hs}).then(function(o){return Ei(n,null,o)})}).then(function(i){return i.numFailures?U.reject(i.failures[0]):void 0})},t.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:n,trans:o}).then(function(s){return s.map(function(l){return i.hook.reading.fire(l)})})})},t.prototype.bulkAdd=function(n,i,o){var s=this,l=Array.isArray(i)?i:void 0;o=o||(l?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=s.schema.primKey,m=p.auto,x=p.keyPath;if(x&&l)throw new $.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");var b=n.length,O=x&&m?n.map(wi(x)):n;return s.core.mutate({trans:h,type:"add",keys:l,values:O,wantResults:d}).then(function(B){var w=B.numFailures,k=B.results,S=B.lastResult,I=B.failures,N=d?k:S;if(w===0)return N;throw new we("".concat(s.name,".bulkAdd(): ").concat(w," of ").concat(b," operations failed"),I)})})},t.prototype.bulkPut=function(n,i,o){var s=this,l=Array.isArray(i)?i:void 0;o=o||(l?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=s.schema.primKey,m=p.auto,x=p.keyPath;if(x&&l)throw new $.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");var b=n.length,O=x&&m?n.map(wi(x)):n;return s.core.mutate({trans:h,type:"put",keys:l,values:O,wantResults:d}).then(function(B){var w=B.numFailures,k=B.results,S=B.lastResult,I=B.failures,N=d?k:S;if(w===0)return N;throw new we("".concat(s.name,".bulkPut(): ").concat(w," of ").concat(b," operations failed"),I)})})},t.prototype.bulkUpdate=function(n){var i=this,o=this.core,s=n.map(function(h){return h.key}),l=n.map(function(h){return h.changes}),d=[];return this._trans("readwrite",function(h){return o.getMany({trans:h,keys:s,cache:"clone"}).then(function(p){var m=[],x=[];n.forEach(function(O,B){var w=O.key,k=O.changes,S=p[B];if(S){for(var I=0,N=Object.keys(k);I<N.length;I++){var L=N[I],K=k[L];if(L===i.schema.primKey.keyPath){if(pe(K,w)!==0)throw new $.Constraint("Cannot update primary key in bulkUpdate()")}else fe(S,L,K)}d.push(B),m.push(w),x.push(S)}});var b=m.length;return o.mutate({trans:h,type:"put",keys:m,values:x,updates:{keys:s,changeSpecs:l}}).then(function(O){var B=O.numFailures,w=O.failures;if(B===0)return b;for(var k=0,S=Object.keys(w);k<S.length;k++){var I=S[k],N=d[Number(I)];if(N!=null){var L=w[I];delete w[I],w[N]=L}}throw new we("".concat(i.name,".bulkUpdate(): ").concat(B," of ").concat(b," operations failed"),w)})})})},t.prototype.bulkDelete=function(n){var i=this,o=n.length;return this._trans("readwrite",function(s){return i.core.mutate({trans:s,type:"delete",keys:n}).then(function(l){return Ei(i,n,l)})}).then(function(s){var l=s.numFailures,d=s.lastResult,h=s.failures;if(l===0)return d;throw new we("".concat(i.name,".bulkDelete(): ").concat(l," of ").concat(o," operations failed"),h)})},t})();function Lr(t){var n={},i=function(h,p){if(p){for(var m=arguments.length,x=new Array(m-1);--m;)x[m-1]=arguments[m];return n[h].subscribe.apply(null,x),t}else if(typeof h=="string")return n[h]};i.addEventType=l;for(var o=1,s=arguments.length;o<s;++o)l(arguments[o]);return i;function l(h,p,m){if(typeof h=="object")return d(h);p||(p=Il),m||(m=xe);var x={subscribers:[],fire:m,subscribe:function(b){x.subscribers.indexOf(b)===-1&&(x.subscribers.push(b),x.fire=p(x.fire,b))},unsubscribe:function(b){x.subscribers=x.subscribers.filter(function(O){return O!==b}),x.fire=x.subscribers.reduce(p,m)}};return n[h]=i[h]=x,x}function d(h){g(h).forEach(function(p){var m=h[p];if(y(m))l(p,h[p][0],h[p][1]);else if(m==="asap")var x=l(p,Kn,function(){for(var O=arguments.length,B=new Array(O);O--;)B[O]=arguments[O];x.subscribers.forEach(function(w){de(function(){w.apply(null,B)})})});else throw new $.InvalidArgument("Invalid event config")})}}function Fr(t,n){return M(n).from({prototype:t}),n}function Wl(t){return Fr(gs.prototype,function(i,o,s){this.db=t,this._tx=s,this.name=i,this.schema=o,this.hook=t._allTables[i]?t._allTables[i].hook:Lr(null,{creating:[Al,xe],reading:[nn,Kn],updating:[Ol,xe],deleting:[Sl,xe]})})}function cr(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function Fa(t,n){t.filter=Un(t.filter,n)}function Ka(t,n,i){var o=t.replayFilter;t.replayFilter=o?function(){return Un(o(),n())}:n,t.justLimit=i&&!o}function Gl(t,n){t.isMatch=Un(t.isMatch,n)}function xi(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new $.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function _s(t,n,i){var o=xi(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function Ti(t,n,i,o){var s=t.replayFilter?Un(t.filter,t.replayFilter()):t.filter;if(t.or){var l={},d=function(h,p,m){if(!s||s(p,m,function(O){return p.stop(O)},function(O){return p.fail(O)})){var x=p.primaryKey,b=""+x;b==="[object ArrayBuffer]"&&(b=""+new Uint8Array(x)),_(l,b)||(l[b]=!0,n(h,p,m))}};return Promise.all([t.or._iterate(d,i),bs(_s(t,o,i),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return bs(_s(t,o,i),Un(t.algorithm,s),n,!t.keysOnly&&t.valueMapper)}function bs(t,n,i,o){var s=o?function(d,h,p){return i(o(d),h,p)}:i,l=Oe(s);return t.then(function(d){if(d)return d.start(function(){var h=function(){return d.continue()};(!n||n(d,function(p){return h=p},function(p){d.stop(p),h=xe},function(p){d.fail(p),h=xe}))&&l(d.value,d,function(p){return h=p}),h()})})}var Yl=(function(){function t(){}return t.prototype._read=function(n,i){var o=this._ctx;return o.error?o.table._trans(null,Ne.bind(null,o.error)):o.table._trans("readonly",n).then(i)},t.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,Ne.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=Un(i.algorithm,n)},t.prototype._iterate=function(n,i){return Ti(this._ctx,n,i,this._ctx.table.core)},t.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&D(o,n),i._ctx=o,i},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var i=this._ctx;return this._read(function(o){return Ti(i,n,o,i.table.core)})},t.prototype.count=function(n){var i=this;return this._read(function(o){var s=i._ctx,l=s.table.core;if(cr(s,!0))return l.count({trans:o,query:{index:xi(s,l.schema),range:s.range}}).then(function(h){return Math.min(h,s.limit)});var d=0;return Ti(s,function(){return++d,!1},o,l).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,i){var o=n.split(".").reverse(),s=o[0],l=o.length-1;function d(m,x){return x?d(m[o[x]],x-1):m[s]}var h=this._ctx.dir==="next"?1:-1;function p(m,x){var b=d(m,l),O=d(x,l);return pe(b,O)*h}return this.toArray(function(m){return m.sort(p)}).then(i)},t.prototype.toArray=function(n){var i=this;return this._read(function(o){var s=i._ctx;if(s.dir==="next"&&cr(s,!0)&&s.limit>0){var l=s.valueMapper,d=xi(s,s.table.core.schema);return s.table.core.query({trans:o,limit:s.limit,values:!0,query:{index:d,range:s.range}}).then(function(p){var m=p.result;return l?m.map(l):m})}else{var h=[];return Ti(s,function(p){return h.push(p)},o,s.table.core).then(function(){return h})}},n)},t.prototype.offset=function(n){var i=this._ctx;return n<=0?this:(i.offset+=n,cr(i)?Ka(i,function(){var o=n;return function(s,l){return o===0?!0:o===1?(--o,!1):(l(function(){s.advance(o),o=0}),!1)}}):Ka(i,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),Ka(this._ctx,function(){var i=n;return function(o,s,l){return--i<=0&&s(l),i>=0}},!0),this},t.prototype.until=function(n,i){return Fa(this._ctx,function(o,s,l){return n(o.value)?(s(l),i):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return Fa(this._ctx,function(i){return n(i.value)}),Gl(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){n(s.key,s)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){n(s.primaryKey,s)})},t.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,l){o.push(l.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&cr(i,!0)&&i.limit>0)return this._read(function(s){var l=xi(i,i.table.core.schema);return i.table.core.query({trans:s,values:!1,limit:i.limit,query:{index:l,range:i.range}})}).then(function(s){var l=s.result;return l}).then(n);i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,l){o.push(l.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,i=n.index&&n.table.schema.idxByName[n.index];if(!i||!i.multi)return this;var o={};return Fa(this._ctx,function(s){var l=s.primaryKey.toString(),d=_(o,l);return o[l]=!0,!d}),this},t.prototype.modify=function(n){var i=this,o=this._ctx;return this._write(function(s){var l;typeof n=="function"?l=n:l=function(I){return ms(I,n)};var d=o.table.core,h=d.schema.primaryKey,p=h.outbound,m=h.extractKey,x=200,b=i.db._options.modifyChunkSize;b&&(typeof b=="object"?x=b[d.name]||b["*"]||200:x=b);var O=[],B=0,w=[],k=function(I,N){var L=N.failures,K=N.numFailures;B+=I-K;for(var P=0,V=g(L);P<V.length;P++){var G=V[P];O.push(L[G])}},S=n===ws;return i.clone().primaryKeys().then(function(I){var N=cr(o)&&o.limit===1/0&&(typeof n!="function"||S)&&{index:o.index,range:o.range},L=function(K){var P=Math.min(x,I.length-K),V=I.slice(K,K+P);return(S?Promise.resolve([]):d.getMany({trans:s,keys:V,cache:"immutable"})).then(function(G){var H=[],ee=[],le=p?[]:null,Y=S?V:[];if(!S)for(var ue=0;ue<P;++ue){var re=G[ue],ye={value:Me(re),primKey:I[K+ue]};l.call(ye,ye.value,ye)!==!1&&(ye.value==null?Y.push(I[K+ue]):!p&&pe(m(re),m(ye.value))!==0?(Y.push(I[K+ue]),H.push(ye.value)):(ee.push(ye.value),p&&le.push(I[K+ue])))}return Promise.resolve(H.length>0&&d.mutate({trans:s,type:"add",values:H}).then(function(J){for(var Ce in J.failures)Y.splice(parseInt(Ce),1);k(H.length,J)})).then(function(){return(ee.length>0||N&&typeof n=="object")&&d.mutate({trans:s,type:"put",keys:le,values:ee,criteria:N,changeSpec:typeof n!="function"&&n,isAdditionalChunk:K>0}).then(function(J){return k(ee.length,J)})}).then(function(){return(Y.length>0||N&&S)&&d.mutate({trans:s,type:"delete",keys:Y,criteria:N,isAdditionalChunk:K>0}).then(function(J){return Ei(o.table,Y,J)}).then(function(J){return k(Y.length,J)})}).then(function(){return I.length>K+P&&L(K+x)})})};return L(0).then(function(){if(O.length>0)throw new Ke("Error modifying one or more objects",O,B,w);return I.length})})})},t.prototype.delete=function(){var n=this._ctx,i=n.range;return cr(n)&&!n.table.schema.yProps&&(n.isPrimKey||i.type===3)?this._write(function(o){var s=n.table.core.schema.primaryKey,l=i;return n.table.core.count({trans:o,query:{index:s,range:l}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:l}).then(function(h){var p=h.failures,m=h.numFailures;if(m)throw new Ke("Could not delete some values",Object.keys(p).map(function(x){return p[x]}),d-m);return d-m})})}):this.modify(ws)},t})(),ws=function(t,n){return n.value=null};function ql(t){return Fr(Yl.prototype,function(i,o){this.db=t;var s=hs,l=null;if(o)try{s=o()}catch(m){l=m}var d=i._ctx,h=d.table,p=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:s,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:l,or:d.or,valueMapper:p!==Kn?p:null}})}function Zl(t,n){return t<n?-1:t===n?0:1}function $l(t,n){return t>n?-1:t===n?0:1}function _t(t,n,i){var o=t instanceof xs?new t.Collection(t):t;return o._ctx.error=i?new i(n):new TypeError(n),o}function fr(t){return new t.Collection(t,function(){return Es("")}).limit(0)}function Ql(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function Xl(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function Jl(t,n,i,o,s,l){for(var d=Math.min(t.length,o.length),h=-1,p=0;p<d;++p){var m=n[p];if(m!==o[p])return s(t[p],i[p])<0?t.substr(0,p)+i[p]+i.substr(p+1):s(t[p],o[p])<0?t.substr(0,p)+o[p]+i.substr(p+1):h>=0?t.substr(0,h)+n[h]+i.substr(h+1):null;s(t[p],m)<0&&(h=p)}return d<o.length&&l==="next"?t+i.substr(t.length):d<t.length&&l==="prev"?t.substr(0,i.length):h<0?null:t.substr(0,h)+o[h]+i.substr(h+1)}function ki(t,n,i,o){var s,l,d,h,p,m,x,b=i.length;if(!i.every(function(k){return typeof k=="string"}))return _t(t,ds);function O(k){s=Ql(k),l=Xl(k),d=k==="next"?Zl:$l;var S=i.map(function(I){return{lower:l(I),upper:s(I)}}).sort(function(I,N){return d(I.lower,N.lower)});h=S.map(function(I){return I.upper}),p=S.map(function(I){return I.lower}),m=k,x=k==="next"?"":o}O("next");var B=new t.Collection(t,function(){return gn(h[0],p[b-1]+o)});B._ondirectionchange=function(k){O(k)};var w=0;return B._addAlgorithm(function(k,S,I){var N=k.key;if(typeof N!="string")return!1;var L=l(N);if(n(L,p,w))return!0;for(var K=null,P=w;P<b;++P){var V=Jl(N,L,h[P],p[P],d,m);V===null&&K===null?w=P+1:(K===null||d(K,V)>0)&&(K=V)}return S(K!==null?function(){k.continue(K+x)}:I),!1}),B}function gn(t,n,i,o){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:o}}function Es(t){return{type:1,lower:t,upper:t}}var xs=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,i,o,s){o=o!==!1,s=s===!0;try{return this._cmp(n,i)>0||this._cmp(n,i)===0&&(o||s)&&!(o&&s)?fr(this):new this.Collection(this,function(){return gn(n,i,!o,!s)})}catch{return _t(this,rn)}},t.prototype.equals=function(n){return n==null?_t(this,rn):new this.Collection(this,function(){return Es(n)})},t.prototype.above=function(n){return n==null?_t(this,rn):new this.Collection(this,function(){return gn(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?_t(this,rn):new this.Collection(this,function(){return gn(n,void 0,!1)})},t.prototype.below=function(n){return n==null?_t(this,rn):new this.Collection(this,function(){return gn(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?_t(this,rn):new this.Collection(this,function(){return gn(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?_t(this,ds):this.between(n,n+Hn,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):ki(this,function(i,o){return i.indexOf(o[0])===0},[n],Hn)},t.prototype.equalsIgnoreCase=function(n){return ki(this,function(i,o){return i===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=Rt.apply(Pt,arguments);return n.length===0?fr(this):ki(this,function(i,o){return o.indexOf(i)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=Rt.apply(Pt,arguments);return n.length===0?fr(this):ki(this,function(i,o){return o.some(function(s){return i.indexOf(s)===0})},n,Hn)},t.prototype.anyOf=function(){var n=this,i=Rt.apply(Pt,arguments),o=this._cmp;try{i.sort(o)}catch{return _t(this,rn)}if(i.length===0)return fr(this);var s=new this.Collection(this,function(){return gn(i[0],i[i.length-1])});s._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,i.sort(o)};var l=0;return s._addAlgorithm(function(d,h,p){for(var m=d.key;o(m,i[l])>0;)if(++l,l===i.length)return h(p),!1;return o(m,i[l])===0?!0:(h(function(){d.continue(i[l])}),!1)}),s},t.prototype.notEqual=function(n){return this.inAnyRange([[Ma,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=Rt.apply(Pt,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return _t(this,rn)}var i=n.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[Ma,s]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,i){var o=this,s=this._cmp,l=this._ascending,d=this._descending,h=this._min,p=this._max;if(n.length===0)return fr(this);if(!n.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&l(P[0],P[1])<=0}))return _t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$.InvalidArgument);var m=!i||i.includeLowers!==!1,x=i&&i.includeUppers===!0;function b(P,V){for(var G=0,H=P.length;G<H;++G){var ee=P[G];if(s(V[0],ee[1])<0&&s(V[1],ee[0])>0){ee[0]=h(ee[0],V[0]),ee[1]=p(ee[1],V[1]);break}}return G===H&&P.push(V),P}var O=l;function B(P,V){return O(P[0],V[0])}var w;try{w=n.reduce(b,[]),w.sort(B)}catch{return _t(this,rn)}var k=0,S=x?function(P){return l(P,w[k][1])>0}:function(P){return l(P,w[k][1])>=0},I=m?function(P){return d(P,w[k][0])>0}:function(P){return d(P,w[k][0])>=0};function N(P){return!S(P)&&!I(P)}var L=S,K=new this.Collection(this,function(){return gn(w[0][0],w[w.length-1][1],!m,!x)});return K._ondirectionchange=function(P){P==="next"?(L=S,O=l):(L=I,O=d),w.sort(B)},K._addAlgorithm(function(P,V,G){for(var H=P.key;L(H);)if(++k,k===w.length)return V(G),!1;return N(H)?!0:(o._cmp(H,w[k][1])===0||o._cmp(H,w[k][0])===0||V(function(){O===l?P.continue(w[k][0]):P.continue(w[k][1])}),!1)}),K},t.prototype.startsWithAnyOf=function(){var n=Rt.apply(Pt,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?fr(this):this.inAnyRange(n.map(function(i){return[i,i+Hn]})):_t(this,"startsWithAnyOf() only works with strings")},t})();function ec(t){return Fr(xs.prototype,function(i,o,s){if(this.db=t,this._ctx={table:i,index:o===":id"?null:o,or:s},this._cmp=this._ascending=pe,this._descending=function(l,d){return pe(d,l)},this._max=function(l,d){return pe(l,d)>0?l:d},this._min=function(l,d){return pe(l,d)<0?l:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new $.MissingAPI})}function Ht(t){return Oe(function(n){return Kr(n),t(n.target.error),!1})}function Kr(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Br="storagemutated",Ba="x-storagemutated-1",_n=Lr(null,Br),tc=(function(){function t(){}return t.prototype._lock=function(){return oe(!Q.global),++this._reculock,this._reculock===1&&!Q.global&&(Q.lockOwnerFor=this),this},t.prototype._unlock=function(){if(oe(!Q.global),--this._reculock===0)for(Q.global||(Q.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{Vn(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&Q.lockOwnerFor!==this},t.prototype.create=function(n){var i=this;if(!this.mode)return this;var o=this.db.idbdb,s=this.db._state.dbOpenError;if(oe(!this.idbtrans),!n&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new $.DatabaseClosed(s);case"MissingAPIError":throw new $.MissingAPI(s.message,s);default:throw new $.OpenFailed(s)}if(!this.active)throw new $.TransactionInactive;return oe(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=Oe(function(l){Kr(l),i._reject(n.error)}),n.onabort=Oe(function(l){Kr(l),i.active&&i._reject(new $.Abort(n.error)),i.active=!1,i.on("abort").fire(l)}),n.oncomplete=Oe(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&_n.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,i,o){var s=this;if(n==="readwrite"&&this.mode!=="readwrite")return Ne(new $.ReadOnly("Transaction is readonly"));if(!this.active)return Ne(new $.TransactionInactive);if(this._locked())return new U(function(d,h){s._blockedFuncs.push([function(){s._promise(n,i,o).then(d,h)},Q])});if(o)return pn(function(){var d=new U(function(h,p){s._lock();var m=i(h,p,s);m&&m.then&&m.then(h,p)});return d.finally(function(){return s._unlock()}),d._lib=!0,d});var l=new U(function(d,h){var p=i(d,h,s);p&&p.then&&p.then(d,h)});return l._lib=!0,l},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var i=this._root(),o=U.resolve(n);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var s=i.idbtrans.objectStore(i.storeNames[0]);(function d(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(s.get(-1/0).onsuccess=d)})()}var l=i._waitingFor;return new U(function(d,h){o.then(function(p){return i._waitingQueue.push(Oe(d.bind(null,p)))},function(p){return i._waitingQueue.push(Oe(h.bind(null,p)))}).finally(function(){i._waitingFor===l&&(i._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new $.Abort))},t.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(_(i,n))return i[n];var o=this.schema[n];if(!o)throw new $.NotFound("Table "+n+" not part of transaction");var s=new this.db.Table(n,o,this);return s.core=this.db.core.table(n),i[n]=s,s},t})();function nc(t){return Fr(tc.prototype,function(i,o,s,l,d){var h=this;i!=="readonly"&&o.forEach(function(p){var m,x=(m=s[p])===null||m===void 0?void 0:m.yProps;x&&(o=o.concat(x.map(function(b){return b.updatesTable})))}),this.db=t,this.mode=i,this.storeNames=o,this.schema=s,this.chromeTransactionDurability=l,this.idbtrans=null,this.on=Lr(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U(function(p,m){h._resolve=p,h._reject=m}),this._completion.then(function(){h.active=!1,h.on.complete.fire()},function(p){var m=h.active;return h.active=!1,h.on.error.fire(p),h.parent?h.parent._reject(p):m&&h.idbtrans&&h.idbtrans.abort(),Ne(p)})})}function ja(t,n,i,o,s,l,d,h){return{name:t,keyPath:n,unique:i,multi:o,auto:s,compound:l,src:(i&&!d?"&":"")+(o?"*":"")+(s?"++":"")+Ts(n),type:h}}function Ts(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function za(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:se(i,function(o){return[o.name,o]})}}function rc(t){return t.length===1?t[0]:t}var jr=function(t){try{return t.only([[]]),jr=function(){return[[]]},[[]]}catch{return jr=function(){return Hn},Hn}};function Va(t){return t==null?function(){}:typeof t=="string"?ic(t):function(n){return ce(n,t)}}function ic(t){var n=t.split(".");return n.length===1?function(i){return i[t]}:function(i){return ce(i,t)}}function ks(t){return[].slice.call(t)}var ac=0;function zr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function oc(t,n,i){function o(b,O){var B=ks(b.objectStoreNames);return{schema:{name:b.name,tables:B.map(function(w){return O.objectStore(w)}).map(function(w){var k=w.keyPath,S=w.autoIncrement,I=y(k),N=k==null,L={},K={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N,compound:I,keyPath:k,autoIncrement:S,unique:!0,extractKey:Va(k)},indexes:ks(w.indexNames).map(function(P){return w.index(P)}).map(function(P){var V=P.name,G=P.unique,H=P.multiEntry,ee=P.keyPath,le=y(ee),Y={name:V,compound:le,keyPath:ee,unique:G,multiEntry:H,extractKey:Va(ee)};return L[zr(ee)]=Y,Y}),getIndexByKeyPath:function(P){return L[zr(P)]}};return L[":id"]=K.primaryKey,k!=null&&(L[zr(k)]=K.primaryKey),K})},hasGetAll:B.length>0&&"getAll"in O.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function s(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var O=b.lower,B=b.upper,w=b.lowerOpen,k=b.upperOpen,S=O===void 0?B===void 0?null:n.upperBound(B,!!k):B===void 0?n.lowerBound(O,!!w):n.bound(O,B,!!w,!!k);return S}function l(b){var O=b.name;function B(S){var I=S.trans,N=S.type,L=S.keys,K=S.values,P=S.range;return new Promise(function(V,G){V=Oe(V);var H=I.objectStore(O),ee=H.keyPath==null,le=N==="put"||N==="add";if(!le&&N!=="delete"&&N!=="deleteRange")throw new Error("Invalid operation type: "+N);var Y=(L||K||{length:1}).length;if(L&&K&&L.length!==K.length)throw new Error("Given keys array must have same length as given values array.");if(Y===0)return V({numFailures:0,failures:{},results:[],lastResult:void 0});var ue,re=[],ye=[],J=0,Ce=function(Wt){++J,Kr(Wt)};if(N==="deleteRange"){if(P.type===4)return V({numFailures:J,failures:ye,results:[],lastResult:void 0});P.type===3?re.push(ue=H.clear()):re.push(ue=H.delete(s(P)))}else{var Qe=le?ee?[K,L]:[K,null]:[L,null],Ut=Qe[0],lt=Qe[1];if(le)for(var Tt=0;Tt<Y;++Tt)re.push(ue=lt&&lt[Tt]!==void 0?H[N](Ut[Tt],lt[Tt]):H[N](Ut[Tt])),ue.onerror=Ce;else for(var Tt=0;Tt<Y;++Tt)re.push(ue=H[N](Ut[Tt])),ue.onerror=Ce}var En=function(Wt){var Ur=Wt.target.result;re.forEach(function(Nt,Fi){return Nt.error!=null&&(ye[Fi]=Nt.error)}),V({numFailures:J,failures:ye,results:N==="delete"?L:re.map(function(Nt){return Nt.result}),lastResult:Ur})};ue.onerror=function(Wt){Ce(Wt),En(Wt)},ue.onsuccess=En})}function w(S){var I=S.trans,N=S.values,L=S.query,K=S.reverse,P=S.unique;return new Promise(function(V,G){V=Oe(V);var H=L.index,ee=L.range,le=I.objectStore(O),Y=H.isPrimaryKey?le:le.index(H.name),ue=K?P?"prevunique":"prev":P?"nextunique":"next",re=N||!("openKeyCursor"in Y)?Y.openCursor(s(ee),ue):Y.openKeyCursor(s(ee),ue);re.onerror=Ht(G),re.onsuccess=Oe(function(ye){var J=re.result;if(!J){V(null);return}J.___id=++ac,J.done=!1;var Ce=J.continue.bind(J),Qe=J.continuePrimaryKey;Qe&&(Qe=Qe.bind(J));var Ut=J.advance.bind(J),lt=function(){throw new Error("Cursor not started")},Tt=function(){throw new Error("Cursor not stopped")};J.trans=I,J.stop=J.continue=J.continuePrimaryKey=J.advance=lt,J.fail=Oe(G),J.next=function(){var En=this,Wt=1;return this.start(function(){return Wt--?En.continue():En.stop()}).then(function(){return En})},J.start=function(En){var Wt=new Promise(function(Nt,Fi){Nt=Oe(Nt),re.onerror=Ht(Fi),J.fail=Fi,J.stop=function(Yc){J.stop=J.continue=J.continuePrimaryKey=J.advance=Tt,Nt(Yc)}}),Ur=function(){if(re.result)try{En()}catch(Nt){J.fail(Nt)}else J.done=!0,J.start=function(){throw new Error("Cursor behind last entry")},J.stop()};return re.onsuccess=Oe(function(Nt){re.onsuccess=Ur,Ur()}),J.continue=Ce,J.continuePrimaryKey=Qe,J.advance=Ut,Ur(),Wt},V(J)},G)})}function k(S){return function(I){return new Promise(function(N,L){N=Oe(N);var K=I.trans,P=I.values,V=I.limit,G=I.query,H=V===1/0?void 0:V,ee=G.index,le=G.range,Y=K.objectStore(O),ue=ee.isPrimaryKey?Y:Y.index(ee.name),re=s(le);if(V===0)return N({result:[]});if(S){var ye=P?ue.getAll(re,H):ue.getAllKeys(re,H);ye.onsuccess=function(Ut){return N({result:Ut.target.result})},ye.onerror=Ht(L)}else{var J=0,Ce=P||!("openKeyCursor"in ue)?ue.openCursor(re):ue.openKeyCursor(re),Qe=[];Ce.onsuccess=function(Ut){var lt=Ce.result;if(!lt)return N({result:Qe});if(Qe.push(P?lt.value:lt.primaryKey),++J===V)return N({result:Qe});lt.continue()},Ce.onerror=Ht(L)}})}}return{name:O,schema:b,mutate:B,getMany:function(S){var I=S.trans,N=S.keys;return new Promise(function(L,K){L=Oe(L);for(var P=I.objectStore(O),V=N.length,G=new Array(V),H=0,ee=0,le,Y=function(J){var Ce=J.target;(G[Ce._pos]=Ce.result)!=null,++ee===H&&L(G)},ue=Ht(K),re=0;re<V;++re){var ye=N[re];ye!=null&&(le=P.get(N[re]),le._pos=re,le.onsuccess=Y,le.onerror=ue,++H)}H===0&&L(G)})},get:function(S){var I=S.trans,N=S.key;return new Promise(function(L,K){L=Oe(L);var P=I.objectStore(O),V=P.get(N);V.onsuccess=function(G){return L(G.target.result)},V.onerror=Ht(K)})},query:k(p),openCursor:w,count:function(S){var I=S.query,N=S.trans,L=I.index,K=I.range;return new Promise(function(P,V){var G=N.objectStore(O),H=L.isPrimaryKey?G:G.index(L.name),ee=s(K),le=ee?H.count(ee):H.count();le.onsuccess=Oe(function(Y){return P(Y.target.result)}),le.onerror=Ht(V)})}}}var d=o(t,i),h=d.schema,p=d.hasGetAll,m=h.tables.map(function(b){return l(b)}),x={};return m.forEach(function(b){return x[b.name]=b}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(b){var O=x[b];if(!O)throw new Error("Table '".concat(b,"' not found"));return x[b]},MIN_KEY:-1/0,MAX_KEY:jr(n),schema:h}}function sc(t,n){return n.reduce(function(i,o){var s=o.create;return c(c({},i),s(i))},t)}function uc(t,n,i,o){var s=i.IDBKeyRange;i.indexedDB;var l=sc(oc(n,s,o),t.dbcore);return{dbcore:l}}function Di(t,n){var i=n.db,o=uc(t._middlewares,i,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(s){var l=s.name;t.core.schema.tables.some(function(d){return d.name===l})&&(s.core=t.core.table(l),t[l]instanceof t.Table&&(t[l].core=s.core))})}function Ai(t,n,i,o){i.forEach(function(s){var l=o[s];n.forEach(function(d){var h=ne(d,s);(!h||"value"in h&&h.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?F(d,s,{get:function(){return this.table(s)},set:function(p){R(this,s,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):d[s]=new t.Table(s,l))})})}function Ha(t,n){n.forEach(function(i){for(var o in i)i[o]instanceof t.Table&&delete i[o]})}function lc(t,n){return t._cfg.version-n._cfg.version}function cc(t,n,i,o){var s=t._dbSchema;i.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=za("$meta",As("")[0],[]),t._storeNames.push("$meta"));var l=t._createTransaction("readwrite",t._storeNames,s);l.create(i),l._completion.catch(o);var d=l._reject.bind(l),h=Q.transless||Q;pn(function(){if(Q.trans=l,Q.transless=h,n===0)g(s).forEach(function(p){Wa(i,p,s[p].primKey,s[p].indexes)}),Di(t,i),U.follow(function(){return t.on.populate.fire(l)}).catch(d);else return Di(t,i),dc(t,l,n).then(function(p){return hc(t,p,l,i)}).catch(d)})}function fc(t,n){Ds(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=Oi(t,t.idbdb,n);Ii(t,t._dbSchema,n);for(var o=Ua(i,t._dbSchema),s=function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=n.objectStore(m.name);m.add.forEach(function(b){Vt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(b.src)),Si(x,b)})},l=0,d=o.change;l<d.length;l++){var h=d[l],p=s(h);if(typeof p=="object")return p.value}}function dc(t,n,i){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??i}):U.resolve(i)}function hc(t,n,i,o){var s=[],l=t._versions,d=t._dbSchema=Oi(t,t.idbdb,o),h=l.filter(function(m){return m._cfg.version>=n});if(h.length===0)return U.resolve();h.forEach(function(m){s.push(function(){var x=d,b=m._cfg.dbschema;Ii(t,x,o),Ii(t,b,o),d=t._dbSchema=b;var O=Ua(x,b);O.add.forEach(function(N){Wa(o,N[0],N[1].primKey,N[1].indexes)}),O.change.forEach(function(N){if(N.recreate)throw new $.Upgrade("Not yet support for changing primary key");var L=o.objectStore(N.name);N.add.forEach(function(K){return Si(L,K)}),N.change.forEach(function(K){L.deleteIndex(K.name),Si(L,K)}),N.del.forEach(function(K){return L.deleteIndex(K)})});var B=m._cfg.contentUpgrade;if(B&&m._cfg.version>n){Di(t,o),i._memoizedTables={};var w=ge(b);O.del.forEach(function(N){w[N]=x[N]}),Ha(t,[t.Transaction.prototype]),Ai(t,[t.Transaction.prototype],g(w),w),i.schema=w;var k=ir(B);k&&ur();var S,I=U.follow(function(){if(S=B(i),S&&k){var N=yn.bind(null,null);S.then(N,N)}});return S&&typeof S.then=="function"?U.resolve(S):I.then(function(){return S})}}),s.push(function(x){var b=m._cfg.dbschema;vc(b,x),Ha(t,[t.Transaction.prototype]),Ai(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),i.schema=t._dbSchema}),s.push(function(x){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===m._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(b){return b!=="$meta"})):x.objectStore("$meta").put(m._cfg.version,"version"))})});function p(){return s.length?U.resolve(s.shift()(i.idbtrans)).then(p):U.resolve()}return p().then(function(){Ds(d,o)})}function Ua(t,n){var i={del:[],add:[],change:[]},o;for(o in t)n[o]||i.del.push(o);for(o in n){var s=t[o],l=n[o];if(!s)i.add.push([o,l]);else{var d={name:o,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||s.primKey.auto!==l.primKey.auto)d.recreate=!0,i.change.push(d);else{var h=s.idxByName,p=l.idxByName,m=void 0;for(m in h)p[m]||d.del.push(m);for(m in p){var x=h[m],b=p[m];x?x.src!==b.src&&d.change.push(b):d.add.push(b)}(d.del.length>0||d.add.length>0||d.change.length>0)&&i.change.push(d)}}}return i}function Wa(t,n,i,o){var s=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(l){return Si(s,l)}),s}function Ds(t,n){g(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(Vt&&console.debug("Dexie: Creating missing table",i),Wa(n,i,t[i].primKey,t[i].indexes))})}function vc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(i){return t[i]==null&&n.db.deleteObjectStore(i)})}function Si(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Oi(t,n,i){var o={},s=q(n.objectStoreNames,0);return s.forEach(function(l){for(var d=i.objectStore(l),h=d.keyPath,p=ja(Ts(h),h||"",!0,!1,!!d.autoIncrement,h&&typeof h!="string",!0),m=[],x=0;x<d.indexNames.length;++x){var b=d.index(d.indexNames[x]);h=b.keyPath;var O=ja(b.name,h,!!b.unique,!!b.multiEntry,!1,h&&typeof h!="string",!1);m.push(O)}o[l]=za(l,p,m)}),o}function pc(t,n,i){t.verno=n.version/10;var o=t._dbSchema=Oi(t,n,i);t._storeNames=q(n.objectStoreNames,0),Ai(t,[t._allTables],g(o),o)}function yc(t,n){var i=Oi(t,t.idbdb,n),o=Ua(i,t._dbSchema);return!(o.add.length||o.change.some(function(s){return s.add.length||s.change.length}))}function Ii(t,n,i){for(var o=i.db.objectStoreNames,s=0;s<o.length;++s){var l=o[s],d=i.objectStore(l);t._hasGetAll="getAll"in d;for(var h=0;h<d.indexNames.length;++h){var p=d.indexNames[h],m=d.index(p).keyPath,x=typeof m=="string"?m:"["+q(m).join("+")+"]";if(n[l]){var b=n[l].idxByName[x];b&&(b.name=p,delete n[l].idxByName[x],n[l].idxByName[p]=b)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function As(t){return t.split(",").map(function(n,i){var o,s=n.split(":"),l=(o=s[1])===null||o===void 0?void 0:o.trim();n=s[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return ja(d,h||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),y(h),i===0,l)})}var mc=(function(){function t(){}return t.prototype._createTableSchema=function(n,i,o){return za(n,i,o)},t.prototype._parseIndexSyntax=function(n){return As(n)},t.prototype._parseStoresSpec=function(n,i){var o=this;g(n).forEach(function(s){if(n[s]!==null){var l=o._parseIndexSyntax(n[s]),d=l.shift();if(!d)throw new $.Schema("Invalid schema for table "+s+": "+n[s]);if(d.unique=!0,d.multi)throw new $.Schema("Primary key cannot be multiEntry*");l.forEach(function(p){if(p.auto)throw new $.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new $.Schema("Index must have a name and cannot be an empty string")});var h=o._createTableSchema(s,d,l);i[s]=h}})},t.prototype.stores=function(n){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?D(this._cfg.storesSource,n):n;var o=i._versions,s={},l={};return o.forEach(function(d){D(s,d._cfg.storesSource),l=d._cfg.dbschema={},d._parseStoresSpec(s,l)}),i._dbSchema=l,Ha(i,[i._allTables,i,i.Transaction.prototype]),Ai(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],g(l),l),i._storeNames=g(l),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=xa(this._cfg.contentUpgrade||xe,n),this},t})();function gc(t){return Fr(mc.prototype,function(i){this.db=t,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ga(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new an(bi,{addons:[],indexedDB:t,IDBKeyRange:n}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function Ya(t){return t&&typeof t.databases=="function"}function _c(t){var n=t.indexedDB,i=t.IDBKeyRange;return Ya(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(s){return s.name}).filter(function(s){return s!==bi})}):Ga(n,i).toCollection().primaryKeys()}function bc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!Ya(i)&&n!==bi&&Ga(i,o).put({name:n}).catch(xe)}function wc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!Ya(i)&&n!==bi&&Ga(i,o).delete(n).catch(xe)}function qa(t){return pn(function(){return Q.letThrough=!0,t()})}function Ec(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var Za;function $a(t){return!("from"in t)}var $e=function(t,n){if(this)D(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var i=new $e;return t&&"d"in t&&D(i,t),i}};T($e.prototype,(Za={add:function(t){return Hr(this,t),this},addKey:function(t){return Vr(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return Vr(n,i,i)}),this},hasKey:function(t){var n=Ci(this).next(t).value;return n&&pe(n.from,t)<=0&&pe(n.to,t)>=0}},Za[ut]=function(){return Ci(this)},Za));function Vr(t,n,i){var o=pe(n,i);if(!isNaN(o)){if(o>0)throw RangeError();if($a(t))return D(t,{from:n,to:i,d:1});var s=t.l,l=t.r;if(pe(i,t.from)<0)return s?Vr(s,n,i):t.l={from:n,to:i,d:1,l:null,r:null},Os(t);if(pe(n,t.to)>0)return l?Vr(l,n,i):t.r={from:n,to:i,d:1,l:null,r:null},Os(t);pe(n,t.from)<0&&(t.from=n,t.l=null,t.d=l?l.d+1:1),pe(i,t.to)>0&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;s&&!t.l&&Hr(t,s),l&&d&&Hr(t,l)}}function Hr(t,n){function i(o,s){var l=s.from,d=s.to,h=s.l,p=s.r;Vr(o,l,d),h&&i(o,h),p&&i(o,p)}$a(n)||i(t,n)}function Ss(t,n){var i=Ci(n),o=i.next();if(o.done)return!1;for(var s=o.value,l=Ci(t),d=l.next(s.from),h=d.value;!o.done&&!d.done;){if(pe(h.from,s.to)<=0&&pe(h.to,s.from)>=0)return!0;pe(s.from,h.from)<0?s=(o=i.next(h.from)).value:h=(d=l.next(s.from)).value}return!1}function Ci(t){var n=$a(t)?null:{s:0,n:t};return{next:function(i){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&pe(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||pe(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function Os(t){var n,i,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),s=o>1?"r":o<-1?"l":"";if(s){var l=s==="r"?"l":"r",d=c({},t),h=t[s];t.from=h.from,t.to=h.to,t[s]=h[s],d[s]=h[l],t[l]=d,d.d=Is(d)}t.d=Is(t)}function Is(t){var n=t.r,i=t.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function Pi(t,n){return g(n).forEach(function(i){t[i]?Hr(t[i],n[i]):t[i]=Se(n[i])}),t}function Qa(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&Ss(n[i],t[i])})}var Wn={},Xa={},Ja=!1;function Ri(t,n){Pi(Xa,t),Ja||(Ja=!0,setTimeout(function(){Ja=!1;var i=Xa;Xa={},eo(i,!1)},0))}function eo(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var o=0,s=Object.values(Wn);o<s.length;o++){var l=s[o];Cs(l,t,i,n)}else for(var d in t){var h=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(h){var p=h[1],m=h[2],l=Wn["idb://".concat(p,"/").concat(m)];l&&Cs(l,t,i,n)}}i.forEach(function(x){return x()})}function Cs(t,n,i,o){for(var s=[],l=0,d=Object.entries(t.queries.query);l<d.length;l++){for(var h=d[l],p=h[0],m=h[1],x=[],b=0,O=m;b<O.length;b++){var B=O[b];Qa(n,B.obsSet)?B.subscribers.forEach(function(I){return i.add(I)}):o&&x.push(B)}o&&s.push([p,x])}if(o)for(var w=0,k=s;w<k.length;w++){var S=k[w],p=S[0],x=S[1];t.queries.query[p]=x}}function xc(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?Ne(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,s=Math.round(t.verno*10),l=!1;function d(){if(n.openCanceller!==o)throw new $.DatabaseClosed("db.open() was cancelled")}var h=n.dbReadyResolve,p=null,m=!1,x=function(){return new U(function(b,O){if(d(),!i)throw new $.MissingAPI;var B=t.name,w=n.autoSchema||!s?i.open(B):i.open(B,s);if(!w)throw new $.MissingAPI;w.onerror=Ht(O),w.onblocked=Oe(t._fireOnBlocked),w.onupgradeneeded=Oe(function(k){if(p=w.transaction,n.autoSchema&&!t._options.allowEmptyDB){w.onerror=Kr,p.abort(),w.result.close();var S=i.deleteDatabase(B);S.onsuccess=S.onerror=Oe(function(){O(new $.NoSuchDatabase("Database ".concat(B," doesnt exist")))})}else{p.onerror=Ht(O);var I=k.oldVersion>Math.pow(2,62)?0:k.oldVersion;m=I<1,t.idbdb=w.result,l&&fc(t,p),cc(t,I/10,p,O)}},O),w.onsuccess=Oe(function(){p=null;var k=t.idbdb=w.result,S=q(k.objectStoreNames);if(S.length>0)try{var I=k.transaction(rc(S),"readonly");if(n.autoSchema)pc(t,k,I);else if(Ii(t,t._dbSchema,I),!yc(t,I)&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),k.close(),s=k.version+1,l=!0,b(x());Di(t,I)}catch{}lr.push(t),k.onversionchange=Oe(function(N){n.vcFired=!0,t.on("versionchange").fire(N)}),k.onclose=Oe(function(){t.close({disableAutoOpen:!1})}),m&&bc(t._deps,B),b()},O)}).catch(function(b){switch(b?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(s>0)return s=0,x();break}return U.reject(b)})};return U.race([o,(typeof navigator>"u"?U.resolve():Ec()).then(x)]).then(function(){return d(),n.onReadyBeingFired=[],U.resolve(qa(function(){return t.on.ready.fire(t.vip)})).then(function b(){if(n.onReadyBeingFired.length>0){var O=n.onReadyBeingFired.reduce(xa,xe);return n.onReadyBeingFired=[],U.resolve(qa(function(){return O(t.vip)})).then(b)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(b){n.dbOpenError=b;try{p&&p.abort()}catch{}return o===n.openCanceller&&t._close(),Ne(b)}).finally(function(){n.openComplete=!0,h()}).then(function(){if(m){var b={};t.tables.forEach(function(O){O.schema.indexes.forEach(function(B){B.name&&(b["idb://".concat(t.name,"/").concat(O.name,"/").concat(B.name)]=new $e(-1/0,[[[]]]))}),b["idb://".concat(t.name,"/").concat(O.name,"/")]=b["idb://".concat(t.name,"/").concat(O.name,"/:dels")]=new $e(-1/0,[[[]]])}),_n(Br).fire(b),eo(b,!0)}return t})}function to(t){var n=function(d){return t.next(d)},i=function(d){return t.throw(d)},o=l(n),s=l(i);function l(d){return function(h){var p=d(h),m=p.value;return p.done?m:!m||typeof m.then!="function"?y(m)?Promise.all(m).then(o,s):o(m):m.then(o,s)}}return l(n)()}function Tc(t,n,i){var o=arguments.length;if(o<2)throw new $.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];i=s.pop();var l=He(s);return[t,l,i]}function Ps(t,n,i,o,s){return U.resolve().then(function(){var l=Q.transless||Q,d=t._createTransaction(n,i,t._dbSchema,o);d.explicit=!0;var h={trans:d,transless:l};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(b){return b.name===gt.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Ps(t,n,i,null,s)})):Ne(b)}var p=ir(s);p&&ur();var m,x=U.follow(function(){if(m=s.call(d,d),m)if(p){var b=yn.bind(null,null);m.then(b,b)}else typeof m.next=="function"&&typeof m.throw=="function"&&(m=to(m))},h);return(m&&typeof m.then=="function"?U.resolve(m).then(function(b){return d.active?b:Ne(new $.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return m})).then(function(b){return o&&d._resolve(),d._completion.then(function(){return b})}).catch(function(b){return d._reject(b),Ne(b)})})}function Mi(t,n,i){for(var o=y(t)?t.slice():[t],s=0;s<i;++s)o.push(n);return o}function kc(t){return c(c({},t),{table:function(n){var i=t.table(n),o=i.schema,s={},l=[];function d(k,S,I){var N=zr(k),L=s[N]=s[N]||[],K=k==null?0:typeof k=="string"?1:k.length,P=S>0,V=c(c({},I),{name:P?"".concat(N,"(virtual-from:").concat(I.name,")"):I.name,lowLevelIndex:I,isVirtual:P,keyTail:S,keyLength:K,extractKey:Va(k),unique:!P&&I.unique});if(L.push(V),V.isPrimaryKey||l.push(V),K>1){var G=K===2?k[0]:k.slice(0,K-1);d(G,S+1,I)}return L.sort(function(H,ee){return H.keyTail-ee.keyTail}),V}var h=d(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[h];for(var p=0,m=o.indexes;p<m.length;p++){var x=m[p];d(x.keyPath,0,x)}function b(k){var S=s[zr(k)];return S&&S[0]}function O(k,S){return{type:k.type===1?2:k.type,lower:Mi(k.lower,k.lowerOpen?t.MAX_KEY:t.MIN_KEY,S),lowerOpen:!0,upper:Mi(k.upper,k.upperOpen?t.MIN_KEY:t.MAX_KEY,S),upperOpen:!0}}function B(k){var S=k.query.index;return S.isVirtual?c(c({},k),{query:{index:S.lowLevelIndex,range:O(k.query.range,S.keyTail)}}):k}var w=c(c({},i),{schema:c(c({},o),{primaryKey:h,indexes:l,getIndexByKeyPath:b}),count:function(k){return i.count(B(k))},query:function(k){return i.query(B(k))},openCursor:function(k){var S=k.query.index,I=S.keyTail,N=S.isVirtual,L=S.keyLength;if(!N)return i.openCursor(k);function K(P){function V(H){H!=null?P.continue(Mi(H,k.reverse?t.MAX_KEY:t.MIN_KEY,I)):k.unique?P.continue(P.key.slice(0,L).concat(k.reverse?t.MIN_KEY:t.MAX_KEY,I)):P.continue()}var G=Object.create(P,{continue:{value:V},continuePrimaryKey:{value:function(H,ee){P.continuePrimaryKey(Mi(H,t.MAX_KEY,I),ee)}},primaryKey:{get:function(){return P.primaryKey}},key:{get:function(){var H=P.key;return L===1?H[0]:H.slice(0,L)}},value:{get:function(){return P.value}}});return G}return i.openCursor(B(k)).then(function(P){return P&&K(P)})}});return w}})}var Dc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:kc};function no(t,n,i,o){return i=i||{},o=o||"",g(t).forEach(function(s){if(!_(n,s))i[o+s]=void 0;else{var l=t[s],d=n[s];if(typeof l=="object"&&typeof d=="object"&&l&&d){var h=tn(l),p=tn(d);h!==p?i[o+s]=n[s]:h==="Object"?no(l,d,i,o+s+"."):l!==d&&(i[o+s]=n[s])}else l!==d&&(i[o+s]=n[s])}}),g(n).forEach(function(s){_(t,s)||(i[o+s]=n[s])}),i}function ro(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var Ac={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return c(c({},t),{table:function(n){var i=t.table(n),o=i.schema.primaryKey,s=c(c({},i),{mutate:function(l){var d=Q.trans,h=d.table(n).hook,p=h.deleting,m=h.creating,x=h.updating;switch(l.type){case"add":if(m.fire===xe)break;return d._promise("readwrite",function(){return b(l)},!0);case"put":if(m.fire===xe&&x.fire===xe)break;return d._promise("readwrite",function(){return b(l)},!0);case"delete":if(p.fire===xe)break;return d._promise("readwrite",function(){return b(l)},!0);case"deleteRange":if(p.fire===xe)break;return d._promise("readwrite",function(){return O(l)},!0)}return i.mutate(l);function b(w){var k=Q.trans,S=w.keys||ro(o,w);if(!S)throw new Error("Keys missing");return w=w.type==="add"||w.type==="put"?c(c({},w),{keys:S}):c({},w),w.type!=="delete"&&(w.values=f([],w.values)),w.keys&&(w.keys=f([],w.keys)),Sc(i,w,S).then(function(I){var N=S.map(function(L,K){var P=I[K],V={onerror:null,onsuccess:null};if(w.type==="delete")p.fire.call(V,L,P,k);else if(w.type==="add"||P===void 0){var G=m.fire.call(V,L,w.values[K],k);L==null&&G!=null&&(L=G,w.keys[K]=L,o.outbound||fe(w.values[K],o.keyPath,L))}else{var H=no(P,w.values[K]),ee=x.fire.call(V,H,L,P,k);if(ee){var le=w.values[K];Object.keys(ee).forEach(function(Y){_(le,Y)?le[Y]=ee[Y]:fe(le,Y,ee[Y])})}}return V});return i.mutate(w).then(function(L){for(var K=L.failures,P=L.results,V=L.numFailures,G=L.lastResult,H=0;H<S.length;++H){var ee=P?P[H]:S[H],le=N[H];ee==null?le.onerror&&le.onerror(K[H]):le.onsuccess&&le.onsuccess(w.type==="put"&&I[H]?w.values[H]:ee)}return{failures:K,results:P,numFailures:V,lastResult:G}}).catch(function(L){return N.forEach(function(K){return K.onerror&&K.onerror(L)}),Promise.reject(L)})})}function O(w){return B(w.trans,w.range,1e4)}function B(w,k,S){return i.query({trans:w,values:!1,query:{index:o,range:k},limit:S}).then(function(I){var N=I.result;return b({type:"delete",keys:N,trans:w}).then(function(L){return L.numFailures>0?Promise.reject(L.failures[0]):N.length<S?{failures:[],numFailures:0,lastResult:void 0}:B(w,c(c({},k),{lower:N[N.length-1],lowerOpen:!0}),S)})})}}});return s}})}};function Sc(t,n,i){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:i,cache:"immutable"})}function Rs(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var o=[],s=0,l=0;s<n.keys.length&&l<t.length;++s)pe(n.keys[s],t[l])===0&&(o.push(i?Me(n.values[s]):n.values[s]),++l);return o.length===t.length?o:null}catch{return null}}var Oc={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return c(c({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var s=Rs(o.keys,o.trans._cache,o.cache==="clone");return s?U.resolve(s):i.getMany(o).then(function(l){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?Me(l):l},l})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function Ms(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function Ns(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Ic={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new $e(t.MIN_KEY,t.MAX_KEY);return c(c({},t),{transaction:function(o,s,l){if(Q.subscr&&s!=="readonly")throw new $.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Q.querier));return t.transaction(o,s,l)},table:function(o){var s=t.table(o),l=s.schema,d=l.primaryKey,h=l.indexes,p=d.extractKey,m=d.outbound,x=d.autoIncrement&&h.filter(function(w){return w.compound&&w.keyPath.includes(d.keyPath)}),b=c(c({},s),{mutate:function(w){var k,S,I=w.trans,N=w.mutatedParts||(w.mutatedParts={}),L=function(re){var ye="idb://".concat(n,"/").concat(o,"/").concat(re);return N[ye]||(N[ye]=new $e)},K=L(""),P=L(":dels"),V=w.type,G=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[ro(d,w).filter(function(re){return re}),w.values]:[],H=G[0],ee=G[1],le=w.trans._cache;if(y(H)){K.addKeys(H);var Y=V==="delete"||H.length===ee.length?Rs(H,le):null;Y||P.addKeys(H),(Y||ee)&&Cc(L,l,Y,ee)}else if(H){var ue={from:(k=H.lower)!==null&&k!==void 0?k:t.MIN_KEY,to:(S=H.upper)!==null&&S!==void 0?S:t.MAX_KEY};P.add(ue),K.add(ue)}else K.add(i),P.add(i),l.indexes.forEach(function(re){return L(re.name).add(i)});return s.mutate(w).then(function(re){return H&&(w.type==="add"||w.type==="put")&&(K.addKeys(re.results),x&&x.forEach(function(ye){for(var J=w.values.map(function(lt){return ye.extractKey(lt)}),Ce=ye.keyPath.findIndex(function(lt){return lt===d.keyPath}),Qe=0,Ut=re.results.length;Qe<Ut;++Qe)J[Qe][Ce]=re.results[Qe];L(ye.name).addKeys(J)})),I.mutatedParts=Pi(I.mutatedParts||{},N),re})}}),O=function(w){var k,S,I=w.query,N=I.index,L=I.range;return[N,new $e((k=L.lower)!==null&&k!==void 0?k:t.MIN_KEY,(S=L.upper)!==null&&S!==void 0?S:t.MAX_KEY)]},B={get:function(w){return[d,new $e(w.key)]},getMany:function(w){return[d,new $e().addKeys(w.keys)]},count:O,query:O,openCursor:O};return g(B).forEach(function(w){b[w]=function(k){var S=Q.subscr,I=!!S,N=Ms(Q,s)&&Ns(w,k),L=N?k.obsSet={}:S;if(I){var K=function(Y){var ue="idb://".concat(n,"/").concat(o,"/").concat(Y);return L[ue]||(L[ue]=new $e)},P=K(""),V=K(":dels"),G=B[w](k),H=G[0],ee=G[1];if(w==="query"&&H.isPrimaryKey&&!k.values?V.add(ee):K(H.name||"").add(ee),!H.isPrimaryKey)if(w==="count")V.add(i);else{var le=w==="query"&&m&&k.values&&s.query(c(c({},k),{values:!1}));return s[w].apply(this,arguments).then(function(Y){if(w==="query"){if(m&&k.values)return le.then(function(J){var Ce=J.result;return P.addKeys(Ce),Y});var ue=k.values?Y.result.map(p):Y.result;k.values?P.addKeys(ue):V.addKeys(ue)}else if(w==="openCursor"){var re=Y,ye=k.values;return re&&Object.create(re,{key:{get:function(){return V.addKey(re.primaryKey),re.key}},primaryKey:{get:function(){var J=re.primaryKey;return V.addKey(J),J}},value:{get:function(){return ye&&P.addKey(re.primaryKey),re.value}}})}return Y})}}return s[w].apply(this,arguments)}}),b}})}};function Cc(t,n,i,o){function s(l){var d=t(l.name||"");function h(m){return m!=null?l.extractKey(m):null}var p=function(m){return l.multiEntry&&y(m)?m.forEach(function(x){return d.addKey(x)}):d.addKey(m)};(i||o).forEach(function(m,x){var b=i&&h(i[x]),O=o&&h(o[x]);pe(b,O)!==0&&(b!=null&&p(b),O!=null&&p(O))})}n.indexes.forEach(s)}function Ls(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(i.numFailures===o)return null;var s=c({},n);return y(s.keys)&&(s.keys=s.keys.filter(function(l,d){return!(d in i.failures)})),"values"in s&&y(s.values)&&(s.values=s.values.filter(function(l,d){return!(d in i.failures)})),s}function Pc(t,n){return n.lower===void 0?!0:n.lowerOpen?pe(t,n.lower)>0:pe(t,n.lower)>=0}function Rc(t,n){return n.upper===void 0?!0:n.upperOpen?pe(t,n.upper)<0:pe(t,n.upper)<=0}function io(t,n){return Pc(t,n)&&Rc(t,n)}function Fs(t,n,i,o,s,l){if(!i||i.length===0)return t;var d=n.query.index,h=d.multiEntry,p=n.query.range,m=o.schema.primaryKey,x=m.extractKey,b=d.extractKey,O=(d.lowLevelIndex||d).extractKey,B=i.reduce(function(w,k){var S=w,I=[];if(k.type==="add"||k.type==="put")for(var N=new $e,L=k.values.length-1;L>=0;--L){var K=k.values[L],P=x(K);if(!N.hasKey(P)){var V=b(K);(h&&y(V)?V.some(function(Y){return io(Y,p)}):io(V,p))&&(N.addKey(P),I.push(K))}}switch(k.type){case"add":{var G=new $e().addKeys(n.values?w.map(function(Y){return x(Y)}):w);S=w.concat(n.values?I.filter(function(Y){var ue=x(Y);return G.hasKey(ue)?!1:(G.addKey(ue),!0)}):I.map(function(Y){return x(Y)}).filter(function(Y){return G.hasKey(Y)?!1:(G.addKey(Y),!0)}));break}case"put":{var H=new $e().addKeys(k.values.map(function(Y){return x(Y)}));S=w.filter(function(Y){return!H.hasKey(n.values?x(Y):Y)}).concat(n.values?I:I.map(function(Y){return x(Y)}));break}case"delete":var ee=new $e().addKeys(k.keys);S=w.filter(function(Y){return!ee.hasKey(n.values?x(Y):Y)});break;case"deleteRange":var le=k.range;S=w.filter(function(Y){return!io(x(Y),le)});break}return S},t);return B===t?t:(B.sort(function(w,k){return pe(O(w),O(k))||pe(x(w),x(k))}),n.limit&&n.limit<1/0&&(B.length>n.limit?B.length=n.limit:t.length===n.limit&&B.length<n.limit&&(s.dirty=!0)),l?Object.freeze(B):B)}function Ks(t,n){return pe(t.lower,n.lower)===0&&pe(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function Mc(t,n,i,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var s=pe(t,n);if(s===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return s}function Nc(t,n,i,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var s=pe(t,n);if(s===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return s}function Lc(t,n){return Mc(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&Nc(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function Fc(t,n,i,o){var s=Wn["idb://".concat(t,"/").concat(n)];if(!s)return[];var l=s.queries[i];if(!l)return[null,!1,s,null];var d=o.query?o.query.index.name:null,h=l[d||""];if(!h)return[null,!1,s,null];switch(i){case"query":var p=h.find(function(b){return b.req.limit===o.limit&&b.req.values===o.values&&Ks(b.req.query.range,o.query.range)});if(p)return[p,!0,s,h];var m=h.find(function(b){var O="limit"in b.req?b.req.limit:1/0;return O>=o.limit&&(o.values?b.req.values:!0)&&Lc(b.req.query.range,o.query.range)});return[m,!1,s,h];case"count":var x=h.find(function(b){return Ks(b.req.query.range,o.query.range)});return[x,!!x,s,h]}}function Kc(t,n,i,o){t.subscribers.add(i),o.addEventListener("abort",function(){t.subscribers.delete(i),t.subscribers.size===0&&Bc(t,n)})}function Bc(t,n){setTimeout(function(){t.subscribers.size===0&&Fe(n,t)},3e3)}var jc={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,i=c(c({},t),{transaction:function(o,s,l){var d=t.transaction(o,s,l);if(s==="readwrite"){var h=new AbortController,p=h.signal,m=function(x){return function(){if(h.abort(),s==="readwrite"){for(var b=new Set,O=0,B=o;O<B.length;O++){var w=B[O],k=Wn["idb://".concat(n,"/").concat(w)];if(k){var S=t.table(w),I=k.optimisticOps.filter(function(ye){return ye.trans===d});if(d._explicit&&x&&d.mutatedParts)for(var N=0,L=Object.values(k.queries.query);N<L.length;N++)for(var K=L[N],P=0,V=K.slice();P<V.length;P++){var G=V[P];Qa(G.obsSet,d.mutatedParts)&&(Fe(K,G),G.subscribers.forEach(function(ye){return b.add(ye)}))}else if(I.length>0){k.optimisticOps=k.optimisticOps.filter(function(ye){return ye.trans!==d});for(var H=0,ee=Object.values(k.queries.query);H<ee.length;H++)for(var K=ee[H],le=0,Y=K.slice();le<Y.length;le++){var G=Y[le];if(G.res!=null&&d.mutatedParts)if(x&&!G.dirty){var ue=Object.isFrozen(G.res),re=Fs(G.res,G.req,I,S,G,ue);G.dirty?(Fe(K,G),G.subscribers.forEach(function(Ce){return b.add(Ce)})):re!==G.res&&(G.res=re,G.promise=U.resolve({result:re}))}else G.dirty&&Fe(K,G),G.subscribers.forEach(function(Ce){return b.add(Ce)})}}}}b.forEach(function(ye){return ye()})}}};d.addEventListener("abort",m(!1),{signal:p}),d.addEventListener("error",m(!1),{signal:p}),d.addEventListener("complete",m(!0),{signal:p})}return d},table:function(o){var s=t.table(o),l=s.schema.primaryKey,d=c(c({},s),{mutate:function(h){var p=Q.trans;if(l.outbound||p.db._options.cache==="disabled"||p.explicit||p.idbtrans.mode!=="readwrite")return s.mutate(h);var m=Wn["idb://".concat(n,"/").concat(o)];if(!m)return s.mutate(h);var x=s.mutate(h);return(h.type==="add"||h.type==="put")&&(h.values.length>=50||ro(l,h).some(function(b){return b==null}))?x.then(function(b){var O=c(c({},h),{values:h.values.map(function(w,k){var S;if(b.failures[k])return w;var I=!((S=l.keyPath)===null||S===void 0)&&S.includes(".")?Me(w):c({},w);return fe(I,l.keyPath,b.results[k]),I})}),B=Ls(m,O,b);m.optimisticOps.push(B),queueMicrotask(function(){return h.mutatedParts&&Ri(h.mutatedParts)})}):(m.optimisticOps.push(h),h.mutatedParts&&Ri(h.mutatedParts),x.then(function(b){if(b.numFailures>0){Fe(m.optimisticOps,h);var O=Ls(m,h,b);O&&m.optimisticOps.push(O),h.mutatedParts&&Ri(h.mutatedParts)}}),x.catch(function(){Fe(m.optimisticOps,h),h.mutatedParts&&Ri(h.mutatedParts)})),x},query:function(h){var p;if(!Ms(Q,s)||!Ns("query",h))return s.query(h);var m=((p=Q.trans)===null||p===void 0?void 0:p.db._options.cache)==="immutable",x=Q,b=x.requery,O=x.signal,B=Fc(n,o,"query",h),w=B[0],k=B[1],S=B[2],I=B[3];if(w&&k)w.obsSet=h.obsSet;else{var N=s.query(h).then(function(L){var K=L.result;if(w&&(w.res=K),m){for(var P=0,V=K.length;P<V;++P)Object.freeze(K[P]);Object.freeze(K)}else L.result=Me(K);return L}).catch(function(L){return I&&w&&Fe(I,w),Promise.reject(L)});w={obsSet:h.obsSet,promise:N,subscribers:new Set,type:"query",req:h,dirty:!1},I?I.push(w):(I=[w],S||(S=Wn["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),S.queries.query[h.query.index.name||""]=I)}return Kc(w,I,b,O),w.promise.then(function(L){return{result:Fs(L.result,h,S?.optimisticOps,s,w,m)}})}});return d}});return i}};function Ni(t,n){return new Proxy(t,{get:function(i,o,s){return o==="db"?n:Reflect.get(i,o,s)}})}var an=(function(){function t(n,i){var o=this;this._middlewares={},this.verno=0;var s=t.dependencies;this._options=i=c({addons:t.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var l=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xe,dbReadyPromise:null,cancelOpen:xe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};d.dbReadyPromise=new U(function(p){d.dbReadyResolve=p}),d.openCanceller=new U(function(p,m){d.cancelOpen=m}),this._state=d,this.name=n,this.on=Lr(this,"populate","blocked","versionchange","close",{ready:[xa,xe]}),this.once=function(p,m){var x=function(){for(var b=[],O=0;O<arguments.length;O++)b[O]=arguments[O];o.on(p).unsubscribe(x),m.apply(o,b)};return o.on(p,x)},this.on.ready.subscribe=ae(this.on.ready.subscribe,function(p){return function(m,x){t.vip(function(){var b=o._state;if(b.openComplete)b.dbOpenError||U.resolve().then(m),x&&p(m);else if(b.onReadyBeingFired)b.onReadyBeingFired.push(m),x&&p(m);else{p(m);var O=o;x||p(function B(){O.on.ready.unsubscribe(m),O.on.ready.unsubscribe(B)})}})}}),this.Collection=ql(this),this.Table=Wl(this),this.Transaction=nc(this),this.Version=gc(this),this.WhereClause=ec(this),this.on("versionchange",function(p){p.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=jr(i.IDBKeyRange),this._createTransaction=function(p,m,x,b){return new o.Transaction(p,m,x,o._options.chromeTransactionDurability,b)},this._fireOnBlocked=function(p){o.on("blocked").fire(p),lr.filter(function(m){return m.name===o.name&&m!==o&&!m._state.vcFired}).map(function(m){return m.on("versionchange").fire(p)})},this.use(Oc),this.use(jc),this.use(Ic),this.use(Dc),this.use(Ac);var h=new Proxy(this,{get:function(p,m,x){if(m==="_vip")return!0;if(m==="table")return function(O){return Ni(o.table(O),h)};var b=Reflect.get(p,m,x);return b instanceof gs?Ni(b,h):m==="tables"?b.map(function(O){return Ni(O,h)}):m==="_createTransaction"?function(){var O=b.apply(this,arguments);return Ni(O,h)}:b}});this.vip=h,l.forEach(function(p){return p(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new $.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new $.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,o=i.filter(function(s){return s._cfg.version===n})[0];return o||(o=new this.Version(n),i.push(o),i.sort(lc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||Q.letThrough||this._vip)?n():new U(function(o,s){if(i._state.openComplete)return s(new $.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){s(new $.DatabaseClosed);return}i.open().catch(xe)}i._state.dbReadyPromise.then(o,s)}).then(n)},t.prototype.use=function(n){var i=n.stack,o=n.create,s=n.level,l=n.name;l&&this.unuse({stack:i,name:l});var d=this._middlewares[i]||(this._middlewares[i]=[]);return d.push({stack:i,create:o,level:s??10,name:l}),d.sort(function(h,p){return h.level-p.level}),this},t.prototype.unuse=function(n){var i=n.stack,o=n.name,s=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(l){return s?l.create!==s:o?l.name!==o:!1})),this},t.prototype.open=function(){var n=this;return Vn(vn,function(){return xc(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=lr.indexOf(this);if(i>=0&&lr.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new U(function(o){n.dbReadyResolve=o}),n.openCanceller=new U(function(o,s){n.cancelOpen=s}))},t.prototype.close=function(n){var i=n===void 0?{disableAutoOpen:!0}:n,o=i.disableAutoOpen,s=this._state;o?(s.isBeingOpened&&s.cancelOpen(new $.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new $.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},t.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",s=this._state;return new U(function(l,d){var h=function(){i.close(n);var p=i._deps.indexedDB.deleteDatabase(i.name);p.onsuccess=Oe(function(){wc(i._deps,i.name),l()}),p.onerror=Ht(d),p.onblocked=i._fireOnBlocked};if(o)throw new $.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(h):h()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return g(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=Tc.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,i,o){var s=this,l=Q.trans;(!l||l.db!==this||n.indexOf("!")!==-1)&&(l=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var h,p;try{if(p=i.map(function(x){var b=x instanceof s.Table?x.name:x;if(typeof b!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),n=="r"||n===Na)h=Na;else if(n=="rw"||n==La)h=La;else throw new $.InvalidArgument("Invalid transaction mode: "+n);if(l){if(l.mode===Na&&h===La)if(d)l=null;else throw new $.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l&&p.forEach(function(x){if(l&&l.storeNames.indexOf(x)===-1)if(d)l=null;else throw new $.SubTransaction("Table "+x+" not included in parent transaction.")}),d&&l&&!l.active&&(l=null)}}catch(x){return l?l._promise(null,function(b,O){O(x)}):Ne(x)}var m=Ps.bind(null,this,h,p,l,o);return l?l._promise(h,m,"lock"):Q.trans?Vn(Q.transless,function(){return s._whenReady(m)}):this._whenReady(m)},t.prototype.table=function(n){if(!_(this._allTables,n))throw new $.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),zc=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Vc=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,i,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:i,complete:o}:n)},t.prototype[zc]=function(){return this},t})(),Li;try{Li={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{Li={indexedDB:null,IDBKeyRange:null}}function Bs(t){var n=!1,i,o=new Vc(function(s){var l=ir(t);function d(I){var N=or();try{l&&ur();var L=pn(t,I);return l&&(L=L.finally(yn)),L}finally{N&&sr()}}var h=!1,p,m={},x={},b={get closed(){return h},unsubscribe:function(){h||(h=!0,p&&p.abort(),O&&_n.storagemutated.unsubscribe(k))}};s.start&&s.start(b);var O=!1,B=function(){return Pa(S)};function w(){return Qa(x,m)}var k=function(I){Pi(m,I),w()&&B()},S=function(){if(!(h||!Li.indexedDB)){m={};var I={};p&&p.abort(),p=new AbortController;var N={subscr:I,signal:p.signal,requery:B,querier:t,trans:null},L=d(N);Promise.resolve(L).then(function(K){n=!0,i=K,!(h||N.signal.aborted)&&(m={},x=I,!zt(x)&&!O&&(_n(Br,k),O=!0),Pa(function(){return!h&&s.next&&s.next(K)}))},function(K){n=!1,["DatabaseClosedError","AbortError"].includes(K?.name)||h||Pa(function(){h||s.error&&s.error(K)})})}};return setTimeout(B,0),b});return o.hasValue=function(){return n},o.getValue=function(){return i},o}var Gn=an;T(Gn,c(c({},ar),{delete:function(t){var n=new Gn(t,{addons:[]});return n.delete()},exists:function(t){return new Gn(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return _c(Gn.dependencies).then(t)}catch{return Ne(new $.MissingAPI)}},defineClass:function(){function t(n){D(this,n)}return t},ignoreTransaction:function(t){return Q.trans?Vn(Q.transless,t):t()},vip:qa,async:function(t){return function(){try{var n=to(t.apply(this,arguments));return!n||typeof n.then!="function"?U.resolve(n):n}catch(i){return Ne(i)}}},spawn:function(t,n,i){try{var o=to(t.apply(i,n||[]));return!o||typeof o.then!="function"?U.resolve(o):o}catch(s){return Ne(s)}},currentTransaction:{get:function(){return Q.trans||null}},waitFor:function(t,n){var i=U.resolve(typeof t=="function"?Gn.ignoreTransaction(t):t).timeout(n||6e4);return Q.trans?Q.trans.waitFor(i):i},Promise:U,debug:{get:function(){return Vt},set:function(t){ns(t)}},derive:M,extend:D,props:T,override:ae,Events:Lr,on:_n,liveQuery:Bs,extendObservabilitySet:Pi,getByKeyPath:ce,setByKeyPath:fe,delByKeyPath:he,shallowClone:ge,deepClone:Me,getObjectDiff:no,cmp:pe,asap:de,minKey:Ma,addons:[],connections:lr,errnames:gt,dependencies:Li,cache:Wn,semVer:fs,version:fs.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,i*2)})})),Gn.maxKey=jr(Gn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(_n(Br,function(t){if(!bn){var n;n=new CustomEvent(Ba,{detail:t}),bn=!0,dispatchEvent(n),bn=!1}}),addEventListener(Ba,function(t){var n=t.detail;bn||ao(n)}));function ao(t){var n=bn;try{bn=!0,_n.storagemutated.fire(t),eo(t,!0)}finally{bn=n}}var bn=!1,wn,oo=function(){};typeof BroadcastChannel<"u"&&(oo=function(){wn=new BroadcastChannel(Ba),wn.onmessage=function(t){return t.data&&ao(t.data)}},oo(),typeof wn.unref=="function"&&wn.unref(),_n(Br,function(t){bn||wn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!an.disableBfCache&&t.persisted){Vt&&console.debug("Dexie: handling persisted pagehide"),wn?.close();for(var n=0,i=lr;n<i.length;n++){var o=i[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!an.disableBfCache&&t.persisted&&(Vt&&console.debug("Dexie: handling persisted pageshow"),oo(),ao({all:new $e(-1/0,[[]])}))}));function Hc(t){return new Nr({add:t})}function Uc(t){return new Nr({remove:t})}function Wc(t,n){return new Nr({replacePrefix:[t,n]})}U.rejectionMapper=hn,ns(Vt);var Gc=Object.freeze({__proto__:null,Dexie:an,liveQuery:Bs,Entity:vs,cmp:pe,PropModification:Nr,replacePrefix:Wc,add:Hc,remove:Uc,default:an,RangeSet:$e,mergeRanges:Hr,rangesOverlap:Ss});return c(an,Gc,{default:an}),an}))})(Vi)),Vi.exports}var Pd=Cd();const ko=Od(Pd),eu=Symbol.for("Dexie"),Ji=globalThis[eu]||(globalThis[eu]=ko);if(ko.semVer!==Ji.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ko.semVer} and ${Ji.semVer}`);const{liveQuery:ea,mergeRanges:Ov,rangesOverlap:Iv,RangeSet:Cv,cmp:Pv,Entity:Rv,PropModification:Mv,replacePrefix:Nv,add:Lv,remove:Fv,DexieYProvider:Kv}=Ji,Pe=new Ji("TaskPlannerDB");Pe.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Pe.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));Pe.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));async function ll(){return await Pe.lists.orderBy("order").toArray()}async function Rd(e,r){const a=r.trim();if(a==="")throw new Error("List name cannot be empty");return await Pe.lists.update(e,{name:a})}async function Md(e){return await Pe.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function Nd(){return(await Pe.tasks.where("status").equals("archived").toArray()).sort((r,a)=>{const u=r.archivedAt||0,c=a.archivedAt||0;return c!==u?c-u:(a.order||0)-(r.order||0)})}async function Ld(e,r){const a=await Pe.tasks.where("listId").equals(e).filter(g=>g.status!=="archived").sortBy("order"),c=(a.length>0?Math.max(...a.map(g=>g.order)):-1)+1,f=r===""?"":r.trim();return await Pe.tasks.add({text:f,listId:e,order:c,status:"unchecked"})}async function Fd(e,r){const a=r===""?"":r.trim();return await Pe.tasks.update(e,{text:a})}async function tu(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const a={status:r};return r==="archived"?a.archivedAt=Date.now():r!=="archived"&&(a.archivedAt=null),await Pe.tasks.update(e,a)}async function Kd(e){const r=await Pe.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const a=await Pe.tasks.where("listId").equals(r.listId).filter(f=>f.status!=="archived"&&f.id!==e).sortBy("order"),c=(a.length>0?Math.max(...a.map(f=>f.order)):-1)+1;return await Pe.tasks.update(e,{status:"checked",order:c})}async function Bd(e,r){if(!r||r.length===0)return;const a=r.map(v=>v.id);if((await Pe.tasks.bulkGet(a)).filter(v=>!v||v.listId!==e).length>0)throw new Error(`Cannot update order: some tasks do not belong to list ${e}`);const f=r.map((v,g)=>({id:v.id,order:g}));await Pe.transaction("rw",Pe.tasks,async()=>{for(const v of f)await Pe.tasks.update(v.id,{order:v.order})})}async function jd(e){await Pe.tasks.delete(e)}function nu(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,u)}return a}function ta(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?nu(Object(a),!0).forEach(function(u){kr(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nu(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function vr(e){"@babel/helpers - typeof";return vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vr(e)}function kr(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function zd(e,r){if(e==null)return{};var a={},u=Object.keys(e),c,f;for(f=0;f<u.length;f++)c=u[f],!(r.indexOf(c)>=0)&&(a[c]=e[c]);return a}function Vd(e,r){if(e==null)return{};var a=zd(e,r),u,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)u=f[c],!(r.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(a[u]=e[u])}return a}function Hd(e,r){return Wd(e)||Yd(e,r)||$o(e,r)||Zd()}function It(e){return Ud(e)||Gd(e)||$o(e)||qd()}function Ud(e){if(Array.isArray(e))return Do(e)}function Wd(e){if(Array.isArray(e))return e}function Gd(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yd(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var u=[],c=!0,f=!1,v,g;try{for(a=a.call(e);!(c=(v=a.next()).done)&&(u.push(v.value),!(r&&u.length===r));c=!0);}catch(y){f=!0,g=y}finally{try{!c&&a.return!=null&&a.return()}finally{if(f)throw g}}return u}}function $o(e,r){if(e){if(typeof e=="string")return Do(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Do(e,r)}}function Do(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=e[a];return u}function qd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function li(e,r){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=$o(e))||r){a&&(e=a);var u=0,c=function(){};return{s:c,n:function(){return u>=e.length?{done:!0}:{done:!1,value:e[u++]}},e:function(y){throw y},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,v=!1,g;return{s:function(){a=a.call(e)},n:function(){var y=a.next();return f=y.done,y},e:function(y){v=!0,g=y},f:function(){try{!f&&a.return!=null&&a.return()}finally{if(v)throw g}}}}var $d="finalize",Qd="consider";function Dr(e,r,a){e.dispatchEvent(new CustomEvent($d,{detail:{items:r,info:a}}))}function Ln(e,r,a){e.dispatchEvent(new CustomEvent(Qd,{detail:{items:r,info:a}}))}var va="draggedEntered",ci="draggedLeft",pa="draggedOverIndex",Qo="draggedLeftDocument",na={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function Xd(e,r,a){e.dispatchEvent(new CustomEvent(va,{detail:{indexObj:r,draggedEl:a}}))}function Jd(e,r,a){e.dispatchEvent(new CustomEvent(ci,{detail:{draggedEl:r,type:na.LEFT_FOR_ANOTHER,theOtherDz:a}}))}function eh(e,r){e.dispatchEvent(new CustomEvent(ci,{detail:{draggedEl:r,type:na.OUTSIDE_OF_ANY}}))}function th(e,r,a){e.dispatchEvent(new CustomEvent(pa,{detail:{indexObj:r,draggedEl:a}}))}function nh(e){window.dispatchEvent(new CustomEvent(Qo,{detail:{draggedEl:e}}))}var ot={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:va,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:pa,DRAGGED_LEFT:ci,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},yt={POINTER:"pointer",KEYBOARD:"keyboard"},ya="isDndShadowItem",ma="data-is-dnd-shadow-item-internal",rh="data-is-dnd-shadow-item-hint",cl="id:dnd-shadow-placeholder-0000",ih="dnd-action-dragged-el",Ve="id",Ao=0;function fl(){Ao++}function dl(){if(Ao===0)throw new Error("Bug! trying to decrement when there are no dropzones");Ao--}var Xo=typeof window>"u";function So(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,u=r?sh(e):e.getBoundingClientRect(),c=getComputedStyle(e),f=c.transform;if(f){var v,g,y,D;if(f.startsWith("matrix3d("))a=f.slice(9,-1).split(/, /),v=+a[0],g=+a[5],y=+a[12],D=+a[13];else if(f.startsWith("matrix("))a=f.slice(7,-1).split(/, /),v=+a[0],g=+a[3],y=+a[4],D=+a[5];else return u;var E=c.transformOrigin,A=u.x-y-(1-v)*parseFloat(E),_=u.y-D-(1-g)*parseFloat(E.slice(E.indexOf(" ")+1)),T=v?u.width/v:e.offsetWidth,R=g?u.height/g:e.offsetHeight;return{x:A,y:_,width:T,height:R,top:_,right:A+T,bottom:_+R,left:A}}else return u}function hl(e){var r=So(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function vl(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function pl(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function ah(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function ga(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function ni(e){return pl(vl(e))}function ru(e,r){var a=ni(e),u=hl(r);return ga(a,u)}function iu(e,r){var a=ni(e),u=ni(r);return ah(a,u)}function oh(e){var r=vl(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function sh(e){for(var r=e.getBoundingClientRect(),a={top:r.top,bottom:r.bottom,left:r.left,right:r.right},u=!1,c=!1,f=e.parentElement;f&&f!==document.body;){var v=window.getComputedStyle(f),g=v.overflowY,y=v.overflowX,D=g==="scroll"||g==="auto",E=y==="scroll"||y==="auto";if(D||E){var A=f.getBoundingClientRect();if(D){var _=Math.max(a.top,A.top),T=Math.min(a.bottom,A.bottom);(_!==a.top||T!==a.bottom)&&(u=!0),a.top=_,a.bottom=T}if(E){var R=Math.max(a.left,A.left),F=Math.min(a.right,A.right);(R!==a.left||F!==a.right)&&(c=!0),a.left=R,a.right=F}}f=f.parentElement}return u||c?{top:a.top,bottom:a.bottom,left:a.left,right:a.right,width:Math.max(0,a.right-a.left),height:Math.max(0,a.bottom-a.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var mr;function Jo(){mr=new Map}Jo();function uh(e){var r=Array.from(e.children).findIndex(function(a){return a.getAttribute(ma)});if(r>=0)return mr.has(e)||mr.set(e,new Map),mr.get(e).set(r,hl(e.children[r])),r}function lh(e,r){if(!ru(e,r))return null;var a=r.children;if(a.length===0)return{index:0,isProximityBased:!0};for(var u=uh(r),c=0;c<a.length;c++)if(ru(e,a[c])){var f=mr.has(r)&&mr.get(r).get(c);return f&&!ga(ni(e),f)?{index:u,isProximityBased:!1}:{index:c,isProximityBased:!1}}for(var v=Number.MAX_VALUE,g=void 0,y=0;y<a.length;y++){var D=iu(e,a[y]);D<v&&(v=D,g=y)}if(a.length>0){var E=a.length,A=a[E-1],_=A.cloneNode(!1);_.style.visibility="hidden",_.style.pointerEvents="none",r.appendChild(_);var T=iu(e,_);T<v&&(g=E),r.removeChild(_)}return{index:g,isProximityBased:!0}}function Wr(e){return JSON.stringify(e,null,2)}function ra(e){if(!e)throw new Error("cannot get depth of a falsy node");return yl(e,0)}function yl(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?yl(e.parentElement,r+1):r-1}function ch(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var a in e)if(!{}.hasOwnProperty.call(r,a)||r[a]!==e[a])return!1;return!0}function fh(e,r){if(e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}var dh=200,au=10,Oo;function hh(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dh,u=arguments.length>3?arguments[3]:void 0,c,f,v=!1,g,y=Array.from(r).sort(function(E,A){return ra(A)-ra(E)});function D(){var E=ni(e),A=u.multiScrollIfNeeded();if(!A&&g&&Math.abs(g.x-E.x)<au&&Math.abs(g.y-E.y)<au){Oo=window.setTimeout(D,a);return}if(oh(e)){nh(e);return}g=E;var _=!1,T=li(y),R;try{for(T.s();!(R=T.n()).done;){var F=R.value;A&&Jo();var M=lh(e,F);if(M!==null){var z=M.index;_=!0,F!==c?(c&&Jd(c,e,F),Xd(F,M,e),c=F):z!==f&&(th(F,M,e),f=z);break}}}catch(ne){T.e(ne)}finally{T.f()}!_&&v&&c?(eh(c,e),c=void 0,f=void 0,v=!1):v=!0,Oo=window.setTimeout(D,a)}D()}function vh(){clearTimeout(Oo),Jo()}var Gr=30;function ph(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function a(f){var v=e,g=v.directionObj,y=v.stepPx;g&&(f.scrollBy(g.x*y,g.y*y),window.requestAnimationFrame(function(){return a(f)}))}function u(f){return Gr-f}function c(f,v){if(!v)return!1;var g=yh(f,v),y=!!e.directionObj;if(g===null)return y&&r(),!1;var D=!1,E=!1;return v.scrollHeight>v.clientHeight&&(g.bottom<Gr?(D=!0,e.directionObj={x:0,y:1},e.stepPx=u(g.bottom)):g.top<Gr&&(D=!0,e.directionObj={x:0,y:-1},e.stepPx=u(g.top)),!y&&D)||v.scrollWidth>v.clientWidth&&(g.right<Gr?(E=!0,e.directionObj={x:1,y:0},e.stepPx=u(g.right)):g.left<Gr&&(E=!0,e.directionObj={x:-1,y:0},e.stepPx=u(g.left)),!y&&E)?(a(v),!0):(r(),!1)}return{scrollIfNeeded:c,resetScrolling:r}}function yh(e,r){var a=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return ga(e,a)?{top:e.y-a.top,bottom:a.bottom-e.y,left:e.x-a.left,right:a.right-e.x}:null}function mh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=_h(e),u=Array.from(a).sort(function(y,D){return ra(D)-ra(y)}),c=ph(),f=c.scrollIfNeeded,v=c.resetScrolling;function g(){var y=r();if(!y||!u)return!1;for(var D=u.filter(function(_){return ga(y,_.getBoundingClientRect())||_===document.scrollingElement}),E=0;E<D.length;E++){var A=f(y,D[E]);if(A)return!0}return!1}return{multiScrollIfNeeded:a.size>0?g:function(){return!1},destroy:function(){return v()}}}function gh(e){if(!e)return[];for(var r=[],a=e;a;){var u=window.getComputedStyle(a),c=u.overflow;c.split(" ").some(function(f){return f.includes("auto")||f.includes("scroll")})&&r.push(a),a=a.parentElement}return r}function _h(e){var r=new Set,a=li(e),u;try{for(a.s();!(u=a.n()).done;){var c=u.value;gh(c).forEach(function(f){return r.add(f)})}}catch(f){a.e(f)}finally{a.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function bh(e){var r=e.cloneNode(!0),a=[],u=e.tagName==="SELECT",c=u?[e]:It(e.querySelectorAll("select")),f=li(c),v;try{for(f.s();!(v=f.n()).done;){var g=v.value;a.push(g.value)}}catch(ie){f.e(ie)}finally{f.f()}if(c.length>0)for(var y=u?[r]:It(r.querySelectorAll("select")),D=0;D<y.length;D++){var E=y[D],A=a[D],_=E.querySelector('option[value="'.concat(A,'"'));_&&_.setAttribute("selected",!0)}var T=e.tagName==="CANVAS",R=T?[e]:It(e.querySelectorAll("canvas"));if(R.length>0)for(var F=T?[r]:It(r.querySelectorAll("canvas")),M=0;M<F.length;M++){var z=R[M],ne=F[M];ne.width=z.width,ne.height=z.height,z.width>0&&z.height>0&&ne.getContext("2d").drawImage(z,0,0)}return r}var ri=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),wh=kr({},ri.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function ml(e){if(!ri[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(ri)));return wh[e]}var Eh=.2;function qn(e){return"".concat(e," ").concat(Eh,"s ease")}function xh(e,r){var a=e.getBoundingClientRect(),u=bh(e);gl(e,u),u.id=ih,u.style.position="fixed";var c=a.top,f=a.left;if(u.style.top="".concat(c,"px"),u.style.left="".concat(f,"px"),r){var v=pl(a);c-=v.y-r.y,f-=v.x-r.x,window.setTimeout(function(){u.style.top="".concat(c,"px"),u.style.left="".concat(f,"px")},0)}return u.style.margin="0",u.style.boxSizing="border-box",u.style.height="".concat(a.height,"px"),u.style.width="".concat(a.width,"px"),u.style.transition="".concat(qn("top"),", ").concat(qn("left"),", ").concat(qn("background-color"),", ").concat(qn("opacity"),", ").concat(qn("color")," "),window.setTimeout(function(){return u.style.transition+=", ".concat(qn("width"),", ").concat(qn("height"))},0),u.style.zIndex="9999",u.style.cursor="grabbing",u}function Th(e){e.style.cursor="grab"}function kh(e,r,a,u){gl(r,e);var c=r.getBoundingClientRect(),f=e.getBoundingClientRect(),v=c.width-f.width,g=c.height-f.height;if(v||g){var y={left:(a-f.left)/f.width,top:(u-f.top)/f.height};ml(ri.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(c.height,"px"),e.style.width="".concat(c.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-y.left*v,"px"),e.style.top="".concat(parseFloat(e.style.top)-y.top*g,"px")}}function gl(e,r){var a=window.getComputedStyle(e);Array.from(a).filter(function(u){return u.startsWith("background")||u.startsWith("padding")||u.startsWith("font")||u.startsWith("text")||u.startsWith("align")||u.startsWith("justify")||u.startsWith("display")||u.startsWith("flex")||u.startsWith("border")||u==="opacity"||u==="color"||u==="list-style-type"||ml(ri.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(u==="width"||u==="height")}).forEach(function(u){return r.style.setProperty(u,a.getPropertyValue(u),a.getPropertyPriority(u))})}function Dh(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function _l(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function Ah(e){e.style.visibility="hidden",e.setAttribute(ma,"true")}function Sh(e){e.style.visibility="",e.removeAttribute(ma)}function Hi(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(u){var c=r(u);Object.keys(c).forEach(function(f){u.style[f]=c[f]}),a(u).forEach(function(f){return u.classList.add(f)})})}function ia(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(u){var c=r(u);Object.keys(c).forEach(function(f){u.style[f]=""}),a(u).forEach(function(f){return u.classList.contains(f)&&u.classList.remove(f)})})}function Oh(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var a=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=a}}var Ih="--any--",Ch=100,Ph=20,Bi=3,Rh=80,ou={outline:"rgba(255, 255, 102, 0.7) solid 2px"},su="data-is-dnd-original-dragged-item",ct,Ge,ft,_a,Ie,ba,Pn,qe,qt,Je,xn=!1,es=!1,ts,fi=!1,Ui=[],Qr,Zt,qr=!1,Kt=new Map,Le=new Map,vo=new WeakMap;function Mh(e,r){Kt.has(r)||Kt.set(r,new Set),Kt.get(r).has(e)||(Kt.get(r).add(e),fl())}function uu(e,r){Kt.get(r).delete(e),dl(),Kt.get(r).size===0&&Kt.delete(r)}function Nh(){var e=Kt.get(_a),r=li(e),a;try{for(r.s();!(a=r.n()).done;){var u=a.value;u.addEventListener(va,bl),u.addEventListener(ci,wl),u.addEventListener(pa,El)}}catch(v){r.e(v)}finally{r.f()}window.addEventListener(Qo,Ar);var c=Math.max.apply(Math,It(Array.from(e.keys()).map(function(v){return Le.get(v).dropAnimationDurationMs}))),f=c===0?Ph:Math.max(c,Ch);Qr=mh(e,function(){return Je}),hh(Ge,e,f*1.07,Qr)}function Lh(){var e=Kt.get(_a),r=li(e),a;try{for(r.s();!(a=r.n()).done;){var u=a.value;u.removeEventListener(va,bl),u.removeEventListener(ci,wl),u.removeEventListener(pa,El)}}catch(c){r.e(c)}finally{r.f()}window.removeEventListener(Qo,Ar),Qr&&(Qr.destroy(),Qr=void 0),vh()}function wa(e){return e.findIndex(function(r){return!!r[ya]})}function Fh(e){var r;return ta(ta({},e),{},(r={},kr(r,ya,!0),kr(r,Ve,cl),r))}function bl(e){var r=Le.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==Ie)){if(fi=!1,a=a.filter(function(g){return g[Ve]!==Pn[Ve]&&g[Ve]!==cl}),Ie!==e.currentTarget){var c=Le.get(Ie).items,f=c.filter(function(g){return!g[ya]});Ln(Ie,f,{trigger:ot.DRAGGED_ENTERED_ANOTHER,id:ft[Ve],source:yt.POINTER})}var v=e.detail.indexObj.index;qe=e.currentTarget,a.splice(v,0,Pn),Ln(e.currentTarget,a,{trigger:ot.DRAGGED_ENTERED,id:ft[Ve],source:yt.POINTER})}}function wl(e){if(xn){var r=Le.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==Ie&&e.currentTarget!==qe)){var c=It(a),f=wa(c);f!==-1&&c.splice(f,1);var v=qe;qe=void 0;var g=e.detail,y=g.type,D=g.theOtherDz;if(y===na.OUTSIDE_OF_ANY||y===na.LEFT_FOR_ANOTHER&&D!==Ie&&Le.get(D).dropFromOthersDisabled){fi=!0,qe=Ie;var E=v===Ie?c:It(Le.get(Ie).items);E.splice(ba,0,Pn),Ln(Ie,E,{trigger:ot.DRAGGED_LEFT_ALL,id:ft[Ve],source:yt.POINTER})}Ln(e.currentTarget,c,{trigger:ot.DRAGGED_LEFT,id:ft[Ve],source:yt.POINTER})}}}function El(e){var r=Le.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==Ie)){var c=It(a);fi=!1;var f=e.detail.indexObj.index,v=wa(c);v!==-1&&c.splice(v,1),c.splice(f,0,Pn),Ln(e.currentTarget,c,{trigger:ot.DRAGGED_OVER_INDEX,id:ft[Ve],source:yt.POINTER})}}function aa(e){e.preventDefault();var r=e.touches?e.touches[0]:e;Je={x:r.clientX,y:r.clientY},Ge.style.transform="translate3d(".concat(Je.x-qt.x,"px, ").concat(Je.y-qt.y,"px, 0)")}function Ar(){es=!0,window.removeEventListener("mousemove",aa),window.removeEventListener("touchmove",aa),window.removeEventListener("mouseup",Ar),window.removeEventListener("touchend",Ar),Lh(),Th(Ge),qe||(qe=Ie);var e=Le.get(qe),r=e.items,a=e.type;ia(Kt.get(a),function(f){return Le.get(f).dropTargetStyle},function(f){return Le.get(f).dropTargetClasses});var u=wa(r);u===-1&&qe===Ie&&(u=ba),r=r.map(function(f){return f[ya]?ft:f});function c(){ts(),Dr(qe,r,{trigger:fi?ot.DROPPED_OUTSIDE_OF_ANY:ot.DROPPED_INTO_ZONE,id:ft[Ve],source:yt.POINTER}),qe!==Ie&&Dr(Ie,Le.get(Ie).items,{trigger:ot.DROPPED_INTO_ANOTHER,id:ft[Ve],source:yt.POINTER});var f=Array.from(qe.children).find(function(v){return v.getAttribute(ma)});f&&Sh(f),jh()}Le.get(qe).dropAnimationDisabled?c():Kh(u,c)}function Kh(e,r){var a=e>-1?So(qe.children[e],!1):So(qe,!1),u={x:a.left-parseFloat(Ge.style.left),y:a.top-parseFloat(Ge.style.top)},c=Le.get(qe),f=c.dropAnimationDurationMs,v="transform ".concat(f,"ms ease");Ge.style.transition=Ge.style.transition?Ge.style.transition+","+v:v,Ge.style.transform="translate3d(".concat(u.x,"px, ").concat(u.y,"px, 0)"),window.setTimeout(r,f)}function Bh(e,r){Ui.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){_l(e),document.body.appendChild(e)})}function jh(){Ge&&Ge.remove&&Ge.remove(),ct&&ct.remove&&ct.remove(),Ge=void 0,ct=void 0,ft=void 0,_a=void 0,Ie=void 0,ba=void 0,Pn=void 0,qe=void 0,qt=void 0,Je=void 0,xn=!1,es=!1,ts=void 0,fi=!1,Zt&&clearTimeout(Zt),Zt=void 0,qr=!1,Ui.length&&(Ui.forEach(function(e){var r=e.dz,a=e.destroy;a(),r.remove()}),Ui=[])}function zh(e,r){var a=!1,u={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:ou,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},c=new Map;function f(){window.addEventListener("mousemove",y,{passive:!1}),window.addEventListener("touchmove",y,{passive:!1,capture:!1}),window.addEventListener("mouseup",g,{passive:!1}),window.addEventListener("touchend",g,{passive:!1})}function v(){window.removeEventListener("mousemove",y),window.removeEventListener("touchmove",y),window.removeEventListener("mouseup",g),window.removeEventListener("touchend",g),Zt&&(clearTimeout(Zt),Zt=void 0,qr=!1)}function g(_){if(v(),ct=void 0,qt=void 0,Je=void 0,_.type==="touchend"){var T=new Event("click",{bubbles:!0,cancelable:!0});_.target.dispatchEvent(T)}}function y(_){var T=!!_.touches,R=T?_.touches[0]:_;if(T&&u.delayTouchStartMs>0&&!qr){Je={x:R.clientX,y:R.clientY},(Math.abs(Je.x-qt.x)>=Bi||Math.abs(Je.y-qt.y)>=Bi)&&(Zt&&(clearTimeout(Zt),Zt=void 0),g(_));return}_.preventDefault(),Je={x:R.clientX,y:R.clientY},(Math.abs(Je.x-qt.x)>=Bi||Math.abs(Je.y-qt.y)>=Bi)&&(v(),E())}function D(_){if(!(_.target!==_.currentTarget&&(_.target.value!==void 0||_.target.isContentEditable))&&!_.button&&!xn){var T=!!_.touches,R=T&&u.delayTouchStartMs>0;R||_.preventDefault(),_.stopPropagation();var F=T?_.touches[0]:_;qt={x:F.clientX,y:F.clientY},Je=ta({},qt),ct=_.currentTarget,R&&(qr=!1,Zt=window.setTimeout(function(){ct&&(qr=!0,v(),E())},u.delayTouchStartMs)),f()}}function E(){xn=!0;var _=c.get(ct);ba=_,Ie=ct.parentElement;var T=Ie.closest("dialog")||Ie.closest("[popover]")||Ie.getRootNode(),R=T.body||T,F=u.items,M=u.type,z=u.centreDraggedOnCursor,ne=It(F);ft=ne[_],_a=M,Pn=Fh(ft),Ge=xh(ct,z&&Je),R.appendChild(Ge);function ie(){ct.parentElement?window.requestAnimationFrame(ie):(ct.setAttribute(su,!0),R.appendChild(ct),Nh(),_l(ct),Pn[Ve]=ft[Ve],Ge.focus())}window.requestAnimationFrame(ie),Hi(Array.from(Kt.get(u.type)).filter(function(q){return q===Ie||!Le.get(q).dropFromOthersDisabled}),function(q){return Le.get(q).dropTargetStyle},function(q){return Le.get(q).dropTargetClasses}),ne.splice(_,1,Pn),ts=Oh(Ie),Ln(Ie,ne,{trigger:ot.DRAG_STARTED,id:ft[Ve],source:yt.POINTER}),window.addEventListener("mousemove",aa,{passive:!1}),window.addEventListener("touchmove",aa,{passive:!1,capture:!1}),window.addEventListener("mouseup",Ar,{passive:!1}),window.addEventListener("touchend",Ar,{passive:!1})}function A(_){var T=_.items,R=T===void 0?void 0:T,F=_.flipDurationMs,M=F===void 0?0:F,z=_.type,ne=z===void 0?Ih:z,ie=_.dragDisabled,q=ie===void 0?!1:ie,ae=_.morphDisabled,oe=ae===void 0?!1:ae,de=_.dropFromOthersDisabled,se=de===void 0?!1:de,ce=_.dropTargetStyle,fe=ce===void 0?ou:ce,he=_.dropTargetClasses,ge=he===void 0?[]:he,Re=_.transformDraggedElement,He=Re===void 0?function(){}:Re,st=_.centreDraggedOnCursor,Ue=st===void 0?!1:st,Se=_.dropAnimationDisabled,zt=Se===void 0?!1:Se,rt=_.delayTouchStart,Me=rt===void 0?!1:rt;u.dropAnimationDurationMs=M;var xt=0;Me===!0?xt=Rh:typeof Me=="number"&&isFinite(Me)&&Me>=0&&(xt=Me),u.delayTouchStartMs=xt,u.type&&ne!==u.type&&uu(e,u.type),u.type=ne,u.items=It(R),u.dragDisabled=q,u.morphDisabled=oe,u.transformDraggedElement=He,u.centreDraggedOnCursor=Ue,u.dropAnimationDisabled=zt,a&&xn&&!es&&(!ch(fe,u.dropTargetStyle)||!fh(ge,u.dropTargetClasses))&&(ia([e],function(){return u.dropTargetStyle},function(){return ge}),Hi([e],function(){return fe},function(){return ge})),u.dropTargetStyle=fe,u.dropTargetClasses=It(ge);function Ct(Fe,Pt){return Le.get(Fe)?Le.get(Fe)[Pt]:u[Pt]}a&&xn&&u.dropFromOthersDisabled!==se&&(se?ia([e],function(Fe){return Ct(Fe,"dropTargetStyle")},function(Fe){return Ct(Fe,"dropTargetClasses")}):Hi([e],function(Fe){return Ct(Fe,"dropTargetStyle")},function(Fe){return Ct(Fe,"dropTargetClasses")})),u.dropFromOthersDisabled=se,Le.set(e,u),Mh(e,ne);for(var tn=xn?wa(u.items):-1,ut=0;ut<e.children.length;ut++){var it=e.children[ut];if(Dh(it,q),ut===tn){oe||kh(Ge,it,Je.x,Je.y),u.transformDraggedElement(Ge,ft,ut),Ah(it);continue}it.removeEventListener("mousedown",vo.get(it)),it.removeEventListener("touchstart",vo.get(it)),q||(it.addEventListener("mousedown",D),it.addEventListener("touchstart",D),vo.set(it,D)),c.set(it,ut),a||(a=!0)}}return A(r),{update:function(T){A(T)},destroy:function(){function T(){uu(e,Le.get(e).type),Le.delete(e)}xn&&!e.closest("[".concat(su,"]"))?Bh(e,T):T()}}}var ji,Io={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},xl=(ji={},kr(ji,Io.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),kr(ji,Io.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),ji),Vh="dnd-action-aria-alert",je;function Co(){je||(je=document.createElement("div"),(function(){je.id=Vh,je.style.position="fixed",je.style.bottom="0",je.style.left="0",je.style.zIndex="-5",je.style.opacity="0",je.style.height="0",je.style.width="0",je.setAttribute("role","alert")})(),document.body.prepend(je),Object.entries(xl).forEach(function(e){var r=Hd(e,2),a=r[0],u=r[1];return document.body.prepend(Wh(a,u))}))}function Hh(){return Xo?null:(document.readyState==="complete"?Co():window.addEventListener("DOMContentLoaded",Co),ta({},Io))}function Uh(){Xo||!je||(Object.keys(xl).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),je.remove(),je=void 0)}function Wh(e,r){var a=document.createElement("div");return a.id=e,a.innerHTML="<p>".concat(r,"</p>"),a.style.display="none",a.style.position="fixed",a.style.zIndex="-5",a}function gr(e){if(!Xo){je||Co(),je.innerHTML="";var r=document.createTextNode(e);je.appendChild(r),je.style.display="none",je.style.display="inline"}}var Gh="--any--",lu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Dt=!1,Po,et,Xn="",Zn,Qt,Tn="",oa=new WeakSet,cu=new WeakMap,fu=new WeakMap,Ro=new Map,Ye=new Map,Ft=new Map,sa;function Yh(e,r){Ft.size===0&&(sa=Hh(),window.addEventListener("keydown",Tl),window.addEventListener("click",kl)),Ft.has(r)||Ft.set(r,new Set),Ft.get(r).has(e)||(Ft.get(r).add(e),fl())}function du(e,r){et===e&&ii(),Ft.get(r).delete(e),dl(),Ft.get(r).size===0&&Ft.delete(r),Ft.size===0&&(window.removeEventListener("keydown",Tl),window.removeEventListener("click",kl),sa=void 0,Uh())}function Tl(e){if(Dt)switch(e.key){case"Escape":{ii();break}}}function kl(){Dt&&(oa.has(document.activeElement)||ii())}function qh(e){if(Dt){var r=e.currentTarget;if(r!==et){Xn=r.getAttribute("aria-label")||"";var a=Ye.get(et),u=a.items,c=u.find(function(A){return A[Ve]===Qt}),f=u.indexOf(c),v=u.splice(f,1)[0],g=Ye.get(r),y=g.items,D=g.autoAriaDisabled;r.getBoundingClientRect().top<et.getBoundingClientRect().top||r.getBoundingClientRect().left<et.getBoundingClientRect().left?(y.push(v),D||gr("Moved item ".concat(Tn," to the end of the list ").concat(Xn))):(y.unshift(v),D||gr("Moved item ".concat(Tn," to the beginning of the list ").concat(Xn)));var E=et;Dr(E,u,{trigger:ot.DROPPED_INTO_ANOTHER,id:Qt,source:yt.KEYBOARD}),Dr(r,y,{trigger:ot.DROPPED_INTO_ZONE,id:Qt,source:yt.KEYBOARD}),et=r}}}function Dl(){Ro.forEach(function(e,r){var a=e.update;return a(Ye.get(r))})}function ii(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Ye.get(et).autoAriaDisabled||gr("Stopped dragging item ".concat(Tn)),oa.has(document.activeElement)&&document.activeElement.blur(),e&&Ln(et,Ye.get(et).items,{trigger:ot.DRAG_STOPPED,id:Qt,source:yt.KEYBOARD}),ia(Ft.get(Po),function(r){return Ye.get(r).dropTargetStyle},function(r){return Ye.get(r).dropTargetClasses}),Zn=null,Qt=null,Tn="",Po=null,et=null,Xn="",Dt=!1,Dl()}function Zh(e,r){var a={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:lu,dropTargetClasses:[],autoAriaDisabled:!1};function u(E,A,_){E.length<=1||E.splice(_,1,E.splice(A,1,E[_])[0])}function c(E){switch(E.key){case"Enter":case" ":{if((E.target.disabled!==void 0||E.target.href||E.target.isContentEditable)&&!oa.has(E.target))return;E.preventDefault(),E.stopPropagation(),Dt?ii():f(E);break}case"ArrowDown":case"ArrowRight":{if(!Dt)return;E.preventDefault(),E.stopPropagation();var A=Ye.get(e),_=A.items,T=Array.from(e.children),R=T.indexOf(E.currentTarget);R<T.length-1&&(a.autoAriaDisabled||gr("Moved item ".concat(Tn," to position ").concat(R+2," in the list ").concat(Xn)),u(_,R,R+1),Dr(e,_,{trigger:ot.DROPPED_INTO_ZONE,id:Qt,source:yt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Dt)return;E.preventDefault(),E.stopPropagation();var F=Ye.get(e),M=F.items,z=Array.from(e.children),ne=z.indexOf(E.currentTarget);ne>0&&(a.autoAriaDisabled||gr("Moved item ".concat(Tn," to position ").concat(ne," in the list ").concat(Xn)),u(M,ne,ne-1),Dr(e,M,{trigger:ot.DROPPED_INTO_ZONE,id:Qt,source:yt.KEYBOARD}));break}}}function f(E){g(E.currentTarget),et=e,Po=a.type,Dt=!0;var A=Array.from(Ft.get(a.type)).filter(function(T){return T===et||!Ye.get(T).dropFromOthersDisabled});if(Hi(A,function(T){return Ye.get(T).dropTargetStyle},function(T){return Ye.get(T).dropTargetClasses}),!a.autoAriaDisabled){var _="Started dragging item ".concat(Tn,". Use the arrow keys to move it within its list ").concat(Xn);A.length>1&&(_+=", or tab to another list in order to move the item into it"),gr(_)}Ln(e,Ye.get(e).items,{trigger:ot.DRAG_STARTED,id:Qt,source:yt.KEYBOARD}),Dl()}function v(E){Dt&&E.currentTarget!==Zn&&(E.stopPropagation(),ii(!1),f(E))}function g(E){var A=Ye.get(e),_=A.items,T=Array.from(e.children),R=T.indexOf(E);Zn=E,Zn.tabIndex=a.zoneItemTabIndex,Qt=_[R][Ve],Tn=T[R].getAttribute("aria-label")||""}function y(E){var A=E.items,_=A===void 0?[]:A,T=E.type,R=T===void 0?Gh:T,F=E.dragDisabled,M=F===void 0?!1:F,z=E.zoneTabIndex,ne=z===void 0?0:z,ie=E.zoneItemTabIndex,q=ie===void 0?0:ie,ae=E.dropFromOthersDisabled,oe=ae===void 0?!1:ae,de=E.dropTargetStyle,se=de===void 0?lu:de,ce=E.dropTargetClasses,fe=ce===void 0?[]:ce,he=E.autoAriaDisabled,ge=he===void 0?!1:he;a.items=It(_),a.dragDisabled=M,a.dropFromOthersDisabled=oe,a.zoneTabIndex=ne,a.zoneItemTabIndex=q,a.dropTargetStyle=se,a.dropTargetClasses=fe,a.autoAriaDisabled=ge,a.type&&R!==a.type&&du(e,a.type),a.type=R,Yh(e,R),ge||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",M?sa.DND_ZONE_DRAG_DISABLED:sa.DND_ZONE_ACTIVE)),Ye.set(e,a),Dt?e.tabIndex=e===et||Zn.contains(e)||a.dropFromOthersDisabled||et&&a.type!==Ye.get(et).type?-1:0:e.tabIndex=a.zoneTabIndex,e.addEventListener("focus",qh);for(var Re=function(Ue){var Se=e.children[Ue];oa.add(Se),Se.tabIndex=Dt?-1:a.zoneItemTabIndex,ge||Se.setAttribute("role","listitem"),Se.removeEventListener("keydown",cu.get(Se)),Se.removeEventListener("click",fu.get(Se)),M||(Se.addEventListener("keydown",c),cu.set(Se,c),Se.addEventListener("click",v),fu.set(Se,v)),Dt&&a.items[Ue][Ve]===Qt&&(Zn=Se,Zn.tabIndex=a.zoneItemTabIndex,Se.focus())},He=0;He<e.children.length;He++)Re(He)}y(r);var D={update:function(A){y(A)},destroy:function(){du(e,a.type),Ye.delete(e),Ro.delete(e)}};return Ro.set(e,D),D}var $h=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Qh(e,r){if(Xh(e))return{update:function(){},destroy:function(){}};hu(r);var a=zh(e,r),u=Zh(e,r);return{update:function(f){hu(f),a.update(f),u.update(f)},destroy:function(){a.destroy(),u.destroy()}}}function Xh(e){return!!e.closest("[".concat(rh,'="true"]'))}function hu(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var a=e.zoneTabIndex,u=e.zoneItemTabIndex;e.dropTargetStyle;var c=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var f=e.delayTouchStart;e.dropAnimationDisabled;var v=Vd(e,$h);if(Object.keys(v).length>0&&console.warn("dndzone will ignore unknown options",v),!r)throw new Error("no 'items' key provided to dndzone");var g=r.find(function(E){return!{}.hasOwnProperty.call(E,Ve)});if(g)throw new Error("missing '".concat(Ve,"' property for item ").concat(Wr(g)));if(c&&!Array.isArray(c))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(vr(c),", ").concat(Wr(c)));if(a&&!vu(a))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(vr(a),", ").concat(Wr(a)));if(u&&!vu(u))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(vr(u),", ").concat(Wr(u)));if(f!==void 0&&f!==!1){var y=f===!0,D=typeof f=="number"&&isFinite(f)&&f>=0;if(!y&&!D)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(vr(f),", ").concat(Wr(f)))}}function vu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}var Jh=ze('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),ev=ze('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input w-[150px] flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function tv(e,r){nr(r,!0);let a=me(sn(r.taskText||"")),u=me(!1),c=me(null),f=me(null),v=fa(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const ie=24+24+16+8-8,q=10,ae=r.taskPosition.top-ie,oe=r.taskPosition.left-16+q,de=r.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${ae}px; left: ${oe}px; width: ${de}px;`});wt(()=>{r.isOpen&&(j(a,r.taskText||"",!0),j(u,!1))}),wt(()=>{r.isOpen&&C(c)&&setTimeout(()=>{C(c)?.focus(),C(c)?.select(),C(c)instanceof HTMLTextAreaElement&&(C(c).style.height="auto",C(c).style.height=`${Math.min(C(c).scrollHeight,160)}px`)},0)}),wt(()=>{if(C(c)&&C(c)instanceof HTMLTextAreaElement){const F=()=>{C(c).style.height="auto",C(c).style.height=`${Math.min(C(c).scrollHeight,160)}px`};return C(c).addEventListener("input",F),()=>{C(c).removeEventListener("input",F)}}});function g(){const F=C(a)??"",M=F.trim();if(M===""&&F.length>0){r.onSave(r.taskId,""),j(u,!1);return}if(F===""||M===""){j(u,!0);return}r.onSave(r.taskId,M),j(u,!1)}function y(){j(a,r.taskText||"",!0),j(u,!1),r.onCancel()}function D(F){F.target===F.currentTarget&&y()}function E(F){F.key==="Escape"?y():F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),g())}function A(){r.onArchive&&r.onArchive(r.taskId)}var _=In(),T=en(_);{var R=F=>{var M=ev();M.__click=D,M.__keydown=E;var z=Ee(M);z.__click=he=>he.stopPropagation();var ne=Ae(Ee(z),2),ie=Ee(ne);ie.__keydown=E,Tr(ie,he=>j(c,he),()=>C(c));var q=Ae(ie,2);{var ae=he=>{var ge=Jh();De(he,ge)};ht(q,he=>{C(u)&&he(ae)})}var oe=Ae(ne,2),de=Ee(oe);de.__click=A;var se=Ae(de,2),ce=Ee(se);ce.__click=y;var fe=Ae(ce,2);fe.__click=g,Tr(z,he=>j(f,he),()=>C(f)),$t(he=>{ol(z,he),Lt(ie,"aria-describedby",C(u)?"validation-message":void 0),fe.disabled=C(u),Lt(fe,"aria-label",C(u)?"Save disabled: task cannot be empty":"Save task changes")},[()=>C(v)()]),sl(ie,()=>C(a),he=>j(a,he)),De(F,M)};ht(T,F=>{r.isOpen&&F(R)})}De(e,_),rr()}Cr(["click","keydown"]);var nv=ze('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),rv=ze('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-8e0jqh" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div>');function iv(e,r){nr(r,!0);let a=me(sn(r.listName||"")),u=me(!1),c=me(null),f=me(null),v=fa(()=>()=>{if(!r.listPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const ne=24+24+16+8-8,ie=r.listPosition.top-ne,q=r.listPosition.left-16,ae=Math.max(r.listPosition.width+48,300);return`background-color: white; z-index: 10000; top: ${ie}px; left: ${q}px; width: ${ae}px;`});wt(()=>{r.isOpen&&(j(a,r.listName||"",!0),j(u,!1))}),wt(()=>{r.isOpen&&C(c)&&setTimeout(()=>{C(c)?.focus(),C(c)?.select()},0)});function g(){const F=(C(a)??"").trim();if(F===""){j(u,!0);return}r.onSave(r.listId,F),j(u,!1)}function y(){j(a,r.listName||"",!0),j(u,!1),r.onCancel()}function D(R){R.target===R.currentTarget&&y()}function E(R){R.key==="Escape"?y():R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),g())}var A=In(),_=en(A);{var T=R=>{var F=rv();F.__click=D,F.__keydown=E;var M=Ee(F);M.__click=se=>se.stopPropagation();var z=Ae(Ee(M),2),ne=Ee(z);ne.__keydown=E,Tr(ne,se=>j(c,se),()=>C(c));var ie=Ae(ne,2);{var q=se=>{var ce=nv();De(se,ce)};ht(ie,se=>{C(u)&&se(q)})}var ae=Ae(z,2),oe=Ee(ae);oe.__click=y;var de=Ae(oe,2);de.__click=g,Tr(M,se=>j(f,se),()=>C(f)),$t(se=>{ol(M,se),Lt(ne,"aria-describedby",C(u)?"validation-message":void 0),de.disabled=C(u),Lt(de,"aria-label",C(u)?"Save disabled: list name cannot be empty":"Save list name changes")},[()=>C(v)()]),sl(ne,()=>C(a),se=>j(a,se)),De(R,F)};ht(_,R=>{r.isOpen&&R(T)})}De(e,A),rr()}Cr(["click","keydown"]);var av=ze('<p class="empty-state-message svelte-k6mizj"> </p>'),ov=ze('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),sv=ze('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),uv=ze('<ul class="space-y-2"></ul>'),lv=ze("<p>Loading tasks...</p>"),cv=ze('<div class="flex gap-2"><textarea placeholder="Add new task..." class="print:hidden w-[150px] flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto svelte-k6mizj" rows="1"></textarea> <button class="print:hidden" aria-label="Save new task">Save</button></div>'),fv=ze('<button class="add-task-button svelte-k6mizj">Add Task</button>'),dv=ze('<div><h2 role="button" tabindex="0" class="cursor-pointer hover:underline"> </h2> <!> <div class="task-input-container svelte-k6mizj"><!></div></div> <!> <!>',1);function hv(e,r){nr(r,!0);const a=()=>Xi(C(f),"$tasksQuery",u),[u,c]=Zo();let f=me(null),v=me(sn([])),g=me(!1),y=me(null),D=me(!1),E=me(null),A=me(""),_=me(null),T=me(null),R=me(null),F=me(!1),M=me(null),z=me(null);wt(()=>{r.listId&&!C(f)&&To(j(f,ea(()=>Md(r.listId)),!0),"$tasksQuery",u)}),wt(()=>{a()&&Array.isArray(a())&&j(v,a().filter(W=>W.status==="unchecked"||W.status==="checked"),!0)}),wt(()=>{if(!C(R))return;function W(te){const Z=te.target;if((te.key==="Enter"||te.key===" ")&&Z instanceof HTMLElement&&Z.hasAttribute("data-no-drag")){te.preventDefault(),te.stopImmediatePropagation();const _e=Z.closest("li[data-id]");if(_e){const ve=parseInt(_e.getAttribute("data-id")),Ke=C(v).find(we=>we.id===ve);if(Ke){const we=Z.getBoundingClientRect();j(_,{top:we.top,left:we.left,width:we.width,height:we.height},!0),j(T,Z,!0),j(E,ve,!0),j(A,Ke.text,!0),j(D,!0)}}}}return C(R).addEventListener("keydown",W,!0),()=>{C(R).removeEventListener("keydown",W,!0)}});function ne(W){j(v,W.detail.items,!0)}async function ie(W){j(v,W.detail.items,!0);try{await Bd(r.listId,W.detail.items)}catch(te){console.error("Error updating task order:",te)}}function q(){j(g,!0)}function ae(W){W.key==="Escape"&&(j(g,!1),r.onInputChange(""))}wt(()=>{if(!C(g))return;function W(Z){const _e=document.querySelector(`[data-list-id="${r.listId}"] .task-input-container`);if(!_e)return;const ve=_e.querySelector("button");if(ve&&ve.contains(Z.target))return;const Ke=_e.querySelector("textarea");Ke&&Ke.contains(Z.target)||(!r.newTaskInput||r.newTaskInput.trim()==="")&&(j(g,!1),r.onInputChange(""))}const te=setTimeout(()=>{document.addEventListener("click",W)},0);return()=>{clearTimeout(te),document.removeEventListener("click",W)}}),wt(()=>{C(g)&&C(y)&&setTimeout(()=>{C(y)?.focus(),C(y)instanceof HTMLTextAreaElement&&(C(y).style.height="auto",C(y).style.height=`${Math.min(C(y).scrollHeight,160)}px`)},0)}),wt(()=>{if(C(y)&&C(y)instanceof HTMLTextAreaElement){const W=()=>{C(y).style.height="auto",C(y).style.height=`${Math.min(C(y).scrollHeight,160)}px`};return C(y).addEventListener("input",W),()=>{C(y).removeEventListener("input",W)}}});async function oe(){const W=r.newTaskInput||"";if(W===""){j(g,!1),r.onInputChange("");return}const te=W.trim(),Z=te===""&&W.length>0;let _e;Z?_e="":_e=te;try{await Ld(r.listId,_e),r.onInputChange("")}catch(ve){console.error("Error creating task:",ve)}}async function de(W,te){try{await tu(W,te==="unchecked"?"checked":"unchecked")}catch(Z){console.error("Error updating task status:",Z)}}async function se(W){try{if(await tu(W,"archived"),C(E)===W){const te=C(T);j(D,!1),j(E,null),j(A,""),j(_,null),j(T,null),setTimeout(()=>{if(te&&te instanceof HTMLElement){const Z=te.closest("li");if(Z){const ve=Z.nextElementSibling;if(ve){const we=ve.querySelector('span[role="button"]');if(we&&we instanceof HTMLElement){we.focus();return}}const Ke=Z.previousElementSibling;if(Ke){const we=Ke.querySelector('span[role="button"]');if(we&&we instanceof HTMLElement){we.focus();return}}}const _e=document.querySelector(`[data-list-id="${r.listId}"] .add-task-button`);_e&&_e instanceof HTMLElement&&_e.focus()}},0)}}catch(te){console.error("Error archiving task:",te)}}function ce(W,te,Z){const _e=Z?.currentTarget||Z?.target;if(_e){const ve=_e.getBoundingClientRect();j(_,{top:ve.top,left:ve.left,width:ve.width,height:ve.height},!0),j(T,_e,!0)}j(E,W,!0),j(A,te,!0),j(D,!0)}function fe(W,te,Z){if(Z.key==="Enter"||Z.key===" "){Z.preventDefault(),Z.stopImmediatePropagation();const _e=Z.currentTarget;if(_e){const ve=_e.getBoundingClientRect();j(_,{top:ve.top,left:ve.left,width:ve.width,height:ve.height},!0),j(T,_e,!0),j(E,W,!0),j(A,te,!0),j(D,!0)}}}async function he(W,te){try{await Fd(W,te),j(D,!1);const Z=C(T);j(E,null),j(A,""),j(_,null),j(T,null),Z&&Z instanceof HTMLElement&&setTimeout(()=>{Z.focus()},0)}catch(Z){console.error("Error updating task text:",Z)}}function ge(){const W=C(T);j(D,!1),j(E,null),j(A,""),j(_,null),j(T,null),W&&W instanceof HTMLElement&&setTimeout(()=>{W.focus()},0)}async function Re(W){await se(W)}function He(W){const te=W?.currentTarget||W?.target;if(te){const Z=te.getBoundingClientRect();j(M,{top:Z.top,left:Z.left,width:Z.width,height:Z.height},!0),j(z,te,!0)}j(F,!0)}function st(W){if(W.key==="Enter"||W.key===" "){W.preventDefault(),W.stopPropagation();const te=W.currentTarget;if(te){const Z=te.getBoundingClientRect();j(M,{top:Z.top,left:Z.left,width:Z.width,height:Z.height},!0),j(z,te,!0),j(F,!0)}}}async function Ue(W,te){try{await Rd(W,te),j(F,!1);const Z=C(z);j(M,null),j(z,null),Z&&Z instanceof HTMLElement&&setTimeout(()=>{Z.focus()},0)}catch(Z){console.error("Error updating list name:",Z)}}function Se(){const W=C(z);j(F,!1),j(M,null),j(z,null),W&&W instanceof HTMLElement&&setTimeout(()=>{W.focus()},0)}var zt=dv(),rt=en(zt),Me=Ee(rt);Me.__click=He,Me.__keydown=st;var xt=Ee(Me),Ct=Ae(Me,2);{var tn=W=>{var te=In(),Z=en(te);{var _e=Ke=>{var we=av(),gt=Ee(we);$t(()=>Cn(gt,`No tasks yet for ${r.listName??""}. Add your first task.`)),De(Ke,we)},ve=Ke=>{var we=uv();Bo(we,21,()=>C(v),gt=>gt.id,(gt,Be)=>{var $=sv(),Fn=Ae(Ee($),2);Fn.__change=()=>de(C(Be).id,C(Be).status);var hn=Ae(Fn,2);hn.__click=nn=>ce(C(Be).id,C(Be).text,nn),hn.__keydown=nn=>fe(C(Be).id,C(Be).text,nn);var ar=Ee(hn),xe=Ae(hn,2);{var Kn=nn=>{var Mt=ov();Mt.__click=()=>se(C(Be).id),$t(()=>Lt(Mt,"aria-label",`Archive task: ${C(Be).text||"blank task"}`)),De(nn,Mt)};ht(xe,nn=>{C(Be).status==="checked"&&nn(Kn)})}$t(()=>{Lt($,"data-id",C(Be).id),Td(Fn,C(Be).status==="checked"),Lt(Fn,"aria-label",`Mark task "${C(Be).text||"blank task"}" as ${C(Be).status==="checked"?"unchecked":"checked"}`),bd(hn,1,md(C(Be).status==="checked"?"line-through w-[150px] cursor-pointer hover:underline break-words":"w-[150px] cursor-pointer hover:underline break-words")),Lt(hn,"aria-label",`Edit task: ${C(Be).text||"blank task"}`),Cn(ar,C(Be).text||"")}),De(gt,$)}),Tr(we,gt=>j(R,gt),()=>C(R)),pd(we,(gt,Be)=>Qh?.(gt,Be),()=>({items:C(v),type:`list-${r.listId}`})),Zs("consider",we,ne),Zs("finalize",we,ie),De(Ke,we)};ht(Z,Ke=>{a().length===0?Ke(_e):Ke(ve,!1)})}De(W,te)},ut=W=>{var te=lv();De(W,te)};ht(Ct,W=>{C(f)&&a()!==void 0?W(tn):W(ut,!1)})}var it=Ae(Ct,2),Fe=Ee(it);{var Pt=W=>{var te=cv(),Z=Ee(te);Z.__input=ve=>r.onInputChange(ve.currentTarget.value),Z.__keydown=ve=>{ve.key==="Enter"&&!ve.shiftKey?(ve.preventDefault(),oe()):ve.key==="Escape"&&ae(ve)},Tr(Z,ve=>j(y,ve),()=>C(y));var _e=Ae(Z,2);_e.__click=oe,$t(()=>xd(Z,r.newTaskInput)),De(W,te)},Rt=W=>{var te=fv();te.__click=q,$t(()=>Lt(te,"aria-label",`Add new task to ${r.listName??""}`)),De(W,te)};ht(Fe,W=>{C(g)?W(Pt):W(Rt,!1)})}var ir=Ae(rt,2);tv(ir,{get isOpen(){return C(D)},get taskId(){return C(E)},get taskText(){return C(A)},get taskPosition(){return C(_)},onSave:he,onCancel:ge,onArchive:Re});var Ea=Ae(ir,2);iv(Ea,{get isOpen(){return C(F)},get listId(){return r.listId},get listName(){return r.listName},get listPosition(){return C(M)},onSave:Ue,onCancel:Se}),$t(()=>{Lt(rt,"data-list-id",r.listId),Lt(Me,"aria-label",`Rename list: ${r.listName}`),Cn(xt,r.listName)}),De(e,zt),rr(),c()}Cr(["click","keydown","change","input"]);var vv=ze('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border border-gray-200 max-w-md w-full mx-4"><h3 id="modal-title" class="text-lg font-semibold mb-4"> </h3> <p class="mb-6 text-sm text-gray-600"> </p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete</button></div></div></div>');function pv(e,r){nr(r,!0);function a(){r.onConfirm()}function u(){r.onCancel()}function c(D){D.target===D.currentTarget&&u()}function f(D){D.key==="Escape"&&u()}var v=In(),g=en(v);{var y=D=>{var E=vv();E.__click=c,E.__keydown=f;var A=Ee(E),_=Ee(A),T=Ee(_),R=Ae(_,2),F=Ee(R),M=Ae(R,2),z=Ee(M);z.__click=u;var ne=Ae(z,2);ne.__click=a,$t(()=>{Cn(T,r.title),Cn(F,r.message)}),De(D,E)};ht(g,D=>{r.isOpen&&D(y)})}De(e,v),rr()}Cr(["click","keydown"]);var yv=ze("<p>No archived tasks</p>"),mv=ze('<li class="flex items-center gap-3 mb-2"><span class="line-through"> </span> <span class="text-sm text-gray-500"> </span> <span class="text-sm text-gray-400"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button> <button class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm">Delete</button></li>'),gv=ze("<ul></ul>"),_v=ze('<div class="w-[1056px] mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div> <!>',1);function bv(e,r){nr(r,!0);const a=()=>Xi(C(g),"$listsQuery",c),u=()=>Xi(C(v),"$archivedTasksQuery",c),[c,f]=Zo();let v=me(null),g=me(null),y=me(!1),D=me(null);wt(()=>{To(j(v,ea(()=>Nd()),!0),"$archivedTasksQuery",c),To(j(g,ea(()=>ll()),!0),"$listsQuery",c)});function E(ae){if(!a())return"Unknown List";const oe=a().find(de=>de.id===ae);return oe?oe.name:"Unknown List"}function A(ae){return ae?new Date(ae).toLocaleString():"Unknown"}async function _(ae){try{await Kd(ae)}catch(oe){console.error("Error restoring task:",oe)}}function T(ae,oe){j(D,{id:ae,text:oe},!0),j(y,!0)}async function R(){if(C(D))try{await jd(C(D).id),j(y,!1),j(D,null)}catch(ae){console.error("Error deleting task:",ae)}}function F(){j(y,!1),j(D,null)}var M=_v(),z=en(M),ne=Ae(Ee(z),2);{var ie=ae=>{var oe=In(),de=en(oe);{var se=fe=>{var he=yv();De(fe,he)},ce=fe=>{var he=gv();Bo(he,5,u,Lu,(ge,Re)=>{var He=mv(),st=Ee(He),Ue=Ee(st),Se=Ae(st,2),zt=Ee(Se),rt=Ae(Se,2),Me=Ee(rt),xt=Ae(rt,2);xt.__click=()=>_(C(Re).id);var Ct=Ae(xt,2);Ct.__click=()=>T(C(Re).id,C(Re).text),$t((tn,ut)=>{Cn(Ue,C(Re).text),Cn(zt,`(${tn??""})`),Cn(Me,`Archived: ${ut??""}`)},[()=>E(C(Re).listId),()=>A(C(Re).archivedAt)]),De(ge,He)}),De(fe,he)};ht(de,fe=>{u().length===0?fe(se):fe(ce,!1)})}De(ae,oe)};ht(ne,ae=>{C(v)&&u()&&ae(ie)})}var q=Ae(z,2);{let ae=fa(()=>C(D)?`Are you sure you want to permanently delete "${C(D).text}"? This action cannot be undone.`:"");pv(q,{get isOpen(){return C(y)},title:"Delete Task",get message(){return C(ae)},onConfirm:R,onCancel:F})}De(e,M),rr(),f()}Cr(["click"]);var wv=ze("<p>Loading...</p>"),Ev=ze("<p>No lists found</p>"),xv=ze('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="w-[1056px] flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="w-[1056px] h-[816px] bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><div class="w-full h-full p-4 overflow-auto"><!></div></div></div> <!></main>');function Tv(e,r){nr(r,!0);const a=()=>Xi(f,"$lists",u),[u,c]=Zo();let f=ea(()=>ll()),v=me(sn({}));wt(()=>{if(a()&&Array.isArray(a())&&a().length>0&&Object.keys(C(v)).length===0){const ie={};for(const q of a())ie[q.id]="";j(v,ie,!0)}});function g(ie,q){C(v)[ie]=q}function y(){window.print()}var D=xv(),E=Ee(D),A=Ee(E);A.__click=y;var _=Ae(E,2),T=Ee(_),R=Ee(T),F=Ee(R);{var M=ie=>{var q=wv();De(ie,q)},z=ie=>{var q=In(),ae=en(q);{var oe=se=>{var ce=Ev();De(se,ce)},de=se=>{var ce=In(),fe=en(ce);{var he=ge=>{var Re=In(),He=en(Re);Bo(He,1,a,Lu,(st,Ue)=>{{let Se=fa(()=>C(v)[C(Ue).id]||"");hv(st,{get listId(){return C(Ue).id},get listName(){return C(Ue).name},get newTaskInput(){return C(Se)},onInputChange:zt=>g(C(Ue).id,zt)})}}),De(ge,Re)};ht(fe,ge=>{Array.isArray(a())&&ge(he)},!0)}De(se,ce)};ht(ae,se=>{Array.isArray(a())&&a().length===0?se(oe):se(de,!1)},!0)}De(ie,q)};ht(F,ie=>{a()===void 0||a()===null?ie(M):ie(z,!1)})}var ne=Ae(_,2);bv(ne,{}),De(e,D),rr(),c()}Cr(["click"]);const kv=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],Dv=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function Av(){try{if(await Pe.lists.count()>0)return;await Pe.lists.bulkAdd(kv),await Pe.tasks.bulkAdd(Dv),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await Av().catch(console.error),fd(Tv,{target:document.getElementById("app")})))();
