(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(u){if(u.ep)return;u.ep=!0;const c=i(u);fetch(u.href,c)}})();const Kf="production",ae=!Kf.toLowerCase().startsWith("prod");var xs=Array.isArray,Ff=Array.prototype.indexOf,Ts=Array.from,er=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,ol=Object.getOwnPropertyDescriptors,Bf=Object.prototype,jf=Array.prototype,ks=Object.getPrototypeOf,Au=Object.isExtensible;const Ea=()=>{};function zf(e){for(var t=0;t<e.length;t++)e[t]()}function sl(){var e,t,i=new Promise((o,u)=>{e=o,t=u});return{promise:i,resolve:e,reject:t}}const yt=2,As=4,Is=8,ul=1<<24,Cn=16,Ln=32,Ar=64,Ua=128,on=512,kt=1024,Bt=2048,Pn=4096,Wt=8192,In=16384,Ds=32768,Ur=65536,xa=1<<17,ll=1<<18,Jr=1<<19,Hf=1<<20,tr=32768,ns=1<<21,Va=1<<22,Zn=1<<23,Dn=Symbol("$state"),Uf=Symbol("legacy props"),Vf=Symbol(""),cl=Symbol("proxy path"),Kr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Wf(){if(ae){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Iu(){if(ae){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Gf(){if(ae){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Yf(e){if(ae){const t=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function qf(){if(ae){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Zf(e){if(ae){const t=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_orphan")}function Qf(){if(ae){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xf(e){if(ae){const t=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Jf(e){if(ae){const t=new Error(`props_rest_readonly
Rest element properties of \`$props()\` such as \`${e}\` are readonly
https://svelte.dev/e/props_rest_readonly`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_rest_readonly")}function $f(e){if(ae){const t=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function ed(){if(ae){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function td(){if(ae){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function nd(){if(ae){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function rd(){if(ae){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const fl=1,dl=2,vl=4,id=8,ad=16,od=1,sd=2,ud=4,ld=8,cd=16,fd=1,dd=2,vt=Symbol(),vd=Symbol("filename"),hd="http://www.w3.org/1999/xhtml",pd="@attach";var Ss="font-weight: bold",Os="font-weight: normal";function md(){ae?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Ss,Os):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Vo(e){ae?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Ss,Os):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function yd(){ae?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Ss,Os):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function hl(e){return e===this.v}function pl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ml(e){return!pl(e,this.v)}let Oi=!1,gd=!1;function _d(){Oi=!0}function fn(e,t){return e.label=t,yl(e.v,t),e}function yl(e,t){return e?.[cl]?.(t),e}function bd(e){const t=new Error,i=wd();return i.length===0?null:(i.unshift(`
`),er(t,"stack",{value:i.join(`
`)}),er(t,"name",{value:e}),t)}function wd(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const t=new Error().stack;if(Error.stackTraceLimit=e,!t)return[];const i=t.split(`
`),o=[];for(let u=0;u<i.length;u++){const c=i[u],d=c.replaceAll("\\","/");if(c.trim()!=="Error"){if(c.includes("validate_each_keys"))return[];d.includes("svelte/src/internal")||d.includes("node_modules/.vite")||o.push(c)}}return o}let ot=null;function Vr(e){ot=e}let Wr=null;function Ta(e){Wr=e}let Ci=null;function Du(e){Ci=e}function ir(e,t=!1,i){ot={p:ot,i:!1,c:null,e:null,s:e,x:null,l:Oi&&!t?{s:null,u:null,$:[]}:null},ae&&(ot.function=i,Ci=i)}function ar(e){var t=ot,i=t.e;if(i!==null){t.e=null;for(var o of i)Ll(o)}return t.i=!0,ot=t.p,ae&&(Ci=ot?.function??null),{}}function Li(){return!Oi||ot!==null&&ot.l===null}let gr=[];function gl(){var e=gr;gr=[],zf(e)}function Ir(e){if(gr.length===0&&!_i){var t=gr;queueMicrotask(()=>{t===gr&&gl()})}gr.push(e)}function Ed(){for(;gr.length>0;)gl()}const rs=new WeakMap;function _l(e){var t=Ne;if(t===null)return Pe.f|=Zn,e;if(ae&&e instanceof Error&&!rs.has(e)&&rs.set(e,xd(e,t)),(t.f&Ds)===0){if((t.f&Ua)===0)throw ae&&!t.parent&&e instanceof Error&&bl(e),e;t.b.error(e)}else Gr(e,t)}function Gr(e,t){for(;t!==null;){if((t.f&Ua)!==0)try{t.b.error(e);return}catch(i){e=i}t=t.parent}throw ae&&e instanceof Error&&bl(e),e}function xd(e,t){const i=wr(e,"message");if(!(i&&!i.configurable)){for(var o=Rs?"  ":"	",u=`
${o}in ${t.fn?.name||"<unknown>"}`,c=t.ctx;c!==null;)u+=`
${o}in ${c.function?.[vd].split("/").pop()}`,c=c.p;return{message:e.message+`
${u}
`,stack:e.stack?.split(`
`).filter(d=>!d.includes("svelte/src/internal")).join(`
`)}}}function bl(e){const t=rs.get(e);t&&(er(e,"message",{value:t.message}),er(e,"stack",{value:t.stack}))}const da=new Set;let Fe=null,ya=null,Xt=null,Qt=[],Wa=null,is=!1,_i=!1;class gn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Qt=[],ya=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of t)this.#o(o,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(ya=this,Fe=null,Su(i.render_effects),Su(i.effects),ya=null,this.#u?.resolve()),Xt=null}#o(t,i){t.f^=kt;for(var o=t.first;o!==null;){var u=o.f,c=(u&(Ln|Ar))!==0,d=c&&(u&kt)!==0,p=d||(u&Wt)!==0||this.skipped_effects.has(o);if((o.f&Ua)!==0&&o.b?.is_pending()&&(i={parent:i,effect:o,effects:[],render_effects:[],block_effects:[]}),!p&&o.fn!==null){c?o.f^=kt:(u&As)!==0?i.effects.push(o):Ri(o)&&((o.f&Cn)!==0&&i.block_effects.push(o),ki(o));var h=o.first;if(h!==null){o=h;continue}}var b=o.parent;for(o=o.next;o===null&&b!==null;)b===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),o=b.next,b=b.parent}}#s(t){for(const i of t)((i.f&Bt)!==0?this.#a:this.#i).push(i),this.#l(i.deps),At(i,kt)}#l(t){if(t!==null)for(const i of t)(i.f&yt)===0||(i.f&tr)===0||(i.f^=tr,this.#l(i.deps))}capture(t,i){this.previous.has(t)||this.previous.set(t,i),(t.f&Zn)===0&&(this.current.set(t,t.v),Xt?.set(t,t.v))}activate(){Fe=this,this.apply()}deactivate(){Fe===this&&(Fe=null,Xt=null)}flush(){if(this.activate(),Qt.length>0){if(wl(),Fe!==null&&Fe!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(da.size>1){this.previous.clear();var t=Xt,i=!0,o={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of da){if(c===this){i=!1;continue}const d=[];for(const[h,b]of this.current){if(c.current.has(h))if(i&&b!==c.current.get(h))c.current.set(h,b);else continue;d.push(h)}if(d.length===0)continue;const p=[...c.current.keys()].filter(h=>!this.current.has(h));if(p.length>0){var u=Qt;Qt=[];const h=new Set,b=new Map;for(const w of d)El(w,p,h,b);if(Qt.length>0){Fe=c,c.apply();for(const w of Qt)c.#o(w,o);c.deactivate()}Qt=u}}Fe=null,Xt=t}this.committed=!0,da.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#a)At(t,Bt),Tr(t);for(const t of this.#i)At(t,Pn),Tr(t);this.#a=[],this.#i=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#u??=sl()).promise}static ensure(){if(Fe===null){const t=Fe=new gn;da.add(Fe),_i||gn.enqueue(()=>{Fe===t&&t.flush()})}return Fe}static enqueue(t){Ir(t)}apply(){}}function Td(e){var t=_i;_i=!0;try{for(var i;;){if(Ed(),Qt.length===0&&(Fe?.flush(),Qt.length===0))return Wa=null,i;wl()}}finally{_i=t}}function wl(){var e=Xn;is=!0;var t=ae?new Set:null;try{var i=0;for(Ia(!0);Qt.length>0;){var o=gn.ensure();if(i++>1e3){if(ae){var u=new Map;for(const d of o.current.keys())for(const[p,h]of d.updated??[]){var c=u.get(p);c||(c={error:h.error,count:0},u.set(p,c)),c.count+=h.count}for(const d of u.values())d.error&&console.error(d.error)}kd()}if(o.process(Qt),Qn.clear(),ae)for(const d of o.current.keys())t.add(d)}}finally{if(is=!1,Ia(e),Wa=null,ae)for(const d of t)d.updated=null}}function kd(){try{Qf()}catch(e){ae&&er(e,"stack",{value:""}),Gr(e,Wa)}}let kn=null;function Su(e){var t=e.length;if(t!==0){for(var i=0;i<t;){var o=e[i++];if((o.f&(In|Wt))===0&&Ri(o)&&(kn=new Set,ki(o),o.deps===null&&o.first===null&&o.nodes_start===null&&(o.teardown===null&&o.ac===null?Nl(o):o.fn=null),kn?.size>0)){Qn.clear();for(const u of kn){if((u.f&(In|Wt))!==0)continue;const c=[u];let d=u.parent;for(;d!==null;)kn.has(d)&&(kn.delete(d),c.push(d)),d=d.parent;for(let p=c.length-1;p>=0;p--){const h=c[p];(h.f&(In|Wt))===0&&ki(h)}}kn.clear()}}kn=null}}function El(e,t,i,o){if(!i.has(e)&&(i.add(e),e.reactions!==null))for(const u of e.reactions){const c=u.f;(c&yt)!==0?El(u,t,i,o):(c&(Va|Cn))!==0&&(c&Bt)===0&&xl(u,t,o)&&(At(u,Bt),Tr(u))}}function xl(e,t,i){const o=i.get(e);if(o!==void 0)return o;if(e.deps!==null)for(const u of e.deps){if(t.includes(u))return!0;if((u.f&yt)!==0&&xl(u,t,i))return i.set(u,!0),!0}return i.set(e,!1),!1}function Tr(e){for(var t=Wa=e;t.parent!==null;){t=t.parent;var i=t.f;if(is&&t===Ne&&(i&Cn)!==0&&(i&ll)===0)return;if((i&(Ar|Ln))!==0){if((i&kt)===0)return;t.f^=kt}}Qt.push(t)}function Ad(e){let t=0,i=kr(0),o;return ae&&fn(i,"createSubscriber version"),()=>{xi()&&(y(i),Qa(()=>(t===0&&(o=$r(()=>e(()=>bi(i)))),t+=1,()=>{Ir(()=>{t-=1,t===0&&(o?.(),o=void 0,bi(i))})})))}}var Id=Ur|Jr|Ua;function Dd(e,t,i){new Sd(e,t,i)}class Sd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#v=0;#h=!1;#d=null;#_=Ad(()=>(this.#d=kr(this.#f),ae&&fn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(t,i,o){this.#t=t,this.#n=i,this.#u=o,this.parent=Ne.b,this.#e=!!this.#n.pending,this.#a=Ms(()=>{Ne.b=this;{var u=this.#y();try{this.#i=Mt(()=>o(u))}catch(c){this.error(c)}this.#v>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},Id)}#b(){try{this.#i=Mt(()=>this.#u(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#n.pending;t&&(this.#o=Mt(()=>t(this.#t)),gn.enqueue(()=>{var i=this.#y();this.#i=this.#p(()=>(gn.ensure(),Mt(()=>this.#u(i)))),this.#v>0?this.#m():(jr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#y(){var t=this.#t;return this.#e&&(this.#c=On(),this.#t.before(this.#c),t=this.#c),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var i=Ne,o=Pe,u=ot;an(this.#a),Kt(this.#a),Vr(this.#a.ctx);try{return t()}catch(c){return _l(c),null}finally{an(i),Kt(o),Vr(u)}}#m(){const t=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Bl(this.#i,this.#l)),this.#o===null&&(this.#o=Mt(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#v+=t,this.#v===0&&(this.#e=!1,this.#o&&jr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(t){this.#g(t),this.#f+=t,this.#d&&qr(this.#d,this.#f)}get_effect_pending(){return this.#_(),y(this.#d)}error(t){var i=this.#n.onerror;let o=this.#n.failed;if(this.#h||!i&&!o)throw t;this.#i&&(mt(this.#i),this.#i=null),this.#o&&(mt(this.#o),this.#o=null),this.#s&&(mt(this.#s),this.#s=null);var u=!1,c=!1;const d=()=>{if(u){yd();return}u=!0,c&&rd(),gn.ensure(),this.#f=0,this.#s!==null&&jr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#h=!1,Mt(()=>this.#u(this.#t)))),this.#v>0?this.#m():this.#e=!1};var p=Pe;try{Kt(null),c=!0,i?.(t,d),c=!1}catch(h){Gr(h,this.#a&&this.#a.parent)}finally{Kt(p)}o&&Ir(()=>{this.#s=this.#p(()=>{gn.ensure(),this.#h=!0;try{return Mt(()=>{o(this.#t,()=>t,()=>d)})}catch(h){return Gr(h,this.#a.parent),null}finally{this.#h=!1}})})}}function ga(e,t){return t}function Od(e,t,i){for(var o=[],u=t.length,c=0;c<u;c++)Ns(t[c].e,o,!0);Kl(o,()=>{var d=o.length===0&&i!==null;if(d){var p=i,h=p.parentNode;Vd(h),h.append(p),e.items.clear(),dn(e,t[0].prev,t[u-1].next)}for(var b=0;b<u;b++){var w=t[b];d||(e.items.delete(w.k),dn(e,w.prev,w.next)),mt(w.e,!d)}e.first===t[0]&&(e.first=t[0].prev)})}function Br(e,t,i,o,u,c=null){var d=e,p=new Map,h=null,b=(t&vl)!==0,w=(t&fl)!==0,T=(t&dl)!==0;if(b){var _=e;d=_.appendChild(On())}var E=null,O=Cs(()=>{var M=i();return xs(M)?M:M==null?[]:Ts(M)}),L,D=!0;function A(){Cd(F,L,d,t,o),E!==null&&(L.length===0?(E.fragment?(d.before(E.fragment),E.fragment=null):Ks(E.effect),H.first=E.effect):jr(E.effect,()=>{E=null}))}var H=Ms(()=>{L=y(O);for(var M=L.length,W=new Set,J=Fe,oe=null,re=Cl(),se=0;se<M;se+=1){var de=L[se],ie=o(de,se),ge=D?null:p.get(ie);ge?(w&&qr(ge.v,de),T?qr(ge.i,se):ge.i=se,re&&J.skipped_effects.delete(ge.e)):(ge=Ld(D?d:null,oe,de,ie,se,u,t,i),D&&(ge.o=!0,oe===null?h=ge:oe.next=ge,oe=ge),p.set(ie,ge)),W.add(ie)}if(M===0&&c&&!E)if(D)E={fragment:null,effect:Mt(()=>c(d))};else{var je=document.createDocumentFragment(),Ke=On();je.append(Ke),E={fragment:je,effect:Mt(()=>c(Ke))}}if(!D)if(re){for(const[Ze,it]of p)W.has(Ze)||J.skipped_effects.add(it.e);J.oncommit(A),J.ondiscard(()=>{})}else A();y(O)}),F={effect:H,items:p,first:h};D=!1}function Cd(e,t,i,o,u){var c=(o&id)!==0,d=t.length,p=e.items,h=e.first,b,w=null,T,_=[],E=[],O,L,D,A;if(c)for(A=0;A<d;A+=1)O=t[A],L=u(O,A),D=p.get(L),D.o&&(D.a?.measure(),(T??=new Set).add(D));for(A=0;A<d;A+=1){if(O=t[A],L=u(O,A),D=p.get(L),e.first??=D,!D.o){D.o=!0;var H=w?w.next:h;dn(e,w,D),dn(e,D,H),Wo(D,H,i),w=D,_=[],E=[],h=w.next;continue}if((D.e.f&Wt)!==0&&(Ks(D.e),c&&(D.a?.unfix(),(T??=new Set).delete(D))),D!==h){if(b!==void 0&&b.has(D)){if(_.length<E.length){var F=E[0],M;w=F.prev;var W=_[0],J=_[_.length-1];for(M=0;M<_.length;M+=1)Wo(_[M],F,i);for(M=0;M<E.length;M+=1)b.delete(E[M]);dn(e,W.prev,J.next),dn(e,w,W),dn(e,J,F),h=F,w=J,A-=1,_=[],E=[]}else b.delete(D),Wo(D,h,i),dn(e,D.prev,D.next),dn(e,D,w===null?e.first:w.next),dn(e,w,D),w=D;continue}for(_=[],E=[];h!==null&&h.k!==L;)(h.e.f&Wt)===0&&(b??=new Set).add(h),E.push(h),h=h.next;if(h===null)continue;D=h}_.push(D),w=D,h=D.next}if(h!==null||b!==void 0){for(var oe=b===void 0?[]:Ts(b);h!==null;)(h.e.f&Wt)===0&&oe.push(h),h=h.next;var re=oe.length;if(re>0){var se=(o&vl)!==0&&d===0?i:null;if(c){for(A=0;A<re;A+=1)oe[A].a?.measure();for(A=0;A<re;A+=1)oe[A].a?.fix()}Od(e,oe,se)}}c&&Ir(()=>{if(T!==void 0)for(D of T)D.a?.apply()})}function Ld(e,t,i,o,u,c,d,p){var h=(d&fl)!==0,b=(d&ad)===0,w=h?b?Al(i,!1,!1):kr(i):i,T=(d&dl)===0?u:kr(u);ae&&h&&(w.trace=()=>{var O=typeof T=="number"?u:T.v;p()[O]});var _={i:T,v:w,k:o,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var E=document.createDocumentFragment();E.append(e=On())}return _.e=Mt(()=>c(e,w,T,p)),t!==null&&(t.next=_),_}finally{}}function Wo(e,t,i){for(var o=e.next?e.next.e.nodes_start:i,u=t?t.e.nodes_start:i,c=e.e.nodes_start;c!==null&&c!==o;){var d=Pi(c);u.before(c),c=d}}function dn(e,t,i){t===null?(e.first=i,e.effect.first=i&&i.e):(t.e===e.effect.last&&i!==null&&(e.effect.last=i.e),t.e.next&&(t.e.next.prev=null),t.next=i,t.e.next=i&&i.e),i===null?e.effect.last=t&&t.e:(i.e===e.effect.last&&t===null&&(e.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=t,i.e.prev=t&&t.e)}function Tl(e,t,i,o){const u=Li()?Ga:Cs;if(i.length===0&&e.length===0){o(t.map(u));return}var c=Fe,d=Ne,p=Pd();function h(){Promise.all(i.map(b=>Md(b))).then(b=>{p();try{o([...t.map(u),...b])}catch(w){(d.f&In)===0&&Gr(w,d)}c?.deactivate(),ka()}).catch(b=>{Gr(b,d)})}e.length>0?Promise.all(e).then(()=>{p();try{return h()}finally{c?.deactivate(),ka()}}):h()}function Pd(){var e=Ne,t=Pe,i=ot,o=Fe;if(ae)var u=Wr;return function(d=!0){an(e),Kt(t),Vr(i),d&&o?.activate(),ae&&Ta(u)}}function ka(){an(null),Kt(null),Vr(null),ae&&Ta(null)}const Rd=new Set;function Ga(e){var t=yt|Bt,i=Pe!==null&&(Pe.f&yt)!==0?Pe:null;return Ne!==null&&(Ne.f|=Jr),{ctx:ot,deps:null,effects:null,equals:hl,f:t,fn:e,reactions:null,rv:0,v:vt,wv:0,parent:i??Ne,ac:null}}function Md(e,t){let i=Ne;i===null&&Wf();var o=i.b,u=void 0,c=kr(vt),d=!Pe,p=new Map;return Xd(()=>{var h=sl();u=h.promise;try{Promise.resolve(e()).then(h.resolve,h.reject).then(()=>{b===Fe&&b.committed&&b.deactivate(),ka()})}catch(_){h.reject(_),ka()}var b=Fe;if(d){var w=!o.is_pending();o.update_pending_count(1),b.increment(w),p.get(b)?.reject(Kr),p.delete(b),p.set(b,h)}const T=(_,E=void 0)=>{if(b.activate(),E)E!==Kr&&(c.f|=Zn,qr(c,E));else{(c.f&Zn)!==0&&(c.f^=Zn),qr(c,_);for(const[O,L]of p){if(p.delete(O),O===b)break;L.reject(Kr)}}d&&(o.update_pending_count(-1),b.decrement(w))};h.promise.then(T,_=>T(null,_||"unknown"))}),qa(()=>{for(const h of p.values())h.reject(Kr)}),ae&&(c.f|=Va),new Promise(h=>{function b(w){function T(){w===u?h(c):b(u)}w.then(T,T)}b(u)})}function et(e){const t=Ga(e);return jl(t),t}function Cs(e){const t=Ga(e);return t.equals=ml,t}function as(e){var t=e.effects;if(t!==null){e.effects=null;for(var i=0;i<t.length;i+=1)mt(t[i])}}let Go=[];function Nd(e){for(var t=e.parent;t!==null;){if((t.f&yt)===0)return(t.f&In)===0?t:null;t=t.parent}return null}function Ls(e){var t,i=Ne;if(an(Nd(e)),ae){let o=Yr;Ou(new Set);try{Go.includes(e)&&Gf(),Go.push(e),e.f&=~tr,as(e),t=os(e)}finally{an(i),Ou(o),Go.pop()}}else try{e.f&=~tr,as(e),t=os(e)}finally{an(i)}return t}function kl(e){var t=Ls(e);if(e.equals(t)||(Fe?.is_fork||(e.v=t),e.wv=Hl()),!Dr)if(Xt!==null)(xi()||Fe?.is_fork)&&Xt.set(e,t);else{var i=(e.f&on)===0?Pn:kt;At(e,i)}}let Yr=new Set;const Qn=new Map;function Ou(e){Yr=e}let Ps=!1;function Kd(){Ps=!0}function kr(e,t){var i={f:0,v:e,reactions:null,equals:hl,rv:0,wv:0};return i}function me(e,t){const i=kr(e);return jl(i),i}function Al(e,t=!1,i=!0){const o=kr(e);return t||(o.equals=ml),Oi&&i&&ot!==null&&ot.l!==null&&(ot.l.s??=[]).push(o),o}function N(e,t,i=!1){Pe!==null&&(!_n||(Pe.f&xa)!==0)&&Li()&&(Pe.f&(yt|Cn|Va|xa))!==0&&!Sn?.includes(e)&&nd();let o=i?Jt(t):t;return ae&&yl(o,e.label),qr(e,o)}function qr(e,t){if(!e.equals(t)){var i=e.v;Dr?Qn.set(e,t):Qn.set(e,i),e.v=t;var o=gn.ensure();if(o.capture(e,i),ae){if(Ne!==null){e.updated??=new Map;const u=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:u}),u>5){const c=bd("updated at");if(c!==null){let d=e.updated.get(c.stack);d||(d={error:c,count:0},e.updated.set(c.stack,d)),d.count++}}}Ne!==null&&(e.set_during_effect=!0)}(e.f&yt)!==0&&((e.f&Bt)!==0&&Ls(e),At(e,(e.f&on)!==0?kt:Pn)),e.wv=Hl(),Dl(e,Bt),Li()&&Ne!==null&&(Ne.f&kt)!==0&&(Ne.f&(Ln|Ar))===0&&(qt===null?ev([e]):qt.push(e)),!o.is_fork&&Yr.size>0&&!Ps&&Il()}return t}function Il(){Ps=!1;var e=Xn;Ia(!0);const t=Array.from(Yr);try{for(const i of t)(i.f&kt)!==0&&At(i,Pn),Ri(i)&&ki(i)}finally{Ia(e)}Yr.clear()}function bi(e){N(e,e.v+1)}function Dl(e,t){var i=e.reactions;if(i!==null)for(var o=Li(),u=i.length,c=0;c<u;c++){var d=i[c],p=d.f;if(!(!o&&d===Ne)){if(ae&&(p&xa)!==0){Yr.add(d);continue}var h=(p&Bt)===0;if(h&&At(d,t),(p&yt)!==0){var b=d;Xt?.delete(b),(p&tr)===0&&(p&on&&(d.f|=tr),Dl(b,Pn))}else h&&((p&Cn)!==0&&kn!==null&&kn.add(d),Tr(d))}}}const Fd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Jt(e){if(typeof e!="object"||e===null||Dn in e)return e;const t=ks(e);if(t!==Bf&&t!==jf)return e;var i=new Map,o=xs(e),u=me(0),c=Er,d=w=>{if(Er===c)return w();var T=Pe,_=Er;Kt(null),Ru(c);var E=w();return Kt(T),Ru(_),E};o&&(i.set("length",me(e.length)),ae&&(e=zd(e)));var p="";let h=!1;function b(w){if(!h){h=!0,p=w,fn(u,`${p} version`);for(const[T,_]of i)fn(_,pr(p,T));h=!1}}return new Proxy(e,{defineProperty(w,T,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&ed();var E=i.get(T);return E===void 0?E=d(()=>{var O=me(_.value);return i.set(T,O),ae&&typeof T=="string"&&fn(O,pr(p,T)),O}):N(E,_.value,!0),!0},deleteProperty(w,T){var _=i.get(T);if(_===void 0){if(T in w){const E=d(()=>me(vt));i.set(T,E),bi(u),ae&&fn(E,pr(p,T))}}else N(_,vt),bi(u);return!0},get(w,T,_){if(T===Dn)return e;if(ae&&T===cl)return b;var E=i.get(T),O=T in w;if(E===void 0&&(!O||wr(w,T)?.writable)&&(E=d(()=>{var D=Jt(O?w[T]:vt),A=me(D);return ae&&fn(A,pr(p,T)),A}),i.set(T,E)),E!==void 0){var L=y(E);return L===vt?void 0:L}return Reflect.get(w,T,_)},getOwnPropertyDescriptor(w,T){var _=Reflect.getOwnPropertyDescriptor(w,T);if(_&&"value"in _){var E=i.get(T);E&&(_.value=y(E))}else if(_===void 0){var O=i.get(T),L=O?.v;if(O!==void 0&&L!==vt)return{enumerable:!0,configurable:!0,value:L,writable:!0}}return _},has(w,T){if(T===Dn)return!0;var _=i.get(T),E=_!==void 0&&_.v!==vt||Reflect.has(w,T);if(_!==void 0||Ne!==null&&(!E||wr(w,T)?.writable)){_===void 0&&(_=d(()=>{var L=E?Jt(w[T]):vt,D=me(L);return ae&&fn(D,pr(p,T)),D}),i.set(T,_));var O=y(_);if(O===vt)return!1}return E},set(w,T,_,E){var O=i.get(T),L=T in w;if(o&&T==="length")for(var D=_;D<O.v;D+=1){var A=i.get(D+"");A!==void 0?N(A,vt):D in w&&(A=d(()=>me(vt)),i.set(D+"",A),ae&&fn(A,pr(p,D)))}if(O===void 0)(!L||wr(w,T)?.writable)&&(O=d(()=>me(void 0)),ae&&fn(O,pr(p,T)),N(O,Jt(_)),i.set(T,O));else{L=O.v!==vt;var H=d(()=>Jt(_));N(O,H)}var F=Reflect.getOwnPropertyDescriptor(w,T);if(F?.set&&F.set.call(E,_),!L){if(o&&typeof T=="string"){var M=i.get("length"),W=Number(T);Number.isInteger(W)&&W>=M.v&&N(M,W+1)}bi(u)}return!0},ownKeys(w){y(u);var T=Reflect.ownKeys(w).filter(O=>{var L=i.get(O);return L===void 0||L.v!==vt});for(var[_,E]of i)E.v!==vt&&!(_ in w)&&T.push(_);return T},setPrototypeOf(){td()}})}function pr(e,t){return typeof t=="symbol"?`${e}[Symbol(${t.description??""})]`:Fd.test(t)?`${e}.${t}`:/^\d+$/.test(t)?`${e}[${t}]`:`${e}['${t}']`}function wi(e){try{if(e!==null&&typeof e=="object"&&Dn in e)return e[Dn]}catch{}return e}function Bd(e,t){return Object.is(wi(e),wi(t))}const jd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function zd(e){return new Proxy(e,{get(t,i,o){var u=Reflect.get(t,i,o);return jd.has(i)?function(...c){Kd();var d=u.apply(this,c);return Il(),d}:u}})}function Hd(){const e=Array.prototype,t=Array.__svelte_cleanup;t&&t();const{indexOf:i,lastIndexOf:o,includes:u}=e;e.indexOf=function(c,d){const p=i.call(this,c,d);if(p===-1){for(let h=d??0;h<this.length;h+=1)if(wi(this[h])===c){Vo("array.indexOf(...)");break}}return p},e.lastIndexOf=function(c,d){const p=o.call(this,c,d??this.length-1);if(p===-1){for(let h=0;h<=(d??this.length-1);h+=1)if(wi(this[h])===c){Vo("array.lastIndexOf(...)");break}}return p},e.includes=function(c,d){const p=u.call(this,c,d);if(!p){for(let h=0;h<this.length;h+=1)if(wi(this[h])===c){Vo("array.includes(...)");break}}return p},Array.__svelte_cleanup=()=>{e.indexOf=i,e.lastIndexOf=o,e.includes=u}}var Cu,Rs,Sl,Ol;function Ud(){if(Cu===void 0){Cu=window,Rs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,i=Text.prototype;Sl=wr(t,"firstChild").get,Ol=wr(t,"nextSibling").get,Au(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Au(i)&&(i.__t=void 0),ae&&(e.__svelte_meta=null,Hd())}}function On(e=""){return document.createTextNode(e)}function Aa(e){return Sl.call(e)}function Pi(e){return Ol.call(e)}function _e(e,t){return Aa(e)}function xt(e,t=!1){{var i=Aa(e);return i instanceof Comment&&i.data===""?Pi(i):i}}function Me(e,t=1,i=!1){let o=e;for(;t--;)o=Pi(o);return o}function Vd(e){e.textContent=""}function Cl(){return!1}function Wd(e,t){if(t){const i=document.body;e.autofocus=!0,Ir(()=>{document.activeElement===i&&e.focus()})}}let Lu=!1;function Gd(){Lu||(Lu=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Ya(e){var t=Pe,i=Ne;Kt(null),an(null);try{return e()}finally{Kt(t),an(i)}}function Yd(e,t,i,o=i){e.addEventListener(t,()=>Ya(i));const u=e.__on_r;u?e.__on_r=()=>{u(),o(!0)}:e.__on_r=()=>o(!0),Gd()}function qd(e){Ne===null&&(Pe===null&&Zf(e),qf()),Dr&&Yf(e)}function Zd(e,t){var i=t.last;i===null?t.last=t.first=e:(i.next=e,e.prev=i,t.last=e)}function bn(e,t,i){var o=Ne;if(ae)for(;o!==null&&(o.f&xa)!==0;)o=o.parent;o!==null&&(o.f&Wt)!==0&&(e|=Wt);var u={ctx:ot,deps:null,nodes_start:null,nodes_end:null,f:e|Bt|on,first:null,fn:t,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(ae&&(u.component_function=Ci),i)try{ki(u),u.f|=Ds}catch(p){throw mt(u),p}else t!==null&&Tr(u);var c=u;if(i&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&Jr)===0&&(c=c.first,(e&Cn)!==0&&(e&Ur)!==0&&c!==null&&(c.f|=Ur)),c!==null&&(c.parent=o,o!==null&&Zd(c,o),Pe!==null&&(Pe.f&yt)!==0&&(e&Ar)===0)){var d=Pe;(d.effects??=[]).push(c)}return u}function xi(){return Pe!==null&&!_n}function qa(e){const t=bn(Is,null,!1);return At(t,kt),t.teardown=e,t}function Ge(e){qd("$effect"),ae&&er(e,"name",{value:"$effect"});var t=Ne.f,i=!Pe&&(t&Ln)!==0&&(t&Ds)===0;if(i){var o=ot;(o.e??=[]).push(e)}else return Ll(e)}function Ll(e){return bn(As|Hf,e,!1)}function Qd(e){gn.ensure();const t=bn(Ar|Jr,e,!0);return(i={})=>new Promise(o=>{i.outro?jr(t,()=>{mt(t),o(void 0)}):(mt(t),o(void 0))})}function Za(e){return bn(As,e,!1)}function Xd(e){return bn(Va|Jr,e,!0)}function Qa(e,t=0){return bn(Is|t,e,!0)}function lt(e,t=[],i=[],o=[]){Tl(o,t,i,u=>{bn(Is,()=>e(...u.map(y)),!0)})}function Ms(e,t=0){var i=bn(Cn|t,e,!0);return ae&&(i.dev_stack=Wr),i}function Pl(e,t=0){var i=bn(ul|t,e,!0);return ae&&(i.dev_stack=Wr),i}function Mt(e){return bn(Ln|Jr,e,!0)}function Rl(e){var t=e.teardown;if(t!==null){const i=Dr,o=Pe;Pu(!0),Kt(null);try{t.call(null)}finally{Pu(i),Kt(o)}}}function Ml(e,t=!1){var i=e.first;for(e.first=e.last=null;i!==null;){const u=i.ac;u!==null&&Ya(()=>{u.abort(Kr)});var o=i.next;(i.f&Ar)!==0?i.parent=null:mt(i,t),i=o}}function Jd(e){for(var t=e.first;t!==null;){var i=t.next;(t.f&Ln)===0&&mt(t),t=i}}function mt(e,t=!0){var i=!1;(t||(e.f&ll)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&($d(e.nodes_start,e.nodes_end),i=!0),Ml(e,t&&!i),Da(e,0),At(e,In);var o=e.transitions;if(o!==null)for(const c of o)c.stop();Rl(e);var u=e.parent;u!==null&&u.first!==null&&Nl(e),ae&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function $d(e,t){for(;e!==null;){var i=e===t?null:Pi(e);e.remove(),e=i}}function Nl(e){var t=e.parent,i=e.prev,o=e.next;i!==null&&(i.next=o),o!==null&&(o.prev=i),t!==null&&(t.first===e&&(t.first=o),t.last===e&&(t.last=i))}function jr(e,t,i=!0){var o=[];Ns(e,o,!0),Kl(o,()=>{i&&mt(e),t&&t()})}function Kl(e,t){var i=e.length;if(i>0){var o=()=>--i||t();for(var u of e)u.out(o)}else t()}function Ns(e,t,i){if((e.f&Wt)===0){if(e.f^=Wt,e.transitions!==null)for(const d of e.transitions)(d.is_global||i)&&t.push(d);for(var o=e.first;o!==null;){var u=o.next,c=(o.f&Ur)!==0||(o.f&Ln)!==0&&(e.f&Cn)!==0;Ns(o,t,c?i:!1),o=u}}}function Ks(e){Fl(e,!0)}function Fl(e,t){if((e.f&Wt)!==0){e.f^=Wt,(e.f&kt)===0&&(At(e,Bt),Tr(e));for(var i=e.first;i!==null;){var o=i.next,u=(i.f&Ur)!==0||(i.f&Ln)!==0;Fl(i,u?t:!1),i=o}if(e.transitions!==null)for(const c of e.transitions)(c.is_global||t)&&c.in()}}function Bl(e,t){for(var i=e.nodes_start,o=e.nodes_end;i!==null;){var u=i===o?null:Pi(i);t.append(i),i=u}}let Xn=!1;function Ia(e){Xn=e}let Dr=!1;function Pu(e){Dr=e}let Pe=null,_n=!1;function Kt(e){Pe=e}let Ne=null;function an(e){Ne=e}let Sn=null;function jl(e){Pe!==null&&(Sn===null?Sn=[e]:Sn.push(e))}let St=null,Ut=0,qt=null;function ev(e){qt=e}let zl=1,Ti=0,Er=Ti;function Ru(e){Er=e}function Hl(){return++zl}function Ri(e){var t=e.f;if((t&Bt)!==0)return!0;if(t&yt&&(e.f&=~tr),(t&Pn)!==0){var i=e.deps;if(i!==null)for(var o=i.length,u=0;u<o;u++){var c=i[u];if(Ri(c)&&kl(c),c.wv>e.wv)return!0}(t&on)!==0&&Xt===null&&At(e,kt)}return!1}function Ul(e,t,i=!0){var o=e.reactions;if(o!==null&&!Sn?.includes(e))for(var u=0;u<o.length;u++){var c=o[u];(c.f&yt)!==0?Ul(c,t,!1):t===c&&(i?At(c,Bt):(c.f&kt)!==0&&At(c,Pn),Tr(c))}}function os(e){var t=St,i=Ut,o=qt,u=Pe,c=Sn,d=ot,p=_n,h=Er,b=e.f;St=null,Ut=0,qt=null,Pe=(b&(Ln|Ar))===0?e:null,Sn=null,Vr(e.ctx),_n=!1,Er=++Ti,e.ac!==null&&(Ya(()=>{e.ac.abort(Kr)}),e.ac=null);try{e.f|=ns;var w=e.fn,T=w(),_=e.deps;if(St!==null){var E;if(Da(e,Ut),_!==null&&Ut>0)for(_.length=Ut+St.length,E=0;E<St.length;E++)_[Ut+E]=St[E];else e.deps=_=St;if(Xn&&xi()&&(e.f&on)!==0)for(E=Ut;E<_.length;E++)(_[E].reactions??=[]).push(e)}else _!==null&&Ut<_.length&&(Da(e,Ut),_.length=Ut);if(Li()&&qt!==null&&!_n&&_!==null&&(e.f&(yt|Pn|Bt))===0)for(E=0;E<qt.length;E++)Ul(qt[E],e);return u!==null&&u!==e&&(Ti++,qt!==null&&(o===null?o=qt:o.push(...qt))),(e.f&Zn)!==0&&(e.f^=Zn),T}catch(O){return _l(O)}finally{e.f^=ns,St=t,Ut=i,qt=o,Pe=u,Sn=c,Vr(d),_n=p,Er=h}}function tv(e,t){let i=t.reactions;if(i!==null){var o=Ff.call(i,e);if(o!==-1){var u=i.length-1;u===0?i=t.reactions=null:(i[o]=i[u],i.pop())}}i===null&&(t.f&yt)!==0&&(St===null||!St.includes(t))&&(At(t,Pn),(t.f&on)!==0&&(t.f^=on,t.f&=~tr),as(t),Da(t,0))}function Da(e,t){var i=e.deps;if(i!==null)for(var o=t;o<i.length;o++)tv(e,i[o])}function ki(e){var t=e.f;if((t&In)===0){At(e,kt);var i=Ne,o=Xn;if(Ne=e,Xn=!0,ae){var u=Ci;Du(e.component_function);var c=Wr;Ta(e.dev_stack??Wr)}try{(t&(Cn|ul))!==0?Jd(e):Ml(e),Rl(e);var d=os(e);e.teardown=typeof d=="function"?d:null,e.wv=zl;var p;ae&&gd&&(e.f&Bt)!==0&&e.deps}finally{Xn=o,Ne=i,ae&&(Du(u),Ta(c))}}}async function An(){await Promise.resolve(),Td()}function y(e){var t=e.f,i=(t&yt)!==0;if(Pe!==null&&!_n){var o=Ne!==null&&(Ne.f&In)!==0;if(!o&&!Sn?.includes(e)){var u=Pe.deps;if((Pe.f&ns)!==0)e.rv<Ti&&(e.rv=Ti,St===null&&u!==null&&u[Ut]===e?Ut++:St===null?St=[e]:St.includes(e)||St.push(e));else{(Pe.deps??=[]).push(e);var c=e.reactions;c===null?e.reactions=[Pe]:c.includes(Pe)||c.push(Pe)}}}if(ae&&Rd.delete(e),Dr){if(Qn.has(e))return Qn.get(e);if(i){var d=e,p=d.v;return((d.f&kt)===0&&d.reactions!==null||Wl(d))&&(p=Ls(d)),Qn.set(d,p),p}}else i&&(!Xt?.has(e)||Fe?.is_fork&&!xi())&&(d=e,Ri(d)&&kl(d),Xn&&xi()&&(d.f&on)===0&&Vl(d));if(Xt?.has(e))return Xt.get(e);if((e.f&Zn)!==0)throw e.v;return e.v}function Vl(e){if(e.deps!==null){e.f^=on;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&yt)!==0&&(t.f&on)===0&&Vl(t)}}function Wl(e){if(e.v===vt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Qn.has(t)||(t.f&yt)!==0&&Wl(t))return!0;return!1}function $r(e){var t=_n;try{return _n=!0,e()}finally{_n=t}}const nv=-7169;function At(e,t){e.f=e.f&nv|t}function rv(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Dn in e)ss(e);else if(!Array.isArray(e))for(let t in e){const i=e[t];typeof i=="object"&&i&&Dn in i&&ss(i)}}}function ss(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let o in e)try{ss(e[o],t)}catch{}const i=ks(e);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const o=ol(i);for(let u in o){const c=o[u].get;if(c)try{c.call(e)}catch{}}}}}function iv(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const av=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ov(e){return av.includes(e)}const sv={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function uv(e){return e=e.toLowerCase(),sv[e]??e}const lv=["touchstart","touchmove"];function cv(e){return lv.includes(e)}const Gl=new Set,us=new Set;function Yl(e,t,i,o={}){function u(c){if(o.capture||yi.call(t,c),!c.cancelBubble)return Ya(()=>i?.call(this,c))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ir(()=>{t.addEventListener(e,u,o)}):t.addEventListener(e,u,o),u}function _r(e,t,i,o,u){var c={capture:o,passive:u},d=Yl(e,t,i,c);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&qa(()=>{t.removeEventListener(e,d,c)})}function ei(e){for(var t=0;t<e.length;t++)Gl.add(e[t]);for(var i of us)i(e)}let Mu=null;function yi(e){var t=this,i=t.ownerDocument,o=e.type,u=e.composedPath?.()||[],c=u[0]||e.target;Mu=e;var d=0,p=Mu===e&&e.__root;if(p){var h=u.indexOf(p);if(h!==-1&&(t===document||t===window)){e.__root=t;return}var b=u.indexOf(t);if(b===-1)return;h<=b&&(d=h)}if(c=u[d]||e.target,c!==t){er(e,"currentTarget",{configurable:!0,get(){return c||i}});var w=Pe,T=Ne;Kt(null),an(null);try{for(var _,E=[];c!==null;){var O=c.assignedSlot||c.parentNode||c.host||null;try{var L=c["__"+o];L!=null&&(!c.disabled||e.target===c)&&L.call(c,e)}catch(D){_?E.push(D):_=D}if(e.cancelBubble||O===t||O===null)break;c=O}if(_){for(let D of E)queueMicrotask(()=>{throw D});throw _}}finally{e.__root=t,delete e.currentTarget,Kt(w),an(T)}}}function fv(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Sa(e,t){var i=Ne;i.nodes_start===null&&(i.nodes_start=e,i.nodes_end=t)}function Te(e,t){var i=(t&fd)!==0,o=(t&dd)!==0,u,c=!e.startsWith("<!>");return()=>{u===void 0&&(u=fv(c?e:"<!>"+e),i||(u=Aa(u)));var d=o||Rs?document.importNode(u,!0):u.cloneNode(!0);if(i){var p=Aa(d),h=d.lastChild;Sa(p,h)}else Sa(d,d);return d}}function pn(e=""){{var t=On(e+"");return Sa(t,t),t}}function Jn(){var e=document.createDocumentFragment(),t=document.createComment(""),i=On();return e.append(t,i),Sa(t,i),e}function fe(e,t){e!==null&&e.before(t)}function br(e,t){var i=t==null?"":typeof t=="object"?t+"":t;i!==(e.__t??=e.nodeValue)&&(e.__t=i,e.nodeValue=i+"")}function dv(e,t){return vv(e,t)}const Nr=new Map;function vv(e,{target:t,anchor:i,props:o={},events:u,context:c,intro:d=!0}){Ud();var p=new Set,h=T=>{for(var _=0;_<T.length;_++){var E=T[_];if(!p.has(E)){p.add(E);var O=cv(E);t.addEventListener(E,yi,{passive:O});var L=Nr.get(E);L===void 0?(document.addEventListener(E,yi,{passive:O}),Nr.set(E,1)):Nr.set(E,L+1)}}};h(Ts(Gl)),us.add(h);var b=void 0,w=Qd(()=>{var T=i??t.appendChild(On());return Dd(T,{pending:()=>{}},_=>{if(c){ir({});var E=ot;E.c=c}u&&(o.$$events=u),b=e(_,o)||{},c&&ar()}),()=>{for(var _ of p){t.removeEventListener(_,yi);var E=Nr.get(_);--E===0?(document.removeEventListener(_,yi),Nr.delete(_)):Nr.set(_,E)}us.delete(h),T!==i&&T.parentNode?.removeChild(T)}});return hv.set(b,w),b}let hv=new WeakMap;class pv{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(t,i=!0){this.anchor=t,this.#u=i}#a=()=>{var t=Fe;if(this.#e.has(t)){var i=this.#e.get(t),o=this.#t.get(i);if(o)Ks(o),this.#n.delete(i);else{var u=this.#r.get(i);u&&(this.#t.set(i,u.effect),this.#r.delete(i),u.fragment.lastChild.remove(),this.anchor.before(u.fragment),o=u.effect)}for(const[c,d]of this.#e){if(this.#e.delete(c),c===t)break;const p=this.#r.get(d);p&&(mt(p.effect),this.#r.delete(d))}for(const[c,d]of this.#t){if(c===i||this.#n.has(c))continue;const p=()=>{if(Array.from(this.#e.values()).includes(c)){var b=document.createDocumentFragment();Bl(d,b),b.append(On()),this.#r.set(c,{effect:d,fragment:b})}else mt(d);this.#n.delete(c),this.#t.delete(c)};this.#u||!o?(this.#n.add(c),jr(d,p,!1)):p()}}};#i=t=>{this.#e.delete(t);const i=Array.from(this.#e.values());for(const[o,u]of this.#r)i.includes(o)||(mt(u.effect),this.#r.delete(o))};ensure(t,i){var o=Fe,u=Cl();if(i&&!this.#t.has(t)&&!this.#r.has(t))if(u){var c=document.createDocumentFragment(),d=On();c.append(d),this.#r.set(t,{effect:Mt(()=>i(d)),fragment:c})}else this.#t.set(t,Mt(()=>i(this.anchor)));if(this.#e.set(o,t),u){for(const[p,h]of this.#t)p===t?o.skipped_effects.delete(h):o.skipped_effects.add(h);for(const[p,h]of this.#r)p===t?o.skipped_effects.delete(h.effect):o.skipped_effects.add(h.effect);o.oncommit(this.#a),o.ondiscard(this.#i)}else this.#a()}}function tt(e,t,i=!1){var o=new pv(e),u=i?Ur:0;function c(d,p){o.ensure(d,p)}Ms(()=>{var d=!1;t((p,h=!0)=>{d=!0,c(h,p)}),d||c(!1,null)},u)}function mv(e,t,i,o,u){var c=t.$$slots?.[i],d=!1;c===!0&&(c=t.children,d=!0),c===void 0||c(e,d?()=>o:o)}function ql(e,t,i){Za(()=>{var o=$r(()=>t(e,i?.())||{});if(i&&o?.update){var u=!1,c={};Qa(()=>{var d=i();rv(d),u&&pl(c,d)&&(c=d,o.update(d))}),u=!0}if(o?.destroy)return()=>o.destroy()})}function yv(e,t){var i=void 0,o;Pl(()=>{i!==(i=t())&&(o&&(mt(o),o=null),i&&(o=Mt(()=>{Za(()=>i(e))})))})}function Zl(e){var t,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(i=Zl(e[t]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}function gv(){for(var e,t,i=0,o="",u=arguments.length;i<u;i++)(e=arguments[i])&&(t=Zl(e))&&(o&&(o+=" "),o+=t);return o}function Ql(e){return typeof e=="object"?gv(e):e??""}const Nu=[...` 	
\r\fÂ \v\uFEFF`];function _v(e,t,i){var o=e==null?"":""+e;if(t&&(o=o?o+" "+t:t),i){for(var u in i)if(i[u])o=o?o+" "+u:u;else if(o.length)for(var c=u.length,d=0;(d=o.indexOf(u,d))>=0;){var p=d+c;(d===0||Nu.includes(o[d-1]))&&(p===o.length||Nu.includes(o[p]))?o=(d===0?"":o.substring(0,d))+o.substring(p+1):d=p}}return o===""?null:o}function Ku(e,t=!1){var i=t?" !important;":";",o="";for(var u in e){var c=e[u];c!=null&&c!==""&&(o+=" "+u+": "+c+i)}return o}function Yo(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function bv(e,t){if(t){var i="",o,u;if(Array.isArray(t)?(o=t[0],u=t[1]):o=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var c=!1,d=0,p=!1,h=[];o&&h.push(...Object.keys(o).map(Yo)),u&&h.push(...Object.keys(u).map(Yo));var b=0,w=-1;const L=e.length;for(var T=0;T<L;T++){var _=e[T];if(p?_==="/"&&e[T-1]==="*"&&(p=!1):c?c===_&&(c=!1):_==="/"&&e[T+1]==="*"?p=!0:_==='"'||_==="'"?c=_:_==="("?d++:_===")"&&d--,!p&&c===!1&&d===0){if(_===":"&&w===-1)w=T;else if(_===";"||T===L-1){if(w!==-1){var E=Yo(e.substring(b,w).trim());if(!h.includes(E)){_!==";"&&T++;var O=e.substring(b,T).trim();i+=" "+O+";"}}b=T+1,w=-1}}}}return o&&(i+=Ku(o)),u&&(i+=Ku(u,!0)),i=i.trim(),i===""?null:i}return e==null?null:String(e)}function Ai(e,t,i,o,u,c){var d=e.__className;if(d!==i||d===void 0){var p=_v(i,o,c);p==null?e.removeAttribute("class"):t?e.className=p:e.setAttribute("class",p),e.__className=i}else if(c&&u!==c)for(var h in c){var b=!!c[h];(u==null||b!==!!u[h])&&e.classList.toggle(h,b)}return c}function qo(e,t={},i,o){for(var u in i){var c=i[u];t[u]!==c&&(i[u]==null?e.style.removeProperty(u):e.style.setProperty(u,c,o))}}function nr(e,t,i,o){var u=e.__style;if(u!==t){var c=bv(t,o);c==null?e.removeAttribute("style"):e.style.cssText=c,e.__style=t}else o&&(Array.isArray(o)?(qo(e,i?.[0],o[0]),qo(e,i?.[1],o[1],"important")):qo(e,i,o));return o}function ls(e,t,i=!1){if(e.multiple){if(t==null)return;if(!xs(t))return md();for(var o of e.options)o.selected=t.includes(Fu(o));return}for(o of e.options){var u=Fu(o);if(Bd(u,t)){o.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function wv(e){var t=new MutationObserver(()=>{ls(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),qa(()=>{t.disconnect()})}function Fu(e){return"__value"in e?e.__value:e.value}const vi=Symbol("class"),hi=Symbol("style"),Xl=Symbol("is custom element"),Jl=Symbol("is html");function Ev(e,t){var i=Xa(e);i.value===(i.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function xv(e,t){var i=Xa(e);i.checked!==(i.checked=t??void 0)&&(e.checked=t)}function Tv(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Tt(e,t,i,o){var u=Xa(e);u[t]!==(u[t]=i)&&(t==="loading"&&(e[Vf]=i),i==null?e.removeAttribute(t):typeof i!="string"&&$l(e).includes(t)?e[t]=i:e.setAttribute(t,i))}function kv(e,t,i,o,u=!1,c=!1){var d=Xa(e),p=d[Xl],h=!d[Jl],b=t||{},w=e.tagName==="OPTION";for(var T in t)T in i||(i[T]=null);i.class?i.class=Ql(i.class):i[vi]&&(i.class=null),i[hi]&&(i.style??=null);var _=$l(e);for(const M in i){let W=i[M];if(w&&M==="value"&&W==null){e.value=e.__value="",b[M]=W;continue}if(M==="class"){var E=e.namespaceURI==="http://www.w3.org/1999/xhtml";Ai(e,E,W,o,t?.[vi],i[vi]),b[M]=W,b[vi]=i[vi];continue}if(M==="style"){nr(e,W,t?.[hi],i[hi]),b[M]=W,b[hi]=i[hi];continue}var O=b[M];if(!(W===O&&!(W===void 0&&e.hasAttribute(M)))){b[M]=W;var L=M[0]+M[1];if(L!=="$$")if(L==="on"){const J={},oe="$$"+M;let re=M.slice(2);var D=ov(re);if(iv(re)&&(re=re.slice(0,-7),J.capture=!0),!D&&O){if(W!=null)continue;e.removeEventListener(re,b[oe],J),b[oe]=null}if(W!=null)if(D)e[`__${re}`]=W,ei([re]);else{let se=function(de){b[M].call(this,de)};var F=se;b[oe]=Yl(re,e,se,J)}else D&&(e[`__${re}`]=void 0)}else if(M==="style")Tt(e,M,W);else if(M==="autofocus")Wd(e,!!W);else if(!p&&(M==="__value"||M==="value"&&W!=null))e.value=e.__value=W;else if(M==="selected"&&w)Tv(e,W);else{var A=M;h||(A=uv(A));var H=A==="defaultValue"||A==="defaultChecked";if(W==null&&!p&&!H)if(d[M]=null,A==="value"||A==="checked"){let J=e;const oe=t===void 0;if(A==="value"){let re=J.defaultValue;J.removeAttribute(A),J.defaultValue=re,J.value=J.__value=oe?re:null}else{let re=J.defaultChecked;J.removeAttribute(A),J.defaultChecked=re,J.checked=oe?re:!1}}else e.removeAttribute(M);else H||_.includes(A)&&(p||typeof W!="string")?(e[A]=W,A in d&&(d[A]=vt)):typeof W!="function"&&Tt(e,A,W)}}}return b}function Av(e,t,i=[],o=[],u=[],c,d=!1,p=!1){Tl(u,i,o,h=>{var b=void 0,w={},T=e.nodeName==="SELECT",_=!1;if(Pl(()=>{var O=t(...h.map(y)),L=kv(e,b,O,c,d,p);_&&T&&"value"in O&&ls(e,O.value);for(let A of Object.getOwnPropertySymbols(w))O[A]||mt(w[A]);for(let A of Object.getOwnPropertySymbols(O)){var D=O[A];A.description===pd&&(!b||D!==b[A])&&(w[A]&&mt(w[A]),w[A]=Mt(()=>yv(e,()=>D))),L[A]=D}b=L}),T){var E=e;Za(()=>{ls(E,b.value,!0),wv(E)})}_=!0})}function Xa(e){return e.__attributes??={[Xl]:e.nodeName.includes("-"),[Jl]:e.namespaceURI===hd}}var Bu=new Map;function $l(e){var t=e.getAttribute("is")||e.nodeName,i=Bu.get(t);if(i)return i;Bu.set(t,i=[]);for(var o,u=e,c=Element.prototype;c!==u;){o=ol(u);for(var d in o)o[d].set&&i.push(d);u=ks(u)}return i}function Fs(e,t,i=t){var o=new WeakSet;Yd(e,"input",async u=>{ae&&e.type==="checkbox"&&Iu();var c=u?e.defaultValue:e.value;if(c=Zo(e)?Qo(c):c,i(c),Fe!==null&&o.add(Fe),await An(),c!==(c=t())){var d=e.selectionStart,p=e.selectionEnd,h=e.value.length;if(e.value=c??"",p!==null){var b=e.value.length;d===p&&p===h&&b>h?(e.selectionStart=b,e.selectionEnd=b):(e.selectionStart=d,e.selectionEnd=Math.min(p,b))}}}),$r(t)==null&&e.value&&(i(Zo(e)?Qo(e.value):e.value),Fe!==null&&o.add(Fe)),Qa(()=>{ae&&e.type==="checkbox"&&Iu();var u=t();if(e===document.activeElement){var c=ya??Fe;if(o.has(c))return}Zo(e)&&u===Qo(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function Zo(e){var t=e.type;return t==="number"||t==="range"}function Qo(e){return e===""?null:+e}function ju(e,t){return e===t||e?.[Dn]===t}function Vt(e={},t,i,o){return Za(()=>{var u,c;return Qa(()=>{u=c,c=[],$r(()=>{e!==i(...c)&&(t(e,...c),u&&ju(i(...u),e)&&t(null,...u))})}),()=>{Ir(()=>{c&&ju(i(...c),e)&&t(null,...c)})}}),e}function ec(e,t,i){if(e==null)return t(void 0),Ea;const o=$r(()=>e.subscribe(t,i));return o.unsubscribe?()=>o.unsubscribe():o}function Iv(e){let t;return ec(e,i=>t=i)(),t}let va=!1,cs=Symbol();function Oa(e,t,i){const o=i[t]??={store:null,source:Al(void 0),unsubscribe:Ea};if(ae&&(o.source.label=t),o.store!==e&&!(cs in i))if(o.unsubscribe(),o.store=e??null,e==null)o.source.v=void 0,o.unsubscribe=Ea;else{var u=!0;o.unsubscribe=ec(e,c=>{u?o.source.v=c:N(o.source,c)}),u=!1}return e&&cs in i?Iv(e):y(o.source)}function Ca(e,t,i){let o=i[t];return o&&o.store!==e&&(o.unsubscribe(),o.unsubscribe=Ea),e}function Bs(){const e={};function t(){qa(()=>{for(var i in e)e[i].unsubscribe();er(e,cs,{enumerable:!1,value:!0})})}return[e,t]}function Dv(e){var t=va;try{return va=!1,[e(),va]}finally{va=t}}const Sv={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return ae&&Jf(`${e.name}.${String(t)}`),!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Ov(e,t,i){return new Proxy(ae?{props:e,exclude:t,name:i,other:{},to_proxy:[]}:{props:e,exclude:t},Sv)}function Ot(e,t,i,o){var u=!Oi||(i&sd)!==0,c=(i&ld)!==0,d=(i&cd)!==0,p=o,h=!0,b=()=>(h&&(h=!1,p=d?$r(o):o),p),w;if(c){var T=Dn in e||Uf in e;w=wr(e,t)?.set??(T&&t in e?F=>e[t]=F:void 0)}var _,E=!1;c?[_,E]=Dv(()=>e[t]):_=e[t],_===void 0&&o!==void 0&&(_=b(),w&&(u&&Xf(t),w(_)));var O;if(u?O=()=>{var F=e[t];return F===void 0?b():(h=!0,F)}:O=()=>{var F=e[t];return F!==void 0&&(p=void 0),F===void 0?p:F},u&&(i&ud)===0)return O;if(w){var L=e.$$legacy;return(function(F,M){return arguments.length>0?((!u||!M||L||E)&&w(M?O():F),F):O()})}var D=!1,A=((i&od)!==0?Ga:Cs)(()=>(D=!1,O()));ae&&(A.label=t),c&&y(A);var H=Ne;return(function(F,M){if(arguments.length>0){const W=M?y(A):u&&c?Jt(F):F;return N(A,W),D=!0,p!==void 0&&(p=W),F}return Dr&&D||(H.f&In)!==0?A.v:y(A)})}if(ae){let e=function(t){if(!(t in globalThis)){let i;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(i!==void 0)return i;$f(t)},set:o=>{i=o}})}};var Dm=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const Cv="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Cv);_d();var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _a={exports:{}},Rv=_a.exports,zu;function Mv(){return zu||(zu=1,(function(e,t){(function(i,o){e.exports=o()})(Rv,(function(){var i=function(n,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])},i(n,r)};function o(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");i(n,r);function a(){this.constructor=n}n.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}var u=function(){return u=Object.assign||function(r){for(var a,s=1,l=arguments.length;s<l;s++){a=arguments[s];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(r[f]=a[f])}return r},u.apply(this,arguments)};function c(n,r,a){for(var s=0,l=r.length,f;s<l;s++)(f||!(s in r))&&(f||(f=Array.prototype.slice.call(r,0,s)),f[s]=r[s]);return n.concat(f||Array.prototype.slice.call(r))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Lv,p=Object.keys,h=Array.isArray;typeof Promise<"u"&&!d.Promise&&(d.Promise=Promise);function b(n,r){return typeof r!="object"||p(r).forEach(function(a){n[a]=r[a]}),n}var w=Object.getPrototypeOf,T={}.hasOwnProperty;function _(n,r){return T.call(n,r)}function E(n,r){typeof r=="function"&&(r=r(w(n))),(typeof Reflect>"u"?p:Reflect.ownKeys)(r).forEach(function(a){L(n,a,r[a])})}var O=Object.defineProperty;function L(n,r,a,s){O(n,r,b(a&&_(a,"get")&&typeof a.get=="function"?{get:a.get,set:a.set,configurable:!0}:{value:a,configurable:!0,writable:!0},s))}function D(n){return{from:function(r){return n.prototype=Object.create(r.prototype),L(n.prototype,"constructor",n),{extend:E.bind(null,n.prototype)}}}}var A=Object.getOwnPropertyDescriptor;function H(n,r){var a=A(n,r),s;return a||(s=w(n))&&H(s,r)}var F=[].slice;function M(n,r,a){return F.call(n,r,a)}function W(n,r){return r(n)}function J(n){if(!n)throw new Error("Assertion Failed")}function oe(n){d.setImmediate?setImmediate(n):setTimeout(n,0)}function re(n,r){return n.reduce(function(a,s,l){var f=r(s,l);return f&&(a[f[0]]=f[1]),a},{})}function se(n,r){if(typeof r=="string"&&_(n,r))return n[r];if(!r)return n;if(typeof r!="string"){for(var a=[],s=0,l=r.length;s<l;++s){var f=se(n,r[s]);a.push(f)}return a}var v=r.indexOf(".");if(v!==-1){var m=n[r.substr(0,v)];return m==null?void 0:se(m,r.substr(v+1))}}function de(n,r,a){if(!(!n||r===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof r!="string"&&"length"in r){J(typeof a!="string"&&"length"in a);for(var s=0,l=r.length;s<l;++s)de(n,r[s],a[s])}else{var f=r.indexOf(".");if(f!==-1){var v=r.substr(0,f),m=r.substr(f+1);if(m==="")a===void 0?h(n)&&!isNaN(parseInt(v))?n.splice(v,1):delete n[v]:n[v]=a;else{var g=n[v];(!g||!_(n,v))&&(g=n[v]={}),de(g,m,a)}}else a===void 0?h(n)&&!isNaN(parseInt(r))?n.splice(r,1):delete n[r]:n[r]=a}}function ie(n,r){typeof r=="string"?de(n,r,void 0):"length"in r&&[].map.call(r,function(a){de(n,a,void 0)})}function ge(n){var r={};for(var a in n)_(n,a)&&(r[a]=n[a]);return r}var je=[].concat;function Ke(n){return je.apply([],n)}var Ze="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ke([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(r){return r+n+"Array"})}))).filter(function(n){return d[n]}),it=new Set(Ze.map(function(n){return d[n]}));function ke(n){var r={};for(var a in n)if(_(n,a)){var s=n[a];r[a]=!s||typeof s!="object"||it.has(s.constructor)?s:ke(s)}return r}function gt(n){for(var r in n)if(_(n,r))return!1;return!0}var Ae=null;function ze(n){Ae=new WeakMap;var r=te(n);return Ae=null,r}function te(n){if(!n||typeof n!="object")return n;var r=Ae.get(n);if(r)return r;if(h(n)){r=[],Ae.set(n,r);for(var a=0,s=n.length;a<s;++a)r.push(te(n[a]))}else if(it.has(n.constructor))r=n;else{var l=w(n);r=l===Object.prototype?{}:Object.create(l),Ae.set(n,r);for(var f in n)_(n,f)&&(r[f]=te(n[f]))}return r}var ye={}.toString;function Re(n){return ye.call(n).slice(8,-1)}var Ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ce=typeof Ue=="symbol"?function(n){var r;return n!=null&&(r=n[Ue])&&r.apply(n)}:function(){return null};function Be(n,r){var a=n.indexOf(r);return a>=0&&n.splice(a,1),a>=0}var ct={};function ft(n){var r,a,s,l;if(arguments.length===1){if(h(n))return n.slice();if(this===ct&&typeof n=="string")return[n];if(l=Ce(n)){for(a=[];s=l.next(),!s.done;)a.push(s.value);return a}if(n==null)return[n];if(r=n.length,typeof r=="number"){for(a=new Array(r);r--;)a[r]=n[r];return a}return[n]}for(r=arguments.length,a=new Array(r);r--;)a[r]=arguments[r];return a}var en=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},or=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ve=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],It=or.concat(Ve),sr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Gt(n,r){this.name=n,this.message=r}D(Gt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function jt(n,r){return n+". Errors: "+Object.keys(r).map(function(a){return r[a].toString()}).filter(function(a,s,l){return l.indexOf(a)===s}).join(`
`)}function Lt(n,r,a,s){this.failures=r,this.failedKeys=s,this.successCount=a,this.message=jt(n,r)}D(Lt).from(Gt);function Dt(n,r){this.name="BulkError",this.failures=Object.keys(r).map(function(a){return r[a]}),this.failuresByPos=r,this.message=jt(n,this.failures)}D(Dt).from(Gt);var sn=It.reduce(function(n,r){return n[r]=r+"Error",n},{}),Rn=Gt,ue=It.reduce(function(n,r){var a=r+"Error";function s(l,f){this.name=a,l?typeof l=="string"?(this.message="".concat(l).concat(f?`
 `+f:""),this.inner=f||null):typeof l=="object"&&(this.message="".concat(l.name," ").concat(l.message),this.inner=l):(this.message=sr[r]||a,this.inner=null)}return D(s).from(Rn),n[r]=s,n},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var Mn=Ve.reduce(function(n,r){return n[r+"Error"]=ue[r],n},{});function Sr(n,r){if(!n||n instanceof Gt||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Mn[n.name])return n;var a=new Mn[n.name](r||n.message,n);return"stack"in n&&L(a,"stack",{get:function(){return this.inner.stack}}),a}var wn=It.reduce(function(n,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(n[r+"Error"]=ue[r]),n},{});wn.ModifyError=Lt,wn.DexieError=Gt,wn.BulkError=Dt;function Se(){}function En(n){return n}function q(n,r){return n==null||n===En?r:function(a){return r(n(a))}}function V(n,r){return function(){n.apply(this,arguments),r.apply(this,arguments)}}function G(n,r){return n===Se?r:function(){var a=n.apply(this,arguments);a!==void 0&&(arguments[0]=a);var s=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var f=r.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?V(s,this.onsuccess):s),l&&(this.onerror=this.onerror?V(l,this.onerror):l),f!==void 0?f:a}}function ne(n,r){return n===Se?r:function(){n.apply(this,arguments);var a=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?V(a,this.onsuccess):a),s&&(this.onerror=this.onerror?V(s,this.onerror):s)}}function Le(n,r){return n===Se?r:function(a){var s=n.apply(this,arguments);b(a,s);var l=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var v=r.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?V(l,this.onsuccess):l),f&&(this.onerror=this.onerror?V(f,this.onerror):f),s===void 0?v===void 0?void 0:v:b(s,v)}}function nt(n,r){return n===Se?r:function(){return r.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function xe(n,r){return n===Se?r:function(){var a=n.apply(this,arguments);if(a&&typeof a.then=="function"){for(var s=this,l=arguments.length,f=new Array(l);l--;)f[l]=arguments[l];return a.then(function(){return r.apply(s,f)})}return r.apply(this,arguments)}}var he=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Qe(n,r){he=n}var He={},dt=100,Ie=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,w(n),n];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,w(r),n]})(),Nn=Ie[0],Fi=Ie[1],qe=Ie[2],Kn=Fi&&Fi.then,zt=Nn&&Nn.constructor,Bi=!!qe;function so(){queueMicrotask(xc)}var ti=function(n,r){ni.push([n,r]),ji&&(so(),ji=!1)},uo=!0,ji=!0,ur=[],zi=[],lo=En,Fn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},le=Fn,ni=[],lr=0,Hi=[];function X(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=le;if(typeof n!="function"){if(n!==He)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&fo(this,this._value);return}this._state=null,this._value=null,++r.ref,Ys(this,n)}var co={get:function(){var n=le,r=Gi;function a(s,l){var f=this,v=!n.global&&(n!==le||r!==Gi),m=v&&!jn(),g=new X(function(x,S){vo(f,new Gs(Qs(s,n,v,m),Qs(l,n,v,m),x,S,n))});return this._consoleTask&&(g._consoleTask=this._consoleTask),g}return a.prototype=He,a},set:function(n){L(this,"then",n&&n.prototype===He?co:{get:function(){return n},set:co.set})}};E(X.prototype,{then:co,_then:function(n,r){vo(this,new Gs(null,null,n,r,le))},catch:function(n){if(arguments.length===1)return this.then(null,n);var r=arguments[0],a=arguments[1];return typeof r=="function"?this.then(null,function(s){return s instanceof r?a(s):Ui(s)}):this.then(null,function(s){return s&&s.name===r?a(s):Ui(s)})},finally:function(n){return this.then(function(r){return X.resolve(n()).then(function(){return r})},function(r){return X.resolve(n()).then(function(){return Ui(r)})})},timeout:function(n,r){var a=this;return n<1/0?new X(function(s,l){var f=setTimeout(function(){return l(new ue.Timeout(r))},n);a.then(s,l).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(X.prototype,Symbol.toStringTag,"Dexie.Promise"),Fn.env=Zs();function Gs(n,r,a,s,l){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=a,this.reject=s,this.psd=l}E(X,{all:function(){var n=ft.apply(null,arguments).map(Yi);return new X(function(r,a){n.length===0&&r([]);var s=n.length;n.forEach(function(l,f){return X.resolve(l).then(function(v){n[f]=v,--s||r(n)},a)})})},resolve:function(n){if(n instanceof X)return n;if(n&&typeof n.then=="function")return new X(function(a,s){n.then(a,s)});var r=new X(He,!0,n);return r},reject:Ui,race:function(){var n=ft.apply(null,arguments).map(Yi);return new X(function(r,a){n.map(function(s){return X.resolve(s).then(r,a)})})},PSD:{get:function(){return le},set:function(n){return le=n}},totalEchoes:{get:function(){return Gi}},newPSD:Bn,usePSD:cr,scheduler:{get:function(){return ti},set:function(n){ti=n}},rejectionMapper:{get:function(){return lo},set:function(n){lo=n}},follow:function(n,r){return new X(function(a,s){return Bn(function(l,f){var v=le;v.unhandleds=[],v.onunhandled=f,v.finalize=V(function(){var m=this;Tc(function(){m.unhandleds.length===0?l():f(m.unhandleds[0])})},v.finalize),n()},r,a,s)})}}),zt&&(zt.allSettled&&L(X,"allSettled",function(){var n=ft.apply(null,arguments).map(Yi);return new X(function(r){n.length===0&&r([]);var a=n.length,s=new Array(a);n.forEach(function(l,f){return X.resolve(l).then(function(v){return s[f]={status:"fulfilled",value:v}},function(v){return s[f]={status:"rejected",reason:v}}).then(function(){return--a||r(s)})})})}),zt.any&&typeof AggregateError<"u"&&L(X,"any",function(){var n=ft.apply(null,arguments).map(Yi);return new X(function(r,a){n.length===0&&a(new AggregateError([]));var s=n.length,l=new Array(s);n.forEach(function(f,v){return X.resolve(f).then(function(m){return r(m)},function(m){l[v]=m,--s||a(new AggregateError(l))})})})}),zt.withResolvers&&(X.withResolvers=zt.withResolvers));function Ys(n,r){try{r(function(a){if(n._state===null){if(a===n)throw new TypeError("A promise cannot be resolved with itself.");var s=n._lib&&Or();a&&typeof a.then=="function"?Ys(n,function(l,f){a instanceof X?a._then(l,f):a.then(l,f)}):(n._state=!0,n._value=a,qs(n)),s&&Cr()}},fo.bind(null,n))}catch(a){fo(n,a)}}function fo(n,r){if(zi.push(r),n._state===null){var a=n._lib&&Or();r=lo(r),n._state=!1,n._value=r,kc(n),qs(n),a&&Cr()}}function qs(n){var r=n._listeners;n._listeners=[];for(var a=0,s=r.length;a<s;++a)vo(n,r[a]);var l=n._PSD;--l.ref||l.finalize(),lr===0&&(++lr,ti(function(){--lr===0&&ho()},[]))}function vo(n,r){if(n._state===null){n._listeners.push(r);return}var a=n._state?r.onFulfilled:r.onRejected;if(a===null)return(n._state?r.resolve:r.reject)(n._value);++r.psd.ref,++lr,ti(Ec,[a,n,r])}function Ec(n,r,a){try{var s,l=r._value;!r._state&&zi.length&&(zi=[]),s=he&&r._consoleTask?r._consoleTask.run(function(){return n(l)}):n(l),!r._state&&zi.indexOf(l)===-1&&Ac(r),a.resolve(s)}catch(f){a.reject(f)}finally{--lr===0&&ho(),--a.psd.ref||a.psd.finalize()}}function xc(){cr(Fn,function(){Or()&&Cr()})}function Or(){var n=uo;return uo=!1,ji=!1,n}function Cr(){var n,r,a;do for(;ni.length>0;)for(n=ni,ni=[],a=n.length,r=0;r<a;++r){var s=n[r];s[0].apply(null,s[1])}while(ni.length>0);uo=!0,ji=!0}function ho(){var n=ur;ur=[],n.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var r=Hi.slice(0),a=r.length;a;)r[--a]()}function Tc(n){function r(){n(),Hi.splice(Hi.indexOf(r),1)}Hi.push(r),++lr,ti(function(){--lr===0&&ho()},[])}function kc(n){ur.some(function(r){return r._value===n._value})||ur.push(n)}function Ac(n){for(var r=ur.length;r;)if(ur[--r]._value===n._value){ur.splice(r,1);return}}function Ui(n){return new X(He,!1,n)}function We(n,r){var a=le;return function(){var s=Or(),l=le;try{return zn(a,!0),n.apply(this,arguments)}catch(f){r&&r(f)}finally{zn(l,!1),s&&Cr()}}}var st={awaits:0,echoes:0,id:0},Ic=0,Vi=[],Wi=0,Gi=0,Dc=0;function Bn(n,r,a,s){var l=le,f=Object.create(l);f.parent=l,f.ref=0,f.global=!1,f.id=++Dc,Fn.env,f.env=Bi?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject}:{},r&&b(f,r),++l.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()};var v=cr(f,n,a,s);return f.ref===0&&f.finalize(),v}function Lr(){return st.id||(st.id=++Ic),++st.awaits,st.echoes+=dt,st.id}function jn(){return st.awaits?(--st.awaits===0&&(st.id=0),st.echoes=st.awaits*dt,!0):!1}(""+Kn).indexOf("[native code]")===-1&&(Lr=jn=Se);function Yi(n){return st.echoes&&n&&n.constructor===zt?(Lr(),n.then(function(r){return jn(),r},function(r){return jn(),Je(r)})):n}function Sc(n){++Gi,(!st.echoes||--st.echoes===0)&&(st.echoes=st.awaits=st.id=0),Vi.push(le),zn(n,!0)}function Oc(){var n=Vi[Vi.length-1];Vi.pop(),zn(n,!1)}function zn(n,r){var a=le;if((r?st.echoes&&(!Wi++||n!==le):Wi&&(!--Wi||n!==le))&&queueMicrotask(r?Sc.bind(null,n):Oc),n!==le&&(le=n,a===Fn&&(Fn.env=Zs()),Bi)){var s=Fn.env.Promise,l=n.env;(a.global||n.global)&&(Object.defineProperty(d,"Promise",l.PromiseProp),s.all=l.all,s.race=l.race,s.resolve=l.resolve,s.reject=l.reject,l.allSettled&&(s.allSettled=l.allSettled),l.any&&(s.any=l.any))}}function Zs(){var n=d.Promise;return Bi?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function cr(n,r,a,s,l){var f=le;try{return zn(n,!0),r(a,s,l)}finally{zn(f,!1)}}function Qs(n,r,a,s){return typeof n!="function"?n:function(){var l=le;a&&Lr(),zn(r,!0);try{return n.apply(this,arguments)}finally{zn(l,!1),s&&queueMicrotask(jn)}}}function po(n){Promise===zt&&st.echoes===0?Wi===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}var Je=X.reject;function mo(n,r,a,s){if(!n.idbdb||!n._state.openComplete&&!le.letThrough&&!n._vip){if(n._state.openComplete)return Je(new ue.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return Je(new ue.DatabaseClosed);n.open().catch(Se)}return n._state.dbReadyPromise.then(function(){return mo(n,r,a,s)})}else{var l=n._createTransaction(r,a,n._dbSchema);try{l.create(),n._state.PR1398_maxLoop=3}catch(f){return f.name===sn.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return mo(n,r,a,s)})):Je(f)}return l._promise(r,function(f,v){return Bn(function(){return le.trans=l,s(f,v,l)})}).then(function(f){if(r==="readwrite")try{l.idbtrans.commit()}catch{}return r==="readonly"?f:l._completion.then(function(){return f})})}}var Xs="4.2.1",fr="ï¿¿",yo=-1/0,xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Js="String expected.",Pr=[],qi="__dbnames",go="readonly",_o="readwrite";function dr(n,r){return n?r?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:n:r}var $s={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Zi(n){return typeof n=="string"&&!/\./.test(n)?function(r){return r[n]===void 0&&n in r&&(r=ze(r),delete r[n]),r}:function(r){return r}}function eu(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function De(n,r){try{var a=tu(n),s=tu(r);if(a!==s)return a==="Array"?1:s==="Array"?-1:a==="binary"?1:s==="binary"?-1:a==="string"?1:s==="string"?-1:a==="Date"?1:s!=="Date"?NaN:-1;switch(a){case"number":case"Date":case"string":return n>r?1:n<r?-1:0;case"binary":return Lc(nu(n),nu(r));case"Array":return Cc(n,r)}}catch{}return NaN}function Cc(n,r){for(var a=n.length,s=r.length,l=a<s?a:s,f=0;f<l;++f){var v=De(n[f],r[f]);if(v!==0)return v}return a===s?0:a<s?-1:1}function Lc(n,r){for(var a=n.length,s=r.length,l=a<s?a:s,f=0;f<l;++f)if(n[f]!==r[f])return n[f]<r[f]?-1:1;return a===s?0:a<s?-1:1}function tu(n){var r=typeof n;if(r!=="object")return r;if(ArrayBuffer.isView(n))return"binary";var a=Re(n);return a==="ArrayBuffer"?"binary":a}function nu(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function Qi(n,r,a){var s=n.schema.yProps;return s?(r&&a.numFailures>0&&(r=r.filter(function(l,f){return!a.failures[f]})),Promise.all(s.map(function(l){var f=l.updatesTable;return r?n.db.table(f).where("k").anyOf(r).delete():n.db.table(f).clear()})).then(function(){return a})):a}var ri=(function(){function n(r){this["@@propmod"]=r}return n.prototype.execute=function(r){var a,s=this["@@propmod"];if(s.add!==void 0){var l=s.add;if(h(l))return c(c([],h(r)?r:[],!0),l).sort();if(typeof l=="number")return(Number(r)||0)+l;if(typeof l=="bigint")try{return BigInt(r)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(s.remove!==void 0){var f=s.remove;if(h(f))return h(r)?r.filter(function(m){return!f.includes(m)}).sort():[];if(typeof f=="number")return Number(r)-f;if(typeof f=="bigint")try{return BigInt(r)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}var v=(a=s.replacePrefix)===null||a===void 0?void 0:a[0];return v&&typeof r=="string"&&r.startsWith(v)?s.replacePrefix[1]+r.substring(v.length):r},n})();function ru(n,r){for(var a=p(r),s=a.length,l=!1,f=0;f<s;++f){var v=a[f],m=r[v],g=se(n,v);m instanceof ri?(de(n,v,m.execute(g)),l=!0):g!==m&&(de(n,v,m),l=!0)}return l}var iu=(function(){function n(){}return n.prototype._trans=function(r,a,s){var l=this._tx||le.trans,f=this.name,v=he&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function m(S,k,R){if(!R.schema[f])throw new ue.NotFound("Table "+f+" not part of transaction");return a(R.idbtrans,R)}var g=Or();try{var x=l&&l.db._novip===this.db._novip?l===le.trans?l._promise(r,m,s):Bn(function(){return l._promise(r,m,s)},{trans:l,transless:le.transless||le}):mo(this.db,r,[this.name],m);return v&&(x._consoleTask=v,x=x.catch(function(S){return console.trace(S),Je(S)})),x}finally{g&&Cr()}},n.prototype.get=function(r,a){var s=this;return r&&r.constructor===Object?this.where(r).first(a):r==null?Je(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(l){return s.core.get({trans:l,key:r}).then(function(f){return s.hook.reading.fire(f)})}).then(a)},n.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(h(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var a=p(r);if(a.length===1)return this.where(a[0]).equals(r[a[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&a.every(function(R){return S.keyPath.indexOf(R)>=0})){for(var k=0;k<a.length;++k)if(a.indexOf(S.keyPath[k])===-1)return!1;return!0}return!1}).sort(function(S,k){return S.keyPath.length-k.keyPath.length})[0];if(s&&this.db._maxKey!==fr){var l=s.keyPath.slice(0,a.length);return this.where(l).equals(l.map(function(S){return r[S]}))}!s&&he&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var f=this.schema.idxByName;function v(S,k){return De(S,k)===0}var m=a.reduce(function(S,k){var R=S[0],Y=S[1],I=f[k],C=r[k];return[R||I,R||!I?dr(Y,I&&I.multi?function(P){var K=se(P,k);return h(K)&&K.some(function(j){return v(C,j)})}:function(P){return v(C,se(P,k))}):Y]},[null,null]),g=m[0],x=m[1];return g?this.where(g.name).equals(r[g.keyPath]).filter(x):s?this.filter(x):this.where(a).equals("")},n.prototype.filter=function(r){return this.toCollection().and(r)},n.prototype.count=function(r){return this.toCollection().count(r)},n.prototype.offset=function(r){return this.toCollection().offset(r)},n.prototype.limit=function(r){return this.toCollection().limit(r)},n.prototype.each=function(r){return this.toCollection().each(r)},n.prototype.toArray=function(r){return this.toCollection().toArray(r)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,h(r)?"[".concat(r.join("+"),"]"):r))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(r){var a=this,s=a.db,l=a.name;this.schema.mappedClass=r,r.prototype instanceof eu&&(r=(function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return Object.defineProperty(x.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),x.prototype.table=function(){return l},x})(r));for(var f=new Set,v=r.prototype;v;v=w(v))Object.getOwnPropertyNames(v).forEach(function(g){return f.add(g)});var m=function(g){if(!g)return g;var x=Object.create(r.prototype);for(var S in g)if(!f.has(S))try{x[S]=g[S]}catch{}return x};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),r},n.prototype.defineClass=function(){function r(a){b(this,a)}return this.mapToClass(r)},n.prototype.add=function(r,a){var s=this,l=this.schema.primKey,f=l.auto,v=l.keyPath,m=r;return v&&f&&(m=Zi(v)(r)),this._trans("readwrite",function(g){return s.core.mutate({trans:g,type:"add",keys:a!=null?[a]:null,values:[m]})}).then(function(g){return g.numFailures?X.reject(g.failures[0]):g.lastResult}).then(function(g){if(v)try{de(r,v,g)}catch{}return g})},n.prototype.upsert=function(r,a){var s=this,l=this.schema.primKey.keyPath;return this._trans("readwrite",function(f){return s.core.get({trans:f,key:r}).then(function(v){var m=v??{};return ru(m,a),l&&de(m,l,r),s.core.mutate({trans:f,type:"put",values:[m],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[a]}}).then(function(g){return g.numFailures?X.reject(g.failures[0]):!!v})})})},n.prototype.update=function(r,a){if(typeof r=="object"&&!h(r)){var s=se(r,this.schema.primKey.keyPath);return s===void 0?Je(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(a)}else return this.where(":id").equals(r).modify(a)},n.prototype.put=function(r,a){var s=this,l=this.schema.primKey,f=l.auto,v=l.keyPath,m=r;return v&&f&&(m=Zi(v)(r)),this._trans("readwrite",function(g){return s.core.mutate({trans:g,type:"put",values:[m],keys:a!=null?[a]:null})}).then(function(g){return g.numFailures?X.reject(g.failures[0]):g.lastResult}).then(function(g){if(v)try{de(r,v,g)}catch{}return g})},n.prototype.delete=function(r){var a=this;return this._trans("readwrite",function(s){return a.core.mutate({trans:s,type:"delete",keys:[r]}).then(function(l){return Qi(a,[r],l)}).then(function(l){return l.numFailures?X.reject(l.failures[0]):void 0})})},n.prototype.clear=function(){var r=this;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"deleteRange",range:$s}).then(function(s){return Qi(r,null,s)})}).then(function(a){return a.numFailures?X.reject(a.failures[0]):void 0})},n.prototype.bulkGet=function(r){var a=this;return this._trans("readonly",function(s){return a.core.getMany({keys:r,trans:s}).then(function(l){return l.map(function(f){return a.hook.reading.fire(f)})})})},n.prototype.bulkAdd=function(r,a,s){var l=this,f=Array.isArray(a)?a:void 0;s=s||(f?void 0:a);var v=s?s.allKeys:void 0;return this._trans("readwrite",function(m){var g=l.schema.primKey,x=g.auto,S=g.keyPath;if(S&&f)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var k=r.length,R=S&&x?r.map(Zi(S)):r;return l.core.mutate({trans:m,type:"add",keys:f,values:R,wantResults:v}).then(function(Y){var I=Y.numFailures,C=Y.results,P=Y.lastResult,K=Y.failures,j=v?C:P;if(I===0)return j;throw new Dt("".concat(l.name,".bulkAdd(): ").concat(I," of ").concat(k," operations failed"),K)})})},n.prototype.bulkPut=function(r,a,s){var l=this,f=Array.isArray(a)?a:void 0;s=s||(f?void 0:a);var v=s?s.allKeys:void 0;return this._trans("readwrite",function(m){var g=l.schema.primKey,x=g.auto,S=g.keyPath;if(S&&f)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var k=r.length,R=S&&x?r.map(Zi(S)):r;return l.core.mutate({trans:m,type:"put",keys:f,values:R,wantResults:v}).then(function(Y){var I=Y.numFailures,C=Y.results,P=Y.lastResult,K=Y.failures,j=v?C:P;if(I===0)return j;throw new Dt("".concat(l.name,".bulkPut(): ").concat(I," of ").concat(k," operations failed"),K)})})},n.prototype.bulkUpdate=function(r){var a=this,s=this.core,l=r.map(function(m){return m.key}),f=r.map(function(m){return m.changes}),v=[];return this._trans("readwrite",function(m){return s.getMany({trans:m,keys:l,cache:"clone"}).then(function(g){var x=[],S=[];r.forEach(function(R,Y){var I=R.key,C=R.changes,P=g[Y];if(P){for(var K=0,j=Object.keys(C);K<j.length;K++){var z=j[K],U=C[z];if(z===a.schema.primKey.keyPath){if(De(U,I)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else de(P,z,U)}v.push(Y),x.push(I),S.push(P)}});var k=x.length;return s.mutate({trans:m,type:"put",keys:x,values:S,updates:{keys:l,changeSpecs:f}}).then(function(R){var Y=R.numFailures,I=R.failures;if(Y===0)return k;for(var C=0,P=Object.keys(I);C<P.length;C++){var K=P[C],j=v[Number(K)];if(j!=null){var z=I[K];delete I[K],I[j]=z}}throw new Dt("".concat(a.name,".bulkUpdate(): ").concat(Y," of ").concat(k," operations failed"),I)})})})},n.prototype.bulkDelete=function(r){var a=this,s=r.length;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"delete",keys:r}).then(function(f){return Qi(a,r,f)})}).then(function(l){var f=l.numFailures,v=l.lastResult,m=l.failures;if(f===0)return v;throw new Dt("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(s," operations failed"),m)})},n})();function ii(n){var r={},a=function(m,g){if(g){for(var x=arguments.length,S=new Array(x-1);--x;)S[x-1]=arguments[x];return r[m].subscribe.apply(null,S),n}else if(typeof m=="string")return r[m]};a.addEventType=f;for(var s=1,l=arguments.length;s<l;++s)f(arguments[s]);return a;function f(m,g,x){if(typeof m=="object")return v(m);g||(g=nt),x||(x=Se);var S={subscribers:[],fire:x,subscribe:function(k){S.subscribers.indexOf(k)===-1&&(S.subscribers.push(k),S.fire=g(S.fire,k))},unsubscribe:function(k){S.subscribers=S.subscribers.filter(function(R){return R!==k}),S.fire=S.subscribers.reduce(g,x)}};return r[m]=a[m]=S,S}function v(m){p(m).forEach(function(g){var x=m[g];if(h(x))f(g,m[g][0],m[g][1]);else if(x==="asap")var S=f(g,En,function(){for(var R=arguments.length,Y=new Array(R);R--;)Y[R]=arguments[R];S.subscribers.forEach(function(I){oe(function(){I.apply(null,Y)})})});else throw new ue.InvalidArgument("Invalid event config")})}}function ai(n,r){return D(r).from({prototype:n}),r}function Pc(n){return ai(iu.prototype,function(a,s,l){this.db=n,this._tx=l,this.name=a,this.schema=s,this.hook=n._allTables[a]?n._allTables[a].hook:ii(null,{creating:[G,Se],reading:[q,En],updating:[Le,Se],deleting:[ne,Se]})})}function Rr(n,r){return!(n.filter||n.algorithm||n.or)&&(r?n.justLimit:!n.replayFilter)}function bo(n,r){n.filter=dr(n.filter,r)}function wo(n,r,a){var s=n.replayFilter;n.replayFilter=s?function(){return dr(s(),r())}:r,n.justLimit=a&&!s}function Rc(n,r){n.isMatch=dr(n.isMatch,r)}function Xi(n,r){if(n.isPrimKey)return r.primaryKey;var a=r.getIndexByKeyPath(n.index);if(!a)throw new ue.Schema("KeyPath "+n.index+" on object store "+r.name+" is not indexed");return a}function au(n,r,a){var s=Xi(n,r.schema);return r.openCursor({trans:a,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:s,range:n.range}})}function Ji(n,r,a,s){var l=n.replayFilter?dr(n.filter,n.replayFilter()):n.filter;if(n.or){var f={},v=function(m,g,x){if(!l||l(g,x,function(R){return g.stop(R)},function(R){return g.fail(R)})){var S=g.primaryKey,k=""+S;k==="[object ArrayBuffer]"&&(k=""+new Uint8Array(S)),_(f,k)||(f[k]=!0,r(m,g,x))}};return Promise.all([n.or._iterate(v,a),ou(au(n,s,a),n.algorithm,v,!n.keysOnly&&n.valueMapper)])}else return ou(au(n,s,a),dr(n.algorithm,l),r,!n.keysOnly&&n.valueMapper)}function ou(n,r,a,s){var l=s?function(v,m,g){return a(s(v),m,g)}:a,f=We(l);return n.then(function(v){if(v)return v.start(function(){var m=function(){return v.continue()};(!r||r(v,function(g){return m=g},function(g){v.stop(g),m=Se},function(g){v.fail(g),m=Se}))&&f(v.value,v,function(g){return m=g}),m()})})}var Mc=(function(){function n(){}return n.prototype._read=function(r,a){var s=this._ctx;return s.error?s.table._trans(null,Je.bind(null,s.error)):s.table._trans("readonly",r).then(a)},n.prototype._write=function(r){var a=this._ctx;return a.error?a.table._trans(null,Je.bind(null,a.error)):a.table._trans("readwrite",r,"locked")},n.prototype._addAlgorithm=function(r){var a=this._ctx;a.algorithm=dr(a.algorithm,r)},n.prototype._iterate=function(r,a){return Ji(this._ctx,r,a,this._ctx.table.core)},n.prototype.clone=function(r){var a=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return r&&b(s,r),a._ctx=s,a},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(r){var a=this._ctx;return this._read(function(s){return Ji(a,r,s,a.table.core)})},n.prototype.count=function(r){var a=this;return this._read(function(s){var l=a._ctx,f=l.table.core;if(Rr(l,!0))return f.count({trans:s,query:{index:Xi(l,f.schema),range:l.range}}).then(function(m){return Math.min(m,l.limit)});var v=0;return Ji(l,function(){return++v,!1},s,f).then(function(){return v})}).then(r)},n.prototype.sortBy=function(r,a){var s=r.split(".").reverse(),l=s[0],f=s.length-1;function v(x,S){return S?v(x[s[S]],S-1):x[l]}var m=this._ctx.dir==="next"?1:-1;function g(x,S){var k=v(x,f),R=v(S,f);return De(k,R)*m}return this.toArray(function(x){return x.sort(g)}).then(a)},n.prototype.toArray=function(r){var a=this;return this._read(function(s){var l=a._ctx;if(l.dir==="next"&&Rr(l,!0)&&l.limit>0){var f=l.valueMapper,v=Xi(l,l.table.core.schema);return l.table.core.query({trans:s,limit:l.limit,values:!0,query:{index:v,range:l.range}}).then(function(g){var x=g.result;return f?x.map(f):x})}else{var m=[];return Ji(l,function(g){return m.push(g)},s,l.table.core).then(function(){return m})}},r)},n.prototype.offset=function(r){var a=this._ctx;return r<=0?this:(a.offset+=r,Rr(a)?wo(a,function(){var s=r;return function(l,f){return s===0?!0:s===1?(--s,!1):(f(function(){l.advance(s),s=0}),!1)}}):wo(a,function(){var s=r;return function(){return--s<0}}),this)},n.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),wo(this._ctx,function(){var a=r;return function(s,l,f){return--a<=0&&l(f),a>=0}},!0),this},n.prototype.until=function(r,a){return bo(this._ctx,function(s,l,f){return r(s.value)?(l(f),a):!0}),this},n.prototype.first=function(r){return this.limit(1).toArray(function(a){return a[0]}).then(r)},n.prototype.last=function(r){return this.reverse().first(r)},n.prototype.filter=function(r){return bo(this._ctx,function(a){return r(a.value)}),Rc(this._ctx,r),this},n.prototype.and=function(r){return this.filter(r)},n.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(r){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(s,l){r(l.key,l)})},n.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},n.prototype.eachPrimaryKey=function(r){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(s,l){r(l.primaryKey,l)})},n.prototype.keys=function(r){var a=this._ctx;a.keysOnly=!a.isMatch;var s=[];return this.each(function(l,f){s.push(f.key)}).then(function(){return s}).then(r)},n.prototype.primaryKeys=function(r){var a=this._ctx;if(a.dir==="next"&&Rr(a,!0)&&a.limit>0)return this._read(function(l){var f=Xi(a,a.table.core.schema);return a.table.core.query({trans:l,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(l){var f=l.result;return f}).then(r);a.keysOnly=!a.isMatch;var s=[];return this.each(function(l,f){s.push(f.primaryKey)}).then(function(){return s}).then(r)},n.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},n.prototype.firstKey=function(r){return this.limit(1).keys(function(a){return a[0]}).then(r)},n.prototype.lastKey=function(r){return this.reverse().firstKey(r)},n.prototype.distinct=function(){var r=this._ctx,a=r.index&&r.table.schema.idxByName[r.index];if(!a||!a.multi)return this;var s={};return bo(this._ctx,function(l){var f=l.primaryKey.toString(),v=_(s,f);return s[f]=!0,!v}),this},n.prototype.modify=function(r){var a=this,s=this._ctx;return this._write(function(l){var f;typeof r=="function"?f=r:f=function(K){return ru(K,r)};var v=s.table.core,m=v.schema.primaryKey,g=m.outbound,x=m.extractKey,S=200,k=a.db._options.modifyChunkSize;k&&(typeof k=="object"?S=k[v.name]||k["*"]||200:S=k);var R=[],Y=0,I=[],C=function(K,j){var z=j.failures,U=j.numFailures;Y+=K-U;for(var B=0,Z=p(z);B<Z.length;B++){var $=Z[B];R.push(z[$])}},P=r===su;return a.clone().primaryKeys().then(function(K){var j=Rr(s)&&s.limit===1/0&&(typeof r!="function"||P)&&{index:s.index,range:s.range},z=function(U){var B=Math.min(S,K.length-U),Z=K.slice(U,U+B);return(P?Promise.resolve([]):v.getMany({trans:l,keys:Z,cache:"immutable"})).then(function($){var Q=[],ve=[],Ee=g?[]:null,ee=P?Z:[];if(!P)for(var be=0;be<B;++be){var pe=$[be],Oe={value:ze(pe),primKey:K[U+be]};f.call(Oe,Oe.value,Oe)!==!1&&(Oe.value==null?ee.push(K[U+be]):!g&&De(x(pe),x(Oe.value))!==0?(ee.push(K[U+be]),Q.push(Oe.value)):(ve.push(Oe.value),g&&Ee.push(K[U+be])))}return Promise.resolve(Q.length>0&&v.mutate({trans:l,type:"add",values:Q}).then(function(ce){for(var Xe in ce.failures)ee.splice(parseInt(Xe),1);C(Q.length,ce)})).then(function(){return(ve.length>0||j&&typeof r=="object")&&v.mutate({trans:l,type:"put",keys:Ee,values:ve,criteria:j,changeSpec:typeof r!="function"&&r,isAdditionalChunk:U>0}).then(function(ce){return C(ve.length,ce)})}).then(function(){return(ee.length>0||j&&P)&&v.mutate({trans:l,type:"delete",keys:ee,criteria:j,isAdditionalChunk:U>0}).then(function(ce){return Qi(s.table,ee,ce)}).then(function(ce){return C(ee.length,ce)})}).then(function(){return K.length>U+B&&z(U+S)})})};return z(0).then(function(){if(R.length>0)throw new Lt("Error modifying one or more objects",R,Y,I);return K.length})})})},n.prototype.delete=function(){var r=this._ctx,a=r.range;return Rr(r)&&!r.table.schema.yProps&&(r.isPrimKey||a.type===3)?this._write(function(s){var l=r.table.core.schema.primaryKey,f=a;return r.table.core.count({trans:s,query:{index:l,range:f}}).then(function(v){return r.table.core.mutate({trans:s,type:"deleteRange",range:f}).then(function(m){var g=m.failures,x=m.numFailures;if(x)throw new Lt("Could not delete some values",Object.keys(g).map(function(S){return g[S]}),v-x);return v-x})})}):this.modify(su)},n})(),su=function(n,r){return r.value=null};function Nc(n){return ai(Mc.prototype,function(a,s){this.db=n;var l=$s,f=null;if(s)try{l=s()}catch(x){f=x}var v=a._ctx,m=v.table,g=m.hook.reading.fire;this._ctx={table:m,index:v.index,isPrimKey:!v.index||m.schema.primKey.keyPath&&v.index===m.schema.primKey.name,range:l,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:v.or,valueMapper:g!==En?g:null}})}function Kc(n,r){return n<r?-1:n===r?0:1}function Fc(n,r){return n>r?-1:n===r?0:1}function Ht(n,r,a){var s=n instanceof lu?new n.Collection(n):n;return s._ctx.error=a?new a(r):new TypeError(r),s}function Mr(n){return new n.Collection(n,function(){return uu("")}).limit(0)}function Bc(n){return n==="next"?function(r){return r.toUpperCase()}:function(r){return r.toLowerCase()}}function jc(n){return n==="next"?function(r){return r.toLowerCase()}:function(r){return r.toUpperCase()}}function zc(n,r,a,s,l,f){for(var v=Math.min(n.length,s.length),m=-1,g=0;g<v;++g){var x=r[g];if(x!==s[g])return l(n[g],a[g])<0?n.substr(0,g)+a[g]+a.substr(g+1):l(n[g],s[g])<0?n.substr(0,g)+s[g]+a.substr(g+1):m>=0?n.substr(0,m)+r[m]+a.substr(m+1):null;l(n[g],x)<0&&(m=g)}return v<s.length&&f==="next"?n+a.substr(n.length):v<n.length&&f==="prev"?n.substr(0,a.length):m<0?null:n.substr(0,m)+s[m]+a.substr(m+1)}function $i(n,r,a,s){var l,f,v,m,g,x,S,k=a.length;if(!a.every(function(C){return typeof C=="string"}))return Ht(n,Js);function R(C){l=Bc(C),f=jc(C),v=C==="next"?Kc:Fc;var P=a.map(function(K){return{lower:f(K),upper:l(K)}}).sort(function(K,j){return v(K.lower,j.lower)});m=P.map(function(K){return K.upper}),g=P.map(function(K){return K.lower}),x=C,S=C==="next"?"":s}R("next");var Y=new n.Collection(n,function(){return Hn(m[0],g[k-1]+s)});Y._ondirectionchange=function(C){R(C)};var I=0;return Y._addAlgorithm(function(C,P,K){var j=C.key;if(typeof j!="string")return!1;var z=f(j);if(r(z,g,I))return!0;for(var U=null,B=I;B<k;++B){var Z=zc(j,z,m[B],g[B],v,x);Z===null&&U===null?I=B+1:(U===null||v(U,Z)>0)&&(U=Z)}return P(U!==null?function(){C.continue(U+S)}:K),!1}),Y}function Hn(n,r,a,s){return{type:2,lower:n,upper:r,lowerOpen:a,upperOpen:s}}function uu(n){return{type:1,lower:n,upper:n}}var lu=(function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(r,a,s,l){s=s!==!1,l=l===!0;try{return this._cmp(r,a)>0||this._cmp(r,a)===0&&(s||l)&&!(s&&l)?Mr(this):new this.Collection(this,function(){return Hn(r,a,!s,!l)})}catch{return Ht(this,xn)}},n.prototype.equals=function(r){return r==null?Ht(this,xn):new this.Collection(this,function(){return uu(r)})},n.prototype.above=function(r){return r==null?Ht(this,xn):new this.Collection(this,function(){return Hn(r,void 0,!0)})},n.prototype.aboveOrEqual=function(r){return r==null?Ht(this,xn):new this.Collection(this,function(){return Hn(r,void 0,!1)})},n.prototype.below=function(r){return r==null?Ht(this,xn):new this.Collection(this,function(){return Hn(void 0,r,!1,!0)})},n.prototype.belowOrEqual=function(r){return r==null?Ht(this,xn):new this.Collection(this,function(){return Hn(void 0,r)})},n.prototype.startsWith=function(r){return typeof r!="string"?Ht(this,Js):this.between(r,r+fr,!0,!0)},n.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):$i(this,function(a,s){return a.indexOf(s[0])===0},[r],fr)},n.prototype.equalsIgnoreCase=function(r){return $i(this,function(a,s){return a===s[0]},[r],"")},n.prototype.anyOfIgnoreCase=function(){var r=ft.apply(ct,arguments);return r.length===0?Mr(this):$i(this,function(a,s){return s.indexOf(a)!==-1},r,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var r=ft.apply(ct,arguments);return r.length===0?Mr(this):$i(this,function(a,s){return s.some(function(l){return a.indexOf(l)===0})},r,fr)},n.prototype.anyOf=function(){var r=this,a=ft.apply(ct,arguments),s=this._cmp;try{a.sort(s)}catch{return Ht(this,xn)}if(a.length===0)return Mr(this);var l=new this.Collection(this,function(){return Hn(a[0],a[a.length-1])});l._ondirectionchange=function(v){s=v==="next"?r._ascending:r._descending,a.sort(s)};var f=0;return l._addAlgorithm(function(v,m,g){for(var x=v.key;s(x,a[f])>0;)if(++f,f===a.length)return m(g),!1;return s(x,a[f])===0?!0:(m(function(){v.continue(a[f])}),!1)}),l},n.prototype.notEqual=function(r){return this.inAnyRange([[yo,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var r=ft.apply(ct,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Ht(this,xn)}var a=r.reduce(function(s,l){return s?s.concat([[s[s.length-1][1],l]]):[[yo,l]]},null);return a.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(r,a){var s=this,l=this._cmp,f=this._ascending,v=this._descending,m=this._min,g=this._max;if(r.length===0)return Mr(this);if(!r.every(function(B){return B[0]!==void 0&&B[1]!==void 0&&f(B[0],B[1])<=0}))return Ht(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var x=!a||a.includeLowers!==!1,S=a&&a.includeUppers===!0;function k(B,Z){for(var $=0,Q=B.length;$<Q;++$){var ve=B[$];if(l(Z[0],ve[1])<0&&l(Z[1],ve[0])>0){ve[0]=m(ve[0],Z[0]),ve[1]=g(ve[1],Z[1]);break}}return $===Q&&B.push(Z),B}var R=f;function Y(B,Z){return R(B[0],Z[0])}var I;try{I=r.reduce(k,[]),I.sort(Y)}catch{return Ht(this,xn)}var C=0,P=S?function(B){return f(B,I[C][1])>0}:function(B){return f(B,I[C][1])>=0},K=x?function(B){return v(B,I[C][0])>0}:function(B){return v(B,I[C][0])>=0};function j(B){return!P(B)&&!K(B)}var z=P,U=new this.Collection(this,function(){return Hn(I[0][0],I[I.length-1][1],!x,!S)});return U._ondirectionchange=function(B){B==="next"?(z=P,R=f):(z=K,R=v),I.sort(Y)},U._addAlgorithm(function(B,Z,$){for(var Q=B.key;z(Q);)if(++C,C===I.length)return Z($),!1;return j(Q)?!0:(s._cmp(Q,I[C][1])===0||s._cmp(Q,I[C][0])===0||Z(function(){R===f?B.continue(I[C][0]):B.continue(I[C][1])}),!1)}),U},n.prototype.startsWithAnyOf=function(){var r=ft.apply(ct,arguments);return r.every(function(a){return typeof a=="string"})?r.length===0?Mr(this):this.inAnyRange(r.map(function(a){return[a,a+fr]})):Ht(this,"startsWithAnyOf() only works with strings")},n})();function Hc(n){return ai(lu.prototype,function(a,s,l){if(this.db=n,this._ctx={table:a,index:s===":id"?null:s,or:l},this._cmp=this._ascending=De,this._descending=function(f,v){return De(v,f)},this._max=function(f,v){return De(f,v)>0?f:v},this._min=function(f,v){return De(f,v)<0?f:v},this._IDBKeyRange=n._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})}function un(n){return We(function(r){return oi(r),n(r.target.error),!1})}function oi(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var si="storagemutated",Eo="x-storagemutated-1",Un=ii(null,si),Uc=(function(){function n(){}return n.prototype._lock=function(){return J(!le.global),++this._reculock,this._reculock===1&&!le.global&&(le.lockOwnerFor=this),this},n.prototype._unlock=function(){if(J(!le.global),--this._reculock===0)for(le.global||(le.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{cr(r[1],r[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&le.lockOwnerFor!==this},n.prototype.create=function(r){var a=this;if(!this.mode)return this;var s=this.db.idbdb,l=this.db._state.dbOpenError;if(J(!this.idbtrans),!r&&!s)switch(l&&l.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(l);case"MissingAPIError":throw new ue.MissingAPI(l.message,l);default:throw new ue.OpenFailed(l)}if(!this.active)throw new ue.TransactionInactive;return J(this._completion._state===null),r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):s.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),r.onerror=We(function(f){oi(f),a._reject(r.error)}),r.onabort=We(function(f){oi(f),a.active&&a._reject(new ue.Abort(r.error)),a.active=!1,a.on("abort").fire(f)}),r.oncomplete=We(function(){a.active=!1,a._resolve(),"mutatedParts"in r&&Un.storagemutated.fire(r.mutatedParts)}),this},n.prototype._promise=function(r,a,s){var l=this;if(r==="readwrite"&&this.mode!=="readwrite")return Je(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return Je(new ue.TransactionInactive);if(this._locked())return new X(function(v,m){l._blockedFuncs.push([function(){l._promise(r,a,s).then(v,m)},le])});if(s)return Bn(function(){var v=new X(function(m,g){l._lock();var x=a(m,g,l);x&&x.then&&x.then(m,g)});return v.finally(function(){return l._unlock()}),v._lib=!0,v});var f=new X(function(v,m){var g=a(v,m,l);g&&g.then&&g.then(v,m)});return f._lib=!0,f},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(r){var a=this._root(),s=X.resolve(r);if(a._waitingFor)a._waitingFor=a._waitingFor.then(function(){return s});else{a._waitingFor=s,a._waitingQueue=[];var l=a.idbtrans.objectStore(a.storeNames[0]);(function v(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(l.get(-1/0).onsuccess=v)})()}var f=a._waitingFor;return new X(function(v,m){s.then(function(g){return a._waitingQueue.push(We(v.bind(null,g)))},function(g){return a._waitingQueue.push(We(m.bind(null,g)))}).finally(function(){a._waitingFor===f&&(a._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},n.prototype.table=function(r){var a=this._memoizedTables||(this._memoizedTables={});if(_(a,r))return a[r];var s=this.schema[r];if(!s)throw new ue.NotFound("Table "+r+" not part of transaction");var l=new this.db.Table(r,s,this);return l.core=this.db.core.table(r),a[r]=l,l},n})();function Vc(n){return ai(Uc.prototype,function(a,s,l,f,v){var m=this;a!=="readonly"&&s.forEach(function(g){var x,S=(x=l[g])===null||x===void 0?void 0:x.yProps;S&&(s=s.concat(S.map(function(k){return k.updatesTable})))}),this.db=n,this.mode=a,this.storeNames=s,this.schema=l,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=ii(this,"complete","error","abort"),this.parent=v||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X(function(g,x){m._resolve=g,m._reject=x}),this._completion.then(function(){m.active=!1,m.on.complete.fire()},function(g){var x=m.active;return m.active=!1,m.on.error.fire(g),m.parent?m.parent._reject(g):x&&m.idbtrans&&m.idbtrans.abort(),Je(g)})})}function xo(n,r,a,s,l,f,v,m){return{name:n,keyPath:r,unique:a,multi:s,auto:l,compound:f,src:(a&&!v?"&":"")+(s?"*":"")+(l?"++":"")+cu(r),type:m}}function cu(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function To(n,r,a){return{name:n,primKey:r,indexes:a,mappedClass:null,idxByName:re(a,function(s){return[s.name,s]})}}function Wc(n){return n.length===1?n[0]:n}var ui=function(n){try{return n.only([[]]),ui=function(){return[[]]},[[]]}catch{return ui=function(){return fr},fr}};function ko(n){return n==null?function(){}:typeof n=="string"?Gc(n):function(r){return se(r,n)}}function Gc(n){var r=n.split(".");return r.length===1?function(a){return a[n]}:function(a){return se(a,n)}}function fu(n){return[].slice.call(n)}var Yc=0;function li(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function qc(n,r,a){function s(k,R){var Y=fu(k.objectStoreNames);return{schema:{name:k.name,tables:Y.map(function(I){return R.objectStore(I)}).map(function(I){var C=I.keyPath,P=I.autoIncrement,K=h(C),j=C==null,z={},U={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j,compound:K,keyPath:C,autoIncrement:P,unique:!0,extractKey:ko(C)},indexes:fu(I.indexNames).map(function(B){return I.index(B)}).map(function(B){var Z=B.name,$=B.unique,Q=B.multiEntry,ve=B.keyPath,Ee=h(ve),ee={name:Z,compound:Ee,keyPath:ve,unique:$,multiEntry:Q,extractKey:ko(ve)};return z[li(ve)]=ee,ee}),getIndexByKeyPath:function(B){return z[li(B)]}};return z[":id"]=U.primaryKey,C!=null&&(z[li(C)]=U.primaryKey),U})},hasGetAll:Y.length>0&&"getAll"in R.objectStore(Y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function l(k){if(k.type===3)return null;if(k.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var R=k.lower,Y=k.upper,I=k.lowerOpen,C=k.upperOpen,P=R===void 0?Y===void 0?null:r.upperBound(Y,!!C):Y===void 0?r.lowerBound(R,!!I):r.bound(R,Y,!!I,!!C);return P}function f(k){var R=k.name;function Y(P){var K=P.trans,j=P.type,z=P.keys,U=P.values,B=P.range;return new Promise(function(Z,$){Z=We(Z);var Q=K.objectStore(R),ve=Q.keyPath==null,Ee=j==="put"||j==="add";if(!Ee&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var ee=(z||U||{length:1}).length;if(z&&U&&z.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(ee===0)return Z({numFailures:0,failures:{},results:[],lastResult:void 0});var be,pe=[],Oe=[],ce=0,Xe=function(cn){++ce,oi(cn)};if(j==="deleteRange"){if(B.type===4)return Z({numFailures:ce,failures:Oe,results:[],lastResult:void 0});B.type===3?pe.push(be=Q.clear()):pe.push(be=Q.delete(l(B)))}else{var bt=Ee?ve?[U,z]:[U,null]:[z,null],ln=bt[0],Pt=bt[1];if(Ee)for(var Yt=0;Yt<ee;++Yt)pe.push(be=Pt&&Pt[Yt]!==void 0?Q[j](ln[Yt],Pt[Yt]):Q[j](ln[Yt])),be.onerror=Xe;else for(var Yt=0;Yt<ee;++Yt)pe.push(be=Q[j](ln[Yt])),be.onerror=Xe}var Gn=function(cn){var di=cn.target.result;pe.forEach(function(tn,fa){return tn.error!=null&&(Oe[fa]=tn.error)}),Z({numFailures:ce,failures:Oe,results:j==="delete"?z:pe.map(function(tn){return tn.result}),lastResult:di})};be.onerror=function(cn){Xe(cn),Gn(cn)},be.onsuccess=Gn})}function I(P){var K=P.trans,j=P.values,z=P.query,U=P.reverse,B=P.unique;return new Promise(function(Z,$){Z=We(Z);var Q=z.index,ve=z.range,Ee=K.objectStore(R),ee=Q.isPrimaryKey?Ee:Ee.index(Q.name),be=U?B?"prevunique":"prev":B?"nextunique":"next",pe=j||!("openKeyCursor"in ee)?ee.openCursor(l(ve),be):ee.openKeyCursor(l(ve),be);pe.onerror=un($),pe.onsuccess=We(function(Oe){var ce=pe.result;if(!ce){Z(null);return}ce.___id=++Yc,ce.done=!1;var Xe=ce.continue.bind(ce),bt=ce.continuePrimaryKey;bt&&(bt=bt.bind(ce));var ln=ce.advance.bind(ce),Pt=function(){throw new Error("Cursor not started")},Yt=function(){throw new Error("Cursor not stopped")};ce.trans=K,ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=Pt,ce.fail=We($),ce.next=function(){var Gn=this,cn=1;return this.start(function(){return cn--?Gn.continue():Gn.stop()}).then(function(){return Gn})},ce.start=function(Gn){var cn=new Promise(function(tn,fa){tn=We(tn),pe.onerror=un(fa),ce.fail=fa,ce.stop=function(Nf){ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=Yt,tn(Nf)}}),di=function(){if(pe.result)try{Gn()}catch(tn){ce.fail(tn)}else ce.done=!0,ce.start=function(){throw new Error("Cursor behind last entry")},ce.stop()};return pe.onsuccess=We(function(tn){pe.onsuccess=di,di()}),ce.continue=Xe,ce.continuePrimaryKey=bt,ce.advance=ln,di(),cn},Z(ce)},$)})}function C(P){return function(K){return new Promise(function(j,z){j=We(j);var U=K.trans,B=K.values,Z=K.limit,$=K.query,Q=Z===1/0?void 0:Z,ve=$.index,Ee=$.range,ee=U.objectStore(R),be=ve.isPrimaryKey?ee:ee.index(ve.name),pe=l(Ee);if(Z===0)return j({result:[]});if(P){var Oe=B?be.getAll(pe,Q):be.getAllKeys(pe,Q);Oe.onsuccess=function(ln){return j({result:ln.target.result})},Oe.onerror=un(z)}else{var ce=0,Xe=B||!("openKeyCursor"in be)?be.openCursor(pe):be.openKeyCursor(pe),bt=[];Xe.onsuccess=function(ln){var Pt=Xe.result;if(!Pt)return j({result:bt});if(bt.push(B?Pt.value:Pt.primaryKey),++ce===Z)return j({result:bt});Pt.continue()},Xe.onerror=un(z)}})}}return{name:R,schema:k,mutate:Y,getMany:function(P){var K=P.trans,j=P.keys;return new Promise(function(z,U){z=We(z);for(var B=K.objectStore(R),Z=j.length,$=new Array(Z),Q=0,ve=0,Ee,ee=function(ce){var Xe=ce.target;($[Xe._pos]=Xe.result)!=null,++ve===Q&&z($)},be=un(U),pe=0;pe<Z;++pe){var Oe=j[pe];Oe!=null&&(Ee=B.get(j[pe]),Ee._pos=pe,Ee.onsuccess=ee,Ee.onerror=be,++Q)}Q===0&&z($)})},get:function(P){var K=P.trans,j=P.key;return new Promise(function(z,U){z=We(z);var B=K.objectStore(R),Z=B.get(j);Z.onsuccess=function($){return z($.target.result)},Z.onerror=un(U)})},query:C(g),openCursor:I,count:function(P){var K=P.query,j=P.trans,z=K.index,U=K.range;return new Promise(function(B,Z){var $=j.objectStore(R),Q=z.isPrimaryKey?$:$.index(z.name),ve=l(U),Ee=ve?Q.count(ve):Q.count();Ee.onsuccess=We(function(ee){return B(ee.target.result)}),Ee.onerror=un(Z)})}}}var v=s(n,a),m=v.schema,g=v.hasGetAll,x=m.tables.map(function(k){return f(k)}),S={};return x.forEach(function(k){return S[k.name]=k}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(k){var R=S[k];if(!R)throw new Error("Table '".concat(k,"' not found"));return S[k]},MIN_KEY:-1/0,MAX_KEY:ui(r),schema:m}}function Zc(n,r){return r.reduce(function(a,s){var l=s.create;return u(u({},a),l(a))},n)}function Qc(n,r,a,s){var l=a.IDBKeyRange;a.indexedDB;var f=Zc(qc(r,l,s),n.dbcore);return{dbcore:f}}function ea(n,r){var a=r.db,s=Qc(n._middlewares,a,n._deps,r);n.core=s.dbcore,n.tables.forEach(function(l){var f=l.name;n.core.schema.tables.some(function(v){return v.name===f})&&(l.core=n.core.table(f),n[f]instanceof n.Table&&(n[f].core=l.core))})}function ta(n,r,a,s){a.forEach(function(l){var f=s[l];r.forEach(function(v){var m=H(v,l);(!m||"value"in m&&m.value===void 0)&&(v===n.Transaction.prototype||v instanceof n.Transaction?L(v,l,{get:function(){return this.table(l)},set:function(g){O(this,l,{value:g,writable:!0,configurable:!0,enumerable:!0})}}):v[l]=new n.Table(l,f))})})}function Ao(n,r){r.forEach(function(a){for(var s in a)a[s]instanceof n.Table&&delete a[s]})}function Xc(n,r){return n._cfg.version-r._cfg.version}function Jc(n,r,a,s){var l=n._dbSchema;a.objectStoreNames.contains("$meta")&&!l.$meta&&(l.$meta=To("$meta",vu("")[0],[]),n._storeNames.push("$meta"));var f=n._createTransaction("readwrite",n._storeNames,l);f.create(a),f._completion.catch(s);var v=f._reject.bind(f),m=le.transless||le;Bn(function(){if(le.trans=f,le.transless=m,r===0)p(l).forEach(function(g){Do(a,g,l[g].primKey,l[g].indexes)}),ea(n,a),X.follow(function(){return n.on.populate.fire(f)}).catch(v);else return ea(n,a),ef(n,f,r).then(function(g){return tf(n,g,f,a)}).catch(v)})}function $c(n,r){du(n._dbSchema,r),r.db.version%10===0&&!r.objectStoreNames.contains("$meta")&&r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var a=ra(n,n.idbdb,r);ia(n,n._dbSchema,r);for(var s=Io(a,n._dbSchema),l=function(x){if(x.change.length||x.recreate)return console.warn("Unable to patch indexes of table ".concat(x.name," because it has changes on the type of index or primary key.")),{value:void 0};var S=r.objectStore(x.name);x.add.forEach(function(k){he&&console.debug("Dexie upgrade patch: Creating missing index ".concat(x.name,".").concat(k.src)),na(S,k)})},f=0,v=s.change;f<v.length;f++){var m=v[f],g=l(m);if(typeof g=="object")return g.value}}function ef(n,r,a){return r.storeNames.includes("$meta")?r.table("$meta").get("version").then(function(s){return s??a}):X.resolve(a)}function tf(n,r,a,s){var l=[],f=n._versions,v=n._dbSchema=ra(n,n.idbdb,s),m=f.filter(function(x){return x._cfg.version>=r});if(m.length===0)return X.resolve();m.forEach(function(x){l.push(function(){var S=v,k=x._cfg.dbschema;ia(n,S,s),ia(n,k,s),v=n._dbSchema=k;var R=Io(S,k);R.add.forEach(function(j){Do(s,j[0],j[1].primKey,j[1].indexes)}),R.change.forEach(function(j){if(j.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var z=s.objectStore(j.name);j.add.forEach(function(U){return na(z,U)}),j.change.forEach(function(U){z.deleteIndex(U.name),na(z,U)}),j.del.forEach(function(U){return z.deleteIndex(U)})});var Y=x._cfg.contentUpgrade;if(Y&&x._cfg.version>r){ea(n,s),a._memoizedTables={};var I=ge(k);R.del.forEach(function(j){I[j]=S[j]}),Ao(n,[n.Transaction.prototype]),ta(n,[n.Transaction.prototype],p(I),I),a.schema=I;var C=en(Y);C&&Lr();var P,K=X.follow(function(){if(P=Y(a),P&&C){var j=jn.bind(null,null);P.then(j,j)}});return P&&typeof P.then=="function"?X.resolve(P):K.then(function(){return P})}}),l.push(function(S){var k=x._cfg.dbschema;nf(k,S),Ao(n,[n.Transaction.prototype]),ta(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),a.schema=n._dbSchema}),l.push(function(S){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===x._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(k){return k!=="$meta"})):S.objectStore("$meta").put(x._cfg.version,"version"))})});function g(){return l.length?X.resolve(l.shift()(a.idbtrans)).then(g):X.resolve()}return g().then(function(){du(v,s)})}function Io(n,r){var a={del:[],add:[],change:[]},s;for(s in n)r[s]||a.del.push(s);for(s in r){var l=n[s],f=r[s];if(!l)a.add.push([s,f]);else{var v={name:s,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(l.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||l.primKey.auto!==f.primKey.auto)v.recreate=!0,a.change.push(v);else{var m=l.idxByName,g=f.idxByName,x=void 0;for(x in m)g[x]||v.del.push(x);for(x in g){var S=m[x],k=g[x];S?S.src!==k.src&&v.change.push(k):v.add.push(k)}(v.del.length>0||v.add.length>0||v.change.length>0)&&a.change.push(v)}}}return a}function Do(n,r,a,s){var l=n.db.createObjectStore(r,a.keyPath?{keyPath:a.keyPath,autoIncrement:a.auto}:{autoIncrement:a.auto});return s.forEach(function(f){return na(l,f)}),l}function du(n,r){p(n).forEach(function(a){r.db.objectStoreNames.contains(a)||(he&&console.debug("Dexie: Creating missing table",a),Do(r,a,n[a].primKey,n[a].indexes))})}function nf(n,r){[].slice.call(r.db.objectStoreNames).forEach(function(a){return n[a]==null&&r.db.deleteObjectStore(a)})}function na(n,r){n.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function ra(n,r,a){var s={},l=M(r.objectStoreNames,0);return l.forEach(function(f){for(var v=a.objectStore(f),m=v.keyPath,g=xo(cu(m),m||"",!0,!1,!!v.autoIncrement,m&&typeof m!="string",!0),x=[],S=0;S<v.indexNames.length;++S){var k=v.index(v.indexNames[S]);m=k.keyPath;var R=xo(k.name,m,!!k.unique,!!k.multiEntry,!1,m&&typeof m!="string",!1);x.push(R)}s[f]=To(f,g,x)}),s}function rf(n,r,a){n.verno=r.version/10;var s=n._dbSchema=ra(n,r,a);n._storeNames=M(r.objectStoreNames,0),ta(n,[n._allTables],p(s),s)}function af(n,r){var a=ra(n,n.idbdb,r),s=Io(a,n._dbSchema);return!(s.add.length||s.change.some(function(l){return l.add.length||l.change.length}))}function ia(n,r,a){for(var s=a.db.objectStoreNames,l=0;l<s.length;++l){var f=s[l],v=a.objectStore(f);n._hasGetAll="getAll"in v;for(var m=0;m<v.indexNames.length;++m){var g=v.indexNames[m],x=v.index(g).keyPath,S=typeof x=="string"?x:"["+M(x).join("+")+"]";if(r[f]){var k=r[f].idxByName[S];k&&(k.name=g,delete r[f].idxByName[S],r[f].idxByName[g]=k)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function vu(n){return n.split(",").map(function(r,a){var s,l=r.split(":"),f=(s=l[1])===null||s===void 0?void 0:s.trim();r=l[0].trim();var v=r.replace(/([&*]|\+\+)/g,""),m=/^\[/.test(v)?v.match(/^\[(.*)\]$/)[1].split("+"):v;return xo(v,m||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),h(m),a===0,f)})}var of=(function(){function n(){}return n.prototype._createTableSchema=function(r,a,s){return To(r,a,s)},n.prototype._parseIndexSyntax=function(r){return vu(r)},n.prototype._parseStoresSpec=function(r,a){var s=this;p(r).forEach(function(l){if(r[l]!==null){var f=s._parseIndexSyntax(r[l]),v=f.shift();if(!v)throw new ue.Schema("Invalid schema for table "+l+": "+r[l]);if(v.unique=!0,v.multi)throw new ue.Schema("Primary key cannot be multiEntry*");f.forEach(function(g){if(g.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")});var m=s._createTableSchema(l,v,f);a[l]=m}})},n.prototype.stores=function(r){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,r):r;var s=a._versions,l={},f={};return s.forEach(function(v){b(l,v._cfg.storesSource),f=v._cfg.dbschema={},v._parseStoresSpec(l,f)}),a._dbSchema=f,Ao(a,[a._allTables,a,a.Transaction.prototype]),ta(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],p(f),f),a._storeNames=p(f),this},n.prototype.upgrade=function(r){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Se,r),this},n})();function sf(n){return ai(of.prototype,function(a){this.db=n,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function So(n,r){var a=n._dbNamesDB;return a||(a=n._dbNamesDB=new Tn(qi,{addons:[],indexedDB:n,IDBKeyRange:r}),a.version(1).stores({dbnames:"name"})),a.table("dbnames")}function Oo(n){return n&&typeof n.databases=="function"}function uf(n){var r=n.indexedDB,a=n.IDBKeyRange;return Oo(r)?Promise.resolve(r.databases()).then(function(s){return s.map(function(l){return l.name}).filter(function(l){return l!==qi})}):So(r,a).toCollection().primaryKeys()}function lf(n,r){var a=n.indexedDB,s=n.IDBKeyRange;!Oo(a)&&r!==qi&&So(a,s).put({name:r}).catch(Se)}function cf(n,r){var a=n.indexedDB,s=n.IDBKeyRange;!Oo(a)&&r!==qi&&So(a,s).delete(r).catch(Se)}function Co(n){return Bn(function(){return le.letThrough=!0,n()})}function ff(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(a){var s=function(){return indexedDB.databases().finally(a)};r=setInterval(s,100),s()}).finally(function(){return clearInterval(r)})}var Lo;function Po(n){return!("from"in n)}var _t=function(n,r){if(this)b(this,arguments.length?{d:1,from:n,to:arguments.length>1?r:n}:{d:0});else{var a=new _t;return n&&"d"in n&&b(a,n),a}};E(_t.prototype,(Lo={add:function(n){return fi(this,n),this},addKey:function(n){return ci(this,n,n),this},addKeys:function(n){var r=this;return n.forEach(function(a){return ci(r,a,a)}),this},hasKey:function(n){var r=aa(this).next(n).value;return r&&De(r.from,n)<=0&&De(r.to,n)>=0}},Lo[Ue]=function(){return aa(this)},Lo));function ci(n,r,a){var s=De(r,a);if(!isNaN(s)){if(s>0)throw RangeError();if(Po(n))return b(n,{from:r,to:a,d:1});var l=n.l,f=n.r;if(De(a,n.from)<0)return l?ci(l,r,a):n.l={from:r,to:a,d:1,l:null,r:null},pu(n);if(De(r,n.to)>0)return f?ci(f,r,a):n.r={from:r,to:a,d:1,l:null,r:null},pu(n);De(r,n.from)<0&&(n.from=r,n.l=null,n.d=f?f.d+1:1),De(a,n.to)>0&&(n.to=a,n.r=null,n.d=n.l?n.l.d+1:1);var v=!n.r;l&&!n.l&&fi(n,l),f&&v&&fi(n,f)}}function fi(n,r){function a(s,l){var f=l.from,v=l.to,m=l.l,g=l.r;ci(s,f,v),m&&a(s,m),g&&a(s,g)}Po(r)||a(n,r)}function hu(n,r){var a=aa(r),s=a.next();if(s.done)return!1;for(var l=s.value,f=aa(n),v=f.next(l.from),m=v.value;!s.done&&!v.done;){if(De(m.from,l.to)<=0&&De(m.to,l.from)>=0)return!0;De(l.from,m.from)<0?l=(s=a.next(m.from)).value:m=(v=f.next(l.from)).value}return!1}function aa(n){var r=Po(n)?null:{s:0,n};return{next:function(a){for(var s=arguments.length>0;r;)switch(r.s){case 0:if(r.s=1,s)for(;r.n.l&&De(a,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!s||De(a,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function pu(n){var r,a,s=(((r=n.r)===null||r===void 0?void 0:r.d)||0)-(((a=n.l)===null||a===void 0?void 0:a.d)||0),l=s>1?"r":s<-1?"l":"";if(l){var f=l==="r"?"l":"r",v=u({},n),m=n[l];n.from=m.from,n.to=m.to,n[l]=m[l],v[l]=m[f],n[f]=v,v.d=mu(v)}n.d=mu(n)}function mu(n){var r=n.r,a=n.l;return(r?a?Math.max(r.d,a.d):r.d:a?a.d:0)+1}function oa(n,r){return p(r).forEach(function(a){n[a]?fi(n[a],r[a]):n[a]=ke(r[a])}),n}function Ro(n,r){return n.all||r.all||Object.keys(n).some(function(a){return r[a]&&hu(r[a],n[a])})}var vr={},Mo={},No=!1;function sa(n,r){oa(Mo,n),No||(No=!0,setTimeout(function(){No=!1;var a=Mo;Mo={},Ko(a,!1)},0))}function Ko(n,r){r===void 0&&(r=!1);var a=new Set;if(n.all)for(var s=0,l=Object.values(vr);s<l.length;s++){var f=l[s];yu(f,n,a,r)}else for(var v in n){var m=/^idb\:\/\/(.*)\/(.*)\//.exec(v);if(m){var g=m[1],x=m[2],f=vr["idb://".concat(g,"/").concat(x)];f&&yu(f,n,a,r)}}a.forEach(function(S){return S()})}function yu(n,r,a,s){for(var l=[],f=0,v=Object.entries(n.queries.query);f<v.length;f++){for(var m=v[f],g=m[0],x=m[1],S=[],k=0,R=x;k<R.length;k++){var Y=R[k];Ro(r,Y.obsSet)?Y.subscribers.forEach(function(K){return a.add(K)}):s&&S.push(Y)}s&&l.push([g,S])}if(s)for(var I=0,C=l;I<C.length;I++){var P=C[I],g=P[0],S=P[1];n.queries.query[g]=S}}function df(n){var r=n._state,a=n._deps.indexedDB;if(r.isBeingOpened||n.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?Je(r.dbOpenError):n});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var s=r.openCanceller,l=Math.round(n.verno*10),f=!1;function v(){if(r.openCanceller!==s)throw new ue.DatabaseClosed("db.open() was cancelled")}var m=r.dbReadyResolve,g=null,x=!1,S=function(){return new X(function(k,R){if(v(),!a)throw new ue.MissingAPI;var Y=n.name,I=r.autoSchema||!l?a.open(Y):a.open(Y,l);if(!I)throw new ue.MissingAPI;I.onerror=un(R),I.onblocked=We(n._fireOnBlocked),I.onupgradeneeded=We(function(C){if(g=I.transaction,r.autoSchema&&!n._options.allowEmptyDB){I.onerror=oi,g.abort(),I.result.close();var P=a.deleteDatabase(Y);P.onsuccess=P.onerror=We(function(){R(new ue.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})}else{g.onerror=un(R);var K=C.oldVersion>Math.pow(2,62)?0:C.oldVersion;x=K<1,n.idbdb=I.result,f&&$c(n,g),Jc(n,K/10,g,R)}},R),I.onsuccess=We(function(){g=null;var C=n.idbdb=I.result,P=M(C.objectStoreNames);if(P.length>0)try{var K=C.transaction(Wc(P),"readonly");if(r.autoSchema)rf(n,C,K);else if(ia(n,n._dbSchema,K),!af(n,K)&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),C.close(),l=C.version+1,f=!0,k(S());ea(n,K)}catch{}Pr.push(n),C.onversionchange=We(function(j){r.vcFired=!0,n.on("versionchange").fire(j)}),C.onclose=We(function(){n.close({disableAutoOpen:!1})}),x&&lf(n._deps,Y),k()},R)}).catch(function(k){switch(k?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),S();break;case"VersionError":if(l>0)return l=0,S();break}return X.reject(k)})};return X.race([s,(typeof navigator>"u"?X.resolve():ff()).then(S)]).then(function(){return v(),r.onReadyBeingFired=[],X.resolve(Co(function(){return n.on.ready.fire(n.vip)})).then(function k(){if(r.onReadyBeingFired.length>0){var R=r.onReadyBeingFired.reduce(xe,Se);return r.onReadyBeingFired=[],X.resolve(Co(function(){return R(n.vip)})).then(k)}})}).finally(function(){r.openCanceller===s&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(k){r.dbOpenError=k;try{g&&g.abort()}catch{}return s===r.openCanceller&&n._close(),Je(k)}).finally(function(){r.openComplete=!0,m()}).then(function(){if(x){var k={};n.tables.forEach(function(R){R.schema.indexes.forEach(function(Y){Y.name&&(k["idb://".concat(n.name,"/").concat(R.name,"/").concat(Y.name)]=new _t(-1/0,[[[]]]))}),k["idb://".concat(n.name,"/").concat(R.name,"/")]=k["idb://".concat(n.name,"/").concat(R.name,"/:dels")]=new _t(-1/0,[[[]]])}),Un(si).fire(k),Ko(k,!0)}return n})}function Fo(n){var r=function(v){return n.next(v)},a=function(v){return n.throw(v)},s=f(r),l=f(a);function f(v){return function(m){var g=v(m),x=g.value;return g.done?x:!x||typeof x.then!="function"?h(x)?Promise.all(x).then(s,l):s(x):x.then(s,l)}}return f(r)()}function vf(n,r,a){var s=arguments.length;if(s<2)throw new ue.InvalidArgument("Too few arguments");for(var l=new Array(s-1);--s;)l[s-1]=arguments[s];a=l.pop();var f=Ke(l);return[n,f,a]}function gu(n,r,a,s,l){return X.resolve().then(function(){var f=le.transless||le,v=n._createTransaction(r,a,n._dbSchema,s);v.explicit=!0;var m={trans:v,transless:f};if(s)v.idbtrans=s.idbtrans;else try{v.create(),v.idbtrans._explicit=!0,n._state.PR1398_maxLoop=3}catch(k){return k.name===sn.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return gu(n,r,a,null,l)})):Je(k)}var g=en(l);g&&Lr();var x,S=X.follow(function(){if(x=l.call(v,v),x)if(g){var k=jn.bind(null,null);x.then(k,k)}else typeof x.next=="function"&&typeof x.throw=="function"&&(x=Fo(x))},m);return(x&&typeof x.then=="function"?X.resolve(x).then(function(k){return v.active?k:Je(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return x})).then(function(k){return s&&v._resolve(),v._completion.then(function(){return k})}).catch(function(k){return v._reject(k),Je(k)})})}function ua(n,r,a){for(var s=h(n)?n.slice():[n],l=0;l<a;++l)s.push(r);return s}function hf(n){return u(u({},n),{table:function(r){var a=n.table(r),s=a.schema,l={},f=[];function v(C,P,K){var j=li(C),z=l[j]=l[j]||[],U=C==null?0:typeof C=="string"?1:C.length,B=P>0,Z=u(u({},K),{name:B?"".concat(j,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:B,keyTail:P,keyLength:U,extractKey:ko(C),unique:!B&&K.unique});if(z.push(Z),Z.isPrimaryKey||f.push(Z),U>1){var $=U===2?C[0]:C.slice(0,U-1);v($,P+1,K)}return z.sort(function(Q,ve){return Q.keyTail-ve.keyTail}),Z}var m=v(s.primaryKey.keyPath,0,s.primaryKey);l[":id"]=[m];for(var g=0,x=s.indexes;g<x.length;g++){var S=x[g];v(S.keyPath,0,S)}function k(C){var P=l[li(C)];return P&&P[0]}function R(C,P){return{type:C.type===1?2:C.type,lower:ua(C.lower,C.lowerOpen?n.MAX_KEY:n.MIN_KEY,P),lowerOpen:!0,upper:ua(C.upper,C.upperOpen?n.MIN_KEY:n.MAX_KEY,P),upperOpen:!0}}function Y(C){var P=C.query.index;return P.isVirtual?u(u({},C),{query:{index:P.lowLevelIndex,range:R(C.query.range,P.keyTail)}}):C}var I=u(u({},a),{schema:u(u({},s),{primaryKey:m,indexes:f,getIndexByKeyPath:k}),count:function(C){return a.count(Y(C))},query:function(C){return a.query(Y(C))},openCursor:function(C){var P=C.query.index,K=P.keyTail,j=P.isVirtual,z=P.keyLength;if(!j)return a.openCursor(C);function U(B){function Z(Q){Q!=null?B.continue(ua(Q,C.reverse?n.MAX_KEY:n.MIN_KEY,K)):C.unique?B.continue(B.key.slice(0,z).concat(C.reverse?n.MIN_KEY:n.MAX_KEY,K)):B.continue()}var $=Object.create(B,{continue:{value:Z},continuePrimaryKey:{value:function(Q,ve){B.continuePrimaryKey(ua(Q,n.MAX_KEY,K),ve)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var Q=B.key;return z===1?Q[0]:Q.slice(0,z)}},value:{get:function(){return B.value}}});return $}return a.openCursor(Y(C)).then(function(B){return B&&U(B)})}});return I}})}var pf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:hf};function Bo(n,r,a,s){return a=a||{},s=s||"",p(n).forEach(function(l){if(!_(r,l))a[s+l]=void 0;else{var f=n[l],v=r[l];if(typeof f=="object"&&typeof v=="object"&&f&&v){var m=Re(f),g=Re(v);m!==g?a[s+l]=r[l]:m==="Object"?Bo(f,v,a,s+l+"."):f!==v&&(a[s+l]=r[l])}else f!==v&&(a[s+l]=r[l])}}),p(r).forEach(function(l){_(n,l)||(a[s+l]=r[l])}),a}function jo(n,r){return r.type==="delete"?r.keys:r.keys||r.values.map(n.extractKey)}var mf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return u(u({},n),{table:function(r){var a=n.table(r),s=a.schema.primaryKey,l=u(u({},a),{mutate:function(f){var v=le.trans,m=v.table(r).hook,g=m.deleting,x=m.creating,S=m.updating;switch(f.type){case"add":if(x.fire===Se)break;return v._promise("readwrite",function(){return k(f)},!0);case"put":if(x.fire===Se&&S.fire===Se)break;return v._promise("readwrite",function(){return k(f)},!0);case"delete":if(g.fire===Se)break;return v._promise("readwrite",function(){return k(f)},!0);case"deleteRange":if(g.fire===Se)break;return v._promise("readwrite",function(){return R(f)},!0)}return a.mutate(f);function k(I){var C=le.trans,P=I.keys||jo(s,I);if(!P)throw new Error("Keys missing");return I=I.type==="add"||I.type==="put"?u(u({},I),{keys:P}):u({},I),I.type!=="delete"&&(I.values=c([],I.values)),I.keys&&(I.keys=c([],I.keys)),yf(a,I,P).then(function(K){var j=P.map(function(z,U){var B=K[U],Z={onerror:null,onsuccess:null};if(I.type==="delete")g.fire.call(Z,z,B,C);else if(I.type==="add"||B===void 0){var $=x.fire.call(Z,z,I.values[U],C);z==null&&$!=null&&(z=$,I.keys[U]=z,s.outbound||de(I.values[U],s.keyPath,z))}else{var Q=Bo(B,I.values[U]),ve=S.fire.call(Z,Q,z,B,C);if(ve){var Ee=I.values[U];Object.keys(ve).forEach(function(ee){_(Ee,ee)?Ee[ee]=ve[ee]:de(Ee,ee,ve[ee])})}}return Z});return a.mutate(I).then(function(z){for(var U=z.failures,B=z.results,Z=z.numFailures,$=z.lastResult,Q=0;Q<P.length;++Q){var ve=B?B[Q]:P[Q],Ee=j[Q];ve==null?Ee.onerror&&Ee.onerror(U[Q]):Ee.onsuccess&&Ee.onsuccess(I.type==="put"&&K[Q]?I.values[Q]:ve)}return{failures:U,results:B,numFailures:Z,lastResult:$}}).catch(function(z){return j.forEach(function(U){return U.onerror&&U.onerror(z)}),Promise.reject(z)})})}function R(I){return Y(I.trans,I.range,1e4)}function Y(I,C,P){return a.query({trans:I,values:!1,query:{index:s,range:C},limit:P}).then(function(K){var j=K.result;return k({type:"delete",keys:j,trans:I}).then(function(z){return z.numFailures>0?Promise.reject(z.failures[0]):j.length<P?{failures:[],numFailures:0,lastResult:void 0}:Y(I,u(u({},C),{lower:j[j.length-1],lowerOpen:!0}),P)})})}}});return l}})}};function yf(n,r,a){return r.type==="add"?Promise.resolve([]):n.getMany({trans:r.trans,keys:a,cache:"immutable"})}function _u(n,r,a){try{if(!r||r.keys.length<n.length)return null;for(var s=[],l=0,f=0;l<r.keys.length&&f<n.length;++l)De(r.keys[l],n[f])===0&&(s.push(a?ze(r.values[l]):r.values[l]),++f);return s.length===n.length?s:null}catch{return null}}var gf={stack:"dbcore",level:-1,create:function(n){return{table:function(r){var a=n.table(r);return u(u({},a),{getMany:function(s){if(!s.cache)return a.getMany(s);var l=_u(s.keys,s.trans._cache,s.cache==="clone");return l?X.resolve(l):a.getMany(s).then(function(f){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?ze(f):f},f})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),a.mutate(s)}})}}}};function bu(n,r){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function wu(n,r){switch(n){case"query":return r.values&&!r.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var _f={stack:"dbcore",level:0,name:"Observability",create:function(n){var r=n.schema.name,a=new _t(n.MIN_KEY,n.MAX_KEY);return u(u({},n),{transaction:function(s,l,f){if(le.subscr&&l!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(le.querier));return n.transaction(s,l,f)},table:function(s){var l=n.table(s),f=l.schema,v=f.primaryKey,m=f.indexes,g=v.extractKey,x=v.outbound,S=v.autoIncrement&&m.filter(function(I){return I.compound&&I.keyPath.includes(v.keyPath)}),k=u(u({},l),{mutate:function(I){var C,P,K=I.trans,j=I.mutatedParts||(I.mutatedParts={}),z=function(pe){var Oe="idb://".concat(r,"/").concat(s,"/").concat(pe);return j[Oe]||(j[Oe]=new _t)},U=z(""),B=z(":dels"),Z=I.type,$=I.type==="deleteRange"?[I.range]:I.type==="delete"?[I.keys]:I.values.length<50?[jo(v,I).filter(function(pe){return pe}),I.values]:[],Q=$[0],ve=$[1],Ee=I.trans._cache;if(h(Q)){U.addKeys(Q);var ee=Z==="delete"||Q.length===ve.length?_u(Q,Ee):null;ee||B.addKeys(Q),(ee||ve)&&bf(z,f,ee,ve)}else if(Q){var be={from:(C=Q.lower)!==null&&C!==void 0?C:n.MIN_KEY,to:(P=Q.upper)!==null&&P!==void 0?P:n.MAX_KEY};B.add(be),U.add(be)}else U.add(a),B.add(a),f.indexes.forEach(function(pe){return z(pe.name).add(a)});return l.mutate(I).then(function(pe){return Q&&(I.type==="add"||I.type==="put")&&(U.addKeys(pe.results),S&&S.forEach(function(Oe){for(var ce=I.values.map(function(Pt){return Oe.extractKey(Pt)}),Xe=Oe.keyPath.findIndex(function(Pt){return Pt===v.keyPath}),bt=0,ln=pe.results.length;bt<ln;++bt)ce[bt][Xe]=pe.results[bt];z(Oe.name).addKeys(ce)})),K.mutatedParts=oa(K.mutatedParts||{},j),pe})}}),R=function(I){var C,P,K=I.query,j=K.index,z=K.range;return[j,new _t((C=z.lower)!==null&&C!==void 0?C:n.MIN_KEY,(P=z.upper)!==null&&P!==void 0?P:n.MAX_KEY)]},Y={get:function(I){return[v,new _t(I.key)]},getMany:function(I){return[v,new _t().addKeys(I.keys)]},count:R,query:R,openCursor:R};return p(Y).forEach(function(I){k[I]=function(C){var P=le.subscr,K=!!P,j=bu(le,l)&&wu(I,C),z=j?C.obsSet={}:P;if(K){var U=function(ee){var be="idb://".concat(r,"/").concat(s,"/").concat(ee);return z[be]||(z[be]=new _t)},B=U(""),Z=U(":dels"),$=Y[I](C),Q=$[0],ve=$[1];if(I==="query"&&Q.isPrimaryKey&&!C.values?Z.add(ve):U(Q.name||"").add(ve),!Q.isPrimaryKey)if(I==="count")Z.add(a);else{var Ee=I==="query"&&x&&C.values&&l.query(u(u({},C),{values:!1}));return l[I].apply(this,arguments).then(function(ee){if(I==="query"){if(x&&C.values)return Ee.then(function(ce){var Xe=ce.result;return B.addKeys(Xe),ee});var be=C.values?ee.result.map(g):ee.result;C.values?B.addKeys(be):Z.addKeys(be)}else if(I==="openCursor"){var pe=ee,Oe=C.values;return pe&&Object.create(pe,{key:{get:function(){return Z.addKey(pe.primaryKey),pe.key}},primaryKey:{get:function(){var ce=pe.primaryKey;return Z.addKey(ce),ce}},value:{get:function(){return Oe&&B.addKey(pe.primaryKey),pe.value}}})}return ee})}}return l[I].apply(this,arguments)}}),k}})}};function bf(n,r,a,s){function l(f){var v=n(f.name||"");function m(x){return x!=null?f.extractKey(x):null}var g=function(x){return f.multiEntry&&h(x)?x.forEach(function(S){return v.addKey(S)}):v.addKey(x)};(a||s).forEach(function(x,S){var k=a&&m(a[S]),R=s&&m(s[S]);De(k,R)!==0&&(k!=null&&g(k),R!=null&&g(R))})}r.indexes.forEach(l)}function Eu(n,r,a){if(a.numFailures===0)return r;if(r.type==="deleteRange")return null;var s=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;if(a.numFailures===s)return null;var l=u({},r);return h(l.keys)&&(l.keys=l.keys.filter(function(f,v){return!(v in a.failures)})),"values"in l&&h(l.values)&&(l.values=l.values.filter(function(f,v){return!(v in a.failures)})),l}function wf(n,r){return r.lower===void 0?!0:r.lowerOpen?De(n,r.lower)>0:De(n,r.lower)>=0}function Ef(n,r){return r.upper===void 0?!0:r.upperOpen?De(n,r.upper)<0:De(n,r.upper)<=0}function zo(n,r){return wf(n,r)&&Ef(n,r)}function xu(n,r,a,s,l,f){if(!a||a.length===0)return n;var v=r.query.index,m=v.multiEntry,g=r.query.range,x=s.schema.primaryKey,S=x.extractKey,k=v.extractKey,R=(v.lowLevelIndex||v).extractKey,Y=a.reduce(function(I,C){var P=I,K=[];if(C.type==="add"||C.type==="put")for(var j=new _t,z=C.values.length-1;z>=0;--z){var U=C.values[z],B=S(U);if(!j.hasKey(B)){var Z=k(U);(m&&h(Z)?Z.some(function(ee){return zo(ee,g)}):zo(Z,g))&&(j.addKey(B),K.push(U))}}switch(C.type){case"add":{var $=new _t().addKeys(r.values?I.map(function(ee){return S(ee)}):I);P=I.concat(r.values?K.filter(function(ee){var be=S(ee);return $.hasKey(be)?!1:($.addKey(be),!0)}):K.map(function(ee){return S(ee)}).filter(function(ee){return $.hasKey(ee)?!1:($.addKey(ee),!0)}));break}case"put":{var Q=new _t().addKeys(C.values.map(function(ee){return S(ee)}));P=I.filter(function(ee){return!Q.hasKey(r.values?S(ee):ee)}).concat(r.values?K:K.map(function(ee){return S(ee)}));break}case"delete":var ve=new _t().addKeys(C.keys);P=I.filter(function(ee){return!ve.hasKey(r.values?S(ee):ee)});break;case"deleteRange":var Ee=C.range;P=I.filter(function(ee){return!zo(S(ee),Ee)});break}return P},n);return Y===n?n:(Y.sort(function(I,C){return De(R(I),R(C))||De(S(I),S(C))}),r.limit&&r.limit<1/0&&(Y.length>r.limit?Y.length=r.limit:n.length===r.limit&&Y.length<r.limit&&(l.dirty=!0)),f?Object.freeze(Y):Y)}function Tu(n,r){return De(n.lower,r.lower)===0&&De(n.upper,r.upper)===0&&!!n.lowerOpen==!!r.lowerOpen&&!!n.upperOpen==!!r.upperOpen}function xf(n,r,a,s){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;var l=De(n,r);if(l===0){if(a&&s)return 0;if(a)return 1;if(s)return-1}return l}function Tf(n,r,a,s){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;var l=De(n,r);if(l===0){if(a&&s)return 0;if(a)return-1;if(s)return 1}return l}function kf(n,r){return xf(n.lower,r.lower,n.lowerOpen,r.lowerOpen)<=0&&Tf(n.upper,r.upper,n.upperOpen,r.upperOpen)>=0}function Af(n,r,a,s){var l=vr["idb://".concat(n,"/").concat(r)];if(!l)return[];var f=l.queries[a];if(!f)return[null,!1,l,null];var v=s.query?s.query.index.name:null,m=f[v||""];if(!m)return[null,!1,l,null];switch(a){case"query":var g=m.find(function(k){return k.req.limit===s.limit&&k.req.values===s.values&&Tu(k.req.query.range,s.query.range)});if(g)return[g,!0,l,m];var x=m.find(function(k){var R="limit"in k.req?k.req.limit:1/0;return R>=s.limit&&(s.values?k.req.values:!0)&&kf(k.req.query.range,s.query.range)});return[x,!1,l,m];case"count":var S=m.find(function(k){return Tu(k.req.query.range,s.query.range)});return[S,!!S,l,m]}}function If(n,r,a,s){n.subscribers.add(a),s.addEventListener("abort",function(){n.subscribers.delete(a),n.subscribers.size===0&&Df(n,r)})}function Df(n,r){setTimeout(function(){n.subscribers.size===0&&Be(r,n)},3e3)}var Sf={stack:"dbcore",level:0,name:"Cache",create:function(n){var r=n.schema.name,a=u(u({},n),{transaction:function(s,l,f){var v=n.transaction(s,l,f);if(l==="readwrite"){var m=new AbortController,g=m.signal,x=function(S){return function(){if(m.abort(),l==="readwrite"){for(var k=new Set,R=0,Y=s;R<Y.length;R++){var I=Y[R],C=vr["idb://".concat(r,"/").concat(I)];if(C){var P=n.table(I),K=C.optimisticOps.filter(function(Oe){return Oe.trans===v});if(v._explicit&&S&&v.mutatedParts)for(var j=0,z=Object.values(C.queries.query);j<z.length;j++)for(var U=z[j],B=0,Z=U.slice();B<Z.length;B++){var $=Z[B];Ro($.obsSet,v.mutatedParts)&&(Be(U,$),$.subscribers.forEach(function(Oe){return k.add(Oe)}))}else if(K.length>0){C.optimisticOps=C.optimisticOps.filter(function(Oe){return Oe.trans!==v});for(var Q=0,ve=Object.values(C.queries.query);Q<ve.length;Q++)for(var U=ve[Q],Ee=0,ee=U.slice();Ee<ee.length;Ee++){var $=ee[Ee];if($.res!=null&&v.mutatedParts)if(S&&!$.dirty){var be=Object.isFrozen($.res),pe=xu($.res,$.req,K,P,$,be);$.dirty?(Be(U,$),$.subscribers.forEach(function(Xe){return k.add(Xe)})):pe!==$.res&&($.res=pe,$.promise=X.resolve({result:pe}))}else $.dirty&&Be(U,$),$.subscribers.forEach(function(Xe){return k.add(Xe)})}}}}k.forEach(function(Oe){return Oe()})}}};v.addEventListener("abort",x(!1),{signal:g}),v.addEventListener("error",x(!1),{signal:g}),v.addEventListener("complete",x(!0),{signal:g})}return v},table:function(s){var l=n.table(s),f=l.schema.primaryKey,v=u(u({},l),{mutate:function(m){var g=le.trans;if(f.outbound||g.db._options.cache==="disabled"||g.explicit||g.idbtrans.mode!=="readwrite")return l.mutate(m);var x=vr["idb://".concat(r,"/").concat(s)];if(!x)return l.mutate(m);var S=l.mutate(m);return(m.type==="add"||m.type==="put")&&(m.values.length>=50||jo(f,m).some(function(k){return k==null}))?S.then(function(k){var R=u(u({},m),{values:m.values.map(function(I,C){var P;if(k.failures[C])return I;var K=!((P=f.keyPath)===null||P===void 0)&&P.includes(".")?ze(I):u({},I);return de(K,f.keyPath,k.results[C]),K})}),Y=Eu(x,R,k);x.optimisticOps.push(Y),queueMicrotask(function(){return m.mutatedParts&&sa(m.mutatedParts)})}):(x.optimisticOps.push(m),m.mutatedParts&&sa(m.mutatedParts),S.then(function(k){if(k.numFailures>0){Be(x.optimisticOps,m);var R=Eu(x,m,k);R&&x.optimisticOps.push(R),m.mutatedParts&&sa(m.mutatedParts)}}),S.catch(function(){Be(x.optimisticOps,m),m.mutatedParts&&sa(m.mutatedParts)})),S},query:function(m){var g;if(!bu(le,l)||!wu("query",m))return l.query(m);var x=((g=le.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",S=le,k=S.requery,R=S.signal,Y=Af(r,s,"query",m),I=Y[0],C=Y[1],P=Y[2],K=Y[3];if(I&&C)I.obsSet=m.obsSet;else{var j=l.query(m).then(function(z){var U=z.result;if(I&&(I.res=U),x){for(var B=0,Z=U.length;B<Z;++B)Object.freeze(U[B]);Object.freeze(U)}else z.result=ze(U);return z}).catch(function(z){return K&&I&&Be(K,I),Promise.reject(z)});I={obsSet:m.obsSet,promise:j,subscribers:new Set,type:"query",req:m,dirty:!1},K?K.push(I):(K=[I],P||(P=vr["idb://".concat(r,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),P.queries.query[m.query.index.name||""]=K)}return If(I,K,k,R),I.promise.then(function(z){return{result:xu(z.result,m,P?.optimisticOps,l,I,x)}})}});return v}});return a}};function la(n,r){return new Proxy(n,{get:function(a,s,l){return s==="db"?r:Reflect.get(a,s,l)}})}var Tn=(function(){function n(r,a){var s=this;this._middlewares={},this.verno=0;var l=n.dependencies;this._options=a=u({addons:n.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange};var f=a.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};v.dbReadyPromise=new X(function(g){v.dbReadyResolve=g}),v.openCanceller=new X(function(g,x){v.cancelOpen=x}),this._state=v,this.name=r,this.on=ii(this,"populate","blocked","versionchange","close",{ready:[xe,Se]}),this.once=function(g,x){var S=function(){for(var k=[],R=0;R<arguments.length;R++)k[R]=arguments[R];s.on(g).unsubscribe(S),x.apply(s,k)};return s.on(g,S)},this.on.ready.subscribe=W(this.on.ready.subscribe,function(g){return function(x,S){n.vip(function(){var k=s._state;if(k.openComplete)k.dbOpenError||X.resolve().then(x),S&&g(x);else if(k.onReadyBeingFired)k.onReadyBeingFired.push(x),S&&g(x);else{g(x);var R=s;S||g(function Y(){R.on.ready.unsubscribe(x),R.on.ready.unsubscribe(Y)})}})}}),this.Collection=Nc(this),this.Table=Pc(this),this.Transaction=Vc(this),this.Version=sf(this),this.WhereClause=Hc(this),this.on("versionchange",function(g){g.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(g){!g.newVersion||g.newVersion<g.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(g.oldVersion/10))}),this._maxKey=ui(a.IDBKeyRange),this._createTransaction=function(g,x,S,k){return new s.Transaction(g,x,S,s._options.chromeTransactionDurability,k)},this._fireOnBlocked=function(g){s.on("blocked").fire(g),Pr.filter(function(x){return x.name===s.name&&x!==s&&!x._state.vcFired}).map(function(x){return x.on("versionchange").fire(g)})},this.use(gf),this.use(Sf),this.use(_f),this.use(pf),this.use(mf);var m=new Proxy(this,{get:function(g,x,S){if(x==="_vip")return!0;if(x==="table")return function(R){return la(s.table(R),m)};var k=Reflect.get(g,x,S);return k instanceof iu?la(k,m):x==="tables"?k.map(function(R){return la(R,m)}):x==="_createTransaction"?function(){var R=k.apply(this,arguments);return la(R,m)}:k}});this.vip=m,f.forEach(function(g){return g(s)})}return n.prototype.version=function(r){if(isNaN(r)||r<.1)throw new ue.Type("Given version is not a positive number");if(r=Math.round(r*10)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var a=this._versions,s=a.filter(function(l){return l._cfg.version===r})[0];return s||(s=new this.Version(r),a.push(s),a.sort(Xc),s.stores({}),this._state.autoSchema=!1,s)},n.prototype._whenReady=function(r){var a=this;return this.idbdb&&(this._state.openComplete||le.letThrough||this._vip)?r():new X(function(s,l){if(a._state.openComplete)return l(new ue.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen){l(new ue.DatabaseClosed);return}a.open().catch(Se)}a._state.dbReadyPromise.then(s,l)}).then(r)},n.prototype.use=function(r){var a=r.stack,s=r.create,l=r.level,f=r.name;f&&this.unuse({stack:a,name:f});var v=this._middlewares[a]||(this._middlewares[a]=[]);return v.push({stack:a,create:s,level:l??10,name:f}),v.sort(function(m,g){return m.level-g.level}),this},n.prototype.unuse=function(r){var a=r.stack,s=r.name,l=r.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return l?f.create!==l:s?f.name!==s:!1})),this},n.prototype.open=function(){var r=this;return cr(Fn,function(){return df(r)})},n.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,a=Pr.indexOf(this);if(a>=0&&Pr.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new X(function(s){r.dbReadyResolve=s}),r.openCanceller=new X(function(s,l){r.cancelOpen=l}))},n.prototype.close=function(r){var a=r===void 0?{disableAutoOpen:!0}:r,s=a.disableAutoOpen,l=this._state;s?(l.isBeingOpened&&l.cancelOpen(new ue.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new ue.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},n.prototype.delete=function(r){var a=this;r===void 0&&(r={disableAutoOpen:!0});var s=arguments.length>0&&typeof arguments[0]!="object",l=this._state;return new X(function(f,v){var m=function(){a.close(r);var g=a._deps.indexedDB.deleteDatabase(a.name);g.onsuccess=We(function(){cf(a._deps,a.name),f()}),g.onerror=un(v),g.onblocked=a._fireOnBlocked};if(s)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");l.isBeingOpened?l.dbReadyPromise.then(m):m()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var r=this;return p(this._allTables).map(function(a){return r._allTables[a]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var r=vf.apply(this,arguments);return this._transaction.apply(this,r)},n.prototype._transaction=function(r,a,s){var l=this,f=le.trans;(!f||f.db!==this||r.indexOf("!")!==-1)&&(f=null);var v=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");var m,g;try{if(g=a.map(function(S){var k=S instanceof l.Table?S.name:S;if(typeof k!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return k}),r=="r"||r===go)m=go;else if(r=="rw"||r==_o)m=_o;else throw new ue.InvalidArgument("Invalid transaction mode: "+r);if(f){if(f.mode===go&&m===_o)if(v)f=null;else throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f&&g.forEach(function(S){if(f&&f.storeNames.indexOf(S)===-1)if(v)f=null;else throw new ue.SubTransaction("Table "+S+" not included in parent transaction.")}),v&&f&&!f.active&&(f=null)}}catch(S){return f?f._promise(null,function(k,R){R(S)}):Je(S)}var x=gu.bind(null,this,m,g,f,s);return f?f._promise(m,x,"lock"):le.trans?cr(le.transless,function(){return l._whenReady(x)}):this._whenReady(x)},n.prototype.table=function(r){if(!_(this._allTables,r))throw new ue.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},n})(),Of=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Cf=(function(){function n(r){this._subscribe=r}return n.prototype.subscribe=function(r,a,s){return this._subscribe(!r||typeof r=="function"?{next:r,error:a,complete:s}:r)},n.prototype[Of]=function(){return this},n})(),ca;try{ca={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{ca={indexedDB:null,IDBKeyRange:null}}function ku(n){var r=!1,a,s=new Cf(function(l){var f=en(n);function v(K){var j=Or();try{f&&Lr();var z=Bn(n,K);return f&&(z=z.finally(jn)),z}finally{j&&Cr()}}var m=!1,g,x={},S={},k={get closed(){return m},unsubscribe:function(){m||(m=!0,g&&g.abort(),R&&Un.storagemutated.unsubscribe(C))}};l.start&&l.start(k);var R=!1,Y=function(){return po(P)};function I(){return Ro(S,x)}var C=function(K){oa(x,K),I()&&Y()},P=function(){if(!(m||!ca.indexedDB)){x={};var K={};g&&g.abort(),g=new AbortController;var j={subscr:K,signal:g.signal,requery:Y,querier:n,trans:null},z=v(j);Promise.resolve(z).then(function(U){r=!0,a=U,!(m||j.signal.aborted)&&(x={},S=K,!gt(S)&&!R&&(Un(si,C),R=!0),po(function(){return!m&&l.next&&l.next(U)}))},function(U){r=!1,["DatabaseClosedError","AbortError"].includes(U?.name)||m||po(function(){m||l.error&&l.error(U)})})}};return setTimeout(Y,0),k});return s.hasValue=function(){return r},s.getValue=function(){return a},s}var hr=Tn;E(hr,u(u({},wn),{delete:function(n){var r=new hr(n,{addons:[]});return r.delete()},exists:function(n){return new hr(n,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return uf(hr.dependencies).then(n)}catch{return Je(new ue.MissingAPI)}},defineClass:function(){function n(r){b(this,r)}return n},ignoreTransaction:function(n){return le.trans?cr(le.transless,n):n()},vip:Co,async:function(n){return function(){try{var r=Fo(n.apply(this,arguments));return!r||typeof r.then!="function"?X.resolve(r):r}catch(a){return Je(a)}}},spawn:function(n,r,a){try{var s=Fo(n.apply(a,r||[]));return!s||typeof s.then!="function"?X.resolve(s):s}catch(l){return Je(l)}},currentTransaction:{get:function(){return le.trans||null}},waitFor:function(n,r){var a=X.resolve(typeof n=="function"?hr.ignoreTransaction(n):n).timeout(r||6e4);return le.trans?le.trans.waitFor(a):a},Promise:X,debug:{get:function(){return he},set:function(n){Qe(n)}},derive:D,extend:b,props:E,override:W,Events:ii,on:Un,liveQuery:ku,extendObservabilitySet:oa,getByKeyPath:se,setByKeyPath:de,delByKeyPath:ie,shallowClone:ge,deepClone:ze,getObjectDiff:Bo,cmp:De,asap:oe,minKey:yo,addons:[],connections:Pr,errnames:sn,dependencies:ca,cache:vr,semVer:Xs,version:Xs.split(".").map(function(n){return parseInt(n)}).reduce(function(n,r,a){return n+r/Math.pow(10,a*2)})})),hr.maxKey=ui(hr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Un(si,function(n){if(!Vn){var r;r=new CustomEvent(Eo,{detail:n}),Vn=!0,dispatchEvent(r),Vn=!1}}),addEventListener(Eo,function(n){var r=n.detail;Vn||Ho(r)}));function Ho(n){var r=Vn;try{Vn=!0,Un.storagemutated.fire(n),Ko(n,!0)}finally{Vn=r}}var Vn=!1,Wn,Uo=function(){};typeof BroadcastChannel<"u"&&(Uo=function(){Wn=new BroadcastChannel(Eo),Wn.onmessage=function(n){return n.data&&Ho(n.data)}},Uo(),typeof Wn.unref=="function"&&Wn.unref(),Un(si,function(n){Vn||Wn.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Tn.disableBfCache&&n.persisted){he&&console.debug("Dexie: handling persisted pagehide"),Wn?.close();for(var r=0,a=Pr;r<a.length;r++){var s=a[r];s.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(n){!Tn.disableBfCache&&n.persisted&&(he&&console.debug("Dexie: handling persisted pageshow"),Uo(),Ho({all:new _t(-1/0,[[]])}))}));function Lf(n){return new ri({add:n})}function Pf(n){return new ri({remove:n})}function Rf(n,r){return new ri({replacePrefix:[n,r]})}X.rejectionMapper=Sr,Qe(he);var Mf=Object.freeze({__proto__:null,Dexie:Tn,liveQuery:ku,Entity:eu,cmp:De,PropModification:ri,replacePrefix:Rf,add:Lf,remove:Pf,default:Tn,RangeSet:_t,mergeRanges:fi,rangesOverlap:hu});return u(Tn,Mf,{default:Tn}),Tn}))})(_a)),_a.exports}var Nv=Mv();const fs=Pv(Nv),Hu=Symbol.for("Dexie"),La=globalThis[Hu]||(globalThis[Hu]=fs);if(fs.semVer!==La.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${fs.semVer} and ${La.semVer}`);const{liveQuery:Pa,mergeRanges:gm,rangesOverlap:_m,RangeSet:bm,cmp:wm,Entity:Em,PropModification:xm,replacePrefix:Tm,add:km,remove:Am,DexieYProvider:Im}=La;function Uu(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,o)}return i}function Ra(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Uu(Object(i),!0).forEach(function(o){Zr(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Uu(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function Fr(e){"@babel/helpers - typeof";return Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fr(e)}function Zr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Kv(e,t){if(e==null)return{};var i={},o=Object.keys(e),u,c;for(c=0;c<o.length;c++)u=o[c],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function Fv(e,t){if(e==null)return{};var i=Kv(e,t),o,u;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(u=0;u<c.length;u++)o=c[u],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function Bv(e,t){return zv(e)||Uv(e,t)||js(e,t)||Wv()}function $t(e){return jv(e)||Hv(e)||js(e)||Vv()}function jv(e){if(Array.isArray(e))return ds(e)}function zv(e){if(Array.isArray(e))return e}function Hv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uv(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var o=[],u=!0,c=!1,d,p;try{for(i=i.call(e);!(u=(d=i.next()).done)&&(o.push(d.value),!(t&&o.length===t));u=!0);}catch(h){c=!0,p=h}finally{try{!u&&i.return!=null&&i.return()}finally{if(c)throw p}}return o}}function js(e,t){if(e){if(typeof e=="string")return ds(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ds(e,t)}}function ds(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function Vv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mi(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=js(e))||t){i&&(e=i);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(h){throw h},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,d=!1,p;return{s:function(){i=i.call(e)},n:function(){var h=i.next();return c=h.done,h},e:function(h){d=!0,p=h},f:function(){try{!c&&i.return!=null&&i.return()}finally{if(d)throw p}}}}var Gv="finalize",Yv="consider";function Qr(e,t,i){e.dispatchEvent(new CustomEvent(Gv,{detail:{items:t,info:i}}))}function rr(e,t,i){e.dispatchEvent(new CustomEvent(Yv,{detail:{items:t,info:i}}))}var Ja="draggedEntered",Ni="draggedLeft",$a="draggedOverIndex",zs="draggedLeftDocument",Ma={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function qv(e,t,i){e.dispatchEvent(new CustomEvent(Ja,{detail:{indexObj:t,draggedEl:i}}))}function Zv(e,t,i){e.dispatchEvent(new CustomEvent(Ni,{detail:{draggedEl:t,type:Ma.LEFT_FOR_ANOTHER,theOtherDz:i}}))}function Qv(e,t){e.dispatchEvent(new CustomEvent(Ni,{detail:{draggedEl:t,type:Ma.OUTSIDE_OF_ANY}}))}function Xv(e,t,i){e.dispatchEvent(new CustomEvent($a,{detail:{indexObj:t,draggedEl:i}}))}function Jv(e){window.dispatchEvent(new CustomEvent(zs,{detail:{draggedEl:e}}))}var Ct={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Ja,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:$a,DRAGGED_LEFT:Ni,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Ft={POINTER:"pointer",KEYBOARD:"keyboard"},eo="isDndShadowItem",to="data-is-dnd-shadow-item-internal",$v="data-is-dnd-shadow-item-hint",tc="id:dnd-shadow-placeholder-0000",eh="dnd-action-dragged-el",at="id",vs=0;function nc(){vs++}function rc(){if(vs===0)throw new Error("Bug! trying to decrement when there are no dropzones");vs--}var Hs=typeof window>"u";function hs(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i,o=t?rh(e):e.getBoundingClientRect(),u=getComputedStyle(e),c=u.transform;if(c){var d,p,h,b;if(c.startsWith("matrix3d("))i=c.slice(9,-1).split(/, /),d=+i[0],p=+i[5],h=+i[12],b=+i[13];else if(c.startsWith("matrix("))i=c.slice(7,-1).split(/, /),d=+i[0],p=+i[3],h=+i[4],b=+i[5];else return o;var w=u.transformOrigin,T=o.x-h-(1-d)*parseFloat(w),_=o.y-b-(1-p)*parseFloat(w.slice(w.indexOf(" ")+1)),E=d?o.width/d:e.offsetWidth,O=p?o.height/p:e.offsetHeight;return{x:T,y:_,width:E,height:O,top:_,right:T+E,bottom:_+O,left:T}}else return o}function ic(e){var t=hs(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function ac(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function oc(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function th(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function no(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function Ii(e){return oc(ac(e))}function Vu(e,t){var i=Ii(e),o=ic(t);return no(i,o)}function Wu(e,t){var i=Ii(e),o=Ii(t);return th(i,o)}function nh(e){var t=ac(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function rh(e){for(var t=e.getBoundingClientRect(),i={top:t.top,bottom:t.bottom,left:t.left,right:t.right},o=!1,u=!1,c=e.parentElement;c&&c!==document.body;){var d=window.getComputedStyle(c),p=d.overflowY,h=d.overflowX,b=p==="scroll"||p==="auto",w=h==="scroll"||h==="auto";if(b||w){var T=c.getBoundingClientRect();if(b){var _=Math.max(i.top,T.top),E=Math.min(i.bottom,T.bottom);(_!==i.top||E!==i.bottom)&&(o=!0),i.top=_,i.bottom=E}if(w){var O=Math.max(i.left,T.left),L=Math.min(i.right,T.right);(O!==i.left||L!==i.right)&&(u=!0),i.left=O,i.right=L}}c=c.parentElement}return o||u?{top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:Math.max(0,i.right-i.left),height:Math.max(0,i.bottom-i.top)}:{top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:Math.max(0,t.right-t.left),height:Math.max(0,t.bottom-t.top)}}var zr;function Us(){zr=new Map}Us();function ih(e){var t=Array.from(e.children).findIndex(function(i){return i.getAttribute(to)});if(t>=0)return zr.has(e)||zr.set(e,new Map),zr.get(e).set(t,ic(e.children[t])),t}function ah(e,t){if(!Vu(e,t))return null;var i=t.children;if(i.length===0)return{index:0,isProximityBased:!0};for(var o=ih(t),u=0;u<i.length;u++)if(Vu(e,i[u])){var c=zr.has(t)&&zr.get(t).get(u);return c&&!no(Ii(e),c)?{index:o,isProximityBased:!1}:{index:u,isProximityBased:!1}}for(var d=Number.MAX_VALUE,p=void 0,h=0;h<i.length;h++){var b=Wu(e,i[h]);b<d&&(d=b,p=h)}if(i.length>0){var w=i.length,T=i[w-1],_=T.cloneNode(!1);_.style.visibility="hidden",_.style.pointerEvents="none",t.appendChild(_);var E=Wu(e,_);E<d&&(p=w),t.removeChild(_)}return{index:p,isProximityBased:!0}}function pi(e){return JSON.stringify(e,null,2)}function Na(e){if(!e)throw new Error("cannot get depth of a falsy node");return sc(e,0)}function sc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?sc(e.parentElement,t+1):t-1}function oh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!{}.hasOwnProperty.call(t,i)||t[i]!==e[i])return!1;return!0}function sh(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var uh=200,Gu=10,ps;function lh(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uh,o=arguments.length>3?arguments[3]:void 0,u,c,d=!1,p,h=Array.from(t).sort(function(w,T){return Na(T)-Na(w)});function b(){var w=Ii(e),T=o.multiScrollIfNeeded();if(!T&&p&&Math.abs(p.x-w.x)<Gu&&Math.abs(p.y-w.y)<Gu){ps=window.setTimeout(b,i);return}if(nh(e)){Jv(e);return}p=w;var _=!1,E=Mi(h),O;try{for(E.s();!(O=E.n()).done;){var L=O.value;T&&Us();var D=ah(e,L);if(D!==null){var A=D.index;_=!0,L!==u?(u&&Zv(u,e,L),qv(L,D,e),u=L):A!==c&&(Xv(L,D,e),c=A);break}}}catch(H){E.e(H)}finally{E.f()}!_&&d&&u?(Qv(u,e),u=void 0,c=void 0,d=!1):d=!0,ps=window.setTimeout(b,i)}b()}function ch(){clearTimeout(ps),Us()}var mi=30;function fh(){var e;function t(){e={directionObj:void 0,stepPx:0}}t();function i(c){var d=e,p=d.directionObj,h=d.stepPx;p&&(c.scrollBy(p.x*h,p.y*h),window.requestAnimationFrame(function(){return i(c)}))}function o(c){return mi-c}function u(c,d){if(!d)return!1;var p=dh(c,d),h=!!e.directionObj;if(p===null)return h&&t(),!1;var b=!1,w=!1;return d.scrollHeight>d.clientHeight&&(p.bottom<mi?(b=!0,e.directionObj={x:0,y:1},e.stepPx=o(p.bottom)):p.top<mi&&(b=!0,e.directionObj={x:0,y:-1},e.stepPx=o(p.top)),!h&&b)||d.scrollWidth>d.clientWidth&&(p.right<mi?(w=!0,e.directionObj={x:1,y:0},e.stepPx=o(p.right)):p.left<mi&&(w=!0,e.directionObj={x:-1,y:0},e.stepPx=o(p.left)),!h&&w)?(i(d),!0):(t(),!1)}return{scrollIfNeeded:u,resetScrolling:t}}function dh(e,t){var i=t===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:t.getBoundingClientRect();return no(e,i)?{top:e.y-i.top,bottom:i.bottom-e.y,left:e.x-i.left,right:i.right-e.x}:null}function vh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=ph(e),o=Array.from(i).sort(function(h,b){return Na(b)-Na(h)}),u=fh(),c=u.scrollIfNeeded,d=u.resetScrolling;function p(){var h=t();if(!h||!o)return!1;for(var b=o.filter(function(_){return no(h,_.getBoundingClientRect())||_===document.scrollingElement}),w=0;w<b.length;w++){var T=c(h,b[w]);if(T)return!0}return!1}return{multiScrollIfNeeded:i.size>0?p:function(){return!1},destroy:function(){return d()}}}function hh(e){if(!e)return[];for(var t=[],i=e;i;){var o=window.getComputedStyle(i),u=o.overflow;u.split(" ").some(function(c){return c.includes("auto")||c.includes("scroll")})&&t.push(i),i=i.parentElement}return t}function ph(e){var t=new Set,i=Mi(e),o;try{for(i.s();!(o=i.n()).done;){var u=o.value;hh(u).forEach(function(c){return t.add(c)})}}catch(c){i.e(c)}finally{i.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&t.add(document.scrollingElement),t}function mh(e){var t=e.cloneNode(!0),i=[],o=e.tagName==="SELECT",u=o?[e]:$t(e.querySelectorAll("select")),c=Mi(u),d;try{for(c.s();!(d=c.n()).done;){var p=d.value;i.push(p.value)}}catch(F){c.e(F)}finally{c.f()}if(u.length>0)for(var h=o?[t]:$t(t.querySelectorAll("select")),b=0;b<h.length;b++){var w=h[b],T=i[b],_=w.querySelector('option[value="'.concat(T,'"'));_&&_.setAttribute("selected",!0)}var E=e.tagName==="CANVAS",O=E?[e]:$t(e.querySelectorAll("canvas"));if(O.length>0)for(var L=E?[t]:$t(t.querySelectorAll("canvas")),D=0;D<L.length;D++){var A=O[D],H=L[D];H.width=A.width,H.height=A.height,A.width>0&&A.height>0&&H.getContext("2d").drawImage(A,0,0)}return t}var Di=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),yh=Zr({},Di.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function uc(e){if(!Di[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Di)));return yh[e]}var gh=.2;function mr(e){return"".concat(e," ").concat(gh,"s ease")}function _h(e,t){var i=e.getBoundingClientRect(),o=mh(e);lc(e,o),o.id=eh,o.style.position="fixed";var u=i.top,c=i.left;if(o.style.top="".concat(u,"px"),o.style.left="".concat(c,"px"),t){var d=oc(i);u-=d.y-t.y,c-=d.x-t.x,window.setTimeout(function(){o.style.top="".concat(u,"px"),o.style.left="".concat(c,"px")},0)}return o.style.margin="0",o.style.boxSizing="border-box",o.style.height="".concat(i.height,"px"),o.style.width="".concat(i.width,"px"),o.style.transition="".concat(mr("top"),", ").concat(mr("left"),", ").concat(mr("background-color"),", ").concat(mr("opacity"),", ").concat(mr("color")," "),window.setTimeout(function(){return o.style.transition+=", ".concat(mr("width"),", ").concat(mr("height"))},0),o.style.zIndex="9999",o.style.cursor="grabbing",o}function bh(e){e.style.cursor="grab"}function wh(e,t,i,o){lc(t,e);var u=t.getBoundingClientRect(),c=e.getBoundingClientRect(),d=u.width-c.width,p=u.height-c.height;if(d||p){var h={left:(i-c.left)/c.width,top:(o-c.top)/c.height};uc(Di.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(u.height,"px"),e.style.width="".concat(u.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-h.left*d,"px"),e.style.top="".concat(parseFloat(e.style.top)-h.top*p,"px")}}function lc(e,t){var i=window.getComputedStyle(e);Array.from(i).filter(function(o){return o.startsWith("background")||o.startsWith("padding")||o.startsWith("font")||o.startsWith("text")||o.startsWith("align")||o.startsWith("justify")||o.startsWith("display")||o.startsWith("flex")||o.startsWith("border")||o==="opacity"||o==="color"||o==="list-style-type"||uc(Di.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(o==="width"||o==="height")}).forEach(function(o){return t.style.setProperty(o,i.getPropertyValue(o),i.getPropertyPriority(o))})}function Eh(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function cc(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function xh(e){e.style.visibility="hidden",e.setAttribute(to,"true")}function Th(e){e.style.visibility="",e.removeAttribute(to)}function ba(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(o){var u=t(o);Object.keys(u).forEach(function(c){o.style[c]=u[c]}),i(o).forEach(function(c){return o.classList.add(c)})})}function Ka(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(o){var u=t(o);Object.keys(u).forEach(function(c){o.style[c]=""}),i(o).forEach(function(c){return o.classList.contains(c)&&o.classList.remove(c)})})}function kh(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var i=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=i}}var Ah="--any--",Ih=100,Dh=20,ha=3,Sh=80,Yu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},qu="data-is-dnd-original-dragged-item",Rt,ut,Nt,ro,Ye,io,$n,pt,vn,wt,Yn=!1,Vs=!1,Ws,Ki=!1,wa=[],Ei,hn,gi=!1,rn=new Map,$e=new Map,Xo=new WeakMap;function Oh(e,t){rn.has(t)||rn.set(t,new Set),rn.get(t).has(e)||(rn.get(t).add(e),nc())}function Zu(e,t){rn.get(t).delete(e),rc(),rn.get(t).size===0&&rn.delete(t)}function Ch(){var e=rn.get(ro),t=Mi(e),i;try{for(t.s();!(i=t.n()).done;){var o=i.value;o.addEventListener(Ja,fc),o.addEventListener(Ni,dc),o.addEventListener($a,vc)}}catch(d){t.e(d)}finally{t.f()}window.addEventListener(zs,Xr);var u=Math.max.apply(Math,$t(Array.from(e.keys()).map(function(d){return $e.get(d).dropAnimationDurationMs}))),c=u===0?Dh:Math.max(u,Ih);Ei=vh(e,function(){return wt}),lh(ut,e,c*1.07,Ei)}function Lh(){var e=rn.get(ro),t=Mi(e),i;try{for(t.s();!(i=t.n()).done;){var o=i.value;o.removeEventListener(Ja,fc),o.removeEventListener(Ni,dc),o.removeEventListener($a,vc)}}catch(u){t.e(u)}finally{t.f()}window.removeEventListener(zs,Xr),Ei&&(Ei.destroy(),Ei=void 0),ch()}function ao(e){return e.findIndex(function(t){return!!t[eo]})}function Ph(e){var t;return Ra(Ra({},e),{},(t={},Zr(t,eo,!0),Zr(t,at,tc),t))}function fc(e){var t=$e.get(e.currentTarget),i=t.items,o=t.dropFromOthersDisabled;if(!(o&&e.currentTarget!==Ye)){if(Ki=!1,i=i.filter(function(p){return p[at]!==$n[at]&&p[at]!==tc}),Ye!==e.currentTarget){var u=$e.get(Ye).items,c=u.filter(function(p){return!p[eo]});rr(Ye,c,{trigger:Ct.DRAGGED_ENTERED_ANOTHER,id:Nt[at],source:Ft.POINTER})}var d=e.detail.indexObj.index;pt=e.currentTarget,i.splice(d,0,$n),rr(e.currentTarget,i,{trigger:Ct.DRAGGED_ENTERED,id:Nt[at],source:Ft.POINTER})}}function dc(e){if(Yn){var t=$e.get(e.currentTarget),i=t.items,o=t.dropFromOthersDisabled;if(!(o&&e.currentTarget!==Ye&&e.currentTarget!==pt)){var u=$t(i),c=ao(u);c!==-1&&u.splice(c,1);var d=pt;pt=void 0;var p=e.detail,h=p.type,b=p.theOtherDz;if(h===Ma.OUTSIDE_OF_ANY||h===Ma.LEFT_FOR_ANOTHER&&b!==Ye&&$e.get(b).dropFromOthersDisabled){Ki=!0,pt=Ye;var w=d===Ye?u:$t($e.get(Ye).items);w.splice(io,0,$n),rr(Ye,w,{trigger:Ct.DRAGGED_LEFT_ALL,id:Nt[at],source:Ft.POINTER})}rr(e.currentTarget,u,{trigger:Ct.DRAGGED_LEFT,id:Nt[at],source:Ft.POINTER})}}}function vc(e){var t=$e.get(e.currentTarget),i=t.items,o=t.dropFromOthersDisabled;if(!(o&&e.currentTarget!==Ye)){var u=$t(i);Ki=!1;var c=e.detail.indexObj.index,d=ao(u);d!==-1&&u.splice(d,1),u.splice(c,0,$n),rr(e.currentTarget,u,{trigger:Ct.DRAGGED_OVER_INDEX,id:Nt[at],source:Ft.POINTER})}}function Fa(e){e.preventDefault();var t=e.touches?e.touches[0]:e;wt={x:t.clientX,y:t.clientY},ut.style.transform="translate3d(".concat(wt.x-vn.x,"px, ").concat(wt.y-vn.y,"px, 0)")}function Xr(){Vs=!0,window.removeEventListener("mousemove",Fa),window.removeEventListener("touchmove",Fa),window.removeEventListener("mouseup",Xr),window.removeEventListener("touchend",Xr),Lh(),bh(ut),pt||(pt=Ye);var e=$e.get(pt),t=e.items,i=e.type;Ka(rn.get(i),function(c){return $e.get(c).dropTargetStyle},function(c){return $e.get(c).dropTargetClasses});var o=ao(t);o===-1&&pt===Ye&&(o=io),t=t.map(function(c){return c[eo]?Nt:c});function u(){Ws(),Qr(pt,t,{trigger:Ki?Ct.DROPPED_OUTSIDE_OF_ANY:Ct.DROPPED_INTO_ZONE,id:Nt[at],source:Ft.POINTER}),pt!==Ye&&Qr(Ye,$e.get(Ye).items,{trigger:Ct.DROPPED_INTO_ANOTHER,id:Nt[at],source:Ft.POINTER});var c=Array.from(pt.children).find(function(d){return d.getAttribute(to)});c&&Th(c),Nh()}$e.get(pt).dropAnimationDisabled?u():Rh(o,u)}function Rh(e,t){var i=e>-1?hs(pt.children[e],!1):hs(pt,!1),o={x:i.left-parseFloat(ut.style.left),y:i.top-parseFloat(ut.style.top)},u=$e.get(pt),c=u.dropAnimationDurationMs,d="transform ".concat(c,"ms ease");ut.style.transition=ut.style.transition?ut.style.transition+","+d:d,ut.style.transform="translate3d(".concat(o.x,"px, ").concat(o.y,"px, 0)"),window.setTimeout(t,c)}function Mh(e,t){wa.push({dz:e,destroy:t}),window.requestAnimationFrame(function(){cc(e),document.body.appendChild(e)})}function Nh(){ut&&ut.remove&&ut.remove(),Rt&&Rt.remove&&Rt.remove(),ut=void 0,Rt=void 0,Nt=void 0,ro=void 0,Ye=void 0,io=void 0,$n=void 0,pt=void 0,vn=void 0,wt=void 0,Yn=!1,Vs=!1,Ws=void 0,Ki=!1,hn&&clearTimeout(hn),hn=void 0,gi=!1,wa.length&&(wa.forEach(function(e){var t=e.dz,i=e.destroy;i(),t.remove()}),wa=[])}function Kh(e,t){var i=!1,o={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Yu,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},u=new Map;function c(){window.addEventListener("mousemove",h,{passive:!1}),window.addEventListener("touchmove",h,{passive:!1,capture:!1}),window.addEventListener("mouseup",p,{passive:!1}),window.addEventListener("touchend",p,{passive:!1})}function d(){window.removeEventListener("mousemove",h),window.removeEventListener("touchmove",h),window.removeEventListener("mouseup",p),window.removeEventListener("touchend",p),hn&&(clearTimeout(hn),hn=void 0,gi=!1)}function p(_){if(d(),Rt=void 0,vn=void 0,wt=void 0,_.type==="touchend"){var E=new Event("click",{bubbles:!0,cancelable:!0});_.target.dispatchEvent(E)}}function h(_){var E=!!_.touches,O=E?_.touches[0]:_;if(E&&o.delayTouchStartMs>0&&!gi){wt={x:O.clientX,y:O.clientY},(Math.abs(wt.x-vn.x)>=ha||Math.abs(wt.y-vn.y)>=ha)&&(hn&&(clearTimeout(hn),hn=void 0),p(_));return}_.preventDefault(),wt={x:O.clientX,y:O.clientY},(Math.abs(wt.x-vn.x)>=ha||Math.abs(wt.y-vn.y)>=ha)&&(d(),w())}function b(_){if(!(_.target!==_.currentTarget&&(_.target.value!==void 0||_.target.isContentEditable))&&!_.button&&!Yn){var E=!!_.touches,O=E&&o.delayTouchStartMs>0;O||_.preventDefault(),_.stopPropagation();var L=E?_.touches[0]:_;vn={x:L.clientX,y:L.clientY},wt=Ra({},vn),Rt=_.currentTarget,O&&(gi=!1,hn=window.setTimeout(function(){Rt&&(gi=!0,d(),w())},o.delayTouchStartMs)),c()}}function w(){Yn=!0;var _=u.get(Rt);io=_,Ye=Rt.parentElement;var E=Ye.closest("dialog")||Ye.closest("[popover]")||Ye.getRootNode(),O=E.body||E,L=o.items,D=o.type,A=o.centreDraggedOnCursor,H=$t(L);Nt=H[_],ro=D,$n=Ph(Nt),ut=_h(Rt,A&&wt),O.appendChild(ut);function F(){Rt.parentElement?window.requestAnimationFrame(F):(Rt.setAttribute(qu,!0),O.appendChild(Rt),Ch(),cc(Rt),$n[at]=Nt[at],ut.focus())}window.requestAnimationFrame(F),ba(Array.from(rn.get(o.type)).filter(function(M){return M===Ye||!$e.get(M).dropFromOthersDisabled}),function(M){return $e.get(M).dropTargetStyle},function(M){return $e.get(M).dropTargetClasses}),H.splice(_,1,$n),Ws=kh(Ye),rr(Ye,H,{trigger:Ct.DRAG_STARTED,id:Nt[at],source:Ft.POINTER}),window.addEventListener("mousemove",Fa,{passive:!1}),window.addEventListener("touchmove",Fa,{passive:!1,capture:!1}),window.addEventListener("mouseup",Xr,{passive:!1}),window.addEventListener("touchend",Xr,{passive:!1})}function T(_){var E=_.items,O=E===void 0?void 0:E,L=_.flipDurationMs,D=L===void 0?0:L,A=_.type,H=A===void 0?Ah:A,F=_.dragDisabled,M=F===void 0?!1:F,W=_.morphDisabled,J=W===void 0?!1:W,oe=_.dropFromOthersDisabled,re=oe===void 0?!1:oe,se=_.dropTargetStyle,de=se===void 0?Yu:se,ie=_.dropTargetClasses,ge=ie===void 0?[]:ie,je=_.transformDraggedElement,Ke=je===void 0?function(){}:je,Ze=_.centreDraggedOnCursor,it=Ze===void 0?!1:Ze,ke=_.dropAnimationDisabled,gt=ke===void 0?!1:ke,Ae=_.delayTouchStart,ze=Ae===void 0?!1:Ae;o.dropAnimationDurationMs=D;var te=0;ze===!0?te=Sh:typeof ze=="number"&&isFinite(ze)&&ze>=0&&(te=ze),o.delayTouchStartMs=te,o.type&&H!==o.type&&Zu(e,o.type),o.type=H,o.items=$t(O),o.dragDisabled=M,o.morphDisabled=J,o.transformDraggedElement=Ke,o.centreDraggedOnCursor=it,o.dropAnimationDisabled=gt,i&&Yn&&!Vs&&(!oh(de,o.dropTargetStyle)||!sh(ge,o.dropTargetClasses))&&(Ka([e],function(){return o.dropTargetStyle},function(){return ge}),ba([e],function(){return de},function(){return ge})),o.dropTargetStyle=de,o.dropTargetClasses=$t(ge);function ye(Be,ct){return $e.get(Be)?$e.get(Be)[ct]:o[ct]}i&&Yn&&o.dropFromOthersDisabled!==re&&(re?Ka([e],function(Be){return ye(Be,"dropTargetStyle")},function(Be){return ye(Be,"dropTargetClasses")}):ba([e],function(Be){return ye(Be,"dropTargetStyle")},function(Be){return ye(Be,"dropTargetClasses")})),o.dropFromOthersDisabled=re,$e.set(e,o),Oh(e,H);for(var Re=Yn?ao(o.items):-1,Ue=0;Ue<e.children.length;Ue++){var Ce=e.children[Ue];if(Eh(Ce,M),Ue===Re){J||wh(ut,Ce,wt.x,wt.y),o.transformDraggedElement(ut,Nt,Ue),xh(Ce);continue}Ce.removeEventListener("mousedown",Xo.get(Ce)),Ce.removeEventListener("touchstart",Xo.get(Ce)),M||(Ce.addEventListener("mousedown",b),Ce.addEventListener("touchstart",b),Xo.set(Ce,b)),u.set(Ce,Ue),i||(i=!0)}}return T(t),{update:function(E){T(E)},destroy:function(){function E(){Zu(e,$e.get(e).type),$e.delete(e)}Yn&&!e.closest("[".concat(qu,"]"))?Mh(e,E):E()}}}var pa,ms={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},hc=(pa={},Zr(pa,ms.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Zr(pa,ms.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),pa),Fh="dnd-action-aria-alert",rt;function ys(){rt||(rt=document.createElement("div"),(function(){rt.id=Fh,rt.style.position="fixed",rt.style.bottom="0",rt.style.left="0",rt.style.zIndex="-5",rt.style.opacity="0",rt.style.height="0",rt.style.width="0",rt.setAttribute("role","alert")})(),document.body.prepend(rt),Object.entries(hc).forEach(function(e){var t=Bv(e,2),i=t[0],o=t[1];return document.body.prepend(zh(i,o))}))}function Bh(){return Hs?null:(document.readyState==="complete"?ys():window.addEventListener("DOMContentLoaded",ys),Ra({},ms))}function jh(){Hs||!rt||(Object.keys(hc).forEach(function(e){var t;return(t=document.getElementById(e))===null||t===void 0?void 0:t.remove()}),rt.remove(),rt=void 0)}function zh(e,t){var i=document.createElement("div");return i.id=e,i.innerHTML="<p>".concat(t,"</p>"),i.style.display="none",i.style.position="fixed",i.style.zIndex="-5",i}function Hr(e){if(!Hs){rt||ys(),rt.innerHTML="";var t=document.createTextNode(e);rt.appendChild(t),rt.style.display="none",rt.style.display="inline"}}var Hh="--any--",Qu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Zt=!1,gs,Et,xr="",yr,mn,qn="",Ba=new WeakSet,Xu=new WeakMap,Ju=new WeakMap,_s=new Map,ht=new Map,nn=new Map,ja;function Uh(e,t){nn.size===0&&(ja=Bh(),window.addEventListener("keydown",pc),window.addEventListener("click",mc)),nn.has(t)||nn.set(t,new Set),nn.get(t).has(e)||(nn.get(t).add(e),nc())}function $u(e,t){Et===e&&Si(),nn.get(t).delete(e),rc(),nn.get(t).size===0&&nn.delete(t),nn.size===0&&(window.removeEventListener("keydown",pc),window.removeEventListener("click",mc),ja=void 0,jh())}function pc(e){if(Zt)switch(e.key){case"Escape":{Si();break}}}function mc(){Zt&&(Ba.has(document.activeElement)||Si())}function Vh(e){if(Zt){var t=e.currentTarget;if(t!==Et){xr=t.getAttribute("aria-label")||"";var i=ht.get(Et),o=i.items,u=o.find(function(T){return T[at]===mn}),c=o.indexOf(u),d=o.splice(c,1)[0],p=ht.get(t),h=p.items,b=p.autoAriaDisabled;t.getBoundingClientRect().top<Et.getBoundingClientRect().top||t.getBoundingClientRect().left<Et.getBoundingClientRect().left?(h.push(d),b||Hr("Moved item ".concat(qn," to the end of the list ").concat(xr))):(h.unshift(d),b||Hr("Moved item ".concat(qn," to the beginning of the list ").concat(xr)));var w=Et;Qr(w,o,{trigger:Ct.DROPPED_INTO_ANOTHER,id:mn,source:Ft.KEYBOARD}),Qr(t,h,{trigger:Ct.DROPPED_INTO_ZONE,id:mn,source:Ft.KEYBOARD}),Et=t}}}function yc(){_s.forEach(function(e,t){var i=e.update;return i(ht.get(t))})}function Si(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;ht.get(Et).autoAriaDisabled||Hr("Stopped dragging item ".concat(qn)),Ba.has(document.activeElement)&&document.activeElement.blur(),e&&rr(Et,ht.get(Et).items,{trigger:Ct.DRAG_STOPPED,id:mn,source:Ft.KEYBOARD}),Ka(nn.get(gs),function(t){return ht.get(t).dropTargetStyle},function(t){return ht.get(t).dropTargetClasses}),yr=null,mn=null,qn="",gs=null,Et=null,xr="",Zt=!1,yc()}function Wh(e,t){var i={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Qu,dropTargetClasses:[],autoAriaDisabled:!1};function o(w,T,_){w.length<=1||w.splice(_,1,w.splice(T,1,w[_])[0])}function u(w){switch(w.key){case"Enter":case" ":{if((w.target.disabled!==void 0||w.target.href||w.target.isContentEditable)&&!Ba.has(w.target))return;w.preventDefault(),w.stopPropagation(),Zt?Si():c(w);break}case"ArrowDown":case"ArrowRight":{if(!Zt)return;w.preventDefault(),w.stopPropagation();var T=ht.get(e),_=T.items,E=Array.from(e.children),O=E.indexOf(w.currentTarget);O<E.length-1&&(i.autoAriaDisabled||Hr("Moved item ".concat(qn," to position ").concat(O+2," in the list ").concat(xr)),o(_,O,O+1),Qr(e,_,{trigger:Ct.DROPPED_INTO_ZONE,id:mn,source:Ft.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Zt)return;w.preventDefault(),w.stopPropagation();var L=ht.get(e),D=L.items,A=Array.from(e.children),H=A.indexOf(w.currentTarget);H>0&&(i.autoAriaDisabled||Hr("Moved item ".concat(qn," to position ").concat(H," in the list ").concat(xr)),o(D,H,H-1),Qr(e,D,{trigger:Ct.DROPPED_INTO_ZONE,id:mn,source:Ft.KEYBOARD}));break}}}function c(w){p(w.currentTarget),Et=e,gs=i.type,Zt=!0;var T=Array.from(nn.get(i.type)).filter(function(E){return E===Et||!ht.get(E).dropFromOthersDisabled});if(ba(T,function(E){return ht.get(E).dropTargetStyle},function(E){return ht.get(E).dropTargetClasses}),!i.autoAriaDisabled){var _="Started dragging item ".concat(qn,". Use the arrow keys to move it within its list ").concat(xr);T.length>1&&(_+=", or tab to another list in order to move the item into it"),Hr(_)}rr(e,ht.get(e).items,{trigger:Ct.DRAG_STARTED,id:mn,source:Ft.KEYBOARD}),yc()}function d(w){Zt&&w.currentTarget!==yr&&(w.stopPropagation(),Si(!1),c(w))}function p(w){var T=ht.get(e),_=T.items,E=Array.from(e.children),O=E.indexOf(w);yr=w,yr.tabIndex=i.zoneItemTabIndex,mn=_[O][at],qn=E[O].getAttribute("aria-label")||""}function h(w){var T=w.items,_=T===void 0?[]:T,E=w.type,O=E===void 0?Hh:E,L=w.dragDisabled,D=L===void 0?!1:L,A=w.zoneTabIndex,H=A===void 0?0:A,F=w.zoneItemTabIndex,M=F===void 0?0:F,W=w.dropFromOthersDisabled,J=W===void 0?!1:W,oe=w.dropTargetStyle,re=oe===void 0?Qu:oe,se=w.dropTargetClasses,de=se===void 0?[]:se,ie=w.autoAriaDisabled,ge=ie===void 0?!1:ie;i.items=$t(_),i.dragDisabled=D,i.dropFromOthersDisabled=J,i.zoneTabIndex=H,i.zoneItemTabIndex=M,i.dropTargetStyle=re,i.dropTargetClasses=de,i.autoAriaDisabled=ge,i.type&&O!==i.type&&$u(e,i.type),i.type=O,Uh(e,O),ge||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",D?ja.DND_ZONE_DRAG_DISABLED:ja.DND_ZONE_ACTIVE)),ht.set(e,i),Zt?e.tabIndex=e===Et||yr.contains(e)||i.dropFromOthersDisabled||Et&&i.type!==ht.get(Et).type?-1:0:e.tabIndex=i.zoneTabIndex,e.addEventListener("focus",Vh);for(var je=function(it){var ke=e.children[it];Ba.add(ke),ke.tabIndex=Zt?-1:i.zoneItemTabIndex,ge||ke.setAttribute("role","listitem"),ke.removeEventListener("keydown",Xu.get(ke)),ke.removeEventListener("click",Ju.get(ke)),D||(ke.addEventListener("keydown",u),Xu.set(ke,u),ke.addEventListener("click",d),Ju.set(ke,d)),Zt&&i.items[it][at]===mn&&(yr=ke,yr.tabIndex=i.zoneItemTabIndex,ke.focus())},Ke=0;Ke<e.children.length;Ke++)je(Ke)}h(t);var b={update:function(T){h(T)},destroy:function(){$u(e,i.type),ht.delete(e),_s.delete(e)}};return _s.set(e,b),b}var Gh=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function gc(e,t){if(Yh(e))return{update:function(){},destroy:function(){}};el(t);var i=Kh(e,t),o=Wh(e,t);return{update:function(c){el(c),i.update(c),o.update(c)},destroy:function(){i.destroy(),o.destroy()}}}function Yh(e){return!!e.closest("[".concat($v,'="true"]'))}function el(e){var t=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var i=e.zoneTabIndex,o=e.zoneItemTabIndex;e.dropTargetStyle;var u=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var c=e.delayTouchStart;e.dropAnimationDisabled;var d=Fv(e,Gh);if(Object.keys(d).length>0&&console.warn("dndzone will ignore unknown options",d),!t)throw new Error("no 'items' key provided to dndzone");var p=t.find(function(w){return!{}.hasOwnProperty.call(w,at)});if(p)throw new Error("missing '".concat(at,"' property for item ").concat(pi(p)));if(u&&!Array.isArray(u))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Fr(u),", ").concat(pi(u)));if(i&&!tl(i))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Fr(i),", ").concat(pi(i)));if(o&&!tl(o))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Fr(o),", ").concat(pi(o)));if(c!==void 0&&c!==!1){var h=c===!0,b=typeof c=="number"&&isFinite(c)&&c>=0;if(!h&&!b)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(Fr(c),", ").concat(pi(c)))}}function tl(e){return!isNaN(e)&&(function(t){return(t|0)===t})(parseFloat(e))}const we=new La("TaskPlannerDB");we.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});we.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(t=>{t.status="unchecked"}));we.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(t=>{t.archivedAt=Date.now()}));we.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify(t=>{t.archivedAt===void 0&&(t.archivedAt=null)}));we.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify((t,i)=>{t.columnIndex===void 0&&(t.columnIndex=t.order%5)}));function oo(e){return e.length===0?0:Math.max(...e.map(i=>i.order))+1}async function qh(){return(await we.lists.orderBy("order").toArray()).filter(t=>t.archivedAt==null)}async function Zh(){return await we.lists.orderBy("order").toArray()}async function Qh(e,t=null){if(e==null)throw new Error("List name cannot be null or undefined");const i=e.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const o=await we.lists.orderBy("order").toArray(),u=oo(o),c=5;let d;return t!==null&&t>=0&&t<c?d=t:d=u%c,await we.lists.add({name:i,order:u,archivedAt:null,columnIndex:d})}async function Xh(e=null){const t=await we.lists.orderBy("order").toArray(),i=oo(t),o=5;let u;return e!==null&&e>=0&&e<o?u=e:u=i%o,await we.lists.add({name:null,order:i,archivedAt:null,columnIndex:u})}async function Jh(e,t){const i=t.trim();if(i==="")throw new Error("List name cannot be empty");return await we.lists.update(e,{name:i})}async function Jo(e){return await we.tasks.where("listId").equals(e).filter(t=>t.status!=="archived").sortBy("order")}async function $h(){return(await we.tasks.where("status").equals("archived").toArray()).sort((t,i)=>{const o=t.archivedAt||0,u=i.archivedAt||0;return u!==o?u-o:(i.order||0)-(t.order||0)})}async function ep(e,t,i=null){let o=e;e===null&&(o=await Xh(i));const u=await we.tasks.where("listId").equals(o).filter(h=>h.status!=="archived").sortBy("order"),c=oo(u),d=t===""?"":t.trim();return await we.tasks.add({text:d,listId:o,order:c,status:"unchecked"})}async function tp(e,t){const i=t===""?"":t.trim();return await we.tasks.update(e,{text:i})}async function nl(e,t){if(!["unchecked","checked","archived"].includes(t))throw new Error(`Invalid status: ${t}`);const i={status:t};return t==="archived"?i.archivedAt=Date.now():t!=="archived"&&(i.archivedAt=null),await we.tasks.update(e,i)}async function np(e){const t=await we.tasks.get(e);if(!t)throw new Error(`Task ${e} not found`);const i=await we.lists.get(t.listId);if(!i)throw new Error(`Task's list ${t.listId} not found`);let o=!1;i.archivedAt!=null&&(await ip(t.listId),o=!0);const u=await we.tasks.where("listId").equals(t.listId).filter(p=>p.status!=="archived"&&p.id!==e).sortBy("order"),c=oo(u);return{taskUpdated:await we.tasks.update(e,{status:"checked",order:c}),listRestored:o}}async function $o(e,t){if(!t||t.length===0)return;const i=t.map(p=>p.id),u=(await we.tasks.bulkGet(i)).filter(p=>p!==void 0);if(u.length===0)return;const c=u.filter(p=>p.listId!==e),d=new Set(c.map(p=>p.listId));await we.transaction("rw",we.tasks,async()=>{for(let p=0;p<t.length;p++){const h=t[p].id,b=u.find(T=>T.id===h);if(!b)continue;const w={order:p};b.listId!==e&&(w.listId=e),await we.tasks.update(h,w)}for(const p of d){const h=await we.tasks.where("listId").equals(p).filter(b=>b.status!=="archived").sortBy("order");for(let b=0;b<h.length;b++)await we.tasks.update(h[b].id,{order:b})}})}async function rp(e){const t=Date.now();return await we.lists.update(e,{archivedAt:t})}async function ip(e){return await we.lists.update(e,{archivedAt:null})}async function ap(e){const t=Date.now(),i=await we.tasks.where("listId").equals(e).filter(u=>u.status==="unchecked"||u.status==="checked").toArray(),o=i.map(u=>we.tasks.update(u.id,{status:"archived",archivedAt:t}));return await Promise.all(o),i.length}async function rl(e,t){if(!t||t.length===0)return;if(e<0||e>=5)throw new Error(`Invalid column index: ${e}`);const i=t.map(p=>p.id),o=await we.lists.bulkGet(i);if(o.filter(p=>!p).length>0)throw new Error("Cannot update order: some lists do not exist");const c=o.filter(p=>p!==void 0),d=c.filter(p=>(p.columnIndex??0)!==e);new Set(d.map(p=>p.columnIndex??0)),await we.transaction("rw",we.lists,async()=>{const p=new Set;for(let _=0;_<t.length;_++){const E=t[_].id,O=c.find(A=>A.id===E);if(!O)continue;const L={order:_},D=O.columnIndex??0;D!==e&&(L.columnIndex=e,p.add(D)),await we.lists.update(E,L)}const b=(await we.lists.orderBy("order").toArray()).filter(_=>_.archivedAt==null),w=Array(5).fill(null).map(()=>[]);for(const _ of b){const E=_.columnIndex??0,O=E>=5?4:E;w[O].push(_)}const T=new Set([e,...p]);for(const _ of T){const E=w[_];E.sort((O,L)=>(O.order??0)-(L.order??0));for(let O=0;O<E.length;O++)await we.lists.update(E[O].id,{order:O})}})}function bs(e){return e&&(e.isDndShadowItem===!0||typeof e.id=="string"&&e.id.startsWith("id:dnd-shadow-placeholder-"))}function op(e,t=5){if(!e||e.length===0)return Array(t).fill(null).map(()=>[]);const i=Array(t).fill(null).map(()=>[]),o=t-1;for(const u of e){let c=u.columnIndex??0;c>=t&&(c=o),i[c].push(u)}for(let u=0;u<i.length;u++)i[u].sort((c,d)=>(c.order??0)-(d.order??0));return i}function sp(e,t){if(!e||e.length===0)return null;for(let i=0;i<e.length;i++){const o=e[i];if(!Array.isArray(o))continue;const u=o.findIndex(c=>c.id===t);if(u!==-1)return{columnIndex:i,index:u}}return null}function up(e,t,i,o){const{columnIndex:u,index:c}=e;let d=u,p=c;if(t==="up"){if(c===0)return null;p=c-1}else if(t==="down"){const h=i[u]||[];if(c===h.length-1)return null;p=c+1}else if(t==="left"){if(u===0)return null;d=u-1,p=(i[d]||[]).length}else if(t==="right"){if(u===o-1)return null;d=u+1,p=(i[d]||[]).length}else return null;return{targetColumnIndex:d,targetIndex:p}}function lp(e,t,i,o){const u=sp(e,t);if(!u)return null;const{columnIndex:c,index:d}=u,p=up(u,i,e,o);if(!p)return null;const{targetColumnIndex:h,targetIndex:b}=p,w=e.map(D=>Array.isArray(D)?[...D]:[]),T=w[c];if(!T||T.length===0)return null;const[_]=T.splice(d,1);if(!_)return null;const E=w[h];if(!E)return null;const O=Math.min(Math.max(b,0),E.length);i==="left"||i==="right"?E.splice(O,0,{..._,columnIndex:h}):E.splice(O,0,_);const L=[];for(let D=0;D<w.length;D++){const A=w[D]||[];for(let H=0;H<A.length;H++){const F=A[H];L.push({...F,columnIndex:D,order:H})}}return{newColumns:w,updatedDraggableLists:L,targetColumnIndex:h,targetColumnItems:(w[h]||[]).map(D=>({id:D.id}))}}function cp(e,t,i){const o=i.filter(u=>(u.columnIndex??0)!==t);for(let u=0;u<e.length;u++){const c=e[u],d=i.find(h=>h.id===c.id),p=d?{...d,...c,columnIndex:t,order:u}:{...c,columnIndex:t,order:u};o.push(p)}return o}function fp(e,t,i,o){let u=!1;for(const b of e){const w=(i||[]).find(T=>T.id===b.id);if(w)(w.columnIndex??0)!==t&&(u=!0);else{const T=o.find(_=>_.id===b.id);T&&(T.columnIndex??0)!==t&&(u=!0)}}const d=(i||[]).filter(b=>(b.columnIndex??0)===t).length;return e.length<d&&!u||e.length===0&&!u&&d>0}const za=160,dp=150,ws=1056,vp=816,Ha=16,hp=25,pp=10,es=20,ma=10,mp=40,il=200,Es=10,yp=20;async function gp(e,t={}){const{maxAttempts:i=hp,retryInterval:o=pp,waitForTick:u=!0}=t;if(typeof document>"u")return null;u&&await An();for(let c=0;c<i;c++){const d=e();if(d&&d instanceof HTMLElement)return d.focus(),d;c<i-1&&await new Promise(p=>setTimeout(p,o))}return null}async function _c(e){if(typeof document>"u")return null;await An();const t=Array.from(document.querySelectorAll(`[data-id="${e}"]`));let i=t.find(o=>o instanceof HTMLElement&&o.getAttribute("role")==="group");return i||(i=t.find(o=>o instanceof HTMLElement&&o.tagName==="DIV")),i instanceof HTMLElement?(i.focus(),i):null}function _p(e,t,i){if(!e)return null;const o=e.querySelector(t);if(o){const u=o.querySelector(i);if(u&&u instanceof HTMLElement)return u}return null}function bp(e,t,i,o){const{getKeyboardListDrag:u,getLastKeyboardDraggedListId:c,getShouldRefocusListOnNextTab:d,setShouldRefocusListOnNextTab:p}=e;function h(b){const w=b.key,T=u(),_=T.active===!0,E=T.listId,O=c(),L=d();if(!_&&w==="Tab"&&L&&O!=null){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),p(!1),_c(O);return}if(!(!_||E==null)){if(w==="ArrowUp"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),t(E,"up");return}if(w==="ArrowDown"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),t(E,"down");return}if(w==="ArrowLeft"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),t(E,"left");return}if(w==="ArrowRight"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),t(E,"right");return}if(w==="Escape"||w==="Enter"||w===" "){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),i(),o();return}if(w==="Tab"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),i(),o();return}}}return document.addEventListener("keydown",h,!0),()=>{document.removeEventListener("keydown",h,!0)}}function wp(e){return e===""}function Ep(e){return e.trim()===""&&e.length>0}function bc(e){const t=e.trim(),i=Ep(e);return{text:i?"":t,isBlank:i}}function wc(e,t,i={}){const{ignoreElements:o=[],shouldClose:u=()=>!0,checkIgnoreClick:c=null}=i;function d(h){const b=typeof e=="function"?e():e;if(b&&!b.contains(h.target)&&!(c&&c(h))){for(const w of o){let T=null;if(typeof w=="function"?T=w():T=w,T&&T.contains(h.target))return}u()&&t()}}const p=setTimeout(()=>{document.addEventListener("click",d)},0);return()=>{clearTimeout(p),document.removeEventListener("click",d)}}function xp(e){const{getColumnIndex:t,setColumnIndex:i,getInput:o,setInput:u,getInputElement:c}=e;function d(E){i(E)}function p(E,O){if(E.key==="Enter"||E.key===" ")E.preventDefault(),E.stopPropagation(),d(O);else if(E.key==="Escape"){E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation();const L=E.currentTarget;L&&L instanceof HTMLElement&&L.blur()}}function h(E,O,L){if(E.key==="Escape"){const D=o()||"";if(L){i(null),u("");return}if(D.trim().length>0){b(O,!0);return}i(null),u("")}}async function b(E,O=!1){const L=o()||"";if(L===""||L.trim()===""){i(null),u("");return}const{text:D}=bc(L);try{if(await Qh(D||null,E),u(""),O)i(null);else{await An();const A=c();A&&setTimeout(()=>{A.focus()},0)}}catch(A){console.error("Error creating list:",A)}}async function w(E){await b(E,!0)}function T(){if(t()!==null)return wc(c(),()=>{t()!==null&&(i(null),u(""))},{ignoreElements:[],shouldClose:()=>!o()||o().trim()===""})}function _(){const E=t(),O=c();if(E===null||!O)return;const L=setTimeout(()=>{O?.focus()},0);return()=>{clearTimeout(L)}}return{handleCreateListClick:d,handleCreateListKeydown:p,handleCreateListInputEscape:h,handleCreateList:b,handleCreateListOnTab:w,setupClickOutsideEffect:T,setupFocusEffect:_}}var Tp=Te("<button><!></button>");function yn(e,t){let i=Ot(t,"variant",3,"primary"),o=Ot(t,"size",3,"medium"),u=Ot(t,"disabled",3,!1),c=Ot(t,"type",3,"button"),d=Ov(t,["$$slots","$$events","$$legacy","variant","size","disabled","type","onclick","ariaLabel"]);const p="focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed",h={primary:"bg-grey-80 text-grey-110 hover:bg-grey-90 focus:bg-grey-90 disabled:bg-grey-50 disabled:text-grey-100",secondary:"bg-white text-grey-110 hover:bg-grey-20 focus:bg-grey-30 disabled:bg-white disabled:text-grey-60"},b={small:"px-2 py-1 text-sm",medium:"px-4 py-2",large:"px-6 py-3"},w=`${p} ${h[i()]} ${b[o()]}`;var T=Tp();Av(T,()=>({type:c(),disabled:u(),onclick:t.onclick,ariaLabel:t.ariaLabel,class:w,...d}));var _=_e(T);mv(_,t,"default",{}),fe(e,T)}var kp=Te('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),Ap=Te('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><!> <!></div></div></div></div>');function Ip(e,t){ir(t,!0);let i=me(Jt(t.taskText||"")),o=me(!1),u=me(null),c=me(null),d=et(()=>()=>{if(!t.taskPosition||!t.isOpen)return"background-color: white; z-index: 10000;";const L=24,D=24,A=Ha,F=L+D+A+8-8,M=10,W=t.taskPosition.top-F,J=t.taskPosition.left-Ha+M,oe=t.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${W}px; left: ${J}px; width: ${oe}px;`});Ge(()=>{t.isOpen&&(N(i,t.taskText||"",!0),N(o,!1))}),Ge(()=>{t.isOpen&&y(u)&&setTimeout(()=>{y(u)?.focus(),y(u)?.select(),y(u)instanceof HTMLTextAreaElement&&(y(u).style.height="auto",y(u).style.height=`${Math.min(y(u).scrollHeight,za)}px`)},0)}),Ge(()=>{if(y(u)&&y(u)instanceof HTMLTextAreaElement){const L=()=>{y(u).style.height="auto",y(u).style.height=`${Math.min(y(u).scrollHeight,za)}px`};return y(u).addEventListener("input",L),()=>{y(u).removeEventListener("input",L)}}});function p(){const L=y(i)??"",D=L.trim();if(D===""&&L.length>0){t.onSave(t.taskId,""),N(o,!1);return}if(L===""||D===""){N(o,!0);return}t.onSave(t.taskId,D),N(o,!1)}function h(){N(i,t.taskText||"",!0),N(o,!1),t.onCancel()}function b(L){L.target===L.currentTarget&&h()}function w(L){if(L.key==="Tab"){if(!y(c))return;const D=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),A=Array.from(y(c).querySelectorAll(D)).filter(J=>!(!(J instanceof HTMLElement)||J.hasAttribute("disabled")||J.getAttribute("aria-hidden")==="true"));if(A.length===0)return;const H=document.activeElement,F=A.indexOf(H);let M;L.shiftKey?F<=0?M=A.length-1:M=F-1:F===-1||F===A.length-1?M=0:M=F+1,L.preventDefault(),L.stopPropagation();const W=A[M];W&&W instanceof HTMLElement&&W.focus()}else L.key==="Escape"?h():L.key==="Enter"&&!L.shiftKey&&document.activeElement===y(u)&&(L.preventDefault(),p())}function T(){t.onArchive&&t.onArchive(t.taskId)}var _=Jn(),E=xt(_);{var O=L=>{var D=Ap();D.__click=b,D.__keydown=w;var A=_e(D);A.__click=ie=>ie.stopPropagation();var H=Me(_e(A),2),F=_e(H);Vt(F,ie=>N(u,ie),()=>y(u));var M=Me(F,2);{var W=ie=>{var ge=kp();fe(ie,ge)};tt(M,ie=>{y(o)&&ie(W)})}var J=Me(H,2),oe=_e(J);oe.__click=T;var re=Me(oe,2),se=_e(re);yn(se,{variant:"secondary",onclick:h,"aria-label":"Cancel editing and discard changes",children:(ie,ge)=>{var je=pn("Cancel");fe(ie,je)},$$slots:{default:!0}});var de=Me(se,2);{let ie=et(()=>y(o)?"Save disabled: task cannot be empty":"Save task changes");yn(de,{variant:"primary",onclick:p,get disabled(){return y(o)},get"aria-label"(){return y(ie)},children:(ge,je)=>{var Ke=pn("Save");fe(ge,Ke)},$$slots:{default:!0}})}Vt(A,ie=>N(c,ie),()=>y(c)),lt(ie=>{nr(A,ie),nr(F,`width: ${dp}px;`),Tt(F,"aria-describedby",y(o)?"validation-message":void 0)},[()=>y(d)()]),Fs(F,()=>y(i),ie=>N(i,ie)),fe(L,D)};tt(E,L=>{t.isOpen&&L(O)})}fe(e,_),ar()}ei(["click","keydown"]);var Dp=Te('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),Sp=Te('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-2 py-2 border border-grey-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border font-gilda text-[24px] text-grey-110 svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box; padding-left: 7px; padding-right: 7px; padding-top: 7px; padding-bottom: 7px;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><!> <div class="flex justify-end gap-3"><!> <!></div></div>',1),Op=Te('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-grey-100">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><!> <!></div>',1),Cp=Te('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-grey-10 text-grey-110 p-6 rounded-xl shadow-2xl border-2 border-grey-50 fixed box-border" role="document"><!></div></div>');function Lp(e,t){ir(t,!0);let i=me(Jt(t.listName||"")),o=me(!1),u=me(null),c=me(null),d=me("edit"),p=et(()=>()=>{if(!t.listPosition||!t.isOpen)return"background-color: white; z-index: 10000;";const H=24,F=24,M=Ha,oe=H+F+M+1+7-8,re=t.listPosition.top-oe,se=t.listPosition.left-Ha,de=Math.max(t.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${re}px; left: ${se}px; width: ${de}px; max-width: ${de}px; box-sizing: border-box;`});Ge(()=>{t.isOpen&&(N(i,t.listName||"",!0),N(o,!1),N(d,"edit"))}),Ge(()=>{t.isOpen&&y(u)&&setTimeout(()=>{y(u)?.focus(),y(u)?.select()},0)});function h(){const F=(y(i)??"").trim();if(F===""){N(o,!0);return}t.onSave(t.listId,F),N(o,!1)}function b(){N(i,t.listName||"",!0),N(o,!1),t.onCancel()}function w(H){H.target===H.currentTarget&&b()}function T(H){if(H.key==="Tab"){if(!y(c))return;const F=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),M=Array.from(y(c).querySelectorAll(F)).filter(se=>!(!(se instanceof HTMLElement)||se.hasAttribute("disabled")||se.getAttribute("aria-hidden")==="true"));if(M.length===0)return;const W=document.activeElement,J=M.indexOf(W);let oe;H.shiftKey?J<=0?oe=M.length-1:oe=J-1:J===-1||J===M.length-1?oe=0:oe=J+1,H.preventDefault(),H.stopPropagation();const re=M[oe];re&&re instanceof HTMLElement&&re.focus()}else H.key==="Escape"?y(d)==="confirm-archive"?O():b():H.key==="Enter"&&!H.shiftKey&&y(d)==="edit"&&H.target===y(u)&&(H.preventDefault(),h())}function _(){N(d,"confirm-archive")}function E(){t.onArchive(t.listId),b()}function O(){N(d,"edit")}var L=Jn(),D=xt(L);{var A=H=>{var F=Cp();F.__click=w,F.__keydown=T;var M=_e(F);M.__click=re=>re.stopPropagation();var W=_e(M);{var J=re=>{var se=Sp(),de=Me(xt(se),2),ie=_e(de);Vt(ie,Ae=>N(u,Ae),()=>y(u));var ge=Me(ie,2);{var je=Ae=>{var ze=Dp();fe(Ae,ze)};tt(ge,Ae=>{y(o)&&Ae(je)})}var Ke=Me(de,2),Ze=_e(Ke);yn(Ze,{variant:"secondary",onclick:_,"aria-label":"Archive this list",children:(Ae,ze)=>{var te=pn("Archive");fe(Ae,te)},$$slots:{default:!0}});var it=Me(Ze,2),ke=_e(it);yn(ke,{variant:"secondary",onclick:b,"aria-label":"Cancel editing and discard changes",children:(Ae,ze)=>{var te=pn("Cancel");fe(Ae,te)},$$slots:{default:!0}});var gt=Me(ke,2);{let Ae=et(()=>y(o)?"Save disabled: list name cannot be empty":"Save list name changes");yn(gt,{variant:"primary",onclick:h,get disabled(){return y(o)},get"aria-label"(){return y(Ae)},children:(ze,te)=>{var ye=pn("Save");fe(ze,ye)},$$slots:{default:!0}})}lt(()=>Tt(ie,"aria-describedby",y(o)?"validation-message":void 0)),Fs(ie,()=>y(i),Ae=>N(i,Ae)),fe(re,se)},oe=re=>{var se=Jn(),de=xt(se);{var ie=ge=>{var je=Op(),Ke=Me(xt(je),4),Ze=_e(Ke);yn(Ze,{variant:"secondary",onclick:O,"aria-label":"Cancel archiving",children:(ke,gt)=>{var Ae=pn("Cancel");fe(ke,Ae)},$$slots:{default:!0}});var it=Me(Ze,2);yn(it,{variant:"primary",onclick:E,"aria-label":"Confirm archive list",children:(ke,gt)=>{var Ae=pn("Archive");fe(ke,Ae)},$$slots:{default:!0}}),fe(ge,je)};tt(de,ge=>{y(d)==="confirm-archive"&&ge(ie)},!0)}fe(re,se)};tt(W,re=>{y(d)==="edit"?re(J):re(oe,!1)})}Vt(M,re=>N(c,re),()=>y(c)),lt(re=>nr(M,re),[()=>y(p)()]),fe(H,F)};tt(D,H=>{t.isOpen&&H(A)})}fe(e,L),ar()}ei(["click","keydown"]);var Pp=Te('<input type="checkbox" disabled class="cursor-pointer" aria-hidden="true" tabindex="-1"/> <textarea class="flex-1 break-words resize-none max-h-[10rem] overflow-y-auto text-body font-urbanist text-grey-100 placeholder:italic" rows="1" style="height: 24px;"></textarea>',1),Rp=Te('<input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-60" role="button" tabindex="0"> </span>',1),Mp=Te('<div class="flex items-center gap-2 py-1 border-b border-grey-50 hover:bg-grey-20 w-full print:hidden add-task-container add-task-button svelte-jtbpvm"><!></div>');function ts(e,t){ir(t,!0);let i=Ot(t,"isInputActive",11,!1),o=Ot(t,"inputValue",3,""),u=Ot(t,"buttonText",3,"Add Task"),c=Ot(t,"placeholder",3,"start typing..."),d=Ot(t,"marginLeft",3,!1),p=Ot(t,"containerElement",15,null),h=Ot(t,"textareaElement",15,null),b=me(null),w=me(null);Ge(()=>{p(y(w)),h(y(b))}),Ge(()=>{i()&&y(b)?setTimeout(()=>{if(y(b)?.focus(),y(b)instanceof HTMLTextAreaElement){y(b).style.height="auto";const A=y(b).scrollHeight;y(b).style.height=`${Math.max(24,Math.min(A,za))}px`}},0):!i()&&y(b)&&y(b)instanceof HTMLTextAreaElement&&(y(b).style.height="24px")}),Ge(()=>{if(y(b)&&y(b)instanceof HTMLTextAreaElement){const A=()=>{y(b).style.height="auto";const H=y(b).scrollHeight;y(b).style.height=`${Math.max(24,Math.min(H,za))}px`};return y(b).addEventListener("input",A),()=>{y(b).removeEventListener("input",A)}}});function T(A){A.key==="Enter"&&!A.shiftKey?(A.preventDefault(),t.onSave?.()):A.key==="Escape"?(A.preventDefault(),t.onEscape?.(A,o())):A.key==="Tab"&&t.onSave?.({closeAfterSave:!0})}function _(A){if(A.key==="Enter"||A.key===" ")A.preventDefault(),t.onActivate?.();else if(A.key==="Escape"){A.preventDefault(),A.stopPropagation(),A.stopImmediatePropagation();const H=A.currentTarget;H&&H instanceof HTMLElement&&H.blur()}}var E=Mp(),O=_e(E);{var L=A=>{var H=Pp(),F=Me(xt(H),2);F.__input=M=>t.onInputChange?.(M.currentTarget.value),F.__keydown=T,Vt(F,M=>N(b,M),()=>y(b)),lt(()=>{Tt(F,"placeholder",c()),Ev(F,o())}),fe(A,H)},D=A=>{var H=Rp(),F=Me(xt(H),2);F.__click=function(...W){t.onActivate?.apply(this,W)},F.__keydown=_;var M=_e(F);lt(()=>{Tt(F,"aria-label",t.ariaLabel||u()),br(M,u())}),fe(A,H)};tt(O,A=>{i()?A(L):A(D,!1)})}Vt(E,A=>N(w,A),()=>y(w)),lt(()=>nr(E,d()?"margin-left: 1.5rem;":"")),fe(e,E),ar()}ei(["input","keydown","click"]);function al(){let e=me(!1),t=me(null),i=me(null);function o(h){if(h&&h instanceof HTMLElement){const b=h.getBoundingClientRect();N(t,{top:b.top,left:b.left,width:b.width,height:b.height},!0),N(i,h,!0)}N(e,!0)}function u(){const h=y(i);N(e,!1),N(t,null),N(i,null),h&&h instanceof HTMLElement&&setTimeout(()=>{h.focus()},0)}function c(){N(e,!1),N(t,null),N(i,null)}function d(h){const b=h?.currentTarget||h?.target;o(b)}function p(h,b={}){const w=h.key;if(w==="Enter"||w===" "){h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation();const T=h.currentTarget;T&&o(T)}else if(w==="Escape")if(h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation(),b.onEscape)b.onEscape(h);else{const T=h.currentTarget;T&&T instanceof HTMLElement&&T.blur()}}return{get isOpen(){return y(e)},get position(){return y(t)},get element(){return y(i)},openModal:o,closeModal:u,closeModalWithoutFocus:c,handleClick:d,handleKeydown:p}}var Np=Te('<li class="flex items-center gap-2 py-1 border-b border-grey-50 cursor-move hover:bg-grey-20 w-full m-0 list-none"><input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),Kp=Te('<div class="-mt-6"><!></div>'),Fp=Te('<div class="task-list-wrapper m-0 p-0"><ul></ul> <!></div>'),Bp=Te("<p>Loading tasks...</p> <!>",1),jp=Te('<div class="flex flex-col mb-6 w-full"><div class="border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border"><div class="flex items-center transition-colors hover:bg-grey-20 hover:rounded py-1"><h2 role="button" tabindex="0" class="list-title cursor-pointer m-0 px-2 py-2 leading-none text-grey-110 font-gilda text-[24px] rounded -my-1 transition-colors flex-1 min-w-0 focus:outline-none"> </h2></div></div> <!></div> <!> <!>',1);function zp(e,t){ir(t,!0);const i=()=>Oa(y(p),"$tasksQuery",o),[o,u]=Bs();let c=Ot(t,"allLists",19,()=>[]),d=Ot(t,"stableLists",19,()=>[]),p=me(null),h=me(Jt([])),b=me(!1);const w=al(),T=al();let _=me(null),E=me(""),O=me(null),L=me(null),D=me(null),A=me(null),H=me(null),F=me(null),M=me(!1),W=me(!1),J=me(null),oe=me(null);function re(q){return Array.isArray(q)?[...q].sort((V,G)=>{const ne=V?.columnIndex??0,Le=G?.columnIndex??0;if(ne!==Le)return ne-Le;const nt=V?.order??0,xe=G?.order??0;if(nt!==xe)return nt-xe;const he=V?.id??0,Qe=G?.id??0;return he-Qe}):[]}function se(q,V,G){const ne=re(V);if(!ne.length)return null;const Le=ne.findIndex(nt=>nt.id===q);return Le===-1?null:G==="next"?Le>=ne.length-1?null:ne[Le+1].id:G==="prev"?Le<=0?null:ne[Le-1].id:null}Ge(()=>{d().some(V=>V.id===t.listId)&&t.listId?(!y(p)||y(oe)!==t.listId)&&(y(oe)!==t.listId&&N(h,[],!0),Ca(N(p,Pa(()=>Jo(t.listId)),!0),"$tasksQuery",o),N(oe,t.listId,!0)):(Ca(N(p,null),"$tasksQuery",o),N(oe,null),N(h,[],!0))}),Ge(()=>{i()&&Array.isArray(i())&&N(h,i().filter(q=>q.status==="unchecked"||q.status==="checked"),!0)});const de=et(()=>t.listId&&(d().some(q=>q.id===t.listId)||c().some(q=>q.id===t.listId)));Ge(()=>{if(!y(L))return;function q(V){const G=V.target;if((V.key==="Enter"||V.key===" ")&&G instanceof HTMLElement&&G.tagName==="H2"&&G.hasAttribute("role")&&G.getAttribute("role")==="button"){const ne=y(L)?.querySelector('h2[role="button"]');ne&&G===ne&&(V.preventDefault(),V.stopImmediatePropagation(),T.openModal(G))}}return y(L).addEventListener("keydown",q,!0),()=>{y(L)&&y(L).removeEventListener("keydown",q,!0)}}),Ge(()=>{if(!y(D))return;function q(V){const G=V.target;if((V.key==="Enter"||V.key===" ")&&G instanceof HTMLElement&&G.hasAttribute("role")&&G.getAttribute("role")==="button"){const ne=y(D)?.querySelector('span[role="button"]');ne&&G===ne&&(V.preventDefault(),V.stopImmediatePropagation(),ke())}}return y(D).addEventListener("keydown",q,!0),()=>{y(D)&&y(D).removeEventListener("keydown",q,!0)}}),Ge(()=>{if(!y(O))return;async function q(V){const G=V.target;if((V.key==="Enter"||V.key===" ")&&G instanceof HTMLElement&&G.hasAttribute("data-no-drag")){V.preventDefault(),V.stopImmediatePropagation();const ne=G.closest("li[data-id]");if(ne){const Le=parseInt(ne.getAttribute("data-id")),nt=y(h).find(xe=>xe.id===Le);nt&&(N(_,Le,!0),N(E,nt.text,!0),w.openModal(G))}return}if(V.key==="ArrowDown"||V.key==="ArrowUp"){const ne=document.activeElement;if(!ne)return;const Le=ne.closest("li[data-id]");if(!Le||!y(O).contains(Le))return;const nt=Le.getAttribute("data-id");if(!nt)return;const xe=parseInt(nt);if(!y(h).find(Ie=>Ie.id===xe))return;const Qe=y(h).findIndex(Ie=>Ie.id===xe),He=Qe===0,dt=Qe===y(h).length-1;if(V.key==="ArrowDown"&&dt){V.preventDefault(),V.stopImmediatePropagation();const Ie=se(t.listId,c(),"next");Ie!=null&&await ie(xe,Ie)}else if(V.key==="ArrowUp"&&He){V.preventDefault(),V.stopImmediatePropagation();const Ie=se(t.listId,c(),"prev");Ie!=null&&await ge(xe,Ie)}}}return y(O).addEventListener("keydown",q,!0),()=>{y(O).removeEventListener("keydown",q,!0)}});async function ie(q,V){try{const G=await Jo(V),ne=[{id:q},...G];await $o(V,ne)}catch(G){console.error("Error moving task to next list:",G)}}async function ge(q,V){try{const ne=[...await Jo(V),{id:q}];await $o(V,ne)}catch(G){console.error("Error moving task to previous list:",G)}}function je(q){N(h,q.detail.items.filter(V=>V&&typeof V.id=="number"),!0)}function Ke(q,V){const G=q.key,ne=q.currentTarget,Le=q.target;if(!(!(ne instanceof HTMLElement)||ne!==Le)){if(G==="Enter"||G===" ")y(W)?(N(W,!1),N(J,V,!0),N(F,ne,!0),N(M,!0)):(N(W,!0),N(J,V,!0));else if(G==="Escape"){const nt=typeof document<"u"?document.querySelectorAll('li[aria-grabbed="true"], li.svelte-dnd-action-dragged'):[];let xe=!1;if(y(O)&&y(O)instanceof HTMLElement){const He=window.getComputedStyle(y(O));He.boxShadow&&He.boxShadow!=="none"&&He.boxShadow.includes("inset")&&(xe=!0)}let he=0;if(typeof document<"u"){const He=document.querySelectorAll("ul");for(const dt of He)if(dt instanceof HTMLElement&&dt!==y(O)){const Ie=window.getComputedStyle(dt);Ie.boxShadow&&Ie.boxShadow!=="none"&&Ie.boxShadow.includes("inset")&&he++}}const Qe=nt.length>0||xe||he>0;y(W)||Qe?(N(W,!1),N(J,V,!0),N(F,ne,!0),N(M,!0)):(q.preventDefault(),q.stopPropagation(),q.stopImmediatePropagation(),N(F,ne,!0),N(M,!0),ne instanceof HTMLElement&&ne.blur())}}}function Ze(q,V){const G=q.currentTarget;y(W)&&y(J)===V&&(N(W,!1),N(F,G,!0),N(M,!0))}Ge(()=>{if(!y(O))return;async function q(V){const G=V.key;if(G==="Tab"&&y(M)&&y(F)){if(V.preventDefault(),V.stopImmediatePropagation(),V.stopPropagation(),N(M,!1),typeof document<"u"){let Ie=y(F);if((!(Ie instanceof HTMLElement)||!document.contains(Ie))&&y(D)){const Nn=y(D).querySelector('span[role="button"]');Nn&&Nn instanceof HTMLElement&&(Ie=Nn)}Ie&&Ie instanceof HTMLElement&&Ie.focus()}return}if(G!=="ArrowDown"&&G!=="ArrowUp")return;const ne=document.activeElement;if(!ne)return;const Le=ne.closest("li[data-id]");if(!Le||!y(O).contains(Le))return;const nt=Le.getAttribute("data-id");if(!nt)return;const xe=parseInt(nt);if(!y(h).find(Ie=>Ie.id===xe))return;const Qe=y(h).findIndex(Ie=>Ie.id===xe),He=Qe===0,dt=Qe===y(h).length-1;if(G==="ArrowDown"&&dt){V.preventDefault(),V.stopImmediatePropagation(),V.stopPropagation();const Ie=se(t.listId,c(),"next");Ie!=null&&await ie(xe,Ie)}else if(G==="ArrowUp"&&He){V.preventDefault(),V.stopImmediatePropagation(),V.stopPropagation();const Ie=se(t.listId,c(),"prev");Ie!=null&&await ge(xe,Ie)}}return document.addEventListener("keydown",q,!0),()=>{document.removeEventListener("keydown",q,!0)}});async function it(q){const V=q.detail.items.filter(G=>G&&typeof G.id=="number");N(h,V,!0);try{await $o(t.listId,V)}catch(G){console.error("Error updating task order:",G)}}function ke(){N(b,!0)}async function gt(q,V=""){if(q.key==="Escape"){let G=V||"";if(y(A)?G=(y(A).value||"").toString():t.newTaskInput&&(G=(t.newTaskInput||"").toString()),G.length>0){await Ae({closeAfterSave:!0});return}if(N(M,!0),y(D)){const ne=y(D).querySelector('span[role="button"]');ne&&ne instanceof HTMLElement?N(F,ne,!0):N(F,null)}else N(F,null);N(b,!1),t.onInputChange(""),await An(),await An(),await new Promise(ne=>requestAnimationFrame(ne)),await new Promise(ne=>setTimeout(ne,il))}}Ge(()=>{if(y(b))return wc(()=>y(A),()=>{y(b)&&(N(b,!1),t.onInputChange(""))},{ignoreElements:[],shouldClose:()=>y(A)&&y(A).value.trim()!==""?!1:!t.newTaskInput||t.newTaskInput.trim()===""})});async function Ae(q={}){const V=q&&typeof q=="object"&&q.closeAfterSave===!0;let G=t.newTaskInput||"";if(y(A)&&(G=(y(A).value||"").toString()),G=(G||"").toString(),wp(G)){N(b,!1),t.onInputChange(""),await An(),await An(),await new Promise(Le=>requestAnimationFrame(Le)),await new Promise(Le=>setTimeout(Le,il));return}const{text:ne}=bc(G);try{const Le=await ep(t.listId,ne),xe=(y(h).length>0?Math.max(...y(h).map(Qe=>Qe.order||0)):-1)+1,he={id:Le,text:ne,listId:t.listId,order:xe,status:"unchecked"};N(h,[...y(h),he],!0),t.onInputChange(""),V&&N(b,!1)}catch(Le){console.error("Error creating task:",Le)}}async function ze(q,V){try{await nl(q,V==="unchecked"?"checked":"unchecked")}catch(G){console.error("Error updating task status:",G)}}async function te(q){await nl(q,"archived")}function ye(){return y(O)?_p(y(O),"li[data-id]",'span[role="button"]'):null}async function Re(q=es,V=ma){y(L)&&await gp(()=>{if(y(D)){const G=y(D).querySelector('span[role="button"]');if(G&&G instanceof HTMLElement)return G}return null},{maxAttempts:q,retryInterval:V,waitForTick:!1})}async function Ue(q){try{await te(q),y(_)===q&&(N(_,null),N(E,""),w.closeModalWithoutFocus(),await An(),await new Promise(V=>setTimeout(V,Es)),setTimeout(()=>{const V=(G=0)=>{const ne=ye();ne?ne.focus():G<es?setTimeout(()=>V(G+1),ma):Re(mp,ma)};V()},yp))}catch(V){console.error("Error archiving task:",V)}}function Ce(q,V,G){const ne=G?.currentTarget||G?.target;N(_,q,!0),N(E,V,!0),w.openModal(ne)}function Be(q,V,G){if(G.key==="Enter"||G.key===" ")N(_,q,!0),N(E,V,!0),w.handleKeydown(G);else if(G.key==="Escape"){G.preventDefault(),G.stopImmediatePropagation();const ne=G.currentTarget;ne&&ne instanceof HTMLElement&&(N(F,ne,!0),N(M,!0),ne.blur())}}async function ct(q,V){try{await tp(q,V),N(_,null),N(E,""),w.closeModal()}catch(G){console.error("Error updating task text:",G)}}function ft(){N(_,null),N(E,""),w.closeModal()}async function en(q){await Ue(q),setTimeout(()=>{if(typeof document>"u")return;const V=document.activeElement;y(L)&&(!V||!y(L).contains(V))&&Re(es,ma)},Es)}function or(q){T.handleClick(q)}function Ve(q){T.handleKeydown(q)}async function It(q,V){try{await Jh(q,V),T.closeModal()}catch(G){console.error("Error updating list name:",G)}}function sr(){T.closeModal()}async function Gt(q){try{await ap(q),await rp(q)}catch(V){console.error("Error archiving list:",V)}}var jt=jp(),Lt=xt(jt),Dt=_e(Lt),sn=_e(Dt),Rn=_e(sn);Rn.__click=or,Rn.__keydown=Ve;var ue=_e(Rn);Vt(Dt,q=>N(H,q),()=>y(H));var Mn=Me(Dt,2);{var Sr=q=>{var V=Fp(),G=_e(V);Br(G,21,()=>y(h),xe=>xe.id,(xe,he)=>{var Qe=Np(),He=_e(Qe);He.__change=()=>ze(y(he).id,y(he).status),He.__keydown=qe=>{if(qe.key==="Enter"||qe.key===" ")qe.preventDefault(),qe.stopPropagation(),ze(y(he).id,y(he).status);else if(qe.key==="Escape"){qe.preventDefault(),qe.stopPropagation(),qe.stopImmediatePropagation();const Kn=qe.currentTarget;if(Kn&&Kn instanceof HTMLElement){const zt=Kn.closest("li[data-id]");zt&&zt instanceof HTMLElement&&(N(F,zt,!0),N(M,!0)),Kn.blur()}}};var dt=Me(He,2);dt.__click=qe=>Ce(y(he).id,y(he).text,qe),dt.__keydown=qe=>Be(y(he).id,y(he).text,qe);var Ie=_e(dt),Nn=Me(dt,2);{var Fi=qe=>{{let Kn=et(()=>`Archive task: ${y(he).text||"blank task"}`);yn(qe,{variant:"secondary",size:"small",onclick:()=>Ue(y(he).id),class:"print:hidden",get"aria-label"(){return y(Kn)},children:(zt,Bi)=>{var so=pn("Archive");fe(zt,so)},$$slots:{default:!0}})}};tt(Nn,qe=>{y(he).status==="checked"&&qe(Fi)})}lt(()=>{Tt(Qe,"data-id",y(he).id),xv(He,y(he).status==="checked"),Tt(He,"aria-label",`Mark task "${y(he).text||"blank task"}" as ${y(he).status==="checked"?"unchecked":"checked"}`),Ai(dt,1,Ql(y(he).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100":"cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100")),Tt(dt,"aria-label",`Edit task: ${y(he).text||"blank task"}`),br(Ie,y(he).text||"Â ")}),_r("keydown",Qe,qe=>Ke(qe,y(he).id),!0),_r("blur",Qe,qe=>Ze(qe,y(he).id)),fe(xe,Qe)}),Vt(G,xe=>N(O,xe),()=>y(O)),ql(G,(xe,he)=>gc?.(xe,he),()=>({items:y(h),type:"task",zoneTabIndex:-1,dropTargetStyle:{outline:"none",boxShadow:"inset 0 0 0 2px rgba(107, 143, 217, 0.4)",backgroundColor:"rgba(107, 143, 217, 0.04)",borderRadius:"4px"}}));var ne=Me(G,2);{var Le=xe=>{var he=Kp(),Qe=_e(he);ts(Qe,{get inputValue(){return t.newTaskInput},get onInputChange(){return t.onInputChange},onSave:Ae,onEscape:gt,onActivate:ke,buttonText:"Add your first task",placeholder:"start typing...",get ariaLabel(){return`Add your first task to ${t.listName??""}`},marginLeft:!1,get isInputActive(){return y(b)},set isInputActive(He){N(b,He,!0)},get containerElement(){return y(D)},set containerElement(He){N(D,He,!0)},get textareaElement(){return y(A)},set textareaElement(He){N(A,He,!0)}}),fe(xe,he)},nt=xe=>{ts(xe,{get inputValue(){return t.newTaskInput},get onInputChange(){return t.onInputChange},onSave:Ae,onEscape:gt,onActivate:ke,buttonText:"Add Task",placeholder:"start typing...",get ariaLabel(){return`Add new task to ${t.listName??""}`},marginLeft:!1,get isInputActive(){return y(b)},set isInputActive(he){N(b,he,!0)},get containerElement(){return y(D)},set containerElement(he){N(D,he,!0)},get textareaElement(){return y(A)},set textareaElement(he){N(A,he,!0)}})};tt(ne,xe=>{y(h).length===0?xe(Le):xe(nt,!1)})}lt(()=>Ai(G,1,`space-y-0 m-0 p-0 list-none w-full ${y(h).length===0?"empty-drop-zone min-h-[24px]":""}`)),_r("consider",G,je),_r("finalize",G,it),fe(q,V)},wn=q=>{var V=Bp(),G=Me(xt(V),2);ts(G,{get inputValue(){return t.newTaskInput},get onInputChange(){return t.onInputChange},onSave:Ae,onEscape:gt,onActivate:ke,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${t.listName??""}`},marginLeft:!1,get isInputActive(){return y(b)},set isInputActive(ne){N(b,ne,!0)},get containerElement(){return y(D)},set containerElement(ne){N(D,ne,!0)},get textareaElement(){return y(A)},set textareaElement(ne){N(A,ne,!0)}}),fe(q,V)};tt(Mn,q=>{y(de)?q(Sr):q(wn,!1)})}Vt(Lt,q=>N(L,q),()=>y(L));var Se=Me(Lt,2);Ip(Se,{get isOpen(){return w.isOpen},get taskId(){return y(_)},get taskText(){return y(E)},get taskPosition(){return w.position},onSave:ct,onCancel:ft,onArchive:en});var En=Me(Se,2);Lp(En,{get isOpen(){return T.isOpen},get listId(){return t.listId},get listName(){return t.listName},get listPosition(){return T.position},onSave:It,onCancel:sr,onArchive:Gt}),lt(()=>{Tt(Lt,"data-list-id",t.listId),Tt(Rn,"aria-label",`Rename list: ${t.listName}`),br(ue,t.listName)}),fe(e,jt),ar(),u()}ei(["click","keydown","change"]);var Hp=Te('<div class="flex flex-col mb-6 svelte-785piu" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),Up=Te('<div class="flex flex-col mb-6 svelte-785piu"></div>'),Vp=Te('<div class="empty-drop-zone min-h-[96px]" tabindex="-1"></div>'),Wp=Te('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Gp=Te('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Yp=Te('<div><div class="flex flex-col pt-0"><!> <!></div> <div><!></div></div>');function qp(e,t){ir(t,!0);let i=Ot(t,"createListInput",15,""),o=Ot(t,"createListInputElement",15,null),u=me(null),c=me(null),d=me(null);Ge(()=>{if(typeof document>"u"||t.columnLists.length!==0||!y(c))return;const D=setTimeout(()=>{y(c)&&y(c).getAttribute("tabindex")!=="-1"&&y(c).setAttribute("tabindex","-1")},Es);return()=>{clearTimeout(D)}}),Ge(()=>{if(!y(u)||!(y(u)instanceof HTMLElement))return;t.keyboardListDrag?.active===!0?(y(u).style.outline="none",y(u).style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",y(u).style.borderRadius="4px"):(y(u).style.outline="",y(u).style.boxShadow="",y(u).style.borderRadius="")});var p=Yp(),h=_e(p),b=_e(h);Br(b,19,()=>t.columnLists,D=>D.id,(D,A)=>{const H=et(()=>bs(y(A))),F=et(()=>t.stableLists.find(de=>de.id===y(A).id)),M=et(()=>!y(F)&&!y(H)?y(A):null),W=et(()=>y(F)||y(M));var J=Jn(),oe=xt(J);{var re=de=>{var ie=Hp(),ge=_e(ie);{let je=et(()=>y(W).name??"Unnamed list"),Ke=et(()=>t.newTaskInputs[y(W).id]||"");zp(ge,{get listId(){return y(W).id},get listName(){return y(je)},get newTaskInput(){return y(Ke)},onInputChange:Ze=>t.onInputChange(y(W).id,Ze),get allLists(){return t.allLists},get stableLists(){return t.stableLists}})}lt(()=>{Tt(ie,"data-id",y(A).id),Tt(ie,"aria-label",`List: ${y(W).name??"Unnamed list"}`),Tt(ie,"aria-pressed",t.keyboardListDrag?.active&&t.keyboardListDrag?.listId===y(W).id?"true":"false")}),_r("keydown",ie,je=>t.onListKeyboardKeydown(je,y(W).id),!0),fe(de,ie)},se=de=>{var ie=Up();lt(()=>Tt(ie,"data-id",y(A).id)),fe(de,ie)};tt(oe,de=>{y(W)?de(re):de(se,!1)})}fe(D,J)});var w=Me(b,2);{var T=D=>{var A=Vp();Vt(A,H=>N(c,H),()=>y(c)),fe(D,A)};tt(w,D=>{t.columnLists.length===0&&D(T)})}Vt(h,D=>N(u,D),()=>y(u)),ql(h,(D,A)=>gc?.(D,A),()=>({items:t.columnLists,type:"list",zoneTabIndex:-1,dropTargetStyle:{outline:"none",boxShadow:"inset 0 0 0 2px rgba(107, 143, 217, 0.4)",borderRadius:"4px"}}));var _=Me(h,2),E=_e(_);{var O=D=>{var A=Wp(),H=_e(A),F=_e(H);F.__keydown=M=>{M.key==="Enter"&&!M.shiftKey?(M.preventDefault(),t.onCreateList(t.columnIndex)):M.key==="Escape"?t.onCreateListInputEscape(M,t.columnIndex,t.columnLists.length===0):M.key==="Tab"&&t.onCreateListOnTab(t.columnIndex)},Vt(F,M=>o(M),()=>o()),Fs(F,i),fe(D,A)},L=D=>{var A=Gp(),H=_e(A);H.__click=()=>t.onCreateListClick(t.columnIndex),H.__keydown=F=>t.onCreateListKeydown(F,t.columnIndex),Vt(H,F=>N(d,F),()=>y(d)),fe(D,A)};tt(E,D=>{t.createListColumnIndex===t.columnIndex?D(O):D(L,!1)})}lt(()=>{Ai(p,1,`flex flex-col pt-0 min-w-0 px-2 ${t.columnIndex<4?"border-r border-grey-50":""}`,"svelte-785piu"),Tt(p,"data-column-index",t.columnIndex),Ai(_,1,`flex flex-col mb-6 w-full print:hidden ${t.columnLists.length===0?"create-list-empty-column":""}`,"svelte-785piu")}),_r("consider",h,function(...D){t.onListConsider?.apply(this,D)}),_r("finalize",h,function(...D){t.onListFinalize?.apply(this,D)}),fe(e,p),ar()}ei(["keydown","click"]);var Zp=Te("<p>Loading...</p>"),Qp=Te('<div class="grid grid-cols-5 w-full py-4 px-1"></div>'),Xp=Te('<div class="w-full h-full overflow-auto"><!></div>');function Jp(e,t){ir(t,!0);const i=()=>Oa(c,"$lists",o),[o,u]=Bs();let c=Pa(()=>qh()),d=et(()=>i()||[]),p=me(Jt([])),h=me(Jt({})),b=me(null),w=me(""),T=me(null),_=me(Jt({active:!1,listId:null,lastDraggedId:null,shouldRefocusOnNextTab:!1}));Ge(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(y(h)).length===0){const te={};for(const ye of i())te[ye.id]="";N(h,te,!0)}}),Ge(()=>{if(i()&&Array.isArray(i())&&i().length>0){const te={...y(h)};let ye=!1;for(const Re of i())Re.id in te||(te[Re.id]="",ye=!0);ye&&N(h,te,!0)}});let E=me(0);Ge(()=>{if(i()&&Array.isArray(i())){const te=i().map(ye=>({id:ye.id,name:ye.name,order:ye.order,columnIndex:ye.columnIndex}));te.length!==y(E)&&N(E,te.length,!0),N(p,te,!0)}else y(E)>0&&N(E,0),N(p,[],!0)});const O=5;let L=et(()=>op(y(p),O));async function D(te,ye){const Re=y(L);if(!Re||Re.length===0)return;const Ue=lp(Re,te,ye,O);if(!Ue)return;const{updatedDraggableLists:Ce,targetColumnIndex:Be,targetColumnItems:ct}=Ue;N(p,Ce,!0);try{await rl(Be,ct)}catch(ft){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",ft)}y(_).active&&y(_).listId===te&&await _c(te)}function A(te){return y(_).active===!0&&y(_).listId===te}function H(te){N(_,{...y(_),active:!0,listId:te,shouldRefocusOnNextTab:!1},!0)}function F(){y(_).listId!=null?N(_,{...y(_),active:!1,listId:null,lastDraggedId:y(_).listId,shouldRefocusOnNextTab:!0},!0):N(_,{...y(_),active:!1,listId:null},!0)}function M(){if(typeof document>"u")return;const te=document.activeElement;te&&te instanceof HTMLElement&&te.blur()}function W(te,ye){const Re=te.currentTarget,Ue=te.target,Ce=te.key;if(!A(ye)){Ce==="Enter"||Ce===" "?Re instanceof HTMLElement&&Re===Ue&&(te.preventDefault(),te.stopPropagation(),te.stopImmediatePropagation(),ye!=null&&H(ye)):Ce==="Escape"&&Re instanceof HTMLElement&&Re===Ue&&(te.preventDefault(),te.stopPropagation(),te.stopImmediatePropagation(),ye!=null&&N(_,{...y(_),lastDraggedId:ye,shouldRefocusOnNextTab:!0},!0),Re.blur());return}}Ge(()=>typeof document>"u"?void 0:bp({getKeyboardListDrag:()=>({active:y(_).active,listId:y(_).listId}),getLastKeyboardDraggedListId:()=>y(_).lastDraggedId,getShouldRefocusListOnNextTab:()=>y(_).shouldRefocusOnNextTab,setShouldRefocusListOnNextTab:ye=>{N(_,{...y(_),shouldRefocusOnNextTab:ye},!0)}},(ye,Re)=>D(ye,Re),()=>F(),()=>M()));function J(te,ye){y(h)[te]=ye}const oe=xp({getColumnIndex:()=>y(b),setColumnIndex:te=>{N(b,te,!0)},getInput:()=>y(w),setInput:te=>{N(w,te,!0)},getInputElement:()=>y(T)}),{handleCreateListClick:re,handleCreateListKeydown:se,handleCreateListInputEscape:de,handleCreateList:ie,handleCreateListOnTab:ge,setupClickOutsideEffect:je,setupFocusEffect:Ke}=oe;Ge(()=>je()),Ge(()=>Ke());function Ze(te,ye){const Re=te.detail.items||[];N(p,cp(Re,ye,y(p)),!0)}async function it(te,ye){const Re=(te.detail.items||[]).filter(Ce=>!bs(Ce)),Ue=(te.detail.items||[]).filter(Ce=>bs(Ce));if(Ue.length>0&&console.warn("[DRAG] finalize - WARNING: Placeholders still present in finalize!",Ue.length),!fp(Re,ye,i(),y(p)))try{await rl(ye,Re)}catch(Ce){console.error("[DRAG] finalize - ERROR updating list order:",Ce)}}var ke=Xp(),gt=_e(ke);{var Ae=te=>{var ye=Zp();fe(te,ye)},ze=te=>{var ye=Jn(),Re=xt(ye);{var Ue=Ce=>{var Be=Qp();Br(Be,21,()=>y(L),ga,(ct,ft,en)=>{{let or=et(()=>({active:y(_).active,listId:y(_).listId}));qp(ct,{columnIndex:en,get columnLists(){return y(ft)},get stableLists(){return y(d)},get newTaskInputs(){return y(h)},get createListColumnIndex(){return y(b)},get keyboardListDrag(){return y(or)},onInputChange:J,onListKeyboardKeydown:W,onListConsider:Ve=>Ze(Ve,en),onListFinalize:Ve=>it(Ve,en),get onCreateListClick(){return re},get onCreateListKeydown(){return se},get onCreateListInputEscape(){return de},get onCreateList(){return ie},get onCreateListOnTab(){return ge},get allLists(){return i()},get createListInput(){return y(w)},set createListInput(Ve){N(w,Ve,!0)},get createListInputElement(){return y(T)},set createListInputElement(Ve){N(T,Ve,!0)}})}}),fe(Ce,Be)};tt(Re,Ce=>{Array.isArray(i())&&Ce(Ue)},!0)}fe(te,ye)};tt(gt,te=>{i()===void 0||i()===null?te(Ae):te(ze,!1)})}fe(e,ke),ar(),u()}var $p=Te("<p>Loading...</p>"),em=Te("<p>Loading data...</p>"),tm=Te('<p class="text-grey-60">No archived lists or tasks</p>'),nm=Te('<span class="text-sm text-grey-60"> </span>'),rm=Te('<span class="text-xs bg-grey-30 px-2 py-1 rounded">[List Archived]</span> <!>',1),im=Te('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),am=Te('<p class="text-sm text-grey-60 italic">No archived tasks</p>'),om=Te('<li class="flex items-center gap-3 flex-wrap"><span class="line-through text-grey-100"> </span> <!></li>'),sm=Te('<div class="mb-4"><h4 class="text-sm font-medium text-grey-60 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),um=Te('<div class="border-b border-grey-50 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold text-grey-110"> </h3> <!></div></div> <div class="border-b border-grey-50 pb-4"><!></div>',1),lm=Te('<div class="grid grid-cols-2 gap-4"></div>'),cm=Te('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function fm(e,t){ir(t,!0);const i=()=>Oa(y(p),"$listsQuery",u),o=()=>Oa(y(d),"$archivedTasksQuery",u),[u,c]=Bs();let d=me(null),p=me(null);Ge(()=>{Ca(N(d,Pa(()=>$h()),!0),"$archivedTasksQuery",u),Ca(N(p,Pa(()=>Zh()),!0),"$listsQuery",u)});function h(A){return A?new Date(A).toDateString():null}function b(A){return A?new Date(A).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let w=et(()=>{const A=y(d)?o():null,H=y(p)?i():null;if(!H||!Array.isArray(H))return[];const F={};if(A&&Array.isArray(A))for(const W of A)F[W.listId]||(F[W.listId]=[]),F[W.listId].push(W);const M=[];for(const W of H){const J=W.archivedAt!=null,oe=F[W.id]&&F[W.id].length>0;if(J||oe){const re=F[W.id]||[],se={};for(const de of re){const ie=h(de.archivedAt)||"Unknown";se[ie]||(se[ie]=[]),se[ie].push(de)}M.push({list:W,listArchiveDate:W.archivedAt?h(W.archivedAt):null,tasksByDate:se,hasTasks:re.length>0})}}return M.sort((W,J)=>{if(W.list.order!==J.list.order)return W.list.order-J.list.order;const oe=W.list.name??"Unnamed list",re=J.list.name??"Unnamed list";return oe.localeCompare(re)}),M});function T(A){return A.sort((H,F)=>{if(H==="Unknown")return 1;if(F==="Unknown")return-1;const M=new Date(H).getTime();return new Date(F).getTime()-M})}async function _(A){try{(await np(A)).listRestored&&console.log("Task and its list have been restored")}catch(H){console.error("Error restoring task:",H)}}var E=cm(),O=Me(_e(E),2);{var L=A=>{var H=$p();fe(A,H)},D=A=>{var H=Jn(),F=xt(H);{var M=J=>{var oe=em();fe(J,oe)},W=J=>{var oe=Jn(),re=xt(oe);{var se=ie=>{var ge=tm();fe(ie,ge)},de=ie=>{var ge=lm();Br(ge,21,()=>y(w),ga,(je,Ke)=>{const Ze=et(()=>y(Ke).list),it=et(()=>y(Ze).name??"Unnamed list"),ke=et(()=>y(Ze).archivedAt!=null),gt=et(()=>y(Ke).listArchiveDate);var Ae=um(),ze=xt(Ae),te=_e(ze),ye=_e(te),Re=_e(ye),Ue=Me(ye,2);{var Ce=Ve=>{var It=rm(),sr=Me(xt(It),2);{var Gt=jt=>{var Lt=nm(),Dt=_e(Lt);lt(sn=>br(Dt,`- ${sn??""}`),[()=>b(y(gt))]),fe(jt,Lt)};tt(sr,jt=>{y(gt)&&jt(Gt)})}fe(Ve,It)},Be=Ve=>{var It=im();fe(Ve,It)};tt(Ue,Ve=>{y(ke)?Ve(Ce):Ve(Be,!1)})}var ct=Me(ze,2),ft=_e(ct);{var en=Ve=>{var It=am();fe(Ve,It)},or=Ve=>{var It=Jn(),sr=xt(It);Br(sr,17,()=>T(Object.keys(y(Ke).tasksByDate)),ga,(Gt,jt)=>{const Lt=et(()=>y(Ke).tasksByDate[y(jt)]);var Dt=sm(),sn=_e(Dt),Rn=_e(sn),ue=Me(sn,2);Br(ue,21,()=>y(Lt),ga,(Mn,Sr)=>{var wn=om(),Se=_e(wn),En=_e(Se),q=Me(Se,2);yn(q,{variant:"primary",size:"small",onclick:()=>_(y(Sr).id),children:(V,G)=>{var ne=pn("Restore");fe(V,ne)},$$slots:{default:!0}}),lt(()=>br(En,y(Sr).text)),fe(Mn,wn)}),lt(Mn=>br(Rn,Mn),[()=>y(jt)==="Unknown"?"Unknown Date":b(y(jt))]),fe(Gt,Dt)}),fe(Ve,It)};tt(ft,Ve=>{y(Ke).hasTasks?Ve(or,!1):Ve(en)})}lt(()=>br(Re,y(it))),fe(je,Ae)}),fe(ie,ge)};tt(re,ie=>{y(w).length===0?ie(se):ie(de,!1)},!0)}fe(J,oe)};tt(F,J=>{!o()||!i()?J(M):J(W,!1)},!0)}fe(A,H)};tt(O,A=>{!y(d)||!y(p)?A(L):A(D,!1)})}lt(()=>nr(E,`width: ${ws}px;`)),fe(e,E),ar(),c()}var dm=Te('<main class="min-h-screen flex flex-col items-center justify-center bg-grey-10 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><!></div> <div class="bg-grey-10 print:bg-grey-10 border-2 border-grey-50 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-grey-80 pointer-events-none z-0"></div> <div class="absolute inset-[16px] z-10"><!></div></div> <!></main>');function vm(e){function t(){window.print()}var i=dm(),o=_e(i),u=_e(o);yn(u,{variant:"primary",size:"large",onclick:t,children:(b,w)=>{var T=pn("Print");fe(b,T)},$$slots:{default:!0}});var c=Me(o,2),d=Me(_e(c),2),p=_e(d);Jp(p,{});var h=Me(c,2);fm(h,{}),lt(()=>{nr(o,`width: ${ws}px;`),nr(c,`width: ${ws}px; height: ${vp}px;`)}),fe(e,i)}const hm=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],pm=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function mm(){try{if(await we.lists.count()>0)return;await we.lists.bulkAdd(hm),await we.tasks.bulkAdd(pm),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await mm().catch(console.error),dv(vm,{target:document.getElementById("app")})))();
