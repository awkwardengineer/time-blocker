(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function a(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(c){if(c.ep)return;c.ep=!0;const f=a(c);fetch(c.href,f)}})();const Qc="production",X=!Qc.toLowerCase().startsWith("prod");var gu=Array.isArray,$c=Array.prototype.indexOf,No=Array.from,Ln=Object.defineProperty,yr=Object.getOwnPropertyDescriptor,_u=Object.getOwnPropertyDescriptors,Xc=Object.prototype,Jc=Array.prototype,Fo=Object.getPrototypeOf,Us=Object.isExtensible;const qi=()=>{};function ef(e){for(var r=0;r<e.length;r++)e[r]()}function bu(){var e,r,a=new Promise((u,c)=>{e=u,r=c});return{promise:a,resolve:e,reject:r}}const ct=2,Ko=4,Bo=8,tf=1<<24,vn=16,pn=32,ir=64,fa=128,Zt=512,yt=1024,Pt=2048,yn=4096,Ft=8192,On=16384,jo=32768,br=65536,Zi=1<<17,wu=1<<18,Sr=1<<19,nf=1<<20,Nn=32768,mo=1<<21,da=1<<22,In=1<<23,Cn=Symbol("$state"),rf=Symbol(""),Eu=Symbol("proxy path"),vr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function af(){if(X){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Vs(){if(X){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function of(){if(X){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function sf(e){if(X){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function uf(){if(X){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function lf(e){if(X){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function cf(){if(X){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ff(e){if(X){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function df(){if(X){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function hf(){if(X){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function vf(){if(X){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function pf(){if(X){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const xu=1,Tu=2,ku=4,yf=8,mf=16,gf=1,_f=2,ht=Symbol(),bf=Symbol("filename"),wf="http://www.w3.org/1999/xhtml";var Du="font-weight: bold",Au="font-weight: normal";function lo(e){X?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Du,Au):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Ef(){X?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Du,Au):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Su(e){return e===this.v}function Ou(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Iu(e){return!Ou(e,this.v)}let xf=!1;function en(e,r){return e.label=r,Cu(e.v,r),e}function Cu(e,r){return e?.[Eu]?.(r),e}function Tf(e){const r=new Error,a=kf();return a.length===0?null:(a.unshift(`
`),Ln(r,"stack",{value:a.join(`
`)}),Ln(r,"name",{value:e}),r)}function kf(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const a=r.split(`
`),u=[];for(let c=0;c<a.length;c++){const f=a[c],v=f.replaceAll("\\","/");if(f.trim()!=="Error"){if(f.includes("validate_each_keys"))return[];v.includes("svelte/src/internal")||v.includes("node_modules/.vite")||u.push(f)}}return u}let Ot=null;function wr(e){Ot=e}let Jr=null;function Qi(e){Jr=e}let si=null;function Ws(e){si=e}function ar(e,r=!1,a){Ot={p:Ot,i:!1,c:null,e:null,s:e,x:null,l:null},X&&(Ot.function=a,si=a)}function or(e){var r=Ot,a=r.e;if(a!==null){r.e=null;for(var u of a)Yu(u)}return r.i=!0,Ot=r.p,X&&(si=Ot?.function??null),{}}function Pu(){return!0}let $n=[];function Ru(){var e=$n;$n=[],ef(e)}function Or(e){if($n.length===0&&!Qr){var r=$n;queueMicrotask(()=>{r===$n&&Ru()})}$n.push(e)}function Df(){for(;$n.length>0;)Ru()}const go=new WeakMap;function Mu(e){var r=Me;if(r===null)return Se.f|=In,e;if(X&&e instanceof Error&&!go.has(e)&&go.set(e,Af(e,r)),(r.f&jo)===0){if((r.f&fa)===0)throw X&&!r.parent&&e instanceof Error&&Lu(e),e;r.b.error(e)}else Er(e,r)}function Er(e,r){for(;r!==null;){if((r.f&fa)!==0)try{r.b.error(e);return}catch(a){e=a}r=r.parent}throw X&&e instanceof Error&&Lu(e),e}function Af(e,r){const a=yr(e,"message");if(!(a&&!a.configurable)){for(var u=Wo?"  ":"	",c=`
${u}in ${r.fn?.name||"<unknown>"}`,f=r.ctx;f!==null;)c+=`
${u}in ${f.function?.[bf].split("/").pop()}`,f=f.p;return{message:e.message+`
${c}
`,stack:e.stack?.split(`
`).filter(v=>!v.includes("svelte/src/internal")).join(`
`)}}}function Lu(e){const r=go.get(e);r&&(Ln(e,"message",{value:r.message}),Ln(e,"stack",{value:r.stack}))}const ji=new Set;let Ne=null,Ui=null,Ut=null,zt=[],ha=null,_o=!1,Qr=!1;class on{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){zt=[],Ui=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const u of r)this.#o(u,a);this.is_fork||this.#c(),this.is_deferred()?(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects)):(Ui=this,Ne=null,Gs(a.render_effects),Gs(a.effects),Ui=null,this.#u?.resolve()),Ut=null}#o(r,a){r.f^=yt;for(var u=r.first;u!==null;){var c=u.f,f=(c&(pn|ir))!==0,v=f&&(c&yt)!==0,m=v||(c&Ft)!==0||this.skipped_effects.has(u);if((u.f&fa)!==0&&u.b?.is_pending()&&(a={parent:a,effect:u,effects:[],render_effects:[],block_effects:[]}),!m&&u.fn!==null){f?u.f^=yt:(c&Ko)!==0?a.effects.push(u):li(u)&&((u.f&vn)!==0&&a.block_effects.push(u),ri(u));var y=u.first;if(y!==null){u=y;continue}}var D=u.parent;for(u=u.next;u===null&&D!==null;)D===a.effect&&(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects),a=a.parent),u=D.next,D=D.parent}}#s(r){for(const a of r)((a.f&Pt)!==0?this.#a:this.#i).push(a),this.#l(a.deps),mt(a,yt)}#l(r){if(r!==null)for(const a of r)(a.f&ct)===0||(a.f&Nn)===0||(a.f^=Nn,this.#l(a.deps))}capture(r,a){this.previous.has(r)||this.previous.set(r,a),(r.f&In)===0&&(this.current.set(r,r.v),Ut?.set(r,r.v))}activate(){Ne=this,this.apply()}deactivate(){Ne===this&&(Ne=null,Ut=null)}flush(){if(this.activate(),zt.length>0){if(Nu(),Ne!==null&&Ne!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(ji.size>1){this.previous.clear();var r=Ut,a=!0,u={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const f of ji){if(f===this){a=!1;continue}const v=[];for(const[y,D]of this.current){if(f.current.has(y))if(a&&D!==f.current.get(y))f.current.set(y,D);else continue;v.push(y)}if(v.length===0)continue;const m=[...f.current.keys()].filter(y=>!this.current.has(y));if(m.length>0){var c=zt;zt=[];const y=new Set,D=new Map;for(const w of v)Fu(w,m,y,D);if(zt.length>0){Ne=f,f.apply();for(const w of zt)f.#o(w,u);f.deactivate()}zt=c}}Ne=null,Ut=r}this.committed=!0,ji.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)mt(r,Pt),tr(r);for(const r of this.#i)mt(r,yn),tr(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=bu()).promise}static ensure(){if(Ne===null){const r=Ne=new on;ji.add(Ne),Qr||on.enqueue(()=>{Ne===r&&r.flush()})}return Ne}static enqueue(r){Or(r)}apply(){}}function Sf(e){var r=Qr;Qr=!0;try{for(var a;;){if(Df(),zt.length===0&&(Ne?.flush(),zt.length===0))return ha=null,a;Nu()}}finally{Qr=r}}function Nu(){var e=Rn;_o=!0;var r=X?new Set:null;try{var a=0;for(Ji(!0);zt.length>0;){var u=on.ensure();if(a++>1e3){if(X){var c=new Map;for(const v of u.current.keys())for(const[m,y]of v.updated??[]){var f=c.get(m);f||(f={error:y.error,count:0},c.set(m,f)),f.count+=y.count}for(const v of c.values())v.error&&console.error(v.error)}Of()}if(u.process(zt),Pn.clear(),X)for(const v of u.current.keys())r.add(v)}}finally{if(_o=!1,Ji(e),ha=null,X)for(const v of r)v.updated=null}}function Of(){try{cf()}catch(e){X&&Ln(e,"stack",{value:""}),Er(e,ha)}}let fn=null;function Gs(e){var r=e.length;if(r!==0){for(var a=0;a<r;){var u=e[a++];if((u.f&(On|Ft))===0&&li(u)&&(fn=new Set,ri(u),u.deps===null&&u.first===null&&u.nodes_start===null&&(u.teardown===null&&u.ac===null?$u(u):u.fn=null),fn?.size>0)){Pn.clear();for(const c of fn){if((c.f&(On|Ft))!==0)continue;const f=[c];let v=c.parent;for(;v!==null;)fn.has(v)&&(fn.delete(v),f.push(v)),v=v.parent;for(let m=f.length-1;m>=0;m--){const y=f[m];(y.f&(On|Ft))===0&&ri(y)}}fn.clear()}}fn=null}}function Fu(e,r,a,u){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const c of e.reactions){const f=c.f;(f&ct)!==0?Fu(c,r,a,u):(f&(da|vn))!==0&&(f&Pt)===0&&Ku(c,r,u)&&(mt(c,Pt),tr(c))}}function Ku(e,r,a){const u=a.get(e);if(u!==void 0)return u;if(e.deps!==null)for(const c of e.deps){if(r.includes(c))return!0;if((c.f&ct)!==0&&Ku(c,r,a))return a.set(c,!0),!0}return a.set(e,!1),!1}function tr(e){for(var r=ha=e;r.parent!==null;){r=r.parent;var a=r.f;if(_o&&r===Me&&(a&vn)!==0&&(a&wu)===0)return;if((a&(ir|pn))!==0){if((a&yt)===0)return;r.f^=yt}}zt.push(r)}function If(e){let r=0,a=nr(0),u;return X&&en(a,"createSubscriber version"),()=>{ti()&&(T(a),pa(()=>(r===0&&(u=ci(()=>e(()=>$r(a)))),r+=1,()=>{Or(()=>{r-=1,r===0&&(u?.(),u=void 0,$r(a))})})))}}var Cf=br|Sr|fa;function Pf(e,r,a){new Rf(e,r,a)}class Rf{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#_=If(()=>(this.#d=nr(this.#f),X&&en(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,a,u){this.#t=r,this.#n=a,this.#u=u,this.parent=Me.b,this.#e=!!this.#n.pending,this.#a=Yo(()=>{Me.b=this;{var c=this.#m();try{this.#i=Ht(()=>u(c))}catch(f){this.error(f)}this.#h>0?this.#y():this.#e=!1}return()=>{this.#c?.remove()}},Cf)}#b(){try{this.#i=Ht(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=Ht(()=>r(this.#t)),on.enqueue(()=>{var a=this.#m();this.#i=this.#p(()=>(on.ensure(),Ht(()=>this.#u(a)))),this.#h>0?this.#y():(mr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#m(){var r=this.#t;return this.#e&&(this.#c=Fn(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var a=Me,u=Se,c=Ot;qt(this.#a),St(this.#a),wr(this.#a.ctx);try{return r()}catch(f){return Mu(f),null}finally{qt(a),St(u),wr(c)}}#y(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),el(this.#i,this.#l)),this.#o===null&&(this.#o=Ht(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#e=!1,this.#o&&mr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&Tr(this.#d,this.#f)}get_effect_pending(){return this.#_(),T(this.#d)}error(r){var a=this.#n.onerror;let u=this.#n.failed;if(this.#v||!a&&!u)throw r;this.#i&&(It(this.#i),this.#i=null),this.#o&&(It(this.#o),this.#o=null),this.#s&&(It(this.#s),this.#s=null);var c=!1,f=!1;const v=()=>{if(c){Ef();return}c=!0,f&&pf(),on.ensure(),this.#f=0,this.#s!==null&&mr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,Ht(()=>this.#u(this.#t)))),this.#h>0?this.#y():this.#e=!1};var m=Se;try{St(null),f=!0,a?.(r,v),f=!1}catch(y){Er(y,this.#a&&this.#a.parent)}finally{St(m)}u&&Or(()=>{this.#s=this.#p(()=>{on.ensure(),this.#v=!0;try{return Ht(()=>{u(this.#t,()=>r,()=>v)})}catch(y){return Er(y,this.#a.parent),null}finally{this.#v=!1}})})}}function Bu(e,r){return r}function Mf(e,r,a){for(var u=[],c=r.length,f=0;f<c;f++)qo(r[f].e,u,!0);Xu(u,()=>{var v=u.length===0&&a!==null;if(v){var m=a,y=m.parentNode;Zf(y),y.append(m),e.items.clear(),tn(e,r[0].prev,r[c-1].next)}for(var D=0;D<c;D++){var w=r[D];v||(e.items.delete(w.k),tn(e,w.prev,w.next)),It(w.e,!v)}e.first===r[0]&&(e.first=r[0].prev)})}function zo(e,r,a,u,c,f=null){var v=e,m=new Map,y=null,D=(r&ku)!==0,w=(r&xu)!==0,S=(r&Tu)!==0;if(D){var _=e;v=_.appendChild(Fn())}var k=null,M=zf(()=>{var J=a();return gu(J)?J:J==null?[]:No(J)}),K,L=!0;function H(){Lf(ce,K,v,r,u),k!==null&&(K.length===0?(k.fragment?(v.before(k.fragment),k.fragment=null):Zo(k.effect),re.first=k.effect):mr(k.effect,()=>{k=null}))}var re=Yo(()=>{K=T(M);for(var J=K.length,ae=new Set,oe=Ne,_e=null,be=Gu(),we=0;we<J;we+=1){var ge=K[we],Te=u(ge,we),Oe=L?null:m.get(Te);Oe?(w&&Tr(Oe.v,ge),S?Tr(Oe.i,we):Oe.i=we,be&&oe.skipped_effects.delete(Oe.e)):(Oe=Nf(L?v:null,_e,ge,Te,we,c,r,a),L&&(Oe.o=!0,_e===null?y=Oe:_e.next=Oe,_e=Oe),m.set(Te,Oe)),ae.add(Te)}if(J===0&&f&&!k)if(L)k={fragment:null,effect:Ht(()=>f(v))};else{var $e=document.createDocumentFragment(),nt=Fn();$e.append(nt),k={fragment:$e,effect:Ht(()=>f(nt))}}if(!L)if(be){for(const[wt,te]of m)ae.has(wt)||oe.skipped_effects.add(te.e);oe.oncommit(H),oe.ondiscard(()=>{})}else H();T(M)}),ce={effect:re,items:m,first:y};L=!1}function Lf(e,r,a,u,c){var f=(u&yf)!==0,v=r.length,m=e.items,y=e.first,D,w=null,S,_=[],k=[],M,K,L,H;if(f)for(H=0;H<v;H+=1)M=r[H],K=c(M,H),L=m.get(K),L.o&&(L.a?.measure(),(S??=new Set).add(L));for(H=0;H<v;H+=1){if(M=r[H],K=c(M,H),L=m.get(K),e.first??=L,!L.o){L.o=!0;var re=w?w.next:y;tn(e,w,L),tn(e,L,re),co(L,re,a),w=L,_=[],k=[],y=w.next;continue}if((L.e.f&Ft)!==0&&(Zo(L.e),f&&(L.a?.unfix(),(S??=new Set).delete(L))),L!==y){if(D!==void 0&&D.has(L)){if(_.length<k.length){var ce=k[0],J;w=ce.prev;var ae=_[0],oe=_[_.length-1];for(J=0;J<_.length;J+=1)co(_[J],ce,a);for(J=0;J<k.length;J+=1)D.delete(k[J]);tn(e,ae.prev,oe.next),tn(e,w,ae),tn(e,oe,ce),y=ce,w=oe,H-=1,_=[],k=[]}else D.delete(L),co(L,y,a),tn(e,L.prev,L.next),tn(e,L,w===null?e.first:w.next),tn(e,w,L),w=L;continue}for(_=[],k=[];y!==null&&y.k!==K;)(y.e.f&Ft)===0&&(D??=new Set).add(y),k.push(y),y=y.next;if(y===null)continue;L=y}_.push(L),w=L,y=L.next}if(y!==null||D!==void 0){for(var _e=D===void 0?[]:No(D);y!==null;)(y.e.f&Ft)===0&&_e.push(y),y=y.next;var be=_e.length;if(be>0){var we=(u&ku)!==0&&v===0?a:null;if(f){for(H=0;H<be;H+=1)_e[H].a?.measure();for(H=0;H<be;H+=1)_e[H].a?.fix()}Mf(e,_e,we)}}f&&Or(()=>{if(S!==void 0)for(L of S)L.a?.apply()})}function Nf(e,r,a,u,c,f,v,m){var y=(v&xu)!==0,D=(v&mf)===0,w=y?D?zu(a,!1,!1):nr(a):a,S=(v&Tu)===0?c:nr(c);X&&y&&(w.trace=()=>{var M=typeof S=="number"?c:S.v;m()[M]});var _={i:S,v:w,k:u,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var k=document.createDocumentFragment();k.append(e=Fn())}return _.e=Ht(()=>f(e,w,S,m)),r!==null&&(r.next=_),_}finally{}}function co(e,r,a){for(var u=e.next?e.next.e.nodes_start:a,c=r?r.e.nodes_start:a,f=e.e.nodes_start;f!==null&&f!==u;){var v=ui(f);c.before(f),f=v}}function tn(e,r,a){r===null?(e.first=a,e.effect.first=a&&a.e):(r.e===e.effect.last&&a!==null&&(e.effect.last=a.e),r.e.next&&(r.e.next.prev=null),r.next=a,r.e.next=a&&a.e),a===null?e.effect.last=r&&r.e:(a.e===e.effect.last&&r===null&&(e.effect.last=a.e.prev),a.e.prev&&(a.e.prev.next=null),a.prev=r,a.e.prev=r&&r.e)}function Ff(e,r,a,u){const c=Ho;if(a.length===0&&e.length===0){u(r.map(c));return}var f=Ne,v=Me,m=Kf();function y(){Promise.all(a.map(D=>jf(D))).then(D=>{m();try{u([...r.map(c),...D])}catch(w){(v.f&On)===0&&Er(w,v)}f?.deactivate(),$i()}).catch(D=>{Er(D,v)})}e.length>0?Promise.all(e).then(()=>{m();try{return y()}finally{f?.deactivate(),$i()}}):y()}function Kf(){var e=Me,r=Se,a=Ot,u=Ne;if(X)var c=Jr;return function(v=!0){qt(e),St(r),wr(a),v&&u?.activate(),X&&Qi(c)}}function $i(){qt(null),St(null),wr(null),X&&Qi(null)}const Bf=new Set;function Ho(e){var r=ct|Pt,a=Se!==null&&(Se.f&ct)!==0?Se:null;return Me!==null&&(Me.f|=Sr),{ctx:Ot,deps:null,effects:null,equals:Su,f:r,fn:e,reactions:null,rv:0,v:ht,wv:0,parent:a??Me,ac:null}}function jf(e,r){let a=Me;a===null&&af();var u=a.b,c=void 0,f=nr(ht),v=!Se,m=new Map;return td(()=>{var y=bu();c=y.promise;try{Promise.resolve(e()).then(y.resolve,y.reject).then(()=>{D===Ne&&D.committed&&D.deactivate(),$i()})}catch(_){y.reject(_),$i()}var D=Ne;if(v){var w=!u.is_pending();u.update_pending_count(1),D.increment(w),m.get(D)?.reject(vr),m.delete(D),m.set(D,y)}const S=(_,k=void 0)=>{if(D.activate(),k)k!==vr&&(f.f|=In,Tr(f,k));else{(f.f&In)!==0&&(f.f^=In),Tr(f,_);for(const[M,K]of m){if(m.delete(M),M===D)break;K.reject(vr)}}v&&(u.update_pending_count(-1),D.decrement(w))};y.promise.then(S,_=>S(null,_||"unknown"))}),Go(()=>{for(const y of m.values())y.reject(vr)}),X&&(f.f|=da),new Promise(y=>{function D(w){function S(){w===c?y(f):D(c)}w.then(S,S)}D(c)})}function ei(e){const r=Ho(e);return tl(r),r}function zf(e){const r=Ho(e);return r.equals=Iu,r}function bo(e){var r=e.effects;if(r!==null){e.effects=null;for(var a=0;a<r.length;a+=1)It(r[a])}}let fo=[];function Hf(e){for(var r=e.parent;r!==null;){if((r.f&ct)===0)return(r.f&On)===0?r:null;r=r.parent}return null}function Uo(e){var r,a=Me;if(qt(Hf(e)),X){let u=xr;Ys(new Set);try{fo.includes(e)&&of(),fo.push(e),e.f&=~Nn,bo(e),r=wo(e)}finally{qt(a),Ys(u),fo.pop()}}else try{e.f&=~Nn,bo(e),r=wo(e)}finally{qt(a)}return r}function ju(e){var r=Uo(e);if(e.equals(r)||(Ne?.is_fork||(e.v=r),e.wv=rl()),!Ir)if(Ut!==null)(ti()||Ne?.is_fork)&&Ut.set(e,r);else{var a=(e.f&Zt)===0?yn:yt;mt(e,a)}}let xr=new Set;const Pn=new Map;function Ys(e){xr=e}let Vo=!1;function Uf(){Vo=!0}function nr(e,r){var a={f:0,v:e,reactions:null,equals:Su,rv:0,wv:0};return a}function ye(e,r){const a=nr(e);return tl(a),a}function zu(e,r=!1,a=!0){const u=nr(e);return r||(u.equals=Iu),u}function P(e,r,a=!1){Se!==null&&(!sn||(Se.f&Zi)!==0)&&Pu()&&(Se.f&(ct|vn|da|Zi))!==0&&!hn?.includes(e)&&vf();let u=a?dn(r):r;return X&&Cu(u,e.label),Tr(e,u)}function Tr(e,r){if(!e.equals(r)){var a=e.v;Ir?Pn.set(e,r):Pn.set(e,a),e.v=r;var u=on.ensure();if(u.capture(e,a),X){if(Me!==null){e.updated??=new Map;const c=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:c}),c>5){const f=Tf("updated at");if(f!==null){let v=e.updated.get(f.stack);v||(v={error:f,count:0},e.updated.set(f.stack,v)),v.count++}}}Me!==null&&(e.set_during_effect=!0)}(e.f&ct)!==0&&((e.f&Pt)!==0&&Uo(e),mt(e,(e.f&Zt)!==0?yt:yn)),e.wv=rl(),Uu(e,Pt),Me!==null&&(Me.f&yt)!==0&&(Me.f&(pn|ir))===0&&(Bt===null?id([e]):Bt.push(e)),!u.is_fork&&xr.size>0&&!Vo&&Hu()}return r}function Hu(){Vo=!1;var e=Rn;Ji(!0);const r=Array.from(xr);try{for(const a of r)(a.f&yt)!==0&&mt(a,yn),li(a)&&ri(a)}finally{Ji(e)}xr.clear()}function $r(e){P(e,e.v+1)}function Uu(e,r){var a=e.reactions;if(a!==null)for(var u=a.length,c=0;c<u;c++){var f=a[c],v=f.f;if(X&&(v&Zi)!==0){xr.add(f);continue}var m=(v&Pt)===0;if(m&&mt(f,r),(v&ct)!==0){var y=f;Ut?.delete(y),(v&Nn)===0&&(v&Zt&&(f.f|=Nn),Uu(y,yn))}else m&&((v&vn)!==0&&fn!==null&&fn.add(f),tr(f))}}const Vf=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function dn(e){if(typeof e!="object"||e===null||Cn in e)return e;const r=Fo(e);if(r!==Xc&&r!==Jc)return e;var a=new Map,u=gu(e),c=ye(0),f=Xn,v=w=>{if(Xn===f)return w();var S=Se,_=Xn;St(null),$s(f);var k=w();return St(S),$s(_),k};u&&(a.set("length",ye(e.length)),X&&(e=Gf(e)));var m="";let y=!1;function D(w){if(!y){y=!0,m=w,en(c,`${m} version`);for(const[S,_]of a)en(_,qn(m,S));y=!1}}return new Proxy(e,{defineProperty(w,S,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&df();var k=a.get(S);return k===void 0?k=v(()=>{var M=ye(_.value);return a.set(S,M),X&&typeof S=="string"&&en(M,qn(m,S)),M}):P(k,_.value,!0),!0},deleteProperty(w,S){var _=a.get(S);if(_===void 0){if(S in w){const k=v(()=>ye(ht));a.set(S,k),$r(c),X&&en(k,qn(m,S))}}else P(_,ht),$r(c);return!0},get(w,S,_){if(S===Cn)return e;if(X&&S===Eu)return D;var k=a.get(S),M=S in w;if(k===void 0&&(!M||yr(w,S)?.writable)&&(k=v(()=>{var L=dn(M?w[S]:ht),H=ye(L);return X&&en(H,qn(m,S)),H}),a.set(S,k)),k!==void 0){var K=T(k);return K===ht?void 0:K}return Reflect.get(w,S,_)},getOwnPropertyDescriptor(w,S){var _=Reflect.getOwnPropertyDescriptor(w,S);if(_&&"value"in _){var k=a.get(S);k&&(_.value=T(k))}else if(_===void 0){var M=a.get(S),K=M?.v;if(M!==void 0&&K!==ht)return{enumerable:!0,configurable:!0,value:K,writable:!0}}return _},has(w,S){if(S===Cn)return!0;var _=a.get(S),k=_!==void 0&&_.v!==ht||Reflect.has(w,S);if(_!==void 0||Me!==null&&(!k||yr(w,S)?.writable)){_===void 0&&(_=v(()=>{var K=k?dn(w[S]):ht,L=ye(K);return X&&en(L,qn(m,S)),L}),a.set(S,_));var M=T(_);if(M===ht)return!1}return k},set(w,S,_,k){var M=a.get(S),K=S in w;if(u&&S==="length")for(var L=_;L<M.v;L+=1){var H=a.get(L+"");H!==void 0?P(H,ht):L in w&&(H=v(()=>ye(ht)),a.set(L+"",H),X&&en(H,qn(m,L)))}if(M===void 0)(!K||yr(w,S)?.writable)&&(M=v(()=>ye(void 0)),X&&en(M,qn(m,S)),P(M,dn(_)),a.set(S,M));else{K=M.v!==ht;var re=v(()=>dn(_));P(M,re)}var ce=Reflect.getOwnPropertyDescriptor(w,S);if(ce?.set&&ce.set.call(k,_),!K){if(u&&typeof S=="string"){var J=a.get("length"),ae=Number(S);Number.isInteger(ae)&&ae>=J.v&&P(J,ae+1)}$r(c)}return!0},ownKeys(w){T(c);var S=Reflect.ownKeys(w).filter(M=>{var K=a.get(M);return K===void 0||K.v!==ht});for(var[_,k]of a)k.v!==ht&&!(_ in w)&&S.push(_);return S},setPrototypeOf(){hf()}})}function qn(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:Vf.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function ho(e){try{if(e!==null&&typeof e=="object"&&Cn in e)return e[Cn]}catch{}return e}const Wf=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Gf(e){return new Proxy(e,{get(r,a,u){var c=Reflect.get(r,a,u);return Wf.has(a)?function(...f){Uf();var v=c.apply(this,f);return Hu(),v}:c}})}function Yf(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:a,lastIndexOf:u,includes:c}=e;e.indexOf=function(f,v){const m=a.call(this,f,v);if(m===-1){for(let y=v??0;y<this.length;y+=1)if(ho(this[y])===f){lo("array.indexOf(...)");break}}return m},e.lastIndexOf=function(f,v){const m=u.call(this,f,v??this.length-1);if(m===-1){for(let y=0;y<=(v??this.length-1);y+=1)if(ho(this[y])===f){lo("array.lastIndexOf(...)");break}}return m},e.includes=function(f,v){const m=c.call(this,f,v);if(!m){for(let y=0;y<this.length;y+=1)if(ho(this[y])===f){lo("array.includes(...)");break}}return m},Array.__svelte_cleanup=()=>{e.indexOf=a,e.lastIndexOf=u,e.includes=c}}var qs,Wo,Vu,Wu;function qf(){if(qs===void 0){qs=window,Wo=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,a=Text.prototype;Vu=yr(r,"firstChild").get,Wu=yr(r,"nextSibling").get,Us(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Us(a)&&(a.__t=void 0),X&&(e.__svelte_meta=null,Yf())}}function Fn(e=""){return document.createTextNode(e)}function Xi(e){return Vu.call(e)}function ui(e){return Wu.call(e)}function me(e,r){return Xi(e)}function ut(e,r=!1){{var a=Xi(e);return a instanceof Comment&&a.data===""?ui(a):a}}function ue(e,r=1,a=!1){let u=e;for(;r--;)u=ui(u);return u}function Zf(e){e.textContent=""}function Gu(){return!1}let Zs=!1;function Qf(){Zs||(Zs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function va(e){var r=Se,a=Me;St(null),qt(null);try{return e()}finally{St(r),qt(a)}}function $f(e,r,a,u=a){e.addEventListener(r,()=>va(a));const c=e.__on_r;c?e.__on_r=()=>{c(),u(!0)}:e.__on_r=()=>u(!0),Qf()}function Xf(e){Me===null&&(Se===null&&lf(e),uf()),Ir&&sf(e)}function Jf(e,r){var a=r.last;a===null?r.last=r.first=e:(a.next=e,e.prev=a,r.last=e)}function mn(e,r,a){var u=Me;if(X)for(;u!==null&&(u.f&Zi)!==0;)u=u.parent;u!==null&&(u.f&Ft)!==0&&(e|=Ft);var c={ctx:Ot,deps:null,nodes_start:null,nodes_end:null,f:e|Pt|Zt,first:null,fn:r,last:null,next:null,parent:u,b:u&&u.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(X&&(c.component_function=si),a)try{ri(c),c.f|=jo}catch(m){throw It(c),m}else r!==null&&tr(c);var f=c;if(a&&f.deps===null&&f.teardown===null&&f.nodes_start===null&&f.first===f.last&&(f.f&Sr)===0&&(f=f.first,(e&vn)!==0&&(e&br)!==0&&f!==null&&(f.f|=br)),f!==null&&(f.parent=u,u!==null&&Jf(f,u),Se!==null&&(Se.f&ct)!==0&&(e&ir)===0)){var v=Se;(v.effects??=[]).push(f)}return c}function ti(){return Se!==null&&!sn}function Go(e){const r=mn(Bo,null,!1);return mt(r,yt),r.teardown=e,r}function et(e){Xf("$effect"),X&&Ln(e,"name",{value:"$effect"});var r=Me.f,a=!Se&&(r&pn)!==0&&(r&jo)===0;if(a){var u=Ot;(u.e??=[]).push(e)}else return Yu(e)}function Yu(e){return mn(Ko|nf,e,!1)}function ed(e){on.ensure();const r=mn(ir|Sr,e,!0);return(a={})=>new Promise(u=>{a.outro?mr(r,()=>{It(r),u(void 0)}):(It(r),u(void 0))})}function qu(e){return mn(Ko,e,!1)}function td(e){return mn(da|Sr,e,!0)}function pa(e,r=0){return mn(Bo|r,e,!0)}function Dt(e,r=[],a=[],u=[]){Ff(u,r,a,c=>{mn(Bo,()=>e(...c.map(T)),!0)})}function Yo(e,r=0){var a=mn(vn|r,e,!0);return X&&(a.dev_stack=Jr),a}function Ht(e){return mn(pn|Sr,e,!0)}function Zu(e){var r=e.teardown;if(r!==null){const a=Ir,u=Se;Qs(!0),St(null);try{r.call(null)}finally{Qs(a),St(u)}}}function Qu(e,r=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const c=a.ac;c!==null&&va(()=>{c.abort(vr)});var u=a.next;(a.f&ir)!==0?a.parent=null:It(a,r),a=u}}function nd(e){for(var r=e.first;r!==null;){var a=r.next;(r.f&pn)===0&&It(r),r=a}}function It(e,r=!0){var a=!1;(r||(e.f&wu)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(rd(e.nodes_start,e.nodes_end),a=!0),Qu(e,r&&!a),ea(e,0),mt(e,On);var u=e.transitions;if(u!==null)for(const f of u)f.stop();Zu(e);var c=e.parent;c!==null&&c.first!==null&&$u(e),X&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function rd(e,r){for(;e!==null;){var a=e===r?null:ui(e);e.remove(),e=a}}function $u(e){var r=e.parent,a=e.prev,u=e.next;a!==null&&(a.next=u),u!==null&&(u.prev=a),r!==null&&(r.first===e&&(r.first=u),r.last===e&&(r.last=a))}function mr(e,r,a=!0){var u=[];qo(e,u,!0),Xu(u,()=>{a&&It(e),r&&r()})}function Xu(e,r){var a=e.length;if(a>0){var u=()=>--a||r();for(var c of e)c.out(u)}else r()}function qo(e,r,a){if((e.f&Ft)===0){if(e.f^=Ft,e.transitions!==null)for(const v of e.transitions)(v.is_global||a)&&r.push(v);for(var u=e.first;u!==null;){var c=u.next,f=(u.f&br)!==0||(u.f&pn)!==0&&(e.f&vn)!==0;qo(u,r,f?a:!1),u=c}}}function Zo(e){Ju(e,!0)}function Ju(e,r){if((e.f&Ft)!==0){e.f^=Ft,(e.f&yt)===0&&(mt(e,Pt),tr(e));for(var a=e.first;a!==null;){var u=a.next,c=(a.f&br)!==0||(a.f&pn)!==0;Ju(a,c?r:!1),a=u}if(e.transitions!==null)for(const f of e.transitions)(f.is_global||r)&&f.in()}}function el(e,r){for(var a=e.nodes_start,u=e.nodes_end;a!==null;){var c=a===u?null:ui(a);r.append(a),a=c}}let Rn=!1;function Ji(e){Rn=e}let Ir=!1;function Qs(e){Ir=e}let Se=null,sn=!1;function St(e){Se=e}let Me=null;function qt(e){Me=e}let hn=null;function tl(e){Se!==null&&(hn===null?hn=[e]:hn.push(e))}let _t=null,Lt=0,Bt=null;function id(e){Bt=e}let nl=1,ni=0,Xn=ni;function $s(e){Xn=e}function rl(){return++nl}function li(e){var r=e.f;if((r&Pt)!==0)return!0;if(r&ct&&(e.f&=~Nn),(r&yn)!==0){var a=e.deps;if(a!==null)for(var u=a.length,c=0;c<u;c++){var f=a[c];if(li(f)&&ju(f),f.wv>e.wv)return!0}(r&Zt)!==0&&Ut===null&&mt(e,yt)}return!1}function il(e,r,a=!0){var u=e.reactions;if(u!==null&&!hn?.includes(e))for(var c=0;c<u.length;c++){var f=u[c];(f.f&ct)!==0?il(f,r,!1):r===f&&(a?mt(f,Pt):(f.f&yt)!==0&&mt(f,yn),tr(f))}}function wo(e){var r=_t,a=Lt,u=Bt,c=Se,f=hn,v=Ot,m=sn,y=Xn,D=e.f;_t=null,Lt=0,Bt=null,Se=(D&(pn|ir))===0?e:null,hn=null,wr(e.ctx),sn=!1,Xn=++ni,e.ac!==null&&(va(()=>{e.ac.abort(vr)}),e.ac=null);try{e.f|=mo;var w=e.fn,S=w(),_=e.deps;if(_t!==null){var k;if(ea(e,Lt),_!==null&&Lt>0)for(_.length=Lt+_t.length,k=0;k<_t.length;k++)_[Lt+k]=_t[k];else e.deps=_=_t;if(Rn&&ti()&&(e.f&Zt)!==0)for(k=Lt;k<_.length;k++)(_[k].reactions??=[]).push(e)}else _!==null&&Lt<_.length&&(ea(e,Lt),_.length=Lt);if(Pu()&&Bt!==null&&!sn&&_!==null&&(e.f&(ct|yn|Pt))===0)for(k=0;k<Bt.length;k++)il(Bt[k],e);return c!==null&&c!==e&&(ni++,Bt!==null&&(u===null?u=Bt:u.push(...Bt))),(e.f&In)!==0&&(e.f^=In),S}catch(M){return Mu(M)}finally{e.f^=mo,_t=r,Lt=a,Bt=u,Se=c,hn=f,wr(v),sn=m,Xn=y}}function ad(e,r){let a=r.reactions;if(a!==null){var u=$c.call(a,e);if(u!==-1){var c=a.length-1;c===0?a=r.reactions=null:(a[u]=a[c],a.pop())}}a===null&&(r.f&ct)!==0&&(_t===null||!_t.includes(r))&&(mt(r,yn),(r.f&Zt)!==0&&(r.f^=Zt,r.f&=~Nn),bo(r),ea(r,0))}function ea(e,r){var a=e.deps;if(a!==null)for(var u=r;u<a.length;u++)ad(e,a[u])}function ri(e){var r=e.f;if((r&On)===0){mt(e,yt);var a=Me,u=Rn;if(Me=e,Rn=!0,X){var c=si;Ws(e.component_function);var f=Jr;Qi(e.dev_stack??Jr)}try{(r&(vn|tf))!==0?nd(e):Qu(e),Zu(e);var v=wo(e);e.teardown=typeof v=="function"?v:null,e.wv=nl;var m;X&&xf&&(e.f&Pt)!==0&&e.deps}finally{Rn=u,Me=a,X&&(Ws(c),Qi(f))}}}async function od(){await Promise.resolve(),Sf()}function T(e){var r=e.f,a=(r&ct)!==0;if(Se!==null&&!sn){var u=Me!==null&&(Me.f&On)!==0;if(!u&&!hn?.includes(e)){var c=Se.deps;if((Se.f&mo)!==0)e.rv<ni&&(e.rv=ni,_t===null&&c!==null&&c[Lt]===e?Lt++:_t===null?_t=[e]:_t.includes(e)||_t.push(e));else{(Se.deps??=[]).push(e);var f=e.reactions;f===null?e.reactions=[Se]:f.includes(Se)||f.push(Se)}}}if(X&&Bf.delete(e),Ir){if(Pn.has(e))return Pn.get(e);if(a){var v=e,m=v.v;return((v.f&yt)===0&&v.reactions!==null||ol(v))&&(m=Uo(v)),Pn.set(v,m),m}}else a&&(!Ut?.has(e)||Ne?.is_fork&&!ti())&&(v=e,li(v)&&ju(v),Rn&&ti()&&(v.f&Zt)===0&&al(v));if(Ut?.has(e))return Ut.get(e);if((e.f&In)!==0)throw e.v;return e.v}function al(e){if(e.deps!==null){e.f^=Zt;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&ct)!==0&&(r.f&Zt)===0&&al(r)}}function ol(e){if(e.v===ht)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(Pn.has(r)||(r.f&ct)!==0&&ol(r))return!0;return!1}function ci(e){var r=sn;try{return sn=!0,e()}finally{sn=r}}const sd=-7169;function mt(e,r){e.f=e.f&sd|r}function ud(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Cn in e)Eo(e);else if(!Array.isArray(e))for(let r in e){const a=e[r];typeof a=="object"&&a&&Cn in a&&Eo(a)}}}function Eo(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let u in e)try{Eo(e[u],r)}catch{}const a=Fo(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const u=_u(a);for(let c in u){const f=u[c].get;if(f)try{f.call(e)}catch{}}}}}const ld=["touchstart","touchmove"];function cd(e){return ld.includes(e)}const sl=new Set,xo=new Set;function fd(e,r,a,u={}){function c(f){if(u.capture||qr.call(r,f),!f.cancelBubble)return va(()=>a?.call(this,f))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Or(()=>{r.addEventListener(e,c,u)}):r.addEventListener(e,c,u),c}function Xs(e,r,a,u,c){var f={capture:u,passive:c},v=fd(e,r,a,f);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&Go(()=>{r.removeEventListener(e,v,f)})}function Cr(e){for(var r=0;r<e.length;r++)sl.add(e[r]);for(var a of xo)a(e)}let Js=null;function qr(e){var r=this,a=r.ownerDocument,u=e.type,c=e.composedPath?.()||[],f=c[0]||e.target;Js=e;var v=0,m=Js===e&&e.__root;if(m){var y=c.indexOf(m);if(y!==-1&&(r===document||r===window)){e.__root=r;return}var D=c.indexOf(r);if(D===-1)return;y<=D&&(v=y)}if(f=c[v]||e.target,f!==r){Ln(e,"currentTarget",{configurable:!0,get(){return f||a}});var w=Se,S=Me;St(null),qt(null);try{for(var _,k=[];f!==null;){var M=f.assignedSlot||f.parentNode||f.host||null;try{var K=f["__"+u];K!=null&&(!f.disabled||e.target===f)&&K.call(f,e)}catch(L){_?k.push(L):_=L}if(e.cancelBubble||M===r||M===null)break;f=M}if(_){for(let L of k)queueMicrotask(()=>{throw L});throw _}}finally{e.__root=r,delete e.currentTarget,St(w),qt(S)}}}function dd(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function To(e,r){var a=Me;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=r)}function Fe(e,r){var a=(r&gf)!==0,u=(r&_f)!==0,c,f=!e.startsWith("<!>");return()=>{c===void 0&&(c=dd(f?e:"<!>"+e),a||(c=Xi(c)));var v=u||Wo?document.importNode(c,!0):c.cloneNode(!0);if(a){var m=Xi(v),y=v.lastChild;To(m,y)}else To(v,v);return v}}function rr(){var e=document.createDocumentFragment(),r=document.createComment(""),a=Fn();return e.append(r,a),To(r,a),e}function xe(e,r){e!==null&&e.before(r)}function Jn(e,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function hd(e,r){return vd(e,r)}const hr=new Map;function vd(e,{target:r,anchor:a,props:u={},events:c,context:f,intro:v=!0}){qf();var m=new Set,y=S=>{for(var _=0;_<S.length;_++){var k=S[_];if(!m.has(k)){m.add(k);var M=cd(k);r.addEventListener(k,qr,{passive:M});var K=hr.get(k);K===void 0?(document.addEventListener(k,qr,{passive:M}),hr.set(k,1)):hr.set(k,K+1)}}};y(No(sl)),xo.add(y);var D=void 0,w=ed(()=>{var S=a??r.appendChild(Fn());return Pf(S,{pending:()=>{}},_=>{if(f){ar({});var k=Ot;k.c=f}c&&(u.$$events=c),D=e(_,u)||{},f&&or()}),()=>{for(var _ of m){r.removeEventListener(_,qr);var k=hr.get(_);--k===0?(document.removeEventListener(_,qr),hr.delete(_)):hr.set(_,k)}xo.delete(y),S!==a&&S.parentNode?.removeChild(S)}});return pd.set(D,w),D}let pd=new WeakMap;class yd{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,a=!0){this.anchor=r,this.#u=a}#a=()=>{var r=Ne;if(this.#e.has(r)){var a=this.#e.get(r),u=this.#t.get(a);if(u)Zo(u),this.#n.delete(a);else{var c=this.#r.get(a);c&&(this.#t.set(a,c.effect),this.#r.delete(a),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),u=c.effect)}for(const[f,v]of this.#e){if(this.#e.delete(f),f===r)break;const m=this.#r.get(v);m&&(It(m.effect),this.#r.delete(v))}for(const[f,v]of this.#t){if(f===a||this.#n.has(f))continue;const m=()=>{if(Array.from(this.#e.values()).includes(f)){var D=document.createDocumentFragment();el(v,D),D.append(Fn()),this.#r.set(f,{effect:v,fragment:D})}else It(v);this.#n.delete(f),this.#t.delete(f)};this.#u||!u?(this.#n.add(f),mr(v,m,!1)):m()}}};#i=r=>{this.#e.delete(r);const a=Array.from(this.#e.values());for(const[u,c]of this.#r)a.includes(u)||(It(c.effect),this.#r.delete(u))};ensure(r,a){var u=Ne,c=Gu();if(a&&!this.#t.has(r)&&!this.#r.has(r))if(c){var f=document.createDocumentFragment(),v=Fn();f.append(v),this.#r.set(r,{effect:Ht(()=>a(v)),fragment:f})}else this.#t.set(r,Ht(()=>a(this.anchor)));if(this.#e.set(u,r),c){for(const[m,y]of this.#t)m===r?u.skipped_effects.delete(y):u.skipped_effects.add(y);for(const[m,y]of this.#r)m===r?u.skipped_effects.delete(y.effect):u.skipped_effects.add(y.effect);u.oncommit(this.#a),u.ondiscard(this.#i)}else this.#a()}}function at(e,r,a=!1){var u=new yd(e),c=a?br:0;function f(v,m){u.ensure(v,m)}Yo(()=>{var v=!1;r((m,y=!0)=>{v=!0,f(y,m)}),v||f(!1,null)},c)}function md(e,r,a){qu(()=>{var u=ci(()=>r(e,a?.())||{});if(a&&u?.update){var c=!1,f={};pa(()=>{var v=a();ud(v),c&&Ou(f,v)&&(f=v,u.update(v))}),c=!0}if(u?.destroy)return()=>u.destroy()})}function ul(e){var r,a,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(r=0;r<c;r++)e[r]&&(a=ul(e[r]))&&(u&&(u+=" "),u+=a)}else for(a in e)e[a]&&(u&&(u+=" "),u+=a);return u}function gd(){for(var e,r,a=0,u="",c=arguments.length;a<c;a++)(e=arguments[a])&&(r=ul(e))&&(u&&(u+=" "),u+=r);return u}function _d(e){return typeof e=="object"?gd(e):e??""}function bd(e,r,a){var u=e==null?"":""+e;return u===""?null:u}function wd(e,r){return e==null?null:String(e)}function Ed(e,r,a,u,c,f){var v=e.__className;if(v!==a||v===void 0){var m=bd(a);m==null?e.removeAttribute("class"):e.className=m,e.__className=a}return f}function ll(e,r,a,u){var c=e.__style;if(c!==r){var f=wd(r);f==null?e.removeAttribute("style"):e.style.cssText=f,e.__style=r}return u}const xd=Symbol("is custom element"),Td=Symbol("is html");function Vi(e,r){var a=Qo(e);a.value===(a.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function kd(e,r){var a=Qo(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function Nt(e,r,a,u){var c=Qo(e);c[r]!==(c[r]=a)&&(r==="loading"&&(e[rf]=a),a==null?e.removeAttribute(r):typeof a!="string"&&Dd(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function Qo(e){return e.__attributes??={[xd]:e.nodeName.includes("-"),[Td]:e.namespaceURI===wf}}var eu=new Map;function Dd(e){var r=e.getAttribute("is")||e.nodeName,a=eu.get(r);if(a)return a;eu.set(r,a=[]);for(var u,c=e,f=Element.prototype;f!==c;){u=_u(c);for(var v in u)u[v].set&&a.push(v);c=Fo(c)}return a}function $o(e,r,a=r){var u=new WeakSet;$f(e,"input",async c=>{X&&e.type==="checkbox"&&Vs();var f=c?e.defaultValue:e.value;if(f=vo(e)?po(f):f,a(f),Ne!==null&&u.add(Ne),await od(),f!==(f=r())){var v=e.selectionStart,m=e.selectionEnd,y=e.value.length;if(e.value=f??"",m!==null){var D=e.value.length;v===m&&m===y&&D>y?(e.selectionStart=D,e.selectionEnd=D):(e.selectionStart=v,e.selectionEnd=Math.min(m,D))}}}),ci(r)==null&&e.value&&(a(vo(e)?po(e.value):e.value),Ne!==null&&u.add(Ne)),pa(()=>{X&&e.type==="checkbox"&&Vs();var c=r();if(e===document.activeElement){var f=Ui??Ne;if(u.has(f))return}vo(e)&&c===po(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function vo(e){var r=e.type;return r==="number"||r==="range"}function po(e){return e===""?null:+e}function tu(e,r){return e===r||e?.[Cn]===r}function un(e={},r,a,u){return qu(()=>{var c,f;return pa(()=>{c=f,f=[],ci(()=>{e!==a(...f)&&(r(e,...f),c&&tu(a(...c),e)&&r(null,...c))})}),()=>{Or(()=>{f&&tu(a(...f),e)&&r(null,...f)})}}),e}function cl(e,r,a){if(e==null)return r(void 0),qi;const u=ci(()=>e.subscribe(r,a));return u.unsubscribe?()=>u.unsubscribe():u}function Ad(e){let r;return cl(e,a=>r=a)(),r}let ko=Symbol();function ta(e,r,a){const u=a[r]??={store:null,source:zu(void 0),unsubscribe:qi};if(X&&(u.source.label=r),u.store!==e&&!(ko in a))if(u.unsubscribe(),u.store=e??null,e==null)u.source.v=void 0,u.unsubscribe=qi;else{var c=!0;u.unsubscribe=cl(e,f=>{c?u.source.v=f:P(u.source,f)}),c=!1}return e&&ko in a?Ad(e):T(u.source)}function Do(e,r,a){let u=a[r];return u&&u.store!==e&&(u.unsubscribe(),u.unsubscribe=qi),e}function Xo(){const e={};function r(){Go(()=>{for(var a in e)e[a].unsubscribe();Ln(e,ko,{enumerable:!1,value:!0})})}return[e,r]}if(X){let e=function(r){if(!(r in globalThis)){let a;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(a!==void 0)return a;ff(r)},set:u=>{a=u}})}};var Qv=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const Sd="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Sd);var Od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Id(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wi={exports:{}},Cd=Wi.exports,nu;function Pd(){return nu||(nu=1,(function(e,r){(function(a,u){e.exports=u()})(Cd,(function(){var a=function(t,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},a(t,n)};function u(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var c=function(){return c=Object.assign||function(n){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},c.apply(this,arguments)};function f(t,n,i){for(var o=0,s=n.length,l;o<s;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return t.concat(l||Array.prototype.slice.call(n))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Od,m=Object.keys,y=Array.isArray;typeof Promise<"u"&&!v.Promise&&(v.Promise=Promise);function D(t,n){return typeof n!="object"||m(n).forEach(function(i){t[i]=n[i]}),t}var w=Object.getPrototypeOf,S={}.hasOwnProperty;function _(t,n){return S.call(t,n)}function k(t,n){typeof n=="function"&&(n=n(w(t))),(typeof Reflect>"u"?m:Reflect.ownKeys)(n).forEach(function(i){K(t,i,n[i])})}var M=Object.defineProperty;function K(t,n,i,o){M(t,n,D(i&&_(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function L(t){return{from:function(n){return t.prototype=Object.create(n.prototype),K(t.prototype,"constructor",t),{extend:k.bind(null,t.prototype)}}}}var H=Object.getOwnPropertyDescriptor;function re(t,n){var i=H(t,n),o;return i||(o=w(t))&&re(o,n)}var ce=[].slice;function J(t,n,i){return ce.call(t,n,i)}function ae(t,n){return n(t)}function oe(t){if(!t)throw new Error("Assertion Failed")}function _e(t){v.setImmediate?setImmediate(t):setTimeout(t,0)}function be(t,n){return t.reduce(function(i,o,s){var l=n(o,s);return l&&(i[l[0]]=l[1]),i},{})}function we(t,n){if(typeof n=="string"&&_(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],o=0,s=n.length;o<s;++o){var l=we(t,n[o]);i.push(l)}return i}var d=n.indexOf(".");if(d!==-1){var h=t[n.substr(0,d)];return h==null?void 0:we(h,n.substr(d+1))}}function ge(t,n,i){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){oe(typeof i!="string"&&"length"in i);for(var o=0,s=n.length;o<s;++o)ge(t,n[o],i[o])}else{var l=n.indexOf(".");if(l!==-1){var d=n.substr(0,l),h=n.substr(l+1);if(h==="")i===void 0?y(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=i;else{var p=t[d];(!p||!_(t,d))&&(p=t[d]={}),ge(p,h,i)}}else i===void 0?y(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function Te(t,n){typeof n=="string"?ge(t,n,void 0):"length"in n&&[].map.call(n,function(i){ge(t,i,void 0)})}function Oe(t){var n={};for(var i in t)_(t,i)&&(n[i]=t[i]);return n}var $e=[].concat;function nt(t){return $e.apply([],t)}var wt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(nt([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return v[t]}),te=new Set(wt.map(function(t){return v[t]}));function se(t){var n={};for(var i in t)if(_(t,i)){var o=t[i];n[i]=!o||typeof o!="object"||te.has(o.constructor)?o:se(o)}return n}function He(t){for(var n in t)if(_(t,n))return!1;return!0}var Ce=null;function Pe(t){Ce=new WeakMap;var n=Ge(t);return Ce=null,n}function Ge(t){if(!t||typeof t!="object")return t;var n=Ce.get(t);if(n)return n;if(y(t)){n=[],Ce.set(t,n);for(var i=0,o=t.length;i<o;++i)n.push(Ge(t[i]))}else if(te.has(t.constructor))n=t;else{var s=w(t);n=s===Object.prototype?{}:Object.create(s),Ce.set(t,n);for(var l in t)_(t,l)&&(n[l]=Ge(t[l]))}return n}var rt={}.toString;function Et(t){return rt.call(t).slice(8,-1)}var Je=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ue=typeof Je=="symbol"?function(t){var n;return t!=null&&(n=t[Je])&&n.apply(t)}:function(){return null};function Ye(t,n){var i=t.indexOf(n);return i>=0&&t.splice(i,1),i>=0}var W={};function Q(t){var n,i,o,s;if(arguments.length===1){if(y(t))return t.slice();if(this===W&&typeof t=="string")return[t];if(s=Ue(t)){for(i=[];o=s.next(),!o.done;)i.push(o.value);return i}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(i=new Array(n);n--;)i[n]=t[n];return i}return[t]}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var Z=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ie=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ee=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Le=Ie.concat(Ee),fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(t,n){this.name=t,this.message=n}L(de).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Re(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,o,s){return s.indexOf(i)===o}).join(`
`)}function Ke(t,n,i,o){this.failures=n,this.failedKeys=o,this.successCount=i,this.message=Re(t,n)}L(Ke).from(de);function De(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=Re(t,this.failures)}L(De).from(de);var Be=Le.reduce(function(t,n){return t[n]=n+"Error",t},{}),le=de,z=Le.reduce(function(t,n){var i=n+"Error";function o(s,l){this.name=i,s?typeof s=="string"?(this.message="".concat(s).concat(l?`
 `+l:""),this.inner=l||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=fe[n]||i,this.inner=null)}return L(o).from(le),t[n]=o,t},{});z.Syntax=SyntaxError,z.Type=TypeError,z.Range=RangeError;var xt=Ee.reduce(function(t,n){return t[n+"Error"]=z[n],t},{});function ze(t,n){if(!t||t instanceof de||t instanceof TypeError||t instanceof SyntaxError||!t.name||!xt[t.name])return t;var i=new xt[t.name](n||t.message,t);return"stack"in t&&K(i,"stack",{get:function(){return this.inner.stack}}),i}var Rt=Le.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=z[n]),t},{});Rt.ModifyError=Ke,Rt.DexieError=de,Rt.BulkError=De;function ve(){}function Bn(t){return t}function Ta(t,n){return t==null||t===Bn?n:function(i){return n(t(i))}}function gt(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function Pr(t,n){return t===ve?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var l=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?gt(o,this.onsuccess):o),s&&(this.onerror=this.onerror?gt(s,this.onerror):s),l!==void 0?l:i}}function Il(t,n){return t===ve?n:function(){t.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?gt(i,this.onsuccess):i),o&&(this.onerror=this.onerror?gt(o,this.onerror):o)}}function Cl(t,n){return t===ve?n:function(i){var o=t.apply(this,arguments);D(i,o);var s=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?gt(s,this.onsuccess):s),l&&(this.onerror=this.onerror?gt(l,this.onerror):l),o===void 0?d===void 0?void 0:d:D(o,d)}}function Pl(t,n){return t===ve?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function ka(t,n){return t===ve?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return i.then(function(){return n.apply(o,l)})}return n.apply(this,arguments)}}var Qt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function as(t,n){Qt=t}var Rr={},os=100,Da=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,w(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,w(n),t]})(),ss=Da[0],us=Da[1],Rl=Da[2],Ml=us&&us.then,jn=ss&&ss.constructor,Aa=!!Rl;function Ll(){queueMicrotask(Fl)}var Mr=function(t,n){Lr.push([t,n]),vi&&(Ll(),vi=!1)},Sa=!0,vi=!0,zn=[],pi=[],Oa=Bn,gn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ve,pgp:!1,env:{},finalize:ve},$=gn,Lr=[],Hn=0,yi=[];function G(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=$;if(typeof t!="function"){if(t!==Rr)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ca(this,this._value);return}this._state=null,this._value=null,++n.ref,cs(this,t)}var Ia={get:function(){var t=$,n=bi;function i(o,s){var l=this,d=!t.global&&(t!==$||n!==bi),h=d&&!bn(),p=new G(function(g,x){Pa(l,new ls(hs(o,t,d,h),hs(s,t,d,h),g,x,t))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return i.prototype=Rr,i},set:function(t){K(this,"then",t&&t.prototype===Rr?Ia:{get:function(){return t},set:Ia.set})}};k(G.prototype,{then:Ia,_then:function(t,n){Pa(this,new ls(null,null,t,n,$))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],i=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?i(o):mi(o)}):this.then(null,function(o){return o&&o.name===n?i(o):mi(o)})},finally:function(t){return this.then(function(n){return G.resolve(t()).then(function(){return n})},function(n){return G.resolve(t()).then(function(){return mi(n)})})},timeout:function(t,n){var i=this;return t<1/0?new G(function(o,s){var l=setTimeout(function(){return s(new z.Timeout(n))},t);i.then(o,s).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&K(G.prototype,Symbol.toStringTag,"Dexie.Promise"),gn.env=ds();function ls(t,n,i,o,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=o,this.psd=s}k(G,{all:function(){var t=Q.apply(null,arguments).map(wi);return new G(function(n,i){t.length===0&&n([]);var o=t.length;t.forEach(function(s,l){return G.resolve(s).then(function(d){t[l]=d,--o||n(t)},i)})})},resolve:function(t){if(t instanceof G)return t;if(t&&typeof t.then=="function")return new G(function(i,o){t.then(i,o)});var n=new G(Rr,!0,t);return n},reject:mi,race:function(){var t=Q.apply(null,arguments).map(wi);return new G(function(n,i){t.map(function(o){return G.resolve(o).then(n,i)})})},PSD:{get:function(){return $},set:function(t){return $=t}},totalEchoes:{get:function(){return bi}},newPSD:_n,usePSD:Un,scheduler:{get:function(){return Mr},set:function(t){Mr=t}},rejectionMapper:{get:function(){return Oa},set:function(t){Oa=t}},follow:function(t,n){return new G(function(i,o){return _n(function(s,l){var d=$;d.unhandleds=[],d.onunhandled=l,d.finalize=gt(function(){var h=this;Kl(function(){h.unhandleds.length===0?s():l(h.unhandleds[0])})},d.finalize),t()},n,i,o)})}}),jn&&(jn.allSettled&&K(G,"allSettled",function(){var t=Q.apply(null,arguments).map(wi);return new G(function(n){t.length===0&&n([]);var i=t.length,o=new Array(i);t.forEach(function(s,l){return G.resolve(s).then(function(d){return o[l]={status:"fulfilled",value:d}},function(d){return o[l]={status:"rejected",reason:d}}).then(function(){return--i||n(o)})})})}),jn.any&&typeof AggregateError<"u"&&K(G,"any",function(){var t=Q.apply(null,arguments).map(wi);return new G(function(n,i){t.length===0&&i(new AggregateError([]));var o=t.length,s=new Array(o);t.forEach(function(l,d){return G.resolve(l).then(function(h){return n(h)},function(h){s[d]=h,--o||i(new AggregateError(s))})})})}),jn.withResolvers&&(G.withResolvers=jn.withResolvers));function cs(t,n){try{n(function(i){if(t._state===null){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&sr();i&&typeof i.then=="function"?cs(t,function(s,l){i instanceof G?i._then(s,l):i.then(s,l)}):(t._state=!0,t._value=i,fs(t)),o&&ur()}},Ca.bind(null,t))}catch(i){Ca(t,i)}}function Ca(t,n){if(pi.push(n),t._state===null){var i=t._lib&&sr();n=Oa(n),t._state=!1,t._value=n,Bl(t),fs(t),i&&ur()}}function fs(t){var n=t._listeners;t._listeners=[];for(var i=0,o=n.length;i<o;++i)Pa(t,n[i]);var s=t._PSD;--s.ref||s.finalize(),Hn===0&&(++Hn,Mr(function(){--Hn===0&&Ra()},[]))}function Pa(t,n){if(t._state===null){t._listeners.push(n);return}var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++Hn,Mr(Nl,[i,t,n])}function Nl(t,n,i){try{var o,s=n._value;!n._state&&pi.length&&(pi=[]),o=Qt&&n._consoleTask?n._consoleTask.run(function(){return t(s)}):t(s),!n._state&&pi.indexOf(s)===-1&&jl(n),i.resolve(o)}catch(l){i.reject(l)}finally{--Hn===0&&Ra(),--i.psd.ref||i.psd.finalize()}}function Fl(){Un(gn,function(){sr()&&ur()})}function sr(){var t=Sa;return Sa=!1,vi=!1,t}function ur(){var t,n,i;do for(;Lr.length>0;)for(t=Lr,Lr=[],i=t.length,n=0;n<i;++n){var o=t[n];o[0].apply(null,o[1])}while(Lr.length>0);Sa=!0,vi=!0}function Ra(){var t=zn;zn=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=yi.slice(0),i=n.length;i;)n[--i]()}function Kl(t){function n(){t(),yi.splice(yi.indexOf(n),1)}yi.push(n),++Hn,Mr(function(){--Hn===0&&Ra()},[])}function Bl(t){zn.some(function(n){return n._value===t._value})||zn.push(t)}function jl(t){for(var n=zn.length;n;)if(zn[--n]._value===t._value){zn.splice(n,1);return}}function mi(t){return new G(Rr,!1,t)}function Ve(t,n){var i=$;return function(){var o=sr(),s=$;try{return wn(i,!0),t.apply(this,arguments)}catch(l){n&&n(l)}finally{wn(s,!1),o&&ur()}}}var it={awaits:0,echoes:0,id:0},zl=0,gi=[],_i=0,bi=0,Hl=0;function _n(t,n,i,o){var s=$,l=Object.create(s);l.parent=s,l.ref=0,l.global=!1,l.id=++Hl,gn.env,l.env=Aa?{Promise:G,PromiseProp:{value:G,configurable:!0,writable:!0},all:G.all,race:G.race,allSettled:G.allSettled,any:G.any,resolve:G.resolve,reject:G.reject}:{},n&&D(l,n),++s.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=Un(l,t,i,o);return l.ref===0&&l.finalize(),d}function lr(){return it.id||(it.id=++zl),++it.awaits,it.echoes+=os,it.id}function bn(){return it.awaits?(--it.awaits===0&&(it.id=0),it.echoes=it.awaits*os,!0):!1}(""+Ml).indexOf("[native code]")===-1&&(lr=bn=ve);function wi(t){return it.echoes&&t&&t.constructor===jn?(lr(),t.then(function(n){return bn(),n},function(n){return bn(),Ze(n)})):t}function Ul(t){++bi,(!it.echoes||--it.echoes===0)&&(it.echoes=it.awaits=it.id=0),gi.push($),wn(t,!0)}function Vl(){var t=gi[gi.length-1];gi.pop(),wn(t,!1)}function wn(t,n){var i=$;if((n?it.echoes&&(!_i++||t!==$):_i&&(!--_i||t!==$))&&queueMicrotask(n?Ul.bind(null,t):Vl),t!==$&&($=t,i===gn&&(gn.env=ds()),Aa)){var o=gn.env.Promise,s=t.env;(i.global||t.global)&&(Object.defineProperty(v,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function ds(){var t=v.Promise;return Aa?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Un(t,n,i,o,s){var l=$;try{return wn(t,!0),n(i,o,s)}finally{wn(l,!1)}}function hs(t,n,i,o){return typeof t!="function"?t:function(){var s=$;i&&lr(),wn(n,!0);try{return t.apply(this,arguments)}finally{wn(s,!1),o&&queueMicrotask(bn)}}}function Ma(t){Promise===jn&&it.echoes===0?_i===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var Ze=G.reject;function La(t,n,i,o){if(!t.idbdb||!t._state.openComplete&&!$.letThrough&&!t._vip){if(t._state.openComplete)return Ze(new z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Ze(new z.DatabaseClosed);t.open().catch(ve)}return t._state.dbReadyPromise.then(function(){return La(t,n,i,o)})}else{var s=t._createTransaction(n,i,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(l){return l.name===Be.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return La(t,n,i,o)})):Ze(l)}return s._promise(n,function(l,d){return _n(function(){return $.trans=s,o(l,d,s)})}).then(function(l){if(n==="readwrite")try{s.idbtrans.commit()}catch{}return n==="readonly"?l:s._completion.then(function(){return l})})}}var vs="4.2.1",Vn="",Na=-1/0,ln="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ps="String expected.",cr=[],Ei="__dbnames",Fa="readonly",Ka="readwrite";function Wn(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var ys={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xi(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=Pe(n),delete n[t]),n}:function(n){return n}}function ms(){throw z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ke(t,n){try{var i=gs(t),o=gs(n);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return Gl(_s(t),_s(n));case"Array":return Wl(t,n)}}catch{}return NaN}function Wl(t,n){for(var i=t.length,o=n.length,s=i<o?i:o,l=0;l<s;++l){var d=ke(t[l],n[l]);if(d!==0)return d}return i===o?0:i<o?-1:1}function Gl(t,n){for(var i=t.length,o=n.length,s=i<o?i:o,l=0;l<s;++l)if(t[l]!==n[l])return t[l]<n[l]?-1:1;return i===o?0:i<o?-1:1}function gs(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var i=Et(t);return i==="ArrayBuffer"?"binary":i}function _s(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Ti(t,n,i){var o=t.schema.yProps;return o?(n&&i.numFailures>0&&(n=n.filter(function(s,l){return!i.failures[l]})),Promise.all(o.map(function(s){var l=s.updatesTable;return n?t.db.table(l).where("k").anyOf(n).delete():t.db.table(l).clear()})).then(function(){return i})):i}var Nr=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var i,o=this["@@propmod"];if(o.add!==void 0){var s=o.add;if(y(s))return f(f([],y(n)?n:[],!0),s).sort();if(typeof s=="number")return(Number(n)||0)+s;if(typeof s=="bigint")try{return BigInt(n)+s}catch{return BigInt(0)+s}throw new TypeError("Invalid term ".concat(s))}if(o.remove!==void 0){var l=o.remove;if(y(l))return y(n)?n.filter(function(h){return!l.includes(h)}).sort():[];if(typeof l=="number")return Number(n)-l;if(typeof l=="bigint")try{return BigInt(n)-l}catch{return BigInt(0)-l}throw new TypeError("Invalid subtrahend ".concat(l))}var d=(i=o.replacePrefix)===null||i===void 0?void 0:i[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function bs(t,n){for(var i=m(n),o=i.length,s=!1,l=0;l<o;++l){var d=i[l],h=n[d],p=we(t,d);h instanceof Nr?(ge(t,d,h.execute(p)),s=!0):p!==h&&(ge(t,d,h),s=!0)}return s}var ws=(function(){function t(){}return t.prototype._trans=function(n,i,o){var s=this._tx||$.trans,l=this.name,d=Qt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function h(x,b,I){if(!I.schema[l])throw new z.NotFound("Table "+l+" not part of transaction");return i(I.idbtrans,I)}var p=sr();try{var g=s&&s.db._novip===this.db._novip?s===$.trans?s._promise(n,h,o):_n(function(){return s._promise(n,h,o)},{trans:s,transless:$.transless||$}):La(this.db,n,[this.name],h);return d&&(g._consoleTask=d,g=g.catch(function(x){return console.trace(x),Ze(x)})),g}finally{p&&ur()}},t.prototype.get=function(n,i){var o=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?Ze(new z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:n}).then(function(l){return o.hook.reading.fire(l)})}).then(i)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(y(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=m(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&i.every(function(I){return x.keyPath.indexOf(I)>=0})){for(var b=0;b<i.length;++b)if(i.indexOf(x.keyPath[b])===-1)return!1;return!0}return!1}).sort(function(x,b){return x.keyPath.length-b.keyPath.length})[0];if(o&&this.db._maxKey!==Vn){var s=o.keyPath.slice(0,i.length);return this.where(s).equals(s.map(function(x){return n[x]}))}!o&&Qt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var l=this.schema.idxByName;function d(x,b){return ke(x,b)===0}var h=i.reduce(function(x,b){var I=x[0],j=x[1],E=l[b],A=n[b];return[I||E,I||!E?Wn(j,E&&E.multi?function(O){var C=we(O,b);return y(C)&&C.some(function(N){return d(A,N)})}:function(O){return d(A,we(O,b))}):j]},[null,null]),p=h[0],g=h[1];return p?this.where(p.name).equals(n[p.keyPath]).filter(g):o?this.filter(g):this.where(i).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,y(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var i=this,o=i.db,s=i.name;this.schema.mappedClass=n,n.prototype instanceof ms&&(n=(function(p){u(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(g.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),g.prototype.table=function(){return s},g})(n));for(var l=new Set,d=n.prototype;d;d=w(d))Object.getOwnPropertyNames(d).forEach(function(p){return l.add(p)});var h=function(p){if(!p)return p;var g=Object.create(n.prototype);for(var x in p)if(!l.has(x))try{g[x]=p[x]}catch{}return g};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=h,this.hook("reading",h),n},t.prototype.defineClass=function(){function n(i){D(this,i)}return this.mapToClass(n)},t.prototype.add=function(n,i){var o=this,s=this.schema.primKey,l=s.auto,d=s.keyPath,h=n;return d&&l&&(h=xi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"add",keys:i!=null?[i]:null,values:[h]})}).then(function(p){return p.numFailures?G.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{ge(n,d,p)}catch{}return p})},t.prototype.upsert=function(n,i){var o=this,s=this.schema.primKey.keyPath;return this._trans("readwrite",function(l){return o.core.get({trans:l,key:n}).then(function(d){var h=d??{};return bs(h,i),s&&ge(h,s,n),o.core.mutate({trans:l,type:"put",values:[h],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[i]}}).then(function(p){return p.numFailures?G.reject(p.failures[0]):!!d})})})},t.prototype.update=function(n,i){if(typeof n=="object"&&!y(n)){var o=we(n,this.schema.primKey.keyPath);return o===void 0?Ze(new z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(n).modify(i)},t.prototype.put=function(n,i){var o=this,s=this.schema.primKey,l=s.auto,d=s.keyPath,h=n;return d&&l&&(h=xi(d)(n)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"put",values:[h],keys:i!=null?[i]:null})}).then(function(p){return p.numFailures?G.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{ge(n,d,p)}catch{}return p})},t.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(s){return Ti(i,[n],s)}).then(function(s){return s.numFailures?G.reject(s.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:ys}).then(function(o){return Ti(n,null,o)})}).then(function(i){return i.numFailures?G.reject(i.failures[0]):void 0})},t.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:n,trans:o}).then(function(s){return s.map(function(l){return i.hook.reading.fire(l)})})})},t.prototype.bulkAdd=function(n,i,o){var s=this,l=Array.isArray(i)?i:void 0;o=o||(l?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=s.schema.primKey,g=p.auto,x=p.keyPath;if(x&&l)throw new z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var b=n.length,I=x&&g?n.map(xi(x)):n;return s.core.mutate({trans:h,type:"add",keys:l,values:I,wantResults:d}).then(function(j){var E=j.numFailures,A=j.results,O=j.lastResult,C=j.failures,N=d?A:O;if(E===0)return N;throw new De("".concat(s.name,".bulkAdd(): ").concat(E," of ").concat(b," operations failed"),C)})})},t.prototype.bulkPut=function(n,i,o){var s=this,l=Array.isArray(i)?i:void 0;o=o||(l?void 0:i);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var p=s.schema.primKey,g=p.auto,x=p.keyPath;if(x&&l)throw new z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var b=n.length,I=x&&g?n.map(xi(x)):n;return s.core.mutate({trans:h,type:"put",keys:l,values:I,wantResults:d}).then(function(j){var E=j.numFailures,A=j.results,O=j.lastResult,C=j.failures,N=d?A:O;if(E===0)return N;throw new De("".concat(s.name,".bulkPut(): ").concat(E," of ").concat(b," operations failed"),C)})})},t.prototype.bulkUpdate=function(n){var i=this,o=this.core,s=n.map(function(h){return h.key}),l=n.map(function(h){return h.changes}),d=[];return this._trans("readwrite",function(h){return o.getMany({trans:h,keys:s,cache:"clone"}).then(function(p){var g=[],x=[];n.forEach(function(I,j){var E=I.key,A=I.changes,O=p[j];if(O){for(var C=0,N=Object.keys(A);C<N.length;C++){var F=N[C],B=A[F];if(F===i.schema.primKey.keyPath){if(ke(B,E)!==0)throw new z.Constraint("Cannot update primary key in bulkUpdate()")}else ge(O,F,B)}d.push(j),g.push(E),x.push(O)}});var b=g.length;return o.mutate({trans:h,type:"put",keys:g,values:x,updates:{keys:s,changeSpecs:l}}).then(function(I){var j=I.numFailures,E=I.failures;if(j===0)return b;for(var A=0,O=Object.keys(E);A<O.length;A++){var C=O[A],N=d[Number(C)];if(N!=null){var F=E[C];delete E[C],E[N]=F}}throw new De("".concat(i.name,".bulkUpdate(): ").concat(j," of ").concat(b," operations failed"),E)})})})},t.prototype.bulkDelete=function(n){var i=this,o=n.length;return this._trans("readwrite",function(s){return i.core.mutate({trans:s,type:"delete",keys:n}).then(function(l){return Ti(i,n,l)})}).then(function(s){var l=s.numFailures,d=s.lastResult,h=s.failures;if(l===0)return d;throw new De("".concat(i.name,".bulkDelete(): ").concat(l," of ").concat(o," operations failed"),h)})},t})();function Fr(t){var n={},i=function(h,p){if(p){for(var g=arguments.length,x=new Array(g-1);--g;)x[g-1]=arguments[g];return n[h].subscribe.apply(null,x),t}else if(typeof h=="string")return n[h]};i.addEventType=l;for(var o=1,s=arguments.length;o<s;++o)l(arguments[o]);return i;function l(h,p,g){if(typeof h=="object")return d(h);p||(p=Pl),g||(g=ve);var x={subscribers:[],fire:g,subscribe:function(b){x.subscribers.indexOf(b)===-1&&(x.subscribers.push(b),x.fire=p(x.fire,b))},unsubscribe:function(b){x.subscribers=x.subscribers.filter(function(I){return I!==b}),x.fire=x.subscribers.reduce(p,g)}};return n[h]=i[h]=x,x}function d(h){m(h).forEach(function(p){var g=h[p];if(y(g))l(p,h[p][0],h[p][1]);else if(g==="asap")var x=l(p,Bn,function(){for(var I=arguments.length,j=new Array(I);I--;)j[I]=arguments[I];x.subscribers.forEach(function(E){_e(function(){E.apply(null,j)})})});else throw new z.InvalidArgument("Invalid event config")})}}function Kr(t,n){return L(n).from({prototype:t}),n}function Yl(t){return Kr(ws.prototype,function(i,o,s){this.db=t,this._tx=s,this.name=i,this.schema=o,this.hook=t._allTables[i]?t._allTables[i].hook:Fr(null,{creating:[Pr,ve],reading:[Ta,Bn],updating:[Cl,ve],deleting:[Il,ve]})})}function fr(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function Ba(t,n){t.filter=Wn(t.filter,n)}function ja(t,n,i){var o=t.replayFilter;t.replayFilter=o?function(){return Wn(o(),n())}:n,t.justLimit=i&&!o}function ql(t,n){t.isMatch=Wn(t.isMatch,n)}function ki(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new z.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function Es(t,n,i){var o=ki(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function Di(t,n,i,o){var s=t.replayFilter?Wn(t.filter,t.replayFilter()):t.filter;if(t.or){var l={},d=function(h,p,g){if(!s||s(p,g,function(I){return p.stop(I)},function(I){return p.fail(I)})){var x=p.primaryKey,b=""+x;b==="[object ArrayBuffer]"&&(b=""+new Uint8Array(x)),_(l,b)||(l[b]=!0,n(h,p,g))}};return Promise.all([t.or._iterate(d,i),xs(Es(t,o,i),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return xs(Es(t,o,i),Wn(t.algorithm,s),n,!t.keysOnly&&t.valueMapper)}function xs(t,n,i,o){var s=o?function(d,h,p){return i(o(d),h,p)}:i,l=Ve(s);return t.then(function(d){if(d)return d.start(function(){var h=function(){return d.continue()};(!n||n(d,function(p){return h=p},function(p){d.stop(p),h=ve},function(p){d.fail(p),h=ve}))&&l(d.value,d,function(p){return h=p}),h()})})}var Zl=(function(){function t(){}return t.prototype._read=function(n,i){var o=this._ctx;return o.error?o.table._trans(null,Ze.bind(null,o.error)):o.table._trans("readonly",n).then(i)},t.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,Ze.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=Wn(i.algorithm,n)},t.prototype._iterate=function(n,i){return Di(this._ctx,n,i,this._ctx.table.core)},t.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&D(o,n),i._ctx=o,i},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var i=this._ctx;return this._read(function(o){return Di(i,n,o,i.table.core)})},t.prototype.count=function(n){var i=this;return this._read(function(o){var s=i._ctx,l=s.table.core;if(fr(s,!0))return l.count({trans:o,query:{index:ki(s,l.schema),range:s.range}}).then(function(h){return Math.min(h,s.limit)});var d=0;return Di(s,function(){return++d,!1},o,l).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,i){var o=n.split(".").reverse(),s=o[0],l=o.length-1;function d(g,x){return x?d(g[o[x]],x-1):g[s]}var h=this._ctx.dir==="next"?1:-1;function p(g,x){var b=d(g,l),I=d(x,l);return ke(b,I)*h}return this.toArray(function(g){return g.sort(p)}).then(i)},t.prototype.toArray=function(n){var i=this;return this._read(function(o){var s=i._ctx;if(s.dir==="next"&&fr(s,!0)&&s.limit>0){var l=s.valueMapper,d=ki(s,s.table.core.schema);return s.table.core.query({trans:o,limit:s.limit,values:!0,query:{index:d,range:s.range}}).then(function(p){var g=p.result;return l?g.map(l):g})}else{var h=[];return Di(s,function(p){return h.push(p)},o,s.table.core).then(function(){return h})}},n)},t.prototype.offset=function(n){var i=this._ctx;return n<=0?this:(i.offset+=n,fr(i)?ja(i,function(){var o=n;return function(s,l){return o===0?!0:o===1?(--o,!1):(l(function(){s.advance(o),o=0}),!1)}}):ja(i,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),ja(this._ctx,function(){var i=n;return function(o,s,l){return--i<=0&&s(l),i>=0}},!0),this},t.prototype.until=function(n,i){return Ba(this._ctx,function(o,s,l){return n(o.value)?(s(l),i):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return Ba(this._ctx,function(i){return n(i.value)}),ql(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){n(s.key,s)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){n(s.primaryKey,s)})},t.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,l){o.push(l.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&fr(i,!0)&&i.limit>0)return this._read(function(s){var l=ki(i,i.table.core.schema);return i.table.core.query({trans:s,values:!1,limit:i.limit,query:{index:l,range:i.range}})}).then(function(s){var l=s.result;return l}).then(n);i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,l){o.push(l.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,i=n.index&&n.table.schema.idxByName[n.index];if(!i||!i.multi)return this;var o={};return Ba(this._ctx,function(s){var l=s.primaryKey.toString(),d=_(o,l);return o[l]=!0,!d}),this},t.prototype.modify=function(n){var i=this,o=this._ctx;return this._write(function(s){var l;typeof n=="function"?l=n:l=function(C){return bs(C,n)};var d=o.table.core,h=d.schema.primaryKey,p=h.outbound,g=h.extractKey,x=200,b=i.db._options.modifyChunkSize;b&&(typeof b=="object"?x=b[d.name]||b["*"]||200:x=b);var I=[],j=0,E=[],A=function(C,N){var F=N.failures,B=N.numFailures;j+=C-B;for(var R=0,U=m(F);R<U.length;R++){var Y=U[R];I.push(F[Y])}},O=n===Ts;return i.clone().primaryKeys().then(function(C){var N=fr(o)&&o.limit===1/0&&(typeof n!="function"||O)&&{index:o.index,range:o.range},F=function(B){var R=Math.min(x,C.length-B),U=C.slice(B,B+R);return(O?Promise.resolve([]):d.getMany({trans:s,keys:U,cache:"immutable"})).then(function(Y){var V=[],ne=[],pe=p?[]:null,q=O?U:[];if(!O)for(var he=0;he<R;++he){var ie=Y[he],Ae={value:Pe(ie),primKey:C[B+he]};l.call(Ae,Ae.value,Ae)!==!1&&(Ae.value==null?q.push(C[B+he]):!p&&ke(g(ie),g(Ae.value))!==0?(q.push(C[B+he]),V.push(Ae.value)):(ne.push(Ae.value),p&&pe.push(C[B+he])))}return Promise.resolve(V.length>0&&d.mutate({trans:s,type:"add",values:V}).then(function(ee){for(var qe in ee.failures)q.splice(parseInt(qe),1);A(V.length,ee)})).then(function(){return(ne.length>0||N&&typeof n=="object")&&d.mutate({trans:s,type:"put",keys:pe,values:ne,criteria:N,changeSpec:typeof n!="function"&&n,isAdditionalChunk:B>0}).then(function(ee){return A(ne.length,ee)})}).then(function(){return(q.length>0||N&&O)&&d.mutate({trans:s,type:"delete",keys:q,criteria:N,isAdditionalChunk:B>0}).then(function(ee){return Ti(o.table,q,ee)}).then(function(ee){return A(q.length,ee)})}).then(function(){return C.length>B+R&&F(B+x)})})};return F(0).then(function(){if(I.length>0)throw new Ke("Error modifying one or more objects",I,j,E);return C.length})})})},t.prototype.delete=function(){var n=this._ctx,i=n.range;return fr(n)&&!n.table.schema.yProps&&(n.isPrimKey||i.type===3)?this._write(function(o){var s=n.table.core.schema.primaryKey,l=i;return n.table.core.count({trans:o,query:{index:s,range:l}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:l}).then(function(h){var p=h.failures,g=h.numFailures;if(g)throw new Ke("Could not delete some values",Object.keys(p).map(function(x){return p[x]}),d-g);return d-g})})}):this.modify(Ts)},t})(),Ts=function(t,n){return n.value=null};function Ql(t){return Kr(Zl.prototype,function(i,o){this.db=t;var s=ys,l=null;if(o)try{s=o()}catch(g){l=g}var d=i._ctx,h=d.table,p=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:s,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:l,or:d.or,valueMapper:p!==Bn?p:null}})}function $l(t,n){return t<n?-1:t===n?0:1}function Xl(t,n){return t>n?-1:t===n?0:1}function Mt(t,n,i){var o=t instanceof Ds?new t.Collection(t):t;return o._ctx.error=i?new i(n):new TypeError(n),o}function dr(t){return new t.Collection(t,function(){return ks("")}).limit(0)}function Jl(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function ec(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function tc(t,n,i,o,s,l){for(var d=Math.min(t.length,o.length),h=-1,p=0;p<d;++p){var g=n[p];if(g!==o[p])return s(t[p],i[p])<0?t.substr(0,p)+i[p]+i.substr(p+1):s(t[p],o[p])<0?t.substr(0,p)+o[p]+i.substr(p+1):h>=0?t.substr(0,h)+n[h]+i.substr(h+1):null;s(t[p],g)<0&&(h=p)}return d<o.length&&l==="next"?t+i.substr(t.length):d<t.length&&l==="prev"?t.substr(0,i.length):h<0?null:t.substr(0,h)+o[h]+i.substr(h+1)}function Ai(t,n,i,o){var s,l,d,h,p,g,x,b=i.length;if(!i.every(function(A){return typeof A=="string"}))return Mt(t,ps);function I(A){s=Jl(A),l=ec(A),d=A==="next"?$l:Xl;var O=i.map(function(C){return{lower:l(C),upper:s(C)}}).sort(function(C,N){return d(C.lower,N.lower)});h=O.map(function(C){return C.upper}),p=O.map(function(C){return C.lower}),g=A,x=A==="next"?"":o}I("next");var j=new t.Collection(t,function(){return En(h[0],p[b-1]+o)});j._ondirectionchange=function(A){I(A)};var E=0;return j._addAlgorithm(function(A,O,C){var N=A.key;if(typeof N!="string")return!1;var F=l(N);if(n(F,p,E))return!0;for(var B=null,R=E;R<b;++R){var U=tc(N,F,h[R],p[R],d,g);U===null&&B===null?E=R+1:(B===null||d(B,U)>0)&&(B=U)}return O(B!==null?function(){A.continue(B+x)}:C),!1}),j}function En(t,n,i,o){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:o}}function ks(t){return{type:1,lower:t,upper:t}}var Ds=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,i,o,s){o=o!==!1,s=s===!0;try{return this._cmp(n,i)>0||this._cmp(n,i)===0&&(o||s)&&!(o&&s)?dr(this):new this.Collection(this,function(){return En(n,i,!o,!s)})}catch{return Mt(this,ln)}},t.prototype.equals=function(n){return n==null?Mt(this,ln):new this.Collection(this,function(){return ks(n)})},t.prototype.above=function(n){return n==null?Mt(this,ln):new this.Collection(this,function(){return En(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?Mt(this,ln):new this.Collection(this,function(){return En(n,void 0,!1)})},t.prototype.below=function(n){return n==null?Mt(this,ln):new this.Collection(this,function(){return En(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?Mt(this,ln):new this.Collection(this,function(){return En(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?Mt(this,ps):this.between(n,n+Vn,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Ai(this,function(i,o){return i.indexOf(o[0])===0},[n],Vn)},t.prototype.equalsIgnoreCase=function(n){return Ai(this,function(i,o){return i===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=Q.apply(W,arguments);return n.length===0?dr(this):Ai(this,function(i,o){return o.indexOf(i)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=Q.apply(W,arguments);return n.length===0?dr(this):Ai(this,function(i,o){return o.some(function(s){return i.indexOf(s)===0})},n,Vn)},t.prototype.anyOf=function(){var n=this,i=Q.apply(W,arguments),o=this._cmp;try{i.sort(o)}catch{return Mt(this,ln)}if(i.length===0)return dr(this);var s=new this.Collection(this,function(){return En(i[0],i[i.length-1])});s._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,i.sort(o)};var l=0;return s._addAlgorithm(function(d,h,p){for(var g=d.key;o(g,i[l])>0;)if(++l,l===i.length)return h(p),!1;return o(g,i[l])===0?!0:(h(function(){d.continue(i[l])}),!1)}),s},t.prototype.notEqual=function(n){return this.inAnyRange([[Na,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=Q.apply(W,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Mt(this,ln)}var i=n.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[Na,s]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,i){var o=this,s=this._cmp,l=this._ascending,d=this._descending,h=this._min,p=this._max;if(n.length===0)return dr(this);if(!n.every(function(R){return R[0]!==void 0&&R[1]!==void 0&&l(R[0],R[1])<=0}))return Mt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",z.InvalidArgument);var g=!i||i.includeLowers!==!1,x=i&&i.includeUppers===!0;function b(R,U){for(var Y=0,V=R.length;Y<V;++Y){var ne=R[Y];if(s(U[0],ne[1])<0&&s(U[1],ne[0])>0){ne[0]=h(ne[0],U[0]),ne[1]=p(ne[1],U[1]);break}}return Y===V&&R.push(U),R}var I=l;function j(R,U){return I(R[0],U[0])}var E;try{E=n.reduce(b,[]),E.sort(j)}catch{return Mt(this,ln)}var A=0,O=x?function(R){return l(R,E[A][1])>0}:function(R){return l(R,E[A][1])>=0},C=g?function(R){return d(R,E[A][0])>0}:function(R){return d(R,E[A][0])>=0};function N(R){return!O(R)&&!C(R)}var F=O,B=new this.Collection(this,function(){return En(E[0][0],E[E.length-1][1],!g,!x)});return B._ondirectionchange=function(R){R==="next"?(F=O,I=l):(F=C,I=d),E.sort(j)},B._addAlgorithm(function(R,U,Y){for(var V=R.key;F(V);)if(++A,A===E.length)return U(Y),!1;return N(V)?!0:(o._cmp(V,E[A][1])===0||o._cmp(V,E[A][0])===0||U(function(){I===l?R.continue(E[A][0]):R.continue(E[A][1])}),!1)}),B},t.prototype.startsWithAnyOf=function(){var n=Q.apply(W,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?dr(this):this.inAnyRange(n.map(function(i){return[i,i+Vn]})):Mt(this,"startsWithAnyOf() only works with strings")},t})();function nc(t){return Kr(Ds.prototype,function(i,o,s){if(this.db=t,this._ctx={table:i,index:o===":id"?null:o,or:s},this._cmp=this._ascending=ke,this._descending=function(l,d){return ke(d,l)},this._max=function(l,d){return ke(l,d)>0?l:d},this._min=function(l,d){return ke(l,d)<0?l:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new z.MissingAPI})}function $t(t){return Ve(function(n){return Br(n),t(n.target.error),!1})}function Br(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var jr="storagemutated",za="x-storagemutated-1",xn=Fr(null,jr),rc=(function(){function t(){}return t.prototype._lock=function(){return oe(!$.global),++this._reculock,this._reculock===1&&!$.global&&($.lockOwnerFor=this),this},t.prototype._unlock=function(){if(oe(!$.global),--this._reculock===0)for($.global||($.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{Un(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&$.lockOwnerFor!==this},t.prototype.create=function(n){var i=this;if(!this.mode)return this;var o=this.db.idbdb,s=this.db._state.dbOpenError;if(oe(!this.idbtrans),!n&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new z.DatabaseClosed(s);case"MissingAPIError":throw new z.MissingAPI(s.message,s);default:throw new z.OpenFailed(s)}if(!this.active)throw new z.TransactionInactive;return oe(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=Ve(function(l){Br(l),i._reject(n.error)}),n.onabort=Ve(function(l){Br(l),i.active&&i._reject(new z.Abort(n.error)),i.active=!1,i.on("abort").fire(l)}),n.oncomplete=Ve(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&xn.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,i,o){var s=this;if(n==="readwrite"&&this.mode!=="readwrite")return Ze(new z.ReadOnly("Transaction is readonly"));if(!this.active)return Ze(new z.TransactionInactive);if(this._locked())return new G(function(d,h){s._blockedFuncs.push([function(){s._promise(n,i,o).then(d,h)},$])});if(o)return _n(function(){var d=new G(function(h,p){s._lock();var g=i(h,p,s);g&&g.then&&g.then(h,p)});return d.finally(function(){return s._unlock()}),d._lib=!0,d});var l=new G(function(d,h){var p=i(d,h,s);p&&p.then&&p.then(d,h)});return l._lib=!0,l},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var i=this._root(),o=G.resolve(n);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var s=i.idbtrans.objectStore(i.storeNames[0]);(function d(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(s.get(-1/0).onsuccess=d)})()}var l=i._waitingFor;return new G(function(d,h){o.then(function(p){return i._waitingQueue.push(Ve(d.bind(null,p)))},function(p){return i._waitingQueue.push(Ve(h.bind(null,p)))}).finally(function(){i._waitingFor===l&&(i._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new z.Abort))},t.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(_(i,n))return i[n];var o=this.schema[n];if(!o)throw new z.NotFound("Table "+n+" not part of transaction");var s=new this.db.Table(n,o,this);return s.core=this.db.core.table(n),i[n]=s,s},t})();function ic(t){return Kr(rc.prototype,function(i,o,s,l,d){var h=this;i!=="readonly"&&o.forEach(function(p){var g,x=(g=s[p])===null||g===void 0?void 0:g.yProps;x&&(o=o.concat(x.map(function(b){return b.updatesTable})))}),this.db=t,this.mode=i,this.storeNames=o,this.schema=s,this.chromeTransactionDurability=l,this.idbtrans=null,this.on=Fr(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new G(function(p,g){h._resolve=p,h._reject=g}),this._completion.then(function(){h.active=!1,h.on.complete.fire()},function(p){var g=h.active;return h.active=!1,h.on.error.fire(p),h.parent?h.parent._reject(p):g&&h.idbtrans&&h.idbtrans.abort(),Ze(p)})})}function Ha(t,n,i,o,s,l,d,h){return{name:t,keyPath:n,unique:i,multi:o,auto:s,compound:l,src:(i&&!d?"&":"")+(o?"*":"")+(s?"++":"")+As(n),type:h}}function As(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Ua(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:be(i,function(o){return[o.name,o]})}}function ac(t){return t.length===1?t[0]:t}var zr=function(t){try{return t.only([[]]),zr=function(){return[[]]},[[]]}catch{return zr=function(){return Vn},Vn}};function Va(t){return t==null?function(){}:typeof t=="string"?oc(t):function(n){return we(n,t)}}function oc(t){var n=t.split(".");return n.length===1?function(i){return i[t]}:function(i){return we(i,t)}}function Ss(t){return[].slice.call(t)}var sc=0;function Hr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function uc(t,n,i){function o(b,I){var j=Ss(b.objectStoreNames);return{schema:{name:b.name,tables:j.map(function(E){return I.objectStore(E)}).map(function(E){var A=E.keyPath,O=E.autoIncrement,C=y(A),N=A==null,F={},B={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N,compound:C,keyPath:A,autoIncrement:O,unique:!0,extractKey:Va(A)},indexes:Ss(E.indexNames).map(function(R){return E.index(R)}).map(function(R){var U=R.name,Y=R.unique,V=R.multiEntry,ne=R.keyPath,pe=y(ne),q={name:U,compound:pe,keyPath:ne,unique:Y,multiEntry:V,extractKey:Va(ne)};return F[Hr(ne)]=q,q}),getIndexByKeyPath:function(R){return F[Hr(R)]}};return F[":id"]=B.primaryKey,A!=null&&(F[Hr(A)]=B.primaryKey),B})},hasGetAll:j.length>0&&"getAll"in I.objectStore(j[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function s(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var I=b.lower,j=b.upper,E=b.lowerOpen,A=b.upperOpen,O=I===void 0?j===void 0?null:n.upperBound(j,!!A):j===void 0?n.lowerBound(I,!!E):n.bound(I,j,!!E,!!A);return O}function l(b){var I=b.name;function j(O){var C=O.trans,N=O.type,F=O.keys,B=O.values,R=O.range;return new Promise(function(U,Y){U=Ve(U);var V=C.objectStore(I),ne=V.keyPath==null,pe=N==="put"||N==="add";if(!pe&&N!=="delete"&&N!=="deleteRange")throw new Error("Invalid operation type: "+N);var q=(F||B||{length:1}).length;if(F&&B&&F.length!==B.length)throw new Error("Given keys array must have same length as given values array.");if(q===0)return U({numFailures:0,failures:{},results:[],lastResult:void 0});var he,ie=[],Ae=[],ee=0,qe=function(Jt){++ee,Br(Jt)};if(N==="deleteRange"){if(R.type===4)return U({numFailures:ee,failures:Ae,results:[],lastResult:void 0});R.type===3?ie.push(he=V.clear()):ie.push(he=V.delete(s(R)))}else{var dt=pe?ne?[B,F]:[B,null]:[F,null],Xt=dt[0],Tt=dt[1];if(pe)for(var Kt=0;Kt<q;++Kt)ie.push(he=Tt&&Tt[Kt]!==void 0?V[N](Xt[Kt],Tt[Kt]):V[N](Xt[Kt])),he.onerror=qe;else for(var Kt=0;Kt<q;++Kt)ie.push(he=V[N](Xt[Kt])),he.onerror=qe}var Dn=function(Jt){var Wr=Jt.target.result;ie.forEach(function(Wt,Bi){return Wt.error!=null&&(Ae[Bi]=Wt.error)}),U({numFailures:ee,failures:Ae,results:N==="delete"?F:ie.map(function(Wt){return Wt.result}),lastResult:Wr})};he.onerror=function(Jt){qe(Jt),Dn(Jt)},he.onsuccess=Dn})}function E(O){var C=O.trans,N=O.values,F=O.query,B=O.reverse,R=O.unique;return new Promise(function(U,Y){U=Ve(U);var V=F.index,ne=F.range,pe=C.objectStore(I),q=V.isPrimaryKey?pe:pe.index(V.name),he=B?R?"prevunique":"prev":R?"nextunique":"next",ie=N||!("openKeyCursor"in q)?q.openCursor(s(ne),he):q.openKeyCursor(s(ne),he);ie.onerror=$t(Y),ie.onsuccess=Ve(function(Ae){var ee=ie.result;if(!ee){U(null);return}ee.___id=++sc,ee.done=!1;var qe=ee.continue.bind(ee),dt=ee.continuePrimaryKey;dt&&(dt=dt.bind(ee));var Xt=ee.advance.bind(ee),Tt=function(){throw new Error("Cursor not started")},Kt=function(){throw new Error("Cursor not stopped")};ee.trans=C,ee.stop=ee.continue=ee.continuePrimaryKey=ee.advance=Tt,ee.fail=Ve(Y),ee.next=function(){var Dn=this,Jt=1;return this.start(function(){return Jt--?Dn.continue():Dn.stop()}).then(function(){return Dn})},ee.start=function(Dn){var Jt=new Promise(function(Wt,Bi){Wt=Ve(Wt),ie.onerror=$t(Bi),ee.fail=Bi,ee.stop=function(Zc){ee.stop=ee.continue=ee.continuePrimaryKey=ee.advance=Kt,Wt(Zc)}}),Wr=function(){if(ie.result)try{Dn()}catch(Wt){ee.fail(Wt)}else ee.done=!0,ee.start=function(){throw new Error("Cursor behind last entry")},ee.stop()};return ie.onsuccess=Ve(function(Wt){ie.onsuccess=Wr,Wr()}),ee.continue=qe,ee.continuePrimaryKey=dt,ee.advance=Xt,Wr(),Jt},U(ee)},Y)})}function A(O){return function(C){return new Promise(function(N,F){N=Ve(N);var B=C.trans,R=C.values,U=C.limit,Y=C.query,V=U===1/0?void 0:U,ne=Y.index,pe=Y.range,q=B.objectStore(I),he=ne.isPrimaryKey?q:q.index(ne.name),ie=s(pe);if(U===0)return N({result:[]});if(O){var Ae=R?he.getAll(ie,V):he.getAllKeys(ie,V);Ae.onsuccess=function(Xt){return N({result:Xt.target.result})},Ae.onerror=$t(F)}else{var ee=0,qe=R||!("openKeyCursor"in he)?he.openCursor(ie):he.openKeyCursor(ie),dt=[];qe.onsuccess=function(Xt){var Tt=qe.result;if(!Tt)return N({result:dt});if(dt.push(R?Tt.value:Tt.primaryKey),++ee===U)return N({result:dt});Tt.continue()},qe.onerror=$t(F)}})}}return{name:I,schema:b,mutate:j,getMany:function(O){var C=O.trans,N=O.keys;return new Promise(function(F,B){F=Ve(F);for(var R=C.objectStore(I),U=N.length,Y=new Array(U),V=0,ne=0,pe,q=function(ee){var qe=ee.target;(Y[qe._pos]=qe.result)!=null,++ne===V&&F(Y)},he=$t(B),ie=0;ie<U;++ie){var Ae=N[ie];Ae!=null&&(pe=R.get(N[ie]),pe._pos=ie,pe.onsuccess=q,pe.onerror=he,++V)}V===0&&F(Y)})},get:function(O){var C=O.trans,N=O.key;return new Promise(function(F,B){F=Ve(F);var R=C.objectStore(I),U=R.get(N);U.onsuccess=function(Y){return F(Y.target.result)},U.onerror=$t(B)})},query:A(p),openCursor:E,count:function(O){var C=O.query,N=O.trans,F=C.index,B=C.range;return new Promise(function(R,U){var Y=N.objectStore(I),V=F.isPrimaryKey?Y:Y.index(F.name),ne=s(B),pe=ne?V.count(ne):V.count();pe.onsuccess=Ve(function(q){return R(q.target.result)}),pe.onerror=$t(U)})}}}var d=o(t,i),h=d.schema,p=d.hasGetAll,g=h.tables.map(function(b){return l(b)}),x={};return g.forEach(function(b){return x[b.name]=b}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(b){var I=x[b];if(!I)throw new Error("Table '".concat(b,"' not found"));return x[b]},MIN_KEY:-1/0,MAX_KEY:zr(n),schema:h}}function lc(t,n){return n.reduce(function(i,o){var s=o.create;return c(c({},i),s(i))},t)}function cc(t,n,i,o){var s=i.IDBKeyRange;i.indexedDB;var l=lc(uc(n,s,o),t.dbcore);return{dbcore:l}}function Si(t,n){var i=n.db,o=cc(t._middlewares,i,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(s){var l=s.name;t.core.schema.tables.some(function(d){return d.name===l})&&(s.core=t.core.table(l),t[l]instanceof t.Table&&(t[l].core=s.core))})}function Oi(t,n,i,o){i.forEach(function(s){var l=o[s];n.forEach(function(d){var h=re(d,s);(!h||"value"in h&&h.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?K(d,s,{get:function(){return this.table(s)},set:function(p){M(this,s,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):d[s]=new t.Table(s,l))})})}function Wa(t,n){n.forEach(function(i){for(var o in i)i[o]instanceof t.Table&&delete i[o]})}function fc(t,n){return t._cfg.version-n._cfg.version}function dc(t,n,i,o){var s=t._dbSchema;i.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=Ua("$meta",Is("")[0],[]),t._storeNames.push("$meta"));var l=t._createTransaction("readwrite",t._storeNames,s);l.create(i),l._completion.catch(o);var d=l._reject.bind(l),h=$.transless||$;_n(function(){if($.trans=l,$.transless=h,n===0)m(s).forEach(function(p){Ya(i,p,s[p].primKey,s[p].indexes)}),Si(t,i),G.follow(function(){return t.on.populate.fire(l)}).catch(d);else return Si(t,i),vc(t,l,n).then(function(p){return pc(t,p,l,i)}).catch(d)})}function hc(t,n){Os(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=Ci(t,t.idbdb,n);Pi(t,t._dbSchema,n);for(var o=Ga(i,t._dbSchema),s=function(g){if(g.change.length||g.recreate)return console.warn("Unable to patch indexes of table ".concat(g.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=n.objectStore(g.name);g.add.forEach(function(b){Qt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(g.name,".").concat(b.src)),Ii(x,b)})},l=0,d=o.change;l<d.length;l++){var h=d[l],p=s(h);if(typeof p=="object")return p.value}}function vc(t,n,i){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??i}):G.resolve(i)}function pc(t,n,i,o){var s=[],l=t._versions,d=t._dbSchema=Ci(t,t.idbdb,o),h=l.filter(function(g){return g._cfg.version>=n});if(h.length===0)return G.resolve();h.forEach(function(g){s.push(function(){var x=d,b=g._cfg.dbschema;Pi(t,x,o),Pi(t,b,o),d=t._dbSchema=b;var I=Ga(x,b);I.add.forEach(function(N){Ya(o,N[0],N[1].primKey,N[1].indexes)}),I.change.forEach(function(N){if(N.recreate)throw new z.Upgrade("Not yet support for changing primary key");var F=o.objectStore(N.name);N.add.forEach(function(B){return Ii(F,B)}),N.change.forEach(function(B){F.deleteIndex(B.name),Ii(F,B)}),N.del.forEach(function(B){return F.deleteIndex(B)})});var j=g._cfg.contentUpgrade;if(j&&g._cfg.version>n){Si(t,o),i._memoizedTables={};var E=Oe(b);I.del.forEach(function(N){E[N]=x[N]}),Wa(t,[t.Transaction.prototype]),Oi(t,[t.Transaction.prototype],m(E),E),i.schema=E;var A=Z(j);A&&lr();var O,C=G.follow(function(){if(O=j(i),O&&A){var N=bn.bind(null,null);O.then(N,N)}});return O&&typeof O.then=="function"?G.resolve(O):C.then(function(){return O})}}),s.push(function(x){var b=g._cfg.dbschema;yc(b,x),Wa(t,[t.Transaction.prototype]),Oi(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),i.schema=t._dbSchema}),s.push(function(x){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===g._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(b){return b!=="$meta"})):x.objectStore("$meta").put(g._cfg.version,"version"))})});function p(){return s.length?G.resolve(s.shift()(i.idbtrans)).then(p):G.resolve()}return p().then(function(){Os(d,o)})}function Ga(t,n){var i={del:[],add:[],change:[]},o;for(o in t)n[o]||i.del.push(o);for(o in n){var s=t[o],l=n[o];if(!s)i.add.push([o,l]);else{var d={name:o,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||s.primKey.auto!==l.primKey.auto)d.recreate=!0,i.change.push(d);else{var h=s.idxByName,p=l.idxByName,g=void 0;for(g in h)p[g]||d.del.push(g);for(g in p){var x=h[g],b=p[g];x?x.src!==b.src&&d.change.push(b):d.add.push(b)}(d.del.length>0||d.add.length>0||d.change.length>0)&&i.change.push(d)}}}return i}function Ya(t,n,i,o){var s=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(l){return Ii(s,l)}),s}function Os(t,n){m(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(Qt&&console.debug("Dexie: Creating missing table",i),Ya(n,i,t[i].primKey,t[i].indexes))})}function yc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(i){return t[i]==null&&n.db.deleteObjectStore(i)})}function Ii(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Ci(t,n,i){var o={},s=J(n.objectStoreNames,0);return s.forEach(function(l){for(var d=i.objectStore(l),h=d.keyPath,p=Ha(As(h),h||"",!0,!1,!!d.autoIncrement,h&&typeof h!="string",!0),g=[],x=0;x<d.indexNames.length;++x){var b=d.index(d.indexNames[x]);h=b.keyPath;var I=Ha(b.name,h,!!b.unique,!!b.multiEntry,!1,h&&typeof h!="string",!1);g.push(I)}o[l]=Ua(l,p,g)}),o}function mc(t,n,i){t.verno=n.version/10;var o=t._dbSchema=Ci(t,n,i);t._storeNames=J(n.objectStoreNames,0),Oi(t,[t._allTables],m(o),o)}function gc(t,n){var i=Ci(t,t.idbdb,n),o=Ga(i,t._dbSchema);return!(o.add.length||o.change.some(function(s){return s.add.length||s.change.length}))}function Pi(t,n,i){for(var o=i.db.objectStoreNames,s=0;s<o.length;++s){var l=o[s],d=i.objectStore(l);t._hasGetAll="getAll"in d;for(var h=0;h<d.indexNames.length;++h){var p=d.indexNames[h],g=d.index(p).keyPath,x=typeof g=="string"?g:"["+J(g).join("+")+"]";if(n[l]){var b=n[l].idxByName[x];b&&(b.name=p,delete n[l].idxByName[x],n[l].idxByName[p]=b)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Is(t){return t.split(",").map(function(n,i){var o,s=n.split(":"),l=(o=s[1])===null||o===void 0?void 0:o.trim();n=s[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return Ha(d,h||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),y(h),i===0,l)})}var _c=(function(){function t(){}return t.prototype._createTableSchema=function(n,i,o){return Ua(n,i,o)},t.prototype._parseIndexSyntax=function(n){return Is(n)},t.prototype._parseStoresSpec=function(n,i){var o=this;m(n).forEach(function(s){if(n[s]!==null){var l=o._parseIndexSyntax(n[s]),d=l.shift();if(!d)throw new z.Schema("Invalid schema for table "+s+": "+n[s]);if(d.unique=!0,d.multi)throw new z.Schema("Primary key cannot be multiEntry*");l.forEach(function(p){if(p.auto)throw new z.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new z.Schema("Index must have a name and cannot be an empty string")});var h=o._createTableSchema(s,d,l);i[s]=h}})},t.prototype.stores=function(n){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?D(this._cfg.storesSource,n):n;var o=i._versions,s={},l={};return o.forEach(function(d){D(s,d._cfg.storesSource),l=d._cfg.dbschema={},d._parseStoresSpec(s,l)}),i._dbSchema=l,Wa(i,[i._allTables,i,i.Transaction.prototype]),Oi(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],m(l),l),i._storeNames=m(l),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=ka(this._cfg.contentUpgrade||ve,n),this},t})();function bc(t){return Kr(_c.prototype,function(i){this.db=t,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function qa(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new cn(Ei,{addons:[],indexedDB:t,IDBKeyRange:n}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function Za(t){return t&&typeof t.databases=="function"}function wc(t){var n=t.indexedDB,i=t.IDBKeyRange;return Za(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(s){return s.name}).filter(function(s){return s!==Ei})}):qa(n,i).toCollection().primaryKeys()}function Ec(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!Za(i)&&n!==Ei&&qa(i,o).put({name:n}).catch(ve)}function xc(t,n){var i=t.indexedDB,o=t.IDBKeyRange;!Za(i)&&n!==Ei&&qa(i,o).delete(n).catch(ve)}function Qa(t){return _n(function(){return $.letThrough=!0,t()})}function Tc(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var $a;function Xa(t){return!("from"in t)}var ft=function(t,n){if(this)D(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var i=new ft;return t&&"d"in t&&D(i,t),i}};k(ft.prototype,($a={add:function(t){return Vr(this,t),this},addKey:function(t){return Ur(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return Ur(n,i,i)}),this},hasKey:function(t){var n=Ri(this).next(t).value;return n&&ke(n.from,t)<=0&&ke(n.to,t)>=0}},$a[Je]=function(){return Ri(this)},$a));function Ur(t,n,i){var o=ke(n,i);if(!isNaN(o)){if(o>0)throw RangeError();if(Xa(t))return D(t,{from:n,to:i,d:1});var s=t.l,l=t.r;if(ke(i,t.from)<0)return s?Ur(s,n,i):t.l={from:n,to:i,d:1,l:null,r:null},Ps(t);if(ke(n,t.to)>0)return l?Ur(l,n,i):t.r={from:n,to:i,d:1,l:null,r:null},Ps(t);ke(n,t.from)<0&&(t.from=n,t.l=null,t.d=l?l.d+1:1),ke(i,t.to)>0&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;s&&!t.l&&Vr(t,s),l&&d&&Vr(t,l)}}function Vr(t,n){function i(o,s){var l=s.from,d=s.to,h=s.l,p=s.r;Ur(o,l,d),h&&i(o,h),p&&i(o,p)}Xa(n)||i(t,n)}function Cs(t,n){var i=Ri(n),o=i.next();if(o.done)return!1;for(var s=o.value,l=Ri(t),d=l.next(s.from),h=d.value;!o.done&&!d.done;){if(ke(h.from,s.to)<=0&&ke(h.to,s.from)>=0)return!0;ke(s.from,h.from)<0?s=(o=i.next(h.from)).value:h=(d=l.next(s.from)).value}return!1}function Ri(t){var n=Xa(t)?null:{s:0,n:t};return{next:function(i){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&ke(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||ke(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function Ps(t){var n,i,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),s=o>1?"r":o<-1?"l":"";if(s){var l=s==="r"?"l":"r",d=c({},t),h=t[s];t.from=h.from,t.to=h.to,t[s]=h[s],d[s]=h[l],t[l]=d,d.d=Rs(d)}t.d=Rs(t)}function Rs(t){var n=t.r,i=t.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function Mi(t,n){return m(n).forEach(function(i){t[i]?Vr(t[i],n[i]):t[i]=se(n[i])}),t}function Ja(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&Cs(n[i],t[i])})}var Gn={},eo={},to=!1;function Li(t,n){Mi(eo,t),to||(to=!0,setTimeout(function(){to=!1;var i=eo;eo={},no(i,!1)},0))}function no(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var o=0,s=Object.values(Gn);o<s.length;o++){var l=s[o];Ms(l,t,i,n)}else for(var d in t){var h=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(h){var p=h[1],g=h[2],l=Gn["idb://".concat(p,"/").concat(g)];l&&Ms(l,t,i,n)}}i.forEach(function(x){return x()})}function Ms(t,n,i,o){for(var s=[],l=0,d=Object.entries(t.queries.query);l<d.length;l++){for(var h=d[l],p=h[0],g=h[1],x=[],b=0,I=g;b<I.length;b++){var j=I[b];Ja(n,j.obsSet)?j.subscribers.forEach(function(C){return i.add(C)}):o&&x.push(j)}o&&s.push([p,x])}if(o)for(var E=0,A=s;E<A.length;E++){var O=A[E],p=O[0],x=O[1];t.queries.query[p]=x}}function kc(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?Ze(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,s=Math.round(t.verno*10),l=!1;function d(){if(n.openCanceller!==o)throw new z.DatabaseClosed("db.open() was cancelled")}var h=n.dbReadyResolve,p=null,g=!1,x=function(){return new G(function(b,I){if(d(),!i)throw new z.MissingAPI;var j=t.name,E=n.autoSchema||!s?i.open(j):i.open(j,s);if(!E)throw new z.MissingAPI;E.onerror=$t(I),E.onblocked=Ve(t._fireOnBlocked),E.onupgradeneeded=Ve(function(A){if(p=E.transaction,n.autoSchema&&!t._options.allowEmptyDB){E.onerror=Br,p.abort(),E.result.close();var O=i.deleteDatabase(j);O.onsuccess=O.onerror=Ve(function(){I(new z.NoSuchDatabase("Database ".concat(j," doesnt exist")))})}else{p.onerror=$t(I);var C=A.oldVersion>Math.pow(2,62)?0:A.oldVersion;g=C<1,t.idbdb=E.result,l&&hc(t,p),dc(t,C/10,p,I)}},I),E.onsuccess=Ve(function(){p=null;var A=t.idbdb=E.result,O=J(A.objectStoreNames);if(O.length>0)try{var C=A.transaction(ac(O),"readonly");if(n.autoSchema)mc(t,A,C);else if(Pi(t,t._dbSchema,C),!gc(t,C)&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),A.close(),s=A.version+1,l=!0,b(x());Si(t,C)}catch{}cr.push(t),A.onversionchange=Ve(function(N){n.vcFired=!0,t.on("versionchange").fire(N)}),A.onclose=Ve(function(){t.close({disableAutoOpen:!1})}),g&&Ec(t._deps,j),b()},I)}).catch(function(b){switch(b?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(s>0)return s=0,x();break}return G.reject(b)})};return G.race([o,(typeof navigator>"u"?G.resolve():Tc()).then(x)]).then(function(){return d(),n.onReadyBeingFired=[],G.resolve(Qa(function(){return t.on.ready.fire(t.vip)})).then(function b(){if(n.onReadyBeingFired.length>0){var I=n.onReadyBeingFired.reduce(ka,ve);return n.onReadyBeingFired=[],G.resolve(Qa(function(){return I(t.vip)})).then(b)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(b){n.dbOpenError=b;try{p&&p.abort()}catch{}return o===n.openCanceller&&t._close(),Ze(b)}).finally(function(){n.openComplete=!0,h()}).then(function(){if(g){var b={};t.tables.forEach(function(I){I.schema.indexes.forEach(function(j){j.name&&(b["idb://".concat(t.name,"/").concat(I.name,"/").concat(j.name)]=new ft(-1/0,[[[]]]))}),b["idb://".concat(t.name,"/").concat(I.name,"/")]=b["idb://".concat(t.name,"/").concat(I.name,"/:dels")]=new ft(-1/0,[[[]]])}),xn(jr).fire(b),no(b,!0)}return t})}function ro(t){var n=function(d){return t.next(d)},i=function(d){return t.throw(d)},o=l(n),s=l(i);function l(d){return function(h){var p=d(h),g=p.value;return p.done?g:!g||typeof g.then!="function"?y(g)?Promise.all(g).then(o,s):o(g):g.then(o,s)}}return l(n)()}function Dc(t,n,i){var o=arguments.length;if(o<2)throw new z.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];i=s.pop();var l=nt(s);return[t,l,i]}function Ls(t,n,i,o,s){return G.resolve().then(function(){var l=$.transless||$,d=t._createTransaction(n,i,t._dbSchema,o);d.explicit=!0;var h={trans:d,transless:l};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(b){return b.name===Be.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Ls(t,n,i,null,s)})):Ze(b)}var p=Z(s);p&&lr();var g,x=G.follow(function(){if(g=s.call(d,d),g)if(p){var b=bn.bind(null,null);g.then(b,b)}else typeof g.next=="function"&&typeof g.throw=="function"&&(g=ro(g))},h);return(g&&typeof g.then=="function"?G.resolve(g).then(function(b){return d.active?b:Ze(new z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return g})).then(function(b){return o&&d._resolve(),d._completion.then(function(){return b})}).catch(function(b){return d._reject(b),Ze(b)})})}function Ni(t,n,i){for(var o=y(t)?t.slice():[t],s=0;s<i;++s)o.push(n);return o}function Ac(t){return c(c({},t),{table:function(n){var i=t.table(n),o=i.schema,s={},l=[];function d(A,O,C){var N=Hr(A),F=s[N]=s[N]||[],B=A==null?0:typeof A=="string"?1:A.length,R=O>0,U=c(c({},C),{name:R?"".concat(N,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:R,keyTail:O,keyLength:B,extractKey:Va(A),unique:!R&&C.unique});if(F.push(U),U.isPrimaryKey||l.push(U),B>1){var Y=B===2?A[0]:A.slice(0,B-1);d(Y,O+1,C)}return F.sort(function(V,ne){return V.keyTail-ne.keyTail}),U}var h=d(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[h];for(var p=0,g=o.indexes;p<g.length;p++){var x=g[p];d(x.keyPath,0,x)}function b(A){var O=s[Hr(A)];return O&&O[0]}function I(A,O){return{type:A.type===1?2:A.type,lower:Ni(A.lower,A.lowerOpen?t.MAX_KEY:t.MIN_KEY,O),lowerOpen:!0,upper:Ni(A.upper,A.upperOpen?t.MIN_KEY:t.MAX_KEY,O),upperOpen:!0}}function j(A){var O=A.query.index;return O.isVirtual?c(c({},A),{query:{index:O.lowLevelIndex,range:I(A.query.range,O.keyTail)}}):A}var E=c(c({},i),{schema:c(c({},o),{primaryKey:h,indexes:l,getIndexByKeyPath:b}),count:function(A){return i.count(j(A))},query:function(A){return i.query(j(A))},openCursor:function(A){var O=A.query.index,C=O.keyTail,N=O.isVirtual,F=O.keyLength;if(!N)return i.openCursor(A);function B(R){function U(V){V!=null?R.continue(Ni(V,A.reverse?t.MAX_KEY:t.MIN_KEY,C)):A.unique?R.continue(R.key.slice(0,F).concat(A.reverse?t.MIN_KEY:t.MAX_KEY,C)):R.continue()}var Y=Object.create(R,{continue:{value:U},continuePrimaryKey:{value:function(V,ne){R.continuePrimaryKey(Ni(V,t.MAX_KEY,C),ne)}},primaryKey:{get:function(){return R.primaryKey}},key:{get:function(){var V=R.key;return F===1?V[0]:V.slice(0,F)}},value:{get:function(){return R.value}}});return Y}return i.openCursor(j(A)).then(function(R){return R&&B(R)})}});return E}})}var Sc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ac};function io(t,n,i,o){return i=i||{},o=o||"",m(t).forEach(function(s){if(!_(n,s))i[o+s]=void 0;else{var l=t[s],d=n[s];if(typeof l=="object"&&typeof d=="object"&&l&&d){var h=Et(l),p=Et(d);h!==p?i[o+s]=n[s]:h==="Object"?io(l,d,i,o+s+"."):l!==d&&(i[o+s]=n[s])}else l!==d&&(i[o+s]=n[s])}}),m(n).forEach(function(s){_(t,s)||(i[o+s]=n[s])}),i}function ao(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var Oc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return c(c({},t),{table:function(n){var i=t.table(n),o=i.schema.primaryKey,s=c(c({},i),{mutate:function(l){var d=$.trans,h=d.table(n).hook,p=h.deleting,g=h.creating,x=h.updating;switch(l.type){case"add":if(g.fire===ve)break;return d._promise("readwrite",function(){return b(l)},!0);case"put":if(g.fire===ve&&x.fire===ve)break;return d._promise("readwrite",function(){return b(l)},!0);case"delete":if(p.fire===ve)break;return d._promise("readwrite",function(){return b(l)},!0);case"deleteRange":if(p.fire===ve)break;return d._promise("readwrite",function(){return I(l)},!0)}return i.mutate(l);function b(E){var A=$.trans,O=E.keys||ao(o,E);if(!O)throw new Error("Keys missing");return E=E.type==="add"||E.type==="put"?c(c({},E),{keys:O}):c({},E),E.type!=="delete"&&(E.values=f([],E.values)),E.keys&&(E.keys=f([],E.keys)),Ic(i,E,O).then(function(C){var N=O.map(function(F,B){var R=C[B],U={onerror:null,onsuccess:null};if(E.type==="delete")p.fire.call(U,F,R,A);else if(E.type==="add"||R===void 0){var Y=g.fire.call(U,F,E.values[B],A);F==null&&Y!=null&&(F=Y,E.keys[B]=F,o.outbound||ge(E.values[B],o.keyPath,F))}else{var V=io(R,E.values[B]),ne=x.fire.call(U,V,F,R,A);if(ne){var pe=E.values[B];Object.keys(ne).forEach(function(q){_(pe,q)?pe[q]=ne[q]:ge(pe,q,ne[q])})}}return U});return i.mutate(E).then(function(F){for(var B=F.failures,R=F.results,U=F.numFailures,Y=F.lastResult,V=0;V<O.length;++V){var ne=R?R[V]:O[V],pe=N[V];ne==null?pe.onerror&&pe.onerror(B[V]):pe.onsuccess&&pe.onsuccess(E.type==="put"&&C[V]?E.values[V]:ne)}return{failures:B,results:R,numFailures:U,lastResult:Y}}).catch(function(F){return N.forEach(function(B){return B.onerror&&B.onerror(F)}),Promise.reject(F)})})}function I(E){return j(E.trans,E.range,1e4)}function j(E,A,O){return i.query({trans:E,values:!1,query:{index:o,range:A},limit:O}).then(function(C){var N=C.result;return b({type:"delete",keys:N,trans:E}).then(function(F){return F.numFailures>0?Promise.reject(F.failures[0]):N.length<O?{failures:[],numFailures:0,lastResult:void 0}:j(E,c(c({},A),{lower:N[N.length-1],lowerOpen:!0}),O)})})}}});return s}})}};function Ic(t,n,i){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:i,cache:"immutable"})}function Ns(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var o=[],s=0,l=0;s<n.keys.length&&l<t.length;++s)ke(n.keys[s],t[l])===0&&(o.push(i?Pe(n.values[s]):n.values[s]),++l);return o.length===t.length?o:null}catch{return null}}var Cc={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return c(c({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var s=Ns(o.keys,o.trans._cache,o.cache==="clone");return s?G.resolve(s):i.getMany(o).then(function(l){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?Pe(l):l},l})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function Fs(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function Ks(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Pc={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new ft(t.MIN_KEY,t.MAX_KEY);return c(c({},t),{transaction:function(o,s,l){if($.subscr&&s!=="readonly")throw new z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($.querier));return t.transaction(o,s,l)},table:function(o){var s=t.table(o),l=s.schema,d=l.primaryKey,h=l.indexes,p=d.extractKey,g=d.outbound,x=d.autoIncrement&&h.filter(function(E){return E.compound&&E.keyPath.includes(d.keyPath)}),b=c(c({},s),{mutate:function(E){var A,O,C=E.trans,N=E.mutatedParts||(E.mutatedParts={}),F=function(ie){var Ae="idb://".concat(n,"/").concat(o,"/").concat(ie);return N[Ae]||(N[Ae]=new ft)},B=F(""),R=F(":dels"),U=E.type,Y=E.type==="deleteRange"?[E.range]:E.type==="delete"?[E.keys]:E.values.length<50?[ao(d,E).filter(function(ie){return ie}),E.values]:[],V=Y[0],ne=Y[1],pe=E.trans._cache;if(y(V)){B.addKeys(V);var q=U==="delete"||V.length===ne.length?Ns(V,pe):null;q||R.addKeys(V),(q||ne)&&Rc(F,l,q,ne)}else if(V){var he={from:(A=V.lower)!==null&&A!==void 0?A:t.MIN_KEY,to:(O=V.upper)!==null&&O!==void 0?O:t.MAX_KEY};R.add(he),B.add(he)}else B.add(i),R.add(i),l.indexes.forEach(function(ie){return F(ie.name).add(i)});return s.mutate(E).then(function(ie){return V&&(E.type==="add"||E.type==="put")&&(B.addKeys(ie.results),x&&x.forEach(function(Ae){for(var ee=E.values.map(function(Tt){return Ae.extractKey(Tt)}),qe=Ae.keyPath.findIndex(function(Tt){return Tt===d.keyPath}),dt=0,Xt=ie.results.length;dt<Xt;++dt)ee[dt][qe]=ie.results[dt];F(Ae.name).addKeys(ee)})),C.mutatedParts=Mi(C.mutatedParts||{},N),ie})}}),I=function(E){var A,O,C=E.query,N=C.index,F=C.range;return[N,new ft((A=F.lower)!==null&&A!==void 0?A:t.MIN_KEY,(O=F.upper)!==null&&O!==void 0?O:t.MAX_KEY)]},j={get:function(E){return[d,new ft(E.key)]},getMany:function(E){return[d,new ft().addKeys(E.keys)]},count:I,query:I,openCursor:I};return m(j).forEach(function(E){b[E]=function(A){var O=$.subscr,C=!!O,N=Fs($,s)&&Ks(E,A),F=N?A.obsSet={}:O;if(C){var B=function(q){var he="idb://".concat(n,"/").concat(o,"/").concat(q);return F[he]||(F[he]=new ft)},R=B(""),U=B(":dels"),Y=j[E](A),V=Y[0],ne=Y[1];if(E==="query"&&V.isPrimaryKey&&!A.values?U.add(ne):B(V.name||"").add(ne),!V.isPrimaryKey)if(E==="count")U.add(i);else{var pe=E==="query"&&g&&A.values&&s.query(c(c({},A),{values:!1}));return s[E].apply(this,arguments).then(function(q){if(E==="query"){if(g&&A.values)return pe.then(function(ee){var qe=ee.result;return R.addKeys(qe),q});var he=A.values?q.result.map(p):q.result;A.values?R.addKeys(he):U.addKeys(he)}else if(E==="openCursor"){var ie=q,Ae=A.values;return ie&&Object.create(ie,{key:{get:function(){return U.addKey(ie.primaryKey),ie.key}},primaryKey:{get:function(){var ee=ie.primaryKey;return U.addKey(ee),ee}},value:{get:function(){return Ae&&R.addKey(ie.primaryKey),ie.value}}})}return q})}}return s[E].apply(this,arguments)}}),b}})}};function Rc(t,n,i,o){function s(l){var d=t(l.name||"");function h(g){return g!=null?l.extractKey(g):null}var p=function(g){return l.multiEntry&&y(g)?g.forEach(function(x){return d.addKey(x)}):d.addKey(g)};(i||o).forEach(function(g,x){var b=i&&h(i[x]),I=o&&h(o[x]);ke(b,I)!==0&&(b!=null&&p(b),I!=null&&p(I))})}n.indexes.forEach(s)}function Bs(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(i.numFailures===o)return null;var s=c({},n);return y(s.keys)&&(s.keys=s.keys.filter(function(l,d){return!(d in i.failures)})),"values"in s&&y(s.values)&&(s.values=s.values.filter(function(l,d){return!(d in i.failures)})),s}function Mc(t,n){return n.lower===void 0?!0:n.lowerOpen?ke(t,n.lower)>0:ke(t,n.lower)>=0}function Lc(t,n){return n.upper===void 0?!0:n.upperOpen?ke(t,n.upper)<0:ke(t,n.upper)<=0}function oo(t,n){return Mc(t,n)&&Lc(t,n)}function js(t,n,i,o,s,l){if(!i||i.length===0)return t;var d=n.query.index,h=d.multiEntry,p=n.query.range,g=o.schema.primaryKey,x=g.extractKey,b=d.extractKey,I=(d.lowLevelIndex||d).extractKey,j=i.reduce(function(E,A){var O=E,C=[];if(A.type==="add"||A.type==="put")for(var N=new ft,F=A.values.length-1;F>=0;--F){var B=A.values[F],R=x(B);if(!N.hasKey(R)){var U=b(B);(h&&y(U)?U.some(function(q){return oo(q,p)}):oo(U,p))&&(N.addKey(R),C.push(B))}}switch(A.type){case"add":{var Y=new ft().addKeys(n.values?E.map(function(q){return x(q)}):E);O=E.concat(n.values?C.filter(function(q){var he=x(q);return Y.hasKey(he)?!1:(Y.addKey(he),!0)}):C.map(function(q){return x(q)}).filter(function(q){return Y.hasKey(q)?!1:(Y.addKey(q),!0)}));break}case"put":{var V=new ft().addKeys(A.values.map(function(q){return x(q)}));O=E.filter(function(q){return!V.hasKey(n.values?x(q):q)}).concat(n.values?C:C.map(function(q){return x(q)}));break}case"delete":var ne=new ft().addKeys(A.keys);O=E.filter(function(q){return!ne.hasKey(n.values?x(q):q)});break;case"deleteRange":var pe=A.range;O=E.filter(function(q){return!oo(x(q),pe)});break}return O},t);return j===t?t:(j.sort(function(E,A){return ke(I(E),I(A))||ke(x(E),x(A))}),n.limit&&n.limit<1/0&&(j.length>n.limit?j.length=n.limit:t.length===n.limit&&j.length<n.limit&&(s.dirty=!0)),l?Object.freeze(j):j)}function zs(t,n){return ke(t.lower,n.lower)===0&&ke(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function Nc(t,n,i,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var s=ke(t,n);if(s===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return s}function Fc(t,n,i,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var s=ke(t,n);if(s===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return s}function Kc(t,n){return Nc(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&Fc(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function Bc(t,n,i,o){var s=Gn["idb://".concat(t,"/").concat(n)];if(!s)return[];var l=s.queries[i];if(!l)return[null,!1,s,null];var d=o.query?o.query.index.name:null,h=l[d||""];if(!h)return[null,!1,s,null];switch(i){case"query":var p=h.find(function(b){return b.req.limit===o.limit&&b.req.values===o.values&&zs(b.req.query.range,o.query.range)});if(p)return[p,!0,s,h];var g=h.find(function(b){var I="limit"in b.req?b.req.limit:1/0;return I>=o.limit&&(o.values?b.req.values:!0)&&Kc(b.req.query.range,o.query.range)});return[g,!1,s,h];case"count":var x=h.find(function(b){return zs(b.req.query.range,o.query.range)});return[x,!!x,s,h]}}function jc(t,n,i,o){t.subscribers.add(i),o.addEventListener("abort",function(){t.subscribers.delete(i),t.subscribers.size===0&&zc(t,n)})}function zc(t,n){setTimeout(function(){t.subscribers.size===0&&Ye(n,t)},3e3)}var Hc={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,i=c(c({},t),{transaction:function(o,s,l){var d=t.transaction(o,s,l);if(s==="readwrite"){var h=new AbortController,p=h.signal,g=function(x){return function(){if(h.abort(),s==="readwrite"){for(var b=new Set,I=0,j=o;I<j.length;I++){var E=j[I],A=Gn["idb://".concat(n,"/").concat(E)];if(A){var O=t.table(E),C=A.optimisticOps.filter(function(Ae){return Ae.trans===d});if(d._explicit&&x&&d.mutatedParts)for(var N=0,F=Object.values(A.queries.query);N<F.length;N++)for(var B=F[N],R=0,U=B.slice();R<U.length;R++){var Y=U[R];Ja(Y.obsSet,d.mutatedParts)&&(Ye(B,Y),Y.subscribers.forEach(function(Ae){return b.add(Ae)}))}else if(C.length>0){A.optimisticOps=A.optimisticOps.filter(function(Ae){return Ae.trans!==d});for(var V=0,ne=Object.values(A.queries.query);V<ne.length;V++)for(var B=ne[V],pe=0,q=B.slice();pe<q.length;pe++){var Y=q[pe];if(Y.res!=null&&d.mutatedParts)if(x&&!Y.dirty){var he=Object.isFrozen(Y.res),ie=js(Y.res,Y.req,C,O,Y,he);Y.dirty?(Ye(B,Y),Y.subscribers.forEach(function(qe){return b.add(qe)})):ie!==Y.res&&(Y.res=ie,Y.promise=G.resolve({result:ie}))}else Y.dirty&&Ye(B,Y),Y.subscribers.forEach(function(qe){return b.add(qe)})}}}}b.forEach(function(Ae){return Ae()})}}};d.addEventListener("abort",g(!1),{signal:p}),d.addEventListener("error",g(!1),{signal:p}),d.addEventListener("complete",g(!0),{signal:p})}return d},table:function(o){var s=t.table(o),l=s.schema.primaryKey,d=c(c({},s),{mutate:function(h){var p=$.trans;if(l.outbound||p.db._options.cache==="disabled"||p.explicit||p.idbtrans.mode!=="readwrite")return s.mutate(h);var g=Gn["idb://".concat(n,"/").concat(o)];if(!g)return s.mutate(h);var x=s.mutate(h);return(h.type==="add"||h.type==="put")&&(h.values.length>=50||ao(l,h).some(function(b){return b==null}))?x.then(function(b){var I=c(c({},h),{values:h.values.map(function(E,A){var O;if(b.failures[A])return E;var C=!((O=l.keyPath)===null||O===void 0)&&O.includes(".")?Pe(E):c({},E);return ge(C,l.keyPath,b.results[A]),C})}),j=Bs(g,I,b);g.optimisticOps.push(j),queueMicrotask(function(){return h.mutatedParts&&Li(h.mutatedParts)})}):(g.optimisticOps.push(h),h.mutatedParts&&Li(h.mutatedParts),x.then(function(b){if(b.numFailures>0){Ye(g.optimisticOps,h);var I=Bs(g,h,b);I&&g.optimisticOps.push(I),h.mutatedParts&&Li(h.mutatedParts)}}),x.catch(function(){Ye(g.optimisticOps,h),h.mutatedParts&&Li(h.mutatedParts)})),x},query:function(h){var p;if(!Fs($,s)||!Ks("query",h))return s.query(h);var g=((p=$.trans)===null||p===void 0?void 0:p.db._options.cache)==="immutable",x=$,b=x.requery,I=x.signal,j=Bc(n,o,"query",h),E=j[0],A=j[1],O=j[2],C=j[3];if(E&&A)E.obsSet=h.obsSet;else{var N=s.query(h).then(function(F){var B=F.result;if(E&&(E.res=B),g){for(var R=0,U=B.length;R<U;++R)Object.freeze(B[R]);Object.freeze(B)}else F.result=Pe(B);return F}).catch(function(F){return C&&E&&Ye(C,E),Promise.reject(F)});E={obsSet:h.obsSet,promise:N,subscribers:new Set,type:"query",req:h,dirty:!1},C?C.push(E):(C=[E],O||(O=Gn["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),O.queries.query[h.query.index.name||""]=C)}return jc(E,C,b,I),E.promise.then(function(F){return{result:js(F.result,h,O?.optimisticOps,s,E,g)}})}});return d}});return i}};function Fi(t,n){return new Proxy(t,{get:function(i,o,s){return o==="db"?n:Reflect.get(i,o,s)}})}var cn=(function(){function t(n,i){var o=this;this._middlewares={},this.verno=0;var s=t.dependencies;this._options=i=c({addons:t.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var l=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ve,dbReadyPromise:null,cancelOpen:ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};d.dbReadyPromise=new G(function(p){d.dbReadyResolve=p}),d.openCanceller=new G(function(p,g){d.cancelOpen=g}),this._state=d,this.name=n,this.on=Fr(this,"populate","blocked","versionchange","close",{ready:[ka,ve]}),this.once=function(p,g){var x=function(){for(var b=[],I=0;I<arguments.length;I++)b[I]=arguments[I];o.on(p).unsubscribe(x),g.apply(o,b)};return o.on(p,x)},this.on.ready.subscribe=ae(this.on.ready.subscribe,function(p){return function(g,x){t.vip(function(){var b=o._state;if(b.openComplete)b.dbOpenError||G.resolve().then(g),x&&p(g);else if(b.onReadyBeingFired)b.onReadyBeingFired.push(g),x&&p(g);else{p(g);var I=o;x||p(function j(){I.on.ready.unsubscribe(g),I.on.ready.unsubscribe(j)})}})}}),this.Collection=Ql(this),this.Table=Yl(this),this.Transaction=ic(this),this.Version=bc(this),this.WhereClause=nc(this),this.on("versionchange",function(p){p.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=zr(i.IDBKeyRange),this._createTransaction=function(p,g,x,b){return new o.Transaction(p,g,x,o._options.chromeTransactionDurability,b)},this._fireOnBlocked=function(p){o.on("blocked").fire(p),cr.filter(function(g){return g.name===o.name&&g!==o&&!g._state.vcFired}).map(function(g){return g.on("versionchange").fire(p)})},this.use(Cc),this.use(Hc),this.use(Pc),this.use(Sc),this.use(Oc);var h=new Proxy(this,{get:function(p,g,x){if(g==="_vip")return!0;if(g==="table")return function(I){return Fi(o.table(I),h)};var b=Reflect.get(p,g,x);return b instanceof ws?Fi(b,h):g==="tables"?b.map(function(I){return Fi(I,h)}):g==="_createTransaction"?function(){var I=b.apply(this,arguments);return Fi(I,h)}:b}});this.vip=h,l.forEach(function(p){return p(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new z.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,o=i.filter(function(s){return s._cfg.version===n})[0];return o||(o=new this.Version(n),i.push(o),i.sort(fc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||$.letThrough||this._vip)?n():new G(function(o,s){if(i._state.openComplete)return s(new z.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){s(new z.DatabaseClosed);return}i.open().catch(ve)}i._state.dbReadyPromise.then(o,s)}).then(n)},t.prototype.use=function(n){var i=n.stack,o=n.create,s=n.level,l=n.name;l&&this.unuse({stack:i,name:l});var d=this._middlewares[i]||(this._middlewares[i]=[]);return d.push({stack:i,create:o,level:s??10,name:l}),d.sort(function(h,p){return h.level-p.level}),this},t.prototype.unuse=function(n){var i=n.stack,o=n.name,s=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(l){return s?l.create!==s:o?l.name!==o:!1})),this},t.prototype.open=function(){var n=this;return Un(gn,function(){return kc(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=cr.indexOf(this);if(i>=0&&cr.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new G(function(o){n.dbReadyResolve=o}),n.openCanceller=new G(function(o,s){n.cancelOpen=s}))},t.prototype.close=function(n){var i=n===void 0?{disableAutoOpen:!0}:n,o=i.disableAutoOpen,s=this._state;o?(s.isBeingOpened&&s.cancelOpen(new z.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new z.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},t.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",s=this._state;return new G(function(l,d){var h=function(){i.close(n);var p=i._deps.indexedDB.deleteDatabase(i.name);p.onsuccess=Ve(function(){xc(i._deps,i.name),l()}),p.onerror=$t(d),p.onblocked=i._fireOnBlocked};if(o)throw new z.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(h):h()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return m(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=Dc.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,i,o){var s=this,l=$.trans;(!l||l.db!==this||n.indexOf("!")!==-1)&&(l=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var h,p;try{if(p=i.map(function(x){var b=x instanceof s.Table?x.name:x;if(typeof b!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),n=="r"||n===Fa)h=Fa;else if(n=="rw"||n==Ka)h=Ka;else throw new z.InvalidArgument("Invalid transaction mode: "+n);if(l){if(l.mode===Fa&&h===Ka)if(d)l=null;else throw new z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l&&p.forEach(function(x){if(l&&l.storeNames.indexOf(x)===-1)if(d)l=null;else throw new z.SubTransaction("Table "+x+" not included in parent transaction.")}),d&&l&&!l.active&&(l=null)}}catch(x){return l?l._promise(null,function(b,I){I(x)}):Ze(x)}var g=Ls.bind(null,this,h,p,l,o);return l?l._promise(h,g,"lock"):$.trans?Un($.transless,function(){return s._whenReady(g)}):this._whenReady(g)},t.prototype.table=function(n){if(!_(this._allTables,n))throw new z.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),Uc=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Vc=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,i,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:i,complete:o}:n)},t.prototype[Uc]=function(){return this},t})(),Ki;try{Ki={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{Ki={indexedDB:null,IDBKeyRange:null}}function Hs(t){var n=!1,i,o=new Vc(function(s){var l=Z(t);function d(C){var N=sr();try{l&&lr();var F=_n(t,C);return l&&(F=F.finally(bn)),F}finally{N&&ur()}}var h=!1,p,g={},x={},b={get closed(){return h},unsubscribe:function(){h||(h=!0,p&&p.abort(),I&&xn.storagemutated.unsubscribe(A))}};s.start&&s.start(b);var I=!1,j=function(){return Ma(O)};function E(){return Ja(x,g)}var A=function(C){Mi(g,C),E()&&j()},O=function(){if(!(h||!Ki.indexedDB)){g={};var C={};p&&p.abort(),p=new AbortController;var N={subscr:C,signal:p.signal,requery:j,querier:t,trans:null},F=d(N);Promise.resolve(F).then(function(B){n=!0,i=B,!(h||N.signal.aborted)&&(g={},x=C,!He(x)&&!I&&(xn(jr,A),I=!0),Ma(function(){return!h&&s.next&&s.next(B)}))},function(B){n=!1,["DatabaseClosedError","AbortError"].includes(B?.name)||h||Ma(function(){h||s.error&&s.error(B)})})}};return setTimeout(j,0),b});return o.hasValue=function(){return n},o.getValue=function(){return i},o}var Yn=cn;k(Yn,c(c({},Rt),{delete:function(t){var n=new Yn(t,{addons:[]});return n.delete()},exists:function(t){return new Yn(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return wc(Yn.dependencies).then(t)}catch{return Ze(new z.MissingAPI)}},defineClass:function(){function t(n){D(this,n)}return t},ignoreTransaction:function(t){return $.trans?Un($.transless,t):t()},vip:Qa,async:function(t){return function(){try{var n=ro(t.apply(this,arguments));return!n||typeof n.then!="function"?G.resolve(n):n}catch(i){return Ze(i)}}},spawn:function(t,n,i){try{var o=ro(t.apply(i,n||[]));return!o||typeof o.then!="function"?G.resolve(o):o}catch(s){return Ze(s)}},currentTransaction:{get:function(){return $.trans||null}},waitFor:function(t,n){var i=G.resolve(typeof t=="function"?Yn.ignoreTransaction(t):t).timeout(n||6e4);return $.trans?$.trans.waitFor(i):i},Promise:G,debug:{get:function(){return Qt},set:function(t){as(t)}},derive:L,extend:D,props:k,override:ae,Events:Fr,on:xn,liveQuery:Hs,extendObservabilitySet:Mi,getByKeyPath:we,setByKeyPath:ge,delByKeyPath:Te,shallowClone:Oe,deepClone:Pe,getObjectDiff:io,cmp:ke,asap:_e,minKey:Na,addons:[],connections:cr,errnames:Be,dependencies:Ki,cache:Gn,semVer:vs,version:vs.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,i*2)})})),Yn.maxKey=zr(Yn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xn(jr,function(t){if(!Tn){var n;n=new CustomEvent(za,{detail:t}),Tn=!0,dispatchEvent(n),Tn=!1}}),addEventListener(za,function(t){var n=t.detail;Tn||so(n)}));function so(t){var n=Tn;try{Tn=!0,xn.storagemutated.fire(t),no(t,!0)}finally{Tn=n}}var Tn=!1,kn,uo=function(){};typeof BroadcastChannel<"u"&&(uo=function(){kn=new BroadcastChannel(za),kn.onmessage=function(t){return t.data&&so(t.data)}},uo(),typeof kn.unref=="function"&&kn.unref(),xn(jr,function(t){Tn||kn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!cn.disableBfCache&&t.persisted){Qt&&console.debug("Dexie: handling persisted pagehide"),kn?.close();for(var n=0,i=cr;n<i.length;n++){var o=i[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!cn.disableBfCache&&t.persisted&&(Qt&&console.debug("Dexie: handling persisted pageshow"),uo(),so({all:new ft(-1/0,[[]])}))}));function Wc(t){return new Nr({add:t})}function Gc(t){return new Nr({remove:t})}function Yc(t,n){return new Nr({replacePrefix:[t,n]})}G.rejectionMapper=ze,as(Qt);var qc=Object.freeze({__proto__:null,Dexie:cn,liveQuery:Hs,Entity:ms,cmp:ke,PropModification:Nr,replacePrefix:Yc,add:Wc,remove:Gc,default:cn,RangeSet:ft,mergeRanges:Vr,rangesOverlap:Cs});return c(cn,qc,{default:cn}),cn}))})(Wi)),Wi.exports}var Rd=Pd();const Ao=Id(Rd),ru=Symbol.for("Dexie"),na=globalThis[ru]||(globalThis[ru]=Ao);if(Ao.semVer!==na.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ao.semVer} and ${na.semVer}`);const{liveQuery:ra,mergeRanges:jv,rangesOverlap:zv,RangeSet:Hv,cmp:Uv,Entity:Vv,PropModification:Wv,replacePrefix:Gv,add:Yv,remove:qv,DexieYProvider:Zv}=na,je=new na("TaskPlannerDB");je.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});je.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));je.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));async function fl(){return await je.lists.orderBy("order").toArray()}async function Md(e){const r=e.trim();if(r==="")throw new Error("List name cannot be empty or whitespace-only");const a=await je.lists.orderBy("order").toArray(),c=(a.length>0?Math.max(...a.map(v=>v.order)):-1)+1;return await je.lists.add({name:r,order:c})}async function Ld(){const e=await je.lists.orderBy("order").toArray(),a=(e.length>0?Math.max(...e.map(c=>c.order)):-1)+1;return await je.lists.add({name:null,order:a})}async function Nd(e,r){const a=r.trim();if(a==="")throw new Error("List name cannot be empty");return await je.lists.update(e,{name:a})}async function Fd(e){return await je.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function Kd(){return(await je.tasks.where("status").equals("archived").toArray()).sort((r,a)=>{const u=r.archivedAt||0,c=a.archivedAt||0;return c!==u?c-u:(a.order||0)-(r.order||0)})}async function dl(e,r){let a=e;e===null&&(a=await Ld());const u=await je.tasks.where("listId").equals(a).filter(y=>y.status!=="archived").sortBy("order"),f=(u.length>0?Math.max(...u.map(y=>y.order)):-1)+1,v=r===""?"":r.trim();return await je.tasks.add({text:v,listId:a,order:f,status:"unchecked"})}async function Bd(e,r){const a=r===""?"":r.trim();return await je.tasks.update(e,{text:a})}async function iu(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const a={status:r};return r==="archived"?a.archivedAt=Date.now():r!=="archived"&&(a.archivedAt=null),await je.tasks.update(e,a)}async function jd(e){const r=await je.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const a=await je.tasks.where("listId").equals(r.listId).filter(f=>f.status!=="archived"&&f.id!==e).sortBy("order"),c=(a.length>0?Math.max(...a.map(f=>f.order)):-1)+1;return await je.tasks.update(e,{status:"checked",order:c})}async function zd(e,r){if(!r||r.length===0)return;const a=r.map(v=>v.id);if((await je.tasks.bulkGet(a)).filter(v=>!v||v.listId!==e).length>0)throw new Error(`Cannot update order: some tasks do not belong to list ${e}`);const f=r.map((v,m)=>({id:v.id,order:m}));await je.transaction("rw",je.tasks,async()=>{for(const v of f)await je.tasks.update(v.id,{order:v.order})})}async function Hd(e){await je.tasks.delete(e)}function au(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,u)}return a}function ia(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?au(Object(a),!0).forEach(function(u){kr(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):au(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function pr(e){"@babel/helpers - typeof";return pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pr(e)}function kr(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Ud(e,r){if(e==null)return{};var a={},u=Object.keys(e),c,f;for(f=0;f<u.length;f++)c=u[f],!(r.indexOf(c)>=0)&&(a[c]=e[c]);return a}function Vd(e,r){if(e==null)return{};var a=Ud(e,r),u,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)u=f[c],!(r.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(a[u]=e[u])}return a}function Wd(e,r){return Yd(e)||Zd(e,r)||Jo(e,r)||$d()}function Vt(e){return Gd(e)||qd(e)||Jo(e)||Qd()}function Gd(e){if(Array.isArray(e))return So(e)}function Yd(e){if(Array.isArray(e))return e}function qd(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zd(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var u=[],c=!0,f=!1,v,m;try{for(a=a.call(e);!(c=(v=a.next()).done)&&(u.push(v.value),!(r&&u.length===r));c=!0);}catch(y){f=!0,m=y}finally{try{!c&&a.return!=null&&a.return()}finally{if(f)throw m}}return u}}function Jo(e,r){if(e){if(typeof e=="string")return So(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return So(e,r)}}function So(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=e[a];return u}function Qd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fi(e,r){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Jo(e))||r){a&&(e=a);var u=0,c=function(){};return{s:c,n:function(){return u>=e.length?{done:!0}:{done:!1,value:e[u++]}},e:function(y){throw y},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,v=!1,m;return{s:function(){a=a.call(e)},n:function(){var y=a.next();return f=y.done,y},e:function(y){v=!0,m=y},f:function(){try{!f&&a.return!=null&&a.return()}finally{if(v)throw m}}}}var Xd="finalize",Jd="consider";function Dr(e,r,a){e.dispatchEvent(new CustomEvent(Xd,{detail:{items:r,info:a}}))}function Kn(e,r,a){e.dispatchEvent(new CustomEvent(Jd,{detail:{items:r,info:a}}))}var ya="draggedEntered",di="draggedLeft",ma="draggedOverIndex",es="draggedLeftDocument",aa={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function eh(e,r,a){e.dispatchEvent(new CustomEvent(ya,{detail:{indexObj:r,draggedEl:a}}))}function th(e,r,a){e.dispatchEvent(new CustomEvent(di,{detail:{draggedEl:r,type:aa.LEFT_FOR_ANOTHER,theOtherDz:a}}))}function nh(e,r){e.dispatchEvent(new CustomEvent(di,{detail:{draggedEl:r,type:aa.OUTSIDE_OF_ANY}}))}function rh(e,r,a){e.dispatchEvent(new CustomEvent(ma,{detail:{indexObj:r,draggedEl:a}}))}function ih(e){window.dispatchEvent(new CustomEvent(es,{detail:{draggedEl:e}}))}var bt={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:ya,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:ma,DRAGGED_LEFT:di,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Ct={POINTER:"pointer",KEYBOARD:"keyboard"},ga="isDndShadowItem",_a="data-is-dnd-shadow-item-internal",ah="data-is-dnd-shadow-item-hint",hl="id:dnd-shadow-placeholder-0000",oh="dnd-action-dragged-el",tt="id",Oo=0;function vl(){Oo++}function pl(){if(Oo===0)throw new Error("Bug! trying to decrement when there are no dropzones");Oo--}var ts=typeof window>"u";function Io(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,u=r?lh(e):e.getBoundingClientRect(),c=getComputedStyle(e),f=c.transform;if(f){var v,m,y,D;if(f.startsWith("matrix3d("))a=f.slice(9,-1).split(/, /),v=+a[0],m=+a[5],y=+a[12],D=+a[13];else if(f.startsWith("matrix("))a=f.slice(7,-1).split(/, /),v=+a[0],m=+a[3],y=+a[4],D=+a[5];else return u;var w=c.transformOrigin,S=u.x-y-(1-v)*parseFloat(w),_=u.y-D-(1-m)*parseFloat(w.slice(w.indexOf(" ")+1)),k=v?u.width/v:e.offsetWidth,M=m?u.height/m:e.offsetHeight;return{x:S,y:_,width:k,height:M,top:_,right:S+k,bottom:_+M,left:S}}else return u}function yl(e){var r=Io(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function ml(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function gl(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function sh(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function ba(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function ii(e){return gl(ml(e))}function ou(e,r){var a=ii(e),u=yl(r);return ba(a,u)}function su(e,r){var a=ii(e),u=ii(r);return sh(a,u)}function uh(e){var r=ml(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function lh(e){for(var r=e.getBoundingClientRect(),a={top:r.top,bottom:r.bottom,left:r.left,right:r.right},u=!1,c=!1,f=e.parentElement;f&&f!==document.body;){var v=window.getComputedStyle(f),m=v.overflowY,y=v.overflowX,D=m==="scroll"||m==="auto",w=y==="scroll"||y==="auto";if(D||w){var S=f.getBoundingClientRect();if(D){var _=Math.max(a.top,S.top),k=Math.min(a.bottom,S.bottom);(_!==a.top||k!==a.bottom)&&(u=!0),a.top=_,a.bottom=k}if(w){var M=Math.max(a.left,S.left),K=Math.min(a.right,S.right);(M!==a.left||K!==a.right)&&(c=!0),a.left=M,a.right=K}}f=f.parentElement}return u||c?{top:a.top,bottom:a.bottom,left:a.left,right:a.right,width:Math.max(0,a.right-a.left),height:Math.max(0,a.bottom-a.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var gr;function ns(){gr=new Map}ns();function ch(e){var r=Array.from(e.children).findIndex(function(a){return a.getAttribute(_a)});if(r>=0)return gr.has(e)||gr.set(e,new Map),gr.get(e).set(r,yl(e.children[r])),r}function fh(e,r){if(!ou(e,r))return null;var a=r.children;if(a.length===0)return{index:0,isProximityBased:!0};for(var u=ch(r),c=0;c<a.length;c++)if(ou(e,a[c])){var f=gr.has(r)&&gr.get(r).get(c);return f&&!ba(ii(e),f)?{index:u,isProximityBased:!1}:{index:c,isProximityBased:!1}}for(var v=Number.MAX_VALUE,m=void 0,y=0;y<a.length;y++){var D=su(e,a[y]);D<v&&(v=D,m=y)}if(a.length>0){var w=a.length,S=a[w-1],_=S.cloneNode(!1);_.style.visibility="hidden",_.style.pointerEvents="none",r.appendChild(_);var k=su(e,_);k<v&&(m=w),r.removeChild(_)}return{index:m,isProximityBased:!0}}function Gr(e){return JSON.stringify(e,null,2)}function oa(e){if(!e)throw new Error("cannot get depth of a falsy node");return _l(e,0)}function _l(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?_l(e.parentElement,r+1):r-1}function dh(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var a in e)if(!{}.hasOwnProperty.call(r,a)||r[a]!==e[a])return!1;return!0}function hh(e,r){if(e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==r[a])return!1;return!0}var vh=200,uu=10,Co;function ph(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vh,u=arguments.length>3?arguments[3]:void 0,c,f,v=!1,m,y=Array.from(r).sort(function(w,S){return oa(S)-oa(w)});function D(){var w=ii(e),S=u.multiScrollIfNeeded();if(!S&&m&&Math.abs(m.x-w.x)<uu&&Math.abs(m.y-w.y)<uu){Co=window.setTimeout(D,a);return}if(uh(e)){ih(e);return}m=w;var _=!1,k=fi(y),M;try{for(k.s();!(M=k.n()).done;){var K=M.value;S&&ns();var L=fh(e,K);if(L!==null){var H=L.index;_=!0,K!==c?(c&&th(c,e,K),eh(K,L,e),c=K):H!==f&&(rh(K,L,e),f=H);break}}}catch(re){k.e(re)}finally{k.f()}!_&&v&&c?(nh(c,e),c=void 0,f=void 0,v=!1):v=!0,Co=window.setTimeout(D,a)}D()}function yh(){clearTimeout(Co),ns()}var Yr=30;function mh(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function a(f){var v=e,m=v.directionObj,y=v.stepPx;m&&(f.scrollBy(m.x*y,m.y*y),window.requestAnimationFrame(function(){return a(f)}))}function u(f){return Yr-f}function c(f,v){if(!v)return!1;var m=gh(f,v),y=!!e.directionObj;if(m===null)return y&&r(),!1;var D=!1,w=!1;return v.scrollHeight>v.clientHeight&&(m.bottom<Yr?(D=!0,e.directionObj={x:0,y:1},e.stepPx=u(m.bottom)):m.top<Yr&&(D=!0,e.directionObj={x:0,y:-1},e.stepPx=u(m.top)),!y&&D)||v.scrollWidth>v.clientWidth&&(m.right<Yr?(w=!0,e.directionObj={x:1,y:0},e.stepPx=u(m.right)):m.left<Yr&&(w=!0,e.directionObj={x:-1,y:0},e.stepPx=u(m.left)),!y&&w)?(a(v),!0):(r(),!1)}return{scrollIfNeeded:c,resetScrolling:r}}function gh(e,r){var a=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return ba(e,a)?{top:e.y-a.top,bottom:a.bottom-e.y,left:e.x-a.left,right:a.right-e.x}:null}function _h(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=wh(e),u=Array.from(a).sort(function(y,D){return oa(D)-oa(y)}),c=mh(),f=c.scrollIfNeeded,v=c.resetScrolling;function m(){var y=r();if(!y||!u)return!1;for(var D=u.filter(function(_){return ba(y,_.getBoundingClientRect())||_===document.scrollingElement}),w=0;w<D.length;w++){var S=f(y,D[w]);if(S)return!0}return!1}return{multiScrollIfNeeded:a.size>0?m:function(){return!1},destroy:function(){return v()}}}function bh(e){if(!e)return[];for(var r=[],a=e;a;){var u=window.getComputedStyle(a),c=u.overflow;c.split(" ").some(function(f){return f.includes("auto")||f.includes("scroll")})&&r.push(a),a=a.parentElement}return r}function wh(e){var r=new Set,a=fi(e),u;try{for(a.s();!(u=a.n()).done;){var c=u.value;bh(c).forEach(function(f){return r.add(f)})}}catch(f){a.e(f)}finally{a.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function Eh(e){var r=e.cloneNode(!0),a=[],u=e.tagName==="SELECT",c=u?[e]:Vt(e.querySelectorAll("select")),f=fi(c),v;try{for(f.s();!(v=f.n()).done;){var m=v.value;a.push(m.value)}}catch(ce){f.e(ce)}finally{f.f()}if(c.length>0)for(var y=u?[r]:Vt(r.querySelectorAll("select")),D=0;D<y.length;D++){var w=y[D],S=a[D],_=w.querySelector('option[value="'.concat(S,'"'));_&&_.setAttribute("selected",!0)}var k=e.tagName==="CANVAS",M=k?[e]:Vt(e.querySelectorAll("canvas"));if(M.length>0)for(var K=k?[r]:Vt(r.querySelectorAll("canvas")),L=0;L<K.length;L++){var H=M[L],re=K[L];re.width=H.width,re.height=H.height,H.width>0&&H.height>0&&re.getContext("2d").drawImage(H,0,0)}return r}var ai=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),xh=kr({},ai.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function bl(e){if(!ai[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(ai)));return xh[e]}var Th=.2;function Zn(e){return"".concat(e," ").concat(Th,"s ease")}function kh(e,r){var a=e.getBoundingClientRect(),u=Eh(e);wl(e,u),u.id=oh,u.style.position="fixed";var c=a.top,f=a.left;if(u.style.top="".concat(c,"px"),u.style.left="".concat(f,"px"),r){var v=gl(a);c-=v.y-r.y,f-=v.x-r.x,window.setTimeout(function(){u.style.top="".concat(c,"px"),u.style.left="".concat(f,"px")},0)}return u.style.margin="0",u.style.boxSizing="border-box",u.style.height="".concat(a.height,"px"),u.style.width="".concat(a.width,"px"),u.style.transition="".concat(Zn("top"),", ").concat(Zn("left"),", ").concat(Zn("background-color"),", ").concat(Zn("opacity"),", ").concat(Zn("color")," "),window.setTimeout(function(){return u.style.transition+=", ".concat(Zn("width"),", ").concat(Zn("height"))},0),u.style.zIndex="9999",u.style.cursor="grabbing",u}function Dh(e){e.style.cursor="grab"}function Ah(e,r,a,u){wl(r,e);var c=r.getBoundingClientRect(),f=e.getBoundingClientRect(),v=c.width-f.width,m=c.height-f.height;if(v||m){var y={left:(a-f.left)/f.width,top:(u-f.top)/f.height};bl(ai.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(c.height,"px"),e.style.width="".concat(c.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-y.left*v,"px"),e.style.top="".concat(parseFloat(e.style.top)-y.top*m,"px")}}function wl(e,r){var a=window.getComputedStyle(e);Array.from(a).filter(function(u){return u.startsWith("background")||u.startsWith("padding")||u.startsWith("font")||u.startsWith("text")||u.startsWith("align")||u.startsWith("justify")||u.startsWith("display")||u.startsWith("flex")||u.startsWith("border")||u==="opacity"||u==="color"||u==="list-style-type"||bl(ai.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(u==="width"||u==="height")}).forEach(function(u){return r.style.setProperty(u,a.getPropertyValue(u),a.getPropertyPriority(u))})}function Sh(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function El(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function Oh(e){e.style.visibility="hidden",e.setAttribute(_a,"true")}function Ih(e){e.style.visibility="",e.removeAttribute(_a)}function Gi(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(u){var c=r(u);Object.keys(c).forEach(function(f){u.style[f]=c[f]}),a(u).forEach(function(f){return u.classList.add(f)})})}function sa(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(u){var c=r(u);Object.keys(c).forEach(function(f){u.style[f]=""}),a(u).forEach(function(f){return u.classList.contains(f)&&u.classList.remove(f)})})}function Ch(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var a=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=a}}var Ph="--any--",Rh=100,Mh=20,zi=3,Lh=80,lu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},cu="data-is-dnd-original-dragged-item",kt,ot,At,wa,We,Ea,Mn,lt,nn,vt,An=!1,rs=!1,is,hi=!1,Yi=[],Xr,rn,Zr=!1,Yt=new Map,Qe=new Map,yo=new WeakMap;function Nh(e,r){Yt.has(r)||Yt.set(r,new Set),Yt.get(r).has(e)||(Yt.get(r).add(e),vl())}function fu(e,r){Yt.get(r).delete(e),pl(),Yt.get(r).size===0&&Yt.delete(r)}function Fh(){var e=Yt.get(wa),r=fi(e),a;try{for(r.s();!(a=r.n()).done;){var u=a.value;u.addEventListener(ya,xl),u.addEventListener(di,Tl),u.addEventListener(ma,kl)}}catch(v){r.e(v)}finally{r.f()}window.addEventListener(es,Ar);var c=Math.max.apply(Math,Vt(Array.from(e.keys()).map(function(v){return Qe.get(v).dropAnimationDurationMs}))),f=c===0?Mh:Math.max(c,Rh);Xr=_h(e,function(){return vt}),ph(ot,e,f*1.07,Xr)}function Kh(){var e=Yt.get(wa),r=fi(e),a;try{for(r.s();!(a=r.n()).done;){var u=a.value;u.removeEventListener(ya,xl),u.removeEventListener(di,Tl),u.removeEventListener(ma,kl)}}catch(c){r.e(c)}finally{r.f()}window.removeEventListener(es,Ar),Xr&&(Xr.destroy(),Xr=void 0),yh()}function xa(e){return e.findIndex(function(r){return!!r[ga]})}function Bh(e){var r;return ia(ia({},e),{},(r={},kr(r,ga,!0),kr(r,tt,hl),r))}function xl(e){var r=Qe.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==We)){if(hi=!1,a=a.filter(function(m){return m[tt]!==Mn[tt]&&m[tt]!==hl}),We!==e.currentTarget){var c=Qe.get(We).items,f=c.filter(function(m){return!m[ga]});Kn(We,f,{trigger:bt.DRAGGED_ENTERED_ANOTHER,id:At[tt],source:Ct.POINTER})}var v=e.detail.indexObj.index;lt=e.currentTarget,a.splice(v,0,Mn),Kn(e.currentTarget,a,{trigger:bt.DRAGGED_ENTERED,id:At[tt],source:Ct.POINTER})}}function Tl(e){if(An){var r=Qe.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==We&&e.currentTarget!==lt)){var c=Vt(a),f=xa(c);f!==-1&&c.splice(f,1);var v=lt;lt=void 0;var m=e.detail,y=m.type,D=m.theOtherDz;if(y===aa.OUTSIDE_OF_ANY||y===aa.LEFT_FOR_ANOTHER&&D!==We&&Qe.get(D).dropFromOthersDisabled){hi=!0,lt=We;var w=v===We?c:Vt(Qe.get(We).items);w.splice(Ea,0,Mn),Kn(We,w,{trigger:bt.DRAGGED_LEFT_ALL,id:At[tt],source:Ct.POINTER})}Kn(e.currentTarget,c,{trigger:bt.DRAGGED_LEFT,id:At[tt],source:Ct.POINTER})}}}function kl(e){var r=Qe.get(e.currentTarget),a=r.items,u=r.dropFromOthersDisabled;if(!(u&&e.currentTarget!==We)){var c=Vt(a);hi=!1;var f=e.detail.indexObj.index,v=xa(c);v!==-1&&c.splice(v,1),c.splice(f,0,Mn),Kn(e.currentTarget,c,{trigger:bt.DRAGGED_OVER_INDEX,id:At[tt],source:Ct.POINTER})}}function ua(e){e.preventDefault();var r=e.touches?e.touches[0]:e;vt={x:r.clientX,y:r.clientY},ot.style.transform="translate3d(".concat(vt.x-nn.x,"px, ").concat(vt.y-nn.y,"px, 0)")}function Ar(){rs=!0,window.removeEventListener("mousemove",ua),window.removeEventListener("touchmove",ua),window.removeEventListener("mouseup",Ar),window.removeEventListener("touchend",Ar),Kh(),Dh(ot),lt||(lt=We);var e=Qe.get(lt),r=e.items,a=e.type;sa(Yt.get(a),function(f){return Qe.get(f).dropTargetStyle},function(f){return Qe.get(f).dropTargetClasses});var u=xa(r);u===-1&&lt===We&&(u=Ea),r=r.map(function(f){return f[ga]?At:f});function c(){is(),Dr(lt,r,{trigger:hi?bt.DROPPED_OUTSIDE_OF_ANY:bt.DROPPED_INTO_ZONE,id:At[tt],source:Ct.POINTER}),lt!==We&&Dr(We,Qe.get(We).items,{trigger:bt.DROPPED_INTO_ANOTHER,id:At[tt],source:Ct.POINTER});var f=Array.from(lt.children).find(function(v){return v.getAttribute(_a)});f&&Ih(f),Hh()}Qe.get(lt).dropAnimationDisabled?c():jh(u,c)}function jh(e,r){var a=e>-1?Io(lt.children[e],!1):Io(lt,!1),u={x:a.left-parseFloat(ot.style.left),y:a.top-parseFloat(ot.style.top)},c=Qe.get(lt),f=c.dropAnimationDurationMs,v="transform ".concat(f,"ms ease");ot.style.transition=ot.style.transition?ot.style.transition+","+v:v,ot.style.transform="translate3d(".concat(u.x,"px, ").concat(u.y,"px, 0)"),window.setTimeout(r,f)}function zh(e,r){Yi.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){El(e),document.body.appendChild(e)})}function Hh(){ot&&ot.remove&&ot.remove(),kt&&kt.remove&&kt.remove(),ot=void 0,kt=void 0,At=void 0,wa=void 0,We=void 0,Ea=void 0,Mn=void 0,lt=void 0,nn=void 0,vt=void 0,An=!1,rs=!1,is=void 0,hi=!1,rn&&clearTimeout(rn),rn=void 0,Zr=!1,Yi.length&&(Yi.forEach(function(e){var r=e.dz,a=e.destroy;a(),r.remove()}),Yi=[])}function Uh(e,r){var a=!1,u={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:lu,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},c=new Map;function f(){window.addEventListener("mousemove",y,{passive:!1}),window.addEventListener("touchmove",y,{passive:!1,capture:!1}),window.addEventListener("mouseup",m,{passive:!1}),window.addEventListener("touchend",m,{passive:!1})}function v(){window.removeEventListener("mousemove",y),window.removeEventListener("touchmove",y),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),rn&&(clearTimeout(rn),rn=void 0,Zr=!1)}function m(_){if(v(),kt=void 0,nn=void 0,vt=void 0,_.type==="touchend"){var k=new Event("click",{bubbles:!0,cancelable:!0});_.target.dispatchEvent(k)}}function y(_){var k=!!_.touches,M=k?_.touches[0]:_;if(k&&u.delayTouchStartMs>0&&!Zr){vt={x:M.clientX,y:M.clientY},(Math.abs(vt.x-nn.x)>=zi||Math.abs(vt.y-nn.y)>=zi)&&(rn&&(clearTimeout(rn),rn=void 0),m(_));return}_.preventDefault(),vt={x:M.clientX,y:M.clientY},(Math.abs(vt.x-nn.x)>=zi||Math.abs(vt.y-nn.y)>=zi)&&(v(),w())}function D(_){if(!(_.target!==_.currentTarget&&(_.target.value!==void 0||_.target.isContentEditable))&&!_.button&&!An){var k=!!_.touches,M=k&&u.delayTouchStartMs>0;M||_.preventDefault(),_.stopPropagation();var K=k?_.touches[0]:_;nn={x:K.clientX,y:K.clientY},vt=ia({},nn),kt=_.currentTarget,M&&(Zr=!1,rn=window.setTimeout(function(){kt&&(Zr=!0,v(),w())},u.delayTouchStartMs)),f()}}function w(){An=!0;var _=c.get(kt);Ea=_,We=kt.parentElement;var k=We.closest("dialog")||We.closest("[popover]")||We.getRootNode(),M=k.body||k,K=u.items,L=u.type,H=u.centreDraggedOnCursor,re=Vt(K);At=re[_],wa=L,Mn=Bh(At),ot=kh(kt,H&&vt),M.appendChild(ot);function ce(){kt.parentElement?window.requestAnimationFrame(ce):(kt.setAttribute(cu,!0),M.appendChild(kt),Fh(),El(kt),Mn[tt]=At[tt],ot.focus())}window.requestAnimationFrame(ce),Gi(Array.from(Yt.get(u.type)).filter(function(J){return J===We||!Qe.get(J).dropFromOthersDisabled}),function(J){return Qe.get(J).dropTargetStyle},function(J){return Qe.get(J).dropTargetClasses}),re.splice(_,1,Mn),is=Ch(We),Kn(We,re,{trigger:bt.DRAG_STARTED,id:At[tt],source:Ct.POINTER}),window.addEventListener("mousemove",ua,{passive:!1}),window.addEventListener("touchmove",ua,{passive:!1,capture:!1}),window.addEventListener("mouseup",Ar,{passive:!1}),window.addEventListener("touchend",Ar,{passive:!1})}function S(_){var k=_.items,M=k===void 0?void 0:k,K=_.flipDurationMs,L=K===void 0?0:K,H=_.type,re=H===void 0?Ph:H,ce=_.dragDisabled,J=ce===void 0?!1:ce,ae=_.morphDisabled,oe=ae===void 0?!1:ae,_e=_.dropFromOthersDisabled,be=_e===void 0?!1:_e,we=_.dropTargetStyle,ge=we===void 0?lu:we,Te=_.dropTargetClasses,Oe=Te===void 0?[]:Te,$e=_.transformDraggedElement,nt=$e===void 0?function(){}:$e,wt=_.centreDraggedOnCursor,te=wt===void 0?!1:wt,se=_.dropAnimationDisabled,He=se===void 0?!1:se,Ce=_.delayTouchStart,Pe=Ce===void 0?!1:Ce;u.dropAnimationDurationMs=L;var Ge=0;Pe===!0?Ge=Lh:typeof Pe=="number"&&isFinite(Pe)&&Pe>=0&&(Ge=Pe),u.delayTouchStartMs=Ge,u.type&&re!==u.type&&fu(e,u.type),u.type=re,u.items=Vt(M),u.dragDisabled=J,u.morphDisabled=oe,u.transformDraggedElement=nt,u.centreDraggedOnCursor=te,u.dropAnimationDisabled=He,a&&An&&!rs&&(!dh(ge,u.dropTargetStyle)||!hh(Oe,u.dropTargetClasses))&&(sa([e],function(){return u.dropTargetStyle},function(){return Oe}),Gi([e],function(){return ge},function(){return Oe})),u.dropTargetStyle=ge,u.dropTargetClasses=Vt(Oe);function rt(Ye,W){return Qe.get(Ye)?Qe.get(Ye)[W]:u[W]}a&&An&&u.dropFromOthersDisabled!==be&&(be?sa([e],function(Ye){return rt(Ye,"dropTargetStyle")},function(Ye){return rt(Ye,"dropTargetClasses")}):Gi([e],function(Ye){return rt(Ye,"dropTargetStyle")},function(Ye){return rt(Ye,"dropTargetClasses")})),u.dropFromOthersDisabled=be,Qe.set(e,u),Nh(e,re);for(var Et=An?xa(u.items):-1,Je=0;Je<e.children.length;Je++){var Ue=e.children[Je];if(Sh(Ue,J),Je===Et){oe||Ah(ot,Ue,vt.x,vt.y),u.transformDraggedElement(ot,At,Je),Oh(Ue);continue}Ue.removeEventListener("mousedown",yo.get(Ue)),Ue.removeEventListener("touchstart",yo.get(Ue)),J||(Ue.addEventListener("mousedown",D),Ue.addEventListener("touchstart",D),yo.set(Ue,D)),c.set(Ue,Je),a||(a=!0)}}return S(r),{update:function(k){S(k)},destroy:function(){function k(){fu(e,Qe.get(e).type),Qe.delete(e)}An&&!e.closest("[".concat(cu,"]"))?zh(e,k):k()}}}var Hi,Po={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Dl=(Hi={},kr(Hi,Po.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),kr(Hi,Po.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Hi),Vh="dnd-action-aria-alert",Xe;function Ro(){Xe||(Xe=document.createElement("div"),(function(){Xe.id=Vh,Xe.style.position="fixed",Xe.style.bottom="0",Xe.style.left="0",Xe.style.zIndex="-5",Xe.style.opacity="0",Xe.style.height="0",Xe.style.width="0",Xe.setAttribute("role","alert")})(),document.body.prepend(Xe),Object.entries(Dl).forEach(function(e){var r=Wd(e,2),a=r[0],u=r[1];return document.body.prepend(Yh(a,u))}))}function Wh(){return ts?null:(document.readyState==="complete"?Ro():window.addEventListener("DOMContentLoaded",Ro),ia({},Po))}function Gh(){ts||!Xe||(Object.keys(Dl).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),Xe.remove(),Xe=void 0)}function Yh(e,r){var a=document.createElement("div");return a.id=e,a.innerHTML="<p>".concat(r,"</p>"),a.style.display="none",a.style.position="fixed",a.style.zIndex="-5",a}function _r(e){if(!ts){Xe||Ro(),Xe.innerHTML="";var r=document.createTextNode(e);Xe.appendChild(r),Xe.style.display="none",Xe.style.display="inline"}}var qh="--any--",du={outline:"rgba(255, 255, 102, 0.7) solid 2px"},jt=!1,Mo,pt,er="",Qn,an,Sn="",la=new WeakSet,hu=new WeakMap,vu=new WeakMap,Lo=new Map,st=new Map,Gt=new Map,ca;function Zh(e,r){Gt.size===0&&(ca=Wh(),window.addEventListener("keydown",Al),window.addEventListener("click",Sl)),Gt.has(r)||Gt.set(r,new Set),Gt.get(r).has(e)||(Gt.get(r).add(e),vl())}function pu(e,r){pt===e&&oi(),Gt.get(r).delete(e),pl(),Gt.get(r).size===0&&Gt.delete(r),Gt.size===0&&(window.removeEventListener("keydown",Al),window.removeEventListener("click",Sl),ca=void 0,Gh())}function Al(e){if(jt)switch(e.key){case"Escape":{oi();break}}}function Sl(){jt&&(la.has(document.activeElement)||oi())}function Qh(e){if(jt){var r=e.currentTarget;if(r!==pt){er=r.getAttribute("aria-label")||"";var a=st.get(pt),u=a.items,c=u.find(function(S){return S[tt]===an}),f=u.indexOf(c),v=u.splice(f,1)[0],m=st.get(r),y=m.items,D=m.autoAriaDisabled;r.getBoundingClientRect().top<pt.getBoundingClientRect().top||r.getBoundingClientRect().left<pt.getBoundingClientRect().left?(y.push(v),D||_r("Moved item ".concat(Sn," to the end of the list ").concat(er))):(y.unshift(v),D||_r("Moved item ".concat(Sn," to the beginning of the list ").concat(er)));var w=pt;Dr(w,u,{trigger:bt.DROPPED_INTO_ANOTHER,id:an,source:Ct.KEYBOARD}),Dr(r,y,{trigger:bt.DROPPED_INTO_ZONE,id:an,source:Ct.KEYBOARD}),pt=r}}}function Ol(){Lo.forEach(function(e,r){var a=e.update;return a(st.get(r))})}function oi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;st.get(pt).autoAriaDisabled||_r("Stopped dragging item ".concat(Sn)),la.has(document.activeElement)&&document.activeElement.blur(),e&&Kn(pt,st.get(pt).items,{trigger:bt.DRAG_STOPPED,id:an,source:Ct.KEYBOARD}),sa(Gt.get(Mo),function(r){return st.get(r).dropTargetStyle},function(r){return st.get(r).dropTargetClasses}),Qn=null,an=null,Sn="",Mo=null,pt=null,er="",jt=!1,Ol()}function $h(e,r){var a={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:du,dropTargetClasses:[],autoAriaDisabled:!1};function u(w,S,_){w.length<=1||w.splice(_,1,w.splice(S,1,w[_])[0])}function c(w){switch(w.key){case"Enter":case" ":{if((w.target.disabled!==void 0||w.target.href||w.target.isContentEditable)&&!la.has(w.target))return;w.preventDefault(),w.stopPropagation(),jt?oi():f(w);break}case"ArrowDown":case"ArrowRight":{if(!jt)return;w.preventDefault(),w.stopPropagation();var S=st.get(e),_=S.items,k=Array.from(e.children),M=k.indexOf(w.currentTarget);M<k.length-1&&(a.autoAriaDisabled||_r("Moved item ".concat(Sn," to position ").concat(M+2," in the list ").concat(er)),u(_,M,M+1),Dr(e,_,{trigger:bt.DROPPED_INTO_ZONE,id:an,source:Ct.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!jt)return;w.preventDefault(),w.stopPropagation();var K=st.get(e),L=K.items,H=Array.from(e.children),re=H.indexOf(w.currentTarget);re>0&&(a.autoAriaDisabled||_r("Moved item ".concat(Sn," to position ").concat(re," in the list ").concat(er)),u(L,re,re-1),Dr(e,L,{trigger:bt.DROPPED_INTO_ZONE,id:an,source:Ct.KEYBOARD}));break}}}function f(w){m(w.currentTarget),pt=e,Mo=a.type,jt=!0;var S=Array.from(Gt.get(a.type)).filter(function(k){return k===pt||!st.get(k).dropFromOthersDisabled});if(Gi(S,function(k){return st.get(k).dropTargetStyle},function(k){return st.get(k).dropTargetClasses}),!a.autoAriaDisabled){var _="Started dragging item ".concat(Sn,". Use the arrow keys to move it within its list ").concat(er);S.length>1&&(_+=", or tab to another list in order to move the item into it"),_r(_)}Kn(e,st.get(e).items,{trigger:bt.DRAG_STARTED,id:an,source:Ct.KEYBOARD}),Ol()}function v(w){jt&&w.currentTarget!==Qn&&(w.stopPropagation(),oi(!1),f(w))}function m(w){var S=st.get(e),_=S.items,k=Array.from(e.children),M=k.indexOf(w);Qn=w,Qn.tabIndex=a.zoneItemTabIndex,an=_[M][tt],Sn=k[M].getAttribute("aria-label")||""}function y(w){var S=w.items,_=S===void 0?[]:S,k=w.type,M=k===void 0?qh:k,K=w.dragDisabled,L=K===void 0?!1:K,H=w.zoneTabIndex,re=H===void 0?0:H,ce=w.zoneItemTabIndex,J=ce===void 0?0:ce,ae=w.dropFromOthersDisabled,oe=ae===void 0?!1:ae,_e=w.dropTargetStyle,be=_e===void 0?du:_e,we=w.dropTargetClasses,ge=we===void 0?[]:we,Te=w.autoAriaDisabled,Oe=Te===void 0?!1:Te;a.items=Vt(_),a.dragDisabled=L,a.dropFromOthersDisabled=oe,a.zoneTabIndex=re,a.zoneItemTabIndex=J,a.dropTargetStyle=be,a.dropTargetClasses=ge,a.autoAriaDisabled=Oe,a.type&&M!==a.type&&pu(e,a.type),a.type=M,Zh(e,M),Oe||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",L?ca.DND_ZONE_DRAG_DISABLED:ca.DND_ZONE_ACTIVE)),st.set(e,a),jt?e.tabIndex=e===pt||Qn.contains(e)||a.dropFromOthersDisabled||pt&&a.type!==st.get(pt).type?-1:0:e.tabIndex=a.zoneTabIndex,e.addEventListener("focus",Qh);for(var $e=function(te){var se=e.children[te];la.add(se),se.tabIndex=jt?-1:a.zoneItemTabIndex,Oe||se.setAttribute("role","listitem"),se.removeEventListener("keydown",hu.get(se)),se.removeEventListener("click",vu.get(se)),L||(se.addEventListener("keydown",c),hu.set(se,c),se.addEventListener("click",v),vu.set(se,v)),jt&&a.items[te][tt]===an&&(Qn=se,Qn.tabIndex=a.zoneItemTabIndex,se.focus())},nt=0;nt<e.children.length;nt++)$e(nt)}y(r);var D={update:function(S){y(S)},destroy:function(){pu(e,a.type),st.delete(e),Lo.delete(e)}};return Lo.set(e,D),D}var Xh=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Jh(e,r){if(ev(e))return{update:function(){},destroy:function(){}};yu(r);var a=Uh(e,r),u=$h(e,r);return{update:function(f){yu(f),a.update(f),u.update(f)},destroy:function(){a.destroy(),u.destroy()}}}function ev(e){return!!e.closest("[".concat(ah,'="true"]'))}function yu(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var a=e.zoneTabIndex,u=e.zoneItemTabIndex;e.dropTargetStyle;var c=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var f=e.delayTouchStart;e.dropAnimationDisabled;var v=Vd(e,Xh);if(Object.keys(v).length>0&&console.warn("dndzone will ignore unknown options",v),!r)throw new Error("no 'items' key provided to dndzone");var m=r.find(function(w){return!{}.hasOwnProperty.call(w,tt)});if(m)throw new Error("missing '".concat(tt,"' property for item ").concat(Gr(m)));if(c&&!Array.isArray(c))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(pr(c),", ").concat(Gr(c)));if(a&&!mu(a))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(pr(a),", ").concat(Gr(a)));if(u&&!mu(u))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(pr(u),", ").concat(Gr(u)));if(f!==void 0&&f!==!1){var y=f===!0,D=typeof f=="number"&&isFinite(f)&&f>=0;if(!y&&!D)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(pr(f),", ").concat(Gr(f)))}}function mu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}var tv=Fe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),nv=Fe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input w-[150px] flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function rv(e,r){ar(r,!0);let a=ye(dn(r.taskText||"")),u=ye(!1),c=ye(null),f=ye(null),v=ei(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const ce=24+24+16+8-8,J=10,ae=r.taskPosition.top-ce,oe=r.taskPosition.left-16+J,_e=r.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${ae}px; left: ${oe}px; width: ${_e}px;`});et(()=>{r.isOpen&&(P(a,r.taskText||"",!0),P(u,!1))}),et(()=>{r.isOpen&&T(c)&&setTimeout(()=>{T(c)?.focus(),T(c)?.select(),T(c)instanceof HTMLTextAreaElement&&(T(c).style.height="auto",T(c).style.height=`${Math.min(T(c).scrollHeight,160)}px`)},0)}),et(()=>{if(T(c)&&T(c)instanceof HTMLTextAreaElement){const K=()=>{T(c).style.height="auto",T(c).style.height=`${Math.min(T(c).scrollHeight,160)}px`};return T(c).addEventListener("input",K),()=>{T(c).removeEventListener("input",K)}}});function m(){const K=T(a)??"",L=K.trim();if(L===""&&K.length>0){r.onSave(r.taskId,""),P(u,!1);return}if(K===""||L===""){P(u,!0);return}r.onSave(r.taskId,L),P(u,!1)}function y(){P(a,r.taskText||"",!0),P(u,!1),r.onCancel()}function D(K){K.target===K.currentTarget&&y()}function w(K){K.key==="Escape"?y():K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),m())}function S(){r.onArchive&&r.onArchive(r.taskId)}var _=rr(),k=ut(_);{var M=K=>{var L=nv();L.__click=D,L.__keydown=w;var H=me(L);H.__click=Te=>Te.stopPropagation();var re=ue(me(H),2),ce=me(re);ce.__keydown=w,un(ce,Te=>P(c,Te),()=>T(c));var J=ue(ce,2);{var ae=Te=>{var Oe=tv();xe(Te,Oe)};at(J,Te=>{T(u)&&Te(ae)})}var oe=ue(re,2),_e=me(oe);_e.__click=S;var be=ue(_e,2),we=me(be);we.__click=y;var ge=ue(we,2);ge.__click=m,un(H,Te=>P(f,Te),()=>T(f)),Dt(Te=>{ll(H,Te),Nt(ce,"aria-describedby",T(u)?"validation-message":void 0),ge.disabled=T(u),Nt(ge,"aria-label",T(u)?"Save disabled: task cannot be empty":"Save task changes")},[()=>T(v)()]),$o(ce,()=>T(a),Te=>P(a,Te)),xe(K,L)};at(k,K=>{r.isOpen&&K(M)})}xe(e,_),or()}Cr(["click","keydown"]);var iv=Fe('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),av=Fe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-8e0jqh" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div>');function ov(e,r){ar(r,!0);let a=ye(dn(r.listName||"")),u=ye(!1),c=ye(null),f=ye(null),v=ei(()=>()=>{if(!r.listPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const re=24+24+16+8-8,ce=r.listPosition.top-re,J=r.listPosition.left-16,ae=Math.max(r.listPosition.width+48,300);return`background-color: white; z-index: 10000; top: ${ce}px; left: ${J}px; width: ${ae}px;`});et(()=>{r.isOpen&&(P(a,r.listName||"",!0),P(u,!1))}),et(()=>{r.isOpen&&T(c)&&setTimeout(()=>{T(c)?.focus(),T(c)?.select()},0)});function m(){const K=(T(a)??"").trim();if(K===""){P(u,!0);return}r.onSave(r.listId,K),P(u,!1)}function y(){P(a,r.listName||"",!0),P(u,!1),r.onCancel()}function D(M){M.target===M.currentTarget&&y()}function w(M){M.key==="Escape"?y():M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),m())}var S=rr(),_=ut(S);{var k=M=>{var K=av();K.__click=D,K.__keydown=w;var L=me(K);L.__click=be=>be.stopPropagation();var H=ue(me(L),2),re=me(H);re.__keydown=w,un(re,be=>P(c,be),()=>T(c));var ce=ue(re,2);{var J=be=>{var we=iv();xe(be,we)};at(ce,be=>{T(u)&&be(J)})}var ae=ue(H,2),oe=me(ae);oe.__click=y;var _e=ue(oe,2);_e.__click=m,un(L,be=>P(f,be),()=>T(f)),Dt(be=>{ll(L,be),Nt(re,"aria-describedby",T(u)?"validation-message":void 0),_e.disabled=T(u),Nt(_e,"aria-label",T(u)?"Save disabled: list name cannot be empty":"Save list name changes")},[()=>T(v)()]),$o(re,()=>T(a),be=>P(a,be)),xe(M,K)};at(_,M=>{r.isOpen&&M(k)})}xe(e,S),or()}Cr(["click","keydown"]);var sv=Fe('<span class="drag-handle text-gray-400 select-none svelte-k6mizj" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea placeholder="Add new task..." class="w-[150px] flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div>',1),uv=Fe('<span class="drag-handle text-gray-400 select-none svelte-k6mizj" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="w-[150px] cursor-pointer hover:underline break-words" role="button" tabindex="0">Add your first task</span>',1),lv=Fe('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden add-task-container add-task-button mt-2" style="margin-left: 1.5rem;"><!></div>'),cv=Fe('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),fv=Fe('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),dv=Fe('<span class="drag-handle text-gray-400 select-none svelte-k6mizj" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea placeholder="Add new task..." class="w-[150px] flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div>',1),hv=Fe('<span class="drag-handle text-gray-400 select-none svelte-k6mizj" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="w-[150px] cursor-pointer hover:underline break-words" role="button" tabindex="0">Add Task</span>',1),vv=Fe('<div class="task-list-wrapper svelte-k6mizj"><ul class="space-y-2 svelte-k6mizj"></ul> <div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden add-task-container add-task-button mt-2 svelte-k6mizj"><!></div></div>'),pv=Fe('<span class="drag-handle text-gray-400 select-none svelte-k6mizj" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea placeholder="Add new task..." class="w-[150px] flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div>',1),yv=Fe('<span class="drag-handle text-gray-400 select-none svelte-k6mizj" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="w-[150px] cursor-pointer hover:underline break-words" role="button" tabindex="0">Add Task</span>',1),mv=Fe('<p>Loading tasks...</p> <div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden add-task-container add-task-button mt-2" style="margin-left: 1.5rem;"><!></div>',1),gv=Fe('<div><h2 role="button" tabindex="0" class="cursor-pointer hover:underline"> </h2> <!></div> <!> <!>',1);function _v(e,r){ar(r,!0);const a=()=>ta(T(f),"$tasksQuery",u),[u,c]=Xo();let f=ye(null),v=ye(dn([])),m=ye(!1),y=ye(null),D=ye(!1),w=ye(null),S=ye(""),_=ye(null),k=ye(null),M=ye(null),K=ye(!1),L=ye(null),H=ye(null);et(()=>{r.listId&&!T(f)&&Do(P(f,ra(()=>Fd(r.listId)),!0),"$tasksQuery",u)}),et(()=>{a()&&Array.isArray(a())&&P(v,a().filter(W=>W.status==="unchecked"||W.status==="checked"),!0)}),et(()=>{if(!T(M))return;function W(Q){const Z=Q.target;if((Q.key==="Enter"||Q.key===" ")&&Z instanceof HTMLElement&&Z.hasAttribute("data-no-drag")){Q.preventDefault(),Q.stopImmediatePropagation();const Ie=Z.closest("li[data-id]");if(Ie){const Ee=parseInt(Ie.getAttribute("data-id")),Le=T(v).find(fe=>fe.id===Ee);if(Le){const fe=Z.getBoundingClientRect();P(_,{top:fe.top,left:fe.left,width:fe.width,height:fe.height},!0),P(k,Z,!0),P(w,Ee,!0),P(S,Le.text,!0),P(D,!0)}}}}return T(M).addEventListener("keydown",W,!0),()=>{T(M).removeEventListener("keydown",W,!0)}});function re(W){P(v,W.detail.items,!0)}async function ce(W){P(v,W.detail.items,!0);try{await zd(r.listId,W.detail.items)}catch(Q){console.error("Error updating task order:",Q)}}function J(){P(m,!0)}function ae(W){W.key==="Escape"&&(P(m,!1),r.onInputChange(""))}et(()=>{if(!T(m))return;function W(Z){const Ie=document.querySelector(`[data-list-id="${r.listId}"]`);if(!Ie)return;const Ee=Ie.querySelector(".add-task-container");if(!Ee)return;const Le=Ee.querySelector("button");if(Le&&Le.contains(Z.target))return;const fe=Ee.querySelector("textarea");fe&&fe.contains(Z.target)||(!r.newTaskInput||r.newTaskInput.trim()==="")&&(P(m,!1),r.onInputChange(""))}const Q=setTimeout(()=>{document.addEventListener("click",W)},0);return()=>{clearTimeout(Q),document.removeEventListener("click",W)}}),et(()=>{T(m)&&T(y)&&setTimeout(()=>{T(y)?.focus(),T(y)instanceof HTMLTextAreaElement&&(T(y).style.height="auto",T(y).style.height=`${Math.min(T(y).scrollHeight,160)}px`)},0)}),et(()=>{if(T(y)&&T(y)instanceof HTMLTextAreaElement){const W=()=>{T(y).style.height="auto",T(y).style.height=`${Math.min(T(y).scrollHeight,160)}px`};return T(y).addEventListener("input",W),()=>{T(y).removeEventListener("input",W)}}});async function oe(){const W=r.newTaskInput||"";if(W===""){P(m,!1),r.onInputChange("");return}const Q=W.trim(),Z=Q===""&&W.length>0;let Ie;Z?Ie="":Ie=Q;try{await dl(r.listId,Ie),r.onInputChange("")}catch(Ee){console.error("Error creating task:",Ee)}}async function _e(W,Q){try{await iu(W,Q==="unchecked"?"checked":"unchecked")}catch(Z){console.error("Error updating task status:",Z)}}async function be(W){try{if(await iu(W,"archived"),T(w)===W){const Q=T(k);P(D,!1),P(w,null),P(S,""),P(_,null),P(k,null),setTimeout(()=>{if(Q&&Q instanceof HTMLElement){const Z=Q.closest("li");if(Z){const Ee=Z.nextElementSibling;if(Ee){const fe=Ee.querySelector('span[role="button"]');if(fe&&fe instanceof HTMLElement){fe.focus();return}}const Le=Z.previousElementSibling;if(Le){const fe=Le.querySelector('span[role="button"]');if(fe&&fe instanceof HTMLElement){fe.focus();return}}}const Ie=document.querySelector(`[data-list-id="${r.listId}"]`);if(Ie){const Ee=(Le=0)=>{const fe=Ie.querySelector(".add-task-container");if(fe){const de=fe.querySelector('span[role="button"]');if(de&&de instanceof HTMLElement){de.focus();return}}Le<10&&setTimeout(()=>Ee(Le+1),10)};Ee();return}}},0)}}catch(Q){console.error("Error archiving task:",Q)}}function we(W,Q,Z){const Ie=Z?.currentTarget||Z?.target;if(Ie){const Ee=Ie.getBoundingClientRect();P(_,{top:Ee.top,left:Ee.left,width:Ee.width,height:Ee.height},!0),P(k,Ie,!0)}P(w,W,!0),P(S,Q,!0),P(D,!0)}function ge(W,Q,Z){if(Z.key==="Enter"||Z.key===" "){Z.preventDefault(),Z.stopImmediatePropagation();const Ie=Z.currentTarget;if(Ie){const Ee=Ie.getBoundingClientRect();P(_,{top:Ee.top,left:Ee.left,width:Ee.width,height:Ee.height},!0),P(k,Ie,!0),P(w,W,!0),P(S,Q,!0),P(D,!0)}}}async function Te(W,Q){try{await Bd(W,Q),P(D,!1);const Z=T(k);P(w,null),P(S,""),P(_,null),P(k,null),Z&&Z instanceof HTMLElement&&setTimeout(()=>{Z.focus()},0)}catch(Z){console.error("Error updating task text:",Z)}}function Oe(){const W=T(k);P(D,!1),P(w,null),P(S,""),P(_,null),P(k,null),W&&W instanceof HTMLElement&&setTimeout(()=>{W.focus()},0)}async function $e(W){T(k),await be(W);const Q=(Z=0)=>{const Ie=document.activeElement,Ee=document.querySelector(`[data-list-id="${r.listId}"]`);if(Ee&&(!Ie||!Ee.contains(Ie))){const Le=Ee.querySelector(".add-task-container");if(Le){const fe=Le.querySelector('span[role="button"]');if(fe&&fe instanceof HTMLElement){fe.focus();return}}}Z<20&&setTimeout(()=>Q(Z+1),10)};setTimeout(()=>Q(),10)}function nt(W){const Q=W?.currentTarget||W?.target;if(Q){const Z=Q.getBoundingClientRect();P(L,{top:Z.top,left:Z.left,width:Z.width,height:Z.height},!0),P(H,Q,!0)}P(K,!0)}function wt(W){if(W.key==="Enter"||W.key===" "){W.preventDefault(),W.stopPropagation();const Q=W.currentTarget;if(Q){const Z=Q.getBoundingClientRect();P(L,{top:Z.top,left:Z.left,width:Z.width,height:Z.height},!0),P(H,Q,!0),P(K,!0)}}}async function te(W,Q){try{await Nd(W,Q),P(K,!1);const Z=T(H);P(L,null),P(H,null),Z&&Z instanceof HTMLElement&&setTimeout(()=>{Z.focus()},0)}catch(Z){console.error("Error updating list name:",Z)}}function se(){const W=T(H);P(K,!1),P(L,null),P(H,null),W&&W instanceof HTMLElement&&setTimeout(()=>{W.focus()},0)}var He=gv(),Ce=ut(He),Pe=me(Ce);Pe.__click=nt,Pe.__keydown=wt;var Ge=me(Pe),rt=ue(Pe,2);{var Et=W=>{var Q=rr(),Z=ut(Q);{var Ie=Le=>{var fe=lv(),de=me(fe);{var Re=De=>{var Be=sv(),le=ue(ut(Be),4),z=me(le);z.__input=ze=>r.onInputChange(ze.currentTarget.value),z.__keydown=ze=>{ze.key==="Enter"&&!ze.shiftKey?(ze.preventDefault(),oe()):ze.key==="Escape"&&ae(ze)},un(z,ze=>P(y,ze),()=>T(y));var xt=ue(z,2);xt.__click=oe,Dt(()=>Vi(z,r.newTaskInput)),xe(De,Be)},Ke=De=>{var Be=uv(),le=ue(ut(Be),4);le.__click=J,le.__keydown=z=>{(z.key==="Enter"||z.key===" ")&&(z.preventDefault(),J())},Dt(()=>Nt(le,"aria-label",`Add your first task to ${r.listName??""}`)),xe(De,Be)};at(de,De=>{T(m)?De(Re):De(Ke,!1)})}xe(Le,fe)},Ee=Le=>{var fe=vv(),de=me(fe);zo(de,21,()=>T(v),le=>le.id,(le,z)=>{var xt=fv(),ze=ue(me(xt),2);ze.__change=()=>_e(T(z).id,T(z).status);var Rt=ue(ze,2);Rt.__click=gt=>we(T(z).id,T(z).text,gt),Rt.__keydown=gt=>ge(T(z).id,T(z).text,gt);var ve=me(Rt),Bn=ue(Rt,2);{var Ta=gt=>{var Pr=cv();Pr.__click=()=>be(T(z).id),Dt(()=>Nt(Pr,"aria-label",`Archive task: ${T(z).text||"blank task"}`)),xe(gt,Pr)};at(Bn,gt=>{T(z).status==="checked"&&gt(Ta)})}Dt(()=>{Nt(xt,"data-id",T(z).id),kd(ze,T(z).status==="checked"),Nt(ze,"aria-label",`Mark task "${T(z).text||"blank task"}" as ${T(z).status==="checked"?"unchecked":"checked"}`),Ed(Rt,1,_d(T(z).status==="checked"?"line-through w-[150px] cursor-pointer hover:underline break-words":"w-[150px] cursor-pointer hover:underline break-words")),Nt(Rt,"aria-label",`Edit task: ${T(z).text||"blank task"}`),Jn(ve,T(z).text||"")}),xe(le,xt)}),un(de,le=>P(M,le),()=>T(M)),md(de,(le,z)=>Jh?.(le,z),()=>({items:T(v),type:`list-${r.listId}`}));var Re=ue(de,2),Ke=me(Re);{var De=le=>{var z=dv(),xt=ue(ut(z),4),ze=me(xt);ze.__input=ve=>r.onInputChange(ve.currentTarget.value),ze.__keydown=ve=>{ve.key==="Enter"&&!ve.shiftKey?(ve.preventDefault(),oe()):ve.key==="Escape"&&ae(ve)},un(ze,ve=>P(y,ve),()=>T(y));var Rt=ue(ze,2);Rt.__click=oe,Dt(()=>Vi(ze,r.newTaskInput)),xe(le,z)},Be=le=>{var z=hv(),xt=ue(ut(z),4);xt.__click=J,xt.__keydown=ze=>{(ze.key==="Enter"||ze.key===" ")&&(ze.preventDefault(),J())},Dt(()=>Nt(xt,"aria-label",`Add new task to ${r.listName??""}`)),xe(le,z)};at(Ke,le=>{T(m)?le(De):le(Be,!1)})}Xs("consider",de,re),Xs("finalize",de,ce),xe(Le,fe)};at(Z,Le=>{a().length===0?Le(Ie):Le(Ee,!1)})}xe(W,Q)},Je=W=>{var Q=mv(),Z=ue(ut(Q),2),Ie=me(Z);{var Ee=fe=>{var de=pv(),Re=ue(ut(de),4),Ke=me(Re);Ke.__input=Be=>r.onInputChange(Be.currentTarget.value),Ke.__keydown=Be=>{Be.key==="Enter"&&!Be.shiftKey?(Be.preventDefault(),oe()):Be.key==="Escape"&&ae(Be)},un(Ke,Be=>P(y,Be),()=>T(y));var De=ue(Ke,2);De.__click=oe,Dt(()=>Vi(Ke,r.newTaskInput)),xe(fe,de)},Le=fe=>{var de=yv(),Re=ue(ut(de),4);Re.__click=J,Re.__keydown=Ke=>{(Ke.key==="Enter"||Ke.key===" ")&&(Ke.preventDefault(),J())},Dt(()=>Nt(Re,"aria-label",`Add new task to ${r.listName??""}`)),xe(fe,de)};at(Ie,fe=>{T(m)?fe(Ee):fe(Le,!1)})}xe(W,Q)};at(rt,W=>{T(f)&&a()!==void 0?W(Et):W(Je,!1)})}var Ue=ue(Ce,2);rv(Ue,{get isOpen(){return T(D)},get taskId(){return T(w)},get taskText(){return T(S)},get taskPosition(){return T(_)},onSave:Te,onCancel:Oe,onArchive:$e});var Ye=ue(Ue,2);ov(Ye,{get isOpen(){return T(K)},get listId(){return r.listId},get listName(){return r.listName},get listPosition(){return T(L)},onSave:te,onCancel:se}),Dt(()=>{Nt(Ce,"data-list-id",r.listId),Nt(Pe,"aria-label",`Rename list: ${r.listName}`),Jn(Ge,r.listName)}),xe(e,He),or(),c()}Cr(["click","keydown","input","change"]);var bv=Fe('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border border-gray-200 max-w-md w-full mx-4"><h3 id="modal-title" class="text-lg font-semibold mb-4"> </h3> <p class="mb-6 text-sm text-gray-600"> </p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete</button></div></div></div>');function wv(e,r){ar(r,!0);function a(){r.onConfirm()}function u(){r.onCancel()}function c(D){D.target===D.currentTarget&&u()}function f(D){D.key==="Escape"&&u()}var v=rr(),m=ut(v);{var y=D=>{var w=bv();w.__click=c,w.__keydown=f;var S=me(w),_=me(S),k=me(_),M=ue(_,2),K=me(M),L=ue(M,2),H=me(L);H.__click=u;var re=ue(H,2);re.__click=a,Dt(()=>{Jn(k,r.title),Jn(K,r.message)}),xe(D,w)};at(m,D=>{r.isOpen&&D(y)})}xe(e,v),or()}Cr(["click","keydown"]);var Ev=Fe("<p>No archived tasks</p>"),xv=Fe('<li class="flex items-center gap-3 mb-2"><span class="line-through"> </span> <span class="text-sm text-gray-500"> </span> <span class="text-sm text-gray-400"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button> <button class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm">Delete</button></li>'),Tv=Fe("<ul></ul>"),kv=Fe('<div class="w-[1056px] mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div> <!>',1);function Dv(e,r){ar(r,!0);const a=()=>ta(T(m),"$listsQuery",c),u=()=>ta(T(v),"$archivedTasksQuery",c),[c,f]=Xo();let v=ye(null),m=ye(null),y=ye(!1),D=ye(null);et(()=>{Do(P(v,ra(()=>Kd()),!0),"$archivedTasksQuery",c),Do(P(m,ra(()=>fl()),!0),"$listsQuery",c)});function w(ae){if(!a())return"Unknown List";const oe=a().find(_e=>_e.id===ae);return oe?oe.name:"Unknown List"}function S(ae){return ae?new Date(ae).toLocaleString():"Unknown"}async function _(ae){try{await jd(ae)}catch(oe){console.error("Error restoring task:",oe)}}function k(ae,oe){P(D,{id:ae,text:oe},!0),P(y,!0)}async function M(){if(T(D))try{await Hd(T(D).id),P(y,!1),P(D,null)}catch(ae){console.error("Error deleting task:",ae)}}function K(){P(y,!1),P(D,null)}var L=kv(),H=ut(L),re=ue(me(H),2);{var ce=ae=>{var oe=rr(),_e=ut(oe);{var be=ge=>{var Te=Ev();xe(ge,Te)},we=ge=>{var Te=Tv();zo(Te,5,u,Bu,(Oe,$e)=>{var nt=xv(),wt=me(nt),te=me(wt),se=ue(wt,2),He=me(se),Ce=ue(se,2),Pe=me(Ce),Ge=ue(Ce,2);Ge.__click=()=>_(T($e).id);var rt=ue(Ge,2);rt.__click=()=>k(T($e).id,T($e).text),Dt((Et,Je)=>{Jn(te,T($e).text),Jn(He,`(${Et??""})`),Jn(Pe,`Archived: ${Je??""}`)},[()=>w(T($e).listId),()=>S(T($e).archivedAt)]),xe(Oe,nt)}),xe(ge,Te)};at(_e,ge=>{u().length===0?ge(be):ge(we,!1)})}xe(ae,oe)};at(re,ae=>{T(v)&&u()&&ae(ce)})}var J=ue(H,2);{let ae=ei(()=>T(D)?`Are you sure you want to permanently delete "${T(D).text}"? This action cannot be undone.`:"");wv(J,{get isOpen(){return T(y)},title:"Delete Task",get message(){return T(ae)},onConfirm:M,onCancel:K})}xe(e,L),or(),f()}Cr(["click"]);var Av=Fe("<p>Loading...</p>"),Sv=Fe("<p>No lists found</p>"),Ov=Fe('<h2 class="mt-4 print:hidden"><div class="flex items-center gap-2"><input type="text" class="create-list-input cursor-pointer hover:underline svelte-1n46o8q" placeholder="List name..." aria-label="Enter list name"/> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" aria-label="Create list">Save</button></div></h2>'),Iv=Fe('<h2 role="button" tabindex="0" class="cursor-pointer hover:underline print:hidden mt-4" aria-label="Create new list">Create new list</h2>'),Cv=Fe('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden mt-2" style="margin-left: 1.5rem;"><span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea placeholder="Add new task..." class="w-[150px] flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div></div>'),Pv=Fe('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-fit print:hidden mt-2" style="margin-left: 1.5rem;"><span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="w-[150px] cursor-pointer hover:underline break-words" role="button" tabindex="0" aria-label="Add a task">Add a task</span></div>'),Rv=Fe("<!> <!> <!>",1),Mv=Fe('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="w-[1056px] flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="w-[1056px] h-[816px] bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><div class="w-full h-full p-4 overflow-auto"><!></div></div></div> <!></main>');function Lv(e,r){ar(r,!0);const a=()=>ta(f,"$lists",u),[u,c]=Xo();let f=ra(()=>fl()),v=ye(dn({})),m=ye(!1),y=ye(""),D=ye(null),w=ye(!1),S=ye(""),_=ye(null);et(()=>{if(a()&&Array.isArray(a())&&a().length>0&&Object.keys(T(v)).length===0){const te={};for(const se of a())te[se.id]="";P(v,te,!0)}}),et(()=>{if(a()&&Array.isArray(a())&&a().length>0){const te={...T(v)};let se=!1;for(const He of a())He.id in te||(te[He.id]="",se=!0);se&&P(v,te,!0)}});function k(te,se){T(v)[te]=se}function M(){window.print()}function K(){P(m,!0)}function L(te){(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),te.stopPropagation(),K())}function H(te){te.key==="Escape"&&(P(m,!1),P(y,""))}et(()=>{if(!T(m))return;function te(He){if(T(D)&&T(D).contains(He.target))return;const Ce=He.target.closest("button");Ce&&Ce.textContent?.trim()==="Save"||(!T(y)||T(y).trim()==="")&&(P(m,!1),P(y,""))}const se=setTimeout(()=>{document.addEventListener("click",te)},0);return()=>{clearTimeout(se),document.removeEventListener("click",te)}}),et(()=>{T(m)&&T(D)&&setTimeout(()=>{T(D)?.focus()},0)});async function re(){const te=T(y)||"";if(te===""){P(m,!1),P(y,"");return}const se=te.trim();if(se===""){P(m,!1),P(y,"");return}try{const He=await Md(se);P(y,""),P(m,!1),setTimeout(()=>{const Ce=document.querySelector(`[data-list-id="${He}"]`);if(Ce){const Pe=Ce.querySelector(".add-task-container");if(Pe){const Ge=Pe.querySelector('span[role="button"]');Ge&&setTimeout(()=>{Ge.click()},50)}}},150)}catch(He){console.error("Error creating list:",He)}}function ce(){P(w,!0)}function J(te){te.key==="Escape"&&(P(w,!1),P(S,""))}et(()=>{if(!T(w))return;function te(He){if(T(_)&&T(_).contains(He.target))return;const Ce=He.target.closest("button");Ce&&Ce.textContent?.trim()==="Save"||(!T(S)||T(S).trim()==="")&&(P(w,!1),P(S,""))}const se=setTimeout(()=>{document.addEventListener("click",te)},0);return()=>{clearTimeout(se),document.removeEventListener("click",te)}}),et(()=>{T(w)&&T(_)&&setTimeout(()=>{T(_)?.focus(),T(_)instanceof HTMLTextAreaElement&&(T(_).style.height="auto",T(_).style.height=`${Math.min(T(_).scrollHeight,160)}px`)},0)}),et(()=>{if(T(_)&&T(_)instanceof HTMLTextAreaElement){const te=()=>{T(_).style.height="auto",T(_).style.height=`${Math.min(T(_).scrollHeight,160)}px`};return T(_).addEventListener("input",te),()=>{T(_).removeEventListener("input",te)}}});async function ae(){const te=T(S)||"";if(te===""){P(w,!1),P(S,"");return}const se=te.trim(),He=se===""&&te.length>0;let Ce;He?Ce="":Ce=se;try{const Pe=await dl(null,Ce);P(S,""),P(w,!1);const rt=(await je.tasks.get(Pe))?.listId;rt&&setTimeout(()=>{const Et=document.querySelector(`[data-list-id="${rt}"]`);if(Et){const Je=Et.querySelector(".add-task-container");if(Je){const Ue=Je.querySelector('span[role="button"]');Ue&&Ue instanceof HTMLElement&&setTimeout(()=>{Ue.click()},50)}}},150)}catch(Pe){console.error("Error creating task in unnamed list:",Pe)}}var oe=Mv(),_e=me(oe),be=me(_e);be.__click=M;var we=ue(_e,2),ge=me(we),Te=me(ge),Oe=me(Te);{var $e=te=>{var se=Av();xe(te,se)},nt=te=>{var se=rr(),He=ut(se);{var Ce=Ge=>{var rt=Sv();xe(Ge,rt)},Pe=Ge=>{var rt=rr(),Et=ut(rt);{var Je=Ue=>{var Ye=Rv(),W=ut(Ye);zo(W,1,a,Bu,(de,Re)=>{{let Ke=ei(()=>T(Re).name??"Unnamed list"),De=ei(()=>T(v)[T(Re).id]||"");_v(de,{get listId(){return T(Re).id},get listName(){return T(Ke)},get newTaskInput(){return T(De)},onInputChange:Be=>k(T(Re).id,Be)})}});var Q=ue(W,2);{var Z=de=>{var Re=Ov(),Ke=me(Re),De=me(Ke);De.__keydown=le=>{le.key==="Enter"&&!le.shiftKey?(le.preventDefault(),re()):le.key==="Escape"&&H(le)},un(De,le=>P(D,le),()=>T(D));var Be=ue(De,2);Be.__click=re,$o(De,()=>T(y),le=>P(y,le)),xe(de,Re)},Ie=de=>{var Re=Iv();Re.__click=K,Re.__keydown=L,xe(de,Re)};at(Q,de=>{T(m)?de(Z):de(Ie,!1)})}var Ee=ue(Q,2);{var Le=de=>{var Re=Cv(),Ke=ue(me(Re),4),De=me(Ke);De.__input=le=>P(S,le.currentTarget.value,!0),De.__keydown=le=>{le.key==="Enter"&&!le.shiftKey?(le.preventDefault(),ae()):le.key==="Escape"&&J(le)},un(De,le=>P(_,le),()=>T(_));var Be=ue(De,2);Be.__click=ae,Dt(()=>Vi(De,T(S))),xe(de,Re)},fe=de=>{var Re=Pv(),Ke=ue(me(Re),4);Ke.__click=ce,Ke.__keydown=De=>{(De.key==="Enter"||De.key===" ")&&(De.preventDefault(),ce())},xe(de,Re)};at(Ee,de=>{T(w)?de(Le):de(fe,!1)})}xe(Ue,Ye)};at(Et,Ue=>{Array.isArray(a())&&Ue(Je)},!0)}xe(Ge,rt)};at(He,Ge=>{Array.isArray(a())&&a().length===0?Ge(Ce):Ge(Pe,!1)},!0)}xe(te,se)};at(Oe,te=>{a()===void 0||a()===null?te($e):te(nt,!1)})}var wt=ue(we,2);Dv(wt,{}),xe(e,oe),or(),c()}Cr(["click","keydown","input"]);const Nv=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],Fv=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function Kv(){try{if(await je.lists.count()>0)return;await je.lists.bulkAdd(Nv),await je.tasks.bulkAdd(Fv),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await Kv().catch(console.error),hd(Lv,{target:document.getElementById("app")})))();
