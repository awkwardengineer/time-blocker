(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();const Hf="production",le=!Hf.toLowerCase().startsWith("prod");var As=Array.isArray,jf=Array.prototype.indexOf,Is=Array.from,vr=Object.defineProperty,Cr=Object.getOwnPropertyDescriptor,Uf=Object.getOwnPropertyDescriptors,zf=Object.prototype,Vf=Array.prototype,il=Object.getPrototypeOf,Au=Object.isExtensible;const Ma=()=>{};function Yf(t){for(var e=0;e<t.length;e++)t[e]()}function al(){var t,e,i=new Promise((a,s)=>{t=a,e=s});return{promise:i,resolve:t,reject:e}}const Mt=2,Ds=4,Cs=8,ol=1<<24,Yn=16,Wn=32,Rr=64,ro=128,xn=512,Ft=1024,Xt=2048,qn=4096,on=8192,Nn=16384,Ls=32768,ri=65536,Ra=1<<17,sl=1<<18,fi=1<<19,Wf=1<<20,pr=32768,hs=1<<21,io=1<<22,cr=1<<23,Lr=Symbol("$state"),qf=Symbol("legacy props"),Gf=Symbol(""),ul=Symbol("proxy path"),Zr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ll(t){if(le){const e=new Error(`lifecycle_outside_component
\`${t}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Xf(){if(le){const t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Iu(){if(le){const t=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Qf(){if(le){const t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function Zf(t){if(le){const e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Jf(){if(le){const t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $f(t){if(le){const e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function ed(){if(le){const t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function td(t){if(le){const e=new Error(`props_invalid_value
Cannot do \`bind:${t}={undefined}\` when \`${t}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_invalid_value")}function nd(t){if(le){const e=new Error(`props_rest_readonly
Rest element properties of \`$props()\` such as \`${t}\` are readonly
https://svelte.dev/e/props_rest_readonly`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_rest_readonly")}function rd(t){if(le){const e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function id(){if(le){const t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ad(){if(le){const t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function od(){if(le){const t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function sd(){if(le){const t=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const cl=1,fl=2,dl=4,ud=8,ld=16,cd=1,fd=4,dd=8,hd=16,vd=1,pd=2,Ct=Symbol(),md=Symbol("filename"),gd="http://www.w3.org/1999/xhtml",yd="@attach";var Ps="font-weight: bold",Os="font-weight: normal";function bd(){le?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Ps,Os):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Xo(t){le?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Ps,Os):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function _d(){le?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Ps,Os):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function hl(t){return t===this.v}function wd(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function vl(t){return!wd(t,this.v)}let Ed=!1;function In(t,e){return t.label=e,pl(t.v,e),t}function pl(t,e){return t?.[ul]?.(e),t}function xd(t){const e=new Error,i=kd();return i.length===0?null:(i.unshift(`
`),vr(e,"stack",{value:i.join(`
`)}),vr(e,"name",{value:t}),e)}function kd(){const t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const e=new Error().stack;if(Error.stackTraceLimit=t,!e)return[];const i=e.split(`
`),a=[];for(let s=0;s<i.length;s++){const l=i[s],f=l.replaceAll("\\","/");if(l.trim()!=="Error"){if(l.includes("validate_each_keys"))return[];f.includes("svelte/src/internal")||f.includes("node_modules/.vite")||a.push(l)}}return a}let Ht=null;function ii(t){Ht=t}let ai=null;function Ka(t){ai=t}let ji=null;function Du(t){ji=t}function Gn(t,e=!1,i){Ht={p:Ht,i:!1,c:null,e:null,s:t,x:null,l:null},le&&(Ht.function=i,ji=i)}function Xn(t){var e=Ht,i=e.e;if(i!==null){e.e=null;for(var a of i)Pl(a)}return e.i=!0,Ht=e.p,le&&(ji=Ht?.function??null),{}}function ml(){return!0}let Ar=[];function gl(){var t=Ar;Ar=[],Yf(t)}function Kr(t){if(Ar.length===0&&!Ci){var e=Ar;queueMicrotask(()=>{e===Ar&&gl()})}Ar.push(t)}function Td(){for(;Ar.length>0;)gl()}const vs=new WeakMap;function yl(t){var e=Qe;if(e===null)return qe.f|=cr,t;if(le&&t instanceof Error&&!vs.has(t)&&vs.set(t,Sd(t,e)),(e.f&Ls)===0){if((e.f&ro)===0)throw le&&!e.parent&&t instanceof Error&&bl(t),t;e.b.error(t)}else oi(t,e)}function oi(t,e){for(;e!==null;){if((e.f&ro)!==0)try{e.b.error(t);return}catch(i){t=i}e=e.parent}throw le&&t instanceof Error&&bl(t),t}function Sd(t,e){const i=Cr(t,"message");if(!(i&&!i.configurable)){for(var a=Ks?"  ":"	",s=`
${a}in ${e.fn?.name||"<unknown>"}`,l=e.ctx;l!==null;)s+=`
${a}in ${l.function?.[md].split("/").pop()}`,l=l.p;return{message:t.message+`
${s}
`,stack:t.stack?.split(`
`).filter(f=>!f.includes("svelte/src/internal")).join(`
`)}}}function bl(t){const e=vs.get(t);e&&(vr(t,"message",{value:e.message}),vr(t,"stack",{value:e.stack}))}const ba=new Set;let nt=null,Sa=null,pn=null,vn=[],ao=null,ps=!1,Ci=!1;class Cn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){vn=[],Sa=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of e)this.#o(a,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(Sa=this,nt=null,Cu(i.render_effects),Cu(i.effects),Sa=null,this.#u?.resolve()),pn=null}#o(e,i){e.f^=Ft;for(var a=e.first;a!==null;){var s=a.f,l=(s&(Wn|Rr))!==0,f=l&&(s&Ft)!==0,h=f||(s&on)!==0||this.skipped_effects.has(a);if((a.f&ro)!==0&&a.b?.is_pending()&&(i={parent:i,effect:a,effects:[],render_effects:[],block_effects:[]}),!h&&a.fn!==null){l?a.f^=Ft:(s&Ds)!==0?i.effects.push(a):zi(a)&&((a.f&Yn)!==0&&i.block_effects.push(a),Hi(a));var v=a.first;if(v!==null){a=v;continue}}var m=a.parent;for(a=a.next;a===null&&m!==null;)m===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),a=m.next,m=m.parent}}#s(e){for(const i of e)((i.f&Xt)!==0?this.#a:this.#i).push(i),this.#l(i.deps),jt(i,Ft)}#l(e){if(e!==null)for(const i of e)(i.f&Mt)===0||(i.f&pr)===0||(i.f^=pr,this.#l(i.deps))}capture(e,i){this.previous.has(e)||this.previous.set(e,i),(e.f&cr)===0&&(this.current.set(e,e.v),pn?.set(e,e.v))}activate(){nt=this,this.apply()}deactivate(){nt===this&&(nt=null,pn=null)}flush(){if(this.activate(),vn.length>0){if(_l(),nt!==null&&nt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#c(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(ba.size>1){this.previous.clear();var e=pn,i=!0,a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const l of ba){if(l===this){i=!1;continue}const f=[];for(const[v,m]of this.current){if(l.current.has(v))if(i&&m!==l.current.get(v))l.current.set(v,m);else continue;f.push(v)}if(f.length===0)continue;const h=[...l.current.keys()].filter(v=>!this.current.has(v));if(h.length>0){var s=vn;vn=[];const v=new Set,m=new Map;for(const E of f)wl(E,h,v,m);if(vn.length>0){nt=l,l.apply();for(const E of vn)l.#o(E,a);l.deactivate()}vn=s}}nt=null,pn=e}this.committed=!0,ba.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#a)jt(e,Xt),Or(e);for(const e of this.#i)jt(e,qn),Or(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#u??=al()).promise}static ensure(){if(nt===null){const e=nt=new Cn;ba.add(nt),Ci||Cn.enqueue(()=>{nt===e&&e.flush()})}return nt}static enqueue(e){Kr(e)}apply(){}}function Ad(t){var e=Ci;Ci=!0;try{for(var i;;){if(Td(),vn.length===0&&(nt?.flush(),vn.length===0))return ao=null,i;_l()}}finally{Ci=e}}function _l(){var t=dr;ps=!0;var e=le?new Set:null;try{var i=0;for(Fa(!0);vn.length>0;){var a=Cn.ensure();if(i++>1e3){if(le){var s=new Map;for(const f of a.current.keys())for(const[h,v]of f.updated??[]){var l=s.get(h);l||(l={error:v.error,count:0},s.set(h,l)),l.count+=v.count}for(const f of s.values())f.error&&console.error(f.error)}Id()}if(a.process(vn),fr.clear(),le)for(const f of a.current.keys())e.add(f)}}finally{if(ps=!1,Fa(t),ao=null,le)for(const f of e)f.updated=null}}function Id(){try{ed()}catch(t){le&&vr(t,"stack",{value:""}),oi(t,ao)}}let Bn=null;function Cu(t){var e=t.length;if(e!==0){for(var i=0;i<e;){var a=t[i++];if((a.f&(Nn|on))===0&&zi(a)&&(Bn=new Set,Hi(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null&&a.ac===null?Kl(a):a.fn=null),Bn?.size>0)){fr.clear();for(const s of Bn){if((s.f&(Nn|on))!==0)continue;const l=[s];let f=s.parent;for(;f!==null;)Bn.has(f)&&(Bn.delete(f),l.push(f)),f=f.parent;for(let h=l.length-1;h>=0;h--){const v=l[h];(v.f&(Nn|on))===0&&Hi(v)}}Bn.clear()}}Bn=null}}function wl(t,e,i,a){if(!i.has(t)&&(i.add(t),t.reactions!==null))for(const s of t.reactions){const l=s.f;(l&Mt)!==0?wl(s,e,i,a):(l&(io|Yn))!==0&&(l&Xt)===0&&El(s,e,a)&&(jt(s,Xt),Or(s))}}function El(t,e,i){const a=i.get(t);if(a!==void 0)return a;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if((s.f&Mt)!==0&&El(s,e,i))return i.set(s,!0),!0}return i.set(t,!1),!1}function Or(t){for(var e=ao=t;e.parent!==null;){e=e.parent;var i=e.f;if(ps&&e===Qe&&(i&Yn)!==0&&(i&sl)===0)return;if((i&(Rr|Wn))!==0){if((i&Ft)===0)return;e.f^=Ft}}vn.push(e)}function Dd(t){let e=0,i=Mr(0),a;return le&&In(i,"createSubscriber version"),()=>{Ni()&&(y(i),Ns(()=>(e===0&&(a=Nr(()=>t(()=>Li(i)))),e+=1,()=>{Kr(()=>{e-=1,e===0&&(a?.(),a=void 0,Li(i))})})))}}var Cd=ri|fi|ro;function Ld(t,e,i){new Pd(t,e,i)}class Pd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#b=Dd(()=>(this.#d=Mr(this.#f),le&&In(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(e,i,a){this.#t=e,this.#n=i,this.#u=a,this.parent=Qe.b,this.#e=!!this.#n.pending,this.#a=Fs(()=>{Qe.b=this;{var s=this.#g();try{this.#i=Wt(()=>a(s))}catch(l){this.error(l)}this.#h>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},Cd)}#_(){try{this.#i=Wt(()=>this.#u(this.#t))}catch(e){this.error(e)}this.#e=!1}#w(){const e=this.#n.pending;e&&(this.#o=Wt(()=>e(this.#t)),Cn.enqueue(()=>{var i=this.#g();this.#i=this.#p(()=>(Cn.ensure(),Wt(()=>this.#u(i)))),this.#h>0?this.#m():(ei(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#g(){var e=this.#t;return this.#e&&(this.#c=Un(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var i=Qe,a=qe,s=Ht;En(this.#a),Gt(this.#a),ii(this.#a.ctx);try{return e()}catch(l){return yl(l),null}finally{En(i),Gt(a),ii(s)}}#m(){const e=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Fl(this.#i,this.#l)),this.#o===null&&(this.#o=Wt(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}this.#h+=e,this.#h===0&&(this.#e=!1,this.#o&&ei(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(e){this.#y(e),this.#f+=e,this.#d&&ui(this.#d,this.#f)}get_effect_pending(){return this.#b(),y(this.#d)}error(e){var i=this.#n.onerror;let a=this.#n.failed;if(this.#v||!i&&!a)throw e;this.#i&&(Ot(this.#i),this.#i=null),this.#o&&(Ot(this.#o),this.#o=null),this.#s&&(Ot(this.#s),this.#s=null);var s=!1,l=!1;const f=()=>{if(s){_d();return}s=!0,l&&sd(),Cn.ensure(),this.#f=0,this.#s!==null&&ei(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,Wt(()=>this.#u(this.#t)))),this.#h>0?this.#m():this.#e=!1};var h=qe;try{Gt(null),l=!0,i?.(e,f),l=!1}catch(v){oi(v,this.#a&&this.#a.parent)}finally{Gt(h)}a&&Kr(()=>{this.#s=this.#p(()=>{Cn.ensure(),this.#v=!0;try{return Wt(()=>{a(this.#t,()=>e,()=>f)})}catch(v){return oi(v,this.#a.parent),null}finally{this.#v=!1}})})}}function Aa(t,e){return e}function Od(t,e,i){for(var a=[],s=e.length,l=0;l<s;l++)Hs(e[l].e,a,!0);Bl(a,()=>{var f=a.length===0&&i!==null;if(f){var h=i,v=h.parentNode;qd(v),v.append(h),t.items.clear(),Dn(t,e[0].prev,e[s-1].next)}for(var m=0;m<s;m++){var E=e[m];f||(t.items.delete(E.k),Dn(t,E.prev,E.next)),Ot(E.e,!f)}t.first===e[0]&&(t.first=e[0].prev)})}function $r(t,e,i,a,s,l=null){var f=t,h=new Map,v=null,m=(e&dl)!==0,E=(e&cl)!==0,_=(e&fl)!==0;if(m){var w=t;f=w.appendChild(Un())}var x=null,L=kl(()=>{var B=i();return As(B)?B:B==null?[]:Is(B)}),S,C=!0;function T(){Md(V,S,f,e,a),x!==null&&(S.length===0?(x.fragment?(f.before(x.fragment),x.fragment=null):js(x.effect),K.first=x.effect):ei(x.effect,()=>{x=null}))}var K=Fs(()=>{S=y(L);for(var B=S.length,q=new Set,$=nt,G=null,F=Ll(),Z=0;Z<B;Z+=1){var ae=S[Z],W=a(ae,Z),ye=C?null:h.get(W);ye?(E&&ui(ye.v,ae),_?ui(ye.i,Z):ye.i=Z,F&&$.skipped_effects.delete(ye.e)):(ye=Rd(C?f:null,G,ae,W,Z,s,e,i),C&&(ye.o=!0,G===null?v=ye:G.next=ye,G=ye),h.set(W,ye)),q.add(W)}if(B===0&&l&&!x)if(C)x={fragment:null,effect:Wt(()=>l(f))};else{var ve=document.createDocumentFragment(),pe=Un();ve.append(pe),x={fragment:ve,effect:Wt(()=>l(pe))}}if(!C)if(F){for(const[Pe,Xe]of h)q.has(Pe)||$.skipped_effects.add(Xe.e);$.oncommit(T),$.ondiscard(()=>{})}else T();y(L)}),V={effect:K,items:h,first:v};C=!1}function Md(t,e,i,a,s){var l=(a&ud)!==0,f=e.length,h=t.items,v=t.first,m,E=null,_,w=[],x=[],L,S,C,T;if(l)for(T=0;T<f;T+=1)L=e[T],S=s(L,T),C=h.get(S),C.o&&(C.a?.measure(),(_??=new Set).add(C));for(T=0;T<f;T+=1){if(L=e[T],S=s(L,T),C=h.get(S),t.first??=C,!C.o){C.o=!0;var K=E?E.next:v;Dn(t,E,C),Dn(t,C,K),Qo(C,K,i),E=C,w=[],x=[],v=E.next;continue}if((C.e.f&on)!==0&&(js(C.e),l&&(C.a?.unfix(),(_??=new Set).delete(C))),C!==v){if(m!==void 0&&m.has(C)){if(w.length<x.length){var V=x[0],B;E=V.prev;var q=w[0],$=w[w.length-1];for(B=0;B<w.length;B+=1)Qo(w[B],V,i);for(B=0;B<x.length;B+=1)m.delete(x[B]);Dn(t,q.prev,$.next),Dn(t,E,q),Dn(t,$,V),v=V,E=$,T-=1,w=[],x=[]}else m.delete(C),Qo(C,v,i),Dn(t,C.prev,C.next),Dn(t,C,E===null?t.first:E.next),Dn(t,E,C),E=C;continue}for(w=[],x=[];v!==null&&v.k!==S;)(v.e.f&on)===0&&(m??=new Set).add(v),x.push(v),v=v.next;if(v===null)continue;C=v}w.push(C),E=C,v=C.next}if(v!==null||m!==void 0){for(var G=m===void 0?[]:Is(m);v!==null;)(v.e.f&on)===0&&G.push(v),v=v.next;var F=G.length;if(F>0){var Z=(a&dl)!==0&&f===0?i:null;if(l){for(T=0;T<F;T+=1)G[T].a?.measure();for(T=0;T<F;T+=1)G[T].a?.fix()}Od(t,G,Z)}}l&&Kr(()=>{if(_!==void 0)for(C of _)C.a?.apply()})}function Rd(t,e,i,a,s,l,f,h){var v=(f&cl)!==0,m=(f&ld)===0,E=v?m?Sl(i,!1,!1):Mr(i):i,_=(f&fl)===0?s:Mr(s);le&&v&&(E.trace=()=>{var L=typeof _=="number"?s:_.v;h()[L]});var w={i:_,v:E,k:a,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var x=document.createDocumentFragment();x.append(t=Un())}return w.e=Wt(()=>l(t,E,_,h)),e!==null&&(e.next=w),w}finally{}}function Qo(t,e,i){for(var a=t.next?t.next.e.nodes_start:i,s=e?e.e.nodes_start:i,l=t.e.nodes_start;l!==null&&l!==a;){var f=Ui(l);s.before(l),l=f}}function Dn(t,e,i){e===null?(t.first=i,t.effect.first=i&&i.e):(e.e===t.effect.last&&i!==null&&(t.effect.last=i.e),e.e.next&&(e.e.next.prev=null),e.next=i,e.e.next=i&&i.e),i===null?t.effect.last=e&&e.e:(i.e===t.effect.last&&e===null&&(t.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=e,i.e.prev=e&&e.e)}function xl(t,e,i,a){const s=oo;if(i.length===0&&t.length===0){a(e.map(s));return}var l=nt,f=Qe,h=Kd();function v(){Promise.all(i.map(m=>Nd(m))).then(m=>{h();try{a([...e.map(s),...m])}catch(E){(f.f&Nn)===0&&oi(E,f)}l?.deactivate(),Ba()}).catch(m=>{oi(m,f)})}t.length>0?Promise.all(t).then(()=>{h();try{return v()}finally{l?.deactivate(),Ba()}}):v()}function Kd(){var t=Qe,e=qe,i=Ht,a=nt;if(le)var s=ai;return function(f=!0){En(t),Gt(e),ii(i),f&&a?.activate(),le&&Ka(s)}}function Ba(){En(null),Gt(null),ii(null),le&&Ka(null)}const Bd=new Set;function oo(t){var e=Mt|Xt,i=qe!==null&&(qe.f&Mt)!==0?qe:null;return Qe!==null&&(Qe.f|=fi),{ctx:Ht,deps:null,effects:null,equals:hl,f:e,fn:t,reactions:null,rv:0,v:Ct,wv:0,parent:i??Qe,ac:null}}function Nd(t,e){let i=Qe;i===null&&Xf();var a=i.b,s=void 0,l=Mr(Ct),f=!qe,h=new Map;return eh(()=>{var v=al();s=v.promise;try{Promise.resolve(t()).then(v.resolve,v.reject).then(()=>{m===nt&&m.committed&&m.deactivate(),Ba()})}catch(w){v.reject(w),Ba()}var m=nt;if(f){var E=!a.is_pending();a.update_pending_count(1),m.increment(E),h.get(m)?.reject(Zr),h.delete(m),h.set(m,v)}const _=(w,x=void 0)=>{if(m.activate(),x)x!==Zr&&(l.f|=cr,ui(l,x));else{(l.f&cr)!==0&&(l.f^=cr),ui(l,w);for(const[L,S]of h){if(h.delete(L),L===m)break;S.reject(Zr)}}f&&(a.update_pending_count(-1),m.decrement(E))};v.promise.then(_,w=>_(null,w||"unknown"))}),uo(()=>{for(const v of h.values())v.reject(Zr)}),le&&(l.f|=io),new Promise(v=>{function m(E){function _(){E===s?v(l):m(s)}E.then(_,_)}m(s)})}function gt(t){const e=oo(t);return Hl(e),e}function kl(t){const e=oo(t);return e.equals=vl,e}function ms(t){var e=t.effects;if(e!==null){t.effects=null;for(var i=0;i<e.length;i+=1)Ot(e[i])}}let Zo=[];function Fd(t){for(var e=t.parent;e!==null;){if((e.f&Mt)===0)return(e.f&Nn)===0?e:null;e=e.parent}return null}function Ms(t){var e,i=Qe;if(En(Fd(t)),le){let a=si;Lu(new Set);try{Zo.includes(t)&&Qf(),Zo.push(t),t.f&=~pr,ms(t),e=gs(t)}finally{En(i),Lu(a),Zo.pop()}}else try{t.f&=~pr,ms(t),e=gs(t)}finally{En(i)}return e}function Tl(t){var e=Ms(t);if(t.equals(e)||(nt?.is_fork||(t.v=e),t.wv=Ul()),!Br)if(pn!==null)(Ni()||nt?.is_fork)&&pn.set(t,e);else{var i=(t.f&xn)===0?qn:Ft;jt(t,i)}}let si=new Set;const fr=new Map;function Lu(t){si=t}let Rs=!1;function Hd(){Rs=!0}function Mr(t,e){var i={f:0,v:t,reactions:null,equals:hl,rv:0,wv:0};return i}function ge(t,e){const i=Mr(t);return Hl(i),i}function Sl(t,e=!1,i=!0){const a=Mr(t);return e||(a.equals=vl),a}function R(t,e,i=!1){qe!==null&&(!Ln||(qe.f&Ra)!==0)&&ml()&&(qe.f&(Mt|Yn|io|Ra))!==0&&!Fn?.includes(t)&&od();let a=i?an(e):e;return le&&pl(a,t.label),ui(t,a)}function ui(t,e){if(!t.equals(e)){var i=t.v;Br?fr.set(t,e):fr.set(t,i),t.v=e;var a=Cn.ensure();if(a.capture(t,i),le){if(Qe!==null){t.updated??=new Map;const s=(t.updated.get("")?.count??0)+1;if(t.updated.set("",{error:null,count:s}),s>5){const l=xd("updated at");if(l!==null){let f=t.updated.get(l.stack);f||(f={error:l,count:0},t.updated.set(l.stack,f)),f.count++}}}Qe!==null&&(t.set_during_effect=!0)}(t.f&Mt)!==0&&((t.f&Xt)!==0&&Ms(t),jt(t,(t.f&xn)!==0?Ft:qn)),t.wv=Ul(),Il(t,Xt),Qe!==null&&(Qe.f&Ft)!==0&&(Qe.f&(Wn|Rr))===0&&(dn===null?rh([t]):dn.push(t)),!a.is_fork&&si.size>0&&!Rs&&Al()}return e}function Al(){Rs=!1;var t=dr;Fa(!0);const e=Array.from(si);try{for(const i of e)(i.f&Ft)!==0&&jt(i,qn),zi(i)&&Hi(i)}finally{Fa(t)}si.clear()}function Li(t){R(t,t.v+1)}function Il(t,e){var i=t.reactions;if(i!==null)for(var a=i.length,s=0;s<a;s++){var l=i[s],f=l.f;if(le&&(f&Ra)!==0){si.add(l);continue}var h=(f&Xt)===0;if(h&&jt(l,e),(f&Mt)!==0){var v=l;pn?.delete(v),(f&pr)===0&&(f&xn&&(l.f|=pr),Il(v,qn))}else h&&((f&Yn)!==0&&Bn!==null&&Bn.add(l),Or(l))}}const jd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function an(t){if(typeof t!="object"||t===null||Lr in t)return t;const e=il(t);if(e!==zf&&e!==Vf)return t;var i=new Map,a=As(t),s=ge(0),l=Pr,f=E=>{if(Pr===l)return E();var _=qe,w=Pr;Gt(null),Ru(l);var x=E();return Gt(_),Ru(w),x};a&&(i.set("length",ge(t.length)),le&&(t=Vd(t)));var h="";let v=!1;function m(E){if(!v){v=!0,h=E,In(s,`${h} version`);for(const[_,w]of i)In(w,xr(h,_));v=!1}}return new Proxy(t,{defineProperty(E,_,w){(!("value"in w)||w.configurable===!1||w.enumerable===!1||w.writable===!1)&&id();var x=i.get(_);return x===void 0?x=f(()=>{var L=ge(w.value);return i.set(_,L),le&&typeof _=="string"&&In(L,xr(h,_)),L}):R(x,w.value,!0),!0},deleteProperty(E,_){var w=i.get(_);if(w===void 0){if(_ in E){const x=f(()=>ge(Ct));i.set(_,x),Li(s),le&&In(x,xr(h,_))}}else R(w,Ct),Li(s);return!0},get(E,_,w){if(_===Lr)return t;if(le&&_===ul)return m;var x=i.get(_),L=_ in E;if(x===void 0&&(!L||Cr(E,_)?.writable)&&(x=f(()=>{var C=an(L?E[_]:Ct),T=ge(C);return le&&In(T,xr(h,_)),T}),i.set(_,x)),x!==void 0){var S=y(x);return S===Ct?void 0:S}return Reflect.get(E,_,w)},getOwnPropertyDescriptor(E,_){var w=Reflect.getOwnPropertyDescriptor(E,_);if(w&&"value"in w){var x=i.get(_);x&&(w.value=y(x))}else if(w===void 0){var L=i.get(_),S=L?.v;if(L!==void 0&&S!==Ct)return{enumerable:!0,configurable:!0,value:S,writable:!0}}return w},has(E,_){if(_===Lr)return!0;var w=i.get(_),x=w!==void 0&&w.v!==Ct||Reflect.has(E,_);if(w!==void 0||Qe!==null&&(!x||Cr(E,_)?.writable)){w===void 0&&(w=f(()=>{var S=x?an(E[_]):Ct,C=ge(S);return le&&In(C,xr(h,_)),C}),i.set(_,w));var L=y(w);if(L===Ct)return!1}return x},set(E,_,w,x){var L=i.get(_),S=_ in E;if(a&&_==="length")for(var C=w;C<L.v;C+=1){var T=i.get(C+"");T!==void 0?R(T,Ct):C in E&&(T=f(()=>ge(Ct)),i.set(C+"",T),le&&In(T,xr(h,C)))}if(L===void 0)(!S||Cr(E,_)?.writable)&&(L=f(()=>ge(void 0)),le&&In(L,xr(h,_)),R(L,an(w)),i.set(_,L));else{S=L.v!==Ct;var K=f(()=>an(w));R(L,K)}var V=Reflect.getOwnPropertyDescriptor(E,_);if(V?.set&&V.set.call(x,w),!S){if(a&&typeof _=="string"){var B=i.get("length"),q=Number(_);Number.isInteger(q)&&q>=B.v&&R(B,q+1)}Li(s)}return!0},ownKeys(E){y(s);var _=Reflect.ownKeys(E).filter(L=>{var S=i.get(L);return S===void 0||S.v!==Ct});for(var[w,x]of i)x.v!==Ct&&!(w in E)&&_.push(w);return _},setPrototypeOf(){ad()}})}function xr(t,e){return typeof e=="symbol"?`${t}[Symbol(${e.description??""})]`:jd.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function Pi(t){try{if(t!==null&&typeof t=="object"&&Lr in t)return t[Lr]}catch{}return t}function Ud(t,e){return Object.is(Pi(t),Pi(e))}const zd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Vd(t){return new Proxy(t,{get(e,i,a){var s=Reflect.get(e,i,a);return zd.has(i)?function(...l){Hd();var f=s.apply(this,l);return Al(),f}:s}})}function Yd(){const t=Array.prototype,e=Array.__svelte_cleanup;e&&e();const{indexOf:i,lastIndexOf:a,includes:s}=t;t.indexOf=function(l,f){const h=i.call(this,l,f);if(h===-1){for(let v=f??0;v<this.length;v+=1)if(Pi(this[v])===l){Xo("array.indexOf(...)");break}}return h},t.lastIndexOf=function(l,f){const h=a.call(this,l,f??this.length-1);if(h===-1){for(let v=0;v<=(f??this.length-1);v+=1)if(Pi(this[v])===l){Xo("array.lastIndexOf(...)");break}}return h},t.includes=function(l,f){const h=s.call(this,l,f);if(!h){for(let v=0;v<this.length;v+=1)if(Pi(this[v])===l){Xo("array.includes(...)");break}}return h},Array.__svelte_cleanup=()=>{t.indexOf=i,t.lastIndexOf=a,t.includes=s}}var Pu,Ks,Dl,Cl;function Wd(){if(Pu===void 0){Pu=window,Ks=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,i=Text.prototype;Dl=Cr(e,"firstChild").get,Cl=Cr(e,"nextSibling").get,Au(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Au(i)&&(i.__t=void 0),le&&(t.__svelte_meta=null,Yd())}}function Un(t=""){return document.createTextNode(t)}function Na(t){return Dl.call(t)}function Ui(t){return Cl.call(t)}function we(t,e){return Na(t)}function Pt(t,e=!1){{var i=Na(t);return i instanceof Comment&&i.data===""?Ui(i):i}}function He(t,e=1,i=!1){let a=t;for(;e--;)a=Ui(a);return a}function qd(t){t.textContent=""}function Ll(){return!1}function Gd(t,e){if(e){const i=document.body;t.autofocus=!0,Kr(()=>{document.activeElement===i&&t.focus()})}}let Ou=!1;function Xd(){Ou||(Ou=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function so(t){var e=qe,i=Qe;Gt(null),En(null);try{return t()}finally{Gt(e),En(i)}}function Qd(t,e,i,a=i){t.addEventListener(e,()=>so(i));const s=t.__on_r;s?t.__on_r=()=>{s(),a(!0)}:t.__on_r=()=>a(!0),Xd()}function Zd(t){Qe===null&&(qe===null&&$f(t),Jf()),Br&&Zf(t)}function Jd(t,e){var i=e.last;i===null?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}function Mn(t,e,i){var a=Qe;if(le)for(;a!==null&&(a.f&Ra)!==0;)a=a.parent;a!==null&&(a.f&on)!==0&&(t|=on);var s={ctx:Ht,deps:null,nodes_start:null,nodes_end:null,f:t|Xt|xn,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(le&&(s.component_function=ji),i)try{Hi(s),s.f|=Ls}catch(h){throw Ot(s),h}else e!==null&&Or(s);var l=s;if(i&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&fi)===0&&(l=l.first,(t&Yn)!==0&&(t&ri)!==0&&l!==null&&(l.f|=ri)),l!==null&&(l.parent=a,a!==null&&Jd(l,a),qe!==null&&(qe.f&Mt)!==0&&(t&Rr)===0)){var f=qe;(f.effects??=[]).push(l)}return s}function Ni(){return qe!==null&&!Ln}function uo(t){const e=Mn(Cs,null,!1);return jt(e,Ft),e.teardown=t,e}function We(t){Zd("$effect"),le&&vr(t,"name",{value:"$effect"});var e=Qe.f,i=!qe&&(e&Wn)!==0&&(e&Ls)===0;if(i){var a=Ht;(a.e??=[]).push(t)}else return Pl(t)}function Pl(t){return Mn(Ds|Wf,t,!1)}function $d(t){Cn.ensure();const e=Mn(Rr|fi,t,!0);return(i={})=>new Promise(a=>{i.outro?ei(e,()=>{Ot(e),a(void 0)}):(Ot(e),a(void 0))})}function Bs(t){return Mn(Ds,t,!1)}function eh(t){return Mn(io|fi,t,!0)}function Ns(t,e=0){return Mn(Cs|e,t,!0)}function xt(t,e=[],i=[],a=[]){xl(a,e,i,s=>{Mn(Cs,()=>t(...s.map(y)),!0)})}function Fs(t,e=0){var i=Mn(Yn|e,t,!0);return le&&(i.dev_stack=ai),i}function Ol(t,e=0){var i=Mn(ol|e,t,!0);return le&&(i.dev_stack=ai),i}function Wt(t){return Mn(Wn|fi,t,!0)}function Ml(t){var e=t.teardown;if(e!==null){const i=Br,a=qe;Mu(!0),Gt(null);try{e.call(null)}finally{Mu(i),Gt(a)}}}function Rl(t,e=!1){var i=t.first;for(t.first=t.last=null;i!==null;){const s=i.ac;s!==null&&so(()=>{s.abort(Zr)});var a=i.next;(i.f&Rr)!==0?i.parent=null:Ot(i,e),i=a}}function th(t){for(var e=t.first;e!==null;){var i=e.next;(e.f&Wn)===0&&Ot(e),e=i}}function Ot(t,e=!0){var i=!1;(e||(t.f&sl)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(nh(t.nodes_start,t.nodes_end),i=!0),Rl(t,e&&!i),Ha(t,0),jt(t,Nn);var a=t.transitions;if(a!==null)for(const l of a)l.stop();Ml(t);var s=t.parent;s!==null&&s.first!==null&&Kl(t),le&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function nh(t,e){for(;t!==null;){var i=t===e?null:Ui(t);t.remove(),t=i}}function Kl(t){var e=t.parent,i=t.prev,a=t.next;i!==null&&(i.next=a),a!==null&&(a.prev=i),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=i))}function ei(t,e,i=!0){var a=[];Hs(t,a,!0),Bl(a,()=>{i&&Ot(t),e&&e()})}function Bl(t,e){var i=t.length;if(i>0){var a=()=>--i||e();for(var s of t)s.out(a)}else e()}function Hs(t,e,i){if((t.f&on)===0){if(t.f^=on,t.transitions!==null)for(const f of t.transitions)(f.is_global||i)&&e.push(f);for(var a=t.first;a!==null;){var s=a.next,l=(a.f&ri)!==0||(a.f&Wn)!==0&&(t.f&Yn)!==0;Hs(a,e,l?i:!1),a=s}}}function js(t){Nl(t,!0)}function Nl(t,e){if((t.f&on)!==0){t.f^=on,(t.f&Ft)===0&&(jt(t,Xt),Or(t));for(var i=t.first;i!==null;){var a=i.next,s=(i.f&ri)!==0||(i.f&Wn)!==0;Nl(i,s?e:!1),i=a}if(t.transitions!==null)for(const l of t.transitions)(l.is_global||e)&&l.in()}}function Fl(t,e){for(var i=t.nodes_start,a=t.nodes_end;i!==null;){var s=i===a?null:Ui(i);e.append(i),i=s}}let dr=!1;function Fa(t){dr=t}let Br=!1;function Mu(t){Br=t}let qe=null,Ln=!1;function Gt(t){qe=t}let Qe=null;function En(t){Qe=t}let Fn=null;function Hl(t){qe!==null&&(Fn===null?Fn=[t]:Fn.push(t))}let zt=null,nn=0,dn=null;function rh(t){dn=t}let jl=1,Fi=0,Pr=Fi;function Ru(t){Pr=t}function Ul(){return++jl}function zi(t){var e=t.f;if((e&Xt)!==0)return!0;if(e&Mt&&(t.f&=~pr),(e&qn)!==0){var i=t.deps;if(i!==null)for(var a=i.length,s=0;s<a;s++){var l=i[s];if(zi(l)&&Tl(l),l.wv>t.wv)return!0}(e&xn)!==0&&pn===null&&jt(t,Ft)}return!1}function zl(t,e,i=!0){var a=t.reactions;if(a!==null&&!Fn?.includes(t))for(var s=0;s<a.length;s++){var l=a[s];(l.f&Mt)!==0?zl(l,e,!1):e===l&&(i?jt(l,Xt):(l.f&Ft)!==0&&jt(l,qn),Or(l))}}function gs(t){var e=zt,i=nn,a=dn,s=qe,l=Fn,f=Ht,h=Ln,v=Pr,m=t.f;zt=null,nn=0,dn=null,qe=(m&(Wn|Rr))===0?t:null,Fn=null,ii(t.ctx),Ln=!1,Pr=++Fi,t.ac!==null&&(so(()=>{t.ac.abort(Zr)}),t.ac=null);try{t.f|=hs;var E=t.fn,_=E(),w=t.deps;if(zt!==null){var x;if(Ha(t,nn),w!==null&&nn>0)for(w.length=nn+zt.length,x=0;x<zt.length;x++)w[nn+x]=zt[x];else t.deps=w=zt;if(dr&&Ni()&&(t.f&xn)!==0)for(x=nn;x<w.length;x++)(w[x].reactions??=[]).push(t)}else w!==null&&nn<w.length&&(Ha(t,nn),w.length=nn);if(ml()&&dn!==null&&!Ln&&w!==null&&(t.f&(Mt|qn|Xt))===0)for(x=0;x<dn.length;x++)zl(dn[x],t);return s!==null&&s!==t&&(Fi++,dn!==null&&(a===null?a=dn:a.push(...dn))),(t.f&cr)!==0&&(t.f^=cr),_}catch(L){return yl(L)}finally{t.f^=hs,zt=e,nn=i,dn=a,qe=s,Fn=l,ii(f),Ln=h,Pr=v}}function ih(t,e){let i=e.reactions;if(i!==null){var a=jf.call(i,t);if(a!==-1){var s=i.length-1;s===0?i=e.reactions=null:(i[a]=i[s],i.pop())}}i===null&&(e.f&Mt)!==0&&(zt===null||!zt.includes(e))&&(jt(e,qn),(e.f&xn)!==0&&(e.f^=xn,e.f&=~pr),ms(e),Ha(e,0))}function Ha(t,e){var i=t.deps;if(i!==null)for(var a=e;a<i.length;a++)ih(t,i[a])}function Hi(t){var e=t.f;if((e&Nn)===0){jt(t,Ft);var i=Qe,a=dr;if(Qe=t,dr=!0,le){var s=ji;Du(t.component_function);var l=ai;Ka(t.dev_stack??ai)}try{(e&(Yn|ol))!==0?th(t):Rl(t),Ml(t);var f=gs(t);t.teardown=typeof f=="function"?f:null,t.wv=jl;var h;le&&Ed&&(t.f&Xt)!==0&&t.deps}finally{dr=a,Qe=i,le&&(Du(s),Ka(l))}}}async function at(){await Promise.resolve(),Ad()}function y(t){var e=t.f,i=(e&Mt)!==0;if(qe!==null&&!Ln){var a=Qe!==null&&(Qe.f&Nn)!==0;if(!a&&!Fn?.includes(t)){var s=qe.deps;if((qe.f&hs)!==0)t.rv<Fi&&(t.rv=Fi,zt===null&&s!==null&&s[nn]===t?nn++:zt===null?zt=[t]:zt.includes(t)||zt.push(t));else{(qe.deps??=[]).push(t);var l=t.reactions;l===null?t.reactions=[qe]:l.includes(qe)||l.push(qe)}}}if(le&&Bd.delete(t),Br){if(fr.has(t))return fr.get(t);if(i){var f=t,h=f.v;return((f.f&Ft)===0&&f.reactions!==null||Yl(f))&&(h=Ms(f)),fr.set(f,h),h}}else i&&(!pn?.has(t)||nt?.is_fork&&!Ni())&&(f=t,zi(f)&&Tl(f),dr&&Ni()&&(f.f&xn)===0&&Vl(f));if(pn?.has(t))return pn.get(t);if((t.f&cr)!==0)throw t.v;return t.v}function Vl(t){if(t.deps!==null){t.f^=xn;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Mt)!==0&&(e.f&xn)===0&&Vl(e)}}function Yl(t){if(t.v===Ct)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(fr.has(e)||(e.f&Mt)!==0&&Yl(e))return!0;return!1}function Nr(t){var e=Ln;try{return Ln=!0,t()}finally{Ln=e}}const ah=-7169;function jt(t,e){t.f=t.f&ah|e}function oh(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const sh=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function uh(t){return sh.includes(t)}const lh={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function ch(t){return t=t.toLowerCase(),lh[t]??t}const fh=["touchstart","touchmove"];function dh(t){return fh.includes(t)}const Wl=new Set,ys=new Set;function ql(t,e,i,a={}){function s(l){if(a.capture||Si.call(e,l),!l.cancelBubble)return so(()=>i?.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Kr(()=>{e.addEventListener(t,s,a)}):e.addEventListener(t,s,a),s}function hr(t,e,i,a,s){var l={capture:a,passive:s},f=ql(t,e,i,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&uo(()=>{e.removeEventListener(t,f,l)})}function Fr(t){for(var e=0;e<t.length;e++)Wl.add(t[e]);for(var i of ys)i(t)}let Ku=null;function Si(t){var e=this,i=e.ownerDocument,a=t.type,s=t.composedPath?.()||[],l=s[0]||t.target;Ku=t;var f=0,h=Ku===t&&t.__root;if(h){var v=s.indexOf(h);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var m=s.indexOf(e);if(m===-1)return;v<=m&&(f=v)}if(l=s[f]||t.target,l!==e){vr(t,"currentTarget",{configurable:!0,get(){return l||i}});var E=qe,_=Qe;Gt(null),En(null);try{for(var w,x=[];l!==null;){var L=l.assignedSlot||l.parentNode||l.host||null;try{var S=l["__"+a];S!=null&&(!l.disabled||t.target===l)&&S.call(l,t)}catch(C){w?x.push(C):w=C}if(t.cancelBubble||L===e||L===null)break;l=L}if(w){for(let C of x)queueMicrotask(()=>{throw C});throw w}}finally{t.__root=e,delete t.currentTarget,Gt(E),En(_)}}}function hh(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ja(t,e){var i=Qe;i.nodes_start===null&&(i.nodes_start=t,i.nodes_end=e)}function Le(t,e){var i=(e&vd)!==0,a=(e&pd)!==0,s,l=!t.startsWith("<!>");return()=>{s===void 0&&(s=hh(l?t:"<!>"+t),i||(s=Na(s)));var f=a||Ks?document.importNode(s,!0):s.cloneNode(!0);if(i){var h=Na(f),v=f.lastChild;ja(h,v)}else ja(f,f);return f}}function _n(t=""){{var e=Un(t+"");return ja(e,e),e}}function Hn(){var t=document.createDocumentFragment(),e=document.createComment(""),i=Un();return t.append(e,i),ja(e,i),t}function ce(t,e){t!==null&&t.before(e)}function Ir(t,e){var i=e==null?"":typeof e=="object"?e+"":e;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=i+"")}function vh(t,e){return ph(t,e)}const qr=new Map;function ph(t,{target:e,anchor:i,props:a={},events:s,context:l,intro:f=!0}){Wd();var h=new Set,v=_=>{for(var w=0;w<_.length;w++){var x=_[w];if(!h.has(x)){h.add(x);var L=dh(x);e.addEventListener(x,Si,{passive:L});var S=qr.get(x);S===void 0?(document.addEventListener(x,Si,{passive:L}),qr.set(x,1)):qr.set(x,S+1)}}};v(Is(Wl)),ys.add(v);var m=void 0,E=$d(()=>{var _=i??e.appendChild(Un());return Ld(_,{pending:()=>{}},w=>{if(l){Gn({});var x=Ht;x.c=l}s&&(a.$$events=s),m=t(w,a)||{},l&&Xn()}),()=>{for(var w of h){e.removeEventListener(w,Si);var x=qr.get(w);--x===0?(document.removeEventListener(w,Si),qr.delete(w)):qr.set(w,x)}ys.delete(v),_!==i&&_.parentNode?.removeChild(_)}});return mh.set(m,E),m}let mh=new WeakMap;class gh{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(e,i=!0){this.anchor=e,this.#u=i}#a=()=>{var e=nt;if(this.#e.has(e)){var i=this.#e.get(e),a=this.#t.get(i);if(a)js(a),this.#n.delete(i);else{var s=this.#r.get(i);s&&(this.#t.set(i,s.effect),this.#r.delete(i),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[l,f]of this.#e){if(this.#e.delete(l),l===e)break;const h=this.#r.get(f);h&&(Ot(h.effect),this.#r.delete(f))}for(const[l,f]of this.#t){if(l===i||this.#n.has(l))continue;const h=()=>{if(Array.from(this.#e.values()).includes(l)){var m=document.createDocumentFragment();Fl(f,m),m.append(Un()),this.#r.set(l,{effect:f,fragment:m})}else Ot(f);this.#n.delete(l),this.#t.delete(l)};this.#u||!a?(this.#n.add(l),ei(f,h,!1)):h()}}};#i=e=>{this.#e.delete(e);const i=Array.from(this.#e.values());for(const[a,s]of this.#r)i.includes(a)||(Ot(s.effect),this.#r.delete(a))};ensure(e,i){var a=nt,s=Ll();if(i&&!this.#t.has(e)&&!this.#r.has(e))if(s){var l=document.createDocumentFragment(),f=Un();l.append(f),this.#r.set(e,{effect:Wt(()=>i(f)),fragment:l})}else this.#t.set(e,Wt(()=>i(this.anchor)));if(this.#e.set(a,e),s){for(const[h,v]of this.#t)h===e?a.skipped_effects.delete(v):a.skipped_effects.add(v);for(const[h,v]of this.#r)h===e?a.skipped_effects.delete(v.effect):a.skipped_effects.add(v.effect);a.oncommit(this.#a),a.ondiscard(this.#i)}else this.#a()}}function ot(t,e,i=!1){var a=new gh(t),s=i?ri:0;function l(f,h){a.ensure(f,h)}Fs(()=>{var f=!1;e((h,v=!0)=>{f=!0,l(v,h)}),f||l(!1,null)},s)}function yh(t,e,i,a,s){var l=e.$$slots?.[i],f=!1;l===!0&&(l=e.children,f=!0),l===void 0||l(t,f?()=>a:a)}function bh(t,e){var i=void 0,a;Ol(()=>{i!==(i=e())&&(a&&(Ot(a),a=null),i&&(a=Wt(()=>{Bs(()=>i(t))})))})}function Gl(t){var e,i,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=Gl(t[e]))&&(a&&(a+=" "),a+=i)}else for(i in t)t[i]&&(a&&(a+=" "),a+=i);return a}function _h(){for(var t,e,i=0,a="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=Gl(t))&&(a&&(a+=" "),a+=e);return a}function Xl(t){return typeof t=="object"?_h(t):t??""}const Bu=[...` 	
\r\fÂ \v\uFEFF`];function wh(t,e,i){var a=t==null?"":""+t;if(e&&(a=a?a+" "+e:e),i){for(var s in i)if(i[s])a=a?a+" "+s:s;else if(a.length)for(var l=s.length,f=0;(f=a.indexOf(s,f))>=0;){var h=f+l;(f===0||Bu.includes(a[f-1]))&&(h===a.length||Bu.includes(a[h]))?a=(f===0?"":a.substring(0,f))+a.substring(h+1):f=h}}return a===""?null:a}function Nu(t,e=!1){var i=e?" !important;":";",a="";for(var s in t){var l=t[s];l!=null&&l!==""&&(a+=" "+s+": "+l+i)}return a}function Jo(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Eh(t,e){if(e){var i="",a,s;if(Array.isArray(e)?(a=e[0],s=e[1]):a=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,f=0,h=!1,v=[];a&&v.push(...Object.keys(a).map(Jo)),s&&v.push(...Object.keys(s).map(Jo));var m=0,E=-1;const S=t.length;for(var _=0;_<S;_++){var w=t[_];if(h?w==="/"&&t[_-1]==="*"&&(h=!1):l?l===w&&(l=!1):w==="/"&&t[_+1]==="*"?h=!0:w==='"'||w==="'"?l=w:w==="("?f++:w===")"&&f--,!h&&l===!1&&f===0){if(w===":"&&E===-1)E=_;else if(w===";"||_===S-1){if(E!==-1){var x=Jo(t.substring(m,E).trim());if(!v.includes(x)){w!==";"&&_++;var L=t.substring(m,_).trim();i+=" "+L+";"}}m=_+1,E=-1}}}}return a&&(i+=Nu(a)),s&&(i+=Nu(s,!0)),i=i.trim(),i===""?null:i}return t==null?null:String(t)}function Ua(t,e,i,a,s,l){var f=t.__className;if(f!==i||f===void 0){var h=wh(i,a,l);h==null?t.removeAttribute("class"):e?t.className=h:t.setAttribute("class",h),t.__className=i}else if(l&&s!==l)for(var v in l){var m=!!l[v];(s==null||m!==!!s[v])&&t.classList.toggle(v,m)}return l}function $o(t,e={},i,a){for(var s in i){var l=i[s];e[s]!==l&&(i[s]==null?t.style.removeProperty(s):t.style.setProperty(s,l,a))}}function zn(t,e,i,a){var s=t.__style;if(s!==e){var l=Eh(e,a);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}else a&&(Array.isArray(a)?($o(t,i?.[0],a[0]),$o(t,i?.[1],a[1],"important")):$o(t,i,a));return a}function bs(t,e,i=!1){if(t.multiple){if(e==null)return;if(!As(e))return bd();for(var a of t.options)a.selected=e.includes(Fu(a));return}for(a of t.options){var s=Fu(a);if(Ud(s,e)){a.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function xh(t){var e=new MutationObserver(()=>{bs(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),uo(()=>{e.disconnect()})}function Fu(t){return"__value"in t?t.__value:t.value}const ki=Symbol("class"),Ti=Symbol("style"),Ql=Symbol("is custom element"),Zl=Symbol("is html");function kh(t,e){var i=lo(t);i.value===(i.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Th(t,e){var i=lo(t);i.checked!==(i.checked=e??void 0)&&(t.checked=e)}function Sh(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function Tt(t,e,i,a){var s=lo(t);s[e]!==(s[e]=i)&&(e==="loading"&&(t[Gf]=i),i==null?t.removeAttribute(e):typeof i!="string"&&Jl(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function Ah(t,e,i,a,s=!1,l=!1){var f=lo(t),h=f[Ql],v=!f[Zl],m=e||{},E=t.tagName==="OPTION";for(var _ in e)_ in i||(i[_]=null);i.class?i.class=Xl(i.class):i[ki]&&(i.class=null),i[Ti]&&(i.style??=null);var w=Jl(t);for(const B in i){let q=i[B];if(E&&B==="value"&&q==null){t.value=t.__value="",m[B]=q;continue}if(B==="class"){var x=t.namespaceURI==="http://www.w3.org/1999/xhtml";Ua(t,x,q,a,e?.[ki],i[ki]),m[B]=q,m[ki]=i[ki];continue}if(B==="style"){zn(t,q,e?.[Ti],i[Ti]),m[B]=q,m[Ti]=i[Ti];continue}var L=m[B];if(!(q===L&&!(q===void 0&&t.hasAttribute(B)))){m[B]=q;var S=B[0]+B[1];if(S!=="$$")if(S==="on"){const $={},G="$$"+B;let F=B.slice(2);var C=uh(F);if(oh(F)&&(F=F.slice(0,-7),$.capture=!0),!C&&L){if(q!=null)continue;t.removeEventListener(F,m[G],$),m[G]=null}if(q!=null)if(C)t[`__${F}`]=q,Fr([F]);else{let Z=function(ae){m[B].call(this,ae)};var V=Z;m[G]=ql(F,t,Z,$)}else C&&(t[`__${F}`]=void 0)}else if(B==="style")Tt(t,B,q);else if(B==="autofocus")Gd(t,!!q);else if(!h&&(B==="__value"||B==="value"&&q!=null))t.value=t.__value=q;else if(B==="selected"&&E)Sh(t,q);else{var T=B;v||(T=ch(T));var K=T==="defaultValue"||T==="defaultChecked";if(q==null&&!h&&!K)if(f[B]=null,T==="value"||T==="checked"){let $=t;const G=e===void 0;if(T==="value"){let F=$.defaultValue;$.removeAttribute(T),$.defaultValue=F,$.value=$.__value=G?F:null}else{let F=$.defaultChecked;$.removeAttribute(T),$.defaultChecked=F,$.checked=G?F:!1}}else t.removeAttribute(B);else K||w.includes(T)&&(h||typeof q!="string")?(t[T]=q,T in f&&(f[T]=Ct)):typeof q!="function"&&Tt(t,T,q)}}}return m}function Ih(t,e,i=[],a=[],s=[],l,f=!1,h=!1){xl(s,i,a,v=>{var m=void 0,E={},_=t.nodeName==="SELECT",w=!1;if(Ol(()=>{var L=e(...v.map(y)),S=Ah(t,m,L,l,f,h);w&&_&&"value"in L&&bs(t,L.value);for(let T of Object.getOwnPropertySymbols(E))L[T]||Ot(E[T]);for(let T of Object.getOwnPropertySymbols(L)){var C=L[T];T.description===yd&&(!m||C!==m[T])&&(E[T]&&Ot(E[T]),E[T]=Wt(()=>bh(t,()=>C))),S[T]=C}m=S}),_){var x=t;Bs(()=>{bs(x,m.value,!0),xh(x)})}w=!0})}function lo(t){return t.__attributes??={[Ql]:t.nodeName.includes("-"),[Zl]:t.namespaceURI===gd}}var Hu=new Map;function Jl(t){var e=t.getAttribute("is")||t.nodeName,i=Hu.get(e);if(i)return i;Hu.set(e,i=[]);for(var a,s=t,l=Element.prototype;l!==s;){a=Uf(s);for(var f in a)a[f].set&&i.push(f);s=il(s)}return i}function za(t,e,i=e){var a=new WeakSet;Qd(t,"input",async s=>{le&&t.type==="checkbox"&&Iu();var l=s?t.defaultValue:t.value;if(l=es(t)?ts(l):l,i(l),nt!==null&&a.add(nt),await at(),l!==(l=e())){var f=t.selectionStart,h=t.selectionEnd,v=t.value.length;if(t.value=l??"",h!==null){var m=t.value.length;f===h&&h===v&&m>v?(t.selectionStart=m,t.selectionEnd=m):(t.selectionStart=f,t.selectionEnd=Math.min(h,m))}}}),Nr(e)==null&&t.value&&(i(es(t)?ts(t.value):t.value),nt!==null&&a.add(nt)),Ns(()=>{le&&t.type==="checkbox"&&Iu();var s=e();if(t===document.activeElement){var l=Sa??nt;if(a.has(l))return}es(t)&&s===ts(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function es(t){var e=t.type;return e==="number"||e==="range"}function ts(t){return t===""?null:+t}function ju(t,e){return t===e||t?.[Lr]===e}function Lt(t={},e,i,a){return Bs(()=>{var s,l;return Ns(()=>{s=l,l=[],Nr(()=>{t!==i(...l)&&(e(t,...l),s&&ju(i(...s),t)&&e(null,...s))})}),()=>{Kr(()=>{l&&ju(i(...l),t)&&e(null,...l)})}}),t}function $l(t,e,i){if(t==null)return e(void 0),Ma;const a=Nr(()=>t.subscribe(e,i));return a.unsubscribe?()=>a.unsubscribe():a}function Dh(t){let e;return $l(t,i=>e=i)(),e}let _a=!1,_s=Symbol();function Va(t,e,i){const a=i[e]??={store:null,source:Sl(void 0),unsubscribe:Ma};if(le&&(a.source.label=e),a.store!==t&&!(_s in i))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=Ma;else{var s=!0;a.unsubscribe=$l(t,l=>{s?a.source.v=l:R(a.source,l)}),s=!1}return t&&_s in i?Dh(t):y(a.source)}function Ya(t,e,i){let a=i[e];return a&&a.store!==t&&(a.unsubscribe(),a.unsubscribe=Ma),t}function Us(){const t={};function e(){uo(()=>{for(var i in t)t[i].unsubscribe();vr(t,_s,{enumerable:!1,value:!0})})}return[t,e]}function Ch(t){var e=_a;try{return _a=!1,[t(),_a]}finally{_a=e}}const Lh={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return le&&nd(`${t.name}.${String(e)}`),!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Ph(t,e,i){return new Proxy(le?{props:t,exclude:e,name:i,other:{},to_proxy:[]}:{props:t,exclude:e},Lh)}function Nt(t,e,i,a){var s=(i&dd)!==0,l=(i&hd)!==0,f=a,h=!0,v=()=>(h&&(h=!1,f=l?Nr(a):a),f),m;if(s){var E=Lr in t||qf in t;m=Cr(t,e)?.set??(E&&e in t?K=>t[e]=K:void 0)}var _,w=!1;s?[_,w]=Ch(()=>t[e]):_=t[e],_===void 0&&a!==void 0&&(_=v(),m&&(td(e),m(_)));var x;if(x=()=>{var K=t[e];return K===void 0?v():(h=!0,K)},(i&fd)===0)return x;if(m){var L=t.$$legacy;return(function(K,V){return arguments.length>0?((!V||L||w)&&m(V?x():K),K):x()})}var S=!1,C=((i&cd)!==0?oo:kl)(()=>(S=!1,x()));le&&(C.label=e),s&&y(C);var T=Qe;return(function(K,V){if(arguments.length>0){const B=V?y(C):s?an(K):K;return R(C,B),S=!0,f!==void 0&&(f=B),K}return Br&&S||(T.f&Nn)!==0?C.v:y(C)})}if(le){let t=function(e){if(!(e in globalThis)){let i;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(i!==void 0)return i;rd(e)},set:a=>{i=a}})}};var bm=t;t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function Oh(t){Ht===null&&ll("onMount"),We(()=>{const e=Nr(t);if(typeof e=="function")return e})}function ec(t){Ht===null&&ll("onDestroy"),Oh(()=>()=>Nr(t))}const Mh="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Mh);var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ia={exports:{}},Bh=Ia.exports,Uu;function Nh(){return Uu||(Uu=1,(function(t,e){(function(i,a){t.exports=a()})(Bh,(function(){var i=function(n,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(o[c]=u[c])},i(n,r)};function a(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");i(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}var s=function(){return s=Object.assign||function(r){for(var o,u=1,c=arguments.length;u<c;u++){o=arguments[u];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(r[d]=o[d])}return r},s.apply(this,arguments)};function l(n,r,o){for(var u=0,c=r.length,d;u<c;u++)(d||!(u in r))&&(d||(d=Array.prototype.slice.call(r,0,u)),d[u]=r[u]);return n.concat(d||Array.prototype.slice.call(r))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Rh,h=Object.keys,v=Array.isArray;typeof Promise<"u"&&!f.Promise&&(f.Promise=Promise);function m(n,r){return typeof r!="object"||h(r).forEach(function(o){n[o]=r[o]}),n}var E=Object.getPrototypeOf,_={}.hasOwnProperty;function w(n,r){return _.call(n,r)}function x(n,r){typeof r=="function"&&(r=r(E(n))),(typeof Reflect>"u"?h:Reflect.ownKeys)(r).forEach(function(o){S(n,o,r[o])})}var L=Object.defineProperty;function S(n,r,o,u){L(n,r,m(o&&w(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},u))}function C(n){return{from:function(r){return n.prototype=Object.create(r.prototype),S(n.prototype,"constructor",n),{extend:x.bind(null,n.prototype)}}}}var T=Object.getOwnPropertyDescriptor;function K(n,r){var o=T(n,r),u;return o||(u=E(n))&&K(u,r)}var V=[].slice;function B(n,r,o){return V.call(n,r,o)}function q(n,r){return r(n)}function $(n){if(!n)throw new Error("Assertion Failed")}function G(n){f.setImmediate?setImmediate(n):setTimeout(n,0)}function F(n,r){return n.reduce(function(o,u,c){var d=r(u,c);return d&&(o[d[0]]=d[1]),o},{})}function Z(n,r){if(typeof r=="string"&&w(n,r))return n[r];if(!r)return n;if(typeof r!="string"){for(var o=[],u=0,c=r.length;u<c;++u){var d=Z(n,r[u]);o.push(d)}return o}var p=r.indexOf(".");if(p!==-1){var g=n[r.substr(0,p)];return g==null?void 0:Z(g,r.substr(p+1))}}function ae(n,r,o){if(!(!n||r===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof r!="string"&&"length"in r){$(typeof o!="string"&&"length"in o);for(var u=0,c=r.length;u<c;++u)ae(n,r[u],o[u])}else{var d=r.indexOf(".");if(d!==-1){var p=r.substr(0,d),g=r.substr(d+1);if(g==="")o===void 0?v(n)&&!isNaN(parseInt(p))?n.splice(p,1):delete n[p]:n[p]=o;else{var b=n[p];(!b||!w(n,p))&&(b=n[p]={}),ae(b,g,o)}}else o===void 0?v(n)&&!isNaN(parseInt(r))?n.splice(r,1):delete n[r]:n[r]=o}}function W(n,r){typeof r=="string"?ae(n,r,void 0):"length"in r&&[].map.call(r,function(o){ae(n,o,void 0)})}function ye(n){var r={};for(var o in n)w(n,o)&&(r[o]=n[o]);return r}var ve=[].concat;function pe(n){return ve.apply([],n)}var Pe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(pe([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(r){return r+n+"Array"})}))).filter(function(n){return f[n]}),Xe=new Set(Pe.map(function(n){return f[n]}));function rt(n){var r={};for(var o in n)if(w(n,o)){var u=n[o];r[o]=!u||typeof u!="object"||Xe.has(u.constructor)?u:rt(u)}return r}function ie(n){for(var r in n)if(w(n,r))return!1;return!0}var Re=null;function Ae(n){Re=new WeakMap;var r=$e(n);return Re=null,r}function $e(n){if(!n||typeof n!="object")return n;var r=Re.get(n);if(r)return r;if(v(n)){r=[],Re.set(n,r);for(var o=0,u=n.length;o<u;++o)r.push($e(n[o]))}else if(Xe.has(n.constructor))r=n;else{var c=E(n);r=c===Object.prototype?{}:Object.create(c),Re.set(n,r);for(var d in n)w(n,d)&&(r[d]=$e(n[d]))}return r}var Ke={}.toString;function Ge(n){return Ke.call(n).slice(8,-1)}var Y=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Q=typeof Y=="symbol"?function(n){var r;return n!=null&&(r=n[Y])&&r.apply(n)}:function(){return null};function fe(n,r){var o=n.indexOf(r);return o>=0&&n.splice(o,1),o>=0}var De={};function be(n){var r,o,u,c;if(arguments.length===1){if(v(n))return n.slice();if(this===De&&typeof n=="string")return[n];if(c=Q(n)){for(o=[];u=c.next(),!u.done;)o.push(u.value);return o}if(n==null)return[n];if(r=n.length,typeof r=="number"){for(o=new Array(r);r--;)o[r]=n[r];return o}return[n]}for(r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return o}var Ze=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},_t=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Je=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ft=_t.concat(Je),wt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ve(n,r){this.name=n,this.message=r}C(Ve).from(Error).extend({toString:function(){return this.name+": "+this.message}});function et(n,r){return n+". Errors: "+Object.keys(r).map(function(o){return r[o].toString()}).filter(function(o,u,c){return c.indexOf(o)===u}).join(`
`)}function ht(n,r,o,u){this.failures=r,this.failedKeys=u,this.successCount=o,this.message=et(n,r)}C(ht).from(Ve);function Et(n,r){this.name="BulkError",this.failures=Object.keys(r).map(function(o){return r[o]}),this.failuresByPos=r,this.message=et(n,this.failures)}C(Et).from(Ve);var St=ft.reduce(function(n,r){return n[r]=r+"Error",n},{}),sn=Ve,ue=ft.reduce(function(n,r){var o=r+"Error";function u(c,d){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=wt[r]||o,this.inner=null)}return C(u).from(sn),n[r]=u,n},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var un=Je.reduce(function(n,r){return n[r+"Error"]=ue[r],n},{});function Qt(n,r){if(!n||n instanceof Ve||n instanceof TypeError||n instanceof SyntaxError||!n.name||!un[n.name])return n;var o=new un[n.name](r||n.message,n);return"stack"in n&&S(o,"stack",{get:function(){return this.inner.stack}}),o}var kn=ft.reduce(function(n,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(n[r+"Error"]=ue[r]),n},{});kn.ModifyError=ht,kn.DexieError=Ve,kn.BulkError=Et;function Ne(){}function ln(n){return n}function ee(n,r){return n==null||n===ln?r:function(o){return r(n(o))}}function me(n,r){return function(){n.apply(this,arguments),r.apply(this,arguments)}}function Ee(n,r){return n===Ne?r:function(){var o=n.apply(this,arguments);o!==void 0&&(arguments[0]=o);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=r.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?me(u,this.onsuccess):u),c&&(this.onerror=this.onerror?me(c,this.onerror):c),d!==void 0?d:o}}function Fe(n,r){return n===Ne?r:function(){n.apply(this,arguments);var o=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?me(o,this.onsuccess):o),u&&(this.onerror=this.onerror?me(u,this.onerror):u)}}function st(n,r){return n===Ne?r:function(o){var u=n.apply(this,arguments);m(o,u);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var p=r.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?me(c,this.onsuccess):c),d&&(this.onerror=this.onerror?me(d,this.onerror):d),u===void 0?p===void 0?void 0:p:m(u,p)}}function Zt(n,r){return n===Ne?r:function(){return r.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function tt(n,r){return n===Ne?r:function(){var o=n.apply(this,arguments);if(o&&typeof o.then=="function"){for(var u=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return o.then(function(){return r.apply(u,d)})}return r.apply(this,arguments)}}var Te=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function At(n,r){Te=n}var it={},It=100,Jt=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,E(n),n];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,E(r),n]})(),cn=Jt[0],Hr=Jt[1],ut=Jt[2],Zn=Hr&&Hr.then,$t=cn&&cn.constructor,Wi=!!ut;function ho(){queueMicrotask(Sc)}var di=function(n,r){hi.push([n,r]),qi&&(ho(),qi=!1)},vo=!0,qi=!0,mr=[],Gi=[],po=ln,Jn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ne,pgp:!1,env:{},finalize:Ne},de=Jn,hi=[],gr=0,Xi=[];function re(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=de;if(typeof n!="function"){if(n!==it)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&go(this,this._value);return}this._state=null,this._value=null,++r.ref,Gs(this,n)}var mo={get:function(){var n=de,r=$i;function o(u,c){var d=this,p=!n.global&&(n!==de||r!==$i),g=p&&!er(),b=new re(function(k,D){yo(d,new qs(Zs(u,n,p,g),Zs(c,n,p,g),k,D,n))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return o.prototype=it,o},set:function(n){S(this,"then",n&&n.prototype===it?mo:{get:function(){return n},set:mo.set})}};x(re.prototype,{then:mo,_then:function(n,r){yo(this,new qs(null,null,n,r,de))},catch:function(n){if(arguments.length===1)return this.then(null,n);var r=arguments[0],o=arguments[1];return typeof r=="function"?this.then(null,function(u){return u instanceof r?o(u):Qi(u)}):this.then(null,function(u){return u&&u.name===r?o(u):Qi(u)})},finally:function(n){return this.then(function(r){return re.resolve(n()).then(function(){return r})},function(r){return re.resolve(n()).then(function(){return Qi(r)})})},timeout:function(n,r){var o=this;return n<1/0?new re(function(u,c){var d=setTimeout(function(){return c(new ue.Timeout(r))},n);o.then(u,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&S(re.prototype,Symbol.toStringTag,"Dexie.Promise"),Jn.env=Qs();function qs(n,r,o,u,c){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=o,this.reject=u,this.psd=c}x(re,{all:function(){var n=be.apply(null,arguments).map(ea);return new re(function(r,o){n.length===0&&r([]);var u=n.length;n.forEach(function(c,d){return re.resolve(c).then(function(p){n[d]=p,--u||r(n)},o)})})},resolve:function(n){if(n instanceof re)return n;if(n&&typeof n.then=="function")return new re(function(o,u){n.then(o,u)});var r=new re(it,!0,n);return r},reject:Qi,race:function(){var n=be.apply(null,arguments).map(ea);return new re(function(r,o){n.map(function(u){return re.resolve(u).then(r,o)})})},PSD:{get:function(){return de},set:function(n){return de=n}},totalEchoes:{get:function(){return $i}},newPSD:$n,usePSD:yr,scheduler:{get:function(){return di},set:function(n){di=n}},rejectionMapper:{get:function(){return po},set:function(n){po=n}},follow:function(n,r){return new re(function(o,u){return $n(function(c,d){var p=de;p.unhandleds=[],p.onunhandled=d,p.finalize=me(function(){var g=this;Ac(function(){g.unhandleds.length===0?c():d(g.unhandleds[0])})},p.finalize),n()},r,o,u)})}}),$t&&($t.allSettled&&S(re,"allSettled",function(){var n=be.apply(null,arguments).map(ea);return new re(function(r){n.length===0&&r([]);var o=n.length,u=new Array(o);n.forEach(function(c,d){return re.resolve(c).then(function(p){return u[d]={status:"fulfilled",value:p}},function(p){return u[d]={status:"rejected",reason:p}}).then(function(){return--o||r(u)})})})}),$t.any&&typeof AggregateError<"u"&&S(re,"any",function(){var n=be.apply(null,arguments).map(ea);return new re(function(r,o){n.length===0&&o(new AggregateError([]));var u=n.length,c=new Array(u);n.forEach(function(d,p){return re.resolve(d).then(function(g){return r(g)},function(g){c[p]=g,--u||o(new AggregateError(c))})})})}),$t.withResolvers&&(re.withResolvers=$t.withResolvers));function Gs(n,r){try{r(function(o){if(n._state===null){if(o===n)throw new TypeError("A promise cannot be resolved with itself.");var u=n._lib&&jr();o&&typeof o.then=="function"?Gs(n,function(c,d){o instanceof re?o._then(c,d):o.then(c,d)}):(n._state=!0,n._value=o,Xs(n)),u&&Ur()}},go.bind(null,n))}catch(o){go(n,o)}}function go(n,r){if(Gi.push(r),n._state===null){var o=n._lib&&jr();r=po(r),n._state=!1,n._value=r,Ic(n),Xs(n),o&&Ur()}}function Xs(n){var r=n._listeners;n._listeners=[];for(var o=0,u=r.length;o<u;++o)yo(n,r[o]);var c=n._PSD;--c.ref||c.finalize(),gr===0&&(++gr,di(function(){--gr===0&&bo()},[]))}function yo(n,r){if(n._state===null){n._listeners.push(r);return}var o=n._state?r.onFulfilled:r.onRejected;if(o===null)return(n._state?r.resolve:r.reject)(n._value);++r.psd.ref,++gr,di(Tc,[o,n,r])}function Tc(n,r,o){try{var u,c=r._value;!r._state&&Gi.length&&(Gi=[]),u=Te&&r._consoleTask?r._consoleTask.run(function(){return n(c)}):n(c),!r._state&&Gi.indexOf(c)===-1&&Dc(r),o.resolve(u)}catch(d){o.reject(d)}finally{--gr===0&&bo(),--o.psd.ref||o.psd.finalize()}}function Sc(){yr(Jn,function(){jr()&&Ur()})}function jr(){var n=vo;return vo=!1,qi=!1,n}function Ur(){var n,r,o;do for(;hi.length>0;)for(n=hi,hi=[],o=n.length,r=0;r<o;++r){var u=n[r];u[0].apply(null,u[1])}while(hi.length>0);vo=!0,qi=!0}function bo(){var n=mr;mr=[],n.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var r=Xi.slice(0),o=r.length;o;)r[--o]()}function Ac(n){function r(){n(),Xi.splice(Xi.indexOf(r),1)}Xi.push(r),++gr,di(function(){--gr===0&&bo()},[])}function Ic(n){mr.some(function(r){return r._value===n._value})||mr.push(n)}function Dc(n){for(var r=mr.length;r;)if(mr[--r]._value===n._value){mr.splice(r,1);return}}function Qi(n){return new re(it,!1,n)}function lt(n,r){var o=de;return function(){var u=jr(),c=de;try{return tr(o,!0),n.apply(this,arguments)}catch(d){r&&r(d)}finally{tr(c,!1),u&&Ur()}}}var kt={awaits:0,echoes:0,id:0},Cc=0,Zi=[],Ji=0,$i=0,Lc=0;function $n(n,r,o,u){var c=de,d=Object.create(c);d.parent=c,d.ref=0,d.global=!1,d.id=++Lc,Jn.env,d.env=Wi?{Promise:re,PromiseProp:{value:re,configurable:!0,writable:!0},all:re.all,race:re.race,allSettled:re.allSettled,any:re.any,resolve:re.resolve,reject:re.reject}:{},r&&m(d,r),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()};var p=yr(d,n,o,u);return d.ref===0&&d.finalize(),p}function zr(){return kt.id||(kt.id=++Cc),++kt.awaits,kt.echoes+=It,kt.id}function er(){return kt.awaits?(--kt.awaits===0&&(kt.id=0),kt.echoes=kt.awaits*It,!0):!1}(""+Zn).indexOf("[native code]")===-1&&(zr=er=Ne);function ea(n){return kt.echoes&&n&&n.constructor===$t?(zr(),n.then(function(r){return er(),r},function(r){return er(),mt(r)})):n}function Pc(n){++$i,(!kt.echoes||--kt.echoes===0)&&(kt.echoes=kt.awaits=kt.id=0),Zi.push(de),tr(n,!0)}function Oc(){var n=Zi[Zi.length-1];Zi.pop(),tr(n,!1)}function tr(n,r){var o=de;if((r?kt.echoes&&(!Ji++||n!==de):Ji&&(!--Ji||n!==de))&&queueMicrotask(r?Pc.bind(null,n):Oc),n!==de&&(de=n,o===Jn&&(Jn.env=Qs()),Wi)){var u=Jn.env.Promise,c=n.env;(o.global||n.global)&&(Object.defineProperty(f,"Promise",c.PromiseProp),u.all=c.all,u.race=c.race,u.resolve=c.resolve,u.reject=c.reject,c.allSettled&&(u.allSettled=c.allSettled),c.any&&(u.any=c.any))}}function Qs(){var n=f.Promise;return Wi?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function yr(n,r,o,u,c){var d=de;try{return tr(n,!0),r(o,u,c)}finally{tr(d,!1)}}function Zs(n,r,o,u){return typeof n!="function"?n:function(){var c=de;o&&zr(),tr(r,!0);try{return n.apply(this,arguments)}finally{tr(c,!1),u&&queueMicrotask(er)}}}function _o(n){Promise===$t&&kt.echoes===0?Ji===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}var mt=re.reject;function wo(n,r,o,u){if(!n.idbdb||!n._state.openComplete&&!de.letThrough&&!n._vip){if(n._state.openComplete)return mt(new ue.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return mt(new ue.DatabaseClosed);n.open().catch(Ne)}return n._state.dbReadyPromise.then(function(){return wo(n,r,o,u)})}else{var c=n._createTransaction(r,o,n._dbSchema);try{c.create(),n._state.PR1398_maxLoop=3}catch(d){return d.name===St.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return wo(n,r,o,u)})):mt(d)}return c._promise(r,function(d,p){return $n(function(){return de.trans=c,u(d,p,c)})}).then(function(d){if(r==="readwrite")try{c.idbtrans.commit()}catch{}return r==="readonly"?d:c._completion.then(function(){return d})})}}var Js="4.2.1",br="ï¿¿",Eo=-1/0,Rn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$s="String expected.",Vr=[],ta="__dbnames",xo="readonly",ko="readwrite";function _r(n,r){return n?r?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:n:r}var eu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function na(n){return typeof n=="string"&&!/\./.test(n)?function(r){return r[n]===void 0&&n in r&&(r=Ae(r),delete r[n]),r}:function(r){return r}}function tu(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ue(n,r){try{var o=nu(n),u=nu(r);if(o!==u)return o==="Array"?1:u==="Array"?-1:o==="binary"?1:u==="binary"?-1:o==="string"?1:u==="string"?-1:o==="Date"?1:u!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return n>r?1:n<r?-1:0;case"binary":return Rc(ru(n),ru(r));case"Array":return Mc(n,r)}}catch{}return NaN}function Mc(n,r){for(var o=n.length,u=r.length,c=o<u?o:u,d=0;d<c;++d){var p=Ue(n[d],r[d]);if(p!==0)return p}return o===u?0:o<u?-1:1}function Rc(n,r){for(var o=n.length,u=r.length,c=o<u?o:u,d=0;d<c;++d)if(n[d]!==r[d])return n[d]<r[d]?-1:1;return o===u?0:o<u?-1:1}function nu(n){var r=typeof n;if(r!=="object")return r;if(ArrayBuffer.isView(n))return"binary";var o=Ge(n);return o==="ArrayBuffer"?"binary":o}function ru(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function ra(n,r,o){var u=n.schema.yProps;return u?(r&&o.numFailures>0&&(r=r.filter(function(c,d){return!o.failures[d]})),Promise.all(u.map(function(c){var d=c.updatesTable;return r?n.db.table(d).where("k").anyOf(r).delete():n.db.table(d).clear()})).then(function(){return o})):o}var vi=(function(){function n(r){this["@@propmod"]=r}return n.prototype.execute=function(r){var o,u=this["@@propmod"];if(u.add!==void 0){var c=u.add;if(v(c))return l(l([],v(r)?r:[],!0),c).sort();if(typeof c=="number")return(Number(r)||0)+c;if(typeof c=="bigint")try{return BigInt(r)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(u.remove!==void 0){var d=u.remove;if(v(d))return v(r)?r.filter(function(g){return!d.includes(g)}).sort():[];if(typeof d=="number")return Number(r)-d;if(typeof d=="bigint")try{return BigInt(r)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}var p=(o=u.replacePrefix)===null||o===void 0?void 0:o[0];return p&&typeof r=="string"&&r.startsWith(p)?u.replacePrefix[1]+r.substring(p.length):r},n})();function iu(n,r){for(var o=h(r),u=o.length,c=!1,d=0;d<u;++d){var p=o[d],g=r[p],b=Z(n,p);g instanceof vi?(ae(n,p,g.execute(b)),c=!0):b!==g&&(ae(n,p,g),c=!0)}return c}var au=(function(){function n(){}return n.prototype._trans=function(r,o,u){var c=this._tx||de.trans,d=this.name,p=Te&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function g(D,A,M){if(!M.schema[d])throw new ue.NotFound("Table "+d+" not part of transaction");return o(M.idbtrans,M)}var b=jr();try{var k=c&&c.db._novip===this.db._novip?c===de.trans?c._promise(r,g,u):$n(function(){return c._promise(r,g,u)},{trans:c,transless:de.transless||de}):wo(this.db,r,[this.name],g);return p&&(k._consoleTask=p,k=k.catch(function(D){return console.trace(D),mt(D)})),k}finally{b&&Ur()}},n.prototype.get=function(r,o){var u=this;return r&&r.constructor===Object?this.where(r).first(o):r==null?mt(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return u.core.get({trans:c,key:r}).then(function(d){return u.hook.reading.fire(d)})}).then(o)},n.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(v(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var o=h(r);if(o.length===1)return this.where(o[0]).equals(r[o[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&o.every(function(M){return D.keyPath.indexOf(M)>=0})){for(var A=0;A<o.length;++A)if(o.indexOf(D.keyPath[A])===-1)return!1;return!0}return!1}).sort(function(D,A){return D.keyPath.length-A.keyPath.length})[0];if(u&&this.db._maxKey!==br){var c=u.keyPath.slice(0,o.length);return this.where(c).equals(c.map(function(D){return r[D]}))}!u&&Te&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var d=this.schema.idxByName;function p(D,A){return Ue(D,A)===0}var g=o.reduce(function(D,A){var M=D[0],X=D[1],I=d[A],P=r[A];return[M||I,M||!I?_r(X,I&&I.multi?function(O){var N=Z(O,A);return v(N)&&N.some(function(j){return p(P,j)})}:function(O){return p(P,Z(O,A))}):X]},[null,null]),b=g[0],k=g[1];return b?this.where(b.name).equals(r[b.keyPath]).filter(k):u?this.filter(k):this.where(o).equals("")},n.prototype.filter=function(r){return this.toCollection().and(r)},n.prototype.count=function(r){return this.toCollection().count(r)},n.prototype.offset=function(r){return this.toCollection().offset(r)},n.prototype.limit=function(r){return this.toCollection().limit(r)},n.prototype.each=function(r){return this.toCollection().each(r)},n.prototype.toArray=function(r){return this.toCollection().toArray(r)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,v(r)?"[".concat(r.join("+"),"]"):r))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(r){var o=this,u=o.db,c=o.name;this.schema.mappedClass=r,r.prototype instanceof tu&&(r=(function(b){a(k,b);function k(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(k.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),k.prototype.table=function(){return c},k})(r));for(var d=new Set,p=r.prototype;p;p=E(p))Object.getOwnPropertyNames(p).forEach(function(b){return d.add(b)});var g=function(b){if(!b)return b;var k=Object.create(r.prototype);for(var D in b)if(!d.has(D))try{k[D]=b[D]}catch{}return k};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),r},n.prototype.defineClass=function(){function r(o){m(this,o)}return this.mapToClass(r)},n.prototype.add=function(r,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,g=r;return p&&d&&(g=na(p)(r)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"add",keys:o!=null?[o]:null,values:[g]})}).then(function(b){return b.numFailures?re.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{ae(r,p,b)}catch{}return b})},n.prototype.upsert=function(r,o){var u=this,c=this.schema.primKey.keyPath;return this._trans("readwrite",function(d){return u.core.get({trans:d,key:r}).then(function(p){var g=p??{};return iu(g,o),c&&ae(g,c,r),u.core.mutate({trans:d,type:"put",values:[g],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[o]}}).then(function(b){return b.numFailures?re.reject(b.failures[0]):!!p})})})},n.prototype.update=function(r,o){if(typeof r=="object"&&!v(r)){var u=Z(r,this.schema.primKey.keyPath);return u===void 0?mt(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(o)}else return this.where(":id").equals(r).modify(o)},n.prototype.put=function(r,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,g=r;return p&&d&&(g=na(p)(r)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"put",values:[g],keys:o!=null?[o]:null})}).then(function(b){return b.numFailures?re.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{ae(r,p,b)}catch{}return b})},n.prototype.delete=function(r){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"delete",keys:[r]}).then(function(c){return ra(o,[r],c)}).then(function(c){return c.numFailures?re.reject(c.failures[0]):void 0})})},n.prototype.clear=function(){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"deleteRange",range:eu}).then(function(u){return ra(r,null,u)})}).then(function(o){return o.numFailures?re.reject(o.failures[0]):void 0})},n.prototype.bulkGet=function(r){var o=this;return this._trans("readonly",function(u){return o.core.getMany({keys:r,trans:u}).then(function(c){return c.map(function(d){return o.hook.reading.fire(d)})})})},n.prototype.bulkAdd=function(r,o,u){var c=this,d=Array.isArray(o)?o:void 0;u=u||(d?void 0:o);var p=u?u.allKeys:void 0;return this._trans("readwrite",function(g){var b=c.schema.primKey,k=b.auto,D=b.keyPath;if(D&&d)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var A=r.length,M=D&&k?r.map(na(D)):r;return c.core.mutate({trans:g,type:"add",keys:d,values:M,wantResults:p}).then(function(X){var I=X.numFailures,P=X.results,O=X.lastResult,N=X.failures,j=p?P:O;if(I===0)return j;throw new Et("".concat(c.name,".bulkAdd(): ").concat(I," of ").concat(A," operations failed"),N)})})},n.prototype.bulkPut=function(r,o,u){var c=this,d=Array.isArray(o)?o:void 0;u=u||(d?void 0:o);var p=u?u.allKeys:void 0;return this._trans("readwrite",function(g){var b=c.schema.primKey,k=b.auto,D=b.keyPath;if(D&&d)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var A=r.length,M=D&&k?r.map(na(D)):r;return c.core.mutate({trans:g,type:"put",keys:d,values:M,wantResults:p}).then(function(X){var I=X.numFailures,P=X.results,O=X.lastResult,N=X.failures,j=p?P:O;if(I===0)return j;throw new Et("".concat(c.name,".bulkPut(): ").concat(I," of ").concat(A," operations failed"),N)})})},n.prototype.bulkUpdate=function(r){var o=this,u=this.core,c=r.map(function(g){return g.key}),d=r.map(function(g){return g.changes}),p=[];return this._trans("readwrite",function(g){return u.getMany({trans:g,keys:c,cache:"clone"}).then(function(b){var k=[],D=[];r.forEach(function(M,X){var I=M.key,P=M.changes,O=b[X];if(O){for(var N=0,j=Object.keys(P);N<j.length;N++){var U=j[N],z=P[U];if(U===o.schema.primKey.keyPath){if(Ue(z,I)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else ae(O,U,z)}p.push(X),k.push(I),D.push(O)}});var A=k.length;return u.mutate({trans:g,type:"put",keys:k,values:D,updates:{keys:c,changeSpecs:d}}).then(function(M){var X=M.numFailures,I=M.failures;if(X===0)return A;for(var P=0,O=Object.keys(I);P<O.length;P++){var N=O[P],j=p[Number(N)];if(j!=null){var U=I[N];delete I[N],I[j]=U}}throw new Et("".concat(o.name,".bulkUpdate(): ").concat(X," of ").concat(A," operations failed"),I)})})})},n.prototype.bulkDelete=function(r){var o=this,u=r.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:r}).then(function(d){return ra(o,r,d)})}).then(function(c){var d=c.numFailures,p=c.lastResult,g=c.failures;if(d===0)return p;throw new Et("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(u," operations failed"),g)})},n})();function pi(n){var r={},o=function(g,b){if(b){for(var k=arguments.length,D=new Array(k-1);--k;)D[k-1]=arguments[k];return r[g].subscribe.apply(null,D),n}else if(typeof g=="string")return r[g]};o.addEventType=d;for(var u=1,c=arguments.length;u<c;++u)d(arguments[u]);return o;function d(g,b,k){if(typeof g=="object")return p(g);b||(b=Zt),k||(k=Ne);var D={subscribers:[],fire:k,subscribe:function(A){D.subscribers.indexOf(A)===-1&&(D.subscribers.push(A),D.fire=b(D.fire,A))},unsubscribe:function(A){D.subscribers=D.subscribers.filter(function(M){return M!==A}),D.fire=D.subscribers.reduce(b,k)}};return r[g]=o[g]=D,D}function p(g){h(g).forEach(function(b){var k=g[b];if(v(k))d(b,g[b][0],g[b][1]);else if(k==="asap")var D=d(b,ln,function(){for(var M=arguments.length,X=new Array(M);M--;)X[M]=arguments[M];D.subscribers.forEach(function(I){G(function(){I.apply(null,X)})})});else throw new ue.InvalidArgument("Invalid event config")})}}function mi(n,r){return C(r).from({prototype:n}),r}function Kc(n){return mi(au.prototype,function(o,u,c){this.db=n,this._tx=c,this.name=o,this.schema=u,this.hook=n._allTables[o]?n._allTables[o].hook:pi(null,{creating:[Ee,Ne],reading:[ee,ln],updating:[st,Ne],deleting:[Fe,Ne]})})}function Yr(n,r){return!(n.filter||n.algorithm||n.or)&&(r?n.justLimit:!n.replayFilter)}function To(n,r){n.filter=_r(n.filter,r)}function So(n,r,o){var u=n.replayFilter;n.replayFilter=u?function(){return _r(u(),r())}:r,n.justLimit=o&&!u}function Bc(n,r){n.isMatch=_r(n.isMatch,r)}function ia(n,r){if(n.isPrimKey)return r.primaryKey;var o=r.getIndexByKeyPath(n.index);if(!o)throw new ue.Schema("KeyPath "+n.index+" on object store "+r.name+" is not indexed");return o}function ou(n,r,o){var u=ia(n,r.schema);return r.openCursor({trans:o,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:u,range:n.range}})}function aa(n,r,o,u){var c=n.replayFilter?_r(n.filter,n.replayFilter()):n.filter;if(n.or){var d={},p=function(g,b,k){if(!c||c(b,k,function(M){return b.stop(M)},function(M){return b.fail(M)})){var D=b.primaryKey,A=""+D;A==="[object ArrayBuffer]"&&(A=""+new Uint8Array(D)),w(d,A)||(d[A]=!0,r(g,b,k))}};return Promise.all([n.or._iterate(p,o),su(ou(n,u,o),n.algorithm,p,!n.keysOnly&&n.valueMapper)])}else return su(ou(n,u,o),_r(n.algorithm,c),r,!n.keysOnly&&n.valueMapper)}function su(n,r,o,u){var c=u?function(p,g,b){return o(u(p),g,b)}:o,d=lt(c);return n.then(function(p){if(p)return p.start(function(){var g=function(){return p.continue()};(!r||r(p,function(b){return g=b},function(b){p.stop(b),g=Ne},function(b){p.fail(b),g=Ne}))&&d(p.value,p,function(b){return g=b}),g()})})}var Nc=(function(){function n(){}return n.prototype._read=function(r,o){var u=this._ctx;return u.error?u.table._trans(null,mt.bind(null,u.error)):u.table._trans("readonly",r).then(o)},n.prototype._write=function(r){var o=this._ctx;return o.error?o.table._trans(null,mt.bind(null,o.error)):o.table._trans("readwrite",r,"locked")},n.prototype._addAlgorithm=function(r){var o=this._ctx;o.algorithm=_r(o.algorithm,r)},n.prototype._iterate=function(r,o){return aa(this._ctx,r,o,this._ctx.table.core)},n.prototype.clone=function(r){var o=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return r&&m(u,r),o._ctx=u,o},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(r){var o=this._ctx;return this._read(function(u){return aa(o,r,u,o.table.core)})},n.prototype.count=function(r){var o=this;return this._read(function(u){var c=o._ctx,d=c.table.core;if(Yr(c,!0))return d.count({trans:u,query:{index:ia(c,d.schema),range:c.range}}).then(function(g){return Math.min(g,c.limit)});var p=0;return aa(c,function(){return++p,!1},u,d).then(function(){return p})}).then(r)},n.prototype.sortBy=function(r,o){var u=r.split(".").reverse(),c=u[0],d=u.length-1;function p(k,D){return D?p(k[u[D]],D-1):k[c]}var g=this._ctx.dir==="next"?1:-1;function b(k,D){var A=p(k,d),M=p(D,d);return Ue(A,M)*g}return this.toArray(function(k){return k.sort(b)}).then(o)},n.prototype.toArray=function(r){var o=this;return this._read(function(u){var c=o._ctx;if(c.dir==="next"&&Yr(c,!0)&&c.limit>0){var d=c.valueMapper,p=ia(c,c.table.core.schema);return c.table.core.query({trans:u,limit:c.limit,values:!0,query:{index:p,range:c.range}}).then(function(b){var k=b.result;return d?k.map(d):k})}else{var g=[];return aa(c,function(b){return g.push(b)},u,c.table.core).then(function(){return g})}},r)},n.prototype.offset=function(r){var o=this._ctx;return r<=0?this:(o.offset+=r,Yr(o)?So(o,function(){var u=r;return function(c,d){return u===0?!0:u===1?(--u,!1):(d(function(){c.advance(u),u=0}),!1)}}):So(o,function(){var u=r;return function(){return--u<0}}),this)},n.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),So(this._ctx,function(){var o=r;return function(u,c,d){return--o<=0&&c(d),o>=0}},!0),this},n.prototype.until=function(r,o){return To(this._ctx,function(u,c,d){return r(u.value)?(c(d),o):!0}),this},n.prototype.first=function(r){return this.limit(1).toArray(function(o){return o[0]}).then(r)},n.prototype.last=function(r){return this.reverse().first(r)},n.prototype.filter=function(r){return To(this._ctx,function(o){return r(o.value)}),Bc(this._ctx,r),this},n.prototype.and=function(r){return this.filter(r)},n.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){r(c.key,c)})},n.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},n.prototype.eachPrimaryKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){r(c.primaryKey,c)})},n.prototype.keys=function(r){var o=this._ctx;o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.key)}).then(function(){return u}).then(r)},n.prototype.primaryKeys=function(r){var o=this._ctx;if(o.dir==="next"&&Yr(o,!0)&&o.limit>0)return this._read(function(c){var d=ia(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(c){var d=c.result;return d}).then(r);o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.primaryKey)}).then(function(){return u}).then(r)},n.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},n.prototype.firstKey=function(r){return this.limit(1).keys(function(o){return o[0]}).then(r)},n.prototype.lastKey=function(r){return this.reverse().firstKey(r)},n.prototype.distinct=function(){var r=this._ctx,o=r.index&&r.table.schema.idxByName[r.index];if(!o||!o.multi)return this;var u={};return To(this._ctx,function(c){var d=c.primaryKey.toString(),p=w(u,d);return u[d]=!0,!p}),this},n.prototype.modify=function(r){var o=this,u=this._ctx;return this._write(function(c){var d;typeof r=="function"?d=r:d=function(N){return iu(N,r)};var p=u.table.core,g=p.schema.primaryKey,b=g.outbound,k=g.extractKey,D=200,A=o.db._options.modifyChunkSize;A&&(typeof A=="object"?D=A[p.name]||A["*"]||200:D=A);var M=[],X=0,I=[],P=function(N,j){var U=j.failures,z=j.numFailures;X+=N-z;for(var H=0,te=h(U);H<te.length;H++){var oe=te[H];M.push(U[oe])}},O=r===uu;return o.clone().primaryKeys().then(function(N){var j=Yr(u)&&u.limit===1/0&&(typeof r!="function"||O)&&{index:u.index,range:u.range},U=function(z){var H=Math.min(D,N.length-z),te=N.slice(z,z+H);return(O?Promise.resolve([]):p.getMany({trans:c,keys:te,cache:"immutable"})).then(function(oe){var ne=[],_e=[],Be=b?[]:null,se=O?te:[];if(!O)for(var Oe=0;Oe<H;++Oe){var xe=oe[Oe],Ye={value:Ae(xe),primKey:N[z+Oe]};d.call(Ye,Ye.value,Ye)!==!1&&(Ye.value==null?se.push(N[z+Oe]):!b&&Ue(k(xe),k(Ye.value))!==0?(se.push(N[z+Oe]),ne.push(Ye.value)):(_e.push(Ye.value),b&&Be.push(N[z+Oe])))}return Promise.resolve(ne.length>0&&p.mutate({trans:c,type:"add",values:ne}).then(function(he){for(var vt in he.failures)se.splice(parseInt(vt),1);P(ne.length,he)})).then(function(){return(_e.length>0||j&&typeof r=="object")&&p.mutate({trans:c,type:"put",keys:Be,values:_e,criteria:j,changeSpec:typeof r!="function"&&r,isAdditionalChunk:z>0}).then(function(he){return P(_e.length,he)})}).then(function(){return(se.length>0||j&&O)&&p.mutate({trans:c,type:"delete",keys:se,criteria:j,isAdditionalChunk:z>0}).then(function(he){return ra(u.table,se,he)}).then(function(he){return P(se.length,he)})}).then(function(){return N.length>z+H&&U(z+D)})})};return U(0).then(function(){if(M.length>0)throw new ht("Error modifying one or more objects",M,X,I);return N.length})})})},n.prototype.delete=function(){var r=this._ctx,o=r.range;return Yr(r)&&!r.table.schema.yProps&&(r.isPrimKey||o.type===3)?this._write(function(u){var c=r.table.core.schema.primaryKey,d=o;return r.table.core.count({trans:u,query:{index:c,range:d}}).then(function(p){return r.table.core.mutate({trans:u,type:"deleteRange",range:d}).then(function(g){var b=g.failures,k=g.numFailures;if(k)throw new ht("Could not delete some values",Object.keys(b).map(function(D){return b[D]}),p-k);return p-k})})}):this.modify(uu)},n})(),uu=function(n,r){return r.value=null};function Fc(n){return mi(Nc.prototype,function(o,u){this.db=n;var c=eu,d=null;if(u)try{c=u()}catch(k){d=k}var p=o._ctx,g=p.table,b=g.hook.reading.fire;this._ctx={table:g,index:p.index,isPrimKey:!p.index||g.schema.primKey.keyPath&&p.index===g.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:p.or,valueMapper:b!==ln?b:null}})}function Hc(n,r){return n<r?-1:n===r?0:1}function jc(n,r){return n>r?-1:n===r?0:1}function en(n,r,o){var u=n instanceof cu?new n.Collection(n):n;return u._ctx.error=o?new o(r):new TypeError(r),u}function Wr(n){return new n.Collection(n,function(){return lu("")}).limit(0)}function Uc(n){return n==="next"?function(r){return r.toUpperCase()}:function(r){return r.toLowerCase()}}function zc(n){return n==="next"?function(r){return r.toLowerCase()}:function(r){return r.toUpperCase()}}function Vc(n,r,o,u,c,d){for(var p=Math.min(n.length,u.length),g=-1,b=0;b<p;++b){var k=r[b];if(k!==u[b])return c(n[b],o[b])<0?n.substr(0,b)+o[b]+o.substr(b+1):c(n[b],u[b])<0?n.substr(0,b)+u[b]+o.substr(b+1):g>=0?n.substr(0,g)+r[g]+o.substr(g+1):null;c(n[b],k)<0&&(g=b)}return p<u.length&&d==="next"?n+o.substr(n.length):p<n.length&&d==="prev"?n.substr(0,o.length):g<0?null:n.substr(0,g)+u[g]+o.substr(g+1)}function oa(n,r,o,u){var c,d,p,g,b,k,D,A=o.length;if(!o.every(function(P){return typeof P=="string"}))return en(n,$s);function M(P){c=Uc(P),d=zc(P),p=P==="next"?Hc:jc;var O=o.map(function(N){return{lower:d(N),upper:c(N)}}).sort(function(N,j){return p(N.lower,j.lower)});g=O.map(function(N){return N.upper}),b=O.map(function(N){return N.lower}),k=P,D=P==="next"?"":u}M("next");var X=new n.Collection(n,function(){return nr(g[0],b[A-1]+u)});X._ondirectionchange=function(P){M(P)};var I=0;return X._addAlgorithm(function(P,O,N){var j=P.key;if(typeof j!="string")return!1;var U=d(j);if(r(U,b,I))return!0;for(var z=null,H=I;H<A;++H){var te=Vc(j,U,g[H],b[H],p,k);te===null&&z===null?I=H+1:(z===null||p(z,te)>0)&&(z=te)}return O(z!==null?function(){P.continue(z+D)}:N),!1}),X}function nr(n,r,o,u){return{type:2,lower:n,upper:r,lowerOpen:o,upperOpen:u}}function lu(n){return{type:1,lower:n,upper:n}}var cu=(function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(r,o,u,c){u=u!==!1,c=c===!0;try{return this._cmp(r,o)>0||this._cmp(r,o)===0&&(u||c)&&!(u&&c)?Wr(this):new this.Collection(this,function(){return nr(r,o,!u,!c)})}catch{return en(this,Rn)}},n.prototype.equals=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return lu(r)})},n.prototype.above=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return nr(r,void 0,!0)})},n.prototype.aboveOrEqual=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return nr(r,void 0,!1)})},n.prototype.below=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return nr(void 0,r,!1,!0)})},n.prototype.belowOrEqual=function(r){return r==null?en(this,Rn):new this.Collection(this,function(){return nr(void 0,r)})},n.prototype.startsWith=function(r){return typeof r!="string"?en(this,$s):this.between(r,r+br,!0,!0)},n.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):oa(this,function(o,u){return o.indexOf(u[0])===0},[r],br)},n.prototype.equalsIgnoreCase=function(r){return oa(this,function(o,u){return o===u[0]},[r],"")},n.prototype.anyOfIgnoreCase=function(){var r=be.apply(De,arguments);return r.length===0?Wr(this):oa(this,function(o,u){return u.indexOf(o)!==-1},r,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var r=be.apply(De,arguments);return r.length===0?Wr(this):oa(this,function(o,u){return u.some(function(c){return o.indexOf(c)===0})},r,br)},n.prototype.anyOf=function(){var r=this,o=be.apply(De,arguments),u=this._cmp;try{o.sort(u)}catch{return en(this,Rn)}if(o.length===0)return Wr(this);var c=new this.Collection(this,function(){return nr(o[0],o[o.length-1])});c._ondirectionchange=function(p){u=p==="next"?r._ascending:r._descending,o.sort(u)};var d=0;return c._addAlgorithm(function(p,g,b){for(var k=p.key;u(k,o[d])>0;)if(++d,d===o.length)return g(b),!1;return u(k,o[d])===0?!0:(g(function(){p.continue(o[d])}),!1)}),c},n.prototype.notEqual=function(r){return this.inAnyRange([[Eo,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var r=be.apply(De,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return en(this,Rn)}var o=r.reduce(function(u,c){return u?u.concat([[u[u.length-1][1],c]]):[[Eo,c]]},null);return o.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(r,o){var u=this,c=this._cmp,d=this._ascending,p=this._descending,g=this._min,b=this._max;if(r.length===0)return Wr(this);if(!r.every(function(H){return H[0]!==void 0&&H[1]!==void 0&&d(H[0],H[1])<=0}))return en(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var k=!o||o.includeLowers!==!1,D=o&&o.includeUppers===!0;function A(H,te){for(var oe=0,ne=H.length;oe<ne;++oe){var _e=H[oe];if(c(te[0],_e[1])<0&&c(te[1],_e[0])>0){_e[0]=g(_e[0],te[0]),_e[1]=b(_e[1],te[1]);break}}return oe===ne&&H.push(te),H}var M=d;function X(H,te){return M(H[0],te[0])}var I;try{I=r.reduce(A,[]),I.sort(X)}catch{return en(this,Rn)}var P=0,O=D?function(H){return d(H,I[P][1])>0}:function(H){return d(H,I[P][1])>=0},N=k?function(H){return p(H,I[P][0])>0}:function(H){return p(H,I[P][0])>=0};function j(H){return!O(H)&&!N(H)}var U=O,z=new this.Collection(this,function(){return nr(I[0][0],I[I.length-1][1],!k,!D)});return z._ondirectionchange=function(H){H==="next"?(U=O,M=d):(U=N,M=p),I.sort(X)},z._addAlgorithm(function(H,te,oe){for(var ne=H.key;U(ne);)if(++P,P===I.length)return te(oe),!1;return j(ne)?!0:(u._cmp(ne,I[P][1])===0||u._cmp(ne,I[P][0])===0||te(function(){M===d?H.continue(I[P][0]):H.continue(I[P][1])}),!1)}),z},n.prototype.startsWithAnyOf=function(){var r=be.apply(De,arguments);return r.every(function(o){return typeof o=="string"})?r.length===0?Wr(this):this.inAnyRange(r.map(function(o){return[o,o+br]})):en(this,"startsWithAnyOf() only works with strings")},n})();function Yc(n){return mi(cu.prototype,function(o,u,c){if(this.db=n,this._ctx={table:o,index:u===":id"?null:u,or:c},this._cmp=this._ascending=Ue,this._descending=function(d,p){return Ue(p,d)},this._max=function(d,p){return Ue(d,p)>0?d:p},this._min=function(d,p){return Ue(d,p)<0?d:p},this._IDBKeyRange=n._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})}function Tn(n){return lt(function(r){return gi(r),n(r.target.error),!1})}function gi(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var yi="storagemutated",Ao="x-storagemutated-1",rr=pi(null,yi),Wc=(function(){function n(){}return n.prototype._lock=function(){return $(!de.global),++this._reculock,this._reculock===1&&!de.global&&(de.lockOwnerFor=this),this},n.prototype._unlock=function(){if($(!de.global),--this._reculock===0)for(de.global||(de.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{yr(r[1],r[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&de.lockOwnerFor!==this},n.prototype.create=function(r){var o=this;if(!this.mode)return this;var u=this.db.idbdb,c=this.db._state.dbOpenError;if($(!this.idbtrans),!r&&!u)switch(c&&c.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(c);case"MissingAPIError":throw new ue.MissingAPI(c.message,c);default:throw new ue.OpenFailed(c)}if(!this.active)throw new ue.TransactionInactive;return $(this._completion._state===null),r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):u.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),r.onerror=lt(function(d){gi(d),o._reject(r.error)}),r.onabort=lt(function(d){gi(d),o.active&&o._reject(new ue.Abort(r.error)),o.active=!1,o.on("abort").fire(d)}),r.oncomplete=lt(function(){o.active=!1,o._resolve(),"mutatedParts"in r&&rr.storagemutated.fire(r.mutatedParts)}),this},n.prototype._promise=function(r,o,u){var c=this;if(r==="readwrite"&&this.mode!=="readwrite")return mt(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return mt(new ue.TransactionInactive);if(this._locked())return new re(function(p,g){c._blockedFuncs.push([function(){c._promise(r,o,u).then(p,g)},de])});if(u)return $n(function(){var p=new re(function(g,b){c._lock();var k=o(g,b,c);k&&k.then&&k.then(g,b)});return p.finally(function(){return c._unlock()}),p._lib=!0,p});var d=new re(function(p,g){var b=o(p,g,c);b&&b.then&&b.then(p,g)});return d._lib=!0,d},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(r){var o=this._root(),u=re.resolve(r);if(o._waitingFor)o._waitingFor=o._waitingFor.then(function(){return u});else{o._waitingFor=u,o._waitingQueue=[];var c=o.idbtrans.objectStore(o.storeNames[0]);(function p(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(c.get(-1/0).onsuccess=p)})()}var d=o._waitingFor;return new re(function(p,g){u.then(function(b){return o._waitingQueue.push(lt(p.bind(null,b)))},function(b){return o._waitingQueue.push(lt(g.bind(null,b)))}).finally(function(){o._waitingFor===d&&(o._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},n.prototype.table=function(r){var o=this._memoizedTables||(this._memoizedTables={});if(w(o,r))return o[r];var u=this.schema[r];if(!u)throw new ue.NotFound("Table "+r+" not part of transaction");var c=new this.db.Table(r,u,this);return c.core=this.db.core.table(r),o[r]=c,c},n})();function qc(n){return mi(Wc.prototype,function(o,u,c,d,p){var g=this;o!=="readonly"&&u.forEach(function(b){var k,D=(k=c[b])===null||k===void 0?void 0:k.yProps;D&&(u=u.concat(D.map(function(A){return A.updatesTable})))}),this.db=n,this.mode=o,this.storeNames=u,this.schema=c,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=pi(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new re(function(b,k){g._resolve=b,g._reject=k}),this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(b){var k=g.active;return g.active=!1,g.on.error.fire(b),g.parent?g.parent._reject(b):k&&g.idbtrans&&g.idbtrans.abort(),mt(b)})})}function Io(n,r,o,u,c,d,p,g){return{name:n,keyPath:r,unique:o,multi:u,auto:c,compound:d,src:(o&&!p?"&":"")+(u?"*":"")+(c?"++":"")+fu(r),type:g}}function fu(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Do(n,r,o){return{name:n,primKey:r,indexes:o,mappedClass:null,idxByName:F(o,function(u){return[u.name,u]})}}function Gc(n){return n.length===1?n[0]:n}var bi=function(n){try{return n.only([[]]),bi=function(){return[[]]},[[]]}catch{return bi=function(){return br},br}};function Co(n){return n==null?function(){}:typeof n=="string"?Xc(n):function(r){return Z(r,n)}}function Xc(n){var r=n.split(".");return r.length===1?function(o){return o[n]}:function(o){return Z(o,n)}}function du(n){return[].slice.call(n)}var Qc=0;function _i(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Zc(n,r,o){function u(A,M){var X=du(A.objectStoreNames);return{schema:{name:A.name,tables:X.map(function(I){return M.objectStore(I)}).map(function(I){var P=I.keyPath,O=I.autoIncrement,N=v(P),j=P==null,U={},z={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j,compound:N,keyPath:P,autoIncrement:O,unique:!0,extractKey:Co(P)},indexes:du(I.indexNames).map(function(H){return I.index(H)}).map(function(H){var te=H.name,oe=H.unique,ne=H.multiEntry,_e=H.keyPath,Be=v(_e),se={name:te,compound:Be,keyPath:_e,unique:oe,multiEntry:ne,extractKey:Co(_e)};return U[_i(_e)]=se,se}),getIndexByKeyPath:function(H){return U[_i(H)]}};return U[":id"]=z.primaryKey,P!=null&&(U[_i(P)]=z.primaryKey),z})},hasGetAll:X.length>0&&"getAll"in M.objectStore(X[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function c(A){if(A.type===3)return null;if(A.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=A.lower,X=A.upper,I=A.lowerOpen,P=A.upperOpen,O=M===void 0?X===void 0?null:r.upperBound(X,!!P):X===void 0?r.lowerBound(M,!!I):r.bound(M,X,!!I,!!P);return O}function d(A){var M=A.name;function X(O){var N=O.trans,j=O.type,U=O.keys,z=O.values,H=O.range;return new Promise(function(te,oe){te=lt(te);var ne=N.objectStore(M),_e=ne.keyPath==null,Be=j==="put"||j==="add";if(!Be&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var se=(U||z||{length:1}).length;if(U&&z&&U.length!==z.length)throw new Error("Given keys array must have same length as given values array.");if(se===0)return te({numFailures:0,failures:{},results:[],lastResult:void 0});var Oe,xe=[],Ye=[],he=0,vt=function(An){++he,gi(An)};if(j==="deleteRange"){if(H.type===4)return te({numFailures:he,failures:Ye,results:[],lastResult:void 0});H.type===3?xe.push(Oe=ne.clear()):xe.push(Oe=ne.delete(c(H)))}else{var Kt=Be?_e?[z,U]:[z,null]:[U,null],Sn=Kt[0],Vt=Kt[1];if(Be)for(var fn=0;fn<se;++fn)xe.push(Oe=Vt&&Vt[fn]!==void 0?ne[j](Sn[fn],Vt[fn]):ne[j](Sn[fn])),Oe.onerror=vt;else for(var fn=0;fn<se;++fn)xe.push(Oe=ne[j](Sn[fn])),Oe.onerror=vt}var or=function(An){var xi=An.target.result;xe.forEach(function(mn,ya){return mn.error!=null&&(Ye[ya]=mn.error)}),te({numFailures:he,failures:Ye,results:j==="delete"?U:xe.map(function(mn){return mn.result}),lastResult:xi})};Oe.onerror=function(An){vt(An),or(An)},Oe.onsuccess=or})}function I(O){var N=O.trans,j=O.values,U=O.query,z=O.reverse,H=O.unique;return new Promise(function(te,oe){te=lt(te);var ne=U.index,_e=U.range,Be=N.objectStore(M),se=ne.isPrimaryKey?Be:Be.index(ne.name),Oe=z?H?"prevunique":"prev":H?"nextunique":"next",xe=j||!("openKeyCursor"in se)?se.openCursor(c(_e),Oe):se.openKeyCursor(c(_e),Oe);xe.onerror=Tn(oe),xe.onsuccess=lt(function(Ye){var he=xe.result;if(!he){te(null);return}he.___id=++Qc,he.done=!1;var vt=he.continue.bind(he),Kt=he.continuePrimaryKey;Kt&&(Kt=Kt.bind(he));var Sn=he.advance.bind(he),Vt=function(){throw new Error("Cursor not started")},fn=function(){throw new Error("Cursor not stopped")};he.trans=N,he.stop=he.continue=he.continuePrimaryKey=he.advance=Vt,he.fail=lt(oe),he.next=function(){var or=this,An=1;return this.start(function(){return An--?or.continue():or.stop()}).then(function(){return or})},he.start=function(or){var An=new Promise(function(mn,ya){mn=lt(mn),xe.onerror=Tn(ya),he.fail=ya,he.stop=function(Ff){he.stop=he.continue=he.continuePrimaryKey=he.advance=fn,mn(Ff)}}),xi=function(){if(xe.result)try{or()}catch(mn){he.fail(mn)}else he.done=!0,he.start=function(){throw new Error("Cursor behind last entry")},he.stop()};return xe.onsuccess=lt(function(mn){xe.onsuccess=xi,xi()}),he.continue=vt,he.continuePrimaryKey=Kt,he.advance=Sn,xi(),An},te(he)},oe)})}function P(O){return function(N){return new Promise(function(j,U){j=lt(j);var z=N.trans,H=N.values,te=N.limit,oe=N.query,ne=te===1/0?void 0:te,_e=oe.index,Be=oe.range,se=z.objectStore(M),Oe=_e.isPrimaryKey?se:se.index(_e.name),xe=c(Be);if(te===0)return j({result:[]});if(O){var Ye=H?Oe.getAll(xe,ne):Oe.getAllKeys(xe,ne);Ye.onsuccess=function(Sn){return j({result:Sn.target.result})},Ye.onerror=Tn(U)}else{var he=0,vt=H||!("openKeyCursor"in Oe)?Oe.openCursor(xe):Oe.openKeyCursor(xe),Kt=[];vt.onsuccess=function(Sn){var Vt=vt.result;if(!Vt)return j({result:Kt});if(Kt.push(H?Vt.value:Vt.primaryKey),++he===te)return j({result:Kt});Vt.continue()},vt.onerror=Tn(U)}})}}return{name:M,schema:A,mutate:X,getMany:function(O){var N=O.trans,j=O.keys;return new Promise(function(U,z){U=lt(U);for(var H=N.objectStore(M),te=j.length,oe=new Array(te),ne=0,_e=0,Be,se=function(he){var vt=he.target;(oe[vt._pos]=vt.result)!=null,++_e===ne&&U(oe)},Oe=Tn(z),xe=0;xe<te;++xe){var Ye=j[xe];Ye!=null&&(Be=H.get(j[xe]),Be._pos=xe,Be.onsuccess=se,Be.onerror=Oe,++ne)}ne===0&&U(oe)})},get:function(O){var N=O.trans,j=O.key;return new Promise(function(U,z){U=lt(U);var H=N.objectStore(M),te=H.get(j);te.onsuccess=function(oe){return U(oe.target.result)},te.onerror=Tn(z)})},query:P(b),openCursor:I,count:function(O){var N=O.query,j=O.trans,U=N.index,z=N.range;return new Promise(function(H,te){var oe=j.objectStore(M),ne=U.isPrimaryKey?oe:oe.index(U.name),_e=c(z),Be=_e?ne.count(_e):ne.count();Be.onsuccess=lt(function(se){return H(se.target.result)}),Be.onerror=Tn(te)})}}}var p=u(n,o),g=p.schema,b=p.hasGetAll,k=g.tables.map(function(A){return d(A)}),D={};return k.forEach(function(A){return D[A.name]=A}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(A){var M=D[A];if(!M)throw new Error("Table '".concat(A,"' not found"));return D[A]},MIN_KEY:-1/0,MAX_KEY:bi(r),schema:g}}function Jc(n,r){return r.reduce(function(o,u){var c=u.create;return s(s({},o),c(o))},n)}function $c(n,r,o,u){var c=o.IDBKeyRange;o.indexedDB;var d=Jc(Zc(r,c,u),n.dbcore);return{dbcore:d}}function sa(n,r){var o=r.db,u=$c(n._middlewares,o,n._deps,r);n.core=u.dbcore,n.tables.forEach(function(c){var d=c.name;n.core.schema.tables.some(function(p){return p.name===d})&&(c.core=n.core.table(d),n[d]instanceof n.Table&&(n[d].core=c.core))})}function ua(n,r,o,u){o.forEach(function(c){var d=u[c];r.forEach(function(p){var g=K(p,c);(!g||"value"in g&&g.value===void 0)&&(p===n.Transaction.prototype||p instanceof n.Transaction?S(p,c,{get:function(){return this.table(c)},set:function(b){L(this,c,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):p[c]=new n.Table(c,d))})})}function Lo(n,r){r.forEach(function(o){for(var u in o)o[u]instanceof n.Table&&delete o[u]})}function ef(n,r){return n._cfg.version-r._cfg.version}function tf(n,r,o,u){var c=n._dbSchema;o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Do("$meta",vu("")[0],[]),n._storeNames.push("$meta"));var d=n._createTransaction("readwrite",n._storeNames,c);d.create(o),d._completion.catch(u);var p=d._reject.bind(d),g=de.transless||de;$n(function(){if(de.trans=d,de.transless=g,r===0)h(c).forEach(function(b){Oo(o,b,c[b].primKey,c[b].indexes)}),sa(n,o),re.follow(function(){return n.on.populate.fire(d)}).catch(p);else return sa(n,o),rf(n,d,r).then(function(b){return af(n,b,d,o)}).catch(p)})}function nf(n,r){hu(n._dbSchema,r),r.db.version%10===0&&!r.objectStoreNames.contains("$meta")&&r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var o=ca(n,n.idbdb,r);fa(n,n._dbSchema,r);for(var u=Po(o,n._dbSchema),c=function(k){if(k.change.length||k.recreate)return console.warn("Unable to patch indexes of table ".concat(k.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=r.objectStore(k.name);k.add.forEach(function(A){Te&&console.debug("Dexie upgrade patch: Creating missing index ".concat(k.name,".").concat(A.src)),la(D,A)})},d=0,p=u.change;d<p.length;d++){var g=p[d],b=c(g);if(typeof b=="object")return b.value}}function rf(n,r,o){return r.storeNames.includes("$meta")?r.table("$meta").get("version").then(function(u){return u??o}):re.resolve(o)}function af(n,r,o,u){var c=[],d=n._versions,p=n._dbSchema=ca(n,n.idbdb,u),g=d.filter(function(k){return k._cfg.version>=r});if(g.length===0)return re.resolve();g.forEach(function(k){c.push(function(){var D=p,A=k._cfg.dbschema;fa(n,D,u),fa(n,A,u),p=n._dbSchema=A;var M=Po(D,A);M.add.forEach(function(j){Oo(u,j[0],j[1].primKey,j[1].indexes)}),M.change.forEach(function(j){if(j.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var U=u.objectStore(j.name);j.add.forEach(function(z){return la(U,z)}),j.change.forEach(function(z){U.deleteIndex(z.name),la(U,z)}),j.del.forEach(function(z){return U.deleteIndex(z)})});var X=k._cfg.contentUpgrade;if(X&&k._cfg.version>r){sa(n,u),o._memoizedTables={};var I=ye(A);M.del.forEach(function(j){I[j]=D[j]}),Lo(n,[n.Transaction.prototype]),ua(n,[n.Transaction.prototype],h(I),I),o.schema=I;var P=Ze(X);P&&zr();var O,N=re.follow(function(){if(O=X(o),O&&P){var j=er.bind(null,null);O.then(j,j)}});return O&&typeof O.then=="function"?re.resolve(O):N.then(function(){return O})}}),c.push(function(D){var A=k._cfg.dbschema;of(A,D),Lo(n,[n.Transaction.prototype]),ua(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),o.schema=n._dbSchema}),c.push(function(D){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===k._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(A){return A!=="$meta"})):D.objectStore("$meta").put(k._cfg.version,"version"))})});function b(){return c.length?re.resolve(c.shift()(o.idbtrans)).then(b):re.resolve()}return b().then(function(){hu(p,u)})}function Po(n,r){var o={del:[],add:[],change:[]},u;for(u in n)r[u]||o.del.push(u);for(u in r){var c=n[u],d=r[u];if(!c)o.add.push([u,d]);else{var p={name:u,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)p.recreate=!0,o.change.push(p);else{var g=c.idxByName,b=d.idxByName,k=void 0;for(k in g)b[k]||p.del.push(k);for(k in b){var D=g[k],A=b[k];D?D.src!==A.src&&p.change.push(A):p.add.push(A)}(p.del.length>0||p.add.length>0||p.change.length>0)&&o.change.push(p)}}}return o}function Oo(n,r,o,u){var c=n.db.createObjectStore(r,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return u.forEach(function(d){return la(c,d)}),c}function hu(n,r){h(n).forEach(function(o){r.db.objectStoreNames.contains(o)||(Te&&console.debug("Dexie: Creating missing table",o),Oo(r,o,n[o].primKey,n[o].indexes))})}function of(n,r){[].slice.call(r.db.objectStoreNames).forEach(function(o){return n[o]==null&&r.db.deleteObjectStore(o)})}function la(n,r){n.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function ca(n,r,o){var u={},c=B(r.objectStoreNames,0);return c.forEach(function(d){for(var p=o.objectStore(d),g=p.keyPath,b=Io(fu(g),g||"",!0,!1,!!p.autoIncrement,g&&typeof g!="string",!0),k=[],D=0;D<p.indexNames.length;++D){var A=p.index(p.indexNames[D]);g=A.keyPath;var M=Io(A.name,g,!!A.unique,!!A.multiEntry,!1,g&&typeof g!="string",!1);k.push(M)}u[d]=Do(d,b,k)}),u}function sf(n,r,o){n.verno=r.version/10;var u=n._dbSchema=ca(n,r,o);n._storeNames=B(r.objectStoreNames,0),ua(n,[n._allTables],h(u),u)}function uf(n,r){var o=ca(n,n.idbdb,r),u=Po(o,n._dbSchema);return!(u.add.length||u.change.some(function(c){return c.add.length||c.change.length}))}function fa(n,r,o){for(var u=o.db.objectStoreNames,c=0;c<u.length;++c){var d=u[c],p=o.objectStore(d);n._hasGetAll="getAll"in p;for(var g=0;g<p.indexNames.length;++g){var b=p.indexNames[g],k=p.index(b).keyPath,D=typeof k=="string"?k:"["+B(k).join("+")+"]";if(r[d]){var A=r[d].idxByName[D];A&&(A.name=b,delete r[d].idxByName[D],r[d].idxByName[b]=A)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function vu(n){return n.split(",").map(function(r,o){var u,c=r.split(":"),d=(u=c[1])===null||u===void 0?void 0:u.trim();r=c[0].trim();var p=r.replace(/([&*]|\+\+)/g,""),g=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return Io(p,g||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),v(g),o===0,d)})}var lf=(function(){function n(){}return n.prototype._createTableSchema=function(r,o,u){return Do(r,o,u)},n.prototype._parseIndexSyntax=function(r){return vu(r)},n.prototype._parseStoresSpec=function(r,o){var u=this;h(r).forEach(function(c){if(r[c]!==null){var d=u._parseIndexSyntax(r[c]),p=d.shift();if(!p)throw new ue.Schema("Invalid schema for table "+c+": "+r[c]);if(p.unique=!0,p.multi)throw new ue.Schema("Primary key cannot be multiEntry*");d.forEach(function(b){if(b.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")});var g=u._createTableSchema(c,p,d);o[c]=g}})},n.prototype.stores=function(r){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,r):r;var u=o._versions,c={},d={};return u.forEach(function(p){m(c,p._cfg.storesSource),d=p._cfg.dbschema={},p._parseStoresSpec(c,d)}),o._dbSchema=d,Lo(o,[o._allTables,o,o.Transaction.prototype]),ua(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],h(d),d),o._storeNames=h(d),this},n.prototype.upgrade=function(r){return this._cfg.contentUpgrade=tt(this._cfg.contentUpgrade||Ne,r),this},n})();function cf(n){return mi(lf.prototype,function(o){this.db=n,this._cfg={version:o,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Mo(n,r){var o=n._dbNamesDB;return o||(o=n._dbNamesDB=new Kn(ta,{addons:[],indexedDB:n,IDBKeyRange:r}),o.version(1).stores({dbnames:"name"})),o.table("dbnames")}function Ro(n){return n&&typeof n.databases=="function"}function ff(n){var r=n.indexedDB,o=n.IDBKeyRange;return Ro(r)?Promise.resolve(r.databases()).then(function(u){return u.map(function(c){return c.name}).filter(function(c){return c!==ta})}):Mo(r,o).toCollection().primaryKeys()}function df(n,r){var o=n.indexedDB,u=n.IDBKeyRange;!Ro(o)&&r!==ta&&Mo(o,u).put({name:r}).catch(Ne)}function hf(n,r){var o=n.indexedDB,u=n.IDBKeyRange;!Ro(o)&&r!==ta&&Mo(o,u).delete(r).catch(Ne)}function Ko(n){return $n(function(){return de.letThrough=!0,n()})}function vf(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(o){var u=function(){return indexedDB.databases().finally(o)};r=setInterval(u,100),u()}).finally(function(){return clearInterval(r)})}var Bo;function No(n){return!("from"in n)}var Rt=function(n,r){if(this)m(this,arguments.length?{d:1,from:n,to:arguments.length>1?r:n}:{d:0});else{var o=new Rt;return n&&"d"in n&&m(o,n),o}};x(Rt.prototype,(Bo={add:function(n){return Ei(this,n),this},addKey:function(n){return wi(this,n,n),this},addKeys:function(n){var r=this;return n.forEach(function(o){return wi(r,o,o)}),this},hasKey:function(n){var r=da(this).next(n).value;return r&&Ue(r.from,n)<=0&&Ue(r.to,n)>=0}},Bo[Y]=function(){return da(this)},Bo));function wi(n,r,o){var u=Ue(r,o);if(!isNaN(u)){if(u>0)throw RangeError();if(No(n))return m(n,{from:r,to:o,d:1});var c=n.l,d=n.r;if(Ue(o,n.from)<0)return c?wi(c,r,o):n.l={from:r,to:o,d:1,l:null,r:null},mu(n);if(Ue(r,n.to)>0)return d?wi(d,r,o):n.r={from:r,to:o,d:1,l:null,r:null},mu(n);Ue(r,n.from)<0&&(n.from=r,n.l=null,n.d=d?d.d+1:1),Ue(o,n.to)>0&&(n.to=o,n.r=null,n.d=n.l?n.l.d+1:1);var p=!n.r;c&&!n.l&&Ei(n,c),d&&p&&Ei(n,d)}}function Ei(n,r){function o(u,c){var d=c.from,p=c.to,g=c.l,b=c.r;wi(u,d,p),g&&o(u,g),b&&o(u,b)}No(r)||o(n,r)}function pu(n,r){var o=da(r),u=o.next();if(u.done)return!1;for(var c=u.value,d=da(n),p=d.next(c.from),g=p.value;!u.done&&!p.done;){if(Ue(g.from,c.to)<=0&&Ue(g.to,c.from)>=0)return!0;Ue(c.from,g.from)<0?c=(u=o.next(g.from)).value:g=(p=d.next(c.from)).value}return!1}function da(n){var r=No(n)?null:{s:0,n};return{next:function(o){for(var u=arguments.length>0;r;)switch(r.s){case 0:if(r.s=1,u)for(;r.n.l&&Ue(o,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!u||Ue(o,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function mu(n){var r,o,u=(((r=n.r)===null||r===void 0?void 0:r.d)||0)-(((o=n.l)===null||o===void 0?void 0:o.d)||0),c=u>1?"r":u<-1?"l":"";if(c){var d=c==="r"?"l":"r",p=s({},n),g=n[c];n.from=g.from,n.to=g.to,n[c]=g[c],p[c]=g[d],n[d]=p,p.d=gu(p)}n.d=gu(n)}function gu(n){var r=n.r,o=n.l;return(r?o?Math.max(r.d,o.d):r.d:o?o.d:0)+1}function ha(n,r){return h(r).forEach(function(o){n[o]?Ei(n[o],r[o]):n[o]=rt(r[o])}),n}function Fo(n,r){return n.all||r.all||Object.keys(n).some(function(o){return r[o]&&pu(r[o],n[o])})}var wr={},Ho={},jo=!1;function va(n,r){ha(Ho,n),jo||(jo=!0,setTimeout(function(){jo=!1;var o=Ho;Ho={},Uo(o,!1)},0))}function Uo(n,r){r===void 0&&(r=!1);var o=new Set;if(n.all)for(var u=0,c=Object.values(wr);u<c.length;u++){var d=c[u];yu(d,n,o,r)}else for(var p in n){var g=/^idb\:\/\/(.*)\/(.*)\//.exec(p);if(g){var b=g[1],k=g[2],d=wr["idb://".concat(b,"/").concat(k)];d&&yu(d,n,o,r)}}o.forEach(function(D){return D()})}function yu(n,r,o,u){for(var c=[],d=0,p=Object.entries(n.queries.query);d<p.length;d++){for(var g=p[d],b=g[0],k=g[1],D=[],A=0,M=k;A<M.length;A++){var X=M[A];Fo(r,X.obsSet)?X.subscribers.forEach(function(N){return o.add(N)}):u&&D.push(X)}u&&c.push([b,D])}if(u)for(var I=0,P=c;I<P.length;I++){var O=P[I],b=O[0],D=O[1];n.queries.query[b]=D}}function pf(n){var r=n._state,o=n._deps.indexedDB;if(r.isBeingOpened||n.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?mt(r.dbOpenError):n});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var u=r.openCanceller,c=Math.round(n.verno*10),d=!1;function p(){if(r.openCanceller!==u)throw new ue.DatabaseClosed("db.open() was cancelled")}var g=r.dbReadyResolve,b=null,k=!1,D=function(){return new re(function(A,M){if(p(),!o)throw new ue.MissingAPI;var X=n.name,I=r.autoSchema||!c?o.open(X):o.open(X,c);if(!I)throw new ue.MissingAPI;I.onerror=Tn(M),I.onblocked=lt(n._fireOnBlocked),I.onupgradeneeded=lt(function(P){if(b=I.transaction,r.autoSchema&&!n._options.allowEmptyDB){I.onerror=gi,b.abort(),I.result.close();var O=o.deleteDatabase(X);O.onsuccess=O.onerror=lt(function(){M(new ue.NoSuchDatabase("Database ".concat(X," doesnt exist")))})}else{b.onerror=Tn(M);var N=P.oldVersion>Math.pow(2,62)?0:P.oldVersion;k=N<1,n.idbdb=I.result,d&&nf(n,b),tf(n,N/10,b,M)}},M),I.onsuccess=lt(function(){b=null;var P=n.idbdb=I.result,O=B(P.objectStoreNames);if(O.length>0)try{var N=P.transaction(Gc(O),"readonly");if(r.autoSchema)sf(n,P,N);else if(fa(n,n._dbSchema,N),!uf(n,N)&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),P.close(),c=P.version+1,d=!0,A(D());sa(n,N)}catch{}Vr.push(n),P.onversionchange=lt(function(j){r.vcFired=!0,n.on("versionchange").fire(j)}),P.onclose=lt(function(){n.close({disableAutoOpen:!1})}),k&&df(n._deps,X),A()},M)}).catch(function(A){switch(A?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(c>0)return c=0,D();break}return re.reject(A)})};return re.race([u,(typeof navigator>"u"?re.resolve():vf()).then(D)]).then(function(){return p(),r.onReadyBeingFired=[],re.resolve(Ko(function(){return n.on.ready.fire(n.vip)})).then(function A(){if(r.onReadyBeingFired.length>0){var M=r.onReadyBeingFired.reduce(tt,Ne);return r.onReadyBeingFired=[],re.resolve(Ko(function(){return M(n.vip)})).then(A)}})}).finally(function(){r.openCanceller===u&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(A){r.dbOpenError=A;try{b&&b.abort()}catch{}return u===r.openCanceller&&n._close(),mt(A)}).finally(function(){r.openComplete=!0,g()}).then(function(){if(k){var A={};n.tables.forEach(function(M){M.schema.indexes.forEach(function(X){X.name&&(A["idb://".concat(n.name,"/").concat(M.name,"/").concat(X.name)]=new Rt(-1/0,[[[]]]))}),A["idb://".concat(n.name,"/").concat(M.name,"/")]=A["idb://".concat(n.name,"/").concat(M.name,"/:dels")]=new Rt(-1/0,[[[]]])}),rr(yi).fire(A),Uo(A,!0)}return n})}function zo(n){var r=function(p){return n.next(p)},o=function(p){return n.throw(p)},u=d(r),c=d(o);function d(p){return function(g){var b=p(g),k=b.value;return b.done?k:!k||typeof k.then!="function"?v(k)?Promise.all(k).then(u,c):u(k):k.then(u,c)}}return d(r)()}function mf(n,r,o){var u=arguments.length;if(u<2)throw new ue.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];o=c.pop();var d=pe(c);return[n,d,o]}function bu(n,r,o,u,c){return re.resolve().then(function(){var d=de.transless||de,p=n._createTransaction(r,o,n._dbSchema,u);p.explicit=!0;var g={trans:p,transless:d};if(u)p.idbtrans=u.idbtrans;else try{p.create(),p.idbtrans._explicit=!0,n._state.PR1398_maxLoop=3}catch(A){return A.name===St.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return bu(n,r,o,null,c)})):mt(A)}var b=Ze(c);b&&zr();var k,D=re.follow(function(){if(k=c.call(p,p),k)if(b){var A=er.bind(null,null);k.then(A,A)}else typeof k.next=="function"&&typeof k.throw=="function"&&(k=zo(k))},g);return(k&&typeof k.then=="function"?re.resolve(k).then(function(A){return p.active?A:mt(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return k})).then(function(A){return u&&p._resolve(),p._completion.then(function(){return A})}).catch(function(A){return p._reject(A),mt(A)})})}function pa(n,r,o){for(var u=v(n)?n.slice():[n],c=0;c<o;++c)u.push(r);return u}function gf(n){return s(s({},n),{table:function(r){var o=n.table(r),u=o.schema,c={},d=[];function p(P,O,N){var j=_i(P),U=c[j]=c[j]||[],z=P==null?0:typeof P=="string"?1:P.length,H=O>0,te=s(s({},N),{name:H?"".concat(j,"(virtual-from:").concat(N.name,")"):N.name,lowLevelIndex:N,isVirtual:H,keyTail:O,keyLength:z,extractKey:Co(P),unique:!H&&N.unique});if(U.push(te),te.isPrimaryKey||d.push(te),z>1){var oe=z===2?P[0]:P.slice(0,z-1);p(oe,O+1,N)}return U.sort(function(ne,_e){return ne.keyTail-_e.keyTail}),te}var g=p(u.primaryKey.keyPath,0,u.primaryKey);c[":id"]=[g];for(var b=0,k=u.indexes;b<k.length;b++){var D=k[b];p(D.keyPath,0,D)}function A(P){var O=c[_i(P)];return O&&O[0]}function M(P,O){return{type:P.type===1?2:P.type,lower:pa(P.lower,P.lowerOpen?n.MAX_KEY:n.MIN_KEY,O),lowerOpen:!0,upper:pa(P.upper,P.upperOpen?n.MIN_KEY:n.MAX_KEY,O),upperOpen:!0}}function X(P){var O=P.query.index;return O.isVirtual?s(s({},P),{query:{index:O.lowLevelIndex,range:M(P.query.range,O.keyTail)}}):P}var I=s(s({},o),{schema:s(s({},u),{primaryKey:g,indexes:d,getIndexByKeyPath:A}),count:function(P){return o.count(X(P))},query:function(P){return o.query(X(P))},openCursor:function(P){var O=P.query.index,N=O.keyTail,j=O.isVirtual,U=O.keyLength;if(!j)return o.openCursor(P);function z(H){function te(ne){ne!=null?H.continue(pa(ne,P.reverse?n.MAX_KEY:n.MIN_KEY,N)):P.unique?H.continue(H.key.slice(0,U).concat(P.reverse?n.MIN_KEY:n.MAX_KEY,N)):H.continue()}var oe=Object.create(H,{continue:{value:te},continuePrimaryKey:{value:function(ne,_e){H.continuePrimaryKey(pa(ne,n.MAX_KEY,N),_e)}},primaryKey:{get:function(){return H.primaryKey}},key:{get:function(){var ne=H.key;return U===1?ne[0]:ne.slice(0,U)}},value:{get:function(){return H.value}}});return oe}return o.openCursor(X(P)).then(function(H){return H&&z(H)})}});return I}})}var yf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:gf};function Vo(n,r,o,u){return o=o||{},u=u||"",h(n).forEach(function(c){if(!w(r,c))o[u+c]=void 0;else{var d=n[c],p=r[c];if(typeof d=="object"&&typeof p=="object"&&d&&p){var g=Ge(d),b=Ge(p);g!==b?o[u+c]=r[c]:g==="Object"?Vo(d,p,o,u+c+"."):d!==p&&(o[u+c]=r[c])}else d!==p&&(o[u+c]=r[c])}}),h(r).forEach(function(c){w(n,c)||(o[u+c]=r[c])}),o}function Yo(n,r){return r.type==="delete"?r.keys:r.keys||r.values.map(n.extractKey)}var bf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return s(s({},n),{table:function(r){var o=n.table(r),u=o.schema.primaryKey,c=s(s({},o),{mutate:function(d){var p=de.trans,g=p.table(r).hook,b=g.deleting,k=g.creating,D=g.updating;switch(d.type){case"add":if(k.fire===Ne)break;return p._promise("readwrite",function(){return A(d)},!0);case"put":if(k.fire===Ne&&D.fire===Ne)break;return p._promise("readwrite",function(){return A(d)},!0);case"delete":if(b.fire===Ne)break;return p._promise("readwrite",function(){return A(d)},!0);case"deleteRange":if(b.fire===Ne)break;return p._promise("readwrite",function(){return M(d)},!0)}return o.mutate(d);function A(I){var P=de.trans,O=I.keys||Yo(u,I);if(!O)throw new Error("Keys missing");return I=I.type==="add"||I.type==="put"?s(s({},I),{keys:O}):s({},I),I.type!=="delete"&&(I.values=l([],I.values)),I.keys&&(I.keys=l([],I.keys)),_f(o,I,O).then(function(N){var j=O.map(function(U,z){var H=N[z],te={onerror:null,onsuccess:null};if(I.type==="delete")b.fire.call(te,U,H,P);else if(I.type==="add"||H===void 0){var oe=k.fire.call(te,U,I.values[z],P);U==null&&oe!=null&&(U=oe,I.keys[z]=U,u.outbound||ae(I.values[z],u.keyPath,U))}else{var ne=Vo(H,I.values[z]),_e=D.fire.call(te,ne,U,H,P);if(_e){var Be=I.values[z];Object.keys(_e).forEach(function(se){w(Be,se)?Be[se]=_e[se]:ae(Be,se,_e[se])})}}return te});return o.mutate(I).then(function(U){for(var z=U.failures,H=U.results,te=U.numFailures,oe=U.lastResult,ne=0;ne<O.length;++ne){var _e=H?H[ne]:O[ne],Be=j[ne];_e==null?Be.onerror&&Be.onerror(z[ne]):Be.onsuccess&&Be.onsuccess(I.type==="put"&&N[ne]?I.values[ne]:_e)}return{failures:z,results:H,numFailures:te,lastResult:oe}}).catch(function(U){return j.forEach(function(z){return z.onerror&&z.onerror(U)}),Promise.reject(U)})})}function M(I){return X(I.trans,I.range,1e4)}function X(I,P,O){return o.query({trans:I,values:!1,query:{index:u,range:P},limit:O}).then(function(N){var j=N.result;return A({type:"delete",keys:j,trans:I}).then(function(U){return U.numFailures>0?Promise.reject(U.failures[0]):j.length<O?{failures:[],numFailures:0,lastResult:void 0}:X(I,s(s({},P),{lower:j[j.length-1],lowerOpen:!0}),O)})})}}});return c}})}};function _f(n,r,o){return r.type==="add"?Promise.resolve([]):n.getMany({trans:r.trans,keys:o,cache:"immutable"})}function _u(n,r,o){try{if(!r||r.keys.length<n.length)return null;for(var u=[],c=0,d=0;c<r.keys.length&&d<n.length;++c)Ue(r.keys[c],n[d])===0&&(u.push(o?Ae(r.values[c]):r.values[c]),++d);return u.length===n.length?u:null}catch{return null}}var wf={stack:"dbcore",level:-1,create:function(n){return{table:function(r){var o=n.table(r);return s(s({},o),{getMany:function(u){if(!u.cache)return o.getMany(u);var c=_u(u.keys,u.trans._cache,u.cache==="clone");return c?re.resolve(c):o.getMany(u).then(function(d){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?Ae(d):d},d})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),o.mutate(u)}})}}}};function wu(n,r){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function Eu(n,r){switch(n){case"query":return r.values&&!r.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Ef={stack:"dbcore",level:0,name:"Observability",create:function(n){var r=n.schema.name,o=new Rt(n.MIN_KEY,n.MAX_KEY);return s(s({},n),{transaction:function(u,c,d){if(de.subscr&&c!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(de.querier));return n.transaction(u,c,d)},table:function(u){var c=n.table(u),d=c.schema,p=d.primaryKey,g=d.indexes,b=p.extractKey,k=p.outbound,D=p.autoIncrement&&g.filter(function(I){return I.compound&&I.keyPath.includes(p.keyPath)}),A=s(s({},c),{mutate:function(I){var P,O,N=I.trans,j=I.mutatedParts||(I.mutatedParts={}),U=function(xe){var Ye="idb://".concat(r,"/").concat(u,"/").concat(xe);return j[Ye]||(j[Ye]=new Rt)},z=U(""),H=U(":dels"),te=I.type,oe=I.type==="deleteRange"?[I.range]:I.type==="delete"?[I.keys]:I.values.length<50?[Yo(p,I).filter(function(xe){return xe}),I.values]:[],ne=oe[0],_e=oe[1],Be=I.trans._cache;if(v(ne)){z.addKeys(ne);var se=te==="delete"||ne.length===_e.length?_u(ne,Be):null;se||H.addKeys(ne),(se||_e)&&xf(U,d,se,_e)}else if(ne){var Oe={from:(P=ne.lower)!==null&&P!==void 0?P:n.MIN_KEY,to:(O=ne.upper)!==null&&O!==void 0?O:n.MAX_KEY};H.add(Oe),z.add(Oe)}else z.add(o),H.add(o),d.indexes.forEach(function(xe){return U(xe.name).add(o)});return c.mutate(I).then(function(xe){return ne&&(I.type==="add"||I.type==="put")&&(z.addKeys(xe.results),D&&D.forEach(function(Ye){for(var he=I.values.map(function(Vt){return Ye.extractKey(Vt)}),vt=Ye.keyPath.findIndex(function(Vt){return Vt===p.keyPath}),Kt=0,Sn=xe.results.length;Kt<Sn;++Kt)he[Kt][vt]=xe.results[Kt];U(Ye.name).addKeys(he)})),N.mutatedParts=ha(N.mutatedParts||{},j),xe})}}),M=function(I){var P,O,N=I.query,j=N.index,U=N.range;return[j,new Rt((P=U.lower)!==null&&P!==void 0?P:n.MIN_KEY,(O=U.upper)!==null&&O!==void 0?O:n.MAX_KEY)]},X={get:function(I){return[p,new Rt(I.key)]},getMany:function(I){return[p,new Rt().addKeys(I.keys)]},count:M,query:M,openCursor:M};return h(X).forEach(function(I){A[I]=function(P){var O=de.subscr,N=!!O,j=wu(de,c)&&Eu(I,P),U=j?P.obsSet={}:O;if(N){var z=function(se){var Oe="idb://".concat(r,"/").concat(u,"/").concat(se);return U[Oe]||(U[Oe]=new Rt)},H=z(""),te=z(":dels"),oe=X[I](P),ne=oe[0],_e=oe[1];if(I==="query"&&ne.isPrimaryKey&&!P.values?te.add(_e):z(ne.name||"").add(_e),!ne.isPrimaryKey)if(I==="count")te.add(o);else{var Be=I==="query"&&k&&P.values&&c.query(s(s({},P),{values:!1}));return c[I].apply(this,arguments).then(function(se){if(I==="query"){if(k&&P.values)return Be.then(function(he){var vt=he.result;return H.addKeys(vt),se});var Oe=P.values?se.result.map(b):se.result;P.values?H.addKeys(Oe):te.addKeys(Oe)}else if(I==="openCursor"){var xe=se,Ye=P.values;return xe&&Object.create(xe,{key:{get:function(){return te.addKey(xe.primaryKey),xe.key}},primaryKey:{get:function(){var he=xe.primaryKey;return te.addKey(he),he}},value:{get:function(){return Ye&&H.addKey(xe.primaryKey),xe.value}}})}return se})}}return c[I].apply(this,arguments)}}),A}})}};function xf(n,r,o,u){function c(d){var p=n(d.name||"");function g(k){return k!=null?d.extractKey(k):null}var b=function(k){return d.multiEntry&&v(k)?k.forEach(function(D){return p.addKey(D)}):p.addKey(k)};(o||u).forEach(function(k,D){var A=o&&g(o[D]),M=u&&g(u[D]);Ue(A,M)!==0&&(A!=null&&b(A),M!=null&&b(M))})}r.indexes.forEach(c)}function xu(n,r,o){if(o.numFailures===0)return r;if(r.type==="deleteRange")return null;var u=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;if(o.numFailures===u)return null;var c=s({},r);return v(c.keys)&&(c.keys=c.keys.filter(function(d,p){return!(p in o.failures)})),"values"in c&&v(c.values)&&(c.values=c.values.filter(function(d,p){return!(p in o.failures)})),c}function kf(n,r){return r.lower===void 0?!0:r.lowerOpen?Ue(n,r.lower)>0:Ue(n,r.lower)>=0}function Tf(n,r){return r.upper===void 0?!0:r.upperOpen?Ue(n,r.upper)<0:Ue(n,r.upper)<=0}function Wo(n,r){return kf(n,r)&&Tf(n,r)}function ku(n,r,o,u,c,d){if(!o||o.length===0)return n;var p=r.query.index,g=p.multiEntry,b=r.query.range,k=u.schema.primaryKey,D=k.extractKey,A=p.extractKey,M=(p.lowLevelIndex||p).extractKey,X=o.reduce(function(I,P){var O=I,N=[];if(P.type==="add"||P.type==="put")for(var j=new Rt,U=P.values.length-1;U>=0;--U){var z=P.values[U],H=D(z);if(!j.hasKey(H)){var te=A(z);(g&&v(te)?te.some(function(se){return Wo(se,b)}):Wo(te,b))&&(j.addKey(H),N.push(z))}}switch(P.type){case"add":{var oe=new Rt().addKeys(r.values?I.map(function(se){return D(se)}):I);O=I.concat(r.values?N.filter(function(se){var Oe=D(se);return oe.hasKey(Oe)?!1:(oe.addKey(Oe),!0)}):N.map(function(se){return D(se)}).filter(function(se){return oe.hasKey(se)?!1:(oe.addKey(se),!0)}));break}case"put":{var ne=new Rt().addKeys(P.values.map(function(se){return D(se)}));O=I.filter(function(se){return!ne.hasKey(r.values?D(se):se)}).concat(r.values?N:N.map(function(se){return D(se)}));break}case"delete":var _e=new Rt().addKeys(P.keys);O=I.filter(function(se){return!_e.hasKey(r.values?D(se):se)});break;case"deleteRange":var Be=P.range;O=I.filter(function(se){return!Wo(D(se),Be)});break}return O},n);return X===n?n:(X.sort(function(I,P){return Ue(M(I),M(P))||Ue(D(I),D(P))}),r.limit&&r.limit<1/0&&(X.length>r.limit?X.length=r.limit:n.length===r.limit&&X.length<r.limit&&(c.dirty=!0)),d?Object.freeze(X):X)}function Tu(n,r){return Ue(n.lower,r.lower)===0&&Ue(n.upper,r.upper)===0&&!!n.lowerOpen==!!r.lowerOpen&&!!n.upperOpen==!!r.upperOpen}function Sf(n,r,o,u){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;var c=Ue(n,r);if(c===0){if(o&&u)return 0;if(o)return 1;if(u)return-1}return c}function Af(n,r,o,u){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;var c=Ue(n,r);if(c===0){if(o&&u)return 0;if(o)return-1;if(u)return 1}return c}function If(n,r){return Sf(n.lower,r.lower,n.lowerOpen,r.lowerOpen)<=0&&Af(n.upper,r.upper,n.upperOpen,r.upperOpen)>=0}function Df(n,r,o,u){var c=wr["idb://".concat(n,"/").concat(r)];if(!c)return[];var d=c.queries[o];if(!d)return[null,!1,c,null];var p=u.query?u.query.index.name:null,g=d[p||""];if(!g)return[null,!1,c,null];switch(o){case"query":var b=g.find(function(A){return A.req.limit===u.limit&&A.req.values===u.values&&Tu(A.req.query.range,u.query.range)});if(b)return[b,!0,c,g];var k=g.find(function(A){var M="limit"in A.req?A.req.limit:1/0;return M>=u.limit&&(u.values?A.req.values:!0)&&If(A.req.query.range,u.query.range)});return[k,!1,c,g];case"count":var D=g.find(function(A){return Tu(A.req.query.range,u.query.range)});return[D,!!D,c,g]}}function Cf(n,r,o,u){n.subscribers.add(o),u.addEventListener("abort",function(){n.subscribers.delete(o),n.subscribers.size===0&&Lf(n,r)})}function Lf(n,r){setTimeout(function(){n.subscribers.size===0&&fe(r,n)},3e3)}var Pf={stack:"dbcore",level:0,name:"Cache",create:function(n){var r=n.schema.name,o=s(s({},n),{transaction:function(u,c,d){var p=n.transaction(u,c,d);if(c==="readwrite"){var g=new AbortController,b=g.signal,k=function(D){return function(){if(g.abort(),c==="readwrite"){for(var A=new Set,M=0,X=u;M<X.length;M++){var I=X[M],P=wr["idb://".concat(r,"/").concat(I)];if(P){var O=n.table(I),N=P.optimisticOps.filter(function(Ye){return Ye.trans===p});if(p._explicit&&D&&p.mutatedParts)for(var j=0,U=Object.values(P.queries.query);j<U.length;j++)for(var z=U[j],H=0,te=z.slice();H<te.length;H++){var oe=te[H];Fo(oe.obsSet,p.mutatedParts)&&(fe(z,oe),oe.subscribers.forEach(function(Ye){return A.add(Ye)}))}else if(N.length>0){P.optimisticOps=P.optimisticOps.filter(function(Ye){return Ye.trans!==p});for(var ne=0,_e=Object.values(P.queries.query);ne<_e.length;ne++)for(var z=_e[ne],Be=0,se=z.slice();Be<se.length;Be++){var oe=se[Be];if(oe.res!=null&&p.mutatedParts)if(D&&!oe.dirty){var Oe=Object.isFrozen(oe.res),xe=ku(oe.res,oe.req,N,O,oe,Oe);oe.dirty?(fe(z,oe),oe.subscribers.forEach(function(vt){return A.add(vt)})):xe!==oe.res&&(oe.res=xe,oe.promise=re.resolve({result:xe}))}else oe.dirty&&fe(z,oe),oe.subscribers.forEach(function(vt){return A.add(vt)})}}}}A.forEach(function(Ye){return Ye()})}}};p.addEventListener("abort",k(!1),{signal:b}),p.addEventListener("error",k(!1),{signal:b}),p.addEventListener("complete",k(!0),{signal:b})}return p},table:function(u){var c=n.table(u),d=c.schema.primaryKey,p=s(s({},c),{mutate:function(g){var b=de.trans;if(d.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return c.mutate(g);var k=wr["idb://".concat(r,"/").concat(u)];if(!k)return c.mutate(g);var D=c.mutate(g);return(g.type==="add"||g.type==="put")&&(g.values.length>=50||Yo(d,g).some(function(A){return A==null}))?D.then(function(A){var M=s(s({},g),{values:g.values.map(function(I,P){var O;if(A.failures[P])return I;var N=!((O=d.keyPath)===null||O===void 0)&&O.includes(".")?Ae(I):s({},I);return ae(N,d.keyPath,A.results[P]),N})}),X=xu(k,M,A);k.optimisticOps.push(X),queueMicrotask(function(){return g.mutatedParts&&va(g.mutatedParts)})}):(k.optimisticOps.push(g),g.mutatedParts&&va(g.mutatedParts),D.then(function(A){if(A.numFailures>0){fe(k.optimisticOps,g);var M=xu(k,g,A);M&&k.optimisticOps.push(M),g.mutatedParts&&va(g.mutatedParts)}}),D.catch(function(){fe(k.optimisticOps,g),g.mutatedParts&&va(g.mutatedParts)})),D},query:function(g){var b;if(!wu(de,c)||!Eu("query",g))return c.query(g);var k=((b=de.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",D=de,A=D.requery,M=D.signal,X=Df(r,u,"query",g),I=X[0],P=X[1],O=X[2],N=X[3];if(I&&P)I.obsSet=g.obsSet;else{var j=c.query(g).then(function(U){var z=U.result;if(I&&(I.res=z),k){for(var H=0,te=z.length;H<te;++H)Object.freeze(z[H]);Object.freeze(z)}else U.result=Ae(z);return U}).catch(function(U){return N&&I&&fe(N,I),Promise.reject(U)});I={obsSet:g.obsSet,promise:j,subscribers:new Set,type:"query",req:g,dirty:!1},N?N.push(I):(N=[I],O||(O=wr["idb://".concat(r,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),O.queries.query[g.query.index.name||""]=N)}return Cf(I,N,A,M),I.promise.then(function(U){return{result:ku(U.result,g,O?.optimisticOps,c,I,k)}})}});return p}});return o}};function ma(n,r){return new Proxy(n,{get:function(o,u,c){return u==="db"?r:Reflect.get(o,u,c)}})}var Kn=(function(){function n(r,o){var u=this;this._middlewares={},this.verno=0;var c=n.dependencies;this._options=o=s({addons:n.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange};var d=o.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var p={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ne,dbReadyPromise:null,cancelOpen:Ne,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};p.dbReadyPromise=new re(function(b){p.dbReadyResolve=b}),p.openCanceller=new re(function(b,k){p.cancelOpen=k}),this._state=p,this.name=r,this.on=pi(this,"populate","blocked","versionchange","close",{ready:[tt,Ne]}),this.once=function(b,k){var D=function(){for(var A=[],M=0;M<arguments.length;M++)A[M]=arguments[M];u.on(b).unsubscribe(D),k.apply(u,A)};return u.on(b,D)},this.on.ready.subscribe=q(this.on.ready.subscribe,function(b){return function(k,D){n.vip(function(){var A=u._state;if(A.openComplete)A.dbOpenError||re.resolve().then(k),D&&b(k);else if(A.onReadyBeingFired)A.onReadyBeingFired.push(k),D&&b(k);else{b(k);var M=u;D||b(function X(){M.on.ready.unsubscribe(k),M.on.ready.unsubscribe(X)})}})}}),this.Collection=Fc(this),this.Table=Kc(this),this.Transaction=qc(this),this.Version=cf(this),this.WhereClause=Yc(this),this.on("versionchange",function(b){b.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=bi(o.IDBKeyRange),this._createTransaction=function(b,k,D,A){return new u.Transaction(b,k,D,u._options.chromeTransactionDurability,A)},this._fireOnBlocked=function(b){u.on("blocked").fire(b),Vr.filter(function(k){return k.name===u.name&&k!==u&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(b)})},this.use(wf),this.use(Pf),this.use(Ef),this.use(yf),this.use(bf);var g=new Proxy(this,{get:function(b,k,D){if(k==="_vip")return!0;if(k==="table")return function(M){return ma(u.table(M),g)};var A=Reflect.get(b,k,D);return A instanceof au?ma(A,g):k==="tables"?A.map(function(M){return ma(M,g)}):k==="_createTransaction"?function(){var M=A.apply(this,arguments);return ma(M,g)}:A}});this.vip=g,d.forEach(function(b){return b(u)})}return n.prototype.version=function(r){if(isNaN(r)||r<.1)throw new ue.Type("Given version is not a positive number");if(r=Math.round(r*10)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var o=this._versions,u=o.filter(function(c){return c._cfg.version===r})[0];return u||(u=new this.Version(r),o.push(u),o.sort(ef),u.stores({}),this._state.autoSchema=!1,u)},n.prototype._whenReady=function(r){var o=this;return this.idbdb&&(this._state.openComplete||de.letThrough||this._vip)?r():new re(function(u,c){if(o._state.openComplete)return c(new ue.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen){c(new ue.DatabaseClosed);return}o.open().catch(Ne)}o._state.dbReadyPromise.then(u,c)}).then(r)},n.prototype.use=function(r){var o=r.stack,u=r.create,c=r.level,d=r.name;d&&this.unuse({stack:o,name:d});var p=this._middlewares[o]||(this._middlewares[o]=[]);return p.push({stack:o,create:u,level:c??10,name:d}),p.sort(function(g,b){return g.level-b.level}),this},n.prototype.unuse=function(r){var o=r.stack,u=r.name,c=r.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return c?d.create!==c:u?d.name!==u:!1})),this},n.prototype.open=function(){var r=this;return yr(Jn,function(){return pf(r)})},n.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,o=Vr.indexOf(this);if(o>=0&&Vr.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new re(function(u){r.dbReadyResolve=u}),r.openCanceller=new re(function(u,c){r.cancelOpen=c}))},n.prototype.close=function(r){var o=r===void 0?{disableAutoOpen:!0}:r,u=o.disableAutoOpen,c=this._state;u?(c.isBeingOpened&&c.cancelOpen(new ue.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new ue.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},n.prototype.delete=function(r){var o=this;r===void 0&&(r={disableAutoOpen:!0});var u=arguments.length>0&&typeof arguments[0]!="object",c=this._state;return new re(function(d,p){var g=function(){o.close(r);var b=o._deps.indexedDB.deleteDatabase(o.name);b.onsuccess=lt(function(){hf(o._deps,o.name),d()}),b.onerror=Tn(p),b.onblocked=o._fireOnBlocked};if(u)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(g):g()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var r=this;return h(this._allTables).map(function(o){return r._allTables[o]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var r=mf.apply(this,arguments);return this._transaction.apply(this,r)},n.prototype._transaction=function(r,o,u){var c=this,d=de.trans;(!d||d.db!==this||r.indexOf("!")!==-1)&&(d=null);var p=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");var g,b;try{if(b=o.map(function(D){var A=D instanceof c.Table?D.name:D;if(typeof A!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return A}),r=="r"||r===xo)g=xo;else if(r=="rw"||r==ko)g=ko;else throw new ue.InvalidArgument("Invalid transaction mode: "+r);if(d){if(d.mode===xo&&g===ko)if(p)d=null;else throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d&&b.forEach(function(D){if(d&&d.storeNames.indexOf(D)===-1)if(p)d=null;else throw new ue.SubTransaction("Table "+D+" not included in parent transaction.")}),p&&d&&!d.active&&(d=null)}}catch(D){return d?d._promise(null,function(A,M){M(D)}):mt(D)}var k=bu.bind(null,this,g,b,d,u);return d?d._promise(g,k,"lock"):de.trans?yr(de.transless,function(){return c._whenReady(k)}):this._whenReady(k)},n.prototype.table=function(r){if(!w(this._allTables,r))throw new ue.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},n})(),Of=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Mf=(function(){function n(r){this._subscribe=r}return n.prototype.subscribe=function(r,o,u){return this._subscribe(!r||typeof r=="function"?{next:r,error:o,complete:u}:r)},n.prototype[Of]=function(){return this},n})(),ga;try{ga={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{ga={indexedDB:null,IDBKeyRange:null}}function Su(n){var r=!1,o,u=new Mf(function(c){var d=Ze(n);function p(N){var j=jr();try{d&&zr();var U=$n(n,N);return d&&(U=U.finally(er)),U}finally{j&&Ur()}}var g=!1,b,k={},D={},A={get closed(){return g},unsubscribe:function(){g||(g=!0,b&&b.abort(),M&&rr.storagemutated.unsubscribe(P))}};c.start&&c.start(A);var M=!1,X=function(){return _o(O)};function I(){return Fo(D,k)}var P=function(N){ha(k,N),I()&&X()},O=function(){if(!(g||!ga.indexedDB)){k={};var N={};b&&b.abort(),b=new AbortController;var j={subscr:N,signal:b.signal,requery:X,querier:n,trans:null},U=p(j);Promise.resolve(U).then(function(z){r=!0,o=z,!(g||j.signal.aborted)&&(k={},D=N,!ie(D)&&!M&&(rr(yi,P),M=!0),_o(function(){return!g&&c.next&&c.next(z)}))},function(z){r=!1,["DatabaseClosedError","AbortError"].includes(z?.name)||g||_o(function(){g||c.error&&c.error(z)})})}};return setTimeout(X,0),A});return u.hasValue=function(){return r},u.getValue=function(){return o},u}var Er=Kn;x(Er,s(s({},kn),{delete:function(n){var r=new Er(n,{addons:[]});return r.delete()},exists:function(n){return new Er(n,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return ff(Er.dependencies).then(n)}catch{return mt(new ue.MissingAPI)}},defineClass:function(){function n(r){m(this,r)}return n},ignoreTransaction:function(n){return de.trans?yr(de.transless,n):n()},vip:Ko,async:function(n){return function(){try{var r=zo(n.apply(this,arguments));return!r||typeof r.then!="function"?re.resolve(r):r}catch(o){return mt(o)}}},spawn:function(n,r,o){try{var u=zo(n.apply(o,r||[]));return!u||typeof u.then!="function"?re.resolve(u):u}catch(c){return mt(c)}},currentTransaction:{get:function(){return de.trans||null}},waitFor:function(n,r){var o=re.resolve(typeof n=="function"?Er.ignoreTransaction(n):n).timeout(r||6e4);return de.trans?de.trans.waitFor(o):o},Promise:re,debug:{get:function(){return Te},set:function(n){At(n)}},derive:C,extend:m,props:x,override:q,Events:pi,on:rr,liveQuery:Su,extendObservabilitySet:ha,getByKeyPath:Z,setByKeyPath:ae,delByKeyPath:W,shallowClone:ye,deepClone:Ae,getObjectDiff:Vo,cmp:Ue,asap:G,minKey:Eo,addons:[],connections:Vr,errnames:St,dependencies:ga,cache:wr,semVer:Js,version:Js.split(".").map(function(n){return parseInt(n)}).reduce(function(n,r,o){return n+r/Math.pow(10,o*2)})})),Er.maxKey=bi(Er.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(rr(yi,function(n){if(!ir){var r;r=new CustomEvent(Ao,{detail:n}),ir=!0,dispatchEvent(r),ir=!1}}),addEventListener(Ao,function(n){var r=n.detail;ir||qo(r)}));function qo(n){var r=ir;try{ir=!0,rr.storagemutated.fire(n),Uo(n,!0)}finally{ir=r}}var ir=!1,ar,Go=function(){};typeof BroadcastChannel<"u"&&(Go=function(){ar=new BroadcastChannel(Ao),ar.onmessage=function(n){return n.data&&qo(n.data)}},Go(),typeof ar.unref=="function"&&ar.unref(),rr(yi,function(n){ir||ar.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Kn.disableBfCache&&n.persisted){Te&&console.debug("Dexie: handling persisted pagehide"),ar?.close();for(var r=0,o=Vr;r<o.length;r++){var u=o[r];u.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(n){!Kn.disableBfCache&&n.persisted&&(Te&&console.debug("Dexie: handling persisted pageshow"),Go(),qo({all:new Rt(-1/0,[[]])}))}));function Rf(n){return new vi({add:n})}function Kf(n){return new vi({remove:n})}function Bf(n,r){return new vi({replacePrefix:[n,r]})}re.rejectionMapper=Qt,At(Te);var Nf=Object.freeze({__proto__:null,Dexie:Kn,liveQuery:Su,Entity:tu,cmp:Ue,PropModification:vi,replacePrefix:Bf,add:Rf,remove:Kf,default:Kn,RangeSet:Rt,mergeRanges:Ei,rangesOverlap:pu});return s(Kn,Nf,{default:Kn}),Kn}))})(Ia)),Ia.exports}var Fh=Nh();const ws=Kh(Fh),zu=Symbol.for("Dexie"),Wa=globalThis[zu]||(globalThis[zu]=ws);if(ws.semVer!==Wa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ws.semVer} and ${Wa.semVer}`);const{liveQuery:qa,mergeRanges:lm,rangesOverlap:cm,RangeSet:fm,cmp:dm,Entity:hm,PropModification:vm,replacePrefix:pm,add:mm,remove:gm,DexieYProvider:ym}=Wa;function Vu(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,a)}return i}function On(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Vu(Object(i),!0).forEach(function(a){Hh(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Vu(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Da(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Da=function(e){return typeof e}:Da=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(t)}function Hh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Vn(){return Vn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Vn.apply(this,arguments)}function jh(t,e){if(t==null)return{};var i={},a=Object.keys(t),s,l;for(l=0;l<a.length;l++)s=a[l],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function Uh(t,e){if(t==null)return{};var i=jh(t,e),a,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)a=l[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var zh="1.15.6";function jn(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Qn=jn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Vi=jn(/Edge/i),Yu=jn(/firefox/i),Oi=jn(/safari/i)&&!jn(/chrome/i)&&!jn(/android/i),zs=jn(/iP(ad|od|hone)/i),tc=jn(/chrome/i)&&jn(/android/i),nc={capture:!1,passive:!1};function ze(t,e,i){t.addEventListener(e,i,!Qn&&nc)}function je(t,e,i){t.removeEventListener(e,i,!Qn&&nc)}function Ga(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function rc(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function bn(t,e,i,a){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Ga(t,e):Ga(t,e))||a&&t===i)return t;if(t===i)break}while(t=rc(t))}return null}var Wu=/\s+/g;function tn(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(Wu," ").replace(" "+e+" "," ");t.className=(a+(i?" "+e:"")).replace(Wu," ")}}function Se(t,e,i){var a=t&&t.style;if(a){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=i+(typeof i=="string"?"":"px")}}function ti(t,e){var i="";if(typeof t=="string")i=t;else do{var a=Se(t,"transform");a&&a!=="none"&&(i=a+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function ic(t,e,i){if(t){var a=t.getElementsByTagName(e),s=0,l=a.length;if(i)for(;s<l;s++)i(a[s],s);return a}return[]}function Pn(){var t=document.scrollingElement;return t||document.documentElement}function bt(t,e,i,a,s){if(!(!t.getBoundingClientRect&&t!==window)){var l,f,h,v,m,E,_;if(t!==window&&t.parentNode&&t!==Pn()?(l=t.getBoundingClientRect(),f=l.top,h=l.left,v=l.bottom,m=l.right,E=l.height,_=l.width):(f=0,h=0,v=window.innerHeight,m=window.innerWidth,E=window.innerHeight,_=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!Qn))do if(s&&s.getBoundingClientRect&&(Se(s,"transform")!=="none"||i&&Se(s,"position")!=="static")){var w=s.getBoundingClientRect();f-=w.top+parseInt(Se(s,"border-top-width")),h-=w.left+parseInt(Se(s,"border-left-width")),v=f+l.height,m=h+l.width;break}while(s=s.parentNode);if(a&&t!==window){var x=ti(s||t),L=x&&x.a,S=x&&x.d;x&&(f/=S,h/=L,_/=L,E/=S,v=f+E,m=h+_)}return{top:f,left:h,bottom:v,right:m,width:_,height:E}}}function qu(t,e,i){for(var a=lr(t,!0),s=bt(t)[e];a;){var l=bt(a)[i],f=void 0;if(f=s>=l,!f)return a;if(a===Pn())break;a=lr(a,!1)}return!1}function li(t,e,i,a){for(var s=0,l=0,f=t.children;l<f.length;){if(f[l].style.display!=="none"&&f[l]!==ke.ghost&&(a||f[l]!==ke.dragged)&&bn(f[l],i.draggable,t,!1)){if(s===e)return f[l];s++}l++}return null}function Vs(t,e){for(var i=t.lastElementChild;i&&(i===ke.ghost||Se(i,"display")==="none"||e&&!Ga(i,e));)i=i.previousElementSibling;return i||null}function hn(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==ke.clone&&(!e||Ga(t,e))&&i++;return i}function Gu(t){var e=0,i=0,a=Pn();if(t)do{var s=ti(t),l=s.a,f=s.d;e+=t.scrollLeft*l,i+=t.scrollTop*f}while(t!==a&&(t=t.parentNode));return[e,i]}function Vh(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[i][a])return Number(i)}return-1}function lr(t,e){if(!t||!t.getBoundingClientRect)return Pn();var i=t,a=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Se(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Pn();if(a||e)return i;a=!0}}while(i=i.parentNode);return Pn()}function Yh(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function ns(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Mi;function ac(t,e){return function(){if(!Mi){var i=arguments,a=this;i.length===1?t.call(a,i[0]):t.apply(a,i),Mi=setTimeout(function(){Mi=void 0},e)}}}function Wh(){clearTimeout(Mi),Mi=void 0}function oc(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function sc(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function uc(t,e,i){var a={};return Array.from(t.children).forEach(function(s){var l,f,h,v;if(!(!bn(s,e.draggable,t,!1)||s.animated||s===i)){var m=bt(s);a.left=Math.min((l=a.left)!==null&&l!==void 0?l:1/0,m.left),a.top=Math.min((f=a.top)!==null&&f!==void 0?f:1/0,m.top),a.right=Math.max((h=a.right)!==null&&h!==void 0?h:-1/0,m.right),a.bottom=Math.max((v=a.bottom)!==null&&v!==void 0?v:-1/0,m.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var qt="Sortable"+new Date().getTime();function qh(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(s){if(!(Se(s,"display")==="none"||s===ke.ghost)){t.push({target:s,rect:bt(s)});var l=On({},t[t.length-1].rect);if(s.thisAnimationDuration){var f=ti(s,!0);f&&(l.top-=f.f,l.left-=f.e)}s.fromRect=l}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(Vh(t,{target:a}),1)},animateAll:function(a){var s=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var l=!1,f=0;t.forEach(function(h){var v=0,m=h.target,E=m.fromRect,_=bt(m),w=m.prevFromRect,x=m.prevToRect,L=h.rect,S=ti(m,!0);S&&(_.top-=S.f,_.left-=S.e),m.toRect=_,m.thisAnimationDuration&&ns(w,_)&&!ns(E,_)&&(L.top-_.top)/(L.left-_.left)===(E.top-_.top)/(E.left-_.left)&&(v=Xh(L,w,x,s.options)),ns(_,E)||(m.prevFromRect=E,m.prevToRect=_,v||(v=s.options.animation),s.animate(m,L,_,v)),v&&(l=!0,f=Math.max(f,v),clearTimeout(m.animationResetTimer),m.animationResetTimer=setTimeout(function(){m.animationTime=0,m.prevFromRect=null,m.fromRect=null,m.prevToRect=null,m.thisAnimationDuration=null},v),m.thisAnimationDuration=v)}),clearTimeout(e),l?e=setTimeout(function(){typeof a=="function"&&a()},f):typeof a=="function"&&a(),t=[]},animate:function(a,s,l,f){if(f){Se(a,"transition",""),Se(a,"transform","");var h=ti(this.el),v=h&&h.a,m=h&&h.d,E=(s.left-l.left)/(v||1),_=(s.top-l.top)/(m||1);a.animatingX=!!E,a.animatingY=!!_,Se(a,"transform","translate3d("+E+"px,"+_+"px,0)"),this.forRepaintDummy=Gh(a),Se(a,"transition","transform "+f+"ms"+(this.options.easing?" "+this.options.easing:"")),Se(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){Se(a,"transition",""),Se(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},f)}}}}function Gh(t){return t.offsetWidth}function Xh(t,e,i,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*a.animation}var Gr=[],rs={initializeByDefault:!0},Yi={mount:function(e){for(var i in rs)rs.hasOwnProperty(i)&&!(i in e)&&(e[i]=rs[i]);Gr.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Gr.push(e)},pluginEvent:function(e,i,a){var s=this;this.eventCanceled=!1,a.cancel=function(){s.eventCanceled=!0};var l=e+"Global";Gr.forEach(function(f){i[f.pluginName]&&(i[f.pluginName][l]&&i[f.pluginName][l](On({sortable:i},a)),i.options[f.pluginName]&&i[f.pluginName][e]&&i[f.pluginName][e](On({sortable:i},a)))})},initializePlugins:function(e,i,a,s){Gr.forEach(function(h){var v=h.pluginName;if(!(!e.options[v]&&!h.initializeByDefault)){var m=new h(e,i,e.options);m.sortable=e,m.options=e.options,e[v]=m,Vn(a,m.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var f=this.modifyOption(e,l,e.options[l]);typeof f<"u"&&(e.options[l]=f)}},getEventProperties:function(e,i){var a={};return Gr.forEach(function(s){typeof s.eventProperties=="function"&&Vn(a,s.eventProperties.call(i[s.pluginName],e))}),a},modifyOption:function(e,i,a){var s;return Gr.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[i]=="function"&&(s=l.optionListeners[i].call(e[l.pluginName],a))}),s}};function Qh(t){var e=t.sortable,i=t.rootEl,a=t.name,s=t.targetEl,l=t.cloneEl,f=t.toEl,h=t.fromEl,v=t.oldIndex,m=t.newIndex,E=t.oldDraggableIndex,_=t.newDraggableIndex,w=t.originalEvent,x=t.putSortable,L=t.extraEventProperties;if(e=e||i&&i[qt],!!e){var S,C=e.options,T="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Qn&&!Vi?S=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(a,!0,!0)),S.to=f||i,S.from=h||i,S.item=s||i,S.clone=l,S.oldIndex=v,S.newIndex=m,S.oldDraggableIndex=E,S.newDraggableIndex=_,S.originalEvent=w,S.pullMode=x?x.lastPutMode:void 0;var K=On(On({},L),Yi.getEventProperties(a,e));for(var V in K)S[V]=K[V];i&&i.dispatchEvent(S),C[T]&&C[T].call(e,S)}}var Zh=["evt"],Yt=function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.evt,l=Uh(a,Zh);Yi.pluginEvent.bind(ke)(e,i,On({dragEl:J,parentEl:pt,ghostEl:Ce,rootEl:ct,nextEl:Sr,lastDownEl:Ca,cloneEl:dt,cloneHidden:ur,dragStarted:Ai,putSortable:Dt,activeSortable:ke.active,originalEvent:s,oldIndex:Jr,oldDraggableIndex:Ri,newIndex:rn,newDraggableIndex:sr,hideGhostForTarget:dc,unhideGhostForTarget:hc,cloneNowHidden:function(){ur=!0},cloneNowShown:function(){ur=!1},dispatchSortableEvent:function(h){Ut({sortable:i,name:h,originalEvent:s})}},l))};function Ut(t){Qh(On({putSortable:Dt,cloneEl:dt,targetEl:J,rootEl:ct,oldIndex:Jr,oldDraggableIndex:Ri,newIndex:rn,newDraggableIndex:sr},t))}var J,pt,Ce,ct,Sr,Ca,dt,ur,Jr,rn,Ri,sr,wa,Dt,Qr=!1,Xa=!1,Qa=[],kr,gn,is,as,Xu,Qu,Ai,Xr,Ki,Bi=!1,Ea=!1,La,Bt,os=[],Es=!1,Za=[],co=typeof document<"u",xa=zs,Zu=Vi||Qn?"cssFloat":"float",Jh=co&&!tc&&!zs&&"draggable"in document.createElement("div"),lc=(function(){if(co){if(Qn)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),cc=function(e,i){var a=Se(e),s=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),l=li(e,0,i),f=li(e,1,i),h=l&&Se(l),v=f&&Se(f),m=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+bt(l).width,E=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+bt(f).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&h.float&&h.float!=="none"){var _=h.float==="left"?"left":"right";return f&&(v.clear==="both"||v.clear===_)?"vertical":"horizontal"}return l&&(h.display==="block"||h.display==="flex"||h.display==="table"||h.display==="grid"||m>=s&&a[Zu]==="none"||f&&a[Zu]==="none"&&m+E>s)?"vertical":"horizontal"},$h=function(e,i,a){var s=a?e.left:e.top,l=a?e.right:e.bottom,f=a?e.width:e.height,h=a?i.left:i.top,v=a?i.right:i.bottom,m=a?i.width:i.height;return s===h||l===v||s+f/2===h+m/2},ev=function(e,i){var a;return Qa.some(function(s){var l=s[qt].options.emptyInsertThreshold;if(!(!l||Vs(s))){var f=bt(s),h=e>=f.left-l&&e<=f.right+l,v=i>=f.top-l&&i<=f.bottom+l;if(h&&v)return a=s}}),a},fc=function(e){function i(l,f){return function(h,v,m,E){var _=h.options.group.name&&v.options.group.name&&h.options.group.name===v.options.group.name;if(l==null&&(f||_))return!0;if(l==null||l===!1)return!1;if(f&&l==="clone")return l;if(typeof l=="function")return i(l(h,v,m,E),f)(h,v,m,E);var w=(f?h:v).options.group.name;return l===!0||typeof l=="string"&&l===w||l.join&&l.indexOf(w)>-1}}var a={},s=e.group;(!s||Da(s)!="object")&&(s={name:s}),a.name=s.name,a.checkPull=i(s.pull,!0),a.checkPut=i(s.put),a.revertClone=s.revertClone,e.group=a},dc=function(){!lc&&Ce&&Se(Ce,"display","none")},hc=function(){!lc&&Ce&&Se(Ce,"display","")};co&&!tc&&document.addEventListener("click",function(t){if(Xa)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Xa=!1,!1},!0);var Tr=function(e){if(J){e=e.touches?e.touches[0]:e;var i=ev(e.clientX,e.clientY);if(i){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);a.target=a.rootEl=i,a.preventDefault=void 0,a.stopPropagation=void 0,i[qt]._onDragOver(a)}}},tv=function(e){J&&J.parentNode[qt]._isOutsideThisEl(e.target)};function ke(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Vn({},e),t[qt]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return cc(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(f,h){f.setData("Text",h.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ke.supportPointer!==!1&&"PointerEvent"in window&&(!Oi||zs),emptyInsertThreshold:5};Yi.initializePlugins(this,t,i);for(var a in i)!(a in e)&&(e[a]=i[a]);fc(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Jh,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ze(t,"pointerdown",this._onTapStart):(ze(t,"mousedown",this._onTapStart),ze(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ze(t,"dragover",this),ze(t,"dragenter",this)),Qa.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Vn(this,qh())}ke.prototype={constructor:ke,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Xr=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,J):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,a=this.el,s=this.options,l=s.preventOnFilter,f=e.type,h=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,v=(h||e).target,m=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||v,E=s.filter;if(lv(a),!J&&!(/mousedown|pointerdown/.test(f)&&e.button!==0||s.disabled)&&!m.isContentEditable&&!(!this.nativeDraggable&&Oi&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=bn(v,s.draggable,a,!1),!(v&&v.animated)&&Ca!==v)){if(Jr=hn(v),Ri=hn(v,s.draggable),typeof E=="function"){if(E.call(this,e,v,this)){Ut({sortable:i,rootEl:m,name:"filter",targetEl:v,toEl:a,fromEl:a}),Yt("filter",i,{evt:e}),l&&e.preventDefault();return}}else if(E&&(E=E.split(",").some(function(_){if(_=bn(m,_.trim(),a,!1),_)return Ut({sortable:i,rootEl:_,name:"filter",targetEl:v,fromEl:a,toEl:a}),Yt("filter",i,{evt:e}),!0}),E)){l&&e.preventDefault();return}s.handle&&!bn(m,s.handle,a,!1)||this._prepareDragStart(e,h,v)}}},_prepareDragStart:function(e,i,a){var s=this,l=s.el,f=s.options,h=l.ownerDocument,v;if(a&&!J&&a.parentNode===l){var m=bt(a);if(ct=l,J=a,pt=J.parentNode,Sr=J.nextSibling,Ca=a,wa=f.group,ke.dragged=J,kr={target:J,clientX:(i||e).clientX,clientY:(i||e).clientY},Xu=kr.clientX-m.left,Qu=kr.clientY-m.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,J.style["will-change"]="all",v=function(){if(Yt("delayEnded",s,{evt:e}),ke.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Yu&&s.nativeDraggable&&(J.draggable=!0),s._triggerDragStart(e,i),Ut({sortable:s,name:"choose",originalEvent:e}),tn(J,f.chosenClass,!0)},f.ignore.split(",").forEach(function(E){ic(J,E.trim(),ss)}),ze(h,"dragover",Tr),ze(h,"mousemove",Tr),ze(h,"touchmove",Tr),f.supportPointer?(ze(h,"pointerup",s._onDrop),!this.nativeDraggable&&ze(h,"pointercancel",s._onDrop)):(ze(h,"mouseup",s._onDrop),ze(h,"touchend",s._onDrop),ze(h,"touchcancel",s._onDrop)),Yu&&this.nativeDraggable&&(this.options.touchStartThreshold=4,J.draggable=!0),Yt("delayStart",this,{evt:e}),f.delay&&(!f.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Vi||Qn))){if(ke.eventCanceled){this._onDrop();return}f.supportPointer?(ze(h,"pointerup",s._disableDelayedDrag),ze(h,"pointercancel",s._disableDelayedDrag)):(ze(h,"mouseup",s._disableDelayedDrag),ze(h,"touchend",s._disableDelayedDrag),ze(h,"touchcancel",s._disableDelayedDrag)),ze(h,"mousemove",s._delayedDragTouchMoveHandler),ze(h,"touchmove",s._delayedDragTouchMoveHandler),f.supportPointer&&ze(h,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(v,f.delay)}else v()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){J&&ss(J),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;je(e,"mouseup",this._disableDelayedDrag),je(e,"touchend",this._disableDelayedDrag),je(e,"touchcancel",this._disableDelayedDrag),je(e,"pointerup",this._disableDelayedDrag),je(e,"pointercancel",this._disableDelayedDrag),je(e,"mousemove",this._delayedDragTouchMoveHandler),je(e,"touchmove",this._delayedDragTouchMoveHandler),je(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?ze(document,"pointermove",this._onTouchMove):i?ze(document,"touchmove",this._onTouchMove):ze(document,"mousemove",this._onTouchMove):(ze(J,"dragend",this),ze(ct,"dragstart",this._onDragStart));try{document.selection?Pa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Qr=!1,ct&&J){Yt("dragStarted",this,{evt:i}),this.nativeDraggable&&ze(document,"dragover",tv);var a=this.options;!e&&tn(J,a.dragClass,!1),tn(J,a.ghostClass,!0),ke.active=this,e&&this._appendGhost(),Ut({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(gn){this._lastX=gn.clientX,this._lastY=gn.clientY,dc();for(var e=document.elementFromPoint(gn.clientX,gn.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(gn.clientX,gn.clientY),e!==i);)i=e;if(J.parentNode[qt]._isOutsideThisEl(e),i)do{if(i[qt]){var a=void 0;if(a=i[qt]._onDragOver({clientX:gn.clientX,clientY:gn.clientY,target:e,rootEl:i}),a&&!this.options.dragoverBubble)break}e=i}while(i=rc(i));hc()}},_onTouchMove:function(e){if(kr){var i=this.options,a=i.fallbackTolerance,s=i.fallbackOffset,l=e.touches?e.touches[0]:e,f=Ce&&ti(Ce,!0),h=Ce&&f&&f.a,v=Ce&&f&&f.d,m=xa&&Bt&&Gu(Bt),E=(l.clientX-kr.clientX+s.x)/(h||1)+(m?m[0]-os[0]:0)/(h||1),_=(l.clientY-kr.clientY+s.y)/(v||1)+(m?m[1]-os[1]:0)/(v||1);if(!ke.active&&!Qr){if(a&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(Ce){f?(f.e+=E-(is||0),f.f+=_-(as||0)):f={a:1,b:0,c:0,d:1,e:E,f:_};var w="matrix(".concat(f.a,",").concat(f.b,",").concat(f.c,",").concat(f.d,",").concat(f.e,",").concat(f.f,")");Se(Ce,"webkitTransform",w),Se(Ce,"mozTransform",w),Se(Ce,"msTransform",w),Se(Ce,"transform",w),is=E,as=_,gn=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ce){var e=this.options.fallbackOnBody?document.body:ct,i=bt(J,!0,xa,!0,e),a=this.options;if(xa){for(Bt=e;Se(Bt,"position")==="static"&&Se(Bt,"transform")==="none"&&Bt!==document;)Bt=Bt.parentNode;Bt!==document.body&&Bt!==document.documentElement?(Bt===document&&(Bt=Pn()),i.top+=Bt.scrollTop,i.left+=Bt.scrollLeft):Bt=Pn(),os=Gu(Bt)}Ce=J.cloneNode(!0),tn(Ce,a.ghostClass,!1),tn(Ce,a.fallbackClass,!0),tn(Ce,a.dragClass,!0),Se(Ce,"transition",""),Se(Ce,"transform",""),Se(Ce,"box-sizing","border-box"),Se(Ce,"margin",0),Se(Ce,"top",i.top),Se(Ce,"left",i.left),Se(Ce,"width",i.width),Se(Ce,"height",i.height),Se(Ce,"opacity","0.8"),Se(Ce,"position",xa?"absolute":"fixed"),Se(Ce,"zIndex","100000"),Se(Ce,"pointerEvents","none"),ke.ghost=Ce,e.appendChild(Ce),Se(Ce,"transform-origin",Xu/parseInt(Ce.style.width)*100+"% "+Qu/parseInt(Ce.style.height)*100+"%")}},_onDragStart:function(e,i){var a=this,s=e.dataTransfer,l=a.options;if(Yt("dragStart",this,{evt:e}),ke.eventCanceled){this._onDrop();return}Yt("setupClone",this),ke.eventCanceled||(dt=sc(J),dt.removeAttribute("id"),dt.draggable=!1,dt.style["will-change"]="",this._hideClone(),tn(dt,this.options.chosenClass,!1),ke.clone=dt),a.cloneId=Pa(function(){Yt("clone",a),!ke.eventCanceled&&(a.options.removeCloneOnHide||ct.insertBefore(dt,J),a._hideClone(),Ut({sortable:a,name:"clone"}))}),!i&&tn(J,l.dragClass,!0),i?(Xa=!0,a._loopId=setInterval(a._emulateDragOver,50)):(je(document,"mouseup",a._onDrop),je(document,"touchend",a._onDrop),je(document,"touchcancel",a._onDrop),s&&(s.effectAllowed="move",l.setData&&l.setData.call(a,s,J)),ze(document,"drop",a),Se(J,"transform","translateZ(0)")),Qr=!0,a._dragStartId=Pa(a._dragStarted.bind(a,i,e)),ze(document,"selectstart",a),Ai=!0,window.getSelection().removeAllRanges(),Oi&&Se(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,a=e.target,s,l,f,h=this.options,v=h.group,m=ke.active,E=wa===v,_=h.sort,w=Dt||m,x,L=this,S=!1;if(Es)return;function C(ie,Re){Yt(ie,L,On({evt:e,isOwner:E,axis:x?"vertical":"horizontal",revert:f,dragRect:s,targetRect:l,canSort:_,fromSortable:w,target:a,completed:K,onMove:function($e,Ke){return ka(ct,i,J,s,$e,bt($e),e,Ke)},changed:V},Re))}function T(){C("dragOverAnimationCapture"),L.captureAnimationState(),L!==w&&w.captureAnimationState()}function K(ie){return C("dragOverCompleted",{insertion:ie}),ie&&(E?m._hideClone():m._showClone(L),L!==w&&(tn(J,Dt?Dt.options.ghostClass:m.options.ghostClass,!1),tn(J,h.ghostClass,!0)),Dt!==L&&L!==ke.active?Dt=L:L===ke.active&&Dt&&(Dt=null),w===L&&(L._ignoreWhileAnimating=a),L.animateAll(function(){C("dragOverAnimationComplete"),L._ignoreWhileAnimating=null}),L!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(a===J&&!J.animated||a===i&&!a.animated)&&(Xr=null),!h.dragoverBubble&&!e.rootEl&&a!==document&&(J.parentNode[qt]._isOutsideThisEl(e.target),!ie&&Tr(e)),!h.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),S=!0}function V(){rn=hn(J),sr=hn(J,h.draggable),Ut({sortable:L,name:"change",toEl:i,newIndex:rn,newDraggableIndex:sr,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=bn(a,h.draggable,i,!0),C("dragOver"),ke.eventCanceled)return S;if(J.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||L._ignoreWhileAnimating===a)return K(!1);if(Xa=!1,m&&!h.disabled&&(E?_||(f=pt!==ct):Dt===this||(this.lastPutMode=wa.checkPull(this,m,J,e))&&v.checkPut(this,m,J,e))){if(x=this._getDirection(e,a)==="vertical",s=bt(J),C("dragOverValid"),ke.eventCanceled)return S;if(f)return pt=ct,T(),this._hideClone(),C("revert"),ke.eventCanceled||(Sr?ct.insertBefore(J,Sr):ct.appendChild(J)),K(!0);var B=Vs(i,h.draggable);if(!B||av(e,x,this)&&!B.animated){if(B===J)return K(!1);if(B&&i===e.target&&(a=B),a&&(l=bt(a)),ka(ct,i,J,s,a,l,e,!!a)!==!1)return T(),B&&B.nextSibling?i.insertBefore(J,B.nextSibling):i.appendChild(J),pt=i,V(),K(!0)}else if(B&&iv(e,x,this)){var q=li(i,0,h,!0);if(q===J)return K(!1);if(a=q,l=bt(a),ka(ct,i,J,s,a,l,e,!1)!==!1)return T(),i.insertBefore(J,q),pt=i,V(),K(!0)}else if(a.parentNode===i){l=bt(a);var $=0,G,F=J.parentNode!==i,Z=!$h(J.animated&&J.toRect||s,a.animated&&a.toRect||l,x),ae=x?"top":"left",W=qu(a,"top","top")||qu(J,"top","top"),ye=W?W.scrollTop:void 0;Xr!==a&&(G=l[ae],Bi=!1,Ea=!Z&&h.invertSwap||F),$=ov(e,a,l,x,Z?1:h.swapThreshold,h.invertedSwapThreshold==null?h.swapThreshold:h.invertedSwapThreshold,Ea,Xr===a);var ve;if($!==0){var pe=hn(J);do pe-=$,ve=pt.children[pe];while(ve&&(Se(ve,"display")==="none"||ve===Ce))}if($===0||ve===a)return K(!1);Xr=a,Ki=$;var Pe=a.nextElementSibling,Xe=!1;Xe=$===1;var rt=ka(ct,i,J,s,a,l,e,Xe);if(rt!==!1)return(rt===1||rt===-1)&&(Xe=rt===1),Es=!0,setTimeout(rv,30),T(),Xe&&!Pe?i.appendChild(J):a.parentNode.insertBefore(J,Xe?Pe:a),W&&oc(W,0,ye-W.scrollTop),pt=J.parentNode,G!==void 0&&!Ea&&(La=Math.abs(G-bt(a)[ae])),V(),K(!0)}if(i.contains(J))return K(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){je(document,"mousemove",this._onTouchMove),je(document,"touchmove",this._onTouchMove),je(document,"pointermove",this._onTouchMove),je(document,"dragover",Tr),je(document,"mousemove",Tr),je(document,"touchmove",Tr)},_offUpEvents:function(){var e=this.el.ownerDocument;je(e,"mouseup",this._onDrop),je(e,"touchend",this._onDrop),je(e,"pointerup",this._onDrop),je(e,"pointercancel",this._onDrop),je(e,"touchcancel",this._onDrop),je(document,"selectstart",this)},_onDrop:function(e){var i=this.el,a=this.options;if(rn=hn(J),sr=hn(J,a.draggable),Yt("drop",this,{evt:e}),pt=J&&J.parentNode,rn=hn(J),sr=hn(J,a.draggable),ke.eventCanceled){this._nulling();return}Qr=!1,Ea=!1,Bi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),xs(this.cloneId),xs(this._dragStartId),this.nativeDraggable&&(je(document,"drop",this),je(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Oi&&Se(document.body,"user-select",""),Se(J,"transform",""),e&&(Ai&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),Ce&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),(ct===pt||Dt&&Dt.lastPutMode!=="clone")&&dt&&dt.parentNode&&dt.parentNode.removeChild(dt),J&&(this.nativeDraggable&&je(J,"dragend",this),ss(J),J.style["will-change"]="",Ai&&!Qr&&tn(J,Dt?Dt.options.ghostClass:this.options.ghostClass,!1),tn(J,this.options.chosenClass,!1),Ut({sortable:this,name:"unchoose",toEl:pt,newIndex:null,newDraggableIndex:null,originalEvent:e}),ct!==pt?(rn>=0&&(Ut({rootEl:pt,name:"add",toEl:pt,fromEl:ct,originalEvent:e}),Ut({sortable:this,name:"remove",toEl:pt,originalEvent:e}),Ut({rootEl:pt,name:"sort",toEl:pt,fromEl:ct,originalEvent:e}),Ut({sortable:this,name:"sort",toEl:pt,originalEvent:e})),Dt&&Dt.save()):rn!==Jr&&rn>=0&&(Ut({sortable:this,name:"update",toEl:pt,originalEvent:e}),Ut({sortable:this,name:"sort",toEl:pt,originalEvent:e})),ke.active&&((rn==null||rn===-1)&&(rn=Jr,sr=Ri),Ut({sortable:this,name:"end",toEl:pt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Yt("nulling",this),ct=J=pt=Ce=Sr=dt=Ca=ur=kr=gn=Ai=rn=sr=Jr=Ri=Xr=Ki=Dt=wa=ke.dragged=ke.ghost=ke.clone=ke.active=null,Za.forEach(function(e){e.checked=!0}),Za.length=is=as=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":J&&(this._onDragOver(e),nv(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,a=this.el.children,s=0,l=a.length,f=this.options;s<l;s++)i=a[s],bn(i,f.draggable,this.el,!1)&&e.push(i.getAttribute(f.dataIdAttr)||uv(i));return e},sort:function(e,i){var a={},s=this.el;this.toArray().forEach(function(l,f){var h=s.children[f];bn(h,this.options.draggable,s,!1)&&(a[l]=h)},this),i&&this.captureAnimationState(),e.forEach(function(l){a[l]&&(s.removeChild(a[l]),s.appendChild(a[l]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return bn(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var a=this.options;if(i===void 0)return a[e];var s=Yi.modifyOption(this,e,i);typeof s<"u"?a[e]=s:a[e]=i,e==="group"&&fc(a)},destroy:function(){Yt("destroy",this);var e=this.el;e[qt]=null,je(e,"mousedown",this._onTapStart),je(e,"touchstart",this._onTapStart),je(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(je(e,"dragover",this),je(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qa.splice(Qa.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ur){if(Yt("hideClone",this),ke.eventCanceled)return;Se(dt,"display","none"),this.options.removeCloneOnHide&&dt.parentNode&&dt.parentNode.removeChild(dt),ur=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ur){if(Yt("showClone",this),ke.eventCanceled)return;J.parentNode==ct&&!this.options.group.revertClone?ct.insertBefore(dt,J):Sr?ct.insertBefore(dt,Sr):ct.appendChild(dt),this.options.group.revertClone&&this.animate(J,dt),Se(dt,"display",""),ur=!1}}};function nv(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function ka(t,e,i,a,s,l,f,h){var v,m=t[qt],E=m.options.onMove,_;return window.CustomEvent&&!Qn&&!Vi?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=e,v.from=t,v.dragged=i,v.draggedRect=a,v.related=s||e,v.relatedRect=l||bt(e),v.willInsertAfter=h,v.originalEvent=f,t.dispatchEvent(v),E&&(_=E.call(m,v,f)),_}function ss(t){t.draggable=!1}function rv(){Es=!1}function iv(t,e,i){var a=bt(li(i.el,0,i.options,!0)),s=uc(i.el,i.options,Ce),l=10;return e?t.clientX<s.left-l||t.clientY<a.top&&t.clientX<a.right:t.clientY<s.top-l||t.clientY<a.bottom&&t.clientX<a.left}function av(t,e,i){var a=bt(Vs(i.el,i.options.draggable)),s=uc(i.el,i.options,Ce),l=10;return e?t.clientX>s.right+l||t.clientY>a.bottom&&t.clientX>a.left:t.clientY>s.bottom+l||t.clientX>a.right&&t.clientY>a.top}function ov(t,e,i,a,s,l,f,h){var v=a?t.clientY:t.clientX,m=a?i.height:i.width,E=a?i.top:i.left,_=a?i.bottom:i.right,w=!1;if(!f){if(h&&La<m*s){if(!Bi&&(Ki===1?v>E+m*l/2:v<_-m*l/2)&&(Bi=!0),Bi)w=!0;else if(Ki===1?v<E+La:v>_-La)return-Ki}else if(v>E+m*(1-s)/2&&v<_-m*(1-s)/2)return sv(e)}return w=w||f,w&&(v<E+m*l/2||v>_-m*l/2)?v>E+m/2?1:-1:0}function sv(t){return hn(J)<hn(t)?1:-1}function uv(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,a=0;i--;)a+=e.charCodeAt(i);return a.toString(36)}function lv(t){Za.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var a=e[i];a.checked&&Za.push(a)}}function Pa(t){return setTimeout(t,0)}function xs(t){return clearTimeout(t)}co&&ze(document,"touchmove",function(t){(ke.active||Qr)&&t.cancelable&&t.preventDefault()});ke.utils={on:ze,off:je,css:Se,find:ic,is:function(e,i){return!!bn(e,i,e,!1)},extend:Yh,throttle:ac,closest:bn,toggleClass:tn,clone:sc,index:hn,nextTick:Pa,cancelNextTick:xs,detectDirection:cc,getChild:li,expando:qt};ke.get=function(t){return t[qt]};ke.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(ke.utils=On(On({},ke.utils),a.utils)),Yi.mount(a)})};ke.create=function(t,e){return new ke(t,e)};ke.version=zh;var yt=[],Ii,ks,Ts=!1,us,ls,Ja,Di;function cv(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var a=i.originalEvent;this.sortable.nativeDraggable?ze(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ze(document,"pointermove",this._handleFallbackAutoScroll):a.touches?ze(document,"touchmove",this._handleFallbackAutoScroll):ze(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var a=i.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?je(document,"dragover",this._handleAutoScroll):(je(document,"pointermove",this._handleFallbackAutoScroll),je(document,"touchmove",this._handleFallbackAutoScroll),je(document,"mousemove",this._handleFallbackAutoScroll)),Ju(),Oa(),Wh()},nulling:function(){Ja=ks=Ii=Ts=Di=us=ls=null,yt.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,a){var s=this,l=(i.touches?i.touches[0]:i).clientX,f=(i.touches?i.touches[0]:i).clientY,h=document.elementFromPoint(l,f);if(Ja=i,a||this.options.forceAutoScrollFallback||Vi||Qn||Oi){cs(i,this.options,h,a);var v=lr(h,!0);Ts&&(!Di||l!==us||f!==ls)&&(Di&&Ju(),Di=setInterval(function(){var m=lr(document.elementFromPoint(l,f),!0);m!==v&&(v=m,Oa()),cs(i,s.options,m,a)},10),us=l,ls=f)}else{if(!this.options.bubbleScroll||lr(h,!0)===Pn()){Oa();return}cs(i,this.options,lr(h,!1),!1)}}},Vn(t,{pluginName:"scroll",initializeByDefault:!0})}function Oa(){yt.forEach(function(t){clearInterval(t.pid)}),yt=[]}function Ju(){clearInterval(Di)}var cs=ac(function(t,e,i,a){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,f=e.scrollSensitivity,h=e.scrollSpeed,v=Pn(),m=!1,E;ks!==i&&(ks=i,Oa(),Ii=e.scroll,E=e.scrollFn,Ii===!0&&(Ii=lr(i,!0)));var _=0,w=Ii;do{var x=w,L=bt(x),S=L.top,C=L.bottom,T=L.left,K=L.right,V=L.width,B=L.height,q=void 0,$=void 0,G=x.scrollWidth,F=x.scrollHeight,Z=Se(x),ae=x.scrollLeft,W=x.scrollTop;x===v?(q=V<G&&(Z.overflowX==="auto"||Z.overflowX==="scroll"||Z.overflowX==="visible"),$=B<F&&(Z.overflowY==="auto"||Z.overflowY==="scroll"||Z.overflowY==="visible")):(q=V<G&&(Z.overflowX==="auto"||Z.overflowX==="scroll"),$=B<F&&(Z.overflowY==="auto"||Z.overflowY==="scroll"));var ye=q&&(Math.abs(K-s)<=f&&ae+V<G)-(Math.abs(T-s)<=f&&!!ae),ve=$&&(Math.abs(C-l)<=f&&W+B<F)-(Math.abs(S-l)<=f&&!!W);if(!yt[_])for(var pe=0;pe<=_;pe++)yt[pe]||(yt[pe]={});(yt[_].vx!=ye||yt[_].vy!=ve||yt[_].el!==x)&&(yt[_].el=x,yt[_].vx=ye,yt[_].vy=ve,clearInterval(yt[_].pid),(ye!=0||ve!=0)&&(m=!0,yt[_].pid=setInterval((function(){a&&this.layer===0&&ke.active._onTouchMove(Ja);var Pe=yt[this.layer].vy?yt[this.layer].vy*h:0,Xe=yt[this.layer].vx?yt[this.layer].vx*h:0;typeof E=="function"&&E.call(ke.dragged.parentNode[qt],Xe,Pe,t,Ja,yt[this.layer].el)!=="continue"||oc(yt[this.layer].el,Xe,Pe)}).bind({layer:_}),24))),_++}while(e.bubbleScroll&&w!==v&&(w=lr(w,!1)));Ts=m}},30),vc=function(e){var i=e.originalEvent,a=e.putSortable,s=e.dragEl,l=e.activeSortable,f=e.dispatchSortableEvent,h=e.hideGhostForTarget,v=e.unhideGhostForTarget;if(i){var m=a||l;h();var E=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,_=document.elementFromPoint(E.clientX,E.clientY);v(),m&&!m.el.contains(_)&&(f("spill"),this.onSpill({dragEl:s,putSortable:a}))}};function Ys(){}Ys.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var s=li(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),a&&a.animateAll()},drop:vc};Vn(Ys,{pluginName:"revertOnSpill"});function Ws(){}Ws.prototype={onSpill:function(e){var i=e.dragEl,a=e.putSortable,s=a||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:vc};Vn(Ws,{pluginName:"removeOnSpill"});ke.mount(new cv);ke.mount(Ws,Ys);class fv{constructor(){this.state={lists:[],isDragActive:!1,pendingUpdates:new Map,version:0},this.listeners=new Set}subscribe(e){return this.listeners.add(e),e(this.getState()),()=>this.listeners.delete(e)}getState(){return{lists:[...this.state.lists],isDragActive:this.state.isDragActive,version:this.state.version}}initializeFromQuery(e){this.state.isDragActive||Array.isArray(e)&&(this.state.lists=e.map(i=>({id:i.id,name:i.name,order:i.order,columnIndex:i.columnIndex??0})),this.state.version++,this.notify())}startDrag(){this.state.isDragActive||(this.state.isDragActive=!0,this.state.pendingUpdates.clear(),this.state.version++,this.notify())}updateDragState(e,i){if(!this.state.isDragActive){console.warn("[DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[DRAG STATE] updateDragState called with invalid items");return}this.state.pendingUpdates.set(e,{items:i.map(a=>({...a})),timestamp:Date.now()}),this.applyPendingUpdates(),this.state.version++,this.notify()}applyPendingUpdates(){const e=new Set;this.state.pendingUpdates.forEach(({items:s})=>{s.forEach(l=>e.add(l.id))});const i=new Set(this.state.pendingUpdates.keys());let a=this.state.lists.filter(s=>{const l=s.columnIndex??0;return!e.has(s.id)&&!i.has(l)});this.state.pendingUpdates.forEach(({items:s},l)=>{const f=s.map((h,v)=>({...this.state.lists.find(E=>E.id===h.id)||h,columnIndex:l,order:v}));a=[...a,...f]}),this.state.lists=a}completeDrag(e=!0){this.state.isDragActive&&(e?this.state.pendingUpdates.clear():this.state.pendingUpdates.clear(),this.state.isDragActive=!1,this.state.version++,this.notify())}notify(){const e=this.getState();this.listeners.forEach(i=>{try{i(e)}catch(a){console.error("[DRAG STATE] Error in state change listener:",a)}})}getListsForColumn(e){return this.state.lists.filter(i=>(i.columnIndex??0)===e)}isDragActive(){return this.state.isDragActive}}const yn=new fv,Me=new Wa("TaskPlannerDB");Me.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Me.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.toCollection().modify(e=>{e.status="unchecked"}));Me.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.tasks.where("status").equals("archived").modify(e=>{e.archivedAt=Date.now()}));Me.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify(e=>{e.archivedAt===void 0&&(e.archivedAt=null)}));Me.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(t=>t.lists.toCollection().modify((e,i)=>{e.columnIndex===void 0&&(e.columnIndex=e.order%5)}));function fo(t){return t.length===0?0:Math.max(...t.map(i=>i.order))+1}async function dv(){return(await Me.lists.orderBy("order").toArray()).filter(e=>e.archivedAt==null)}async function hv(){return await Me.lists.orderBy("order").toArray()}async function vv(t,e=null){if(t==null)throw new Error("List name cannot be null or undefined");const i=t.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const a=await Me.lists.orderBy("order").toArray(),s=fo(a),l=5;let f;return e!==null&&e>=0&&e<l?f=e:f=s%l,await Me.lists.add({name:i,order:s,archivedAt:null,columnIndex:f})}async function pv(t=null){const e=await Me.lists.orderBy("order").toArray(),i=fo(e),a=5;let s;return t!==null&&t>=0&&t<a?s=t:s=i%a,await Me.lists.add({name:null,order:i,archivedAt:null,columnIndex:s})}async function mv(t,e){const i=e.trim();if(i==="")throw new Error("List name cannot be empty");return await Me.lists.update(t,{name:i})}async function Dr(t){return await Me.tasks.where("listId").equals(t).filter(e=>e.status!=="archived").sortBy("order")}async function gv(){return(await Me.tasks.where("status").equals("archived").toArray()).sort((e,i)=>{const a=e.archivedAt||0,s=i.archivedAt||0;return s!==a?s-a:(i.order||0)-(e.order||0)})}async function yv(t,e,i=null){let a=t;t===null&&(a=await pv(i));const s=await Me.tasks.where("listId").equals(a).filter(v=>v.status!=="archived").sortBy("order"),l=fo(s),f=e===""?"":e.trim();return await Me.tasks.add({text:f,listId:a,order:l,status:"unchecked"})}async function bv(t,e){const i=e===""?"":e.trim();return await Me.tasks.update(t,{text:i})}async function $u(t,e){if(!["unchecked","checked","archived"].includes(e))throw new Error(`Invalid status: ${e}`);const i={status:e};return e==="archived"?i.archivedAt=Date.now():e!=="archived"&&(i.archivedAt=null),await Me.tasks.update(t,i)}async function _v(t){const e=await Me.tasks.get(t);if(!e)throw new Error(`Task ${t} not found`);const i=await Me.lists.get(e.listId);if(!i)throw new Error(`Task's list ${e.listId} not found`);let a=!1;i.archivedAt!=null&&(await Ev(e.listId),a=!0);const s=await Me.tasks.where("listId").equals(e.listId).filter(h=>h.status!=="archived"&&h.id!==t).sortBy("order"),l=fo(s);return{taskUpdated:await Me.tasks.update(t,{status:"checked",order:l}),listRestored:a}}async function ni(t,e){if(!e||e.length===0)return;const i=e.map(h=>h.id),s=(await Me.tasks.bulkGet(i)).filter(h=>h!==void 0);if(s.length===0)return;const l=s.filter(h=>h.listId!==t),f=new Set(l.map(h=>h.listId));await Me.transaction("rw",Me.tasks,async()=>{for(let h=0;h<e.length;h++){const v=e[h].id,m=s.find(_=>_.id===v);if(!m)continue;const E={order:h};m.listId!==t&&(E.listId=t),await Me.tasks.update(v,E)}for(const h of f){const v=await Me.tasks.where("listId").equals(h).filter(m=>m.status!=="archived").sortBy("order");for(let m=0;m<v.length;m++)await Me.tasks.update(v[m].id,{order:m})}})}async function wv(t){const e=Date.now();return await Me.lists.update(t,{archivedAt:e})}async function Ev(t){return await Me.lists.update(t,{archivedAt:null})}async function xv(t){const e=Date.now(),i=await Me.tasks.where("listId").equals(t).filter(s=>s.status==="unchecked"||s.status==="checked").toArray(),a=i.map(s=>Me.tasks.update(s.id,{status:"archived",archivedAt:e}));return await Promise.all(a),i.length}async function el(t,e){if(!e||e.length===0)return;if(t<0||t>=5)throw new Error(`Invalid column index: ${t}`);const i=e.map(h=>h.id),a=await Me.lists.bulkGet(i);if(a.filter(h=>!h).length>0)throw new Error("Cannot update order: some lists do not exist");const l=a.filter(h=>h!==void 0),f=l.filter(h=>(h.columnIndex??0)!==t);new Set(f.map(h=>h.columnIndex??0)),await Me.transaction("rw",Me.lists,async()=>{const h=new Set;for(let w=0;w<e.length;w++){const x=e[w].id,L=l.find(T=>T.id===x);if(!L)continue;const S={order:w},C=L.columnIndex??0;C!==t&&(S.columnIndex=t,h.add(C)),await Me.lists.update(x,S)}const m=(await Me.lists.orderBy("order").toArray()).filter(w=>w.archivedAt==null),E=Array(5).fill(null).map(()=>[]);for(const w of m){const x=w.columnIndex??0,L=x>=5?4:x;E[L].push(w)}const _=new Set([t,...h]);for(const w of _){const x=E[w];x.sort((L,S)=>(L.order??0)-(S.order??0));for(let L=0;L<x.length;L++)await Me.lists.update(x[L].id,{order:L})}})}function pc(t){return t&&(t.isDndShadowItem===!0||typeof t.id=="string"&&t.id.startsWith("id:dnd-shadow-placeholder-"))}function mc(t,e=5){if(!t||t.length===0)return Array(e).fill(null).map(()=>[]);const i=Array(e).fill(null).map(()=>[]),a=e-1;for(const s of t){let l=s.columnIndex??0;l>=e&&(l=a),i[l].push(s)}for(let s=0;s<i.length;s++)i[s].sort((l,f)=>(l.order??0)-(f.order??0));return i}function kv(t,e){if(!t||t.length===0)return null;for(let i=0;i<t.length;i++){const a=t[i];if(!Array.isArray(a))continue;const s=a.findIndex(l=>l.id===e);if(s!==-1)return{columnIndex:i,index:s}}return null}function Tv(t,e,i,a){const{columnIndex:s,index:l}=t;let f=s,h=l;if(e==="up"){if(l===0)return null;h=l-1}else if(e==="down"){const v=i[s]||[];if(l===v.length-1)return null;h=l+1}else if(e==="left"){if(s===0)return null;f=s-1,h=(i[f]||[]).length}else if(e==="right"){if(s===a-1)return null;f=s+1,h=(i[f]||[]).length}else return null;return{targetColumnIndex:f,targetIndex:h}}function Sv(t,e,i,a){const s=kv(t,e);if(!s)return null;const{columnIndex:l,index:f}=s,h=Tv(s,i,t,a);if(!h)return null;const{targetColumnIndex:v,targetIndex:m}=h,E=t.map(C=>Array.isArray(C)?[...C]:[]),_=E[l];if(!_||_.length===0)return null;const[w]=_.splice(f,1);if(!w)return null;const x=E[v];if(!x)return null;const L=Math.min(Math.max(m,0),x.length);i==="left"||i==="right"?x.splice(L,0,{...w,columnIndex:v}):x.splice(L,0,w);const S=[];for(let C=0;C<E.length;C++){const T=E[C]||[];for(let K=0;K<T.length;K++){const V=T[K];S.push({...V,columnIndex:C,order:K})}}return{newColumns:E,updatedDraggableLists:S,targetColumnIndex:v,targetColumnItems:(E[v]||[]).map(C=>({id:C.id}))}}function Av(t){return Array.isArray(t)?t.filter(e=>!pc(e)):[]}function ci(t){t instanceof HTMLElement&&(t.style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",t.style.backgroundColor="rgba(107, 143, 217, 0.04)",t.style.borderRadius="4px")}function gc(t){t instanceof HTMLElement&&(t.style.removeProperty("box-shadow"),t.style.removeProperty("background-color"),t.style.removeProperty("border-radius"))}function Iv(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach(e=>{e instanceof HTMLElement&&ci(e)})}function Dv(){if(typeof document>"u")return;document.querySelectorAll(".sortable-column-container").forEach(e=>{e instanceof HTMLElement&&gc(e)})}function Cv(t){const{onDragStart:e,onDragEnd:i,columnIndex:a,getSortableInstance:s}=t;return{animation:150,ghostClass:"sortable-ghost-list",group:"lists",draggable:"[data-id]",filter:"ul, li, .create-list-container, .empty-drop-zone",preventOnFilter:!1,delay:50,delayOnStartOnly:!0,distance:5,emptyInsertThreshold:50,forceFallback:!0,fallbackOnBody:!0,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onStart:l=>{if(typeof document<"u"){if(document.querySelector(".modal-backdrop")){const h=s?s():null;h&&(h.option("disabled",!0),setTimeout(()=>{h.option("disabled",!1)},0));return}document.body.classList.add("list-dragging-active")}Iv(),e&&e(l)},onMove:l=>{l.to&&l.to instanceof HTMLElement&&ci(l.to),l.from&&l.from instanceof HTMLElement&&ci(l.from)},onEnd:l=>{typeof document<"u"&&document.body.classList.remove("list-dragging-active"),Dv(),i&&i(l,a)}}}const $a=160,Lv=150,eo=1056,Pv=816,to=16,Ov=25,Mv=10,fs=20,Ta=10,Rv=40,tl=200,nl=10,Kv=20;async function Bv(t,e={}){const{maxAttempts:i=Ov,retryInterval:a=Mv,waitForTick:s=!0}=e;if(typeof document>"u")return null;s&&await at();for(let l=0;l<i;l++){const f=t();if(f&&f instanceof HTMLElement)return f.focus(),f;l<i-1&&await new Promise(h=>setTimeout(h,a))}return null}async function yc(t){if(typeof document>"u")return null;await at();const e=document.querySelector(`div[data-id="${t}"][role="group"]`);if(e instanceof HTMLElement)return e.focus(),e;const i=document.querySelector(`div[data-id="${t}"]`);return i instanceof HTMLElement?(i.focus(),i):null}function Nv(t,e,i){if(!t)return null;const a=t.querySelector(e);if(a){const s=a.querySelector(i);if(s&&s instanceof HTMLElement)return s}return null}function Fv(t,e,i,a,s=null){if(t.key!=="Tab"||!e||!i)return!1;if(t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),a(!1),typeof document>"u")return!0;let l=i;if(!(l instanceof HTMLElement)||!document.contains(l))if(s&&s instanceof HTMLElement)l=s;else return!0;return l&&l instanceof HTMLElement&&l.focus(),!0}function Hv(t,e,i,a,s){return t.key!=="Tab"||!e||i==null?!1:(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),a(!1),s&&s(i),!0)}function jv(t){const{getShouldResume:e,getLastBlurredElement:i,setShouldResume:a,getFallbackElement:s}=t;return function(f){const h=e(),v=i(),m=s?s():null;return Fv(f,h,v,a,m)}}function Uv(t){const{getShouldResume:e,getLastDraggedId:i,setShouldResume:a,focusFunction:s}=t;return function(f){const h=e(),v=i();return Hv(f,h,v,a,s)}}function zv(t,e,i,a){const{getKeyboardListDrag:s,getLastKeyboardDraggedListId:l,getShouldRefocusListOnNextTab:f,setShouldRefocusListOnNextTab:h}=t;function v(m){const E=m.key,_=s(),w=_.active===!0,x=_.listId;if(l(),f(),!(!w&&Uv({getShouldResume:f,getLastDraggedId:l,setShouldResume:h,focusFunction:yc})(m))&&!(!w||x==null)){if(E==="ArrowUp"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"up");return}if(E==="ArrowDown"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"down");return}if(E==="ArrowLeft"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"left");return}if(E==="ArrowRight"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),e(x,"right");return}if(E==="Escape"||E==="Enter"||E===" "){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),i(),a();return}if(E==="Tab"){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),i(),a();return}}}return document.addEventListener("keydown",v,!0),()=>{document.removeEventListener("keydown",v,!0)}}function Vv(t){return t===""}function Yv(t){return t.trim()===""&&t.length>0}function bc(t){const e=t.trim(),i=Yv(t);return{text:i?"":e,isBlank:i}}function _c(t,e,i={}){const{ignoreElements:a=[],shouldClose:s=()=>!0,checkIgnoreClick:l=null}=i;function f(v){const m=typeof t=="function"?t():t;if(m&&!m.contains(v.target)&&!(l&&l(v))){for(const E of a){let _=null;if(typeof E=="function"?_=E():_=E,_&&_.contains(v.target))return}s()&&e()}}const h=setTimeout(()=>{document.addEventListener("click",f)},0);return()=>{clearTimeout(h),document.removeEventListener("click",f)}}function Wv(t){const{getColumnIndex:e,setColumnIndex:i,getInput:a,setInput:s,getInputElement:l}=t;function f(x){i(x)}function h(x,L){if(x.key==="Enter"||x.key===" ")x.preventDefault(),x.stopPropagation(),f(L);else if(x.key==="Escape"){x.preventDefault(),x.stopPropagation(),x.stopImmediatePropagation();const S=x.currentTarget;S&&S instanceof HTMLElement&&S.blur()}}function v(x,L,S){if(x.key==="Escape"){const C=a()||"";if(S){i(null),s("");return}if(C.trim().length>0){m(L,!0);return}i(null),s("")}}async function m(x,L=!1){const S=a()||"";if(S===""||S.trim()===""){i(null),s("");return}const{text:C}=bc(S);try{if(await vv(C||null,x),s(""),L)i(null);else{await at();const T=l();T&&setTimeout(()=>{T.focus()},0)}}catch(T){console.error("Error creating list:",T)}}async function E(x){await m(x,!0)}function _(){if(e()!==null)return _c(l(),()=>{e()!==null&&(i(null),s(""))},{ignoreElements:[],shouldClose:()=>!a()||a().trim()===""})}function w(){const x=e(),L=l();if(x===null||!L)return;const S=setTimeout(()=>{L?.focus()},0);return()=>{clearTimeout(S)}}return{handleCreateListClick:f,handleCreateListKeydown:h,handleCreateListInputEscape:v,handleCreateList:m,handleCreateListOnTab:E,setupClickOutsideEffect:_,setupFocusEffect:w}}class qv{constructor(){this.state=new Map,this.globalDragActive=!1,this.listeners=new Map}subscribe(e,i){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(i);const a=this.getState(e);return i(a),()=>{const s=this.listeners.get(e);s&&(s.delete(i),s.size===0&&this.listeners.delete(e))}}getState(e){const i=this.state.get(e);return i?{tasks:[...i.tasks],isDragActive:i.isDragActive||!1,version:i.version||0}:{tasks:[],isDragActive:!1,version:0}}initializeFromQuery(e,i){if(this.globalDragActive||!Array.isArray(i))return;const a=i.filter(l=>l.status==="unchecked"||l.status==="checked");this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(e);if(!s.isDragActive){const l=a.map(h=>`${h.id}:${h.status}:${h.text||""}`).join(","),f=s.tasks.map(h=>`${h.id}:${h.status}:${h.text||""}`).join(",");l!==f&&(s.tasks=a.map(h=>({...h})),s.version++,this.notify(e))}}startDrag(e,i){this.globalDragActive=!0,[e,i].forEach(a=>{this.state.has(a)||this.state.set(a,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const s=this.state.get(a);s.isDragActive=!0,s.pendingUpdates=null,s.version++,this.notify(a)})}updateDragState(e,i){if(!this.globalDragActive){console.warn("[TASK DRAG STATE] updateDragState called but drag is not active");return}if(!Array.isArray(i)){console.warn("[TASK DRAG STATE] updateDragState called with invalid tasks");return}this.state.has(e)||this.state.set(e,{tasks:[],isDragActive:!1,pendingUpdates:null,version:0});const a=this.state.get(e);[...a.tasks],a.pendingUpdates={tasks:i.map(s=>({...s})),timestamp:Date.now()},a.pendingUpdates&&(a.tasks=[...a.pendingUpdates.tasks],a.pendingUpdates=null),a.version++,this.notify(e)}completeDrag(e,i,a=!0){this.globalDragActive=!1,[e,i].forEach(s=>{const l=this.state.get(s);l&&(l.pendingUpdates=null,l.isDragActive=!1,l.version++,this.notify(s))})}notify(e){const i=this.getState(e),a=this.listeners.get(e);a&&a.forEach(s=>{try{s(i)}catch(l){console.error("[TASK DRAG STATE] Error in state change listener:",l)}})}isDragActive(){return this.globalDragActive}isDragActiveForList(e){const i=this.state.get(e);return i?i.isDragActive:!1}}const Ie=new qv;function Gv(t){return Array.isArray(t)?t.filter(e=>e&&typeof e.id=="number"):[]}function no(t,e,i){if(!Array.isArray(e)||e.length===0)return null;const a=e.find(_=>_.id===t);if(!a)return null;const s=a.columnIndex??0;a.order;const l=5,f=Array(l).fill(null).map(()=>[]);for(const _ of e){const w=_.columnIndex??0,x=w>=l?l-1:w;f[x].push(_)}for(let _=0;_<f.length;_++)f[_].sort((w,x)=>(w.order??0)-(x.order??0));const h=f[s],v=h.findIndex(_=>_.id===t);if(v===-1)return null;const m=v===h.length-1,E=v===0;if(i==="next"){if(!m)return h[v+1].id;for(let _=s+1;_<l;_++){const w=f[_];if(w.length>0)return w[0].id}return null}if(i==="prev"){if(!E)return h[v-1].id;for(let _=s-1;_>=0;_--){const w=f[_];if(w.length>0)return w[w.length-1].id}return null}return null}async function wc(t,e){try{const i=await Dr(e),a=[{id:t},...i];await ni(e,a)}catch(i){throw console.error("Error moving task to next list:",i),i}}async function Ss(t,e){try{const a=[...await Dr(e),{id:t}];await ni(e,a)}catch(i){throw console.error("Error moving task to previous list:",i),i}}function Xv(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(e=>{e instanceof HTMLElement&&ci(e)})}function Qv(){if(typeof document>"u")return;document.querySelectorAll("ul[data-list-id]").forEach(e=>{e instanceof HTMLElement&&gc(e)})}function Zv(t){const{onDragStart:e,onDragEnd:i,setDragJustEnded:a}=t||{};return{onStart:s=>{typeof document<"u"&&document.body.classList.add("task-dragging-active"),a&&a(!1);const l=s.item;l&&l instanceof HTMLElement&&document.querySelectorAll("ul[data-list-id]").forEach(h=>{Array.from(h.children).forEach(m=>{m!==l&&m.classList.contains("sortable-ghost-task")&&m.classList.remove("sortable-ghost-task")})}),Xv(),e&&e(s)},onMove:s=>{s.to&&s.to instanceof HTMLElement&&ci(s.to),s.from&&s.from instanceof HTMLElement&&ci(s.from)},onEnd:s=>{typeof document<"u"&&document.body.classList.remove("task-dragging-active"),Qv(),a&&(a(!0),setTimeout(()=>{a(!1)},100)),i&&i(s)}}}function Jv(t){const e=Zv(t);return{animation:150,ghostClass:"sortable-ghost-task",group:"tasks",draggable:"li[data-id]",filter:"[data-no-drag]",preventOnFilter:!1,emptyInsertThreshold:50,swapThreshold:.65,onStart:e.onStart,onMove:e.onMove,onEnd:e.onEnd}}function $v(){return typeof document>"u"?!1:document.querySelectorAll('.sortable-ghost, [aria-grabbed="true"]').length>0}function Ec(t){if(!t||!(t instanceof HTMLElement))return!1;const e=window.getComputedStyle(t);return e.boxShadow&&e.boxShadow!=="none"&&e.boxShadow.includes("inset")}function ep(){if(typeof document>"u")return[];const t=document.querySelectorAll("ul"),e=[];for(const i of t)i instanceof HTMLElement&&Ec(i)&&e.push(i);return e}function xc(){return $v()||ep().length>0}function tp(t,e){const{getIsKeyboardTaskDragging:i,setIsKeyboardTaskDragging:a,setLastKeyboardDraggedTaskId:s,setLastBlurredTaskElement:l,setShouldRefocusTaskOnNextTab:f}=t;return function(v,m){const E=v.key,_=v.currentTarget,w=v.target;if(!(!(_ instanceof HTMLElement)||_!==w)){if(E==="Enter"||E===" ")if(!i())a(!0),s(m);else{a(!1),s(m),l(_),f(!0);const L=e();if(L){const S=L.getAttribute("data-list-id");if(S){const C=parseInt(S);Ie.globalDragActive&&Ie.completeDrag(C,C,!0)}}}else if(E==="Escape"){const x=i(),L=e(),S=xc()||L&&Ec(L);if(x||S){a(!1),s(m),l(_),f(!0);const C=e();if(C){const T=C.getAttribute("data-list-id");if(T){const K=parseInt(T);Ie.globalDragActive&&Ie.completeDrag(K,K,!1)}}v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),_ instanceof HTMLElement&&_.blur()}else v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),l(_),f(!0),_ instanceof HTMLElement&&_.blur()}}}}function np(t){const{getIsKeyboardTaskDragging:e,getLastKeyboardDraggedTaskId:i,setLastBlurredTaskElement:a,setShouldRefocusTaskOnNextTab:s}=t;return function(f,h){const v=f.currentTarget,m=e(),E=i();m&&E===h&&(a(v),s(!0))}}function rp(t,e,i,a,s,l,f){const{getIsKeyboardTaskDragging:h,getLastBlurredTaskElement:v,getShouldRefocusTaskOnNextTab:m,setIsKeyboardTaskDragging:E,setLastKeyboardDraggedTaskId:_,setLastBlurredTaskElement:w,setShouldRefocusTaskOnNextTab:x}=t;let L=!1;async function S(C){const T=C.key,K=h(),V=xc();if((T==="ArrowDown"||T==="ArrowUp"||T==="ArrowLeft"||T==="ArrowRight")&&L){C.preventDefault(),C.stopPropagation();return}if(T==="Tab"){if(V||K){if(C.preventDefault(),C.stopImmediatePropagation(),C.stopPropagation(),E(!1),typeof document<"u"&&document.activeElement){const Ae=document.activeElement.closest("li[data-id]");if(Ae&&Ae instanceof HTMLElement){const $e=Ae.getAttribute("data-id");if($e){const Ge=parseInt($e);_(Ge),w(Ae),x(!0)}const Ke=Ae.closest("ul[data-list-id]");if(Ke){const Ge=Ke.getAttribute("data-list-id");if(Ge){const Y=parseInt(Ge);Ie.globalDragActive&&Ie.completeDrag(Y,Y,!0)}}}}return}if(jv({getShouldResume:m,getLastBlurredElement:v,setShouldResume:x,getFallbackElement:()=>{if(f){const Re=f.querySelector('span[role="button"]');if(Re&&Re instanceof HTMLElement)return Re}return null}})(C))return}if(!K||T!=="ArrowDown"&&T!=="ArrowUp"&&T!=="ArrowLeft"&&T!=="ArrowRight")return;const B=document.activeElement;if(!B)return;const q=B.closest("li[data-id]");if(!q)return;const $=q.getAttribute("data-id");if(!$)return;const G=parseInt($),F=q.closest("ul[data-list-id]");if(!F)return;const Z=F.getAttribute("data-list-id");if(!Z)return;const W=parseInt(Z),ve=Ie.getState(W).tasks,pe=ve.find(ie=>ie.id===G);if(!pe)return;const Pe=ve.findIndex(ie=>ie.id===G);if(Pe===-1)return;const Xe=Pe===0,rt=Pe===ve.length-1;C.preventDefault(),C.stopImmediatePropagation(),C.stopPropagation(),L=!0;try{if(T==="ArrowDown")if(rt){const ie=no(W,a,"next");if(ie!=null){Ie.globalDragActive||Ie.startDrag(W,ie);const Re=ve.find(fe=>fe.id===G);if(!Re)return;const Ae=ve.filter(fe=>fe.id!==G);Ie.updateDragState(W,Ae);let $e=Ie.getState(ie),Ke=$e?.tasks||[];if(Ke.length===0&&$e.version===0&&!Ie.state.has(ie)){const De=(await Dr(ie)).filter(be=>be.status==="unchecked"||be.status==="checked");Ie.initializeFromQuery(ie,De),$e=Ie.getState(ie),Ke=$e?.tasks||[]}const Y=[{...Re,listId:ie},...Ke];Ie.updateDragState(ie,Y),await wc(G,ie),await at();const Q=document.querySelector(`li[data-id="${G}"]`);Q instanceof HTMLElement&&Q.focus()}}else{const ie=[...ve],[Re]=ie.splice(Pe,1);ie.splice(Pe+1,0,Re),Ie.globalDragActive||Ie.startDrag(W,W),Ie.updateDragState(W,ie),await ni(W,ie),await at();let Ae=e?.querySelector(`li[data-id="${G}"]`);if(Ae||(Ae=document.querySelector(`li[data-id="${G}"]`)),Ae instanceof HTMLElement&&(Ae.focus(),await at(),await new Promise(Ke=>setTimeout(Ke,50)),document.activeElement!==Ae)){const Ke=document.querySelector(`li[data-id="${G}"]`);Ke instanceof HTMLElement&&Ke.focus()}}else if(T==="ArrowUp")if(Xe){const ie=no(W,a,"prev");if(ie!=null){const Re=a.find(Ke=>Ke.id===W),Ae=a.find(Ke=>Ke.id===ie);if(Re&&Ae&&(Re.columnIndex??0)!==(Ae.columnIndex??0)){Ie.globalDragActive||Ie.startDrag(W,ie);const Ke=ve.find(Ze=>Ze.id===G);if(!Ke)return;const Ge=ve.filter(Ze=>Ze.id!==G);Ie.updateDragState(W,Ge);let Y=Ie.getState(ie),Q=Y?.tasks||[];if(Q.length===0&&Y.version===0&&!Ie.state.has(ie)){const _t=(await Dr(ie)).filter(Je=>Je.status==="unchecked"||Je.status==="checked");Ie.initializeFromQuery(ie,_t),Y=Ie.getState(ie),Q=Y?.tasks||[]}const fe={...Ke,listId:ie},De=[...Q,fe];Ie.updateDragState(ie,De),await Ss(G,ie),await at();const be=document.querySelector(`li[data-id="${G}"]`);be instanceof HTMLElement&&be.focus()}else{Ie.globalDragActive||Ie.startDrag(W,ie);const Ke=ve.find(Ze=>Ze.id===G);if(!Ke)return;const Ge=ve.filter(Ze=>Ze.id!==G);Ie.updateDragState(W,Ge);let Y=Ie.getState(ie),Q=Y?.tasks||[];if(Q.length===0&&Y.version===0&&!Ie.state.has(ie)){const _t=(await Dr(ie)).filter(Je=>Je.status==="unchecked"||Je.status==="checked");Ie.initializeFromQuery(ie,_t),Y=Ie.getState(ie),Q=Y?.tasks||[]}const fe={...Ke,listId:ie},De=[...Q,fe];Ie.updateDragState(ie,De),await Ss(G,ie),await at();const be=document.querySelector(`li[data-id="${G}"]`);be instanceof HTMLElement&&be.focus()}}else return}else{const ie=[...ve],[Re]=ie.splice(Pe,1);ie.splice(Pe-1,0,Re),Ie.globalDragActive||Ie.startDrag(W,W),Ie.updateDragState(W,ie),await ni(W,ie),await at();let Ae=e?.querySelector(`li[data-id="${G}"]`);Ae||(Ae=document.querySelector(`li[data-id="${G}"]`)),Ae instanceof HTMLElement&&Ae.focus()}else if(T==="ArrowLeft"||T==="ArrowRight"){const ie=a.find(Y=>Y.id===i);if(!ie)return;const Re=ie.columnIndex??0,Ae=T==="ArrowLeft"?Re-1:Re+1;if(Ae<0||Ae>=5)return;const Ke=mc(a,5)[Ae]||[];let Ge=null;if(Ke.length>0){const Y=Math.min(Pe,Ke.length-1);Ge=Ke[Y]?.id}if(Ge!=null){const Y=await Dr(Ge),Q=Math.min(Pe,Y.length),fe=[...Y];fe.splice(Q,0,pe),await ni(Ge,fe)}}}finally{L=!1}}return document.addEventListener("keydown",S,!0),()=>{document.removeEventListener("keydown",S,!0)}}function kc(t){const{containerElement:e,keyMatches:i,targetMatches:a,onMatch:s}=t;if(!e)return()=>{};function l(f){const h=f.target;i(f.key)&&h instanceof HTMLElement&&a(h,e)&&(f.preventDefault(),f.stopImmediatePropagation(),s&&s(f,h))}return e.addEventListener("keydown",l,!0),()=>{e&&e.removeEventListener("keydown",l,!0)}}function ip(t,e){return kc({containerElement:t,keyMatches:i=>i==="Enter"||i===" ",targetMatches:(i,a)=>{if(i.tagName==="H2"&&i.hasAttribute("role")&&i.getAttribute("role")==="button"){const s=a?.querySelector('h2[role="button"]');return s&&i===s}return!1},onMatch:(i,a)=>{e.openModal(a)}})}function ap(t,e){return kc({containerElement:t,keyMatches:i=>i==="Enter"||i===" ",targetMatches:(i,a)=>{if(i.hasAttribute("role")&&i.getAttribute("role")==="button"){const s=a?.querySelector('span[role="button"]');return s&&i===s}return!1},onMatch:(i,a)=>{e()}})}function op(t,e,i,a,s){if(!t)return()=>{};const{onTaskTextEdit:l}=s;async function f(h){const v=h.target;if((h.key==="Enter"||h.key===" ")&&v instanceof HTMLElement&&v.hasAttribute("data-no-drag")){h.preventDefault(),h.stopImmediatePropagation();const m=v.closest("li[data-id]");if(m){const E=parseInt(m.getAttribute("data-id")),_=e.find(w=>w.id===E);_&&l&&l(E,_.text,v)}return}if(h.key==="ArrowDown"||h.key==="ArrowUp"){const m=document.activeElement;if(!m)return;const E=m.closest("li[data-id]");if(!E||!t.contains(E))return;const _=E.getAttribute("data-id");if(!_)return;const w=parseInt(_);if(!e.find(T=>T.id===w))return;const L=e.findIndex(T=>T.id===w),S=L===0,C=L===e.length-1;if(h.key==="ArrowDown"&&C){h.preventDefault(),h.stopImmediatePropagation();const T=no(i,a,"next");T!=null&&await wc(w,T)}else if(h.key==="ArrowUp"&&S){h.preventDefault(),h.stopImmediatePropagation();const T=no(i,a,"prev");T!=null&&await Ss(w,T)}}}return t.addEventListener("keydown",f,!0),()=>{t.removeEventListener("keydown",f,!0)}}var sp=Le("<button><!></button>");function wn(t,e){let i=Nt(e,"variant",3,"primary"),a=Nt(e,"size",3,"medium"),s=Nt(e,"disabled",3,!1),l=Nt(e,"type",3,"button"),f=Ph(e,["$$slots","$$events","$$legacy","variant","size","disabled","type","onclick","ariaLabel"]);const h="focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed",v={primary:"bg-grey-80 text-grey-110 hover:bg-grey-90 focus:bg-grey-90 disabled:bg-grey-50 disabled:text-grey-100",secondary:"bg-white text-grey-110 hover:bg-grey-20 focus:bg-grey-30 disabled:bg-white disabled:text-grey-60"},m={small:"px-2 py-1 text-sm",medium:"px-4 py-2",large:"px-6 py-3"},E=`${h} ${v[i()]} ${m[a()]}`;var _=sp();Ih(_,()=>({type:l(),disabled:s(),onclick:e.onclick,ariaLabel:e.ariaLabel,class:E,...f}));var w=we(_);yh(w,e,"default",{}),ce(t,_)}var up=Le('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),lp=Le('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><!> <!></div></div></div></div>');function cp(t,e){Gn(e,!0);let i=ge(an(e.taskText||"")),a=ge(!1),s=ge(null),l=ge(null),f=gt(()=>()=>{if(!e.taskPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const S=24,C=24,T=to,V=S+C+T+8-8,B=10,q=e.taskPosition.top-V,$=e.taskPosition.left-to+B,G=e.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${q}px; left: ${$}px; width: ${G}px;`});We(()=>{e.isOpen&&(R(i,e.taskText||"",!0),R(a,!1))}),We(()=>{e.isOpen&&y(s)&&setTimeout(()=>{y(s)?.focus(),y(s)?.select(),y(s)instanceof HTMLTextAreaElement&&(y(s).style.height="auto",y(s).style.height=`${Math.min(y(s).scrollHeight,$a)}px`)},0)}),We(()=>{if(y(s)&&y(s)instanceof HTMLTextAreaElement){const S=()=>{y(s).style.height="auto",y(s).style.height=`${Math.min(y(s).scrollHeight,$a)}px`};return y(s).addEventListener("input",S),()=>{y(s).removeEventListener("input",S)}}});function h(){const S=y(i)??"",C=S.trim();if(C===""&&S.length>0){e.onSave(e.taskId,""),R(a,!1);return}if(S===""||C===""){R(a,!0);return}e.onSave(e.taskId,C),R(a,!1)}function v(){R(i,e.taskText||"",!0),R(a,!1),e.onCancel()}function m(S){S.target===S.currentTarget&&v()}function E(S){if(S.key==="Tab"){if(!y(l))return;const C=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),T=Array.from(y(l).querySelectorAll(C)).filter($=>!(!($ instanceof HTMLElement)||$.hasAttribute("disabled")||$.getAttribute("aria-hidden")==="true"));if(T.length===0)return;const K=document.activeElement,V=T.indexOf(K);let B;S.shiftKey?V<=0?B=T.length-1:B=V-1:V===-1||V===T.length-1?B=0:B=V+1,S.preventDefault(),S.stopPropagation();const q=T[B];q&&q instanceof HTMLElement&&q.focus()}else S.key==="Escape"?v():S.key==="Enter"&&!S.shiftKey&&document.activeElement===y(s)&&(S.preventDefault(),h())}function _(){e.onArchive&&e.onArchive(e.taskId)}var w=Hn(),x=Pt(w);{var L=S=>{var C=lp();C.__click=m,C.__keydown=E;var T=we(C);T.__click=W=>W.stopPropagation();var K=He(we(T),2),V=we(K);V.__keydown=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),W.stopPropagation(),h())},Lt(V,W=>R(s,W),()=>y(s));var B=He(V,2);{var q=W=>{var ye=up();ce(W,ye)};ot(B,W=>{y(a)&&W(q)})}var $=He(K,2),G=we($);G.__click=_;var F=He(G,2),Z=we(F);wn(Z,{variant:"secondary",onclick:v,"aria-label":"Cancel editing and discard changes",children:(W,ye)=>{var ve=_n("Cancel");ce(W,ve)},$$slots:{default:!0}});var ae=He(Z,2);{let W=gt(()=>y(a)?"Save disabled: task cannot be empty":"Save task changes");wn(ae,{variant:"primary",onclick:h,get disabled(){return y(a)},get"aria-label"(){return y(W)},children:(ye,ve)=>{var pe=_n("Save");ce(ye,pe)},$$slots:{default:!0}})}Lt(T,W=>R(l,W),()=>y(l)),xt(W=>{zn(T,W),zn(V,`width: ${Lv}px;`),Tt(V,"aria-describedby",y(a)?"validation-message":void 0)},[()=>y(f)()]),za(V,()=>y(i),W=>R(i,W)),ce(S,C)};ot(x,S=>{e.isOpen&&S(L)})}ce(t,w),Xn()}Fr(["click","keydown"]);var fp=Le('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),dp=Le('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-2 py-2 border border-grey-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border font-gilda text-[24px] text-grey-110 svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box; padding-left: 7px; padding-right: 7px; padding-top: 7px; padding-bottom: 7px;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><!> <div class="flex justify-end gap-3"><!> <!></div></div>',1),hp=Le('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-grey-100">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><!> <!></div>',1),vp=Le('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-grey-10 text-grey-110 p-6 rounded-xl shadow-2xl border-2 border-grey-50 fixed box-border" role="document"><!></div></div>');function pp(t,e){Gn(e,!0);let i=ge(an(e.listName||"")),a=ge(!1),s=ge(null),l=ge(null),f=ge("edit"),h=ge(null),v=gt(()=>()=>{if(!e.listPosition||!e.isOpen)return"background-color: white; z-index: 10000;";const F=24,Z=24,ae=to,ve=F+Z+ae+1+7-8,pe=e.listPosition.top-ve,Pe=e.listPosition.left-to,Xe=Math.max(e.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${pe}px; left: ${Pe}px; width: ${Xe}px; max-width: ${Xe}px; box-sizing: border-box;`});We(()=>{e.isOpen&&(R(i,e.listName||"",!0),R(a,!1),R(f,"edit"))}),We(()=>{e.isOpen&&y(s)&&setTimeout(()=>{y(s)?.focus(),y(s)?.select()},0)});function m(){const Z=(y(i)??"").trim();if(Z===""){R(a,!0);return}e.onSave(e.listId,Z),R(a,!1)}function E(){R(i,e.listName||"",!0),R(a,!1),e.onCancel()}function _(F){F.target===F.currentTarget&&(F.preventDefault(),F.stopPropagation(),E())}function w(F){F.target===F.currentTarget?R(h,F.target,!0):R(h,null),F.stopPropagation(),F.preventDefault()}function x(F){F.target===F.currentTarget&&y(h)===F.currentTarget&&(F.preventDefault(),F.stopPropagation(),E()),R(h,null),F.stopPropagation()}function L(F){F.stopPropagation(),F.preventDefault()}function S(F){return F.preventDefault(),F.stopPropagation(),!1}function C(F){return F.preventDefault(),F.stopPropagation(),!1}function T(F){if(F.key==="Tab"){if(!y(l))return;const Z=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),ae=Array.from(y(l).querySelectorAll(Z)).filter(Pe=>!(!(Pe instanceof HTMLElement)||Pe.hasAttribute("disabled")||Pe.getAttribute("aria-hidden")==="true"));if(ae.length===0)return;const W=document.activeElement,ye=ae.indexOf(W);let ve;F.shiftKey?ye<=0?ve=ae.length-1:ve=ye-1:ye===-1||ye===ae.length-1?ve=0:ve=ye+1,F.preventDefault(),F.stopPropagation();const pe=ae[ve];pe&&pe instanceof HTMLElement&&pe.focus()}else F.key==="Escape"?y(f)==="confirm-archive"?B():E():F.key==="Enter"&&!F.shiftKey&&y(f)==="edit"&&F.target===y(s)&&(F.preventDefault(),m())}function K(){R(f,"confirm-archive")}function V(){e.onArchive(e.listId),E()}function B(){R(f,"edit")}var q=Hn(),$=Pt(q);{var G=F=>{var Z=vp();Z.__click=_,Z.__mousedown=w,Z.__mouseup=x,Z.__mousemove=L,Z.__keydown=T;var ae=we(Z);ae.__click=pe=>pe.stopPropagation(),ae.__mousedown=pe=>pe.stopPropagation(),ae.__mouseup=pe=>pe.stopPropagation();var W=we(ae);{var ye=pe=>{var Pe=dp(),Xe=He(Pt(Pe),2),rt=we(Xe);Lt(rt,Q=>R(s,Q),()=>y(s));var ie=He(rt,2);{var Re=Q=>{var fe=fp();ce(Q,fe)};ot(ie,Q=>{y(a)&&Q(Re)})}var Ae=He(Xe,2),$e=we(Ae);wn($e,{variant:"secondary",onclick:K,"aria-label":"Archive this list",children:(Q,fe)=>{var De=_n("Archive");ce(Q,De)},$$slots:{default:!0}});var Ke=He($e,2),Ge=we(Ke);wn(Ge,{variant:"secondary",onclick:E,"aria-label":"Cancel editing and discard changes",children:(Q,fe)=>{var De=_n("Cancel");ce(Q,De)},$$slots:{default:!0}});var Y=He(Ge,2);{let Q=gt(()=>y(a)?"Save disabled: list name cannot be empty":"Save list name changes");wn(Y,{variant:"primary",onclick:m,get disabled(){return y(a)},get"aria-label"(){return y(Q)},children:(fe,De)=>{var be=_n("Save");ce(fe,be)},$$slots:{default:!0}})}xt(()=>Tt(rt,"aria-describedby",y(a)?"validation-message":void 0)),za(rt,()=>y(i),Q=>R(i,Q)),ce(pe,Pe)},ve=pe=>{var Pe=Hn(),Xe=Pt(Pe);{var rt=ie=>{var Re=hp(),Ae=He(Pt(Re),4),$e=we(Ae);wn($e,{variant:"secondary",onclick:B,"aria-label":"Cancel archiving",children:(Ge,Y)=>{var Q=_n("Cancel");ce(Ge,Q)},$$slots:{default:!0}});var Ke=He($e,2);wn(Ke,{variant:"primary",onclick:V,"aria-label":"Confirm archive list",children:(Ge,Y)=>{var Q=_n("Archive");ce(Ge,Q)},$$slots:{default:!0}}),ce(ie,Re)};ot(Xe,ie=>{y(f)==="confirm-archive"&&ie(rt)},!0)}ce(pe,Pe)};ot(W,pe=>{y(f)==="edit"?pe(ye):pe(ve,!1)})}Lt(ae,pe=>R(l,pe),()=>y(l)),xt(pe=>zn(ae,pe),[()=>y(v)()]),hr("dragstart",Z,S),hr("drag",Z,C),hr("dragend",Z,C),ce(F,Z)};ot($,F=>{e.isOpen&&F(G)})}ce(t,q),Xn()}Fr(["click","mousedown","mouseup","mousemove","keydown"]);var mp=Le('<input type="checkbox" disabled class="cursor-pointer" aria-hidden="true" tabindex="-1"/> <textarea class="flex-1 break-words resize-none max-h-[10rem] overflow-y-auto text-body font-urbanist text-grey-100 placeholder:italic" rows="1" style="height: 24px;"></textarea>',1),gp=Le('<input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-60" role="button" tabindex="0"> </span>',1),yp=Le('<div class="flex items-center gap-2 py-1 border-b border-grey-50 hover:bg-grey-20 w-full print:hidden add-task-container add-task-button svelte-jtbpvm"><!></div>');function ds(t,e){Gn(e,!0);let i=Nt(e,"isInputActive",11,!1),a=Nt(e,"inputValue",3,""),s=Nt(e,"buttonText",3,"Add Task"),l=Nt(e,"placeholder",3,"start typing..."),f=Nt(e,"marginLeft",3,!1),h=Nt(e,"containerElement",15,null),v=Nt(e,"textareaElement",15,null),m=ge(null),E=ge(null);We(()=>{h(y(E)),v(y(m))}),We(()=>{i()&&y(m)?setTimeout(()=>{if(y(m)?.focus(),y(m)instanceof HTMLTextAreaElement){y(m).style.height="auto";const T=y(m).scrollHeight;y(m).style.height=`${Math.max(24,Math.min(T,$a))}px`}},0):!i()&&y(m)&&y(m)instanceof HTMLTextAreaElement&&(y(m).style.height="24px")}),We(()=>{if(y(m)&&y(m)instanceof HTMLTextAreaElement){const T=()=>{y(m).style.height="auto";const K=y(m).scrollHeight;y(m).style.height=`${Math.max(24,Math.min(K,$a))}px`};return y(m).addEventListener("input",T),()=>{y(m).removeEventListener("input",T)}}});function _(T){T.key==="Enter"&&!T.shiftKey?(T.preventDefault(),e.onSave?.()):T.key==="Escape"?(T.preventDefault(),e.onEscape?.(T,a())):T.key==="Tab"&&e.onSave?.({closeAfterSave:!0})}function w(T){if(T.key==="Enter"||T.key===" ")T.preventDefault(),e.onActivate?.();else if(T.key==="Escape"){T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation();const K=T.currentTarget;K&&K instanceof HTMLElement&&K.blur()}}var x=yp(),L=we(x);{var S=T=>{var K=mp(),V=He(Pt(K),2);V.__input=B=>e.onInputChange?.(B.currentTarget.value),V.__keydown=_,Lt(V,B=>R(m,B),()=>y(m)),xt(()=>{Tt(V,"placeholder",l()),kh(V,a())}),ce(T,K)},C=T=>{var K=gp(),V=He(Pt(K),2);V.__click=function(...q){e.onActivate?.apply(this,q)},V.__keydown=w;var B=we(V);xt(()=>{Tt(V,"aria-label",e.ariaLabel||s()),Ir(B,s())}),ce(T,K)};ot(L,T=>{i()?T(S):T(C,!1)})}Lt(x,T=>R(E,T),()=>y(E)),xt(()=>zn(x,f()?"margin-left: 1.5rem;":"")),ce(t,x),Xn()}Fr(["input","keydown","click"]);function rl(){let t=ge(!1),e=ge(null),i=ge(null);function a(v){if(v&&v instanceof HTMLElement){const m=v.getBoundingClientRect();R(e,{top:m.top,left:m.left,width:m.width,height:m.height},!0),R(i,v,!0)}R(t,!0)}function s(){const v=y(i);R(t,!1),R(e,null),R(i,null),v&&v instanceof HTMLElement&&setTimeout(()=>{v.focus()},0)}function l(){R(t,!1),R(e,null),R(i,null)}function f(v){const m=v?.currentTarget||v?.target;a(m)}function h(v,m={}){const E=v.key;if(E==="Enter"||E===" "){v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation();const _=v.currentTarget;_&&a(_)}else if(E==="Escape")if(v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),m.onEscape)m.onEscape(v);else{const _=v.currentTarget;_&&_ instanceof HTMLElement&&_.blur()}}return{get isOpen(){return y(t)},get position(){return y(e)},get element(){return y(i)},openModal:a,closeModal:s,closeModalWithoutFocus:l,handleClick:f,handleKeydown:h}}var bp=Le('<li tabindex="0" role="listitem" class="flex items-center gap-2 py-1 border-b border-grey-50 cursor-move hover:bg-grey-20 w-full m-0 list-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"><input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false"> </span> <!></li>'),_p=Le('<div class="-mt-6"><!></div>'),wp=Le('<div class="task-list-wrapper m-0 p-0"><ul></ul> <!></div>'),Ep=Le("<p>Loading tasks...</p> <!>",1),xp=Le('<div class="flex flex-col w-full"><div class="border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border"><div class="flex items-center transition-colors hover:bg-grey-20 hover:rounded py-1"><h2 role="button" tabindex="0" class="list-title cursor-pointer m-0 px-2 py-2 leading-none text-grey-110 font-gilda text-[24px] rounded -my-1 transition-colors flex-1 min-w-0 focus:outline-none"> </h2></div></div> <!></div> <!> <!>',1);function kp(t,e){Gn(e,!0);const i=()=>Va(y(h),"$tasksQuery",a),[a,s]=Us();let l=Nt(e,"allLists",19,()=>[]),f=Nt(e,"stableLists",19,()=>[]),h=ge(null),v=ge(an([])),m=ge(!1);const E=rl(),_=rl();let w=ge(null),x=ge(""),L=ge(null),S=ge(null),C=ge(null),T=ge(null),K=ge(null),V=ge(null),B=ge(!1),q=ge(!1),$=ge(null),G=ge(null),F=ge(null),Z=ge(!1);function ae(ee,me=null){if(!ee)return[];const Ee=Array.from(ee.children),Fe=me||e.listId,Zt=Ie.getState(Fe).tasks,tt=e.listId!==Fe?Ie.getState(e.listId):null,Te=tt?tt.tasks:[];return Ee.map(At=>{const it=At.getAttribute("data-id");if(!it)return null;const It=parseInt(it,10);let Jt=Zt.find(cn=>cn.id===It);return!Jt&&Te.length>0&&(Jt=Te.find(cn=>cn.id===It)),Jt||(Jt=y(v).find(cn=>cn.id===It)),Jt||{id:It}}).filter(Boolean)}async function W(ee){const{oldIndex:me,newIndex:Ee,from:Fe,to:st}=ee,Zt=e.listId,tt=st?.dataset?.listId?parseInt(st.dataset.listId):e.listId;await at();const Te=st||y(L),At=ae(Te,tt),it=Gv(At);if(it.length!==0){if(Ie.startDrag(Zt,tt),Ie.updateDragState(tt,it),Zt!==tt){const Jt=Ie.getState(Zt).tasks.filter(cn=>!it.some(Hr=>Hr.id===cn.id));Ie.updateDragState(Zt,Jt)}await at();try{await ni(tt,it),Ie.completeDrag(Zt,tt,!0)}catch(It){console.error("[TASK DRAG] Failed to save task order:",It),Ie.completeDrag(Zt,tt,!1)}}}function ye(){if(!y(L)||y(F))return;const ee=Jv({onDragEnd:W,setDragJustEnded:me=>{R(Z,me,!0)}});R(F,new ke(y(L),ee),!0)}We(()=>{if(y(F)&&y(G)!==null&&y(G)!==e.listId&&(y(F).destroy(),R(F,null)),y(L)&&!y(F)){const ee=setTimeout(()=>{!y(F)&&y(L)&&ye()},10);return()=>{clearTimeout(ee)}}}),ec(()=>{y(F)&&(y(F).destroy(),R(F,null))}),We(()=>{f().some(me=>me.id===e.listId)&&e.listId?(!y(h)||y(G)!==e.listId)&&(y(G)!==e.listId&&R(v,[],!0),Ya(R(h,qa(()=>Dr(e.listId)),!0),"$tasksQuery",a),R(G,e.listId,!0)):(Ya(R(h,null),"$tasksQuery",a),R(G,null),R(v,[],!0))}),We(()=>{if(!e.listId)return;const ee=Ie.subscribe(e.listId,me=>{const Ee=me.tasks.map(st=>`${st.id}:${st.status}:${st.text||""}`).join(","),Fe=y(v).map(st=>`${st.id}:${st.status}:${st.text||""}`).join(",");Ee!==Fe&&R(v,me.tasks,!0)});return()=>{ee()}}),We(()=>{e.listId&&i()&&Array.isArray(i())&&Ie.initializeFromQuery(e.listId,i())});const ve=gt(()=>e.listId&&(f().some(ee=>ee.id===e.listId)||l().some(ee=>ee.id===e.listId)));We(()=>ip(y(S),_)),We(()=>ap(y(C),rt)),We(()=>op(y(L),y(v),e.listId,l(),{onTaskTextEdit:(ee,me,Ee)=>{R(w,ee,!0),R(x,me,!0),E.openModal(Ee)}}));const pe={getIsKeyboardTaskDragging:()=>y(q),setIsKeyboardTaskDragging:ee=>{R(q,ee,!0)},getLastKeyboardDraggedTaskId:()=>y($),setLastKeyboardDraggedTaskId:ee=>{R($,ee,!0)},getLastBlurredTaskElement:()=>y(V),setLastBlurredTaskElement:ee=>{R(V,ee,!0)},getShouldRefocusTaskOnNextTab:()=>y(B),setShouldRefocusTaskOnNextTab:ee=>{R(B,ee,!0)}},Pe=tp(pe,()=>y(L)),Xe=np(pe);We(()=>{if(y(L))return rp(pe,y(L),e.listId,l(),()=>y(v),ee=>{R(v,ee,!0)},y(C))});function rt(){R(m,!0)}async function ie(ee,me=""){if(ee.key==="Escape"){let Ee=me||"";if(y(T)?Ee=(y(T).value||"").toString():e.newTaskInput&&(Ee=(e.newTaskInput||"").toString()),Ee.length>0){await Re({closeAfterSave:!0});return}if(R(B,!0),y(C)){const Fe=y(C).querySelector('span[role="button"]');Fe&&Fe instanceof HTMLElement?R(V,Fe,!0):R(V,null)}else R(V,null);R(m,!1),e.onInputChange(""),await at(),await at(),await new Promise(Fe=>requestAnimationFrame(Fe)),await new Promise(Fe=>setTimeout(Fe,tl))}}We(()=>{if(y(m))return _c(()=>y(T),()=>{y(m)&&(R(m,!1),e.onInputChange(""))},{ignoreElements:[],shouldClose:()=>y(T)&&y(T).value.trim()!==""?!1:!e.newTaskInput||e.newTaskInput.trim()===""})});async function Re(ee={}){const me=ee&&typeof ee=="object"&&ee.closeAfterSave===!0;let Ee=e.newTaskInput||"";if(y(T)&&(Ee=(y(T).value||"").toString()),Ee=(Ee||"").toString(),Vv(Ee)){R(m,!1),e.onInputChange(""),await at(),await at(),await new Promise(st=>requestAnimationFrame(st)),await new Promise(st=>setTimeout(st,tl));return}const{text:Fe}=bc(Ee);try{const st=await yv(e.listId,Fe),tt=(y(v).length>0?Math.max(...y(v).map(At=>At.order||0)):-1)+1,Te={id:st,text:Fe,listId:e.listId,order:tt,status:"unchecked"};R(v,[...y(v),Te],!0),e.onInputChange(""),me&&R(m,!1)}catch(st){console.error("Error creating task:",st)}}async function Ae(ee,me){try{await $u(ee,me==="unchecked"?"checked":"unchecked")}catch(Ee){console.error("Error updating task status:",Ee)}}async function $e(ee){await $u(ee,"archived")}function Ke(){return y(L)?Nv(y(L),"li[data-id]",'span[role="button"]'):null}async function Ge(ee=fs,me=Ta){y(S)&&await Bv(()=>{if(y(C)){const Ee=y(C).querySelector('span[role="button"]');if(Ee&&Ee instanceof HTMLElement)return Ee}return null},{maxAttempts:ee,retryInterval:me,waitForTick:!1})}async function Y(ee){try{await $e(ee),y(w)===ee&&(R(w,null),R(x,""),E.closeModalWithoutFocus(),await at(),await new Promise(me=>setTimeout(me,nl)),setTimeout(()=>{const me=(Ee=0)=>{const Fe=Ke();Fe?Fe.focus():Ee<fs?setTimeout(()=>me(Ee+1),Ta):Ge(Rv,Ta)};me()},Kv))}catch(me){console.error("Error archiving task:",me)}}function Q(ee,me,Ee){if(y(Z))return;const Fe=Ee?.currentTarget||Ee?.target;R(w,ee,!0),R(x,me,!0),E.openModal(Fe)}function fe(ee,me,Ee){if(Ee.key==="Enter"||Ee.key===" ")R(w,ee,!0),R(x,me,!0),E.handleKeydown(Ee);else if(Ee.key==="Escape"){Ee.preventDefault(),Ee.stopImmediatePropagation();const Fe=Ee.currentTarget;Fe&&Fe instanceof HTMLElement&&(R(V,Fe,!0),R(B,!0),Fe.blur())}}async function De(ee,me){try{await bv(ee,me),R(w,null),R(x,""),E.closeModal()}catch(Ee){console.error("Error updating task text:",Ee)}}function be(){R(w,null),R(x,""),E.closeModal()}async function Ze(ee){await Y(ee),setTimeout(()=>{if(typeof document>"u")return;const me=document.activeElement;y(S)&&(!me||!y(S).contains(me))&&Ge(fs,Ta)},nl)}function _t(ee){_.handleClick(ee)}function Je(ee){_.handleKeydown(ee)}async function ft(ee,me){try{await mv(ee,me),_.closeModal()}catch(Ee){console.error("Error updating list name:",Ee)}}function wt(){_.closeModal()}async function Ve(ee){try{await xv(ee),await wv(ee)}catch(me){console.error("Error archiving list:",me)}}var et=xp(),ht=Pt(et),Et=we(ht),St=we(Et),sn=we(St);sn.__click=_t,sn.__keydown=Je;var ue=we(sn);Lt(Et,ee=>R(K,ee),()=>y(K));var un=He(Et,2);{var Qt=ee=>{var me=wp(),Ee=we(me);$r(Ee,21,()=>y(v),tt=>tt.id,(tt,Te)=>{var At=bp(),it=we(At);it.__change=()=>Ae(y(Te).id,y(Te).status),it.__keydown=ut=>{if(ut.key==="Enter"||ut.key===" ")ut.preventDefault(),ut.stopPropagation(),ut.stopImmediatePropagation(),Ae(y(Te).id,y(Te).status);else if(ut.key==="Escape"){ut.preventDefault(),ut.stopPropagation(),ut.stopImmediatePropagation();const Zn=ut.currentTarget;if(Zn&&Zn instanceof HTMLElement){const $t=Zn.closest("li[data-id]");$t&&$t instanceof HTMLElement&&(R(V,$t,!0),R(B,!0)),Zn.blur()}}};var It=He(it,2);It.__click=ut=>Q(y(Te).id,y(Te).text,ut),It.__keydown=ut=>fe(y(Te).id,y(Te).text,ut);var Jt=we(It),cn=He(It,2);{var Hr=ut=>{{let Zn=gt(()=>`Archive task: ${y(Te).text||"blank task"}`);wn(ut,{variant:"secondary",size:"small",onclick:()=>Y(y(Te).id),class:"print:hidden",get"aria-label"(){return y(Zn)},children:($t,Wi)=>{var ho=_n("Archive");ce($t,ho)},$$slots:{default:!0}})}};ot(cn,ut=>{y(Te).status==="checked"&&ut(Hr)})}xt(()=>{Tt(At,"data-id",y(Te).id),Tt(At,"aria-label",`Task: ${y(Te).text||"blank task"}`),Th(it,y(Te).status==="checked"),Tt(it,"aria-label",`Mark task "${y(Te).text||"blank task"}" as ${y(Te).status==="checked"?"unchecked":"checked"}`),Ua(It,1,Xl(y(Te).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100":"cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100")),Tt(It,"aria-label",`Edit task: ${y(Te).text||"blank task"}`),Ir(Jt,y(Te).text||"Â ")}),hr("keydown",At,ut=>Pe(ut,y(Te).id),!0),hr("blur",At,ut=>Xe(ut,y(Te).id)),ce(tt,At)}),Lt(Ee,tt=>R(L,tt),()=>y(L));var Fe=He(Ee,2);{var st=tt=>{var Te=_p(),At=we(Te);ds(At,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Re,onEscape:ie,onActivate:rt,buttonText:"Add your first task",placeholder:"start typing...",get ariaLabel(){return`Add your first task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return y(m)},set isInputActive(it){R(m,it,!0)},get containerElement(){return y(C)},set containerElement(it){R(C,it,!0)},get textareaElement(){return y(T)},set textareaElement(it){R(T,it,!0)}}),ce(tt,Te)},Zt=tt=>{ds(tt,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Re,onEscape:ie,onActivate:rt,buttonText:"Add Task",placeholder:"start typing...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return y(m)},set isInputActive(Te){R(m,Te,!0)},get containerElement(){return y(C)},set containerElement(Te){R(C,Te,!0)},get textareaElement(){return y(T)},set textareaElement(Te){R(T,Te,!0)}})};ot(Fe,tt=>{y(v).length===0?tt(st):tt(Zt,!1)})}xt(()=>{Tt(Ee,"data-list-id",e.listId),Ua(Ee,1,`space-y-0 m-0 p-0 list-none w-full ${y(v).length===0?"empty-drop-zone min-h-[24px]":""}`)}),ce(ee,me)},kn=ee=>{var me=Ep(),Ee=He(Pt(me),2);ds(Ee,{get inputValue(){return e.newTaskInput},get onInputChange(){return e.onInputChange},onSave:Re,onEscape:ie,onActivate:rt,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${e.listName??""}`},marginLeft:!1,get isInputActive(){return y(m)},set isInputActive(Fe){R(m,Fe,!0)},get containerElement(){return y(C)},set containerElement(Fe){R(C,Fe,!0)},get textareaElement(){return y(T)},set textareaElement(Fe){R(T,Fe,!0)}}),ce(ee,me)};ot(un,ee=>{y(ve)?ee(Qt):ee(kn,!1)})}Lt(ht,ee=>R(S,ee),()=>y(S));var Ne=He(ht,2);cp(Ne,{get isOpen(){return E.isOpen},get taskId(){return y(w)},get taskText(){return y(x)},get taskPosition(){return E.position},onSave:De,onCancel:be,onArchive:Ze});var ln=He(Ne,2);pp(ln,{get isOpen(){return _.isOpen},get listId(){return e.listId},get listName(){return e.listName},get listPosition(){return _.position},onSave:ft,onCancel:wt,onArchive:Ve}),xt(()=>{Tt(ht,"data-list-id",e.listId),Tt(sn,"aria-label",`Rename list: ${e.listName}`),Ir(ue,e.listName)}),ce(t,et),Xn(),s()}Fr(["click","keydown","change"]);var Tp=Le('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Sp=Le('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Ap=Le('<div class="create-list-container flex flex-col w-full print:hidden create-list-empty-column"><!></div>'),Ip=Le('<div class="flex flex-col" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),Dp=Le('<div class="flex flex-col"></div>'),Cp=Le('<div class="empty-drop-zone min-h-[96px]" tabindex="-1"></div>'),Lp=Le('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Pp=Le('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Op=Le('<div class="create-list-container flex flex-col w-full print:hidden"><!></div>'),Mp=Le('<div><!> <div class="sortable-column-container flex flex-col pt-0 gap-y-6 min-h-0 overflow-y-auto overflow-x-hidden px-1"><!> <!></div> <!></div>');function Rp(t,e){Gn(e,!0);let i=Nt(e,"createListInput",15,""),a=Nt(e,"createListInputElement",15,null),s=Nt(e,"onColumnElementReady",3,()=>{}),l=ge(null),f=ge(null),h=ge(null),v=ge(null);We(()=>{y(l)&&s()&&s()(y(l),e.columnIndex)}),We(()=>{if(!y(f)||!(y(f)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(y(f).style.outline="none",y(f).style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",y(f).style.borderRadius="4px"):(y(f).style.outline="",y(f).style.boxShadow="",y(f).style.borderRadius="")}),We(()=>{if(!y(l)||!(y(l)instanceof HTMLElement))return;e.keyboardListDrag?.active===!0?(y(l).style.flex="1 1 auto",y(l).style.minHeight="0"):(y(l).style.flex="",y(l).style.minHeight="")});var m=Mp(),E=we(m);{var _=K=>{var V=Ap(),B=we(V);{var q=G=>{var F=Tp(),Z=we(F),ae=we(Z);ae.__keydown=W=>{W.key==="Enter"&&!W.shiftKey?(W.preventDefault(),e.onCreateList(e.columnIndex)):W.key==="Escape"?e.onCreateListInputEscape(W,e.columnIndex,!0):W.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Lt(ae,W=>a(W),()=>a()),za(ae,i),ce(G,F)},$=G=>{var F=Sp(),Z=we(F);Z.__click=()=>e.onCreateListClick(e.columnIndex),Z.__keydown=ae=>e.onCreateListKeydown(ae,e.columnIndex),Lt(Z,ae=>R(v,ae),()=>y(v)),ce(G,F)};ot(B,G=>{e.createListColumnIndex===e.columnIndex?G(q):G($,!1)})}ce(K,V)};ot(E,K=>{e.columnLists.length===0&&K(_)})}var w=He(E,2),x=we(w);$r(x,19,()=>e.columnLists,K=>K.id,(K,V)=>{const B=gt(()=>pc(y(V))),q=gt(()=>e.stableLists.find(ye=>ye.id===y(V).id)),$=gt(()=>!y(q)&&!y(B)?y(V):null),G=gt(()=>y(q)||y($));var F=Hn(),Z=Pt(F);{var ae=ye=>{var ve=Ip(),pe=we(ve);{let Pe=gt(()=>y(G).name??"Unnamed list"),Xe=gt(()=>e.newTaskInputs[y(G).id]||"");kp(pe,{get listId(){return y(G).id},get listName(){return y(Pe)},get newTaskInput(){return y(Xe)},onInputChange:rt=>e.onInputChange(y(G).id,rt),get allLists(){return e.allLists},get stableLists(){return e.stableLists}})}xt(()=>{Tt(ve,"data-id",y(V).id),Tt(ve,"aria-label",`List: ${y(G).name??"Unnamed list"}`),Tt(ve,"aria-pressed",e.keyboardListDrag?.active&&e.keyboardListDrag?.listId===y(G).id?"true":"false")}),hr("keydown",ve,Pe=>e.onListKeyboardKeydown(Pe,y(G).id),!0),ce(ye,ve)},W=ye=>{var ve=Dp();xt(()=>Tt(ve,"data-id",y(V).id)),ce(ye,ve)};ot(Z,ye=>{y(G)?ye(ae):ye(W,!1)})}ce(K,F)});var L=He(x,2);{var S=K=>{var V=Cp();Lt(V,B=>R(h,B),()=>y(h)),ce(K,V)};ot(L,K=>{e.columnLists.length===0&&K(S)})}Lt(w,K=>R(l,K),()=>y(l));var C=He(w,2);{var T=K=>{var V=Op(),B=we(V);{var q=G=>{var F=Lp(),Z=we(F),ae=we(Z);ae.__keydown=W=>{W.key==="Enter"&&!W.shiftKey?(W.preventDefault(),e.onCreateList(e.columnIndex)):W.key==="Escape"?e.onCreateListInputEscape(W,e.columnIndex,!1):W.key==="Tab"&&e.onCreateListOnTab(e.columnIndex)},Lt(ae,W=>a(W),()=>a()),za(ae,i),ce(G,F)},$=G=>{var F=Pp(),Z=we(F);Z.__click=()=>e.onCreateListClick(e.columnIndex),Z.__keydown=ae=>e.onCreateListKeydown(ae,e.columnIndex),Lt(Z,ae=>R(v,ae),()=>y(v)),ce(G,F)};ot(B,G=>{e.createListColumnIndex===e.columnIndex?G(q):G($,!1)})}ce(K,V)};ot(C,K=>{e.columnLists.length>0&&K(T)})}Lt(m,K=>R(f,K),()=>y(f)),xt(()=>{Ua(m,1,`flex flex-col pt-0 min-w-0 px-2 h-full gap-y-6 ${e.columnIndex<4?"border-r border-grey-50":""}`,"svelte-785piu"),Tt(m,"data-column-index",e.columnIndex)}),ce(t,m),Xn()}Fr(["keydown","click"]);var Kp=Le("<p>Loading...</p>"),Bp=Le('<div class="grid grid-cols-5 w-full h-full py-4 px-1"></div>'),Np=Le('<div class="w-full h-full overflow-hidden"><!></div>');function Fp(t,e){Gn(e,!0);const i=()=>Va(l,"$lists",a),[a,s]=Us();let l=qa(()=>dv()),f=gt(()=>i()||[]),h=ge(an([])),v=ge(an({})),m=ge(null),E=ge(""),_=ge(null),w=ge(an({active:!1,listId:null,lastDraggedId:null,shouldRefocusOnNextTab:!1})),x=an(new Map);function L(Y){x.forEach(Q=>{Q&&Q.option("disabled",Y)})}We(()=>{if(typeof document>"u")return;const Y=new MutationObserver(()=>{const fe=document.querySelector(".modal-backdrop");L(!!fe)});Y.observe(document.body,{childList:!0,subtree:!0});const Q=document.querySelector(".modal-backdrop");return L(!!Q),()=>{Y.disconnect()}});function S(Y,Q){if(!Y)return[];const fe=Array.from(Y.children),De=new Set,be=[],_t=yn.getState().lists;for(const Je of fe){const ft=Je.getAttribute("data-id");if(!ft)continue;const wt=parseInt(ft,10);if(De.has(wt))continue;De.add(wt);const Ve=_t.find(et=>et.id===wt);if(Ve)be.push({...Ve,columnIndex:Q});else{const et=y(h).find(ht=>ht.id===wt);et&&be.push({...et,columnIndex:Q})}}return be}function C(Y){if(!Y)return null;let Q=Y;for(;Q&&Q!==document.body;){if(Q instanceof HTMLElement){const fe=Q.getAttribute("data-column-index");if(fe!==null)return parseInt(fe,10)}Q=Q.parentElement}return null}async function T(Y,Q){const{to:fe}=Y,De=fe,be=C(De);if(be===null){console.error("[LIST DRAG] Could not determine target column index");return}const Ze=be!==Q;if(await at(),Ze){const Ve=document.querySelectorAll("[data-column-index]"),et=new Map;Ve.forEach(ht=>{if(ht.getAttribute("data-column-index")===null)return;const St=ht.firstElementChild;if(!St||!(St instanceof HTMLElement))return;Array.from(St.children).forEach(ue=>{const un=ue.getAttribute("data-id");if(!un)return;const Qt=parseInt(un,10);et.has(Qt)?ue.remove():et.set(Qt,ue)})}),await at()}const _t=S(De,be),Je=Av(_t),ft=new Set,wt=Je.filter(Ve=>ft.has(Ve.id)?!1:(ft.add(Ve.id),!0));if(wt.length!==0){if(yn.startDrag(),yn.updateDragState(be,wt),await at(),await at(),Ze){const Ve=document.querySelectorAll("[data-column-index]"),et=new Map;Ve.forEach(ue=>{if(ue.getAttribute("data-column-index")===null)return;const Qt=ue.firstElementChild;if(!Qt||!(Qt instanceof HTMLElement))return;Array.from(Qt.children).forEach(Ne=>{const ln=Ne.getAttribute("data-id");if(!ln)return;const ee=parseInt(ln,10);et.has(ee)?Ne.remove():et.set(ee,Ne)})}),await at(),await at();const ht=x.get(Q),Et=x.get(be);ht&&(ht.destroy(),x.delete(Q)),Et&&(Et.destroy(),x.delete(be)),await at();const St=document.querySelector(`[data-column-index="${Q}"] .sortable-column-container`),sn=document.querySelector(`[data-column-index="${be}"] .sortable-column-container`);St&&setTimeout(()=>{K(St,Q)},10),sn&&setTimeout(()=>{K(sn,be)},10)}try{if(await el(be,wt),yn.completeDrag(!0),wt.length===0){const Ve=document.querySelector(`[data-column-index="${be}"] .sortable-column-container`);if(Ve){const et=x.get(be);et&&(et.destroy(),x.delete(be)),await at(),K(Ve,be)}}}catch(Ve){console.error("[LIST DRAG] Failed to save list order:",Ve),yn.completeDrag(!1)}}}function K(Y,Q){if(!Y||x.has(Q))return;let fe=null;const De=Cv({onDragEnd:T,columnIndex:Q,getSortableInstance:()=>fe});fe=new ke(Y,De),x.set(Q,fe)}ec(()=>{x.forEach(Y=>{Y&&Y.destroy()}),x.clear()}),We(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(y(v)).length===0){const Y={};for(const Q of i())Y[Q.id]="";R(v,Y,!0)}}),We(()=>{if(i()&&Array.isArray(i())&&i().length>0){const Y={...y(v)};let Q=!1;for(const fe of i())fe.id in Y||(Y[fe.id]="",Q=!0);Q&&R(v,Y,!0)}}),We(()=>{const Y=yn.subscribe(Q=>{R(h,Q.lists,!0)});return()=>{Y()}}),We(()=>{i()&&Array.isArray(i())&&yn.initializeFromQuery(i())});const V=5;let B=gt(()=>mc(y(h),V));async function q(Y,Q){const fe=y(B);if(!fe||fe.length===0)return;const De=Sv(fe,Y,Q,V);if(!De)return;De.updatedDraggableLists;const be="targetColumnIndex"in De&&De.targetColumnIndex!==void 0?Number(De.targetColumnIndex):0,Ze="targetColumnItems"in De&&De.targetColumnItems!==void 0&&Array.isArray(De.targetColumnItems)?De.targetColumnItems:[];if(Ze.length!==0){yn.startDrag(),yn.updateDragState(be,Ze);try{const _t=Array.isArray(Ze)?Ze:[];await el(be,_t),yn.completeDrag(!0)}catch(_t){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",_t),yn.completeDrag(!1)}y(w).active&&y(w).listId===Y&&await yc(Y)}}function $(Y){return y(w).active===!0&&y(w).listId===Y}function G(Y){R(w,{...y(w),active:!0,listId:Y,shouldRefocusOnNextTab:!1},!0)}function F(){y(w).listId!=null?R(w,{...y(w),active:!1,listId:null,lastDraggedId:y(w).listId,shouldRefocusOnNextTab:!0},!0):R(w,{...y(w),active:!1,listId:null},!0)}function Z(){if(typeof document>"u")return;const Y=document.activeElement;Y&&Y instanceof HTMLElement&&Y.blur()}function ae(Y,Q){const fe=Y.currentTarget,De=Y.target,be=Y.key;if(!$(Q)){be==="Enter"||be===" "?fe instanceof HTMLElement&&fe===De&&(Y.preventDefault(),Y.stopPropagation(),Y.stopImmediatePropagation(),Q!=null&&G(Q)):be==="Escape"&&fe instanceof HTMLElement&&fe===De&&(Y.preventDefault(),Y.stopPropagation(),Y.stopImmediatePropagation(),Q!=null&&R(w,{...y(w),lastDraggedId:Q,shouldRefocusOnNextTab:!0},!0),fe.blur());return}}We(()=>{typeof document>"u"||(y(w).active?document.body.classList.add("keyboard-list-dragging-active"):document.body.classList.remove("keyboard-list-dragging-active"))}),We(()=>typeof document>"u"?void 0:zv({getKeyboardListDrag:()=>({active:y(w).active,listId:y(w).listId}),getLastKeyboardDraggedListId:()=>y(w).lastDraggedId,getShouldRefocusListOnNextTab:()=>y(w).shouldRefocusOnNextTab,setShouldRefocusListOnNextTab:Q=>{R(w,{...y(w),shouldRefocusOnNextTab:Q},!0)}},(Q,fe)=>q(Q,fe),()=>F(),()=>Z()));function W(Y,Q){y(v)[Y]=Q}const ye=Wv({getColumnIndex:()=>y(m),setColumnIndex:Y=>{R(m,Y,!0)},getInput:()=>y(E),setInput:Y=>{R(E,Y,!0)},getInputElement:()=>y(_)}),{handleCreateListClick:ve,handleCreateListKeydown:pe,handleCreateListInputEscape:Pe,handleCreateList:Xe,handleCreateListOnTab:rt,setupClickOutsideEffect:ie,setupFocusEffect:Re}=ye;We(()=>ie()),We(()=>Re());var Ae=Np(),$e=we(Ae);{var Ke=Y=>{var Q=Kp();ce(Y,Q)},Ge=Y=>{var Q=Hn(),fe=Pt(Q);{var De=be=>{var Ze=Bp();$r(Ze,21,()=>y(B),Aa,(_t,Je,ft)=>{{let wt=gt(()=>({active:y(w).active,listId:y(w).listId}));Rp(_t,{columnIndex:ft,get columnLists(){return y(Je)},get stableLists(){return y(f)},get newTaskInputs(){return y(v)},get createListColumnIndex(){return y(m)},get keyboardListDrag(){return y(wt)},onInputChange:W,onListKeyboardKeydown:ae,get onCreateListClick(){return ve},get onCreateListKeydown(){return pe},get onCreateListInputEscape(){return Pe},get onCreateList(){return Xe},get onCreateListOnTab(){return rt},onColumnElementReady:(Ve,et)=>{Ve&&setTimeout(()=>{K(Ve,et)},10)},get allLists(){return i()},get createListInput(){return y(E)},set createListInput(Ve){R(E,Ve,!0)},get createListInputElement(){return y(_)},set createListInputElement(Ve){R(_,Ve,!0)}})}}),ce(be,Ze)};ot(fe,be=>{Array.isArray(i())&&be(De)},!0)}ce(Y,Q)};ot($e,Y=>{i()===void 0||i()===null?Y(Ke):Y(Ge,!1)})}ce(t,Ae),Xn(),s()}var Hp=Le("<p>Loading...</p>"),jp=Le("<p>Loading data...</p>"),Up=Le('<p class="text-grey-60">No archived lists or tasks</p>'),zp=Le('<span class="text-sm text-grey-60"> </span>'),Vp=Le('<span class="text-xs bg-grey-30 px-2 py-1 rounded">[List Archived]</span> <!>',1),Yp=Le('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),Wp=Le('<p class="text-sm text-grey-60 italic">No archived tasks</p>'),qp=Le('<li class="flex items-center gap-3 flex-wrap"><span class="line-through text-grey-100"> </span> <!></li>'),Gp=Le('<div class="mb-4"><h4 class="text-sm font-medium text-grey-60 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),Xp=Le('<div class="border-b border-grey-50 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold text-grey-110"> </h3> <!></div></div> <div class="border-b border-grey-50 pb-4"><!></div>',1),Qp=Le('<div class="grid grid-cols-2 gap-4"></div>'),Zp=Le('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function Jp(t,e){Gn(e,!0);const i=()=>Va(y(h),"$listsQuery",s),a=()=>Va(y(f),"$archivedTasksQuery",s),[s,l]=Us();let f=ge(null),h=ge(null);We(()=>{Ya(R(f,qa(()=>gv()),!0),"$archivedTasksQuery",s),Ya(R(h,qa(()=>hv()),!0),"$listsQuery",s)});function v(T){return T?new Date(T).toDateString():null}function m(T){return T?new Date(T).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let E=gt(()=>{const T=y(f)?a():null,K=y(h)?i():null;if(!K||!Array.isArray(K))return[];const V={};if(T&&Array.isArray(T))for(const q of T)V[q.listId]||(V[q.listId]=[]),V[q.listId].push(q);const B=[];for(const q of K){const $=q.archivedAt!=null,G=V[q.id]&&V[q.id].length>0;if($||G){const F=V[q.id]||[],Z={};for(const ae of F){const W=v(ae.archivedAt)||"Unknown";Z[W]||(Z[W]=[]),Z[W].push(ae)}B.push({list:q,listArchiveDate:q.archivedAt?v(q.archivedAt):null,tasksByDate:Z,hasTasks:F.length>0})}}return B.sort((q,$)=>{if(q.list.order!==$.list.order)return q.list.order-$.list.order;const G=q.list.name??"Unnamed list",F=$.list.name??"Unnamed list";return G.localeCompare(F)}),B});function _(T){return T.sort((K,V)=>{if(K==="Unknown")return 1;if(V==="Unknown")return-1;const B=new Date(K).getTime();return new Date(V).getTime()-B})}async function w(T){try{(await _v(T)).listRestored&&console.log("Task and its list have been restored")}catch(K){console.error("Error restoring task:",K)}}var x=Zp(),L=He(we(x),2);{var S=T=>{var K=Hp();ce(T,K)},C=T=>{var K=Hn(),V=Pt(K);{var B=$=>{var G=jp();ce($,G)},q=$=>{var G=Hn(),F=Pt(G);{var Z=W=>{var ye=Up();ce(W,ye)},ae=W=>{var ye=Qp();$r(ye,21,()=>y(E),Aa,(ve,pe)=>{const Pe=gt(()=>y(pe).list),Xe=gt(()=>y(Pe).name??"Unnamed list"),rt=gt(()=>y(Pe).archivedAt!=null),ie=gt(()=>y(pe).listArchiveDate);var Re=Xp(),Ae=Pt(Re),$e=we(Ae),Ke=we($e),Ge=we(Ke),Y=He(Ke,2);{var Q=Je=>{var ft=Vp(),wt=He(Pt(ft),2);{var Ve=et=>{var ht=zp(),Et=we(ht);xt(St=>Ir(Et,`- ${St??""}`),[()=>m(y(ie))]),ce(et,ht)};ot(wt,et=>{y(ie)&&et(Ve)})}ce(Je,ft)},fe=Je=>{var ft=Yp();ce(Je,ft)};ot(Y,Je=>{y(rt)?Je(Q):Je(fe,!1)})}var De=He(Ae,2),be=we(De);{var Ze=Je=>{var ft=Wp();ce(Je,ft)},_t=Je=>{var ft=Hn(),wt=Pt(ft);$r(wt,17,()=>_(Object.keys(y(pe).tasksByDate)),Aa,(Ve,et)=>{const ht=gt(()=>y(pe).tasksByDate[y(et)]);var Et=Gp(),St=we(Et),sn=we(St),ue=He(St,2);$r(ue,21,()=>y(ht),Aa,(un,Qt)=>{var kn=qp(),Ne=we(kn),ln=we(Ne),ee=He(Ne,2);wn(ee,{variant:"primary",size:"small",onclick:()=>w(y(Qt).id),children:(me,Ee)=>{var Fe=_n("Restore");ce(me,Fe)},$$slots:{default:!0}}),xt(()=>Ir(ln,y(Qt).text)),ce(un,kn)}),xt(un=>Ir(sn,un),[()=>y(et)==="Unknown"?"Unknown Date":m(y(et))]),ce(Ve,Et)}),ce(Je,ft)};ot(be,Je=>{y(pe).hasTasks?Je(_t,!1):Je(Ze)})}xt(()=>Ir(Ge,y(Xe))),ce(ve,Re)}),ce(W,ye)};ot(F,W=>{y(E).length===0?W(Z):W(ae,!1)},!0)}ce($,G)};ot(V,$=>{!a()||!i()?$(B):$(q,!1)},!0)}ce(T,K)};ot(L,T=>{!y(f)||!y(h)?T(S):T(C,!1)})}xt(()=>zn(x,`width: ${eo}px;`)),ce(t,x),Xn(),l()}var $p=Le('<header class="print:hidden"><div class="flex items-center justify-between py-4"><h1 class="text-grey-110 font-gilda text-[32px] leading-none m-0">MERINI</h1> <!></div></header>');function em(t,e){var i=$p(),a=we(i),s=He(we(a),2);wn(s,{variant:"secondary",size:"medium",get onclick(){return e.onSettingsClick},ariaLabel:"Open settings",children:(l,f)=>{var h=_n("Settings");ce(l,h)},$$slots:{default:!0}}),xt(()=>zn(i,`width: ${eo}px;`)),ce(t,i)}var tm=Le('<div class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 z-40" role="dialog" aria-modal="true" aria-labelledby="settings-flyout-title" tabindex="-1"><div class="fixed right-0 top-0 h-full w-[400px] bg-white shadow-xl z-50 flex flex-col" role="document"><div class="flex items-center justify-between p-6 border-b border-grey-50"><h2 id="settings-flyout-title" class="text-grey-110 font-gilda text-[24px] leading-none m-0">Settings</h2> <button type="button" aria-label="Close settings" class="focus:outline-none focus:ring-2 focus:ring-blue-500 text-grey-110 hover:text-grey-90 text-2xl leading-none w-8 h-8 flex items-center justify-center">Ã</button></div> <div class="flex-1 p-6 overflow-y-auto"><p class="text-grey-110">Settings content will go here.</p></div></div></div>');function nm(t,e){Gn(e,!0);let i=ge(null),a=ge(null);function s(){e.onClose()}function l(S){S.target===S.currentTarget&&s()}function f(S){S.target===S.currentTarget?R(a,S.target,!0):R(a,null),S.stopPropagation(),S.preventDefault()}function h(S){S.target===S.currentTarget&&y(a)===S.currentTarget&&(S.preventDefault(),S.stopPropagation(),s()),R(a,null),S.stopPropagation()}function v(S){S.stopPropagation(),S.preventDefault()}function m(S){return S.preventDefault(),S.stopPropagation(),!1}function E(S){return S.preventDefault(),S.stopPropagation(),!1}function _(S){if(S.key==="Escape")s();else if(S.key==="Tab"){if(!y(i))return;const C=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),T=Array.from(y(i).querySelectorAll(C)).filter($=>!(!($ instanceof HTMLElement)||$.hasAttribute("disabled")||$.getAttribute("aria-hidden")==="true"));if(T.length===0)return;const K=document.activeElement,V=T.indexOf(K);let B;S.shiftKey?V<=0?B=T.length-1:B=V-1:V===-1||V===T.length-1?B=0:B=V+1,S.preventDefault(),S.stopPropagation();const q=T[B];q&&q instanceof HTMLElement&&q.focus()}}We(()=>{e.isOpen&&y(i)&&setTimeout(()=>{const S=y(i)?.querySelector('button[aria-label="Close settings"]');S&&S instanceof HTMLElement&&S.focus()},0)}),We(()=>{if(e.isOpen)return document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}});var w=Hn(),x=Pt(w);{var L=S=>{var C=tm();C.__click=l,C.__mousedown=f,C.__mouseup=h,C.__mousemove=v;var T=we(C);T.__click=B=>B.stopPropagation();var K=we(T),V=He(we(K),2);V.__click=s,Lt(T,B=>R(i,B),()=>y(i)),hr("dragstart",C,m),hr("drag",C,E),ce(S,C)};ot(x,S=>{e.isOpen&&S(L)})}ce(t,w),Xn()}Fr(["click","mousedown","mouseup","mousemove"]);var rm=Le('<main class="min-h-screen flex flex-col items-center justify-start bg-grey-10 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 pt-4 pb-8 svelte-1n46o8q"><!> <div class="flex justify-end print:hidden"><!></div> <div class="bg-grey-10 print:bg-grey-10 border-2 border-grey-50 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-grey-80 pointer-events-none z-0"></div> <div class="absolute inset-[16px] z-10"><!></div></div> <!> <!></main>');function im(t){let e=ge(!1);function i(){R(e,!0)}function a(){R(e,!1)}function s(){window.print()}var l=rm(),f=we(l);em(f,{onSettingsClick:i});var h=He(f,2),v=we(h);wn(v,{variant:"primary",size:"large",onclick:s,children:(L,S)=>{var C=_n("Print");ce(L,C)},$$slots:{default:!0}});var m=He(h,2),E=He(we(m),2),_=we(E);Fp(_,{});var w=He(m,2);Jp(w,{});var x=He(w,2);nm(x,{get isOpen(){return y(e)},onClose:a}),xt(()=>{zn(h,`width: ${eo}px;`),zn(m,`width: ${eo}px; height: ${Pv}px;`)}),ce(t,l)}const am=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],om=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function sm(){try{if(await Me.lists.count()>0)return;await Me.lists.bulkAdd(am),await Me.tasks.bulkAdd(om),console.log("Database seeded with mock data")}catch(t){throw console.error("Error seeding database:",t),t}}(async()=>{await sm().catch(console.error);const t=document.getElementById("app");if(!t){console.error("App element not found!");return}vh(im,{target:t})})();
