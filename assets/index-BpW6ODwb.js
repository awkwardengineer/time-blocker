(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();const gf="production",se=!gf.toLowerCase().startsWith("prod");var Vu=Array.isArray,_f=Array.prototype.indexOf,fs=Array.from,er=Object.defineProperty,_r=Object.getOwnPropertyDescriptor,Wu=Object.getOwnPropertyDescriptors,bf=Object.prototype,wf=Array.prototype,ds=Object.getPrototypeOf,pu=Object.isExtensible;const ma=()=>{};function Ef(e){for(var r=0;r<e.length;r++)e[r]()}function Yu(){var e,r,i=new Promise((s,l)=>{e=s,r=l});return{promise:i,resolve:e,reject:r}}const _t=2,hs=4,vs=8,xf=1<<24,On=16,Cn=32,kr=64,Na=128,ln=512,St=1024,Ut=2048,Ln=4096,qt=8192,An=16384,ps=32768,Hr=65536,ya=1<<17,Zu=1<<18,Xr=1<<19,Tf=1<<20,tr=32768,Uo=1<<21,Ka=1<<22,qn=1<<23,In=Symbol("$state"),kf=Symbol("legacy props"),Df=Symbol(""),qu=Symbol("proxy path"),Fr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Af(){if(se){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function mu(){if(se){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function If(){if(se){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Sf(e){if(se){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Of(){if(se){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Cf(e){if(se){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function Lf(){if(se){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pf(e){if(se){const r=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Rf(e){if(se){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Mf(){if(se){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Nf(){if(se){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Kf(){if(se){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ff(){if(se){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Qu=1,Xu=2,Ju=4,Bf=8,jf=16,zf=1,Gf=2,Hf=4,Uf=8,Vf=16,Wf=1,Yf=2,kt=Symbol(),Zf=Symbol("filename"),qf="http://www.w3.org/1999/xhtml";var $u="font-weight: bold",el="font-weight: normal";function Ro(e){se?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,$u,el):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Qf(){se?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",$u,el):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function tl(e){return e===this.v}function nl(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function rl(e){return!nl(e,this.v)}let Ai=!1,Xf=!1;function Jf(){Ai=!0}function vn(e,r){return e.label=r,il(e.v,r),e}function il(e,r){return e?.[qu]?.(r),e}function $f(e){const r=new Error,i=ed();return i.length===0?null:(i.unshift(`
`),er(r,"stack",{value:i.join(`
`)}),er(r,"name",{value:e}),r)}function ed(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const i=r.split(`
`),s=[];for(let l=0;l<i.length;l++){const c=i[l],h=c.replaceAll("\\","/");if(c.trim()!=="Error"){if(c.includes("validate_each_keys"))return[];h.includes("svelte/src/internal")||h.includes("node_modules/.vite")||s.push(c)}}return s}let ft=null;function Ur(e){ft=e}let _i=null;function ga(e){_i=e}let Ii=null;function yu(e){Ii=e}function ar(e,r=!1,i){ft={p:ft,i:!1,c:null,e:null,s:e,x:null,l:Ai&&!r?{s:null,u:null,$:[]}:null},se&&(ft.function=i,Ii=i)}function or(e){var r=ft,i=r.e;if(i!==null){r.e=null;for(var s of i)gl(s)}return r.i=!0,ft=r.p,se&&(Ii=ft?.function??null),{}}function Si(){return!Ai||ft!==null&&ft.l===null}let gr=[];function al(){var e=gr;gr=[],Ef(e)}function Jr(e){if(gr.length===0&&!mi){var r=gr;queueMicrotask(()=>{r===gr&&al()})}gr.push(e)}function td(){for(;gr.length>0;)al()}const Vo=new WeakMap;function ol(e){var r=Ne;if(r===null)return Me.f|=qn,e;if(se&&e instanceof Error&&!Vo.has(e)&&Vo.set(e,nd(e,r)),(r.f&ps)===0){if((r.f&Na)===0)throw se&&!r.parent&&e instanceof Error&&sl(e),e;r.b.error(e)}else Vr(e,r)}function Vr(e,r){for(;r!==null;){if((r.f&Na)!==0)try{r.b.error(e);return}catch(i){e=i}r=r.parent}throw se&&e instanceof Error&&sl(e),e}function nd(e,r){const i=_r(e,"message");if(!(i&&!i.configurable)){for(var s=_s?"  ":"	",l=`
${s}in ${r.fn?.name||"<unknown>"}`,c=r.ctx;c!==null;)l+=`
${s}in ${c.function?.[Zf].split("/").pop()}`,c=c.p;return{message:e.message+`
${l}
`,stack:e.stack?.split(`
`).filter(h=>!h.includes("svelte/src/internal")).join(`
`)}}}function sl(e){const r=Vo.get(e);r&&(er(e,"message",{value:r.message}),er(e,"stack",{value:r.stack}))}const sa=new Set;let Be=null,fa=null,tn=null,$t=[],Fa=null,Wo=!1,mi=!1;class _n{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){$t=[],fa=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of r)this.#o(s,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(fa=this,Be=null,gu(i.render_effects),gu(i.effects),fa=null,this.#u?.resolve()),tn=null}#o(r,i){r.f^=St;for(var s=r.first;s!==null;){var l=s.f,c=(l&(Cn|kr))!==0,h=c&&(l&St)!==0,m=h||(l&qt)!==0||this.skipped_effects.has(s);if((s.f&Na)!==0&&s.b?.is_pending()&&(i={parent:i,effect:s,effects:[],render_effects:[],block_effects:[]}),!m&&s.fn!==null){c?s.f^=St:(l&hs)!==0?i.effects.push(s):Ci(s)&&((s.f&On)!==0&&i.block_effects.push(s),Ei(s));var g=s.first;if(g!==null){s=g;continue}}var E=s.parent;for(s=s.next;s===null&&E!==null;)E===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),s=E.next,E=E.parent}}#s(r){for(const i of r)((i.f&Ut)!==0?this.#a:this.#i).push(i),this.#l(i.deps),Ot(i,St)}#l(r){if(r!==null)for(const i of r)(i.f&_t)===0||(i.f&tr)===0||(i.f^=tr,this.#l(i.deps))}capture(r,i){this.previous.has(r)||this.previous.set(r,i),(r.f&qn)===0&&(this.current.set(r,r.v),tn?.set(r,r.v))}activate(){Be=this,this.apply()}deactivate(){Be===this&&(Be=null,tn=null)}flush(){if(this.activate(),$t.length>0){if(ul(),Be!==null&&Be!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(sa.size>1){this.previous.clear();var r=tn,i=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of sa){if(c===this){i=!1;continue}const h=[];for(const[g,E]of this.current){if(c.current.has(g))if(i&&E!==c.current.get(g))c.current.set(g,E);else continue;h.push(g)}if(h.length===0)continue;const m=[...c.current.keys()].filter(g=>!this.current.has(g));if(m.length>0){var l=$t;$t=[];const g=new Set,E=new Map;for(const w of h)ll(w,m,g,E);if($t.length>0){Be=c,c.apply();for(const w of $t)c.#o(w,s);c.deactivate()}$t=l}}Be=null,tn=r}this.committed=!0,sa.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)Ot(r,Ut),xr(r);for(const r of this.#i)Ot(r,Ln),xr(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=Yu()).promise}static ensure(){if(Be===null){const r=Be=new _n;sa.add(Be),mi||_n.enqueue(()=>{Be===r&&r.flush()})}return Be}static enqueue(r){Jr(r)}apply(){}}function rd(e){var r=mi;mi=!0;try{for(var i;;){if(td(),$t.length===0&&(Be?.flush(),$t.length===0))return Fa=null,i;ul()}}finally{mi=r}}function ul(){var e=Xn;Wo=!0;var r=se?new Set:null;try{var i=0;for(wa(!0);$t.length>0;){var s=_n.ensure();if(i++>1e3){if(se){var l=new Map;for(const h of s.current.keys())for(const[m,g]of h.updated??[]){var c=l.get(m);c||(c={error:g.error,count:0},l.set(m,c)),c.count+=g.count}for(const h of l.values())h.error&&console.error(h.error)}id()}if(s.process($t),Qn.clear(),se)for(const h of s.current.keys())r.add(h)}}finally{if(Wo=!1,wa(e),Fa=null,se)for(const h of r)h.updated=null}}function id(){try{Lf()}catch(e){se&&er(e,"stack",{value:""}),Vr(e,Fa)}}let kn=null;function gu(e){var r=e.length;if(r!==0){for(var i=0;i<r;){var s=e[i++];if((s.f&(An|qt))===0&&Ci(s)&&(kn=new Set,Ei(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?El(s):s.fn=null),kn?.size>0)){Qn.clear();for(const l of kn){if((l.f&(An|qt))!==0)continue;const c=[l];let h=l.parent;for(;h!==null;)kn.has(h)&&(kn.delete(h),c.push(h)),h=h.parent;for(let m=c.length-1;m>=0;m--){const g=c[m];(g.f&(An|qt))===0&&Ei(g)}}kn.clear()}}kn=null}}function ll(e,r,i,s){if(!i.has(e)&&(i.add(e),e.reactions!==null))for(const l of e.reactions){const c=l.f;(c&_t)!==0?ll(l,r,i,s):(c&(Ka|On))!==0&&(c&Ut)===0&&cl(l,r,s)&&(Ot(l,Ut),xr(l))}}function cl(e,r,i){const s=i.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const l of e.deps){if(r.includes(l))return!0;if((l.f&_t)!==0&&cl(l,r,i))return i.set(l,!0),!0}return i.set(e,!1),!1}function xr(e){for(var r=Fa=e;r.parent!==null;){r=r.parent;var i=r.f;if(Wo&&r===Ne&&(i&On)!==0&&(i&Zu)===0)return;if((i&(kr|Cn))!==0){if((i&St)===0)return;r.f^=St}}$t.push(r)}function ad(e){let r=0,i=Tr(0),s;return se&&vn(i,"createSubscriber version"),()=>{bi()&&(p(i),za(()=>(r===0&&(s=wn(()=>e(()=>yi(i)))),r+=1,()=>{Jr(()=>{r-=1,r===0&&(s?.(),s=void 0,yi(i))})})))}}var od=Hr|Xr|Na;function sd(e,r,i){new ud(e,r,i)}class ud{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#_=ad(()=>(this.#d=Tr(this.#f),se&&vn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,i,s){this.#t=r,this.#n=i,this.#u=s,this.parent=Ne.b,this.#e=!!this.#n.pending,this.#a=ws(()=>{Ne.b=this;{var l=this.#y();try{this.#i=en(()=>s(l))}catch(c){this.error(c)}this.#h>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},od)}#b(){try{this.#i=en(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=en(()=>r(this.#t)),_n.enqueue(()=>{var i=this.#y();this.#i=this.#p(()=>(_n.ensure(),en(()=>this.#u(i)))),this.#h>0?this.#m():(jr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#y(){var r=this.#t;return this.#e&&(this.#c=nr(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var i=Ne,s=Me,l=ft;un(this.#a),zt(this.#a),Ur(this.#a.ctx);try{return r()}catch(c){return ol(c),null}finally{un(i),zt(s),Ur(l)}}#m(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),kl(this.#i,this.#l)),this.#o===null&&(this.#o=en(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#e=!1,this.#o&&jr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&Yr(this.#d,this.#f)}get_effect_pending(){return this.#_(),p(this.#d)}error(r){var i=this.#n.onerror;let s=this.#n.failed;if(this.#v||!i&&!s)throw r;this.#i&&(Gt(this.#i),this.#i=null),this.#o&&(Gt(this.#o),this.#o=null),this.#s&&(Gt(this.#s),this.#s=null);var l=!1,c=!1;const h=()=>{if(l){Qf();return}l=!0,c&&Ff(),_n.ensure(),this.#f=0,this.#s!==null&&jr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,en(()=>this.#u(this.#t)))),this.#h>0?this.#m():this.#e=!1};var m=Me;try{zt(null),c=!0,i?.(r,h),c=!1}catch(g){Vr(g,this.#a&&this.#a.parent)}finally{zt(m)}s&&Jr(()=>{this.#s=this.#p(()=>{_n.ensure(),this.#v=!0;try{return en(()=>{s(this.#t,()=>r,()=>h)})}catch(g){return Vr(g,this.#a.parent),null}finally{this.#v=!1}})})}}function da(e,r){return r}function ld(e,r,i){for(var s=[],l=r.length,c=0;c<l;c++)Es(r[c].e,s,!0);xl(s,()=>{var h=s.length===0&&i!==null;if(h){var m=i,g=m.parentNode;xd(g),g.append(m),e.items.clear(),pn(e,r[0].prev,r[l-1].next)}for(var E=0;E<l;E++){var w=r[E];h||(e.items.delete(w.k),pn(e,w.prev,w.next)),Gt(w.e,!h)}e.first===r[0]&&(e.first=r[0].prev)})}function br(e,r,i,s,l,c=null){var h=e,m=new Map,g=null,E=(r&Ju)!==0,w=(r&Qu)!==0,I=(r&Xu)!==0;if(E){var _=e;h=_.appendChild(nr())}var T=null,P=ms(()=>{var N=i();return Vu(N)?N:N==null?[]:fs(N)}),C,O=!0;function L(){cd(Y,C,h,r,s),T!==null&&(C.length===0?(T.fragment?(h.before(T.fragment),T.fragment=null):xs(T.effect),H.first=T.effect):jr(T.effect,()=>{T=null}))}var H=ws(()=>{C=p(P);for(var N=C.length,X=new Set,ee=Be,le=null,he=yl(),re=0;re<N;re+=1){var ve=C[re],ge=s(ve,re),_e=O?null:m.get(ge);_e?(w&&Yr(_e.v,ve),I?Yr(_e.i,re):_e.i=re,he&&ee.skipped_effects.delete(_e.e)):(_e=fd(O?h:null,le,ve,ge,re,l,r,i),O&&(_e.o=!0,le===null?g=_e:le.next=_e,le=_e),m.set(ge,_e)),X.add(ge)}if(N===0&&c&&!T)if(O)T={fragment:null,effect:en(()=>c(h))};else{var Xe=document.createDocumentFragment(),je=nr();Xe.append(je),T={fragment:Xe,effect:en(()=>c(je))}}if(!O)if(he){for(const[ot,ut]of m)X.has(ot)||ee.skipped_effects.add(ut.e);ee.oncommit(L),ee.ondiscard(()=>{})}else L();p(P)}),Y={effect:H,items:m,first:g};O=!1}function cd(e,r,i,s,l){var c=(s&Bf)!==0,h=r.length,m=e.items,g=e.first,E,w=null,I,_=[],T=[],P,C,O,L;if(c)for(L=0;L<h;L+=1)P=r[L],C=l(P,L),O=m.get(C),O.o&&(O.a?.measure(),(I??=new Set).add(O));for(L=0;L<h;L+=1){if(P=r[L],C=l(P,L),O=m.get(C),e.first??=O,!O.o){O.o=!0;var H=w?w.next:g;pn(e,w,O),pn(e,O,H),Mo(O,H,i),w=O,_=[],T=[],g=w.next;continue}if((O.e.f&qt)!==0&&(xs(O.e),c&&(O.a?.unfix(),(I??=new Set).delete(O))),O!==g){if(E!==void 0&&E.has(O)){if(_.length<T.length){var Y=T[0],N;w=Y.prev;var X=_[0],ee=_[_.length-1];for(N=0;N<_.length;N+=1)Mo(_[N],Y,i);for(N=0;N<T.length;N+=1)E.delete(T[N]);pn(e,X.prev,ee.next),pn(e,w,X),pn(e,ee,Y),g=Y,w=ee,L-=1,_=[],T=[]}else E.delete(O),Mo(O,g,i),pn(e,O.prev,O.next),pn(e,O,w===null?e.first:w.next),pn(e,w,O),w=O;continue}for(_=[],T=[];g!==null&&g.k!==C;)(g.e.f&qt)===0&&(E??=new Set).add(g),T.push(g),g=g.next;if(g===null)continue;O=g}_.push(O),w=O,g=O.next}if(g!==null||E!==void 0){for(var le=E===void 0?[]:fs(E);g!==null;)(g.e.f&qt)===0&&le.push(g),g=g.next;var he=le.length;if(he>0){var re=(s&Ju)!==0&&h===0?i:null;if(c){for(L=0;L<he;L+=1)le[L].a?.measure();for(L=0;L<he;L+=1)le[L].a?.fix()}ld(e,le,re)}}c&&Jr(()=>{if(I!==void 0)for(O of I)O.a?.apply()})}function fd(e,r,i,s,l,c,h,m){var g=(h&Qu)!==0,E=(h&jf)===0,w=g?E?dl(i,!1,!1):Tr(i):i,I=(h&Xu)===0?l:Tr(l);se&&g&&(w.trace=()=>{var P=typeof I=="number"?l:I.v;m()[P]});var _={i:I,v:w,k:s,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var T=document.createDocumentFragment();T.append(e=nr())}return _.e=en(()=>c(e,w,I,m)),r!==null&&(r.next=_),_}finally{}}function Mo(e,r,i){for(var s=e.next?e.next.e.nodes_start:i,l=r?r.e.nodes_start:i,c=e.e.nodes_start;c!==null&&c!==s;){var h=Oi(c);l.before(c),c=h}}function pn(e,r,i){r===null?(e.first=i,e.effect.first=i&&i.e):(r.e===e.effect.last&&i!==null&&(e.effect.last=i.e),r.e.next&&(r.e.next.prev=null),r.next=i,r.e.next=i&&i.e),i===null?e.effect.last=r&&r.e:(i.e===e.effect.last&&r===null&&(e.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=r,i.e.prev=r&&r.e)}function dd(e,r,i,s){const l=Si()?Ba:ms;if(i.length===0&&e.length===0){s(r.map(l));return}var c=Be,h=Ne,m=hd();function g(){Promise.all(i.map(E=>pd(E))).then(E=>{m();try{s([...r.map(l),...E])}catch(w){(h.f&An)===0&&Vr(w,h)}c?.deactivate(),_a()}).catch(E=>{Vr(E,h)})}e.length>0?Promise.all(e).then(()=>{m();try{return g()}finally{c?.deactivate(),_a()}}):g()}function hd(){var e=Ne,r=Me,i=ft,s=Be;if(se)var l=_i;return function(h=!0){un(e),zt(r),Ur(i),h&&s?.activate(),se&&ga(l)}}function _a(){un(null),zt(null),Ur(null),se&&ga(null)}const vd=new Set;function Ba(e){var r=_t|Ut,i=Me!==null&&(Me.f&_t)!==0?Me:null;return Ne!==null&&(Ne.f|=Xr),{ctx:ft,deps:null,effects:null,equals:tl,f:r,fn:e,reactions:null,rv:0,v:kt,wv:0,parent:i??Ne,ac:null}}function pd(e,r){let i=Ne;i===null&&Af();var s=i.b,l=void 0,c=Tr(kt),h=!Me,m=new Map;return Sd(()=>{var g=Yu();l=g.promise;try{Promise.resolve(e()).then(g.resolve,g.reject).then(()=>{E===Be&&E.committed&&E.deactivate(),_a()})}catch(_){g.reject(_),_a()}var E=Be;if(h){var w=!s.is_pending();s.update_pending_count(1),E.increment(w),m.get(E)?.reject(Fr),m.delete(E),m.set(E,g)}const I=(_,T=void 0)=>{if(E.activate(),T)T!==Fr&&(c.f|=qn,Yr(c,T));else{(c.f&qn)!==0&&(c.f^=qn),Yr(c,_);for(const[P,C]of m){if(m.delete(P),P===E)break;C.reject(Fr)}}h&&(s.update_pending_count(-1),E.decrement(w))};g.promise.then(I,_=>I(null,_||"unknown"))}),bs(()=>{for(const g of m.values())g.reject(Fr)}),se&&(c.f|=Ka),new Promise(g=>{function E(w){function I(){w===l?g(c):E(l)}w.then(I,I)}E(l)})}function At(e){const r=Ba(e);return Dl(r),r}function ms(e){const r=Ba(e);return r.equals=rl,r}function Yo(e){var r=e.effects;if(r!==null){e.effects=null;for(var i=0;i<r.length;i+=1)Gt(r[i])}}let No=[];function md(e){for(var r=e.parent;r!==null;){if((r.f&_t)===0)return(r.f&An)===0?r:null;r=r.parent}return null}function ys(e){var r,i=Ne;if(un(md(e)),se){let s=Wr;_u(new Set);try{No.includes(e)&&If(),No.push(e),e.f&=~tr,Yo(e),r=Zo(e)}finally{un(i),_u(s),No.pop()}}else try{e.f&=~tr,Yo(e),r=Zo(e)}finally{un(i)}return r}function fl(e){var r=ys(e);if(e.equals(r)||(Be?.is_fork||(e.v=r),e.wv=Il()),!Dr)if(tn!==null)(bi()||Be?.is_fork)&&tn.set(e,r);else{var i=(e.f&ln)===0?Ln:St;Ot(e,i)}}let Wr=new Set;const Qn=new Map;function _u(e){Wr=e}let gs=!1;function yd(){gs=!0}function Tr(e,r){var i={f:0,v:e,reactions:null,equals:tl,rv:0,wv:0};return i}function pe(e,r){const i=Tr(e);return Dl(i),i}function dl(e,r=!1,i=!0){const s=Tr(e);return r||(s.equals=rl),Ai&&i&&ft!==null&&ft.l!==null&&(ft.l.s??=[]).push(s),s}function A(e,r,i=!1){Me!==null&&(!bn||(Me.f&ya)!==0)&&Si()&&(Me.f&(_t|On|Ka|ya))!==0&&!Sn?.includes(e)&&Kf();let s=i?Yt(r):r;return se&&il(s,e.label),Yr(e,s)}function Yr(e,r){if(!e.equals(r)){var i=e.v;Dr?Qn.set(e,r):Qn.set(e,i),e.v=r;var s=_n.ensure();if(s.capture(e,i),se){if(Ne!==null){e.updated??=new Map;const l=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:l}),l>5){const c=$f("updated at");if(c!==null){let h=e.updated.get(c.stack);h||(h={error:c,count:0},e.updated.set(c.stack,h)),h.count++}}}Ne!==null&&(e.set_during_effect=!0)}(e.f&_t)!==0&&((e.f&Ut)!==0&&ys(e),Ot(e,(e.f&ln)!==0?St:Ln)),e.wv=Il(),vl(e,Ut),Si()&&Ne!==null&&(Ne.f&St)!==0&&(Ne.f&(Cn|kr))===0&&(Xt===null?Ld([e]):Xt.push(e)),!s.is_fork&&Wr.size>0&&!gs&&hl()}return r}function hl(){gs=!1;var e=Xn;wa(!0);const r=Array.from(Wr);try{for(const i of r)(i.f&St)!==0&&Ot(i,Ln),Ci(i)&&Ei(i)}finally{wa(e)}Wr.clear()}function yi(e){A(e,e.v+1)}function vl(e,r){var i=e.reactions;if(i!==null)for(var s=Si(),l=i.length,c=0;c<l;c++){var h=i[c],m=h.f;if(!(!s&&h===Ne)){if(se&&(m&ya)!==0){Wr.add(h);continue}var g=(m&Ut)===0;if(g&&Ot(h,r),(m&_t)!==0){var E=h;tn?.delete(E),(m&tr)===0&&(m&ln&&(h.f|=tr),vl(E,Ln))}else g&&((m&On)!==0&&kn!==null&&kn.add(h),xr(h))}}}const gd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Yt(e){if(typeof e!="object"||e===null||In in e)return e;const r=ds(e);if(r!==bf&&r!==wf)return e;var i=new Map,s=Vu(e),l=pe(0),c=wr,h=w=>{if(wr===c)return w();var I=Me,_=wr;zt(null),xu(c);var T=w();return zt(I),xu(_),T};s&&(i.set("length",pe(e.length)),se&&(e=bd(e)));var m="";let g=!1;function E(w){if(!g){g=!0,m=w,vn(l,`${m} version`);for(const[I,_]of i)vn(_,pr(m,I));g=!1}}return new Proxy(e,{defineProperty(w,I,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Mf();var T=i.get(I);return T===void 0?T=h(()=>{var P=pe(_.value);return i.set(I,P),se&&typeof I=="string"&&vn(P,pr(m,I)),P}):A(T,_.value,!0),!0},deleteProperty(w,I){var _=i.get(I);if(_===void 0){if(I in w){const T=h(()=>pe(kt));i.set(I,T),yi(l),se&&vn(T,pr(m,I))}}else A(_,kt),yi(l);return!0},get(w,I,_){if(I===In)return e;if(se&&I===qu)return E;var T=i.get(I),P=I in w;if(T===void 0&&(!P||_r(w,I)?.writable)&&(T=h(()=>{var O=Yt(P?w[I]:kt),L=pe(O);return se&&vn(L,pr(m,I)),L}),i.set(I,T)),T!==void 0){var C=p(T);return C===kt?void 0:C}return Reflect.get(w,I,_)},getOwnPropertyDescriptor(w,I){var _=Reflect.getOwnPropertyDescriptor(w,I);if(_&&"value"in _){var T=i.get(I);T&&(_.value=p(T))}else if(_===void 0){var P=i.get(I),C=P?.v;if(P!==void 0&&C!==kt)return{enumerable:!0,configurable:!0,value:C,writable:!0}}return _},has(w,I){if(I===In)return!0;var _=i.get(I),T=_!==void 0&&_.v!==kt||Reflect.has(w,I);if(_!==void 0||Ne!==null&&(!T||_r(w,I)?.writable)){_===void 0&&(_=h(()=>{var C=T?Yt(w[I]):kt,O=pe(C);return se&&vn(O,pr(m,I)),O}),i.set(I,_));var P=p(_);if(P===kt)return!1}return T},set(w,I,_,T){var P=i.get(I),C=I in w;if(s&&I==="length")for(var O=_;O<P.v;O+=1){var L=i.get(O+"");L!==void 0?A(L,kt):O in w&&(L=h(()=>pe(kt)),i.set(O+"",L),se&&vn(L,pr(m,O)))}if(P===void 0)(!C||_r(w,I)?.writable)&&(P=h(()=>pe(void 0)),se&&vn(P,pr(m,I)),A(P,Yt(_)),i.set(I,P));else{C=P.v!==kt;var H=h(()=>Yt(_));A(P,H)}var Y=Reflect.getOwnPropertyDescriptor(w,I);if(Y?.set&&Y.set.call(T,_),!C){if(s&&typeof I=="string"){var N=i.get("length"),X=Number(I);Number.isInteger(X)&&X>=N.v&&A(N,X+1)}yi(l)}return!0},ownKeys(w){p(l);var I=Reflect.ownKeys(w).filter(P=>{var C=i.get(P);return C===void 0||C.v!==kt});for(var[_,T]of i)T.v!==kt&&!(_ in w)&&I.push(_);return I},setPrototypeOf(){Nf()}})}function pr(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:gd.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function Ko(e){try{if(e!==null&&typeof e=="object"&&In in e)return e[In]}catch{}return e}const _d=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function bd(e){return new Proxy(e,{get(r,i,s){var l=Reflect.get(r,i,s);return _d.has(i)?function(...c){yd();var h=l.apply(this,c);return hl(),h}:l}})}function wd(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:i,lastIndexOf:s,includes:l}=e;e.indexOf=function(c,h){const m=i.call(this,c,h);if(m===-1){for(let g=h??0;g<this.length;g+=1)if(Ko(this[g])===c){Ro("array.indexOf(...)");break}}return m},e.lastIndexOf=function(c,h){const m=s.call(this,c,h??this.length-1);if(m===-1){for(let g=0;g<=(h??this.length-1);g+=1)if(Ko(this[g])===c){Ro("array.lastIndexOf(...)");break}}return m},e.includes=function(c,h){const m=l.call(this,c,h);if(!m){for(let g=0;g<this.length;g+=1)if(Ko(this[g])===c){Ro("array.includes(...)");break}}return m},Array.__svelte_cleanup=()=>{e.indexOf=i,e.lastIndexOf=s,e.includes=l}}var bu,_s,pl,ml;function Ed(){if(bu===void 0){bu=window,_s=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,i=Text.prototype;pl=_r(r,"firstChild").get,ml=_r(r,"nextSibling").get,pu(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),pu(i)&&(i.__t=void 0),se&&(e.__svelte_meta=null,wd())}}function nr(e=""){return document.createTextNode(e)}function ba(e){return pl.call(e)}function Oi(e){return ml.call(e)}function xe(e,r){return ba(e)}function gt(e,r=!1){{var i=ba(e);return i instanceof Comment&&i.data===""?Oi(i):i}}function Oe(e,r=1,i=!1){let s=e;for(;r--;)s=Oi(s);return s}function xd(e){e.textContent=""}function yl(){return!1}let wu=!1;function Td(){wu||(wu=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function ja(e){var r=Me,i=Ne;zt(null),un(null);try{return e()}finally{zt(r),un(i)}}function kd(e,r,i,s=i){e.addEventListener(r,()=>ja(i));const l=e.__on_r;l?e.__on_r=()=>{l(),s(!0)}:e.__on_r=()=>s(!0),Td()}function Dd(e){Ne===null&&(Me===null&&Cf(e),Of()),Dr&&Sf(e)}function Ad(e,r){var i=r.last;i===null?r.last=r.first=e:(i.next=e,e.prev=i,r.last=e)}function Pn(e,r,i){var s=Ne;if(se)for(;s!==null&&(s.f&ya)!==0;)s=s.parent;s!==null&&(s.f&qt)!==0&&(e|=qt);var l={ctx:ft,deps:null,nodes_start:null,nodes_end:null,f:e|Ut|ln,first:null,fn:r,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(se&&(l.component_function=Ii),i)try{Ei(l),l.f|=ps}catch(m){throw Gt(l),m}else r!==null&&xr(l);var c=l;if(i&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&Xr)===0&&(c=c.first,(e&On)!==0&&(e&Hr)!==0&&c!==null&&(c.f|=Hr)),c!==null&&(c.parent=s,s!==null&&Ad(c,s),Me!==null&&(Me.f&_t)!==0&&(e&kr)===0)){var h=Me;(h.effects??=[]).push(c)}return l}function bi(){return Me!==null&&!bn}function bs(e){const r=Pn(vs,null,!1);return Ot(r,St),r.teardown=e,r}function $e(e){Dd("$effect"),se&&er(e,"name",{value:"$effect"});var r=Ne.f,i=!Me&&(r&Cn)!==0&&(r&ps)===0;if(i){var s=ft;(s.e??=[]).push(e)}else return gl(e)}function gl(e){return Pn(hs|Tf,e,!1)}function Id(e){_n.ensure();const r=Pn(kr|Xr,e,!0);return(i={})=>new Promise(s=>{i.outro?jr(r,()=>{Gt(r),s(void 0)}):(Gt(r),s(void 0))})}function _l(e){return Pn(hs,e,!1)}function Sd(e){return Pn(Ka|Xr,e,!0)}function za(e,r=0){return Pn(vs|r,e,!0)}function tt(e,r=[],i=[],s=[]){dd(s,r,i,l=>{Pn(vs,()=>e(...l.map(p)),!0)})}function ws(e,r=0){var i=Pn(On|r,e,!0);return se&&(i.dev_stack=_i),i}function en(e){return Pn(Cn|Xr,e,!0)}function bl(e){var r=e.teardown;if(r!==null){const i=Dr,s=Me;Eu(!0),zt(null);try{r.call(null)}finally{Eu(i),zt(s)}}}function wl(e,r=!1){var i=e.first;for(e.first=e.last=null;i!==null;){const l=i.ac;l!==null&&ja(()=>{l.abort(Fr)});var s=i.next;(i.f&kr)!==0?i.parent=null:Gt(i,r),i=s}}function Od(e){for(var r=e.first;r!==null;){var i=r.next;(r.f&Cn)===0&&Gt(r),r=i}}function Gt(e,r=!0){var i=!1;(r||(e.f&Zu)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Cd(e.nodes_start,e.nodes_end),i=!0),wl(e,r&&!i),Ea(e,0),Ot(e,An);var s=e.transitions;if(s!==null)for(const c of s)c.stop();bl(e);var l=e.parent;l!==null&&l.first!==null&&El(e),se&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Cd(e,r){for(;e!==null;){var i=e===r?null:Oi(e);e.remove(),e=i}}function El(e){var r=e.parent,i=e.prev,s=e.next;i!==null&&(i.next=s),s!==null&&(s.prev=i),r!==null&&(r.first===e&&(r.first=s),r.last===e&&(r.last=i))}function jr(e,r,i=!0){var s=[];Es(e,s,!0),xl(s,()=>{i&&Gt(e),r&&r()})}function xl(e,r){var i=e.length;if(i>0){var s=()=>--i||r();for(var l of e)l.out(s)}else r()}function Es(e,r,i){if((e.f&qt)===0){if(e.f^=qt,e.transitions!==null)for(const h of e.transitions)(h.is_global||i)&&r.push(h);for(var s=e.first;s!==null;){var l=s.next,c=(s.f&Hr)!==0||(s.f&Cn)!==0&&(e.f&On)!==0;Es(s,r,c?i:!1),s=l}}}function xs(e){Tl(e,!0)}function Tl(e,r){if((e.f&qt)!==0){e.f^=qt,(e.f&St)===0&&(Ot(e,Ut),xr(e));for(var i=e.first;i!==null;){var s=i.next,l=(i.f&Hr)!==0||(i.f&Cn)!==0;Tl(i,l?r:!1),i=s}if(e.transitions!==null)for(const c of e.transitions)(c.is_global||r)&&c.in()}}function kl(e,r){for(var i=e.nodes_start,s=e.nodes_end;i!==null;){var l=i===s?null:Oi(i);r.append(i),i=l}}let Xn=!1;function wa(e){Xn=e}let Dr=!1;function Eu(e){Dr=e}let Me=null,bn=!1;function zt(e){Me=e}let Ne=null;function un(e){Ne=e}let Sn=null;function Dl(e){Me!==null&&(Sn===null?Sn=[e]:Sn.push(e))}let Lt=null,Wt=0,Xt=null;function Ld(e){Xt=e}let Al=1,wi=0,wr=wi;function xu(e){wr=e}function Il(){return++Al}function Ci(e){var r=e.f;if((r&Ut)!==0)return!0;if(r&_t&&(e.f&=~tr),(r&Ln)!==0){var i=e.deps;if(i!==null)for(var s=i.length,l=0;l<s;l++){var c=i[l];if(Ci(c)&&fl(c),c.wv>e.wv)return!0}(r&ln)!==0&&tn===null&&Ot(e,St)}return!1}function Sl(e,r,i=!0){var s=e.reactions;if(s!==null&&!Sn?.includes(e))for(var l=0;l<s.length;l++){var c=s[l];(c.f&_t)!==0?Sl(c,r,!1):r===c&&(i?Ot(c,Ut):(c.f&St)!==0&&Ot(c,Ln),xr(c))}}function Zo(e){var r=Lt,i=Wt,s=Xt,l=Me,c=Sn,h=ft,m=bn,g=wr,E=e.f;Lt=null,Wt=0,Xt=null,Me=(E&(Cn|kr))===0?e:null,Sn=null,Ur(e.ctx),bn=!1,wr=++wi,e.ac!==null&&(ja(()=>{e.ac.abort(Fr)}),e.ac=null);try{e.f|=Uo;var w=e.fn,I=w(),_=e.deps;if(Lt!==null){var T;if(Ea(e,Wt),_!==null&&Wt>0)for(_.length=Wt+Lt.length,T=0;T<Lt.length;T++)_[Wt+T]=Lt[T];else e.deps=_=Lt;if(Xn&&bi()&&(e.f&ln)!==0)for(T=Wt;T<_.length;T++)(_[T].reactions??=[]).push(e)}else _!==null&&Wt<_.length&&(Ea(e,Wt),_.length=Wt);if(Si()&&Xt!==null&&!bn&&_!==null&&(e.f&(_t|Ln|Ut))===0)for(T=0;T<Xt.length;T++)Sl(Xt[T],e);return l!==null&&l!==e&&(wi++,Xt!==null&&(s===null?s=Xt:s.push(...Xt))),(e.f&qn)!==0&&(e.f^=qn),I}catch(P){return ol(P)}finally{e.f^=Uo,Lt=r,Wt=i,Xt=s,Me=l,Sn=c,Ur(h),bn=m,wr=g}}function Pd(e,r){let i=r.reactions;if(i!==null){var s=_f.call(i,e);if(s!==-1){var l=i.length-1;l===0?i=r.reactions=null:(i[s]=i[l],i.pop())}}i===null&&(r.f&_t)!==0&&(Lt===null||!Lt.includes(r))&&(Ot(r,Ln),(r.f&ln)!==0&&(r.f^=ln,r.f&=~tr),Yo(r),Ea(r,0))}function Ea(e,r){var i=e.deps;if(i!==null)for(var s=r;s<i.length;s++)Pd(e,i[s])}function Ei(e){var r=e.f;if((r&An)===0){Ot(e,St);var i=Ne,s=Xn;if(Ne=e,Xn=!0,se){var l=Ii;yu(e.component_function);var c=_i;ga(e.dev_stack??_i)}try{(r&(On|xf))!==0?Od(e):wl(e),bl(e);var h=Zo(e);e.teardown=typeof h=="function"?h:null,e.wv=Al;var m;se&&Xf&&(e.f&Ut)!==0&&e.deps}finally{Xn=s,Ne=i,se&&(yu(l),ga(c))}}}async function Wn(){await Promise.resolve(),rd()}function p(e){var r=e.f,i=(r&_t)!==0;if(Me!==null&&!bn){var s=Ne!==null&&(Ne.f&An)!==0;if(!s&&!Sn?.includes(e)){var l=Me.deps;if((Me.f&Uo)!==0)e.rv<wi&&(e.rv=wi,Lt===null&&l!==null&&l[Wt]===e?Wt++:Lt===null?Lt=[e]:Lt.includes(e)||Lt.push(e));else{(Me.deps??=[]).push(e);var c=e.reactions;c===null?e.reactions=[Me]:c.includes(Me)||c.push(Me)}}}if(se&&vd.delete(e),Dr){if(Qn.has(e))return Qn.get(e);if(i){var h=e,m=h.v;return((h.f&St)===0&&h.reactions!==null||Cl(h))&&(m=ys(h)),Qn.set(h,m),m}}else i&&(!tn?.has(e)||Be?.is_fork&&!bi())&&(h=e,Ci(h)&&fl(h),Xn&&bi()&&(h.f&ln)===0&&Ol(h));if(tn?.has(e))return tn.get(e);if((e.f&qn)!==0)throw e.v;return e.v}function Ol(e){if(e.deps!==null){e.f^=ln;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&_t)!==0&&(r.f&ln)===0&&Ol(r)}}function Cl(e){if(e.v===kt)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(Qn.has(r)||(r.f&_t)!==0&&Cl(r))return!0;return!1}function wn(e){var r=bn;try{return bn=!0,e()}finally{bn=r}}const Rd=-7169;function Ot(e,r){e.f=e.f&Rd|r}function Md(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(In in e)qo(e);else if(!Array.isArray(e))for(let r in e){const i=e[r];typeof i=="object"&&i&&In in i&&qo(i)}}}function qo(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let s in e)try{qo(e[s],r)}catch{}const i=ds(e);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const s=Wu(i);for(let l in s){const c=s[l].get;if(c)try{c.call(e)}catch{}}}}}const Nd=["touchstart","touchmove"];function Kd(e){return Nd.includes(e)}const Ll=new Set,Qo=new Set;function Fd(e,r,i,s={}){function l(c){if(s.capture||vi.call(r,c),!c.cancelBubble)return ja(()=>i?.call(this,c))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Jr(()=>{r.addEventListener(e,l,s)}):r.addEventListener(e,l,s),l}function Dn(e,r,i,s,l){var c={capture:s,passive:l},h=Fd(e,r,i,c);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&bs(()=>{r.removeEventListener(e,h,c)})}function Ar(e){for(var r=0;r<e.length;r++)Ll.add(e[r]);for(var i of Qo)i(e)}let Tu=null;function vi(e){var r=this,i=r.ownerDocument,s=e.type,l=e.composedPath?.()||[],c=l[0]||e.target;Tu=e;var h=0,m=Tu===e&&e.__root;if(m){var g=l.indexOf(m);if(g!==-1&&(r===document||r===window)){e.__root=r;return}var E=l.indexOf(r);if(E===-1)return;g<=E&&(h=g)}if(c=l[h]||e.target,c!==r){er(e,"currentTarget",{configurable:!0,get(){return c||i}});var w=Me,I=Ne;zt(null),un(null);try{for(var _,T=[];c!==null;){var P=c.assignedSlot||c.parentNode||c.host||null;try{var C=c["__"+s];C!=null&&(!c.disabled||e.target===c)&&C.call(c,e)}catch(O){_?T.push(O):_=O}if(e.cancelBubble||P===r||P===null)break;c=P}if(_){for(let O of T)queueMicrotask(()=>{throw O});throw _}}finally{e.__root=r,delete e.currentTarget,zt(w),un(I)}}}function Bd(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function Xo(e,r){var i=Ne;i.nodes_start===null&&(i.nodes_start=e,i.nodes_end=r)}function Ie(e,r){var i=(r&Wf)!==0,s=(r&Yf)!==0,l,c=!e.startsWith("<!>");return()=>{l===void 0&&(l=Bd(c?e:"<!>"+e),i||(l=ba(l)));var h=s||_s?document.importNode(l,!0):l.cloneNode(!0);if(i){var m=ba(h),g=h.lastChild;Xo(m,g)}else Xo(h,h);return h}}function Jn(){var e=document.createDocumentFragment(),r=document.createComment(""),i=nr();return e.append(r,i),Xo(r,i),e}function be(e,r){e!==null&&e.before(r)}function Yn(e,r){var i=r==null?"":typeof r=="object"?r+"":r;i!==(e.__t??=e.nodeValue)&&(e.__t=i,e.nodeValue=i+"")}function jd(e,r){return zd(e,r)}const Nr=new Map;function zd(e,{target:r,anchor:i,props:s={},events:l,context:c,intro:h=!0}){Ed();var m=new Set,g=I=>{for(var _=0;_<I.length;_++){var T=I[_];if(!m.has(T)){m.add(T);var P=Kd(T);r.addEventListener(T,vi,{passive:P});var C=Nr.get(T);C===void 0?(document.addEventListener(T,vi,{passive:P}),Nr.set(T,1)):Nr.set(T,C+1)}}};g(fs(Ll)),Qo.add(g);var E=void 0,w=Id(()=>{var I=i??r.appendChild(nr());return sd(I,{pending:()=>{}},_=>{if(c){ar({});var T=ft;T.c=c}l&&(s.$$events=l),E=e(_,s)||{},c&&or()}),()=>{for(var _ of m){r.removeEventListener(_,vi);var T=Nr.get(_);--T===0?(document.removeEventListener(_,vi),Nr.delete(_)):Nr.set(_,T)}Qo.delete(g),I!==i&&I.parentNode?.removeChild(I)}});return Gd.set(E,w),E}let Gd=new WeakMap;class Hd{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,i=!0){this.anchor=r,this.#u=i}#a=()=>{var r=Be;if(this.#e.has(r)){var i=this.#e.get(r),s=this.#t.get(i);if(s)xs(s),this.#n.delete(i);else{var l=this.#r.get(i);l&&(this.#t.set(i,l.effect),this.#r.delete(i),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[c,h]of this.#e){if(this.#e.delete(c),c===r)break;const m=this.#r.get(h);m&&(Gt(m.effect),this.#r.delete(h))}for(const[c,h]of this.#t){if(c===i||this.#n.has(c))continue;const m=()=>{if(Array.from(this.#e.values()).includes(c)){var E=document.createDocumentFragment();kl(h,E),E.append(nr()),this.#r.set(c,{effect:h,fragment:E})}else Gt(h);this.#n.delete(c),this.#t.delete(c)};this.#u||!s?(this.#n.add(c),jr(h,m,!1)):m()}}};#i=r=>{this.#e.delete(r);const i=Array.from(this.#e.values());for(const[s,l]of this.#r)i.includes(s)||(Gt(l.effect),this.#r.delete(s))};ensure(r,i){var s=Be,l=yl();if(i&&!this.#t.has(r)&&!this.#r.has(r))if(l){var c=document.createDocumentFragment(),h=nr();c.append(h),this.#r.set(r,{effect:en(()=>i(h)),fragment:c})}else this.#t.set(r,en(()=>i(this.anchor)));if(this.#e.set(s,r),l){for(const[m,g]of this.#t)m===r?s.skipped_effects.delete(g):s.skipped_effects.add(g);for(const[m,g]of this.#r)m===r?s.skipped_effects.delete(g.effect):s.skipped_effects.add(g.effect);s.oncommit(this.#a),s.ondiscard(this.#i)}else this.#a()}}function at(e,r,i=!1){var s=new Hd(e),l=i?Hr:0;function c(h,m){s.ensure(h,m)}ws(()=>{var h=!1;r((m,g=!0)=>{h=!0,c(g,m)}),h||c(!1,null)},l)}function Ts(e,r,i){_l(()=>{var s=wn(()=>r(e,i?.())||{});if(i&&s?.update){var l=!1,c={};za(()=>{var h=i();Md(h),l&&nl(c,h)&&(c=h,s.update(h))}),l=!0}if(s?.destroy)return()=>s.destroy()})}function Pl(e){var r,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(r=0;r<l;r++)e[r]&&(i=Pl(e[r]))&&(s&&(s+=" "),s+=i)}else for(i in e)e[i]&&(s&&(s+=" "),s+=i);return s}function Ud(){for(var e,r,i=0,s="",l=arguments.length;i<l;i++)(e=arguments[i])&&(r=Pl(e))&&(s&&(s+=" "),s+=r);return s}function Rl(e){return typeof e=="object"?Ud(e):e??""}function Vd(e,r,i){var s=e==null?"":""+e;return r&&(s=s?s+" "+r:r),s===""?null:s}function Wd(e,r){return e==null?null:String(e)}function xi(e,r,i,s,l,c){var h=e.__className;if(h!==i||h===void 0){var m=Vd(i,s);m==null?e.removeAttribute("class"):e.className=m,e.__className=i}return c}function rr(e,r,i,s){var l=e.__style;if(l!==r){var c=Wd(r);c==null?e.removeAttribute("style"):e.style.cssText=c,e.__style=r}return s}const Yd=Symbol("is custom element"),Zd=Symbol("is html");function qd(e,r){var i=ks(e);i.value===(i.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Ml(e,r){var i=ks(e);i.checked!==(i.checked=r??void 0)&&(e.checked=r)}function vt(e,r,i,s){var l=ks(e);l[r]!==(l[r]=i)&&(r==="loading"&&(e[Df]=i),i==null?e.removeAttribute(r):typeof i!="string"&&Qd(e).includes(r)?e[r]=i:e.setAttribute(r,i))}function ks(e){return e.__attributes??={[Yd]:e.nodeName.includes("-"),[Zd]:e.namespaceURI===qf}}var ku=new Map;function Qd(e){var r=e.getAttribute("is")||e.nodeName,i=ku.get(r);if(i)return i;ku.set(r,i=[]);for(var s,l=e,c=Element.prototype;c!==l;){s=Wu(l);for(var h in s)s[h].set&&i.push(h);l=ds(l)}return i}function Ds(e,r,i=r){var s=new WeakSet;kd(e,"input",async l=>{se&&e.type==="checkbox"&&mu();var c=l?e.defaultValue:e.value;if(c=Fo(e)?Bo(c):c,i(c),Be!==null&&s.add(Be),await Wn(),c!==(c=r())){var h=e.selectionStart,m=e.selectionEnd,g=e.value.length;if(e.value=c??"",m!==null){var E=e.value.length;h===m&&m===g&&E>g?(e.selectionStart=E,e.selectionEnd=E):(e.selectionStart=h,e.selectionEnd=Math.min(m,E))}}}),wn(r)==null&&e.value&&(i(Fo(e)?Bo(e.value):e.value),Be!==null&&s.add(Be)),za(()=>{se&&e.type==="checkbox"&&mu();var l=r();if(e===document.activeElement){var c=fa??Be;if(s.has(c))return}Fo(e)&&l===Bo(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function Fo(e){var r=e.type;return r==="number"||r==="range"}function Bo(e){return e===""?null:+e}function Du(e,r){return e===r||e?.[In]===r}function Zt(e={},r,i,s){return _l(()=>{var l,c;return za(()=>{l=c,c=[],wn(()=>{e!==i(...c)&&(r(e,...c),l&&Du(i(...l),e)&&r(null,...l))})}),()=>{Jr(()=>{c&&Du(i(...c),e)&&r(null,...c)})}}),e}function Nl(e,r,i){if(e==null)return r(void 0),ma;const s=wn(()=>e.subscribe(r,i));return s.unsubscribe?()=>s.unsubscribe():s}function Xd(e){let r;return Nl(e,i=>r=i)(),r}let ua=!1,Jo=Symbol();function xa(e,r,i){const s=i[r]??={store:null,source:dl(void 0),unsubscribe:ma};if(se&&(s.source.label=r),s.store!==e&&!(Jo in i))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=ma;else{var l=!0;s.unsubscribe=Nl(e,c=>{l?s.source.v=c:A(s.source,c)}),l=!1}return e&&Jo in i?Xd(e):p(s.source)}function Ta(e,r,i){let s=i[r];return s&&s.store!==e&&(s.unsubscribe(),s.unsubscribe=ma),e}function As(){const e={};function r(){bs(()=>{for(var i in e)e[i].unsubscribe();er(e,Jo,{enumerable:!1,value:!0})})}return[e,r]}function Jd(e){var r=ua;try{return ua=!1,[e(),ua]}finally{ua=r}}function Pt(e,r,i,s){var l=!Ai||(i&Gf)!==0,c=(i&Uf)!==0,h=(i&Vf)!==0,m=s,g=!0,E=()=>(g&&(g=!1,m=h?wn(s):s),m),w;if(c){var I=In in e||kf in e;w=_r(e,r)?.set??(I&&r in e?Y=>e[r]=Y:void 0)}var _,T=!1;c?[_,T]=Jd(()=>e[r]):_=e[r],_===void 0&&s!==void 0&&(_=E(),w&&(l&&Pf(r),w(_)));var P;if(l?P=()=>{var Y=e[r];return Y===void 0?E():(g=!0,Y)}:P=()=>{var Y=e[r];return Y!==void 0&&(m=void 0),Y===void 0?m:Y},l&&(i&Hf)===0)return P;if(w){var C=e.$$legacy;return(function(Y,N){return arguments.length>0?((!l||!N||C||T)&&w(N?P():Y),Y):P()})}var O=!1,L=((i&zf)!==0?Ba:ms)(()=>(O=!1,P()));se&&(L.label=r),c&&p(L);var H=Ne;return(function(Y,N){if(arguments.length>0){const X=N?p(L):l&&c?Yt(Y):Y;return A(L,X),O=!0,m!==void 0&&(m=X),Y}return Dr&&O||(H.f&An)!==0?L.v:p(L)})}if(se){let e=function(r){if(!(r in globalThis)){let i;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(i!==void 0)return i;Rf(r)},set:s=>{i=s}})}};var jp=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const $d="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add($d);Jf();var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function th(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ha={exports:{}},nh=ha.exports,Au;function rh(){return Au||(Au=1,(function(e,r){(function(i,s){e.exports=s()})(nh,(function(){var i=function(t,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(a[u]=o[u])},i(t,n)};function s(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var l=function(){return l=Object.assign||function(n){for(var a,o=1,u=arguments.length;o<u;o++){a=arguments[o];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(n[f]=a[f])}return n},l.apply(this,arguments)};function c(t,n,a){for(var o=0,u=n.length,f;o<u;o++)(f||!(o in n))&&(f||(f=Array.prototype.slice.call(n,0,o)),f[o]=n[o]);return t.concat(f||Array.prototype.slice.call(n))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:eh,m=Object.keys,g=Array.isArray;typeof Promise<"u"&&!h.Promise&&(h.Promise=Promise);function E(t,n){return typeof n!="object"||m(n).forEach(function(a){t[a]=n[a]}),t}var w=Object.getPrototypeOf,I={}.hasOwnProperty;function _(t,n){return I.call(t,n)}function T(t,n){typeof n=="function"&&(n=n(w(t))),(typeof Reflect>"u"?m:Reflect.ownKeys)(n).forEach(function(a){C(t,a,n[a])})}var P=Object.defineProperty;function C(t,n,a,o){P(t,n,E(a&&_(a,"get")&&typeof a.get=="function"?{get:a.get,set:a.set,configurable:!0}:{value:a,configurable:!0,writable:!0},o))}function O(t){return{from:function(n){return t.prototype=Object.create(n.prototype),C(t.prototype,"constructor",t),{extend:T.bind(null,t.prototype)}}}}var L=Object.getOwnPropertyDescriptor;function H(t,n){var a=L(t,n),o;return a||(o=w(t))&&H(o,n)}var Y=[].slice;function N(t,n,a){return Y.call(t,n,a)}function X(t,n){return n(t)}function ee(t){if(!t)throw new Error("Assertion Failed")}function le(t){h.setImmediate?setImmediate(t):setTimeout(t,0)}function he(t,n){return t.reduce(function(a,o,u){var f=n(o,u);return f&&(a[f[0]]=f[1]),a},{})}function re(t,n){if(typeof n=="string"&&_(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var a=[],o=0,u=n.length;o<u;++o){var f=re(t,n[o]);a.push(f)}return a}var d=n.indexOf(".");if(d!==-1){var v=t[n.substr(0,d)];return v==null?void 0:re(v,n.substr(d+1))}}function ve(t,n,a){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){ee(typeof a!="string"&&"length"in a);for(var o=0,u=n.length;o<u;++o)ve(t,n[o],a[o])}else{var f=n.indexOf(".");if(f!==-1){var d=n.substr(0,f),v=n.substr(f+1);if(v==="")a===void 0?g(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=a;else{var y=t[d];(!y||!_(t,d))&&(y=t[d]={}),ve(y,v,a)}}else a===void 0?g(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=a}}function ge(t,n){typeof n=="string"?ve(t,n,void 0):"length"in n&&[].map.call(n,function(a){ve(t,a,void 0)})}function _e(t){var n={};for(var a in t)_(t,a)&&(n[a]=t[a]);return n}var Xe=[].concat;function je(t){return Xe.apply([],t)}var ot="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(je([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return h[t]}),ut=new Set(ot.map(function(t){return h[t]}));function ze(t){var n={};for(var a in t)if(_(t,a)){var o=t[a];n[a]=!o||typeof o!="object"||ut.has(o.constructor)?o:ze(o)}return n}function Mt(t){for(var n in t)if(_(t,n))return!1;return!0}var He=null;function We(t){He=new WeakMap;var n=bt(t);return He=null,n}function bt(t){if(!t||typeof t!="object")return t;var n=He.get(t);if(n)return n;if(g(t)){n=[],He.set(t,n);for(var a=0,o=t.length;a<o;++a)n.push(bt(t[a]))}else if(ut.has(t.constructor))n=t;else{var u=w(t);n=u===Object.prototype?{}:Object.create(u),He.set(t,n);for(var f in t)_(t,f)&&(n[f]=bt(t[f]))}return n}var Nt={}.toString;function rn(t){return Nt.call(t).slice(8,-1)}var wt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Z=typeof wt=="symbol"?function(t){var n;return t!=null&&(n=t[wt])&&n.apply(t)}:function(){return null};function W(t,n){var a=t.indexOf(n);return a>=0&&t.splice(a,1),a>=0}var ie={};function Te(t){var n,a,o,u;if(arguments.length===1){if(g(t))return t.slice();if(this===ie&&typeof t=="string")return[t];if(u=Z(t)){for(a=[];o=u.next(),!o.done;)a.push(o.value);return a}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(a=new Array(n);n--;)a[n]=t[n];return a}return[t]}for(n=arguments.length,a=new Array(n);n--;)a[n]=arguments[n];return a}var Ce=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},lt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ge=lt.concat(Ue),fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Fe(t,n){this.name=t,this.message=n}O(Fe).from(Error).extend({toString:function(){return this.name+": "+this.message}});function we(t,n){return t+". Errors: "+Object.keys(n).map(function(a){return n[a].toString()}).filter(function(a,o,u){return u.indexOf(a)===o}).join(`
`)}function Ve(t,n,a,o){this.failures=n,this.failedKeys=o,this.successCount=a,this.message=we(t,n)}O(Ve).from(Fe);function Ye(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(a){return n[a]}),this.failuresByPos=n,this.message=we(t,this.failures)}O(Ye).from(Fe);var Ct=Ge.reduce(function(t,n){return t[n]=n+"Error",t},{}),Ir=Fe,ae=Ge.reduce(function(t,n){var a=n+"Error";function o(u,f){this.name=a,u?typeof u=="string"?(this.message="".concat(u).concat(f?`
 `+f:""),this.inner=f||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=fe[n]||a,this.inner=null)}return O(o).from(Ir),t[n]=o,t},{});ae.Syntax=SyntaxError,ae.Type=TypeError,ae.Range=RangeError;var Rn=Ue.reduce(function(t,n){return t[n+"Error"]=ae[n],t},{});function Sr(t,n){if(!t||t instanceof Fe||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Rn[t.name])return t;var a=new Rn[t.name](n||t.message,t);return"stack"in t&&C(a,"stack",{get:function(){return this.inner.stack}}),a}var En=Ge.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=ae[n]),t},{});En.ModifyError=Ve,En.DexieError=Fe,En.BulkError=Ye;function Re(){}function cn(t){return t}function $r(t,n){return t==null||t===cn?n:function(a){return n(t(a))}}function U(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function F(t,n){return t===Re?n:function(){var a=t.apply(this,arguments);a!==void 0&&(arguments[0]=a);var o=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var f=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?U(o,this.onsuccess):o),u&&(this.onerror=this.onerror?U(u,this.onerror):u),f!==void 0?f:a}}function G(t,n){return t===Re?n:function(){t.apply(this,arguments);var a=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?U(a,this.onsuccess):a),o&&(this.onerror=this.onerror?U(o,this.onerror):o)}}function oe(t,n){return t===Re?n:function(a){var o=t.apply(this,arguments);E(a,o);var u=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?U(u,this.onsuccess):u),f&&(this.onerror=this.onerror?U(f,this.onerror):f),o===void 0?d===void 0?void 0:d:E(o,d)}}function ce(t,n){return t===Re?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Ze(t,n){return t===Re?n:function(){var a=t.apply(this,arguments);if(a&&typeof a.then=="function"){for(var o=this,u=arguments.length,f=new Array(u);u--;)f[u]=arguments[u];return a.then(function(){return n.apply(o,f)})}return n.apply(this,arguments)}}var Ee=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Se(t,n){Ee=t}var nt={},dt=100,Kt=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,w(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,w(n),t]})(),Ke=Kt[0],Mn=Kt[1],Xa=Kt[2],Je=Mn&&Mn.then,Et=Ke&&Ke.constructor,sr=!!Xa;function nc(){queueMicrotask(ic)}var ei=function(t,n){ti.push([t,n]),Mi&&(nc(),Mi=!1)},Ja=!0,Mi=!0,ur=[],Ni=[],$a=cn,Nn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Re,pgp:!1,env:{},finalize:Re},ue=Nn,ti=[],lr=0,Ki=[];function $(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=ue;if(typeof t!="function"){if(t!==nt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&to(this,this._value);return}this._state=null,this._value=null,++n.ref,Ns(this,t)}var eo={get:function(){var t=ue,n=zi;function a(o,u){var f=this,d=!t.global&&(t!==ue||n!==zi),v=d&&!Fn(),y=new $(function(b,D){no(f,new Ms(Bs(o,t,d,v),Bs(u,t,d,v),b,D,t))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return a.prototype=nt,a},set:function(t){C(this,"then",t&&t.prototype===nt?eo:{get:function(){return t},set:eo.set})}};T($.prototype,{then:eo,_then:function(t,n){no(this,new Ms(null,null,t,n,ue))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],a=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?a(o):Fi(o)}):this.then(null,function(o){return o&&o.name===n?a(o):Fi(o)})},finally:function(t){return this.then(function(n){return $.resolve(t()).then(function(){return n})},function(n){return $.resolve(t()).then(function(){return Fi(n)})})},timeout:function(t,n){var a=this;return t<1/0?new $(function(o,u){var f=setTimeout(function(){return u(new ae.Timeout(n))},t);a.then(o,u).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C($.prototype,Symbol.toStringTag,"Dexie.Promise"),Nn.env=Fs();function Ms(t,n,a,o,u){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=a,this.reject=o,this.psd=u}T($,{all:function(){var t=Te.apply(null,arguments).map(Gi);return new $(function(n,a){t.length===0&&n([]);var o=t.length;t.forEach(function(u,f){return $.resolve(u).then(function(d){t[f]=d,--o||n(t)},a)})})},resolve:function(t){if(t instanceof $)return t;if(t&&typeof t.then=="function")return new $(function(a,o){t.then(a,o)});var n=new $(nt,!0,t);return n},reject:Fi,race:function(){var t=Te.apply(null,arguments).map(Gi);return new $(function(n,a){t.map(function(o){return $.resolve(o).then(n,a)})})},PSD:{get:function(){return ue},set:function(t){return ue=t}},totalEchoes:{get:function(){return zi}},newPSD:Kn,usePSD:cr,scheduler:{get:function(){return ei},set:function(t){ei=t}},rejectionMapper:{get:function(){return $a},set:function(t){$a=t}},follow:function(t,n){return new $(function(a,o){return Kn(function(u,f){var d=ue;d.unhandleds=[],d.onunhandled=f,d.finalize=U(function(){var v=this;ac(function(){v.unhandleds.length===0?u():f(v.unhandleds[0])})},d.finalize),t()},n,a,o)})}}),Et&&(Et.allSettled&&C($,"allSettled",function(){var t=Te.apply(null,arguments).map(Gi);return new $(function(n){t.length===0&&n([]);var a=t.length,o=new Array(a);t.forEach(function(u,f){return $.resolve(u).then(function(d){return o[f]={status:"fulfilled",value:d}},function(d){return o[f]={status:"rejected",reason:d}}).then(function(){return--a||n(o)})})})}),Et.any&&typeof AggregateError<"u"&&C($,"any",function(){var t=Te.apply(null,arguments).map(Gi);return new $(function(n,a){t.length===0&&a(new AggregateError([]));var o=t.length,u=new Array(o);t.forEach(function(f,d){return $.resolve(f).then(function(v){return n(v)},function(v){u[d]=v,--o||a(new AggregateError(u))})})})}),Et.withResolvers&&($.withResolvers=Et.withResolvers));function Ns(t,n){try{n(function(a){if(t._state===null){if(a===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&Or();a&&typeof a.then=="function"?Ns(t,function(u,f){a instanceof $?a._then(u,f):a.then(u,f)}):(t._state=!0,t._value=a,Ks(t)),o&&Cr()}},to.bind(null,t))}catch(a){to(t,a)}}function to(t,n){if(Ni.push(n),t._state===null){var a=t._lib&&Or();n=$a(n),t._state=!1,t._value=n,oc(t),Ks(t),a&&Cr()}}function Ks(t){var n=t._listeners;t._listeners=[];for(var a=0,o=n.length;a<o;++a)no(t,n[a]);var u=t._PSD;--u.ref||u.finalize(),lr===0&&(++lr,ei(function(){--lr===0&&ro()},[]))}function no(t,n){if(t._state===null){t._listeners.push(n);return}var a=t._state?n.onFulfilled:n.onRejected;if(a===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++lr,ei(rc,[a,t,n])}function rc(t,n,a){try{var o,u=n._value;!n._state&&Ni.length&&(Ni=[]),o=Ee&&n._consoleTask?n._consoleTask.run(function(){return t(u)}):t(u),!n._state&&Ni.indexOf(u)===-1&&sc(n),a.resolve(o)}catch(f){a.reject(f)}finally{--lr===0&&ro(),--a.psd.ref||a.psd.finalize()}}function ic(){cr(Nn,function(){Or()&&Cr()})}function Or(){var t=Ja;return Ja=!1,Mi=!1,t}function Cr(){var t,n,a;do for(;ti.length>0;)for(t=ti,ti=[],a=t.length,n=0;n<a;++n){var o=t[n];o[0].apply(null,o[1])}while(ti.length>0);Ja=!0,Mi=!0}function ro(){var t=ur;ur=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=Ki.slice(0),a=n.length;a;)n[--a]()}function ac(t){function n(){t(),Ki.splice(Ki.indexOf(n),1)}Ki.push(n),++lr,ei(function(){--lr===0&&ro()},[])}function oc(t){ur.some(function(n){return n._value===t._value})||ur.push(t)}function sc(t){for(var n=ur.length;n;)if(ur[--n]._value===t._value){ur.splice(n,1);return}}function Fi(t){return new $(nt,!1,t)}function qe(t,n){var a=ue;return function(){var o=Or(),u=ue;try{return Bn(a,!0),t.apply(this,arguments)}catch(f){n&&n(f)}finally{Bn(u,!1),o&&Cr()}}}var ht={awaits:0,echoes:0,id:0},uc=0,Bi=[],ji=0,zi=0,lc=0;function Kn(t,n,a,o){var u=ue,f=Object.create(u);f.parent=u,f.ref=0,f.global=!1,f.id=++lc,Nn.env,f.env=sr?{Promise:$,PromiseProp:{value:$,configurable:!0,writable:!0},all:$.all,race:$.race,allSettled:$.allSettled,any:$.any,resolve:$.resolve,reject:$.reject}:{},n&&E(f,n),++u.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=cr(f,t,a,o);return f.ref===0&&f.finalize(),d}function Lr(){return ht.id||(ht.id=++uc),++ht.awaits,ht.echoes+=dt,ht.id}function Fn(){return ht.awaits?(--ht.awaits===0&&(ht.id=0),ht.echoes=ht.awaits*dt,!0):!1}(""+Je).indexOf("[native code]")===-1&&(Lr=Fn=Re);function Gi(t){return ht.echoes&&t&&t.constructor===Et?(Lr(),t.then(function(n){return Fn(),n},function(n){return Fn(),rt(n)})):t}function cc(t){++zi,(!ht.echoes||--ht.echoes===0)&&(ht.echoes=ht.awaits=ht.id=0),Bi.push(ue),Bn(t,!0)}function fc(){var t=Bi[Bi.length-1];Bi.pop(),Bn(t,!1)}function Bn(t,n){var a=ue;if((n?ht.echoes&&(!ji++||t!==ue):ji&&(!--ji||t!==ue))&&queueMicrotask(n?cc.bind(null,t):fc),t!==ue&&(ue=t,a===Nn&&(Nn.env=Fs()),sr)){var o=Nn.env.Promise,u=t.env;(a.global||t.global)&&(Object.defineProperty(h,"Promise",u.PromiseProp),o.all=u.all,o.race=u.race,o.resolve=u.resolve,o.reject=u.reject,u.allSettled&&(o.allSettled=u.allSettled),u.any&&(o.any=u.any))}}function Fs(){var t=h.Promise;return sr?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function cr(t,n,a,o,u){var f=ue;try{return Bn(t,!0),n(a,o,u)}finally{Bn(f,!1)}}function Bs(t,n,a,o){return typeof t!="function"?t:function(){var u=ue;a&&Lr(),Bn(n,!0);try{return t.apply(this,arguments)}finally{Bn(u,!1),o&&queueMicrotask(Fn)}}}function io(t){Promise===Et&&ht.echoes===0?ji===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var rt=$.reject;function ao(t,n,a,o){if(!t.idbdb||!t._state.openComplete&&!ue.letThrough&&!t._vip){if(t._state.openComplete)return rt(new ae.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return rt(new ae.DatabaseClosed);t.open().catch(Re)}return t._state.dbReadyPromise.then(function(){return ao(t,n,a,o)})}else{var u=t._createTransaction(n,a,t._dbSchema);try{u.create(),t._state.PR1398_maxLoop=3}catch(f){return f.name===Ct.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return ao(t,n,a,o)})):rt(f)}return u._promise(n,function(f,d){return Kn(function(){return ue.trans=u,o(f,d,u)})}).then(function(f){if(n==="readwrite")try{u.idbtrans.commit()}catch{}return n==="readonly"?f:u._completion.then(function(){return f})})}}var js="4.2.1",fr="",oo=-1/0,xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",zs="String expected.",Pr=[],Hi="__dbnames",so="readonly",uo="readwrite";function dr(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var Gs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ui(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=We(n),delete n[t]),n}:function(n){return n}}function Hs(){throw ae.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Le(t,n){try{var a=Us(t),o=Us(n);if(a!==o)return a==="Array"?1:o==="Array"?-1:a==="binary"?1:o==="binary"?-1:a==="string"?1:o==="string"?-1:a==="Date"?1:o!=="Date"?NaN:-1;switch(a){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return hc(Vs(t),Vs(n));case"Array":return dc(t,n)}}catch{}return NaN}function dc(t,n){for(var a=t.length,o=n.length,u=a<o?a:o,f=0;f<u;++f){var d=Le(t[f],n[f]);if(d!==0)return d}return a===o?0:a<o?-1:1}function hc(t,n){for(var a=t.length,o=n.length,u=a<o?a:o,f=0;f<u;++f)if(t[f]!==n[f])return t[f]<n[f]?-1:1;return a===o?0:a<o?-1:1}function Us(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var a=rn(t);return a==="ArrayBuffer"?"binary":a}function Vs(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Vi(t,n,a){var o=t.schema.yProps;return o?(n&&a.numFailures>0&&(n=n.filter(function(u,f){return!a.failures[f]})),Promise.all(o.map(function(u){var f=u.updatesTable;return n?t.db.table(f).where("k").anyOf(n).delete():t.db.table(f).clear()})).then(function(){return a})):a}var ni=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var a,o=this["@@propmod"];if(o.add!==void 0){var u=o.add;if(g(u))return c(c([],g(n)?n:[],!0),u).sort();if(typeof u=="number")return(Number(n)||0)+u;if(typeof u=="bigint")try{return BigInt(n)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(o.remove!==void 0){var f=o.remove;if(g(f))return g(n)?n.filter(function(v){return!f.includes(v)}).sort():[];if(typeof f=="number")return Number(n)-f;if(typeof f=="bigint")try{return BigInt(n)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}var d=(a=o.replacePrefix)===null||a===void 0?void 0:a[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function Ws(t,n){for(var a=m(n),o=a.length,u=!1,f=0;f<o;++f){var d=a[f],v=n[d],y=re(t,d);v instanceof ni?(ve(t,d,v.execute(y)),u=!0):y!==v&&(ve(t,d,v),u=!0)}return u}var Ys=(function(){function t(){}return t.prototype._trans=function(n,a,o){var u=this._tx||ue.trans,f=this.name,d=Ee&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function v(D,x,M){if(!M.schema[f])throw new ae.NotFound("Table "+f+" not part of transaction");return a(M.idbtrans,M)}var y=Or();try{var b=u&&u.db._novip===this.db._novip?u===ue.trans?u._promise(n,v,o):Kn(function(){return u._promise(n,v,o)},{trans:u,transless:ue.transless||ue}):ao(this.db,n,[this.name],v);return d&&(b._consoleTask=d,b=b.catch(function(D){return console.trace(D),rt(D)})),b}finally{y&&Cr()}},t.prototype.get=function(n,a){var o=this;return n&&n.constructor===Object?this.where(n).first(a):n==null?rt(new ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return o.core.get({trans:u,key:n}).then(function(f){return o.hook.reading.fire(f)})}).then(a)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(g(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var a=m(n);if(a.length===1)return this.where(a[0]).equals(n[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&a.every(function(M){return D.keyPath.indexOf(M)>=0})){for(var x=0;x<a.length;++x)if(a.indexOf(D.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(D,x){return D.keyPath.length-x.keyPath.length})[0];if(o&&this.db._maxKey!==fr){var u=o.keyPath.slice(0,a.length);return this.where(u).equals(u.map(function(D){return n[D]}))}!o&&Ee&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var f=this.schema.idxByName;function d(D,x){return Le(D,x)===0}var v=a.reduce(function(D,x){var M=D[0],q=D[1],k=f[x],S=n[x];return[M||k,M||!k?dr(q,k&&k.multi?function(R){var K=re(R,x);return g(K)&&K.some(function(j){return d(S,j)})}:function(R){return d(S,re(R,x))}):q]},[null,null]),y=v[0],b=v[1];return y?this.where(y.name).equals(n[y.keyPath]).filter(b):o?this.filter(b):this.where(a).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,g(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var a=this,o=a.db,u=a.name;this.schema.mappedClass=n,n.prototype instanceof Hs&&(n=(function(y){s(b,y);function b(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(b.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),b.prototype.table=function(){return u},b})(n));for(var f=new Set,d=n.prototype;d;d=w(d))Object.getOwnPropertyNames(d).forEach(function(y){return f.add(y)});var v=function(y){if(!y)return y;var b=Object.create(n.prototype);for(var D in y)if(!f.has(D))try{b[D]=y[D]}catch{}return b};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),n},t.prototype.defineClass=function(){function n(a){E(this,a)}return this.mapToClass(n)},t.prototype.add=function(n,a){var o=this,u=this.schema.primKey,f=u.auto,d=u.keyPath,v=n;return d&&f&&(v=Ui(d)(n)),this._trans("readwrite",function(y){return o.core.mutate({trans:y,type:"add",keys:a!=null?[a]:null,values:[v]})}).then(function(y){return y.numFailures?$.reject(y.failures[0]):y.lastResult}).then(function(y){if(d)try{ve(n,d,y)}catch{}return y})},t.prototype.upsert=function(n,a){var o=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(f){return o.core.get({trans:f,key:n}).then(function(d){var v=d??{};return Ws(v,a),u&&ve(v,u,n),o.core.mutate({trans:f,type:"put",values:[v],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[a]}}).then(function(y){return y.numFailures?$.reject(y.failures[0]):!!d})})})},t.prototype.update=function(n,a){if(typeof n=="object"&&!g(n)){var o=re(n,this.schema.primKey.keyPath);return o===void 0?rt(new ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(a)}else return this.where(":id").equals(n).modify(a)},t.prototype.put=function(n,a){var o=this,u=this.schema.primKey,f=u.auto,d=u.keyPath,v=n;return d&&f&&(v=Ui(d)(n)),this._trans("readwrite",function(y){return o.core.mutate({trans:y,type:"put",values:[v],keys:a!=null?[a]:null})}).then(function(y){return y.numFailures?$.reject(y.failures[0]):y.lastResult}).then(function(y){if(d)try{ve(n,d,y)}catch{}return y})},t.prototype.delete=function(n){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(u){return Vi(a,[n],u)}).then(function(u){return u.numFailures?$.reject(u.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"deleteRange",range:Gs}).then(function(o){return Vi(n,null,o)})}).then(function(a){return a.numFailures?$.reject(a.failures[0]):void 0})},t.prototype.bulkGet=function(n){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:n,trans:o}).then(function(u){return u.map(function(f){return a.hook.reading.fire(f)})})})},t.prototype.bulkAdd=function(n,a,o){var u=this,f=Array.isArray(a)?a:void 0;o=o||(f?void 0:a);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var y=u.schema.primKey,b=y.auto,D=y.keyPath;if(D&&f)throw new ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,M=D&&b?n.map(Ui(D)):n;return u.core.mutate({trans:v,type:"add",keys:f,values:M,wantResults:d}).then(function(q){var k=q.numFailures,S=q.results,R=q.lastResult,K=q.failures,j=d?S:R;if(k===0)return j;throw new Ye("".concat(u.name,".bulkAdd(): ").concat(k," of ").concat(x," operations failed"),K)})})},t.prototype.bulkPut=function(n,a,o){var u=this,f=Array.isArray(a)?a:void 0;o=o||(f?void 0:a);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var y=u.schema.primKey,b=y.auto,D=y.keyPath;if(D&&f)throw new ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,M=D&&b?n.map(Ui(D)):n;return u.core.mutate({trans:v,type:"put",keys:f,values:M,wantResults:d}).then(function(q){var k=q.numFailures,S=q.results,R=q.lastResult,K=q.failures,j=d?S:R;if(k===0)return j;throw new Ye("".concat(u.name,".bulkPut(): ").concat(k," of ").concat(x," operations failed"),K)})})},t.prototype.bulkUpdate=function(n){var a=this,o=this.core,u=n.map(function(v){return v.key}),f=n.map(function(v){return v.changes}),d=[];return this._trans("readwrite",function(v){return o.getMany({trans:v,keys:u,cache:"clone"}).then(function(y){var b=[],D=[];n.forEach(function(M,q){var k=M.key,S=M.changes,R=y[q];if(R){for(var K=0,j=Object.keys(S);K<j.length;K++){var z=j[K],V=S[z];if(z===a.schema.primKey.keyPath){if(Le(V,k)!==0)throw new ae.Constraint("Cannot update primary key in bulkUpdate()")}else ve(R,z,V)}d.push(q),b.push(k),D.push(R)}});var x=b.length;return o.mutate({trans:v,type:"put",keys:b,values:D,updates:{keys:u,changeSpecs:f}}).then(function(M){var q=M.numFailures,k=M.failures;if(q===0)return x;for(var S=0,R=Object.keys(k);S<R.length;S++){var K=R[S],j=d[Number(K)];if(j!=null){var z=k[K];delete k[K],k[j]=z}}throw new Ye("".concat(a.name,".bulkUpdate(): ").concat(q," of ").concat(x," operations failed"),k)})})})},t.prototype.bulkDelete=function(n){var a=this,o=n.length;return this._trans("readwrite",function(u){return a.core.mutate({trans:u,type:"delete",keys:n}).then(function(f){return Vi(a,n,f)})}).then(function(u){var f=u.numFailures,d=u.lastResult,v=u.failures;if(f===0)return d;throw new Ye("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),v)})},t})();function ri(t){var n={},a=function(v,y){if(y){for(var b=arguments.length,D=new Array(b-1);--b;)D[b-1]=arguments[b];return n[v].subscribe.apply(null,D),t}else if(typeof v=="string")return n[v]};a.addEventType=f;for(var o=1,u=arguments.length;o<u;++o)f(arguments[o]);return a;function f(v,y,b){if(typeof v=="object")return d(v);y||(y=ce),b||(b=Re);var D={subscribers:[],fire:b,subscribe:function(x){D.subscribers.indexOf(x)===-1&&(D.subscribers.push(x),D.fire=y(D.fire,x))},unsubscribe:function(x){D.subscribers=D.subscribers.filter(function(M){return M!==x}),D.fire=D.subscribers.reduce(y,b)}};return n[v]=a[v]=D,D}function d(v){m(v).forEach(function(y){var b=v[y];if(g(b))f(y,v[y][0],v[y][1]);else if(b==="asap")var D=f(y,cn,function(){for(var M=arguments.length,q=new Array(M);M--;)q[M]=arguments[M];D.subscribers.forEach(function(k){le(function(){k.apply(null,q)})})});else throw new ae.InvalidArgument("Invalid event config")})}}function ii(t,n){return O(n).from({prototype:t}),n}function vc(t){return ii(Ys.prototype,function(a,o,u){this.db=t,this._tx=u,this.name=a,this.schema=o,this.hook=t._allTables[a]?t._allTables[a].hook:ri(null,{creating:[F,Re],reading:[$r,cn],updating:[oe,Re],deleting:[G,Re]})})}function Rr(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function lo(t,n){t.filter=dr(t.filter,n)}function co(t,n,a){var o=t.replayFilter;t.replayFilter=o?function(){return dr(o(),n())}:n,t.justLimit=a&&!o}function pc(t,n){t.isMatch=dr(t.isMatch,n)}function Wi(t,n){if(t.isPrimKey)return n.primaryKey;var a=n.getIndexByKeyPath(t.index);if(!a)throw new ae.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return a}function Zs(t,n,a){var o=Wi(t,n.schema);return n.openCursor({trans:a,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function Yi(t,n,a,o){var u=t.replayFilter?dr(t.filter,t.replayFilter()):t.filter;if(t.or){var f={},d=function(v,y,b){if(!u||u(y,b,function(M){return y.stop(M)},function(M){return y.fail(M)})){var D=y.primaryKey,x=""+D;x==="[object ArrayBuffer]"&&(x=""+new Uint8Array(D)),_(f,x)||(f[x]=!0,n(v,y,b))}};return Promise.all([t.or._iterate(d,a),qs(Zs(t,o,a),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return qs(Zs(t,o,a),dr(t.algorithm,u),n,!t.keysOnly&&t.valueMapper)}function qs(t,n,a,o){var u=o?function(d,v,y){return a(o(d),v,y)}:a,f=qe(u);return t.then(function(d){if(d)return d.start(function(){var v=function(){return d.continue()};(!n||n(d,function(y){return v=y},function(y){d.stop(y),v=Re},function(y){d.fail(y),v=Re}))&&f(d.value,d,function(y){return v=y}),v()})})}var mc=(function(){function t(){}return t.prototype._read=function(n,a){var o=this._ctx;return o.error?o.table._trans(null,rt.bind(null,o.error)):o.table._trans("readonly",n).then(a)},t.prototype._write=function(n){var a=this._ctx;return a.error?a.table._trans(null,rt.bind(null,a.error)):a.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var a=this._ctx;a.algorithm=dr(a.algorithm,n)},t.prototype._iterate=function(n,a){return Yi(this._ctx,n,a,this._ctx.table.core)},t.prototype.clone=function(n){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&E(o,n),a._ctx=o,a},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var a=this._ctx;return this._read(function(o){return Yi(a,n,o,a.table.core)})},t.prototype.count=function(n){var a=this;return this._read(function(o){var u=a._ctx,f=u.table.core;if(Rr(u,!0))return f.count({trans:o,query:{index:Wi(u,f.schema),range:u.range}}).then(function(v){return Math.min(v,u.limit)});var d=0;return Yi(u,function(){return++d,!1},o,f).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,a){var o=n.split(".").reverse(),u=o[0],f=o.length-1;function d(b,D){return D?d(b[o[D]],D-1):b[u]}var v=this._ctx.dir==="next"?1:-1;function y(b,D){var x=d(b,f),M=d(D,f);return Le(x,M)*v}return this.toArray(function(b){return b.sort(y)}).then(a)},t.prototype.toArray=function(n){var a=this;return this._read(function(o){var u=a._ctx;if(u.dir==="next"&&Rr(u,!0)&&u.limit>0){var f=u.valueMapper,d=Wi(u,u.table.core.schema);return u.table.core.query({trans:o,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(y){var b=y.result;return f?b.map(f):b})}else{var v=[];return Yi(u,function(y){return v.push(y)},o,u.table.core).then(function(){return v})}},n)},t.prototype.offset=function(n){var a=this._ctx;return n<=0?this:(a.offset+=n,Rr(a)?co(a,function(){var o=n;return function(u,f){return o===0?!0:o===1?(--o,!1):(f(function(){u.advance(o),o=0}),!1)}}):co(a,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),co(this._ctx,function(){var a=n;return function(o,u,f){return--a<=0&&u(f),a>=0}},!0),this},t.prototype.until=function(n,a){return lo(this._ctx,function(o,u,f){return n(o.value)?(u(f),a):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(a){return a[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return lo(this._ctx,function(a){return n(a.value)}),pc(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.key,u)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.primaryKey,u)})},t.prototype.keys=function(n){var a=this._ctx;a.keysOnly=!a.isMatch;var o=[];return this.each(function(u,f){o.push(f.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var a=this._ctx;if(a.dir==="next"&&Rr(a,!0)&&a.limit>0)return this._read(function(u){var f=Wi(a,a.table.core.schema);return a.table.core.query({trans:u,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(u){var f=u.result;return f}).then(n);a.keysOnly=!a.isMatch;var o=[];return this.each(function(u,f){o.push(f.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(a){return a[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,a=n.index&&n.table.schema.idxByName[n.index];if(!a||!a.multi)return this;var o={};return lo(this._ctx,function(u){var f=u.primaryKey.toString(),d=_(o,f);return o[f]=!0,!d}),this},t.prototype.modify=function(n){var a=this,o=this._ctx;return this._write(function(u){var f;typeof n=="function"?f=n:f=function(K){return Ws(K,n)};var d=o.table.core,v=d.schema.primaryKey,y=v.outbound,b=v.extractKey,D=200,x=a.db._options.modifyChunkSize;x&&(typeof x=="object"?D=x[d.name]||x["*"]||200:D=x);var M=[],q=0,k=[],S=function(K,j){var z=j.failures,V=j.numFailures;q+=K-V;for(var B=0,Q=m(z);B<Q.length;B++){var te=Q[B];M.push(z[te])}},R=n===Qs;return a.clone().primaryKeys().then(function(K){var j=Rr(o)&&o.limit===1/0&&(typeof n!="function"||R)&&{index:o.index,range:o.range},z=function(V){var B=Math.min(D,K.length-V),Q=K.slice(V,V+B);return(R?Promise.resolve([]):d.getMany({trans:u,keys:Q,cache:"immutable"})).then(function(te){var J=[],me=[],Ae=y?[]:null,ne=R?Q:[];if(!R)for(var ke=0;ke<B;++ke){var ye=te[ke],Pe={value:We(ye),primKey:K[V+ke]};f.call(Pe,Pe.value,Pe)!==!1&&(Pe.value==null?ne.push(K[V+ke]):!y&&Le(b(ye),b(Pe.value))!==0?(ne.push(K[V+ke]),J.push(Pe.value)):(me.push(Pe.value),y&&Ae.push(K[V+ke])))}return Promise.resolve(J.length>0&&d.mutate({trans:u,type:"add",values:J}).then(function(de){for(var et in de.failures)ne.splice(parseInt(et),1);S(J.length,de)})).then(function(){return(me.length>0||j&&typeof n=="object")&&d.mutate({trans:u,type:"put",keys:Ae,values:me,criteria:j,changeSpec:typeof n!="function"&&n,isAdditionalChunk:V>0}).then(function(de){return S(me.length,de)})}).then(function(){return(ne.length>0||j&&R)&&d.mutate({trans:u,type:"delete",keys:ne,criteria:j,isAdditionalChunk:V>0}).then(function(de){return Vi(o.table,ne,de)}).then(function(de){return S(ne.length,de)})}).then(function(){return K.length>V+B&&z(V+D)})})};return z(0).then(function(){if(M.length>0)throw new Ve("Error modifying one or more objects",M,q,k);return K.length})})})},t.prototype.delete=function(){var n=this._ctx,a=n.range;return Rr(n)&&!n.table.schema.yProps&&(n.isPrimKey||a.type===3)?this._write(function(o){var u=n.table.core.schema.primaryKey,f=a;return n.table.core.count({trans:o,query:{index:u,range:f}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(v){var y=v.failures,b=v.numFailures;if(b)throw new Ve("Could not delete some values",Object.keys(y).map(function(D){return y[D]}),d-b);return d-b})})}):this.modify(Qs)},t})(),Qs=function(t,n){return n.value=null};function yc(t){return ii(mc.prototype,function(a,o){this.db=t;var u=Gs,f=null;if(o)try{u=o()}catch(b){f=b}var d=a._ctx,v=d.table,y=v.hook.reading.fire;this._ctx={table:v,index:d.index,isPrimKey:!d.index||v.schema.primKey.keyPath&&d.index===v.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:d.or,valueMapper:y!==cn?y:null}})}function gc(t,n){return t<n?-1:t===n?0:1}function _c(t,n){return t>n?-1:t===n?0:1}function Vt(t,n,a){var o=t instanceof Js?new t.Collection(t):t;return o._ctx.error=a?new a(n):new TypeError(n),o}function Mr(t){return new t.Collection(t,function(){return Xs("")}).limit(0)}function bc(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function wc(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function Ec(t,n,a,o,u,f){for(var d=Math.min(t.length,o.length),v=-1,y=0;y<d;++y){var b=n[y];if(b!==o[y])return u(t[y],a[y])<0?t.substr(0,y)+a[y]+a.substr(y+1):u(t[y],o[y])<0?t.substr(0,y)+o[y]+a.substr(y+1):v>=0?t.substr(0,v)+n[v]+a.substr(v+1):null;u(t[y],b)<0&&(v=y)}return d<o.length&&f==="next"?t+a.substr(t.length):d<t.length&&f==="prev"?t.substr(0,a.length):v<0?null:t.substr(0,v)+o[v]+a.substr(v+1)}function Zi(t,n,a,o){var u,f,d,v,y,b,D,x=a.length;if(!a.every(function(S){return typeof S=="string"}))return Vt(t,zs);function M(S){u=bc(S),f=wc(S),d=S==="next"?gc:_c;var R=a.map(function(K){return{lower:f(K),upper:u(K)}}).sort(function(K,j){return d(K.lower,j.lower)});v=R.map(function(K){return K.upper}),y=R.map(function(K){return K.lower}),b=S,D=S==="next"?"":o}M("next");var q=new t.Collection(t,function(){return jn(v[0],y[x-1]+o)});q._ondirectionchange=function(S){M(S)};var k=0;return q._addAlgorithm(function(S,R,K){var j=S.key;if(typeof j!="string")return!1;var z=f(j);if(n(z,y,k))return!0;for(var V=null,B=k;B<x;++B){var Q=Ec(j,z,v[B],y[B],d,b);Q===null&&V===null?k=B+1:(V===null||d(V,Q)>0)&&(V=Q)}return R(V!==null?function(){S.continue(V+D)}:K),!1}),q}function jn(t,n,a,o){return{type:2,lower:t,upper:n,lowerOpen:a,upperOpen:o}}function Xs(t){return{type:1,lower:t,upper:t}}var Js=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,a,o,u){o=o!==!1,u=u===!0;try{return this._cmp(n,a)>0||this._cmp(n,a)===0&&(o||u)&&!(o&&u)?Mr(this):new this.Collection(this,function(){return jn(n,a,!o,!u)})}catch{return Vt(this,xn)}},t.prototype.equals=function(n){return n==null?Vt(this,xn):new this.Collection(this,function(){return Xs(n)})},t.prototype.above=function(n){return n==null?Vt(this,xn):new this.Collection(this,function(){return jn(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?Vt(this,xn):new this.Collection(this,function(){return jn(n,void 0,!1)})},t.prototype.below=function(n){return n==null?Vt(this,xn):new this.Collection(this,function(){return jn(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?Vt(this,xn):new this.Collection(this,function(){return jn(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?Vt(this,zs):this.between(n,n+fr,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Zi(this,function(a,o){return a.indexOf(o[0])===0},[n],fr)},t.prototype.equalsIgnoreCase=function(n){return Zi(this,function(a,o){return a===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=Te.apply(ie,arguments);return n.length===0?Mr(this):Zi(this,function(a,o){return o.indexOf(a)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=Te.apply(ie,arguments);return n.length===0?Mr(this):Zi(this,function(a,o){return o.some(function(u){return a.indexOf(u)===0})},n,fr)},t.prototype.anyOf=function(){var n=this,a=Te.apply(ie,arguments),o=this._cmp;try{a.sort(o)}catch{return Vt(this,xn)}if(a.length===0)return Mr(this);var u=new this.Collection(this,function(){return jn(a[0],a[a.length-1])});u._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,a.sort(o)};var f=0;return u._addAlgorithm(function(d,v,y){for(var b=d.key;o(b,a[f])>0;)if(++f,f===a.length)return v(y),!1;return o(b,a[f])===0?!0:(v(function(){d.continue(a[f])}),!1)}),u},t.prototype.notEqual=function(n){return this.inAnyRange([[oo,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=Te.apply(ie,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Vt(this,xn)}var a=n.reduce(function(o,u){return o?o.concat([[o[o.length-1][1],u]]):[[oo,u]]},null);return a.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,a){var o=this,u=this._cmp,f=this._ascending,d=this._descending,v=this._min,y=this._max;if(n.length===0)return Mr(this);if(!n.every(function(B){return B[0]!==void 0&&B[1]!==void 0&&f(B[0],B[1])<=0}))return Vt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ae.InvalidArgument);var b=!a||a.includeLowers!==!1,D=a&&a.includeUppers===!0;function x(B,Q){for(var te=0,J=B.length;te<J;++te){var me=B[te];if(u(Q[0],me[1])<0&&u(Q[1],me[0])>0){me[0]=v(me[0],Q[0]),me[1]=y(me[1],Q[1]);break}}return te===J&&B.push(Q),B}var M=f;function q(B,Q){return M(B[0],Q[0])}var k;try{k=n.reduce(x,[]),k.sort(q)}catch{return Vt(this,xn)}var S=0,R=D?function(B){return f(B,k[S][1])>0}:function(B){return f(B,k[S][1])>=0},K=b?function(B){return d(B,k[S][0])>0}:function(B){return d(B,k[S][0])>=0};function j(B){return!R(B)&&!K(B)}var z=R,V=new this.Collection(this,function(){return jn(k[0][0],k[k.length-1][1],!b,!D)});return V._ondirectionchange=function(B){B==="next"?(z=R,M=f):(z=K,M=d),k.sort(q)},V._addAlgorithm(function(B,Q,te){for(var J=B.key;z(J);)if(++S,S===k.length)return Q(te),!1;return j(J)?!0:(o._cmp(J,k[S][1])===0||o._cmp(J,k[S][0])===0||Q(function(){M===f?B.continue(k[S][0]):B.continue(k[S][1])}),!1)}),V},t.prototype.startsWithAnyOf=function(){var n=Te.apply(ie,arguments);return n.every(function(a){return typeof a=="string"})?n.length===0?Mr(this):this.inAnyRange(n.map(function(a){return[a,a+fr]})):Vt(this,"startsWithAnyOf() only works with strings")},t})();function xc(t){return ii(Js.prototype,function(a,o,u){if(this.db=t,this._ctx={table:a,index:o===":id"?null:o,or:u},this._cmp=this._ascending=Le,this._descending=function(f,d){return Le(d,f)},this._max=function(f,d){return Le(f,d)>0?f:d},this._min=function(f,d){return Le(f,d)<0?f:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new ae.MissingAPI})}function fn(t){return qe(function(n){return ai(n),t(n.target.error),!1})}function ai(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var oi="storagemutated",fo="x-storagemutated-1",zn=ri(null,oi),Tc=(function(){function t(){}return t.prototype._lock=function(){return ee(!ue.global),++this._reculock,this._reculock===1&&!ue.global&&(ue.lockOwnerFor=this),this},t.prototype._unlock=function(){if(ee(!ue.global),--this._reculock===0)for(ue.global||(ue.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{cr(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&ue.lockOwnerFor!==this},t.prototype.create=function(n){var a=this;if(!this.mode)return this;var o=this.db.idbdb,u=this.db._state.dbOpenError;if(ee(!this.idbtrans),!n&&!o)switch(u&&u.name){case"DatabaseClosedError":throw new ae.DatabaseClosed(u);case"MissingAPIError":throw new ae.MissingAPI(u.message,u);default:throw new ae.OpenFailed(u)}if(!this.active)throw new ae.TransactionInactive;return ee(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=qe(function(f){ai(f),a._reject(n.error)}),n.onabort=qe(function(f){ai(f),a.active&&a._reject(new ae.Abort(n.error)),a.active=!1,a.on("abort").fire(f)}),n.oncomplete=qe(function(){a.active=!1,a._resolve(),"mutatedParts"in n&&zn.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,a,o){var u=this;if(n==="readwrite"&&this.mode!=="readwrite")return rt(new ae.ReadOnly("Transaction is readonly"));if(!this.active)return rt(new ae.TransactionInactive);if(this._locked())return new $(function(d,v){u._blockedFuncs.push([function(){u._promise(n,a,o).then(d,v)},ue])});if(o)return Kn(function(){var d=new $(function(v,y){u._lock();var b=a(v,y,u);b&&b.then&&b.then(v,y)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var f=new $(function(d,v){var y=a(d,v,u);y&&y.then&&y.then(d,v)});return f._lib=!0,f},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var a=this._root(),o=$.resolve(n);if(a._waitingFor)a._waitingFor=a._waitingFor.then(function(){return o});else{a._waitingFor=o,a._waitingQueue=[];var u=a.idbtrans.objectStore(a.storeNames[0]);(function d(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(u.get(-1/0).onsuccess=d)})()}var f=a._waitingFor;return new $(function(d,v){o.then(function(y){return a._waitingQueue.push(qe(d.bind(null,y)))},function(y){return a._waitingQueue.push(qe(v.bind(null,y)))}).finally(function(){a._waitingFor===f&&(a._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ae.Abort))},t.prototype.table=function(n){var a=this._memoizedTables||(this._memoizedTables={});if(_(a,n))return a[n];var o=this.schema[n];if(!o)throw new ae.NotFound("Table "+n+" not part of transaction");var u=new this.db.Table(n,o,this);return u.core=this.db.core.table(n),a[n]=u,u},t})();function kc(t){return ii(Tc.prototype,function(a,o,u,f,d){var v=this;a!=="readonly"&&o.forEach(function(y){var b,D=(b=u[y])===null||b===void 0?void 0:b.yProps;D&&(o=o.concat(D.map(function(x){return x.updatesTable})))}),this.db=t,this.mode=a,this.storeNames=o,this.schema=u,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=ri(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new $(function(y,b){v._resolve=y,v._reject=b}),this._completion.then(function(){v.active=!1,v.on.complete.fire()},function(y){var b=v.active;return v.active=!1,v.on.error.fire(y),v.parent?v.parent._reject(y):b&&v.idbtrans&&v.idbtrans.abort(),rt(y)})})}function ho(t,n,a,o,u,f,d,v){return{name:t,keyPath:n,unique:a,multi:o,auto:u,compound:f,src:(a&&!d?"&":"")+(o?"*":"")+(u?"++":"")+$s(n),type:v}}function $s(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function vo(t,n,a){return{name:t,primKey:n,indexes:a,mappedClass:null,idxByName:he(a,function(o){return[o.name,o]})}}function Dc(t){return t.length===1?t[0]:t}var si=function(t){try{return t.only([[]]),si=function(){return[[]]},[[]]}catch{return si=function(){return fr},fr}};function po(t){return t==null?function(){}:typeof t=="string"?Ac(t):function(n){return re(n,t)}}function Ac(t){var n=t.split(".");return n.length===1?function(a){return a[t]}:function(a){return re(a,t)}}function eu(t){return[].slice.call(t)}var Ic=0;function ui(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Sc(t,n,a){function o(x,M){var q=eu(x.objectStoreNames);return{schema:{name:x.name,tables:q.map(function(k){return M.objectStore(k)}).map(function(k){var S=k.keyPath,R=k.autoIncrement,K=g(S),j=S==null,z={},V={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j,compound:K,keyPath:S,autoIncrement:R,unique:!0,extractKey:po(S)},indexes:eu(k.indexNames).map(function(B){return k.index(B)}).map(function(B){var Q=B.name,te=B.unique,J=B.multiEntry,me=B.keyPath,Ae=g(me),ne={name:Q,compound:Ae,keyPath:me,unique:te,multiEntry:J,extractKey:po(me)};return z[ui(me)]=ne,ne}),getIndexByKeyPath:function(B){return z[ui(B)]}};return z[":id"]=V.primaryKey,S!=null&&(z[ui(S)]=V.primaryKey),V})},hasGetAll:q.length>0&&"getAll"in M.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function u(x){if(x.type===3)return null;if(x.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=x.lower,q=x.upper,k=x.lowerOpen,S=x.upperOpen,R=M===void 0?q===void 0?null:n.upperBound(q,!!S):q===void 0?n.lowerBound(M,!!k):n.bound(M,q,!!k,!!S);return R}function f(x){var M=x.name;function q(R){var K=R.trans,j=R.type,z=R.keys,V=R.values,B=R.range;return new Promise(function(Q,te){Q=qe(Q);var J=K.objectStore(M),me=J.keyPath==null,Ae=j==="put"||j==="add";if(!Ae&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var ne=(z||V||{length:1}).length;if(z&&V&&z.length!==V.length)throw new Error("Given keys array must have same length as given values array.");if(ne===0)return Q({numFailures:0,failures:{},results:[],lastResult:void 0});var ke,ye=[],Pe=[],de=0,et=function(hn){++de,ai(hn)};if(j==="deleteRange"){if(B.type===4)return Q({numFailures:de,failures:Pe,results:[],lastResult:void 0});B.type===3?ye.push(ke=J.clear()):ye.push(ke=J.delete(u(B)))}else{var Tt=Ae?me?[V,z]:[V,null]:[z,null],dn=Tt[0],Ft=Tt[1];if(Ae)for(var Qt=0;Qt<ne;++Qt)ye.push(ke=Ft&&Ft[Qt]!==void 0?J[j](dn[Qt],Ft[Qt]):J[j](dn[Qt])),ke.onerror=et;else for(var Qt=0;Qt<ne;++Qt)ye.push(ke=J[j](dn[Qt])),ke.onerror=et}var Un=function(hn){var fi=hn.target.result;ye.forEach(function(an,oa){return an.error!=null&&(Pe[oa]=an.error)}),Q({numFailures:de,failures:Pe,results:j==="delete"?z:ye.map(function(an){return an.result}),lastResult:fi})};ke.onerror=function(hn){et(hn),Un(hn)},ke.onsuccess=Un})}function k(R){var K=R.trans,j=R.values,z=R.query,V=R.reverse,B=R.unique;return new Promise(function(Q,te){Q=qe(Q);var J=z.index,me=z.range,Ae=K.objectStore(M),ne=J.isPrimaryKey?Ae:Ae.index(J.name),ke=V?B?"prevunique":"prev":B?"nextunique":"next",ye=j||!("openKeyCursor"in ne)?ne.openCursor(u(me),ke):ne.openKeyCursor(u(me),ke);ye.onerror=fn(te),ye.onsuccess=qe(function(Pe){var de=ye.result;if(!de){Q(null);return}de.___id=++Ic,de.done=!1;var et=de.continue.bind(de),Tt=de.continuePrimaryKey;Tt&&(Tt=Tt.bind(de));var dn=de.advance.bind(de),Ft=function(){throw new Error("Cursor not started")},Qt=function(){throw new Error("Cursor not stopped")};de.trans=K,de.stop=de.continue=de.continuePrimaryKey=de.advance=Ft,de.fail=qe(te),de.next=function(){var Un=this,hn=1;return this.start(function(){return hn--?Un.continue():Un.stop()}).then(function(){return Un})},de.start=function(Un){var hn=new Promise(function(an,oa){an=qe(an),ye.onerror=fn(oa),de.fail=oa,de.stop=function(yf){de.stop=de.continue=de.continuePrimaryKey=de.advance=Qt,an(yf)}}),fi=function(){if(ye.result)try{Un()}catch(an){de.fail(an)}else de.done=!0,de.start=function(){throw new Error("Cursor behind last entry")},de.stop()};return ye.onsuccess=qe(function(an){ye.onsuccess=fi,fi()}),de.continue=et,de.continuePrimaryKey=Tt,de.advance=dn,fi(),hn},Q(de)},te)})}function S(R){return function(K){return new Promise(function(j,z){j=qe(j);var V=K.trans,B=K.values,Q=K.limit,te=K.query,J=Q===1/0?void 0:Q,me=te.index,Ae=te.range,ne=V.objectStore(M),ke=me.isPrimaryKey?ne:ne.index(me.name),ye=u(Ae);if(Q===0)return j({result:[]});if(R){var Pe=B?ke.getAll(ye,J):ke.getAllKeys(ye,J);Pe.onsuccess=function(dn){return j({result:dn.target.result})},Pe.onerror=fn(z)}else{var de=0,et=B||!("openKeyCursor"in ke)?ke.openCursor(ye):ke.openKeyCursor(ye),Tt=[];et.onsuccess=function(dn){var Ft=et.result;if(!Ft)return j({result:Tt});if(Tt.push(B?Ft.value:Ft.primaryKey),++de===Q)return j({result:Tt});Ft.continue()},et.onerror=fn(z)}})}}return{name:M,schema:x,mutate:q,getMany:function(R){var K=R.trans,j=R.keys;return new Promise(function(z,V){z=qe(z);for(var B=K.objectStore(M),Q=j.length,te=new Array(Q),J=0,me=0,Ae,ne=function(de){var et=de.target;(te[et._pos]=et.result)!=null,++me===J&&z(te)},ke=fn(V),ye=0;ye<Q;++ye){var Pe=j[ye];Pe!=null&&(Ae=B.get(j[ye]),Ae._pos=ye,Ae.onsuccess=ne,Ae.onerror=ke,++J)}J===0&&z(te)})},get:function(R){var K=R.trans,j=R.key;return new Promise(function(z,V){z=qe(z);var B=K.objectStore(M),Q=B.get(j);Q.onsuccess=function(te){return z(te.target.result)},Q.onerror=fn(V)})},query:S(y),openCursor:k,count:function(R){var K=R.query,j=R.trans,z=K.index,V=K.range;return new Promise(function(B,Q){var te=j.objectStore(M),J=z.isPrimaryKey?te:te.index(z.name),me=u(V),Ae=me?J.count(me):J.count();Ae.onsuccess=qe(function(ne){return B(ne.target.result)}),Ae.onerror=fn(Q)})}}}var d=o(t,a),v=d.schema,y=d.hasGetAll,b=v.tables.map(function(x){return f(x)}),D={};return b.forEach(function(x){return D[x.name]=x}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(x){var M=D[x];if(!M)throw new Error("Table '".concat(x,"' not found"));return D[x]},MIN_KEY:-1/0,MAX_KEY:si(n),schema:v}}function Oc(t,n){return n.reduce(function(a,o){var u=o.create;return l(l({},a),u(a))},t)}function Cc(t,n,a,o){var u=a.IDBKeyRange;a.indexedDB;var f=Oc(Sc(n,u,o),t.dbcore);return{dbcore:f}}function qi(t,n){var a=n.db,o=Cc(t._middlewares,a,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(u){var f=u.name;t.core.schema.tables.some(function(d){return d.name===f})&&(u.core=t.core.table(f),t[f]instanceof t.Table&&(t[f].core=u.core))})}function Qi(t,n,a,o){a.forEach(function(u){var f=o[u];n.forEach(function(d){var v=H(d,u);(!v||"value"in v&&v.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?C(d,u,{get:function(){return this.table(u)},set:function(y){P(this,u,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new t.Table(u,f))})})}function mo(t,n){n.forEach(function(a){for(var o in a)a[o]instanceof t.Table&&delete a[o]})}function Lc(t,n){return t._cfg.version-n._cfg.version}function Pc(t,n,a,o){var u=t._dbSchema;a.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=vo("$meta",nu("")[0],[]),t._storeNames.push("$meta"));var f=t._createTransaction("readwrite",t._storeNames,u);f.create(a),f._completion.catch(o);var d=f._reject.bind(f),v=ue.transless||ue;Kn(function(){if(ue.trans=f,ue.transless=v,n===0)m(u).forEach(function(y){go(a,y,u[y].primKey,u[y].indexes)}),qi(t,a),$.follow(function(){return t.on.populate.fire(f)}).catch(d);else return qi(t,a),Mc(t,f,n).then(function(y){return Nc(t,y,f,a)}).catch(d)})}function Rc(t,n){tu(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var a=Ji(t,t.idbdb,n);$i(t,t._dbSchema,n);for(var o=yo(a,t._dbSchema),u=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=n.objectStore(b.name);b.add.forEach(function(x){Ee&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(x.src)),Xi(D,x)})},f=0,d=o.change;f<d.length;f++){var v=d[f],y=u(v);if(typeof y=="object")return y.value}}function Mc(t,n,a){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??a}):$.resolve(a)}function Nc(t,n,a,o){var u=[],f=t._versions,d=t._dbSchema=Ji(t,t.idbdb,o),v=f.filter(function(b){return b._cfg.version>=n});if(v.length===0)return $.resolve();v.forEach(function(b){u.push(function(){var D=d,x=b._cfg.dbschema;$i(t,D,o),$i(t,x,o),d=t._dbSchema=x;var M=yo(D,x);M.add.forEach(function(j){go(o,j[0],j[1].primKey,j[1].indexes)}),M.change.forEach(function(j){if(j.recreate)throw new ae.Upgrade("Not yet support for changing primary key");var z=o.objectStore(j.name);j.add.forEach(function(V){return Xi(z,V)}),j.change.forEach(function(V){z.deleteIndex(V.name),Xi(z,V)}),j.del.forEach(function(V){return z.deleteIndex(V)})});var q=b._cfg.contentUpgrade;if(q&&b._cfg.version>n){qi(t,o),a._memoizedTables={};var k=_e(x);M.del.forEach(function(j){k[j]=D[j]}),mo(t,[t.Transaction.prototype]),Qi(t,[t.Transaction.prototype],m(k),k),a.schema=k;var S=Ce(q);S&&Lr();var R,K=$.follow(function(){if(R=q(a),R&&S){var j=Fn.bind(null,null);R.then(j,j)}});return R&&typeof R.then=="function"?$.resolve(R):K.then(function(){return R})}}),u.push(function(D){var x=b._cfg.dbschema;Kc(x,D),mo(t,[t.Transaction.prototype]),Qi(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),a.schema=t._dbSchema}),u.push(function(D){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===b._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(x){return x!=="$meta"})):D.objectStore("$meta").put(b._cfg.version,"version"))})});function y(){return u.length?$.resolve(u.shift()(a.idbtrans)).then(y):$.resolve()}return y().then(function(){tu(d,o)})}function yo(t,n){var a={del:[],add:[],change:[]},o;for(o in t)n[o]||a.del.push(o);for(o in n){var u=t[o],f=n[o];if(!u)a.add.push([o,f]);else{var d={name:o,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||u.primKey.auto!==f.primKey.auto)d.recreate=!0,a.change.push(d);else{var v=u.idxByName,y=f.idxByName,b=void 0;for(b in v)y[b]||d.del.push(b);for(b in y){var D=v[b],x=y[b];D?D.src!==x.src&&d.change.push(x):d.add.push(x)}(d.del.length>0||d.add.length>0||d.change.length>0)&&a.change.push(d)}}}return a}function go(t,n,a,o){var u=t.db.createObjectStore(n,a.keyPath?{keyPath:a.keyPath,autoIncrement:a.auto}:{autoIncrement:a.auto});return o.forEach(function(f){return Xi(u,f)}),u}function tu(t,n){m(t).forEach(function(a){n.db.objectStoreNames.contains(a)||(Ee&&console.debug("Dexie: Creating missing table",a),go(n,a,t[a].primKey,t[a].indexes))})}function Kc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(a){return t[a]==null&&n.db.deleteObjectStore(a)})}function Xi(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Ji(t,n,a){var o={},u=N(n.objectStoreNames,0);return u.forEach(function(f){for(var d=a.objectStore(f),v=d.keyPath,y=ho($s(v),v||"",!0,!1,!!d.autoIncrement,v&&typeof v!="string",!0),b=[],D=0;D<d.indexNames.length;++D){var x=d.index(d.indexNames[D]);v=x.keyPath;var M=ho(x.name,v,!!x.unique,!!x.multiEntry,!1,v&&typeof v!="string",!1);b.push(M)}o[f]=vo(f,y,b)}),o}function Fc(t,n,a){t.verno=n.version/10;var o=t._dbSchema=Ji(t,n,a);t._storeNames=N(n.objectStoreNames,0),Qi(t,[t._allTables],m(o),o)}function Bc(t,n){var a=Ji(t,t.idbdb,n),o=yo(a,t._dbSchema);return!(o.add.length||o.change.some(function(u){return u.add.length||u.change.length}))}function $i(t,n,a){for(var o=a.db.objectStoreNames,u=0;u<o.length;++u){var f=o[u],d=a.objectStore(f);t._hasGetAll="getAll"in d;for(var v=0;v<d.indexNames.length;++v){var y=d.indexNames[v],b=d.index(y).keyPath,D=typeof b=="string"?b:"["+N(b).join("+")+"]";if(n[f]){var x=n[f].idxByName[D];x&&(x.name=y,delete n[f].idxByName[D],n[f].idxByName[y]=x)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function nu(t){return t.split(",").map(function(n,a){var o,u=n.split(":"),f=(o=u[1])===null||o===void 0?void 0:o.trim();n=u[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),v=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return ho(d,v||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),g(v),a===0,f)})}var jc=(function(){function t(){}return t.prototype._createTableSchema=function(n,a,o){return vo(n,a,o)},t.prototype._parseIndexSyntax=function(n){return nu(n)},t.prototype._parseStoresSpec=function(n,a){var o=this;m(n).forEach(function(u){if(n[u]!==null){var f=o._parseIndexSyntax(n[u]),d=f.shift();if(!d)throw new ae.Schema("Invalid schema for table "+u+": "+n[u]);if(d.unique=!0,d.multi)throw new ae.Schema("Primary key cannot be multiEntry*");f.forEach(function(y){if(y.auto)throw new ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!y.keyPath)throw new ae.Schema("Index must have a name and cannot be an empty string")});var v=o._createTableSchema(u,d,f);a[u]=v}})},t.prototype.stores=function(n){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?E(this._cfg.storesSource,n):n;var o=a._versions,u={},f={};return o.forEach(function(d){E(u,d._cfg.storesSource),f=d._cfg.dbschema={},d._parseStoresSpec(u,f)}),a._dbSchema=f,mo(a,[a._allTables,a,a.Transaction.prototype]),Qi(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],m(f),f),a._storeNames=m(f),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=Ze(this._cfg.contentUpgrade||Re,n),this},t})();function zc(t){return ii(jc.prototype,function(a){this.db=t,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function _o(t,n){var a=t._dbNamesDB;return a||(a=t._dbNamesDB=new Tn(Hi,{addons:[],indexedDB:t,IDBKeyRange:n}),a.version(1).stores({dbnames:"name"})),a.table("dbnames")}function bo(t){return t&&typeof t.databases=="function"}function Gc(t){var n=t.indexedDB,a=t.IDBKeyRange;return bo(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(u){return u.name}).filter(function(u){return u!==Hi})}):_o(n,a).toCollection().primaryKeys()}function Hc(t,n){var a=t.indexedDB,o=t.IDBKeyRange;!bo(a)&&n!==Hi&&_o(a,o).put({name:n}).catch(Re)}function Uc(t,n){var a=t.indexedDB,o=t.IDBKeyRange;!bo(a)&&n!==Hi&&_o(a,o).delete(n).catch(Re)}function wo(t){return Kn(function(){return ue.letThrough=!0,t()})}function Vc(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(a){var o=function(){return indexedDB.databases().finally(a)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var Eo;function xo(t){return!("from"in t)}var xt=function(t,n){if(this)E(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var a=new xt;return t&&"d"in t&&E(a,t),a}};T(xt.prototype,(Eo={add:function(t){return ci(this,t),this},addKey:function(t){return li(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(a){return li(n,a,a)}),this},hasKey:function(t){var n=ea(this).next(t).value;return n&&Le(n.from,t)<=0&&Le(n.to,t)>=0}},Eo[wt]=function(){return ea(this)},Eo));function li(t,n,a){var o=Le(n,a);if(!isNaN(o)){if(o>0)throw RangeError();if(xo(t))return E(t,{from:n,to:a,d:1});var u=t.l,f=t.r;if(Le(a,t.from)<0)return u?li(u,n,a):t.l={from:n,to:a,d:1,l:null,r:null},iu(t);if(Le(n,t.to)>0)return f?li(f,n,a):t.r={from:n,to:a,d:1,l:null,r:null},iu(t);Le(n,t.from)<0&&(t.from=n,t.l=null,t.d=f?f.d+1:1),Le(a,t.to)>0&&(t.to=a,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;u&&!t.l&&ci(t,u),f&&d&&ci(t,f)}}function ci(t,n){function a(o,u){var f=u.from,d=u.to,v=u.l,y=u.r;li(o,f,d),v&&a(o,v),y&&a(o,y)}xo(n)||a(t,n)}function ru(t,n){var a=ea(n),o=a.next();if(o.done)return!1;for(var u=o.value,f=ea(t),d=f.next(u.from),v=d.value;!o.done&&!d.done;){if(Le(v.from,u.to)<=0&&Le(v.to,u.from)>=0)return!0;Le(u.from,v.from)<0?u=(o=a.next(v.from)).value:v=(d=f.next(u.from)).value}return!1}function ea(t){var n=xo(t)?null:{s:0,n:t};return{next:function(a){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&Le(a,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||Le(a,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function iu(t){var n,a,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((a=t.l)===null||a===void 0?void 0:a.d)||0),u=o>1?"r":o<-1?"l":"";if(u){var f=u==="r"?"l":"r",d=l({},t),v=t[u];t.from=v.from,t.to=v.to,t[u]=v[u],d[u]=v[f],t[f]=d,d.d=au(d)}t.d=au(t)}function au(t){var n=t.r,a=t.l;return(n?a?Math.max(n.d,a.d):n.d:a?a.d:0)+1}function ta(t,n){return m(n).forEach(function(a){t[a]?ci(t[a],n[a]):t[a]=ze(n[a])}),t}function To(t,n){return t.all||n.all||Object.keys(t).some(function(a){return n[a]&&ru(n[a],t[a])})}var hr={},ko={},Do=!1;function na(t,n){ta(ko,t),Do||(Do=!0,setTimeout(function(){Do=!1;var a=ko;ko={},Ao(a,!1)},0))}function Ao(t,n){n===void 0&&(n=!1);var a=new Set;if(t.all)for(var o=0,u=Object.values(hr);o<u.length;o++){var f=u[o];ou(f,t,a,n)}else for(var d in t){var v=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(v){var y=v[1],b=v[2],f=hr["idb://".concat(y,"/").concat(b)];f&&ou(f,t,a,n)}}a.forEach(function(D){return D()})}function ou(t,n,a,o){for(var u=[],f=0,d=Object.entries(t.queries.query);f<d.length;f++){for(var v=d[f],y=v[0],b=v[1],D=[],x=0,M=b;x<M.length;x++){var q=M[x];To(n,q.obsSet)?q.subscribers.forEach(function(K){return a.add(K)}):o&&D.push(q)}o&&u.push([y,D])}if(o)for(var k=0,S=u;k<S.length;k++){var R=S[k],y=R[0],D=R[1];t.queries.query[y]=D}}function Wc(t){var n=t._state,a=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?rt(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,u=Math.round(t.verno*10),f=!1;function d(){if(n.openCanceller!==o)throw new ae.DatabaseClosed("db.open() was cancelled")}var v=n.dbReadyResolve,y=null,b=!1,D=function(){return new $(function(x,M){if(d(),!a)throw new ae.MissingAPI;var q=t.name,k=n.autoSchema||!u?a.open(q):a.open(q,u);if(!k)throw new ae.MissingAPI;k.onerror=fn(M),k.onblocked=qe(t._fireOnBlocked),k.onupgradeneeded=qe(function(S){if(y=k.transaction,n.autoSchema&&!t._options.allowEmptyDB){k.onerror=ai,y.abort(),k.result.close();var R=a.deleteDatabase(q);R.onsuccess=R.onerror=qe(function(){M(new ae.NoSuchDatabase("Database ".concat(q," doesnt exist")))})}else{y.onerror=fn(M);var K=S.oldVersion>Math.pow(2,62)?0:S.oldVersion;b=K<1,t.idbdb=k.result,f&&Rc(t,y),Pc(t,K/10,y,M)}},M),k.onsuccess=qe(function(){y=null;var S=t.idbdb=k.result,R=N(S.objectStoreNames);if(R.length>0)try{var K=S.transaction(Dc(R),"readonly");if(n.autoSchema)Fc(t,S,K);else if($i(t,t._dbSchema,K),!Bc(t,K)&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),S.close(),u=S.version+1,f=!0,x(D());qi(t,K)}catch{}Pr.push(t),S.onversionchange=qe(function(j){n.vcFired=!0,t.on("versionchange").fire(j)}),S.onclose=qe(function(){t.close({disableAutoOpen:!1})}),b&&Hc(t._deps,q),x()},M)}).catch(function(x){switch(x?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(u>0)return u=0,D();break}return $.reject(x)})};return $.race([o,(typeof navigator>"u"?$.resolve():Vc()).then(D)]).then(function(){return d(),n.onReadyBeingFired=[],$.resolve(wo(function(){return t.on.ready.fire(t.vip)})).then(function x(){if(n.onReadyBeingFired.length>0){var M=n.onReadyBeingFired.reduce(Ze,Re);return n.onReadyBeingFired=[],$.resolve(wo(function(){return M(t.vip)})).then(x)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(x){n.dbOpenError=x;try{y&&y.abort()}catch{}return o===n.openCanceller&&t._close(),rt(x)}).finally(function(){n.openComplete=!0,v()}).then(function(){if(b){var x={};t.tables.forEach(function(M){M.schema.indexes.forEach(function(q){q.name&&(x["idb://".concat(t.name,"/").concat(M.name,"/").concat(q.name)]=new xt(-1/0,[[[]]]))}),x["idb://".concat(t.name,"/").concat(M.name,"/")]=x["idb://".concat(t.name,"/").concat(M.name,"/:dels")]=new xt(-1/0,[[[]]])}),zn(oi).fire(x),Ao(x,!0)}return t})}function Io(t){var n=function(d){return t.next(d)},a=function(d){return t.throw(d)},o=f(n),u=f(a);function f(d){return function(v){var y=d(v),b=y.value;return y.done?b:!b||typeof b.then!="function"?g(b)?Promise.all(b).then(o,u):o(b):b.then(o,u)}}return f(n)()}function Yc(t,n,a){var o=arguments.length;if(o<2)throw new ae.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];a=u.pop();var f=je(u);return[t,f,a]}function su(t,n,a,o,u){return $.resolve().then(function(){var f=ue.transless||ue,d=t._createTransaction(n,a,t._dbSchema,o);d.explicit=!0;var v={trans:d,transless:f};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(x){return x.name===Ct.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return su(t,n,a,null,u)})):rt(x)}var y=Ce(u);y&&Lr();var b,D=$.follow(function(){if(b=u.call(d,d),b)if(y){var x=Fn.bind(null,null);b.then(x,x)}else typeof b.next=="function"&&typeof b.throw=="function"&&(b=Io(b))},v);return(b&&typeof b.then=="function"?$.resolve(b).then(function(x){return d.active?x:rt(new ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return b})).then(function(x){return o&&d._resolve(),d._completion.then(function(){return x})}).catch(function(x){return d._reject(x),rt(x)})})}function ra(t,n,a){for(var o=g(t)?t.slice():[t],u=0;u<a;++u)o.push(n);return o}function Zc(t){return l(l({},t),{table:function(n){var a=t.table(n),o=a.schema,u={},f=[];function d(S,R,K){var j=ui(S),z=u[j]=u[j]||[],V=S==null?0:typeof S=="string"?1:S.length,B=R>0,Q=l(l({},K),{name:B?"".concat(j,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:B,keyTail:R,keyLength:V,extractKey:po(S),unique:!B&&K.unique});if(z.push(Q),Q.isPrimaryKey||f.push(Q),V>1){var te=V===2?S[0]:S.slice(0,V-1);d(te,R+1,K)}return z.sort(function(J,me){return J.keyTail-me.keyTail}),Q}var v=d(o.primaryKey.keyPath,0,o.primaryKey);u[":id"]=[v];for(var y=0,b=o.indexes;y<b.length;y++){var D=b[y];d(D.keyPath,0,D)}function x(S){var R=u[ui(S)];return R&&R[0]}function M(S,R){return{type:S.type===1?2:S.type,lower:ra(S.lower,S.lowerOpen?t.MAX_KEY:t.MIN_KEY,R),lowerOpen:!0,upper:ra(S.upper,S.upperOpen?t.MIN_KEY:t.MAX_KEY,R),upperOpen:!0}}function q(S){var R=S.query.index;return R.isVirtual?l(l({},S),{query:{index:R.lowLevelIndex,range:M(S.query.range,R.keyTail)}}):S}var k=l(l({},a),{schema:l(l({},o),{primaryKey:v,indexes:f,getIndexByKeyPath:x}),count:function(S){return a.count(q(S))},query:function(S){return a.query(q(S))},openCursor:function(S){var R=S.query.index,K=R.keyTail,j=R.isVirtual,z=R.keyLength;if(!j)return a.openCursor(S);function V(B){function Q(J){J!=null?B.continue(ra(J,S.reverse?t.MAX_KEY:t.MIN_KEY,K)):S.unique?B.continue(B.key.slice(0,z).concat(S.reverse?t.MIN_KEY:t.MAX_KEY,K)):B.continue()}var te=Object.create(B,{continue:{value:Q},continuePrimaryKey:{value:function(J,me){B.continuePrimaryKey(ra(J,t.MAX_KEY,K),me)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var J=B.key;return z===1?J[0]:J.slice(0,z)}},value:{get:function(){return B.value}}});return te}return a.openCursor(q(S)).then(function(B){return B&&V(B)})}});return k}})}var qc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Zc};function So(t,n,a,o){return a=a||{},o=o||"",m(t).forEach(function(u){if(!_(n,u))a[o+u]=void 0;else{var f=t[u],d=n[u];if(typeof f=="object"&&typeof d=="object"&&f&&d){var v=rn(f),y=rn(d);v!==y?a[o+u]=n[u]:v==="Object"?So(f,d,a,o+u+"."):f!==d&&(a[o+u]=n[u])}else f!==d&&(a[o+u]=n[u])}}),m(n).forEach(function(u){_(t,u)||(a[o+u]=n[u])}),a}function Oo(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var Qc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return l(l({},t),{table:function(n){var a=t.table(n),o=a.schema.primaryKey,u=l(l({},a),{mutate:function(f){var d=ue.trans,v=d.table(n).hook,y=v.deleting,b=v.creating,D=v.updating;switch(f.type){case"add":if(b.fire===Re)break;return d._promise("readwrite",function(){return x(f)},!0);case"put":if(b.fire===Re&&D.fire===Re)break;return d._promise("readwrite",function(){return x(f)},!0);case"delete":if(y.fire===Re)break;return d._promise("readwrite",function(){return x(f)},!0);case"deleteRange":if(y.fire===Re)break;return d._promise("readwrite",function(){return M(f)},!0)}return a.mutate(f);function x(k){var S=ue.trans,R=k.keys||Oo(o,k);if(!R)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?l(l({},k),{keys:R}):l({},k),k.type!=="delete"&&(k.values=c([],k.values)),k.keys&&(k.keys=c([],k.keys)),Xc(a,k,R).then(function(K){var j=R.map(function(z,V){var B=K[V],Q={onerror:null,onsuccess:null};if(k.type==="delete")y.fire.call(Q,z,B,S);else if(k.type==="add"||B===void 0){var te=b.fire.call(Q,z,k.values[V],S);z==null&&te!=null&&(z=te,k.keys[V]=z,o.outbound||ve(k.values[V],o.keyPath,z))}else{var J=So(B,k.values[V]),me=D.fire.call(Q,J,z,B,S);if(me){var Ae=k.values[V];Object.keys(me).forEach(function(ne){_(Ae,ne)?Ae[ne]=me[ne]:ve(Ae,ne,me[ne])})}}return Q});return a.mutate(k).then(function(z){for(var V=z.failures,B=z.results,Q=z.numFailures,te=z.lastResult,J=0;J<R.length;++J){var me=B?B[J]:R[J],Ae=j[J];me==null?Ae.onerror&&Ae.onerror(V[J]):Ae.onsuccess&&Ae.onsuccess(k.type==="put"&&K[J]?k.values[J]:me)}return{failures:V,results:B,numFailures:Q,lastResult:te}}).catch(function(z){return j.forEach(function(V){return V.onerror&&V.onerror(z)}),Promise.reject(z)})})}function M(k){return q(k.trans,k.range,1e4)}function q(k,S,R){return a.query({trans:k,values:!1,query:{index:o,range:S},limit:R}).then(function(K){var j=K.result;return x({type:"delete",keys:j,trans:k}).then(function(z){return z.numFailures>0?Promise.reject(z.failures[0]):j.length<R?{failures:[],numFailures:0,lastResult:void 0}:q(k,l(l({},S),{lower:j[j.length-1],lowerOpen:!0}),R)})})}}});return u}})}};function Xc(t,n,a){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:a,cache:"immutable"})}function uu(t,n,a){try{if(!n||n.keys.length<t.length)return null;for(var o=[],u=0,f=0;u<n.keys.length&&f<t.length;++u)Le(n.keys[u],t[f])===0&&(o.push(a?We(n.values[u]):n.values[u]),++f);return o.length===t.length?o:null}catch{return null}}var Jc={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var a=t.table(n);return l(l({},a),{getMany:function(o){if(!o.cache)return a.getMany(o);var u=uu(o.keys,o.trans._cache,o.cache==="clone");return u?$.resolve(u):a.getMany(o).then(function(f){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?We(f):f},f})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),a.mutate(o)}})}}}};function lu(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function cu(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var $c={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,a=new xt(t.MIN_KEY,t.MAX_KEY);return l(l({},t),{transaction:function(o,u,f){if(ue.subscr&&u!=="readonly")throw new ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ue.querier));return t.transaction(o,u,f)},table:function(o){var u=t.table(o),f=u.schema,d=f.primaryKey,v=f.indexes,y=d.extractKey,b=d.outbound,D=d.autoIncrement&&v.filter(function(k){return k.compound&&k.keyPath.includes(d.keyPath)}),x=l(l({},u),{mutate:function(k){var S,R,K=k.trans,j=k.mutatedParts||(k.mutatedParts={}),z=function(ye){var Pe="idb://".concat(n,"/").concat(o,"/").concat(ye);return j[Pe]||(j[Pe]=new xt)},V=z(""),B=z(":dels"),Q=k.type,te=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[Oo(d,k).filter(function(ye){return ye}),k.values]:[],J=te[0],me=te[1],Ae=k.trans._cache;if(g(J)){V.addKeys(J);var ne=Q==="delete"||J.length===me.length?uu(J,Ae):null;ne||B.addKeys(J),(ne||me)&&ef(z,f,ne,me)}else if(J){var ke={from:(S=J.lower)!==null&&S!==void 0?S:t.MIN_KEY,to:(R=J.upper)!==null&&R!==void 0?R:t.MAX_KEY};B.add(ke),V.add(ke)}else V.add(a),B.add(a),f.indexes.forEach(function(ye){return z(ye.name).add(a)});return u.mutate(k).then(function(ye){return J&&(k.type==="add"||k.type==="put")&&(V.addKeys(ye.results),D&&D.forEach(function(Pe){for(var de=k.values.map(function(Ft){return Pe.extractKey(Ft)}),et=Pe.keyPath.findIndex(function(Ft){return Ft===d.keyPath}),Tt=0,dn=ye.results.length;Tt<dn;++Tt)de[Tt][et]=ye.results[Tt];z(Pe.name).addKeys(de)})),K.mutatedParts=ta(K.mutatedParts||{},j),ye})}}),M=function(k){var S,R,K=k.query,j=K.index,z=K.range;return[j,new xt((S=z.lower)!==null&&S!==void 0?S:t.MIN_KEY,(R=z.upper)!==null&&R!==void 0?R:t.MAX_KEY)]},q={get:function(k){return[d,new xt(k.key)]},getMany:function(k){return[d,new xt().addKeys(k.keys)]},count:M,query:M,openCursor:M};return m(q).forEach(function(k){x[k]=function(S){var R=ue.subscr,K=!!R,j=lu(ue,u)&&cu(k,S),z=j?S.obsSet={}:R;if(K){var V=function(ne){var ke="idb://".concat(n,"/").concat(o,"/").concat(ne);return z[ke]||(z[ke]=new xt)},B=V(""),Q=V(":dels"),te=q[k](S),J=te[0],me=te[1];if(k==="query"&&J.isPrimaryKey&&!S.values?Q.add(me):V(J.name||"").add(me),!J.isPrimaryKey)if(k==="count")Q.add(a);else{var Ae=k==="query"&&b&&S.values&&u.query(l(l({},S),{values:!1}));return u[k].apply(this,arguments).then(function(ne){if(k==="query"){if(b&&S.values)return Ae.then(function(de){var et=de.result;return B.addKeys(et),ne});var ke=S.values?ne.result.map(y):ne.result;S.values?B.addKeys(ke):Q.addKeys(ke)}else if(k==="openCursor"){var ye=ne,Pe=S.values;return ye&&Object.create(ye,{key:{get:function(){return Q.addKey(ye.primaryKey),ye.key}},primaryKey:{get:function(){var de=ye.primaryKey;return Q.addKey(de),de}},value:{get:function(){return Pe&&B.addKey(ye.primaryKey),ye.value}}})}return ne})}}return u[k].apply(this,arguments)}}),x}})}};function ef(t,n,a,o){function u(f){var d=t(f.name||"");function v(b){return b!=null?f.extractKey(b):null}var y=function(b){return f.multiEntry&&g(b)?b.forEach(function(D){return d.addKey(D)}):d.addKey(b)};(a||o).forEach(function(b,D){var x=a&&v(a[D]),M=o&&v(o[D]);Le(x,M)!==0&&(x!=null&&y(x),M!=null&&y(M))})}n.indexes.forEach(u)}function fu(t,n,a){if(a.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(a.numFailures===o)return null;var u=l({},n);return g(u.keys)&&(u.keys=u.keys.filter(function(f,d){return!(d in a.failures)})),"values"in u&&g(u.values)&&(u.values=u.values.filter(function(f,d){return!(d in a.failures)})),u}function tf(t,n){return n.lower===void 0?!0:n.lowerOpen?Le(t,n.lower)>0:Le(t,n.lower)>=0}function nf(t,n){return n.upper===void 0?!0:n.upperOpen?Le(t,n.upper)<0:Le(t,n.upper)<=0}function Co(t,n){return tf(t,n)&&nf(t,n)}function du(t,n,a,o,u,f){if(!a||a.length===0)return t;var d=n.query.index,v=d.multiEntry,y=n.query.range,b=o.schema.primaryKey,D=b.extractKey,x=d.extractKey,M=(d.lowLevelIndex||d).extractKey,q=a.reduce(function(k,S){var R=k,K=[];if(S.type==="add"||S.type==="put")for(var j=new xt,z=S.values.length-1;z>=0;--z){var V=S.values[z],B=D(V);if(!j.hasKey(B)){var Q=x(V);(v&&g(Q)?Q.some(function(ne){return Co(ne,y)}):Co(Q,y))&&(j.addKey(B),K.push(V))}}switch(S.type){case"add":{var te=new xt().addKeys(n.values?k.map(function(ne){return D(ne)}):k);R=k.concat(n.values?K.filter(function(ne){var ke=D(ne);return te.hasKey(ke)?!1:(te.addKey(ke),!0)}):K.map(function(ne){return D(ne)}).filter(function(ne){return te.hasKey(ne)?!1:(te.addKey(ne),!0)}));break}case"put":{var J=new xt().addKeys(S.values.map(function(ne){return D(ne)}));R=k.filter(function(ne){return!J.hasKey(n.values?D(ne):ne)}).concat(n.values?K:K.map(function(ne){return D(ne)}));break}case"delete":var me=new xt().addKeys(S.keys);R=k.filter(function(ne){return!me.hasKey(n.values?D(ne):ne)});break;case"deleteRange":var Ae=S.range;R=k.filter(function(ne){return!Co(D(ne),Ae)});break}return R},t);return q===t?t:(q.sort(function(k,S){return Le(M(k),M(S))||Le(D(k),D(S))}),n.limit&&n.limit<1/0&&(q.length>n.limit?q.length=n.limit:t.length===n.limit&&q.length<n.limit&&(u.dirty=!0)),f?Object.freeze(q):q)}function hu(t,n){return Le(t.lower,n.lower)===0&&Le(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function rf(t,n,a,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var u=Le(t,n);if(u===0){if(a&&o)return 0;if(a)return 1;if(o)return-1}return u}function af(t,n,a,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var u=Le(t,n);if(u===0){if(a&&o)return 0;if(a)return-1;if(o)return 1}return u}function of(t,n){return rf(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&af(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function sf(t,n,a,o){var u=hr["idb://".concat(t,"/").concat(n)];if(!u)return[];var f=u.queries[a];if(!f)return[null,!1,u,null];var d=o.query?o.query.index.name:null,v=f[d||""];if(!v)return[null,!1,u,null];switch(a){case"query":var y=v.find(function(x){return x.req.limit===o.limit&&x.req.values===o.values&&hu(x.req.query.range,o.query.range)});if(y)return[y,!0,u,v];var b=v.find(function(x){var M="limit"in x.req?x.req.limit:1/0;return M>=o.limit&&(o.values?x.req.values:!0)&&of(x.req.query.range,o.query.range)});return[b,!1,u,v];case"count":var D=v.find(function(x){return hu(x.req.query.range,o.query.range)});return[D,!!D,u,v]}}function uf(t,n,a,o){t.subscribers.add(a),o.addEventListener("abort",function(){t.subscribers.delete(a),t.subscribers.size===0&&lf(t,n)})}function lf(t,n){setTimeout(function(){t.subscribers.size===0&&W(n,t)},3e3)}var cf={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,a=l(l({},t),{transaction:function(o,u,f){var d=t.transaction(o,u,f);if(u==="readwrite"){var v=new AbortController,y=v.signal,b=function(D){return function(){if(v.abort(),u==="readwrite"){for(var x=new Set,M=0,q=o;M<q.length;M++){var k=q[M],S=hr["idb://".concat(n,"/").concat(k)];if(S){var R=t.table(k),K=S.optimisticOps.filter(function(Pe){return Pe.trans===d});if(d._explicit&&D&&d.mutatedParts)for(var j=0,z=Object.values(S.queries.query);j<z.length;j++)for(var V=z[j],B=0,Q=V.slice();B<Q.length;B++){var te=Q[B];To(te.obsSet,d.mutatedParts)&&(W(V,te),te.subscribers.forEach(function(Pe){return x.add(Pe)}))}else if(K.length>0){S.optimisticOps=S.optimisticOps.filter(function(Pe){return Pe.trans!==d});for(var J=0,me=Object.values(S.queries.query);J<me.length;J++)for(var V=me[J],Ae=0,ne=V.slice();Ae<ne.length;Ae++){var te=ne[Ae];if(te.res!=null&&d.mutatedParts)if(D&&!te.dirty){var ke=Object.isFrozen(te.res),ye=du(te.res,te.req,K,R,te,ke);te.dirty?(W(V,te),te.subscribers.forEach(function(et){return x.add(et)})):ye!==te.res&&(te.res=ye,te.promise=$.resolve({result:ye}))}else te.dirty&&W(V,te),te.subscribers.forEach(function(et){return x.add(et)})}}}}x.forEach(function(Pe){return Pe()})}}};d.addEventListener("abort",b(!1),{signal:y}),d.addEventListener("error",b(!1),{signal:y}),d.addEventListener("complete",b(!0),{signal:y})}return d},table:function(o){var u=t.table(o),f=u.schema.primaryKey,d=l(l({},u),{mutate:function(v){var y=ue.trans;if(f.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return u.mutate(v);var b=hr["idb://".concat(n,"/").concat(o)];if(!b)return u.mutate(v);var D=u.mutate(v);return(v.type==="add"||v.type==="put")&&(v.values.length>=50||Oo(f,v).some(function(x){return x==null}))?D.then(function(x){var M=l(l({},v),{values:v.values.map(function(k,S){var R;if(x.failures[S])return k;var K=!((R=f.keyPath)===null||R===void 0)&&R.includes(".")?We(k):l({},k);return ve(K,f.keyPath,x.results[S]),K})}),q=fu(b,M,x);b.optimisticOps.push(q),queueMicrotask(function(){return v.mutatedParts&&na(v.mutatedParts)})}):(b.optimisticOps.push(v),v.mutatedParts&&na(v.mutatedParts),D.then(function(x){if(x.numFailures>0){W(b.optimisticOps,v);var M=fu(b,v,x);M&&b.optimisticOps.push(M),v.mutatedParts&&na(v.mutatedParts)}}),D.catch(function(){W(b.optimisticOps,v),v.mutatedParts&&na(v.mutatedParts)})),D},query:function(v){var y;if(!lu(ue,u)||!cu("query",v))return u.query(v);var b=((y=ue.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",D=ue,x=D.requery,M=D.signal,q=sf(n,o,"query",v),k=q[0],S=q[1],R=q[2],K=q[3];if(k&&S)k.obsSet=v.obsSet;else{var j=u.query(v).then(function(z){var V=z.result;if(k&&(k.res=V),b){for(var B=0,Q=V.length;B<Q;++B)Object.freeze(V[B]);Object.freeze(V)}else z.result=We(V);return z}).catch(function(z){return K&&k&&W(K,k),Promise.reject(z)});k={obsSet:v.obsSet,promise:j,subscribers:new Set,type:"query",req:v,dirty:!1},K?K.push(k):(K=[k],R||(R=hr["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),R.queries.query[v.query.index.name||""]=K)}return uf(k,K,x,M),k.promise.then(function(z){return{result:du(z.result,v,R?.optimisticOps,u,k,b)}})}});return d}});return a}};function ia(t,n){return new Proxy(t,{get:function(a,o,u){return o==="db"?n:Reflect.get(a,o,u)}})}var Tn=(function(){function t(n,a){var o=this;this._middlewares={},this.verno=0;var u=t.dependencies;this._options=a=l({addons:t.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange};var f=a.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Re,dbReadyPromise:null,cancelOpen:Re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};d.dbReadyPromise=new $(function(y){d.dbReadyResolve=y}),d.openCanceller=new $(function(y,b){d.cancelOpen=b}),this._state=d,this.name=n,this.on=ri(this,"populate","blocked","versionchange","close",{ready:[Ze,Re]}),this.once=function(y,b){var D=function(){for(var x=[],M=0;M<arguments.length;M++)x[M]=arguments[M];o.on(y).unsubscribe(D),b.apply(o,x)};return o.on(y,D)},this.on.ready.subscribe=X(this.on.ready.subscribe,function(y){return function(b,D){t.vip(function(){var x=o._state;if(x.openComplete)x.dbOpenError||$.resolve().then(b),D&&y(b);else if(x.onReadyBeingFired)x.onReadyBeingFired.push(b),D&&y(b);else{y(b);var M=o;D||y(function q(){M.on.ready.unsubscribe(b),M.on.ready.unsubscribe(q)})}})}}),this.Collection=yc(this),this.Table=vc(this),this.Transaction=kc(this),this.Version=zc(this),this.WhereClause=xc(this),this.on("versionchange",function(y){y.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=si(a.IDBKeyRange),this._createTransaction=function(y,b,D,x){return new o.Transaction(y,b,D,o._options.chromeTransactionDurability,x)},this._fireOnBlocked=function(y){o.on("blocked").fire(y),Pr.filter(function(b){return b.name===o.name&&b!==o&&!b._state.vcFired}).map(function(b){return b.on("versionchange").fire(y)})},this.use(Jc),this.use(cf),this.use($c),this.use(qc),this.use(Qc);var v=new Proxy(this,{get:function(y,b,D){if(b==="_vip")return!0;if(b==="table")return function(M){return ia(o.table(M),v)};var x=Reflect.get(y,b,D);return x instanceof Ys?ia(x,v):b==="tables"?x.map(function(M){return ia(M,v)}):b==="_createTransaction"?function(){var M=x.apply(this,arguments);return ia(M,v)}:x}});this.vip=v,f.forEach(function(y){return y(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new ae.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var a=this._versions,o=a.filter(function(u){return u._cfg.version===n})[0];return o||(o=new this.Version(n),a.push(o),a.sort(Lc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var a=this;return this.idbdb&&(this._state.openComplete||ue.letThrough||this._vip)?n():new $(function(o,u){if(a._state.openComplete)return u(new ae.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen){u(new ae.DatabaseClosed);return}a.open().catch(Re)}a._state.dbReadyPromise.then(o,u)}).then(n)},t.prototype.use=function(n){var a=n.stack,o=n.create,u=n.level,f=n.name;f&&this.unuse({stack:a,name:f});var d=this._middlewares[a]||(this._middlewares[a]=[]);return d.push({stack:a,create:o,level:u??10,name:f}),d.sort(function(v,y){return v.level-y.level}),this},t.prototype.unuse=function(n){var a=n.stack,o=n.name,u=n.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return u?f.create!==u:o?f.name!==o:!1})),this},t.prototype.open=function(){var n=this;return cr(Nn,function(){return Wc(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,a=Pr.indexOf(this);if(a>=0&&Pr.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new $(function(o){n.dbReadyResolve=o}),n.openCanceller=new $(function(o,u){n.cancelOpen=u}))},t.prototype.close=function(n){var a=n===void 0?{disableAutoOpen:!0}:n,o=a.disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new ae.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new ae.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},t.prototype.delete=function(n){var a=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",u=this._state;return new $(function(f,d){var v=function(){a.close(n);var y=a._deps.indexedDB.deleteDatabase(a.name);y.onsuccess=qe(function(){Uc(a._deps,a.name),f()}),y.onerror=fn(d),y.onblocked=a._fireOnBlocked};if(o)throw new ae.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(v):v()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return m(this._allTables).map(function(a){return n._allTables[a]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=Yc.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,a,o){var u=this,f=ue.trans;(!f||f.db!==this||n.indexOf("!")!==-1)&&(f=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var v,y;try{if(y=a.map(function(D){var x=D instanceof u.Table?D.name:D;if(typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),n=="r"||n===so)v=so;else if(n=="rw"||n==uo)v=uo;else throw new ae.InvalidArgument("Invalid transaction mode: "+n);if(f){if(f.mode===so&&v===uo)if(d)f=null;else throw new ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f&&y.forEach(function(D){if(f&&f.storeNames.indexOf(D)===-1)if(d)f=null;else throw new ae.SubTransaction("Table "+D+" not included in parent transaction.")}),d&&f&&!f.active&&(f=null)}}catch(D){return f?f._promise(null,function(x,M){M(D)}):rt(D)}var b=su.bind(null,this,v,y,f,o);return f?f._promise(v,b,"lock"):ue.trans?cr(ue.transless,function(){return u._whenReady(b)}):this._whenReady(b)},t.prototype.table=function(n){if(!_(this._allTables,n))throw new ae.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),ff=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",df=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,a,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:a,complete:o}:n)},t.prototype[ff]=function(){return this},t})(),aa;try{aa={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{aa={indexedDB:null,IDBKeyRange:null}}function vu(t){var n=!1,a,o=new df(function(u){var f=Ce(t);function d(K){var j=Or();try{f&&Lr();var z=Kn(t,K);return f&&(z=z.finally(Fn)),z}finally{j&&Cr()}}var v=!1,y,b={},D={},x={get closed(){return v},unsubscribe:function(){v||(v=!0,y&&y.abort(),M&&zn.storagemutated.unsubscribe(S))}};u.start&&u.start(x);var M=!1,q=function(){return io(R)};function k(){return To(D,b)}var S=function(K){ta(b,K),k()&&q()},R=function(){if(!(v||!aa.indexedDB)){b={};var K={};y&&y.abort(),y=new AbortController;var j={subscr:K,signal:y.signal,requery:q,querier:t,trans:null},z=d(j);Promise.resolve(z).then(function(V){n=!0,a=V,!(v||j.signal.aborted)&&(b={},D=K,!Mt(D)&&!M&&(zn(oi,S),M=!0),io(function(){return!v&&u.next&&u.next(V)}))},function(V){n=!1,["DatabaseClosedError","AbortError"].includes(V?.name)||v||io(function(){v||u.error&&u.error(V)})})}};return setTimeout(q,0),x});return o.hasValue=function(){return n},o.getValue=function(){return a},o}var vr=Tn;T(vr,l(l({},En),{delete:function(t){var n=new vr(t,{addons:[]});return n.delete()},exists:function(t){return new vr(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Gc(vr.dependencies).then(t)}catch{return rt(new ae.MissingAPI)}},defineClass:function(){function t(n){E(this,n)}return t},ignoreTransaction:function(t){return ue.trans?cr(ue.transless,t):t()},vip:wo,async:function(t){return function(){try{var n=Io(t.apply(this,arguments));return!n||typeof n.then!="function"?$.resolve(n):n}catch(a){return rt(a)}}},spawn:function(t,n,a){try{var o=Io(t.apply(a,n||[]));return!o||typeof o.then!="function"?$.resolve(o):o}catch(u){return rt(u)}},currentTransaction:{get:function(){return ue.trans||null}},waitFor:function(t,n){var a=$.resolve(typeof t=="function"?vr.ignoreTransaction(t):t).timeout(n||6e4);return ue.trans?ue.trans.waitFor(a):a},Promise:$,debug:{get:function(){return Ee},set:function(t){Se(t)}},derive:O,extend:E,props:T,override:X,Events:ri,on:zn,liveQuery:vu,extendObservabilitySet:ta,getByKeyPath:re,setByKeyPath:ve,delByKeyPath:ge,shallowClone:_e,deepClone:We,getObjectDiff:So,cmp:Le,asap:le,minKey:oo,addons:[],connections:Pr,errnames:Ct,dependencies:aa,cache:hr,semVer:js,version:js.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,a){return t+n/Math.pow(10,a*2)})})),vr.maxKey=si(vr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zn(oi,function(t){if(!Gn){var n;n=new CustomEvent(fo,{detail:t}),Gn=!0,dispatchEvent(n),Gn=!1}}),addEventListener(fo,function(t){var n=t.detail;Gn||Lo(n)}));function Lo(t){var n=Gn;try{Gn=!0,zn.storagemutated.fire(t),Ao(t,!0)}finally{Gn=n}}var Gn=!1,Hn,Po=function(){};typeof BroadcastChannel<"u"&&(Po=function(){Hn=new BroadcastChannel(fo),Hn.onmessage=function(t){return t.data&&Lo(t.data)}},Po(),typeof Hn.unref=="function"&&Hn.unref(),zn(oi,function(t){Gn||Hn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Tn.disableBfCache&&t.persisted){Ee&&console.debug("Dexie: handling persisted pagehide"),Hn?.close();for(var n=0,a=Pr;n<a.length;n++){var o=a[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!Tn.disableBfCache&&t.persisted&&(Ee&&console.debug("Dexie: handling persisted pageshow"),Po(),Lo({all:new xt(-1/0,[[]])}))}));function hf(t){return new ni({add:t})}function vf(t){return new ni({remove:t})}function pf(t,n){return new ni({replacePrefix:[t,n]})}$.rejectionMapper=Sr,Se(Ee);var mf=Object.freeze({__proto__:null,Dexie:Tn,liveQuery:vu,Entity:Hs,cmp:Le,PropModification:ni,replacePrefix:pf,add:hf,remove:vf,default:Tn,RangeSet:xt,mergeRanges:ci,rangesOverlap:ru});return l(Tn,mf,{default:Tn}),Tn}))})(ha)),ha.exports}var ih=rh();const $o=th(ih),Iu=Symbol.for("Dexie"),ka=globalThis[Iu]||(globalThis[Iu]=$o);if($o.semVer!==ka.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${$o.semVer} and ${ka.semVer}`);const{liveQuery:Da,mergeRanges:Op,rangesOverlap:Cp,RangeSet:Lp,cmp:Pp,Entity:Rp,PropModification:Mp,replacePrefix:Np,add:Kp,remove:Fp,DexieYProvider:Bp}=ka;function Su(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,s)}return i}function Aa(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Su(Object(i),!0).forEach(function(s){Zr(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Su(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function Br(e){"@babel/helpers - typeof";return Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Br(e)}function Zr(e,r,i){return r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function ah(e,r){if(e==null)return{};var i={},s=Object.keys(e),l,c;for(c=0;c<s.length;c++)l=s[c],!(r.indexOf(l)>=0)&&(i[l]=e[l]);return i}function oh(e,r){if(e==null)return{};var i=ah(e,r),s,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(l=0;l<c.length;l++)s=c[l],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function sh(e,r){return lh(e)||fh(e,r)||Is(e,r)||hh()}function nn(e){return uh(e)||ch(e)||Is(e)||dh()}function uh(e){if(Array.isArray(e))return es(e)}function lh(e){if(Array.isArray(e))return e}function ch(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fh(e,r){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var s=[],l=!0,c=!1,h,m;try{for(i=i.call(e);!(l=(h=i.next()).done)&&(s.push(h.value),!(r&&s.length===r));l=!0);}catch(g){c=!0,m=g}finally{try{!l&&i.return!=null&&i.return()}finally{if(c)throw m}}return s}}function Is(e,r){if(e){if(typeof e=="string")return es(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return es(e,r)}}function es(e,r){(r==null||r>e.length)&&(r=e.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=e[i];return s}function dh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Li(e,r){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Is(e))||r){i&&(e=i);var s=0,l=function(){};return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,h=!1,m;return{s:function(){i=i.call(e)},n:function(){var g=i.next();return c=g.done,g},e:function(g){h=!0,m=g},f:function(){try{!c&&i.return!=null&&i.return()}finally{if(h)throw m}}}}var vh="finalize",ph="consider";function qr(e,r,i){e.dispatchEvent(new CustomEvent(vh,{detail:{items:r,info:i}}))}function ir(e,r,i){e.dispatchEvent(new CustomEvent(ph,{detail:{items:r,info:i}}))}var Ga="draggedEntered",Pi="draggedLeft",Ha="draggedOverIndex",Ss="draggedLeftDocument",Ia={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function mh(e,r,i){e.dispatchEvent(new CustomEvent(Ga,{detail:{indexObj:r,draggedEl:i}}))}function yh(e,r,i){e.dispatchEvent(new CustomEvent(Pi,{detail:{draggedEl:r,type:Ia.LEFT_FOR_ANOTHER,theOtherDz:i}}))}function gh(e,r){e.dispatchEvent(new CustomEvent(Pi,{detail:{draggedEl:r,type:Ia.OUTSIDE_OF_ANY}}))}function _h(e,r,i){e.dispatchEvent(new CustomEvent(Ha,{detail:{indexObj:r,draggedEl:i}}))}function bh(e){window.dispatchEvent(new CustomEvent(Ss,{detail:{draggedEl:e}}))}var Rt={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Ga,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Ha,DRAGGED_LEFT:Pi,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Ht={POINTER:"pointer",KEYBOARD:"keyboard"},Ua="isDndShadowItem",Va="data-is-dnd-shadow-item-internal",wh="data-is-dnd-shadow-item-hint",Kl="id:dnd-shadow-placeholder-0000",Eh="dnd-action-dragged-el",ct="id",ts=0;function Fl(){ts++}function Bl(){if(ts===0)throw new Error("Bug! trying to decrement when there are no dropzones");ts--}var Os=typeof window>"u";function ns(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i,s=r?kh(e):e.getBoundingClientRect(),l=getComputedStyle(e),c=l.transform;if(c){var h,m,g,E;if(c.startsWith("matrix3d("))i=c.slice(9,-1).split(/, /),h=+i[0],m=+i[5],g=+i[12],E=+i[13];else if(c.startsWith("matrix("))i=c.slice(7,-1).split(/, /),h=+i[0],m=+i[3],g=+i[4],E=+i[5];else return s;var w=l.transformOrigin,I=s.x-g-(1-h)*parseFloat(w),_=s.y-E-(1-m)*parseFloat(w.slice(w.indexOf(" ")+1)),T=h?s.width/h:e.offsetWidth,P=m?s.height/m:e.offsetHeight;return{x:I,y:_,width:T,height:P,top:_,right:I+T,bottom:_+P,left:I}}else return s}function jl(e){var r=ns(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function zl(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Gl(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function xh(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function Wa(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function Ti(e){return Gl(zl(e))}function Ou(e,r){var i=Ti(e),s=jl(r);return Wa(i,s)}function Cu(e,r){var i=Ti(e),s=Ti(r);return xh(i,s)}function Th(e){var r=zl(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function kh(e){for(var r=e.getBoundingClientRect(),i={top:r.top,bottom:r.bottom,left:r.left,right:r.right},s=!1,l=!1,c=e.parentElement;c&&c!==document.body;){var h=window.getComputedStyle(c),m=h.overflowY,g=h.overflowX,E=m==="scroll"||m==="auto",w=g==="scroll"||g==="auto";if(E||w){var I=c.getBoundingClientRect();if(E){var _=Math.max(i.top,I.top),T=Math.min(i.bottom,I.bottom);(_!==i.top||T!==i.bottom)&&(s=!0),i.top=_,i.bottom=T}if(w){var P=Math.max(i.left,I.left),C=Math.min(i.right,I.right);(P!==i.left||C!==i.right)&&(l=!0),i.left=P,i.right=C}}c=c.parentElement}return s||l?{top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:Math.max(0,i.right-i.left),height:Math.max(0,i.bottom-i.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var zr;function Cs(){zr=new Map}Cs();function Dh(e){var r=Array.from(e.children).findIndex(function(i){return i.getAttribute(Va)});if(r>=0)return zr.has(e)||zr.set(e,new Map),zr.get(e).set(r,jl(e.children[r])),r}function Ah(e,r){if(!Ou(e,r))return null;var i=r.children;if(i.length===0)return{index:0,isProximityBased:!0};for(var s=Dh(r),l=0;l<i.length;l++)if(Ou(e,i[l])){var c=zr.has(r)&&zr.get(r).get(l);return c&&!Wa(Ti(e),c)?{index:s,isProximityBased:!1}:{index:l,isProximityBased:!1}}for(var h=Number.MAX_VALUE,m=void 0,g=0;g<i.length;g++){var E=Cu(e,i[g]);E<h&&(h=E,m=g)}if(i.length>0){var w=i.length,I=i[w-1],_=I.cloneNode(!1);_.style.visibility="hidden",_.style.pointerEvents="none",r.appendChild(_);var T=Cu(e,_);T<h&&(m=w),r.removeChild(_)}return{index:m,isProximityBased:!0}}function di(e){return JSON.stringify(e,null,2)}function Sa(e){if(!e)throw new Error("cannot get depth of a falsy node");return Hl(e,0)}function Hl(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?Hl(e.parentElement,r+1):r-1}function Ih(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var i in e)if(!{}.hasOwnProperty.call(r,i)||r[i]!==e[i])return!1;return!0}function Sh(e,r){if(e.length!==r.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==r[i])return!1;return!0}var Oh=200,Lu=10,rs;function Ch(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oh,s=arguments.length>3?arguments[3]:void 0,l,c,h=!1,m,g=Array.from(r).sort(function(w,I){return Sa(I)-Sa(w)});function E(){var w=Ti(e),I=s.multiScrollIfNeeded();if(!I&&m&&Math.abs(m.x-w.x)<Lu&&Math.abs(m.y-w.y)<Lu){rs=window.setTimeout(E,i);return}if(Th(e)){bh(e);return}m=w;var _=!1,T=Li(g),P;try{for(T.s();!(P=T.n()).done;){var C=P.value;I&&Cs();var O=Ah(e,C);if(O!==null){var L=O.index;_=!0,C!==l?(l&&yh(l,e,C),mh(C,O,e),l=C):L!==c&&(_h(C,O,e),c=L);break}}}catch(H){T.e(H)}finally{T.f()}!_&&h&&l?(gh(l,e),l=void 0,c=void 0,h=!1):h=!0,rs=window.setTimeout(E,i)}E()}function Lh(){clearTimeout(rs),Cs()}var hi=30;function Ph(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function i(c){var h=e,m=h.directionObj,g=h.stepPx;m&&(c.scrollBy(m.x*g,m.y*g),window.requestAnimationFrame(function(){return i(c)}))}function s(c){return hi-c}function l(c,h){if(!h)return!1;var m=Rh(c,h),g=!!e.directionObj;if(m===null)return g&&r(),!1;var E=!1,w=!1;return h.scrollHeight>h.clientHeight&&(m.bottom<hi?(E=!0,e.directionObj={x:0,y:1},e.stepPx=s(m.bottom)):m.top<hi&&(E=!0,e.directionObj={x:0,y:-1},e.stepPx=s(m.top)),!g&&E)||h.scrollWidth>h.clientWidth&&(m.right<hi?(w=!0,e.directionObj={x:1,y:0},e.stepPx=s(m.right)):m.left<hi&&(w=!0,e.directionObj={x:-1,y:0},e.stepPx=s(m.left)),!g&&w)?(i(h),!0):(r(),!1)}return{scrollIfNeeded:l,resetScrolling:r}}function Rh(e,r){var i=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return Wa(e,i)?{top:e.y-i.top,bottom:i.bottom-e.y,left:e.x-i.left,right:i.right-e.x}:null}function Mh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i=Kh(e),s=Array.from(i).sort(function(g,E){return Sa(E)-Sa(g)}),l=Ph(),c=l.scrollIfNeeded,h=l.resetScrolling;function m(){var g=r();if(!g||!s)return!1;for(var E=s.filter(function(_){return Wa(g,_.getBoundingClientRect())||_===document.scrollingElement}),w=0;w<E.length;w++){var I=c(g,E[w]);if(I)return!0}return!1}return{multiScrollIfNeeded:i.size>0?m:function(){return!1},destroy:function(){return h()}}}function Nh(e){if(!e)return[];for(var r=[],i=e;i;){var s=window.getComputedStyle(i),l=s.overflow;l.split(" ").some(function(c){return c.includes("auto")||c.includes("scroll")})&&r.push(i),i=i.parentElement}return r}function Kh(e){var r=new Set,i=Li(e),s;try{for(i.s();!(s=i.n()).done;){var l=s.value;Nh(l).forEach(function(c){return r.add(c)})}}catch(c){i.e(c)}finally{i.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function Fh(e){var r=e.cloneNode(!0),i=[],s=e.tagName==="SELECT",l=s?[e]:nn(e.querySelectorAll("select")),c=Li(l),h;try{for(c.s();!(h=c.n()).done;){var m=h.value;i.push(m.value)}}catch(Y){c.e(Y)}finally{c.f()}if(l.length>0)for(var g=s?[r]:nn(r.querySelectorAll("select")),E=0;E<g.length;E++){var w=g[E],I=i[E],_=w.querySelector('option[value="'.concat(I,'"'));_&&_.setAttribute("selected",!0)}var T=e.tagName==="CANVAS",P=T?[e]:nn(e.querySelectorAll("canvas"));if(P.length>0)for(var C=T?[r]:nn(r.querySelectorAll("canvas")),O=0;O<C.length;O++){var L=P[O],H=C[O];H.width=L.width,H.height=L.height,L.width>0&&L.height>0&&H.getContext("2d").drawImage(L,0,0)}return r}var ki=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Bh=Zr({},ki.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Ul(e){if(!ki[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(ki)));return Bh[e]}var jh=.2;function mr(e){return"".concat(e," ").concat(jh,"s ease")}function zh(e,r){var i=e.getBoundingClientRect(),s=Fh(e);Vl(e,s),s.id=Eh,s.style.position="fixed";var l=i.top,c=i.left;if(s.style.top="".concat(l,"px"),s.style.left="".concat(c,"px"),r){var h=Gl(i);l-=h.y-r.y,c-=h.x-r.x,window.setTimeout(function(){s.style.top="".concat(l,"px"),s.style.left="".concat(c,"px")},0)}return s.style.margin="0",s.style.boxSizing="border-box",s.style.height="".concat(i.height,"px"),s.style.width="".concat(i.width,"px"),s.style.transition="".concat(mr("top"),", ").concat(mr("left"),", ").concat(mr("background-color"),", ").concat(mr("opacity"),", ").concat(mr("color")," "),window.setTimeout(function(){return s.style.transition+=", ".concat(mr("width"),", ").concat(mr("height"))},0),s.style.zIndex="9999",s.style.cursor="grabbing",s}function Gh(e){e.style.cursor="grab"}function Hh(e,r,i,s){Vl(r,e);var l=r.getBoundingClientRect(),c=e.getBoundingClientRect(),h=l.width-c.width,m=l.height-c.height;if(h||m){var g={left:(i-c.left)/c.width,top:(s-c.top)/c.height};Ul(ki.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(l.height,"px"),e.style.width="".concat(l.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-g.left*h,"px"),e.style.top="".concat(parseFloat(e.style.top)-g.top*m,"px")}}function Vl(e,r){var i=window.getComputedStyle(e);Array.from(i).filter(function(s){return s.startsWith("background")||s.startsWith("padding")||s.startsWith("font")||s.startsWith("text")||s.startsWith("align")||s.startsWith("justify")||s.startsWith("display")||s.startsWith("flex")||s.startsWith("border")||s==="opacity"||s==="color"||s==="list-style-type"||Ul(ki.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(s==="width"||s==="height")}).forEach(function(s){return r.style.setProperty(s,i.getPropertyValue(s),i.getPropertyPriority(s))})}function Uh(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Wl(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function Vh(e){e.style.visibility="hidden",e.setAttribute(Va,"true")}function Wh(e){e.style.visibility="",e.removeAttribute(Va)}function va(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(c){s.style[c]=l[c]}),i(s).forEach(function(c){return s.classList.add(c)})})}function Oa(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(c){s.style[c]=""}),i(s).forEach(function(c){return s.classList.contains(c)&&s.classList.remove(c)})})}function Yh(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var i=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=i}}var Zh="--any--",qh=100,Qh=20,la=3,Xh=80,Pu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Ru="data-is-dnd-original-dragged-item",Bt,pt,jt,Ya,Qe,Za,$n,yt,mn,Dt,Vn=!1,Ls=!1,Ps,Ri=!1,pa=[],gi,yn,pi=!1,sn=new Map,it=new Map,jo=new WeakMap;function Jh(e,r){sn.has(r)||sn.set(r,new Set),sn.get(r).has(e)||(sn.get(r).add(e),Fl())}function Mu(e,r){sn.get(r).delete(e),Bl(),sn.get(r).size===0&&sn.delete(r)}function $h(){var e=sn.get(Ya),r=Li(e),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;s.addEventListener(Ga,Yl),s.addEventListener(Pi,Zl),s.addEventListener(Ha,ql)}}catch(h){r.e(h)}finally{r.f()}window.addEventListener(Ss,Qr);var l=Math.max.apply(Math,nn(Array.from(e.keys()).map(function(h){return it.get(h).dropAnimationDurationMs}))),c=l===0?Qh:Math.max(l,qh);gi=Mh(e,function(){return Dt}),Ch(pt,e,c*1.07,gi)}function ev(){var e=sn.get(Ya),r=Li(e),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;s.removeEventListener(Ga,Yl),s.removeEventListener(Pi,Zl),s.removeEventListener(Ha,ql)}}catch(l){r.e(l)}finally{r.f()}window.removeEventListener(Ss,Qr),gi&&(gi.destroy(),gi=void 0),Lh()}function qa(e){return e.findIndex(function(r){return!!r[Ua]})}function tv(e){var r;return Aa(Aa({},e),{},(r={},Zr(r,Ua,!0),Zr(r,ct,Kl),r))}function Yl(e){var r=it.get(e.currentTarget),i=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==Qe)){if(Ri=!1,i=i.filter(function(m){return m[ct]!==$n[ct]&&m[ct]!==Kl}),Qe!==e.currentTarget){var l=it.get(Qe).items,c=l.filter(function(m){return!m[Ua]});ir(Qe,c,{trigger:Rt.DRAGGED_ENTERED_ANOTHER,id:jt[ct],source:Ht.POINTER})}var h=e.detail.indexObj.index;yt=e.currentTarget,i.splice(h,0,$n),ir(e.currentTarget,i,{trigger:Rt.DRAGGED_ENTERED,id:jt[ct],source:Ht.POINTER})}}function Zl(e){if(Vn){var r=it.get(e.currentTarget),i=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==Qe&&e.currentTarget!==yt)){var l=nn(i),c=qa(l);c!==-1&&l.splice(c,1);var h=yt;yt=void 0;var m=e.detail,g=m.type,E=m.theOtherDz;if(g===Ia.OUTSIDE_OF_ANY||g===Ia.LEFT_FOR_ANOTHER&&E!==Qe&&it.get(E).dropFromOthersDisabled){Ri=!0,yt=Qe;var w=h===Qe?l:nn(it.get(Qe).items);w.splice(Za,0,$n),ir(Qe,w,{trigger:Rt.DRAGGED_LEFT_ALL,id:jt[ct],source:Ht.POINTER})}ir(e.currentTarget,l,{trigger:Rt.DRAGGED_LEFT,id:jt[ct],source:Ht.POINTER})}}}function ql(e){var r=it.get(e.currentTarget),i=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==Qe)){var l=nn(i);Ri=!1;var c=e.detail.indexObj.index,h=qa(l);h!==-1&&l.splice(h,1),l.splice(c,0,$n),ir(e.currentTarget,l,{trigger:Rt.DRAGGED_OVER_INDEX,id:jt[ct],source:Ht.POINTER})}}function Ca(e){e.preventDefault();var r=e.touches?e.touches[0]:e;Dt={x:r.clientX,y:r.clientY},pt.style.transform="translate3d(".concat(Dt.x-mn.x,"px, ").concat(Dt.y-mn.y,"px, 0)")}function Qr(){Ls=!0,window.removeEventListener("mousemove",Ca),window.removeEventListener("touchmove",Ca),window.removeEventListener("mouseup",Qr),window.removeEventListener("touchend",Qr),ev(),Gh(pt),yt||(yt=Qe);var e=it.get(yt),r=e.items,i=e.type;Oa(sn.get(i),function(c){return it.get(c).dropTargetStyle},function(c){return it.get(c).dropTargetClasses});var s=qa(r);s===-1&&yt===Qe&&(s=Za),r=r.map(function(c){return c[Ua]?jt:c});function l(){Ps(),qr(yt,r,{trigger:Ri?Rt.DROPPED_OUTSIDE_OF_ANY:Rt.DROPPED_INTO_ZONE,id:jt[ct],source:Ht.POINTER}),yt!==Qe&&qr(Qe,it.get(Qe).items,{trigger:Rt.DROPPED_INTO_ANOTHER,id:jt[ct],source:Ht.POINTER});var c=Array.from(yt.children).find(function(h){return h.getAttribute(Va)});c&&Wh(c),iv()}it.get(yt).dropAnimationDisabled?l():nv(s,l)}function nv(e,r){var i=e>-1?ns(yt.children[e],!1):ns(yt,!1),s={x:i.left-parseFloat(pt.style.left),y:i.top-parseFloat(pt.style.top)},l=it.get(yt),c=l.dropAnimationDurationMs,h="transform ".concat(c,"ms ease");pt.style.transition=pt.style.transition?pt.style.transition+","+h:h,pt.style.transform="translate3d(".concat(s.x,"px, ").concat(s.y,"px, 0)"),window.setTimeout(r,c)}function rv(e,r){pa.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){Wl(e),document.body.appendChild(e)})}function iv(){pt&&pt.remove&&pt.remove(),Bt&&Bt.remove&&Bt.remove(),pt=void 0,Bt=void 0,jt=void 0,Ya=void 0,Qe=void 0,Za=void 0,$n=void 0,yt=void 0,mn=void 0,Dt=void 0,Vn=!1,Ls=!1,Ps=void 0,Ri=!1,yn&&clearTimeout(yn),yn=void 0,pi=!1,pa.length&&(pa.forEach(function(e){var r=e.dz,i=e.destroy;i(),r.remove()}),pa=[])}function av(e,r){var i=!1,s={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Pu,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},l=new Map;function c(){window.addEventListener("mousemove",g,{passive:!1}),window.addEventListener("touchmove",g,{passive:!1,capture:!1}),window.addEventListener("mouseup",m,{passive:!1}),window.addEventListener("touchend",m,{passive:!1})}function h(){window.removeEventListener("mousemove",g),window.removeEventListener("touchmove",g),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),yn&&(clearTimeout(yn),yn=void 0,pi=!1)}function m(_){if(h(),Bt=void 0,mn=void 0,Dt=void 0,_.type==="touchend"){var T=new Event("click",{bubbles:!0,cancelable:!0});_.target.dispatchEvent(T)}}function g(_){var T=!!_.touches,P=T?_.touches[0]:_;if(T&&s.delayTouchStartMs>0&&!pi){Dt={x:P.clientX,y:P.clientY},(Math.abs(Dt.x-mn.x)>=la||Math.abs(Dt.y-mn.y)>=la)&&(yn&&(clearTimeout(yn),yn=void 0),m(_));return}_.preventDefault(),Dt={x:P.clientX,y:P.clientY},(Math.abs(Dt.x-mn.x)>=la||Math.abs(Dt.y-mn.y)>=la)&&(h(),w())}function E(_){if(!(_.target!==_.currentTarget&&(_.target.value!==void 0||_.target.isContentEditable))&&!_.button&&!Vn){var T=!!_.touches,P=T&&s.delayTouchStartMs>0;P||_.preventDefault(),_.stopPropagation();var C=T?_.touches[0]:_;mn={x:C.clientX,y:C.clientY},Dt=Aa({},mn),Bt=_.currentTarget,P&&(pi=!1,yn=window.setTimeout(function(){Bt&&(pi=!0,h(),w())},s.delayTouchStartMs)),c()}}function w(){Vn=!0;var _=l.get(Bt);Za=_,Qe=Bt.parentElement;var T=Qe.closest("dialog")||Qe.closest("[popover]")||Qe.getRootNode(),P=T.body||T,C=s.items,O=s.type,L=s.centreDraggedOnCursor,H=nn(C);jt=H[_],Ya=O,$n=tv(jt),pt=zh(Bt,L&&Dt),P.appendChild(pt);function Y(){Bt.parentElement?window.requestAnimationFrame(Y):(Bt.setAttribute(Ru,!0),P.appendChild(Bt),$h(),Wl(Bt),$n[ct]=jt[ct],pt.focus())}window.requestAnimationFrame(Y),va(Array.from(sn.get(s.type)).filter(function(N){return N===Qe||!it.get(N).dropFromOthersDisabled}),function(N){return it.get(N).dropTargetStyle},function(N){return it.get(N).dropTargetClasses}),H.splice(_,1,$n),Ps=Yh(Qe),ir(Qe,H,{trigger:Rt.DRAG_STARTED,id:jt[ct],source:Ht.POINTER}),window.addEventListener("mousemove",Ca,{passive:!1}),window.addEventListener("touchmove",Ca,{passive:!1,capture:!1}),window.addEventListener("mouseup",Qr,{passive:!1}),window.addEventListener("touchend",Qr,{passive:!1})}function I(_){var T=_.items,P=T===void 0?void 0:T,C=_.flipDurationMs,O=C===void 0?0:C,L=_.type,H=L===void 0?Zh:L,Y=_.dragDisabled,N=Y===void 0?!1:Y,X=_.morphDisabled,ee=X===void 0?!1:X,le=_.dropFromOthersDisabled,he=le===void 0?!1:le,re=_.dropTargetStyle,ve=re===void 0?Pu:re,ge=_.dropTargetClasses,_e=ge===void 0?[]:ge,Xe=_.transformDraggedElement,je=Xe===void 0?function(){}:Xe,ot=_.centreDraggedOnCursor,ut=ot===void 0?!1:ot,ze=_.dropAnimationDisabled,Mt=ze===void 0?!1:ze,He=_.delayTouchStart,We=He===void 0?!1:He;s.dropAnimationDurationMs=O;var bt=0;We===!0?bt=Xh:typeof We=="number"&&isFinite(We)&&We>=0&&(bt=We),s.delayTouchStartMs=bt,s.type&&H!==s.type&&Mu(e,s.type),s.type=H,s.items=nn(P),s.dragDisabled=N,s.morphDisabled=ee,s.transformDraggedElement=je,s.centreDraggedOnCursor=ut,s.dropAnimationDisabled=Mt,i&&Vn&&!Ls&&(!Ih(ve,s.dropTargetStyle)||!Sh(_e,s.dropTargetClasses))&&(Oa([e],function(){return s.dropTargetStyle},function(){return _e}),va([e],function(){return ve},function(){return _e})),s.dropTargetStyle=ve,s.dropTargetClasses=nn(_e);function Nt(W,ie){return it.get(W)?it.get(W)[ie]:s[ie]}i&&Vn&&s.dropFromOthersDisabled!==he&&(he?Oa([e],function(W){return Nt(W,"dropTargetStyle")},function(W){return Nt(W,"dropTargetClasses")}):va([e],function(W){return Nt(W,"dropTargetStyle")},function(W){return Nt(W,"dropTargetClasses")})),s.dropFromOthersDisabled=he,it.set(e,s),Jh(e,H);for(var rn=Vn?qa(s.items):-1,wt=0;wt<e.children.length;wt++){var Z=e.children[wt];if(Uh(Z,N),wt===rn){ee||Hh(pt,Z,Dt.x,Dt.y),s.transformDraggedElement(pt,jt,wt),Vh(Z);continue}Z.removeEventListener("mousedown",jo.get(Z)),Z.removeEventListener("touchstart",jo.get(Z)),N||(Z.addEventListener("mousedown",E),Z.addEventListener("touchstart",E),jo.set(Z,E)),l.set(Z,wt),i||(i=!0)}}return I(r),{update:function(T){I(T)},destroy:function(){function T(){Mu(e,it.get(e).type),it.delete(e)}Vn&&!e.closest("[".concat(Ru,"]"))?rv(e,T):T()}}}var ca,is={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Ql=(ca={},Zr(ca,is.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Zr(ca,is.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),ca),ov="dnd-action-aria-alert",st;function as(){st||(st=document.createElement("div"),(function(){st.id=ov,st.style.position="fixed",st.style.bottom="0",st.style.left="0",st.style.zIndex="-5",st.style.opacity="0",st.style.height="0",st.style.width="0",st.setAttribute("role","alert")})(),document.body.prepend(st),Object.entries(Ql).forEach(function(e){var r=sh(e,2),i=r[0],s=r[1];return document.body.prepend(lv(i,s))}))}function sv(){return Os?null:(document.readyState==="complete"?as():window.addEventListener("DOMContentLoaded",as),Aa({},is))}function uv(){Os||!st||(Object.keys(Ql).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),st.remove(),st=void 0)}function lv(e,r){var i=document.createElement("div");return i.id=e,i.innerHTML="<p>".concat(r,"</p>"),i.style.display="none",i.style.position="fixed",i.style.zIndex="-5",i}function Gr(e){if(!Os){st||as(),st.innerHTML="";var r=document.createTextNode(e);st.appendChild(r),st.style.display="none",st.style.display="inline"}}var cv="--any--",Nu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Jt=!1,os,It,Er="",yr,gn,Zn="",La=new WeakSet,Ku=new WeakMap,Fu=new WeakMap,ss=new Map,mt=new Map,on=new Map,Pa;function fv(e,r){on.size===0&&(Pa=sv(),window.addEventListener("keydown",Xl),window.addEventListener("click",Jl)),on.has(r)||on.set(r,new Set),on.get(r).has(e)||(on.get(r).add(e),Fl())}function Bu(e,r){It===e&&Di(),on.get(r).delete(e),Bl(),on.get(r).size===0&&on.delete(r),on.size===0&&(window.removeEventListener("keydown",Xl),window.removeEventListener("click",Jl),Pa=void 0,uv())}function Xl(e){if(Jt)switch(e.key){case"Escape":{Di();break}}}function Jl(){Jt&&(La.has(document.activeElement)||Di())}function dv(e){if(Jt){var r=e.currentTarget;if(r!==It){Er=r.getAttribute("aria-label")||"";var i=mt.get(It),s=i.items,l=s.find(function(I){return I[ct]===gn}),c=s.indexOf(l),h=s.splice(c,1)[0],m=mt.get(r),g=m.items,E=m.autoAriaDisabled;r.getBoundingClientRect().top<It.getBoundingClientRect().top||r.getBoundingClientRect().left<It.getBoundingClientRect().left?(g.push(h),E||Gr("Moved item ".concat(Zn," to the end of the list ").concat(Er))):(g.unshift(h),E||Gr("Moved item ".concat(Zn," to the beginning of the list ").concat(Er)));var w=It;qr(w,s,{trigger:Rt.DROPPED_INTO_ANOTHER,id:gn,source:Ht.KEYBOARD}),qr(r,g,{trigger:Rt.DROPPED_INTO_ZONE,id:gn,source:Ht.KEYBOARD}),It=r}}}function $l(){ss.forEach(function(e,r){var i=e.update;return i(mt.get(r))})}function Di(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;mt.get(It).autoAriaDisabled||Gr("Stopped dragging item ".concat(Zn)),La.has(document.activeElement)&&document.activeElement.blur(),e&&ir(It,mt.get(It).items,{trigger:Rt.DRAG_STOPPED,id:gn,source:Ht.KEYBOARD}),Oa(on.get(os),function(r){return mt.get(r).dropTargetStyle},function(r){return mt.get(r).dropTargetClasses}),yr=null,gn=null,Zn="",os=null,It=null,Er="",Jt=!1,$l()}function hv(e,r){var i={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Nu,dropTargetClasses:[],autoAriaDisabled:!1};function s(w,I,_){w.length<=1||w.splice(_,1,w.splice(I,1,w[_])[0])}function l(w){switch(w.key){case"Enter":case" ":{if((w.target.disabled!==void 0||w.target.href||w.target.isContentEditable)&&!La.has(w.target))return;w.preventDefault(),w.stopPropagation(),Jt?Di():c(w);break}case"ArrowDown":case"ArrowRight":{if(!Jt)return;w.preventDefault(),w.stopPropagation();var I=mt.get(e),_=I.items,T=Array.from(e.children),P=T.indexOf(w.currentTarget);P<T.length-1&&(i.autoAriaDisabled||Gr("Moved item ".concat(Zn," to position ").concat(P+2," in the list ").concat(Er)),s(_,P,P+1),qr(e,_,{trigger:Rt.DROPPED_INTO_ZONE,id:gn,source:Ht.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Jt)return;w.preventDefault(),w.stopPropagation();var C=mt.get(e),O=C.items,L=Array.from(e.children),H=L.indexOf(w.currentTarget);H>0&&(i.autoAriaDisabled||Gr("Moved item ".concat(Zn," to position ").concat(H," in the list ").concat(Er)),s(O,H,H-1),qr(e,O,{trigger:Rt.DROPPED_INTO_ZONE,id:gn,source:Ht.KEYBOARD}));break}}}function c(w){m(w.currentTarget),It=e,os=i.type,Jt=!0;var I=Array.from(on.get(i.type)).filter(function(T){return T===It||!mt.get(T).dropFromOthersDisabled});if(va(I,function(T){return mt.get(T).dropTargetStyle},function(T){return mt.get(T).dropTargetClasses}),!i.autoAriaDisabled){var _="Started dragging item ".concat(Zn,". Use the arrow keys to move it within its list ").concat(Er);I.length>1&&(_+=", or tab to another list in order to move the item into it"),Gr(_)}ir(e,mt.get(e).items,{trigger:Rt.DRAG_STARTED,id:gn,source:Ht.KEYBOARD}),$l()}function h(w){Jt&&w.currentTarget!==yr&&(w.stopPropagation(),Di(!1),c(w))}function m(w){var I=mt.get(e),_=I.items,T=Array.from(e.children),P=T.indexOf(w);yr=w,yr.tabIndex=i.zoneItemTabIndex,gn=_[P][ct],Zn=T[P].getAttribute("aria-label")||""}function g(w){var I=w.items,_=I===void 0?[]:I,T=w.type,P=T===void 0?cv:T,C=w.dragDisabled,O=C===void 0?!1:C,L=w.zoneTabIndex,H=L===void 0?0:L,Y=w.zoneItemTabIndex,N=Y===void 0?0:Y,X=w.dropFromOthersDisabled,ee=X===void 0?!1:X,le=w.dropTargetStyle,he=le===void 0?Nu:le,re=w.dropTargetClasses,ve=re===void 0?[]:re,ge=w.autoAriaDisabled,_e=ge===void 0?!1:ge;i.items=nn(_),i.dragDisabled=O,i.dropFromOthersDisabled=ee,i.zoneTabIndex=H,i.zoneItemTabIndex=N,i.dropTargetStyle=he,i.dropTargetClasses=ve,i.autoAriaDisabled=_e,i.type&&P!==i.type&&Bu(e,i.type),i.type=P,fv(e,P),_e||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",O?Pa.DND_ZONE_DRAG_DISABLED:Pa.DND_ZONE_ACTIVE)),mt.set(e,i),Jt?e.tabIndex=e===It||yr.contains(e)||i.dropFromOthersDisabled||It&&i.type!==mt.get(It).type?-1:0:e.tabIndex=i.zoneTabIndex,e.addEventListener("focus",dv);for(var Xe=function(ut){var ze=e.children[ut];La.add(ze),ze.tabIndex=Jt?-1:i.zoneItemTabIndex,_e||ze.setAttribute("role","listitem"),ze.removeEventListener("keydown",Ku.get(ze)),ze.removeEventListener("click",Fu.get(ze)),O||(ze.addEventListener("keydown",l),Ku.set(ze,l),ze.addEventListener("click",h),Fu.set(ze,h)),Jt&&i.items[ut][ct]===gn&&(yr=ze,yr.tabIndex=i.zoneItemTabIndex,ze.focus())},je=0;je<e.children.length;je++)Xe(je)}g(r);var E={update:function(I){g(I)},destroy:function(){Bu(e,i.type),mt.delete(e),ss.delete(e)}};return ss.set(e,E),E}var vv=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Rs(e,r){if(pv(e))return{update:function(){},destroy:function(){}};ju(r);var i=av(e,r),s=hv(e,r);return{update:function(c){ju(c),i.update(c),s.update(c)},destroy:function(){i.destroy(),s.destroy()}}}function pv(e){return!!e.closest("[".concat(wh,'="true"]'))}function ju(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var i=e.zoneTabIndex,s=e.zoneItemTabIndex;e.dropTargetStyle;var l=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var c=e.delayTouchStart;e.dropAnimationDisabled;var h=oh(e,vv);if(Object.keys(h).length>0&&console.warn("dndzone will ignore unknown options",h),!r)throw new Error("no 'items' key provided to dndzone");var m=r.find(function(w){return!{}.hasOwnProperty.call(w,ct)});if(m)throw new Error("missing '".concat(ct,"' property for item ").concat(di(m)));if(l&&!Array.isArray(l))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Br(l),", ").concat(di(l)));if(i&&!zu(i))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Br(i),", ").concat(di(i)));if(s&&!zu(s))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Br(s),", ").concat(di(s)));if(c!==void 0&&c!==!1){var g=c===!0,E=typeof c=="number"&&isFinite(c)&&c>=0;if(!g&&!E)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(Br(c),", ").concat(di(c)))}}function zu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}const De=new ka("TaskPlannerDB");De.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});De.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));De.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));De.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify(r=>{r.archivedAt===void 0&&(r.archivedAt=null)}));De.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify((r,i)=>{r.columnIndex===void 0&&(r.columnIndex=r.order%5)}));function Qa(e){return e.length===0?0:Math.max(...e.map(i=>i.order))+1}async function mv(){return(await De.lists.orderBy("order").toArray()).filter(r=>r.archivedAt==null)}async function yv(){return await De.lists.orderBy("order").toArray()}async function Gu(e,r=null){const i=e.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const s=await De.lists.orderBy("order").toArray(),l=Qa(s),c=5;let h;return r!==null&&r>=0&&r<c?h=r:h=l%c,await De.lists.add({name:i,order:l,archivedAt:null,columnIndex:h})}async function gv(e=null){const r=await De.lists.orderBy("order").toArray(),i=Qa(r),s=5;let l;return e!==null&&e>=0&&e<s?l=e:l=i%s,await De.lists.add({name:null,order:i,archivedAt:null,columnIndex:l})}async function _v(e,r){const i=r.trim();if(i==="")throw new Error("List name cannot be empty");return await De.lists.update(e,{name:i})}async function zo(e){return await De.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function bv(){return(await De.tasks.where("status").equals("archived").toArray()).sort((r,i)=>{const s=r.archivedAt||0,l=i.archivedAt||0;return l!==s?l-s:(i.order||0)-(r.order||0)})}async function wv(e,r,i=null){let s=e;e===null&&(s=await gv(i));const l=await De.tasks.where("listId").equals(s).filter(g=>g.status!=="archived").sortBy("order"),c=Qa(l),h=r===""?"":r.trim();return await De.tasks.add({text:h,listId:s,order:c,status:"unchecked"})}async function Ev(e,r){const i=r===""?"":r.trim();return await De.tasks.update(e,{text:i})}async function Hu(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const i={status:r};return r==="archived"?i.archivedAt=Date.now():r!=="archived"&&(i.archivedAt=null),await De.tasks.update(e,i)}async function xv(e){const r=await De.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const i=await De.lists.get(r.listId);if(!i)throw new Error(`Task's list ${r.listId} not found`);let s=!1;i.archivedAt!=null&&(await kv(r.listId),s=!0);const l=await De.tasks.where("listId").equals(r.listId).filter(m=>m.status!=="archived"&&m.id!==e).sortBy("order"),c=Qa(l);return{taskUpdated:await De.tasks.update(e,{status:"checked",order:c}),listRestored:s}}async function Go(e,r){if(!r||r.length===0)return;const i=r.map(m=>m.id),l=(await De.tasks.bulkGet(i)).filter(m=>m!==void 0);if(l.length===0)return;const c=l.filter(m=>m.listId!==e),h=new Set(c.map(m=>m.listId));await De.transaction("rw",De.tasks,async()=>{for(let m=0;m<r.length;m++){const g=r[m].id,E=l.find(I=>I.id===g);if(!E)continue;const w={order:m};E.listId!==e&&(w.listId=e),await De.tasks.update(g,w)}for(const m of h){const g=await De.tasks.where("listId").equals(m).filter(E=>E.status!=="archived").sortBy("order");for(let E=0;E<g.length;E++)await De.tasks.update(g[E].id,{order:E})}})}async function Tv(e){const r=Date.now();return await De.lists.update(e,{archivedAt:r})}async function kv(e){return await De.lists.update(e,{archivedAt:null})}async function Dv(e){const r=Date.now(),i=await De.tasks.where("listId").equals(e).filter(l=>l.status==="unchecked"||l.status==="checked").toArray(),s=i.map(l=>De.tasks.update(l.id,{status:"archived",archivedAt:r}));return await Promise.all(s),i.length}async function Uu(e,r){if(!r||r.length===0)return;if(e<0||e>=5)throw new Error(`Invalid column index: ${e}`);const i=r.map(m=>m.id),s=await De.lists.bulkGet(i);if(s.filter(m=>!m).length>0)throw new Error("Cannot update order: some lists do not exist");const c=s.filter(m=>m!==void 0),h=c.filter(m=>(m.columnIndex??0)!==e);new Set(h.map(m=>m.columnIndex??0)),await De.transaction("rw",De.lists,async()=>{const m=new Set;for(let _=0;_<r.length;_++){const T=r[_].id,P=c.find(L=>L.id===T);if(!P)continue;const C={order:_},O=P.columnIndex??0;O!==e&&(C.columnIndex=e,m.add(O)),await De.lists.update(T,C)}const E=(await De.lists.orderBy("order").toArray()).filter(_=>_.archivedAt==null),w=Array(5).fill(null).map(()=>[]);for(const _ of E){const T=_.columnIndex??0,P=T>=5?4:T;w[P].push(_)}const I=new Set([e,...m]);for(const _ of I){const T=w[_];T.sort((P,C)=>(P.order??0)-(C.order??0));for(let P=0;P<T.length;P++)await De.lists.update(T[P].id,{order:P})}})}function ec(e,r,i={}){const{ignoreElements:s=[],shouldClose:l=()=>!0,checkIgnoreClick:c=null}=i;function h(g){const E=typeof e=="function"?e():e;if(E&&!E.contains(g.target)&&!(c&&c(g))){for(const w of s){let I=null;if(typeof w=="function"?I=w():I=w,I&&I.contains(g.target))return}l()&&r()}}const m=setTimeout(()=>{document.addEventListener("click",h)},0);return()=>{clearTimeout(m),document.removeEventListener("click",h)}}function us(e){return e===""}function Av(e){return e.trim()===""&&e.length>0}function ls(e){const r=e.trim(),i=Av(e);return{text:i?"":r,isBlank:i}}const Ra=160,tc=150,cs=1056,Iv=816,Ma=16;function Kr(e){return e&&(e.isDndShadowItem===!0||typeof e.id=="string"&&e.id.startsWith("id:dnd-shadow-placeholder-"))}function Sv(e,r=5){if(!e||e.length===0)return Array(r).fill(null).map(()=>[]);const i=Array(r).fill(null).map(()=>[]),s=r-1;for(const l of e){let c=l.columnIndex??0;c>=r&&(c=s),i[c].push(l)}for(let l=0;l<i.length;l++)i[l].sort((c,h)=>(c.order??0)-(h.order??0));return i}function Ov(e,r){if(!e||e.length===0)return null;for(let i=0;i<e.length;i++){const s=e[i];if(!Array.isArray(s))continue;const l=s.findIndex(c=>c.id===r);if(l!==-1)return{columnIndex:i,index:l}}return null}function Cv(e,r,i,s){const{columnIndex:l,index:c}=e;let h=l,m=c;if(r==="up"){if(c===0)return null;m=c-1}else if(r==="down"){const g=i[l]||[];if(c===g.length-1)return null;m=c+1}else if(r==="left"){if(l===0)return null;h=l-1,m=(i[h]||[]).length}else if(r==="right"){if(l===s-1)return null;h=l+1,m=(i[h]||[]).length}else return null;return{targetColumnIndex:h,targetIndex:m}}function Lv(e,r,i,s){const l=Ov(e,r);if(!l)return null;const{columnIndex:c,index:h}=l,m=Cv(l,i,e,s);if(!m)return null;const{targetColumnIndex:g,targetIndex:E}=m,w=e.map(O=>Array.isArray(O)?[...O]:[]),I=w[c];if(!I||I.length===0)return null;const[_]=I.splice(h,1);if(!_)return null;const T=w[g];if(!T)return null;const P=Math.min(Math.max(E,0),T.length);i==="left"||i==="right"?T.splice(P,0,{..._,columnIndex:g}):T.splice(P,0,_);const C=[];for(let O=0;O<w.length;O++){const L=w[O]||[];for(let H=0;H<L.length;H++){const Y=L[H];C.push({...Y,columnIndex:O,order:H})}}return{newColumns:w,updatedDraggableLists:C,targetColumnIndex:g,targetColumnItems:(w[g]||[]).map(O=>({id:O.id}))}}var Pv=Ie('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),Rv=Ie('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function Mv(e,r){ar(r,!0);let i=pe(Yt(r.taskText||"")),s=pe(!1),l=pe(null),c=pe(null),h=At(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const C=24,O=24,L=Ma,Y=C+O+L+8-8,N=10,X=r.taskPosition.top-Y,ee=r.taskPosition.left-Ma+N,le=r.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${X}px; left: ${ee}px; width: ${le}px;`});$e(()=>{r.isOpen&&(A(i,r.taskText||"",!0),A(s,!1))}),$e(()=>{r.isOpen&&p(l)&&setTimeout(()=>{p(l)?.focus(),p(l)?.select(),p(l)instanceof HTMLTextAreaElement&&(p(l).style.height="auto",p(l).style.height=`${Math.min(p(l).scrollHeight,Ra)}px`)},0)}),$e(()=>{if(p(l)&&p(l)instanceof HTMLTextAreaElement){const C=()=>{p(l).style.height="auto",p(l).style.height=`${Math.min(p(l).scrollHeight,Ra)}px`};return p(l).addEventListener("input",C),()=>{p(l).removeEventListener("input",C)}}});function m(){const C=p(i)??"",O=C.trim();if(O===""&&C.length>0){r.onSave(r.taskId,""),A(s,!1);return}if(C===""||O===""){A(s,!0);return}r.onSave(r.taskId,O),A(s,!1)}function g(){A(i,r.taskText||"",!0),A(s,!1),r.onCancel()}function E(C){C.target===C.currentTarget&&g()}function w(C){if(C.key==="Tab"){if(!p(c))return;const O=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),L=Array.from(p(c).querySelectorAll(O)).filter(ee=>!(!(ee instanceof HTMLElement)||ee.hasAttribute("disabled")||ee.getAttribute("aria-hidden")==="true"));if(L.length===0)return;const H=document.activeElement,Y=L.indexOf(H);let N;C.shiftKey?Y<=0?N=L.length-1:N=Y-1:Y===-1||Y===L.length-1?N=0:N=Y+1,C.preventDefault(),C.stopPropagation();const X=L[N];X&&X instanceof HTMLElement&&X.focus()}else C.key==="Escape"?g():C.key==="Enter"&&!C.shiftKey&&document.activeElement===p(l)&&(C.preventDefault(),m())}function I(){r.onArchive&&r.onArchive(r.taskId)}var _=Jn(),T=gt(_);{var P=C=>{var O=Rv();O.__click=E,O.__keydown=w;var L=xe(O);L.__click=ge=>ge.stopPropagation();var H=Oe(xe(L),2),Y=xe(H);Zt(Y,ge=>A(l,ge),()=>p(l));var N=Oe(Y,2);{var X=ge=>{var _e=Pv();be(ge,_e)};at(N,ge=>{p(s)&&ge(X)})}var ee=Oe(H,2),le=xe(ee);le.__click=I;var he=Oe(le,2),re=xe(he);re.__click=g;var ve=Oe(re,2);ve.__click=m,Zt(L,ge=>A(c,ge),()=>p(c)),tt(ge=>{rr(L,ge),rr(Y,`width: ${tc}px;`),vt(Y,"aria-describedby",p(s)?"validation-message":void 0),ve.disabled=p(s),vt(ve,"aria-label",p(s)?"Save disabled: task cannot be empty":"Save task changes")},[()=>p(h)()]),Ds(Y,()=>p(i),ge=>A(i,ge)),be(C,O)};at(T,C=>{r.isOpen&&C(P)})}be(e,_),or()}Ar(["click","keydown"]);var Nv=Ie('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),Kv=Ie('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-red-600 border border-red-300 rounded hover:bg-red-50" aria-label="Archive this list">Archive</button> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div>',1),Fv=Ie('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-gray-600">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel archiving">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700" aria-label="Confirm archive list">Archive</button></div>',1),Bv=Ie('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed box-border" role="document"><!></div></div>');function jv(e,r){ar(r,!0);let i=pe(Yt(r.listName||"")),s=pe(!1),l=pe(null),c=pe(null),h=pe("edit"),m=At(()=>()=>{if(!r.listPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const H=24,Y=24,N=Ma,ee=H+Y+N+8-8,le=r.listPosition.top-ee,he=r.listPosition.left-Ma,re=Math.max(r.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${le}px; left: ${he}px; width: ${re}px; max-width: ${re}px; box-sizing: border-box;`});$e(()=>{r.isOpen&&(A(i,r.listName||"",!0),A(s,!1),A(h,"edit"))}),$e(()=>{r.isOpen&&p(l)&&setTimeout(()=>{p(l)?.focus(),p(l)?.select()},0)});function g(){const Y=(p(i)??"").trim();if(Y===""){A(s,!0);return}r.onSave(r.listId,Y),A(s,!1)}function E(){A(i,r.listName||"",!0),A(s,!1),r.onCancel()}function w(H){H.target===H.currentTarget&&E()}function I(H){if(H.key==="Tab"){if(!p(c))return;const Y=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),N=Array.from(p(c).querySelectorAll(Y)).filter(re=>!(!(re instanceof HTMLElement)||re.hasAttribute("disabled")||re.getAttribute("aria-hidden")==="true"));if(N.length===0)return;const X=document.activeElement,ee=N.indexOf(X);let le;H.shiftKey?ee<=0?le=N.length-1:le=ee-1:ee===-1||ee===N.length-1?le=0:le=ee+1,H.preventDefault(),H.stopPropagation();const he=N[le];he&&he instanceof HTMLElement&&he.focus()}else H.key==="Escape"?p(h)==="confirm-archive"?P():E():H.key==="Enter"&&!H.shiftKey&&p(h)==="edit"&&H.target===p(l)&&(H.preventDefault(),g())}function _(){A(h,"confirm-archive")}function T(){r.onArchive(r.listId),E()}function P(){A(h,"edit")}var C=Jn(),O=gt(C);{var L=H=>{var Y=Bv();Y.__click=w,Y.__keydown=I;var N=xe(Y);N.__click=he=>he.stopPropagation();var X=xe(N);{var ee=he=>{var re=Kv(),ve=Oe(gt(re),2),ge=xe(ve);Zt(ge,He=>A(l,He),()=>p(l));var _e=Oe(ge,2);{var Xe=He=>{var We=Nv();be(He,We)};at(_e,He=>{p(s)&&He(Xe)})}var je=Oe(ve,2),ot=xe(je);ot.__click=_;var ut=Oe(ot,2),ze=xe(ut);ze.__click=E;var Mt=Oe(ze,2);Mt.__click=g,tt(()=>{vt(ge,"aria-describedby",p(s)?"validation-message":void 0),Mt.disabled=p(s),vt(Mt,"aria-label",p(s)?"Save disabled: list name cannot be empty":"Save list name changes")}),Ds(ge,()=>p(i),He=>A(i,He)),be(he,re)},le=he=>{var re=Jn(),ve=gt(re);{var ge=_e=>{var Xe=Fv(),je=Oe(gt(Xe),4),ot=xe(je);ot.__click=P;var ut=Oe(ot,2);ut.__click=T,be(_e,Xe)};at(ve,_e=>{p(h)==="confirm-archive"&&_e(ge)},!0)}be(he,re)};at(X,he=>{p(h)==="edit"?he(ee):he(le,!1)})}Zt(N,he=>A(c,he),()=>p(c)),tt(he=>rr(N,he),[()=>p(m)()]),be(H,Y)};at(O,H=>{r.isOpen&&H(L)})}be(e,C),or()}Ar(["click","keydown"]);var zv=Ie('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea class="flex-1 break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div>',1),Gv=Ie('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1" role="button" tabindex="0"> </span>',1),Hv=Ie('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-full print:hidden add-task-container add-task-button mt-2 svelte-jtbpvm"><!></div>');function Ho(e,r){ar(r,!0);let i=Pt(r,"isInputActive",11,!1),s=Pt(r,"inputValue",3,""),l=Pt(r,"buttonText",3,"Add Task"),c=Pt(r,"placeholder",3,"Add new task..."),h=Pt(r,"marginLeft",3,!1),m=Pt(r,"containerElement",15,null),g=Pt(r,"textareaElement",15,null),E=pe(null),w=pe(null);$e(()=>{m(p(w)),g(p(E))}),$e(()=>{i()&&p(E)&&setTimeout(()=>{p(E)?.focus(),p(E)instanceof HTMLTextAreaElement&&(p(E).style.height="auto",p(E).style.height=`${Math.min(p(E).scrollHeight,Ra)}px`)},0)}),$e(()=>{if(p(E)&&p(E)instanceof HTMLTextAreaElement){const L=()=>{p(E).style.height="auto",p(E).style.height=`${Math.min(p(E).scrollHeight,Ra)}px`};return p(E).addEventListener("input",L),()=>{p(E).removeEventListener("input",L)}}});function I(L){L.key==="Enter"&&!L.shiftKey?(L.preventDefault(),r.onSave?.()):L.key==="Escape"?r.onEscape?.(L):L.key==="Tab"&&r.onSave?.({closeAfterSave:!0})}function _(L){if(L.key==="Enter"||L.key===" ")L.preventDefault(),r.onActivate?.();else if(L.key==="Escape"){L.preventDefault(),L.stopPropagation(),L.stopImmediatePropagation();const H=L.currentTarget;H&&H instanceof HTMLElement&&H.blur()}}var T=Hv(),P=xe(T);{var C=L=>{var H=zv(),Y=Oe(gt(H),4),N=xe(Y);N.__input=ee=>r.onInputChange?.(ee.currentTarget.value),N.__keydown=I,Zt(N,ee=>A(E,ee),()=>p(E));var X=Oe(N,2);X.__click=function(...ee){r.onSave?.apply(this,ee)},tt(()=>{vt(N,"placeholder",c()),qd(N,s())}),be(L,H)},O=L=>{var H=Gv(),Y=Oe(gt(H),4);Y.__click=function(...X){r.onActivate?.apply(this,X)},Y.__keydown=_;var N=xe(Y);tt(()=>{vt(Y,"aria-label",r.ariaLabel||l()),Yn(N,l())}),be(L,H)};at(P,L=>{i()?L(C):L(O,!1)})}Zt(T,L=>A(w,L),()=>p(w)),tt(()=>rr(T,h()?"margin-left: 1.5rem;":"")),be(e,T),or()}Ar(["input","keydown","click"]);var Uv=Ie('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),Vv=Ie('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-full m-0 list-none svelte-k6mizj"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),Wv=Ie('<div class="empty-list-add-task-wrapper svelte-k6mizj"><!></div>'),Yv=Ie('<div class="task-list-wrapper m-0 p-0 svelte-k6mizj"><ul></ul> <!></div>'),Zv=Ie("<p>Loading tasks...</p> <!>",1),qv=Ie('<div class="flex flex-col gap-1 m-0 p-0 svelte-k6mizj"><div class="flex items-center gap-2 m-0 p-0"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder list" tabindex="-1" aria-hidden="true"></span> <h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 p-0 leading-none svelte-k6mizj"> </h2></div> <!></div> <!> <!>',1);function Qv(e,r){ar(r,!0);const i=()=>xa(p(m),"$tasksQuery",s),[s,l]=As();let c=Pt(r,"allLists",19,()=>[]),h=Pt(r,"stableLists",19,()=>[]),m=pe(null),g=pe(Yt([])),E=pe(!1),w=pe(!1),I=pe(null),_=pe(""),T=pe(null),P=pe(null),C=pe(null),O=pe(!1),L=pe(null),H=pe(null),Y=pe(null),N=pe(null),X=pe(null),ee=pe(null),le=pe(!1),he=pe(!1),re=pe(null),ve=pe(null);function ge(U){return Array.isArray(U)?[...U].sort((F,G)=>{const oe=F?.columnIndex??0,ce=G?.columnIndex??0;if(oe!==ce)return oe-ce;const Ze=F?.order??0,Ee=G?.order??0;if(Ze!==Ee)return Ze-Ee;const Se=F?.id??0,nt=G?.id??0;return Se-nt}):[]}function _e(U,F,G){const oe=ge(F);if(!oe.length)return null;const ce=oe.findIndex(Ze=>Ze.id===U);return ce===-1?null:G==="next"?ce>=oe.length-1?null:oe[ce+1].id:G==="prev"?ce<=0?null:oe[ce-1].id:null}$e(()=>{h().some(F=>F.id===r.listId)&&r.listId?(!p(m)||p(ve)!==r.listId)&&(Ta(A(m,Da(()=>zo(r.listId)),!0),"$tasksQuery",s),A(ve,r.listId,!0)):(Ta(A(m,null),"$tasksQuery",s),A(ve,null))}),$e(()=>{i()&&Array.isArray(i())&&A(g,i().filter(U=>U.status==="unchecked"||U.status==="checked"),!0)}),$e(()=>{if(!p(Y))return;function U(F){const G=F.target;if((F.key==="Enter"||F.key===" ")&&G instanceof HTMLElement&&G.tagName==="H2"&&G.hasAttribute("role")&&G.getAttribute("role")==="button"){const oe=p(Y)?.querySelector('h2[role="button"]');if(oe&&G===oe){F.preventDefault(),F.stopImmediatePropagation();const ce=G.getBoundingClientRect();A(L,{top:ce.top,left:ce.left,width:ce.width,height:ce.height},!0),A(H,G,!0),A(O,!0)}}}return p(Y).addEventListener("keydown",U,!0),()=>{p(Y)&&p(Y).removeEventListener("keydown",U,!0)}}),$e(()=>{if(!p(N))return;function U(F){const G=F.target;if((F.key==="Enter"||F.key===" ")&&G instanceof HTMLElement&&G.hasAttribute("role")&&G.getAttribute("role")==="button"){const oe=p(N)?.querySelector('span[role="button"]');oe&&G===oe&&(F.preventDefault(),F.stopImmediatePropagation(),He())}}return p(N).addEventListener("keydown",U,!0),()=>{p(N)&&p(N).removeEventListener("keydown",U,!0)}}),$e(()=>{if(!p(C))return;async function U(F){const G=F.target;if((F.key==="Enter"||F.key===" ")&&G instanceof HTMLElement&&G.hasAttribute("data-no-drag")){F.preventDefault(),F.stopImmediatePropagation();const oe=G.closest("li[data-id]");if(oe){const ce=parseInt(oe.getAttribute("data-id")),Ze=p(g).find(Ee=>Ee.id===ce);if(Ze){const Ee=G.getBoundingClientRect();A(T,{top:Ee.top,left:Ee.left,width:Ee.width,height:Ee.height},!0),A(P,G,!0),A(I,ce,!0),A(_,Ze.text,!0),A(w,!0)}}return}if(F.key==="ArrowDown"||F.key==="ArrowUp"){const oe=document.activeElement;if(!oe)return;const ce=oe.closest("li[data-id]");if(!ce||!p(C).contains(ce))return;const Ze=ce.getAttribute("data-id");if(!Ze)return;const Ee=parseInt(Ze);if(!p(g).find(Ke=>Ke.id===Ee))return;const nt=p(g).findIndex(Ke=>Ke.id===Ee),dt=nt===0,Kt=nt===p(g).length-1;if(F.key==="ArrowDown"&&Kt){F.preventDefault(),F.stopImmediatePropagation();const Ke=_e(r.listId,c(),"next");Ke!=null&&await Xe(Ee,Ke)}else if(F.key==="ArrowUp"&&dt){F.preventDefault(),F.stopImmediatePropagation();const Ke=_e(r.listId,c(),"prev");Ke!=null&&await je(Ee,Ke)}}}return p(C).addEventListener("keydown",U,!0),()=>{p(C).removeEventListener("keydown",U,!0)}});async function Xe(U,F){try{const G=await zo(F),oe=[{id:U},...G];await Go(F,oe)}catch(G){console.error("Error moving task to next list:",G)}}async function je(U,F){try{const oe=[...await zo(F),{id:U}];await Go(F,oe)}catch(G){console.error("Error moving task to previous list:",G)}}function ot(U){A(g,U.detail.items.filter(F=>F&&typeof F.id=="number"),!0)}function ut(U,F){const G=U.key,oe=U.currentTarget,ce=U.target;!(oe instanceof HTMLElement)||oe!==ce||(G==="Enter"||G===" "?p(he)?(A(he,!1),A(re,F,!0),A(ee,oe,!0),A(le,!0)):(A(he,!0),A(re,F,!0)):G==="Escape"&&(p(he)?(A(he,!1),A(re,F,!0),A(ee,oe,!0),A(le,!0)):(U.preventDefault(),U.stopPropagation(),U.stopImmediatePropagation(),A(ee,oe,!0),A(le,!0),oe instanceof HTMLElement&&oe.blur())))}function ze(U,F){const G=U.currentTarget;p(he)&&p(re)===F&&(A(he,!1),A(ee,G,!0),A(le,!0))}$e(()=>{if(!p(C))return;async function U(F){const G=F.key;if(G==="Tab"&&p(le)&&p(ee)){if(F.preventDefault(),F.stopImmediatePropagation(),F.stopPropagation(),A(le,!1),typeof document<"u"){let Ke=p(ee);if((!(Ke instanceof HTMLElement)||!document.contains(Ke))&&p(N)){const Mn=p(N).querySelector('span[role="button"]');Mn&&Mn instanceof HTMLElement&&(Ke=Mn)}Ke&&Ke instanceof HTMLElement&&Ke.focus()}return}if(G!=="ArrowDown"&&G!=="ArrowUp")return;const oe=document.activeElement;if(!oe)return;const ce=oe.closest("li[data-id]");if(!ce||!p(C).contains(ce))return;const Ze=ce.getAttribute("data-id");if(!Ze)return;const Ee=parseInt(Ze);if(!p(g).find(Ke=>Ke.id===Ee))return;const nt=p(g).findIndex(Ke=>Ke.id===Ee),dt=nt===0,Kt=nt===p(g).length-1;if(G==="ArrowDown"&&Kt){F.preventDefault(),F.stopImmediatePropagation(),F.stopPropagation();const Ke=_e(r.listId,c(),"next");Ke!=null&&await Xe(Ee,Ke)}else if(G==="ArrowUp"&&dt){F.preventDefault(),F.stopImmediatePropagation(),F.stopPropagation();const Ke=_e(r.listId,c(),"prev");Ke!=null&&await je(Ee,Ke)}}return document.addEventListener("keydown",U,!0),()=>{document.removeEventListener("keydown",U,!0)}});async function Mt(U){const F=U.detail.items.filter(G=>G&&typeof G.id=="number");A(g,F,!0);try{await Go(r.listId,F)}catch(G){console.error("Error updating task order:",G)}}function He(){A(E,!0)}async function We(U){if(U.key==="Escape"){if(A(le,!0),p(N)){const F=p(N).querySelector('span[role="button"]');F&&F instanceof HTMLElement?A(ee,F,!0):A(ee,null)}else A(ee,null);A(E,!1),r.onInputChange(""),await Wn(),await Wn(),await new Promise(F=>requestAnimationFrame(F)),await new Promise(F=>setTimeout(F,200))}}$e(()=>{if(p(E))return ec(()=>p(X),()=>{p(E)&&(A(E,!1),r.onInputChange(""))},{ignoreElements:[],checkIgnoreClick:U=>{if(!p(N))return!1;const F=p(N).querySelector("button");return!!(F&&F.contains(U.target))},shouldClose:()=>p(X)&&p(X).value.trim()!==""?!1:!r.newTaskInput||r.newTaskInput.trim()===""})});async function bt(U={}){const F=U&&typeof U=="object"&&U.closeAfterSave===!0;let G=r.newTaskInput||"";if(p(X)&&(G=(p(X).value||"").toString()),G=(G||"").toString(),us(G)){A(E,!1),r.onInputChange(""),await Wn(),await Wn(),await new Promise(ce=>requestAnimationFrame(ce)),await new Promise(ce=>setTimeout(ce,200));return}const{text:oe}=ls(G);try{await wv(r.listId,oe),r.onInputChange(""),F&&A(E,!1)}catch(ce){console.error("Error creating task:",ce)}}async function Nt(U,F){try{await Hu(U,F==="unchecked"?"checked":"unchecked")}catch(G){console.error("Error updating task status:",G)}}async function rn(U){await Hu(U,"archived")}function wt(){if(!p(C))return null;const U=p(C).querySelector("li[data-id]");if(U){const F=U.querySelector('span[role="button"]');if(F&&F instanceof HTMLElement)return F}return null}function Z(U=20,F=10){if(!p(Y))return;const G=(oe=0)=>{if(p(N)){const ce=p(N).querySelector('span[role="button"]');if(ce&&ce instanceof HTMLElement){ce.focus();return}}oe<U&&setTimeout(()=>G(oe+1),F)};G()}async function W(U){try{if(await rn(U),p(I)===U){const F=p(P);A(w,!1),A(I,null),A(_,""),A(T,null),A(P,null),await Wn(),await new Promise(G=>setTimeout(G,10)),setTimeout(()=>{const G=(oe=0)=>{const ce=wt();ce?ce.focus():oe<20?setTimeout(()=>G(oe+1),10):Z(40,10)};G()},20)}}catch(F){console.error("Error archiving task:",F)}}function ie(U,F,G){const oe=G?.currentTarget||G?.target;if(oe){const ce=oe.getBoundingClientRect();A(T,{top:ce.top,left:ce.left,width:ce.width,height:ce.height},!0),A(P,oe,!0)}A(I,U,!0),A(_,F,!0),A(w,!0)}function Te(U,F,G){const oe=G.key;if(oe==="Enter"||oe===" "){G.preventDefault(),G.stopImmediatePropagation();const ce=G.currentTarget;if(ce){const Ze=ce.getBoundingClientRect();A(T,{top:Ze.top,left:Ze.left,width:Ze.width,height:Ze.height},!0),A(P,ce,!0),A(I,U,!0),A(_,F,!0),A(w,!0)}}else if(oe==="Escape"){G.preventDefault(),G.stopImmediatePropagation();const ce=G.currentTarget;ce&&ce instanceof HTMLElement&&(A(ee,ce,!0),A(le,!0),ce.blur())}}async function Ce(U,F){try{await Ev(U,F),A(w,!1);const G=p(P);A(I,null),A(_,""),A(T,null),A(P,null),G&&G instanceof HTMLElement&&setTimeout(()=>{G.focus()},0)}catch(G){console.error("Error updating task text:",G)}}function lt(){const U=p(P);A(w,!1),A(I,null),A(_,""),A(T,null),A(P,null),U&&U instanceof HTMLElement&&setTimeout(()=>{U.focus()},0)}async function Ue(U){p(P),await W(U),setTimeout(()=>{if(typeof document>"u")return;const F=document.activeElement;p(Y)&&(!F||!p(Y).contains(F))&&Z(20,10)},10)}function Ge(U){const F=U?.currentTarget||U?.target;if(F){const G=F.getBoundingClientRect();A(L,{top:G.top,left:G.left,width:G.width,height:G.height},!0),A(H,F,!0)}A(O,!0)}function fe(U){if(U.key==="Enter"||U.key===" "){U.preventDefault(),U.stopPropagation(),U.stopImmediatePropagation();const F=U.currentTarget;if(F){const G=F.getBoundingClientRect();A(L,{top:G.top,left:G.left,width:G.width,height:G.height},!0),A(H,F,!0),A(O,!0)}}else if(U.key==="Escape"){U.preventDefault(),U.stopPropagation(),U.stopImmediatePropagation();const F=U.currentTarget;F&&F instanceof HTMLElement&&F.blur()}}async function Fe(U,F){try{await _v(U,F),A(O,!1);const G=p(H);A(L,null),A(H,null),G&&G instanceof HTMLElement&&setTimeout(()=>{G.focus()},0)}catch(G){console.error("Error updating list name:",G)}}function we(){const U=p(H);A(O,!1),A(L,null),A(H,null),U&&U instanceof HTMLElement&&setTimeout(()=>{U.focus()},0)}async function Ve(U){try{await Dv(U),await Tv(U)}catch(F){console.error("Error archiving list:",F)}}var Ye=qv(),Ct=gt(Ye),Ir=xe(Ct),ae=Oe(xe(Ir),2);ae.__click=Ge,ae.__keydown=fe;var Rn=xe(ae),Sr=Oe(Ir,2);{var En=U=>{var F=Yv(),G=xe(F);br(G,21,()=>p(g),Ee=>Ee.id,(Ee,Se)=>{var nt=Vv(),dt=Oe(xe(nt),2);dt.__change=()=>Nt(p(Se).id,p(Se).status),dt.__keydown=Je=>{if(Je.key==="Enter"||Je.key===" ")Je.preventDefault(),Je.stopPropagation(),Nt(p(Se).id,p(Se).status);else if(Je.key==="Escape"){Je.preventDefault(),Je.stopPropagation(),Je.stopImmediatePropagation();const Et=Je.currentTarget;if(Et&&Et instanceof HTMLElement){const sr=Et.closest("li[data-id]");sr&&sr instanceof HTMLElement&&(A(ee,sr,!0),A(le,!0)),Et.blur()}}};var Kt=Oe(dt,2);Kt.__click=Je=>ie(p(Se).id,p(Se).text,Je),Kt.__keydown=Je=>Te(p(Se).id,p(Se).text,Je);var Ke=xe(Kt),Mn=Oe(Kt,2);{var Xa=Je=>{var Et=Uv();Et.__click=()=>W(p(Se).id),tt(()=>vt(Et,"aria-label",`Archive task: ${p(Se).text||"blank task"}`)),be(Je,Et)};at(Mn,Je=>{p(Se).status==="checked"&&Je(Xa)})}tt(()=>{vt(nt,"data-id",p(Se).id),Ml(dt,p(Se).status==="checked"),vt(dt,"aria-label",`Mark task "${p(Se).text||"blank task"}" as ${p(Se).status==="checked"?"unchecked":"checked"}`),xi(Kt,1,Rl(p(Se).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1":"cursor-pointer hover:underline break-words flex-1")),vt(Kt,"aria-label",`Edit task: ${p(Se).text||"blank task"}`),Yn(Ke,p(Se).text||"")}),Dn("keydown",nt,Je=>ut(Je,p(Se).id),!0),Dn("blur",nt,Je=>ze(Je,p(Se).id)),be(Ee,nt)}),Zt(G,Ee=>A(C,Ee),()=>p(C)),Ts(G,(Ee,Se)=>Rs?.(Ee,Se),()=>({items:p(g),type:"task",zoneTabIndex:-1}));var oe=Oe(G,2);{var ce=Ee=>{var Se=Wv(),nt=xe(Se);Ho(nt,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:bt,onEscape:We,onActivate:He,buttonText:"Add your first task",placeholder:"Add new task...",get ariaLabel(){return`Add your first task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return p(E)},set isInputActive(dt){A(E,dt,!0)},get containerElement(){return p(N)},set containerElement(dt){A(N,dt,!0)},get textareaElement(){return p(X)},set textareaElement(dt){A(X,dt,!0)}}),be(Ee,Se)},Ze=Ee=>{Ho(Ee,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:bt,onEscape:We,onActivate:He,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return p(E)},set isInputActive(Se){A(E,Se,!0)},get containerElement(){return p(N)},set containerElement(Se){A(N,Se,!0)},get textareaElement(){return p(X)},set textareaElement(Se){A(X,Se,!0)}})};at(oe,Ee=>{p(g).length===0?Ee(ce):Ee(Ze,!1)})}tt(()=>xi(G,1,`space-y-2 m-0 p-0 list-none ${p(g).length===0?"empty-drop-zone min-h-[24px]":""}`,"svelte-k6mizj")),Dn("consider",G,ot),Dn("finalize",G,Mt),be(U,F)},Re=U=>{var F=Zv(),G=Oe(gt(F),2);Ho(G,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:bt,onEscape:We,onActivate:He,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return p(E)},set isInputActive(oe){A(E,oe,!0)},get containerElement(){return p(N)},set containerElement(oe){A(N,oe,!0)},get textareaElement(){return p(X)},set textareaElement(oe){A(X,oe,!0)}}),be(U,F)};at(Sr,U=>{p(m)&&i()!==void 0?U(En):U(Re,!1)})}Zt(Ct,U=>A(Y,U),()=>p(Y));var cn=Oe(Ct,2);Mv(cn,{get isOpen(){return p(w)},get taskId(){return p(I)},get taskText(){return p(_)},get taskPosition(){return p(T)},onSave:Ce,onCancel:lt,onArchive:Ue});var $r=Oe(cn,2);jv($r,{get isOpen(){return p(O)},get listId(){return r.listId},get listName(){return r.listName},get listPosition(){return p(L)},onSave:Fe,onCancel:we,onArchive:Ve}),tt(()=>{vt(Ct,"data-list-id",r.listId),vt(ae,"aria-label",`Rename list: ${r.listName}`),Yn(Rn,r.listName)}),be(e,Ye),or(),l()}Ar(["click","keydown","change"]);var Xv=Ie('<div class="flex flex-col mb-6 svelte-785piu" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),Jv=Ie('<div class="flex flex-col mb-6 svelte-785piu"></div>'),$v=Ie('<div class="empty-drop-zone min-h-[48px]" tabindex="-1"></div>'),ep=Ie('<h2><div class="flex items-center gap-2"><input type="text" class="create-list-input cursor-pointer hover:underline svelte-785piu" placeholder="List name..." aria-label="Enter list name"/> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" aria-label="Create list">Save</button></div></h2>'),tp=Ie('<h2 role="button" tabindex="0" aria-label="Create new list">Create new list</h2>'),np=Ie('<div class="flex flex-col min-w-0 border-r border-gray-300 last:border-r-0 pt-0 svelte-785piu"><div class="flex flex-col pt-0"><!> <!></div> <!></div>');function rp(e,r){ar(r,!0);let i=Pt(r,"createListInput",15,""),s=Pt(r,"createListInputElement",15,null),l=pe(null),c=pe(null),h=pe(null);$e(()=>{if(typeof document>"u"||r.columnLists.length!==0||!p(c))return;const C=setTimeout(()=>{p(c)&&p(c).getAttribute("tabindex")!=="-1"&&p(c).setAttribute("tabindex","-1")},10);return()=>{clearTimeout(C)}});var m=np(),g=xe(m),E=xe(g);br(E,19,()=>r.columnLists,C=>C.id,(C,O)=>{const L=At(()=>Kr(p(O))),H=At(()=>r.stableLists.find(re=>re.id===p(O).id)),Y=At(()=>!p(H)&&!p(L)?p(O):null),N=At(()=>p(H)||p(Y));var X=Jn(),ee=gt(X);{var le=re=>{var ve=Xv(),ge=xe(ve);{let _e=At(()=>p(N).name??"Unnamed list"),Xe=At(()=>r.newTaskInputs[p(N).id]||"");Qv(ge,{get listId(){return p(N).id},get listName(){return p(_e)},get newTaskInput(){return p(Xe)},onInputChange:je=>r.onInputChange(p(N).id,je),get allLists(){return r.allLists},get stableLists(){return r.stableLists}})}tt(()=>{vt(ve,"data-id",p(O).id),vt(ve,"aria-label",`List: ${p(N).name??"Unnamed list"}`),vt(ve,"aria-pressed",r.keyboardListDrag.active&&r.keyboardListDrag.listId===p(N).id?"true":"false")}),Dn("keydown",ve,_e=>r.onListKeyboardKeydown(_e,p(N).id),!0),be(re,ve)},he=re=>{var ve=Jv();tt(()=>vt(ve,"data-id",p(O).id)),be(re,ve)};at(ee,re=>{p(N)?re(le):re(he,!1)})}be(C,X)});var w=Oe(E,2);{var I=C=>{var O=$v();Zt(O,L=>A(c,L),()=>p(c)),be(C,O)};at(w,C=>{r.columnLists.length===0&&C(I)})}Zt(g,C=>A(l,C),()=>p(l)),Ts(g,(C,O)=>Rs?.(C,O),()=>({items:r.columnLists,type:"list",zoneTabIndex:-1}));var _=Oe(g,2);{var T=C=>{var O=ep(),L=xe(O),H=xe(L);H.__keydown=N=>{N.key==="Enter"&&!N.shiftKey?(N.preventDefault(),r.onCreateList(r.columnIndex)):N.key==="Escape"?r.onCreateListInputEscape(N):N.key==="Tab"&&r.onCreateListOnTab(r.columnIndex)},Zt(H,N=>s(N),()=>s());var Y=Oe(H,2);Y.__click=()=>r.onCreateList(r.columnIndex),tt(()=>xi(O,1,`print:hidden m-0 p-0 create-list-wrapper ${r.columnLists.length===0?"create-list-empty-column":""}`,"svelte-785piu")),Ds(H,i),be(C,O)},P=C=>{var O=tp();O.__click=()=>r.onCreateListClick(r.columnIndex),O.__keydown=L=>r.onCreateListKeydown(L,r.columnIndex),Zt(O,L=>A(h,L),()=>p(h)),tt(()=>xi(O,1,`cursor-pointer hover:underline print:hidden m-0 p-0 create-list-wrapper ${r.columnLists.length===0?"create-list-empty-column":""}`,"svelte-785piu")),be(C,O)};at(_,C=>{r.createListColumnIndex===r.columnIndex?C(T):C(P,!1)})}tt(()=>vt(m,"data-column-index",r.columnIndex)),Dn("consider",g,function(...C){r.onListConsider?.apply(this,C)}),Dn("finalize",g,function(...C){r.onListFinalize?.apply(this,C)}),be(e,m),or()}Ar(["keydown","click"]);var ip=Ie('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" disabled class="cursor-pointer opacity-50" aria-hidden="true" tabindex="-1"/> <span> </span></li>'),ap=Ie('<div class="relative print:hidden"><ul class="m-0 p-0 list-none min-h-0 pb-2"></ul></div>');function op(e,r){let i=Pt(r,"createListDropZoneElement",12),s=Pt(r,"createListDropZoneItems",8),l=Pt(r,"onConsider",8),c=Pt(r,"onFinalize",8);var h=ap(),m=xe(h);br(m,5,s,g=>g.id,(g,E)=>{var w=ip(),I=Oe(xe(w),2),_=Oe(I,2),T=xe(_);tt(()=>{vt(w,"data-id",(p(E),wn(()=>p(E).id))),Ml(I,(p(E),wn(()=>p(E).status==="checked"))),xi(_,1,Rl((p(E),wn(()=>p(E).status==="checked"?"line-through break-words":"break-words")))),rr(_,`width: ${tc}px;`),Yn(T,(p(E),wn(()=>p(E).text||"")))}),be(g,w)}),Zt(m,g=>i(g),()=>i()),Ts(m,(g,E)=>Rs?.(g,E),()=>({items:s(),type:"task"})),Dn("consider",m,function(...g){l()?.apply(this,g)}),Dn("finalize",m,function(...g){c()?.apply(this,g)}),be(e,h)}var sp=Ie("<p>Loading...</p>"),up=Ie('<div class="grid grid-cols-5 gap-4 w-full"></div> <!>',1),lp=Ie('<div class="w-full h-full p-4 overflow-auto"><!></div>');function cp(e,r){ar(r,!0);const i=()=>xa(c,"$lists",s),[s,l]=As();let c=Da(()=>mv()),h=At(()=>i()||[]),m=pe(Yt([])),g=pe(Yt({})),E=pe(null),w=pe(""),I=pe(null),_=pe(Yt([])),T=pe(null),P=pe(Yt({active:!1,listId:null})),C=pe(null),O=pe(!1);$e(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(p(g)).length===0){const Z={};for(const W of i())Z[W.id]="";A(g,Z,!0)}}),$e(()=>{if(i()&&Array.isArray(i())&&i().length>0){const Z={...p(g)};let W=!1;for(const ie of i())ie.id in Z||(Z[ie.id]="",W=!0);W&&A(g,Z,!0)}});let L=pe(0);$e(()=>{if(i()&&Array.isArray(i())){const Z=i().map(W=>({id:W.id,name:W.name,order:W.order,columnIndex:W.columnIndex}));Z.length!==p(L)&&(console.log("[DRAG] draggableLists updated from liveQuery:",{previousCount:p(L),newCount:Z.length}),A(L,Z.length,!0)),A(m,Z,!0)}else p(L)>0&&(console.log("[DRAG] draggableLists cleared (no lists)"),A(L,0)),A(m,[],!0)});const H=5;let Y=At(()=>Sv(p(m),H));async function N(Z,W){const ie=p(Y);if(!ie||ie.length===0)return;const Te=Lv(ie,Z,W,H);if(!Te)return;const{updatedDraggableLists:Ce,targetColumnIndex:lt,targetColumnItems:Ue}=Te;A(m,Ce,!0);try{await Uu(lt,Ue)}catch(Ge){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",Ge)}p(P).active&&p(P).listId===Z&&await ee(Z)}function X(Z){return p(P).active===!0&&p(P).listId===Z}async function ee(Z){if(typeof document>"u")return;await Wn();const W=Array.from(document.querySelectorAll(`[data-id="${Z}"]`));let ie=W.find(Te=>Te instanceof HTMLElement&&Te.getAttribute("role")==="group");ie||(ie=W.find(Te=>Te instanceof HTMLElement&&Te.tagName==="DIV")),ie instanceof HTMLElement&&ie.focus()}function le(Z){A(O,!1),A(P,{active:!0,listId:Z},!0)}function he(){p(P).listId!=null&&(A(C,p(P).listId,!0),A(O,!0)),A(P,{active:!1,listId:null},!0)}function re(){if(typeof document>"u")return;const Z=document.activeElement;Z&&Z instanceof HTMLElement&&Z.blur()}function ve(Z,W){const ie=Z.currentTarget,Te=Z.target,Ce=Z.key;if(!X(W)){Ce==="Enter"||Ce===" "?ie instanceof HTMLElement&&ie===Te&&(Z.preventDefault(),Z.stopPropagation(),Z.stopImmediatePropagation(),W!=null&&le(W)):Ce==="Escape"&&ie instanceof HTMLElement&&ie===Te&&(Z.preventDefault(),Z.stopPropagation(),Z.stopImmediatePropagation(),W!=null&&(A(C,W,!0),A(O,!0)),ie.blur());return}}$e(()=>{if(typeof document>"u")return;function Z(W){const ie=W.key,Te=p(P).active===!0,Ce=p(P).listId;if(!Te&&ie==="Tab"&&p(O)&&p(C)!=null){W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation(),A(O,!1),ee(p(C));return}if(!(!Te||Ce==null)){if(ie==="ArrowUp"){W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation(),N(Ce,"up");return}if(ie==="ArrowDown"){W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation(),N(Ce,"down");return}if(ie==="ArrowLeft"){W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation(),N(Ce,"left");return}if(ie==="ArrowRight"){W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation(),N(Ce,"right");return}if(ie==="Escape"||ie==="Enter"||ie===" "){W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation(),he(),re();return}if(ie==="Tab"){W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation(),he(),re();return}}}return document.addEventListener("keydown",Z,!0),()=>{document.removeEventListener("keydown",Z,!0)}});function ge(Z,W){p(g)[Z]=W}function _e(Z){A(E,Z,!0)}function Xe(Z,W){if(Z.key==="Enter"||Z.key===" ")Z.preventDefault(),Z.stopPropagation(),_e(W);else if(Z.key==="Escape"){Z.preventDefault(),Z.stopPropagation(),Z.stopImmediatePropagation();const ie=Z.currentTarget;ie&&ie instanceof HTMLElement&&ie.blur()}}function je(Z){Z.key==="Escape"&&(A(E,null),A(w,""))}$e(()=>{if(p(E)!==null)return ec(p(I),()=>{p(E)!==null&&(A(E,null),A(w,""))},{ignoreElements:[],checkIgnoreClick:Z=>{const W=Z.target.closest("button");return W&&W.textContent?.trim()==="Save"},shouldClose:()=>!p(w)||p(w).trim()===""})}),$e(()=>{p(E)!==null&&p(I)&&setTimeout(()=>{p(I)?.focus()},0)});async function ot(Z){const W=p(w)||"";if(us(W)){A(E,null),A(w,"");return}const{text:ie,isBlank:Te}=ls(W);if(Te){A(E,null),A(w,"");return}try{await Gu(ie,Z),A(w,""),await Wn(),p(I)&&setTimeout(()=>{p(I)?.focus()},0)}catch(Ce){console.error("Error creating list:",Ce)}}async function ut(Z){const W=p(w)||"";if(us(W)){A(E,null),A(w,"");return}const{text:ie,isBlank:Te}=ls(W);if(Te){A(E,null),A(w,"");return}try{await Gu(ie,Z),A(w,""),A(E,null)}catch(Ce){console.error("Error creating list on Tab:",Ce)}}function ze(Z){A(_,Z.detail.items,!0)}async function Mt(Z){A(_,Z.detail.items,!0),A(_,[],!0)}function He(Z,W){console.log("[DRAG] ===== CONSIDER EVENT ====="),console.log("[DRAG] consider - column:",W),console.log("[DRAG] consider - event.detail.items count:",Z.detail.items?.length||0);const ie=Z.detail.items||[],Te=ie.filter(fe=>Kr(fe)),Ce=ie.filter(fe=>!Kr(fe));console.log("[DRAG] consider - placeholders detected:",Te.length),Te.length>0&&console.log("[DRAG] consider - placeholder items:",Te.map(fe=>({id:fe.id,isDndShadowItem:fe.isDndShadowItem}))),console.log("[DRAG] consider - valid items:",Ce.length);const lt=p(m).filter(fe=>(fe.columnIndex??0)===W);console.log("[DRAG] consider - current lists in column",W+" (before update):",lt.map(fe=>({id:fe.id,name:fe.name,columnIndex:fe.columnIndex}))),console.log("[DRAG] consider - newColumnItems IDs:",ie.map(fe=>({id:fe.id,isPlaceholder:Kr(fe)})));const Ue=Ce.every(fe=>{const Fe=p(m).find(we=>we.id===fe.id);return Fe&&(Fe.columnIndex??0)===W});console.log("[DRAG] consider - isSameColumnReorder:",Ue);for(const fe of Ce){const Fe=p(m).find(we=>we.id===fe.id);if(Fe){const we=Fe.columnIndex??0;we!==W&&console.log("[DRAG] consider - CROSS-COLUMN MOVE DETECTED:",{listId:fe.id,listName:fe.name,oldColumn:we,newColumn:W})}else console.log("[DRAG] consider - NEW ITEM IN COLUMN (possibly from another column):",{listId:fe.id,listName:fe.name,column:W})}const Ge=p(m).filter(fe=>(fe.columnIndex??0)!==W);for(let fe=0;fe<ie.length;fe++){const Fe=ie[fe],we=p(m).find(Ye=>Ye.id===Fe.id),Ve=we?{...we,...Fe,columnIndex:W,order:fe}:{...Fe,columnIndex:W,order:fe};Ge.push(Ve)}console.log("[DRAG] consider - updated draggableLists count:",Ge.length),console.log("[DRAG] consider - updated lists in column",W+":",Ge.filter(fe=>(fe.columnIndex??0)===W).map(fe=>({id:fe.id,name:fe.name,columnIndex:fe.columnIndex}))),A(m,Ge,!0);try{const fe=p(Y).map((Fe,we)=>({columnIndex:we,listCount:Fe.length,listIds:Fe.map(Ve=>Ve.id)}));console.log("[DRAG] consider - listsByColumn state (after update):",fe)}catch(fe){console.warn("[DRAG] consider - error logging listsByColumn:",fe)}console.log("[DRAG] ===== END CONSIDER EVENT =====")}async function We(Z,W){console.log("[DRAG] ===== FINALIZE EVENT ====="),console.log("[DRAG] finalize - column where drop occurred:",W),console.log("[DRAG] finalize - event.detail.items count:",Z.detail.items?.length||0);const ie=(Z.detail.items||[]).filter(we=>!Kr(we)),Te=(Z.detail.items||[]).filter(we=>Kr(we));console.log("[DRAG] finalize - placeholders filtered out:",Te.length),Te.length>0&&console.warn("[DRAG] finalize - WARNING: Placeholders still present in finalize!",Te.length),console.log("[DRAG] finalize - valid items (after filtering placeholders):",ie.length),console.log("[DRAG] finalize - valid items details:",ie.map(we=>({id:we.id,name:we.name,order:we.order,columnIndex:we.columnIndex})));const Ce=[];let lt=!1;for(const we of ie){const Ve=(i()||[]).find(Ye=>Ye.id===we.id);if(Ve){const Ye=Ve.columnIndex??0;Ye!==W&&(lt=!0,Ce.push({listId:we.id,listName:we.name,oldColumn:Ye,newColumn:W}))}else{const Ye=p(m).find(Ct=>Ct.id===we.id);Ye&&(Ye.columnIndex??0)!==W&&(lt=!0)}}Ce.length>0&&console.log("[DRAG] finalize - COLUMN CHANGES DETECTED:",Ce);const Ge=(i()||[]).filter(we=>(we.columnIndex??0)===W).length,fe=ie.length;if(fe<Ge&&!lt){console.log("[DRAG] finalize - SKIPPING database update (source column that lost items)",{originalCount:Ge,currentCount:fe,hasItemsFromOtherColumns:lt}),console.log("[DRAG] ===== END FINALIZE EVENT =====");return}if(ie.length===0&&!lt&&Ge>0){console.log("[DRAG] finalize - SKIPPING database update (empty column that lost all items)"),console.log("[DRAG] ===== END FINALIZE EVENT =====");return}try{console.log("[DRAG] finalize - updating database with updateListOrderWithColumn..."),await Uu(W,ie),console.log("[DRAG] finalize - database update successful"),console.log("[DRAG] finalize - waiting for $effect to sync draggableLists from liveQuery...")}catch(we){console.error("[DRAG] finalize - ERROR updating list order:",we)}console.log("[DRAG] ===== END FINALIZE EVENT =====")}var bt=lp(),Nt=xe(bt);{var rn=Z=>{var W=sp();be(Z,W)},wt=Z=>{var W=Jn(),ie=gt(W);{var Te=Ce=>{var lt=up(),Ue=gt(lt);br(Ue,21,()=>p(Y),da,(fe,Fe,we)=>{rp(fe,{columnIndex:we,get columnLists(){return p(Fe)},get stableLists(){return p(h)},get newTaskInputs(){return p(g)},get createListColumnIndex(){return p(E)},get keyboardListDrag(){return p(P)},onInputChange:ge,onListKeyboardKeydown:ve,onListConsider:Ve=>He(Ve,we),onListFinalize:Ve=>We(Ve,we),onCreateListClick:_e,onCreateListKeydown:Xe,onCreateListInputEscape:je,onCreateList:ot,onCreateListOnTab:ut,get allLists(){return i()},get createListInput(){return p(w)},set createListInput(Ve){A(w,Ve,!0)},get createListInputElement(){return p(I)},set createListInputElement(Ve){A(I,Ve,!0)}})});var Ge=Oe(Ue,2);op(Ge,{get createListDropZoneItems(){return p(_)},onConsider:ze,onFinalize:Mt,get createListDropZoneElement(){return p(T)},set createListDropZoneElement(fe){A(T,fe,!0)}}),be(Ce,lt)};at(ie,Ce=>{Array.isArray(i())&&Ce(Te)},!0)}be(Z,W)};at(Nt,Z=>{i()===void 0||i()===null?Z(rn):Z(wt,!1)})}be(e,bt),or(),l()}var fp=Ie("<p>Loading...</p>"),dp=Ie("<p>Loading data...</p>"),hp=Ie("<p>No archived lists or tasks</p>"),vp=Ie('<span class="text-sm text-gray-500"> </span>'),pp=Ie('<span class="text-xs bg-gray-200 px-2 py-1 rounded">[List Archived]</span> <!>',1),mp=Ie('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),yp=Ie('<p class="text-sm text-gray-500 italic">No archived tasks</p>'),gp=Ie('<li class="flex items-center gap-3 flex-wrap"><span class="line-through"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button></li>'),_p=Ie('<div class="mb-4"><h4 class="text-sm font-medium text-gray-600 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),bp=Ie('<div class="border-b border-gray-200 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <div class="border-b border-gray-200 pb-4"><!></div>',1),wp=Ie('<div class="grid grid-cols-2 gap-4"></div>'),Ep=Ie('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function xp(e,r){ar(r,!0);const i=()=>xa(p(m),"$listsQuery",l),s=()=>xa(p(h),"$archivedTasksQuery",l),[l,c]=As();let h=pe(null),m=pe(null);$e(()=>{Ta(A(h,Da(()=>bv()),!0),"$archivedTasksQuery",l),Ta(A(m,Da(()=>yv()),!0),"$listsQuery",l)});function g(L){return L?new Date(L).toDateString():null}function E(L){return L?new Date(L).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let w=At(()=>{const L=p(h)?s():null,H=p(m)?i():null;if(!H||!Array.isArray(H))return[];const Y={};if(L&&Array.isArray(L))for(const X of L)Y[X.listId]||(Y[X.listId]=[]),Y[X.listId].push(X);const N=[];for(const X of H){const ee=X.archivedAt!=null,le=Y[X.id]&&Y[X.id].length>0;if(ee||le){const he=Y[X.id]||[],re={};for(const ve of he){const ge=g(ve.archivedAt)||"Unknown";re[ge]||(re[ge]=[]),re[ge].push(ve)}N.push({list:X,listArchiveDate:X.archivedAt?g(X.archivedAt):null,tasksByDate:re,hasTasks:he.length>0})}}return N.sort((X,ee)=>{if(X.list.order!==ee.list.order)return X.list.order-ee.list.order;const le=X.list.name??"Unnamed list",he=ee.list.name??"Unnamed list";return le.localeCompare(he)}),N});function I(L){return L.sort((H,Y)=>{if(H==="Unknown")return 1;if(Y==="Unknown")return-1;const N=new Date(H).getTime();return new Date(Y).getTime()-N})}async function _(L){try{(await xv(L)).listRestored&&console.log("Task and its list have been restored")}catch(H){console.error("Error restoring task:",H)}}var T=Ep(),P=Oe(xe(T),2);{var C=L=>{var H=fp();be(L,H)},O=L=>{var H=Jn(),Y=gt(H);{var N=ee=>{var le=dp();be(ee,le)},X=ee=>{var le=Jn(),he=gt(le);{var re=ge=>{var _e=hp();be(ge,_e)},ve=ge=>{var _e=wp();br(_e,21,()=>p(w),da,(Xe,je)=>{const ot=At(()=>p(je).list),ut=At(()=>p(ot).name??"Unnamed list"),ze=At(()=>p(ot).archivedAt!=null),Mt=At(()=>p(je).listArchiveDate);var He=bp(),We=gt(He),bt=xe(We),Nt=xe(bt),rn=xe(Nt),wt=Oe(Nt,2);{var Z=Ue=>{var Ge=pp(),fe=Oe(gt(Ge),2);{var Fe=we=>{var Ve=vp(),Ye=xe(Ve);tt(Ct=>Yn(Ye,`- ${Ct??""}`),[()=>E(p(Mt))]),be(we,Ve)};at(fe,we=>{p(Mt)&&we(Fe)})}be(Ue,Ge)},W=Ue=>{var Ge=mp();be(Ue,Ge)};at(wt,Ue=>{p(ze)?Ue(Z):Ue(W,!1)})}var ie=Oe(We,2),Te=xe(ie);{var Ce=Ue=>{var Ge=yp();be(Ue,Ge)},lt=Ue=>{var Ge=Jn(),fe=gt(Ge);br(fe,17,()=>I(Object.keys(p(je).tasksByDate)),da,(Fe,we)=>{const Ve=At(()=>p(je).tasksByDate[p(we)]);var Ye=_p(),Ct=xe(Ye),Ir=xe(Ct),ae=Oe(Ct,2);br(ae,21,()=>p(Ve),da,(Rn,Sr)=>{var En=gp(),Re=xe(En),cn=xe(Re),$r=Oe(Re,2);$r.__click=()=>_(p(Sr).id),tt(()=>Yn(cn,p(Sr).text)),be(Rn,En)}),tt(Rn=>Yn(Ir,Rn),[()=>p(we)==="Unknown"?"Unknown Date":E(p(we))]),be(Fe,Ye)}),be(Ue,Ge)};at(Te,Ue=>{p(je).hasTasks?Ue(lt,!1):Ue(Ce)})}tt(()=>Yn(rn,p(ut))),be(Xe,He)}),be(ge,_e)};at(he,ge=>{p(w).length===0?ge(re):ge(ve,!1)},!0)}be(ee,le)};at(Y,ee=>{!s()||!i()?ee(N):ee(X,!1)},!0)}be(L,H)};at(P,L=>{!p(h)||!p(m)?L(C):L(O,!1)})}tt(()=>rr(T,`width: ${cs}px;`)),be(e,T),or(),c()}Ar(["click"]);var Tp=Ie('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><!></div></div> <!></main>');function kp(e){function r(){window.print()}var i=Tp(),s=xe(i),l=xe(s);l.__click=r;var c=Oe(s,2),h=xe(c),m=xe(h);cp(m,{});var g=Oe(c,2);xp(g,{}),tt(()=>{rr(s,`width: ${cs}px;`),rr(c,`width: ${cs}px; height: ${Iv}px;`)}),be(e,i)}Ar(["click"]);const Dp=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],Ap=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function Ip(){try{if(await De.lists.count()>0)return;await De.lists.bulkAdd(Dp),await De.tasks.bulkAdd(Ap),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await Ip().catch(console.error),jd(kp,{target:document.getElementById("app")})))();
