(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();const xf="production",ae=!xf.toLowerCase().startsWith("prod");var Zu=Array.isArray,Tf=Array.prototype.indexOf,ps=Array.from,Rn=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,qu=Object.getOwnPropertyDescriptors,kf=Object.prototype,Af=Array.prototype,ms=Object.getPrototypeOf,yu=Object.isExtensible;const ga=()=>{};function Df(e){return e()}function Yo(e){for(var r=0;r<e.length;r++)e[r]()}function Qu(){var e,r,i=new Promise((s,l)=>{e=s,r=l});return{promise:i,resolve:e,reject:r}}const At=2,ys=4,Fa=8,If=1<<24,Pn=16,Mn=32,Dr=64,Ba=128,ln=512,Lt=1024,Vt=2048,Nn=4096,qt=8192,Cn=16384,gs=32768,Hr=65536,_a=1<<17,Xu=1<<18,Jr=1<<19,Ju=1<<20,rr=32768,Zo=1<<21,ja=1<<22,Jn=1<<23,On=Symbol("$state"),Sf=Symbol("legacy props"),Cf=Symbol(""),$u=Symbol("proxy path"),Br=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Of(){if(ae){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function gu(){if(ae){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Lf(){if(ae){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Rf(e){if(ae){const r=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Pf(){if(ae){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Mf(e){if(ae){const r=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_orphan")}function Nf(){if(ae){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Kf(e){if(ae){const r=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Ff(e){if(ae){const r=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Bf(){if(ae){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function jf(){if(ae){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zf(){if(ae){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Gf(){if(ae){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const el=1,tl=2,nl=4,Uf=8,Hf=16,Vf=1,Wf=2,Yf=4,Zf=8,qf=16,Qf=1,Xf=2,St=Symbol(),Jf=Symbol("filename"),$f="http://www.w3.org/1999/xhtml";var rl="font-weight: bold",il="font-weight: normal";function Ko(e){ae?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,rl,il):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function ed(){ae?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",rl,il):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function al(e){return e===this.v}function ol(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function sl(e){return!ol(e,this.v)}let Ii=!1,td=!1;function nd(){Ii=!0}function vn(e,r){return e.label=r,ul(e.v,r),e}function ul(e,r){return e?.[$u]?.(r),e}function rd(e){const r=new Error,i=id();return i.length===0?null:(i.unshift(`
`),Rn(r,"stack",{value:i.join(`
`)}),Rn(r,"name",{value:e}),r)}function id(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const r=new Error().stack;if(Error.stackTraceLimit=e,!r)return[];const i=r.split(`
`),s=[];for(let l=0;l<i.length;l++){const c=i[l],h=c.replaceAll("\\","/");if(c.trim()!=="Error"){if(c.includes("validate_each_keys"))return[];h.includes("svelte/src/internal")||h.includes("node_modules/.vite")||s.push(c)}}return s}let dt=null;function Vr(e){dt=e}let bi=null;function ba(e){bi=e}let Si=null;function _u(e){Si=e}function sr(e,r=!1,i){dt={p:dt,i:!1,c:null,e:null,s:e,x:null,l:Ii&&!r?{s:null,u:null,$:[]}:null},ae&&(dt.function=i,Si=i)}function ur(e){var r=dt,i=r.e;if(i!==null){r.e=null;for(var s of i)xl(s)}return r.i=!0,dt=r.p,ae&&(Si=dt?.function??null),{}}function Ci(){return!Ii||dt!==null&&dt.l===null}let br=[];function ll(){var e=br;br=[],Yo(e)}function $r(e){if(br.length===0&&!yi){var r=br;queueMicrotask(()=>{r===br&&ll()})}br.push(e)}function ad(){for(;br.length>0;)ll()}const qo=new WeakMap;function cl(e){var r=Be;if(r===null)return Ke.f|=Jn,e;if(ae&&e instanceof Error&&!qo.has(e)&&qo.set(e,od(e,r)),(r.f&gs)===0){if((r.f&Ba)===0)throw ae&&!r.parent&&e instanceof Error&&fl(e),e;r.b.error(e)}else Wr(e,r)}function Wr(e,r){for(;r!==null;){if((r.f&Ba)!==0)try{r.b.error(e);return}catch(i){e=i}r=r.parent}throw ae&&e instanceof Error&&fl(e),e}function od(e,r){const i=wr(e,"message");if(!(i&&!i.configurable)){for(var s=ws?"  ":"	",l=`
${s}in ${r.fn?.name||"<unknown>"}`,c=r.ctx;c!==null;)l+=`
${s}in ${c.function?.[Jf].split("/").pop()}`,c=c.p;return{message:e.message+`
${l}
`,stack:e.stack?.split(`
`).filter(h=>!h.includes("svelte/src/internal")).join(`
`)}}}function fl(e){const r=qo.get(e);r&&(Rn(e,"message",{value:r.message}),Rn(e,"stack",{value:r.stack}))}const la=new Set;let Ue=null,ha=null,tn=null,$t=[],za=null,Qo=!1,yi=!1;class bn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(r){$t=[],ha=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of r)this.#o(s,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(ha=this,Ue=null,bu(i.render_effects),bu(i.effects),ha=null,this.#u?.resolve()),tn=null}#o(r,i){r.f^=Lt;for(var s=r.first;s!==null;){var l=s.f,c=(l&(Mn|Dr))!==0,h=c&&(l&Lt)!==0,m=h||(l&qt)!==0||this.skipped_effects.has(s);if((s.f&Ba)!==0&&s.b?.is_pending()&&(i={parent:i,effect:s,effects:[],render_effects:[],block_effects:[]}),!m&&s.fn!==null){c?s.f^=Lt:(l&ys)!==0?i.effects.push(s):Ri(s)&&((s.f&Pn)!==0&&i.block_effects.push(s),xi(s));var g=s.first;if(g!==null){s=g;continue}}var b=s.parent;for(s=s.next;s===null&&b!==null;)b===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),s=b.next,b=b.parent}}#s(r){for(const i of r)((i.f&Vt)!==0?this.#a:this.#i).push(i),this.#l(i.deps),Rt(i,Lt)}#l(r){if(r!==null)for(const i of r)(i.f&At)===0||(i.f&rr)===0||(i.f^=rr,this.#l(i.deps))}capture(r,i){this.previous.has(r)||this.previous.set(r,i),(r.f&Jn)===0&&(this.current.set(r,r.v),tn?.set(r,r.v))}activate(){Ue=this,this.apply()}deactivate(){Ue===this&&(Ue=null,tn=null)}flush(){if(this.activate(),$t.length>0){if(dl(),Ue!==null&&Ue!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#t)r(this);this.#t.clear()}#c(){if(this.#n===0){for(const r of this.#e)r();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(la.size>1){this.previous.clear();var r=tn,i=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of la){if(c===this){i=!1;continue}const h=[];for(const[g,b]of this.current){if(c.current.has(g))if(i&&b!==c.current.get(g))c.current.set(g,b);else continue;h.push(g)}if(h.length===0)continue;const m=[...c.current.keys()].filter(g=>!this.current.has(g));if(m.length>0){var l=$t;$t=[];const g=new Set,b=new Map;for(const E of h)hl(E,m,g,b);if($t.length>0){Ue=c,c.apply();for(const E of $t)c.#o(E,s);c.deactivate()}$t=l}}Ue=null,tn=r}this.committed=!0,la.delete(this)}increment(r){this.#r+=1,r&&(this.#n+=1)}decrement(r){this.#r-=1,r&&(this.#n-=1),this.revive()}revive(){for(const r of this.#a)Rt(r,Vt),kr(r);for(const r of this.#i)Rt(r,Nn),kr(r);this.#a=[],this.#i=[],this.flush()}oncommit(r){this.#e.add(r)}ondiscard(r){this.#t.add(r)}settled(){return(this.#u??=Qu()).promise}static ensure(){if(Ue===null){const r=Ue=new bn;la.add(Ue),yi||bn.enqueue(()=>{Ue===r&&r.flush()})}return Ue}static enqueue(r){$r(r)}apply(){}}function sd(e){var r=yi;yi=!0;try{for(var i;;){if(ad(),$t.length===0&&(Ue?.flush(),$t.length===0))return za=null,i;dl()}}finally{yi=r}}function dl(){var e=er;Qo=!0;var r=ae?new Set:null;try{var i=0;for(xa(!0);$t.length>0;){var s=bn.ensure();if(i++>1e3){if(ae){var l=new Map;for(const h of s.current.keys())for(const[m,g]of h.updated??[]){var c=l.get(m);c||(c={error:g.error,count:0},l.set(m,c)),c.count+=g.count}for(const h of l.values())h.error&&console.error(h.error)}ud()}if(s.process($t),$n.clear(),ae)for(const h of s.current.keys())r.add(h)}}finally{if(Qo=!1,xa(e),za=null,ae)for(const h of r)h.updated=null}}function ud(){try{Nf()}catch(e){ae&&Rn(e,"stack",{value:""}),Wr(e,za)}}let Dn=null;function bu(e){var r=e.length;if(r!==0){for(var i=0;i<r;){var s=e[i++];if((s.f&(Cn|qt))===0&&Ri(s)&&(Dn=new Set,xi(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?Dl(s):s.fn=null),Dn?.size>0)){$n.clear();for(const l of Dn){if((l.f&(Cn|qt))!==0)continue;const c=[l];let h=l.parent;for(;h!==null;)Dn.has(h)&&(Dn.delete(h),c.push(h)),h=h.parent;for(let m=c.length-1;m>=0;m--){const g=c[m];(g.f&(Cn|qt))===0&&xi(g)}}Dn.clear()}}Dn=null}}function hl(e,r,i,s){if(!i.has(e)&&(i.add(e),e.reactions!==null))for(const l of e.reactions){const c=l.f;(c&At)!==0?hl(l,r,i,s):(c&(ja|Pn))!==0&&(c&Vt)===0&&vl(l,r,s)&&(Rt(l,Vt),kr(l))}}function vl(e,r,i){const s=i.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const l of e.deps){if(r.includes(l))return!0;if((l.f&At)!==0&&vl(l,r,i))return i.set(l,!0),!0}return i.set(e,!1),!1}function kr(e){for(var r=za=e;r.parent!==null;){r=r.parent;var i=r.f;if(Qo&&r===Be&&(i&Pn)!==0&&(i&Xu)===0)return;if((i&(Dr|Mn))!==0){if((i&Lt)===0)return;r.f^=Lt}}$t.push(r)}function ld(e){let r=0,i=Ar(0),s;return ae&&vn(i,"createSubscriber version"),()=>{wi()&&(p(i),Ua(()=>(r===0&&(s=rt(()=>e(()=>gi(i)))),r+=1,()=>{$r(()=>{r-=1,r===0&&(s?.(),s=void 0,gi(i))})})))}}var cd=Hr|Jr|Ba;function fd(e,r,i){new dd(e,r,i)}class dd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#_=ld(()=>(this.#d=Ar(this.#f),ae&&vn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(r,i,s){this.#t=r,this.#n=i,this.#u=s,this.parent=Be.b,this.#e=!!this.#n.pending,this.#a=xs(()=>{Be.b=this;{var l=this.#y();try{this.#i=en(()=>s(l))}catch(c){this.error(c)}this.#h>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},cd)}#b(){try{this.#i=en(()=>this.#u(this.#t))}catch(r){this.error(r)}this.#e=!1}#w(){const r=this.#n.pending;r&&(this.#o=en(()=>r(this.#t)),bn.enqueue(()=>{var i=this.#y();this.#i=this.#p(()=>(bn.ensure(),en(()=>this.#u(i)))),this.#h>0?this.#m():(zr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#y(){var r=this.#t;return this.#e&&(this.#c=ir(),this.#t.before(this.#c),r=this.#c),r}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(r){var i=Be,s=Ke,l=dt;un(this.#a),Gt(this.#a),Vr(this.#a.ctx);try{return r()}catch(c){return cl(c),null}finally{un(i),Gt(s),Vr(l)}}#m(){const r=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Cl(this.#i,this.#l)),this.#o===null&&(this.#o=en(()=>r(this.#t)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#e=!1,this.#o&&zr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(r){this.#g(r),this.#f+=r,this.#d&&Zr(this.#d,this.#f)}get_effect_pending(){return this.#_(),p(this.#d)}error(r){var i=this.#n.onerror;let s=this.#n.failed;if(this.#v||!i&&!s)throw r;this.#i&&(Ut(this.#i),this.#i=null),this.#o&&(Ut(this.#o),this.#o=null),this.#s&&(Ut(this.#s),this.#s=null);var l=!1,c=!1;const h=()=>{if(l){ed();return}l=!0,c&&Gf(),bn.ensure(),this.#f=0,this.#s!==null&&zr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,en(()=>this.#u(this.#t)))),this.#h>0?this.#m():this.#e=!1};var m=Ke;try{Gt(null),c=!0,i?.(r,h),c=!1}catch(g){Wr(g,this.#a&&this.#a.parent)}finally{Gt(m)}s&&$r(()=>{this.#s=this.#p(()=>{bn.ensure(),this.#v=!0;try{return en(()=>{s(this.#t,()=>r,()=>h)})}catch(g){return Wr(g,this.#a.parent),null}finally{this.#v=!1}})})}}function va(e,r){return r}function hd(e,r,i){for(var s=[],l=r.length,c=0;c<l;c++)Ts(r[c].e,s,!0);Il(s,()=>{var h=s.length===0&&i!==null;if(h){var m=i,g=m.parentNode;Dd(g),g.append(m),e.items.clear(),pn(e,r[0].prev,r[l-1].next)}for(var b=0;b<l;b++){var E=r[b];h||(e.items.delete(E.k),pn(e,E.prev,E.next)),Ut(E.e,!h)}e.first===r[0]&&(e.first=r[0].prev)})}function Er(e,r,i,s,l,c=null){var h=e,m=new Map,g=null,b=(r&nl)!==0,E=(r&el)!==0,D=(r&tl)!==0;if(b){var _=e;h=_.appendChild(ir())}var T=null,C=In(()=>{var z=i();return Zu(z)?z:z==null?[]:ps(z)}),M,R=!0;function O(){vd(V,M,h,r,s),T!==null&&(M.length===0?(T.fragment?(h.before(T.fragment),T.fragment=null):ks(T.effect),Y.first=T.effect):zr(T.effect,()=>{T=null}))}var Y=xs(()=>{M=p(C);for(var z=M.length,Q=new Set,ee=Ue,he=null,ve=wl(),se=0;se<z;se+=1){var be=M[se],_e=s(be,se),re=R?null:m.get(_e);re?(E&&Zr(re.v,be),D?Zr(re.i,se):re.i=se,ve&&ee.skipped_effects.delete(re.e)):(re=pd(R?h:null,he,be,_e,se,l,r,i),R&&(re.o=!0,he===null?g=re:he.next=re,he=re),m.set(_e,re)),Q.add(_e)}if(z===0&&c&&!T)if(R)T={fragment:null,effect:en(()=>c(h))};else{var Te=document.createDocumentFragment(),Fe=ir();Te.append(Fe),T={fragment:Te,effect:en(()=>c(Fe))}}if(!R)if(ve){for(const[He,tt]of m)Q.has(He)||ee.skipped_effects.add(tt.e);ee.oncommit(O),ee.ondiscard(()=>{})}else O();p(C)}),V={effect:Y,items:m,first:g};R=!1}function vd(e,r,i,s,l){var c=(s&Uf)!==0,h=r.length,m=e.items,g=e.first,b,E=null,D,_=[],T=[],C,M,R,O;if(c)for(O=0;O<h;O+=1)C=r[O],M=l(C,O),R=m.get(M),R.o&&(R.a?.measure(),(D??=new Set).add(R));for(O=0;O<h;O+=1){if(C=r[O],M=l(C,O),R=m.get(M),e.first??=R,!R.o){R.o=!0;var Y=E?E.next:g;pn(e,E,R),pn(e,R,Y),Fo(R,Y,i),E=R,_=[],T=[],g=E.next;continue}if((R.e.f&qt)!==0&&(ks(R.e),c&&(R.a?.unfix(),(D??=new Set).delete(R))),R!==g){if(b!==void 0&&b.has(R)){if(_.length<T.length){var V=T[0],z;E=V.prev;var Q=_[0],ee=_[_.length-1];for(z=0;z<_.length;z+=1)Fo(_[z],V,i);for(z=0;z<T.length;z+=1)b.delete(T[z]);pn(e,Q.prev,ee.next),pn(e,E,Q),pn(e,ee,V),g=V,E=ee,O-=1,_=[],T=[]}else b.delete(R),Fo(R,g,i),pn(e,R.prev,R.next),pn(e,R,E===null?e.first:E.next),pn(e,E,R),E=R;continue}for(_=[],T=[];g!==null&&g.k!==M;)(g.e.f&qt)===0&&(b??=new Set).add(g),T.push(g),g=g.next;if(g===null)continue;R=g}_.push(R),E=R,g=R.next}if(g!==null||b!==void 0){for(var he=b===void 0?[]:ps(b);g!==null;)(g.e.f&qt)===0&&he.push(g),g=g.next;var ve=he.length;if(ve>0){var se=(s&nl)!==0&&h===0?i:null;if(c){for(O=0;O<ve;O+=1)he[O].a?.measure();for(O=0;O<ve;O+=1)he[O].a?.fix()}hd(e,he,se)}}c&&$r(()=>{if(D!==void 0)for(R of D)R.a?.apply()})}function pd(e,r,i,s,l,c,h,m){var g=(h&el)!==0,b=(h&Hf)===0,E=g?b?ml(i,!1,!1):Ar(i):i,D=(h&tl)===0?l:Ar(l);ae&&g&&(E.trace=()=>{var C=typeof D=="number"?l:D.v;m()[C]});var _={i:D,v:E,k:s,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var T=document.createDocumentFragment();T.append(e=ir())}return _.e=en(()=>c(e,E,D,m)),r!==null&&(r.next=_),_}finally{}}function Fo(e,r,i){for(var s=e.next?e.next.e.nodes_start:i,l=r?r.e.nodes_start:i,c=e.e.nodes_start;c!==null&&c!==s;){var h=Li(c);l.before(c),c=h}}function pn(e,r,i){r===null?(e.first=i,e.effect.first=i&&i.e):(r.e===e.effect.last&&i!==null&&(e.effect.last=i.e),r.e.next&&(r.e.next.prev=null),r.next=i,r.e.next=i&&i.e),i===null?e.effect.last=r&&r.e:(i.e===e.effect.last&&r===null&&(e.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=r,i.e.prev=r&&r.e)}function md(e,r,i,s){const l=Ci()?Oi:In;if(i.length===0&&e.length===0){s(r.map(l));return}var c=Ue,h=Be,m=yd();function g(){Promise.all(i.map(b=>_d(b))).then(b=>{m();try{s([...r.map(l),...b])}catch(E){(h.f&Cn)===0&&Wr(E,h)}c?.deactivate(),wa()}).catch(b=>{Wr(b,h)})}e.length>0?Promise.all(e).then(()=>{m();try{return g()}finally{c?.deactivate(),wa()}}):g()}function yd(){var e=Be,r=Ke,i=dt,s=Ue;if(ae)var l=bi;return function(h=!0){un(e),Gt(r),Vr(i),h&&s?.activate(),ae&&ba(l)}}function wa(){un(null),Gt(null),Vr(null),ae&&ba(null)}const gd=new Set;function Oi(e){var r=At|Vt,i=Ke!==null&&(Ke.f&At)!==0?Ke:null;return Be!==null&&(Be.f|=Jr),{ctx:dt,deps:null,effects:null,equals:al,f:r,fn:e,reactions:null,rv:0,v:St,wv:0,parent:i??Be,ac:null}}function _d(e,r){let i=Be;i===null&&Of();var s=i.b,l=void 0,c=Ar(St),h=!Ke,m=new Map;return Rd(()=>{var g=Qu();l=g.promise;try{Promise.resolve(e()).then(g.resolve,g.reject).then(()=>{b===Ue&&b.committed&&b.deactivate(),wa()})}catch(_){g.reject(_),wa()}var b=Ue;if(h){var E=!s.is_pending();s.update_pending_count(1),b.increment(E),m.get(b)?.reject(Br),m.delete(b),m.set(b,g)}const D=(_,T=void 0)=>{if(b.activate(),T)T!==Br&&(c.f|=Jn,Zr(c,T));else{(c.f&Jn)!==0&&(c.f^=Jn),Zr(c,_);for(const[C,M]of m){if(m.delete(C),C===b)break;M.reject(Br)}}h&&(s.update_pending_count(-1),b.decrement(E))};g.promise.then(D,_=>D(null,_||"unknown"))}),Es(()=>{for(const g of m.values())g.reject(Br)}),ae&&(c.f|=ja),new Promise(g=>{function b(E){function D(){E===l?g(c):b(l)}E.then(D,D)}b(l)})}function gn(e){const r=Oi(e);return Ol(r),r}function In(e){const r=Oi(e);return r.equals=sl,r}function Xo(e){var r=e.effects;if(r!==null){e.effects=null;for(var i=0;i<r.length;i+=1)Ut(r[i])}}let Bo=[];function bd(e){for(var r=e.parent;r!==null;){if((r.f&At)===0)return(r.f&Cn)===0?r:null;r=r.parent}return null}function _s(e){var r,i=Be;if(un(bd(e)),ae){let s=Yr;wu(new Set);try{Bo.includes(e)&&Lf(),Bo.push(e),e.f&=~rr,Xo(e),r=Jo(e)}finally{un(i),wu(s),Bo.pop()}}else try{e.f&=~rr,Xo(e),r=Jo(e)}finally{un(i)}return r}function pl(e){var r=_s(e);if(e.equals(r)||(Ue?.is_fork||(e.v=r),e.wv=Rl()),!Ir)if(tn!==null)(wi()||Ue?.is_fork)&&tn.set(e,r);else{var i=(e.f&ln)===0?Nn:Lt;Rt(e,i)}}let Yr=new Set;const $n=new Map;function wu(e){Yr=e}let bs=!1;function wd(){bs=!0}function Ar(e,r){var i={f:0,v:e,reactions:null,equals:al,rv:0,wv:0};return i}function me(e,r){const i=Ar(e);return Ol(i),i}function ml(e,r=!1,i=!0){const s=Ar(e);return r||(s.equals=sl),Ii&&i&&dt!==null&&dt.l!==null&&(dt.l.s??=[]).push(s),s}function I(e,r,i=!1){Ke!==null&&(!wn||(Ke.f&_a)!==0)&&Ci()&&(Ke.f&(At|Pn|ja|_a))!==0&&!Ln?.includes(e)&&zf();let s=i?Zt(r):r;return ae&&ul(s,e.label),Zr(e,s)}function Zr(e,r){if(!e.equals(r)){var i=e.v;Ir?$n.set(e,r):$n.set(e,i),e.v=r;var s=bn.ensure();if(s.capture(e,i),ae){if(Be!==null){e.updated??=new Map;const l=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:l}),l>5){const c=rd("updated at");if(c!==null){let h=e.updated.get(c.stack);h||(h={error:c,count:0},e.updated.set(c.stack,h)),h.count++}}}Be!==null&&(e.set_during_effect=!0)}(e.f&At)!==0&&((e.f&Vt)!==0&&_s(e),Rt(e,(e.f&ln)!==0?Lt:Nn)),e.wv=Rl(),gl(e,Vt),Ci()&&Be!==null&&(Be.f&Lt)!==0&&(Be.f&(Mn|Dr))===0&&(Xt===null?Nd([e]):Xt.push(e)),!s.is_fork&&Yr.size>0&&!bs&&yl()}return r}function yl(){bs=!1;var e=er;xa(!0);const r=Array.from(Yr);try{for(const i of r)(i.f&Lt)!==0&&Rt(i,Nn),Ri(i)&&xi(i)}finally{xa(e)}Yr.clear()}function gi(e){I(e,e.v+1)}function gl(e,r){var i=e.reactions;if(i!==null)for(var s=Ci(),l=i.length,c=0;c<l;c++){var h=i[c],m=h.f;if(!(!s&&h===Be)){if(ae&&(m&_a)!==0){Yr.add(h);continue}var g=(m&Vt)===0;if(g&&Rt(h,r),(m&At)!==0){var b=h;tn?.delete(b),(m&rr)===0&&(m&ln&&(h.f|=rr),gl(b,Nn))}else g&&((m&Pn)!==0&&Dn!==null&&Dn.add(h),kr(h))}}}const Ed=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Zt(e){if(typeof e!="object"||e===null||On in e)return e;const r=ms(e);if(r!==kf&&r!==Af)return e;var i=new Map,s=Zu(e),l=me(0),c=xr,h=E=>{if(xr===c)return E();var D=Ke,_=xr;Gt(null),ku(c);var T=E();return Gt(D),ku(_),T};s&&(i.set("length",me(e.length)),ae&&(e=Td(e)));var m="";let g=!1;function b(E){if(!g){g=!0,m=E,vn(l,`${m} version`);for(const[D,_]of i)vn(_,mr(m,D));g=!1}}return new Proxy(e,{defineProperty(E,D,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Bf();var T=i.get(D);return T===void 0?T=h(()=>{var C=me(_.value);return i.set(D,C),ae&&typeof D=="string"&&vn(C,mr(m,D)),C}):I(T,_.value,!0),!0},deleteProperty(E,D){var _=i.get(D);if(_===void 0){if(D in E){const T=h(()=>me(St));i.set(D,T),gi(l),ae&&vn(T,mr(m,D))}}else I(_,St),gi(l);return!0},get(E,D,_){if(D===On)return e;if(ae&&D===$u)return b;var T=i.get(D),C=D in E;if(T===void 0&&(!C||wr(E,D)?.writable)&&(T=h(()=>{var R=Zt(C?E[D]:St),O=me(R);return ae&&vn(O,mr(m,D)),O}),i.set(D,T)),T!==void 0){var M=p(T);return M===St?void 0:M}return Reflect.get(E,D,_)},getOwnPropertyDescriptor(E,D){var _=Reflect.getOwnPropertyDescriptor(E,D);if(_&&"value"in _){var T=i.get(D);T&&(_.value=p(T))}else if(_===void 0){var C=i.get(D),M=C?.v;if(C!==void 0&&M!==St)return{enumerable:!0,configurable:!0,value:M,writable:!0}}return _},has(E,D){if(D===On)return!0;var _=i.get(D),T=_!==void 0&&_.v!==St||Reflect.has(E,D);if(_!==void 0||Be!==null&&(!T||wr(E,D)?.writable)){_===void 0&&(_=h(()=>{var M=T?Zt(E[D]):St,R=me(M);return ae&&vn(R,mr(m,D)),R}),i.set(D,_));var C=p(_);if(C===St)return!1}return T},set(E,D,_,T){var C=i.get(D),M=D in E;if(s&&D==="length")for(var R=_;R<C.v;R+=1){var O=i.get(R+"");O!==void 0?I(O,St):R in E&&(O=h(()=>me(St)),i.set(R+"",O),ae&&vn(O,mr(m,R)))}if(C===void 0)(!M||wr(E,D)?.writable)&&(C=h(()=>me(void 0)),ae&&vn(C,mr(m,D)),I(C,Zt(_)),i.set(D,C));else{M=C.v!==St;var Y=h(()=>Zt(_));I(C,Y)}var V=Reflect.getOwnPropertyDescriptor(E,D);if(V?.set&&V.set.call(T,_),!M){if(s&&typeof D=="string"){var z=i.get("length"),Q=Number(D);Number.isInteger(Q)&&Q>=z.v&&I(z,Q+1)}gi(l)}return!0},ownKeys(E){p(l);var D=Reflect.ownKeys(E).filter(C=>{var M=i.get(C);return M===void 0||M.v!==St});for(var[_,T]of i)T.v!==St&&!(_ in E)&&D.push(_);return D},setPrototypeOf(){jf()}})}function mr(e,r){return typeof r=="symbol"?`${e}[Symbol(${r.description??""})]`:Ed.test(r)?`${e}.${r}`:/^\d+$/.test(r)?`${e}[${r}]`:`${e}['${r}']`}function jo(e){try{if(e!==null&&typeof e=="object"&&On in e)return e[On]}catch{}return e}const xd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Td(e){return new Proxy(e,{get(r,i,s){var l=Reflect.get(r,i,s);return xd.has(i)?function(...c){wd();var h=l.apply(this,c);return yl(),h}:l}})}function kd(){const e=Array.prototype,r=Array.__svelte_cleanup;r&&r();const{indexOf:i,lastIndexOf:s,includes:l}=e;e.indexOf=function(c,h){const m=i.call(this,c,h);if(m===-1){for(let g=h??0;g<this.length;g+=1)if(jo(this[g])===c){Ko("array.indexOf(...)");break}}return m},e.lastIndexOf=function(c,h){const m=s.call(this,c,h??this.length-1);if(m===-1){for(let g=0;g<=(h??this.length-1);g+=1)if(jo(this[g])===c){Ko("array.lastIndexOf(...)");break}}return m},e.includes=function(c,h){const m=l.call(this,c,h);if(!m){for(let g=0;g<this.length;g+=1)if(jo(this[g])===c){Ko("array.includes(...)");break}}return m},Array.__svelte_cleanup=()=>{e.indexOf=i,e.lastIndexOf=s,e.includes=l}}var Eu,ws,_l,bl;function Ad(){if(Eu===void 0){Eu=window,ws=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,i=Text.prototype;_l=wr(r,"firstChild").get,bl=wr(r,"nextSibling").get,yu(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),yu(i)&&(i.__t=void 0),ae&&(e.__svelte_meta=null,kd())}}function ir(e=""){return document.createTextNode(e)}function Ea(e){return _l.call(e)}function Li(e){return bl.call(e)}function ke(e,r){return Ea(e)}function kt(e,r=!1){{var i=Ea(e);return i instanceof Comment&&i.data===""?Li(i):i}}function Le(e,r=1,i=!1){let s=e;for(;r--;)s=Li(s);return s}function Dd(e){e.textContent=""}function wl(){return!1}let xu=!1;function Id(){xu||(xu=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function Ga(e){var r=Ke,i=Be;Gt(null),un(null);try{return e()}finally{Gt(r),un(i)}}function Sd(e,r,i,s=i){e.addEventListener(r,()=>Ga(i));const l=e.__on_r;l?e.__on_r=()=>{l(),s(!0)}:e.__on_r=()=>s(!0),Id()}function El(e){Be===null&&(Ke===null&&Mf(e),Pf()),Ir&&Rf(e)}function Cd(e,r){var i=r.last;i===null?r.last=r.first=e:(i.next=e,e.prev=i,r.last=e)}function xn(e,r,i){var s=Be;if(ae)for(;s!==null&&(s.f&_a)!==0;)s=s.parent;s!==null&&(s.f&qt)!==0&&(e|=qt);var l={ctx:dt,deps:null,nodes_start:null,nodes_end:null,f:e|Vt|ln,first:null,fn:r,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(ae&&(l.component_function=Si),i)try{xi(l),l.f|=gs}catch(m){throw Ut(l),m}else r!==null&&kr(l);var c=l;if(i&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&Jr)===0&&(c=c.first,(e&Pn)!==0&&(e&Hr)!==0&&c!==null&&(c.f|=Hr)),c!==null&&(c.parent=s,s!==null&&Cd(c,s),Ke!==null&&(Ke.f&At)!==0&&(e&Dr)===0)){var h=Ke;(h.effects??=[]).push(c)}return l}function wi(){return Ke!==null&&!wn}function Es(e){const r=xn(Fa,null,!1);return Rt(r,Lt),r.teardown=e,r}function $e(e){El("$effect"),ae&&Rn(e,"name",{value:"$effect"});var r=Be.f,i=!Ke&&(r&Mn)!==0&&(r&gs)===0;if(i){var s=dt;(s.e??=[]).push(e)}else return xl(e)}function xl(e){return xn(ys|Ju,e,!1)}function Od(e){return El("$effect.pre"),ae&&Rn(e,"name",{value:"$effect.pre"}),xn(Fa|Ju,e,!0)}function Ld(e){bn.ensure();const r=xn(Dr|Jr,e,!0);return(i={})=>new Promise(s=>{i.outro?zr(r,()=>{Ut(r),s(void 0)}):(Ut(r),s(void 0))})}function Tl(e){return xn(ys,e,!1)}function Rd(e){return xn(ja|Jr,e,!0)}function Ua(e,r=0){return xn(Fa|r,e,!0)}function at(e,r=[],i=[],s=[]){md(s,r,i,l=>{xn(Fa,()=>e(...l.map(p)),!0)})}function xs(e,r=0){var i=xn(Pn|r,e,!0);return ae&&(i.dev_stack=bi),i}function en(e){return xn(Mn|Jr,e,!0)}function kl(e){var r=e.teardown;if(r!==null){const i=Ir,s=Ke;Tu(!0),Gt(null);try{r.call(null)}finally{Tu(i),Gt(s)}}}function Al(e,r=!1){var i=e.first;for(e.first=e.last=null;i!==null;){const l=i.ac;l!==null&&Ga(()=>{l.abort(Br)});var s=i.next;(i.f&Dr)!==0?i.parent=null:Ut(i,r),i=s}}function Pd(e){for(var r=e.first;r!==null;){var i=r.next;(r.f&Mn)===0&&Ut(r),r=i}}function Ut(e,r=!0){var i=!1;(r||(e.f&Xu)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Md(e.nodes_start,e.nodes_end),i=!0),Al(e,r&&!i),Ta(e,0),Rt(e,Cn);var s=e.transitions;if(s!==null)for(const c of s)c.stop();kl(e);var l=e.parent;l!==null&&l.first!==null&&Dl(e),ae&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Md(e,r){for(;e!==null;){var i=e===r?null:Li(e);e.remove(),e=i}}function Dl(e){var r=e.parent,i=e.prev,s=e.next;i!==null&&(i.next=s),s!==null&&(s.prev=i),r!==null&&(r.first===e&&(r.first=s),r.last===e&&(r.last=i))}function zr(e,r,i=!0){var s=[];Ts(e,s,!0),Il(s,()=>{i&&Ut(e),r&&r()})}function Il(e,r){var i=e.length;if(i>0){var s=()=>--i||r();for(var l of e)l.out(s)}else r()}function Ts(e,r,i){if((e.f&qt)===0){if(e.f^=qt,e.transitions!==null)for(const h of e.transitions)(h.is_global||i)&&r.push(h);for(var s=e.first;s!==null;){var l=s.next,c=(s.f&Hr)!==0||(s.f&Mn)!==0&&(e.f&Pn)!==0;Ts(s,r,c?i:!1),s=l}}}function ks(e){Sl(e,!0)}function Sl(e,r){if((e.f&qt)!==0){e.f^=qt,(e.f&Lt)===0&&(Rt(e,Vt),kr(e));for(var i=e.first;i!==null;){var s=i.next,l=(i.f&Hr)!==0||(i.f&Mn)!==0;Sl(i,l?r:!1),i=s}if(e.transitions!==null)for(const c of e.transitions)(c.is_global||r)&&c.in()}}function Cl(e,r){for(var i=e.nodes_start,s=e.nodes_end;i!==null;){var l=i===s?null:Li(i);r.append(i),i=l}}let er=!1;function xa(e){er=e}let Ir=!1;function Tu(e){Ir=e}let Ke=null,wn=!1;function Gt(e){Ke=e}let Be=null;function un(e){Be=e}let Ln=null;function Ol(e){Ke!==null&&(Ln===null?Ln=[e]:Ln.push(e))}let Mt=null,Yt=0,Xt=null;function Nd(e){Xt=e}let Ll=1,Ei=0,xr=Ei;function ku(e){xr=e}function Rl(){return++Ll}function Ri(e){var r=e.f;if((r&Vt)!==0)return!0;if(r&At&&(e.f&=~rr),(r&Nn)!==0){var i=e.deps;if(i!==null)for(var s=i.length,l=0;l<s;l++){var c=i[l];if(Ri(c)&&pl(c),c.wv>e.wv)return!0}(r&ln)!==0&&tn===null&&Rt(e,Lt)}return!1}function Pl(e,r,i=!0){var s=e.reactions;if(s!==null&&!Ln?.includes(e))for(var l=0;l<s.length;l++){var c=s[l];(c.f&At)!==0?Pl(c,r,!1):r===c&&(i?Rt(c,Vt):(c.f&Lt)!==0&&Rt(c,Nn),kr(c))}}function Jo(e){var r=Mt,i=Yt,s=Xt,l=Ke,c=Ln,h=dt,m=wn,g=xr,b=e.f;Mt=null,Yt=0,Xt=null,Ke=(b&(Mn|Dr))===0?e:null,Ln=null,Vr(e.ctx),wn=!1,xr=++Ei,e.ac!==null&&(Ga(()=>{e.ac.abort(Br)}),e.ac=null);try{e.f|=Zo;var E=e.fn,D=E(),_=e.deps;if(Mt!==null){var T;if(Ta(e,Yt),_!==null&&Yt>0)for(_.length=Yt+Mt.length,T=0;T<Mt.length;T++)_[Yt+T]=Mt[T];else e.deps=_=Mt;if(er&&wi()&&(e.f&ln)!==0)for(T=Yt;T<_.length;T++)(_[T].reactions??=[]).push(e)}else _!==null&&Yt<_.length&&(Ta(e,Yt),_.length=Yt);if(Ci()&&Xt!==null&&!wn&&_!==null&&(e.f&(At|Nn|Vt))===0)for(T=0;T<Xt.length;T++)Pl(Xt[T],e);return l!==null&&l!==e&&(Ei++,Xt!==null&&(s===null?s=Xt:s.push(...Xt))),(e.f&Jn)!==0&&(e.f^=Jn),D}catch(C){return cl(C)}finally{e.f^=Zo,Mt=r,Yt=i,Xt=s,Ke=l,Ln=c,Vr(h),wn=m,xr=g}}function Kd(e,r){let i=r.reactions;if(i!==null){var s=Tf.call(i,e);if(s!==-1){var l=i.length-1;l===0?i=r.reactions=null:(i[s]=i[l],i.pop())}}i===null&&(r.f&At)!==0&&(Mt===null||!Mt.includes(r))&&(Rt(r,Nn),(r.f&ln)!==0&&(r.f^=ln,r.f&=~rr),Xo(r),Ta(r,0))}function Ta(e,r){var i=e.deps;if(i!==null)for(var s=r;s<i.length;s++)Kd(e,i[s])}function xi(e){var r=e.f;if((r&Cn)===0){Rt(e,Lt);var i=Be,s=er;if(Be=e,er=!0,ae){var l=Si;_u(e.component_function);var c=bi;ba(e.dev_stack??bi)}try{(r&(Pn|If))!==0?Pd(e):Al(e),kl(e);var h=Jo(e);e.teardown=typeof h=="function"?h:null,e.wv=Ll;var m;ae&&td&&(e.f&Vt)!==0&&e.deps}finally{er=s,Be=i,ae&&(_u(l),ba(c))}}}async function qn(){await Promise.resolve(),sd()}function p(e){var r=e.f,i=(r&At)!==0;if(Ke!==null&&!wn){var s=Be!==null&&(Be.f&Cn)!==0;if(!s&&!Ln?.includes(e)){var l=Ke.deps;if((Ke.f&Zo)!==0)e.rv<Ei&&(e.rv=Ei,Mt===null&&l!==null&&l[Yt]===e?Yt++:Mt===null?Mt=[e]:Mt.includes(e)||Mt.push(e));else{(Ke.deps??=[]).push(e);var c=e.reactions;c===null?e.reactions=[Ke]:c.includes(Ke)||c.push(Ke)}}}if(ae&&gd.delete(e),Ir){if($n.has(e))return $n.get(e);if(i){var h=e,m=h.v;return((h.f&Lt)===0&&h.reactions!==null||Nl(h))&&(m=_s(h)),$n.set(h,m),m}}else i&&(!tn?.has(e)||Ue?.is_fork&&!wi())&&(h=e,Ri(h)&&pl(h),er&&wi()&&(h.f&ln)===0&&Ml(h));if(tn?.has(e))return tn.get(e);if((e.f&Jn)!==0)throw e.v;return e.v}function Ml(e){if(e.deps!==null){e.f^=ln;for(const r of e.deps)(r.reactions??=[]).push(e),(r.f&At)!==0&&(r.f&ln)===0&&Ml(r)}}function Nl(e){if(e.v===St)return!0;if(e.deps===null)return!1;for(const r of e.deps)if($n.has(r)||(r.f&At)!==0&&Nl(r))return!0;return!1}function rt(e){var r=wn;try{return wn=!0,e()}finally{wn=r}}const Fd=-7169;function Rt(e,r){e.f=e.f&Fd|r}function Bt(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(On in e)$o(e);else if(!Array.isArray(e))for(let r in e){const i=e[r];typeof i=="object"&&i&&On in i&&$o(i)}}}function $o(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let s in e)try{$o(e[s],r)}catch{}const i=ms(e);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const s=qu(i);for(let l in s){const c=s[l].get;if(c)try{c.call(e)}catch{}}}}}const Bd=["touchstart","touchmove"];function jd(e){return Bd.includes(e)}const Kl=new Set,es=new Set;function zd(e,r,i,s={}){function l(c){if(s.capture||pi.call(r,c),!c.cancelBubble)return Ga(()=>i?.call(this,c))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?$r(()=>{r.addEventListener(e,l,s)}):r.addEventListener(e,l,s),l}function Sn(e,r,i,s,l){var c={capture:s,passive:l},h=zd(e,r,i,c);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&Es(()=>{r.removeEventListener(e,h,c)})}function Sr(e){for(var r=0;r<e.length;r++)Kl.add(e[r]);for(var i of es)i(e)}let Au=null;function pi(e){var r=this,i=r.ownerDocument,s=e.type,l=e.composedPath?.()||[],c=l[0]||e.target;Au=e;var h=0,m=Au===e&&e.__root;if(m){var g=l.indexOf(m);if(g!==-1&&(r===document||r===window)){e.__root=r;return}var b=l.indexOf(r);if(b===-1)return;g<=b&&(h=g)}if(c=l[h]||e.target,c!==r){Rn(e,"currentTarget",{configurable:!0,get(){return c||i}});var E=Ke,D=Be;Gt(null),un(null);try{for(var _,T=[];c!==null;){var C=c.assignedSlot||c.parentNode||c.host||null;try{var M=c["__"+s];M!=null&&(!c.disabled||e.target===c)&&M.call(c,e)}catch(R){_?T.push(R):_=R}if(e.cancelBubble||C===r||C===null)break;c=C}if(_){for(let R of T)queueMicrotask(()=>{throw R});throw _}}finally{e.__root=r,delete e.currentTarget,Gt(E),un(D)}}}function Gd(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","<!---->"),r.content}function ts(e,r){var i=Be;i.nodes_start===null&&(i.nodes_start=e,i.nodes_end=r)}function Ce(e,r){var i=(r&Qf)!==0,s=(r&Xf)!==0,l,c=!e.startsWith("<!>");return()=>{l===void 0&&(l=Gd(c?e:"<!>"+e),i||(l=Ea(l)));var h=s||ws?document.importNode(l,!0):l.cloneNode(!0);if(i){var m=Ea(h),g=h.lastChild;ts(m,g)}else ts(h,h);return h}}function tr(){var e=document.createDocumentFragment(),r=document.createComment(""),i=ir();return e.append(r,i),ts(r,i),e}function we(e,r){e!==null&&e.before(r)}function Qn(e,r){var i=r==null?"":typeof r=="object"?r+"":r;i!==(e.__t??=e.nodeValue)&&(e.__t=i,e.nodeValue=i+"")}function Ud(e,r){return Hd(e,r)}const Fr=new Map;function Hd(e,{target:r,anchor:i,props:s={},events:l,context:c,intro:h=!0}){Ad();var m=new Set,g=D=>{for(var _=0;_<D.length;_++){var T=D[_];if(!m.has(T)){m.add(T);var C=jd(T);r.addEventListener(T,pi,{passive:C});var M=Fr.get(T);M===void 0?(document.addEventListener(T,pi,{passive:C}),Fr.set(T,1)):Fr.set(T,M+1)}}};g(ps(Kl)),es.add(g);var b=void 0,E=Ld(()=>{var D=i??r.appendChild(ir());return fd(D,{pending:()=>{}},_=>{if(c){sr({});var T=dt;T.c=c}l&&(s.$$events=l),b=e(_,s)||{},c&&ur()}),()=>{for(var _ of m){r.removeEventListener(_,pi);var T=Fr.get(_);--T===0?(document.removeEventListener(_,pi),Fr.delete(_)):Fr.set(_,T)}es.delete(g),D!==i&&D.parentNode?.removeChild(D)}});return Vd.set(b,E),b}let Vd=new WeakMap;class Wd{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(r,i=!0){this.anchor=r,this.#u=i}#a=()=>{var r=Ue;if(this.#e.has(r)){var i=this.#e.get(r),s=this.#t.get(i);if(s)ks(s),this.#n.delete(i);else{var l=this.#r.get(i);l&&(this.#t.set(i,l.effect),this.#r.delete(i),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[c,h]of this.#e){if(this.#e.delete(c),c===r)break;const m=this.#r.get(h);m&&(Ut(m.effect),this.#r.delete(h))}for(const[c,h]of this.#t){if(c===i||this.#n.has(c))continue;const m=()=>{if(Array.from(this.#e.values()).includes(c)){var b=document.createDocumentFragment();Cl(h,b),b.append(ir()),this.#r.set(c,{effect:h,fragment:b})}else Ut(h);this.#n.delete(c),this.#t.delete(c)};this.#u||!s?(this.#n.add(c),zr(h,m,!1)):m()}}};#i=r=>{this.#e.delete(r);const i=Array.from(this.#e.values());for(const[s,l]of this.#r)i.includes(s)||(Ut(l.effect),this.#r.delete(s))};ensure(r,i){var s=Ue,l=wl();if(i&&!this.#t.has(r)&&!this.#r.has(r))if(l){var c=document.createDocumentFragment(),h=ir();c.append(h),this.#r.set(r,{effect:en(()=>i(h)),fragment:c})}else this.#t.set(r,en(()=>i(this.anchor)));if(this.#e.set(s,r),l){for(const[m,g]of this.#t)m===r?s.skipped_effects.delete(g):s.skipped_effects.add(g);for(const[m,g]of this.#r)m===r?s.skipped_effects.delete(g.effect):s.skipped_effects.add(g.effect);s.oncommit(this.#a),s.ondiscard(this.#i)}else this.#a()}}function ct(e,r,i=!1){var s=new Wd(e),l=i?Hr:0;function c(h,m){s.ensure(h,m)}xs(()=>{var h=!1;r((m,g=!0)=>{h=!0,c(g,m)}),h||c(!1,null)},l)}function As(e,r,i){Tl(()=>{var s=rt(()=>r(e,i?.())||{});if(i&&s?.update){var l=!1,c={};Ua(()=>{var h=i();Bt(h),l&&ol(c,h)&&(c=h,s.update(h))}),l=!0}if(s?.destroy)return()=>s.destroy()})}function Fl(e){var r,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(r=0;r<l;r++)e[r]&&(i=Fl(e[r]))&&(s&&(s+=" "),s+=i)}else for(i in e)e[i]&&(s&&(s+=" "),s+=i);return s}function Yd(){for(var e,r,i=0,s="",l=arguments.length;i<l;i++)(e=arguments[i])&&(r=Fl(e))&&(s&&(s+=" "),s+=r);return s}function Bl(e){return typeof e=="object"?Yd(e):e??""}function Zd(e,r,i){var s=e==null?"":""+e;return r&&(s=s?s+" "+r:r),s===""?null:s}function qd(e,r){return e==null?null:String(e)}function Ti(e,r,i,s,l,c){var h=e.__className;if(h!==i||h===void 0){var m=Zd(i,s);m==null?e.removeAttribute("class"):e.className=m,e.__className=i}return c}function ar(e,r,i,s){var l=e.__style;if(l!==r){var c=qd(r);c==null?e.removeAttribute("style"):e.style.cssText=c,e.__style=r}return s}const Qd=Symbol("is custom element"),Xd=Symbol("is html");function Jd(e,r){var i=Ds(e);i.value===(i.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function jl(e,r){var i=Ds(e);i.checked!==(i.checked=r??void 0)&&(e.checked=r)}function bt(e,r,i,s){var l=Ds(e);l[r]!==(l[r]=i)&&(r==="loading"&&(e[Cf]=i),i==null?e.removeAttribute(r):typeof i!="string"&&$d(e).includes(r)?e[r]=i:e.setAttribute(r,i))}function Ds(e){return e.__attributes??={[Qd]:e.nodeName.includes("-"),[Xd]:e.namespaceURI===$f}}var Du=new Map;function $d(e){var r=e.getAttribute("is")||e.nodeName,i=Du.get(r);if(i)return i;Du.set(r,i=[]);for(var s,l=e,c=Element.prototype;c!==l;){s=qu(l);for(var h in s)s[h].set&&i.push(h);l=ms(l)}return i}function Is(e,r,i=r){var s=new WeakSet;Sd(e,"input",async l=>{ae&&e.type==="checkbox"&&gu();var c=l?e.defaultValue:e.value;if(c=zo(e)?Go(c):c,i(c),Ue!==null&&s.add(Ue),await qn(),c!==(c=r())){var h=e.selectionStart,m=e.selectionEnd,g=e.value.length;if(e.value=c??"",m!==null){var b=e.value.length;h===m&&m===g&&b>g?(e.selectionStart=b,e.selectionEnd=b):(e.selectionStart=h,e.selectionEnd=Math.min(m,b))}}}),rt(r)==null&&e.value&&(i(zo(e)?Go(e.value):e.value),Ue!==null&&s.add(Ue)),Ua(()=>{ae&&e.type==="checkbox"&&gu();var l=r();if(e===document.activeElement){var c=ha??Ue;if(s.has(c))return}zo(e)&&l===Go(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function zo(e){var r=e.type;return r==="number"||r==="range"}function Go(e){return e===""?null:+e}function Iu(e,r){return e===r||e?.[On]===r}function En(e={},r,i,s){return Tl(()=>{var l,c;return Ua(()=>{l=c,c=[],rt(()=>{e!==i(...c)&&(r(e,...c),l&&Iu(i(...l),e)&&r(null,...l))})}),()=>{$r(()=>{c&&Iu(i(...c),e)&&r(null,...c)})}}),e}function eh(e=!1){const r=dt,i=r.l.u;if(!i)return;let s=()=>Bt(r.s);if(e){let l=0,c={};const h=Oi(()=>{let m=!1;const g=r.s;for(const b in g)g[b]!==c[b]&&(c[b]=g[b],m=!0);return m&&l++,l});s=()=>p(h)}i.b.length&&Od(()=>{Su(r,s),Yo(i.b)}),$e(()=>{const l=rt(()=>i.m.map(Df));return()=>{for(const c of l)typeof c=="function"&&c()}}),i.a.length&&$e(()=>{Su(r,s),Yo(i.a)})}function Su(e,r){if(e.l.s)for(const i of e.l.s)p(i);r()}function zl(e,r,i){if(e==null)return r(void 0),ga;const s=rt(()=>e.subscribe(r,i));return s.unsubscribe?()=>s.unsubscribe():s}function th(e){let r;return zl(e,i=>r=i)(),r}let ca=!1,ns=Symbol();function ka(e,r,i){const s=i[r]??={store:null,source:ml(void 0),unsubscribe:ga};if(ae&&(s.source.label=r),s.store!==e&&!(ns in i))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=ga;else{var l=!0;s.unsubscribe=zl(e,c=>{l?s.source.v=c:I(s.source,c)}),l=!1}return e&&ns in i?th(e):p(s.source)}function Aa(e,r,i){let s=i[r];return s&&s.store!==e&&(s.unsubscribe(),s.unsubscribe=ga),e}function Ss(){const e={};function r(){Es(()=>{for(var i in e)e[i].unsubscribe();Rn(e,ns,{enumerable:!1,value:!0})})}return[e,r]}function nh(e){var r=ca;try{return ca=!1,[e(),ca]}finally{ca=r}}function ze(e,r,i,s){var l=!Ii||(i&Wf)!==0,c=(i&Zf)!==0,h=(i&qf)!==0,m=s,g=!0,b=()=>(g&&(g=!1,m=h?rt(s):s),m),E;if(c){var D=On in e||Sf in e;E=wr(e,r)?.set??(D&&r in e?V=>e[r]=V:void 0)}var _,T=!1;c?[_,T]=nh(()=>e[r]):_=e[r],_===void 0&&s!==void 0&&(_=b(),E&&(l&&Kf(r),E(_)));var C;if(l?C=()=>{var V=e[r];return V===void 0?b():(g=!0,V)}:C=()=>{var V=e[r];return V!==void 0&&(m=void 0),V===void 0?m:V},l&&(i&Yf)===0)return C;if(E){var M=e.$$legacy;return(function(V,z){return arguments.length>0?((!l||!z||M||T)&&E(z?C():V),V):C()})}var R=!1,O=((i&Vf)!==0?Oi:In)(()=>(R=!1,C()));ae&&(O.label=r),c&&p(O);var Y=Be;return(function(V,z){if(arguments.length>0){const Q=z?p(O):l&&c?Zt(V):V;return I(O,Q),R=!0,m!==void 0&&(m=Q),V}return Ir&&R||(Y.f&Cn)!==0?O.v:p(O)})}if(ae){let e=function(r){if(!(r in globalThis)){let i;Object.defineProperty(globalThis,r,{configurable:!0,get:()=>{if(i!==void 0)return i;Ff(r)},set:s=>{i=s}})}};var Hp=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const rh="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(rh);nd();var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ah(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pa={exports:{}},oh=pa.exports,Cu;function sh(){return Cu||(Cu=1,(function(e,r){(function(i,s){e.exports=s()})(oh,(function(){var i=function(t,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(a[u]=o[u])},i(t,n)};function s(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var l=function(){return l=Object.assign||function(n){for(var a,o=1,u=arguments.length;o<u;o++){a=arguments[o];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(n[f]=a[f])}return n},l.apply(this,arguments)};function c(t,n,a){for(var o=0,u=n.length,f;o<u;o++)(f||!(o in n))&&(f||(f=Array.prototype.slice.call(n,0,o)),f[o]=n[o]);return t.concat(f||Array.prototype.slice.call(n))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ih,m=Object.keys,g=Array.isArray;typeof Promise<"u"&&!h.Promise&&(h.Promise=Promise);function b(t,n){return typeof n!="object"||m(n).forEach(function(a){t[a]=n[a]}),t}var E=Object.getPrototypeOf,D={}.hasOwnProperty;function _(t,n){return D.call(t,n)}function T(t,n){typeof n=="function"&&(n=n(E(t))),(typeof Reflect>"u"?m:Reflect.ownKeys)(n).forEach(function(a){M(t,a,n[a])})}var C=Object.defineProperty;function M(t,n,a,o){C(t,n,b(a&&_(a,"get")&&typeof a.get=="function"?{get:a.get,set:a.set,configurable:!0}:{value:a,configurable:!0,writable:!0},o))}function R(t){return{from:function(n){return t.prototype=Object.create(n.prototype),M(t.prototype,"constructor",t),{extend:T.bind(null,t.prototype)}}}}var O=Object.getOwnPropertyDescriptor;function Y(t,n){var a=O(t,n),o;return a||(o=E(t))&&Y(o,n)}var V=[].slice;function z(t,n,a){return V.call(t,n,a)}function Q(t,n){return n(t)}function ee(t){if(!t)throw new Error("Assertion Failed")}function he(t){h.setImmediate?setImmediate(t):setTimeout(t,0)}function ve(t,n){return t.reduce(function(a,o,u){var f=n(o,u);return f&&(a[f[0]]=f[1]),a},{})}function se(t,n){if(typeof n=="string"&&_(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var a=[],o=0,u=n.length;o<u;++o){var f=se(t,n[o]);a.push(f)}return a}var d=n.indexOf(".");if(d!==-1){var v=t[n.substr(0,d)];return v==null?void 0:se(v,n.substr(d+1))}}function be(t,n,a){if(!(!t||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){ee(typeof a!="string"&&"length"in a);for(var o=0,u=n.length;o<u;++o)be(t,n[o],a[o])}else{var f=n.indexOf(".");if(f!==-1){var d=n.substr(0,f),v=n.substr(f+1);if(v==="")a===void 0?g(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=a;else{var y=t[d];(!y||!_(t,d))&&(y=t[d]={}),be(y,v,a)}}else a===void 0?g(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=a}}function _e(t,n){typeof n=="string"?be(t,n,void 0):"length"in n&&[].map.call(n,function(a){be(t,a,void 0)})}function re(t){var n={};for(var a in t)_(t,a)&&(n[a]=t[a]);return n}var Te=[].concat;function Fe(t){return Te.apply([],t)}var He="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Fe([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return h[t]}),tt=new Set(He.map(function(t){return h[t]}));function ye(t){var n={};for(var a in t)if(_(t,a)){var o=t[a];n[a]=!o||typeof o!="object"||tt.has(o.constructor)?o:ye(o)}return n}function Et(t){for(var n in t)if(_(t,n))return!1;return!0}var Ve=null;function Ye(t){Ve=new WeakMap;var n=pt(t);return Ve=null,n}function pt(t){if(!t||typeof t!="object")return t;var n=Ve.get(t);if(n)return n;if(g(t)){n=[],Ve.set(t,n);for(var a=0,o=t.length;a<o;++a)n.push(pt(t[a]))}else if(tt.has(t.constructor))n=t;else{var u=E(t);n=u===Object.prototype?{}:Object.create(u),Ve.set(t,n);for(var f in t)_(t,f)&&(n[f]=pt(t[f]))}return n}var nt={}.toString;function ot(t){return nt.call(t).slice(8,-1)}var mt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Z=typeof mt=="symbol"?function(t){var n;return t!=null&&(n=t[mt])&&n.apply(t)}:function(){return null};function H(t,n){var a=t.indexOf(n);return a>=0&&t.splice(a,1),a>=0}var oe={};function Ae(t){var n,a,o,u;if(arguments.length===1){if(g(t))return t.slice();if(this===oe&&typeof t=="string")return[t];if(u=Z(t)){for(a=[];o=u.next(),!o.done;)a.push(o.value);return a}if(t==null)return[t];if(n=t.length,typeof n=="number"){for(a=new Array(n);n--;)a[n]=t[n];return a}return[t]}for(n=arguments.length,a=new Array(n);n--;)a[n]=arguments[n];return a}var Pe=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ht=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ze=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],We=ht.concat(Ze),fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ge(t,n){this.name=t,this.message=n}R(Ge).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Ee(t,n){return t+". Errors: "+Object.keys(n).map(function(a){return n[a].toString()}).filter(function(a,o,u){return u.indexOf(a)===o}).join(`
`)}function qe(t,n,a,o){this.failures=n,this.failedKeys=o,this.successCount=a,this.message=Ee(t,n)}R(qe).from(Ge);function Qe(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(a){return n[a]}),this.failuresByPos=n,this.message=Ee(t,this.failures)}R(Qe).from(Ge);var Pt=We.reduce(function(t,n){return t[n]=n+"Error",t},{}),Cr=Ge,ie=We.reduce(function(t,n){var a=n+"Error";function o(u,f){this.name=a,u?typeof u=="string"?(this.message="".concat(u).concat(f?`
 `+f:""),this.inner=f||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=fe[n]||a,this.inner=null)}return R(o).from(Cr),t[n]=o,t},{});ie.Syntax=SyntaxError,ie.Type=TypeError,ie.Range=RangeError;var Kn=Ze.reduce(function(t,n){return t[n+"Error"]=ie[n],t},{});function Or(t,n){if(!t||t instanceof Ge||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Kn[t.name])return t;var a=new Kn[t.name](n||t.message,t);return"stack"in t&&M(a,"stack",{get:function(){return this.inner.stack}}),a}var Tn=We.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=ie[n]),t},{});Tn.ModifyError=qe,Tn.DexieError=Ge,Tn.BulkError=Qe;function Ne(){}function cn(t){return t}function ei(t,n){return t==null||t===cn?n:function(a){return n(t(a))}}function W(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function K(t,n){return t===Ne?n:function(){var a=t.apply(this,arguments);a!==void 0&&(arguments[0]=a);var o=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var f=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?W(o,this.onsuccess):o),u&&(this.onerror=this.onerror?W(u,this.onerror):u),f!==void 0?f:a}}function G(t,n){return t===Ne?n:function(){t.apply(this,arguments);var a=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?W(a,this.onsuccess):a),o&&(this.onerror=this.onerror?W(o,this.onerror):o)}}function ue(t,n){return t===Ne?n:function(a){var o=t.apply(this,arguments);b(a,o);var u=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var d=n.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?W(u,this.onsuccess):u),f&&(this.onerror=this.onerror?W(f,this.onerror):f),o===void 0?d===void 0?void 0:d:b(o,d)}}function ce(t,n){return t===Ne?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Xe(t,n){return t===Ne?n:function(){var a=t.apply(this,arguments);if(a&&typeof a.then=="function"){for(var o=this,u=arguments.length,f=new Array(u);u--;)f[u]=arguments[u];return a.then(function(){return n.apply(o,f)})}return n.apply(this,arguments)}}var xe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Oe(t,n){xe=t}var st={},yt=100,Kt=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,E(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,E(n),t]})(),je=Kt[0],Fn=Kt[1],$a=Kt[2],gt=Fn&&Fn.then,rn=je&&je.constructor,eo=!!$a;function sc(){queueMicrotask(lc)}var ti=function(t,n){ni.push([t,n]),Ki&&(sc(),Ki=!1)},to=!0,Ki=!0,lr=[],Fi=[],no=cn,Bn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ne,pgp:!1,env:{},finalize:Ne},le=Bn,ni=[],cr=0,Bi=[];function $(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=le;if(typeof t!="function"){if(t!==st)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&io(this,this._value);return}this._state=null,this._value=null,++n.ref,Fs(this,t)}var ro={get:function(){var t=le,n=Ui;function a(o,u){var f=this,d=!t.global&&(t!==le||n!==Ui),v=d&&!zn(),y=new $(function(w,A){ao(f,new Ks(zs(o,t,d,v),zs(u,t,d,v),w,A,t))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return a.prototype=st,a},set:function(t){M(this,"then",t&&t.prototype===st?ro:{get:function(){return t},set:ro.set})}};T($.prototype,{then:ro,_then:function(t,n){ao(this,new Ks(null,null,t,n,le))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],a=arguments[1];return typeof n=="function"?this.then(null,function(o){return o instanceof n?a(o):ji(o)}):this.then(null,function(o){return o&&o.name===n?a(o):ji(o)})},finally:function(t){return this.then(function(n){return $.resolve(t()).then(function(){return n})},function(n){return $.resolve(t()).then(function(){return ji(n)})})},timeout:function(t,n){var a=this;return t<1/0?new $(function(o,u){var f=setTimeout(function(){return u(new ie.Timeout(n))},t);a.then(o,u).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M($.prototype,Symbol.toStringTag,"Dexie.Promise"),Bn.env=js();function Ks(t,n,a,o,u){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=a,this.reject=o,this.psd=u}T($,{all:function(){var t=Ae.apply(null,arguments).map(Hi);return new $(function(n,a){t.length===0&&n([]);var o=t.length;t.forEach(function(u,f){return $.resolve(u).then(function(d){t[f]=d,--o||n(t)},a)})})},resolve:function(t){if(t instanceof $)return t;if(t&&typeof t.then=="function")return new $(function(a,o){t.then(a,o)});var n=new $(st,!0,t);return n},reject:ji,race:function(){var t=Ae.apply(null,arguments).map(Hi);return new $(function(n,a){t.map(function(o){return $.resolve(o).then(n,a)})})},PSD:{get:function(){return le},set:function(t){return le=t}},totalEchoes:{get:function(){return Ui}},newPSD:jn,usePSD:fr,scheduler:{get:function(){return ti},set:function(t){ti=t}},rejectionMapper:{get:function(){return no},set:function(t){no=t}},follow:function(t,n){return new $(function(a,o){return jn(function(u,f){var d=le;d.unhandleds=[],d.onunhandled=f,d.finalize=W(function(){var v=this;cc(function(){v.unhandleds.length===0?u():f(v.unhandleds[0])})},d.finalize),t()},n,a,o)})}}),rn&&(rn.allSettled&&M($,"allSettled",function(){var t=Ae.apply(null,arguments).map(Hi);return new $(function(n){t.length===0&&n([]);var a=t.length,o=new Array(a);t.forEach(function(u,f){return $.resolve(u).then(function(d){return o[f]={status:"fulfilled",value:d}},function(d){return o[f]={status:"rejected",reason:d}}).then(function(){return--a||n(o)})})})}),rn.any&&typeof AggregateError<"u"&&M($,"any",function(){var t=Ae.apply(null,arguments).map(Hi);return new $(function(n,a){t.length===0&&a(new AggregateError([]));var o=t.length,u=new Array(o);t.forEach(function(f,d){return $.resolve(f).then(function(v){return n(v)},function(v){u[d]=v,--o||a(new AggregateError(u))})})})}),rn.withResolvers&&($.withResolvers=rn.withResolvers));function Fs(t,n){try{n(function(a){if(t._state===null){if(a===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&Lr();a&&typeof a.then=="function"?Fs(t,function(u,f){a instanceof $?a._then(u,f):a.then(u,f)}):(t._state=!0,t._value=a,Bs(t)),o&&Rr()}},io.bind(null,t))}catch(a){io(t,a)}}function io(t,n){if(Fi.push(n),t._state===null){var a=t._lib&&Lr();n=no(n),t._state=!1,t._value=n,fc(t),Bs(t),a&&Rr()}}function Bs(t){var n=t._listeners;t._listeners=[];for(var a=0,o=n.length;a<o;++a)ao(t,n[a]);var u=t._PSD;--u.ref||u.finalize(),cr===0&&(++cr,ti(function(){--cr===0&&oo()},[]))}function ao(t,n){if(t._state===null){t._listeners.push(n);return}var a=t._state?n.onFulfilled:n.onRejected;if(a===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++cr,ti(uc,[a,t,n])}function uc(t,n,a){try{var o,u=n._value;!n._state&&Fi.length&&(Fi=[]),o=xe&&n._consoleTask?n._consoleTask.run(function(){return t(u)}):t(u),!n._state&&Fi.indexOf(u)===-1&&dc(n),a.resolve(o)}catch(f){a.reject(f)}finally{--cr===0&&oo(),--a.psd.ref||a.psd.finalize()}}function lc(){fr(Bn,function(){Lr()&&Rr()})}function Lr(){var t=to;return to=!1,Ki=!1,t}function Rr(){var t,n,a;do for(;ni.length>0;)for(t=ni,ni=[],a=t.length,n=0;n<a;++n){var o=t[n];o[0].apply(null,o[1])}while(ni.length>0);to=!0,Ki=!0}function oo(){var t=lr;lr=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=Bi.slice(0),a=n.length;a;)n[--a]()}function cc(t){function n(){t(),Bi.splice(Bi.indexOf(n),1)}Bi.push(n),++cr,ti(function(){--cr===0&&oo()},[])}function fc(t){lr.some(function(n){return n._value===t._value})||lr.push(t)}function dc(t){for(var n=lr.length;n;)if(lr[--n]._value===t._value){lr.splice(n,1);return}}function ji(t){return new $(st,!1,t)}function Je(t,n){var a=le;return function(){var o=Lr(),u=le;try{return Gn(a,!0),t.apply(this,arguments)}catch(f){n&&n(f)}finally{Gn(u,!1),o&&Rr()}}}var _t={awaits:0,echoes:0,id:0},hc=0,zi=[],Gi=0,Ui=0,vc=0;function jn(t,n,a,o){var u=le,f=Object.create(u);f.parent=u,f.ref=0,f.global=!1,f.id=++vc,Bn.env,f.env=eo?{Promise:$,PromiseProp:{value:$,configurable:!0,writable:!0},all:$.all,race:$.race,allSettled:$.allSettled,any:$.any,resolve:$.resolve,reject:$.reject}:{},n&&b(f,n),++u.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=fr(f,t,a,o);return f.ref===0&&f.finalize(),d}function Pr(){return _t.id||(_t.id=++hc),++_t.awaits,_t.echoes+=yt,_t.id}function zn(){return _t.awaits?(--_t.awaits===0&&(_t.id=0),_t.echoes=_t.awaits*yt,!0):!1}(""+gt).indexOf("[native code]")===-1&&(Pr=zn=Ne);function Hi(t){return _t.echoes&&t&&t.constructor===rn?(Pr(),t.then(function(n){return zn(),n},function(n){return zn(),ut(n)})):t}function pc(t){++Ui,(!_t.echoes||--_t.echoes===0)&&(_t.echoes=_t.awaits=_t.id=0),zi.push(le),Gn(t,!0)}function mc(){var t=zi[zi.length-1];zi.pop(),Gn(t,!1)}function Gn(t,n){var a=le;if((n?_t.echoes&&(!Gi++||t!==le):Gi&&(!--Gi||t!==le))&&queueMicrotask(n?pc.bind(null,t):mc),t!==le&&(le=t,a===Bn&&(Bn.env=js()),eo)){var o=Bn.env.Promise,u=t.env;(a.global||t.global)&&(Object.defineProperty(h,"Promise",u.PromiseProp),o.all=u.all,o.race=u.race,o.resolve=u.resolve,o.reject=u.reject,u.allSettled&&(o.allSettled=u.allSettled),u.any&&(o.any=u.any))}}function js(){var t=h.Promise;return eo?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function fr(t,n,a,o,u){var f=le;try{return Gn(t,!0),n(a,o,u)}finally{Gn(f,!1)}}function zs(t,n,a,o){return typeof t!="function"?t:function(){var u=le;a&&Pr(),Gn(n,!0);try{return t.apply(this,arguments)}finally{Gn(u,!1),o&&queueMicrotask(zn)}}}function so(t){Promise===rn&&_t.echoes===0?Gi===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var ut=$.reject;function uo(t,n,a,o){if(!t.idbdb||!t._state.openComplete&&!le.letThrough&&!t._vip){if(t._state.openComplete)return ut(new ie.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return ut(new ie.DatabaseClosed);t.open().catch(Ne)}return t._state.dbReadyPromise.then(function(){return uo(t,n,a,o)})}else{var u=t._createTransaction(n,a,t._dbSchema);try{u.create(),t._state.PR1398_maxLoop=3}catch(f){return f.name===Pt.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return uo(t,n,a,o)})):ut(f)}return u._promise(n,function(f,d){return jn(function(){return le.trans=u,o(f,d,u)})}).then(function(f){if(n==="readwrite")try{u.idbtrans.commit()}catch{}return n==="readonly"?f:u._completion.then(function(){return f})})}}var Gs="4.2.1",dr="",lo=-1/0,kn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Us="String expected.",Mr=[],Vi="__dbnames",co="readonly",fo="readwrite";function hr(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var Hs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wi(t){return typeof t=="string"&&!/\./.test(t)?function(n){return n[t]===void 0&&t in n&&(n=Ye(n),delete n[t]),n}:function(n){return n}}function Vs(){throw ie.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Re(t,n){try{var a=Ws(t),o=Ws(n);if(a!==o)return a==="Array"?1:o==="Array"?-1:a==="binary"?1:o==="binary"?-1:a==="string"?1:o==="string"?-1:a==="Date"?1:o!=="Date"?NaN:-1;switch(a){case"number":case"Date":case"string":return t>n?1:t<n?-1:0;case"binary":return gc(Ys(t),Ys(n));case"Array":return yc(t,n)}}catch{}return NaN}function yc(t,n){for(var a=t.length,o=n.length,u=a<o?a:o,f=0;f<u;++f){var d=Re(t[f],n[f]);if(d!==0)return d}return a===o?0:a<o?-1:1}function gc(t,n){for(var a=t.length,o=n.length,u=a<o?a:o,f=0;f<u;++f)if(t[f]!==n[f])return t[f]<n[f]?-1:1;return a===o?0:a<o?-1:1}function Ws(t){var n=typeof t;if(n!=="object")return n;if(ArrayBuffer.isView(t))return"binary";var a=ot(t);return a==="ArrayBuffer"?"binary":a}function Ys(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Yi(t,n,a){var o=t.schema.yProps;return o?(n&&a.numFailures>0&&(n=n.filter(function(u,f){return!a.failures[f]})),Promise.all(o.map(function(u){var f=u.updatesTable;return n?t.db.table(f).where("k").anyOf(n).delete():t.db.table(f).clear()})).then(function(){return a})):a}var ri=(function(){function t(n){this["@@propmod"]=n}return t.prototype.execute=function(n){var a,o=this["@@propmod"];if(o.add!==void 0){var u=o.add;if(g(u))return c(c([],g(n)?n:[],!0),u).sort();if(typeof u=="number")return(Number(n)||0)+u;if(typeof u=="bigint")try{return BigInt(n)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(o.remove!==void 0){var f=o.remove;if(g(f))return g(n)?n.filter(function(v){return!f.includes(v)}).sort():[];if(typeof f=="number")return Number(n)-f;if(typeof f=="bigint")try{return BigInt(n)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}var d=(a=o.replacePrefix)===null||a===void 0?void 0:a[0];return d&&typeof n=="string"&&n.startsWith(d)?o.replacePrefix[1]+n.substring(d.length):n},t})();function Zs(t,n){for(var a=m(n),o=a.length,u=!1,f=0;f<o;++f){var d=a[f],v=n[d],y=se(t,d);v instanceof ri?(be(t,d,v.execute(y)),u=!0):y!==v&&(be(t,d,v),u=!0)}return u}var qs=(function(){function t(){}return t.prototype._trans=function(n,a,o){var u=this._tx||le.trans,f=this.name,d=xe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function v(A,x,P){if(!P.schema[f])throw new ie.NotFound("Table "+f+" not part of transaction");return a(P.idbtrans,P)}var y=Lr();try{var w=u&&u.db._novip===this.db._novip?u===le.trans?u._promise(n,v,o):jn(function(){return u._promise(n,v,o)},{trans:u,transless:le.transless||le}):uo(this.db,n,[this.name],v);return d&&(w._consoleTask=d,w=w.catch(function(A){return console.trace(A),ut(A)})),w}finally{y&&Rr()}},t.prototype.get=function(n,a){var o=this;return n&&n.constructor===Object?this.where(n).first(a):n==null?ut(new ie.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return o.core.get({trans:u,key:n}).then(function(f){return o.hook.reading.fire(f)})}).then(a)},t.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(g(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var a=m(n);if(a.length===1)return this.where(a[0]).equals(n[a[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(A){if(A.compound&&a.every(function(P){return A.keyPath.indexOf(P)>=0})){for(var x=0;x<a.length;++x)if(a.indexOf(A.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(A,x){return A.keyPath.length-x.keyPath.length})[0];if(o&&this.db._maxKey!==dr){var u=o.keyPath.slice(0,a.length);return this.where(u).equals(u.map(function(A){return n[A]}))}!o&&xe&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var f=this.schema.idxByName;function d(A,x){return Re(A,x)===0}var v=a.reduce(function(A,x){var P=A[0],q=A[1],k=f[x],S=n[x];return[P||k,P||!k?hr(q,k&&k.multi?function(L){var N=se(L,x);return g(N)&&N.some(function(B){return d(S,B)})}:function(L){return d(S,se(L,x))}):q]},[null,null]),y=v[0],w=v[1];return y?this.where(y.name).equals(n[y.keyPath]).filter(w):o?this.filter(w):this.where(a).equals("")},t.prototype.filter=function(n){return this.toCollection().and(n)},t.prototype.count=function(n){return this.toCollection().count(n)},t.prototype.offset=function(n){return this.toCollection().offset(n)},t.prototype.limit=function(n){return this.toCollection().limit(n)},t.prototype.each=function(n){return this.toCollection().each(n)},t.prototype.toArray=function(n){return this.toCollection().toArray(n)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,g(n)?"[".concat(n.join("+"),"]"):n))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(n){var a=this,o=a.db,u=a.name;this.schema.mappedClass=n,n.prototype instanceof Vs&&(n=(function(y){s(w,y);function w(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(w.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),w.prototype.table=function(){return u},w})(n));for(var f=new Set,d=n.prototype;d;d=E(d))Object.getOwnPropertyNames(d).forEach(function(y){return f.add(y)});var v=function(y){if(!y)return y;var w=Object.create(n.prototype);for(var A in y)if(!f.has(A))try{w[A]=y[A]}catch{}return w};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),n},t.prototype.defineClass=function(){function n(a){b(this,a)}return this.mapToClass(n)},t.prototype.add=function(n,a){var o=this,u=this.schema.primKey,f=u.auto,d=u.keyPath,v=n;return d&&f&&(v=Wi(d)(n)),this._trans("readwrite",function(y){return o.core.mutate({trans:y,type:"add",keys:a!=null?[a]:null,values:[v]})}).then(function(y){return y.numFailures?$.reject(y.failures[0]):y.lastResult}).then(function(y){if(d)try{be(n,d,y)}catch{}return y})},t.prototype.upsert=function(n,a){var o=this,u=this.schema.primKey.keyPath;return this._trans("readwrite",function(f){return o.core.get({trans:f,key:n}).then(function(d){var v=d??{};return Zs(v,a),u&&be(v,u,n),o.core.mutate({trans:f,type:"put",values:[v],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[a]}}).then(function(y){return y.numFailures?$.reject(y.failures[0]):!!d})})})},t.prototype.update=function(n,a){if(typeof n=="object"&&!g(n)){var o=se(n,this.schema.primKey.keyPath);return o===void 0?ut(new ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(a)}else return this.where(":id").equals(n).modify(a)},t.prototype.put=function(n,a){var o=this,u=this.schema.primKey,f=u.auto,d=u.keyPath,v=n;return d&&f&&(v=Wi(d)(n)),this._trans("readwrite",function(y){return o.core.mutate({trans:y,type:"put",values:[v],keys:a!=null?[a]:null})}).then(function(y){return y.numFailures?$.reject(y.failures[0]):y.lastResult}).then(function(y){if(d)try{be(n,d,y)}catch{}return y})},t.prototype.delete=function(n){var a=this;return this._trans("readwrite",function(o){return a.core.mutate({trans:o,type:"delete",keys:[n]}).then(function(u){return Yi(a,[n],u)}).then(function(u){return u.numFailures?$.reject(u.failures[0]):void 0})})},t.prototype.clear=function(){var n=this;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"deleteRange",range:Hs}).then(function(o){return Yi(n,null,o)})}).then(function(a){return a.numFailures?$.reject(a.failures[0]):void 0})},t.prototype.bulkGet=function(n){var a=this;return this._trans("readonly",function(o){return a.core.getMany({keys:n,trans:o}).then(function(u){return u.map(function(f){return a.hook.reading.fire(f)})})})},t.prototype.bulkAdd=function(n,a,o){var u=this,f=Array.isArray(a)?a:void 0;o=o||(f?void 0:a);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var y=u.schema.primKey,w=y.auto,A=y.keyPath;if(A&&f)throw new ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,P=A&&w?n.map(Wi(A)):n;return u.core.mutate({trans:v,type:"add",keys:f,values:P,wantResults:d}).then(function(q){var k=q.numFailures,S=q.results,L=q.lastResult,N=q.failures,B=d?S:L;if(k===0)return B;throw new Qe("".concat(u.name,".bulkAdd(): ").concat(k," of ").concat(x," operations failed"),N)})})},t.prototype.bulkPut=function(n,a,o){var u=this,f=Array.isArray(a)?a:void 0;o=o||(f?void 0:a);var d=o?o.allKeys:void 0;return this._trans("readwrite",function(v){var y=u.schema.primKey,w=y.auto,A=y.keyPath;if(A&&f)throw new ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,P=A&&w?n.map(Wi(A)):n;return u.core.mutate({trans:v,type:"put",keys:f,values:P,wantResults:d}).then(function(q){var k=q.numFailures,S=q.results,L=q.lastResult,N=q.failures,B=d?S:L;if(k===0)return B;throw new Qe("".concat(u.name,".bulkPut(): ").concat(k," of ").concat(x," operations failed"),N)})})},t.prototype.bulkUpdate=function(n){var a=this,o=this.core,u=n.map(function(v){return v.key}),f=n.map(function(v){return v.changes}),d=[];return this._trans("readwrite",function(v){return o.getMany({trans:v,keys:u,cache:"clone"}).then(function(y){var w=[],A=[];n.forEach(function(P,q){var k=P.key,S=P.changes,L=y[q];if(L){for(var N=0,B=Object.keys(S);N<B.length;N++){var j=B[N],U=S[j];if(j===a.schema.primKey.keyPath){if(Re(U,k)!==0)throw new ie.Constraint("Cannot update primary key in bulkUpdate()")}else be(L,j,U)}d.push(q),w.push(k),A.push(L)}});var x=w.length;return o.mutate({trans:v,type:"put",keys:w,values:A,updates:{keys:u,changeSpecs:f}}).then(function(P){var q=P.numFailures,k=P.failures;if(q===0)return x;for(var S=0,L=Object.keys(k);S<L.length;S++){var N=L[S],B=d[Number(N)];if(B!=null){var j=k[N];delete k[N],k[B]=j}}throw new Qe("".concat(a.name,".bulkUpdate(): ").concat(q," of ").concat(x," operations failed"),k)})})})},t.prototype.bulkDelete=function(n){var a=this,o=n.length;return this._trans("readwrite",function(u){return a.core.mutate({trans:u,type:"delete",keys:n}).then(function(f){return Yi(a,n,f)})}).then(function(u){var f=u.numFailures,d=u.lastResult,v=u.failures;if(f===0)return d;throw new Qe("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),v)})},t})();function ii(t){var n={},a=function(v,y){if(y){for(var w=arguments.length,A=new Array(w-1);--w;)A[w-1]=arguments[w];return n[v].subscribe.apply(null,A),t}else if(typeof v=="string")return n[v]};a.addEventType=f;for(var o=1,u=arguments.length;o<u;++o)f(arguments[o]);return a;function f(v,y,w){if(typeof v=="object")return d(v);y||(y=ce),w||(w=Ne);var A={subscribers:[],fire:w,subscribe:function(x){A.subscribers.indexOf(x)===-1&&(A.subscribers.push(x),A.fire=y(A.fire,x))},unsubscribe:function(x){A.subscribers=A.subscribers.filter(function(P){return P!==x}),A.fire=A.subscribers.reduce(y,w)}};return n[v]=a[v]=A,A}function d(v){m(v).forEach(function(y){var w=v[y];if(g(w))f(y,v[y][0],v[y][1]);else if(w==="asap")var A=f(y,cn,function(){for(var P=arguments.length,q=new Array(P);P--;)q[P]=arguments[P];A.subscribers.forEach(function(k){he(function(){k.apply(null,q)})})});else throw new ie.InvalidArgument("Invalid event config")})}}function ai(t,n){return R(n).from({prototype:t}),n}function _c(t){return ai(qs.prototype,function(a,o,u){this.db=t,this._tx=u,this.name=a,this.schema=o,this.hook=t._allTables[a]?t._allTables[a].hook:ii(null,{creating:[K,Ne],reading:[ei,cn],updating:[ue,Ne],deleting:[G,Ne]})})}function Nr(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function ho(t,n){t.filter=hr(t.filter,n)}function vo(t,n,a){var o=t.replayFilter;t.replayFilter=o?function(){return hr(o(),n())}:n,t.justLimit=a&&!o}function bc(t,n){t.isMatch=hr(t.isMatch,n)}function Zi(t,n){if(t.isPrimKey)return n.primaryKey;var a=n.getIndexByKeyPath(t.index);if(!a)throw new ie.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return a}function Qs(t,n,a){var o=Zi(t,n.schema);return n.openCursor({trans:a,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function qi(t,n,a,o){var u=t.replayFilter?hr(t.filter,t.replayFilter()):t.filter;if(t.or){var f={},d=function(v,y,w){if(!u||u(y,w,function(P){return y.stop(P)},function(P){return y.fail(P)})){var A=y.primaryKey,x=""+A;x==="[object ArrayBuffer]"&&(x=""+new Uint8Array(A)),_(f,x)||(f[x]=!0,n(v,y,w))}};return Promise.all([t.or._iterate(d,a),Xs(Qs(t,o,a),t.algorithm,d,!t.keysOnly&&t.valueMapper)])}else return Xs(Qs(t,o,a),hr(t.algorithm,u),n,!t.keysOnly&&t.valueMapper)}function Xs(t,n,a,o){var u=o?function(d,v,y){return a(o(d),v,y)}:a,f=Je(u);return t.then(function(d){if(d)return d.start(function(){var v=function(){return d.continue()};(!n||n(d,function(y){return v=y},function(y){d.stop(y),v=Ne},function(y){d.fail(y),v=Ne}))&&f(d.value,d,function(y){return v=y}),v()})})}var wc=(function(){function t(){}return t.prototype._read=function(n,a){var o=this._ctx;return o.error?o.table._trans(null,ut.bind(null,o.error)):o.table._trans("readonly",n).then(a)},t.prototype._write=function(n){var a=this._ctx;return a.error?a.table._trans(null,ut.bind(null,a.error)):a.table._trans("readwrite",n,"locked")},t.prototype._addAlgorithm=function(n){var a=this._ctx;a.algorithm=hr(a.algorithm,n)},t.prototype._iterate=function(n,a){return qi(this._ctx,n,a,this._ctx.table.core)},t.prototype.clone=function(n){var a=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return n&&b(o,n),a._ctx=o,a},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(n){var a=this._ctx;return this._read(function(o){return qi(a,n,o,a.table.core)})},t.prototype.count=function(n){var a=this;return this._read(function(o){var u=a._ctx,f=u.table.core;if(Nr(u,!0))return f.count({trans:o,query:{index:Zi(u,f.schema),range:u.range}}).then(function(v){return Math.min(v,u.limit)});var d=0;return qi(u,function(){return++d,!1},o,f).then(function(){return d})}).then(n)},t.prototype.sortBy=function(n,a){var o=n.split(".").reverse(),u=o[0],f=o.length-1;function d(w,A){return A?d(w[o[A]],A-1):w[u]}var v=this._ctx.dir==="next"?1:-1;function y(w,A){var x=d(w,f),P=d(A,f);return Re(x,P)*v}return this.toArray(function(w){return w.sort(y)}).then(a)},t.prototype.toArray=function(n){var a=this;return this._read(function(o){var u=a._ctx;if(u.dir==="next"&&Nr(u,!0)&&u.limit>0){var f=u.valueMapper,d=Zi(u,u.table.core.schema);return u.table.core.query({trans:o,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(y){var w=y.result;return f?w.map(f):w})}else{var v=[];return qi(u,function(y){return v.push(y)},o,u.table.core).then(function(){return v})}},n)},t.prototype.offset=function(n){var a=this._ctx;return n<=0?this:(a.offset+=n,Nr(a)?vo(a,function(){var o=n;return function(u,f){return o===0?!0:o===1?(--o,!1):(f(function(){u.advance(o),o=0}),!1)}}):vo(a,function(){var o=n;return function(){return--o<0}}),this)},t.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),vo(this._ctx,function(){var a=n;return function(o,u,f){return--a<=0&&u(f),a>=0}},!0),this},t.prototype.until=function(n,a){return ho(this._ctx,function(o,u,f){return n(o.value)?(u(f),a):!0}),this},t.prototype.first=function(n){return this.limit(1).toArray(function(a){return a[0]}).then(n)},t.prototype.last=function(n){return this.reverse().first(n)},t.prototype.filter=function(n){return ho(this._ctx,function(a){return n(a.value)}),bc(this._ctx,n),this},t.prototype.and=function(n){return this.filter(n)},t.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.key,u)})},t.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},t.prototype.eachPrimaryKey=function(n){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(o,u){n(u.primaryKey,u)})},t.prototype.keys=function(n){var a=this._ctx;a.keysOnly=!a.isMatch;var o=[];return this.each(function(u,f){o.push(f.key)}).then(function(){return o}).then(n)},t.prototype.primaryKeys=function(n){var a=this._ctx;if(a.dir==="next"&&Nr(a,!0)&&a.limit>0)return this._read(function(u){var f=Zi(a,a.table.core.schema);return a.table.core.query({trans:u,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(u){var f=u.result;return f}).then(n);a.keysOnly=!a.isMatch;var o=[];return this.each(function(u,f){o.push(f.primaryKey)}).then(function(){return o}).then(n)},t.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},t.prototype.firstKey=function(n){return this.limit(1).keys(function(a){return a[0]}).then(n)},t.prototype.lastKey=function(n){return this.reverse().firstKey(n)},t.prototype.distinct=function(){var n=this._ctx,a=n.index&&n.table.schema.idxByName[n.index];if(!a||!a.multi)return this;var o={};return ho(this._ctx,function(u){var f=u.primaryKey.toString(),d=_(o,f);return o[f]=!0,!d}),this},t.prototype.modify=function(n){var a=this,o=this._ctx;return this._write(function(u){var f;typeof n=="function"?f=n:f=function(N){return Zs(N,n)};var d=o.table.core,v=d.schema.primaryKey,y=v.outbound,w=v.extractKey,A=200,x=a.db._options.modifyChunkSize;x&&(typeof x=="object"?A=x[d.name]||x["*"]||200:A=x);var P=[],q=0,k=[],S=function(N,B){var j=B.failures,U=B.numFailures;q+=N-U;for(var F=0,X=m(j);F<X.length;F++){var te=X[F];P.push(j[te])}},L=n===Js;return a.clone().primaryKeys().then(function(N){var B=Nr(o)&&o.limit===1/0&&(typeof n!="function"||L)&&{index:o.index,range:o.range},j=function(U){var F=Math.min(A,N.length-U),X=N.slice(U,U+F);return(L?Promise.resolve([]):d.getMany({trans:u,keys:X,cache:"immutable"})).then(function(te){var J=[],pe=[],Se=y?[]:null,ne=L?X:[];if(!L)for(var De=0;De<F;++De){var ge=te[De],Me={value:Ye(ge),primKey:N[U+De]};f.call(Me,Me.value,Me)!==!1&&(Me.value==null?ne.push(N[U+De]):!y&&Re(w(ge),w(Me.value))!==0?(ne.push(N[U+De]),J.push(Me.value)):(pe.push(Me.value),y&&Se.push(N[U+De])))}return Promise.resolve(J.length>0&&d.mutate({trans:u,type:"add",values:J}).then(function(de){for(var it in de.failures)ne.splice(parseInt(it),1);S(J.length,de)})).then(function(){return(pe.length>0||B&&typeof n=="object")&&d.mutate({trans:u,type:"put",keys:Se,values:pe,criteria:B,changeSpec:typeof n!="function"&&n,isAdditionalChunk:U>0}).then(function(de){return S(pe.length,de)})}).then(function(){return(ne.length>0||B&&L)&&d.mutate({trans:u,type:"delete",keys:ne,criteria:B,isAdditionalChunk:U>0}).then(function(de){return Yi(o.table,ne,de)}).then(function(de){return S(ne.length,de)})}).then(function(){return N.length>U+F&&j(U+A)})})};return j(0).then(function(){if(P.length>0)throw new qe("Error modifying one or more objects",P,q,k);return N.length})})})},t.prototype.delete=function(){var n=this._ctx,a=n.range;return Nr(n)&&!n.table.schema.yProps&&(n.isPrimKey||a.type===3)?this._write(function(o){var u=n.table.core.schema.primaryKey,f=a;return n.table.core.count({trans:o,query:{index:u,range:f}}).then(function(d){return n.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(v){var y=v.failures,w=v.numFailures;if(w)throw new qe("Could not delete some values",Object.keys(y).map(function(A){return y[A]}),d-w);return d-w})})}):this.modify(Js)},t})(),Js=function(t,n){return n.value=null};function Ec(t){return ai(wc.prototype,function(a,o){this.db=t;var u=Hs,f=null;if(o)try{u=o()}catch(w){f=w}var d=a._ctx,v=d.table,y=v.hook.reading.fire;this._ctx={table:v,index:d.index,isPrimKey:!d.index||v.schema.primKey.keyPath&&d.index===v.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:d.or,valueMapper:y!==cn?y:null}})}function xc(t,n){return t<n?-1:t===n?0:1}function Tc(t,n){return t>n?-1:t===n?0:1}function Wt(t,n,a){var o=t instanceof eu?new t.Collection(t):t;return o._ctx.error=a?new a(n):new TypeError(n),o}function Kr(t){return new t.Collection(t,function(){return $s("")}).limit(0)}function kc(t){return t==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function Ac(t){return t==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function Dc(t,n,a,o,u,f){for(var d=Math.min(t.length,o.length),v=-1,y=0;y<d;++y){var w=n[y];if(w!==o[y])return u(t[y],a[y])<0?t.substr(0,y)+a[y]+a.substr(y+1):u(t[y],o[y])<0?t.substr(0,y)+o[y]+a.substr(y+1):v>=0?t.substr(0,v)+n[v]+a.substr(v+1):null;u(t[y],w)<0&&(v=y)}return d<o.length&&f==="next"?t+a.substr(t.length):d<t.length&&f==="prev"?t.substr(0,a.length):v<0?null:t.substr(0,v)+o[v]+a.substr(v+1)}function Qi(t,n,a,o){var u,f,d,v,y,w,A,x=a.length;if(!a.every(function(S){return typeof S=="string"}))return Wt(t,Us);function P(S){u=kc(S),f=Ac(S),d=S==="next"?xc:Tc;var L=a.map(function(N){return{lower:f(N),upper:u(N)}}).sort(function(N,B){return d(N.lower,B.lower)});v=L.map(function(N){return N.upper}),y=L.map(function(N){return N.lower}),w=S,A=S==="next"?"":o}P("next");var q=new t.Collection(t,function(){return Un(v[0],y[x-1]+o)});q._ondirectionchange=function(S){P(S)};var k=0;return q._addAlgorithm(function(S,L,N){var B=S.key;if(typeof B!="string")return!1;var j=f(B);if(n(j,y,k))return!0;for(var U=null,F=k;F<x;++F){var X=Dc(B,j,v[F],y[F],d,w);X===null&&U===null?k=F+1:(U===null||d(U,X)>0)&&(U=X)}return L(U!==null?function(){S.continue(U+A)}:N),!1}),q}function Un(t,n,a,o){return{type:2,lower:t,upper:n,lowerOpen:a,upperOpen:o}}function $s(t){return{type:1,lower:t,upper:t}}var eu=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(n,a,o,u){o=o!==!1,u=u===!0;try{return this._cmp(n,a)>0||this._cmp(n,a)===0&&(o||u)&&!(o&&u)?Kr(this):new this.Collection(this,function(){return Un(n,a,!o,!u)})}catch{return Wt(this,kn)}},t.prototype.equals=function(n){return n==null?Wt(this,kn):new this.Collection(this,function(){return $s(n)})},t.prototype.above=function(n){return n==null?Wt(this,kn):new this.Collection(this,function(){return Un(n,void 0,!0)})},t.prototype.aboveOrEqual=function(n){return n==null?Wt(this,kn):new this.Collection(this,function(){return Un(n,void 0,!1)})},t.prototype.below=function(n){return n==null?Wt(this,kn):new this.Collection(this,function(){return Un(void 0,n,!1,!0)})},t.prototype.belowOrEqual=function(n){return n==null?Wt(this,kn):new this.Collection(this,function(){return Un(void 0,n)})},t.prototype.startsWith=function(n){return typeof n!="string"?Wt(this,Us):this.between(n,n+dr,!0,!0)},t.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Qi(this,function(a,o){return a.indexOf(o[0])===0},[n],dr)},t.prototype.equalsIgnoreCase=function(n){return Qi(this,function(a,o){return a===o[0]},[n],"")},t.prototype.anyOfIgnoreCase=function(){var n=Ae.apply(oe,arguments);return n.length===0?Kr(this):Qi(this,function(a,o){return o.indexOf(a)!==-1},n,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var n=Ae.apply(oe,arguments);return n.length===0?Kr(this):Qi(this,function(a,o){return o.some(function(u){return a.indexOf(u)===0})},n,dr)},t.prototype.anyOf=function(){var n=this,a=Ae.apply(oe,arguments),o=this._cmp;try{a.sort(o)}catch{return Wt(this,kn)}if(a.length===0)return Kr(this);var u=new this.Collection(this,function(){return Un(a[0],a[a.length-1])});u._ondirectionchange=function(d){o=d==="next"?n._ascending:n._descending,a.sort(o)};var f=0;return u._addAlgorithm(function(d,v,y){for(var w=d.key;o(w,a[f])>0;)if(++f,f===a.length)return v(y),!1;return o(w,a[f])===0?!0:(v(function(){d.continue(a[f])}),!1)}),u},t.prototype.notEqual=function(n){return this.inAnyRange([[lo,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var n=Ae.apply(oe,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Wt(this,kn)}var a=n.reduce(function(o,u){return o?o.concat([[o[o.length-1][1],u]]):[[lo,u]]},null);return a.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(n,a){var o=this,u=this._cmp,f=this._ascending,d=this._descending,v=this._min,y=this._max;if(n.length===0)return Kr(this);if(!n.every(function(F){return F[0]!==void 0&&F[1]!==void 0&&f(F[0],F[1])<=0}))return Wt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ie.InvalidArgument);var w=!a||a.includeLowers!==!1,A=a&&a.includeUppers===!0;function x(F,X){for(var te=0,J=F.length;te<J;++te){var pe=F[te];if(u(X[0],pe[1])<0&&u(X[1],pe[0])>0){pe[0]=v(pe[0],X[0]),pe[1]=y(pe[1],X[1]);break}}return te===J&&F.push(X),F}var P=f;function q(F,X){return P(F[0],X[0])}var k;try{k=n.reduce(x,[]),k.sort(q)}catch{return Wt(this,kn)}var S=0,L=A?function(F){return f(F,k[S][1])>0}:function(F){return f(F,k[S][1])>=0},N=w?function(F){return d(F,k[S][0])>0}:function(F){return d(F,k[S][0])>=0};function B(F){return!L(F)&&!N(F)}var j=L,U=new this.Collection(this,function(){return Un(k[0][0],k[k.length-1][1],!w,!A)});return U._ondirectionchange=function(F){F==="next"?(j=L,P=f):(j=N,P=d),k.sort(q)},U._addAlgorithm(function(F,X,te){for(var J=F.key;j(J);)if(++S,S===k.length)return X(te),!1;return B(J)?!0:(o._cmp(J,k[S][1])===0||o._cmp(J,k[S][0])===0||X(function(){P===f?F.continue(k[S][0]):F.continue(k[S][1])}),!1)}),U},t.prototype.startsWithAnyOf=function(){var n=Ae.apply(oe,arguments);return n.every(function(a){return typeof a=="string"})?n.length===0?Kr(this):this.inAnyRange(n.map(function(a){return[a,a+dr]})):Wt(this,"startsWithAnyOf() only works with strings")},t})();function Ic(t){return ai(eu.prototype,function(a,o,u){if(this.db=t,this._ctx={table:a,index:o===":id"?null:o,or:u},this._cmp=this._ascending=Re,this._descending=function(f,d){return Re(d,f)},this._max=function(f,d){return Re(f,d)>0?f:d},this._min=function(f,d){return Re(f,d)<0?f:d},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new ie.MissingAPI})}function fn(t){return Je(function(n){return oi(n),t(n.target.error),!1})}function oi(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var si="storagemutated",po="x-storagemutated-1",Hn=ii(null,si),Sc=(function(){function t(){}return t.prototype._lock=function(){return ee(!le.global),++this._reculock,this._reculock===1&&!le.global&&(le.lockOwnerFor=this),this},t.prototype._unlock=function(){if(ee(!le.global),--this._reculock===0)for(le.global||(le.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{fr(n[1],n[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&le.lockOwnerFor!==this},t.prototype.create=function(n){var a=this;if(!this.mode)return this;var o=this.db.idbdb,u=this.db._state.dbOpenError;if(ee(!this.idbtrans),!n&&!o)switch(u&&u.name){case"DatabaseClosedError":throw new ie.DatabaseClosed(u);case"MissingAPIError":throw new ie.MissingAPI(u.message,u);default:throw new ie.OpenFailed(u)}if(!this.active)throw new ie.TransactionInactive;return ee(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=Je(function(f){oi(f),a._reject(n.error)}),n.onabort=Je(function(f){oi(f),a.active&&a._reject(new ie.Abort(n.error)),a.active=!1,a.on("abort").fire(f)}),n.oncomplete=Je(function(){a.active=!1,a._resolve(),"mutatedParts"in n&&Hn.storagemutated.fire(n.mutatedParts)}),this},t.prototype._promise=function(n,a,o){var u=this;if(n==="readwrite"&&this.mode!=="readwrite")return ut(new ie.ReadOnly("Transaction is readonly"));if(!this.active)return ut(new ie.TransactionInactive);if(this._locked())return new $(function(d,v){u._blockedFuncs.push([function(){u._promise(n,a,o).then(d,v)},le])});if(o)return jn(function(){var d=new $(function(v,y){u._lock();var w=a(v,y,u);w&&w.then&&w.then(v,y)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var f=new $(function(d,v){var y=a(d,v,u);y&&y.then&&y.then(d,v)});return f._lib=!0,f},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(n){var a=this._root(),o=$.resolve(n);if(a._waitingFor)a._waitingFor=a._waitingFor.then(function(){return o});else{a._waitingFor=o,a._waitingQueue=[];var u=a.idbtrans.objectStore(a.storeNames[0]);(function d(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(u.get(-1/0).onsuccess=d)})()}var f=a._waitingFor;return new $(function(d,v){o.then(function(y){return a._waitingQueue.push(Je(d.bind(null,y)))},function(y){return a._waitingQueue.push(Je(v.bind(null,y)))}).finally(function(){a._waitingFor===f&&(a._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ie.Abort))},t.prototype.table=function(n){var a=this._memoizedTables||(this._memoizedTables={});if(_(a,n))return a[n];var o=this.schema[n];if(!o)throw new ie.NotFound("Table "+n+" not part of transaction");var u=new this.db.Table(n,o,this);return u.core=this.db.core.table(n),a[n]=u,u},t})();function Cc(t){return ai(Sc.prototype,function(a,o,u,f,d){var v=this;a!=="readonly"&&o.forEach(function(y){var w,A=(w=u[y])===null||w===void 0?void 0:w.yProps;A&&(o=o.concat(A.map(function(x){return x.updatesTable})))}),this.db=t,this.mode=a,this.storeNames=o,this.schema=u,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=ii(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new $(function(y,w){v._resolve=y,v._reject=w}),this._completion.then(function(){v.active=!1,v.on.complete.fire()},function(y){var w=v.active;return v.active=!1,v.on.error.fire(y),v.parent?v.parent._reject(y):w&&v.idbtrans&&v.idbtrans.abort(),ut(y)})})}function mo(t,n,a,o,u,f,d,v){return{name:t,keyPath:n,unique:a,multi:o,auto:u,compound:f,src:(a&&!d?"&":"")+(o?"*":"")+(u?"++":"")+tu(n),type:v}}function tu(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function yo(t,n,a){return{name:t,primKey:n,indexes:a,mappedClass:null,idxByName:ve(a,function(o){return[o.name,o]})}}function Oc(t){return t.length===1?t[0]:t}var ui=function(t){try{return t.only([[]]),ui=function(){return[[]]},[[]]}catch{return ui=function(){return dr},dr}};function go(t){return t==null?function(){}:typeof t=="string"?Lc(t):function(n){return se(n,t)}}function Lc(t){var n=t.split(".");return n.length===1?function(a){return a[t]}:function(a){return se(a,t)}}function nu(t){return[].slice.call(t)}var Rc=0;function li(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Pc(t,n,a){function o(x,P){var q=nu(x.objectStoreNames);return{schema:{name:x.name,tables:q.map(function(k){return P.objectStore(k)}).map(function(k){var S=k.keyPath,L=k.autoIncrement,N=g(S),B=S==null,j={},U={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:B,compound:N,keyPath:S,autoIncrement:L,unique:!0,extractKey:go(S)},indexes:nu(k.indexNames).map(function(F){return k.index(F)}).map(function(F){var X=F.name,te=F.unique,J=F.multiEntry,pe=F.keyPath,Se=g(pe),ne={name:X,compound:Se,keyPath:pe,unique:te,multiEntry:J,extractKey:go(pe)};return j[li(pe)]=ne,ne}),getIndexByKeyPath:function(F){return j[li(F)]}};return j[":id"]=U.primaryKey,S!=null&&(j[li(S)]=U.primaryKey),U})},hasGetAll:q.length>0&&"getAll"in P.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function u(x){if(x.type===3)return null;if(x.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var P=x.lower,q=x.upper,k=x.lowerOpen,S=x.upperOpen,L=P===void 0?q===void 0?null:n.upperBound(q,!!S):q===void 0?n.lowerBound(P,!!k):n.bound(P,q,!!k,!!S);return L}function f(x){var P=x.name;function q(L){var N=L.trans,B=L.type,j=L.keys,U=L.values,F=L.range;return new Promise(function(X,te){X=Je(X);var J=N.objectStore(P),pe=J.keyPath==null,Se=B==="put"||B==="add";if(!Se&&B!=="delete"&&B!=="deleteRange")throw new Error("Invalid operation type: "+B);var ne=(j||U||{length:1}).length;if(j&&U&&j.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(ne===0)return X({numFailures:0,failures:{},results:[],lastResult:void 0});var De,ge=[],Me=[],de=0,it=function(hn){++de,oi(hn)};if(B==="deleteRange"){if(F.type===4)return X({numFailures:de,failures:Me,results:[],lastResult:void 0});F.type===3?ge.push(De=J.clear()):ge.push(De=J.delete(u(F)))}else{var It=Se?pe?[U,j]:[U,null]:[j,null],dn=It[0],Ft=It[1];if(Se)for(var Qt=0;Qt<ne;++Qt)ge.push(De=Ft&&Ft[Qt]!==void 0?J[B](dn[Qt],Ft[Qt]):J[B](dn[Qt])),De.onerror=it;else for(var Qt=0;Qt<ne;++Qt)ge.push(De=J[B](dn[Qt])),De.onerror=it}var Yn=function(hn){var di=hn.target.result;ge.forEach(function(an,ua){return an.error!=null&&(Me[ua]=an.error)}),X({numFailures:de,failures:Me,results:B==="delete"?j:ge.map(function(an){return an.result}),lastResult:di})};De.onerror=function(hn){it(hn),Yn(hn)},De.onsuccess=Yn})}function k(L){var N=L.trans,B=L.values,j=L.query,U=L.reverse,F=L.unique;return new Promise(function(X,te){X=Je(X);var J=j.index,pe=j.range,Se=N.objectStore(P),ne=J.isPrimaryKey?Se:Se.index(J.name),De=U?F?"prevunique":"prev":F?"nextunique":"next",ge=B||!("openKeyCursor"in ne)?ne.openCursor(u(pe),De):ne.openKeyCursor(u(pe),De);ge.onerror=fn(te),ge.onsuccess=Je(function(Me){var de=ge.result;if(!de){X(null);return}de.___id=++Rc,de.done=!1;var it=de.continue.bind(de),It=de.continuePrimaryKey;It&&(It=It.bind(de));var dn=de.advance.bind(de),Ft=function(){throw new Error("Cursor not started")},Qt=function(){throw new Error("Cursor not stopped")};de.trans=N,de.stop=de.continue=de.continuePrimaryKey=de.advance=Ft,de.fail=Je(te),de.next=function(){var Yn=this,hn=1;return this.start(function(){return hn--?Yn.continue():Yn.stop()}).then(function(){return Yn})},de.start=function(Yn){var hn=new Promise(function(an,ua){an=Je(an),ge.onerror=fn(ua),de.fail=ua,de.stop=function(Ef){de.stop=de.continue=de.continuePrimaryKey=de.advance=Qt,an(Ef)}}),di=function(){if(ge.result)try{Yn()}catch(an){de.fail(an)}else de.done=!0,de.start=function(){throw new Error("Cursor behind last entry")},de.stop()};return ge.onsuccess=Je(function(an){ge.onsuccess=di,di()}),de.continue=it,de.continuePrimaryKey=It,de.advance=dn,di(),hn},X(de)},te)})}function S(L){return function(N){return new Promise(function(B,j){B=Je(B);var U=N.trans,F=N.values,X=N.limit,te=N.query,J=X===1/0?void 0:X,pe=te.index,Se=te.range,ne=U.objectStore(P),De=pe.isPrimaryKey?ne:ne.index(pe.name),ge=u(Se);if(X===0)return B({result:[]});if(L){var Me=F?De.getAll(ge,J):De.getAllKeys(ge,J);Me.onsuccess=function(dn){return B({result:dn.target.result})},Me.onerror=fn(j)}else{var de=0,it=F||!("openKeyCursor"in De)?De.openCursor(ge):De.openKeyCursor(ge),It=[];it.onsuccess=function(dn){var Ft=it.result;if(!Ft)return B({result:It});if(It.push(F?Ft.value:Ft.primaryKey),++de===X)return B({result:It});Ft.continue()},it.onerror=fn(j)}})}}return{name:P,schema:x,mutate:q,getMany:function(L){var N=L.trans,B=L.keys;return new Promise(function(j,U){j=Je(j);for(var F=N.objectStore(P),X=B.length,te=new Array(X),J=0,pe=0,Se,ne=function(de){var it=de.target;(te[it._pos]=it.result)!=null,++pe===J&&j(te)},De=fn(U),ge=0;ge<X;++ge){var Me=B[ge];Me!=null&&(Se=F.get(B[ge]),Se._pos=ge,Se.onsuccess=ne,Se.onerror=De,++J)}J===0&&j(te)})},get:function(L){var N=L.trans,B=L.key;return new Promise(function(j,U){j=Je(j);var F=N.objectStore(P),X=F.get(B);X.onsuccess=function(te){return j(te.target.result)},X.onerror=fn(U)})},query:S(y),openCursor:k,count:function(L){var N=L.query,B=L.trans,j=N.index,U=N.range;return new Promise(function(F,X){var te=B.objectStore(P),J=j.isPrimaryKey?te:te.index(j.name),pe=u(U),Se=pe?J.count(pe):J.count();Se.onsuccess=Je(function(ne){return F(ne.target.result)}),Se.onerror=fn(X)})}}}var d=o(t,a),v=d.schema,y=d.hasGetAll,w=v.tables.map(function(x){return f(x)}),A={};return w.forEach(function(x){return A[x.name]=x}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(x){var P=A[x];if(!P)throw new Error("Table '".concat(x,"' not found"));return A[x]},MIN_KEY:-1/0,MAX_KEY:ui(n),schema:v}}function Mc(t,n){return n.reduce(function(a,o){var u=o.create;return l(l({},a),u(a))},t)}function Nc(t,n,a,o){var u=a.IDBKeyRange;a.indexedDB;var f=Mc(Pc(n,u,o),t.dbcore);return{dbcore:f}}function Xi(t,n){var a=n.db,o=Nc(t._middlewares,a,t._deps,n);t.core=o.dbcore,t.tables.forEach(function(u){var f=u.name;t.core.schema.tables.some(function(d){return d.name===f})&&(u.core=t.core.table(f),t[f]instanceof t.Table&&(t[f].core=u.core))})}function Ji(t,n,a,o){a.forEach(function(u){var f=o[u];n.forEach(function(d){var v=Y(d,u);(!v||"value"in v&&v.value===void 0)&&(d===t.Transaction.prototype||d instanceof t.Transaction?M(d,u,{get:function(){return this.table(u)},set:function(y){C(this,u,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new t.Table(u,f))})})}function _o(t,n){n.forEach(function(a){for(var o in a)a[o]instanceof t.Table&&delete a[o]})}function Kc(t,n){return t._cfg.version-n._cfg.version}function Fc(t,n,a,o){var u=t._dbSchema;a.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=yo("$meta",iu("")[0],[]),t._storeNames.push("$meta"));var f=t._createTransaction("readwrite",t._storeNames,u);f.create(a),f._completion.catch(o);var d=f._reject.bind(f),v=le.transless||le;jn(function(){if(le.trans=f,le.transless=v,n===0)m(u).forEach(function(y){wo(a,y,u[y].primKey,u[y].indexes)}),Xi(t,a),$.follow(function(){return t.on.populate.fire(f)}).catch(d);else return Xi(t,a),jc(t,f,n).then(function(y){return zc(t,y,f,a)}).catch(d)})}function Bc(t,n){ru(t._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var a=ea(t,t.idbdb,n);ta(t,t._dbSchema,n);for(var o=bo(a,t._dbSchema),u=function(w){if(w.change.length||w.recreate)return console.warn("Unable to patch indexes of table ".concat(w.name," because it has changes on the type of index or primary key.")),{value:void 0};var A=n.objectStore(w.name);w.add.forEach(function(x){xe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(w.name,".").concat(x.src)),$i(A,x)})},f=0,d=o.change;f<d.length;f++){var v=d[f],y=u(v);if(typeof y=="object")return y.value}}function jc(t,n,a){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(o){return o??a}):$.resolve(a)}function zc(t,n,a,o){var u=[],f=t._versions,d=t._dbSchema=ea(t,t.idbdb,o),v=f.filter(function(w){return w._cfg.version>=n});if(v.length===0)return $.resolve();v.forEach(function(w){u.push(function(){var A=d,x=w._cfg.dbschema;ta(t,A,o),ta(t,x,o),d=t._dbSchema=x;var P=bo(A,x);P.add.forEach(function(B){wo(o,B[0],B[1].primKey,B[1].indexes)}),P.change.forEach(function(B){if(B.recreate)throw new ie.Upgrade("Not yet support for changing primary key");var j=o.objectStore(B.name);B.add.forEach(function(U){return $i(j,U)}),B.change.forEach(function(U){j.deleteIndex(U.name),$i(j,U)}),B.del.forEach(function(U){return j.deleteIndex(U)})});var q=w._cfg.contentUpgrade;if(q&&w._cfg.version>n){Xi(t,o),a._memoizedTables={};var k=re(x);P.del.forEach(function(B){k[B]=A[B]}),_o(t,[t.Transaction.prototype]),Ji(t,[t.Transaction.prototype],m(k),k),a.schema=k;var S=Pe(q);S&&Pr();var L,N=$.follow(function(){if(L=q(a),L&&S){var B=zn.bind(null,null);L.then(B,B)}});return L&&typeof L.then=="function"?$.resolve(L):N.then(function(){return L})}}),u.push(function(A){var x=w._cfg.dbschema;Gc(x,A),_o(t,[t.Transaction.prototype]),Ji(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),a.schema=t._dbSchema}),u.push(function(A){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===w._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(x){return x!=="$meta"})):A.objectStore("$meta").put(w._cfg.version,"version"))})});function y(){return u.length?$.resolve(u.shift()(a.idbtrans)).then(y):$.resolve()}return y().then(function(){ru(d,o)})}function bo(t,n){var a={del:[],add:[],change:[]},o;for(o in t)n[o]||a.del.push(o);for(o in n){var u=t[o],f=n[o];if(!u)a.add.push([o,f]);else{var d={name:o,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||u.primKey.auto!==f.primKey.auto)d.recreate=!0,a.change.push(d);else{var v=u.idxByName,y=f.idxByName,w=void 0;for(w in v)y[w]||d.del.push(w);for(w in y){var A=v[w],x=y[w];A?A.src!==x.src&&d.change.push(x):d.add.push(x)}(d.del.length>0||d.add.length>0||d.change.length>0)&&a.change.push(d)}}}return a}function wo(t,n,a,o){var u=t.db.createObjectStore(n,a.keyPath?{keyPath:a.keyPath,autoIncrement:a.auto}:{autoIncrement:a.auto});return o.forEach(function(f){return $i(u,f)}),u}function ru(t,n){m(t).forEach(function(a){n.db.objectStoreNames.contains(a)||(xe&&console.debug("Dexie: Creating missing table",a),wo(n,a,t[a].primKey,t[a].indexes))})}function Gc(t,n){[].slice.call(n.db.objectStoreNames).forEach(function(a){return t[a]==null&&n.db.deleteObjectStore(a)})}function $i(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function ea(t,n,a){var o={},u=z(n.objectStoreNames,0);return u.forEach(function(f){for(var d=a.objectStore(f),v=d.keyPath,y=mo(tu(v),v||"",!0,!1,!!d.autoIncrement,v&&typeof v!="string",!0),w=[],A=0;A<d.indexNames.length;++A){var x=d.index(d.indexNames[A]);v=x.keyPath;var P=mo(x.name,v,!!x.unique,!!x.multiEntry,!1,v&&typeof v!="string",!1);w.push(P)}o[f]=yo(f,y,w)}),o}function Uc(t,n,a){t.verno=n.version/10;var o=t._dbSchema=ea(t,n,a);t._storeNames=z(n.objectStoreNames,0),Ji(t,[t._allTables],m(o),o)}function Hc(t,n){var a=ea(t,t.idbdb,n),o=bo(a,t._dbSchema);return!(o.add.length||o.change.some(function(u){return u.add.length||u.change.length}))}function ta(t,n,a){for(var o=a.db.objectStoreNames,u=0;u<o.length;++u){var f=o[u],d=a.objectStore(f);t._hasGetAll="getAll"in d;for(var v=0;v<d.indexNames.length;++v){var y=d.indexNames[v],w=d.index(y).keyPath,A=typeof w=="string"?w:"["+z(w).join("+")+"]";if(n[f]){var x=n[f].idxByName[A];x&&(x.name=y,delete n[f].idxByName[A],n[f].idxByName[y]=x)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function iu(t){return t.split(",").map(function(n,a){var o,u=n.split(":"),f=(o=u[1])===null||o===void 0?void 0:o.trim();n=u[0].trim();var d=n.replace(/([&*]|\+\+)/g,""),v=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return mo(d,v||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),g(v),a===0,f)})}var Vc=(function(){function t(){}return t.prototype._createTableSchema=function(n,a,o){return yo(n,a,o)},t.prototype._parseIndexSyntax=function(n){return iu(n)},t.prototype._parseStoresSpec=function(n,a){var o=this;m(n).forEach(function(u){if(n[u]!==null){var f=o._parseIndexSyntax(n[u]),d=f.shift();if(!d)throw new ie.Schema("Invalid schema for table "+u+": "+n[u]);if(d.unique=!0,d.multi)throw new ie.Schema("Primary key cannot be multiEntry*");f.forEach(function(y){if(y.auto)throw new ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!y.keyPath)throw new ie.Schema("Index must have a name and cannot be an empty string")});var v=o._createTableSchema(u,d,f);a[u]=v}})},t.prototype.stores=function(n){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,n):n;var o=a._versions,u={},f={};return o.forEach(function(d){b(u,d._cfg.storesSource),f=d._cfg.dbschema={},d._parseStoresSpec(u,f)}),a._dbSchema=f,_o(a,[a._allTables,a,a.Transaction.prototype]),Ji(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],m(f),f),a._storeNames=m(f),this},t.prototype.upgrade=function(n){return this._cfg.contentUpgrade=Xe(this._cfg.contentUpgrade||Ne,n),this},t})();function Wc(t){return ai(Vc.prototype,function(a){this.db=t,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Eo(t,n){var a=t._dbNamesDB;return a||(a=t._dbNamesDB=new An(Vi,{addons:[],indexedDB:t,IDBKeyRange:n}),a.version(1).stores({dbnames:"name"})),a.table("dbnames")}function xo(t){return t&&typeof t.databases=="function"}function Yc(t){var n=t.indexedDB,a=t.IDBKeyRange;return xo(n)?Promise.resolve(n.databases()).then(function(o){return o.map(function(u){return u.name}).filter(function(u){return u!==Vi})}):Eo(n,a).toCollection().primaryKeys()}function Zc(t,n){var a=t.indexedDB,o=t.IDBKeyRange;!xo(a)&&n!==Vi&&Eo(a,o).put({name:n}).catch(Ne)}function qc(t,n){var a=t.indexedDB,o=t.IDBKeyRange;!xo(a)&&n!==Vi&&Eo(a,o).delete(n).catch(Ne)}function To(t){return jn(function(){return le.letThrough=!0,t()})}function Qc(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(a){var o=function(){return indexedDB.databases().finally(a)};n=setInterval(o,100),o()}).finally(function(){return clearInterval(n)})}var ko;function Ao(t){return!("from"in t)}var Dt=function(t,n){if(this)b(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0});else{var a=new Dt;return t&&"d"in t&&b(a,t),a}};T(Dt.prototype,(ko={add:function(t){return fi(this,t),this},addKey:function(t){return ci(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(a){return ci(n,a,a)}),this},hasKey:function(t){var n=na(this).next(t).value;return n&&Re(n.from,t)<=0&&Re(n.to,t)>=0}},ko[mt]=function(){return na(this)},ko));function ci(t,n,a){var o=Re(n,a);if(!isNaN(o)){if(o>0)throw RangeError();if(Ao(t))return b(t,{from:n,to:a,d:1});var u=t.l,f=t.r;if(Re(a,t.from)<0)return u?ci(u,n,a):t.l={from:n,to:a,d:1,l:null,r:null},ou(t);if(Re(n,t.to)>0)return f?ci(f,n,a):t.r={from:n,to:a,d:1,l:null,r:null},ou(t);Re(n,t.from)<0&&(t.from=n,t.l=null,t.d=f?f.d+1:1),Re(a,t.to)>0&&(t.to=a,t.r=null,t.d=t.l?t.l.d+1:1);var d=!t.r;u&&!t.l&&fi(t,u),f&&d&&fi(t,f)}}function fi(t,n){function a(o,u){var f=u.from,d=u.to,v=u.l,y=u.r;ci(o,f,d),v&&a(o,v),y&&a(o,y)}Ao(n)||a(t,n)}function au(t,n){var a=na(n),o=a.next();if(o.done)return!1;for(var u=o.value,f=na(t),d=f.next(u.from),v=d.value;!o.done&&!d.done;){if(Re(v.from,u.to)<=0&&Re(v.to,u.from)>=0)return!0;Re(u.from,v.from)<0?u=(o=a.next(v.from)).value:v=(d=f.next(u.from)).value}return!1}function na(t){var n=Ao(t)?null:{s:0,n:t};return{next:function(a){for(var o=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&Re(a,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||Re(a,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function ou(t){var n,a,o=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((a=t.l)===null||a===void 0?void 0:a.d)||0),u=o>1?"r":o<-1?"l":"";if(u){var f=u==="r"?"l":"r",d=l({},t),v=t[u];t.from=v.from,t.to=v.to,t[u]=v[u],d[u]=v[f],t[f]=d,d.d=su(d)}t.d=su(t)}function su(t){var n=t.r,a=t.l;return(n?a?Math.max(n.d,a.d):n.d:a?a.d:0)+1}function ra(t,n){return m(n).forEach(function(a){t[a]?fi(t[a],n[a]):t[a]=ye(n[a])}),t}function Do(t,n){return t.all||n.all||Object.keys(t).some(function(a){return n[a]&&au(n[a],t[a])})}var vr={},Io={},So=!1;function ia(t,n){ra(Io,t),So||(So=!0,setTimeout(function(){So=!1;var a=Io;Io={},Co(a,!1)},0))}function Co(t,n){n===void 0&&(n=!1);var a=new Set;if(t.all)for(var o=0,u=Object.values(vr);o<u.length;o++){var f=u[o];uu(f,t,a,n)}else for(var d in t){var v=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(v){var y=v[1],w=v[2],f=vr["idb://".concat(y,"/").concat(w)];f&&uu(f,t,a,n)}}a.forEach(function(A){return A()})}function uu(t,n,a,o){for(var u=[],f=0,d=Object.entries(t.queries.query);f<d.length;f++){for(var v=d[f],y=v[0],w=v[1],A=[],x=0,P=w;x<P.length;x++){var q=P[x];Do(n,q.obsSet)?q.subscribers.forEach(function(N){return a.add(N)}):o&&A.push(q)}o&&u.push([y,A])}if(o)for(var k=0,S=u;k<S.length;k++){var L=S[k],y=L[0],A=L[1];t.queries.query[y]=A}}function Xc(t){var n=t._state,a=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?ut(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,u=Math.round(t.verno*10),f=!1;function d(){if(n.openCanceller!==o)throw new ie.DatabaseClosed("db.open() was cancelled")}var v=n.dbReadyResolve,y=null,w=!1,A=function(){return new $(function(x,P){if(d(),!a)throw new ie.MissingAPI;var q=t.name,k=n.autoSchema||!u?a.open(q):a.open(q,u);if(!k)throw new ie.MissingAPI;k.onerror=fn(P),k.onblocked=Je(t._fireOnBlocked),k.onupgradeneeded=Je(function(S){if(y=k.transaction,n.autoSchema&&!t._options.allowEmptyDB){k.onerror=oi,y.abort(),k.result.close();var L=a.deleteDatabase(q);L.onsuccess=L.onerror=Je(function(){P(new ie.NoSuchDatabase("Database ".concat(q," doesnt exist")))})}else{y.onerror=fn(P);var N=S.oldVersion>Math.pow(2,62)?0:S.oldVersion;w=N<1,t.idbdb=k.result,f&&Bc(t,y),Fc(t,N/10,y,P)}},P),k.onsuccess=Je(function(){y=null;var S=t.idbdb=k.result,L=z(S.objectStoreNames);if(L.length>0)try{var N=S.transaction(Oc(L),"readonly");if(n.autoSchema)Uc(t,S,N);else if(ta(t,t._dbSchema,N),!Hc(t,N)&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),S.close(),u=S.version+1,f=!0,x(A());Xi(t,N)}catch{}Mr.push(t),S.onversionchange=Je(function(B){n.vcFired=!0,t.on("versionchange").fire(B)}),S.onclose=Je(function(){t.close({disableAutoOpen:!1})}),w&&Zc(t._deps,q),x()},P)}).catch(function(x){switch(x?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),A();break;case"VersionError":if(u>0)return u=0,A();break}return $.reject(x)})};return $.race([o,(typeof navigator>"u"?$.resolve():Qc()).then(A)]).then(function(){return d(),n.onReadyBeingFired=[],$.resolve(To(function(){return t.on.ready.fire(t.vip)})).then(function x(){if(n.onReadyBeingFired.length>0){var P=n.onReadyBeingFired.reduce(Xe,Ne);return n.onReadyBeingFired=[],$.resolve(To(function(){return P(t.vip)})).then(x)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(x){n.dbOpenError=x;try{y&&y.abort()}catch{}return o===n.openCanceller&&t._close(),ut(x)}).finally(function(){n.openComplete=!0,v()}).then(function(){if(w){var x={};t.tables.forEach(function(P){P.schema.indexes.forEach(function(q){q.name&&(x["idb://".concat(t.name,"/").concat(P.name,"/").concat(q.name)]=new Dt(-1/0,[[[]]]))}),x["idb://".concat(t.name,"/").concat(P.name,"/")]=x["idb://".concat(t.name,"/").concat(P.name,"/:dels")]=new Dt(-1/0,[[[]]])}),Hn(si).fire(x),Co(x,!0)}return t})}function Oo(t){var n=function(d){return t.next(d)},a=function(d){return t.throw(d)},o=f(n),u=f(a);function f(d){return function(v){var y=d(v),w=y.value;return y.done?w:!w||typeof w.then!="function"?g(w)?Promise.all(w).then(o,u):o(w):w.then(o,u)}}return f(n)()}function Jc(t,n,a){var o=arguments.length;if(o<2)throw new ie.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];a=u.pop();var f=Fe(u);return[t,f,a]}function lu(t,n,a,o,u){return $.resolve().then(function(){var f=le.transless||le,d=t._createTransaction(n,a,t._dbSchema,o);d.explicit=!0;var v={trans:d,transless:f};if(o)d.idbtrans=o.idbtrans;else try{d.create(),d.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(x){return x.name===Pt.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return lu(t,n,a,null,u)})):ut(x)}var y=Pe(u);y&&Pr();var w,A=$.follow(function(){if(w=u.call(d,d),w)if(y){var x=zn.bind(null,null);w.then(x,x)}else typeof w.next=="function"&&typeof w.throw=="function"&&(w=Oo(w))},v);return(w&&typeof w.then=="function"?$.resolve(w).then(function(x){return d.active?x:ut(new ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return w})).then(function(x){return o&&d._resolve(),d._completion.then(function(){return x})}).catch(function(x){return d._reject(x),ut(x)})})}function aa(t,n,a){for(var o=g(t)?t.slice():[t],u=0;u<a;++u)o.push(n);return o}function $c(t){return l(l({},t),{table:function(n){var a=t.table(n),o=a.schema,u={},f=[];function d(S,L,N){var B=li(S),j=u[B]=u[B]||[],U=S==null?0:typeof S=="string"?1:S.length,F=L>0,X=l(l({},N),{name:F?"".concat(B,"(virtual-from:").concat(N.name,")"):N.name,lowLevelIndex:N,isVirtual:F,keyTail:L,keyLength:U,extractKey:go(S),unique:!F&&N.unique});if(j.push(X),X.isPrimaryKey||f.push(X),U>1){var te=U===2?S[0]:S.slice(0,U-1);d(te,L+1,N)}return j.sort(function(J,pe){return J.keyTail-pe.keyTail}),X}var v=d(o.primaryKey.keyPath,0,o.primaryKey);u[":id"]=[v];for(var y=0,w=o.indexes;y<w.length;y++){var A=w[y];d(A.keyPath,0,A)}function x(S){var L=u[li(S)];return L&&L[0]}function P(S,L){return{type:S.type===1?2:S.type,lower:aa(S.lower,S.lowerOpen?t.MAX_KEY:t.MIN_KEY,L),lowerOpen:!0,upper:aa(S.upper,S.upperOpen?t.MIN_KEY:t.MAX_KEY,L),upperOpen:!0}}function q(S){var L=S.query.index;return L.isVirtual?l(l({},S),{query:{index:L.lowLevelIndex,range:P(S.query.range,L.keyTail)}}):S}var k=l(l({},a),{schema:l(l({},o),{primaryKey:v,indexes:f,getIndexByKeyPath:x}),count:function(S){return a.count(q(S))},query:function(S){return a.query(q(S))},openCursor:function(S){var L=S.query.index,N=L.keyTail,B=L.isVirtual,j=L.keyLength;if(!B)return a.openCursor(S);function U(F){function X(J){J!=null?F.continue(aa(J,S.reverse?t.MAX_KEY:t.MIN_KEY,N)):S.unique?F.continue(F.key.slice(0,j).concat(S.reverse?t.MIN_KEY:t.MAX_KEY,N)):F.continue()}var te=Object.create(F,{continue:{value:X},continuePrimaryKey:{value:function(J,pe){F.continuePrimaryKey(aa(J,t.MAX_KEY,N),pe)}},primaryKey:{get:function(){return F.primaryKey}},key:{get:function(){var J=F.key;return j===1?J[0]:J.slice(0,j)}},value:{get:function(){return F.value}}});return te}return a.openCursor(q(S)).then(function(F){return F&&U(F)})}});return k}})}var ef={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:$c};function Lo(t,n,a,o){return a=a||{},o=o||"",m(t).forEach(function(u){if(!_(n,u))a[o+u]=void 0;else{var f=t[u],d=n[u];if(typeof f=="object"&&typeof d=="object"&&f&&d){var v=ot(f),y=ot(d);v!==y?a[o+u]=n[u]:v==="Object"?Lo(f,d,a,o+u+"."):f!==d&&(a[o+u]=n[u])}else f!==d&&(a[o+u]=n[u])}}),m(n).forEach(function(u){_(t,u)||(a[o+u]=n[u])}),a}function Ro(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var tf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return l(l({},t),{table:function(n){var a=t.table(n),o=a.schema.primaryKey,u=l(l({},a),{mutate:function(f){var d=le.trans,v=d.table(n).hook,y=v.deleting,w=v.creating,A=v.updating;switch(f.type){case"add":if(w.fire===Ne)break;return d._promise("readwrite",function(){return x(f)},!0);case"put":if(w.fire===Ne&&A.fire===Ne)break;return d._promise("readwrite",function(){return x(f)},!0);case"delete":if(y.fire===Ne)break;return d._promise("readwrite",function(){return x(f)},!0);case"deleteRange":if(y.fire===Ne)break;return d._promise("readwrite",function(){return P(f)},!0)}return a.mutate(f);function x(k){var S=le.trans,L=k.keys||Ro(o,k);if(!L)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?l(l({},k),{keys:L}):l({},k),k.type!=="delete"&&(k.values=c([],k.values)),k.keys&&(k.keys=c([],k.keys)),nf(a,k,L).then(function(N){var B=L.map(function(j,U){var F=N[U],X={onerror:null,onsuccess:null};if(k.type==="delete")y.fire.call(X,j,F,S);else if(k.type==="add"||F===void 0){var te=w.fire.call(X,j,k.values[U],S);j==null&&te!=null&&(j=te,k.keys[U]=j,o.outbound||be(k.values[U],o.keyPath,j))}else{var J=Lo(F,k.values[U]),pe=A.fire.call(X,J,j,F,S);if(pe){var Se=k.values[U];Object.keys(pe).forEach(function(ne){_(Se,ne)?Se[ne]=pe[ne]:be(Se,ne,pe[ne])})}}return X});return a.mutate(k).then(function(j){for(var U=j.failures,F=j.results,X=j.numFailures,te=j.lastResult,J=0;J<L.length;++J){var pe=F?F[J]:L[J],Se=B[J];pe==null?Se.onerror&&Se.onerror(U[J]):Se.onsuccess&&Se.onsuccess(k.type==="put"&&N[J]?k.values[J]:pe)}return{failures:U,results:F,numFailures:X,lastResult:te}}).catch(function(j){return B.forEach(function(U){return U.onerror&&U.onerror(j)}),Promise.reject(j)})})}function P(k){return q(k.trans,k.range,1e4)}function q(k,S,L){return a.query({trans:k,values:!1,query:{index:o,range:S},limit:L}).then(function(N){var B=N.result;return x({type:"delete",keys:B,trans:k}).then(function(j){return j.numFailures>0?Promise.reject(j.failures[0]):B.length<L?{failures:[],numFailures:0,lastResult:void 0}:q(k,l(l({},S),{lower:B[B.length-1],lowerOpen:!0}),L)})})}}});return u}})}};function nf(t,n,a){return n.type==="add"?Promise.resolve([]):t.getMany({trans:n.trans,keys:a,cache:"immutable"})}function cu(t,n,a){try{if(!n||n.keys.length<t.length)return null;for(var o=[],u=0,f=0;u<n.keys.length&&f<t.length;++u)Re(n.keys[u],t[f])===0&&(o.push(a?Ye(n.values[u]):n.values[u]),++f);return o.length===t.length?o:null}catch{return null}}var rf={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var a=t.table(n);return l(l({},a),{getMany:function(o){if(!o.cache)return a.getMany(o);var u=cu(o.keys,o.trans._cache,o.cache==="clone");return u?$.resolve(u):a.getMany(o).then(function(f){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?Ye(f):f},f})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),a.mutate(o)}})}}}};function fu(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function du(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var af={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,a=new Dt(t.MIN_KEY,t.MAX_KEY);return l(l({},t),{transaction:function(o,u,f){if(le.subscr&&u!=="readonly")throw new ie.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(le.querier));return t.transaction(o,u,f)},table:function(o){var u=t.table(o),f=u.schema,d=f.primaryKey,v=f.indexes,y=d.extractKey,w=d.outbound,A=d.autoIncrement&&v.filter(function(k){return k.compound&&k.keyPath.includes(d.keyPath)}),x=l(l({},u),{mutate:function(k){var S,L,N=k.trans,B=k.mutatedParts||(k.mutatedParts={}),j=function(ge){var Me="idb://".concat(n,"/").concat(o,"/").concat(ge);return B[Me]||(B[Me]=new Dt)},U=j(""),F=j(":dels"),X=k.type,te=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[Ro(d,k).filter(function(ge){return ge}),k.values]:[],J=te[0],pe=te[1],Se=k.trans._cache;if(g(J)){U.addKeys(J);var ne=X==="delete"||J.length===pe.length?cu(J,Se):null;ne||F.addKeys(J),(ne||pe)&&of(j,f,ne,pe)}else if(J){var De={from:(S=J.lower)!==null&&S!==void 0?S:t.MIN_KEY,to:(L=J.upper)!==null&&L!==void 0?L:t.MAX_KEY};F.add(De),U.add(De)}else U.add(a),F.add(a),f.indexes.forEach(function(ge){return j(ge.name).add(a)});return u.mutate(k).then(function(ge){return J&&(k.type==="add"||k.type==="put")&&(U.addKeys(ge.results),A&&A.forEach(function(Me){for(var de=k.values.map(function(Ft){return Me.extractKey(Ft)}),it=Me.keyPath.findIndex(function(Ft){return Ft===d.keyPath}),It=0,dn=ge.results.length;It<dn;++It)de[It][it]=ge.results[It];j(Me.name).addKeys(de)})),N.mutatedParts=ra(N.mutatedParts||{},B),ge})}}),P=function(k){var S,L,N=k.query,B=N.index,j=N.range;return[B,new Dt((S=j.lower)!==null&&S!==void 0?S:t.MIN_KEY,(L=j.upper)!==null&&L!==void 0?L:t.MAX_KEY)]},q={get:function(k){return[d,new Dt(k.key)]},getMany:function(k){return[d,new Dt().addKeys(k.keys)]},count:P,query:P,openCursor:P};return m(q).forEach(function(k){x[k]=function(S){var L=le.subscr,N=!!L,B=fu(le,u)&&du(k,S),j=B?S.obsSet={}:L;if(N){var U=function(ne){var De="idb://".concat(n,"/").concat(o,"/").concat(ne);return j[De]||(j[De]=new Dt)},F=U(""),X=U(":dels"),te=q[k](S),J=te[0],pe=te[1];if(k==="query"&&J.isPrimaryKey&&!S.values?X.add(pe):U(J.name||"").add(pe),!J.isPrimaryKey)if(k==="count")X.add(a);else{var Se=k==="query"&&w&&S.values&&u.query(l(l({},S),{values:!1}));return u[k].apply(this,arguments).then(function(ne){if(k==="query"){if(w&&S.values)return Se.then(function(de){var it=de.result;return F.addKeys(it),ne});var De=S.values?ne.result.map(y):ne.result;S.values?F.addKeys(De):X.addKeys(De)}else if(k==="openCursor"){var ge=ne,Me=S.values;return ge&&Object.create(ge,{key:{get:function(){return X.addKey(ge.primaryKey),ge.key}},primaryKey:{get:function(){var de=ge.primaryKey;return X.addKey(de),de}},value:{get:function(){return Me&&F.addKey(ge.primaryKey),ge.value}}})}return ne})}}return u[k].apply(this,arguments)}}),x}})}};function of(t,n,a,o){function u(f){var d=t(f.name||"");function v(w){return w!=null?f.extractKey(w):null}var y=function(w){return f.multiEntry&&g(w)?w.forEach(function(A){return d.addKey(A)}):d.addKey(w)};(a||o).forEach(function(w,A){var x=a&&v(a[A]),P=o&&v(o[A]);Re(x,P)!==0&&(x!=null&&y(x),P!=null&&y(P))})}n.indexes.forEach(u)}function hu(t,n,a){if(a.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(a.numFailures===o)return null;var u=l({},n);return g(u.keys)&&(u.keys=u.keys.filter(function(f,d){return!(d in a.failures)})),"values"in u&&g(u.values)&&(u.values=u.values.filter(function(f,d){return!(d in a.failures)})),u}function sf(t,n){return n.lower===void 0?!0:n.lowerOpen?Re(t,n.lower)>0:Re(t,n.lower)>=0}function uf(t,n){return n.upper===void 0?!0:n.upperOpen?Re(t,n.upper)<0:Re(t,n.upper)<=0}function Po(t,n){return sf(t,n)&&uf(t,n)}function vu(t,n,a,o,u,f){if(!a||a.length===0)return t;var d=n.query.index,v=d.multiEntry,y=n.query.range,w=o.schema.primaryKey,A=w.extractKey,x=d.extractKey,P=(d.lowLevelIndex||d).extractKey,q=a.reduce(function(k,S){var L=k,N=[];if(S.type==="add"||S.type==="put")for(var B=new Dt,j=S.values.length-1;j>=0;--j){var U=S.values[j],F=A(U);if(!B.hasKey(F)){var X=x(U);(v&&g(X)?X.some(function(ne){return Po(ne,y)}):Po(X,y))&&(B.addKey(F),N.push(U))}}switch(S.type){case"add":{var te=new Dt().addKeys(n.values?k.map(function(ne){return A(ne)}):k);L=k.concat(n.values?N.filter(function(ne){var De=A(ne);return te.hasKey(De)?!1:(te.addKey(De),!0)}):N.map(function(ne){return A(ne)}).filter(function(ne){return te.hasKey(ne)?!1:(te.addKey(ne),!0)}));break}case"put":{var J=new Dt().addKeys(S.values.map(function(ne){return A(ne)}));L=k.filter(function(ne){return!J.hasKey(n.values?A(ne):ne)}).concat(n.values?N:N.map(function(ne){return A(ne)}));break}case"delete":var pe=new Dt().addKeys(S.keys);L=k.filter(function(ne){return!pe.hasKey(n.values?A(ne):ne)});break;case"deleteRange":var Se=S.range;L=k.filter(function(ne){return!Po(A(ne),Se)});break}return L},t);return q===t?t:(q.sort(function(k,S){return Re(P(k),P(S))||Re(A(k),A(S))}),n.limit&&n.limit<1/0&&(q.length>n.limit?q.length=n.limit:t.length===n.limit&&q.length<n.limit&&(u.dirty=!0)),f?Object.freeze(q):q)}function pu(t,n){return Re(t.lower,n.lower)===0&&Re(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function lf(t,n,a,o){if(t===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var u=Re(t,n);if(u===0){if(a&&o)return 0;if(a)return 1;if(o)return-1}return u}function cf(t,n,a,o){if(t===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var u=Re(t,n);if(u===0){if(a&&o)return 0;if(a)return-1;if(o)return 1}return u}function ff(t,n){return lf(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&cf(t.upper,n.upper,t.upperOpen,n.upperOpen)>=0}function df(t,n,a,o){var u=vr["idb://".concat(t,"/").concat(n)];if(!u)return[];var f=u.queries[a];if(!f)return[null,!1,u,null];var d=o.query?o.query.index.name:null,v=f[d||""];if(!v)return[null,!1,u,null];switch(a){case"query":var y=v.find(function(x){return x.req.limit===o.limit&&x.req.values===o.values&&pu(x.req.query.range,o.query.range)});if(y)return[y,!0,u,v];var w=v.find(function(x){var P="limit"in x.req?x.req.limit:1/0;return P>=o.limit&&(o.values?x.req.values:!0)&&ff(x.req.query.range,o.query.range)});return[w,!1,u,v];case"count":var A=v.find(function(x){return pu(x.req.query.range,o.query.range)});return[A,!!A,u,v]}}function hf(t,n,a,o){t.subscribers.add(a),o.addEventListener("abort",function(){t.subscribers.delete(a),t.subscribers.size===0&&vf(t,n)})}function vf(t,n){setTimeout(function(){t.subscribers.size===0&&H(n,t)},3e3)}var pf={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name,a=l(l({},t),{transaction:function(o,u,f){var d=t.transaction(o,u,f);if(u==="readwrite"){var v=new AbortController,y=v.signal,w=function(A){return function(){if(v.abort(),u==="readwrite"){for(var x=new Set,P=0,q=o;P<q.length;P++){var k=q[P],S=vr["idb://".concat(n,"/").concat(k)];if(S){var L=t.table(k),N=S.optimisticOps.filter(function(Me){return Me.trans===d});if(d._explicit&&A&&d.mutatedParts)for(var B=0,j=Object.values(S.queries.query);B<j.length;B++)for(var U=j[B],F=0,X=U.slice();F<X.length;F++){var te=X[F];Do(te.obsSet,d.mutatedParts)&&(H(U,te),te.subscribers.forEach(function(Me){return x.add(Me)}))}else if(N.length>0){S.optimisticOps=S.optimisticOps.filter(function(Me){return Me.trans!==d});for(var J=0,pe=Object.values(S.queries.query);J<pe.length;J++)for(var U=pe[J],Se=0,ne=U.slice();Se<ne.length;Se++){var te=ne[Se];if(te.res!=null&&d.mutatedParts)if(A&&!te.dirty){var De=Object.isFrozen(te.res),ge=vu(te.res,te.req,N,L,te,De);te.dirty?(H(U,te),te.subscribers.forEach(function(it){return x.add(it)})):ge!==te.res&&(te.res=ge,te.promise=$.resolve({result:ge}))}else te.dirty&&H(U,te),te.subscribers.forEach(function(it){return x.add(it)})}}}}x.forEach(function(Me){return Me()})}}};d.addEventListener("abort",w(!1),{signal:y}),d.addEventListener("error",w(!1),{signal:y}),d.addEventListener("complete",w(!0),{signal:y})}return d},table:function(o){var u=t.table(o),f=u.schema.primaryKey,d=l(l({},u),{mutate:function(v){var y=le.trans;if(f.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return u.mutate(v);var w=vr["idb://".concat(n,"/").concat(o)];if(!w)return u.mutate(v);var A=u.mutate(v);return(v.type==="add"||v.type==="put")&&(v.values.length>=50||Ro(f,v).some(function(x){return x==null}))?A.then(function(x){var P=l(l({},v),{values:v.values.map(function(k,S){var L;if(x.failures[S])return k;var N=!((L=f.keyPath)===null||L===void 0)&&L.includes(".")?Ye(k):l({},k);return be(N,f.keyPath,x.results[S]),N})}),q=hu(w,P,x);w.optimisticOps.push(q),queueMicrotask(function(){return v.mutatedParts&&ia(v.mutatedParts)})}):(w.optimisticOps.push(v),v.mutatedParts&&ia(v.mutatedParts),A.then(function(x){if(x.numFailures>0){H(w.optimisticOps,v);var P=hu(w,v,x);P&&w.optimisticOps.push(P),v.mutatedParts&&ia(v.mutatedParts)}}),A.catch(function(){H(w.optimisticOps,v),v.mutatedParts&&ia(v.mutatedParts)})),A},query:function(v){var y;if(!fu(le,u)||!du("query",v))return u.query(v);var w=((y=le.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",A=le,x=A.requery,P=A.signal,q=df(n,o,"query",v),k=q[0],S=q[1],L=q[2],N=q[3];if(k&&S)k.obsSet=v.obsSet;else{var B=u.query(v).then(function(j){var U=j.result;if(k&&(k.res=U),w){for(var F=0,X=U.length;F<X;++F)Object.freeze(U[F]);Object.freeze(U)}else j.result=Ye(U);return j}).catch(function(j){return N&&k&&H(N,k),Promise.reject(j)});k={obsSet:v.obsSet,promise:B,subscribers:new Set,type:"query",req:v,dirty:!1},N?N.push(k):(N=[k],L||(L=vr["idb://".concat(n,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),L.queries.query[v.query.index.name||""]=N)}return hf(k,N,x,P),k.promise.then(function(j){return{result:vu(j.result,v,L?.optimisticOps,u,k,w)}})}});return d}});return a}};function oa(t,n){return new Proxy(t,{get:function(a,o,u){return o==="db"?n:Reflect.get(a,o,u)}})}var An=(function(){function t(n,a){var o=this;this._middlewares={},this.verno=0;var u=t.dependencies;this._options=a=l({addons:t.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange};var f=a.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ne,dbReadyPromise:null,cancelOpen:Ne,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};d.dbReadyPromise=new $(function(y){d.dbReadyResolve=y}),d.openCanceller=new $(function(y,w){d.cancelOpen=w}),this._state=d,this.name=n,this.on=ii(this,"populate","blocked","versionchange","close",{ready:[Xe,Ne]}),this.once=function(y,w){var A=function(){for(var x=[],P=0;P<arguments.length;P++)x[P]=arguments[P];o.on(y).unsubscribe(A),w.apply(o,x)};return o.on(y,A)},this.on.ready.subscribe=Q(this.on.ready.subscribe,function(y){return function(w,A){t.vip(function(){var x=o._state;if(x.openComplete)x.dbOpenError||$.resolve().then(w),A&&y(w);else if(x.onReadyBeingFired)x.onReadyBeingFired.push(w),A&&y(w);else{y(w);var P=o;A||y(function q(){P.on.ready.unsubscribe(w),P.on.ready.unsubscribe(q)})}})}}),this.Collection=Ec(this),this.Table=_c(this),this.Transaction=Cc(this),this.Version=Wc(this),this.WhereClause=Ic(this),this.on("versionchange",function(y){y.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=ui(a.IDBKeyRange),this._createTransaction=function(y,w,A,x){return new o.Transaction(y,w,A,o._options.chromeTransactionDurability,x)},this._fireOnBlocked=function(y){o.on("blocked").fire(y),Mr.filter(function(w){return w.name===o.name&&w!==o&&!w._state.vcFired}).map(function(w){return w.on("versionchange").fire(y)})},this.use(rf),this.use(pf),this.use(af),this.use(ef),this.use(tf);var v=new Proxy(this,{get:function(y,w,A){if(w==="_vip")return!0;if(w==="table")return function(P){return oa(o.table(P),v)};var x=Reflect.get(y,w,A);return x instanceof qs?oa(x,v):w==="tables"?x.map(function(P){return oa(P,v)}):w==="_createTransaction"?function(){var P=x.apply(this,arguments);return oa(P,v)}:x}});this.vip=v,f.forEach(function(y){return y(o)})}return t.prototype.version=function(n){if(isNaN(n)||n<.1)throw new ie.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var a=this._versions,o=a.filter(function(u){return u._cfg.version===n})[0];return o||(o=new this.Version(n),a.push(o),a.sort(Kc),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(n){var a=this;return this.idbdb&&(this._state.openComplete||le.letThrough||this._vip)?n():new $(function(o,u){if(a._state.openComplete)return u(new ie.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen){u(new ie.DatabaseClosed);return}a.open().catch(Ne)}a._state.dbReadyPromise.then(o,u)}).then(n)},t.prototype.use=function(n){var a=n.stack,o=n.create,u=n.level,f=n.name;f&&this.unuse({stack:a,name:f});var d=this._middlewares[a]||(this._middlewares[a]=[]);return d.push({stack:a,create:o,level:u??10,name:f}),d.sort(function(v,y){return v.level-y.level}),this},t.prototype.unuse=function(n){var a=n.stack,o=n.name,u=n.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return u?f.create!==u:o?f.name!==o:!1})),this},t.prototype.open=function(){var n=this;return fr(Bn,function(){return Xc(n)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,a=Mr.indexOf(this);if(a>=0&&Mr.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new $(function(o){n.dbReadyResolve=o}),n.openCanceller=new $(function(o,u){n.cancelOpen=u}))},t.prototype.close=function(n){var a=n===void 0?{disableAutoOpen:!0}:n,o=a.disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new ie.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new ie.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},t.prototype.delete=function(n){var a=this;n===void 0&&(n={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",u=this._state;return new $(function(f,d){var v=function(){a.close(n);var y=a._deps.indexedDB.deleteDatabase(a.name);y.onsuccess=Je(function(){qc(a._deps,a.name),f()}),y.onerror=fn(d),y.onblocked=a._fireOnBlocked};if(o)throw new ie.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(v):v()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var n=this;return m(this._allTables).map(function(a){return n._allTables[a]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var n=Jc.apply(this,arguments);return this._transaction.apply(this,n)},t.prototype._transaction=function(n,a,o){var u=this,f=le.trans;(!f||f.db!==this||n.indexOf("!")!==-1)&&(f=null);var d=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var v,y;try{if(y=a.map(function(A){var x=A instanceof u.Table?A.name:A;if(typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),n=="r"||n===co)v=co;else if(n=="rw"||n==fo)v=fo;else throw new ie.InvalidArgument("Invalid transaction mode: "+n);if(f){if(f.mode===co&&v===fo)if(d)f=null;else throw new ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f&&y.forEach(function(A){if(f&&f.storeNames.indexOf(A)===-1)if(d)f=null;else throw new ie.SubTransaction("Table "+A+" not included in parent transaction.")}),d&&f&&!f.active&&(f=null)}}catch(A){return f?f._promise(null,function(x,P){P(A)}):ut(A)}var w=lu.bind(null,this,v,y,f,o);return f?f._promise(v,w,"lock"):le.trans?fr(le.transless,function(){return u._whenReady(w)}):this._whenReady(w)},t.prototype.table=function(n){if(!_(this._allTables,n))throw new ie.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},t})(),mf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",yf=(function(){function t(n){this._subscribe=n}return t.prototype.subscribe=function(n,a,o){return this._subscribe(!n||typeof n=="function"?{next:n,error:a,complete:o}:n)},t.prototype[mf]=function(){return this},t})(),sa;try{sa={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{sa={indexedDB:null,IDBKeyRange:null}}function mu(t){var n=!1,a,o=new yf(function(u){var f=Pe(t);function d(N){var B=Lr();try{f&&Pr();var j=jn(t,N);return f&&(j=j.finally(zn)),j}finally{B&&Rr()}}var v=!1,y,w={},A={},x={get closed(){return v},unsubscribe:function(){v||(v=!0,y&&y.abort(),P&&Hn.storagemutated.unsubscribe(S))}};u.start&&u.start(x);var P=!1,q=function(){return so(L)};function k(){return Do(A,w)}var S=function(N){ra(w,N),k()&&q()},L=function(){if(!(v||!sa.indexedDB)){w={};var N={};y&&y.abort(),y=new AbortController;var B={subscr:N,signal:y.signal,requery:q,querier:t,trans:null},j=d(B);Promise.resolve(j).then(function(U){n=!0,a=U,!(v||B.signal.aborted)&&(w={},A=N,!Et(A)&&!P&&(Hn(si,S),P=!0),so(function(){return!v&&u.next&&u.next(U)}))},function(U){n=!1,["DatabaseClosedError","AbortError"].includes(U?.name)||v||so(function(){v||u.error&&u.error(U)})})}};return setTimeout(q,0),x});return o.hasValue=function(){return n},o.getValue=function(){return a},o}var pr=An;T(pr,l(l({},Tn),{delete:function(t){var n=new pr(t,{addons:[]});return n.delete()},exists:function(t){return new pr(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Yc(pr.dependencies).then(t)}catch{return ut(new ie.MissingAPI)}},defineClass:function(){function t(n){b(this,n)}return t},ignoreTransaction:function(t){return le.trans?fr(le.transless,t):t()},vip:To,async:function(t){return function(){try{var n=Oo(t.apply(this,arguments));return!n||typeof n.then!="function"?$.resolve(n):n}catch(a){return ut(a)}}},spawn:function(t,n,a){try{var o=Oo(t.apply(a,n||[]));return!o||typeof o.then!="function"?$.resolve(o):o}catch(u){return ut(u)}},currentTransaction:{get:function(){return le.trans||null}},waitFor:function(t,n){var a=$.resolve(typeof t=="function"?pr.ignoreTransaction(t):t).timeout(n||6e4);return le.trans?le.trans.waitFor(a):a},Promise:$,debug:{get:function(){return xe},set:function(t){Oe(t)}},derive:R,extend:b,props:T,override:Q,Events:ii,on:Hn,liveQuery:mu,extendObservabilitySet:ra,getByKeyPath:se,setByKeyPath:be,delByKeyPath:_e,shallowClone:re,deepClone:Ye,getObjectDiff:Lo,cmp:Re,asap:he,minKey:lo,addons:[],connections:Mr,errnames:Pt,dependencies:sa,cache:vr,semVer:Gs,version:Gs.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,a){return t+n/Math.pow(10,a*2)})})),pr.maxKey=ui(pr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Hn(si,function(t){if(!Vn){var n;n=new CustomEvent(po,{detail:t}),Vn=!0,dispatchEvent(n),Vn=!1}}),addEventListener(po,function(t){var n=t.detail;Vn||Mo(n)}));function Mo(t){var n=Vn;try{Vn=!0,Hn.storagemutated.fire(t),Co(t,!0)}finally{Vn=n}}var Vn=!1,Wn,No=function(){};typeof BroadcastChannel<"u"&&(No=function(){Wn=new BroadcastChannel(po),Wn.onmessage=function(t){return t.data&&Mo(t.data)}},No(),typeof Wn.unref=="function"&&Wn.unref(),Hn(si,function(t){Vn||Wn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!An.disableBfCache&&t.persisted){xe&&console.debug("Dexie: handling persisted pagehide"),Wn?.close();for(var n=0,a=Mr;n<a.length;n++){var o=a[n];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!An.disableBfCache&&t.persisted&&(xe&&console.debug("Dexie: handling persisted pageshow"),No(),Mo({all:new Dt(-1/0,[[]])}))}));function gf(t){return new ri({add:t})}function _f(t){return new ri({remove:t})}function bf(t,n){return new ri({replacePrefix:[t,n]})}$.rejectionMapper=Or,Oe(xe);var wf=Object.freeze({__proto__:null,Dexie:An,liveQuery:mu,Entity:Vs,cmp:Re,PropModification:ri,replacePrefix:bf,add:gf,remove:_f,default:An,RangeSet:Dt,mergeRanges:fi,rangesOverlap:au});return l(An,wf,{default:An}),An}))})(pa)),pa.exports}var uh=sh();const rs=ah(uh),Ou=Symbol.for("Dexie"),Da=globalThis[Ou]||(globalThis[Ou]=rs);if(rs.semVer!==Da.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${rs.semVer} and ${Da.semVer}`);const{liveQuery:Ia,mergeRanges:Pp,rangesOverlap:Mp,RangeSet:Np,cmp:Kp,Entity:Fp,PropModification:Bp,replacePrefix:jp,add:zp,remove:Gp,DexieYProvider:Up}=Da;function Lu(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,s)}return i}function Sa(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Lu(Object(i),!0).forEach(function(s){qr(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Lu(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function jr(e){"@babel/helpers - typeof";return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jr(e)}function qr(e,r,i){return r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function lh(e,r){if(e==null)return{};var i={},s=Object.keys(e),l,c;for(c=0;c<s.length;c++)l=s[c],!(r.indexOf(l)>=0)&&(i[l]=e[l]);return i}function ch(e,r){if(e==null)return{};var i=lh(e,r),s,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(l=0;l<c.length;l++)s=c[l],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function fh(e,r){return hh(e)||ph(e,r)||Cs(e,r)||yh()}function nn(e){return dh(e)||vh(e)||Cs(e)||mh()}function dh(e){if(Array.isArray(e))return is(e)}function hh(e){if(Array.isArray(e))return e}function vh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ph(e,r){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var s=[],l=!0,c=!1,h,m;try{for(i=i.call(e);!(l=(h=i.next()).done)&&(s.push(h.value),!(r&&s.length===r));l=!0);}catch(g){c=!0,m=g}finally{try{!l&&i.return!=null&&i.return()}finally{if(c)throw m}}return s}}function Cs(e,r){if(e){if(typeof e=="string")return is(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return is(e,r)}}function is(e,r){(r==null||r>e.length)&&(r=e.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=e[i];return s}function mh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pi(e,r){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Cs(e))||r){i&&(e=i);var s=0,l=function(){};return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,h=!1,m;return{s:function(){i=i.call(e)},n:function(){var g=i.next();return c=g.done,g},e:function(g){h=!0,m=g},f:function(){try{!c&&i.return!=null&&i.return()}finally{if(h)throw m}}}}var gh="finalize",_h="consider";function Qr(e,r,i){e.dispatchEvent(new CustomEvent(gh,{detail:{items:r,info:i}}))}function or(e,r,i){e.dispatchEvent(new CustomEvent(_h,{detail:{items:r,info:i}}))}var Ha="draggedEntered",Mi="draggedLeft",Va="draggedOverIndex",Os="draggedLeftDocument",Ca={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function bh(e,r,i){e.dispatchEvent(new CustomEvent(Ha,{detail:{indexObj:r,draggedEl:i}}))}function wh(e,r,i){e.dispatchEvent(new CustomEvent(Mi,{detail:{draggedEl:r,type:Ca.LEFT_FOR_ANOTHER,theOtherDz:i}}))}function Eh(e,r){e.dispatchEvent(new CustomEvent(Mi,{detail:{draggedEl:r,type:Ca.OUTSIDE_OF_ANY}}))}function xh(e,r,i){e.dispatchEvent(new CustomEvent(Va,{detail:{indexObj:r,draggedEl:i}}))}function Th(e){window.dispatchEvent(new CustomEvent(Os,{detail:{draggedEl:e}}))}var Nt={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Ha,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Va,DRAGGED_LEFT:Mi,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Ht={POINTER:"pointer",KEYBOARD:"keyboard"},Wa="isDndShadowItem",Ya="data-is-dnd-shadow-item-internal",kh="data-is-dnd-shadow-item-hint",Gl="id:dnd-shadow-placeholder-0000",Ah="dnd-action-dragged-el",vt="id",as=0;function Ul(){as++}function Hl(){if(as===0)throw new Error("Bug! trying to decrement when there are no dropzones");as--}var Ls=typeof window>"u";function os(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i,s=r?Sh(e):e.getBoundingClientRect(),l=getComputedStyle(e),c=l.transform;if(c){var h,m,g,b;if(c.startsWith("matrix3d("))i=c.slice(9,-1).split(/, /),h=+i[0],m=+i[5],g=+i[12],b=+i[13];else if(c.startsWith("matrix("))i=c.slice(7,-1).split(/, /),h=+i[0],m=+i[3],g=+i[4],b=+i[5];else return s;var E=l.transformOrigin,D=s.x-g-(1-h)*parseFloat(E),_=s.y-b-(1-m)*parseFloat(E.slice(E.indexOf(" ")+1)),T=h?s.width/h:e.offsetWidth,C=m?s.height/m:e.offsetHeight;return{x:D,y:_,width:T,height:C,top:_,right:D+T,bottom:_+C,left:D}}else return s}function Vl(e){var r=os(e);return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Wl(e){var r=e.getBoundingClientRect();return{top:r.top+window.scrollY,bottom:r.bottom+window.scrollY,left:r.left+window.scrollX,right:r.right+window.scrollX}}function Yl(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Dh(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function Za(e,r){return e.y<=r.bottom&&e.y>=r.top&&e.x>=r.left&&e.x<=r.right}function ki(e){return Yl(Wl(e))}function Ru(e,r){var i=ki(e),s=Vl(r);return Za(i,s)}function Pu(e,r){var i=ki(e),s=ki(r);return Dh(i,s)}function Ih(e){var r=Wl(e);return r.right<0||r.left>document.documentElement.scrollWidth||r.bottom<0||r.top>document.documentElement.scrollHeight}function Sh(e){for(var r=e.getBoundingClientRect(),i={top:r.top,bottom:r.bottom,left:r.left,right:r.right},s=!1,l=!1,c=e.parentElement;c&&c!==document.body;){var h=window.getComputedStyle(c),m=h.overflowY,g=h.overflowX,b=m==="scroll"||m==="auto",E=g==="scroll"||g==="auto";if(b||E){var D=c.getBoundingClientRect();if(b){var _=Math.max(i.top,D.top),T=Math.min(i.bottom,D.bottom);(_!==i.top||T!==i.bottom)&&(s=!0),i.top=_,i.bottom=T}if(E){var C=Math.max(i.left,D.left),M=Math.min(i.right,D.right);(C!==i.left||M!==i.right)&&(l=!0),i.left=C,i.right=M}}c=c.parentElement}return s||l?{top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:Math.max(0,i.right-i.left),height:Math.max(0,i.bottom-i.top)}:{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}}var Gr;function Rs(){Gr=new Map}Rs();function Ch(e){var r=Array.from(e.children).findIndex(function(i){return i.getAttribute(Ya)});if(r>=0)return Gr.has(e)||Gr.set(e,new Map),Gr.get(e).set(r,Vl(e.children[r])),r}function Oh(e,r){if(!Ru(e,r))return null;var i=r.children;if(i.length===0)return{index:0,isProximityBased:!0};for(var s=Ch(r),l=0;l<i.length;l++)if(Ru(e,i[l])){var c=Gr.has(r)&&Gr.get(r).get(l);return c&&!Za(ki(e),c)?{index:s,isProximityBased:!1}:{index:l,isProximityBased:!1}}for(var h=Number.MAX_VALUE,m=void 0,g=0;g<i.length;g++){var b=Pu(e,i[g]);b<h&&(h=b,m=g)}if(i.length>0){var E=i.length,D=i[E-1],_=D.cloneNode(!1);_.style.visibility="hidden",_.style.pointerEvents="none",r.appendChild(_);var T=Pu(e,_);T<h&&(m=E),r.removeChild(_)}return{index:m,isProximityBased:!0}}function hi(e){return JSON.stringify(e,null,2)}function Oa(e){if(!e)throw new Error("cannot get depth of a falsy node");return Zl(e,0)}function Zl(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?Zl(e.parentElement,r+1):r-1}function Lh(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var i in e)if(!{}.hasOwnProperty.call(r,i)||r[i]!==e[i])return!1;return!0}function Rh(e,r){if(e.length!==r.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==r[i])return!1;return!0}var Ph=200,Mu=10,ss;function Mh(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ph,s=arguments.length>3?arguments[3]:void 0,l,c,h=!1,m,g=Array.from(r).sort(function(E,D){return Oa(D)-Oa(E)});function b(){var E=ki(e),D=s.multiScrollIfNeeded();if(!D&&m&&Math.abs(m.x-E.x)<Mu&&Math.abs(m.y-E.y)<Mu){ss=window.setTimeout(b,i);return}if(Ih(e)){Th(e);return}m=E;var _=!1,T=Pi(g),C;try{for(T.s();!(C=T.n()).done;){var M=C.value;D&&Rs();var R=Oh(e,M);if(R!==null){var O=R.index;_=!0,M!==l?(l&&wh(l,e,M),bh(M,R,e),l=M):O!==c&&(xh(M,R,e),c=O);break}}}catch(Y){T.e(Y)}finally{T.f()}!_&&h&&l?(Eh(l,e),l=void 0,c=void 0,h=!1):h=!0,ss=window.setTimeout(b,i)}b()}function Nh(){clearTimeout(ss),Rs()}var vi=30;function Kh(){var e;function r(){e={directionObj:void 0,stepPx:0}}r();function i(c){var h=e,m=h.directionObj,g=h.stepPx;m&&(c.scrollBy(m.x*g,m.y*g),window.requestAnimationFrame(function(){return i(c)}))}function s(c){return vi-c}function l(c,h){if(!h)return!1;var m=Fh(c,h),g=!!e.directionObj;if(m===null)return g&&r(),!1;var b=!1,E=!1;return h.scrollHeight>h.clientHeight&&(m.bottom<vi?(b=!0,e.directionObj={x:0,y:1},e.stepPx=s(m.bottom)):m.top<vi&&(b=!0,e.directionObj={x:0,y:-1},e.stepPx=s(m.top)),!g&&b)||h.scrollWidth>h.clientWidth&&(m.right<vi?(E=!0,e.directionObj={x:1,y:0},e.stepPx=s(m.right)):m.left<vi&&(E=!0,e.directionObj={x:-1,y:0},e.stepPx=s(m.left)),!g&&E)?(i(h),!0):(r(),!1)}return{scrollIfNeeded:l,resetScrolling:r}}function Fh(e,r){var i=r===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:r.getBoundingClientRect();return Za(e,i)?{top:e.y-i.top,bottom:i.bottom-e.y,left:e.x-i.left,right:i.right-e.x}:null}function Bh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i=zh(e),s=Array.from(i).sort(function(g,b){return Oa(b)-Oa(g)}),l=Kh(),c=l.scrollIfNeeded,h=l.resetScrolling;function m(){var g=r();if(!g||!s)return!1;for(var b=s.filter(function(_){return Za(g,_.getBoundingClientRect())||_===document.scrollingElement}),E=0;E<b.length;E++){var D=c(g,b[E]);if(D)return!0}return!1}return{multiScrollIfNeeded:i.size>0?m:function(){return!1},destroy:function(){return h()}}}function jh(e){if(!e)return[];for(var r=[],i=e;i;){var s=window.getComputedStyle(i),l=s.overflow;l.split(" ").some(function(c){return c.includes("auto")||c.includes("scroll")})&&r.push(i),i=i.parentElement}return r}function zh(e){var r=new Set,i=Pi(e),s;try{for(i.s();!(s=i.n()).done;){var l=s.value;jh(l).forEach(function(c){return r.add(c)})}}catch(c){i.e(c)}finally{i.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&r.add(document.scrollingElement),r}function Gh(e){var r=e.cloneNode(!0),i=[],s=e.tagName==="SELECT",l=s?[e]:nn(e.querySelectorAll("select")),c=Pi(l),h;try{for(c.s();!(h=c.n()).done;){var m=h.value;i.push(m.value)}}catch(V){c.e(V)}finally{c.f()}if(l.length>0)for(var g=s?[r]:nn(r.querySelectorAll("select")),b=0;b<g.length;b++){var E=g[b],D=i[b],_=E.querySelector('option[value="'.concat(D,'"'));_&&_.setAttribute("selected",!0)}var T=e.tagName==="CANVAS",C=T?[e]:nn(e.querySelectorAll("canvas"));if(C.length>0)for(var M=T?[r]:nn(r.querySelectorAll("canvas")),R=0;R<M.length;R++){var O=C[R],Y=M[R];Y.width=O.width,Y.height=O.height,O.width>0&&O.height>0&&Y.getContext("2d").drawImage(O,0,0)}return r}var Ai=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Uh=qr({},Ai.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function ql(e){if(!Ai[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Ai)));return Uh[e]}var Hh=.2;function yr(e){return"".concat(e," ").concat(Hh,"s ease")}function Vh(e,r){var i=e.getBoundingClientRect(),s=Gh(e);Ql(e,s),s.id=Ah,s.style.position="fixed";var l=i.top,c=i.left;if(s.style.top="".concat(l,"px"),s.style.left="".concat(c,"px"),r){var h=Yl(i);l-=h.y-r.y,c-=h.x-r.x,window.setTimeout(function(){s.style.top="".concat(l,"px"),s.style.left="".concat(c,"px")},0)}return s.style.margin="0",s.style.boxSizing="border-box",s.style.height="".concat(i.height,"px"),s.style.width="".concat(i.width,"px"),s.style.transition="".concat(yr("top"),", ").concat(yr("left"),", ").concat(yr("background-color"),", ").concat(yr("opacity"),", ").concat(yr("color")," "),window.setTimeout(function(){return s.style.transition+=", ".concat(yr("width"),", ").concat(yr("height"))},0),s.style.zIndex="9999",s.style.cursor="grabbing",s}function Wh(e){e.style.cursor="grab"}function Yh(e,r,i,s){Ql(r,e);var l=r.getBoundingClientRect(),c=e.getBoundingClientRect(),h=l.width-c.width,m=l.height-c.height;if(h||m){var g={left:(i-c.left)/c.width,top:(s-c.top)/c.height};ql(Ai.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(l.height,"px"),e.style.width="".concat(l.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-g.left*h,"px"),e.style.top="".concat(parseFloat(e.style.top)-g.top*m,"px")}}function Ql(e,r){var i=window.getComputedStyle(e);Array.from(i).filter(function(s){return s.startsWith("background")||s.startsWith("padding")||s.startsWith("font")||s.startsWith("text")||s.startsWith("align")||s.startsWith("justify")||s.startsWith("display")||s.startsWith("flex")||s.startsWith("border")||s==="opacity"||s==="color"||s==="list-style-type"||ql(Ai.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(s==="width"||s==="height")}).forEach(function(s){return r.style.setProperty(s,i.getPropertyValue(s),i.getPropertyPriority(s))})}function Zh(e,r){e.draggable=!1,e.ondragstart=function(){return!1},r?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Xl(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function qh(e){e.style.visibility="hidden",e.setAttribute(Ya,"true")}function Qh(e){e.style.visibility="",e.removeAttribute(Ya)}function ma(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(c){s.style[c]=l[c]}),i(s).forEach(function(c){return s.classList.add(c)})})}function La(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(s){var l=r(s);Object.keys(l).forEach(function(c){s.style[c]=""}),i(s).forEach(function(c){return s.classList.contains(c)&&s.classList.remove(c)})})}function Xh(e){var r=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var i=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=r,e.style.minWidth=i}}var Jh="--any--",$h=100,ev=20,fa=3,tv=80,Nu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Ku="data-is-dnd-original-dragged-item",jt,wt,zt,qa,et,Qa,nr,Tt,mn,Ct,Zn=!1,Ps=!1,Ms,Ni=!1,ya=[],_i,yn,mi=!1,sn=new Map,lt=new Map,Uo=new WeakMap;function nv(e,r){sn.has(r)||sn.set(r,new Set),sn.get(r).has(e)||(sn.get(r).add(e),Ul())}function Fu(e,r){sn.get(r).delete(e),Hl(),sn.get(r).size===0&&sn.delete(r)}function rv(){var e=sn.get(qa),r=Pi(e),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;s.addEventListener(Ha,Jl),s.addEventListener(Mi,$l),s.addEventListener(Va,ec)}}catch(h){r.e(h)}finally{r.f()}window.addEventListener(Os,Xr);var l=Math.max.apply(Math,nn(Array.from(e.keys()).map(function(h){return lt.get(h).dropAnimationDurationMs}))),c=l===0?ev:Math.max(l,$h);_i=Bh(e,function(){return Ct}),Mh(wt,e,c*1.07,_i)}function iv(){var e=sn.get(qa),r=Pi(e),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;s.removeEventListener(Ha,Jl),s.removeEventListener(Mi,$l),s.removeEventListener(Va,ec)}}catch(l){r.e(l)}finally{r.f()}window.removeEventListener(Os,Xr),_i&&(_i.destroy(),_i=void 0),Nh()}function Xa(e){return e.findIndex(function(r){return!!r[Wa]})}function av(e){var r;return Sa(Sa({},e),{},(r={},qr(r,Wa,!0),qr(r,vt,Gl),r))}function Jl(e){var r=lt.get(e.currentTarget),i=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==et)){if(Ni=!1,i=i.filter(function(m){return m[vt]!==nr[vt]&&m[vt]!==Gl}),et!==e.currentTarget){var l=lt.get(et).items,c=l.filter(function(m){return!m[Wa]});or(et,c,{trigger:Nt.DRAGGED_ENTERED_ANOTHER,id:zt[vt],source:Ht.POINTER})}var h=e.detail.indexObj.index;Tt=e.currentTarget,i.splice(h,0,nr),or(e.currentTarget,i,{trigger:Nt.DRAGGED_ENTERED,id:zt[vt],source:Ht.POINTER})}}function $l(e){if(Zn){var r=lt.get(e.currentTarget),i=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==et&&e.currentTarget!==Tt)){var l=nn(i),c=Xa(l);c!==-1&&l.splice(c,1);var h=Tt;Tt=void 0;var m=e.detail,g=m.type,b=m.theOtherDz;if(g===Ca.OUTSIDE_OF_ANY||g===Ca.LEFT_FOR_ANOTHER&&b!==et&&lt.get(b).dropFromOthersDisabled){Ni=!0,Tt=et;var E=h===et?l:nn(lt.get(et).items);E.splice(Qa,0,nr),or(et,E,{trigger:Nt.DRAGGED_LEFT_ALL,id:zt[vt],source:Ht.POINTER})}or(e.currentTarget,l,{trigger:Nt.DRAGGED_LEFT,id:zt[vt],source:Ht.POINTER})}}}function ec(e){var r=lt.get(e.currentTarget),i=r.items,s=r.dropFromOthersDisabled;if(!(s&&e.currentTarget!==et)){var l=nn(i);Ni=!1;var c=e.detail.indexObj.index,h=Xa(l);h!==-1&&l.splice(h,1),l.splice(c,0,nr),or(e.currentTarget,l,{trigger:Nt.DRAGGED_OVER_INDEX,id:zt[vt],source:Ht.POINTER})}}function Ra(e){e.preventDefault();var r=e.touches?e.touches[0]:e;Ct={x:r.clientX,y:r.clientY},wt.style.transform="translate3d(".concat(Ct.x-mn.x,"px, ").concat(Ct.y-mn.y,"px, 0)")}function Xr(){Ps=!0,window.removeEventListener("mousemove",Ra),window.removeEventListener("touchmove",Ra),window.removeEventListener("mouseup",Xr),window.removeEventListener("touchend",Xr),iv(),Wh(wt),Tt||(Tt=et);var e=lt.get(Tt),r=e.items,i=e.type;La(sn.get(i),function(c){return lt.get(c).dropTargetStyle},function(c){return lt.get(c).dropTargetClasses});var s=Xa(r);s===-1&&Tt===et&&(s=Qa),r=r.map(function(c){return c[Wa]?zt:c});function l(){Ms(),Qr(Tt,r,{trigger:Ni?Nt.DROPPED_OUTSIDE_OF_ANY:Nt.DROPPED_INTO_ZONE,id:zt[vt],source:Ht.POINTER}),Tt!==et&&Qr(et,lt.get(et).items,{trigger:Nt.DROPPED_INTO_ANOTHER,id:zt[vt],source:Ht.POINTER});var c=Array.from(Tt.children).find(function(h){return h.getAttribute(Ya)});c&&Qh(c),uv()}lt.get(Tt).dropAnimationDisabled?l():ov(s,l)}function ov(e,r){var i=e>-1?os(Tt.children[e],!1):os(Tt,!1),s={x:i.left-parseFloat(wt.style.left),y:i.top-parseFloat(wt.style.top)},l=lt.get(Tt),c=l.dropAnimationDurationMs,h="transform ".concat(c,"ms ease");wt.style.transition=wt.style.transition?wt.style.transition+","+h:h,wt.style.transform="translate3d(".concat(s.x,"px, ").concat(s.y,"px, 0)"),window.setTimeout(r,c)}function sv(e,r){ya.push({dz:e,destroy:r}),window.requestAnimationFrame(function(){Xl(e),document.body.appendChild(e)})}function uv(){wt&&wt.remove&&wt.remove(),jt&&jt.remove&&jt.remove(),wt=void 0,jt=void 0,zt=void 0,qa=void 0,et=void 0,Qa=void 0,nr=void 0,Tt=void 0,mn=void 0,Ct=void 0,Zn=!1,Ps=!1,Ms=void 0,Ni=!1,yn&&clearTimeout(yn),yn=void 0,mi=!1,ya.length&&(ya.forEach(function(e){var r=e.dz,i=e.destroy;i(),r.remove()}),ya=[])}function lv(e,r){var i=!1,s={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Nu,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},l=new Map;function c(){window.addEventListener("mousemove",g,{passive:!1}),window.addEventListener("touchmove",g,{passive:!1,capture:!1}),window.addEventListener("mouseup",m,{passive:!1}),window.addEventListener("touchend",m,{passive:!1})}function h(){window.removeEventListener("mousemove",g),window.removeEventListener("touchmove",g),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),yn&&(clearTimeout(yn),yn=void 0,mi=!1)}function m(_){if(h(),jt=void 0,mn=void 0,Ct=void 0,_.type==="touchend"){var T=new Event("click",{bubbles:!0,cancelable:!0});_.target.dispatchEvent(T)}}function g(_){var T=!!_.touches,C=T?_.touches[0]:_;if(T&&s.delayTouchStartMs>0&&!mi){Ct={x:C.clientX,y:C.clientY},(Math.abs(Ct.x-mn.x)>=fa||Math.abs(Ct.y-mn.y)>=fa)&&(yn&&(clearTimeout(yn),yn=void 0),m(_));return}_.preventDefault(),Ct={x:C.clientX,y:C.clientY},(Math.abs(Ct.x-mn.x)>=fa||Math.abs(Ct.y-mn.y)>=fa)&&(h(),E())}function b(_){if(!(_.target!==_.currentTarget&&(_.target.value!==void 0||_.target.isContentEditable))&&!_.button&&!Zn){var T=!!_.touches,C=T&&s.delayTouchStartMs>0;C||_.preventDefault(),_.stopPropagation();var M=T?_.touches[0]:_;mn={x:M.clientX,y:M.clientY},Ct=Sa({},mn),jt=_.currentTarget,C&&(mi=!1,yn=window.setTimeout(function(){jt&&(mi=!0,h(),E())},s.delayTouchStartMs)),c()}}function E(){Zn=!0;var _=l.get(jt);Qa=_,et=jt.parentElement;var T=et.closest("dialog")||et.closest("[popover]")||et.getRootNode(),C=T.body||T,M=s.items,R=s.type,O=s.centreDraggedOnCursor,Y=nn(M);zt=Y[_],qa=R,nr=av(zt),wt=Vh(jt,O&&Ct),C.appendChild(wt);function V(){jt.parentElement?window.requestAnimationFrame(V):(jt.setAttribute(Ku,!0),C.appendChild(jt),rv(),Xl(jt),nr[vt]=zt[vt],wt.focus())}window.requestAnimationFrame(V),ma(Array.from(sn.get(s.type)).filter(function(z){return z===et||!lt.get(z).dropFromOthersDisabled}),function(z){return lt.get(z).dropTargetStyle},function(z){return lt.get(z).dropTargetClasses}),Y.splice(_,1,nr),Ms=Xh(et),or(et,Y,{trigger:Nt.DRAG_STARTED,id:zt[vt],source:Ht.POINTER}),window.addEventListener("mousemove",Ra,{passive:!1}),window.addEventListener("touchmove",Ra,{passive:!1,capture:!1}),window.addEventListener("mouseup",Xr,{passive:!1}),window.addEventListener("touchend",Xr,{passive:!1})}function D(_){var T=_.items,C=T===void 0?void 0:T,M=_.flipDurationMs,R=M===void 0?0:M,O=_.type,Y=O===void 0?Jh:O,V=_.dragDisabled,z=V===void 0?!1:V,Q=_.morphDisabled,ee=Q===void 0?!1:Q,he=_.dropFromOthersDisabled,ve=he===void 0?!1:he,se=_.dropTargetStyle,be=se===void 0?Nu:se,_e=_.dropTargetClasses,re=_e===void 0?[]:_e,Te=_.transformDraggedElement,Fe=Te===void 0?function(){}:Te,He=_.centreDraggedOnCursor,tt=He===void 0?!1:He,ye=_.dropAnimationDisabled,Et=ye===void 0?!1:ye,Ve=_.delayTouchStart,Ye=Ve===void 0?!1:Ve;s.dropAnimationDurationMs=R;var pt=0;Ye===!0?pt=tv:typeof Ye=="number"&&isFinite(Ye)&&Ye>=0&&(pt=Ye),s.delayTouchStartMs=pt,s.type&&Y!==s.type&&Fu(e,s.type),s.type=Y,s.items=nn(C),s.dragDisabled=z,s.morphDisabled=ee,s.transformDraggedElement=Fe,s.centreDraggedOnCursor=tt,s.dropAnimationDisabled=Et,i&&Zn&&!Ps&&(!Lh(be,s.dropTargetStyle)||!Rh(re,s.dropTargetClasses))&&(La([e],function(){return s.dropTargetStyle},function(){return re}),ma([e],function(){return be},function(){return re})),s.dropTargetStyle=be,s.dropTargetClasses=nn(re);function nt(H,oe){return lt.get(H)?lt.get(H)[oe]:s[oe]}i&&Zn&&s.dropFromOthersDisabled!==ve&&(ve?La([e],function(H){return nt(H,"dropTargetStyle")},function(H){return nt(H,"dropTargetClasses")}):ma([e],function(H){return nt(H,"dropTargetStyle")},function(H){return nt(H,"dropTargetClasses")})),s.dropFromOthersDisabled=ve,lt.set(e,s),nv(e,Y);for(var ot=Zn?Xa(s.items):-1,mt=0;mt<e.children.length;mt++){var Z=e.children[mt];if(Zh(Z,z),mt===ot){ee||Yh(wt,Z,Ct.x,Ct.y),s.transformDraggedElement(wt,zt,mt),qh(Z);continue}Z.removeEventListener("mousedown",Uo.get(Z)),Z.removeEventListener("touchstart",Uo.get(Z)),z||(Z.addEventListener("mousedown",b),Z.addEventListener("touchstart",b),Uo.set(Z,b)),l.set(Z,mt),i||(i=!0)}}return D(r),{update:function(T){D(T)},destroy:function(){function T(){Fu(e,lt.get(e).type),lt.delete(e)}Zn&&!e.closest("[".concat(Ku,"]"))?sv(e,T):T()}}}var da,us={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},tc=(da={},qr(da,us.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),qr(da,us.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),da),cv="dnd-action-aria-alert",ft;function ls(){ft||(ft=document.createElement("div"),(function(){ft.id=cv,ft.style.position="fixed",ft.style.bottom="0",ft.style.left="0",ft.style.zIndex="-5",ft.style.opacity="0",ft.style.height="0",ft.style.width="0",ft.setAttribute("role","alert")})(),document.body.prepend(ft),Object.entries(tc).forEach(function(e){var r=fh(e,2),i=r[0],s=r[1];return document.body.prepend(hv(i,s))}))}function fv(){return Ls?null:(document.readyState==="complete"?ls():window.addEventListener("DOMContentLoaded",ls),Sa({},us))}function dv(){Ls||!ft||(Object.keys(tc).forEach(function(e){var r;return(r=document.getElementById(e))===null||r===void 0?void 0:r.remove()}),ft.remove(),ft=void 0)}function hv(e,r){var i=document.createElement("div");return i.id=e,i.innerHTML="<p>".concat(r,"</p>"),i.style.display="none",i.style.position="fixed",i.style.zIndex="-5",i}function Ur(e){if(!Ls){ft||ls(),ft.innerHTML="";var r=document.createTextNode(e);ft.appendChild(r),ft.style.display="none",ft.style.display="inline"}}var vv="--any--",Bu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Jt=!1,cs,Ot,Tr="",gr,_n,Xn="",Pa=new WeakSet,ju=new WeakMap,zu=new WeakMap,fs=new Map,xt=new Map,on=new Map,Ma;function pv(e,r){on.size===0&&(Ma=fv(),window.addEventListener("keydown",nc),window.addEventListener("click",rc)),on.has(r)||on.set(r,new Set),on.get(r).has(e)||(on.get(r).add(e),Ul())}function Gu(e,r){Ot===e&&Di(),on.get(r).delete(e),Hl(),on.get(r).size===0&&on.delete(r),on.size===0&&(window.removeEventListener("keydown",nc),window.removeEventListener("click",rc),Ma=void 0,dv())}function nc(e){if(Jt)switch(e.key){case"Escape":{Di();break}}}function rc(){Jt&&(Pa.has(document.activeElement)||Di())}function mv(e){if(Jt){var r=e.currentTarget;if(r!==Ot){Tr=r.getAttribute("aria-label")||"";var i=xt.get(Ot),s=i.items,l=s.find(function(D){return D[vt]===_n}),c=s.indexOf(l),h=s.splice(c,1)[0],m=xt.get(r),g=m.items,b=m.autoAriaDisabled;r.getBoundingClientRect().top<Ot.getBoundingClientRect().top||r.getBoundingClientRect().left<Ot.getBoundingClientRect().left?(g.push(h),b||Ur("Moved item ".concat(Xn," to the end of the list ").concat(Tr))):(g.unshift(h),b||Ur("Moved item ".concat(Xn," to the beginning of the list ").concat(Tr)));var E=Ot;Qr(E,s,{trigger:Nt.DROPPED_INTO_ANOTHER,id:_n,source:Ht.KEYBOARD}),Qr(r,g,{trigger:Nt.DROPPED_INTO_ZONE,id:_n,source:Ht.KEYBOARD}),Ot=r}}}function ic(){fs.forEach(function(e,r){var i=e.update;return i(xt.get(r))})}function Di(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;xt.get(Ot).autoAriaDisabled||Ur("Stopped dragging item ".concat(Xn)),Pa.has(document.activeElement)&&document.activeElement.blur(),e&&or(Ot,xt.get(Ot).items,{trigger:Nt.DRAG_STOPPED,id:_n,source:Ht.KEYBOARD}),La(on.get(cs),function(r){return xt.get(r).dropTargetStyle},function(r){return xt.get(r).dropTargetClasses}),gr=null,_n=null,Xn="",cs=null,Ot=null,Tr="",Jt=!1,ic()}function yv(e,r){var i={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Bu,dropTargetClasses:[],autoAriaDisabled:!1};function s(E,D,_){E.length<=1||E.splice(_,1,E.splice(D,1,E[_])[0])}function l(E){switch(E.key){case"Enter":case" ":{if((E.target.disabled!==void 0||E.target.href||E.target.isContentEditable)&&!Pa.has(E.target))return;E.preventDefault(),E.stopPropagation(),Jt?Di():c(E);break}case"ArrowDown":case"ArrowRight":{if(!Jt)return;E.preventDefault(),E.stopPropagation();var D=xt.get(e),_=D.items,T=Array.from(e.children),C=T.indexOf(E.currentTarget);C<T.length-1&&(i.autoAriaDisabled||Ur("Moved item ".concat(Xn," to position ").concat(C+2," in the list ").concat(Tr)),s(_,C,C+1),Qr(e,_,{trigger:Nt.DROPPED_INTO_ZONE,id:_n,source:Ht.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Jt)return;E.preventDefault(),E.stopPropagation();var M=xt.get(e),R=M.items,O=Array.from(e.children),Y=O.indexOf(E.currentTarget);Y>0&&(i.autoAriaDisabled||Ur("Moved item ".concat(Xn," to position ").concat(Y," in the list ").concat(Tr)),s(R,Y,Y-1),Qr(e,R,{trigger:Nt.DROPPED_INTO_ZONE,id:_n,source:Ht.KEYBOARD}));break}}}function c(E){m(E.currentTarget),Ot=e,cs=i.type,Jt=!0;var D=Array.from(on.get(i.type)).filter(function(T){return T===Ot||!xt.get(T).dropFromOthersDisabled});if(ma(D,function(T){return xt.get(T).dropTargetStyle},function(T){return xt.get(T).dropTargetClasses}),!i.autoAriaDisabled){var _="Started dragging item ".concat(Xn,". Use the arrow keys to move it within its list ").concat(Tr);D.length>1&&(_+=", or tab to another list in order to move the item into it"),Ur(_)}or(e,xt.get(e).items,{trigger:Nt.DRAG_STARTED,id:_n,source:Ht.KEYBOARD}),ic()}function h(E){Jt&&E.currentTarget!==gr&&(E.stopPropagation(),Di(!1),c(E))}function m(E){var D=xt.get(e),_=D.items,T=Array.from(e.children),C=T.indexOf(E);gr=E,gr.tabIndex=i.zoneItemTabIndex,_n=_[C][vt],Xn=T[C].getAttribute("aria-label")||""}function g(E){var D=E.items,_=D===void 0?[]:D,T=E.type,C=T===void 0?vv:T,M=E.dragDisabled,R=M===void 0?!1:M,O=E.zoneTabIndex,Y=O===void 0?0:O,V=E.zoneItemTabIndex,z=V===void 0?0:V,Q=E.dropFromOthersDisabled,ee=Q===void 0?!1:Q,he=E.dropTargetStyle,ve=he===void 0?Bu:he,se=E.dropTargetClasses,be=se===void 0?[]:se,_e=E.autoAriaDisabled,re=_e===void 0?!1:_e;i.items=nn(_),i.dragDisabled=R,i.dropFromOthersDisabled=ee,i.zoneTabIndex=Y,i.zoneItemTabIndex=z,i.dropTargetStyle=ve,i.dropTargetClasses=be,i.autoAriaDisabled=re,i.type&&C!==i.type&&Gu(e,i.type),i.type=C,pv(e,C),re||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",R?Ma.DND_ZONE_DRAG_DISABLED:Ma.DND_ZONE_ACTIVE)),xt.set(e,i),Jt?e.tabIndex=e===Ot||gr.contains(e)||i.dropFromOthersDisabled||Ot&&i.type!==xt.get(Ot).type?-1:0:e.tabIndex=i.zoneTabIndex,e.addEventListener("focus",mv);for(var Te=function(tt){var ye=e.children[tt];Pa.add(ye),ye.tabIndex=Jt?-1:i.zoneItemTabIndex,re||ye.setAttribute("role","listitem"),ye.removeEventListener("keydown",ju.get(ye)),ye.removeEventListener("click",zu.get(ye)),R||(ye.addEventListener("keydown",l),ju.set(ye,l),ye.addEventListener("click",h),zu.set(ye,h)),Jt&&i.items[tt][vt]===_n&&(gr=ye,gr.tabIndex=i.zoneItemTabIndex,ye.focus())},Fe=0;Fe<e.children.length;Fe++)Te(Fe)}g(r);var b={update:function(D){g(D)},destroy:function(){Gu(e,i.type),xt.delete(e),fs.delete(e)}};return fs.set(e,b),b}var gv=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Ns(e,r){if(_v(e))return{update:function(){},destroy:function(){}};Uu(r);var i=lv(e,r),s=yv(e,r);return{update:function(c){Uu(c),i.update(c),s.update(c)},destroy:function(){i.destroy(),s.destroy()}}}function _v(e){return!!e.closest("[".concat(kh,'="true"]'))}function Uu(e){var r=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var i=e.zoneTabIndex,s=e.zoneItemTabIndex;e.dropTargetStyle;var l=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var c=e.delayTouchStart;e.dropAnimationDisabled;var h=ch(e,gv);if(Object.keys(h).length>0&&console.warn("dndzone will ignore unknown options",h),!r)throw new Error("no 'items' key provided to dndzone");var m=r.find(function(E){return!{}.hasOwnProperty.call(E,vt)});if(m)throw new Error("missing '".concat(vt,"' property for item ").concat(hi(m)));if(l&&!Array.isArray(l))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(jr(l),", ").concat(hi(l)));if(i&&!Hu(i))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(jr(i),", ").concat(hi(i)));if(s&&!Hu(s))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(jr(s),", ").concat(hi(s)));if(c!==void 0&&c!==!1){var g=c===!0,b=typeof c=="number"&&isFinite(c)&&c>=0;if(!g&&!b)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(jr(c),", ").concat(hi(c)))}}function Hu(e){return!isNaN(e)&&(function(r){return(r|0)===r})(parseFloat(e))}const Ie=new Da("TaskPlannerDB");Ie.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Ie.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(r=>{r.status="unchecked"}));Ie.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(r=>{r.archivedAt=Date.now()}));Ie.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify(r=>{r.archivedAt===void 0&&(r.archivedAt=null)}));Ie.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify((r,i)=>{r.columnIndex===void 0&&(r.columnIndex=r.order%5)}));function Ja(e){return e.length===0?0:Math.max(...e.map(i=>i.order))+1}async function bv(){return(await Ie.lists.orderBy("order").toArray()).filter(r=>r.archivedAt==null)}async function wv(){return await Ie.lists.orderBy("order").toArray()}async function Vu(e,r=null){const i=e.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const s=await Ie.lists.orderBy("order").toArray(),l=Ja(s),c=5;let h;return r!==null&&r>=0&&r<c?h=r:h=l%c,await Ie.lists.add({name:i,order:l,archivedAt:null,columnIndex:h})}async function Ev(e=null){const r=await Ie.lists.orderBy("order").toArray(),i=Ja(r),s=5;let l;return e!==null&&e>=0&&e<s?l=e:l=i%s,await Ie.lists.add({name:null,order:i,archivedAt:null,columnIndex:l})}async function xv(e,r){const i=r.trim();if(i==="")throw new Error("List name cannot be empty");return await Ie.lists.update(e,{name:i})}async function Ho(e){return await Ie.tasks.where("listId").equals(e).filter(r=>r.status!=="archived").sortBy("order")}async function Tv(){return(await Ie.tasks.where("status").equals("archived").toArray()).sort((r,i)=>{const s=r.archivedAt||0,l=i.archivedAt||0;return l!==s?l-s:(i.order||0)-(r.order||0)})}async function kv(e,r,i=null){let s=e;e===null&&(s=await Ev(i));const l=await Ie.tasks.where("listId").equals(s).filter(g=>g.status!=="archived").sortBy("order"),c=Ja(l),h=r===""?"":r.trim();return await Ie.tasks.add({text:h,listId:s,order:c,status:"unchecked"})}async function Av(e,r){const i=r===""?"":r.trim();return await Ie.tasks.update(e,{text:i})}async function Wu(e,r){if(!["unchecked","checked","archived"].includes(r))throw new Error(`Invalid status: ${r}`);const i={status:r};return r==="archived"?i.archivedAt=Date.now():r!=="archived"&&(i.archivedAt=null),await Ie.tasks.update(e,i)}async function Dv(e){const r=await Ie.tasks.get(e);if(!r)throw new Error(`Task ${e} not found`);const i=await Ie.lists.get(r.listId);if(!i)throw new Error(`Task's list ${r.listId} not found`);let s=!1;i.archivedAt!=null&&(await Sv(r.listId),s=!0);const l=await Ie.tasks.where("listId").equals(r.listId).filter(m=>m.status!=="archived"&&m.id!==e).sortBy("order"),c=Ja(l);return{taskUpdated:await Ie.tasks.update(e,{status:"checked",order:c}),listRestored:s}}async function Vo(e,r){if(!r||r.length===0)return;const i=r.map(m=>m.id),l=(await Ie.tasks.bulkGet(i)).filter(m=>m!==void 0);if(l.length===0)return;const c=l.filter(m=>m.listId!==e),h=new Set(c.map(m=>m.listId));await Ie.transaction("rw",Ie.tasks,async()=>{for(let m=0;m<r.length;m++){const g=r[m].id,b=l.find(D=>D.id===g);if(!b)continue;const E={order:m};b.listId!==e&&(E.listId=e),await Ie.tasks.update(g,E)}for(const m of h){const g=await Ie.tasks.where("listId").equals(m).filter(b=>b.status!=="archived").sortBy("order");for(let b=0;b<g.length;b++)await Ie.tasks.update(g[b].id,{order:b})}})}async function Iv(e){const r=Date.now();return await Ie.lists.update(e,{archivedAt:r})}async function Sv(e){return await Ie.lists.update(e,{archivedAt:null})}async function Cv(e){const r=Date.now(),i=await Ie.tasks.where("listId").equals(e).filter(l=>l.status==="unchecked"||l.status==="checked").toArray(),s=i.map(l=>Ie.tasks.update(l.id,{status:"archived",archivedAt:r}));return await Promise.all(s),i.length}async function Yu(e,r){if(!r||r.length===0)return;if(e<0||e>=5)throw new Error(`Invalid column index: ${e}`);const i=r.map(m=>m.id),s=await Ie.lists.bulkGet(i);if(s.filter(m=>!m).length>0)throw new Error("Cannot update order: some lists do not exist");const c=s.filter(m=>m!==void 0),h=c.filter(m=>(m.columnIndex??0)!==e);new Set(h.map(m=>m.columnIndex??0)),await Ie.transaction("rw",Ie.lists,async()=>{const m=new Set;for(let _=0;_<r.length;_++){const T=r[_].id,C=c.find(O=>O.id===T);if(!C)continue;const M={order:_},R=C.columnIndex??0;R!==e&&(M.columnIndex=e,m.add(R)),await Ie.lists.update(T,M)}const b=(await Ie.lists.orderBy("order").toArray()).filter(_=>_.archivedAt==null),E=Array(5).fill(null).map(()=>[]);for(const _ of b){const T=_.columnIndex??0,C=T>=5?4:T;E[C].push(_)}const D=new Set([e,...m]);for(const _ of D){const T=E[_];T.sort((C,M)=>(C.order??0)-(M.order??0));for(let C=0;C<T.length;C++)await Ie.lists.update(T[C].id,{order:C})}})}function ac(e,r,i={}){const{ignoreElements:s=[],shouldClose:l=()=>!0,checkIgnoreClick:c=null}=i;function h(g){const b=typeof e=="function"?e():e;if(b&&!b.contains(g.target)&&!(c&&c(g))){for(const E of s){let D=null;if(typeof E=="function"?D=E():D=E,D&&D.contains(g.target))return}l()&&r()}}const m=setTimeout(()=>{document.addEventListener("click",h)},0);return()=>{clearTimeout(m),document.removeEventListener("click",h)}}function ds(e){return e===""}function Ov(e){return e.trim()===""&&e.length>0}function hs(e){const r=e.trim(),i=Ov(e);return{text:i?"":r,isBlank:i}}const Na=160,oc=150,vs=1056,Lv=816,Ka=16;function _r(e){return e&&(e.isDndShadowItem===!0||typeof e.id=="string"&&e.id.startsWith("id:dnd-shadow-placeholder-"))}function Rv(e,r=5){if(!e||e.length===0)return Array(r).fill(null).map(()=>[]);const i=Array(r).fill(null).map(()=>[]),s=r-1;for(const l of e){let c=l.columnIndex??0;c>=r&&(c=s),i[c].push(l)}for(let l=0;l<i.length;l++)i[l].sort((c,h)=>(c.order??0)-(h.order??0));return i}function Pv(e,r){if(!e||e.length===0)return null;for(let i=0;i<e.length;i++){const s=e[i];if(!Array.isArray(s))continue;const l=s.findIndex(c=>c.id===r);if(l!==-1)return{columnIndex:i,index:l}}return null}function Mv(e,r,i,s){const{columnIndex:l,index:c}=e;let h=l,m=c;if(r==="up"){if(c===0)return null;m=c-1}else if(r==="down"){const g=i[l]||[];if(c===g.length-1)return null;m=c+1}else if(r==="left"){if(l===0)return null;h=l-1,m=(i[h]||[]).length}else if(r==="right"){if(l===s-1)return null;h=l+1,m=(i[h]||[]).length}else return null;return{targetColumnIndex:h,targetIndex:m}}function Nv(e,r,i,s){const l=Pv(e,r);if(!l)return null;const{columnIndex:c,index:h}=l,m=Mv(l,i,e,s);if(!m)return null;const{targetColumnIndex:g,targetIndex:b}=m,E=e.map(R=>Array.isArray(R)?[...R]:[]),D=E[c];if(!D||D.length===0)return null;const[_]=D.splice(h,1);if(!_)return null;const T=E[g];if(!T)return null;const C=Math.min(Math.max(b,0),T.length);i==="left"||i==="right"?T.splice(C,0,{..._,columnIndex:g}):T.splice(C,0,_);const M=[];for(let R=0;R<E.length;R++){const O=E[R]||[];for(let Y=0;Y<O.length;Y++){const V=O[Y];M.push({...V,columnIndex:R,order:Y})}}return{newColumns:E,updatedDraggableLists:M,targetColumnIndex:g,targetColumnItems:(E[g]||[]).map(R=>({id:R.id}))}}var Kv=Ce('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),Fv=Ce('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div></div></div>');function Bv(e,r){sr(r,!0);let i=me(Zt(r.taskText||"")),s=me(!1),l=me(null),c=me(null),h=gn(()=>()=>{if(!r.taskPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const M=24,R=24,O=Ka,V=M+R+O+8-8,z=10,Q=r.taskPosition.top-V,ee=r.taskPosition.left-Ka+z,he=r.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${Q}px; left: ${ee}px; width: ${he}px;`});$e(()=>{r.isOpen&&(I(i,r.taskText||"",!0),I(s,!1))}),$e(()=>{r.isOpen&&p(l)&&setTimeout(()=>{p(l)?.focus(),p(l)?.select(),p(l)instanceof HTMLTextAreaElement&&(p(l).style.height="auto",p(l).style.height=`${Math.min(p(l).scrollHeight,Na)}px`)},0)}),$e(()=>{if(p(l)&&p(l)instanceof HTMLTextAreaElement){const M=()=>{p(l).style.height="auto",p(l).style.height=`${Math.min(p(l).scrollHeight,Na)}px`};return p(l).addEventListener("input",M),()=>{p(l).removeEventListener("input",M)}}});function m(){const M=p(i)??"",R=M.trim();if(R===""&&M.length>0){r.onSave(r.taskId,""),I(s,!1);return}if(M===""||R===""){I(s,!0);return}r.onSave(r.taskId,R),I(s,!1)}function g(){I(i,r.taskText||"",!0),I(s,!1),r.onCancel()}function b(M){M.target===M.currentTarget&&g()}function E(M){if(M.key==="Tab"){if(!p(c))return;const R=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),O=Array.from(p(c).querySelectorAll(R)).filter(ee=>!(!(ee instanceof HTMLElement)||ee.hasAttribute("disabled")||ee.getAttribute("aria-hidden")==="true"));if(O.length===0)return;const Y=document.activeElement,V=O.indexOf(Y);let z;M.shiftKey?V<=0?z=O.length-1:z=V-1:V===-1||V===O.length-1?z=0:z=V+1,M.preventDefault(),M.stopPropagation();const Q=O[z];Q&&Q instanceof HTMLElement&&Q.focus()}else M.key==="Escape"?g():M.key==="Enter"&&!M.shiftKey&&document.activeElement===p(l)&&(M.preventDefault(),m())}function D(){r.onArchive&&r.onArchive(r.taskId)}var _=tr(),T=kt(_);{var C=M=>{var R=Fv();R.__click=b,R.__keydown=E;var O=ke(R);O.__click=_e=>_e.stopPropagation();var Y=Le(ke(O),2),V=ke(Y);En(V,_e=>I(l,_e),()=>p(l));var z=Le(V,2);{var Q=_e=>{var re=Kv();we(_e,re)};ct(z,_e=>{p(s)&&_e(Q)})}var ee=Le(Y,2),he=ke(ee);he.__click=D;var ve=Le(he,2),se=ke(ve);se.__click=g;var be=Le(se,2);be.__click=m,En(O,_e=>I(c,_e),()=>p(c)),at(_e=>{ar(O,_e),ar(V,`width: ${oc}px;`),bt(V,"aria-describedby",p(s)?"validation-message":void 0),be.disabled=p(s),bt(be,"aria-label",p(s)?"Save disabled: task cannot be empty":"Save task changes")},[()=>p(h)()]),Is(V,()=>p(i),_e=>I(i,_e)),we(M,R)};ct(T,M=>{r.isOpen&&M(C)})}we(e,_),ur()}Sr(["click","keydown"]);var jv=Ce('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),zv=Ce('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-red-600 border border-red-300 rounded hover:bg-red-50" aria-label="Archive this list">Archive</button> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel editing and discard changes">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button></div></div>',1),Gv=Ce('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-gray-600">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50" aria-label="Cancel archiving">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700" aria-label="Confirm archive list">Archive</button></div>',1),Uv=Ce('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed box-border" role="document"><!></div></div>');function Hv(e,r){sr(r,!0);let i=me(Zt(r.listName||"")),s=me(!1),l=me(null),c=me(null),h=me("edit"),m=gn(()=>()=>{if(!r.listPosition||!r.isOpen)return"background-color: white; z-index: 10000;";const Y=24,V=24,z=Ka,ee=Y+V+z+8-8,he=r.listPosition.top-ee,ve=r.listPosition.left-Ka,se=Math.max(r.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${he}px; left: ${ve}px; width: ${se}px; max-width: ${se}px; box-sizing: border-box;`});$e(()=>{r.isOpen&&(I(i,r.listName||"",!0),I(s,!1),I(h,"edit"))}),$e(()=>{r.isOpen&&p(l)&&setTimeout(()=>{p(l)?.focus(),p(l)?.select()},0)});function g(){const V=(p(i)??"").trim();if(V===""){I(s,!0);return}r.onSave(r.listId,V),I(s,!1)}function b(){I(i,r.listName||"",!0),I(s,!1),r.onCancel()}function E(Y){Y.target===Y.currentTarget&&b()}function D(Y){if(Y.key==="Tab"){if(!p(c))return;const V=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),z=Array.from(p(c).querySelectorAll(V)).filter(se=>!(!(se instanceof HTMLElement)||se.hasAttribute("disabled")||se.getAttribute("aria-hidden")==="true"));if(z.length===0)return;const Q=document.activeElement,ee=z.indexOf(Q);let he;Y.shiftKey?ee<=0?he=z.length-1:he=ee-1:ee===-1||ee===z.length-1?he=0:he=ee+1,Y.preventDefault(),Y.stopPropagation();const ve=z[he];ve&&ve instanceof HTMLElement&&ve.focus()}else Y.key==="Escape"?p(h)==="confirm-archive"?C():b():Y.key==="Enter"&&!Y.shiftKey&&p(h)==="edit"&&Y.target===p(l)&&(Y.preventDefault(),g())}function _(){I(h,"confirm-archive")}function T(){r.onArchive(r.listId),b()}function C(){I(h,"edit")}var M=tr(),R=kt(M);{var O=Y=>{var V=Uv();V.__click=E,V.__keydown=D;var z=ke(V);z.__click=ve=>ve.stopPropagation();var Q=ke(z);{var ee=ve=>{var se=zv(),be=Le(kt(se),2),_e=ke(be);En(_e,Ve=>I(l,Ve),()=>p(l));var re=Le(_e,2);{var Te=Ve=>{var Ye=jv();we(Ve,Ye)};ct(re,Ve=>{p(s)&&Ve(Te)})}var Fe=Le(be,2),He=ke(Fe);He.__click=_;var tt=Le(He,2),ye=ke(tt);ye.__click=b;var Et=Le(ye,2);Et.__click=g,at(()=>{bt(_e,"aria-describedby",p(s)?"validation-message":void 0),Et.disabled=p(s),bt(Et,"aria-label",p(s)?"Save disabled: list name cannot be empty":"Save list name changes")}),Is(_e,()=>p(i),Ve=>I(i,Ve)),we(ve,se)},he=ve=>{var se=tr(),be=kt(se);{var _e=re=>{var Te=Gv(),Fe=Le(kt(Te),4),He=ke(Fe);He.__click=C;var tt=Le(He,2);tt.__click=T,we(re,Te)};ct(be,re=>{p(h)==="confirm-archive"&&re(_e)},!0)}we(ve,se)};ct(Q,ve=>{p(h)==="edit"?ve(ee):ve(he,!1)})}En(z,ve=>I(c,ve),()=>p(c)),at(ve=>ar(z,ve),[()=>p(m)()]),we(Y,V)};ct(R,Y=>{r.isOpen&&Y(O)})}we(e,M),ur()}Sr(["click","keydown"]);var Vv=Ce('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <div class="flex gap-2"><textarea class="flex-1 break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto" rows="1"></textarea> <button aria-label="Save new task">Save</button></div>',1),Wv=Ce('<span class="drag-handle text-gray-400 select-none" aria-hidden="true" style="visibility: hidden;"></span> <input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1" role="button" tabindex="0"> </span>',1),Yv=Ce('<div class="flex items-center gap-2 p-2 border rounded hover:bg-gray-50 w-full print:hidden add-task-container add-task-button mt-2 svelte-jtbpvm"><!></div>');function Wo(e,r){sr(r,!0);let i=ze(r,"isInputActive",11,!1),s=ze(r,"inputValue",3,""),l=ze(r,"buttonText",3,"Add Task"),c=ze(r,"placeholder",3,"Add new task..."),h=ze(r,"marginLeft",3,!1),m=ze(r,"containerElement",15,null),g=ze(r,"textareaElement",15,null),b=me(null),E=me(null);$e(()=>{m(p(E)),g(p(b))}),$e(()=>{i()&&p(b)&&setTimeout(()=>{p(b)?.focus(),p(b)instanceof HTMLTextAreaElement&&(p(b).style.height="auto",p(b).style.height=`${Math.min(p(b).scrollHeight,Na)}px`)},0)}),$e(()=>{if(p(b)&&p(b)instanceof HTMLTextAreaElement){const O=()=>{p(b).style.height="auto",p(b).style.height=`${Math.min(p(b).scrollHeight,Na)}px`};return p(b).addEventListener("input",O),()=>{p(b).removeEventListener("input",O)}}});function D(O){O.key==="Enter"&&!O.shiftKey?(O.preventDefault(),r.onSave?.()):O.key==="Escape"?r.onEscape?.(O):O.key==="Tab"&&r.onSave?.({closeAfterSave:!0})}function _(O){(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),r.onActivate?.())}var T=Yv(),C=ke(T);{var M=O=>{var Y=Vv(),V=Le(kt(Y),4),z=ke(V);z.__input=ee=>r.onInputChange?.(ee.currentTarget.value),z.__keydown=D,En(z,ee=>I(b,ee),()=>p(b));var Q=Le(z,2);Q.__click=function(...ee){r.onSave?.apply(this,ee)},at(()=>{bt(z,"placeholder",c()),Jd(z,s())}),we(O,Y)},R=O=>{var Y=Wv(),V=Le(kt(Y),4);V.__click=function(...Q){r.onActivate?.apply(this,Q)},V.__keydown=_;var z=ke(V);at(()=>{bt(V,"aria-label",r.ariaLabel||l()),Qn(z,l())}),we(O,Y)};ct(C,O=>{i()?O(M):O(R,!1)})}En(T,O=>I(E,O),()=>p(E)),at(()=>ar(T,h()?"margin-left: 1.5rem;":"")),we(e,T),ur()}Sr(["input","keydown","click"]);var Zv=Ce('<button class="px-2 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded">Archive</button>'),qv=Ce('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-full m-0 list-none svelte-k6mizj"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),Qv=Ce('<div class="empty-list-add-task-wrapper svelte-k6mizj"><!></div>'),Xv=Ce('<div class="task-list-wrapper m-0 p-0 svelte-k6mizj"><ul></ul> <!></div>'),Jv=Ce("<p>Loading tasks...</p> <!>",1),$v=Ce('<div class="flex flex-col gap-1 m-0 p-0 svelte-k6mizj"><div class="flex items-center gap-2 m-0 p-0"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none svelte-k6mizj" title="Drag to reorder list" tabindex="-1" aria-hidden="true"></span> <h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 p-0 leading-none svelte-k6mizj"> </h2></div> <!></div> <!> <!>',1);function ep(e,r){sr(r,!0);const i=()=>ka(p(m),"$tasksQuery",s),[s,l]=Ss();let c=ze(r,"allLists",19,()=>[]),h=ze(r,"stableLists",19,()=>[]),m=me(null),g=me(Zt([])),b=me(!1),E=me(!1),D=me(null),_=me(""),T=me(null),C=me(null),M=me(null),R=me(!1),O=me(null),Y=me(null),V=me(null),z=me(null),Q=me(null),ee=me(null),he=me(!1),ve=me(!1),se=me(null),be=me(null);function _e(W){return Array.isArray(W)?[...W].sort((K,G)=>{const ue=K?.columnIndex??0,ce=G?.columnIndex??0;if(ue!==ce)return ue-ce;const Xe=K?.order??0,xe=G?.order??0;if(Xe!==xe)return Xe-xe;const Oe=K?.id??0,st=G?.id??0;return Oe-st}):[]}function re(W,K,G){const ue=_e(K);if(!ue.length)return null;const ce=ue.findIndex(Xe=>Xe.id===W);return ce===-1?null:G==="next"?ce>=ue.length-1?null:ue[ce+1].id:G==="prev"?ce<=0?null:ue[ce-1].id:null}$e(()=>{h().some(K=>K.id===r.listId)&&r.listId?(!p(m)||p(be)!==r.listId)&&(Aa(I(m,Ia(()=>Ho(r.listId)),!0),"$tasksQuery",s),I(be,r.listId,!0)):(Aa(I(m,null),"$tasksQuery",s),I(be,null))}),$e(()=>{i()&&Array.isArray(i())&&I(g,i().filter(W=>W.status==="unchecked"||W.status==="checked"),!0)}),$e(()=>{if(!p(V))return;function W(K){const G=K.target;if((K.key==="Enter"||K.key===" ")&&G instanceof HTMLElement&&G.tagName==="H2"&&G.hasAttribute("role")&&G.getAttribute("role")==="button"){const ue=p(V)?.querySelector('h2[role="button"]');if(ue&&G===ue){K.preventDefault(),K.stopImmediatePropagation();const ce=G.getBoundingClientRect();I(O,{top:ce.top,left:ce.left,width:ce.width,height:ce.height},!0),I(Y,G,!0),I(R,!0)}}}return p(V).addEventListener("keydown",W,!0),()=>{p(V)&&p(V).removeEventListener("keydown",W,!0)}}),$e(()=>{if(!p(z))return;function W(K){const G=K.target;if((K.key==="Enter"||K.key===" ")&&G instanceof HTMLElement&&G.hasAttribute("role")&&G.getAttribute("role")==="button"){const ue=p(z)?.querySelector('span[role="button"]');ue&&G===ue&&(K.preventDefault(),K.stopImmediatePropagation(),Ve())}}return p(z).addEventListener("keydown",W,!0),()=>{p(z)&&p(z).removeEventListener("keydown",W,!0)}}),$e(()=>{if(!p(M))return;async function W(K){const G=K.target;if((K.key==="Enter"||K.key===" ")&&G instanceof HTMLElement&&G.hasAttribute("data-no-drag")){K.preventDefault(),K.stopImmediatePropagation();const ue=G.closest("li[data-id]");if(ue){const ce=parseInt(ue.getAttribute("data-id")),Xe=p(g).find(xe=>xe.id===ce);if(Xe){const xe=G.getBoundingClientRect();I(T,{top:xe.top,left:xe.left,width:xe.width,height:xe.height},!0),I(C,G,!0),I(D,ce,!0),I(_,Xe.text,!0),I(E,!0)}}return}if(K.key==="ArrowDown"||K.key==="ArrowUp"){const ue=document.activeElement;if(!ue)return;const ce=ue.closest("li[data-id]");if(!ce||!p(M).contains(ce))return;const Xe=ce.getAttribute("data-id");if(!Xe)return;const xe=parseInt(Xe);if(!p(g).find(je=>je.id===xe))return;const st=p(g).findIndex(je=>je.id===xe),yt=st===0,Kt=st===p(g).length-1;if(K.key==="ArrowDown"&&Kt){K.preventDefault(),K.stopImmediatePropagation();const je=re(r.listId,c(),"next");je!=null&&await Te(xe,je)}else if(K.key==="ArrowUp"&&yt){K.preventDefault(),K.stopImmediatePropagation();const je=re(r.listId,c(),"prev");je!=null&&await Fe(xe,je)}}}return p(M).addEventListener("keydown",W,!0),()=>{p(M).removeEventListener("keydown",W,!0)}});async function Te(W,K){try{const G=await Ho(K),ue=[{id:W},...G];await Vo(K,ue)}catch(G){console.error("Error moving task to next list:",G)}}async function Fe(W,K){try{const ue=[...await Ho(K),{id:W}];await Vo(K,ue)}catch(G){console.error("Error moving task to previous list:",G)}}function He(W){I(g,W.detail.items.filter(K=>K&&typeof K.id=="number"),!0)}function tt(W,K){const G=W.key,ue=W.currentTarget,ce=W.target;!(ue instanceof HTMLElement)||ue!==ce||(G==="Enter"||G===" "?p(ve)?(I(ve,!1),I(se,K,!0),I(ee,ue,!0),I(he,!0)):(I(ve,!0),I(se,K,!0)):G==="Escape"&&p(ve)&&(I(ve,!1),I(se,K,!0),I(ee,ue,!0),I(he,!0)))}function ye(W,K){const G=W.currentTarget;p(ve)&&p(se)===K&&(I(ve,!1),I(ee,G,!0),I(he,!0))}$e(()=>{if(!p(M))return;async function W(K){const G=K.key;if(G==="Tab"&&p(he)&&p(ee)){if(K.preventDefault(),K.stopImmediatePropagation(),K.stopPropagation(),I(he,!1),typeof document<"u"){let je=p(ee);if((!(je instanceof HTMLElement)||!document.contains(je))&&p(z)){const Fn=p(z).querySelector('span[role="button"]');Fn&&Fn instanceof HTMLElement&&(je=Fn)}je&&je instanceof HTMLElement&&je.focus()}return}if(G!=="ArrowDown"&&G!=="ArrowUp")return;const ue=document.activeElement;if(!ue)return;const ce=ue.closest("li[data-id]");if(!ce||!p(M).contains(ce))return;const Xe=ce.getAttribute("data-id");if(!Xe)return;const xe=parseInt(Xe);if(!p(g).find(je=>je.id===xe))return;const st=p(g).findIndex(je=>je.id===xe),yt=st===0,Kt=st===p(g).length-1;if(G==="ArrowDown"&&Kt){K.preventDefault(),K.stopImmediatePropagation(),K.stopPropagation();const je=re(r.listId,c(),"next");je!=null&&await Te(xe,je)}else if(G==="ArrowUp"&&yt){K.preventDefault(),K.stopImmediatePropagation(),K.stopPropagation();const je=re(r.listId,c(),"prev");je!=null&&await Fe(xe,je)}}return document.addEventListener("keydown",W,!0),()=>{document.removeEventListener("keydown",W,!0)}});async function Et(W){const K=W.detail.items.filter(G=>G&&typeof G.id=="number");I(g,K,!0);try{await Vo(r.listId,K)}catch(G){console.error("Error updating task order:",G)}}function Ve(){I(b,!0)}async function Ye(W){if(W.key==="Escape"){if(I(he,!0),p(z)){const K=p(z).querySelector('span[role="button"]');K&&K instanceof HTMLElement?I(ee,K,!0):I(ee,null)}else I(ee,null);I(b,!1),r.onInputChange(""),await qn(),await qn(),await new Promise(K=>requestAnimationFrame(K)),await new Promise(K=>setTimeout(K,200))}}$e(()=>{if(p(b))return ac(()=>p(Q),()=>{p(b)&&(I(b,!1),r.onInputChange(""))},{ignoreElements:[],checkIgnoreClick:W=>{if(!p(z))return!1;const K=p(z).querySelector("button");return!!(K&&K.contains(W.target))},shouldClose:()=>p(Q)&&p(Q).value.trim()!==""?!1:!r.newTaskInput||r.newTaskInput.trim()===""})});async function pt(W={}){const K=W&&typeof W=="object"&&W.closeAfterSave===!0;let G=r.newTaskInput||"";if(p(Q)&&(G=(p(Q).value||"").toString()),G=(G||"").toString(),ds(G)){I(b,!1),r.onInputChange(""),await qn(),await qn(),await new Promise(ce=>requestAnimationFrame(ce)),await new Promise(ce=>setTimeout(ce,200));return}const{text:ue}=hs(G);try{await kv(r.listId,ue),r.onInputChange(""),K&&I(b,!1)}catch(ce){console.error("Error creating task:",ce)}}async function nt(W,K){try{await Wu(W,K==="unchecked"?"checked":"unchecked")}catch(G){console.error("Error updating task status:",G)}}async function ot(W){await Wu(W,"archived")}function mt(){if(!p(M))return null;const W=p(M).querySelector("li[data-id]");if(W){const K=W.querySelector('span[role="button"]');if(K&&K instanceof HTMLElement)return K}return null}function Z(W=20,K=10){if(!p(V))return;const G=(ue=0)=>{if(p(z)){const ce=p(z).querySelector('span[role="button"]');if(ce&&ce instanceof HTMLElement){ce.focus();return}}ue<W&&setTimeout(()=>G(ue+1),K)};G()}async function H(W){try{if(await ot(W),p(D)===W){const K=p(C);I(E,!1),I(D,null),I(_,""),I(T,null),I(C,null),await qn(),await new Promise(G=>setTimeout(G,10)),setTimeout(()=>{const G=(ue=0)=>{const ce=mt();ce?ce.focus():ue<20?setTimeout(()=>G(ue+1),10):Z(40,10)};G()},20)}}catch(K){console.error("Error archiving task:",K)}}function oe(W,K,G){const ue=G?.currentTarget||G?.target;if(ue){const ce=ue.getBoundingClientRect();I(T,{top:ce.top,left:ce.left,width:ce.width,height:ce.height},!0),I(C,ue,!0)}I(D,W,!0),I(_,K,!0),I(E,!0)}function Ae(W,K,G){const ue=G.key;if(ue==="Enter"||ue===" "){G.preventDefault(),G.stopImmediatePropagation();const ce=G.currentTarget;if(ce){const Xe=ce.getBoundingClientRect();I(T,{top:Xe.top,left:Xe.left,width:Xe.width,height:Xe.height},!0),I(C,ce,!0),I(D,W,!0),I(_,K,!0),I(E,!0)}}else if(ue==="Escape"){G.preventDefault(),G.stopImmediatePropagation();const ce=G.currentTarget;ce&&ce instanceof HTMLElement&&(I(ee,ce,!0),I(he,!0),ce.blur())}}async function Pe(W,K){try{await Av(W,K),I(E,!1);const G=p(C);I(D,null),I(_,""),I(T,null),I(C,null),G&&G instanceof HTMLElement&&setTimeout(()=>{G.focus()},0)}catch(G){console.error("Error updating task text:",G)}}function ht(){const W=p(C);I(E,!1),I(D,null),I(_,""),I(T,null),I(C,null),W&&W instanceof HTMLElement&&setTimeout(()=>{W.focus()},0)}async function Ze(W){p(C),await H(W),setTimeout(()=>{if(typeof document>"u")return;const K=document.activeElement;p(V)&&(!K||!p(V).contains(K))&&Z(20,10)},10)}function We(W){const K=W?.currentTarget||W?.target;if(K){const G=K.getBoundingClientRect();I(O,{top:G.top,left:G.left,width:G.width,height:G.height},!0),I(Y,K,!0)}I(R,!0)}function fe(W){if(W.key==="Enter"||W.key===" "){W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation();const K=W.currentTarget;if(K){const G=K.getBoundingClientRect();I(O,{top:G.top,left:G.left,width:G.width,height:G.height},!0),I(Y,K,!0),I(R,!0)}}}async function Ge(W,K){try{await xv(W,K),I(R,!1);const G=p(Y);I(O,null),I(Y,null),G&&G instanceof HTMLElement&&setTimeout(()=>{G.focus()},0)}catch(G){console.error("Error updating list name:",G)}}function Ee(){const W=p(Y);I(R,!1),I(O,null),I(Y,null),W&&W instanceof HTMLElement&&setTimeout(()=>{W.focus()},0)}async function qe(W){try{await Cv(W),await Iv(W)}catch(K){console.error("Error archiving list:",K)}}var Qe=$v(),Pt=kt(Qe),Cr=ke(Pt),ie=Le(ke(Cr),2);ie.__click=We,ie.__keydown=fe;var Kn=ke(ie),Or=Le(Cr,2);{var Tn=W=>{var K=Xv(),G=ke(K);Er(G,21,()=>p(g),xe=>xe.id,(xe,Oe)=>{var st=qv(),yt=Le(ke(st),2);yt.__change=()=>nt(p(Oe).id,p(Oe).status),yt.__keydown=gt=>{(gt.key==="Enter"||gt.key===" ")&&(gt.preventDefault(),gt.stopPropagation(),nt(p(Oe).id,p(Oe).status))};var Kt=Le(yt,2);Kt.__click=gt=>oe(p(Oe).id,p(Oe).text,gt),Kt.__keydown=gt=>Ae(p(Oe).id,p(Oe).text,gt);var je=ke(Kt),Fn=Le(Kt,2);{var $a=gt=>{var rn=Zv();rn.__click=()=>H(p(Oe).id),at(()=>bt(rn,"aria-label",`Archive task: ${p(Oe).text||"blank task"}`)),we(gt,rn)};ct(Fn,gt=>{p(Oe).status==="checked"&&gt($a)})}at(()=>{bt(st,"data-id",p(Oe).id),jl(yt,p(Oe).status==="checked"),bt(yt,"aria-label",`Mark task "${p(Oe).text||"blank task"}" as ${p(Oe).status==="checked"?"unchecked":"checked"}`),Ti(Kt,1,Bl(p(Oe).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1":"cursor-pointer hover:underline break-words flex-1")),bt(Kt,"aria-label",`Edit task: ${p(Oe).text||"blank task"}`),Qn(je,p(Oe).text||"")}),Sn("keydown",st,gt=>tt(gt,p(Oe).id),!0),Sn("blur",st,gt=>ye(gt,p(Oe).id)),we(xe,st)}),En(G,xe=>I(M,xe),()=>p(M)),As(G,(xe,Oe)=>Ns?.(xe,Oe),()=>({items:p(g),type:"task",zoneTabIndex:-1}));var ue=Le(G,2);{var ce=xe=>{var Oe=Qv(),st=ke(Oe);Wo(st,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:pt,onEscape:Ye,onActivate:Ve,buttonText:"Add your first task",placeholder:"Add new task...",get ariaLabel(){return`Add your first task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return p(b)},set isInputActive(yt){I(b,yt,!0)},get containerElement(){return p(z)},set containerElement(yt){I(z,yt,!0)},get textareaElement(){return p(Q)},set textareaElement(yt){I(Q,yt,!0)}}),we(xe,Oe)},Xe=xe=>{Wo(xe,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:pt,onEscape:Ye,onActivate:Ve,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return p(b)},set isInputActive(Oe){I(b,Oe,!0)},get containerElement(){return p(z)},set containerElement(Oe){I(z,Oe,!0)},get textareaElement(){return p(Q)},set textareaElement(Oe){I(Q,Oe,!0)}})};ct(ue,xe=>{p(g).length===0?xe(ce):xe(Xe,!1)})}at(()=>Ti(G,1,`space-y-2 m-0 p-0 list-none ${p(g).length===0?"empty-drop-zone min-h-[24px]":""}`,"svelte-k6mizj")),Sn("consider",G,He),Sn("finalize",G,Et),we(W,K)},Ne=W=>{var K=Jv(),G=Le(kt(K),2);Wo(G,{get inputValue(){return r.newTaskInput},get onInputChange(){return r.onInputChange},onSave:pt,onEscape:Ye,onActivate:Ve,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${r.listName??""}`},marginLeft:!1,get isInputActive(){return p(b)},set isInputActive(ue){I(b,ue,!0)},get containerElement(){return p(z)},set containerElement(ue){I(z,ue,!0)},get textareaElement(){return p(Q)},set textareaElement(ue){I(Q,ue,!0)}}),we(W,K)};ct(Or,W=>{p(m)&&i()!==void 0?W(Tn):W(Ne,!1)})}En(Pt,W=>I(V,W),()=>p(V));var cn=Le(Pt,2);Bv(cn,{get isOpen(){return p(E)},get taskId(){return p(D)},get taskText(){return p(_)},get taskPosition(){return p(T)},onSave:Pe,onCancel:ht,onArchive:Ze});var ei=Le(cn,2);Hv(ei,{get isOpen(){return p(R)},get listId(){return r.listId},get listName(){return r.listName},get listPosition(){return p(O)},onSave:Ge,onCancel:Ee,onArchive:qe}),at(()=>{bt(Pt,"data-list-id",r.listId),bt(ie,"aria-label",`Rename list: ${r.listName}`),Qn(Kn,r.listName)}),we(e,Qe),ur(),l()}Sr(["click","keydown","change"]);var tp=Ce('<div class="flex flex-col mb-6 svelte-785piu" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),np=Ce('<div class="flex flex-col mb-6 svelte-785piu"></div>'),rp=Ce('<div class="empty-drop-zone min-h-[48px]"></div>'),ip=Ce('<h2><div class="flex items-center gap-2"><input type="text" class="create-list-input cursor-pointer hover:underline svelte-785piu" placeholder="List name..." aria-label="Enter list name"/> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" aria-label="Create list">Save</button></div></h2>'),ap=Ce('<h2 role="button" tabindex="0" aria-label="Create new list">Create new list</h2>'),op=Ce('<div class="flex flex-col min-w-0 border-r border-gray-300 last:border-r-0 pt-0 svelte-785piu"><div class="flex flex-col pt-0"><!> <!></div> <!></div>');function sp(e,r){sr(r,!1);let i=ze(r,"columnIndex",8),s=ze(r,"columnLists",8),l=ze(r,"stableLists",8),c=ze(r,"newTaskInputs",8),h=ze(r,"createListColumnIndex",8),m=ze(r,"createListInput",12),g=ze(r,"createListInputElement",12),b=ze(r,"keyboardListDrag",8),E=ze(r,"allLists",8),D=ze(r,"onInputChange",8),_=ze(r,"onListKeyboardKeydown",8),T=ze(r,"onListConsider",8),C=ze(r,"onListFinalize",8),M=ze(r,"onCreateListClick",8),R=ze(r,"onCreateListKeydown",8),O=ze(r,"onCreateListInputEscape",8),Y=ze(r,"onCreateList",8),V=ze(r,"onCreateListOnTab",8);eh();var z=op(),Q=ke(z),ee=ke(Q);Er(ee,3,s,re=>re.id,(re,Te)=>{const Fe=In(()=>(Bt(_r),p(Te),rt(()=>_r(p(Te))))),He=In(()=>(Bt(l()),p(Te),rt(()=>l().find(nt=>nt.id===p(Te).id)))),tt=In(()=>!p(He)&&!p(Fe)?p(Te):null),ye=In(()=>p(He)||p(tt));var Et=tr(),Ve=kt(Et);{var Ye=nt=>{var ot=tp(),mt=ke(ot);{let Z=In(()=>(Bt(p(ye)),rt(()=>p(ye).name??"Unnamed list"))),H=In(()=>(Bt(c()),Bt(p(ye)),rt(()=>c()[p(ye).id]||"")));ep(mt,{get listId(){return Bt(p(ye)),rt(()=>p(ye).id)},get listName(){return p(Z)},get newTaskInput(){return p(H)},onInputChange:oe=>D()(p(ye).id,oe),get allLists(){return E()},get stableLists(){return l()}})}at(()=>{bt(ot,"data-id",(p(Te),rt(()=>p(Te).id))),bt(ot,"aria-label",(Bt(p(ye)),rt(()=>`List: ${p(ye).name??"Unnamed list"}`))),bt(ot,"aria-pressed",(Bt(b()),Bt(p(ye)),rt(()=>b().active&&b().listId===p(ye).id?"true":"false")))}),Sn("keydown",ot,Z=>_()(Z,p(ye).id),!0),we(nt,ot)},pt=nt=>{var ot=np();at(()=>bt(ot,"data-id",(p(Te),rt(()=>p(Te).id)))),we(nt,ot)};ct(Ve,nt=>{p(ye)?nt(Ye):nt(pt,!1)})}we(re,Et)});var he=Le(ee,2);{var ve=re=>{var Te=rp();we(re,Te)};ct(he,re=>{Bt(s()),rt(()=>s().length===0)&&re(ve)})}As(Q,(re,Te)=>Ns?.(re,Te),()=>({items:s(),type:"list",zoneTabIndex:-1}));var se=Le(Q,2);{var be=re=>{var Te=ip(),Fe=ke(Te),He=ke(Fe);He.__keydown=ye=>{ye.key==="Enter"&&!ye.shiftKey?(ye.preventDefault(),Y()(i())):ye.key==="Escape"?O()(ye):ye.key==="Tab"&&V()(i())},En(He,ye=>g(ye),()=>g());var tt=Le(He,2);tt.__click=()=>Y()(i()),at(()=>Ti(Te,1,`print:hidden m-0 p-0 create-list-wrapper ${Bt(s()),rt(()=>s().length===0?"create-list-empty-column":"")??""}`,"svelte-785piu")),Is(He,m),we(re,Te)},_e=re=>{var Te=ap();Te.__click=()=>M()(i()),Te.__keydown=Fe=>R()(Fe,i()),at(()=>Ti(Te,1,`cursor-pointer hover:underline print:hidden m-0 p-0 create-list-wrapper ${Bt(s()),rt(()=>s().length===0?"create-list-empty-column":"")??""}`,"svelte-785piu")),we(re,Te)};ct(se,re=>{h()===i()?re(be):re(_e,!1)})}at(()=>bt(z,"data-column-index",i())),Sn("consider",Q,function(...re){T()?.apply(this,re)}),Sn("finalize",Q,function(...re){C()?.apply(this,re)}),we(e,z),ur()}Sr(["keydown","click"]);var up=Ce('<li class="flex items-center gap-2 p-2 border rounded cursor-move hover:bg-gray-50 w-fit"><span class="drag-handle text-gray-400 cursor-grab active:cursor-grabbing select-none" title="Drag to reorder" tabindex="-1" aria-hidden="true"></span> <input type="checkbox" disabled class="cursor-pointer opacity-50" aria-hidden="true" tabindex="-1"/> <span> </span></li>'),lp=Ce('<div class="relative print:hidden"><ul class="m-0 p-0 list-none min-h-0 pb-2"></ul></div>');function cp(e,r){let i=ze(r,"createListDropZoneElement",12),s=ze(r,"createListDropZoneItems",8),l=ze(r,"onConsider",8),c=ze(r,"onFinalize",8);var h=lp(),m=ke(h);Er(m,5,s,g=>g.id,(g,b)=>{var E=up(),D=Le(ke(E),2),_=Le(D,2),T=ke(_);at(()=>{bt(E,"data-id",(p(b),rt(()=>p(b).id))),jl(D,(p(b),rt(()=>p(b).status==="checked"))),Ti(_,1,Bl((p(b),rt(()=>p(b).status==="checked"?"line-through break-words":"break-words")))),ar(_,`width: ${oc}px;`),Qn(T,(p(b),rt(()=>p(b).text||"")))}),we(g,E)}),En(m,g=>i(g),()=>i()),As(m,(g,b)=>Ns?.(g,b),()=>({items:s(),type:"task"})),Sn("consider",m,function(...g){l()?.apply(this,g)}),Sn("finalize",m,function(...g){c()?.apply(this,g)}),we(e,h)}var fp=Ce("<p>Loading...</p>"),dp=Ce('<div class="grid grid-cols-5 gap-4 w-full"></div> <!>',1),hp=Ce('<div class="w-full h-full p-4 overflow-auto"><!></div>');function vp(e,r){sr(r,!0);const i=()=>ka(c,"$lists",s),[s,l]=Ss();let c=Ia(()=>bv()),h=gn(()=>i()||[]),m=me(Zt([])),g=me(Zt({})),b=me(null),E=me(""),D=me(null),_=me(Zt([])),T=me(null),C=me(Zt({active:!1,listId:null})),M=me(null),R=me(!1);$e(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(p(g)).length===0){const Z={};for(const H of i())Z[H.id]="";I(g,Z,!0)}}),$e(()=>{if(i()&&Array.isArray(i())&&i().length>0){const Z={...p(g)};let H=!1;for(const oe of i())oe.id in Z||(Z[oe.id]="",H=!0);H&&I(g,Z,!0)}});let O=me(0);$e(()=>{if(i()&&Array.isArray(i())){const Z=i().map(H=>({id:H.id,name:H.name,order:H.order,columnIndex:H.columnIndex}));Z.length!==p(O)&&(console.log("[DRAG] draggableLists updated from liveQuery:",{previousCount:p(O),newCount:Z.length}),I(O,Z.length,!0)),I(m,Z,!0)}else p(O)>0&&(console.log("[DRAG] draggableLists cleared (no lists)"),I(O,0)),I(m,[],!0)});const Y=5;let V=gn(()=>Rv(p(m),Y));async function z(Z,H){const oe=p(V);if(!oe||oe.length===0)return;const Ae=Nv(oe,Z,H,Y);if(!Ae)return;const{updatedDraggableLists:Pe,targetColumnIndex:ht,targetColumnItems:Ze}=Ae;I(m,Pe,!0);try{await Yu(ht,Ze)}catch(We){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",We)}p(C).active&&p(C).listId===Z&&await ee(Z)}function Q(Z){return p(C).active===!0&&p(C).listId===Z}async function ee(Z){if(typeof document>"u")return;await qn();const H=Array.from(document.querySelectorAll(`[data-id="${Z}"]`));let oe=H.find(Ae=>Ae instanceof HTMLElement&&Ae.getAttribute("role")==="group");oe||(oe=H.find(Ae=>Ae instanceof HTMLElement&&Ae.tagName==="DIV")),oe instanceof HTMLElement&&oe.focus()}function he(Z){I(R,!1),I(C,{active:!0,listId:Z},!0)}function ve(){p(C).listId!=null&&(I(M,p(C).listId,!0),I(R,!0)),I(C,{active:!1,listId:null},!0)}function se(){if(typeof document>"u")return;const Z=document.activeElement;Z&&Z instanceof HTMLElement&&Z.blur()}function be(Z,H){const oe=Z.currentTarget,Ae=Z.target,Pe=Z.key;if(!Q(H)){(Pe==="Enter"||Pe===" ")&&oe instanceof HTMLElement&&oe===Ae&&(Z.preventDefault(),Z.stopPropagation(),Z.stopImmediatePropagation(),H!=null&&he(H));return}}$e(()=>{if(typeof document>"u")return;function Z(H){const oe=H.key,Ae=p(C).active===!0,Pe=p(C).listId;if(!Ae&&oe==="Tab"&&p(R)&&p(M)!=null){H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),I(R,!1),ee(p(M));return}if(!(!Ae||Pe==null)){if(oe==="ArrowUp"){H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),z(Pe,"up");return}if(oe==="ArrowDown"){H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),z(Pe,"down");return}if(oe==="ArrowLeft"){H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),z(Pe,"left");return}if(oe==="ArrowRight"){H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),z(Pe,"right");return}if(oe==="Escape"||oe==="Enter"||oe===" "){H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),ve(),se();return}if(oe==="Tab"){H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),ve(),se();return}}}return document.addEventListener("keydown",Z,!0),()=>{document.removeEventListener("keydown",Z,!0)}});function _e(Z,H){p(g)[Z]=H}function re(Z){I(b,Z,!0)}function Te(Z,H){(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),Z.stopPropagation(),re(H))}function Fe(Z){Z.key==="Escape"&&(I(b,null),I(E,""))}$e(()=>{if(p(b)!==null)return ac(p(D),()=>{p(b)!==null&&(I(b,null),I(E,""))},{ignoreElements:[],checkIgnoreClick:Z=>{const H=Z.target.closest("button");return H&&H.textContent?.trim()==="Save"},shouldClose:()=>!p(E)||p(E).trim()===""})}),$e(()=>{p(b)!==null&&p(D)&&setTimeout(()=>{p(D)?.focus()},0)});async function He(Z){const H=p(E)||"";if(ds(H)){I(b,null),I(E,"");return}const{text:oe,isBlank:Ae}=hs(H);if(Ae){I(b,null),I(E,"");return}try{await Vu(oe,Z),I(E,""),await qn(),p(D)&&setTimeout(()=>{p(D)?.focus()},0)}catch(Pe){console.error("Error creating list:",Pe)}}async function tt(Z){const H=p(E)||"";if(ds(H)){I(b,null),I(E,"");return}const{text:oe,isBlank:Ae}=hs(H);if(Ae){I(b,null),I(E,"");return}try{await Vu(oe,Z),I(E,""),I(b,null)}catch(Pe){console.error("Error creating list on Tab:",Pe)}}function ye(Z){I(_,Z.detail.items,!0)}async function Et(Z){I(_,Z.detail.items,!0),I(_,[],!0)}function Ve(Z,H){console.log("[DRAG] ===== CONSIDER EVENT ====="),console.log("[DRAG] consider - column:",H),console.log("[DRAG] consider - event.detail.items count:",Z.detail.items?.length||0);const oe=Z.detail.items||[],Ae=oe.filter(fe=>_r(fe)),Pe=oe.filter(fe=>!_r(fe));console.log("[DRAG] consider - placeholders detected:",Ae.length),Ae.length>0&&console.log("[DRAG] consider - placeholder items:",Ae.map(fe=>({id:fe.id,isDndShadowItem:fe.isDndShadowItem}))),console.log("[DRAG] consider - valid items:",Pe.length);const ht=p(m).filter(fe=>(fe.columnIndex??0)===H);console.log("[DRAG] consider - current lists in column",H+" (before update):",ht.map(fe=>({id:fe.id,name:fe.name,columnIndex:fe.columnIndex}))),console.log("[DRAG] consider - newColumnItems IDs:",oe.map(fe=>({id:fe.id,isPlaceholder:_r(fe)})));const Ze=Pe.every(fe=>{const Ge=p(m).find(Ee=>Ee.id===fe.id);return Ge&&(Ge.columnIndex??0)===H});console.log("[DRAG] consider - isSameColumnReorder:",Ze);for(const fe of Pe){const Ge=p(m).find(Ee=>Ee.id===fe.id);if(Ge){const Ee=Ge.columnIndex??0;Ee!==H&&console.log("[DRAG] consider - CROSS-COLUMN MOVE DETECTED:",{listId:fe.id,listName:fe.name,oldColumn:Ee,newColumn:H})}else console.log("[DRAG] consider - NEW ITEM IN COLUMN (possibly from another column):",{listId:fe.id,listName:fe.name,column:H})}const We=p(m).filter(fe=>(fe.columnIndex??0)!==H);for(let fe=0;fe<oe.length;fe++){const Ge=oe[fe],Ee=p(m).find(Qe=>Qe.id===Ge.id),qe=Ee?{...Ee,...Ge,columnIndex:H,order:fe}:{...Ge,columnIndex:H,order:fe};We.push(qe)}console.log("[DRAG] consider - updated draggableLists count:",We.length),console.log("[DRAG] consider - updated lists in column",H+":",We.filter(fe=>(fe.columnIndex??0)===H).map(fe=>({id:fe.id,name:fe.name,columnIndex:fe.columnIndex}))),I(m,We,!0);try{const fe=p(V).map((Ge,Ee)=>({columnIndex:Ee,listCount:Ge.length,listIds:Ge.map(qe=>qe.id)}));console.log("[DRAG] consider - listsByColumn state (after update):",fe)}catch(fe){console.warn("[DRAG] consider - error logging listsByColumn:",fe)}console.log("[DRAG] ===== END CONSIDER EVENT =====")}async function Ye(Z,H){console.log("[DRAG] ===== FINALIZE EVENT ====="),console.log("[DRAG] finalize - column where drop occurred:",H),console.log("[DRAG] finalize - event.detail.items count:",Z.detail.items?.length||0);const oe=(Z.detail.items||[]).filter(Ee=>!_r(Ee)),Ae=(Z.detail.items||[]).filter(Ee=>_r(Ee));console.log("[DRAG] finalize - placeholders filtered out:",Ae.length),Ae.length>0&&console.warn("[DRAG] finalize - WARNING: Placeholders still present in finalize!",Ae.length),console.log("[DRAG] finalize - valid items (after filtering placeholders):",oe.length),console.log("[DRAG] finalize - valid items details:",oe.map(Ee=>({id:Ee.id,name:Ee.name,order:Ee.order,columnIndex:Ee.columnIndex})));const Pe=[];let ht=!1;for(const Ee of oe){const qe=(i()||[]).find(Qe=>Qe.id===Ee.id);if(qe){const Qe=qe.columnIndex??0;Qe!==H&&(ht=!0,Pe.push({listId:Ee.id,listName:Ee.name,oldColumn:Qe,newColumn:H}))}else{const Qe=p(m).find(Pt=>Pt.id===Ee.id);Qe&&(Qe.columnIndex??0)!==H&&(ht=!0)}}Pe.length>0&&console.log("[DRAG] finalize - COLUMN CHANGES DETECTED:",Pe);const We=(i()||[]).filter(Ee=>(Ee.columnIndex??0)===H).length,fe=oe.length;if(fe<We&&!ht){console.log("[DRAG] finalize - SKIPPING database update (source column that lost items)",{originalCount:We,currentCount:fe,hasItemsFromOtherColumns:ht}),console.log("[DRAG] ===== END FINALIZE EVENT =====");return}if(oe.length===0&&!ht&&We>0){console.log("[DRAG] finalize - SKIPPING database update (empty column that lost all items)"),console.log("[DRAG] ===== END FINALIZE EVENT =====");return}try{console.log("[DRAG] finalize - updating database with updateListOrderWithColumn..."),await Yu(H,oe),console.log("[DRAG] finalize - database update successful"),console.log("[DRAG] finalize - waiting for $effect to sync draggableLists from liveQuery...")}catch(Ee){console.error("[DRAG] finalize - ERROR updating list order:",Ee)}console.log("[DRAG] ===== END FINALIZE EVENT =====")}var pt=hp(),nt=ke(pt);{var ot=Z=>{var H=fp();we(Z,H)},mt=Z=>{var H=tr(),oe=kt(H);{var Ae=Pe=>{var ht=dp(),Ze=kt(ht);Er(Ze,21,()=>p(V),va,(fe,Ge,Ee)=>{sp(fe,{columnIndex:Ee,get columnLists(){return p(Ge)},get stableLists(){return p(h)},get newTaskInputs(){return p(g)},get createListColumnIndex(){return p(b)},get keyboardListDrag(){return p(C)},onInputChange:_e,onListKeyboardKeydown:be,onListConsider:qe=>Ve(qe,Ee),onListFinalize:qe=>Ye(qe,Ee),onCreateListClick:re,onCreateListKeydown:Te,onCreateListInputEscape:Fe,onCreateList:He,onCreateListOnTab:tt,get allLists(){return i()},get createListInput(){return p(E)},set createListInput(qe){I(E,qe,!0)},get createListInputElement(){return p(D)},set createListInputElement(qe){I(D,qe,!0)}})});var We=Le(Ze,2);cp(We,{get createListDropZoneItems(){return p(_)},onConsider:ye,onFinalize:Et,get createListDropZoneElement(){return p(T)},set createListDropZoneElement(fe){I(T,fe,!0)}}),we(Pe,ht)};ct(oe,Pe=>{Array.isArray(i())&&Pe(Ae)},!0)}we(Z,H)};ct(nt,Z=>{i()===void 0||i()===null?Z(ot):Z(mt,!1)})}we(e,pt),ur(),l()}var pp=Ce("<p>Loading...</p>"),mp=Ce("<p>Loading data...</p>"),yp=Ce("<p>No archived lists or tasks</p>"),gp=Ce('<span class="text-sm text-gray-500"> </span>'),_p=Ce('<span class="text-xs bg-gray-200 px-2 py-1 rounded">[List Archived]</span> <!>',1),bp=Ce('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),wp=Ce('<p class="text-sm text-gray-500 italic">No archived tasks</p>'),Ep=Ce('<li class="flex items-center gap-3 flex-wrap"><span class="line-through"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button></li>'),xp=Ce('<div class="mb-4"><h4 class="text-sm font-medium text-gray-600 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),Tp=Ce('<div class="border-b border-gray-200 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <div class="border-b border-gray-200 pb-4"><!></div>',1),kp=Ce('<div class="grid grid-cols-2 gap-4"></div>'),Ap=Ce('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function Dp(e,r){sr(r,!0);const i=()=>ka(p(m),"$listsQuery",l),s=()=>ka(p(h),"$archivedTasksQuery",l),[l,c]=Ss();let h=me(null),m=me(null);$e(()=>{Aa(I(h,Ia(()=>Tv()),!0),"$archivedTasksQuery",l),Aa(I(m,Ia(()=>wv()),!0),"$listsQuery",l)});function g(O){return O?new Date(O).toDateString():null}function b(O){return O?new Date(O).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let E=gn(()=>{const O=p(h)?s():null,Y=p(m)?i():null;if(!Y||!Array.isArray(Y))return[];const V={};if(O&&Array.isArray(O))for(const Q of O)V[Q.listId]||(V[Q.listId]=[]),V[Q.listId].push(Q);const z=[];for(const Q of Y){const ee=Q.archivedAt!=null,he=V[Q.id]&&V[Q.id].length>0;if(ee||he){const ve=V[Q.id]||[],se={};for(const be of ve){const _e=g(be.archivedAt)||"Unknown";se[_e]||(se[_e]=[]),se[_e].push(be)}z.push({list:Q,listArchiveDate:Q.archivedAt?g(Q.archivedAt):null,tasksByDate:se,hasTasks:ve.length>0})}}return z.sort((Q,ee)=>{if(Q.list.order!==ee.list.order)return Q.list.order-ee.list.order;const he=Q.list.name??"Unnamed list",ve=ee.list.name??"Unnamed list";return he.localeCompare(ve)}),z});function D(O){return O.sort((Y,V)=>{if(Y==="Unknown")return 1;if(V==="Unknown")return-1;const z=new Date(Y).getTime();return new Date(V).getTime()-z})}async function _(O){try{(await Dv(O)).listRestored&&console.log("Task and its list have been restored")}catch(Y){console.error("Error restoring task:",Y)}}var T=Ap(),C=Le(ke(T),2);{var M=O=>{var Y=pp();we(O,Y)},R=O=>{var Y=tr(),V=kt(Y);{var z=ee=>{var he=mp();we(ee,he)},Q=ee=>{var he=tr(),ve=kt(he);{var se=_e=>{var re=yp();we(_e,re)},be=_e=>{var re=kp();Er(re,21,()=>p(E),va,(Te,Fe)=>{const He=gn(()=>p(Fe).list),tt=gn(()=>p(He).name??"Unnamed list"),ye=gn(()=>p(He).archivedAt!=null),Et=gn(()=>p(Fe).listArchiveDate);var Ve=Tp(),Ye=kt(Ve),pt=ke(Ye),nt=ke(pt),ot=ke(nt),mt=Le(nt,2);{var Z=Ze=>{var We=_p(),fe=Le(kt(We),2);{var Ge=Ee=>{var qe=gp(),Qe=ke(qe);at(Pt=>Qn(Qe,`- ${Pt??""}`),[()=>b(p(Et))]),we(Ee,qe)};ct(fe,Ee=>{p(Et)&&Ee(Ge)})}we(Ze,We)},H=Ze=>{var We=bp();we(Ze,We)};ct(mt,Ze=>{p(ye)?Ze(Z):Ze(H,!1)})}var oe=Le(Ye,2),Ae=ke(oe);{var Pe=Ze=>{var We=wp();we(Ze,We)},ht=Ze=>{var We=tr(),fe=kt(We);Er(fe,17,()=>D(Object.keys(p(Fe).tasksByDate)),va,(Ge,Ee)=>{const qe=gn(()=>p(Fe).tasksByDate[p(Ee)]);var Qe=xp(),Pt=ke(Qe),Cr=ke(Pt),ie=Le(Pt,2);Er(ie,21,()=>p(qe),va,(Kn,Or)=>{var Tn=Ep(),Ne=ke(Tn),cn=ke(Ne),ei=Le(Ne,2);ei.__click=()=>_(p(Or).id),at(()=>Qn(cn,p(Or).text)),we(Kn,Tn)}),at(Kn=>Qn(Cr,Kn),[()=>p(Ee)==="Unknown"?"Unknown Date":b(p(Ee))]),we(Ge,Qe)}),we(Ze,We)};ct(Ae,Ze=>{p(Fe).hasTasks?Ze(ht,!1):Ze(Pe)})}at(()=>Qn(ot,p(tt))),we(Te,Ve)}),we(_e,re)};ct(ve,_e=>{p(E).length===0?_e(se):_e(be,!1)},!0)}we(ee,he)};ct(V,ee=>{!s()||!i()?ee(z):ee(Q,!1)},!0)}we(O,Y)};ct(C,O=>{!p(h)||!p(m)?O(M):O(R,!1)})}at(()=>ar(T,`width: ${vs}px;`)),we(e,T),ur(),c()}Sr(["click"]);var Ip=Ce('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><!></div></div> <!></main>');function Sp(e){function r(){window.print()}var i=Ip(),s=ke(i),l=ke(s);l.__click=r;var c=Le(s,2),h=ke(c),m=ke(h);vp(m,{});var g=Le(c,2);Dp(g,{}),at(()=>{ar(s,`width: ${vs}px;`),ar(c,`width: ${vs}px; height: ${Lv}px;`)}),we(e,i)}Sr(["click"]);const Cp=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],Op=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function Lp(){try{if(await Ie.lists.count()>0)return;await Ie.lists.bulkAdd(Cp),await Ie.tasks.bulkAdd(Op),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await Lp().catch(console.error),Ud(Sp,{target:document.getElementById("app")})))();
