(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(u){if(u.ep)return;u.ep=!0;const c=i(u);fetch(u.href,c)}})();const Kf="production",ae=!Kf.toLowerCase().startsWith("prod");var xs=Array.isArray,Ff=Array.prototype.indexOf,Ts=Array.from,tr=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,ol=Object.getOwnPropertyDescriptors,Bf=Object.prototype,jf=Array.prototype,ks=Object.getPrototypeOf,Au=Object.isExtensible;const xa=()=>{};function zf(e){for(var t=0;t<e.length;t++)e[t]()}function sl(){var e,t,i=new Promise((o,u)=>{e=o,t=u});return{promise:i,resolve:e,reject:t}}const _t=2,As=4,Is=8,ul=1<<24,Rn=16,Mn=32,Dr=64,Va=128,ln=512,It=1024,zt=2048,Nn=4096,Gt=8192,On=16384,Ds=32768,Wr=65536,Ta=1<<17,ll=1<<18,ei=1<<19,Hf=1<<20,nr=32768,ns=1<<21,Wa=1<<22,Qn=1<<23,Cn=Symbol("$state"),Uf=Symbol("legacy props"),Vf=Symbol(""),cl=Symbol("proxy path"),Br=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Wf(){if(ae){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Iu(){if(ae){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Gf(){if(ae){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Yf(e){if(ae){const t=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function qf(){if(ae){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Zf(e){if(ae){const t=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_orphan")}function Qf(){if(ae){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xf(e){if(ae){const t=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Jf(e){if(ae){const t=new Error(`props_rest_readonly
Rest element properties of \`$props()\` such as \`${e}\` are readonly
https://svelte.dev/e/props_rest_readonly`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_rest_readonly")}function $f(e){if(ae){const t=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function ed(){if(ae){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function td(){if(ae){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function nd(){if(ae){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function rd(){if(ae){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const fl=1,dl=2,vl=4,id=8,ad=16,od=1,sd=2,ud=4,ld=8,cd=16,fd=1,dd=2,pt=Symbol(),vd=Symbol("filename"),hd="http://www.w3.org/1999/xhtml",pd="@attach";var Ss="font-weight: bold",Os="font-weight: normal";function md(){ae?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Ss,Os):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Vo(e){ae?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Ss,Os):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function yd(){ae?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Ss,Os):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function hl(e){return e===this.v}function pl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ml(e){return!pl(e,this.v)}let Pi=!1,gd=!1;function _d(){Pi=!0}function hn(e,t){return e.label=t,yl(e.v,t),e}function yl(e,t){return e?.[cl]?.(t),e}function bd(e){const t=new Error,i=wd();return i.length===0?null:(i.unshift(`
`),tr(t,"stack",{value:i.join(`
`)}),tr(t,"name",{value:e}),t)}function wd(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const t=new Error().stack;if(Error.stackTraceLimit=e,!t)return[];const i=t.split(`
`),o=[];for(let u=0;u<i.length;u++){const c=i[u],d=c.replaceAll("\\","/");if(c.trim()!=="Error"){if(c.includes("validate_each_keys"))return[];d.includes("svelte/src/internal")||d.includes("node_modules/.vite")||o.push(c)}}return o}let st=null;function Gr(e){st=e}let Yr=null;function ka(e){Yr=e}let Ri=null;function Du(e){Ri=e}function ar(e,t=!1,i){st={p:st,i:!1,c:null,e:null,s:e,x:null,l:Pi&&!t?{s:null,u:null,$:[]}:null},ae&&(st.function=i,Ri=i)}function or(e){var t=st,i=t.e;if(i!==null){t.e=null;for(var o of i)Ll(o)}return t.i=!0,st=t.p,ae&&(Ri=st?.function??null),{}}function Mi(){return!Pi||st!==null&&st.l===null}let br=[];function gl(){var e=br;br=[],zf(e)}function Sr(e){if(br.length===0&&!Ei){var t=br;queueMicrotask(()=>{t===br&&gl()})}br.push(e)}function Ed(){for(;br.length>0;)gl()}const rs=new WeakMap;function _l(e){var t=Ne;if(t===null)return Pe.f|=Qn,e;if(ae&&e instanceof Error&&!rs.has(e)&&rs.set(e,xd(e,t)),(t.f&Ds)===0){if((t.f&Va)===0)throw ae&&!t.parent&&e instanceof Error&&bl(e),e;t.b.error(e)}else qr(e,t)}function qr(e,t){for(;t!==null;){if((t.f&Va)!==0)try{t.b.error(e);return}catch(i){e=i}t=t.parent}throw ae&&e instanceof Error&&bl(e),e}function xd(e,t){const i=xr(e,"message");if(!(i&&!i.configurable)){for(var o=Rs?"  ":"	",u=`
${o}in ${t.fn?.name||"<unknown>"}`,c=t.ctx;c!==null;)u+=`
${o}in ${c.function?.[vd].split("/").pop()}`,c=c.p;return{message:e.message+`
${u}
`,stack:e.stack?.split(`
`).filter(d=>!d.includes("svelte/src/internal")).join(`
`)}}}function bl(e){const t=rs.get(e);t&&(tr(e,"message",{value:t.message}),tr(e,"stack",{value:t.stack}))}const va=new Set;let Fe=null,ga=null,Jt=null,Xt=[],Ga=null,is=!1,Ei=!1;class wn{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#u=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Xt=[],ga=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of t)this.#o(o,i);this.is_fork||this.#c(),this.is_deferred()?(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects)):(ga=this,Fe=null,Su(i.render_effects),Su(i.effects),ga=null,this.#u?.resolve()),Jt=null}#o(t,i){t.f^=It;for(var o=t.first;o!==null;){var u=o.f,c=(u&(Mn|Dr))!==0,d=c&&(u&It)!==0,p=d||(u&Gt)!==0||this.skipped_effects.has(o);if((o.f&Va)!==0&&o.b?.is_pending()&&(i={parent:i,effect:o,effects:[],render_effects:[],block_effects:[]}),!p&&o.fn!==null){c?o.f^=It:(u&As)!==0?i.effects.push(o):Ki(o)&&((o.f&Rn)!==0&&i.block_effects.push(o),Di(o));var h=o.first;if(h!==null){o=h;continue}}var b=o.parent;for(o=o.next;o===null&&b!==null;)b===i.effect&&(this.#s(i.effects),this.#s(i.render_effects),this.#s(i.block_effects),i=i.parent),o=b.next,b=b.parent}}#s(t){for(const i of t)((i.f&zt)!==0?this.#a:this.#i).push(i),this.#l(i.deps),Dt(i,It)}#l(t){if(t!==null)for(const i of t)(i.f&_t)===0||(i.f&nr)===0||(i.f^=nr,this.#l(i.deps))}capture(t,i){this.previous.has(t)||this.previous.set(t,i),(t.f&Qn)===0&&(this.current.set(t,t.v),Jt?.set(t,t.v))}activate(){Fe=this,this.apply()}deactivate(){Fe===this&&(Fe=null,Jt=null)}flush(){if(this.activate(),Xt.length>0){if(wl(),Fe!==null&&Fe!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(va.size>1){this.previous.clear();var t=Jt,i=!0,o={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of va){if(c===this){i=!1;continue}const d=[];for(const[h,b]of this.current){if(c.current.has(h))if(i&&b!==c.current.get(h))c.current.set(h,b);else continue;d.push(h)}if(d.length===0)continue;const p=[...c.current.keys()].filter(h=>!this.current.has(h));if(p.length>0){var u=Xt;Xt=[];const h=new Set,b=new Map;for(const w of d)El(w,p,h,b);if(Xt.length>0){Fe=c,c.apply();for(const w of Xt)c.#o(w,o);c.deactivate()}Xt=u}}Fe=null,Jt=t}this.committed=!0,va.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#a)Dt(t,zt),Ar(t);for(const t of this.#i)Dt(t,Nn),Ar(t);this.#a=[],this.#i=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#u??=sl()).promise}static ensure(){if(Fe===null){const t=Fe=new wn;va.add(Fe),Ei||wn.enqueue(()=>{Fe===t&&t.flush()})}return Fe}static enqueue(t){Sr(t)}apply(){}}function Td(e){var t=Ei;Ei=!0;try{for(var i;;){if(Ed(),Xt.length===0&&(Fe?.flush(),Xt.length===0))return Ga=null,i;wl()}}finally{Ei=t}}function wl(){var e=Jn;is=!0;var t=ae?new Set:null;try{var i=0;for(Da(!0);Xt.length>0;){var o=wn.ensure();if(i++>1e3){if(ae){var u=new Map;for(const d of o.current.keys())for(const[p,h]of d.updated??[]){var c=u.get(p);c||(c={error:h.error,count:0},u.set(p,c)),c.count+=h.count}for(const d of u.values())d.error&&console.error(d.error)}kd()}if(o.process(Xt),Xn.clear(),ae)for(const d of o.current.keys())t.add(d)}}finally{if(is=!1,Da(e),Ga=null,ae)for(const d of t)d.updated=null}}function kd(){try{Qf()}catch(e){ae&&tr(e,"stack",{value:""}),qr(e,Ga)}}let Dn=null;function Su(e){var t=e.length;if(t!==0){for(var i=0;i<t;){var o=e[i++];if((o.f&(On|Gt))===0&&Ki(o)&&(Dn=new Set,Di(o),o.deps===null&&o.first===null&&o.nodes_start===null&&(o.teardown===null&&o.ac===null?Nl(o):o.fn=null),Dn?.size>0)){Xn.clear();for(const u of Dn){if((u.f&(On|Gt))!==0)continue;const c=[u];let d=u.parent;for(;d!==null;)Dn.has(d)&&(Dn.delete(d),c.push(d)),d=d.parent;for(let p=c.length-1;p>=0;p--){const h=c[p];(h.f&(On|Gt))===0&&Di(h)}}Dn.clear()}}Dn=null}}function El(e,t,i,o){if(!i.has(e)&&(i.add(e),e.reactions!==null))for(const u of e.reactions){const c=u.f;(c&_t)!==0?El(u,t,i,o):(c&(Wa|Rn))!==0&&(c&zt)===0&&xl(u,t,o)&&(Dt(u,zt),Ar(u))}}function xl(e,t,i){const o=i.get(e);if(o!==void 0)return o;if(e.deps!==null)for(const u of e.deps){if(t.includes(u))return!0;if((u.f&_t)!==0&&xl(u,t,i))return i.set(u,!0),!0}return i.set(e,!1),!1}function Ar(e){for(var t=Ga=e;t.parent!==null;){t=t.parent;var i=t.f;if(is&&t===Ne&&(i&Rn)!==0&&(i&ll)===0)return;if((i&(Dr|Mn))!==0){if((i&It)===0)return;t.f^=It}}Xt.push(t)}function Ad(e){let t=0,i=Ir(0),o;return ae&&hn(i,"createSubscriber version"),()=>{Ai()&&(m(i),Xa(()=>(t===0&&(o=ti(()=>e(()=>xi(i)))),t+=1,()=>{Sr(()=>{t-=1,t===0&&(o?.(),o=void 0,xi(i))})})))}}var Id=Wr|ei|Va;function Dd(e,t,i){new Sd(e,t,i)}class Sd{parent;#e=!1;#t;#r=null;#n;#u;#a;#i=null;#o=null;#s=null;#l=null;#c=null;#f=0;#v=0;#h=!1;#d=null;#_=Ad(()=>(this.#d=Ir(this.#f),ae&&hn(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(t,i,o){this.#t=t,this.#n=i,this.#u=o,this.parent=Ne.b,this.#e=!!this.#n.pending,this.#a=Ms(()=>{Ne.b=this;{var u=this.#y();try{this.#i=Kt(()=>o(u))}catch(c){this.error(c)}this.#v>0?this.#m():this.#e=!1}return()=>{this.#c?.remove()}},Id)}#b(){try{this.#i=Kt(()=>this.#u(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#n.pending;t&&(this.#o=Kt(()=>t(this.#t)),wn.enqueue(()=>{var i=this.#y();this.#i=this.#p(()=>(wn.ensure(),Kt(()=>this.#u(i)))),this.#v>0?this.#m():(Hr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#y(){var t=this.#t;return this.#e&&(this.#c=Pn(),this.#t.before(this.#c),t=this.#c),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var i=Ne,o=Pe,u=st;un(this.#a),Bt(this.#a),Gr(this.#a.ctx);try{return t()}catch(c){return _l(c),null}finally{un(i),Bt(o),Gr(u)}}#m(){const t=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Bl(this.#i,this.#l)),this.#o===null&&(this.#o=Kt(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#v+=t,this.#v===0&&(this.#e=!1,this.#o&&Hr(this.#o,()=>{this.#o=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(t){this.#g(t),this.#f+=t,this.#d&&Qr(this.#d,this.#f)}get_effect_pending(){return this.#_(),m(this.#d)}error(t){var i=this.#n.onerror;let o=this.#n.failed;if(this.#h||!i&&!o)throw t;this.#i&&(gt(this.#i),this.#i=null),this.#o&&(gt(this.#o),this.#o=null),this.#s&&(gt(this.#s),this.#s=null);var u=!1,c=!1;const d=()=>{if(u){yd();return}u=!0,c&&rd(),wn.ensure(),this.#f=0,this.#s!==null&&Hr(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#h=!1,Kt(()=>this.#u(this.#t)))),this.#v>0?this.#m():this.#e=!1};var p=Pe;try{Bt(null),c=!0,i?.(t,d),c=!1}catch(h){qr(h,this.#a&&this.#a.parent)}finally{Bt(p)}o&&Sr(()=>{this.#s=this.#p(()=>{wn.ensure(),this.#h=!0;try{return Kt(()=>{o(this.#t,()=>t,()=>d)})}catch(h){return qr(h,this.#a.parent),null}finally{this.#h=!1}})})}}function _a(e,t){return t}function Od(e,t,i){for(var o=[],u=t.length,c=0;c<u;c++)Ns(t[c].e,o,!0);Kl(o,()=>{var d=o.length===0&&i!==null;if(d){var p=i,h=p.parentNode;Vd(h),h.append(p),e.items.clear(),pn(e,t[0].prev,t[u-1].next)}for(var b=0;b<u;b++){var w=t[b];d||(e.items.delete(w.k),pn(e,w.prev,w.next)),gt(w.e,!d)}e.first===t[0]&&(e.first=t[0].prev)})}function zr(e,t,i,o,u,c=null){var d=e,p=new Map,h=null,b=(t&vl)!==0,w=(t&fl)!==0,T=(t&dl)!==0;if(b){var _=e;d=_.appendChild(Pn())}var E=null,O=Cs(()=>{var N=i();return xs(N)?N:N==null?[]:Ts(N)}),L,D=!0;function A(){Cd(F,L,d,t,o),E!==null&&(L.length===0?(E.fragment?(d.before(E.fragment),E.fragment=null):Ks(E.effect),H.first=E.effect):Hr(E.effect,()=>{E=null}))}var H=Ms(()=>{L=m(O);for(var N=L.length,W=new Set,X=Fe,oe=null,re=Cl(),se=0;se<N;se+=1){var de=L[se],ie=o(de,se),ge=D?null:p.get(ie);ge?(w&&Qr(ge.v,de),T?Qr(ge.i,se):ge.i=se,re&&X.skipped_effects.delete(ge.e)):(ge=Ld(D?d:null,oe,de,ie,se,u,t,i),D&&(ge.o=!0,oe===null?h=ge:oe.next=ge,oe=ge),p.set(ie,ge)),W.add(ie)}if(N===0&&c&&!E)if(D)E={fragment:null,effect:Kt(()=>c(d))};else{var je=document.createDocumentFragment(),Ke=Pn();je.append(Ke),E={fragment:je,effect:Kt(()=>c(Ke))}}if(!D)if(re){for(const[Ze,at]of p)W.has(Ze)||X.skipped_effects.add(at.e);X.oncommit(A),X.ondiscard(()=>{})}else A();m(O)}),F={effect:H,items:p,first:h};D=!1}function Cd(e,t,i,o,u){var c=(o&id)!==0,d=t.length,p=e.items,h=e.first,b,w=null,T,_=[],E=[],O,L,D,A;if(c)for(A=0;A<d;A+=1)O=t[A],L=u(O,A),D=p.get(L),D.o&&(D.a?.measure(),(T??=new Set).add(D));for(A=0;A<d;A+=1){if(O=t[A],L=u(O,A),D=p.get(L),e.first??=D,!D.o){D.o=!0;var H=w?w.next:h;pn(e,w,D),pn(e,D,H),Wo(D,H,i),w=D,_=[],E=[],h=w.next;continue}if((D.e.f&Gt)!==0&&(Ks(D.e),c&&(D.a?.unfix(),(T??=new Set).delete(D))),D!==h){if(b!==void 0&&b.has(D)){if(_.length<E.length){var F=E[0],N;w=F.prev;var W=_[0],X=_[_.length-1];for(N=0;N<_.length;N+=1)Wo(_[N],F,i);for(N=0;N<E.length;N+=1)b.delete(E[N]);pn(e,W.prev,X.next),pn(e,w,W),pn(e,X,F),h=F,w=X,A-=1,_=[],E=[]}else b.delete(D),Wo(D,h,i),pn(e,D.prev,D.next),pn(e,D,w===null?e.first:w.next),pn(e,w,D),w=D;continue}for(_=[],E=[];h!==null&&h.k!==L;)(h.e.f&Gt)===0&&(b??=new Set).add(h),E.push(h),h=h.next;if(h===null)continue;D=h}_.push(D),w=D,h=D.next}if(h!==null||b!==void 0){for(var oe=b===void 0?[]:Ts(b);h!==null;)(h.e.f&Gt)===0&&oe.push(h),h=h.next;var re=oe.length;if(re>0){var se=(o&vl)!==0&&d===0?i:null;if(c){for(A=0;A<re;A+=1)oe[A].a?.measure();for(A=0;A<re;A+=1)oe[A].a?.fix()}Od(e,oe,se)}}c&&Sr(()=>{if(T!==void 0)for(D of T)D.a?.apply()})}function Ld(e,t,i,o,u,c,d,p){var h=(d&fl)!==0,b=(d&ad)===0,w=h?b?Al(i,!1,!1):Ir(i):i,T=(d&dl)===0?u:Ir(u);ae&&h&&(w.trace=()=>{var O=typeof T=="number"?u:T.v;p()[O]});var _={i:T,v:w,k:o,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var E=document.createDocumentFragment();E.append(e=Pn())}return _.e=Kt(()=>c(e,w,T,p)),t!==null&&(t.next=_),_}finally{}}function Wo(e,t,i){for(var o=e.next?e.next.e.nodes_start:i,u=t?t.e.nodes_start:i,c=e.e.nodes_start;c!==null&&c!==o;){var d=Ni(c);u.before(c),c=d}}function pn(e,t,i){t===null?(e.first=i,e.effect.first=i&&i.e):(t.e===e.effect.last&&i!==null&&(e.effect.last=i.e),t.e.next&&(t.e.next.prev=null),t.next=i,t.e.next=i&&i.e),i===null?e.effect.last=t&&t.e:(i.e===e.effect.last&&t===null&&(e.effect.last=i.e.prev),i.e.prev&&(i.e.prev.next=null),i.prev=t,i.e.prev=t&&t.e)}function Tl(e,t,i,o){const u=Mi()?Ya:Cs;if(i.length===0&&e.length===0){o(t.map(u));return}var c=Fe,d=Ne,p=Pd();function h(){Promise.all(i.map(b=>Md(b))).then(b=>{p();try{o([...t.map(u),...b])}catch(w){(d.f&On)===0&&qr(w,d)}c?.deactivate(),Aa()}).catch(b=>{qr(b,d)})}e.length>0?Promise.all(e).then(()=>{p();try{return h()}finally{c?.deactivate(),Aa()}}):h()}function Pd(){var e=Ne,t=Pe,i=st,o=Fe;if(ae)var u=Yr;return function(d=!0){un(e),Bt(t),Gr(i),d&&o?.activate(),ae&&ka(u)}}function Aa(){un(null),Bt(null),Gr(null),ae&&ka(null)}const Rd=new Set;function Ya(e){var t=_t|zt,i=Pe!==null&&(Pe.f&_t)!==0?Pe:null;return Ne!==null&&(Ne.f|=ei),{ctx:st,deps:null,effects:null,equals:hl,f:t,fn:e,reactions:null,rv:0,v:pt,wv:0,parent:i??Ne,ac:null}}function Md(e,t){let i=Ne;i===null&&Wf();var o=i.b,u=void 0,c=Ir(pt),d=!Pe,p=new Map;return Xd(()=>{var h=sl();u=h.promise;try{Promise.resolve(e()).then(h.resolve,h.reject).then(()=>{b===Fe&&b.committed&&b.deactivate(),Aa()})}catch(_){h.reject(_),Aa()}var b=Fe;if(d){var w=!o.is_pending();o.update_pending_count(1),b.increment(w),p.get(b)?.reject(Br),p.delete(b),p.set(b,h)}const T=(_,E=void 0)=>{if(b.activate(),E)E!==Br&&(c.f|=Qn,Qr(c,E));else{(c.f&Qn)!==0&&(c.f^=Qn),Qr(c,_);for(const[O,L]of p){if(p.delete(O),O===b)break;L.reject(Br)}}d&&(o.update_pending_count(-1),b.decrement(w))};h.promise.then(T,_=>T(null,_||"unknown"))}),Za(()=>{for(const h of p.values())h.reject(Br)}),ae&&(c.f|=Wa),new Promise(h=>{function b(w){function T(){w===u?h(c):b(u)}w.then(T,T)}b(u)})}function tt(e){const t=Ya(e);return jl(t),t}function Cs(e){const t=Ya(e);return t.equals=ml,t}function as(e){var t=e.effects;if(t!==null){e.effects=null;for(var i=0;i<t.length;i+=1)gt(t[i])}}let Go=[];function Nd(e){for(var t=e.parent;t!==null;){if((t.f&_t)===0)return(t.f&On)===0?t:null;t=t.parent}return null}function Ls(e){var t,i=Ne;if(un(Nd(e)),ae){let o=Zr;Ou(new Set);try{Go.includes(e)&&Gf(),Go.push(e),e.f&=~nr,as(e),t=os(e)}finally{un(i),Ou(o),Go.pop()}}else try{e.f&=~nr,as(e),t=os(e)}finally{un(i)}return t}function kl(e){var t=Ls(e);if(e.equals(t)||(Fe?.is_fork||(e.v=t),e.wv=Hl()),!Or)if(Jt!==null)(Ai()||Fe?.is_fork)&&Jt.set(e,t);else{var i=(e.f&ln)===0?Nn:It;Dt(e,i)}}let Zr=new Set;const Xn=new Map;function Ou(e){Zr=e}let Ps=!1;function Kd(){Ps=!0}function Ir(e,t){var i={f:0,v:e,reactions:null,equals:hl,rv:0,wv:0};return i}function me(e,t){const i=Ir(e);return jl(i),i}function Al(e,t=!1,i=!0){const o=Ir(e);return t||(o.equals=ml),Pi&&i&&st!==null&&st.l!==null&&(st.l.s??=[]).push(o),o}function M(e,t,i=!1){Pe!==null&&(!En||(Pe.f&Ta)!==0)&&Mi()&&(Pe.f&(_t|Rn|Wa|Ta))!==0&&!Ln?.includes(e)&&nd();let o=i?$t(t):t;return ae&&yl(o,e.label),Qr(e,o)}function Qr(e,t){if(!e.equals(t)){var i=e.v;Or?Xn.set(e,t):Xn.set(e,i),e.v=t;var o=wn.ensure();if(o.capture(e,i),ae){if(Ne!==null){e.updated??=new Map;const u=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:u}),u>5){const c=bd("updated at");if(c!==null){let d=e.updated.get(c.stack);d||(d={error:c,count:0},e.updated.set(c.stack,d)),d.count++}}}Ne!==null&&(e.set_during_effect=!0)}(e.f&_t)!==0&&((e.f&zt)!==0&&Ls(e),Dt(e,(e.f&ln)!==0?It:Nn)),e.wv=Hl(),Dl(e,zt),Mi()&&Ne!==null&&(Ne.f&It)!==0&&(Ne.f&(Mn|Dr))===0&&(Zt===null?ev([e]):Zt.push(e)),!o.is_fork&&Zr.size>0&&!Ps&&Il()}return t}function Il(){Ps=!1;var e=Jn;Da(!0);const t=Array.from(Zr);try{for(const i of t)(i.f&It)!==0&&Dt(i,Nn),Ki(i)&&Di(i)}finally{Da(e)}Zr.clear()}function xi(e){M(e,e.v+1)}function Dl(e,t){var i=e.reactions;if(i!==null)for(var o=Mi(),u=i.length,c=0;c<u;c++){var d=i[c],p=d.f;if(!(!o&&d===Ne)){if(ae&&(p&Ta)!==0){Zr.add(d);continue}var h=(p&zt)===0;if(h&&Dt(d,t),(p&_t)!==0){var b=d;Jt?.delete(b),(p&nr)===0&&(p&ln&&(d.f|=nr),Dl(b,Nn))}else h&&((p&Rn)!==0&&Dn!==null&&Dn.add(d),Ar(d))}}}const Fd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function $t(e){if(typeof e!="object"||e===null||Cn in e)return e;const t=ks(e);if(t!==Bf&&t!==jf)return e;var i=new Map,o=xs(e),u=me(0),c=Tr,d=w=>{if(Tr===c)return w();var T=Pe,_=Tr;Bt(null),Ru(c);var E=w();return Bt(T),Ru(_),E};o&&(i.set("length",me(e.length)),ae&&(e=zd(e)));var p="";let h=!1;function b(w){if(!h){h=!0,p=w,hn(u,`${p} version`);for(const[T,_]of i)hn(_,yr(p,T));h=!1}}return new Proxy(e,{defineProperty(w,T,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&ed();var E=i.get(T);return E===void 0?E=d(()=>{var O=me(_.value);return i.set(T,O),ae&&typeof T=="string"&&hn(O,yr(p,T)),O}):M(E,_.value,!0),!0},deleteProperty(w,T){var _=i.get(T);if(_===void 0){if(T in w){const E=d(()=>me(pt));i.set(T,E),xi(u),ae&&hn(E,yr(p,T))}}else M(_,pt),xi(u);return!0},get(w,T,_){if(T===Cn)return e;if(ae&&T===cl)return b;var E=i.get(T),O=T in w;if(E===void 0&&(!O||xr(w,T)?.writable)&&(E=d(()=>{var D=$t(O?w[T]:pt),A=me(D);return ae&&hn(A,yr(p,T)),A}),i.set(T,E)),E!==void 0){var L=m(E);return L===pt?void 0:L}return Reflect.get(w,T,_)},getOwnPropertyDescriptor(w,T){var _=Reflect.getOwnPropertyDescriptor(w,T);if(_&&"value"in _){var E=i.get(T);E&&(_.value=m(E))}else if(_===void 0){var O=i.get(T),L=O?.v;if(O!==void 0&&L!==pt)return{enumerable:!0,configurable:!0,value:L,writable:!0}}return _},has(w,T){if(T===Cn)return!0;var _=i.get(T),E=_!==void 0&&_.v!==pt||Reflect.has(w,T);if(_!==void 0||Ne!==null&&(!E||xr(w,T)?.writable)){_===void 0&&(_=d(()=>{var L=E?$t(w[T]):pt,D=me(L);return ae&&hn(D,yr(p,T)),D}),i.set(T,_));var O=m(_);if(O===pt)return!1}return E},set(w,T,_,E){var O=i.get(T),L=T in w;if(o&&T==="length")for(var D=_;D<O.v;D+=1){var A=i.get(D+"");A!==void 0?M(A,pt):D in w&&(A=d(()=>me(pt)),i.set(D+"",A),ae&&hn(A,yr(p,D)))}if(O===void 0)(!L||xr(w,T)?.writable)&&(O=d(()=>me(void 0)),ae&&hn(O,yr(p,T)),M(O,$t(_)),i.set(T,O));else{L=O.v!==pt;var H=d(()=>$t(_));M(O,H)}var F=Reflect.getOwnPropertyDescriptor(w,T);if(F?.set&&F.set.call(E,_),!L){if(o&&typeof T=="string"){var N=i.get("length"),W=Number(T);Number.isInteger(W)&&W>=N.v&&M(N,W+1)}xi(u)}return!0},ownKeys(w){m(u);var T=Reflect.ownKeys(w).filter(O=>{var L=i.get(O);return L===void 0||L.v!==pt});for(var[_,E]of i)E.v!==pt&&!(_ in w)&&T.push(_);return T},setPrototypeOf(){td()}})}function yr(e,t){return typeof t=="symbol"?`${e}[Symbol(${t.description??""})]`:Fd.test(t)?`${e}.${t}`:/^\d+$/.test(t)?`${e}[${t}]`:`${e}['${t}']`}function Ti(e){try{if(e!==null&&typeof e=="object"&&Cn in e)return e[Cn]}catch{}return e}function Bd(e,t){return Object.is(Ti(e),Ti(t))}const jd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function zd(e){return new Proxy(e,{get(t,i,o){var u=Reflect.get(t,i,o);return jd.has(i)?function(...c){Kd();var d=u.apply(this,c);return Il(),d}:u}})}function Hd(){const e=Array.prototype,t=Array.__svelte_cleanup;t&&t();const{indexOf:i,lastIndexOf:o,includes:u}=e;e.indexOf=function(c,d){const p=i.call(this,c,d);if(p===-1){for(let h=d??0;h<this.length;h+=1)if(Ti(this[h])===c){Vo("array.indexOf(...)");break}}return p},e.lastIndexOf=function(c,d){const p=o.call(this,c,d??this.length-1);if(p===-1){for(let h=0;h<=(d??this.length-1);h+=1)if(Ti(this[h])===c){Vo("array.lastIndexOf(...)");break}}return p},e.includes=function(c,d){const p=u.call(this,c,d);if(!p){for(let h=0;h<this.length;h+=1)if(Ti(this[h])===c){Vo("array.includes(...)");break}}return p},Array.__svelte_cleanup=()=>{e.indexOf=i,e.lastIndexOf=o,e.includes=u}}var Cu,Rs,Sl,Ol;function Ud(){if(Cu===void 0){Cu=window,Rs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,i=Text.prototype;Sl=xr(t,"firstChild").get,Ol=xr(t,"nextSibling").get,Au(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Au(i)&&(i.__t=void 0),ae&&(e.__svelte_meta=null,Hd())}}function Pn(e=""){return document.createTextNode(e)}function Ia(e){return Sl.call(e)}function Ni(e){return Ol.call(e)}function _e(e,t){return Ia(e)}function kt(e,t=!1){{var i=Ia(e);return i instanceof Comment&&i.data===""?Ni(i):i}}function Me(e,t=1,i=!1){let o=e;for(;t--;)o=Ni(o);return o}function Vd(e){e.textContent=""}function Cl(){return!1}function Wd(e,t){if(t){const i=document.body;e.autofocus=!0,Sr(()=>{document.activeElement===i&&e.focus()})}}let Lu=!1;function Gd(){Lu||(Lu=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function qa(e){var t=Pe,i=Ne;Bt(null),un(null);try{return e()}finally{Bt(t),un(i)}}function Yd(e,t,i,o=i){e.addEventListener(t,()=>qa(i));const u=e.__on_r;u?e.__on_r=()=>{u(),o(!0)}:e.__on_r=()=>o(!0),Gd()}function qd(e){Ne===null&&(Pe===null&&Zf(e),qf()),Or&&Yf(e)}function Zd(e,t){var i=t.last;i===null?t.last=t.first=e:(i.next=e,e.prev=i,t.last=e)}function xn(e,t,i){var o=Ne;if(ae)for(;o!==null&&(o.f&Ta)!==0;)o=o.parent;o!==null&&(o.f&Gt)!==0&&(e|=Gt);var u={ctx:st,deps:null,nodes_start:null,nodes_end:null,f:e|zt|ln,first:null,fn:t,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(ae&&(u.component_function=Ri),i)try{Di(u),u.f|=Ds}catch(p){throw gt(u),p}else t!==null&&Ar(u);var c=u;if(i&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&ei)===0&&(c=c.first,(e&Rn)!==0&&(e&Wr)!==0&&c!==null&&(c.f|=Wr)),c!==null&&(c.parent=o,o!==null&&Zd(c,o),Pe!==null&&(Pe.f&_t)!==0&&(e&Dr)===0)){var d=Pe;(d.effects??=[]).push(c)}return u}function Ai(){return Pe!==null&&!En}function Za(e){const t=xn(Is,null,!1);return Dt(t,It),t.teardown=e,t}function Ye(e){qd("$effect"),ae&&tr(e,"name",{value:"$effect"});var t=Ne.f,i=!Pe&&(t&Mn)!==0&&(t&Ds)===0;if(i){var o=st;(o.e??=[]).push(e)}else return Ll(e)}function Ll(e){return xn(As|Hf,e,!1)}function Qd(e){wn.ensure();const t=xn(Dr|ei,e,!0);return(i={})=>new Promise(o=>{i.outro?Hr(t,()=>{gt(t),o(void 0)}):(gt(t),o(void 0))})}function Qa(e){return xn(As,e,!1)}function Xd(e){return xn(Wa|ei,e,!0)}function Xa(e,t=0){return xn(Is|t,e,!0)}function ct(e,t=[],i=[],o=[]){Tl(o,t,i,u=>{xn(Is,()=>e(...u.map(m)),!0)})}function Ms(e,t=0){var i=xn(Rn|t,e,!0);return ae&&(i.dev_stack=Yr),i}function Pl(e,t=0){var i=xn(ul|t,e,!0);return ae&&(i.dev_stack=Yr),i}function Kt(e){return xn(Mn|ei,e,!0)}function Rl(e){var t=e.teardown;if(t!==null){const i=Or,o=Pe;Pu(!0),Bt(null);try{t.call(null)}finally{Pu(i),Bt(o)}}}function Ml(e,t=!1){var i=e.first;for(e.first=e.last=null;i!==null;){const u=i.ac;u!==null&&qa(()=>{u.abort(Br)});var o=i.next;(i.f&Dr)!==0?i.parent=null:gt(i,t),i=o}}function Jd(e){for(var t=e.first;t!==null;){var i=t.next;(t.f&Mn)===0&&gt(t),t=i}}function gt(e,t=!0){var i=!1;(t||(e.f&ll)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&($d(e.nodes_start,e.nodes_end),i=!0),Ml(e,t&&!i),Sa(e,0),Dt(e,On);var o=e.transitions;if(o!==null)for(const c of o)c.stop();Rl(e);var u=e.parent;u!==null&&u.first!==null&&Nl(e),ae&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function $d(e,t){for(;e!==null;){var i=e===t?null:Ni(e);e.remove(),e=i}}function Nl(e){var t=e.parent,i=e.prev,o=e.next;i!==null&&(i.next=o),o!==null&&(o.prev=i),t!==null&&(t.first===e&&(t.first=o),t.last===e&&(t.last=i))}function Hr(e,t,i=!0){var o=[];Ns(e,o,!0),Kl(o,()=>{i&&gt(e),t&&t()})}function Kl(e,t){var i=e.length;if(i>0){var o=()=>--i||t();for(var u of e)u.out(o)}else t()}function Ns(e,t,i){if((e.f&Gt)===0){if(e.f^=Gt,e.transitions!==null)for(const d of e.transitions)(d.is_global||i)&&t.push(d);for(var o=e.first;o!==null;){var u=o.next,c=(o.f&Wr)!==0||(o.f&Mn)!==0&&(e.f&Rn)!==0;Ns(o,t,c?i:!1),o=u}}}function Ks(e){Fl(e,!0)}function Fl(e,t){if((e.f&Gt)!==0){e.f^=Gt,(e.f&It)===0&&(Dt(e,zt),Ar(e));for(var i=e.first;i!==null;){var o=i.next,u=(i.f&Wr)!==0||(i.f&Mn)!==0;Fl(i,u?t:!1),i=o}if(e.transitions!==null)for(const c of e.transitions)(c.is_global||t)&&c.in()}}function Bl(e,t){for(var i=e.nodes_start,o=e.nodes_end;i!==null;){var u=i===o?null:Ni(i);t.append(i),i=u}}let Jn=!1;function Da(e){Jn=e}let Or=!1;function Pu(e){Or=e}let Pe=null,En=!1;function Bt(e){Pe=e}let Ne=null;function un(e){Ne=e}let Ln=null;function jl(e){Pe!==null&&(Ln===null?Ln=[e]:Ln.push(e))}let Ct=null,Vt=0,Zt=null;function ev(e){Zt=e}let zl=1,Ii=0,Tr=Ii;function Ru(e){Tr=e}function Hl(){return++zl}function Ki(e){var t=e.f;if((t&zt)!==0)return!0;if(t&_t&&(e.f&=~nr),(t&Nn)!==0){var i=e.deps;if(i!==null)for(var o=i.length,u=0;u<o;u++){var c=i[u];if(Ki(c)&&kl(c),c.wv>e.wv)return!0}(t&ln)!==0&&Jt===null&&Dt(e,It)}return!1}function Ul(e,t,i=!0){var o=e.reactions;if(o!==null&&!Ln?.includes(e))for(var u=0;u<o.length;u++){var c=o[u];(c.f&_t)!==0?Ul(c,t,!1):t===c&&(i?Dt(c,zt):(c.f&It)!==0&&Dt(c,Nn),Ar(c))}}function os(e){var t=Ct,i=Vt,o=Zt,u=Pe,c=Ln,d=st,p=En,h=Tr,b=e.f;Ct=null,Vt=0,Zt=null,Pe=(b&(Mn|Dr))===0?e:null,Ln=null,Gr(e.ctx),En=!1,Tr=++Ii,e.ac!==null&&(qa(()=>{e.ac.abort(Br)}),e.ac=null);try{e.f|=ns;var w=e.fn,T=w(),_=e.deps;if(Ct!==null){var E;if(Sa(e,Vt),_!==null&&Vt>0)for(_.length=Vt+Ct.length,E=0;E<Ct.length;E++)_[Vt+E]=Ct[E];else e.deps=_=Ct;if(Jn&&Ai()&&(e.f&ln)!==0)for(E=Vt;E<_.length;E++)(_[E].reactions??=[]).push(e)}else _!==null&&Vt<_.length&&(Sa(e,Vt),_.length=Vt);if(Mi()&&Zt!==null&&!En&&_!==null&&(e.f&(_t|Nn|zt))===0)for(E=0;E<Zt.length;E++)Ul(Zt[E],e);return u!==null&&u!==e&&(Ii++,Zt!==null&&(o===null?o=Zt:o.push(...Zt))),(e.f&Qn)!==0&&(e.f^=Qn),T}catch(O){return _l(O)}finally{e.f^=ns,Ct=t,Vt=i,Zt=o,Pe=u,Ln=c,Gr(d),En=p,Tr=h}}function tv(e,t){let i=t.reactions;if(i!==null){var o=Ff.call(i,e);if(o!==-1){var u=i.length-1;u===0?i=t.reactions=null:(i[o]=i[u],i.pop())}}i===null&&(t.f&_t)!==0&&(Ct===null||!Ct.includes(t))&&(Dt(t,Nn),(t.f&ln)!==0&&(t.f^=ln,t.f&=~nr),as(t),Sa(t,0))}function Sa(e,t){var i=e.deps;if(i!==null)for(var o=t;o<i.length;o++)tv(e,i[o])}function Di(e){var t=e.f;if((t&On)===0){Dt(e,It);var i=Ne,o=Jn;if(Ne=e,Jn=!0,ae){var u=Ri;Du(e.component_function);var c=Yr;ka(e.dev_stack??Yr)}try{(t&(Rn|ul))!==0?Jd(e):Ml(e),Rl(e);var d=os(e);e.teardown=typeof d=="function"?d:null,e.wv=zl;var p;ae&&gd&&(e.f&zt)!==0&&e.deps}finally{Jn=o,Ne=i,ae&&(Du(u),ka(c))}}}async function Sn(){await Promise.resolve(),Td()}function m(e){var t=e.f,i=(t&_t)!==0;if(Pe!==null&&!En){var o=Ne!==null&&(Ne.f&On)!==0;if(!o&&!Ln?.includes(e)){var u=Pe.deps;if((Pe.f&ns)!==0)e.rv<Ii&&(e.rv=Ii,Ct===null&&u!==null&&u[Vt]===e?Vt++:Ct===null?Ct=[e]:Ct.includes(e)||Ct.push(e));else{(Pe.deps??=[]).push(e);var c=e.reactions;c===null?e.reactions=[Pe]:c.includes(Pe)||c.push(Pe)}}}if(ae&&Rd.delete(e),Or){if(Xn.has(e))return Xn.get(e);if(i){var d=e,p=d.v;return((d.f&It)===0&&d.reactions!==null||Wl(d))&&(p=Ls(d)),Xn.set(d,p),p}}else i&&(!Jt?.has(e)||Fe?.is_fork&&!Ai())&&(d=e,Ki(d)&&kl(d),Jn&&Ai()&&(d.f&ln)===0&&Vl(d));if(Jt?.has(e))return Jt.get(e);if((e.f&Qn)!==0)throw e.v;return e.v}function Vl(e){if(e.deps!==null){e.f^=ln;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&_t)!==0&&(t.f&ln)===0&&Vl(t)}}function Wl(e){if(e.v===pt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Xn.has(t)||(t.f&_t)!==0&&Wl(t))return!0;return!1}function ti(e){var t=En;try{return En=!0,e()}finally{En=t}}const nv=-7169;function Dt(e,t){e.f=e.f&nv|t}function rv(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Cn in e)ss(e);else if(!Array.isArray(e))for(let t in e){const i=e[t];typeof i=="object"&&i&&Cn in i&&ss(i)}}}function ss(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let o in e)try{ss(e[o],t)}catch{}const i=ks(e);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const o=ol(i);for(let u in o){const c=o[u].get;if(c)try{c.call(e)}catch{}}}}}function iv(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const av=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ov(e){return av.includes(e)}const sv={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function uv(e){return e=e.toLowerCase(),sv[e]??e}const lv=["touchstart","touchmove"];function cv(e){return lv.includes(e)}const Gl=new Set,us=new Set;function Yl(e,t,i,o={}){function u(c){if(o.capture||bi.call(t,c),!c.cancelBubble)return qa(()=>i?.call(this,c))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Sr(()=>{t.addEventListener(e,u,o)}):t.addEventListener(e,u,o),u}function wr(e,t,i,o,u){var c={capture:o,passive:u},d=Yl(e,t,i,c);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Za(()=>{t.removeEventListener(e,d,c)})}function ni(e){for(var t=0;t<e.length;t++)Gl.add(e[t]);for(var i of us)i(e)}let Mu=null;function bi(e){var t=this,i=t.ownerDocument,o=e.type,u=e.composedPath?.()||[],c=u[0]||e.target;Mu=e;var d=0,p=Mu===e&&e.__root;if(p){var h=u.indexOf(p);if(h!==-1&&(t===document||t===window)){e.__root=t;return}var b=u.indexOf(t);if(b===-1)return;h<=b&&(d=h)}if(c=u[d]||e.target,c!==t){tr(e,"currentTarget",{configurable:!0,get(){return c||i}});var w=Pe,T=Ne;Bt(null),un(null);try{for(var _,E=[];c!==null;){var O=c.assignedSlot||c.parentNode||c.host||null;try{var L=c["__"+o];L!=null&&(!c.disabled||e.target===c)&&L.call(c,e)}catch(D){_?E.push(D):_=D}if(e.cancelBubble||O===t||O===null)break;c=O}if(_){for(let D of E)queueMicrotask(()=>{throw D});throw _}}finally{e.__root=t,delete e.currentTarget,Bt(w),un(T)}}}function fv(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Oa(e,t){var i=Ne;i.nodes_start===null&&(i.nodes_start=e,i.nodes_end=t)}function ke(e,t){var i=(t&fd)!==0,o=(t&dd)!==0,u,c=!e.startsWith("<!>");return()=>{u===void 0&&(u=fv(c?e:"<!>"+e),i||(u=Ia(u)));var d=o||Rs?document.importNode(u,!0):u.cloneNode(!0);if(i){var p=Ia(d),h=d.lastChild;Oa(p,h)}else Oa(d,d);return d}}function gn(e=""){{var t=Pn(e+"");return Oa(t,t),t}}function $n(){var e=document.createDocumentFragment(),t=document.createComment(""),i=Pn();return e.append(t,i),Oa(t,i),e}function fe(e,t){e!==null&&e.before(t)}function Er(e,t){var i=t==null?"":typeof t=="object"?t+"":t;i!==(e.__t??=e.nodeValue)&&(e.__t=i,e.nodeValue=i+"")}function dv(e,t){return vv(e,t)}const Fr=new Map;function vv(e,{target:t,anchor:i,props:o={},events:u,context:c,intro:d=!0}){Ud();var p=new Set,h=T=>{for(var _=0;_<T.length;_++){var E=T[_];if(!p.has(E)){p.add(E);var O=cv(E);t.addEventListener(E,bi,{passive:O});var L=Fr.get(E);L===void 0?(document.addEventListener(E,bi,{passive:O}),Fr.set(E,1)):Fr.set(E,L+1)}}};h(Ts(Gl)),us.add(h);var b=void 0,w=Qd(()=>{var T=i??t.appendChild(Pn());return Dd(T,{pending:()=>{}},_=>{if(c){ar({});var E=st;E.c=c}u&&(o.$$events=u),b=e(_,o)||{},c&&or()}),()=>{for(var _ of p){t.removeEventListener(_,bi);var E=Fr.get(_);--E===0?(document.removeEventListener(_,bi),Fr.delete(_)):Fr.set(_,E)}us.delete(h),T!==i&&T.parentNode?.removeChild(T)}});return hv.set(b,w),b}let hv=new WeakMap;class pv{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#u=!0;constructor(t,i=!0){this.anchor=t,this.#u=i}#a=()=>{var t=Fe;if(this.#e.has(t)){var i=this.#e.get(t),o=this.#t.get(i);if(o)Ks(o),this.#n.delete(i);else{var u=this.#r.get(i);u&&(this.#t.set(i,u.effect),this.#r.delete(i),u.fragment.lastChild.remove(),this.anchor.before(u.fragment),o=u.effect)}for(const[c,d]of this.#e){if(this.#e.delete(c),c===t)break;const p=this.#r.get(d);p&&(gt(p.effect),this.#r.delete(d))}for(const[c,d]of this.#t){if(c===i||this.#n.has(c))continue;const p=()=>{if(Array.from(this.#e.values()).includes(c)){var b=document.createDocumentFragment();Bl(d,b),b.append(Pn()),this.#r.set(c,{effect:d,fragment:b})}else gt(d);this.#n.delete(c),this.#t.delete(c)};this.#u||!o?(this.#n.add(c),Hr(d,p,!1)):p()}}};#i=t=>{this.#e.delete(t);const i=Array.from(this.#e.values());for(const[o,u]of this.#r)i.includes(o)||(gt(u.effect),this.#r.delete(o))};ensure(t,i){var o=Fe,u=Cl();if(i&&!this.#t.has(t)&&!this.#r.has(t))if(u){var c=document.createDocumentFragment(),d=Pn();c.append(d),this.#r.set(t,{effect:Kt(()=>i(d)),fragment:c})}else this.#t.set(t,Kt(()=>i(this.anchor)));if(this.#e.set(o,t),u){for(const[p,h]of this.#t)p===t?o.skipped_effects.delete(h):o.skipped_effects.add(h);for(const[p,h]of this.#r)p===t?o.skipped_effects.delete(h.effect):o.skipped_effects.add(h.effect);o.oncommit(this.#a),o.ondiscard(this.#i)}else this.#a()}}function nt(e,t,i=!1){var o=new pv(e),u=i?Wr:0;function c(d,p){o.ensure(d,p)}Ms(()=>{var d=!1;t((p,h=!0)=>{d=!0,c(h,p)}),d||c(!1,null)},u)}function mv(e,t,i,o,u){var c=t.$$slots?.[i],d=!1;c===!0&&(c=t.children,d=!0),c===void 0||c(e,d?()=>o:o)}function ql(e,t,i){Qa(()=>{var o=ti(()=>t(e,i?.())||{});if(i&&o?.update){var u=!1,c={};Xa(()=>{var d=i();rv(d),u&&pl(c,d)&&(c=d,o.update(d))}),u=!0}if(o?.destroy)return()=>o.destroy()})}function yv(e,t){var i=void 0,o;Pl(()=>{i!==(i=t())&&(o&&(gt(o),o=null),i&&(o=Kt(()=>{Qa(()=>i(e))})))})}function Zl(e){var t,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(i=Zl(e[t]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}function gv(){for(var e,t,i=0,o="",u=arguments.length;i<u;i++)(e=arguments[i])&&(t=Zl(e))&&(o&&(o+=" "),o+=t);return o}function Ql(e){return typeof e=="object"?gv(e):e??""}const Nu=[...` 	
\r\fÂ \v\uFEFF`];function _v(e,t,i){var o=e==null?"":""+e;if(t&&(o=o?o+" "+t:t),i){for(var u in i)if(i[u])o=o?o+" "+u:u;else if(o.length)for(var c=u.length,d=0;(d=o.indexOf(u,d))>=0;){var p=d+c;(d===0||Nu.includes(o[d-1]))&&(p===o.length||Nu.includes(o[p]))?o=(d===0?"":o.substring(0,d))+o.substring(p+1):d=p}}return o===""?null:o}function Ku(e,t=!1){var i=t?" !important;":";",o="";for(var u in e){var c=e[u];c!=null&&c!==""&&(o+=" "+u+": "+c+i)}return o}function Yo(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function bv(e,t){if(t){var i="",o,u;if(Array.isArray(t)?(o=t[0],u=t[1]):o=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var c=!1,d=0,p=!1,h=[];o&&h.push(...Object.keys(o).map(Yo)),u&&h.push(...Object.keys(u).map(Yo));var b=0,w=-1;const L=e.length;for(var T=0;T<L;T++){var _=e[T];if(p?_==="/"&&e[T-1]==="*"&&(p=!1):c?c===_&&(c=!1):_==="/"&&e[T+1]==="*"?p=!0:_==='"'||_==="'"?c=_:_==="("?d++:_===")"&&d--,!p&&c===!1&&d===0){if(_===":"&&w===-1)w=T;else if(_===";"||T===L-1){if(w!==-1){var E=Yo(e.substring(b,w).trim());if(!h.includes(E)){_!==";"&&T++;var O=e.substring(b,T).trim();i+=" "+O+";"}}b=T+1,w=-1}}}}return o&&(i+=Ku(o)),u&&(i+=Ku(u,!0)),i=i.trim(),i===""?null:i}return e==null?null:String(e)}function Si(e,t,i,o,u,c){var d=e.__className;if(d!==i||d===void 0){var p=_v(i,o,c);p==null?e.removeAttribute("class"):t?e.className=p:e.setAttribute("class",p),e.__className=i}else if(c&&u!==c)for(var h in c){var b=!!c[h];(u==null||b!==!!u[h])&&e.classList.toggle(h,b)}return c}function qo(e,t={},i,o){for(var u in i){var c=i[u];t[u]!==c&&(i[u]==null?e.style.removeProperty(u):e.style.setProperty(u,c,o))}}function rr(e,t,i,o){var u=e.__style;if(u!==t){var c=bv(t,o);c==null?e.removeAttribute("style"):e.style.cssText=c,e.__style=t}else o&&(Array.isArray(o)?(qo(e,i?.[0],o[0]),qo(e,i?.[1],o[1],"important")):qo(e,i,o));return o}function ls(e,t,i=!1){if(e.multiple){if(t==null)return;if(!xs(t))return md();for(var o of e.options)o.selected=t.includes(Fu(o));return}for(o of e.options){var u=Fu(o);if(Bd(u,t)){o.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function wv(e){var t=new MutationObserver(()=>{ls(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Za(()=>{t.disconnect()})}function Fu(e){return"__value"in e?e.__value:e.value}const mi=Symbol("class"),yi=Symbol("style"),Xl=Symbol("is custom element"),Jl=Symbol("is html");function Ev(e,t){var i=Ja(e);i.value===(i.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function xv(e,t){var i=Ja(e);i.checked!==(i.checked=t??void 0)&&(e.checked=t)}function Tv(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function At(e,t,i,o){var u=Ja(e);u[t]!==(u[t]=i)&&(t==="loading"&&(e[Vf]=i),i==null?e.removeAttribute(t):typeof i!="string"&&$l(e).includes(t)?e[t]=i:e.setAttribute(t,i))}function kv(e,t,i,o,u=!1,c=!1){var d=Ja(e),p=d[Xl],h=!d[Jl],b=t||{},w=e.tagName==="OPTION";for(var T in t)T in i||(i[T]=null);i.class?i.class=Ql(i.class):i[mi]&&(i.class=null),i[yi]&&(i.style??=null);var _=$l(e);for(const N in i){let W=i[N];if(w&&N==="value"&&W==null){e.value=e.__value="",b[N]=W;continue}if(N==="class"){var E=e.namespaceURI==="http://www.w3.org/1999/xhtml";Si(e,E,W,o,t?.[mi],i[mi]),b[N]=W,b[mi]=i[mi];continue}if(N==="style"){rr(e,W,t?.[yi],i[yi]),b[N]=W,b[yi]=i[yi];continue}var O=b[N];if(!(W===O&&!(W===void 0&&e.hasAttribute(N)))){b[N]=W;var L=N[0]+N[1];if(L!=="$$")if(L==="on"){const X={},oe="$$"+N;let re=N.slice(2);var D=ov(re);if(iv(re)&&(re=re.slice(0,-7),X.capture=!0),!D&&O){if(W!=null)continue;e.removeEventListener(re,b[oe],X),b[oe]=null}if(W!=null)if(D)e[`__${re}`]=W,ni([re]);else{let se=function(de){b[N].call(this,de)};var F=se;b[oe]=Yl(re,e,se,X)}else D&&(e[`__${re}`]=void 0)}else if(N==="style")At(e,N,W);else if(N==="autofocus")Wd(e,!!W);else if(!p&&(N==="__value"||N==="value"&&W!=null))e.value=e.__value=W;else if(N==="selected"&&w)Tv(e,W);else{var A=N;h||(A=uv(A));var H=A==="defaultValue"||A==="defaultChecked";if(W==null&&!p&&!H)if(d[N]=null,A==="value"||A==="checked"){let X=e;const oe=t===void 0;if(A==="value"){let re=X.defaultValue;X.removeAttribute(A),X.defaultValue=re,X.value=X.__value=oe?re:null}else{let re=X.defaultChecked;X.removeAttribute(A),X.defaultChecked=re,X.checked=oe?re:!1}}else e.removeAttribute(N);else H||_.includes(A)&&(p||typeof W!="string")?(e[A]=W,A in d&&(d[A]=pt)):typeof W!="function"&&At(e,A,W)}}}return b}function Av(e,t,i=[],o=[],u=[],c,d=!1,p=!1){Tl(u,i,o,h=>{var b=void 0,w={},T=e.nodeName==="SELECT",_=!1;if(Pl(()=>{var O=t(...h.map(m)),L=kv(e,b,O,c,d,p);_&&T&&"value"in O&&ls(e,O.value);for(let A of Object.getOwnPropertySymbols(w))O[A]||gt(w[A]);for(let A of Object.getOwnPropertySymbols(O)){var D=O[A];A.description===pd&&(!b||D!==b[A])&&(w[A]&&gt(w[A]),w[A]=Kt(()=>yv(e,()=>D))),L[A]=D}b=L}),T){var E=e;Qa(()=>{ls(E,b.value,!0),wv(E)})}_=!0})}function Ja(e){return e.__attributes??={[Xl]:e.nodeName.includes("-"),[Jl]:e.namespaceURI===hd}}var Bu=new Map;function $l(e){var t=e.getAttribute("is")||e.nodeName,i=Bu.get(t);if(i)return i;Bu.set(t,i=[]);for(var o,u=e,c=Element.prototype;c!==u;){o=ol(u);for(var d in o)o[d].set&&i.push(d);u=ks(u)}return i}function Fs(e,t,i=t){var o=new WeakSet;Yd(e,"input",async u=>{ae&&e.type==="checkbox"&&Iu();var c=u?e.defaultValue:e.value;if(c=Zo(e)?Qo(c):c,i(c),Fe!==null&&o.add(Fe),await Sn(),c!==(c=t())){var d=e.selectionStart,p=e.selectionEnd,h=e.value.length;if(e.value=c??"",p!==null){var b=e.value.length;d===p&&p===h&&b>h?(e.selectionStart=b,e.selectionEnd=b):(e.selectionStart=d,e.selectionEnd=Math.min(p,b))}}}),ti(t)==null&&e.value&&(i(Zo(e)?Qo(e.value):e.value),Fe!==null&&o.add(Fe)),Xa(()=>{ae&&e.type==="checkbox"&&Iu();var u=t();if(e===document.activeElement){var c=ga??Fe;if(o.has(c))return}Zo(e)&&u===Qo(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function Zo(e){var t=e.type;return t==="number"||t==="range"}function Qo(e){return e===""?null:+e}function ju(e,t){return e===t||e?.[Cn]===t}function Wt(e={},t,i,o){return Qa(()=>{var u,c;return Xa(()=>{u=c,c=[],ti(()=>{e!==i(...c)&&(t(e,...c),u&&ju(i(...u),e)&&t(null,...u))})}),()=>{Sr(()=>{c&&ju(i(...c),e)&&t(null,...c)})}}),e}function ec(e,t,i){if(e==null)return t(void 0),xa;const o=ti(()=>e.subscribe(t,i));return o.unsubscribe?()=>o.unsubscribe():o}function Iv(e){let t;return ec(e,i=>t=i)(),t}let ha=!1,cs=Symbol();function Ca(e,t,i){const o=i[t]??={store:null,source:Al(void 0),unsubscribe:xa};if(ae&&(o.source.label=t),o.store!==e&&!(cs in i))if(o.unsubscribe(),o.store=e??null,e==null)o.source.v=void 0,o.unsubscribe=xa;else{var u=!0;o.unsubscribe=ec(e,c=>{u?o.source.v=c:M(o.source,c)}),u=!1}return e&&cs in i?Iv(e):m(o.source)}function La(e,t,i){let o=i[t];return o&&o.store!==e&&(o.unsubscribe(),o.unsubscribe=xa),e}function Bs(){const e={};function t(){Za(()=>{for(var i in e)e[i].unsubscribe();tr(e,cs,{enumerable:!1,value:!0})})}return[e,t]}function Dv(e){var t=ha;try{return ha=!1,[e(),ha]}finally{ha=t}}const Sv={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return ae&&Jf(`${e.name}.${String(t)}`),!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Ov(e,t,i){return new Proxy(ae?{props:e,exclude:t,name:i,other:{},to_proxy:[]}:{props:e,exclude:t},Sv)}function Lt(e,t,i,o){var u=!Pi||(i&sd)!==0,c=(i&ld)!==0,d=(i&cd)!==0,p=o,h=!0,b=()=>(h&&(h=!1,p=d?ti(o):o),p),w;if(c){var T=Cn in e||Uf in e;w=xr(e,t)?.set??(T&&t in e?F=>e[t]=F:void 0)}var _,E=!1;c?[_,E]=Dv(()=>e[t]):_=e[t],_===void 0&&o!==void 0&&(_=b(),w&&(u&&Xf(t),w(_)));var O;if(u?O=()=>{var F=e[t];return F===void 0?b():(h=!0,F)}:O=()=>{var F=e[t];return F!==void 0&&(p=void 0),F===void 0?p:F},u&&(i&ud)===0)return O;if(w){var L=e.$$legacy;return(function(F,N){return arguments.length>0?((!u||!N||L||E)&&w(N?O():F),F):O()})}var D=!1,A=((i&od)!==0?Ya:Cs)(()=>(D=!1,O()));ae&&(A.label=t),c&&m(A);var H=Ne;return(function(F,N){if(arguments.length>0){const W=N?m(A):u&&c?$t(F):F;return M(A,W),D=!0,p!==void 0&&(p=W),F}return Or&&D||(H.f&On)!==0?A.v:m(A)})}if(ae){let e=function(t){if(!(t in globalThis)){let i;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(i!==void 0)return i;$f(t)},set:o=>{i=o}})}};var Dm=e;e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}const Cv="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Cv);_d();var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ba={exports:{}},Rv=ba.exports,zu;function Mv(){return zu||(zu=1,(function(e,t){(function(i,o){e.exports=o()})(Rv,(function(){var i=function(n,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])},i(n,r)};function o(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");i(n,r);function a(){this.constructor=n}n.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}var u=function(){return u=Object.assign||function(r){for(var a,s=1,l=arguments.length;s<l;s++){a=arguments[s];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(r[f]=a[f])}return r},u.apply(this,arguments)};function c(n,r,a){for(var s=0,l=r.length,f;s<l;s++)(f||!(s in r))&&(f||(f=Array.prototype.slice.call(r,0,s)),f[s]=r[s]);return n.concat(f||Array.prototype.slice.call(r))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Lv,p=Object.keys,h=Array.isArray;typeof Promise<"u"&&!d.Promise&&(d.Promise=Promise);function b(n,r){return typeof r!="object"||p(r).forEach(function(a){n[a]=r[a]}),n}var w=Object.getPrototypeOf,T={}.hasOwnProperty;function _(n,r){return T.call(n,r)}function E(n,r){typeof r=="function"&&(r=r(w(n))),(typeof Reflect>"u"?p:Reflect.ownKeys)(r).forEach(function(a){L(n,a,r[a])})}var O=Object.defineProperty;function L(n,r,a,s){O(n,r,b(a&&_(a,"get")&&typeof a.get=="function"?{get:a.get,set:a.set,configurable:!0}:{value:a,configurable:!0,writable:!0},s))}function D(n){return{from:function(r){return n.prototype=Object.create(r.prototype),L(n.prototype,"constructor",n),{extend:E.bind(null,n.prototype)}}}}var A=Object.getOwnPropertyDescriptor;function H(n,r){var a=A(n,r),s;return a||(s=w(n))&&H(s,r)}var F=[].slice;function N(n,r,a){return F.call(n,r,a)}function W(n,r){return r(n)}function X(n){if(!n)throw new Error("Assertion Failed")}function oe(n){d.setImmediate?setImmediate(n):setTimeout(n,0)}function re(n,r){return n.reduce(function(a,s,l){var f=r(s,l);return f&&(a[f[0]]=f[1]),a},{})}function se(n,r){if(typeof r=="string"&&_(n,r))return n[r];if(!r)return n;if(typeof r!="string"){for(var a=[],s=0,l=r.length;s<l;++s){var f=se(n,r[s]);a.push(f)}return a}var v=r.indexOf(".");if(v!==-1){var y=n[r.substr(0,v)];return y==null?void 0:se(y,r.substr(v+1))}}function de(n,r,a){if(!(!n||r===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof r!="string"&&"length"in r){X(typeof a!="string"&&"length"in a);for(var s=0,l=r.length;s<l;++s)de(n,r[s],a[s])}else{var f=r.indexOf(".");if(f!==-1){var v=r.substr(0,f),y=r.substr(f+1);if(y==="")a===void 0?h(n)&&!isNaN(parseInt(v))?n.splice(v,1):delete n[v]:n[v]=a;else{var g=n[v];(!g||!_(n,v))&&(g=n[v]={}),de(g,y,a)}}else a===void 0?h(n)&&!isNaN(parseInt(r))?n.splice(r,1):delete n[r]:n[r]=a}}function ie(n,r){typeof r=="string"?de(n,r,void 0):"length"in r&&[].map.call(r,function(a){de(n,a,void 0)})}function ge(n){var r={};for(var a in n)_(n,a)&&(r[a]=n[a]);return r}var je=[].concat;function Ke(n){return je.apply([],n)}var Ze="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ke([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(r){return r+n+"Array"})}))).filter(function(n){return d[n]}),at=new Set(Ze.map(function(n){return d[n]}));function Ae(n){var r={};for(var a in n)if(_(n,a)){var s=n[a];r[a]=!s||typeof s!="object"||at.has(s.constructor)?s:Ae(s)}return r}function bt(n){for(var r in n)if(_(n,r))return!1;return!0}var Ie=null;function ze(n){Ie=new WeakMap;var r=te(n);return Ie=null,r}function te(n){if(!n||typeof n!="object")return n;var r=Ie.get(n);if(r)return r;if(h(n)){r=[],Ie.set(n,r);for(var a=0,s=n.length;a<s;++a)r.push(te(n[a]))}else if(at.has(n.constructor))r=n;else{var l=w(n);r=l===Object.prototype?{}:Object.create(l),Ie.set(n,r);for(var f in n)_(n,f)&&(r[f]=te(n[f]))}return r}var ye={}.toString;function Re(n){return ye.call(n).slice(8,-1)}var Ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ce=typeof Ue=="symbol"?function(n){var r;return n!=null&&(r=n[Ue])&&r.apply(n)}:function(){return null};function Be(n,r){var a=n.indexOf(r);return a>=0&&n.splice(a,1),a>=0}var ft={};function dt(n){var r,a,s,l;if(arguments.length===1){if(h(n))return n.slice();if(this===ft&&typeof n=="string")return[n];if(l=Ce(n)){for(a=[];s=l.next(),!s.done;)a.push(s.value);return a}if(n==null)return[n];if(r=n.length,typeof r=="number"){for(a=new Array(r);r--;)a[r]=n[r];return a}return[n]}for(r=arguments.length,a=new Array(r);r--;)a[r]=arguments[r];return a}var tn=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},sr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ve=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],St=sr.concat(Ve),ur={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Yt(n,r){this.name=n,this.message=r}D(Yt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Ht(n,r){return n+". Errors: "+Object.keys(r).map(function(a){return r[a].toString()}).filter(function(a,s,l){return l.indexOf(a)===s}).join(`
`)}function Rt(n,r,a,s){this.failures=r,this.failedKeys=s,this.successCount=a,this.message=Ht(n,r)}D(Rt).from(Yt);function Ot(n,r){this.name="BulkError",this.failures=Object.keys(r).map(function(a){return r[a]}),this.failuresByPos=r,this.message=Ht(n,this.failures)}D(Ot).from(Yt);var cn=St.reduce(function(n,r){return n[r]=r+"Error",n},{}),Kn=Yt,ue=St.reduce(function(n,r){var a=r+"Error";function s(l,f){this.name=a,l?typeof l=="string"?(this.message="".concat(l).concat(f?`
 `+f:""),this.inner=f||null):typeof l=="object"&&(this.message="".concat(l.name," ").concat(l.message),this.inner=l):(this.message=ur[r]||a,this.inner=null)}return D(s).from(Kn),n[r]=s,n},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var Fn=Ve.reduce(function(n,r){return n[r+"Error"]=ue[r],n},{});function Cr(n,r){if(!n||n instanceof Yt||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Fn[n.name])return n;var a=new Fn[n.name](r||n.message,n);return"stack"in n&&L(a,"stack",{get:function(){return this.inner.stack}}),a}var Tn=St.reduce(function(n,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(n[r+"Error"]=ue[r]),n},{});Tn.ModifyError=Rt,Tn.DexieError=Yt,Tn.BulkError=Ot;function Se(){}function kn(n){return n}function q(n,r){return n==null||n===kn?r:function(a){return r(n(a))}}function U(n,r){return function(){n.apply(this,arguments),r.apply(this,arguments)}}function G(n,r){return n===Se?r:function(){var a=n.apply(this,arguments);a!==void 0&&(arguments[0]=a);var s=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var f=r.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?U(s,this.onsuccess):s),l&&(this.onerror=this.onerror?U(l,this.onerror):l),f!==void 0?f:a}}function ne(n,r){return n===Se?r:function(){n.apply(this,arguments);var a=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?U(a,this.onsuccess):a),s&&(this.onerror=this.onerror?U(s,this.onerror):s)}}function Le(n,r){return n===Se?r:function(a){var s=n.apply(this,arguments);b(a,s);var l=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var v=r.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?U(l,this.onsuccess):l),f&&(this.onerror=this.onerror?U(f,this.onerror):f),s===void 0?v===void 0?void 0:v:b(s,v)}}function rt(n,r){return n===Se?r:function(){return r.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function xe(n,r){return n===Se?r:function(){var a=n.apply(this,arguments);if(a&&typeof a.then=="function"){for(var s=this,l=arguments.length,f=new Array(l);l--;)f[l]=arguments[l];return a.then(function(){return r.apply(s,f)})}return r.apply(this,arguments)}}var he=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Qe(n,r){he=n}var He={},vt=100,Te=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,w(n),n];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,w(r),n]})(),nn=Te[0],lr=Te[1],We=Te[2],ht=lr&&lr.then,Xe=nn&&nn.constructor,rn=!!We;function ri(){queueMicrotask(xc)}var ii=function(n,r){ai.push([n,r]),zi&&(ri(),zi=!1)},uo=!0,zi=!0,cr=[],Hi=[],lo=kn,Bn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},le=Bn,ai=[],fr=0,Ui=[];function J(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=le;if(typeof n!="function"){if(n!==He)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&fo(this,this._value);return}this._state=null,this._value=null,++r.ref,Ys(this,n)}var co={get:function(){var n=le,r=Yi;function a(s,l){var f=this,v=!n.global&&(n!==le||r!==Yi),y=v&&!zn(),g=new J(function(x,S){vo(f,new Gs(Qs(s,n,v,y),Qs(l,n,v,y),x,S,n))});return this._consoleTask&&(g._consoleTask=this._consoleTask),g}return a.prototype=He,a},set:function(n){L(this,"then",n&&n.prototype===He?co:{get:function(){return n},set:co.set})}};E(J.prototype,{then:co,_then:function(n,r){vo(this,new Gs(null,null,n,r,le))},catch:function(n){if(arguments.length===1)return this.then(null,n);var r=arguments[0],a=arguments[1];return typeof r=="function"?this.then(null,function(s){return s instanceof r?a(s):Vi(s)}):this.then(null,function(s){return s&&s.name===r?a(s):Vi(s)})},finally:function(n){return this.then(function(r){return J.resolve(n()).then(function(){return r})},function(r){return J.resolve(n()).then(function(){return Vi(r)})})},timeout:function(n,r){var a=this;return n<1/0?new J(function(s,l){var f=setTimeout(function(){return l(new ue.Timeout(r))},n);a.then(s,l).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(J.prototype,Symbol.toStringTag,"Dexie.Promise"),Bn.env=Zs();function Gs(n,r,a,s,l){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=a,this.reject=s,this.psd=l}E(J,{all:function(){var n=dt.apply(null,arguments).map(qi);return new J(function(r,a){n.length===0&&r([]);var s=n.length;n.forEach(function(l,f){return J.resolve(l).then(function(v){n[f]=v,--s||r(n)},a)})})},resolve:function(n){if(n instanceof J)return n;if(n&&typeof n.then=="function")return new J(function(a,s){n.then(a,s)});var r=new J(He,!0,n);return r},reject:Vi,race:function(){var n=dt.apply(null,arguments).map(qi);return new J(function(r,a){n.map(function(s){return J.resolve(s).then(r,a)})})},PSD:{get:function(){return le},set:function(n){return le=n}},totalEchoes:{get:function(){return Yi}},newPSD:jn,usePSD:dr,scheduler:{get:function(){return ii},set:function(n){ii=n}},rejectionMapper:{get:function(){return lo},set:function(n){lo=n}},follow:function(n,r){return new J(function(a,s){return jn(function(l,f){var v=le;v.unhandleds=[],v.onunhandled=f,v.finalize=U(function(){var y=this;Tc(function(){y.unhandleds.length===0?l():f(y.unhandleds[0])})},v.finalize),n()},r,a,s)})}}),Xe&&(Xe.allSettled&&L(J,"allSettled",function(){var n=dt.apply(null,arguments).map(qi);return new J(function(r){n.length===0&&r([]);var a=n.length,s=new Array(a);n.forEach(function(l,f){return J.resolve(l).then(function(v){return s[f]={status:"fulfilled",value:v}},function(v){return s[f]={status:"rejected",reason:v}}).then(function(){return--a||r(s)})})})}),Xe.any&&typeof AggregateError<"u"&&L(J,"any",function(){var n=dt.apply(null,arguments).map(qi);return new J(function(r,a){n.length===0&&a(new AggregateError([]));var s=n.length,l=new Array(s);n.forEach(function(f,v){return J.resolve(f).then(function(y){return r(y)},function(y){l[v]=y,--s||a(new AggregateError(l))})})})}),Xe.withResolvers&&(J.withResolvers=Xe.withResolvers));function Ys(n,r){try{r(function(a){if(n._state===null){if(a===n)throw new TypeError("A promise cannot be resolved with itself.");var s=n._lib&&Lr();a&&typeof a.then=="function"?Ys(n,function(l,f){a instanceof J?a._then(l,f):a.then(l,f)}):(n._state=!0,n._value=a,qs(n)),s&&Pr()}},fo.bind(null,n))}catch(a){fo(n,a)}}function fo(n,r){if(Hi.push(r),n._state===null){var a=n._lib&&Lr();r=lo(r),n._state=!1,n._value=r,kc(n),qs(n),a&&Pr()}}function qs(n){var r=n._listeners;n._listeners=[];for(var a=0,s=r.length;a<s;++a)vo(n,r[a]);var l=n._PSD;--l.ref||l.finalize(),fr===0&&(++fr,ii(function(){--fr===0&&ho()},[]))}function vo(n,r){if(n._state===null){n._listeners.push(r);return}var a=n._state?r.onFulfilled:r.onRejected;if(a===null)return(n._state?r.resolve:r.reject)(n._value);++r.psd.ref,++fr,ii(Ec,[a,n,r])}function Ec(n,r,a){try{var s,l=r._value;!r._state&&Hi.length&&(Hi=[]),s=he&&r._consoleTask?r._consoleTask.run(function(){return n(l)}):n(l),!r._state&&Hi.indexOf(l)===-1&&Ac(r),a.resolve(s)}catch(f){a.reject(f)}finally{--fr===0&&ho(),--a.psd.ref||a.psd.finalize()}}function xc(){dr(Bn,function(){Lr()&&Pr()})}function Lr(){var n=uo;return uo=!1,zi=!1,n}function Pr(){var n,r,a;do for(;ai.length>0;)for(n=ai,ai=[],a=n.length,r=0;r<a;++r){var s=n[r];s[0].apply(null,s[1])}while(ai.length>0);uo=!0,zi=!0}function ho(){var n=cr;cr=[],n.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var r=Ui.slice(0),a=r.length;a;)r[--a]()}function Tc(n){function r(){n(),Ui.splice(Ui.indexOf(r),1)}Ui.push(r),++fr,ii(function(){--fr===0&&ho()},[])}function kc(n){cr.some(function(r){return r._value===n._value})||cr.push(n)}function Ac(n){for(var r=cr.length;r;)if(cr[--r]._value===n._value){cr.splice(r,1);return}}function Vi(n){return new J(He,!1,n)}function Ge(n,r){var a=le;return function(){var s=Lr(),l=le;try{return Hn(a,!0),n.apply(this,arguments)}catch(f){r&&r(f)}finally{Hn(l,!1),s&&Pr()}}}var ut={awaits:0,echoes:0,id:0},Ic=0,Wi=[],Gi=0,Yi=0,Dc=0;function jn(n,r,a,s){var l=le,f=Object.create(l);f.parent=l,f.ref=0,f.global=!1,f.id=++Dc,Bn.env,f.env=rn?{Promise:J,PromiseProp:{value:J,configurable:!0,writable:!0},all:J.all,race:J.race,allSettled:J.allSettled,any:J.any,resolve:J.resolve,reject:J.reject}:{},r&&b(f,r),++l.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()};var v=dr(f,n,a,s);return f.ref===0&&f.finalize(),v}function Rr(){return ut.id||(ut.id=++Ic),++ut.awaits,ut.echoes+=vt,ut.id}function zn(){return ut.awaits?(--ut.awaits===0&&(ut.id=0),ut.echoes=ut.awaits*vt,!0):!1}(""+ht).indexOf("[native code]")===-1&&(Rr=zn=Se);function qi(n){return ut.echoes&&n&&n.constructor===Xe?(Rr(),n.then(function(r){return zn(),r},function(r){return zn(),$e(r)})):n}function Sc(n){++Yi,(!ut.echoes||--ut.echoes===0)&&(ut.echoes=ut.awaits=ut.id=0),Wi.push(le),Hn(n,!0)}function Oc(){var n=Wi[Wi.length-1];Wi.pop(),Hn(n,!1)}function Hn(n,r){var a=le;if((r?ut.echoes&&(!Gi++||n!==le):Gi&&(!--Gi||n!==le))&&queueMicrotask(r?Sc.bind(null,n):Oc),n!==le&&(le=n,a===Bn&&(Bn.env=Zs()),rn)){var s=Bn.env.Promise,l=n.env;(a.global||n.global)&&(Object.defineProperty(d,"Promise",l.PromiseProp),s.all=l.all,s.race=l.race,s.resolve=l.resolve,s.reject=l.reject,l.allSettled&&(s.allSettled=l.allSettled),l.any&&(s.any=l.any))}}function Zs(){var n=d.Promise;return rn?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function dr(n,r,a,s,l){var f=le;try{return Hn(n,!0),r(a,s,l)}finally{Hn(f,!1)}}function Qs(n,r,a,s){return typeof n!="function"?n:function(){var l=le;a&&Rr(),Hn(r,!0);try{return n.apply(this,arguments)}finally{Hn(l,!1),s&&queueMicrotask(zn)}}}function po(n){Promise===Xe&&ut.echoes===0?Gi===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}var $e=J.reject;function mo(n,r,a,s){if(!n.idbdb||!n._state.openComplete&&!le.letThrough&&!n._vip){if(n._state.openComplete)return $e(new ue.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return $e(new ue.DatabaseClosed);n.open().catch(Se)}return n._state.dbReadyPromise.then(function(){return mo(n,r,a,s)})}else{var l=n._createTransaction(r,a,n._dbSchema);try{l.create(),n._state.PR1398_maxLoop=3}catch(f){return f.name===cn.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return mo(n,r,a,s)})):$e(f)}return l._promise(r,function(f,v){return jn(function(){return le.trans=l,s(f,v,l)})}).then(function(f){if(r==="readwrite")try{l.idbtrans.commit()}catch{}return r==="readonly"?f:l._completion.then(function(){return f})})}}var Xs="4.2.1",vr="ï¿¿",yo=-1/0,An="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Js="String expected.",Mr=[],Zi="__dbnames",go="readonly",_o="readwrite";function hr(n,r){return n?r?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:n:r}var $s={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qi(n){return typeof n=="string"&&!/\./.test(n)?function(r){return r[n]===void 0&&n in r&&(r=ze(r),delete r[n]),r}:function(r){return r}}function eu(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function De(n,r){try{var a=tu(n),s=tu(r);if(a!==s)return a==="Array"?1:s==="Array"?-1:a==="binary"?1:s==="binary"?-1:a==="string"?1:s==="string"?-1:a==="Date"?1:s!=="Date"?NaN:-1;switch(a){case"number":case"Date":case"string":return n>r?1:n<r?-1:0;case"binary":return Lc(nu(n),nu(r));case"Array":return Cc(n,r)}}catch{}return NaN}function Cc(n,r){for(var a=n.length,s=r.length,l=a<s?a:s,f=0;f<l;++f){var v=De(n[f],r[f]);if(v!==0)return v}return a===s?0:a<s?-1:1}function Lc(n,r){for(var a=n.length,s=r.length,l=a<s?a:s,f=0;f<l;++f)if(n[f]!==r[f])return n[f]<r[f]?-1:1;return a===s?0:a<s?-1:1}function tu(n){var r=typeof n;if(r!=="object")return r;if(ArrayBuffer.isView(n))return"binary";var a=Re(n);return a==="ArrayBuffer"?"binary":a}function nu(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function Xi(n,r,a){var s=n.schema.yProps;return s?(r&&a.numFailures>0&&(r=r.filter(function(l,f){return!a.failures[f]})),Promise.all(s.map(function(l){var f=l.updatesTable;return r?n.db.table(f).where("k").anyOf(r).delete():n.db.table(f).clear()})).then(function(){return a})):a}var oi=(function(){function n(r){this["@@propmod"]=r}return n.prototype.execute=function(r){var a,s=this["@@propmod"];if(s.add!==void 0){var l=s.add;if(h(l))return c(c([],h(r)?r:[],!0),l).sort();if(typeof l=="number")return(Number(r)||0)+l;if(typeof l=="bigint")try{return BigInt(r)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(s.remove!==void 0){var f=s.remove;if(h(f))return h(r)?r.filter(function(y){return!f.includes(y)}).sort():[];if(typeof f=="number")return Number(r)-f;if(typeof f=="bigint")try{return BigInt(r)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}var v=(a=s.replacePrefix)===null||a===void 0?void 0:a[0];return v&&typeof r=="string"&&r.startsWith(v)?s.replacePrefix[1]+r.substring(v.length):r},n})();function ru(n,r){for(var a=p(r),s=a.length,l=!1,f=0;f<s;++f){var v=a[f],y=r[v],g=se(n,v);y instanceof oi?(de(n,v,y.execute(g)),l=!0):g!==y&&(de(n,v,y),l=!0)}return l}var iu=(function(){function n(){}return n.prototype._trans=function(r,a,s){var l=this._tx||le.trans,f=this.name,v=he&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function y(S,k,R){if(!R.schema[f])throw new ue.NotFound("Table "+f+" not part of transaction");return a(R.idbtrans,R)}var g=Lr();try{var x=l&&l.db._novip===this.db._novip?l===le.trans?l._promise(r,y,s):jn(function(){return l._promise(r,y,s)},{trans:l,transless:le.transless||le}):mo(this.db,r,[this.name],y);return v&&(x._consoleTask=v,x=x.catch(function(S){return console.trace(S),$e(S)})),x}finally{g&&Pr()}},n.prototype.get=function(r,a){var s=this;return r&&r.constructor===Object?this.where(r).first(a):r==null?$e(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(l){return s.core.get({trans:l,key:r}).then(function(f){return s.hook.reading.fire(f)})}).then(a)},n.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(h(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var a=p(r);if(a.length===1)return this.where(a[0]).equals(r[a[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&a.every(function(R){return S.keyPath.indexOf(R)>=0})){for(var k=0;k<a.length;++k)if(a.indexOf(S.keyPath[k])===-1)return!1;return!0}return!1}).sort(function(S,k){return S.keyPath.length-k.keyPath.length})[0];if(s&&this.db._maxKey!==vr){var l=s.keyPath.slice(0,a.length);return this.where(l).equals(l.map(function(S){return r[S]}))}!s&&he&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var f=this.schema.idxByName;function v(S,k){return De(S,k)===0}var y=a.reduce(function(S,k){var R=S[0],Y=S[1],I=f[k],C=r[k];return[R||I,R||!I?hr(Y,I&&I.multi?function(P){var K=se(P,k);return h(K)&&K.some(function(j){return v(C,j)})}:function(P){return v(C,se(P,k))}):Y]},[null,null]),g=y[0],x=y[1];return g?this.where(g.name).equals(r[g.keyPath]).filter(x):s?this.filter(x):this.where(a).equals("")},n.prototype.filter=function(r){return this.toCollection().and(r)},n.prototype.count=function(r){return this.toCollection().count(r)},n.prototype.offset=function(r){return this.toCollection().offset(r)},n.prototype.limit=function(r){return this.toCollection().limit(r)},n.prototype.each=function(r){return this.toCollection().each(r)},n.prototype.toArray=function(r){return this.toCollection().toArray(r)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,h(r)?"[".concat(r.join("+"),"]"):r))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(r){var a=this,s=a.db,l=a.name;this.schema.mappedClass=r,r.prototype instanceof eu&&(r=(function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return Object.defineProperty(x.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),x.prototype.table=function(){return l},x})(r));for(var f=new Set,v=r.prototype;v;v=w(v))Object.getOwnPropertyNames(v).forEach(function(g){return f.add(g)});var y=function(g){if(!g)return g;var x=Object.create(r.prototype);for(var S in g)if(!f.has(S))try{x[S]=g[S]}catch{}return x};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=y,this.hook("reading",y),r},n.prototype.defineClass=function(){function r(a){b(this,a)}return this.mapToClass(r)},n.prototype.add=function(r,a){var s=this,l=this.schema.primKey,f=l.auto,v=l.keyPath,y=r;return v&&f&&(y=Qi(v)(r)),this._trans("readwrite",function(g){return s.core.mutate({trans:g,type:"add",keys:a!=null?[a]:null,values:[y]})}).then(function(g){return g.numFailures?J.reject(g.failures[0]):g.lastResult}).then(function(g){if(v)try{de(r,v,g)}catch{}return g})},n.prototype.upsert=function(r,a){var s=this,l=this.schema.primKey.keyPath;return this._trans("readwrite",function(f){return s.core.get({trans:f,key:r}).then(function(v){var y=v??{};return ru(y,a),l&&de(y,l,r),s.core.mutate({trans:f,type:"put",values:[y],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[a]}}).then(function(g){return g.numFailures?J.reject(g.failures[0]):!!v})})})},n.prototype.update=function(r,a){if(typeof r=="object"&&!h(r)){var s=se(r,this.schema.primKey.keyPath);return s===void 0?$e(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(a)}else return this.where(":id").equals(r).modify(a)},n.prototype.put=function(r,a){var s=this,l=this.schema.primKey,f=l.auto,v=l.keyPath,y=r;return v&&f&&(y=Qi(v)(r)),this._trans("readwrite",function(g){return s.core.mutate({trans:g,type:"put",values:[y],keys:a!=null?[a]:null})}).then(function(g){return g.numFailures?J.reject(g.failures[0]):g.lastResult}).then(function(g){if(v)try{de(r,v,g)}catch{}return g})},n.prototype.delete=function(r){var a=this;return this._trans("readwrite",function(s){return a.core.mutate({trans:s,type:"delete",keys:[r]}).then(function(l){return Xi(a,[r],l)}).then(function(l){return l.numFailures?J.reject(l.failures[0]):void 0})})},n.prototype.clear=function(){var r=this;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"deleteRange",range:$s}).then(function(s){return Xi(r,null,s)})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):void 0})},n.prototype.bulkGet=function(r){var a=this;return this._trans("readonly",function(s){return a.core.getMany({keys:r,trans:s}).then(function(l){return l.map(function(f){return a.hook.reading.fire(f)})})})},n.prototype.bulkAdd=function(r,a,s){var l=this,f=Array.isArray(a)?a:void 0;s=s||(f?void 0:a);var v=s?s.allKeys:void 0;return this._trans("readwrite",function(y){var g=l.schema.primKey,x=g.auto,S=g.keyPath;if(S&&f)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var k=r.length,R=S&&x?r.map(Qi(S)):r;return l.core.mutate({trans:y,type:"add",keys:f,values:R,wantResults:v}).then(function(Y){var I=Y.numFailures,C=Y.results,P=Y.lastResult,K=Y.failures,j=v?C:P;if(I===0)return j;throw new Ot("".concat(l.name,".bulkAdd(): ").concat(I," of ").concat(k," operations failed"),K)})})},n.prototype.bulkPut=function(r,a,s){var l=this,f=Array.isArray(a)?a:void 0;s=s||(f?void 0:a);var v=s?s.allKeys:void 0;return this._trans("readwrite",function(y){var g=l.schema.primKey,x=g.auto,S=g.keyPath;if(S&&f)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==r.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var k=r.length,R=S&&x?r.map(Qi(S)):r;return l.core.mutate({trans:y,type:"put",keys:f,values:R,wantResults:v}).then(function(Y){var I=Y.numFailures,C=Y.results,P=Y.lastResult,K=Y.failures,j=v?C:P;if(I===0)return j;throw new Ot("".concat(l.name,".bulkPut(): ").concat(I," of ").concat(k," operations failed"),K)})})},n.prototype.bulkUpdate=function(r){var a=this,s=this.core,l=r.map(function(y){return y.key}),f=r.map(function(y){return y.changes}),v=[];return this._trans("readwrite",function(y){return s.getMany({trans:y,keys:l,cache:"clone"}).then(function(g){var x=[],S=[];r.forEach(function(R,Y){var I=R.key,C=R.changes,P=g[Y];if(P){for(var K=0,j=Object.keys(C);K<j.length;K++){var z=j[K],V=C[z];if(z===a.schema.primKey.keyPath){if(De(V,I)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else de(P,z,V)}v.push(Y),x.push(I),S.push(P)}});var k=x.length;return s.mutate({trans:y,type:"put",keys:x,values:S,updates:{keys:l,changeSpecs:f}}).then(function(R){var Y=R.numFailures,I=R.failures;if(Y===0)return k;for(var C=0,P=Object.keys(I);C<P.length;C++){var K=P[C],j=v[Number(K)];if(j!=null){var z=I[K];delete I[K],I[j]=z}}throw new Ot("".concat(a.name,".bulkUpdate(): ").concat(Y," of ").concat(k," operations failed"),I)})})})},n.prototype.bulkDelete=function(r){var a=this,s=r.length;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"delete",keys:r}).then(function(f){return Xi(a,r,f)})}).then(function(l){var f=l.numFailures,v=l.lastResult,y=l.failures;if(f===0)return v;throw new Ot("".concat(a.name,".bulkDelete(): ").concat(f," of ").concat(s," operations failed"),y)})},n})();function si(n){var r={},a=function(y,g){if(g){for(var x=arguments.length,S=new Array(x-1);--x;)S[x-1]=arguments[x];return r[y].subscribe.apply(null,S),n}else if(typeof y=="string")return r[y]};a.addEventType=f;for(var s=1,l=arguments.length;s<l;++s)f(arguments[s]);return a;function f(y,g,x){if(typeof y=="object")return v(y);g||(g=rt),x||(x=Se);var S={subscribers:[],fire:x,subscribe:function(k){S.subscribers.indexOf(k)===-1&&(S.subscribers.push(k),S.fire=g(S.fire,k))},unsubscribe:function(k){S.subscribers=S.subscribers.filter(function(R){return R!==k}),S.fire=S.subscribers.reduce(g,x)}};return r[y]=a[y]=S,S}function v(y){p(y).forEach(function(g){var x=y[g];if(h(x))f(g,y[g][0],y[g][1]);else if(x==="asap")var S=f(g,kn,function(){for(var R=arguments.length,Y=new Array(R);R--;)Y[R]=arguments[R];S.subscribers.forEach(function(I){oe(function(){I.apply(null,Y)})})});else throw new ue.InvalidArgument("Invalid event config")})}}function ui(n,r){return D(r).from({prototype:n}),r}function Pc(n){return ui(iu.prototype,function(a,s,l){this.db=n,this._tx=l,this.name=a,this.schema=s,this.hook=n._allTables[a]?n._allTables[a].hook:si(null,{creating:[G,Se],reading:[q,kn],updating:[Le,Se],deleting:[ne,Se]})})}function Nr(n,r){return!(n.filter||n.algorithm||n.or)&&(r?n.justLimit:!n.replayFilter)}function bo(n,r){n.filter=hr(n.filter,r)}function wo(n,r,a){var s=n.replayFilter;n.replayFilter=s?function(){return hr(s(),r())}:r,n.justLimit=a&&!s}function Rc(n,r){n.isMatch=hr(n.isMatch,r)}function Ji(n,r){if(n.isPrimKey)return r.primaryKey;var a=r.getIndexByKeyPath(n.index);if(!a)throw new ue.Schema("KeyPath "+n.index+" on object store "+r.name+" is not indexed");return a}function au(n,r,a){var s=Ji(n,r.schema);return r.openCursor({trans:a,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:s,range:n.range}})}function $i(n,r,a,s){var l=n.replayFilter?hr(n.filter,n.replayFilter()):n.filter;if(n.or){var f={},v=function(y,g,x){if(!l||l(g,x,function(R){return g.stop(R)},function(R){return g.fail(R)})){var S=g.primaryKey,k=""+S;k==="[object ArrayBuffer]"&&(k=""+new Uint8Array(S)),_(f,k)||(f[k]=!0,r(y,g,x))}};return Promise.all([n.or._iterate(v,a),ou(au(n,s,a),n.algorithm,v,!n.keysOnly&&n.valueMapper)])}else return ou(au(n,s,a),hr(n.algorithm,l),r,!n.keysOnly&&n.valueMapper)}function ou(n,r,a,s){var l=s?function(v,y,g){return a(s(v),y,g)}:a,f=Ge(l);return n.then(function(v){if(v)return v.start(function(){var y=function(){return v.continue()};(!r||r(v,function(g){return y=g},function(g){v.stop(g),y=Se},function(g){v.fail(g),y=Se}))&&f(v.value,v,function(g){return y=g}),y()})})}var Mc=(function(){function n(){}return n.prototype._read=function(r,a){var s=this._ctx;return s.error?s.table._trans(null,$e.bind(null,s.error)):s.table._trans("readonly",r).then(a)},n.prototype._write=function(r){var a=this._ctx;return a.error?a.table._trans(null,$e.bind(null,a.error)):a.table._trans("readwrite",r,"locked")},n.prototype._addAlgorithm=function(r){var a=this._ctx;a.algorithm=hr(a.algorithm,r)},n.prototype._iterate=function(r,a){return $i(this._ctx,r,a,this._ctx.table.core)},n.prototype.clone=function(r){var a=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return r&&b(s,r),a._ctx=s,a},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(r){var a=this._ctx;return this._read(function(s){return $i(a,r,s,a.table.core)})},n.prototype.count=function(r){var a=this;return this._read(function(s){var l=a._ctx,f=l.table.core;if(Nr(l,!0))return f.count({trans:s,query:{index:Ji(l,f.schema),range:l.range}}).then(function(y){return Math.min(y,l.limit)});var v=0;return $i(l,function(){return++v,!1},s,f).then(function(){return v})}).then(r)},n.prototype.sortBy=function(r,a){var s=r.split(".").reverse(),l=s[0],f=s.length-1;function v(x,S){return S?v(x[s[S]],S-1):x[l]}var y=this._ctx.dir==="next"?1:-1;function g(x,S){var k=v(x,f),R=v(S,f);return De(k,R)*y}return this.toArray(function(x){return x.sort(g)}).then(a)},n.prototype.toArray=function(r){var a=this;return this._read(function(s){var l=a._ctx;if(l.dir==="next"&&Nr(l,!0)&&l.limit>0){var f=l.valueMapper,v=Ji(l,l.table.core.schema);return l.table.core.query({trans:s,limit:l.limit,values:!0,query:{index:v,range:l.range}}).then(function(g){var x=g.result;return f?x.map(f):x})}else{var y=[];return $i(l,function(g){return y.push(g)},s,l.table.core).then(function(){return y})}},r)},n.prototype.offset=function(r){var a=this._ctx;return r<=0?this:(a.offset+=r,Nr(a)?wo(a,function(){var s=r;return function(l,f){return s===0?!0:s===1?(--s,!1):(f(function(){l.advance(s),s=0}),!1)}}):wo(a,function(){var s=r;return function(){return--s<0}}),this)},n.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),wo(this._ctx,function(){var a=r;return function(s,l,f){return--a<=0&&l(f),a>=0}},!0),this},n.prototype.until=function(r,a){return bo(this._ctx,function(s,l,f){return r(s.value)?(l(f),a):!0}),this},n.prototype.first=function(r){return this.limit(1).toArray(function(a){return a[0]}).then(r)},n.prototype.last=function(r){return this.reverse().first(r)},n.prototype.filter=function(r){return bo(this._ctx,function(a){return r(a.value)}),Rc(this._ctx,r),this},n.prototype.and=function(r){return this.filter(r)},n.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(r){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(s,l){r(l.key,l)})},n.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},n.prototype.eachPrimaryKey=function(r){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(s,l){r(l.primaryKey,l)})},n.prototype.keys=function(r){var a=this._ctx;a.keysOnly=!a.isMatch;var s=[];return this.each(function(l,f){s.push(f.key)}).then(function(){return s}).then(r)},n.prototype.primaryKeys=function(r){var a=this._ctx;if(a.dir==="next"&&Nr(a,!0)&&a.limit>0)return this._read(function(l){var f=Ji(a,a.table.core.schema);return a.table.core.query({trans:l,values:!1,limit:a.limit,query:{index:f,range:a.range}})}).then(function(l){var f=l.result;return f}).then(r);a.keysOnly=!a.isMatch;var s=[];return this.each(function(l,f){s.push(f.primaryKey)}).then(function(){return s}).then(r)},n.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},n.prototype.firstKey=function(r){return this.limit(1).keys(function(a){return a[0]}).then(r)},n.prototype.lastKey=function(r){return this.reverse().firstKey(r)},n.prototype.distinct=function(){var r=this._ctx,a=r.index&&r.table.schema.idxByName[r.index];if(!a||!a.multi)return this;var s={};return bo(this._ctx,function(l){var f=l.primaryKey.toString(),v=_(s,f);return s[f]=!0,!v}),this},n.prototype.modify=function(r){var a=this,s=this._ctx;return this._write(function(l){var f;typeof r=="function"?f=r:f=function(K){return ru(K,r)};var v=s.table.core,y=v.schema.primaryKey,g=y.outbound,x=y.extractKey,S=200,k=a.db._options.modifyChunkSize;k&&(typeof k=="object"?S=k[v.name]||k["*"]||200:S=k);var R=[],Y=0,I=[],C=function(K,j){var z=j.failures,V=j.numFailures;Y+=K-V;for(var B=0,Z=p(z);B<Z.length;B++){var $=Z[B];R.push(z[$])}},P=r===su;return a.clone().primaryKeys().then(function(K){var j=Nr(s)&&s.limit===1/0&&(typeof r!="function"||P)&&{index:s.index,range:s.range},z=function(V){var B=Math.min(S,K.length-V),Z=K.slice(V,V+B);return(P?Promise.resolve([]):v.getMany({trans:l,keys:Z,cache:"immutable"})).then(function($){var Q=[],ve=[],Ee=g?[]:null,ee=P?Z:[];if(!P)for(var be=0;be<B;++be){var pe=$[be],Oe={value:ze(pe),primKey:K[V+be]};f.call(Oe,Oe.value,Oe)!==!1&&(Oe.value==null?ee.push(K[V+be]):!g&&De(x(pe),x(Oe.value))!==0?(ee.push(K[V+be]),Q.push(Oe.value)):(ve.push(Oe.value),g&&Ee.push(K[V+be])))}return Promise.resolve(Q.length>0&&v.mutate({trans:l,type:"add",values:Q}).then(function(ce){for(var Je in ce.failures)ee.splice(parseInt(Je),1);C(Q.length,ce)})).then(function(){return(ve.length>0||j&&typeof r=="object")&&v.mutate({trans:l,type:"put",keys:Ee,values:ve,criteria:j,changeSpec:typeof r!="function"&&r,isAdditionalChunk:V>0}).then(function(ce){return C(ve.length,ce)})}).then(function(){return(ee.length>0||j&&P)&&v.mutate({trans:l,type:"delete",keys:ee,criteria:j,isAdditionalChunk:V>0}).then(function(ce){return Xi(s.table,ee,ce)}).then(function(ce){return C(ee.length,ce)})}).then(function(){return K.length>V+B&&z(V+S)})})};return z(0).then(function(){if(R.length>0)throw new Rt("Error modifying one or more objects",R,Y,I);return K.length})})})},n.prototype.delete=function(){var r=this._ctx,a=r.range;return Nr(r)&&!r.table.schema.yProps&&(r.isPrimKey||a.type===3)?this._write(function(s){var l=r.table.core.schema.primaryKey,f=a;return r.table.core.count({trans:s,query:{index:l,range:f}}).then(function(v){return r.table.core.mutate({trans:s,type:"deleteRange",range:f}).then(function(y){var g=y.failures,x=y.numFailures;if(x)throw new Rt("Could not delete some values",Object.keys(g).map(function(S){return g[S]}),v-x);return v-x})})}):this.modify(su)},n})(),su=function(n,r){return r.value=null};function Nc(n){return ui(Mc.prototype,function(a,s){this.db=n;var l=$s,f=null;if(s)try{l=s()}catch(x){f=x}var v=a._ctx,y=v.table,g=y.hook.reading.fire;this._ctx={table:y,index:v.index,isPrimKey:!v.index||y.schema.primKey.keyPath&&v.index===y.schema.primKey.name,range:l,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:v.or,valueMapper:g!==kn?g:null}})}function Kc(n,r){return n<r?-1:n===r?0:1}function Fc(n,r){return n>r?-1:n===r?0:1}function Ut(n,r,a){var s=n instanceof lu?new n.Collection(n):n;return s._ctx.error=a?new a(r):new TypeError(r),s}function Kr(n){return new n.Collection(n,function(){return uu("")}).limit(0)}function Bc(n){return n==="next"?function(r){return r.toUpperCase()}:function(r){return r.toLowerCase()}}function jc(n){return n==="next"?function(r){return r.toLowerCase()}:function(r){return r.toUpperCase()}}function zc(n,r,a,s,l,f){for(var v=Math.min(n.length,s.length),y=-1,g=0;g<v;++g){var x=r[g];if(x!==s[g])return l(n[g],a[g])<0?n.substr(0,g)+a[g]+a.substr(g+1):l(n[g],s[g])<0?n.substr(0,g)+s[g]+a.substr(g+1):y>=0?n.substr(0,y)+r[y]+a.substr(y+1):null;l(n[g],x)<0&&(y=g)}return v<s.length&&f==="next"?n+a.substr(n.length):v<n.length&&f==="prev"?n.substr(0,a.length):y<0?null:n.substr(0,y)+s[y]+a.substr(y+1)}function ea(n,r,a,s){var l,f,v,y,g,x,S,k=a.length;if(!a.every(function(C){return typeof C=="string"}))return Ut(n,Js);function R(C){l=Bc(C),f=jc(C),v=C==="next"?Kc:Fc;var P=a.map(function(K){return{lower:f(K),upper:l(K)}}).sort(function(K,j){return v(K.lower,j.lower)});y=P.map(function(K){return K.upper}),g=P.map(function(K){return K.lower}),x=C,S=C==="next"?"":s}R("next");var Y=new n.Collection(n,function(){return Un(y[0],g[k-1]+s)});Y._ondirectionchange=function(C){R(C)};var I=0;return Y._addAlgorithm(function(C,P,K){var j=C.key;if(typeof j!="string")return!1;var z=f(j);if(r(z,g,I))return!0;for(var V=null,B=I;B<k;++B){var Z=zc(j,z,y[B],g[B],v,x);Z===null&&V===null?I=B+1:(V===null||v(V,Z)>0)&&(V=Z)}return P(V!==null?function(){C.continue(V+S)}:K),!1}),Y}function Un(n,r,a,s){return{type:2,lower:n,upper:r,lowerOpen:a,upperOpen:s}}function uu(n){return{type:1,lower:n,upper:n}}var lu=(function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(r,a,s,l){s=s!==!1,l=l===!0;try{return this._cmp(r,a)>0||this._cmp(r,a)===0&&(s||l)&&!(s&&l)?Kr(this):new this.Collection(this,function(){return Un(r,a,!s,!l)})}catch{return Ut(this,An)}},n.prototype.equals=function(r){return r==null?Ut(this,An):new this.Collection(this,function(){return uu(r)})},n.prototype.above=function(r){return r==null?Ut(this,An):new this.Collection(this,function(){return Un(r,void 0,!0)})},n.prototype.aboveOrEqual=function(r){return r==null?Ut(this,An):new this.Collection(this,function(){return Un(r,void 0,!1)})},n.prototype.below=function(r){return r==null?Ut(this,An):new this.Collection(this,function(){return Un(void 0,r,!1,!0)})},n.prototype.belowOrEqual=function(r){return r==null?Ut(this,An):new this.Collection(this,function(){return Un(void 0,r)})},n.prototype.startsWith=function(r){return typeof r!="string"?Ut(this,Js):this.between(r,r+vr,!0,!0)},n.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):ea(this,function(a,s){return a.indexOf(s[0])===0},[r],vr)},n.prototype.equalsIgnoreCase=function(r){return ea(this,function(a,s){return a===s[0]},[r],"")},n.prototype.anyOfIgnoreCase=function(){var r=dt.apply(ft,arguments);return r.length===0?Kr(this):ea(this,function(a,s){return s.indexOf(a)!==-1},r,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var r=dt.apply(ft,arguments);return r.length===0?Kr(this):ea(this,function(a,s){return s.some(function(l){return a.indexOf(l)===0})},r,vr)},n.prototype.anyOf=function(){var r=this,a=dt.apply(ft,arguments),s=this._cmp;try{a.sort(s)}catch{return Ut(this,An)}if(a.length===0)return Kr(this);var l=new this.Collection(this,function(){return Un(a[0],a[a.length-1])});l._ondirectionchange=function(v){s=v==="next"?r._ascending:r._descending,a.sort(s)};var f=0;return l._addAlgorithm(function(v,y,g){for(var x=v.key;s(x,a[f])>0;)if(++f,f===a.length)return y(g),!1;return s(x,a[f])===0?!0:(y(function(){v.continue(a[f])}),!1)}),l},n.prototype.notEqual=function(r){return this.inAnyRange([[yo,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var r=dt.apply(ft,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Ut(this,An)}var a=r.reduce(function(s,l){return s?s.concat([[s[s.length-1][1],l]]):[[yo,l]]},null);return a.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(r,a){var s=this,l=this._cmp,f=this._ascending,v=this._descending,y=this._min,g=this._max;if(r.length===0)return Kr(this);if(!r.every(function(B){return B[0]!==void 0&&B[1]!==void 0&&f(B[0],B[1])<=0}))return Ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var x=!a||a.includeLowers!==!1,S=a&&a.includeUppers===!0;function k(B,Z){for(var $=0,Q=B.length;$<Q;++$){var ve=B[$];if(l(Z[0],ve[1])<0&&l(Z[1],ve[0])>0){ve[0]=y(ve[0],Z[0]),ve[1]=g(ve[1],Z[1]);break}}return $===Q&&B.push(Z),B}var R=f;function Y(B,Z){return R(B[0],Z[0])}var I;try{I=r.reduce(k,[]),I.sort(Y)}catch{return Ut(this,An)}var C=0,P=S?function(B){return f(B,I[C][1])>0}:function(B){return f(B,I[C][1])>=0},K=x?function(B){return v(B,I[C][0])>0}:function(B){return v(B,I[C][0])>=0};function j(B){return!P(B)&&!K(B)}var z=P,V=new this.Collection(this,function(){return Un(I[0][0],I[I.length-1][1],!x,!S)});return V._ondirectionchange=function(B){B==="next"?(z=P,R=f):(z=K,R=v),I.sort(Y)},V._addAlgorithm(function(B,Z,$){for(var Q=B.key;z(Q);)if(++C,C===I.length)return Z($),!1;return j(Q)?!0:(s._cmp(Q,I[C][1])===0||s._cmp(Q,I[C][0])===0||Z(function(){R===f?B.continue(I[C][0]):B.continue(I[C][1])}),!1)}),V},n.prototype.startsWithAnyOf=function(){var r=dt.apply(ft,arguments);return r.every(function(a){return typeof a=="string"})?r.length===0?Kr(this):this.inAnyRange(r.map(function(a){return[a,a+vr]})):Ut(this,"startsWithAnyOf() only works with strings")},n})();function Hc(n){return ui(lu.prototype,function(a,s,l){if(this.db=n,this._ctx={table:a,index:s===":id"?null:s,or:l},this._cmp=this._ascending=De,this._descending=function(f,v){return De(v,f)},this._max=function(f,v){return De(f,v)>0?f:v},this._min=function(f,v){return De(f,v)<0?f:v},this._IDBKeyRange=n._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})}function fn(n){return Ge(function(r){return li(r),n(r.target.error),!1})}function li(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var ci="storagemutated",Eo="x-storagemutated-1",Vn=si(null,ci),Uc=(function(){function n(){}return n.prototype._lock=function(){return X(!le.global),++this._reculock,this._reculock===1&&!le.global&&(le.lockOwnerFor=this),this},n.prototype._unlock=function(){if(X(!le.global),--this._reculock===0)for(le.global||(le.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{dr(r[1],r[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&le.lockOwnerFor!==this},n.prototype.create=function(r){var a=this;if(!this.mode)return this;var s=this.db.idbdb,l=this.db._state.dbOpenError;if(X(!this.idbtrans),!r&&!s)switch(l&&l.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(l);case"MissingAPIError":throw new ue.MissingAPI(l.message,l);default:throw new ue.OpenFailed(l)}if(!this.active)throw new ue.TransactionInactive;return X(this._completion._state===null),r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):s.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),r.onerror=Ge(function(f){li(f),a._reject(r.error)}),r.onabort=Ge(function(f){li(f),a.active&&a._reject(new ue.Abort(r.error)),a.active=!1,a.on("abort").fire(f)}),r.oncomplete=Ge(function(){a.active=!1,a._resolve(),"mutatedParts"in r&&Vn.storagemutated.fire(r.mutatedParts)}),this},n.prototype._promise=function(r,a,s){var l=this;if(r==="readwrite"&&this.mode!=="readwrite")return $e(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return $e(new ue.TransactionInactive);if(this._locked())return new J(function(v,y){l._blockedFuncs.push([function(){l._promise(r,a,s).then(v,y)},le])});if(s)return jn(function(){var v=new J(function(y,g){l._lock();var x=a(y,g,l);x&&x.then&&x.then(y,g)});return v.finally(function(){return l._unlock()}),v._lib=!0,v});var f=new J(function(v,y){var g=a(v,y,l);g&&g.then&&g.then(v,y)});return f._lib=!0,f},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(r){var a=this._root(),s=J.resolve(r);if(a._waitingFor)a._waitingFor=a._waitingFor.then(function(){return s});else{a._waitingFor=s,a._waitingQueue=[];var l=a.idbtrans.objectStore(a.storeNames[0]);(function v(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(l.get(-1/0).onsuccess=v)})()}var f=a._waitingFor;return new J(function(v,y){s.then(function(g){return a._waitingQueue.push(Ge(v.bind(null,g)))},function(g){return a._waitingQueue.push(Ge(y.bind(null,g)))}).finally(function(){a._waitingFor===f&&(a._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},n.prototype.table=function(r){var a=this._memoizedTables||(this._memoizedTables={});if(_(a,r))return a[r];var s=this.schema[r];if(!s)throw new ue.NotFound("Table "+r+" not part of transaction");var l=new this.db.Table(r,s,this);return l.core=this.db.core.table(r),a[r]=l,l},n})();function Vc(n){return ui(Uc.prototype,function(a,s,l,f,v){var y=this;a!=="readonly"&&s.forEach(function(g){var x,S=(x=l[g])===null||x===void 0?void 0:x.yProps;S&&(s=s.concat(S.map(function(k){return k.updatesTable})))}),this.db=n,this.mode=a,this.storeNames=s,this.schema=l,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=si(this,"complete","error","abort"),this.parent=v||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new J(function(g,x){y._resolve=g,y._reject=x}),this._completion.then(function(){y.active=!1,y.on.complete.fire()},function(g){var x=y.active;return y.active=!1,y.on.error.fire(g),y.parent?y.parent._reject(g):x&&y.idbtrans&&y.idbtrans.abort(),$e(g)})})}function xo(n,r,a,s,l,f,v,y){return{name:n,keyPath:r,unique:a,multi:s,auto:l,compound:f,src:(a&&!v?"&":"")+(s?"*":"")+(l?"++":"")+cu(r),type:y}}function cu(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function To(n,r,a){return{name:n,primKey:r,indexes:a,mappedClass:null,idxByName:re(a,function(s){return[s.name,s]})}}function Wc(n){return n.length===1?n[0]:n}var fi=function(n){try{return n.only([[]]),fi=function(){return[[]]},[[]]}catch{return fi=function(){return vr},vr}};function ko(n){return n==null?function(){}:typeof n=="string"?Gc(n):function(r){return se(r,n)}}function Gc(n){var r=n.split(".");return r.length===1?function(a){return a[n]}:function(a){return se(a,n)}}function fu(n){return[].slice.call(n)}var Yc=0;function di(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function qc(n,r,a){function s(k,R){var Y=fu(k.objectStoreNames);return{schema:{name:k.name,tables:Y.map(function(I){return R.objectStore(I)}).map(function(I){var C=I.keyPath,P=I.autoIncrement,K=h(C),j=C==null,z={},V={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j,compound:K,keyPath:C,autoIncrement:P,unique:!0,extractKey:ko(C)},indexes:fu(I.indexNames).map(function(B){return I.index(B)}).map(function(B){var Z=B.name,$=B.unique,Q=B.multiEntry,ve=B.keyPath,Ee=h(ve),ee={name:Z,compound:Ee,keyPath:ve,unique:$,multiEntry:Q,extractKey:ko(ve)};return z[di(ve)]=ee,ee}),getIndexByKeyPath:function(B){return z[di(B)]}};return z[":id"]=V.primaryKey,C!=null&&(z[di(C)]=V.primaryKey),V})},hasGetAll:Y.length>0&&"getAll"in R.objectStore(Y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function l(k){if(k.type===3)return null;if(k.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var R=k.lower,Y=k.upper,I=k.lowerOpen,C=k.upperOpen,P=R===void 0?Y===void 0?null:r.upperBound(Y,!!C):Y===void 0?r.lowerBound(R,!!I):r.bound(R,Y,!!I,!!C);return P}function f(k){var R=k.name;function Y(P){var K=P.trans,j=P.type,z=P.keys,V=P.values,B=P.range;return new Promise(function(Z,$){Z=Ge(Z);var Q=K.objectStore(R),ve=Q.keyPath==null,Ee=j==="put"||j==="add";if(!Ee&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var ee=(z||V||{length:1}).length;if(z&&V&&z.length!==V.length)throw new Error("Given keys array must have same length as given values array.");if(ee===0)return Z({numFailures:0,failures:{},results:[],lastResult:void 0});var be,pe=[],Oe=[],ce=0,Je=function(vn){++ce,li(vn)};if(j==="deleteRange"){if(B.type===4)return Z({numFailures:ce,failures:Oe,results:[],lastResult:void 0});B.type===3?pe.push(be=Q.clear()):pe.push(be=Q.delete(l(B)))}else{var Et=Ee?ve?[V,z]:[V,null]:[z,null],dn=Et[0],Mt=Et[1];if(Ee)for(var qt=0;qt<ee;++qt)pe.push(be=Mt&&Mt[qt]!==void 0?Q[j](dn[qt],Mt[qt]):Q[j](dn[qt])),be.onerror=Je;else for(var qt=0;qt<ee;++qt)pe.push(be=Q[j](dn[qt])),be.onerror=Je}var Yn=function(vn){var pi=vn.target.result;pe.forEach(function(an,da){return an.error!=null&&(Oe[da]=an.error)}),Z({numFailures:ce,failures:Oe,results:j==="delete"?z:pe.map(function(an){return an.result}),lastResult:pi})};be.onerror=function(vn){Je(vn),Yn(vn)},be.onsuccess=Yn})}function I(P){var K=P.trans,j=P.values,z=P.query,V=P.reverse,B=P.unique;return new Promise(function(Z,$){Z=Ge(Z);var Q=z.index,ve=z.range,Ee=K.objectStore(R),ee=Q.isPrimaryKey?Ee:Ee.index(Q.name),be=V?B?"prevunique":"prev":B?"nextunique":"next",pe=j||!("openKeyCursor"in ee)?ee.openCursor(l(ve),be):ee.openKeyCursor(l(ve),be);pe.onerror=fn($),pe.onsuccess=Ge(function(Oe){var ce=pe.result;if(!ce){Z(null);return}ce.___id=++Yc,ce.done=!1;var Je=ce.continue.bind(ce),Et=ce.continuePrimaryKey;Et&&(Et=Et.bind(ce));var dn=ce.advance.bind(ce),Mt=function(){throw new Error("Cursor not started")},qt=function(){throw new Error("Cursor not stopped")};ce.trans=K,ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=Mt,ce.fail=Ge($),ce.next=function(){var Yn=this,vn=1;return this.start(function(){return vn--?Yn.continue():Yn.stop()}).then(function(){return Yn})},ce.start=function(Yn){var vn=new Promise(function(an,da){an=Ge(an),pe.onerror=fn(da),ce.fail=da,ce.stop=function(Nf){ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=qt,an(Nf)}}),pi=function(){if(pe.result)try{Yn()}catch(an){ce.fail(an)}else ce.done=!0,ce.start=function(){throw new Error("Cursor behind last entry")},ce.stop()};return pe.onsuccess=Ge(function(an){pe.onsuccess=pi,pi()}),ce.continue=Je,ce.continuePrimaryKey=Et,ce.advance=dn,pi(),vn},Z(ce)},$)})}function C(P){return function(K){return new Promise(function(j,z){j=Ge(j);var V=K.trans,B=K.values,Z=K.limit,$=K.query,Q=Z===1/0?void 0:Z,ve=$.index,Ee=$.range,ee=V.objectStore(R),be=ve.isPrimaryKey?ee:ee.index(ve.name),pe=l(Ee);if(Z===0)return j({result:[]});if(P){var Oe=B?be.getAll(pe,Q):be.getAllKeys(pe,Q);Oe.onsuccess=function(dn){return j({result:dn.target.result})},Oe.onerror=fn(z)}else{var ce=0,Je=B||!("openKeyCursor"in be)?be.openCursor(pe):be.openKeyCursor(pe),Et=[];Je.onsuccess=function(dn){var Mt=Je.result;if(!Mt)return j({result:Et});if(Et.push(B?Mt.value:Mt.primaryKey),++ce===Z)return j({result:Et});Mt.continue()},Je.onerror=fn(z)}})}}return{name:R,schema:k,mutate:Y,getMany:function(P){var K=P.trans,j=P.keys;return new Promise(function(z,V){z=Ge(z);for(var B=K.objectStore(R),Z=j.length,$=new Array(Z),Q=0,ve=0,Ee,ee=function(ce){var Je=ce.target;($[Je._pos]=Je.result)!=null,++ve===Q&&z($)},be=fn(V),pe=0;pe<Z;++pe){var Oe=j[pe];Oe!=null&&(Ee=B.get(j[pe]),Ee._pos=pe,Ee.onsuccess=ee,Ee.onerror=be,++Q)}Q===0&&z($)})},get:function(P){var K=P.trans,j=P.key;return new Promise(function(z,V){z=Ge(z);var B=K.objectStore(R),Z=B.get(j);Z.onsuccess=function($){return z($.target.result)},Z.onerror=fn(V)})},query:C(g),openCursor:I,count:function(P){var K=P.query,j=P.trans,z=K.index,V=K.range;return new Promise(function(B,Z){var $=j.objectStore(R),Q=z.isPrimaryKey?$:$.index(z.name),ve=l(V),Ee=ve?Q.count(ve):Q.count();Ee.onsuccess=Ge(function(ee){return B(ee.target.result)}),Ee.onerror=fn(Z)})}}}var v=s(n,a),y=v.schema,g=v.hasGetAll,x=y.tables.map(function(k){return f(k)}),S={};return x.forEach(function(k){return S[k.name]=k}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(k){var R=S[k];if(!R)throw new Error("Table '".concat(k,"' not found"));return S[k]},MIN_KEY:-1/0,MAX_KEY:fi(r),schema:y}}function Zc(n,r){return r.reduce(function(a,s){var l=s.create;return u(u({},a),l(a))},n)}function Qc(n,r,a,s){var l=a.IDBKeyRange;a.indexedDB;var f=Zc(qc(r,l,s),n.dbcore);return{dbcore:f}}function ta(n,r){var a=r.db,s=Qc(n._middlewares,a,n._deps,r);n.core=s.dbcore,n.tables.forEach(function(l){var f=l.name;n.core.schema.tables.some(function(v){return v.name===f})&&(l.core=n.core.table(f),n[f]instanceof n.Table&&(n[f].core=l.core))})}function na(n,r,a,s){a.forEach(function(l){var f=s[l];r.forEach(function(v){var y=H(v,l);(!y||"value"in y&&y.value===void 0)&&(v===n.Transaction.prototype||v instanceof n.Transaction?L(v,l,{get:function(){return this.table(l)},set:function(g){O(this,l,{value:g,writable:!0,configurable:!0,enumerable:!0})}}):v[l]=new n.Table(l,f))})})}function Ao(n,r){r.forEach(function(a){for(var s in a)a[s]instanceof n.Table&&delete a[s]})}function Xc(n,r){return n._cfg.version-r._cfg.version}function Jc(n,r,a,s){var l=n._dbSchema;a.objectStoreNames.contains("$meta")&&!l.$meta&&(l.$meta=To("$meta",vu("")[0],[]),n._storeNames.push("$meta"));var f=n._createTransaction("readwrite",n._storeNames,l);f.create(a),f._completion.catch(s);var v=f._reject.bind(f),y=le.transless||le;jn(function(){if(le.trans=f,le.transless=y,r===0)p(l).forEach(function(g){Do(a,g,l[g].primKey,l[g].indexes)}),ta(n,a),J.follow(function(){return n.on.populate.fire(f)}).catch(v);else return ta(n,a),ef(n,f,r).then(function(g){return tf(n,g,f,a)}).catch(v)})}function $c(n,r){du(n._dbSchema,r),r.db.version%10===0&&!r.objectStoreNames.contains("$meta")&&r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var a=ia(n,n.idbdb,r);aa(n,n._dbSchema,r);for(var s=Io(a,n._dbSchema),l=function(x){if(x.change.length||x.recreate)return console.warn("Unable to patch indexes of table ".concat(x.name," because it has changes on the type of index or primary key.")),{value:void 0};var S=r.objectStore(x.name);x.add.forEach(function(k){he&&console.debug("Dexie upgrade patch: Creating missing index ".concat(x.name,".").concat(k.src)),ra(S,k)})},f=0,v=s.change;f<v.length;f++){var y=v[f],g=l(y);if(typeof g=="object")return g.value}}function ef(n,r,a){return r.storeNames.includes("$meta")?r.table("$meta").get("version").then(function(s){return s??a}):J.resolve(a)}function tf(n,r,a,s){var l=[],f=n._versions,v=n._dbSchema=ia(n,n.idbdb,s),y=f.filter(function(x){return x._cfg.version>=r});if(y.length===0)return J.resolve();y.forEach(function(x){l.push(function(){var S=v,k=x._cfg.dbschema;aa(n,S,s),aa(n,k,s),v=n._dbSchema=k;var R=Io(S,k);R.add.forEach(function(j){Do(s,j[0],j[1].primKey,j[1].indexes)}),R.change.forEach(function(j){if(j.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var z=s.objectStore(j.name);j.add.forEach(function(V){return ra(z,V)}),j.change.forEach(function(V){z.deleteIndex(V.name),ra(z,V)}),j.del.forEach(function(V){return z.deleteIndex(V)})});var Y=x._cfg.contentUpgrade;if(Y&&x._cfg.version>r){ta(n,s),a._memoizedTables={};var I=ge(k);R.del.forEach(function(j){I[j]=S[j]}),Ao(n,[n.Transaction.prototype]),na(n,[n.Transaction.prototype],p(I),I),a.schema=I;var C=tn(Y);C&&Rr();var P,K=J.follow(function(){if(P=Y(a),P&&C){var j=zn.bind(null,null);P.then(j,j)}});return P&&typeof P.then=="function"?J.resolve(P):K.then(function(){return P})}}),l.push(function(S){var k=x._cfg.dbschema;nf(k,S),Ao(n,[n.Transaction.prototype]),na(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),a.schema=n._dbSchema}),l.push(function(S){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===x._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(k){return k!=="$meta"})):S.objectStore("$meta").put(x._cfg.version,"version"))})});function g(){return l.length?J.resolve(l.shift()(a.idbtrans)).then(g):J.resolve()}return g().then(function(){du(v,s)})}function Io(n,r){var a={del:[],add:[],change:[]},s;for(s in n)r[s]||a.del.push(s);for(s in r){var l=n[s],f=r[s];if(!l)a.add.push([s,f]);else{var v={name:s,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(l.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||l.primKey.auto!==f.primKey.auto)v.recreate=!0,a.change.push(v);else{var y=l.idxByName,g=f.idxByName,x=void 0;for(x in y)g[x]||v.del.push(x);for(x in g){var S=y[x],k=g[x];S?S.src!==k.src&&v.change.push(k):v.add.push(k)}(v.del.length>0||v.add.length>0||v.change.length>0)&&a.change.push(v)}}}return a}function Do(n,r,a,s){var l=n.db.createObjectStore(r,a.keyPath?{keyPath:a.keyPath,autoIncrement:a.auto}:{autoIncrement:a.auto});return s.forEach(function(f){return ra(l,f)}),l}function du(n,r){p(n).forEach(function(a){r.db.objectStoreNames.contains(a)||(he&&console.debug("Dexie: Creating missing table",a),Do(r,a,n[a].primKey,n[a].indexes))})}function nf(n,r){[].slice.call(r.db.objectStoreNames).forEach(function(a){return n[a]==null&&r.db.deleteObjectStore(a)})}function ra(n,r){n.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function ia(n,r,a){var s={},l=N(r.objectStoreNames,0);return l.forEach(function(f){for(var v=a.objectStore(f),y=v.keyPath,g=xo(cu(y),y||"",!0,!1,!!v.autoIncrement,y&&typeof y!="string",!0),x=[],S=0;S<v.indexNames.length;++S){var k=v.index(v.indexNames[S]);y=k.keyPath;var R=xo(k.name,y,!!k.unique,!!k.multiEntry,!1,y&&typeof y!="string",!1);x.push(R)}s[f]=To(f,g,x)}),s}function rf(n,r,a){n.verno=r.version/10;var s=n._dbSchema=ia(n,r,a);n._storeNames=N(r.objectStoreNames,0),na(n,[n._allTables],p(s),s)}function af(n,r){var a=ia(n,n.idbdb,r),s=Io(a,n._dbSchema);return!(s.add.length||s.change.some(function(l){return l.add.length||l.change.length}))}function aa(n,r,a){for(var s=a.db.objectStoreNames,l=0;l<s.length;++l){var f=s[l],v=a.objectStore(f);n._hasGetAll="getAll"in v;for(var y=0;y<v.indexNames.length;++y){var g=v.indexNames[y],x=v.index(g).keyPath,S=typeof x=="string"?x:"["+N(x).join("+")+"]";if(r[f]){var k=r[f].idxByName[S];k&&(k.name=g,delete r[f].idxByName[S],r[f].idxByName[g]=k)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function vu(n){return n.split(",").map(function(r,a){var s,l=r.split(":"),f=(s=l[1])===null||s===void 0?void 0:s.trim();r=l[0].trim();var v=r.replace(/([&*]|\+\+)/g,""),y=/^\[/.test(v)?v.match(/^\[(.*)\]$/)[1].split("+"):v;return xo(v,y||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),h(y),a===0,f)})}var of=(function(){function n(){}return n.prototype._createTableSchema=function(r,a,s){return To(r,a,s)},n.prototype._parseIndexSyntax=function(r){return vu(r)},n.prototype._parseStoresSpec=function(r,a){var s=this;p(r).forEach(function(l){if(r[l]!==null){var f=s._parseIndexSyntax(r[l]),v=f.shift();if(!v)throw new ue.Schema("Invalid schema for table "+l+": "+r[l]);if(v.unique=!0,v.multi)throw new ue.Schema("Primary key cannot be multiEntry*");f.forEach(function(g){if(g.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")});var y=s._createTableSchema(l,v,f);a[l]=y}})},n.prototype.stores=function(r){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,r):r;var s=a._versions,l={},f={};return s.forEach(function(v){b(l,v._cfg.storesSource),f=v._cfg.dbschema={},v._parseStoresSpec(l,f)}),a._dbSchema=f,Ao(a,[a._allTables,a,a.Transaction.prototype]),na(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],p(f),f),a._storeNames=p(f),this},n.prototype.upgrade=function(r){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Se,r),this},n})();function sf(n){return ui(of.prototype,function(a){this.db=n,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function So(n,r){var a=n._dbNamesDB;return a||(a=n._dbNamesDB=new In(Zi,{addons:[],indexedDB:n,IDBKeyRange:r}),a.version(1).stores({dbnames:"name"})),a.table("dbnames")}function Oo(n){return n&&typeof n.databases=="function"}function uf(n){var r=n.indexedDB,a=n.IDBKeyRange;return Oo(r)?Promise.resolve(r.databases()).then(function(s){return s.map(function(l){return l.name}).filter(function(l){return l!==Zi})}):So(r,a).toCollection().primaryKeys()}function lf(n,r){var a=n.indexedDB,s=n.IDBKeyRange;!Oo(a)&&r!==Zi&&So(a,s).put({name:r}).catch(Se)}function cf(n,r){var a=n.indexedDB,s=n.IDBKeyRange;!Oo(a)&&r!==Zi&&So(a,s).delete(r).catch(Se)}function Co(n){return jn(function(){return le.letThrough=!0,n()})}function ff(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(a){var s=function(){return indexedDB.databases().finally(a)};r=setInterval(s,100),s()}).finally(function(){return clearInterval(r)})}var Lo;function Po(n){return!("from"in n)}var wt=function(n,r){if(this)b(this,arguments.length?{d:1,from:n,to:arguments.length>1?r:n}:{d:0});else{var a=new wt;return n&&"d"in n&&b(a,n),a}};E(wt.prototype,(Lo={add:function(n){return hi(this,n),this},addKey:function(n){return vi(this,n,n),this},addKeys:function(n){var r=this;return n.forEach(function(a){return vi(r,a,a)}),this},hasKey:function(n){var r=oa(this).next(n).value;return r&&De(r.from,n)<=0&&De(r.to,n)>=0}},Lo[Ue]=function(){return oa(this)},Lo));function vi(n,r,a){var s=De(r,a);if(!isNaN(s)){if(s>0)throw RangeError();if(Po(n))return b(n,{from:r,to:a,d:1});var l=n.l,f=n.r;if(De(a,n.from)<0)return l?vi(l,r,a):n.l={from:r,to:a,d:1,l:null,r:null},pu(n);if(De(r,n.to)>0)return f?vi(f,r,a):n.r={from:r,to:a,d:1,l:null,r:null},pu(n);De(r,n.from)<0&&(n.from=r,n.l=null,n.d=f?f.d+1:1),De(a,n.to)>0&&(n.to=a,n.r=null,n.d=n.l?n.l.d+1:1);var v=!n.r;l&&!n.l&&hi(n,l),f&&v&&hi(n,f)}}function hi(n,r){function a(s,l){var f=l.from,v=l.to,y=l.l,g=l.r;vi(s,f,v),y&&a(s,y),g&&a(s,g)}Po(r)||a(n,r)}function hu(n,r){var a=oa(r),s=a.next();if(s.done)return!1;for(var l=s.value,f=oa(n),v=f.next(l.from),y=v.value;!s.done&&!v.done;){if(De(y.from,l.to)<=0&&De(y.to,l.from)>=0)return!0;De(l.from,y.from)<0?l=(s=a.next(y.from)).value:y=(v=f.next(l.from)).value}return!1}function oa(n){var r=Po(n)?null:{s:0,n};return{next:function(a){for(var s=arguments.length>0;r;)switch(r.s){case 0:if(r.s=1,s)for(;r.n.l&&De(a,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!s||De(a,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function pu(n){var r,a,s=(((r=n.r)===null||r===void 0?void 0:r.d)||0)-(((a=n.l)===null||a===void 0?void 0:a.d)||0),l=s>1?"r":s<-1?"l":"";if(l){var f=l==="r"?"l":"r",v=u({},n),y=n[l];n.from=y.from,n.to=y.to,n[l]=y[l],v[l]=y[f],n[f]=v,v.d=mu(v)}n.d=mu(n)}function mu(n){var r=n.r,a=n.l;return(r?a?Math.max(r.d,a.d):r.d:a?a.d:0)+1}function sa(n,r){return p(r).forEach(function(a){n[a]?hi(n[a],r[a]):n[a]=Ae(r[a])}),n}function Ro(n,r){return n.all||r.all||Object.keys(n).some(function(a){return r[a]&&hu(r[a],n[a])})}var pr={},Mo={},No=!1;function ua(n,r){sa(Mo,n),No||(No=!0,setTimeout(function(){No=!1;var a=Mo;Mo={},Ko(a,!1)},0))}function Ko(n,r){r===void 0&&(r=!1);var a=new Set;if(n.all)for(var s=0,l=Object.values(pr);s<l.length;s++){var f=l[s];yu(f,n,a,r)}else for(var v in n){var y=/^idb\:\/\/(.*)\/(.*)\//.exec(v);if(y){var g=y[1],x=y[2],f=pr["idb://".concat(g,"/").concat(x)];f&&yu(f,n,a,r)}}a.forEach(function(S){return S()})}function yu(n,r,a,s){for(var l=[],f=0,v=Object.entries(n.queries.query);f<v.length;f++){for(var y=v[f],g=y[0],x=y[1],S=[],k=0,R=x;k<R.length;k++){var Y=R[k];Ro(r,Y.obsSet)?Y.subscribers.forEach(function(K){return a.add(K)}):s&&S.push(Y)}s&&l.push([g,S])}if(s)for(var I=0,C=l;I<C.length;I++){var P=C[I],g=P[0],S=P[1];n.queries.query[g]=S}}function df(n){var r=n._state,a=n._deps.indexedDB;if(r.isBeingOpened||n.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?$e(r.dbOpenError):n});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var s=r.openCanceller,l=Math.round(n.verno*10),f=!1;function v(){if(r.openCanceller!==s)throw new ue.DatabaseClosed("db.open() was cancelled")}var y=r.dbReadyResolve,g=null,x=!1,S=function(){return new J(function(k,R){if(v(),!a)throw new ue.MissingAPI;var Y=n.name,I=r.autoSchema||!l?a.open(Y):a.open(Y,l);if(!I)throw new ue.MissingAPI;I.onerror=fn(R),I.onblocked=Ge(n._fireOnBlocked),I.onupgradeneeded=Ge(function(C){if(g=I.transaction,r.autoSchema&&!n._options.allowEmptyDB){I.onerror=li,g.abort(),I.result.close();var P=a.deleteDatabase(Y);P.onsuccess=P.onerror=Ge(function(){R(new ue.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})}else{g.onerror=fn(R);var K=C.oldVersion>Math.pow(2,62)?0:C.oldVersion;x=K<1,n.idbdb=I.result,f&&$c(n,g),Jc(n,K/10,g,R)}},R),I.onsuccess=Ge(function(){g=null;var C=n.idbdb=I.result,P=N(C.objectStoreNames);if(P.length>0)try{var K=C.transaction(Wc(P),"readonly");if(r.autoSchema)rf(n,C,K);else if(aa(n,n._dbSchema,K),!af(n,K)&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),C.close(),l=C.version+1,f=!0,k(S());ta(n,K)}catch{}Mr.push(n),C.onversionchange=Ge(function(j){r.vcFired=!0,n.on("versionchange").fire(j)}),C.onclose=Ge(function(){n.close({disableAutoOpen:!1})}),x&&lf(n._deps,Y),k()},R)}).catch(function(k){switch(k?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),S();break;case"VersionError":if(l>0)return l=0,S();break}return J.reject(k)})};return J.race([s,(typeof navigator>"u"?J.resolve():ff()).then(S)]).then(function(){return v(),r.onReadyBeingFired=[],J.resolve(Co(function(){return n.on.ready.fire(n.vip)})).then(function k(){if(r.onReadyBeingFired.length>0){var R=r.onReadyBeingFired.reduce(xe,Se);return r.onReadyBeingFired=[],J.resolve(Co(function(){return R(n.vip)})).then(k)}})}).finally(function(){r.openCanceller===s&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(k){r.dbOpenError=k;try{g&&g.abort()}catch{}return s===r.openCanceller&&n._close(),$e(k)}).finally(function(){r.openComplete=!0,y()}).then(function(){if(x){var k={};n.tables.forEach(function(R){R.schema.indexes.forEach(function(Y){Y.name&&(k["idb://".concat(n.name,"/").concat(R.name,"/").concat(Y.name)]=new wt(-1/0,[[[]]]))}),k["idb://".concat(n.name,"/").concat(R.name,"/")]=k["idb://".concat(n.name,"/").concat(R.name,"/:dels")]=new wt(-1/0,[[[]]])}),Vn(ci).fire(k),Ko(k,!0)}return n})}function Fo(n){var r=function(v){return n.next(v)},a=function(v){return n.throw(v)},s=f(r),l=f(a);function f(v){return function(y){var g=v(y),x=g.value;return g.done?x:!x||typeof x.then!="function"?h(x)?Promise.all(x).then(s,l):s(x):x.then(s,l)}}return f(r)()}function vf(n,r,a){var s=arguments.length;if(s<2)throw new ue.InvalidArgument("Too few arguments");for(var l=new Array(s-1);--s;)l[s-1]=arguments[s];a=l.pop();var f=Ke(l);return[n,f,a]}function gu(n,r,a,s,l){return J.resolve().then(function(){var f=le.transless||le,v=n._createTransaction(r,a,n._dbSchema,s);v.explicit=!0;var y={trans:v,transless:f};if(s)v.idbtrans=s.idbtrans;else try{v.create(),v.idbtrans._explicit=!0,n._state.PR1398_maxLoop=3}catch(k){return k.name===cn.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return gu(n,r,a,null,l)})):$e(k)}var g=tn(l);g&&Rr();var x,S=J.follow(function(){if(x=l.call(v,v),x)if(g){var k=zn.bind(null,null);x.then(k,k)}else typeof x.next=="function"&&typeof x.throw=="function"&&(x=Fo(x))},y);return(x&&typeof x.then=="function"?J.resolve(x).then(function(k){return v.active?k:$e(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return x})).then(function(k){return s&&v._resolve(),v._completion.then(function(){return k})}).catch(function(k){return v._reject(k),$e(k)})})}function la(n,r,a){for(var s=h(n)?n.slice():[n],l=0;l<a;++l)s.push(r);return s}function hf(n){return u(u({},n),{table:function(r){var a=n.table(r),s=a.schema,l={},f=[];function v(C,P,K){var j=di(C),z=l[j]=l[j]||[],V=C==null?0:typeof C=="string"?1:C.length,B=P>0,Z=u(u({},K),{name:B?"".concat(j,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:B,keyTail:P,keyLength:V,extractKey:ko(C),unique:!B&&K.unique});if(z.push(Z),Z.isPrimaryKey||f.push(Z),V>1){var $=V===2?C[0]:C.slice(0,V-1);v($,P+1,K)}return z.sort(function(Q,ve){return Q.keyTail-ve.keyTail}),Z}var y=v(s.primaryKey.keyPath,0,s.primaryKey);l[":id"]=[y];for(var g=0,x=s.indexes;g<x.length;g++){var S=x[g];v(S.keyPath,0,S)}function k(C){var P=l[di(C)];return P&&P[0]}function R(C,P){return{type:C.type===1?2:C.type,lower:la(C.lower,C.lowerOpen?n.MAX_KEY:n.MIN_KEY,P),lowerOpen:!0,upper:la(C.upper,C.upperOpen?n.MIN_KEY:n.MAX_KEY,P),upperOpen:!0}}function Y(C){var P=C.query.index;return P.isVirtual?u(u({},C),{query:{index:P.lowLevelIndex,range:R(C.query.range,P.keyTail)}}):C}var I=u(u({},a),{schema:u(u({},s),{primaryKey:y,indexes:f,getIndexByKeyPath:k}),count:function(C){return a.count(Y(C))},query:function(C){return a.query(Y(C))},openCursor:function(C){var P=C.query.index,K=P.keyTail,j=P.isVirtual,z=P.keyLength;if(!j)return a.openCursor(C);function V(B){function Z(Q){Q!=null?B.continue(la(Q,C.reverse?n.MAX_KEY:n.MIN_KEY,K)):C.unique?B.continue(B.key.slice(0,z).concat(C.reverse?n.MIN_KEY:n.MAX_KEY,K)):B.continue()}var $=Object.create(B,{continue:{value:Z},continuePrimaryKey:{value:function(Q,ve){B.continuePrimaryKey(la(Q,n.MAX_KEY,K),ve)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var Q=B.key;return z===1?Q[0]:Q.slice(0,z)}},value:{get:function(){return B.value}}});return $}return a.openCursor(Y(C)).then(function(B){return B&&V(B)})}});return I}})}var pf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:hf};function Bo(n,r,a,s){return a=a||{},s=s||"",p(n).forEach(function(l){if(!_(r,l))a[s+l]=void 0;else{var f=n[l],v=r[l];if(typeof f=="object"&&typeof v=="object"&&f&&v){var y=Re(f),g=Re(v);y!==g?a[s+l]=r[l]:y==="Object"?Bo(f,v,a,s+l+"."):f!==v&&(a[s+l]=r[l])}else f!==v&&(a[s+l]=r[l])}}),p(r).forEach(function(l){_(n,l)||(a[s+l]=r[l])}),a}function jo(n,r){return r.type==="delete"?r.keys:r.keys||r.values.map(n.extractKey)}var mf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return u(u({},n),{table:function(r){var a=n.table(r),s=a.schema.primaryKey,l=u(u({},a),{mutate:function(f){var v=le.trans,y=v.table(r).hook,g=y.deleting,x=y.creating,S=y.updating;switch(f.type){case"add":if(x.fire===Se)break;return v._promise("readwrite",function(){return k(f)},!0);case"put":if(x.fire===Se&&S.fire===Se)break;return v._promise("readwrite",function(){return k(f)},!0);case"delete":if(g.fire===Se)break;return v._promise("readwrite",function(){return k(f)},!0);case"deleteRange":if(g.fire===Se)break;return v._promise("readwrite",function(){return R(f)},!0)}return a.mutate(f);function k(I){var C=le.trans,P=I.keys||jo(s,I);if(!P)throw new Error("Keys missing");return I=I.type==="add"||I.type==="put"?u(u({},I),{keys:P}):u({},I),I.type!=="delete"&&(I.values=c([],I.values)),I.keys&&(I.keys=c([],I.keys)),yf(a,I,P).then(function(K){var j=P.map(function(z,V){var B=K[V],Z={onerror:null,onsuccess:null};if(I.type==="delete")g.fire.call(Z,z,B,C);else if(I.type==="add"||B===void 0){var $=x.fire.call(Z,z,I.values[V],C);z==null&&$!=null&&(z=$,I.keys[V]=z,s.outbound||de(I.values[V],s.keyPath,z))}else{var Q=Bo(B,I.values[V]),ve=S.fire.call(Z,Q,z,B,C);if(ve){var Ee=I.values[V];Object.keys(ve).forEach(function(ee){_(Ee,ee)?Ee[ee]=ve[ee]:de(Ee,ee,ve[ee])})}}return Z});return a.mutate(I).then(function(z){for(var V=z.failures,B=z.results,Z=z.numFailures,$=z.lastResult,Q=0;Q<P.length;++Q){var ve=B?B[Q]:P[Q],Ee=j[Q];ve==null?Ee.onerror&&Ee.onerror(V[Q]):Ee.onsuccess&&Ee.onsuccess(I.type==="put"&&K[Q]?I.values[Q]:ve)}return{failures:V,results:B,numFailures:Z,lastResult:$}}).catch(function(z){return j.forEach(function(V){return V.onerror&&V.onerror(z)}),Promise.reject(z)})})}function R(I){return Y(I.trans,I.range,1e4)}function Y(I,C,P){return a.query({trans:I,values:!1,query:{index:s,range:C},limit:P}).then(function(K){var j=K.result;return k({type:"delete",keys:j,trans:I}).then(function(z){return z.numFailures>0?Promise.reject(z.failures[0]):j.length<P?{failures:[],numFailures:0,lastResult:void 0}:Y(I,u(u({},C),{lower:j[j.length-1],lowerOpen:!0}),P)})})}}});return l}})}};function yf(n,r,a){return r.type==="add"?Promise.resolve([]):n.getMany({trans:r.trans,keys:a,cache:"immutable"})}function _u(n,r,a){try{if(!r||r.keys.length<n.length)return null;for(var s=[],l=0,f=0;l<r.keys.length&&f<n.length;++l)De(r.keys[l],n[f])===0&&(s.push(a?ze(r.values[l]):r.values[l]),++f);return s.length===n.length?s:null}catch{return null}}var gf={stack:"dbcore",level:-1,create:function(n){return{table:function(r){var a=n.table(r);return u(u({},a),{getMany:function(s){if(!s.cache)return a.getMany(s);var l=_u(s.keys,s.trans._cache,s.cache==="clone");return l?J.resolve(l):a.getMany(s).then(function(f){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?ze(f):f},f})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),a.mutate(s)}})}}}};function bu(n,r){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function wu(n,r){switch(n){case"query":return r.values&&!r.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var _f={stack:"dbcore",level:0,name:"Observability",create:function(n){var r=n.schema.name,a=new wt(n.MIN_KEY,n.MAX_KEY);return u(u({},n),{transaction:function(s,l,f){if(le.subscr&&l!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(le.querier));return n.transaction(s,l,f)},table:function(s){var l=n.table(s),f=l.schema,v=f.primaryKey,y=f.indexes,g=v.extractKey,x=v.outbound,S=v.autoIncrement&&y.filter(function(I){return I.compound&&I.keyPath.includes(v.keyPath)}),k=u(u({},l),{mutate:function(I){var C,P,K=I.trans,j=I.mutatedParts||(I.mutatedParts={}),z=function(pe){var Oe="idb://".concat(r,"/").concat(s,"/").concat(pe);return j[Oe]||(j[Oe]=new wt)},V=z(""),B=z(":dels"),Z=I.type,$=I.type==="deleteRange"?[I.range]:I.type==="delete"?[I.keys]:I.values.length<50?[jo(v,I).filter(function(pe){return pe}),I.values]:[],Q=$[0],ve=$[1],Ee=I.trans._cache;if(h(Q)){V.addKeys(Q);var ee=Z==="delete"||Q.length===ve.length?_u(Q,Ee):null;ee||B.addKeys(Q),(ee||ve)&&bf(z,f,ee,ve)}else if(Q){var be={from:(C=Q.lower)!==null&&C!==void 0?C:n.MIN_KEY,to:(P=Q.upper)!==null&&P!==void 0?P:n.MAX_KEY};B.add(be),V.add(be)}else V.add(a),B.add(a),f.indexes.forEach(function(pe){return z(pe.name).add(a)});return l.mutate(I).then(function(pe){return Q&&(I.type==="add"||I.type==="put")&&(V.addKeys(pe.results),S&&S.forEach(function(Oe){for(var ce=I.values.map(function(Mt){return Oe.extractKey(Mt)}),Je=Oe.keyPath.findIndex(function(Mt){return Mt===v.keyPath}),Et=0,dn=pe.results.length;Et<dn;++Et)ce[Et][Je]=pe.results[Et];z(Oe.name).addKeys(ce)})),K.mutatedParts=sa(K.mutatedParts||{},j),pe})}}),R=function(I){var C,P,K=I.query,j=K.index,z=K.range;return[j,new wt((C=z.lower)!==null&&C!==void 0?C:n.MIN_KEY,(P=z.upper)!==null&&P!==void 0?P:n.MAX_KEY)]},Y={get:function(I){return[v,new wt(I.key)]},getMany:function(I){return[v,new wt().addKeys(I.keys)]},count:R,query:R,openCursor:R};return p(Y).forEach(function(I){k[I]=function(C){var P=le.subscr,K=!!P,j=bu(le,l)&&wu(I,C),z=j?C.obsSet={}:P;if(K){var V=function(ee){var be="idb://".concat(r,"/").concat(s,"/").concat(ee);return z[be]||(z[be]=new wt)},B=V(""),Z=V(":dels"),$=Y[I](C),Q=$[0],ve=$[1];if(I==="query"&&Q.isPrimaryKey&&!C.values?Z.add(ve):V(Q.name||"").add(ve),!Q.isPrimaryKey)if(I==="count")Z.add(a);else{var Ee=I==="query"&&x&&C.values&&l.query(u(u({},C),{values:!1}));return l[I].apply(this,arguments).then(function(ee){if(I==="query"){if(x&&C.values)return Ee.then(function(ce){var Je=ce.result;return B.addKeys(Je),ee});var be=C.values?ee.result.map(g):ee.result;C.values?B.addKeys(be):Z.addKeys(be)}else if(I==="openCursor"){var pe=ee,Oe=C.values;return pe&&Object.create(pe,{key:{get:function(){return Z.addKey(pe.primaryKey),pe.key}},primaryKey:{get:function(){var ce=pe.primaryKey;return Z.addKey(ce),ce}},value:{get:function(){return Oe&&B.addKey(pe.primaryKey),pe.value}}})}return ee})}}return l[I].apply(this,arguments)}}),k}})}};function bf(n,r,a,s){function l(f){var v=n(f.name||"");function y(x){return x!=null?f.extractKey(x):null}var g=function(x){return f.multiEntry&&h(x)?x.forEach(function(S){return v.addKey(S)}):v.addKey(x)};(a||s).forEach(function(x,S){var k=a&&y(a[S]),R=s&&y(s[S]);De(k,R)!==0&&(k!=null&&g(k),R!=null&&g(R))})}r.indexes.forEach(l)}function Eu(n,r,a){if(a.numFailures===0)return r;if(r.type==="deleteRange")return null;var s=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;if(a.numFailures===s)return null;var l=u({},r);return h(l.keys)&&(l.keys=l.keys.filter(function(f,v){return!(v in a.failures)})),"values"in l&&h(l.values)&&(l.values=l.values.filter(function(f,v){return!(v in a.failures)})),l}function wf(n,r){return r.lower===void 0?!0:r.lowerOpen?De(n,r.lower)>0:De(n,r.lower)>=0}function Ef(n,r){return r.upper===void 0?!0:r.upperOpen?De(n,r.upper)<0:De(n,r.upper)<=0}function zo(n,r){return wf(n,r)&&Ef(n,r)}function xu(n,r,a,s,l,f){if(!a||a.length===0)return n;var v=r.query.index,y=v.multiEntry,g=r.query.range,x=s.schema.primaryKey,S=x.extractKey,k=v.extractKey,R=(v.lowLevelIndex||v).extractKey,Y=a.reduce(function(I,C){var P=I,K=[];if(C.type==="add"||C.type==="put")for(var j=new wt,z=C.values.length-1;z>=0;--z){var V=C.values[z],B=S(V);if(!j.hasKey(B)){var Z=k(V);(y&&h(Z)?Z.some(function(ee){return zo(ee,g)}):zo(Z,g))&&(j.addKey(B),K.push(V))}}switch(C.type){case"add":{var $=new wt().addKeys(r.values?I.map(function(ee){return S(ee)}):I);P=I.concat(r.values?K.filter(function(ee){var be=S(ee);return $.hasKey(be)?!1:($.addKey(be),!0)}):K.map(function(ee){return S(ee)}).filter(function(ee){return $.hasKey(ee)?!1:($.addKey(ee),!0)}));break}case"put":{var Q=new wt().addKeys(C.values.map(function(ee){return S(ee)}));P=I.filter(function(ee){return!Q.hasKey(r.values?S(ee):ee)}).concat(r.values?K:K.map(function(ee){return S(ee)}));break}case"delete":var ve=new wt().addKeys(C.keys);P=I.filter(function(ee){return!ve.hasKey(r.values?S(ee):ee)});break;case"deleteRange":var Ee=C.range;P=I.filter(function(ee){return!zo(S(ee),Ee)});break}return P},n);return Y===n?n:(Y.sort(function(I,C){return De(R(I),R(C))||De(S(I),S(C))}),r.limit&&r.limit<1/0&&(Y.length>r.limit?Y.length=r.limit:n.length===r.limit&&Y.length<r.limit&&(l.dirty=!0)),f?Object.freeze(Y):Y)}function Tu(n,r){return De(n.lower,r.lower)===0&&De(n.upper,r.upper)===0&&!!n.lowerOpen==!!r.lowerOpen&&!!n.upperOpen==!!r.upperOpen}function xf(n,r,a,s){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;var l=De(n,r);if(l===0){if(a&&s)return 0;if(a)return 1;if(s)return-1}return l}function Tf(n,r,a,s){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;var l=De(n,r);if(l===0){if(a&&s)return 0;if(a)return-1;if(s)return 1}return l}function kf(n,r){return xf(n.lower,r.lower,n.lowerOpen,r.lowerOpen)<=0&&Tf(n.upper,r.upper,n.upperOpen,r.upperOpen)>=0}function Af(n,r,a,s){var l=pr["idb://".concat(n,"/").concat(r)];if(!l)return[];var f=l.queries[a];if(!f)return[null,!1,l,null];var v=s.query?s.query.index.name:null,y=f[v||""];if(!y)return[null,!1,l,null];switch(a){case"query":var g=y.find(function(k){return k.req.limit===s.limit&&k.req.values===s.values&&Tu(k.req.query.range,s.query.range)});if(g)return[g,!0,l,y];var x=y.find(function(k){var R="limit"in k.req?k.req.limit:1/0;return R>=s.limit&&(s.values?k.req.values:!0)&&kf(k.req.query.range,s.query.range)});return[x,!1,l,y];case"count":var S=y.find(function(k){return Tu(k.req.query.range,s.query.range)});return[S,!!S,l,y]}}function If(n,r,a,s){n.subscribers.add(a),s.addEventListener("abort",function(){n.subscribers.delete(a),n.subscribers.size===0&&Df(n,r)})}function Df(n,r){setTimeout(function(){n.subscribers.size===0&&Be(r,n)},3e3)}var Sf={stack:"dbcore",level:0,name:"Cache",create:function(n){var r=n.schema.name,a=u(u({},n),{transaction:function(s,l,f){var v=n.transaction(s,l,f);if(l==="readwrite"){var y=new AbortController,g=y.signal,x=function(S){return function(){if(y.abort(),l==="readwrite"){for(var k=new Set,R=0,Y=s;R<Y.length;R++){var I=Y[R],C=pr["idb://".concat(r,"/").concat(I)];if(C){var P=n.table(I),K=C.optimisticOps.filter(function(Oe){return Oe.trans===v});if(v._explicit&&S&&v.mutatedParts)for(var j=0,z=Object.values(C.queries.query);j<z.length;j++)for(var V=z[j],B=0,Z=V.slice();B<Z.length;B++){var $=Z[B];Ro($.obsSet,v.mutatedParts)&&(Be(V,$),$.subscribers.forEach(function(Oe){return k.add(Oe)}))}else if(K.length>0){C.optimisticOps=C.optimisticOps.filter(function(Oe){return Oe.trans!==v});for(var Q=0,ve=Object.values(C.queries.query);Q<ve.length;Q++)for(var V=ve[Q],Ee=0,ee=V.slice();Ee<ee.length;Ee++){var $=ee[Ee];if($.res!=null&&v.mutatedParts)if(S&&!$.dirty){var be=Object.isFrozen($.res),pe=xu($.res,$.req,K,P,$,be);$.dirty?(Be(V,$),$.subscribers.forEach(function(Je){return k.add(Je)})):pe!==$.res&&($.res=pe,$.promise=J.resolve({result:pe}))}else $.dirty&&Be(V,$),$.subscribers.forEach(function(Je){return k.add(Je)})}}}}k.forEach(function(Oe){return Oe()})}}};v.addEventListener("abort",x(!1),{signal:g}),v.addEventListener("error",x(!1),{signal:g}),v.addEventListener("complete",x(!0),{signal:g})}return v},table:function(s){var l=n.table(s),f=l.schema.primaryKey,v=u(u({},l),{mutate:function(y){var g=le.trans;if(f.outbound||g.db._options.cache==="disabled"||g.explicit||g.idbtrans.mode!=="readwrite")return l.mutate(y);var x=pr["idb://".concat(r,"/").concat(s)];if(!x)return l.mutate(y);var S=l.mutate(y);return(y.type==="add"||y.type==="put")&&(y.values.length>=50||jo(f,y).some(function(k){return k==null}))?S.then(function(k){var R=u(u({},y),{values:y.values.map(function(I,C){var P;if(k.failures[C])return I;var K=!((P=f.keyPath)===null||P===void 0)&&P.includes(".")?ze(I):u({},I);return de(K,f.keyPath,k.results[C]),K})}),Y=Eu(x,R,k);x.optimisticOps.push(Y),queueMicrotask(function(){return y.mutatedParts&&ua(y.mutatedParts)})}):(x.optimisticOps.push(y),y.mutatedParts&&ua(y.mutatedParts),S.then(function(k){if(k.numFailures>0){Be(x.optimisticOps,y);var R=Eu(x,y,k);R&&x.optimisticOps.push(R),y.mutatedParts&&ua(y.mutatedParts)}}),S.catch(function(){Be(x.optimisticOps,y),y.mutatedParts&&ua(y.mutatedParts)})),S},query:function(y){var g;if(!bu(le,l)||!wu("query",y))return l.query(y);var x=((g=le.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",S=le,k=S.requery,R=S.signal,Y=Af(r,s,"query",y),I=Y[0],C=Y[1],P=Y[2],K=Y[3];if(I&&C)I.obsSet=y.obsSet;else{var j=l.query(y).then(function(z){var V=z.result;if(I&&(I.res=V),x){for(var B=0,Z=V.length;B<Z;++B)Object.freeze(V[B]);Object.freeze(V)}else z.result=ze(V);return z}).catch(function(z){return K&&I&&Be(K,I),Promise.reject(z)});I={obsSet:y.obsSet,promise:j,subscribers:new Set,type:"query",req:y,dirty:!1},K?K.push(I):(K=[I],P||(P=pr["idb://".concat(r,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),P.queries.query[y.query.index.name||""]=K)}return If(I,K,k,R),I.promise.then(function(z){return{result:xu(z.result,y,P?.optimisticOps,l,I,x)}})}});return v}});return a}};function ca(n,r){return new Proxy(n,{get:function(a,s,l){return s==="db"?r:Reflect.get(a,s,l)}})}var In=(function(){function n(r,a){var s=this;this._middlewares={},this.verno=0;var l=n.dependencies;this._options=a=u({addons:n.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange};var f=a.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};v.dbReadyPromise=new J(function(g){v.dbReadyResolve=g}),v.openCanceller=new J(function(g,x){v.cancelOpen=x}),this._state=v,this.name=r,this.on=si(this,"populate","blocked","versionchange","close",{ready:[xe,Se]}),this.once=function(g,x){var S=function(){for(var k=[],R=0;R<arguments.length;R++)k[R]=arguments[R];s.on(g).unsubscribe(S),x.apply(s,k)};return s.on(g,S)},this.on.ready.subscribe=W(this.on.ready.subscribe,function(g){return function(x,S){n.vip(function(){var k=s._state;if(k.openComplete)k.dbOpenError||J.resolve().then(x),S&&g(x);else if(k.onReadyBeingFired)k.onReadyBeingFired.push(x),S&&g(x);else{g(x);var R=s;S||g(function Y(){R.on.ready.unsubscribe(x),R.on.ready.unsubscribe(Y)})}})}}),this.Collection=Nc(this),this.Table=Pc(this),this.Transaction=Vc(this),this.Version=sf(this),this.WhereClause=Hc(this),this.on("versionchange",function(g){g.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(g){!g.newVersion||g.newVersion<g.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(g.oldVersion/10))}),this._maxKey=fi(a.IDBKeyRange),this._createTransaction=function(g,x,S,k){return new s.Transaction(g,x,S,s._options.chromeTransactionDurability,k)},this._fireOnBlocked=function(g){s.on("blocked").fire(g),Mr.filter(function(x){return x.name===s.name&&x!==s&&!x._state.vcFired}).map(function(x){return x.on("versionchange").fire(g)})},this.use(gf),this.use(Sf),this.use(_f),this.use(pf),this.use(mf);var y=new Proxy(this,{get:function(g,x,S){if(x==="_vip")return!0;if(x==="table")return function(R){return ca(s.table(R),y)};var k=Reflect.get(g,x,S);return k instanceof iu?ca(k,y):x==="tables"?k.map(function(R){return ca(R,y)}):x==="_createTransaction"?function(){var R=k.apply(this,arguments);return ca(R,y)}:k}});this.vip=y,f.forEach(function(g){return g(s)})}return n.prototype.version=function(r){if(isNaN(r)||r<.1)throw new ue.Type("Given version is not a positive number");if(r=Math.round(r*10)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var a=this._versions,s=a.filter(function(l){return l._cfg.version===r})[0];return s||(s=new this.Version(r),a.push(s),a.sort(Xc),s.stores({}),this._state.autoSchema=!1,s)},n.prototype._whenReady=function(r){var a=this;return this.idbdb&&(this._state.openComplete||le.letThrough||this._vip)?r():new J(function(s,l){if(a._state.openComplete)return l(new ue.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen){l(new ue.DatabaseClosed);return}a.open().catch(Se)}a._state.dbReadyPromise.then(s,l)}).then(r)},n.prototype.use=function(r){var a=r.stack,s=r.create,l=r.level,f=r.name;f&&this.unuse({stack:a,name:f});var v=this._middlewares[a]||(this._middlewares[a]=[]);return v.push({stack:a,create:s,level:l??10,name:f}),v.sort(function(y,g){return y.level-g.level}),this},n.prototype.unuse=function(r){var a=r.stack,s=r.name,l=r.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(f){return l?f.create!==l:s?f.name!==s:!1})),this},n.prototype.open=function(){var r=this;return dr(Bn,function(){return df(r)})},n.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,a=Mr.indexOf(this);if(a>=0&&Mr.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new J(function(s){r.dbReadyResolve=s}),r.openCanceller=new J(function(s,l){r.cancelOpen=l}))},n.prototype.close=function(r){var a=r===void 0?{disableAutoOpen:!0}:r,s=a.disableAutoOpen,l=this._state;s?(l.isBeingOpened&&l.cancelOpen(new ue.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new ue.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},n.prototype.delete=function(r){var a=this;r===void 0&&(r={disableAutoOpen:!0});var s=arguments.length>0&&typeof arguments[0]!="object",l=this._state;return new J(function(f,v){var y=function(){a.close(r);var g=a._deps.indexedDB.deleteDatabase(a.name);g.onsuccess=Ge(function(){cf(a._deps,a.name),f()}),g.onerror=fn(v),g.onblocked=a._fireOnBlocked};if(s)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");l.isBeingOpened?l.dbReadyPromise.then(y):y()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var r=this;return p(this._allTables).map(function(a){return r._allTables[a]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var r=vf.apply(this,arguments);return this._transaction.apply(this,r)},n.prototype._transaction=function(r,a,s){var l=this,f=le.trans;(!f||f.db!==this||r.indexOf("!")!==-1)&&(f=null);var v=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");var y,g;try{if(g=a.map(function(S){var k=S instanceof l.Table?S.name:S;if(typeof k!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return k}),r=="r"||r===go)y=go;else if(r=="rw"||r==_o)y=_o;else throw new ue.InvalidArgument("Invalid transaction mode: "+r);if(f){if(f.mode===go&&y===_o)if(v)f=null;else throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f&&g.forEach(function(S){if(f&&f.storeNames.indexOf(S)===-1)if(v)f=null;else throw new ue.SubTransaction("Table "+S+" not included in parent transaction.")}),v&&f&&!f.active&&(f=null)}}catch(S){return f?f._promise(null,function(k,R){R(S)}):$e(S)}var x=gu.bind(null,this,y,g,f,s);return f?f._promise(y,x,"lock"):le.trans?dr(le.transless,function(){return l._whenReady(x)}):this._whenReady(x)},n.prototype.table=function(r){if(!_(this._allTables,r))throw new ue.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},n})(),Of=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Cf=(function(){function n(r){this._subscribe=r}return n.prototype.subscribe=function(r,a,s){return this._subscribe(!r||typeof r=="function"?{next:r,error:a,complete:s}:r)},n.prototype[Of]=function(){return this},n})(),fa;try{fa={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{fa={indexedDB:null,IDBKeyRange:null}}function ku(n){var r=!1,a,s=new Cf(function(l){var f=tn(n);function v(K){var j=Lr();try{f&&Rr();var z=jn(n,K);return f&&(z=z.finally(zn)),z}finally{j&&Pr()}}var y=!1,g,x={},S={},k={get closed(){return y},unsubscribe:function(){y||(y=!0,g&&g.abort(),R&&Vn.storagemutated.unsubscribe(C))}};l.start&&l.start(k);var R=!1,Y=function(){return po(P)};function I(){return Ro(S,x)}var C=function(K){sa(x,K),I()&&Y()},P=function(){if(!(y||!fa.indexedDB)){x={};var K={};g&&g.abort(),g=new AbortController;var j={subscr:K,signal:g.signal,requery:Y,querier:n,trans:null},z=v(j);Promise.resolve(z).then(function(V){r=!0,a=V,!(y||j.signal.aborted)&&(x={},S=K,!bt(S)&&!R&&(Vn(ci,C),R=!0),po(function(){return!y&&l.next&&l.next(V)}))},function(V){r=!1,["DatabaseClosedError","AbortError"].includes(V?.name)||y||po(function(){y||l.error&&l.error(V)})})}};return setTimeout(Y,0),k});return s.hasValue=function(){return r},s.getValue=function(){return a},s}var mr=In;E(mr,u(u({},Tn),{delete:function(n){var r=new mr(n,{addons:[]});return r.delete()},exists:function(n){return new mr(n,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return uf(mr.dependencies).then(n)}catch{return $e(new ue.MissingAPI)}},defineClass:function(){function n(r){b(this,r)}return n},ignoreTransaction:function(n){return le.trans?dr(le.transless,n):n()},vip:Co,async:function(n){return function(){try{var r=Fo(n.apply(this,arguments));return!r||typeof r.then!="function"?J.resolve(r):r}catch(a){return $e(a)}}},spawn:function(n,r,a){try{var s=Fo(n.apply(a,r||[]));return!s||typeof s.then!="function"?J.resolve(s):s}catch(l){return $e(l)}},currentTransaction:{get:function(){return le.trans||null}},waitFor:function(n,r){var a=J.resolve(typeof n=="function"?mr.ignoreTransaction(n):n).timeout(r||6e4);return le.trans?le.trans.waitFor(a):a},Promise:J,debug:{get:function(){return he},set:function(n){Qe(n)}},derive:D,extend:b,props:E,override:W,Events:si,on:Vn,liveQuery:ku,extendObservabilitySet:sa,getByKeyPath:se,setByKeyPath:de,delByKeyPath:ie,shallowClone:ge,deepClone:ze,getObjectDiff:Bo,cmp:De,asap:oe,minKey:yo,addons:[],connections:Mr,errnames:cn,dependencies:fa,cache:pr,semVer:Xs,version:Xs.split(".").map(function(n){return parseInt(n)}).reduce(function(n,r,a){return n+r/Math.pow(10,a*2)})})),mr.maxKey=fi(mr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Vn(ci,function(n){if(!Wn){var r;r=new CustomEvent(Eo,{detail:n}),Wn=!0,dispatchEvent(r),Wn=!1}}),addEventListener(Eo,function(n){var r=n.detail;Wn||Ho(r)}));function Ho(n){var r=Wn;try{Wn=!0,Vn.storagemutated.fire(n),Ko(n,!0)}finally{Wn=r}}var Wn=!1,Gn,Uo=function(){};typeof BroadcastChannel<"u"&&(Uo=function(){Gn=new BroadcastChannel(Eo),Gn.onmessage=function(n){return n.data&&Ho(n.data)}},Uo(),typeof Gn.unref=="function"&&Gn.unref(),Vn(ci,function(n){Wn||Gn.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!In.disableBfCache&&n.persisted){he&&console.debug("Dexie: handling persisted pagehide"),Gn?.close();for(var r=0,a=Mr;r<a.length;r++){var s=a[r];s.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(n){!In.disableBfCache&&n.persisted&&(he&&console.debug("Dexie: handling persisted pageshow"),Uo(),Ho({all:new wt(-1/0,[[]])}))}));function Lf(n){return new oi({add:n})}function Pf(n){return new oi({remove:n})}function Rf(n,r){return new oi({replacePrefix:[n,r]})}J.rejectionMapper=Cr,Qe(he);var Mf=Object.freeze({__proto__:null,Dexie:In,liveQuery:ku,Entity:eu,cmp:De,PropModification:oi,replacePrefix:Rf,add:Lf,remove:Pf,default:In,RangeSet:wt,mergeRanges:hi,rangesOverlap:hu});return u(In,Mf,{default:In}),In}))})(ba)),ba.exports}var Nv=Mv();const fs=Pv(Nv),Hu=Symbol.for("Dexie"),Pa=globalThis[Hu]||(globalThis[Hu]=fs);if(fs.semVer!==Pa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${fs.semVer} and ${Pa.semVer}`);const{liveQuery:Ra,mergeRanges:gm,rangesOverlap:_m,RangeSet:bm,cmp:wm,Entity:Em,PropModification:xm,replacePrefix:Tm,add:km,remove:Am,DexieYProvider:Im}=Pa;function Uu(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,o)}return i}function Ma(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Uu(Object(i),!0).forEach(function(o){Xr(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Uu(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function jr(e){"@babel/helpers - typeof";return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(e)}function Xr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Kv(e,t){if(e==null)return{};var i={},o=Object.keys(e),u,c;for(c=0;c<o.length;c++)u=o[c],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function Fv(e,t){if(e==null)return{};var i=Kv(e,t),o,u;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(u=0;u<c.length;u++)o=c[u],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function Bv(e,t){return zv(e)||Uv(e,t)||js(e,t)||Wv()}function en(e){return jv(e)||Hv(e)||js(e)||Vv()}function jv(e){if(Array.isArray(e))return ds(e)}function zv(e){if(Array.isArray(e))return e}function Hv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uv(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var o=[],u=!0,c=!1,d,p;try{for(i=i.call(e);!(u=(d=i.next()).done)&&(o.push(d.value),!(t&&o.length===t));u=!0);}catch(h){c=!0,p=h}finally{try{!u&&i.return!=null&&i.return()}finally{if(c)throw p}}return o}}function js(e,t){if(e){if(typeof e=="string")return ds(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ds(e,t)}}function ds(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function Vv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=js(e))||t){i&&(e=i);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(h){throw h},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,d=!1,p;return{s:function(){i=i.call(e)},n:function(){var h=i.next();return c=h.done,h},e:function(h){d=!0,p=h},f:function(){try{!c&&i.return!=null&&i.return()}finally{if(d)throw p}}}}var Gv="finalize",Yv="consider";function Jr(e,t,i){e.dispatchEvent(new CustomEvent(Gv,{detail:{items:t,info:i}}))}function ir(e,t,i){e.dispatchEvent(new CustomEvent(Yv,{detail:{items:t,info:i}}))}var $a="draggedEntered",Bi="draggedLeft",eo="draggedOverIndex",zs="draggedLeftDocument",Na={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function qv(e,t,i){e.dispatchEvent(new CustomEvent($a,{detail:{indexObj:t,draggedEl:i}}))}function Zv(e,t,i){e.dispatchEvent(new CustomEvent(Bi,{detail:{draggedEl:t,type:Na.LEFT_FOR_ANOTHER,theOtherDz:i}}))}function Qv(e,t){e.dispatchEvent(new CustomEvent(Bi,{detail:{draggedEl:t,type:Na.OUTSIDE_OF_ANY}}))}function Xv(e,t,i){e.dispatchEvent(new CustomEvent(eo,{detail:{indexObj:t,draggedEl:i}}))}function Jv(e){window.dispatchEvent(new CustomEvent(zs,{detail:{draggedEl:e}}))}var Pt={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:$a,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:eo,DRAGGED_LEFT:Bi,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},jt={POINTER:"pointer",KEYBOARD:"keyboard"},to="isDndShadowItem",no="data-is-dnd-shadow-item-internal",$v="data-is-dnd-shadow-item-hint",tc="id:dnd-shadow-placeholder-0000",eh="dnd-action-dragged-el",ot="id",vs=0;function nc(){vs++}function rc(){if(vs===0)throw new Error("Bug! trying to decrement when there are no dropzones");vs--}var Hs=typeof window>"u";function hs(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i,o=t?rh(e):e.getBoundingClientRect(),u=getComputedStyle(e),c=u.transform;if(c){var d,p,h,b;if(c.startsWith("matrix3d("))i=c.slice(9,-1).split(/, /),d=+i[0],p=+i[5],h=+i[12],b=+i[13];else if(c.startsWith("matrix("))i=c.slice(7,-1).split(/, /),d=+i[0],p=+i[3],h=+i[4],b=+i[5];else return o;var w=u.transformOrigin,T=o.x-h-(1-d)*parseFloat(w),_=o.y-b-(1-p)*parseFloat(w.slice(w.indexOf(" ")+1)),E=d?o.width/d:e.offsetWidth,O=p?o.height/p:e.offsetHeight;return{x:T,y:_,width:E,height:O,top:_,right:T+E,bottom:_+O,left:T}}else return o}function ic(e){var t=hs(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function ac(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function oc(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function th(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ro(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function Oi(e){return oc(ac(e))}function Vu(e,t){var i=Oi(e),o=ic(t);return ro(i,o)}function Wu(e,t){var i=Oi(e),o=Oi(t);return th(i,o)}function nh(e){var t=ac(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function rh(e){for(var t=e.getBoundingClientRect(),i={top:t.top,bottom:t.bottom,left:t.left,right:t.right},o=!1,u=!1,c=e.parentElement;c&&c!==document.body;){var d=window.getComputedStyle(c),p=d.overflowY,h=d.overflowX,b=p==="scroll"||p==="auto",w=h==="scroll"||h==="auto";if(b||w){var T=c.getBoundingClientRect();if(b){var _=Math.max(i.top,T.top),E=Math.min(i.bottom,T.bottom);(_!==i.top||E!==i.bottom)&&(o=!0),i.top=_,i.bottom=E}if(w){var O=Math.max(i.left,T.left),L=Math.min(i.right,T.right);(O!==i.left||L!==i.right)&&(u=!0),i.left=O,i.right=L}}c=c.parentElement}return o||u?{top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:Math.max(0,i.right-i.left),height:Math.max(0,i.bottom-i.top)}:{top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:Math.max(0,t.right-t.left),height:Math.max(0,t.bottom-t.top)}}var Ur;function Us(){Ur=new Map}Us();function ih(e){var t=Array.from(e.children).findIndex(function(i){return i.getAttribute(no)});if(t>=0)return Ur.has(e)||Ur.set(e,new Map),Ur.get(e).set(t,ic(e.children[t])),t}function ah(e,t){if(!Vu(e,t))return null;var i=t.children;if(i.length===0)return{index:0,isProximityBased:!0};for(var o=ih(t),u=0;u<i.length;u++)if(Vu(e,i[u])){var c=Ur.has(t)&&Ur.get(t).get(u);return c&&!ro(Oi(e),c)?{index:o,isProximityBased:!1}:{index:u,isProximityBased:!1}}for(var d=Number.MAX_VALUE,p=void 0,h=0;h<i.length;h++){var b=Wu(e,i[h]);b<d&&(d=b,p=h)}if(i.length>0){var w=i.length,T=i[w-1],_=T.cloneNode(!1);_.style.visibility="hidden",_.style.pointerEvents="none",t.appendChild(_);var E=Wu(e,_);E<d&&(p=w),t.removeChild(_)}return{index:p,isProximityBased:!0}}function gi(e){return JSON.stringify(e,null,2)}function Ka(e){if(!e)throw new Error("cannot get depth of a falsy node");return sc(e,0)}function sc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?sc(e.parentElement,t+1):t-1}function oh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!{}.hasOwnProperty.call(t,i)||t[i]!==e[i])return!1;return!0}function sh(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var uh=200,Gu=10,ps;function lh(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uh,o=arguments.length>3?arguments[3]:void 0,u,c,d=!1,p,h=Array.from(t).sort(function(w,T){return Ka(T)-Ka(w)});function b(){var w=Oi(e),T=o.multiScrollIfNeeded();if(!T&&p&&Math.abs(p.x-w.x)<Gu&&Math.abs(p.y-w.y)<Gu){ps=window.setTimeout(b,i);return}if(nh(e)){Jv(e);return}p=w;var _=!1,E=Fi(h),O;try{for(E.s();!(O=E.n()).done;){var L=O.value;T&&Us();var D=ah(e,L);if(D!==null){var A=D.index;_=!0,L!==u?(u&&Zv(u,e,L),qv(L,D,e),u=L):A!==c&&(Xv(L,D,e),c=A);break}}}catch(H){E.e(H)}finally{E.f()}!_&&d&&u?(Qv(u,e),u=void 0,c=void 0,d=!1):d=!0,ps=window.setTimeout(b,i)}b()}function ch(){clearTimeout(ps),Us()}var _i=30;function fh(){var e;function t(){e={directionObj:void 0,stepPx:0}}t();function i(c){var d=e,p=d.directionObj,h=d.stepPx;p&&(c.scrollBy(p.x*h,p.y*h),window.requestAnimationFrame(function(){return i(c)}))}function o(c){return _i-c}function u(c,d){if(!d)return!1;var p=dh(c,d),h=!!e.directionObj;if(p===null)return h&&t(),!1;var b=!1,w=!1;return d.scrollHeight>d.clientHeight&&(p.bottom<_i?(b=!0,e.directionObj={x:0,y:1},e.stepPx=o(p.bottom)):p.top<_i&&(b=!0,e.directionObj={x:0,y:-1},e.stepPx=o(p.top)),!h&&b)||d.scrollWidth>d.clientWidth&&(p.right<_i?(w=!0,e.directionObj={x:1,y:0},e.stepPx=o(p.right)):p.left<_i&&(w=!0,e.directionObj={x:-1,y:0},e.stepPx=o(p.left)),!h&&w)?(i(d),!0):(t(),!1)}return{scrollIfNeeded:u,resetScrolling:t}}function dh(e,t){var i=t===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:t.getBoundingClientRect();return ro(e,i)?{top:e.y-i.top,bottom:i.bottom-e.y,left:e.x-i.left,right:i.right-e.x}:null}function vh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=ph(e),o=Array.from(i).sort(function(h,b){return Ka(b)-Ka(h)}),u=fh(),c=u.scrollIfNeeded,d=u.resetScrolling;function p(){var h=t();if(!h||!o)return!1;for(var b=o.filter(function(_){return ro(h,_.getBoundingClientRect())||_===document.scrollingElement}),w=0;w<b.length;w++){var T=c(h,b[w]);if(T)return!0}return!1}return{multiScrollIfNeeded:i.size>0?p:function(){return!1},destroy:function(){return d()}}}function hh(e){if(!e)return[];for(var t=[],i=e;i;){var o=window.getComputedStyle(i),u=o.overflow;u.split(" ").some(function(c){return c.includes("auto")||c.includes("scroll")})&&t.push(i),i=i.parentElement}return t}function ph(e){var t=new Set,i=Fi(e),o;try{for(i.s();!(o=i.n()).done;){var u=o.value;hh(u).forEach(function(c){return t.add(c)})}}catch(c){i.e(c)}finally{i.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&t.add(document.scrollingElement),t}function mh(e){var t=e.cloneNode(!0),i=[],o=e.tagName==="SELECT",u=o?[e]:en(e.querySelectorAll("select")),c=Fi(u),d;try{for(c.s();!(d=c.n()).done;){var p=d.value;i.push(p.value)}}catch(F){c.e(F)}finally{c.f()}if(u.length>0)for(var h=o?[t]:en(t.querySelectorAll("select")),b=0;b<h.length;b++){var w=h[b],T=i[b],_=w.querySelector('option[value="'.concat(T,'"'));_&&_.setAttribute("selected",!0)}var E=e.tagName==="CANVAS",O=E?[e]:en(e.querySelectorAll("canvas"));if(O.length>0)for(var L=E?[t]:en(t.querySelectorAll("canvas")),D=0;D<L.length;D++){var A=O[D],H=L[D];H.width=A.width,H.height=A.height,A.width>0&&A.height>0&&H.getContext("2d").drawImage(A,0,0)}return t}var Ci=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),yh=Xr({},Ci.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function uc(e){if(!Ci[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Ci)));return yh[e]}var gh=.2;function gr(e){return"".concat(e," ").concat(gh,"s ease")}function _h(e,t){var i=e.getBoundingClientRect(),o=mh(e);lc(e,o),o.id=eh,o.style.position="fixed";var u=i.top,c=i.left;if(o.style.top="".concat(u,"px"),o.style.left="".concat(c,"px"),t){var d=oc(i);u-=d.y-t.y,c-=d.x-t.x,window.setTimeout(function(){o.style.top="".concat(u,"px"),o.style.left="".concat(c,"px")},0)}return o.style.margin="0",o.style.boxSizing="border-box",o.style.height="".concat(i.height,"px"),o.style.width="".concat(i.width,"px"),o.style.transition="".concat(gr("top"),", ").concat(gr("left"),", ").concat(gr("background-color"),", ").concat(gr("opacity"),", ").concat(gr("color")," "),window.setTimeout(function(){return o.style.transition+=", ".concat(gr("width"),", ").concat(gr("height"))},0),o.style.zIndex="9999",o.style.cursor="grabbing",o}function bh(e){e.style.cursor="grab"}function wh(e,t,i,o){lc(t,e);var u=t.getBoundingClientRect(),c=e.getBoundingClientRect(),d=u.width-c.width,p=u.height-c.height;if(d||p){var h={left:(i-c.left)/c.width,top:(o-c.top)/c.height};uc(Ci.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(u.height,"px"),e.style.width="".concat(u.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-h.left*d,"px"),e.style.top="".concat(parseFloat(e.style.top)-h.top*p,"px")}}function lc(e,t){var i=window.getComputedStyle(e);Array.from(i).filter(function(o){return o.startsWith("background")||o.startsWith("padding")||o.startsWith("font")||o.startsWith("text")||o.startsWith("align")||o.startsWith("justify")||o.startsWith("display")||o.startsWith("flex")||o.startsWith("border")||o==="opacity"||o==="color"||o==="list-style-type"||uc(Ci.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(o==="width"||o==="height")}).forEach(function(o){return t.style.setProperty(o,i.getPropertyValue(o),i.getPropertyPriority(o))})}function Eh(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function cc(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function xh(e){e.style.visibility="hidden",e.setAttribute(no,"true")}function Th(e){e.style.visibility="",e.removeAttribute(no)}function wa(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(o){var u=t(o);Object.keys(u).forEach(function(c){o.style[c]=u[c]}),i(o).forEach(function(c){return o.classList.add(c)})})}function Fa(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(o){var u=t(o);Object.keys(u).forEach(function(c){o.style[c]=""}),i(o).forEach(function(c){return o.classList.contains(c)&&o.classList.remove(c)})})}function kh(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var i=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=i}}var Ah="--any--",Ih=100,Dh=20,pa=3,Sh=80,Yu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},qu="data-is-dnd-original-dragged-item",Nt,lt,Ft,io,qe,ao,er,yt,mn,xt,qn=!1,Vs=!1,Ws,ji=!1,Ea=[],ki,yn,wi=!1,sn=new Map,et=new Map,Xo=new WeakMap;function Oh(e,t){sn.has(t)||sn.set(t,new Set),sn.get(t).has(e)||(sn.get(t).add(e),nc())}function Zu(e,t){sn.get(t).delete(e),rc(),sn.get(t).size===0&&sn.delete(t)}function Ch(){var e=sn.get(io),t=Fi(e),i;try{for(t.s();!(i=t.n()).done;){var o=i.value;o.addEventListener($a,fc),o.addEventListener(Bi,dc),o.addEventListener(eo,vc)}}catch(d){t.e(d)}finally{t.f()}window.addEventListener(zs,$r);var u=Math.max.apply(Math,en(Array.from(e.keys()).map(function(d){return et.get(d).dropAnimationDurationMs}))),c=u===0?Dh:Math.max(u,Ih);ki=vh(e,function(){return xt}),lh(lt,e,c*1.07,ki)}function Lh(){var e=sn.get(io),t=Fi(e),i;try{for(t.s();!(i=t.n()).done;){var o=i.value;o.removeEventListener($a,fc),o.removeEventListener(Bi,dc),o.removeEventListener(eo,vc)}}catch(u){t.e(u)}finally{t.f()}window.removeEventListener(zs,$r),ki&&(ki.destroy(),ki=void 0),ch()}function oo(e){return e.findIndex(function(t){return!!t[to]})}function Ph(e){var t;return Ma(Ma({},e),{},(t={},Xr(t,to,!0),Xr(t,ot,tc),t))}function fc(e){var t=et.get(e.currentTarget),i=t.items,o=t.dropFromOthersDisabled;if(!(o&&e.currentTarget!==qe)){if(ji=!1,i=i.filter(function(p){return p[ot]!==er[ot]&&p[ot]!==tc}),qe!==e.currentTarget){var u=et.get(qe).items,c=u.filter(function(p){return!p[to]});ir(qe,c,{trigger:Pt.DRAGGED_ENTERED_ANOTHER,id:Ft[ot],source:jt.POINTER})}var d=e.detail.indexObj.index;yt=e.currentTarget,i.splice(d,0,er),ir(e.currentTarget,i,{trigger:Pt.DRAGGED_ENTERED,id:Ft[ot],source:jt.POINTER})}}function dc(e){if(qn){var t=et.get(e.currentTarget),i=t.items,o=t.dropFromOthersDisabled;if(!(o&&e.currentTarget!==qe&&e.currentTarget!==yt)){var u=en(i),c=oo(u);c!==-1&&u.splice(c,1);var d=yt;yt=void 0;var p=e.detail,h=p.type,b=p.theOtherDz;if(h===Na.OUTSIDE_OF_ANY||h===Na.LEFT_FOR_ANOTHER&&b!==qe&&et.get(b).dropFromOthersDisabled){ji=!0,yt=qe;var w=d===qe?u:en(et.get(qe).items);w.splice(ao,0,er),ir(qe,w,{trigger:Pt.DRAGGED_LEFT_ALL,id:Ft[ot],source:jt.POINTER})}ir(e.currentTarget,u,{trigger:Pt.DRAGGED_LEFT,id:Ft[ot],source:jt.POINTER})}}}function vc(e){var t=et.get(e.currentTarget),i=t.items,o=t.dropFromOthersDisabled;if(!(o&&e.currentTarget!==qe)){var u=en(i);ji=!1;var c=e.detail.indexObj.index,d=oo(u);d!==-1&&u.splice(d,1),u.splice(c,0,er),ir(e.currentTarget,u,{trigger:Pt.DRAGGED_OVER_INDEX,id:Ft[ot],source:jt.POINTER})}}function Ba(e){e.preventDefault();var t=e.touches?e.touches[0]:e;xt={x:t.clientX,y:t.clientY},lt.style.transform="translate3d(".concat(xt.x-mn.x,"px, ").concat(xt.y-mn.y,"px, 0)")}function $r(){Vs=!0,window.removeEventListener("mousemove",Ba),window.removeEventListener("touchmove",Ba),window.removeEventListener("mouseup",$r),window.removeEventListener("touchend",$r),Lh(),bh(lt),yt||(yt=qe);var e=et.get(yt),t=e.items,i=e.type;Fa(sn.get(i),function(c){return et.get(c).dropTargetStyle},function(c){return et.get(c).dropTargetClasses});var o=oo(t);o===-1&&yt===qe&&(o=ao),t=t.map(function(c){return c[to]?Ft:c});function u(){Ws(),Jr(yt,t,{trigger:ji?Pt.DROPPED_OUTSIDE_OF_ANY:Pt.DROPPED_INTO_ZONE,id:Ft[ot],source:jt.POINTER}),yt!==qe&&Jr(qe,et.get(qe).items,{trigger:Pt.DROPPED_INTO_ANOTHER,id:Ft[ot],source:jt.POINTER});var c=Array.from(yt.children).find(function(d){return d.getAttribute(no)});c&&Th(c),Nh()}et.get(yt).dropAnimationDisabled?u():Rh(o,u)}function Rh(e,t){var i=e>-1?hs(yt.children[e],!1):hs(yt,!1),o={x:i.left-parseFloat(lt.style.left),y:i.top-parseFloat(lt.style.top)},u=et.get(yt),c=u.dropAnimationDurationMs,d="transform ".concat(c,"ms ease");lt.style.transition=lt.style.transition?lt.style.transition+","+d:d,lt.style.transform="translate3d(".concat(o.x,"px, ").concat(o.y,"px, 0)"),window.setTimeout(t,c)}function Mh(e,t){Ea.push({dz:e,destroy:t}),window.requestAnimationFrame(function(){cc(e),document.body.appendChild(e)})}function Nh(){lt&&lt.remove&&lt.remove(),Nt&&Nt.remove&&Nt.remove(),lt=void 0,Nt=void 0,Ft=void 0,io=void 0,qe=void 0,ao=void 0,er=void 0,yt=void 0,mn=void 0,xt=void 0,qn=!1,Vs=!1,Ws=void 0,ji=!1,yn&&clearTimeout(yn),yn=void 0,wi=!1,Ea.length&&(Ea.forEach(function(e){var t=e.dz,i=e.destroy;i(),t.remove()}),Ea=[])}function Kh(e,t){var i=!1,o={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Yu,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},u=new Map;function c(){window.addEventListener("mousemove",h,{passive:!1}),window.addEventListener("touchmove",h,{passive:!1,capture:!1}),window.addEventListener("mouseup",p,{passive:!1}),window.addEventListener("touchend",p,{passive:!1})}function d(){window.removeEventListener("mousemove",h),window.removeEventListener("touchmove",h),window.removeEventListener("mouseup",p),window.removeEventListener("touchend",p),yn&&(clearTimeout(yn),yn=void 0,wi=!1)}function p(_){if(d(),Nt=void 0,mn=void 0,xt=void 0,_.type==="touchend"){var E=new Event("click",{bubbles:!0,cancelable:!0});_.target.dispatchEvent(E)}}function h(_){var E=!!_.touches,O=E?_.touches[0]:_;if(E&&o.delayTouchStartMs>0&&!wi){xt={x:O.clientX,y:O.clientY},(Math.abs(xt.x-mn.x)>=pa||Math.abs(xt.y-mn.y)>=pa)&&(yn&&(clearTimeout(yn),yn=void 0),p(_));return}_.preventDefault(),xt={x:O.clientX,y:O.clientY},(Math.abs(xt.x-mn.x)>=pa||Math.abs(xt.y-mn.y)>=pa)&&(d(),w())}function b(_){if(!(_.target!==_.currentTarget&&(_.target.value!==void 0||_.target.isContentEditable))&&!_.button&&!qn){var E=!!_.touches,O=E&&o.delayTouchStartMs>0;O||_.preventDefault(),_.stopPropagation();var L=E?_.touches[0]:_;mn={x:L.clientX,y:L.clientY},xt=Ma({},mn),Nt=_.currentTarget,O&&(wi=!1,yn=window.setTimeout(function(){Nt&&(wi=!0,d(),w())},o.delayTouchStartMs)),c()}}function w(){qn=!0;var _=u.get(Nt);ao=_,qe=Nt.parentElement;var E=qe.closest("dialog")||qe.closest("[popover]")||qe.getRootNode(),O=E.body||E,L=o.items,D=o.type,A=o.centreDraggedOnCursor,H=en(L);Ft=H[_],io=D,er=Ph(Ft),lt=_h(Nt,A&&xt),O.appendChild(lt);function F(){Nt.parentElement?window.requestAnimationFrame(F):(Nt.setAttribute(qu,!0),O.appendChild(Nt),Ch(),cc(Nt),er[ot]=Ft[ot],lt.focus())}window.requestAnimationFrame(F),wa(Array.from(sn.get(o.type)).filter(function(N){return N===qe||!et.get(N).dropFromOthersDisabled}),function(N){return et.get(N).dropTargetStyle},function(N){return et.get(N).dropTargetClasses}),H.splice(_,1,er),Ws=kh(qe),ir(qe,H,{trigger:Pt.DRAG_STARTED,id:Ft[ot],source:jt.POINTER}),window.addEventListener("mousemove",Ba,{passive:!1}),window.addEventListener("touchmove",Ba,{passive:!1,capture:!1}),window.addEventListener("mouseup",$r,{passive:!1}),window.addEventListener("touchend",$r,{passive:!1})}function T(_){var E=_.items,O=E===void 0?void 0:E,L=_.flipDurationMs,D=L===void 0?0:L,A=_.type,H=A===void 0?Ah:A,F=_.dragDisabled,N=F===void 0?!1:F,W=_.morphDisabled,X=W===void 0?!1:W,oe=_.dropFromOthersDisabled,re=oe===void 0?!1:oe,se=_.dropTargetStyle,de=se===void 0?Yu:se,ie=_.dropTargetClasses,ge=ie===void 0?[]:ie,je=_.transformDraggedElement,Ke=je===void 0?function(){}:je,Ze=_.centreDraggedOnCursor,at=Ze===void 0?!1:Ze,Ae=_.dropAnimationDisabled,bt=Ae===void 0?!1:Ae,Ie=_.delayTouchStart,ze=Ie===void 0?!1:Ie;o.dropAnimationDurationMs=D;var te=0;ze===!0?te=Sh:typeof ze=="number"&&isFinite(ze)&&ze>=0&&(te=ze),o.delayTouchStartMs=te,o.type&&H!==o.type&&Zu(e,o.type),o.type=H,o.items=en(O),o.dragDisabled=N,o.morphDisabled=X,o.transformDraggedElement=Ke,o.centreDraggedOnCursor=at,o.dropAnimationDisabled=bt,i&&qn&&!Vs&&(!oh(de,o.dropTargetStyle)||!sh(ge,o.dropTargetClasses))&&(Fa([e],function(){return o.dropTargetStyle},function(){return ge}),wa([e],function(){return de},function(){return ge})),o.dropTargetStyle=de,o.dropTargetClasses=en(ge);function ye(Be,ft){return et.get(Be)?et.get(Be)[ft]:o[ft]}i&&qn&&o.dropFromOthersDisabled!==re&&(re?Fa([e],function(Be){return ye(Be,"dropTargetStyle")},function(Be){return ye(Be,"dropTargetClasses")}):wa([e],function(Be){return ye(Be,"dropTargetStyle")},function(Be){return ye(Be,"dropTargetClasses")})),o.dropFromOthersDisabled=re,et.set(e,o),Oh(e,H);for(var Re=qn?oo(o.items):-1,Ue=0;Ue<e.children.length;Ue++){var Ce=e.children[Ue];if(Eh(Ce,N),Ue===Re){X||wh(lt,Ce,xt.x,xt.y),o.transformDraggedElement(lt,Ft,Ue),xh(Ce);continue}Ce.removeEventListener("mousedown",Xo.get(Ce)),Ce.removeEventListener("touchstart",Xo.get(Ce)),N||(Ce.addEventListener("mousedown",b),Ce.addEventListener("touchstart",b),Xo.set(Ce,b)),u.set(Ce,Ue),i||(i=!0)}}return T(t),{update:function(E){T(E)},destroy:function(){function E(){Zu(e,et.get(e).type),et.delete(e)}qn&&!e.closest("[".concat(qu,"]"))?Mh(e,E):E()}}}var ma,ms={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},hc=(ma={},Xr(ma,ms.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Xr(ma,ms.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),ma),Fh="dnd-action-aria-alert",it;function ys(){it||(it=document.createElement("div"),(function(){it.id=Fh,it.style.position="fixed",it.style.bottom="0",it.style.left="0",it.style.zIndex="-5",it.style.opacity="0",it.style.height="0",it.style.width="0",it.setAttribute("role","alert")})(),document.body.prepend(it),Object.entries(hc).forEach(function(e){var t=Bv(e,2),i=t[0],o=t[1];return document.body.prepend(zh(i,o))}))}function Bh(){return Hs?null:(document.readyState==="complete"?ys():window.addEventListener("DOMContentLoaded",ys),Ma({},ms))}function jh(){Hs||!it||(Object.keys(hc).forEach(function(e){var t;return(t=document.getElementById(e))===null||t===void 0?void 0:t.remove()}),it.remove(),it=void 0)}function zh(e,t){var i=document.createElement("div");return i.id=e,i.innerHTML="<p>".concat(t,"</p>"),i.style.display="none",i.style.position="fixed",i.style.zIndex="-5",i}function Vr(e){if(!Hs){it||ys(),it.innerHTML="";var t=document.createTextNode(e);it.appendChild(t),it.style.display="none",it.style.display="inline"}}var Hh="--any--",Qu={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Qt=!1,gs,Tt,kr="",_r,_n,Zn="",ja=new WeakSet,Xu=new WeakMap,Ju=new WeakMap,_s=new Map,mt=new Map,on=new Map,za;function Uh(e,t){on.size===0&&(za=Bh(),window.addEventListener("keydown",pc),window.addEventListener("click",mc)),on.has(t)||on.set(t,new Set),on.get(t).has(e)||(on.get(t).add(e),nc())}function $u(e,t){Tt===e&&Li(),on.get(t).delete(e),rc(),on.get(t).size===0&&on.delete(t),on.size===0&&(window.removeEventListener("keydown",pc),window.removeEventListener("click",mc),za=void 0,jh())}function pc(e){if(Qt)switch(e.key){case"Escape":{Li();break}}}function mc(){Qt&&(ja.has(document.activeElement)||Li())}function Vh(e){if(Qt){var t=e.currentTarget;if(t!==Tt){kr=t.getAttribute("aria-label")||"";var i=mt.get(Tt),o=i.items,u=o.find(function(T){return T[ot]===_n}),c=o.indexOf(u),d=o.splice(c,1)[0],p=mt.get(t),h=p.items,b=p.autoAriaDisabled;t.getBoundingClientRect().top<Tt.getBoundingClientRect().top||t.getBoundingClientRect().left<Tt.getBoundingClientRect().left?(h.push(d),b||Vr("Moved item ".concat(Zn," to the end of the list ").concat(kr))):(h.unshift(d),b||Vr("Moved item ".concat(Zn," to the beginning of the list ").concat(kr)));var w=Tt;Jr(w,o,{trigger:Pt.DROPPED_INTO_ANOTHER,id:_n,source:jt.KEYBOARD}),Jr(t,h,{trigger:Pt.DROPPED_INTO_ZONE,id:_n,source:jt.KEYBOARD}),Tt=t}}}function yc(){_s.forEach(function(e,t){var i=e.update;return i(mt.get(t))})}function Li(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;mt.get(Tt).autoAriaDisabled||Vr("Stopped dragging item ".concat(Zn)),ja.has(document.activeElement)&&document.activeElement.blur(),e&&ir(Tt,mt.get(Tt).items,{trigger:Pt.DRAG_STOPPED,id:_n,source:jt.KEYBOARD}),Fa(on.get(gs),function(t){return mt.get(t).dropTargetStyle},function(t){return mt.get(t).dropTargetClasses}),_r=null,_n=null,Zn="",gs=null,Tt=null,kr="",Qt=!1,yc()}function Wh(e,t){var i={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Qu,dropTargetClasses:[],autoAriaDisabled:!1};function o(w,T,_){w.length<=1||w.splice(_,1,w.splice(T,1,w[_])[0])}function u(w){switch(w.key){case"Enter":case" ":{if((w.target.disabled!==void 0||w.target.href||w.target.isContentEditable)&&!ja.has(w.target))return;w.preventDefault(),w.stopPropagation(),Qt?Li():c(w);break}case"ArrowDown":case"ArrowRight":{if(!Qt)return;w.preventDefault(),w.stopPropagation();var T=mt.get(e),_=T.items,E=Array.from(e.children),O=E.indexOf(w.currentTarget);O<E.length-1&&(i.autoAriaDisabled||Vr("Moved item ".concat(Zn," to position ").concat(O+2," in the list ").concat(kr)),o(_,O,O+1),Jr(e,_,{trigger:Pt.DROPPED_INTO_ZONE,id:_n,source:jt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Qt)return;w.preventDefault(),w.stopPropagation();var L=mt.get(e),D=L.items,A=Array.from(e.children),H=A.indexOf(w.currentTarget);H>0&&(i.autoAriaDisabled||Vr("Moved item ".concat(Zn," to position ").concat(H," in the list ").concat(kr)),o(D,H,H-1),Jr(e,D,{trigger:Pt.DROPPED_INTO_ZONE,id:_n,source:jt.KEYBOARD}));break}}}function c(w){p(w.currentTarget),Tt=e,gs=i.type,Qt=!0;var T=Array.from(on.get(i.type)).filter(function(E){return E===Tt||!mt.get(E).dropFromOthersDisabled});if(wa(T,function(E){return mt.get(E).dropTargetStyle},function(E){return mt.get(E).dropTargetClasses}),!i.autoAriaDisabled){var _="Started dragging item ".concat(Zn,". Use the arrow keys to move it within its list ").concat(kr);T.length>1&&(_+=", or tab to another list in order to move the item into it"),Vr(_)}ir(e,mt.get(e).items,{trigger:Pt.DRAG_STARTED,id:_n,source:jt.KEYBOARD}),yc()}function d(w){Qt&&w.currentTarget!==_r&&(w.stopPropagation(),Li(!1),c(w))}function p(w){var T=mt.get(e),_=T.items,E=Array.from(e.children),O=E.indexOf(w);_r=w,_r.tabIndex=i.zoneItemTabIndex,_n=_[O][ot],Zn=E[O].getAttribute("aria-label")||""}function h(w){var T=w.items,_=T===void 0?[]:T,E=w.type,O=E===void 0?Hh:E,L=w.dragDisabled,D=L===void 0?!1:L,A=w.zoneTabIndex,H=A===void 0?0:A,F=w.zoneItemTabIndex,N=F===void 0?0:F,W=w.dropFromOthersDisabled,X=W===void 0?!1:W,oe=w.dropTargetStyle,re=oe===void 0?Qu:oe,se=w.dropTargetClasses,de=se===void 0?[]:se,ie=w.autoAriaDisabled,ge=ie===void 0?!1:ie;i.items=en(_),i.dragDisabled=D,i.dropFromOthersDisabled=X,i.zoneTabIndex=H,i.zoneItemTabIndex=N,i.dropTargetStyle=re,i.dropTargetClasses=de,i.autoAriaDisabled=ge,i.type&&O!==i.type&&$u(e,i.type),i.type=O,Uh(e,O),ge||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",D?za.DND_ZONE_DRAG_DISABLED:za.DND_ZONE_ACTIVE)),mt.set(e,i),Qt?e.tabIndex=e===Tt||_r.contains(e)||i.dropFromOthersDisabled||Tt&&i.type!==mt.get(Tt).type?-1:0:e.tabIndex=i.zoneTabIndex,e.addEventListener("focus",Vh);for(var je=function(at){var Ae=e.children[at];ja.add(Ae),Ae.tabIndex=Qt?-1:i.zoneItemTabIndex,ge||Ae.setAttribute("role","listitem"),Ae.removeEventListener("keydown",Xu.get(Ae)),Ae.removeEventListener("click",Ju.get(Ae)),D||(Ae.addEventListener("keydown",u),Xu.set(Ae,u),Ae.addEventListener("click",d),Ju.set(Ae,d)),Qt&&i.items[at][ot]===_n&&(_r=Ae,_r.tabIndex=i.zoneItemTabIndex,Ae.focus())},Ke=0;Ke<e.children.length;Ke++)je(Ke)}h(t);var b={update:function(T){h(T)},destroy:function(){$u(e,i.type),mt.delete(e),_s.delete(e)}};return _s.set(e,b),b}var Gh=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function gc(e,t){if(Yh(e))return{update:function(){},destroy:function(){}};el(t);var i=Kh(e,t),o=Wh(e,t);return{update:function(c){el(c),i.update(c),o.update(c)},destroy:function(){i.destroy(),o.destroy()}}}function Yh(e){return!!e.closest("[".concat($v,'="true"]'))}function el(e){var t=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var i=e.zoneTabIndex,o=e.zoneItemTabIndex;e.dropTargetStyle;var u=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var c=e.delayTouchStart;e.dropAnimationDisabled;var d=Fv(e,Gh);if(Object.keys(d).length>0&&console.warn("dndzone will ignore unknown options",d),!t)throw new Error("no 'items' key provided to dndzone");var p=t.find(function(w){return!{}.hasOwnProperty.call(w,ot)});if(p)throw new Error("missing '".concat(ot,"' property for item ").concat(gi(p)));if(u&&!Array.isArray(u))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(jr(u),", ").concat(gi(u)));if(i&&!tl(i))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(jr(i),", ").concat(gi(i)));if(o&&!tl(o))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(jr(o),", ").concat(gi(o)));if(c!==void 0&&c!==!1){var h=c===!0,b=typeof c=="number"&&isFinite(c)&&c>=0;if(!h&&!b)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(jr(c),", ").concat(gi(c)))}}function tl(e){return!isNaN(e)&&(function(t){return(t|0)===t})(parseFloat(e))}const we=new Pa("TaskPlannerDB");we.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});we.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.toCollection().modify(t=>{t.status="unchecked"}));we.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.tasks.where("status").equals("archived").modify(t=>{t.archivedAt=Date.now()}));we.version(4).stores({lists:"++id, name, order, archivedAt",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify(t=>{t.archivedAt===void 0&&(t.archivedAt=null)}));we.version(5).stores({lists:"++id, name, order, archivedAt, columnIndex",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(e=>e.lists.toCollection().modify((t,i)=>{t.columnIndex===void 0&&(t.columnIndex=t.order%5)}));function so(e){return e.length===0?0:Math.max(...e.map(i=>i.order))+1}async function qh(){return(await we.lists.orderBy("order").toArray()).filter(t=>t.archivedAt==null)}async function Zh(){return await we.lists.orderBy("order").toArray()}async function Qh(e,t=null){if(e==null)throw new Error("List name cannot be null or undefined");const i=e.trim();if(i==="")throw new Error("List name cannot be empty or whitespace-only");const o=await we.lists.orderBy("order").toArray(),u=so(o),c=5;let d;return t!==null&&t>=0&&t<c?d=t:d=u%c,await we.lists.add({name:i,order:u,archivedAt:null,columnIndex:d})}async function Xh(e=null){const t=await we.lists.orderBy("order").toArray(),i=so(t),o=5;let u;return e!==null&&e>=0&&e<o?u=e:u=i%o,await we.lists.add({name:null,order:i,archivedAt:null,columnIndex:u})}async function Jh(e,t){const i=t.trim();if(i==="")throw new Error("List name cannot be empty");return await we.lists.update(e,{name:i})}async function Jo(e){return await we.tasks.where("listId").equals(e).filter(t=>t.status!=="archived").sortBy("order")}async function $h(){return(await we.tasks.where("status").equals("archived").toArray()).sort((t,i)=>{const o=t.archivedAt||0,u=i.archivedAt||0;return u!==o?u-o:(i.order||0)-(t.order||0)})}async function ep(e,t,i=null){let o=e;e===null&&(o=await Xh(i));const u=await we.tasks.where("listId").equals(o).filter(h=>h.status!=="archived").sortBy("order"),c=so(u),d=t===""?"":t.trim();return await we.tasks.add({text:d,listId:o,order:c,status:"unchecked"})}async function tp(e,t){const i=t===""?"":t.trim();return await we.tasks.update(e,{text:i})}async function nl(e,t){if(!["unchecked","checked","archived"].includes(t))throw new Error(`Invalid status: ${t}`);const i={status:t};return t==="archived"?i.archivedAt=Date.now():t!=="archived"&&(i.archivedAt=null),await we.tasks.update(e,i)}async function np(e){const t=await we.tasks.get(e);if(!t)throw new Error(`Task ${e} not found`);const i=await we.lists.get(t.listId);if(!i)throw new Error(`Task's list ${t.listId} not found`);let o=!1;i.archivedAt!=null&&(await ip(t.listId),o=!0);const u=await we.tasks.where("listId").equals(t.listId).filter(p=>p.status!=="archived"&&p.id!==e).sortBy("order"),c=so(u);return{taskUpdated:await we.tasks.update(e,{status:"checked",order:c}),listRestored:o}}async function $o(e,t){if(!t||t.length===0)return;const i=t.map(p=>p.id),u=(await we.tasks.bulkGet(i)).filter(p=>p!==void 0);if(u.length===0)return;const c=u.filter(p=>p.listId!==e),d=new Set(c.map(p=>p.listId));await we.transaction("rw",we.tasks,async()=>{for(let p=0;p<t.length;p++){const h=t[p].id,b=u.find(T=>T.id===h);if(!b)continue;const w={order:p};b.listId!==e&&(w.listId=e),await we.tasks.update(h,w)}for(const p of d){const h=await we.tasks.where("listId").equals(p).filter(b=>b.status!=="archived").sortBy("order");for(let b=0;b<h.length;b++)await we.tasks.update(h[b].id,{order:b})}})}async function rp(e){const t=Date.now();return await we.lists.update(e,{archivedAt:t})}async function ip(e){return await we.lists.update(e,{archivedAt:null})}async function ap(e){const t=Date.now(),i=await we.tasks.where("listId").equals(e).filter(u=>u.status==="unchecked"||u.status==="checked").toArray(),o=i.map(u=>we.tasks.update(u.id,{status:"archived",archivedAt:t}));return await Promise.all(o),i.length}async function rl(e,t){if(!t||t.length===0)return;if(e<0||e>=5)throw new Error(`Invalid column index: ${e}`);const i=t.map(p=>p.id),o=await we.lists.bulkGet(i);if(o.filter(p=>!p).length>0)throw new Error("Cannot update order: some lists do not exist");const c=o.filter(p=>p!==void 0),d=c.filter(p=>(p.columnIndex??0)!==e);new Set(d.map(p=>p.columnIndex??0)),await we.transaction("rw",we.lists,async()=>{const p=new Set;for(let _=0;_<t.length;_++){const E=t[_].id,O=c.find(A=>A.id===E);if(!O)continue;const L={order:_},D=O.columnIndex??0;D!==e&&(L.columnIndex=e,p.add(D)),await we.lists.update(E,L)}const b=(await we.lists.orderBy("order").toArray()).filter(_=>_.archivedAt==null),w=Array(5).fill(null).map(()=>[]);for(const _ of b){const E=_.columnIndex??0,O=E>=5?4:E;w[O].push(_)}const T=new Set([e,...p]);for(const _ of T){const E=w[_];E.sort((O,L)=>(O.order??0)-(L.order??0));for(let O=0;O<E.length;O++)await we.lists.update(E[O].id,{order:O})}})}function bs(e){return e&&(e.isDndShadowItem===!0||typeof e.id=="string"&&e.id.startsWith("id:dnd-shadow-placeholder-"))}function op(e,t=5){if(!e||e.length===0)return Array(t).fill(null).map(()=>[]);const i=Array(t).fill(null).map(()=>[]),o=t-1;for(const u of e){let c=u.columnIndex??0;c>=t&&(c=o),i[c].push(u)}for(let u=0;u<i.length;u++)i[u].sort((c,d)=>(c.order??0)-(d.order??0));return i}function sp(e,t){if(!e||e.length===0)return null;for(let i=0;i<e.length;i++){const o=e[i];if(!Array.isArray(o))continue;const u=o.findIndex(c=>c.id===t);if(u!==-1)return{columnIndex:i,index:u}}return null}function up(e,t,i,o){const{columnIndex:u,index:c}=e;let d=u,p=c;if(t==="up"){if(c===0)return null;p=c-1}else if(t==="down"){const h=i[u]||[];if(c===h.length-1)return null;p=c+1}else if(t==="left"){if(u===0)return null;d=u-1,p=(i[d]||[]).length}else if(t==="right"){if(u===o-1)return null;d=u+1,p=(i[d]||[]).length}else return null;return{targetColumnIndex:d,targetIndex:p}}function lp(e,t,i,o){const u=sp(e,t);if(!u)return null;const{columnIndex:c,index:d}=u,p=up(u,i,e,o);if(!p)return null;const{targetColumnIndex:h,targetIndex:b}=p,w=e.map(D=>Array.isArray(D)?[...D]:[]),T=w[c];if(!T||T.length===0)return null;const[_]=T.splice(d,1);if(!_)return null;const E=w[h];if(!E)return null;const O=Math.min(Math.max(b,0),E.length);i==="left"||i==="right"?E.splice(O,0,{..._,columnIndex:h}):E.splice(O,0,_);const L=[];for(let D=0;D<w.length;D++){const A=w[D]||[];for(let H=0;H<A.length;H++){const F=A[H];L.push({...F,columnIndex:D,order:H})}}return{newColumns:w,updatedDraggableLists:L,targetColumnIndex:h,targetColumnItems:(w[h]||[]).map(D=>({id:D.id}))}}function cp(e,t,i){const o=i.filter(u=>(u.columnIndex??0)!==t);for(let u=0;u<e.length;u++){const c=e[u],d=i.find(h=>h.id===c.id),p=d?{...d,...c,columnIndex:t,order:u}:{...c,columnIndex:t,order:u};o.push(p)}return o}function fp(e,t,i,o){let u=!1;for(const b of e){const w=(i||[]).find(T=>T.id===b.id);if(w)(w.columnIndex??0)!==t&&(u=!0);else{const T=o.find(_=>_.id===b.id);T&&(T.columnIndex??0)!==t&&(u=!0)}}const d=(i||[]).filter(b=>(b.columnIndex??0)===t).length;return e.length<d&&!u||e.length===0&&!u&&d>0}const Ha=160,dp=150,ws=1056,vp=816,Ua=16,hp=25,pp=10,es=20,ya=10,mp=40,il=200,Es=10,yp=20;async function gp(e,t={}){const{maxAttempts:i=hp,retryInterval:o=pp,waitForTick:u=!0}=t;if(typeof document>"u")return null;u&&await Sn();for(let c=0;c<i;c++){const d=e();if(d&&d instanceof HTMLElement)return d.focus(),d;c<i-1&&await new Promise(p=>setTimeout(p,o))}return null}async function _c(e){if(typeof document>"u")return null;await Sn();const t=Array.from(document.querySelectorAll(`[data-id="${e}"]`));let i=t.find(o=>o instanceof HTMLElement&&o.getAttribute("role")==="group");return i||(i=t.find(o=>o instanceof HTMLElement&&o.tagName==="DIV")),i instanceof HTMLElement?(i.focus(),i):null}function _p(e,t,i){if(!e)return null;const o=e.querySelector(t);if(o){const u=o.querySelector(i);if(u&&u instanceof HTMLElement)return u}return null}function bp(e,t,i,o){const{getKeyboardListDrag:u,getLastKeyboardDraggedListId:c,getShouldRefocusListOnNextTab:d,setShouldRefocusListOnNextTab:p}=e;function h(b){const w=b.key,T=u(),_=T.active===!0,E=T.listId,O=c(),L=d();if(!_&&w==="Tab"&&L&&O!=null){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),p(!1),_c(O);return}if(!(!_||E==null)){if(w==="ArrowUp"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),t(E,"up");return}if(w==="ArrowDown"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),t(E,"down");return}if(w==="ArrowLeft"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),t(E,"left");return}if(w==="ArrowRight"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),t(E,"right");return}if(w==="Escape"||w==="Enter"||w===" "){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),i(),o();return}if(w==="Tab"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),i(),o();return}}}return document.addEventListener("keydown",h,!0),()=>{document.removeEventListener("keydown",h,!0)}}function wp(e){return e===""}function Ep(e){return e.trim()===""&&e.length>0}function bc(e){const t=e.trim(),i=Ep(e);return{text:i?"":t,isBlank:i}}function wc(e,t,i={}){const{ignoreElements:o=[],shouldClose:u=()=>!0,checkIgnoreClick:c=null}=i;function d(h){const b=typeof e=="function"?e():e;if(b&&!b.contains(h.target)&&!(c&&c(h))){for(const w of o){let T=null;if(typeof w=="function"?T=w():T=w,T&&T.contains(h.target))return}u()&&t()}}const p=setTimeout(()=>{document.addEventListener("click",d)},0);return()=>{clearTimeout(p),document.removeEventListener("click",d)}}function xp(e){const{getColumnIndex:t,setColumnIndex:i,getInput:o,setInput:u,getInputElement:c}=e;function d(E){i(E)}function p(E,O){if(E.key==="Enter"||E.key===" ")E.preventDefault(),E.stopPropagation(),d(O);else if(E.key==="Escape"){E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation();const L=E.currentTarget;L&&L instanceof HTMLElement&&L.blur()}}function h(E,O,L){if(E.key==="Escape"){const D=o()||"";if(L){i(null),u("");return}if(D.trim().length>0){b(O,!0);return}i(null),u("")}}async function b(E,O=!1){const L=o()||"";if(L===""||L.trim()===""){i(null),u("");return}const{text:D}=bc(L);try{if(await Qh(D||null,E),u(""),O)i(null);else{await Sn();const A=c();A&&setTimeout(()=>{A.focus()},0)}}catch(A){console.error("Error creating list:",A)}}async function w(E){await b(E,!0)}function T(){if(t()!==null)return wc(c(),()=>{t()!==null&&(i(null),u(""))},{ignoreElements:[],shouldClose:()=>!o()||o().trim()===""})}function _(){const E=t(),O=c();if(E===null||!O)return;const L=setTimeout(()=>{O?.focus()},0);return()=>{clearTimeout(L)}}return{handleCreateListClick:d,handleCreateListKeydown:p,handleCreateListInputEscape:h,handleCreateList:b,handleCreateListOnTab:w,setupClickOutsideEffect:T,setupFocusEffect:_}}var Tp=ke("<button><!></button>");function bn(e,t){let i=Lt(t,"variant",3,"primary"),o=Lt(t,"size",3,"medium"),u=Lt(t,"disabled",3,!1),c=Lt(t,"type",3,"button"),d=Ov(t,["$$slots","$$events","$$legacy","variant","size","disabled","type","onclick","ariaLabel"]);const p="focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed",h={primary:"bg-grey-80 text-grey-110 hover:bg-grey-90 focus:bg-grey-90 disabled:bg-grey-50 disabled:text-grey-100",secondary:"bg-white text-grey-110 hover:bg-grey-20 focus:bg-grey-30 disabled:bg-white disabled:text-grey-60"},b={small:"px-2 py-1 text-sm",medium:"px-4 py-2",large:"px-6 py-3"},w=`${p} ${h[i()]} ${b[o()]}`;var T=Tp();Av(T,()=>({type:c(),disabled:u(),onclick:t.onclick,ariaLabel:t.ariaLabel,class:w,...d}));var _=_e(T);mv(_,t,"default",{}),fe(e,T)}var kp=ke('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">Task cannot be empty. Consider archiving this task instead.</div>'),Ap=ke('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-1s5l7w2"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border-2 border-gray-300 fixed" role="document"><h3 id="modal-title" class="text-lg font-semibold mb-4">Edit Task</h3> <div class="mb-4"><textarea class="task-input flex-none break-words resize-none min-h-[2.5rem] max-h-[10rem] overflow-y-auto px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-1s5l7w2" placeholder="Task text..." aria-label="Edit task text" rows="1"></textarea> <!></div> <div class="flex justify-between items-center"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline" aria-label="Archive this task instead of saving">Archive instead</button> <div class="flex gap-3"><!> <!></div></div></div></div>');function Ip(e,t){ar(t,!0);let i=me($t(t.taskText||"")),o=me(!1),u=me(null),c=me(null),d=tt(()=>()=>{if(!t.taskPosition||!t.isOpen)return"background-color: white; z-index: 10000;";const L=24,D=24,A=Ua,F=L+D+A+8-8,N=10,W=t.taskPosition.top-F,X=t.taskPosition.left-Ua+N,oe=t.taskPosition.width+48;return`background-color: white; z-index: 10000; top: ${W}px; left: ${X}px; width: ${oe}px;`});Ye(()=>{t.isOpen&&(M(i,t.taskText||"",!0),M(o,!1))}),Ye(()=>{t.isOpen&&m(u)&&setTimeout(()=>{m(u)?.focus(),m(u)?.select(),m(u)instanceof HTMLTextAreaElement&&(m(u).style.height="auto",m(u).style.height=`${Math.min(m(u).scrollHeight,Ha)}px`)},0)}),Ye(()=>{if(m(u)&&m(u)instanceof HTMLTextAreaElement){const L=()=>{m(u).style.height="auto",m(u).style.height=`${Math.min(m(u).scrollHeight,Ha)}px`};return m(u).addEventListener("input",L),()=>{m(u).removeEventListener("input",L)}}});function p(){const L=m(i)??"",D=L.trim();if(D===""&&L.length>0){t.onSave(t.taskId,""),M(o,!1);return}if(L===""||D===""){M(o,!0);return}t.onSave(t.taskId,D),M(o,!1)}function h(){M(i,t.taskText||"",!0),M(o,!1),t.onCancel()}function b(L){L.target===L.currentTarget&&h()}function w(L){if(L.key==="Tab"){if(!m(c))return;const D=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),A=Array.from(m(c).querySelectorAll(D)).filter(X=>!(!(X instanceof HTMLElement)||X.hasAttribute("disabled")||X.getAttribute("aria-hidden")==="true"));if(A.length===0)return;const H=document.activeElement,F=A.indexOf(H);let N;L.shiftKey?F<=0?N=A.length-1:N=F-1:F===-1||F===A.length-1?N=0:N=F+1,L.preventDefault(),L.stopPropagation();const W=A[N];W&&W instanceof HTMLElement&&W.focus()}else L.key==="Escape"?h():L.key==="Enter"&&!L.shiftKey&&document.activeElement===m(u)&&(L.preventDefault(),p())}function T(){t.onArchive&&t.onArchive(t.taskId)}var _=$n(),E=kt(_);{var O=L=>{var D=Ap();D.__click=b,D.__keydown=w;var A=_e(D);A.__click=ie=>ie.stopPropagation();var H=Me(_e(A),2),F=_e(H);Wt(F,ie=>M(u,ie),()=>m(u));var N=Me(F,2);{var W=ie=>{var ge=kp();fe(ie,ge)};nt(N,ie=>{m(o)&&ie(W)})}var X=Me(H,2),oe=_e(X);oe.__click=T;var re=Me(oe,2),se=_e(re);bn(se,{variant:"secondary",onclick:h,"aria-label":"Cancel editing and discard changes",children:(ie,ge)=>{var je=gn("Cancel");fe(ie,je)},$$slots:{default:!0}});var de=Me(se,2);{let ie=tt(()=>m(o)?"Save disabled: task cannot be empty":"Save task changes");bn(de,{variant:"primary",onclick:p,get disabled(){return m(o)},get"aria-label"(){return m(ie)},children:(ge,je)=>{var Ke=gn("Save");fe(ge,Ke)},$$slots:{default:!0}})}Wt(A,ie=>M(c,ie),()=>m(c)),ct(ie=>{rr(A,ie),rr(F,`width: ${dp}px;`),At(F,"aria-describedby",m(o)?"validation-message":void 0)},[()=>m(d)()]),Fs(F,()=>m(i),ie=>M(i,ie)),fe(L,D)};nt(E,L=>{t.isOpen&&L(O)})}fe(e,_),or()}ni(["click","keydown"]);var Dp=ke('<div id="validation-message" class="mt-2 text-sm text-red-600" role="alert">List name cannot be empty.</div>'),Sp=ke('<h3 id="modal-title" class="text-lg font-semibold mb-4">Rename List</h3> <div class="mb-4"><input type="text" class="list-input w-full px-2 py-2 border border-grey-50 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 box-border font-gilda text-[24px] text-grey-110 svelte-8e0jqh" style="max-width: 100%; box-sizing: border-box; padding-left: 7px; padding-right: 7px; padding-top: 7px; padding-bottom: 7px;" placeholder="List name..." aria-label="Edit list name"/> <!></div> <div class="flex justify-between items-center"><!> <div class="flex justify-end gap-3"><!> <!></div></div>',1),Op=ke('<h3 id="modal-title" class="text-lg font-semibold mb-4">Archive List</h3> <p class="mb-6 text-sm text-grey-100">Archive this list? This will archive all tasks in the list.</p> <div class="flex justify-end gap-3"><!> <!></div>',1),Cp=ke('<div role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" class="modal-backdrop svelte-8e0jqh"><div class="bg-grey-10 text-grey-110 p-6 rounded-xl shadow-2xl border-2 border-grey-50 fixed box-border" role="document"><!></div></div>');function Lp(e,t){ar(t,!0);let i=me($t(t.listName||"")),o=me(!1),u=me(null),c=me(null),d=me("edit"),p=tt(()=>()=>{if(!t.listPosition||!t.isOpen)return"background-color: white; z-index: 10000;";const H=24,F=24,N=Ua,oe=H+F+N+1+7-8,re=t.listPosition.top-oe,se=t.listPosition.left-Ua,de=Math.max(t.listPosition.width+24,250);return`background-color: white; z-index: 10000; top: ${re}px; left: ${se}px; width: ${de}px; max-width: ${de}px; box-sizing: border-box;`});Ye(()=>{t.isOpen&&(M(i,t.listName||"",!0),M(o,!1),M(d,"edit"))}),Ye(()=>{t.isOpen&&m(u)&&setTimeout(()=>{m(u)?.focus(),m(u)?.select()},0)});function h(){const F=(m(i)??"").trim();if(F===""){M(o,!0);return}t.onSave(t.listId,F),M(o,!1)}function b(){M(i,t.listName||"",!0),M(o,!1),t.onCancel()}function w(H){H.target===H.currentTarget&&b()}function T(H){if(H.key==="Tab"){if(!m(c))return;const F=["button","[href]","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(","),N=Array.from(m(c).querySelectorAll(F)).filter(se=>!(!(se instanceof HTMLElement)||se.hasAttribute("disabled")||se.getAttribute("aria-hidden")==="true"));if(N.length===0)return;const W=document.activeElement,X=N.indexOf(W);let oe;H.shiftKey?X<=0?oe=N.length-1:oe=X-1:X===-1||X===N.length-1?oe=0:oe=X+1,H.preventDefault(),H.stopPropagation();const re=N[oe];re&&re instanceof HTMLElement&&re.focus()}else H.key==="Escape"?m(d)==="confirm-archive"?O():b():H.key==="Enter"&&!H.shiftKey&&m(d)==="edit"&&H.target===m(u)&&(H.preventDefault(),h())}function _(){M(d,"confirm-archive")}function E(){t.onArchive(t.listId),b()}function O(){M(d,"edit")}var L=$n(),D=kt(L);{var A=H=>{var F=Cp();F.__click=w,F.__keydown=T;var N=_e(F);N.__click=re=>re.stopPropagation();var W=_e(N);{var X=re=>{var se=Sp(),de=Me(kt(se),2),ie=_e(de);Wt(ie,Ie=>M(u,Ie),()=>m(u));var ge=Me(ie,2);{var je=Ie=>{var ze=Dp();fe(Ie,ze)};nt(ge,Ie=>{m(o)&&Ie(je)})}var Ke=Me(de,2),Ze=_e(Ke);bn(Ze,{variant:"secondary",onclick:_,"aria-label":"Archive this list",children:(Ie,ze)=>{var te=gn("Archive");fe(Ie,te)},$$slots:{default:!0}});var at=Me(Ze,2),Ae=_e(at);bn(Ae,{variant:"secondary",onclick:b,"aria-label":"Cancel editing and discard changes",children:(Ie,ze)=>{var te=gn("Cancel");fe(Ie,te)},$$slots:{default:!0}});var bt=Me(Ae,2);{let Ie=tt(()=>m(o)?"Save disabled: list name cannot be empty":"Save list name changes");bn(bt,{variant:"primary",onclick:h,get disabled(){return m(o)},get"aria-label"(){return m(Ie)},children:(ze,te)=>{var ye=gn("Save");fe(ze,ye)},$$slots:{default:!0}})}ct(()=>At(ie,"aria-describedby",m(o)?"validation-message":void 0)),Fs(ie,()=>m(i),Ie=>M(i,Ie)),fe(re,se)},oe=re=>{var se=$n(),de=kt(se);{var ie=ge=>{var je=Op(),Ke=Me(kt(je),4),Ze=_e(Ke);bn(Ze,{variant:"secondary",onclick:O,"aria-label":"Cancel archiving",children:(Ae,bt)=>{var Ie=gn("Cancel");fe(Ae,Ie)},$$slots:{default:!0}});var at=Me(Ze,2);bn(at,{variant:"primary",onclick:E,"aria-label":"Confirm archive list",children:(Ae,bt)=>{var Ie=gn("Archive");fe(Ae,Ie)},$$slots:{default:!0}}),fe(ge,je)};nt(de,ge=>{m(d)==="confirm-archive"&&ge(ie)},!0)}fe(re,se)};nt(W,re=>{m(d)==="edit"?re(X):re(oe,!1)})}Wt(N,re=>M(c,re),()=>m(c)),ct(re=>rr(N,re),[()=>m(p)()]),fe(H,F)};nt(D,H=>{t.isOpen&&H(A)})}fe(e,L),or()}ni(["click","keydown"]);var Pp=ke('<input type="checkbox" disabled class="cursor-pointer" aria-hidden="true" tabindex="-1"/> <textarea class="flex-1 break-words resize-none max-h-[10rem] overflow-y-auto text-body font-urbanist text-grey-100 placeholder:italic" rows="1" style="height: 24px;"></textarea>',1),Rp=ke('<input type="checkbox" disabled class="cursor-pointer opacity-0" aria-hidden="true" tabindex="-1"/> <span class="cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-60" role="button" tabindex="0"> </span>',1),Mp=ke('<div class="flex items-center gap-2 py-1 border-b border-grey-50 hover:bg-grey-20 w-full print:hidden add-task-container add-task-button svelte-jtbpvm"><!></div>');function ts(e,t){ar(t,!0);let i=Lt(t,"isInputActive",11,!1),o=Lt(t,"inputValue",3,""),u=Lt(t,"buttonText",3,"Add Task"),c=Lt(t,"placeholder",3,"start typing..."),d=Lt(t,"marginLeft",3,!1),p=Lt(t,"containerElement",15,null),h=Lt(t,"textareaElement",15,null),b=me(null),w=me(null);Ye(()=>{p(m(w)),h(m(b))}),Ye(()=>{i()&&m(b)?setTimeout(()=>{if(m(b)?.focus(),m(b)instanceof HTMLTextAreaElement){m(b).style.height="auto";const A=m(b).scrollHeight;m(b).style.height=`${Math.max(24,Math.min(A,Ha))}px`}},0):!i()&&m(b)&&m(b)instanceof HTMLTextAreaElement&&(m(b).style.height="24px")}),Ye(()=>{if(m(b)&&m(b)instanceof HTMLTextAreaElement){const A=()=>{m(b).style.height="auto";const H=m(b).scrollHeight;m(b).style.height=`${Math.max(24,Math.min(H,Ha))}px`};return m(b).addEventListener("input",A),()=>{m(b).removeEventListener("input",A)}}});function T(A){A.key==="Enter"&&!A.shiftKey?(A.preventDefault(),t.onSave?.()):A.key==="Escape"?(A.preventDefault(),t.onEscape?.(A,o())):A.key==="Tab"&&t.onSave?.({closeAfterSave:!0})}function _(A){if(A.key==="Enter"||A.key===" ")A.preventDefault(),t.onActivate?.();else if(A.key==="Escape"){A.preventDefault(),A.stopPropagation(),A.stopImmediatePropagation();const H=A.currentTarget;H&&H instanceof HTMLElement&&H.blur()}}var E=Mp(),O=_e(E);{var L=A=>{var H=Pp(),F=Me(kt(H),2);F.__input=N=>t.onInputChange?.(N.currentTarget.value),F.__keydown=T,Wt(F,N=>M(b,N),()=>m(b)),ct(()=>{At(F,"placeholder",c()),Ev(F,o())}),fe(A,H)},D=A=>{var H=Rp(),F=Me(kt(H),2);F.__click=function(...W){t.onActivate?.apply(this,W)},F.__keydown=_;var N=_e(F);ct(()=>{At(F,"aria-label",t.ariaLabel||u()),Er(N,u())}),fe(A,H)};nt(O,A=>{i()?A(L):A(D,!1)})}Wt(E,A=>M(w,A),()=>m(w)),ct(()=>rr(E,d()?"margin-left: 1.5rem;":"")),fe(e,E),or()}ni(["input","keydown","click"]);function al(){let e=me(!1),t=me(null),i=me(null);function o(h){if(h&&h instanceof HTMLElement){const b=h.getBoundingClientRect();M(t,{top:b.top,left:b.left,width:b.width,height:b.height},!0),M(i,h,!0)}M(e,!0)}function u(){const h=m(i);M(e,!1),M(t,null),M(i,null),h&&h instanceof HTMLElement&&setTimeout(()=>{h.focus()},0)}function c(){M(e,!1),M(t,null),M(i,null)}function d(h){const b=h?.currentTarget||h?.target;o(b)}function p(h,b={}){const w=h.key;if(w==="Enter"||w===" "){h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation();const T=h.currentTarget;T&&o(T)}else if(w==="Escape")if(h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation(),b.onEscape)b.onEscape(h);else{const T=h.currentTarget;T&&T instanceof HTMLElement&&T.blur()}}return{get isOpen(){return m(e)},get position(){return m(t)},get element(){return m(i)},openModal:o,closeModal:u,closeModalWithoutFocus:c,handleClick:d,handleKeydown:p}}var Np=ke('<li class="flex items-center gap-2 py-1 border-b border-grey-50 cursor-move hover:bg-grey-20 w-full m-0 list-none"><input type="checkbox" class="cursor-pointer"/> <span role="button" tabindex="0" contenteditable="false" data-no-drag="true"> </span> <!></li>'),Kp=ke('<div class="-mt-6"><!></div>'),Fp=ke('<div class="task-list-wrapper m-0 p-0"><ul></ul> <!></div>'),Bp=ke("<p>Loading tasks...</p> <!>",1),jp=ke('<div class="flex flex-col mb-6 w-full"><div class="border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border"><div class="flex items-center transition-colors hover:bg-grey-20 hover:rounded py-1"><h2 role="button" tabindex="0" class="list-title cursor-pointer m-0 px-2 py-2 leading-none text-grey-110 font-gilda text-[24px] rounded -my-1 transition-colors flex-1 min-w-0 focus:outline-none"> </h2></div></div> <!></div> <!> <!>',1);function zp(e,t){ar(t,!0);const i=()=>Ca(m(p),"$tasksQuery",o),[o,u]=Bs();let c=Lt(t,"allLists",19,()=>[]),d=Lt(t,"stableLists",19,()=>[]),p=me(null),h=me($t([])),b=me(!1);const w=al(),T=al();let _=me(null),E=me(""),O=me(null),L=me(null),D=me(null),A=me(null),H=me(null),F=me(null),N=me(!1),W=me(!1),X=me(null),oe=me(null);function re(q){return Array.isArray(q)?[...q].sort((U,G)=>{const ne=U?.columnIndex??0,Le=G?.columnIndex??0;if(ne!==Le)return ne-Le;const rt=U?.order??0,xe=G?.order??0;if(rt!==xe)return rt-xe;const he=U?.id??0,Qe=G?.id??0;return he-Qe}):[]}function se(q,U,G){const ne=re(U);if(!ne.length)return null;const Le=ne.findIndex(rt=>rt.id===q);return Le===-1?null:G==="next"?Le>=ne.length-1?null:ne[Le+1].id:G==="prev"?Le<=0?null:ne[Le-1].id:null}Ye(()=>{d().some(U=>U.id===t.listId)&&t.listId?(!m(p)||m(oe)!==t.listId)&&(m(oe)!==t.listId&&M(h,[],!0),La(M(p,Ra(()=>Jo(t.listId)),!0),"$tasksQuery",o),M(oe,t.listId,!0)):(La(M(p,null),"$tasksQuery",o),M(oe,null),M(h,[],!0))}),Ye(()=>{i()&&Array.isArray(i())&&M(h,i().filter(q=>q.status==="unchecked"||q.status==="checked"),!0)});const de=tt(()=>t.listId&&(d().some(q=>q.id===t.listId)||c().some(q=>q.id===t.listId)));Ye(()=>{if(!m(L))return;function q(U){const G=U.target;if((U.key==="Enter"||U.key===" ")&&G instanceof HTMLElement&&G.tagName==="H2"&&G.hasAttribute("role")&&G.getAttribute("role")==="button"){const ne=m(L)?.querySelector('h2[role="button"]');ne&&G===ne&&(U.preventDefault(),U.stopImmediatePropagation(),T.openModal(G))}}return m(L).addEventListener("keydown",q,!0),()=>{m(L)&&m(L).removeEventListener("keydown",q,!0)}}),Ye(()=>{if(!m(D))return;function q(U){const G=U.target;if((U.key==="Enter"||U.key===" ")&&G instanceof HTMLElement&&G.hasAttribute("role")&&G.getAttribute("role")==="button"){const ne=m(D)?.querySelector('span[role="button"]');ne&&G===ne&&(U.preventDefault(),U.stopImmediatePropagation(),Ae())}}return m(D).addEventListener("keydown",q,!0),()=>{m(D)&&m(D).removeEventListener("keydown",q,!0)}}),Ye(()=>{if(!m(O))return;async function q(U){const G=U.target;if((U.key==="Enter"||U.key===" ")&&G instanceof HTMLElement&&G.hasAttribute("data-no-drag")){U.preventDefault(),U.stopImmediatePropagation();const ne=G.closest("li[data-id]");if(ne){const Le=parseInt(ne.getAttribute("data-id")),rt=m(h).find(xe=>xe.id===Le);rt&&(M(_,Le,!0),M(E,rt.text,!0),w.openModal(G))}return}if(U.key==="ArrowDown"||U.key==="ArrowUp"){const ne=document.activeElement;if(!ne)return;const Le=ne.closest("li[data-id]");if(!Le||!m(O).contains(Le))return;const rt=Le.getAttribute("data-id");if(!rt)return;const xe=parseInt(rt);if(!m(h).find(Te=>Te.id===xe))return;const Qe=m(h).findIndex(Te=>Te.id===xe),He=Qe===0,vt=Qe===m(h).length-1;if(U.key==="ArrowDown"&&vt){U.preventDefault(),U.stopImmediatePropagation();const Te=se(t.listId,c(),"next");Te!=null&&await ie(xe,Te)}else if(U.key==="ArrowUp"&&He){U.preventDefault(),U.stopImmediatePropagation();const Te=se(t.listId,c(),"prev");Te!=null&&await ge(xe,Te)}}}return m(O).addEventListener("keydown",q,!0),()=>{m(O).removeEventListener("keydown",q,!0)}});async function ie(q,U){try{const G=await Jo(U),ne=[{id:q},...G];await $o(U,ne)}catch(G){console.error("Error moving task to next list:",G)}}async function ge(q,U){try{const ne=[...await Jo(U),{id:q}];await $o(U,ne)}catch(G){console.error("Error moving task to previous list:",G)}}function je(q){M(h,q.detail.items.filter(U=>U&&typeof U.id=="number"),!0)}function Ke(q,U){const G=q.key,ne=q.currentTarget,Le=q.target;if(!(!(ne instanceof HTMLElement)||ne!==Le)){if(G==="Enter"||G===" ")m(W)?(M(W,!1),M(X,U,!0),M(F,ne,!0),M(N,!0)):(M(W,!0),M(X,U,!0));else if(G==="Escape"){const rt=typeof document<"u"?document.querySelectorAll('li[aria-grabbed="true"], li.svelte-dnd-action-dragged'):[];let xe=!1;if(m(O)&&m(O)instanceof HTMLElement){const He=window.getComputedStyle(m(O));He.boxShadow&&He.boxShadow!=="none"&&He.boxShadow.includes("inset")&&(xe=!0)}let he=0;if(typeof document<"u"){const He=document.querySelectorAll("ul");for(const vt of He)if(vt instanceof HTMLElement&&vt!==m(O)){const Te=window.getComputedStyle(vt);Te.boxShadow&&Te.boxShadow!=="none"&&Te.boxShadow.includes("inset")&&he++}}const Qe=rt.length>0||xe||he>0;m(W)||Qe?(M(W,!1),M(X,U,!0),M(F,ne,!0),M(N,!0)):(q.preventDefault(),q.stopPropagation(),q.stopImmediatePropagation(),M(F,ne,!0),M(N,!0),ne instanceof HTMLElement&&ne.blur())}}}function Ze(q,U){const G=q.currentTarget;m(W)&&m(X)===U&&(M(W,!1),M(F,G,!0),M(N,!0))}Ye(()=>{if(!m(O))return;async function q(U){const G=U.key;if(G==="Tab"){const Te=typeof document<"u"?document.querySelectorAll('li[aria-grabbed="true"], li.svelte-dnd-action-dragged'):[];let nn=!1;if(m(O)&&m(O)instanceof HTMLElement){const ht=window.getComputedStyle(m(O));ht.boxShadow&&ht.boxShadow!=="none"&&ht.boxShadow.includes("inset")&&(nn=!0)}let lr=0;if(typeof document<"u"){const ht=document.querySelectorAll("ul");for(const Xe of ht)if(Xe instanceof HTMLElement&&Xe!==m(O)){const rn=window.getComputedStyle(Xe);rn.boxShadow&&rn.boxShadow!=="none"&&rn.boxShadow.includes("inset")&&lr++}}if(Te.length>0||nn||lr>0||m(W)){if(U.preventDefault(),U.stopImmediatePropagation(),U.stopPropagation(),M(W,!1),typeof document<"u"&&document.activeElement){const Xe=document.activeElement.closest("li[data-id]");if(Xe&&Xe instanceof HTMLElement){const rn=Xe.getAttribute("data-id");if(rn){const ri=parseInt(rn);M(X,ri,!0),M(F,Xe,!0),M(N,!0)}}}if(m(O)&&m(O)instanceof HTMLElement){const ht=new KeyboardEvent("keydown",{key:"Escape",code:"Escape",keyCode:27,which:27,bubbles:!0,cancelable:!0,composed:!0});m(O).dispatchEvent(ht)}return}}if(G==="Tab"&&m(N)&&m(F)){if(U.preventDefault(),U.stopImmediatePropagation(),U.stopPropagation(),M(N,!1),typeof document<"u"){let Te=m(F);if((!(Te instanceof HTMLElement)||!document.contains(Te))&&m(D)){const nn=m(D).querySelector('span[role="button"]');nn&&nn instanceof HTMLElement&&(Te=nn)}Te&&Te instanceof HTMLElement&&Te.focus()}return}if(G!=="ArrowDown"&&G!=="ArrowUp")return;const ne=document.activeElement;if(!ne)return;const Le=ne.closest("li[data-id]");if(!Le||!m(O).contains(Le))return;const rt=Le.getAttribute("data-id");if(!rt)return;const xe=parseInt(rt);if(!m(h).find(Te=>Te.id===xe))return;const Qe=m(h).findIndex(Te=>Te.id===xe),He=Qe===0,vt=Qe===m(h).length-1;if(G==="ArrowDown"&&vt){U.preventDefault(),U.stopImmediatePropagation(),U.stopPropagation();const Te=se(t.listId,c(),"next");Te!=null&&await ie(xe,Te)}else if(G==="ArrowUp"&&He){U.preventDefault(),U.stopImmediatePropagation(),U.stopPropagation();const Te=se(t.listId,c(),"prev");Te!=null&&await ge(xe,Te)}}return document.addEventListener("keydown",q,!0),()=>{document.removeEventListener("keydown",q,!0)}});async function at(q){const U=q.detail.items.filter(G=>G&&typeof G.id=="number");M(h,U,!0);try{await $o(t.listId,U)}catch(G){console.error("Error updating task order:",G)}}function Ae(){M(b,!0)}async function bt(q,U=""){if(q.key==="Escape"){let G=U||"";if(m(A)?G=(m(A).value||"").toString():t.newTaskInput&&(G=(t.newTaskInput||"").toString()),G.length>0){await Ie({closeAfterSave:!0});return}if(M(N,!0),m(D)){const ne=m(D).querySelector('span[role="button"]');ne&&ne instanceof HTMLElement?M(F,ne,!0):M(F,null)}else M(F,null);M(b,!1),t.onInputChange(""),await Sn(),await Sn(),await new Promise(ne=>requestAnimationFrame(ne)),await new Promise(ne=>setTimeout(ne,il))}}Ye(()=>{if(m(b))return wc(()=>m(A),()=>{m(b)&&(M(b,!1),t.onInputChange(""))},{ignoreElements:[],shouldClose:()=>m(A)&&m(A).value.trim()!==""?!1:!t.newTaskInput||t.newTaskInput.trim()===""})});async function Ie(q={}){const U=q&&typeof q=="object"&&q.closeAfterSave===!0;let G=t.newTaskInput||"";if(m(A)&&(G=(m(A).value||"").toString()),G=(G||"").toString(),wp(G)){M(b,!1),t.onInputChange(""),await Sn(),await Sn(),await new Promise(Le=>requestAnimationFrame(Le)),await new Promise(Le=>setTimeout(Le,il));return}const{text:ne}=bc(G);try{const Le=await ep(t.listId,ne),xe=(m(h).length>0?Math.max(...m(h).map(Qe=>Qe.order||0)):-1)+1,he={id:Le,text:ne,listId:t.listId,order:xe,status:"unchecked"};M(h,[...m(h),he],!0),t.onInputChange(""),U&&M(b,!1)}catch(Le){console.error("Error creating task:",Le)}}async function ze(q,U){try{await nl(q,U==="unchecked"?"checked":"unchecked")}catch(G){console.error("Error updating task status:",G)}}async function te(q){await nl(q,"archived")}function ye(){return m(O)?_p(m(O),"li[data-id]",'span[role="button"]'):null}async function Re(q=es,U=ya){m(L)&&await gp(()=>{if(m(D)){const G=m(D).querySelector('span[role="button"]');if(G&&G instanceof HTMLElement)return G}return null},{maxAttempts:q,retryInterval:U,waitForTick:!1})}async function Ue(q){try{await te(q),m(_)===q&&(M(_,null),M(E,""),w.closeModalWithoutFocus(),await Sn(),await new Promise(U=>setTimeout(U,Es)),setTimeout(()=>{const U=(G=0)=>{const ne=ye();ne?ne.focus():G<es?setTimeout(()=>U(G+1),ya):Re(mp,ya)};U()},yp))}catch(U){console.error("Error archiving task:",U)}}function Ce(q,U,G){const ne=G?.currentTarget||G?.target;M(_,q,!0),M(E,U,!0),w.openModal(ne)}function Be(q,U,G){if(G.key==="Enter"||G.key===" ")M(_,q,!0),M(E,U,!0),w.handleKeydown(G);else if(G.key==="Escape"){G.preventDefault(),G.stopImmediatePropagation();const ne=G.currentTarget;ne&&ne instanceof HTMLElement&&(M(F,ne,!0),M(N,!0),ne.blur())}}async function ft(q,U){try{await tp(q,U),M(_,null),M(E,""),w.closeModal()}catch(G){console.error("Error updating task text:",G)}}function dt(){M(_,null),M(E,""),w.closeModal()}async function tn(q){await Ue(q),setTimeout(()=>{if(typeof document>"u")return;const U=document.activeElement;m(L)&&(!U||!m(L).contains(U))&&Re(es,ya)},Es)}function sr(q){T.handleClick(q)}function Ve(q){T.handleKeydown(q)}async function St(q,U){try{await Jh(q,U),T.closeModal()}catch(G){console.error("Error updating list name:",G)}}function ur(){T.closeModal()}async function Yt(q){try{await ap(q),await rp(q)}catch(U){console.error("Error archiving list:",U)}}var Ht=jp(),Rt=kt(Ht),Ot=_e(Rt),cn=_e(Ot),Kn=_e(cn);Kn.__click=sr,Kn.__keydown=Ve;var ue=_e(Kn);Wt(Ot,q=>M(H,q),()=>m(H));var Fn=Me(Ot,2);{var Cr=q=>{var U=Fp(),G=_e(U);zr(G,21,()=>m(h),xe=>xe.id,(xe,he)=>{var Qe=Np(),He=_e(Qe);He.__change=()=>ze(m(he).id,m(he).status),He.__keydown=We=>{if(We.key==="Enter"||We.key===" ")We.preventDefault(),We.stopPropagation(),ze(m(he).id,m(he).status);else if(We.key==="Escape"){We.preventDefault(),We.stopPropagation(),We.stopImmediatePropagation();const ht=We.currentTarget;if(ht&&ht instanceof HTMLElement){const Xe=ht.closest("li[data-id]");Xe&&Xe instanceof HTMLElement&&(M(F,Xe,!0),M(N,!0)),ht.blur()}}};var vt=Me(He,2);vt.__click=We=>Ce(m(he).id,m(he).text,We),vt.__keydown=We=>Be(m(he).id,m(he).text,We);var Te=_e(vt),nn=Me(vt,2);{var lr=We=>{{let ht=tt(()=>`Archive task: ${m(he).text||"blank task"}`);bn(We,{variant:"secondary",size:"small",onclick:()=>Ue(m(he).id),class:"print:hidden",get"aria-label"(){return m(ht)},children:(Xe,rn)=>{var ri=gn("Archive");fe(Xe,ri)},$$slots:{default:!0}})}};nt(nn,We=>{m(he).status==="checked"&&We(lr)})}ct(()=>{At(Qe,"data-id",m(he).id),xv(He,m(he).status==="checked"),At(He,"aria-label",`Mark task "${m(he).text||"blank task"}" as ${m(he).status==="checked"?"unchecked":"checked"}`),Si(vt,1,Ql(m(he).status==="checked"?"line-through cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100":"cursor-pointer hover:underline break-words flex-1 text-body font-urbanist text-grey-100")),At(vt,"aria-label",`Edit task: ${m(he).text||"blank task"}`),Er(Te,m(he).text||"Â ")}),wr("keydown",Qe,We=>Ke(We,m(he).id),!0),wr("blur",Qe,We=>Ze(We,m(he).id)),fe(xe,Qe)}),Wt(G,xe=>M(O,xe),()=>m(O)),ql(G,(xe,he)=>gc?.(xe,he),()=>({items:m(h),type:"task",zoneTabIndex:-1,dropTargetStyle:{outline:"none",boxShadow:"inset 0 0 0 2px rgba(107, 143, 217, 0.4)",backgroundColor:"rgba(107, 143, 217, 0.04)",borderRadius:"4px"}}));var ne=Me(G,2);{var Le=xe=>{var he=Kp(),Qe=_e(he);ts(Qe,{get inputValue(){return t.newTaskInput},get onInputChange(){return t.onInputChange},onSave:Ie,onEscape:bt,onActivate:Ae,buttonText:"Add your first task",placeholder:"start typing...",get ariaLabel(){return`Add your first task to ${t.listName??""}`},marginLeft:!1,get isInputActive(){return m(b)},set isInputActive(He){M(b,He,!0)},get containerElement(){return m(D)},set containerElement(He){M(D,He,!0)},get textareaElement(){return m(A)},set textareaElement(He){M(A,He,!0)}}),fe(xe,he)},rt=xe=>{ts(xe,{get inputValue(){return t.newTaskInput},get onInputChange(){return t.onInputChange},onSave:Ie,onEscape:bt,onActivate:Ae,buttonText:"Add Task",placeholder:"start typing...",get ariaLabel(){return`Add new task to ${t.listName??""}`},marginLeft:!1,get isInputActive(){return m(b)},set isInputActive(he){M(b,he,!0)},get containerElement(){return m(D)},set containerElement(he){M(D,he,!0)},get textareaElement(){return m(A)},set textareaElement(he){M(A,he,!0)}})};nt(ne,xe=>{m(h).length===0?xe(Le):xe(rt,!1)})}ct(()=>Si(G,1,`space-y-0 m-0 p-0 list-none w-full ${m(h).length===0?"empty-drop-zone min-h-[24px]":""}`)),wr("consider",G,je),wr("finalize",G,at),fe(q,U)},Tn=q=>{var U=Bp(),G=Me(kt(U),2);ts(G,{get inputValue(){return t.newTaskInput},get onInputChange(){return t.onInputChange},onSave:Ie,onEscape:bt,onActivate:Ae,buttonText:"Add Task",placeholder:"Add new task...",get ariaLabel(){return`Add new task to ${t.listName??""}`},marginLeft:!1,get isInputActive(){return m(b)},set isInputActive(ne){M(b,ne,!0)},get containerElement(){return m(D)},set containerElement(ne){M(D,ne,!0)},get textareaElement(){return m(A)},set textareaElement(ne){M(A,ne,!0)}}),fe(q,U)};nt(Fn,q=>{m(de)?q(Cr):q(Tn,!1)})}Wt(Rt,q=>M(L,q),()=>m(L));var Se=Me(Rt,2);Ip(Se,{get isOpen(){return w.isOpen},get taskId(){return m(_)},get taskText(){return m(E)},get taskPosition(){return w.position},onSave:ft,onCancel:dt,onArchive:tn});var kn=Me(Se,2);Lp(kn,{get isOpen(){return T.isOpen},get listId(){return t.listId},get listName(){return t.listName},get listPosition(){return T.position},onSave:St,onCancel:ur,onArchive:Yt}),ct(()=>{At(Rt,"data-list-id",t.listId),At(Kn,"aria-label",`Rename list: ${t.listName}`),Er(ue,t.listName)}),fe(e,Ht),or(),u()}ni(["click","keydown","change"]);var Hp=ke('<div class="flex flex-col mb-6 svelte-785piu" tabindex="0" role="group" aria-roledescription="Draggable list"><!></div>'),Up=ke('<div class="flex flex-col mb-6 svelte-785piu"></div>'),Vp=ke('<div class="empty-drop-zone min-h-[96px]" tabindex="-1"></div>'),Wp=ke('<div class="flex items-center"><div class="create-list-input-wrapper border-2 border-transparent focus-within:border-blue-500 focus-within:rounded box-border -mx-0.5 svelte-785piu"><input type="text" class="create-list-input cursor-pointer hover:underline font-gilda text-[24px] text-grey-60 placeholder:italic w-full m-0 px-2 py-2 leading-none rounded -my-1 svelte-785piu" style="padding-bottom: 6px;" placeholder="start typing..." aria-label="Enter list name"/></div></div>'),Gp=ke('<div class="flex items-center"><h2 role="button" tabindex="0" class="cursor-pointer hover:underline m-0 px-2 py-2 leading-none text-grey-60 font-gilda text-[24px] rounded -my-1 svelte-785piu" aria-label="Create new list">Create new list</h2></div>'),Yp=ke('<div><div class="flex flex-col pt-0"><!> <!></div> <div><!></div></div>');function qp(e,t){ar(t,!0);let i=Lt(t,"createListInput",15,""),o=Lt(t,"createListInputElement",15,null),u=me(null),c=me(null),d=me(null);Ye(()=>{if(typeof document>"u"||t.columnLists.length!==0||!m(c))return;const D=setTimeout(()=>{m(c)&&m(c).getAttribute("tabindex")!=="-1"&&m(c).setAttribute("tabindex","-1")},Es);return()=>{clearTimeout(D)}}),Ye(()=>{if(!m(u)||!(m(u)instanceof HTMLElement))return;t.keyboardListDrag?.active===!0?(m(u).style.outline="none",m(u).style.boxShadow="inset 0 0 0 2px rgba(107, 143, 217, 0.4)",m(u).style.borderRadius="4px"):(m(u).style.outline="",m(u).style.boxShadow="",m(u).style.borderRadius="")});var p=Yp(),h=_e(p),b=_e(h);zr(b,19,()=>t.columnLists,D=>D.id,(D,A)=>{const H=tt(()=>bs(m(A))),F=tt(()=>t.stableLists.find(de=>de.id===m(A).id)),N=tt(()=>!m(F)&&!m(H)?m(A):null),W=tt(()=>m(F)||m(N));var X=$n(),oe=kt(X);{var re=de=>{var ie=Hp(),ge=_e(ie);{let je=tt(()=>m(W).name??"Unnamed list"),Ke=tt(()=>t.newTaskInputs[m(W).id]||"");zp(ge,{get listId(){return m(W).id},get listName(){return m(je)},get newTaskInput(){return m(Ke)},onInputChange:Ze=>t.onInputChange(m(W).id,Ze),get allLists(){return t.allLists},get stableLists(){return t.stableLists}})}ct(()=>{At(ie,"data-id",m(A).id),At(ie,"aria-label",`List: ${m(W).name??"Unnamed list"}`),At(ie,"aria-pressed",t.keyboardListDrag?.active&&t.keyboardListDrag?.listId===m(W).id?"true":"false")}),wr("keydown",ie,je=>t.onListKeyboardKeydown(je,m(W).id),!0),fe(de,ie)},se=de=>{var ie=Up();ct(()=>At(ie,"data-id",m(A).id)),fe(de,ie)};nt(oe,de=>{m(W)?de(re):de(se,!1)})}fe(D,X)});var w=Me(b,2);{var T=D=>{var A=Vp();Wt(A,H=>M(c,H),()=>m(c)),fe(D,A)};nt(w,D=>{t.columnLists.length===0&&D(T)})}Wt(h,D=>M(u,D),()=>m(u)),ql(h,(D,A)=>gc?.(D,A),()=>({items:t.columnLists,type:"list",zoneTabIndex:-1,dropTargetStyle:{outline:"none",boxShadow:"inset 0 0 0 2px rgba(107, 143, 217, 0.4)",borderRadius:"4px"}}));var _=Me(h,2),E=_e(_);{var O=D=>{var A=Wp(),H=_e(A),F=_e(H);F.__keydown=N=>{N.key==="Enter"&&!N.shiftKey?(N.preventDefault(),t.onCreateList(t.columnIndex)):N.key==="Escape"?t.onCreateListInputEscape(N,t.columnIndex,t.columnLists.length===0):N.key==="Tab"&&t.onCreateListOnTab(t.columnIndex)},Wt(F,N=>o(N),()=>o()),Fs(F,i),fe(D,A)},L=D=>{var A=Gp(),H=_e(A);H.__click=()=>t.onCreateListClick(t.columnIndex),H.__keydown=F=>t.onCreateListKeydown(F,t.columnIndex),Wt(H,F=>M(d,F),()=>m(d)),fe(D,A)};nt(E,D=>{t.createListColumnIndex===t.columnIndex?D(O):D(L,!1)})}ct(()=>{Si(p,1,`flex flex-col pt-0 min-w-0 px-2 ${t.columnIndex<4?"border-r border-grey-50":""}`,"svelte-785piu"),At(p,"data-column-index",t.columnIndex),Si(_,1,`flex flex-col mb-6 w-full print:hidden ${t.columnLists.length===0?"create-list-empty-column":""}`,"svelte-785piu")}),wr("consider",h,function(...D){t.onListConsider?.apply(this,D)}),wr("finalize",h,function(...D){t.onListFinalize?.apply(this,D)}),fe(e,p),or()}ni(["keydown","click"]);var Zp=ke("<p>Loading...</p>"),Qp=ke('<div class="grid grid-cols-5 w-full py-4 px-1"></div>'),Xp=ke('<div class="w-full h-full overflow-auto"><!></div>');function Jp(e,t){ar(t,!0);const i=()=>Ca(c,"$lists",o),[o,u]=Bs();let c=Ra(()=>qh()),d=tt(()=>i()||[]),p=me($t([])),h=me($t({})),b=me(null),w=me(""),T=me(null),_=me($t({active:!1,listId:null,lastDraggedId:null,shouldRefocusOnNextTab:!1}));Ye(()=>{if(i()&&Array.isArray(i())&&i().length>0&&Object.keys(m(h)).length===0){const te={};for(const ye of i())te[ye.id]="";M(h,te,!0)}}),Ye(()=>{if(i()&&Array.isArray(i())&&i().length>0){const te={...m(h)};let ye=!1;for(const Re of i())Re.id in te||(te[Re.id]="",ye=!0);ye&&M(h,te,!0)}});let E=me(0);Ye(()=>{if(i()&&Array.isArray(i())){const te=i().map(ye=>({id:ye.id,name:ye.name,order:ye.order,columnIndex:ye.columnIndex}));te.length!==m(E)&&M(E,te.length,!0),M(p,te,!0)}else m(E)>0&&M(E,0),M(p,[],!0)});const O=5;let L=tt(()=>op(m(p),O));async function D(te,ye){const Re=m(L);if(!Re||Re.length===0)return;const Ue=lp(Re,te,ye,O);if(!Ue)return;const{updatedDraggableLists:Ce,targetColumnIndex:Be,targetColumnItems:ft}=Ue;M(p,Ce,!0);try{await rl(Be,ft)}catch(dt){console.error("[KEYBOARD DRAG] Error moving list via keyboard:",dt)}m(_).active&&m(_).listId===te&&await _c(te)}function A(te){return m(_).active===!0&&m(_).listId===te}function H(te){M(_,{...m(_),active:!0,listId:te,shouldRefocusOnNextTab:!1},!0)}function F(){m(_).listId!=null?M(_,{...m(_),active:!1,listId:null,lastDraggedId:m(_).listId,shouldRefocusOnNextTab:!0},!0):M(_,{...m(_),active:!1,listId:null},!0)}function N(){if(typeof document>"u")return;const te=document.activeElement;te&&te instanceof HTMLElement&&te.blur()}function W(te,ye){const Re=te.currentTarget,Ue=te.target,Ce=te.key;if(!A(ye)){Ce==="Enter"||Ce===" "?Re instanceof HTMLElement&&Re===Ue&&(te.preventDefault(),te.stopPropagation(),te.stopImmediatePropagation(),ye!=null&&H(ye)):Ce==="Escape"&&Re instanceof HTMLElement&&Re===Ue&&(te.preventDefault(),te.stopPropagation(),te.stopImmediatePropagation(),ye!=null&&M(_,{...m(_),lastDraggedId:ye,shouldRefocusOnNextTab:!0},!0),Re.blur());return}}Ye(()=>typeof document>"u"?void 0:bp({getKeyboardListDrag:()=>({active:m(_).active,listId:m(_).listId}),getLastKeyboardDraggedListId:()=>m(_).lastDraggedId,getShouldRefocusListOnNextTab:()=>m(_).shouldRefocusOnNextTab,setShouldRefocusListOnNextTab:ye=>{M(_,{...m(_),shouldRefocusOnNextTab:ye},!0)}},(ye,Re)=>D(ye,Re),()=>F(),()=>N()));function X(te,ye){m(h)[te]=ye}const oe=xp({getColumnIndex:()=>m(b),setColumnIndex:te=>{M(b,te,!0)},getInput:()=>m(w),setInput:te=>{M(w,te,!0)},getInputElement:()=>m(T)}),{handleCreateListClick:re,handleCreateListKeydown:se,handleCreateListInputEscape:de,handleCreateList:ie,handleCreateListOnTab:ge,setupClickOutsideEffect:je,setupFocusEffect:Ke}=oe;Ye(()=>je()),Ye(()=>Ke());function Ze(te,ye){const Re=te.detail.items||[];M(p,cp(Re,ye,m(p)),!0)}async function at(te,ye){const Re=(te.detail.items||[]).filter(Ce=>!bs(Ce)),Ue=(te.detail.items||[]).filter(Ce=>bs(Ce));if(Ue.length>0&&console.warn("[DRAG] finalize - WARNING: Placeholders still present in finalize!",Ue.length),!fp(Re,ye,i(),m(p)))try{await rl(ye,Re)}catch(Ce){console.error("[DRAG] finalize - ERROR updating list order:",Ce)}}var Ae=Xp(),bt=_e(Ae);{var Ie=te=>{var ye=Zp();fe(te,ye)},ze=te=>{var ye=$n(),Re=kt(ye);{var Ue=Ce=>{var Be=Qp();zr(Be,21,()=>m(L),_a,(ft,dt,tn)=>{{let sr=tt(()=>({active:m(_).active,listId:m(_).listId}));qp(ft,{columnIndex:tn,get columnLists(){return m(dt)},get stableLists(){return m(d)},get newTaskInputs(){return m(h)},get createListColumnIndex(){return m(b)},get keyboardListDrag(){return m(sr)},onInputChange:X,onListKeyboardKeydown:W,onListConsider:Ve=>Ze(Ve,tn),onListFinalize:Ve=>at(Ve,tn),get onCreateListClick(){return re},get onCreateListKeydown(){return se},get onCreateListInputEscape(){return de},get onCreateList(){return ie},get onCreateListOnTab(){return ge},get allLists(){return i()},get createListInput(){return m(w)},set createListInput(Ve){M(w,Ve,!0)},get createListInputElement(){return m(T)},set createListInputElement(Ve){M(T,Ve,!0)}})}}),fe(Ce,Be)};nt(Re,Ce=>{Array.isArray(i())&&Ce(Ue)},!0)}fe(te,ye)};nt(bt,te=>{i()===void 0||i()===null?te(Ie):te(ze,!1)})}fe(e,Ae),or(),u()}var $p=ke("<p>Loading...</p>"),em=ke("<p>Loading data...</p>"),tm=ke('<p class="text-grey-60">No archived lists or tasks</p>'),nm=ke('<span class="text-sm text-grey-60"> </span>'),rm=ke('<span class="text-xs bg-grey-30 px-2 py-1 rounded">[List Archived]</span> <!>',1),im=ke('<span class="text-xs bg-green-100 px-2 py-1 rounded">[List Active]</span>'),am=ke('<p class="text-sm text-grey-60 italic">No archived tasks</p>'),om=ke('<li class="flex items-center gap-3 flex-wrap"><span class="line-through text-grey-100"> </span> <!></li>'),sm=ke('<div class="mb-4"><h4 class="text-sm font-medium text-grey-60 mb-2"> </h4> <ul class="space-y-2"></ul></div>'),um=ke('<div class="border-b border-grey-50 pb-4"><div class="flex items-center gap-2 flex-wrap"><h3 class="text-lg font-semibold text-grey-110"> </h3> <!></div></div> <div class="border-b border-grey-50 pb-4"><!></div>',1),lm=ke('<div class="grid grid-cols-2 gap-4"></div>'),cm=ke('<div class="mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div>');function fm(e,t){ar(t,!0);const i=()=>Ca(m(p),"$listsQuery",u),o=()=>Ca(m(d),"$archivedTasksQuery",u),[u,c]=Bs();let d=me(null),p=me(null);Ye(()=>{La(M(d,Ra(()=>$h()),!0),"$archivedTasksQuery",u),La(M(p,Ra(()=>Zh()),!0),"$listsQuery",u)});function h(A){return A?new Date(A).toDateString():null}function b(A){return A?new Date(A).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Unknown"}let w=tt(()=>{const A=m(d)?o():null,H=m(p)?i():null;if(!H||!Array.isArray(H))return[];const F={};if(A&&Array.isArray(A))for(const W of A)F[W.listId]||(F[W.listId]=[]),F[W.listId].push(W);const N=[];for(const W of H){const X=W.archivedAt!=null,oe=F[W.id]&&F[W.id].length>0;if(X||oe){const re=F[W.id]||[],se={};for(const de of re){const ie=h(de.archivedAt)||"Unknown";se[ie]||(se[ie]=[]),se[ie].push(de)}N.push({list:W,listArchiveDate:W.archivedAt?h(W.archivedAt):null,tasksByDate:se,hasTasks:re.length>0})}}return N.sort((W,X)=>{if(W.list.order!==X.list.order)return W.list.order-X.list.order;const oe=W.list.name??"Unnamed list",re=X.list.name??"Unnamed list";return oe.localeCompare(re)}),N});function T(A){return A.sort((H,F)=>{if(H==="Unknown")return 1;if(F==="Unknown")return-1;const N=new Date(H).getTime();return new Date(F).getTime()-N})}async function _(A){try{(await np(A)).listRestored&&console.log("Task and its list have been restored")}catch(H){console.error("Error restoring task:",H)}}var E=cm(),O=Me(_e(E),2);{var L=A=>{var H=$p();fe(A,H)},D=A=>{var H=$n(),F=kt(H);{var N=X=>{var oe=em();fe(X,oe)},W=X=>{var oe=$n(),re=kt(oe);{var se=ie=>{var ge=tm();fe(ie,ge)},de=ie=>{var ge=lm();zr(ge,21,()=>m(w),_a,(je,Ke)=>{const Ze=tt(()=>m(Ke).list),at=tt(()=>m(Ze).name??"Unnamed list"),Ae=tt(()=>m(Ze).archivedAt!=null),bt=tt(()=>m(Ke).listArchiveDate);var Ie=um(),ze=kt(Ie),te=_e(ze),ye=_e(te),Re=_e(ye),Ue=Me(ye,2);{var Ce=Ve=>{var St=rm(),ur=Me(kt(St),2);{var Yt=Ht=>{var Rt=nm(),Ot=_e(Rt);ct(cn=>Er(Ot,`- ${cn??""}`),[()=>b(m(bt))]),fe(Ht,Rt)};nt(ur,Ht=>{m(bt)&&Ht(Yt)})}fe(Ve,St)},Be=Ve=>{var St=im();fe(Ve,St)};nt(Ue,Ve=>{m(Ae)?Ve(Ce):Ve(Be,!1)})}var ft=Me(ze,2),dt=_e(ft);{var tn=Ve=>{var St=am();fe(Ve,St)},sr=Ve=>{var St=$n(),ur=kt(St);zr(ur,17,()=>T(Object.keys(m(Ke).tasksByDate)),_a,(Yt,Ht)=>{const Rt=tt(()=>m(Ke).tasksByDate[m(Ht)]);var Ot=sm(),cn=_e(Ot),Kn=_e(cn),ue=Me(cn,2);zr(ue,21,()=>m(Rt),_a,(Fn,Cr)=>{var Tn=om(),Se=_e(Tn),kn=_e(Se),q=Me(Se,2);bn(q,{variant:"primary",size:"small",onclick:()=>_(m(Cr).id),children:(U,G)=>{var ne=gn("Restore");fe(U,ne)},$$slots:{default:!0}}),ct(()=>Er(kn,m(Cr).text)),fe(Fn,Tn)}),ct(Fn=>Er(Kn,Fn),[()=>m(Ht)==="Unknown"?"Unknown Date":b(m(Ht))]),fe(Yt,Ot)}),fe(Ve,St)};nt(dt,Ve=>{m(Ke).hasTasks?Ve(sr,!1):Ve(tn)})}ct(()=>Er(Re,m(at))),fe(je,Ie)}),fe(ie,ge)};nt(re,ie=>{m(w).length===0?ie(se):ie(de,!1)},!0)}fe(X,oe)};nt(F,X=>{!o()||!i()?X(N):X(W,!1)},!0)}fe(A,H)};nt(O,A=>{!m(d)||!m(p)?A(L):A(D,!1)})}ct(()=>rr(E,`width: ${ws}px;`)),fe(e,E),or(),c()}var dm=ke('<main class="min-h-screen flex flex-col items-center justify-center bg-grey-10 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="flex justify-end print:hidden"><!></div> <div class="bg-grey-10 print:bg-grey-10 border-2 border-grey-50 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-grey-80 pointer-events-none z-0"></div> <div class="absolute inset-[16px] z-10"><!></div></div> <!></main>');function vm(e){function t(){window.print()}var i=dm(),o=_e(i),u=_e(o);bn(u,{variant:"primary",size:"large",onclick:t,children:(b,w)=>{var T=gn("Print");fe(b,T)},$$slots:{default:!0}});var c=Me(o,2),d=Me(_e(c),2),p=_e(d);Jp(p,{});var h=Me(c,2);fm(h,{}),ct(()=>{rr(o,`width: ${ws}px;`),rr(c,`width: ${ws}px; height: ${vp}px;`)}),fe(e,i)}const hm=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],pm=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function mm(){try{if(await we.lists.count()>0)return;await we.lists.bulkAdd(hm),await we.tasks.bulkAdd(pm),console.log("Database seeded with mock data")}catch(e){throw console.error("Error seeding database:",e),e}}(async()=>(await mm().catch(console.error),dv(vm,{target:document.getElementById("app")})))();
