(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const v of h)if(v.type==="childList")for(const m of v.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function s(h){const v={};return h.integrity&&(v.integrity=h.integrity),h.referrerPolicy&&(v.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?v.credentials="include":h.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function c(h){if(h.ep)return;h.ep=!0;const v=s(h);fetch(h.href,v)}})();const Cs="production",Y=!Cs.toLowerCase().startsWith("prod");var fu=Array.isArray,Is=Array.prototype.indexOf,Hi=Array.from,Bt=Object.defineProperty,mn=Object.getOwnPropertyDescriptor,Ds=Object.prototype,Ps=Array.prototype,Ks=Object.getPrototypeOf,Za=Object.isExtensible;const Kr=()=>{};function Rs(r){for(var u=0;u<r.length;u++)r[u]()}function cu(){var r,u,s=new Promise((c,h)=>{r=c,u=h});return{promise:s,resolve:r,reject:u}}const ke=2,du=4,qi=8,Ms=1<<24,mt=16,_t=32,tn=64,zr=128,Ze=512,Ie=1024,Ne=2048,gt=4096,Ue=8192,Dt=16384,Gi=32768,bn=65536,Rr=1<<17,hu=1<<18,Sn=1<<19,Bs=1<<20,Ft=32768,ji=1<<21,Ur=1<<22,Pt=1<<23,Un=Symbol("$state"),vu=Symbol("proxy path"),vn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Fs(){if(Y){const r=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function js(){if(Y){const r=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/derived_references_self")}function Ns(r){if(Y){const u=new Error(`effect_in_teardown
\`${r}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw u.name="Svelte error",u}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ls(){if(Y){const r=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $s(r){if(Y){const u=new Error(`effect_orphan
\`${r}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw u.name="Svelte error",u}else throw new Error("https://svelte.dev/e/effect_orphan")}function Vs(){if(Y){const r=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zs(r){if(Y){const u=new Error(`rune_outside_svelte
The \`${r}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw u.name="Svelte error",u}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Us(){if(Y){const r=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ws(){if(Y){const r=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ys(){if(Y){const r=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Qs(){if(Y){const r=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const pu=1,yu=2,mu=4,Hs=8,qs=16,Gs=1,Xs=2,Oe=Symbol(),Js=Symbol("filename"),Zs="http://www.w3.org/1999/xhtml";var _u="font-weight: bold",gu="font-weight: normal";function Ki(r){Y?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${r}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,_u,gu):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function el(){Y?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",_u,gu):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function bu(r){return r===this.v}function tl(r,u){return r!=r?u==u:r!==u||r!==null&&typeof r=="object"||typeof r=="function"}function wu(r){return!tl(r,this.v)}let nl=!1;function at(r,u){return r.label=u,xu(r.v,u),r}function xu(r,u){return r?.[vu]?.(u),r}function rl(r){const u=new Error,s=il();return s.length===0?null:(s.unshift(`
`),Bt(u,"stack",{value:s.join(`
`)}),Bt(u,"name",{value:r}),u)}function il(){const r=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const u=new Error().stack;if(Error.stackTraceLimit=r,!u)return[];const s=u.split(`
`),c=[];for(let h=0;h<s.length;h++){const v=s[h],m=v.replaceAll("\\","/");if(v.trim()!=="Error"){if(v.includes("validate_each_keys"))return[];m.includes("svelte/src/internal")||m.includes("node_modules/.vite")||c.push(v)}}return c}let Fe=null;function wn(r){Fe=r}let Qn=null;function Mr(r){Qn=r}let Xn=null;function eu(r){Xn=r}function Jn(r,u=!1,s){Fe={p:Fe,i:!1,c:null,e:null,s:r,x:null,l:null},Y&&(Fe.function=s,Xn=s)}function Zn(r){var u=Fe,s=u.e;if(s!==null){u.e=null;for(var c of s)Bu(c)}return u.i=!0,Fe=u.p,Y&&(Xn=Fe?.function??null),{}}function Eu(){return!0}let pn=[];function al(){var r=pn;pn=[],Rs(r)}function er(r){if(pn.length===0){var u=pn;queueMicrotask(()=>{u===pn&&al()})}pn.push(r)}const Ni=new WeakMap;function ku(r){var u=le;if(u===null)return ue.f|=Pt,r;if(Y&&r instanceof Error&&!Ni.has(r)&&Ni.set(r,ul(r,u)),(u.f&Gi)===0){if((u.f&zr)===0)throw Y&&!u.parent&&r instanceof Error&&Su(r),r;u.b.error(r)}else xn(r,u)}function xn(r,u){for(;u!==null;){if((u.f&zr)!==0)try{u.b.error(r);return}catch(s){r=s}u=u.parent}throw Y&&r instanceof Error&&Su(r),r}function ul(r,u){const s=mn(r,"message");if(!(s&&!s.configurable)){for(var c=ra?"  ":"	",h=`
${c}in ${u.fn?.name||"<unknown>"}`,v=u.ctx;v!==null;)h+=`
${c}in ${v.function?.[Js].split("/").pop()}`,v=v.p;return{message:r.message+`
${h}
`,stack:r.stack?.split(`
`).filter(m=>!m.includes("svelte/src/internal")).join(`
`)}}}function Su(r){const u=Ni.get(r);u&&(Bt(r,"message",{value:u.message}),Bt(r,"stack",{value:u.stack}))}const Dr=new Set;let ye=null,qe=null,ot=[],Xi=null,Li=!1;class st{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#s=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(u){ot=[],this.apply();var s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of u)this.#u(c,s);this.is_fork||this.#f(),this.is_deferred()?(this.#o(s.effects),this.#o(s.render_effects),this.#o(s.block_effects)):(ye=null,tu(s.render_effects),tu(s.effects),this.#s?.resolve()),qe=null}#u(u,s){u.f^=Ie;for(var c=u.first;c!==null;){var h=c.f,v=(h&(_t|tn))!==0,m=v&&(h&Ie)!==0,S=m||(h&Ue)!==0||this.skipped_effects.has(c);if((c.f&zr)!==0&&c.b?.is_pending()&&(s={parent:s,effect:c,effects:[],render_effects:[],block_effects:[]}),!S&&c.fn!==null){v?c.f^=Ie:(h&du)!==0?s.effects.push(c):nr(c)&&((c.f&mt)!==0&&s.block_effects.push(c),Gn(c));var w=c.first;if(w!==null){c=w;continue}}var P=c.parent;for(c=c.next;c===null&&P!==null;)P===s.effect&&(this.#o(s.effects),this.#o(s.render_effects),this.#o(s.block_effects),s=s.parent),c=P.next,P=P.parent}}#o(u){for(const s of u)((s.f&Ne)!==0?this.#a:this.#i).push(s),this.#l(s.deps),De(s,Ie)}#l(u){if(u!==null)for(const s of u)(s.f&ke)===0||(s.f&Ft)===0||(s.f^=Ft,this.#l(s.deps))}capture(u,s){this.previous.has(u)||this.previous.set(u,s),(u.f&Pt)===0&&(this.current.set(u,u.v),qe?.set(u,u.v))}activate(){ye=this,this.apply()}deactivate(){ye===this&&(ye=null,qe=null)}flush(){if(this.activate(),ot.length>0){if(ol(),ye!==null&&ye!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const u of this.#t)u(this);this.#t.clear()}#f(){if(this.#n===0){for(const u of this.#e)u();this.#e.clear()}this.#r===0&&this.#c()}#c(){if(Dr.size>1){this.previous.clear();var u=qe,s=!0,c={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const v of Dr){if(v===this){s=!1;continue}const m=[];for(const[w,P]of this.current){if(v.current.has(w))if(s&&P!==v.current.get(w))v.current.set(w,P);else continue;m.push(w)}if(m.length===0)continue;const S=[...v.current.keys()].filter(w=>!this.current.has(w));if(S.length>0){var h=ot;ot=[];const w=new Set,P=new Map;for(const M of m)Au(M,S,w,P);if(ot.length>0){ye=v,v.apply();for(const M of ot)v.#u(M,c);v.deactivate()}ot=h}}ye=null,qe=u}this.committed=!0,Dr.delete(this)}increment(u){this.#r+=1,u&&(this.#n+=1)}decrement(u){this.#r-=1,u&&(this.#n-=1),this.revive()}revive(){for(const u of this.#a)De(u,Ne),Zt(u);for(const u of this.#i)De(u,gt),Zt(u);this.#a=[],this.#i=[],this.flush()}oncommit(u){this.#e.add(u)}ondiscard(u){this.#t.add(u)}settled(){return(this.#s??=cu()).promise}static ensure(){if(ye===null){const u=ye=new st;Dr.add(ye),st.enqueue(()=>{ye===u&&u.flush()})}return ye}static enqueue(u){er(u)}apply(){}}function ol(){var r=Rt;Li=!0;var u=Y?new Set:null;try{var s=0;for(jr(!0);ot.length>0;){var c=st.ensure();if(s++>1e3){if(Y){var h=new Map;for(const m of c.current.keys())for(const[S,w]of m.updated??[]){var v=h.get(S);v||(v={error:w.error,count:0},h.set(S,v)),v.count+=w.count}for(const m of h.values())m.error&&console.error(m.error)}sl()}if(c.process(ot),Kt.clear(),Y)for(const m of c.current.keys())u.add(m)}}finally{if(Li=!1,jr(r),Xi=null,Y)for(const m of u)m.updated=null}}function sl(){try{Vs()}catch(r){Y&&Bt(r,"stack",{value:""}),xn(r,Xi)}}let vt=null;function tu(r){var u=r.length;if(u!==0){for(var s=0;s<u;){var c=r[s++];if((c.f&(Dt|Ue))===0&&nr(c)&&(vt=new Set,Gn(c),c.deps===null&&c.first===null&&c.nodes_start===null&&(c.teardown===null&&c.ac===null?Nu(c):c.fn=null),vt?.size>0)){Kt.clear();for(const h of vt){if((h.f&(Dt|Ue))!==0)continue;const v=[h];let m=h.parent;for(;m!==null;)vt.has(m)&&(vt.delete(m),v.push(m)),m=m.parent;for(let S=v.length-1;S>=0;S--){const w=v[S];(w.f&(Dt|Ue))===0&&Gn(w)}}vt.clear()}}vt=null}}function Au(r,u,s,c){if(!s.has(r)&&(s.add(r),r.reactions!==null))for(const h of r.reactions){const v=h.f;(v&ke)!==0?Au(h,u,s,c):(v&(Ur|mt))!==0&&(v&Ne)===0&&Tu(h,u,c)&&(De(h,Ne),Zt(h))}}function Tu(r,u,s){const c=s.get(r);if(c!==void 0)return c;if(r.deps!==null)for(const h of r.deps){if(u.includes(h))return!0;if((h.f&ke)!==0&&Tu(h,u,s))return s.set(h,!0),!0}return s.set(r,!1),!1}function Zt(r){for(var u=Xi=r;u.parent!==null;){u=u.parent;var s=u.f;if(Li&&u===le&&(s&mt)!==0&&(s&hu)===0)return;if((s&(tn|_t))!==0){if((s&Ie)===0)return;u.f^=Ie}}ot.push(u)}function ll(r){let u=0,s=en(0),c;return Y&&at(s,"createSubscriber version"),()=>{Hn()&&(G(s),Kl(()=>(u===0&&(c=qu(()=>r(()=>Wn(s)))),u+=1,()=>{er(()=>{u-=1,u===0&&(c?.(),c=void 0,Wn(s))})})))}}var fl=bn|Sn|zr;function cl(r,u,s){new dl(r,u,s)}class dl{parent;#e=!1;#t;#r=null;#n;#s;#a;#i=null;#u=null;#o=null;#l=null;#f=null;#c=0;#h=0;#v=!1;#d=null;#g=ll(()=>(this.#d=en(this.#c),Y&&at(this.#d,"$effect.pending()"),()=>{this.#d=null}));constructor(u,s,c){this.#t=u,this.#n=s,this.#s=c,this.parent=le.b,this.#e=!!this.#n.pending,this.#a=oa(()=>{le.b=this;{var h=this.#m();try{this.#i=He(()=>c(h))}catch(v){this.error(v)}this.#h>0?this.#y():this.#e=!1}return()=>{this.#f?.remove()}},fl)}#b(){try{this.#i=He(()=>this.#s(this.#t))}catch(u){this.error(u)}this.#e=!1}#w(){const u=this.#n.pending;u&&(this.#u=He(()=>u(this.#t)),st.enqueue(()=>{var s=this.#m();this.#i=this.#p(()=>(st.ensure(),He(()=>this.#s(s)))),this.#h>0?this.#y():(_n(this.#u,()=>{this.#u=null}),this.#e=!1)}))}#m(){var u=this.#t;return this.#e&&(this.#f=jt(),this.#t.before(this.#f),u=this.#f),u}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(u){var s=le,c=ue,h=Fe;Je(this.#a),Be(this.#a),wn(this.#a.ctx);try{return u()}catch(v){return ku(v),null}finally{Je(s),Be(c),wn(h)}}#y(){const u=this.#n.pending;this.#i!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#f),Vu(this.#i,this.#l)),this.#u===null&&(this.#u=He(()=>u(this.#t)))}#_(u){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(u);return}this.#h+=u,this.#h===0&&(this.#e=!1,this.#u&&_n(this.#u,()=>{this.#u=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(u){this.#_(u),this.#c+=u,this.#d&&kn(this.#d,this.#c)}get_effect_pending(){return this.#g(),G(this.#d)}error(u){var s=this.#n.onerror;let c=this.#n.failed;if(this.#v||!s&&!c)throw u;this.#i&&(je(this.#i),this.#i=null),this.#u&&(je(this.#u),this.#u=null),this.#o&&(je(this.#o),this.#o=null);var h=!1,v=!1;const m=()=>{if(h){el();return}h=!0,v&&Qs(),st.ensure(),this.#c=0,this.#o!==null&&_n(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,He(()=>this.#s(this.#t)))),this.#h>0?this.#y():this.#e=!1};var S=ue;try{Be(null),v=!0,s?.(u,m),v=!1}catch(w){xn(w,this.#a&&this.#a.parent)}finally{Be(S)}c&&er(()=>{this.#o=this.#p(()=>{st.ensure(),this.#v=!0;try{return He(()=>{c(this.#t,()=>u,()=>m)})}catch(w){return xn(w,this.#a.parent),null}finally{this.#v=!1}})})}}function Ji(r,u){return u}function hl(r,u,s){for(var c=[],h=u.length,v=0;v<h;v++)sa(u[v].e,c,!0);Lu(c,()=>{var m=c.length===0&&s!==null;if(m){var S=s,w=S.parentNode;Ol(w),w.append(S),r.items.clear(),ut(r,u[0].prev,u[h-1].next)}for(var P=0;P<h;P++){var M=u[P];m||(r.items.delete(M.k),ut(r,M.prev,M.next)),je(M.e,!m)}r.first===u[0]&&(r.first=u[0].prev)})}function Zi(r,u,s,c,h,v=null){var m=r,S=new Map,w=null,P=(u&mu)!==0,M=(u&pu)!==0,R=(u&yu)!==0;if(P){var T=r;m=T.appendChild(jt())}var D=null,U=bl(()=>{var Z=s();return fu(Z)?Z:Z==null?[]:Hi(Z)}),H,F=!0;function X(){vl(te,H,m,u,c),D!==null&&(H.length===0?(D.fragment?(m.before(D.fragment),D.fragment=null):la(D.effect),oe.first=D.effect):_n(D.effect,()=>{D=null}))}var oe=oa(()=>{H=G(U);for(var Z=H.length,ae=new Set,fe=ye,de=null,pe=Mu(),se=0;se<Z;se+=1){var ne=H[se],Se=c(ne,se),he=F?null:S.get(Se);he?(M&&kn(he.v,ne),R?kn(he.i,se):he.i=se,pe&&fe.skipped_effects.delete(he.e)):(he=pl(F?m:null,de,ne,Se,se,h,u,s),F&&(he.o=!0,de===null?w=he:de.next=he,de=he),S.set(Se,he)),ae.add(Se)}if(Z===0&&v&&!D)if(F)D={fragment:null,effect:He(()=>v(m))};else{var we=document.createDocumentFragment(),We=jt();we.append(We),D={fragment:we,effect:He(()=>v(We))}}if(!F)if(pe){for(const[et,$e]of S)ae.has(et)||fe.skipped_effects.add($e.e);fe.oncommit(X),fe.ondiscard(()=>{})}else X();G(U)}),te={effect:oe,items:S,first:w};F=!1}function vl(r,u,s,c,h){var v=(c&Hs)!==0,m=u.length,S=r.items,w=r.first,P,M=null,R,T=[],D=[],U,H,F,X;if(v)for(X=0;X<m;X+=1)U=u[X],H=h(U,X),F=S.get(H),F.o&&(F.a?.measure(),(R??=new Set).add(F));for(X=0;X<m;X+=1){if(U=u[X],H=h(U,X),F=S.get(H),r.first??=F,!F.o){F.o=!0;var oe=M?M.next:w;ut(r,M,F),ut(r,F,oe),Ri(F,oe,s),M=F,T=[],D=[],w=M.next;continue}if((F.e.f&Ue)!==0&&(la(F.e),v&&(F.a?.unfix(),(R??=new Set).delete(F))),F!==w){if(P!==void 0&&P.has(F)){if(T.length<D.length){var te=D[0],Z;M=te.prev;var ae=T[0],fe=T[T.length-1];for(Z=0;Z<T.length;Z+=1)Ri(T[Z],te,s);for(Z=0;Z<D.length;Z+=1)P.delete(D[Z]);ut(r,ae.prev,fe.next),ut(r,M,ae),ut(r,fe,te),w=te,M=fe,X-=1,T=[],D=[]}else P.delete(F),Ri(F,w,s),ut(r,F.prev,F.next),ut(r,F,M===null?r.first:M.next),ut(r,M,F),M=F;continue}for(T=[],D=[];w!==null&&w.k!==H;)(w.e.f&Ue)===0&&(P??=new Set).add(w),D.push(w),w=w.next;if(w===null)continue;F=w}T.push(F),M=F,w=F.next}if(w!==null||P!==void 0){for(var de=P===void 0?[]:Hi(P);w!==null;)(w.e.f&Ue)===0&&de.push(w),w=w.next;var pe=de.length;if(pe>0){var se=(c&mu)!==0&&m===0?s:null;if(v){for(X=0;X<pe;X+=1)de[X].a?.measure();for(X=0;X<pe;X+=1)de[X].a?.fix()}hl(r,de,se)}}v&&er(()=>{if(R!==void 0)for(F of R)F.a?.apply()})}function pl(r,u,s,c,h,v,m,S){var w=(m&pu)!==0,P=(m&qs)===0,M=w?P?Iu(s,!1,!1):en(s):s,R=(m&yu)===0?h:en(h);Y&&w&&(M.trace=()=>{var U=typeof R=="number"?h:R.v;S()[U]});var T={i:R,v:M,k:c,a:null,e:null,o:!1,prev:u,next:null};try{if(r===null){var D=document.createDocumentFragment();D.append(r=jt())}return T.e=He(()=>v(r,M,R,S)),u!==null&&(u.next=T),T}finally{}}function Ri(r,u,s){for(var c=r.next?r.next.e.nodes_start:s,h=u?u.e.nodes_start:s,v=r.e.nodes_start;v!==null&&v!==c;){var m=tr(v);h.before(v),v=m}}function ut(r,u,s){u===null?(r.first=s,r.effect.first=s&&s.e):(u.e===r.effect.last&&s!==null&&(r.effect.last=s.e),u.e.next&&(u.e.next.prev=null),u.next=s,u.e.next=s&&s.e),s===null?r.effect.last=u&&u.e:(s.e===r.effect.last&&u===null&&(r.effect.last=s.e.prev),s.e.prev&&(s.e.prev.next=null),s.prev=u,s.e.prev=u&&u.e)}function yl(r,u,s,c){const h=ea;if(s.length===0&&r.length===0){c(u.map(h));return}var v=ye,m=le,S=ml();function w(){Promise.all(s.map(P=>gl(P))).then(P=>{S();try{c([...u.map(h),...P])}catch(M){(m.f&Dt)===0&&xn(M,m)}v?.deactivate(),Br()}).catch(P=>{xn(P,m)})}r.length>0?Promise.all(r).then(()=>{S();try{return w()}finally{v?.deactivate(),Br()}}):w()}function ml(){var r=le,u=ue,s=Fe,c=ye;if(Y)var h=Qn;return function(m=!0){Je(r),Be(u),wn(s),m&&c?.activate(),Y&&Mr(h)}}function Br(){Je(null),Be(null),wn(null),Y&&Mr(null)}const _l=new Set;function ea(r){var u=ke|Ne,s=ue!==null&&(ue.f&ke)!==0?ue:null;return le!==null&&(le.f|=Sn),{ctx:Fe,deps:null,effects:null,equals:bu,f:u,fn:r,reactions:null,rv:0,v:Oe,wv:0,parent:s??le,ac:null}}function gl(r,u){let s=le;s===null&&Fs();var c=s.b,h=void 0,v=en(Oe),m=!ue,S=new Map;return Pl(()=>{var w=cu();h=w.promise;try{Promise.resolve(r()).then(w.resolve,w.reject).then(()=>{P===ye&&P.committed&&P.deactivate(),Br()})}catch(T){w.reject(T),Br()}var P=ye;if(m){var M=!c.is_pending();c.update_pending_count(1),P.increment(M),S.get(P)?.reject(vn),S.delete(P),S.set(P,w)}const R=(T,D=void 0)=>{if(P.activate(),D)D!==vn&&(v.f|=Pt,kn(v,D));else{(v.f&Pt)!==0&&(v.f^=Pt),kn(v,T);for(const[U,H]of S){if(S.delete(U),U===P)break;H.reject(vn)}}m&&(c.update_pending_count(-1),P.decrement(M))};w.promise.then(R,T=>R(null,T||"unknown"))}),aa(()=>{for(const w of S.values())w.reject(vn)}),Y&&(v.f|=Ur),new Promise(w=>{function P(M){function R(){M===h?w(v):P(h)}M.then(R,R)}P(h)})}function Ou(r){const u=ea(r);return zu(u),u}function bl(r){const u=ea(r);return u.equals=wu,u}function $i(r){var u=r.effects;if(u!==null){r.effects=null;for(var s=0;s<u.length;s+=1)je(u[s])}}let Mi=[];function wl(r){for(var u=r.parent;u!==null;){if((u.f&ke)===0)return(u.f&Dt)===0?u:null;u=u.parent}return null}function ta(r){var u,s=le;if(Je(wl(r)),Y){let c=En;nu(new Set);try{Mi.includes(r)&&js(),Mi.push(r),r.f&=~Ft,$i(r),u=Vi(r)}finally{Je(s),nu(c),Mi.pop()}}else try{r.f&=~Ft,$i(r),u=Vi(r)}finally{Je(s)}return u}function Cu(r){var u=ta(r);if(r.equals(u)||(ye?.is_fork||(r.v=u),r.wv=Wu()),!An)if(qe!==null)(Hn()||ye?.is_fork)&&qe.set(r,u);else{var s=(r.f&Ze)===0?gt:Ie;De(r,s)}}let En=new Set;const Kt=new Map;function nu(r){En=r}let na=!1;function xl(){na=!0}function en(r,u){var s={f:0,v:r,reactions:null,equals:bu,rv:0,wv:0};return s}function Me(r,u){const s=en(r);return zu(s),s}function Iu(r,u=!1,s=!0){const c=en(r);return u||(c.equals=wu),c}function Ee(r,u,s=!1){ue!==null&&(!lt||(ue.f&Rr)!==0)&&Eu()&&(ue.f&(ke|mt|Ur|Rr))!==0&&!pt?.includes(r)&&Ys();let c=s?yn(u):u;return Y&&xu(c,r.label),kn(r,c)}function kn(r,u){if(!r.equals(u)){var s=r.v;An?Kt.set(r,u):Kt.set(r,s),r.v=u;var c=st.ensure();if(c.capture(r,s),Y){if(le!==null){r.updated??=new Map;const h=(r.updated.get("")?.count??0)+1;if(r.updated.set("",{error:null,count:h}),h>5){const v=rl("updated at");if(v!==null){let m=r.updated.get(v.stack);m||(m={error:v,count:0},r.updated.set(v.stack,m)),m.count++}}}le!==null&&(r.set_during_effect=!0)}(r.f&ke)!==0&&((r.f&Ne)!==0&&ta(r),De(r,(r.f&Ze)!==0?Ie:gt)),r.wv=Wu(),Pu(r,Ne),le!==null&&(le.f&Ie)!==0&&(le.f&(_t|tn))===0&&(Qe===null?Bl([r]):Qe.push(r)),!c.is_fork&&En.size>0&&!na&&Du()}return u}function Du(){na=!1;var r=Rt;jr(!0);const u=Array.from(En);try{for(const s of u)(s.f&Ie)!==0&&De(s,gt),nr(s)&&Gn(s)}finally{jr(r)}En.clear()}function Wn(r){Ee(r,r.v+1)}function Pu(r,u){var s=r.reactions;if(s!==null)for(var c=s.length,h=0;h<c;h++){var v=s[h],m=v.f;if(Y&&(m&Rr)!==0){En.add(v);continue}var S=(m&Ne)===0;if(S&&De(v,u),(m&ke)!==0){var w=v;qe?.delete(w),(m&Ft)===0&&(m&Ze&&(v.f|=Ft),Pu(w,gt))}else S&&((m&mt)!==0&&vt!==null&&vt.add(v),Zt(v))}}const El=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function yn(r){if(typeof r!="object"||r===null||Un in r)return r;const u=Ks(r);if(u!==Ds&&u!==Ps)return r;var s=new Map,c=fu(r),h=Me(0),v=Jt,m=M=>{if(Jt===v)return M();var R=ue,T=Jt;Be(null),au(v);var D=M();return Be(R),au(T),D};c&&(s.set("length",Me(r.length)),Y&&(r=Sl(r)));var S="";let w=!1;function P(M){if(!w){w=!0,S=M,at(h,`${S} version`);for(const[R,T]of s)at(T,Gt(S,R));w=!1}}return new Proxy(r,{defineProperty(M,R,T){(!("value"in T)||T.configurable===!1||T.enumerable===!1||T.writable===!1)&&Us();var D=s.get(R);return D===void 0?D=m(()=>{var U=Me(T.value);return s.set(R,U),Y&&typeof R=="string"&&at(U,Gt(S,R)),U}):Ee(D,T.value,!0),!0},deleteProperty(M,R){var T=s.get(R);if(T===void 0){if(R in M){const D=m(()=>Me(Oe));s.set(R,D),Wn(h),Y&&at(D,Gt(S,R))}}else Ee(T,Oe),Wn(h);return!0},get(M,R,T){if(R===Un)return r;if(Y&&R===vu)return P;var D=s.get(R),U=R in M;if(D===void 0&&(!U||mn(M,R)?.writable)&&(D=m(()=>{var F=yn(U?M[R]:Oe),X=Me(F);return Y&&at(X,Gt(S,R)),X}),s.set(R,D)),D!==void 0){var H=G(D);return H===Oe?void 0:H}return Reflect.get(M,R,T)},getOwnPropertyDescriptor(M,R){var T=Reflect.getOwnPropertyDescriptor(M,R);if(T&&"value"in T){var D=s.get(R);D&&(T.value=G(D))}else if(T===void 0){var U=s.get(R),H=U?.v;if(U!==void 0&&H!==Oe)return{enumerable:!0,configurable:!0,value:H,writable:!0}}return T},has(M,R){if(R===Un)return!0;var T=s.get(R),D=T!==void 0&&T.v!==Oe||Reflect.has(M,R);if(T!==void 0||le!==null&&(!D||mn(M,R)?.writable)){T===void 0&&(T=m(()=>{var H=D?yn(M[R]):Oe,F=Me(H);return Y&&at(F,Gt(S,R)),F}),s.set(R,T));var U=G(T);if(U===Oe)return!1}return D},set(M,R,T,D){var U=s.get(R),H=R in M;if(c&&R==="length")for(var F=T;F<U.v;F+=1){var X=s.get(F+"");X!==void 0?Ee(X,Oe):F in M&&(X=m(()=>Me(Oe)),s.set(F+"",X),Y&&at(X,Gt(S,F)))}if(U===void 0)(!H||mn(M,R)?.writable)&&(U=m(()=>Me(void 0)),Y&&at(U,Gt(S,R)),Ee(U,yn(T)),s.set(R,U));else{H=U.v!==Oe;var oe=m(()=>yn(T));Ee(U,oe)}var te=Reflect.getOwnPropertyDescriptor(M,R);if(te?.set&&te.set.call(D,T),!H){if(c&&typeof R=="string"){var Z=s.get("length"),ae=Number(R);Number.isInteger(ae)&&ae>=Z.v&&Ee(Z,ae+1)}Wn(h)}return!0},ownKeys(M){G(h);var R=Reflect.ownKeys(M).filter(U=>{var H=s.get(U);return H===void 0||H.v!==Oe});for(var[T,D]of s)D.v!==Oe&&!(T in M)&&R.push(T);return R},setPrototypeOf(){Ws()}})}function Gt(r,u){return typeof u=="symbol"?`${r}[Symbol(${u.description??""})]`:El.test(u)?`${r}.${u}`:/^\d+$/.test(u)?`${r}[${u}]`:`${r}['${u}']`}function Bi(r){try{if(r!==null&&typeof r=="object"&&Un in r)return r[Un]}catch{}return r}const kl=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Sl(r){return new Proxy(r,{get(u,s,c){var h=Reflect.get(u,s,c);return kl.has(s)?function(...v){xl();var m=h.apply(this,v);return Du(),m}:h}})}function Al(){const r=Array.prototype,u=Array.__svelte_cleanup;u&&u();const{indexOf:s,lastIndexOf:c,includes:h}=r;r.indexOf=function(v,m){const S=s.call(this,v,m);if(S===-1){for(let w=m??0;w<this.length;w+=1)if(Bi(this[w])===v){Ki("array.indexOf(...)");break}}return S},r.lastIndexOf=function(v,m){const S=c.call(this,v,m??this.length-1);if(S===-1){for(let w=0;w<=(m??this.length-1);w+=1)if(Bi(this[w])===v){Ki("array.lastIndexOf(...)");break}}return S},r.includes=function(v,m){const S=h.call(this,v,m);if(!S){for(let w=0;w<this.length;w+=1)if(Bi(this[w])===v){Ki("array.includes(...)");break}}return S},Array.__svelte_cleanup=()=>{r.indexOf=s,r.lastIndexOf=c,r.includes=h}}var ru,ra,Ku,Ru;function Tl(){if(ru===void 0){ru=window,ra=/Firefox/.test(navigator.userAgent);var r=Element.prototype,u=Node.prototype,s=Text.prototype;Ku=mn(u,"firstChild").get,Ru=mn(u,"nextSibling").get,Za(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Za(s)&&(s.__t=void 0),Y&&(r.__svelte_meta=null,Al())}}function jt(r=""){return document.createTextNode(r)}function Fr(r){return Ku.call(r)}function tr(r){return Ru.call(r)}function ge(r,u){return Fr(r)}function Xt(r,u=!1){{var s=Fr(r);return s instanceof Comment&&s.data===""?tr(s):s}}function Ce(r,u=1,s=!1){let c=r;for(;u--;)c=tr(c);return c}function Ol(r){r.textContent=""}function Mu(){return!1}function ia(r){var u=ue,s=le;Be(null),Je(null);try{return r()}finally{Be(u),Je(s)}}function Cl(r){le===null&&(ue===null&&$s(r),Ls()),An&&Ns(r)}function Il(r,u){var s=u.last;s===null?u.last=u.first=r:(s.next=r,r.prev=s,u.last=r)}function Nt(r,u,s){var c=le;if(Y)for(;c!==null&&(c.f&Rr)!==0;)c=c.parent;c!==null&&(c.f&Ue)!==0&&(r|=Ue);var h={ctx:Fe,deps:null,nodes_start:null,nodes_end:null,f:r|Ne|Ze,first:null,fn:u,last:null,next:null,parent:c,b:c&&c.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(Y&&(h.component_function=Xn),s)try{Gn(h),h.f|=Gi}catch(S){throw je(h),S}else u!==null&&Zt(h);var v=h;if(s&&v.deps===null&&v.teardown===null&&v.nodes_start===null&&v.first===v.last&&(v.f&Sn)===0&&(v=v.first,(r&mt)!==0&&(r&bn)!==0&&v!==null&&(v.f|=bn)),v!==null&&(v.parent=c,c!==null&&Il(v,c),ue!==null&&(ue.f&ke)!==0&&(r&tn)===0)){var m=ue;(m.effects??=[]).push(v)}return h}function Hn(){return ue!==null&&!lt}function aa(r){const u=Nt(qi,null,!1);return De(u,Ie),u.teardown=r,u}function ua(r){Cl("$effect"),Y&&Bt(r,"name",{value:"$effect"});var u=le.f,s=!ue&&(u&_t)!==0&&(u&Gi)===0;if(s){var c=Fe;(c.e??=[]).push(r)}else return Bu(r)}function Bu(r){return Nt(du|Bs,r,!1)}function Dl(r){st.ensure();const u=Nt(tn|Sn,r,!0);return(s={})=>new Promise(c=>{s.outro?_n(u,()=>{je(u),c(void 0)}):(je(u),c(void 0))})}function Pl(r){return Nt(Ur|Sn,r,!0)}function Kl(r,u=0){return Nt(qi|u,r,!0)}function Yn(r,u=[],s=[],c=[]){yl(c,u,s,h=>{Nt(qi,()=>r(...h.map(G)),!0)})}function oa(r,u=0){var s=Nt(mt|u,r,!0);return Y&&(s.dev_stack=Qn),s}function He(r){return Nt(_t|Sn,r,!0)}function Fu(r){var u=r.teardown;if(u!==null){const s=An,c=ue;iu(!0),Be(null);try{u.call(null)}finally{iu(s),Be(c)}}}function ju(r,u=!1){var s=r.first;for(r.first=r.last=null;s!==null;){const h=s.ac;h!==null&&ia(()=>{h.abort(vn)});var c=s.next;(s.f&tn)!==0?s.parent=null:je(s,u),s=c}}function Rl(r){for(var u=r.first;u!==null;){var s=u.next;(u.f&_t)===0&&je(u),u=s}}function je(r,u=!0){var s=!1;(u||(r.f&hu)!==0)&&r.nodes_start!==null&&r.nodes_end!==null&&(Ml(r.nodes_start,r.nodes_end),s=!0),ju(r,u&&!s),Nr(r,0),De(r,Dt);var c=r.transitions;if(c!==null)for(const v of c)v.stop();Fu(r);var h=r.parent;h!==null&&h.first!==null&&Nu(r),Y&&(r.component_function=null),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=r.ac=null}function Ml(r,u){for(;r!==null;){var s=r===u?null:tr(r);r.remove(),r=s}}function Nu(r){var u=r.parent,s=r.prev,c=r.next;s!==null&&(s.next=c),c!==null&&(c.prev=s),u!==null&&(u.first===r&&(u.first=c),u.last===r&&(u.last=s))}function _n(r,u,s=!0){var c=[];sa(r,c,!0),Lu(c,()=>{s&&je(r),u&&u()})}function Lu(r,u){var s=r.length;if(s>0){var c=()=>--s||u();for(var h of r)h.out(c)}else u()}function sa(r,u,s){if((r.f&Ue)===0){if(r.f^=Ue,r.transitions!==null)for(const m of r.transitions)(m.is_global||s)&&u.push(m);for(var c=r.first;c!==null;){var h=c.next,v=(c.f&bn)!==0||(c.f&_t)!==0&&(r.f&mt)!==0;sa(c,u,v?s:!1),c=h}}}function la(r){$u(r,!0)}function $u(r,u){if((r.f&Ue)!==0){r.f^=Ue,(r.f&Ie)===0&&(De(r,Ne),Zt(r));for(var s=r.first;s!==null;){var c=s.next,h=(s.f&bn)!==0||(s.f&_t)!==0;$u(s,h?u:!1),s=c}if(r.transitions!==null)for(const v of r.transitions)(v.is_global||u)&&v.in()}}function Vu(r,u){for(var s=r.nodes_start,c=r.nodes_end;s!==null;){var h=s===c?null:tr(s);u.append(s),s=h}}let Rt=!1;function jr(r){Rt=r}let An=!1;function iu(r){An=r}let ue=null,lt=!1;function Be(r){ue=r}let le=null;function Je(r){le=r}let pt=null;function zu(r){ue!==null&&(pt===null?pt=[r]:pt.push(r))}let Ke=null,ze=0,Qe=null;function Bl(r){Qe=r}let Uu=1,qn=0,Jt=qn;function au(r){Jt=r}function Wu(){return++Uu}function nr(r){var u=r.f;if((u&Ne)!==0)return!0;if(u&ke&&(r.f&=~Ft),(u&gt)!==0){var s=r.deps;if(s!==null)for(var c=s.length,h=0;h<c;h++){var v=s[h];if(nr(v)&&Cu(v),v.wv>r.wv)return!0}(u&Ze)!==0&&qe===null&&De(r,Ie)}return!1}function Yu(r,u,s=!0){var c=r.reactions;if(c!==null&&!pt?.includes(r))for(var h=0;h<c.length;h++){var v=c[h];(v.f&ke)!==0?Yu(v,u,!1):u===v&&(s?De(v,Ne):(v.f&Ie)!==0&&De(v,gt),Zt(v))}}function Vi(r){var u=Ke,s=ze,c=Qe,h=ue,v=pt,m=Fe,S=lt,w=Jt,P=r.f;Ke=null,ze=0,Qe=null,ue=(P&(_t|tn))===0?r:null,pt=null,wn(r.ctx),lt=!1,Jt=++qn,r.ac!==null&&(ia(()=>{r.ac.abort(vn)}),r.ac=null);try{r.f|=ji;var M=r.fn,R=M(),T=r.deps;if(Ke!==null){var D;if(Nr(r,ze),T!==null&&ze>0)for(T.length=ze+Ke.length,D=0;D<Ke.length;D++)T[ze+D]=Ke[D];else r.deps=T=Ke;if(Rt&&Hn()&&(r.f&Ze)!==0)for(D=ze;D<T.length;D++)(T[D].reactions??=[]).push(r)}else T!==null&&ze<T.length&&(Nr(r,ze),T.length=ze);if(Eu()&&Qe!==null&&!lt&&T!==null&&(r.f&(ke|gt|Ne))===0)for(D=0;D<Qe.length;D++)Yu(Qe[D],r);return h!==null&&h!==r&&(qn++,Qe!==null&&(c===null?c=Qe:c.push(...Qe))),(r.f&Pt)!==0&&(r.f^=Pt),R}catch(U){return ku(U)}finally{r.f^=ji,Ke=u,ze=s,Qe=c,ue=h,pt=v,wn(m),lt=S,Jt=w}}function Fl(r,u){let s=u.reactions;if(s!==null){var c=Is.call(s,r);if(c!==-1){var h=s.length-1;h===0?s=u.reactions=null:(s[c]=s[h],s.pop())}}s===null&&(u.f&ke)!==0&&(Ke===null||!Ke.includes(u))&&(De(u,gt),(u.f&Ze)!==0&&(u.f^=Ze,u.f&=~Ft),$i(u),Nr(u,0))}function Nr(r,u){var s=r.deps;if(s!==null)for(var c=u;c<s.length;c++)Fl(r,s[c])}function Gn(r){var u=r.f;if((u&Dt)===0){De(r,Ie);var s=le,c=Rt;if(le=r,Rt=!0,Y){var h=Xn;eu(r.component_function);var v=Qn;Mr(r.dev_stack??Qn)}try{(u&(mt|Ms))!==0?Rl(r):ju(r),Fu(r);var m=Vi(r);r.teardown=typeof m=="function"?m:null,r.wv=Uu;var S;Y&&nl&&(r.f&Ne)!==0&&r.deps}finally{Rt=c,le=s,Y&&(eu(h),Mr(v))}}}function G(r){var u=r.f,s=(u&ke)!==0;if(ue!==null&&!lt){var c=le!==null&&(le.f&Dt)!==0;if(!c&&!pt?.includes(r)){var h=ue.deps;if((ue.f&ji)!==0)r.rv<qn&&(r.rv=qn,Ke===null&&h!==null&&h[ze]===r?ze++:Ke===null?Ke=[r]:Ke.includes(r)||Ke.push(r));else{(ue.deps??=[]).push(r);var v=r.reactions;v===null?r.reactions=[ue]:v.includes(ue)||v.push(ue)}}}if(Y&&_l.delete(r),An){if(Kt.has(r))return Kt.get(r);if(s){var m=r,S=m.v;return((m.f&Ie)===0&&m.reactions!==null||Hu(m))&&(S=ta(m)),Kt.set(m,S),S}}else s&&(!qe?.has(r)||ye?.is_fork&&!Hn())&&(m=r,nr(m)&&Cu(m),Rt&&Hn()&&(m.f&Ze)===0&&Qu(m));if(qe?.has(r))return qe.get(r);if((r.f&Pt)!==0)throw r.v;return r.v}function Qu(r){if(r.deps!==null){r.f^=Ze;for(const u of r.deps)(u.reactions??=[]).push(r),(u.f&ke)!==0&&(u.f&Ze)===0&&Qu(u)}}function Hu(r){if(r.v===Oe)return!0;if(r.deps===null)return!1;for(const u of r.deps)if(Kt.has(u)||(u.f&ke)!==0&&Hu(u))return!0;return!1}function qu(r){var u=lt;try{return lt=!0,r()}finally{lt=u}}const jl=-7169;function De(r,u){r.f=r.f&jl|u}const Nl=["touchstart","touchmove"];function Ll(r){return Nl.includes(r)}const Gu=new Set,zi=new Set;function $l(r,u,s,c={}){function h(v){if(c.capture||zn.call(u,v),!v.cancelBubble)return ia(()=>s?.call(this,v))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?er(()=>{u.addEventListener(r,h,c)}):u.addEventListener(r,h,c),h}function Fi(r,u,s,c,h){var v={capture:c,passive:h},m=$l(r,u,s,v);(u===document.body||u===window||u===document||u instanceof HTMLMediaElement)&&aa(()=>{u.removeEventListener(r,m,v)})}function fa(r){for(var u=0;u<r.length;u++)Gu.add(r[u]);for(var s of zi)s(r)}let uu=null;function zn(r){var u=this,s=u.ownerDocument,c=r.type,h=r.composedPath?.()||[],v=h[0]||r.target;uu=r;var m=0,S=uu===r&&r.__root;if(S){var w=h.indexOf(S);if(w!==-1&&(u===document||u===window)){r.__root=u;return}var P=h.indexOf(u);if(P===-1)return;w<=P&&(m=w)}if(v=h[m]||r.target,v!==u){Bt(r,"currentTarget",{configurable:!0,get(){return v||s}});var M=ue,R=le;Be(null),Je(null);try{for(var T,D=[];v!==null;){var U=v.assignedSlot||v.parentNode||v.host||null;try{var H=v["__"+c];H!=null&&(!v.disabled||r.target===v)&&H.call(v,r)}catch(F){T?D.push(F):T=F}if(r.cancelBubble||U===u||U===null)break;v=U}if(T){for(let F of D)queueMicrotask(()=>{throw F});throw T}}finally{r.__root=u,delete r.currentTarget,Be(M),Je(R)}}}function Vl(r){var u=document.createElement("template");return u.innerHTML=r.replaceAll("<!>","<!---->"),u.content}function Ui(r,u){var s=le;s.nodes_start===null&&(s.nodes_start=r,s.nodes_end=u)}function Le(r,u){var s=(u&Gs)!==0,c=(u&Xs)!==0,h,v=!r.startsWith("<!>");return()=>{h===void 0&&(h=Vl(v?r:"<!>"+r),s||(h=Fr(h)));var m=c||ra?document.importNode(h,!0):h.cloneNode(!0);if(s){var S=Fr(m),w=m.lastChild;Ui(S,w)}else Ui(m,m);return m}}function gn(){var r=document.createDocumentFragment(),u=document.createComment(""),s=jt();return r.append(u,s),Ui(u,s),r}function be(r,u){r!==null&&r.before(u)}function Mt(r,u){var s=u==null?"":typeof u=="object"?u+"":u;s!==(r.__t??=r.nodeValue)&&(r.__t=s,r.nodeValue=s+"")}function zl(r,u){return Ul(r,u)}const hn=new Map;function Ul(r,{target:u,anchor:s,props:c={},events:h,context:v,intro:m=!0}){Tl();var S=new Set,w=R=>{for(var T=0;T<R.length;T++){var D=R[T];if(!S.has(D)){S.add(D);var U=Ll(D);u.addEventListener(D,zn,{passive:U});var H=hn.get(D);H===void 0?(document.addEventListener(D,zn,{passive:U}),hn.set(D,1)):hn.set(D,H+1)}}};w(Hi(Gu)),zi.add(w);var P=void 0,M=Dl(()=>{var R=s??u.appendChild(jt());return cl(R,{pending:()=>{}},T=>{if(v){Jn({});var D=Fe;D.c=v}h&&(c.$$events=h),P=r(T,c)||{},v&&Zn()}),()=>{for(var T of S){u.removeEventListener(T,zn);var D=hn.get(T);--D===0?(document.removeEventListener(T,zn),hn.delete(T)):hn.set(T,D)}zi.delete(w),R!==s&&R.parentNode?.removeChild(R)}});return Wl.set(P,M),P}let Wl=new WeakMap;class Yl{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#s=!0;constructor(u,s=!0){this.anchor=u,this.#s=s}#a=()=>{var u=ye;if(this.#e.has(u)){var s=this.#e.get(u),c=this.#t.get(s);if(c)la(c),this.#n.delete(s);else{var h=this.#r.get(s);h&&(this.#t.set(s,h.effect),this.#r.delete(s),h.fragment.lastChild.remove(),this.anchor.before(h.fragment),c=h.effect)}for(const[v,m]of this.#e){if(this.#e.delete(v),v===u)break;const S=this.#r.get(m);S&&(je(S.effect),this.#r.delete(m))}for(const[v,m]of this.#t){if(v===s||this.#n.has(v))continue;const S=()=>{if(Array.from(this.#e.values()).includes(v)){var P=document.createDocumentFragment();Vu(m,P),P.append(jt()),this.#r.set(v,{effect:m,fragment:P})}else je(m);this.#n.delete(v),this.#t.delete(v)};this.#s||!c?(this.#n.add(v),_n(m,S,!1)):S()}}};#i=u=>{this.#e.delete(u);const s=Array.from(this.#e.values());for(const[c,h]of this.#r)s.includes(c)||(je(h.effect),this.#r.delete(c))};ensure(u,s){var c=ye,h=Mu();if(s&&!this.#t.has(u)&&!this.#r.has(u))if(h){var v=document.createDocumentFragment(),m=jt();v.append(m),this.#r.set(u,{effect:He(()=>s(m)),fragment:v})}else this.#t.set(u,He(()=>s(this.anchor)));if(this.#e.set(c,u),h){for(const[S,w]of this.#t)S===u?c.skipped_effects.delete(w):c.skipped_effects.add(w);for(const[S,w]of this.#r)S===u?c.skipped_effects.delete(w.effect):c.skipped_effects.add(w.effect);c.oncommit(this.#a),c.ondiscard(this.#i)}else this.#a()}}function yt(r,u,s=!1){var c=new Yl(r),h=s?bn:0;function v(m,S){c.ensure(m,S)}oa(()=>{var m=!1;u((S,w=!0)=>{m=!0,v(w,S)}),m||v(!1,null)},h)}function Xu(r){var u,s,c="";if(typeof r=="string"||typeof r=="number")c+=r;else if(typeof r=="object")if(Array.isArray(r)){var h=r.length;for(u=0;u<h;u++)r[u]&&(s=Xu(r[u]))&&(c&&(c+=" "),c+=s)}else for(s in r)r[s]&&(c&&(c+=" "),c+=s);return c}function Ql(){for(var r,u,s=0,c="",h=arguments.length;s<h;s++)(r=arguments[s])&&(u=Xu(r))&&(c&&(c+=" "),c+=u);return c}function Hl(r){return typeof r=="object"?Ql(r):r??""}function ql(r,u,s){var c=r==null?"":""+r;return c===""?null:c}function Gl(r,u,s,c,h,v){var m=r.__className;if(m!==s||m===void 0){var S=ql(s);S==null?r.removeAttribute("class"):r.className=S,r.__className=s}return v}const Xl=Symbol("is custom element"),Jl=Symbol("is html");function Zl(r,u){var s=Ju(r);s.value===(s.value=u??void 0)||r.value===u&&(u!==0||r.nodeName!=="PROGRESS")||(r.value=u??"")}function ef(r,u){var s=Ju(r);s.checked!==(s.checked=u??void 0)&&(r.checked=u)}function Ju(r){return r.__attributes??={[Xl]:r.nodeName.includes("-"),[Jl]:r.namespaceURI===Zs}}function Zu(r,u,s){if(r==null)return u(void 0),Kr;const c=qu(()=>r.subscribe(u,s));return c.unsubscribe?()=>c.unsubscribe():c}function tf(r){let u;return Zu(r,s=>u=s)(),u}let Wi=Symbol();function Lr(r,u,s){const c=s[u]??={store:null,source:Iu(void 0),unsubscribe:Kr};if(Y&&(c.source.label=u),c.store!==r&&!(Wi in s))if(c.unsubscribe(),c.store=r??null,r==null)c.source.v=void 0,c.unsubscribe=Kr;else{var h=!0;c.unsubscribe=Zu(r,v=>{h?c.source.v=v:Ee(c.source,v)}),h=!1}return r&&Wi in s?tf(r):G(c.source)}function Yi(r,u,s){let c=s[u];return c&&c.store!==r&&(c.unsubscribe(),c.unsubscribe=Kr),r}function ca(){const r={};function u(){aa(()=>{for(var s in r)r[s].unsubscribe();Bt(r,Wi,{enumerable:!1,value:!0})})}return[r,u]}if(Y){let r=function(u){if(!(u in globalThis)){let s;Object.defineProperty(globalThis,u,{configurable:!0,get:()=>{if(s!==void 0)return s;zs(u)},set:c=>{s=c}})}};var Yf=r;r("$state"),r("$effect"),r("$derived"),r("$inspect"),r("$props"),r("$bindable")}const nf="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(nf);var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function af(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Pr={exports:{}},uf=Pr.exports,ou;function of(){return ou||(ou=1,(function(r,u){(function(s,c){r.exports=c()})(uf,(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},s(e,t)};function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var h=function(){return h=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},h.apply(this,arguments)};function v(e,t,n){for(var i=0,a=t.length,o;i<a;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}var m=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:rf,S=Object.keys,w=Array.isArray;typeof Promise<"u"&&!m.Promise&&(m.Promise=Promise);function P(e,t){return typeof t!="object"||S(t).forEach(function(n){e[n]=t[n]}),e}var M=Object.getPrototypeOf,R={}.hasOwnProperty;function T(e,t){return R.call(e,t)}function D(e,t){typeof t=="function"&&(t=t(M(e))),(typeof Reflect>"u"?S:Reflect.ownKeys)(t).forEach(function(n){H(e,n,t[n])})}var U=Object.defineProperty;function H(e,t,n,i){U(e,t,P(n&&T(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function F(e){return{from:function(t){return e.prototype=Object.create(t.prototype),H(e.prototype,"constructor",e),{extend:D.bind(null,e.prototype)}}}}var X=Object.getOwnPropertyDescriptor;function oe(e,t){var n=X(e,t),i;return n||(i=M(e))&&oe(i,t)}var te=[].slice;function Z(e,t,n){return te.call(e,t,n)}function ae(e,t){return t(e)}function fe(e){if(!e)throw new Error("Assertion Failed")}function de(e){m.setImmediate?setImmediate(e):setTimeout(e,0)}function pe(e,t){return e.reduce(function(n,i,a){var o=t(i,a);return o&&(n[o[0]]=o[1]),n},{})}function se(e,t){if(typeof t=="string"&&T(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],i=0,a=t.length;i<a;++i){var o=se(e,t[i]);n.push(o)}return n}var l=t.indexOf(".");if(l!==-1){var f=e[t.substr(0,l)];return f==null?void 0:se(f,t.substr(l+1))}}function ne(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){fe(typeof n!="string"&&"length"in n);for(var i=0,a=t.length;i<a;++i)ne(e,t[i],n[i])}else{var o=t.indexOf(".");if(o!==-1){var l=t.substr(0,o),f=t.substr(o+1);if(f==="")n===void 0?w(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=n;else{var d=e[l];(!d||!T(e,l))&&(d=e[l]={}),ne(d,f,n)}}else n===void 0?w(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Se(e,t){typeof t=="string"?ne(e,t,void 0):"length"in t&&[].map.call(t,function(n){ne(e,n,void 0)})}function he(e){var t={};for(var n in e)T(e,n)&&(t[n]=e[n]);return t}var we=[].concat;function We(e){return we.apply([],e)}var et="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(We([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return m[e]}),$e=new Set(et.map(function(e){return m[e]}));function Ge(e){var t={};for(var n in e)if(T(e,n)){var i=e[n];t[n]=!i||typeof i!="object"||$e.has(i.constructor)?i:Ge(i)}return t}function bt(e){for(var t in e)if(T(e,t))return!1;return!0}var wt=null;function ft(e){wt=new WeakMap;var t=nn(e);return wt=null,t}function nn(e){if(!e||typeof e!="object")return e;var t=wt.get(e);if(t)return t;if(w(e)){t=[],wt.set(e,t);for(var n=0,i=e.length;n<i;++n)t.push(nn(e[n]))}else if($e.has(e.constructor))t=e;else{var a=M(e);t=a===Object.prototype?{}:Object.create(a),wt.set(e,t);for(var o in e)T(e,o)&&(t[o]=nn(e[o]))}return t}var Wr={}.toString;function Tn(e){return Wr.call(e).slice(8,-1)}var On=typeof Symbol<"u"?Symbol.iterator:"@@iterator",to=typeof On=="symbol"?function(e){var t;return e!=null&&(t=e[On])&&t.apply(e)}:function(){return null};function Lt(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var rn={};function ct(e){var t,n,i,a;if(arguments.length===1){if(w(e))return e.slice();if(this===rn&&typeof e=="string")return[e];if(a=to(e)){for(n=[];i=a.next(),!i.done;)n.push(i.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Yr=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},no=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],da=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qr=no.concat(da),ro={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function an(e,t){this.name=e,this.message=t}F(an).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ha(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,i,a){return a.indexOf(n)===i}).join(`
`)}function rr(e,t,n,i){this.failures=t,this.failedKeys=i,this.successCount=n,this.message=ha(e,t)}F(rr).from(an);function un(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=ha(e,this.failures)}F(un).from(an);var Hr=Qr.reduce(function(e,t){return e[t]=t+"Error",e},{}),io=an,W=Qr.reduce(function(e,t){var n=t+"Error";function i(a,o){this.name=n,a?typeof a=="string"?(this.message="".concat(a).concat(o?`
 `+o:""),this.inner=o||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=ro[t]||n,this.inner=null)}return F(i).from(io),e[t]=i,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var va=da.reduce(function(e,t){return e[t+"Error"]=W[t],e},{});function ao(e,t){if(!e||e instanceof an||e instanceof TypeError||e instanceof SyntaxError||!e.name||!va[e.name])return e;var n=new va[e.name](t||e.message,e);return"stack"in e&&H(n,"stack",{get:function(){return this.inner.stack}}),n}var ir=Qr.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=W[t]),e},{});ir.ModifyError=rr,ir.DexieError=an,ir.BulkError=un;function ce(){}function Cn(e){return e}function uo(e,t){return e==null||e===Cn?t:function(n){return t(e(n))}}function $t(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function oo(e,t){return e===ce?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?$t(i,this.onsuccess):i),a&&(this.onerror=this.onerror?$t(a,this.onerror):a),o!==void 0?o:n}}function so(e,t){return e===ce?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?$t(n,this.onsuccess):n),i&&(this.onerror=this.onerror?$t(i,this.onerror):i)}}function lo(e,t){return e===ce?t:function(n){var i=e.apply(this,arguments);P(n,i);var a=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?$t(a,this.onsuccess):a),o&&(this.onerror=this.onerror?$t(o,this.onerror):o),i===void 0?l===void 0?void 0:l:P(i,l)}}function fo(e,t){return e===ce?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function qr(e,t){return e===ce?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var i=this,a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return n.then(function(){return t.apply(i,o)})}return t.apply(this,arguments)}}var tt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function pa(e,t){tt=e}var In={},ya=100,Gr=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,M(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,M(t),e]})(),ma=Gr[0],_a=Gr[1],co=Gr[2],ho=_a&&_a.then,Vt=ma&&ma.constructor,Xr=!!co;function vo(){queueMicrotask(yo)}var Dn=function(e,t){Pn.push([e,t]),ar&&(vo(),ar=!1)},Jr=!0,ar=!0,zt=[],ur=[],Zr=Cn,xt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ce,pgp:!1,env:{},finalize:ce},V=xt,Pn=[],Ut=0,or=[];function N(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=V;if(typeof e!="function"){if(e!==In)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ti(this,this._value);return}this._state=null,this._value=null,++t.ref,ba(this,e)}var ei={get:function(){var e=V,t=cr;function n(i,a){var o=this,l=!e.global&&(e!==V||t!==cr),f=l&&!kt(),d=new N(function(p,g){ni(o,new ga(Ea(i,e,l,f),Ea(a,e,l,f),p,g,e))});return this._consoleTask&&(d._consoleTask=this._consoleTask),d}return n.prototype=In,n},set:function(e){H(this,"then",e&&e.prototype===In?ei:{get:function(){return e},set:ei.set})}};D(N.prototype,{then:ei,_then:function(e,t){ni(this,new ga(null,null,e,t,V))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(i){return i instanceof t?n(i):sr(i)}):this.then(null,function(i){return i&&i.name===t?n(i):sr(i)})},finally:function(e){return this.then(function(t){return N.resolve(e()).then(function(){return t})},function(t){return N.resolve(e()).then(function(){return sr(t)})})},timeout:function(e,t){var n=this;return e<1/0?new N(function(i,a){var o=setTimeout(function(){return a(new W.Timeout(t))},e);n.then(i,a).finally(clearTimeout.bind(null,o))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&H(N.prototype,Symbol.toStringTag,"Dexie.Promise"),xt.env=xa();function ga(e,t,n,i,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=i,this.psd=a}D(N,{all:function(){var e=ct.apply(null,arguments).map(dr);return new N(function(t,n){e.length===0&&t([]);var i=e.length;e.forEach(function(a,o){return N.resolve(a).then(function(l){e[o]=l,--i||t(e)},n)})})},resolve:function(e){if(e instanceof N)return e;if(e&&typeof e.then=="function")return new N(function(n,i){e.then(n,i)});var t=new N(In,!0,e);return t},reject:sr,race:function(){var e=ct.apply(null,arguments).map(dr);return new N(function(t,n){e.map(function(i){return N.resolve(i).then(t,n)})})},PSD:{get:function(){return V},set:function(e){return V=e}},totalEchoes:{get:function(){return cr}},newPSD:Et,usePSD:Wt,scheduler:{get:function(){return Dn},set:function(e){Dn=e}},rejectionMapper:{get:function(){return Zr},set:function(e){Zr=e}},follow:function(e,t){return new N(function(n,i){return Et(function(a,o){var l=V;l.unhandleds=[],l.onunhandled=o,l.finalize=$t(function(){var f=this;mo(function(){f.unhandleds.length===0?a():o(f.unhandleds[0])})},l.finalize),e()},t,n,i)})}}),Vt&&(Vt.allSettled&&H(N,"allSettled",function(){var e=ct.apply(null,arguments).map(dr);return new N(function(t){e.length===0&&t([]);var n=e.length,i=new Array(n);e.forEach(function(a,o){return N.resolve(a).then(function(l){return i[o]={status:"fulfilled",value:l}},function(l){return i[o]={status:"rejected",reason:l}}).then(function(){return--n||t(i)})})})}),Vt.any&&typeof AggregateError<"u"&&H(N,"any",function(){var e=ct.apply(null,arguments).map(dr);return new N(function(t,n){e.length===0&&n(new AggregateError([]));var i=e.length,a=new Array(i);e.forEach(function(o,l){return N.resolve(o).then(function(f){return t(f)},function(f){a[l]=f,--i||n(new AggregateError(a))})})})}),Vt.withResolvers&&(N.withResolvers=Vt.withResolvers));function ba(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var i=e._lib&&on();n&&typeof n.then=="function"?ba(e,function(a,o){n instanceof N?n._then(a,o):n.then(a,o)}):(e._state=!0,e._value=n,wa(e)),i&&sn()}},ti.bind(null,e))}catch(n){ti(e,n)}}function ti(e,t){if(ur.push(t),e._state===null){var n=e._lib&&on();t=Zr(t),e._state=!1,e._value=t,_o(e),wa(e),n&&sn()}}function wa(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)ni(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),Ut===0&&(++Ut,Dn(function(){--Ut===0&&ri()},[]))}function ni(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ut,Dn(po,[n,e,t])}function po(e,t,n){try{var i,a=t._value;!t._state&&ur.length&&(ur=[]),i=tt&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),!t._state&&ur.indexOf(a)===-1&&go(t),n.resolve(i)}catch(o){n.reject(o)}finally{--Ut===0&&ri(),--n.psd.ref||n.psd.finalize()}}function yo(){Wt(xt,function(){on()&&sn()})}function on(){var e=Jr;return Jr=!1,ar=!1,e}function sn(){var e,t,n;do for(;Pn.length>0;)for(e=Pn,Pn=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}while(Pn.length>0);Jr=!0,ar=!0}function ri(){var e=zt;zt=[],e.forEach(function(i){i._PSD.onunhandled.call(null,i._value,i)});for(var t=or.slice(0),n=t.length;n;)t[--n]()}function mo(e){function t(){e(),or.splice(or.indexOf(t),1)}or.push(t),++Ut,Dn(function(){--Ut===0&&ri()},[])}function _o(e){zt.some(function(t){return t._value===e._value})||zt.push(e)}function go(e){for(var t=zt.length;t;)if(zt[--t]._value===e._value){zt.splice(t,1);return}}function sr(e){return new N(In,!1,e)}function ve(e,t){var n=V;return function(){var i=on(),a=V;try{return St(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{St(a,!1),i&&sn()}}}var xe={awaits:0,echoes:0,id:0},bo=0,lr=[],fr=0,cr=0,wo=0;function Et(e,t,n,i){var a=V,o=Object.create(a);o.parent=a,o.ref=0,o.global=!1,o.id=++wo,xt.env,o.env=Xr?{Promise:N,PromiseProp:{value:N,configurable:!0,writable:!0},all:N.all,race:N.race,allSettled:N.allSettled,any:N.any,resolve:N.resolve,reject:N.reject}:{},t&&P(o,t),++a.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Wt(o,e,n,i);return o.ref===0&&o.finalize(),l}function ln(){return xe.id||(xe.id=++bo),++xe.awaits,xe.echoes+=ya,xe.id}function kt(){return xe.awaits?(--xe.awaits===0&&(xe.id=0),xe.echoes=xe.awaits*ya,!0):!1}(""+ho).indexOf("[native code]")===-1&&(ln=kt=ce);function dr(e){return xe.echoes&&e&&e.constructor===Vt?(ln(),e.then(function(t){return kt(),t},function(t){return kt(),_e(t)})):e}function xo(e){++cr,(!xe.echoes||--xe.echoes===0)&&(xe.echoes=xe.awaits=xe.id=0),lr.push(V),St(e,!0)}function Eo(){var e=lr[lr.length-1];lr.pop(),St(e,!1)}function St(e,t){var n=V;if((t?xe.echoes&&(!fr++||e!==V):fr&&(!--fr||e!==V))&&queueMicrotask(t?xo.bind(null,e):Eo),e!==V&&(V=e,n===xt&&(xt.env=xa()),Xr)){var i=xt.env.Promise,a=e.env;(n.global||e.global)&&(Object.defineProperty(m,"Promise",a.PromiseProp),i.all=a.all,i.race=a.race,i.resolve=a.resolve,i.reject=a.reject,a.allSettled&&(i.allSettled=a.allSettled),a.any&&(i.any=a.any))}}function xa(){var e=m.Promise;return Xr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(m,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Wt(e,t,n,i,a){var o=V;try{return St(e,!0),t(n,i,a)}finally{St(o,!1)}}function Ea(e,t,n,i){return typeof e!="function"?e:function(){var a=V;n&&ln(),St(t,!0);try{return e.apply(this,arguments)}finally{St(a,!1),i&&queueMicrotask(kt)}}}function ii(e){Promise===Vt&&xe.echoes===0?fr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var _e=N.reject;function ai(e,t,n,i){if(!e.idbdb||!e._state.openComplete&&!V.letThrough&&!e._vip){if(e._state.openComplete)return _e(new W.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return _e(new W.DatabaseClosed);e.open().catch(ce)}return e._state.dbReadyPromise.then(function(){return ai(e,t,n,i)})}else{var a=e._createTransaction(t,n,e._dbSchema);try{a.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Hr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return ai(e,t,n,i)})):_e(o)}return a._promise(t,function(o,l){return Et(function(){return V.trans=a,i(o,l,a)})}).then(function(o){if(t==="readwrite")try{a.idbtrans.commit()}catch{}return t==="readonly"?o:a._completion.then(function(){return o})})}}var ka="4.2.1",Yt="",ui=-1/0,dt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Sa="String expected.",fn=[],hr="__dbnames",oi="readonly",si="readwrite";function Qt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Aa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function vr(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=ft(t),delete t[e]),t}:function(t){return t}}function Ta(){throw W.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function re(e,t){try{var n=Oa(e),i=Oa(t);if(n!==i)return n==="Array"?1:i==="Array"?-1:n==="binary"?1:i==="binary"?-1:n==="string"?1:i==="string"?-1:n==="Date"?1:i!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return So(Ca(e),Ca(t));case"Array":return ko(e,t)}}catch{}return NaN}function ko(e,t){for(var n=e.length,i=t.length,a=n<i?n:i,o=0;o<a;++o){var l=re(e[o],t[o]);if(l!==0)return l}return n===i?0:n<i?-1:1}function So(e,t){for(var n=e.length,i=t.length,a=n<i?n:i,o=0;o<a;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===i?0:n<i?-1:1}function Oa(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Tn(e);return n==="ArrayBuffer"?"binary":n}function Ca(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function pr(e,t,n){var i=e.schema.yProps;return i?(t&&n.numFailures>0&&(t=t.filter(function(a,o){return!n.failures[o]})),Promise.all(i.map(function(a){var o=a.updatesTable;return t?e.db.table(o).where("k").anyOf(t).delete():e.db.table(o).clear()})).then(function(){return n})):n}var Kn=(function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var n,i=this["@@propmod"];if(i.add!==void 0){var a=i.add;if(w(a))return v(v([],w(t)?t:[],!0),a).sort();if(typeof a=="number")return(Number(t)||0)+a;if(typeof a=="bigint")try{return BigInt(t)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(i.remove!==void 0){var o=i.remove;if(w(o))return w(t)?t.filter(function(f){return!o.includes(f)}).sort():[];if(typeof o=="number")return Number(t)-o;if(typeof o=="bigint")try{return BigInt(t)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}var l=(n=i.replacePrefix)===null||n===void 0?void 0:n[0];return l&&typeof t=="string"&&t.startsWith(l)?i.replacePrefix[1]+t.substring(l.length):t},e})();function Ia(e,t){for(var n=S(t),i=n.length,a=!1,o=0;o<i;++o){var l=n[o],f=t[l],d=se(e,l);f instanceof Kn?(ne(e,l,f.execute(d)),a=!0):d!==f&&(ne(e,l,f),a=!0)}return a}var Da=(function(){function e(){}return e.prototype._trans=function(t,n,i){var a=this._tx||V.trans,o=this.name,l=tt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function f(g,y,E){if(!E.schema[o])throw new W.NotFound("Table "+o+" not part of transaction");return n(E.idbtrans,E)}var d=on();try{var p=a&&a.db._novip===this.db._novip?a===V.trans?a._promise(t,f,i):Et(function(){return a._promise(t,f,i)},{trans:a,transless:V.transless||V}):ai(this.db,t,[this.name],f);return l&&(p._consoleTask=l,p=p.catch(function(g){return console.trace(g),_e(g)})),p}finally{d&&sn()}},e.prototype.get=function(t,n){var i=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?_e(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return i.core.get({trans:a,key:t}).then(function(o){return i.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(w(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=S(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(g){if(g.compound&&n.every(function(E){return g.keyPath.indexOf(E)>=0})){for(var y=0;y<n.length;++y)if(n.indexOf(g.keyPath[y])===-1)return!1;return!0}return!1}).sort(function(g,y){return g.keyPath.length-y.keyPath.length})[0];if(i&&this.db._maxKey!==Yt){var a=i.keyPath.slice(0,n.length);return this.where(a).equals(a.map(function(g){return t[g]}))}!i&&tt&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var o=this.schema.idxByName;function l(g,y){return re(g,y)===0}var f=n.reduce(function(g,y){var E=g[0],K=g[1],_=o[y],b=t[y];return[E||_,E||!_?Qt(K,_&&_.multi?function(x){var k=se(x,y);return w(k)&&k.some(function(O){return l(b,O)})}:function(x){return l(b,se(x,y))}):K]},[null,null]),d=f[0],p=f[1];return d?this.where(d.name).equals(t[d.keyPath]).filter(p):i?this.filter(p):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,w(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var n=this,i=n.db,a=n.name;this.schema.mappedClass=t,t.prototype instanceof Ta&&(t=(function(d){c(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return Object.defineProperty(p.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),p.prototype.table=function(){return a},p})(t));for(var o=new Set,l=t.prototype;l;l=M(l))Object.getOwnPropertyNames(l).forEach(function(d){return o.add(d)});var f=function(d){if(!d)return d;var p=Object.create(t.prototype);for(var g in d)if(!o.has(g))try{p[g]=d[g]}catch{}return p};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=f,this.hook("reading",f),t},e.prototype.defineClass=function(){function t(n){P(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var i=this,a=this.schema.primKey,o=a.auto,l=a.keyPath,f=t;return l&&o&&(f=vr(l)(t)),this._trans("readwrite",function(d){return i.core.mutate({trans:d,type:"add",keys:n!=null?[n]:null,values:[f]})}).then(function(d){return d.numFailures?N.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{ne(t,l,d)}catch{}return d})},e.prototype.upsert=function(t,n){var i=this,a=this.schema.primKey.keyPath;return this._trans("readwrite",function(o){return i.core.get({trans:o,key:t}).then(function(l){var f=l??{};return Ia(f,n),a&&ne(f,a,t),i.core.mutate({trans:o,type:"put",values:[f],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[n]}}).then(function(d){return d.numFailures?N.reject(d.failures[0]):!!l})})})},e.prototype.update=function(t,n){if(typeof t=="object"&&!w(t)){var i=se(t,this.schema.primKey.keyPath);return i===void 0?_e(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var i=this,a=this.schema.primKey,o=a.auto,l=a.keyPath,f=t;return l&&o&&(f=vr(l)(t)),this._trans("readwrite",function(d){return i.core.mutate({trans:d,type:"put",values:[f],keys:n!=null?[n]:null})}).then(function(d){return d.numFailures?N.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{ne(t,l,d)}catch{}return d})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:[t]}).then(function(a){return pr(n,[t],a)}).then(function(a){return a.numFailures?N.reject(a.failures[0]):void 0})})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Aa}).then(function(i){return pr(t,null,i)})}).then(function(n){return n.numFailures?N.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(i){return n.core.getMany({keys:t,trans:i}).then(function(a){return a.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,i){var a=this,o=Array.isArray(n)?n:void 0;i=i||(o?void 0:n);var l=i?i.allKeys:void 0;return this._trans("readwrite",function(f){var d=a.schema.primKey,p=d.auto,g=d.keyPath;if(g&&o)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var y=t.length,E=g&&p?t.map(vr(g)):t;return a.core.mutate({trans:f,type:"add",keys:o,values:E,wantResults:l}).then(function(K){var _=K.numFailures,b=K.results,x=K.lastResult,k=K.failures,O=l?b:x;if(_===0)return O;throw new un("".concat(a.name,".bulkAdd(): ").concat(_," of ").concat(y," operations failed"),k)})})},e.prototype.bulkPut=function(t,n,i){var a=this,o=Array.isArray(n)?n:void 0;i=i||(o?void 0:n);var l=i?i.allKeys:void 0;return this._trans("readwrite",function(f){var d=a.schema.primKey,p=d.auto,g=d.keyPath;if(g&&o)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var y=t.length,E=g&&p?t.map(vr(g)):t;return a.core.mutate({trans:f,type:"put",keys:o,values:E,wantResults:l}).then(function(K){var _=K.numFailures,b=K.results,x=K.lastResult,k=K.failures,O=l?b:x;if(_===0)return O;throw new un("".concat(a.name,".bulkPut(): ").concat(_," of ").concat(y," operations failed"),k)})})},e.prototype.bulkUpdate=function(t){var n=this,i=this.core,a=t.map(function(f){return f.key}),o=t.map(function(f){return f.changes}),l=[];return this._trans("readwrite",function(f){return i.getMany({trans:f,keys:a,cache:"clone"}).then(function(d){var p=[],g=[];t.forEach(function(E,K){var _=E.key,b=E.changes,x=d[K];if(x){for(var k=0,O=Object.keys(b);k<O.length;k++){var C=O[k],I=b[C];if(C===n.schema.primKey.keyPath){if(re(I,_)!==0)throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else ne(x,C,I)}l.push(K),p.push(_),g.push(x)}});var y=p.length;return i.mutate({trans:f,type:"put",keys:p,values:g,updates:{keys:a,changeSpecs:o}}).then(function(E){var K=E.numFailures,_=E.failures;if(K===0)return y;for(var b=0,x=Object.keys(_);b<x.length;b++){var k=x[b],O=l[Number(k)];if(O!=null){var C=_[k];delete _[k],_[O]=C}}throw new un("".concat(n.name,".bulkUpdate(): ").concat(K," of ").concat(y," operations failed"),_)})})})},e.prototype.bulkDelete=function(t){var n=this,i=t.length;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"delete",keys:t}).then(function(o){return pr(n,t,o)})}).then(function(a){var o=a.numFailures,l=a.lastResult,f=a.failures;if(o===0)return l;throw new un("".concat(n.name,".bulkDelete(): ").concat(o," of ").concat(i," operations failed"),f)})},e})();function Rn(e){var t={},n=function(f,d){if(d){for(var p=arguments.length,g=new Array(p-1);--p;)g[p-1]=arguments[p];return t[f].subscribe.apply(null,g),e}else if(typeof f=="string")return t[f]};n.addEventType=o;for(var i=1,a=arguments.length;i<a;++i)o(arguments[i]);return n;function o(f,d,p){if(typeof f=="object")return l(f);d||(d=fo),p||(p=ce);var g={subscribers:[],fire:p,subscribe:function(y){g.subscribers.indexOf(y)===-1&&(g.subscribers.push(y),g.fire=d(g.fire,y))},unsubscribe:function(y){g.subscribers=g.subscribers.filter(function(E){return E!==y}),g.fire=g.subscribers.reduce(d,p)}};return t[f]=n[f]=g,g}function l(f){S(f).forEach(function(d){var p=f[d];if(w(p))o(d,f[d][0],f[d][1]);else if(p==="asap")var g=o(d,Cn,function(){for(var E=arguments.length,K=new Array(E);E--;)K[E]=arguments[E];g.subscribers.forEach(function(_){de(function(){_.apply(null,K)})})});else throw new W.InvalidArgument("Invalid event config")})}}function Mn(e,t){return F(t).from({prototype:e}),t}function Ao(e){return Mn(Da.prototype,function(n,i,a){this.db=e,this._tx=a,this.name=n,this.schema=i,this.hook=e._allTables[n]?e._allTables[n].hook:Rn(null,{creating:[oo,ce],reading:[uo,Cn],updating:[lo,ce],deleting:[so,ce]})})}function cn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function li(e,t){e.filter=Qt(e.filter,t)}function fi(e,t,n){var i=e.replayFilter;e.replayFilter=i?function(){return Qt(i(),t())}:t,e.justLimit=n&&!i}function To(e,t){e.isMatch=Qt(e.isMatch,t)}function yr(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Pa(e,t,n){var i=yr(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:i,range:e.range}})}function mr(e,t,n,i){var a=e.replayFilter?Qt(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},l=function(f,d,p){if(!a||a(d,p,function(E){return d.stop(E)},function(E){return d.fail(E)})){var g=d.primaryKey,y=""+g;y==="[object ArrayBuffer]"&&(y=""+new Uint8Array(g)),T(o,y)||(o[y]=!0,t(f,d,p))}};return Promise.all([e.or._iterate(l,n),Ka(Pa(e,i,n),e.algorithm,l,!e.keysOnly&&e.valueMapper)])}else return Ka(Pa(e,i,n),Qt(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function Ka(e,t,n,i){var a=i?function(l,f,d){return n(i(l),f,d)}:n,o=ve(a);return e.then(function(l){if(l)return l.start(function(){var f=function(){return l.continue()};(!t||t(l,function(d){return f=d},function(d){l.stop(d),f=ce},function(d){l.fail(d),f=ce}))&&o(l.value,l,function(d){return f=d}),f()})})}var Oo=(function(){function e(){}return e.prototype._read=function(t,n){var i=this._ctx;return i.error?i.table._trans(null,_e.bind(null,i.error)):i.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,_e.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Qt(n.algorithm,t)},e.prototype._iterate=function(t,n){return mr(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return t&&P(i,t),n._ctx=i,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(i){return mr(n,t,i,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(i){var a=n._ctx,o=a.table.core;if(cn(a,!0))return o.count({trans:i,query:{index:yr(a,o.schema),range:a.range}}).then(function(f){return Math.min(f,a.limit)});var l=0;return mr(a,function(){return++l,!1},i,o).then(function(){return l})}).then(t)},e.prototype.sortBy=function(t,n){var i=t.split(".").reverse(),a=i[0],o=i.length-1;function l(p,g){return g?l(p[i[g]],g-1):p[a]}var f=this._ctx.dir==="next"?1:-1;function d(p,g){var y=l(p,o),E=l(g,o);return re(y,E)*f}return this.toArray(function(p){return p.sort(d)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(i){var a=n._ctx;if(a.dir==="next"&&cn(a,!0)&&a.limit>0){var o=a.valueMapper,l=yr(a,a.table.core.schema);return a.table.core.query({trans:i,limit:a.limit,values:!0,query:{index:l,range:a.range}}).then(function(d){var p=d.result;return o?p.map(o):p})}else{var f=[];return mr(a,function(d){return f.push(d)},i,a.table.core).then(function(){return f})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,cn(n)?fi(n,function(){var i=t;return function(a,o){return i===0?!0:i===1?(--i,!1):(o(function(){a.advance(i),i=0}),!1)}}):fi(n,function(){var i=t;return function(){return--i<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),fi(this._ctx,function(){var n=t;return function(i,a,o){return--n<=0&&a(o),n>=0}},!0),this},e.prototype.until=function(t,n){return li(this._ctx,function(i,a,o){return t(i.value)?(a(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return li(this._ctx,function(n){return t(n.value)}),To(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,a){t(a.key,a)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,a){t(a.primaryKey,a)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var i=[];return this.each(function(a,o){i.push(o.key)}).then(function(){return i}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&cn(n,!0)&&n.limit>0)return this._read(function(a){var o=yr(n,n.table.core.schema);return n.table.core.query({trans:a,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(a){var o=a.result;return o}).then(t);n.keysOnly=!n.isMatch;var i=[];return this.each(function(a,o){i.push(o.primaryKey)}).then(function(){return i}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var i={};return li(this._ctx,function(a){var o=a.primaryKey.toString(),l=T(i,o);return i[o]=!0,!l}),this},e.prototype.modify=function(t){var n=this,i=this._ctx;return this._write(function(a){var o;typeof t=="function"?o=t:o=function(k){return Ia(k,t)};var l=i.table.core,f=l.schema.primaryKey,d=f.outbound,p=f.extractKey,g=200,y=n.db._options.modifyChunkSize;y&&(typeof y=="object"?g=y[l.name]||y["*"]||200:g=y);var E=[],K=0,_=[],b=function(k,O){var C=O.failures,I=O.numFailures;K+=k-I;for(var A=0,B=S(C);A<B.length;A++){var L=B[A];E.push(C[L])}},x=t===Ra;return n.clone().primaryKeys().then(function(k){var O=cn(i)&&i.limit===1/0&&(typeof t!="function"||x)&&{index:i.index,range:i.range},C=function(I){var A=Math.min(g,k.length-I),B=k.slice(I,I+A);return(x?Promise.resolve([]):l.getMany({trans:a,keys:B,cache:"immutable"})).then(function(L){var j=[],Q=[],ee=d?[]:null,$=x?B:[];if(!x)for(var J=0;J<A;++J){var q=L[J],ie={value:ft(q),primKey:k[I+J]};o.call(ie,ie.value,ie)!==!1&&(ie.value==null?$.push(k[I+J]):!d&&re(p(q),p(ie.value))!==0?($.push(k[I+J]),j.push(ie.value)):(Q.push(ie.value),d&&ee.push(k[I+J])))}return Promise.resolve(j.length>0&&l.mutate({trans:a,type:"add",values:j}).then(function(z){for(var me in z.failures)$.splice(parseInt(me),1);b(j.length,z)})).then(function(){return(Q.length>0||O&&typeof t=="object")&&l.mutate({trans:a,type:"put",keys:ee,values:Q,criteria:O,changeSpec:typeof t!="function"&&t,isAdditionalChunk:I>0}).then(function(z){return b(Q.length,z)})}).then(function(){return($.length>0||O&&x)&&l.mutate({trans:a,type:"delete",keys:$,criteria:O,isAdditionalChunk:I>0}).then(function(z){return pr(i.table,$,z)}).then(function(z){return b($.length,z)})}).then(function(){return k.length>I+A&&C(I+g)})})};return C(0).then(function(){if(E.length>0)throw new rr("Error modifying one or more objects",E,K,_);return k.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return cn(t)&&!t.table.schema.yProps&&(t.isPrimKey||n.type===3)?this._write(function(i){var a=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:i,query:{index:a,range:o}}).then(function(l){return t.table.core.mutate({trans:i,type:"deleteRange",range:o}).then(function(f){var d=f.failures,p=f.numFailures;if(p)throw new rr("Could not delete some values",Object.keys(d).map(function(g){return d[g]}),l-p);return l-p})})}):this.modify(Ra)},e})(),Ra=function(e,t){return t.value=null};function Co(e){return Mn(Oo.prototype,function(n,i){this.db=e;var a=Aa,o=null;if(i)try{a=i()}catch(p){o=p}var l=n._ctx,f=l.table,d=f.hook.reading.fire;this._ctx={table:f,index:l.index,isPrimKey:!l.index||f.schema.primKey.keyPath&&l.index===f.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:l.or,valueMapper:d!==Cn?d:null}})}function Io(e,t){return e<t?-1:e===t?0:1}function Do(e,t){return e>t?-1:e===t?0:1}function Ve(e,t,n){var i=e instanceof Ba?new e.Collection(e):e;return i._ctx.error=n?new n(t):new TypeError(t),i}function dn(e){return new e.Collection(e,function(){return Ma("")}).limit(0)}function Po(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Ko(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Ro(e,t,n,i,a,o){for(var l=Math.min(e.length,i.length),f=-1,d=0;d<l;++d){var p=t[d];if(p!==i[d])return a(e[d],n[d])<0?e.substr(0,d)+n[d]+n.substr(d+1):a(e[d],i[d])<0?e.substr(0,d)+i[d]+n.substr(d+1):f>=0?e.substr(0,f)+t[f]+n.substr(f+1):null;a(e[d],p)<0&&(f=d)}return l<i.length&&o==="next"?e+n.substr(e.length):l<e.length&&o==="prev"?e.substr(0,n.length):f<0?null:e.substr(0,f)+i[f]+n.substr(f+1)}function _r(e,t,n,i){var a,o,l,f,d,p,g,y=n.length;if(!n.every(function(b){return typeof b=="string"}))return Ve(e,Sa);function E(b){a=Po(b),o=Ko(b),l=b==="next"?Io:Do;var x=n.map(function(k){return{lower:o(k),upper:a(k)}}).sort(function(k,O){return l(k.lower,O.lower)});f=x.map(function(k){return k.upper}),d=x.map(function(k){return k.lower}),p=b,g=b==="next"?"":i}E("next");var K=new e.Collection(e,function(){return At(f[0],d[y-1]+i)});K._ondirectionchange=function(b){E(b)};var _=0;return K._addAlgorithm(function(b,x,k){var O=b.key;if(typeof O!="string")return!1;var C=o(O);if(t(C,d,_))return!0;for(var I=null,A=_;A<y;++A){var B=Ro(O,C,f[A],d[A],l,p);B===null&&I===null?_=A+1:(I===null||l(I,B)>0)&&(I=B)}return x(I!==null?function(){b.continue(I+g)}:k),!1}),K}function At(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function Ma(e){return{type:1,lower:e,upper:e}}var Ba=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,i,a){i=i!==!1,a=a===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(i||a)&&!(i&&a)?dn(this):new this.Collection(this,function(){return At(t,n,!i,!a)})}catch{return Ve(this,dt)}},e.prototype.equals=function(t){return t==null?Ve(this,dt):new this.Collection(this,function(){return Ma(t)})},e.prototype.above=function(t){return t==null?Ve(this,dt):new this.Collection(this,function(){return At(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Ve(this,dt):new this.Collection(this,function(){return At(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Ve(this,dt):new this.Collection(this,function(){return At(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Ve(this,dt):new this.Collection(this,function(){return At(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Ve(this,Sa):this.between(t,t+Yt,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):_r(this,function(n,i){return n.indexOf(i[0])===0},[t],Yt)},e.prototype.equalsIgnoreCase=function(t){return _r(this,function(n,i){return n===i[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=ct.apply(rn,arguments);return t.length===0?dn(this):_r(this,function(n,i){return i.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=ct.apply(rn,arguments);return t.length===0?dn(this):_r(this,function(n,i){return i.some(function(a){return n.indexOf(a)===0})},t,Yt)},e.prototype.anyOf=function(){var t=this,n=ct.apply(rn,arguments),i=this._cmp;try{n.sort(i)}catch{return Ve(this,dt)}if(n.length===0)return dn(this);var a=new this.Collection(this,function(){return At(n[0],n[n.length-1])});a._ondirectionchange=function(l){i=l==="next"?t._ascending:t._descending,n.sort(i)};var o=0;return a._addAlgorithm(function(l,f,d){for(var p=l.key;i(p,n[o])>0;)if(++o,o===n.length)return f(d),!1;return i(p,n[o])===0?!0:(f(function(){l.continue(n[o])}),!1)}),a},e.prototype.notEqual=function(t){return this.inAnyRange([[ui,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=ct.apply(rn,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Ve(this,dt)}var n=t.reduce(function(i,a){return i?i.concat([[i[i.length-1][1],a]]):[[ui,a]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var i=this,a=this._cmp,o=this._ascending,l=this._descending,f=this._min,d=this._max;if(t.length===0)return dn(this);if(!t.every(function(A){return A[0]!==void 0&&A[1]!==void 0&&o(A[0],A[1])<=0}))return Ve(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var p=!n||n.includeLowers!==!1,g=n&&n.includeUppers===!0;function y(A,B){for(var L=0,j=A.length;L<j;++L){var Q=A[L];if(a(B[0],Q[1])<0&&a(B[1],Q[0])>0){Q[0]=f(Q[0],B[0]),Q[1]=d(Q[1],B[1]);break}}return L===j&&A.push(B),A}var E=o;function K(A,B){return E(A[0],B[0])}var _;try{_=t.reduce(y,[]),_.sort(K)}catch{return Ve(this,dt)}var b=0,x=g?function(A){return o(A,_[b][1])>0}:function(A){return o(A,_[b][1])>=0},k=p?function(A){return l(A,_[b][0])>0}:function(A){return l(A,_[b][0])>=0};function O(A){return!x(A)&&!k(A)}var C=x,I=new this.Collection(this,function(){return At(_[0][0],_[_.length-1][1],!p,!g)});return I._ondirectionchange=function(A){A==="next"?(C=x,E=o):(C=k,E=l),_.sort(K)},I._addAlgorithm(function(A,B,L){for(var j=A.key;C(j);)if(++b,b===_.length)return B(L),!1;return O(j)?!0:(i._cmp(j,_[b][1])===0||i._cmp(j,_[b][0])===0||B(function(){E===o?A.continue(_[b][0]):A.continue(_[b][1])}),!1)}),I},e.prototype.startsWithAnyOf=function(){var t=ct.apply(rn,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?dn(this):this.inAnyRange(t.map(function(n){return[n,n+Yt]})):Ve(this,"startsWithAnyOf() only works with strings")},e})();function Mo(e){return Mn(Ba.prototype,function(n,i,a){if(this.db=e,this._ctx={table:n,index:i===":id"?null:i,or:a},this._cmp=this._ascending=re,this._descending=function(o,l){return re(l,o)},this._max=function(o,l){return re(o,l)>0?o:l},this._min=function(o,l){return re(o,l)<0?o:l},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})}function nt(e){return ve(function(t){return Bn(t),e(t.target.error),!1})}function Bn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Fn="storagemutated",ci="x-storagemutated-1",Tt=Rn(null,Fn),Bo=(function(){function e(){}return e.prototype._lock=function(){return fe(!V.global),++this._reculock,this._reculock===1&&!V.global&&(V.lockOwnerFor=this),this},e.prototype._unlock=function(){if(fe(!V.global),--this._reculock===0)for(V.global||(V.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Wt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&V.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var i=this.db.idbdb,a=this.db._state.dbOpenError;if(fe(!this.idbtrans),!t&&!i)switch(a&&a.name){case"DatabaseClosedError":throw new W.DatabaseClosed(a);case"MissingAPIError":throw new W.MissingAPI(a.message,a);default:throw new W.OpenFailed(a)}if(!this.active)throw new W.TransactionInactive;return fe(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):i.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=ve(function(o){Bn(o),n._reject(t.error)}),t.onabort=ve(function(o){Bn(o),n.active&&n._reject(new W.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=ve(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Tt.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,i){var a=this;if(t==="readwrite"&&this.mode!=="readwrite")return _e(new W.ReadOnly("Transaction is readonly"));if(!this.active)return _e(new W.TransactionInactive);if(this._locked())return new N(function(l,f){a._blockedFuncs.push([function(){a._promise(t,n,i).then(l,f)},V])});if(i)return Et(function(){var l=new N(function(f,d){a._lock();var p=n(f,d,a);p&&p.then&&p.then(f,d)});return l.finally(function(){return a._unlock()}),l._lib=!0,l});var o=new N(function(l,f){var d=n(l,f,a);d&&d.then&&d.then(l,f)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),i=N.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return i});else{n._waitingFor=i,n._waitingQueue=[];var a=n.idbtrans.objectStore(n.storeNames[0]);(function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(a.get(-1/0).onsuccess=l)})()}var o=n._waitingFor;return new N(function(l,f){i.then(function(d){return n._waitingQueue.push(ve(l.bind(null,d)))},function(d){return n._waitingQueue.push(ve(f.bind(null,d)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(T(n,t))return n[t];var i=this.schema[t];if(!i)throw new W.NotFound("Table "+t+" not part of transaction");var a=new this.db.Table(t,i,this);return a.core=this.db.core.table(t),n[t]=a,a},e})();function Fo(e){return Mn(Bo.prototype,function(n,i,a,o,l){var f=this;n!=="readonly"&&i.forEach(function(d){var p,g=(p=a[d])===null||p===void 0?void 0:p.yProps;g&&(i=i.concat(g.map(function(y){return y.updatesTable})))}),this.db=e,this.mode=n,this.storeNames=i,this.schema=a,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Rn(this,"complete","error","abort"),this.parent=l||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new N(function(d,p){f._resolve=d,f._reject=p}),this._completion.then(function(){f.active=!1,f.on.complete.fire()},function(d){var p=f.active;return f.active=!1,f.on.error.fire(d),f.parent?f.parent._reject(d):p&&f.idbtrans&&f.idbtrans.abort(),_e(d)})})}function di(e,t,n,i,a,o,l,f){return{name:e,keyPath:t,unique:n,multi:i,auto:a,compound:o,src:(n&&!l?"&":"")+(i?"*":"")+(a?"++":"")+Fa(t),type:f}}function Fa(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function hi(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:pe(n,function(i){return[i.name,i]})}}function jo(e){return e.length===1?e[0]:e}var jn=function(e){try{return e.only([[]]),jn=function(){return[[]]},[[]]}catch{return jn=function(){return Yt},Yt}};function vi(e){return e==null?function(){}:typeof e=="string"?No(e):function(t){return se(t,e)}}function No(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return se(n,e)}}function ja(e){return[].slice.call(e)}var Lo=0;function Nn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function $o(e,t,n){function i(y,E){var K=ja(y.objectStoreNames);return{schema:{name:y.name,tables:K.map(function(_){return E.objectStore(_)}).map(function(_){var b=_.keyPath,x=_.autoIncrement,k=w(b),O=b==null,C={},I={name:_.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O,compound:k,keyPath:b,autoIncrement:x,unique:!0,extractKey:vi(b)},indexes:ja(_.indexNames).map(function(A){return _.index(A)}).map(function(A){var B=A.name,L=A.unique,j=A.multiEntry,Q=A.keyPath,ee=w(Q),$={name:B,compound:ee,keyPath:Q,unique:L,multiEntry:j,extractKey:vi(Q)};return C[Nn(Q)]=$,$}),getIndexByKeyPath:function(A){return C[Nn(A)]}};return C[":id"]=I.primaryKey,b!=null&&(C[Nn(b)]=I.primaryKey),I})},hasGetAll:K.length>0&&"getAll"in E.objectStore(K[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function a(y){if(y.type===3)return null;if(y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var E=y.lower,K=y.upper,_=y.lowerOpen,b=y.upperOpen,x=E===void 0?K===void 0?null:t.upperBound(K,!!b):K===void 0?t.lowerBound(E,!!_):t.bound(E,K,!!_,!!b);return x}function o(y){var E=y.name;function K(x){var k=x.trans,O=x.type,C=x.keys,I=x.values,A=x.range;return new Promise(function(B,L){B=ve(B);var j=k.objectStore(E),Q=j.keyPath==null,ee=O==="put"||O==="add";if(!ee&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var $=(C||I||{length:1}).length;if(C&&I&&C.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if($===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});var J,q=[],ie=[],z=0,me=function(it){++z,Bn(it)};if(O==="deleteRange"){if(A.type===4)return B({numFailures:z,failures:ie,results:[],lastResult:void 0});A.type===3?q.push(J=j.clear()):q.push(J=j.delete(a(A)))}else{var Te=ee?Q?[I,C]:[I,null]:[C,null],rt=Te[0],Re=Te[1];if(ee)for(var Ye=0;Ye<$;++Ye)q.push(J=Re&&Re[Ye]!==void 0?j[O](rt[Ye],Re[Ye]):j[O](rt[Ye])),J.onerror=me;else for(var Ye=0;Ye<$;++Ye)q.push(J=j[O](rt[Ye])),J.onerror=me}var It=function(it){var Vn=it.target.result;q.forEach(function(Xe,Ir){return Xe.error!=null&&(ie[Ir]=Xe.error)}),B({numFailures:z,failures:ie,results:O==="delete"?C:q.map(function(Xe){return Xe.result}),lastResult:Vn})};J.onerror=function(it){me(it),It(it)},J.onsuccess=It})}function _(x){var k=x.trans,O=x.values,C=x.query,I=x.reverse,A=x.unique;return new Promise(function(B,L){B=ve(B);var j=C.index,Q=C.range,ee=k.objectStore(E),$=j.isPrimaryKey?ee:ee.index(j.name),J=I?A?"prevunique":"prev":A?"nextunique":"next",q=O||!("openKeyCursor"in $)?$.openCursor(a(Q),J):$.openKeyCursor(a(Q),J);q.onerror=nt(L),q.onsuccess=ve(function(ie){var z=q.result;if(!z){B(null);return}z.___id=++Lo,z.done=!1;var me=z.continue.bind(z),Te=z.continuePrimaryKey;Te&&(Te=Te.bind(z));var rt=z.advance.bind(z),Re=function(){throw new Error("Cursor not started")},Ye=function(){throw new Error("Cursor not stopped")};z.trans=k,z.stop=z.continue=z.continuePrimaryKey=z.advance=Re,z.fail=ve(L),z.next=function(){var It=this,it=1;return this.start(function(){return it--?It.continue():It.stop()}).then(function(){return It})},z.start=function(It){var it=new Promise(function(Xe,Ir){Xe=ve(Xe),q.onerror=nt(Ir),z.fail=Ir,z.stop=function(Os){z.stop=z.continue=z.continuePrimaryKey=z.advance=Ye,Xe(Os)}}),Vn=function(){if(q.result)try{It()}catch(Xe){z.fail(Xe)}else z.done=!0,z.start=function(){throw new Error("Cursor behind last entry")},z.stop()};return q.onsuccess=ve(function(Xe){q.onsuccess=Vn,Vn()}),z.continue=me,z.continuePrimaryKey=Te,z.advance=rt,Vn(),it},B(z)},L)})}function b(x){return function(k){return new Promise(function(O,C){O=ve(O);var I=k.trans,A=k.values,B=k.limit,L=k.query,j=B===1/0?void 0:B,Q=L.index,ee=L.range,$=I.objectStore(E),J=Q.isPrimaryKey?$:$.index(Q.name),q=a(ee);if(B===0)return O({result:[]});if(x){var ie=A?J.getAll(q,j):J.getAllKeys(q,j);ie.onsuccess=function(rt){return O({result:rt.target.result})},ie.onerror=nt(C)}else{var z=0,me=A||!("openKeyCursor"in J)?J.openCursor(q):J.openKeyCursor(q),Te=[];me.onsuccess=function(rt){var Re=me.result;if(!Re)return O({result:Te});if(Te.push(A?Re.value:Re.primaryKey),++z===B)return O({result:Te});Re.continue()},me.onerror=nt(C)}})}}return{name:E,schema:y,mutate:K,getMany:function(x){var k=x.trans,O=x.keys;return new Promise(function(C,I){C=ve(C);for(var A=k.objectStore(E),B=O.length,L=new Array(B),j=0,Q=0,ee,$=function(z){var me=z.target;(L[me._pos]=me.result)!=null,++Q===j&&C(L)},J=nt(I),q=0;q<B;++q){var ie=O[q];ie!=null&&(ee=A.get(O[q]),ee._pos=q,ee.onsuccess=$,ee.onerror=J,++j)}j===0&&C(L)})},get:function(x){var k=x.trans,O=x.key;return new Promise(function(C,I){C=ve(C);var A=k.objectStore(E),B=A.get(O);B.onsuccess=function(L){return C(L.target.result)},B.onerror=nt(I)})},query:b(d),openCursor:_,count:function(x){var k=x.query,O=x.trans,C=k.index,I=k.range;return new Promise(function(A,B){var L=O.objectStore(E),j=C.isPrimaryKey?L:L.index(C.name),Q=a(I),ee=Q?j.count(Q):j.count();ee.onsuccess=ve(function($){return A($.target.result)}),ee.onerror=nt(B)})}}}var l=i(e,n),f=l.schema,d=l.hasGetAll,p=f.tables.map(function(y){return o(y)}),g={};return p.forEach(function(y){return g[y.name]=y}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(y){var E=g[y];if(!E)throw new Error("Table '".concat(y,"' not found"));return g[y]},MIN_KEY:-1/0,MAX_KEY:jn(t),schema:f}}function Vo(e,t){return t.reduce(function(n,i){var a=i.create;return h(h({},n),a(n))},e)}function zo(e,t,n,i){var a=n.IDBKeyRange;n.indexedDB;var o=Vo($o(t,a,i),e.dbcore);return{dbcore:o}}function gr(e,t){var n=t.db,i=zo(e._middlewares,n,e._deps,t);e.core=i.dbcore,e.tables.forEach(function(a){var o=a.name;e.core.schema.tables.some(function(l){return l.name===o})&&(a.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=a.core))})}function br(e,t,n,i){n.forEach(function(a){var o=i[a];t.forEach(function(l){var f=oe(l,a);(!f||"value"in f&&f.value===void 0)&&(l===e.Transaction.prototype||l instanceof e.Transaction?H(l,a,{get:function(){return this.table(a)},set:function(d){U(this,a,{value:d,writable:!0,configurable:!0,enumerable:!0})}}):l[a]=new e.Table(a,o))})})}function pi(e,t){t.forEach(function(n){for(var i in n)n[i]instanceof e.Table&&delete n[i]})}function Uo(e,t){return e._cfg.version-t._cfg.version}function Wo(e,t,n,i){var a=e._dbSchema;n.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=hi("$meta",La("")[0],[]),e._storeNames.push("$meta"));var o=e._createTransaction("readwrite",e._storeNames,a);o.create(n),o._completion.catch(i);var l=o._reject.bind(o),f=V.transless||V;Et(function(){if(V.trans=o,V.transless=f,t===0)S(a).forEach(function(d){mi(n,d,a[d].primKey,a[d].indexes)}),gr(e,n),N.follow(function(){return e.on.populate.fire(o)}).catch(l);else return gr(e,n),Qo(e,o,t).then(function(d){return Ho(e,d,o,n)}).catch(l)})}function Yo(e,t){Na(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=xr(e,e.idbdb,t);Er(e,e._dbSchema,t);for(var i=yi(n,e._dbSchema),a=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var g=t.objectStore(p.name);p.add.forEach(function(y){tt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(y.src)),wr(g,y)})},o=0,l=i.change;o<l.length;o++){var f=l[o],d=a(f);if(typeof d=="object")return d.value}}function Qo(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(i){return i??n}):N.resolve(n)}function Ho(e,t,n,i){var a=[],o=e._versions,l=e._dbSchema=xr(e,e.idbdb,i),f=o.filter(function(p){return p._cfg.version>=t});if(f.length===0)return N.resolve();f.forEach(function(p){a.push(function(){var g=l,y=p._cfg.dbschema;Er(e,g,i),Er(e,y,i),l=e._dbSchema=y;var E=yi(g,y);E.add.forEach(function(O){mi(i,O[0],O[1].primKey,O[1].indexes)}),E.change.forEach(function(O){if(O.recreate)throw new W.Upgrade("Not yet support for changing primary key");var C=i.objectStore(O.name);O.add.forEach(function(I){return wr(C,I)}),O.change.forEach(function(I){C.deleteIndex(I.name),wr(C,I)}),O.del.forEach(function(I){return C.deleteIndex(I)})});var K=p._cfg.contentUpgrade;if(K&&p._cfg.version>t){gr(e,i),n._memoizedTables={};var _=he(y);E.del.forEach(function(O){_[O]=g[O]}),pi(e,[e.Transaction.prototype]),br(e,[e.Transaction.prototype],S(_),_),n.schema=_;var b=Yr(K);b&&ln();var x,k=N.follow(function(){if(x=K(n),x&&b){var O=kt.bind(null,null);x.then(O,O)}});return x&&typeof x.then=="function"?N.resolve(x):k.then(function(){return x})}}),a.push(function(g){var y=p._cfg.dbschema;qo(y,g),pi(e,[e.Transaction.prototype]),br(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),a.push(function(g){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===p._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(y){return y!=="$meta"})):g.objectStore("$meta").put(p._cfg.version,"version"))})});function d(){return a.length?N.resolve(a.shift()(n.idbtrans)).then(d):N.resolve()}return d().then(function(){Na(l,i)})}function yi(e,t){var n={del:[],add:[],change:[]},i;for(i in e)t[i]||n.del.push(i);for(i in t){var a=e[i],o=t[i];if(!a)n.add.push([i,o]);else{var l={name:i,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||a.primKey.auto!==o.primKey.auto)l.recreate=!0,n.change.push(l);else{var f=a.idxByName,d=o.idxByName,p=void 0;for(p in f)d[p]||l.del.push(p);for(p in d){var g=f[p],y=d[p];g?g.src!==y.src&&l.change.push(y):l.add.push(y)}(l.del.length>0||l.add.length>0||l.change.length>0)&&n.change.push(l)}}}return n}function mi(e,t,n,i){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(function(o){return wr(a,o)}),a}function Na(e,t){S(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(tt&&console.debug("Dexie: Creating missing table",n),mi(t,n,e[n].primKey,e[n].indexes))})}function qo(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function wr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function xr(e,t,n){var i={},a=Z(t.objectStoreNames,0);return a.forEach(function(o){for(var l=n.objectStore(o),f=l.keyPath,d=di(Fa(f),f||"",!0,!1,!!l.autoIncrement,f&&typeof f!="string",!0),p=[],g=0;g<l.indexNames.length;++g){var y=l.index(l.indexNames[g]);f=y.keyPath;var E=di(y.name,f,!!y.unique,!!y.multiEntry,!1,f&&typeof f!="string",!1);p.push(E)}i[o]=hi(o,d,p)}),i}function Go(e,t,n){e.verno=t.version/10;var i=e._dbSchema=xr(e,t,n);e._storeNames=Z(t.objectStoreNames,0),br(e,[e._allTables],S(i),i)}function Xo(e,t){var n=xr(e,e.idbdb,t),i=yi(n,e._dbSchema);return!(i.add.length||i.change.some(function(a){return a.add.length||a.change.length}))}function Er(e,t,n){for(var i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],l=n.objectStore(o);e._hasGetAll="getAll"in l;for(var f=0;f<l.indexNames.length;++f){var d=l.indexNames[f],p=l.index(d).keyPath,g=typeof p=="string"?p:"["+Z(p).join("+")+"]";if(t[o]){var y=t[o].idxByName[g];y&&(y.name=d,delete t[o].idxByName[g],t[o].idxByName[d]=y)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&m.WorkerGlobalScope&&m instanceof m.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function La(e){return e.split(",").map(function(t,n){var i,a=t.split(":"),o=(i=a[1])===null||i===void 0?void 0:i.trim();t=a[0].trim();var l=t.replace(/([&*]|\+\+)/g,""),f=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return di(l,f||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),w(f),n===0,o)})}var Jo=(function(){function e(){}return e.prototype._createTableSchema=function(t,n,i){return hi(t,n,i)},e.prototype._parseIndexSyntax=function(t){return La(t)},e.prototype._parseStoresSpec=function(t,n){var i=this;S(t).forEach(function(a){if(t[a]!==null){var o=i._parseIndexSyntax(t[a]),l=o.shift();if(!l)throw new W.Schema("Invalid schema for table "+a+": "+t[a]);if(l.unique=!0,l.multi)throw new W.Schema("Primary key cannot be multiEntry*");o.forEach(function(d){if(d.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")});var f=i._createTableSchema(a,l,o);n[a]=f}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?P(this._cfg.storesSource,t):t;var i=n._versions,a={},o={};return i.forEach(function(l){P(a,l._cfg.storesSource),o=l._cfg.dbschema={},l._parseStoresSpec(a,o)}),n._dbSchema=o,pi(n,[n._allTables,n,n.Transaction.prototype]),br(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],S(o),o),n._storeNames=S(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=qr(this._cfg.contentUpgrade||ce,t),this},e})();function Zo(e){return Mn(Jo.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function _i(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ht(hr,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function gi(e){return e&&typeof e.databases=="function"}function es(e){var t=e.indexedDB,n=e.IDBKeyRange;return gi(t)?Promise.resolve(t.databases()).then(function(i){return i.map(function(a){return a.name}).filter(function(a){return a!==hr})}):_i(t,n).toCollection().primaryKeys()}function ts(e,t){var n=e.indexedDB,i=e.IDBKeyRange;!gi(n)&&t!==hr&&_i(n,i).put({name:t}).catch(ce)}function ns(e,t){var n=e.indexedDB,i=e.IDBKeyRange;!gi(n)&&t!==hr&&_i(n,i).delete(t).catch(ce)}function bi(e){return Et(function(){return V.letThrough=!0,e()})}function rs(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)})}var wi;function xi(e){return!("from"in e)}var Ae=function(e,t){if(this)P(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new Ae;return e&&"d"in e&&P(n,e),n}};D(Ae.prototype,(wi={add:function(e){return $n(this,e),this},addKey:function(e){return Ln(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Ln(t,n,n)}),this},hasKey:function(e){var t=kr(this).next(e).value;return t&&re(t.from,e)<=0&&re(t.to,e)>=0}},wi[On]=function(){return kr(this)},wi));function Ln(e,t,n){var i=re(t,n);if(!isNaN(i)){if(i>0)throw RangeError();if(xi(e))return P(e,{from:t,to:n,d:1});var a=e.l,o=e.r;if(re(n,e.from)<0)return a?Ln(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Va(e);if(re(t,e.to)>0)return o?Ln(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Va(e);re(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),re(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var l=!e.r;a&&!e.l&&$n(e,a),o&&l&&$n(e,o)}}function $n(e,t){function n(i,a){var o=a.from,l=a.to,f=a.l,d=a.r;Ln(i,o,l),f&&n(i,f),d&&n(i,d)}xi(t)||n(e,t)}function $a(e,t){var n=kr(t),i=n.next();if(i.done)return!1;for(var a=i.value,o=kr(e),l=o.next(a.from),f=l.value;!i.done&&!l.done;){if(re(f.from,a.to)<=0&&re(f.to,a.from)>=0)return!0;re(a.from,f.from)<0?a=(i=n.next(f.from)).value:f=(l=o.next(a.from)).value}return!1}function kr(e){var t=xi(e)?null:{s:0,n:e};return{next:function(n){for(var i=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&re(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||re(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Va(e){var t,n,i=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=i>1?"r":i<-1?"l":"";if(a){var o=a==="r"?"l":"r",l=h({},e),f=e[a];e.from=f.from,e.to=f.to,e[a]=f[a],l[a]=f[o],e[o]=l,l.d=za(l)}e.d=za(e)}function za(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Sr(e,t){return S(t).forEach(function(n){e[n]?$n(e[n],t[n]):e[n]=Ge(t[n])}),e}function Ei(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&$a(t[n],e[n])})}var Ht={},ki={},Si=!1;function Ar(e,t){Sr(ki,e),Si||(Si=!0,setTimeout(function(){Si=!1;var n=ki;ki={},Ai(n,!1)},0))}function Ai(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var i=0,a=Object.values(Ht);i<a.length;i++){var o=a[i];Ua(o,e,n,t)}else for(var l in e){var f=/^idb\:\/\/(.*)\/(.*)\//.exec(l);if(f){var d=f[1],p=f[2],o=Ht["idb://".concat(d,"/").concat(p)];o&&Ua(o,e,n,t)}}n.forEach(function(g){return g()})}function Ua(e,t,n,i){for(var a=[],o=0,l=Object.entries(e.queries.query);o<l.length;o++){for(var f=l[o],d=f[0],p=f[1],g=[],y=0,E=p;y<E.length;y++){var K=E[y];Ei(t,K.obsSet)?K.subscribers.forEach(function(k){return n.add(k)}):i&&g.push(K)}i&&a.push([d,g])}if(i)for(var _=0,b=a;_<b.length;_++){var x=b[_],d=x[0],g=x[1];e.queries.query[d]=g}}function is(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?_e(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var i=t.openCanceller,a=Math.round(e.verno*10),o=!1;function l(){if(t.openCanceller!==i)throw new W.DatabaseClosed("db.open() was cancelled")}var f=t.dbReadyResolve,d=null,p=!1,g=function(){return new N(function(y,E){if(l(),!n)throw new W.MissingAPI;var K=e.name,_=t.autoSchema||!a?n.open(K):n.open(K,a);if(!_)throw new W.MissingAPI;_.onerror=nt(E),_.onblocked=ve(e._fireOnBlocked),_.onupgradeneeded=ve(function(b){if(d=_.transaction,t.autoSchema&&!e._options.allowEmptyDB){_.onerror=Bn,d.abort(),_.result.close();var x=n.deleteDatabase(K);x.onsuccess=x.onerror=ve(function(){E(new W.NoSuchDatabase("Database ".concat(K," doesnt exist")))})}else{d.onerror=nt(E);var k=b.oldVersion>Math.pow(2,62)?0:b.oldVersion;p=k<1,e.idbdb=_.result,o&&Yo(e,d),Wo(e,k/10,d,E)}},E),_.onsuccess=ve(function(){d=null;var b=e.idbdb=_.result,x=Z(b.objectStoreNames);if(x.length>0)try{var k=b.transaction(jo(x),"readonly");if(t.autoSchema)Go(e,b,k);else if(Er(e,e._dbSchema,k),!Xo(e,k)&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),b.close(),a=b.version+1,o=!0,y(g());gr(e,k)}catch{}fn.push(e),b.onversionchange=ve(function(O){t.vcFired=!0,e.on("versionchange").fire(O)}),b.onclose=ve(function(){e.close({disableAutoOpen:!1})}),p&&ts(e._deps,K),y()},E)}).catch(function(y){switch(y?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),g();break;case"VersionError":if(a>0)return a=0,g();break}return N.reject(y)})};return N.race([i,(typeof navigator>"u"?N.resolve():rs()).then(g)]).then(function(){return l(),t.onReadyBeingFired=[],N.resolve(bi(function(){return e.on.ready.fire(e.vip)})).then(function y(){if(t.onReadyBeingFired.length>0){var E=t.onReadyBeingFired.reduce(qr,ce);return t.onReadyBeingFired=[],N.resolve(bi(function(){return E(e.vip)})).then(y)}})}).finally(function(){t.openCanceller===i&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(y){t.dbOpenError=y;try{d&&d.abort()}catch{}return i===t.openCanceller&&e._close(),_e(y)}).finally(function(){t.openComplete=!0,f()}).then(function(){if(p){var y={};e.tables.forEach(function(E){E.schema.indexes.forEach(function(K){K.name&&(y["idb://".concat(e.name,"/").concat(E.name,"/").concat(K.name)]=new Ae(-1/0,[[[]]]))}),y["idb://".concat(e.name,"/").concat(E.name,"/")]=y["idb://".concat(e.name,"/").concat(E.name,"/:dels")]=new Ae(-1/0,[[[]]])}),Tt(Fn).fire(y),Ai(y,!0)}return e})}function Ti(e){var t=function(l){return e.next(l)},n=function(l){return e.throw(l)},i=o(t),a=o(n);function o(l){return function(f){var d=l(f),p=d.value;return d.done?p:!p||typeof p.then!="function"?w(p)?Promise.all(p).then(i,a):i(p):p.then(i,a)}}return o(t)()}function as(e,t,n){var i=arguments.length;if(i<2)throw new W.InvalidArgument("Too few arguments");for(var a=new Array(i-1);--i;)a[i-1]=arguments[i];n=a.pop();var o=We(a);return[e,o,n]}function Wa(e,t,n,i,a){return N.resolve().then(function(){var o=V.transless||V,l=e._createTransaction(t,n,e._dbSchema,i);l.explicit=!0;var f={trans:l,transless:o};if(i)l.idbtrans=i.idbtrans;else try{l.create(),l.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(y){return y.name===Hr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Wa(e,t,n,null,a)})):_e(y)}var d=Yr(a);d&&ln();var p,g=N.follow(function(){if(p=a.call(l,l),p)if(d){var y=kt.bind(null,null);p.then(y,y)}else typeof p.next=="function"&&typeof p.throw=="function"&&(p=Ti(p))},f);return(p&&typeof p.then=="function"?N.resolve(p).then(function(y){return l.active?y:_e(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):g.then(function(){return p})).then(function(y){return i&&l._resolve(),l._completion.then(function(){return y})}).catch(function(y){return l._reject(y),_e(y)})})}function Tr(e,t,n){for(var i=w(e)?e.slice():[e],a=0;a<n;++a)i.push(t);return i}function us(e){return h(h({},e),{table:function(t){var n=e.table(t),i=n.schema,a={},o=[];function l(b,x,k){var O=Nn(b),C=a[O]=a[O]||[],I=b==null?0:typeof b=="string"?1:b.length,A=x>0,B=h(h({},k),{name:A?"".concat(O,"(virtual-from:").concat(k.name,")"):k.name,lowLevelIndex:k,isVirtual:A,keyTail:x,keyLength:I,extractKey:vi(b),unique:!A&&k.unique});if(C.push(B),B.isPrimaryKey||o.push(B),I>1){var L=I===2?b[0]:b.slice(0,I-1);l(L,x+1,k)}return C.sort(function(j,Q){return j.keyTail-Q.keyTail}),B}var f=l(i.primaryKey.keyPath,0,i.primaryKey);a[":id"]=[f];for(var d=0,p=i.indexes;d<p.length;d++){var g=p[d];l(g.keyPath,0,g)}function y(b){var x=a[Nn(b)];return x&&x[0]}function E(b,x){return{type:b.type===1?2:b.type,lower:Tr(b.lower,b.lowerOpen?e.MAX_KEY:e.MIN_KEY,x),lowerOpen:!0,upper:Tr(b.upper,b.upperOpen?e.MIN_KEY:e.MAX_KEY,x),upperOpen:!0}}function K(b){var x=b.query.index;return x.isVirtual?h(h({},b),{query:{index:x.lowLevelIndex,range:E(b.query.range,x.keyTail)}}):b}var _=h(h({},n),{schema:h(h({},i),{primaryKey:f,indexes:o,getIndexByKeyPath:y}),count:function(b){return n.count(K(b))},query:function(b){return n.query(K(b))},openCursor:function(b){var x=b.query.index,k=x.keyTail,O=x.isVirtual,C=x.keyLength;if(!O)return n.openCursor(b);function I(A){function B(j){j!=null?A.continue(Tr(j,b.reverse?e.MAX_KEY:e.MIN_KEY,k)):b.unique?A.continue(A.key.slice(0,C).concat(b.reverse?e.MIN_KEY:e.MAX_KEY,k)):A.continue()}var L=Object.create(A,{continue:{value:B},continuePrimaryKey:{value:function(j,Q){A.continuePrimaryKey(Tr(j,e.MAX_KEY,k),Q)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var j=A.key;return C===1?j[0]:j.slice(0,C)}},value:{get:function(){return A.value}}});return L}return n.openCursor(K(b)).then(function(A){return A&&I(A)})}});return _}})}var os={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:us};function Oi(e,t,n,i){return n=n||{},i=i||"",S(e).forEach(function(a){if(!T(t,a))n[i+a]=void 0;else{var o=e[a],l=t[a];if(typeof o=="object"&&typeof l=="object"&&o&&l){var f=Tn(o),d=Tn(l);f!==d?n[i+a]=t[a]:f==="Object"?Oi(o,l,n,i+a+"."):o!==l&&(n[i+a]=t[a])}else o!==l&&(n[i+a]=t[a])}}),S(t).forEach(function(a){T(e,a)||(n[i+a]=t[a])}),n}function Ci(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ss={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return h(h({},e),{table:function(t){var n=e.table(t),i=n.schema.primaryKey,a=h(h({},n),{mutate:function(o){var l=V.trans,f=l.table(t).hook,d=f.deleting,p=f.creating,g=f.updating;switch(o.type){case"add":if(p.fire===ce)break;return l._promise("readwrite",function(){return y(o)},!0);case"put":if(p.fire===ce&&g.fire===ce)break;return l._promise("readwrite",function(){return y(o)},!0);case"delete":if(d.fire===ce)break;return l._promise("readwrite",function(){return y(o)},!0);case"deleteRange":if(d.fire===ce)break;return l._promise("readwrite",function(){return E(o)},!0)}return n.mutate(o);function y(_){var b=V.trans,x=_.keys||Ci(i,_);if(!x)throw new Error("Keys missing");return _=_.type==="add"||_.type==="put"?h(h({},_),{keys:x}):h({},_),_.type!=="delete"&&(_.values=v([],_.values)),_.keys&&(_.keys=v([],_.keys)),ls(n,_,x).then(function(k){var O=x.map(function(C,I){var A=k[I],B={onerror:null,onsuccess:null};if(_.type==="delete")d.fire.call(B,C,A,b);else if(_.type==="add"||A===void 0){var L=p.fire.call(B,C,_.values[I],b);C==null&&L!=null&&(C=L,_.keys[I]=C,i.outbound||ne(_.values[I],i.keyPath,C))}else{var j=Oi(A,_.values[I]),Q=g.fire.call(B,j,C,A,b);if(Q){var ee=_.values[I];Object.keys(Q).forEach(function($){T(ee,$)?ee[$]=Q[$]:ne(ee,$,Q[$])})}}return B});return n.mutate(_).then(function(C){for(var I=C.failures,A=C.results,B=C.numFailures,L=C.lastResult,j=0;j<x.length;++j){var Q=A?A[j]:x[j],ee=O[j];Q==null?ee.onerror&&ee.onerror(I[j]):ee.onsuccess&&ee.onsuccess(_.type==="put"&&k[j]?_.values[j]:Q)}return{failures:I,results:A,numFailures:B,lastResult:L}}).catch(function(C){return O.forEach(function(I){return I.onerror&&I.onerror(C)}),Promise.reject(C)})})}function E(_){return K(_.trans,_.range,1e4)}function K(_,b,x){return n.query({trans:_,values:!1,query:{index:i,range:b},limit:x}).then(function(k){var O=k.result;return y({type:"delete",keys:O,trans:_}).then(function(C){return C.numFailures>0?Promise.reject(C.failures[0]):O.length<x?{failures:[],numFailures:0,lastResult:void 0}:K(_,h(h({},b),{lower:O[O.length-1],lowerOpen:!0}),x)})})}}});return a}})}};function ls(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Ya(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var i=[],a=0,o=0;a<t.keys.length&&o<e.length;++a)re(t.keys[a],e[o])===0&&(i.push(n?ft(t.values[a]):t.values[a]),++o);return i.length===e.length?i:null}catch{return null}}var fs={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return h(h({},n),{getMany:function(i){if(!i.cache)return n.getMany(i);var a=Ya(i.keys,i.trans._cache,i.cache==="clone");return a?N.resolve(a):n.getMany(i).then(function(o){return i.trans._cache={keys:i.keys,values:i.cache==="clone"?ft(o):o},o})},mutate:function(i){return i.type!=="add"&&(i.trans._cache=null),n.mutate(i)}})}}}};function Qa(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ha(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var cs={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Ae(e.MIN_KEY,e.MAX_KEY);return h(h({},e),{transaction:function(i,a,o){if(V.subscr&&a!=="readonly")throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(V.querier));return e.transaction(i,a,o)},table:function(i){var a=e.table(i),o=a.schema,l=o.primaryKey,f=o.indexes,d=l.extractKey,p=l.outbound,g=l.autoIncrement&&f.filter(function(_){return _.compound&&_.keyPath.includes(l.keyPath)}),y=h(h({},a),{mutate:function(_){var b,x,k=_.trans,O=_.mutatedParts||(_.mutatedParts={}),C=function(q){var ie="idb://".concat(t,"/").concat(i,"/").concat(q);return O[ie]||(O[ie]=new Ae)},I=C(""),A=C(":dels"),B=_.type,L=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[Ci(l,_).filter(function(q){return q}),_.values]:[],j=L[0],Q=L[1],ee=_.trans._cache;if(w(j)){I.addKeys(j);var $=B==="delete"||j.length===Q.length?Ya(j,ee):null;$||A.addKeys(j),($||Q)&&ds(C,o,$,Q)}else if(j){var J={from:(b=j.lower)!==null&&b!==void 0?b:e.MIN_KEY,to:(x=j.upper)!==null&&x!==void 0?x:e.MAX_KEY};A.add(J),I.add(J)}else I.add(n),A.add(n),o.indexes.forEach(function(q){return C(q.name).add(n)});return a.mutate(_).then(function(q){return j&&(_.type==="add"||_.type==="put")&&(I.addKeys(q.results),g&&g.forEach(function(ie){for(var z=_.values.map(function(Re){return ie.extractKey(Re)}),me=ie.keyPath.findIndex(function(Re){return Re===l.keyPath}),Te=0,rt=q.results.length;Te<rt;++Te)z[Te][me]=q.results[Te];C(ie.name).addKeys(z)})),k.mutatedParts=Sr(k.mutatedParts||{},O),q})}}),E=function(_){var b,x,k=_.query,O=k.index,C=k.range;return[O,new Ae((b=C.lower)!==null&&b!==void 0?b:e.MIN_KEY,(x=C.upper)!==null&&x!==void 0?x:e.MAX_KEY)]},K={get:function(_){return[l,new Ae(_.key)]},getMany:function(_){return[l,new Ae().addKeys(_.keys)]},count:E,query:E,openCursor:E};return S(K).forEach(function(_){y[_]=function(b){var x=V.subscr,k=!!x,O=Qa(V,a)&&Ha(_,b),C=O?b.obsSet={}:x;if(k){var I=function($){var J="idb://".concat(t,"/").concat(i,"/").concat($);return C[J]||(C[J]=new Ae)},A=I(""),B=I(":dels"),L=K[_](b),j=L[0],Q=L[1];if(_==="query"&&j.isPrimaryKey&&!b.values?B.add(Q):I(j.name||"").add(Q),!j.isPrimaryKey)if(_==="count")B.add(n);else{var ee=_==="query"&&p&&b.values&&a.query(h(h({},b),{values:!1}));return a[_].apply(this,arguments).then(function($){if(_==="query"){if(p&&b.values)return ee.then(function(z){var me=z.result;return A.addKeys(me),$});var J=b.values?$.result.map(d):$.result;b.values?A.addKeys(J):B.addKeys(J)}else if(_==="openCursor"){var q=$,ie=b.values;return q&&Object.create(q,{key:{get:function(){return B.addKey(q.primaryKey),q.key}},primaryKey:{get:function(){var z=q.primaryKey;return B.addKey(z),z}},value:{get:function(){return ie&&A.addKey(q.primaryKey),q.value}}})}return $})}}return a[_].apply(this,arguments)}}),y}})}};function ds(e,t,n,i){function a(o){var l=e(o.name||"");function f(p){return p!=null?o.extractKey(p):null}var d=function(p){return o.multiEntry&&w(p)?p.forEach(function(g){return l.addKey(g)}):l.addKey(p)};(n||i).forEach(function(p,g){var y=n&&f(n[g]),E=i&&f(i[g]);re(y,E)!==0&&(y!=null&&d(y),E!=null&&d(E))})}t.indexes.forEach(a)}function qa(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===i)return null;var a=h({},t);return w(a.keys)&&(a.keys=a.keys.filter(function(o,l){return!(l in n.failures)})),"values"in a&&w(a.values)&&(a.values=a.values.filter(function(o,l){return!(l in n.failures)})),a}function hs(e,t){return t.lower===void 0?!0:t.lowerOpen?re(e,t.lower)>0:re(e,t.lower)>=0}function vs(e,t){return t.upper===void 0?!0:t.upperOpen?re(e,t.upper)<0:re(e,t.upper)<=0}function Ii(e,t){return hs(e,t)&&vs(e,t)}function Ga(e,t,n,i,a,o){if(!n||n.length===0)return e;var l=t.query.index,f=l.multiEntry,d=t.query.range,p=i.schema.primaryKey,g=p.extractKey,y=l.extractKey,E=(l.lowLevelIndex||l).extractKey,K=n.reduce(function(_,b){var x=_,k=[];if(b.type==="add"||b.type==="put")for(var O=new Ae,C=b.values.length-1;C>=0;--C){var I=b.values[C],A=g(I);if(!O.hasKey(A)){var B=y(I);(f&&w(B)?B.some(function($){return Ii($,d)}):Ii(B,d))&&(O.addKey(A),k.push(I))}}switch(b.type){case"add":{var L=new Ae().addKeys(t.values?_.map(function($){return g($)}):_);x=_.concat(t.values?k.filter(function($){var J=g($);return L.hasKey(J)?!1:(L.addKey(J),!0)}):k.map(function($){return g($)}).filter(function($){return L.hasKey($)?!1:(L.addKey($),!0)}));break}case"put":{var j=new Ae().addKeys(b.values.map(function($){return g($)}));x=_.filter(function($){return!j.hasKey(t.values?g($):$)}).concat(t.values?k:k.map(function($){return g($)}));break}case"delete":var Q=new Ae().addKeys(b.keys);x=_.filter(function($){return!Q.hasKey(t.values?g($):$)});break;case"deleteRange":var ee=b.range;x=_.filter(function($){return!Ii(g($),ee)});break}return x},e);return K===e?e:(K.sort(function(_,b){return re(E(_),E(b))||re(g(_),g(b))}),t.limit&&t.limit<1/0&&(K.length>t.limit?K.length=t.limit:e.length===t.limit&&K.length<t.limit&&(a.dirty=!0)),o?Object.freeze(K):K)}function Xa(e,t){return re(e.lower,t.lower)===0&&re(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function ps(e,t,n,i){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var a=re(e,t);if(a===0){if(n&&i)return 0;if(n)return 1;if(i)return-1}return a}function ys(e,t,n,i){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var a=re(e,t);if(a===0){if(n&&i)return 0;if(n)return-1;if(i)return 1}return a}function ms(e,t){return ps(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&ys(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function _s(e,t,n,i){var a=Ht["idb://".concat(e,"/").concat(t)];if(!a)return[];var o=a.queries[n];if(!o)return[null,!1,a,null];var l=i.query?i.query.index.name:null,f=o[l||""];if(!f)return[null,!1,a,null];switch(n){case"query":var d=f.find(function(y){return y.req.limit===i.limit&&y.req.values===i.values&&Xa(y.req.query.range,i.query.range)});if(d)return[d,!0,a,f];var p=f.find(function(y){var E="limit"in y.req?y.req.limit:1/0;return E>=i.limit&&(i.values?y.req.values:!0)&&ms(y.req.query.range,i.query.range)});return[p,!1,a,f];case"count":var g=f.find(function(y){return Xa(y.req.query.range,i.query.range)});return[g,!!g,a,f]}}function gs(e,t,n,i){e.subscribers.add(n),i.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&bs(e,t)})}function bs(e,t){setTimeout(function(){e.subscribers.size===0&&Lt(t,e)},3e3)}var ws={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=h(h({},e),{transaction:function(i,a,o){var l=e.transaction(i,a,o);if(a==="readwrite"){var f=new AbortController,d=f.signal,p=function(g){return function(){if(f.abort(),a==="readwrite"){for(var y=new Set,E=0,K=i;E<K.length;E++){var _=K[E],b=Ht["idb://".concat(t,"/").concat(_)];if(b){var x=e.table(_),k=b.optimisticOps.filter(function(ie){return ie.trans===l});if(l._explicit&&g&&l.mutatedParts)for(var O=0,C=Object.values(b.queries.query);O<C.length;O++)for(var I=C[O],A=0,B=I.slice();A<B.length;A++){var L=B[A];Ei(L.obsSet,l.mutatedParts)&&(Lt(I,L),L.subscribers.forEach(function(ie){return y.add(ie)}))}else if(k.length>0){b.optimisticOps=b.optimisticOps.filter(function(ie){return ie.trans!==l});for(var j=0,Q=Object.values(b.queries.query);j<Q.length;j++)for(var I=Q[j],ee=0,$=I.slice();ee<$.length;ee++){var L=$[ee];if(L.res!=null&&l.mutatedParts)if(g&&!L.dirty){var J=Object.isFrozen(L.res),q=Ga(L.res,L.req,k,x,L,J);L.dirty?(Lt(I,L),L.subscribers.forEach(function(me){return y.add(me)})):q!==L.res&&(L.res=q,L.promise=N.resolve({result:q}))}else L.dirty&&Lt(I,L),L.subscribers.forEach(function(me){return y.add(me)})}}}}y.forEach(function(ie){return ie()})}}};l.addEventListener("abort",p(!1),{signal:d}),l.addEventListener("error",p(!1),{signal:d}),l.addEventListener("complete",p(!0),{signal:d})}return l},table:function(i){var a=e.table(i),o=a.schema.primaryKey,l=h(h({},a),{mutate:function(f){var d=V.trans;if(o.outbound||d.db._options.cache==="disabled"||d.explicit||d.idbtrans.mode!=="readwrite")return a.mutate(f);var p=Ht["idb://".concat(t,"/").concat(i)];if(!p)return a.mutate(f);var g=a.mutate(f);return(f.type==="add"||f.type==="put")&&(f.values.length>=50||Ci(o,f).some(function(y){return y==null}))?g.then(function(y){var E=h(h({},f),{values:f.values.map(function(_,b){var x;if(y.failures[b])return _;var k=!((x=o.keyPath)===null||x===void 0)&&x.includes(".")?ft(_):h({},_);return ne(k,o.keyPath,y.results[b]),k})}),K=qa(p,E,y);p.optimisticOps.push(K),queueMicrotask(function(){return f.mutatedParts&&Ar(f.mutatedParts)})}):(p.optimisticOps.push(f),f.mutatedParts&&Ar(f.mutatedParts),g.then(function(y){if(y.numFailures>0){Lt(p.optimisticOps,f);var E=qa(p,f,y);E&&p.optimisticOps.push(E),f.mutatedParts&&Ar(f.mutatedParts)}}),g.catch(function(){Lt(p.optimisticOps,f),f.mutatedParts&&Ar(f.mutatedParts)})),g},query:function(f){var d;if(!Qa(V,a)||!Ha("query",f))return a.query(f);var p=((d=V.trans)===null||d===void 0?void 0:d.db._options.cache)==="immutable",g=V,y=g.requery,E=g.signal,K=_s(t,i,"query",f),_=K[0],b=K[1],x=K[2],k=K[3];if(_&&b)_.obsSet=f.obsSet;else{var O=a.query(f).then(function(C){var I=C.result;if(_&&(_.res=I),p){for(var A=0,B=I.length;A<B;++A)Object.freeze(I[A]);Object.freeze(I)}else C.result=ft(I);return C}).catch(function(C){return k&&_&&Lt(k,_),Promise.reject(C)});_={obsSet:f.obsSet,promise:O,subscribers:new Set,type:"query",req:f,dirty:!1},k?k.push(_):(k=[_],x||(x=Ht["idb://".concat(t,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),x.queries.query[f.query.index.name||""]=k)}return gs(_,k,y,E),_.promise.then(function(C){return{result:Ga(C.result,f,x?.optimisticOps,a,_,p)}})}});return l}});return n}};function Or(e,t){return new Proxy(e,{get:function(n,i,a){return i==="db"?t:Reflect.get(n,i,a)}})}var ht=(function(){function e(t,n){var i=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=n=h({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ce,dbReadyPromise:null,cancelOpen:ce,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};l.dbReadyPromise=new N(function(d){l.dbReadyResolve=d}),l.openCanceller=new N(function(d,p){l.cancelOpen=p}),this._state=l,this.name=t,this.on=Rn(this,"populate","blocked","versionchange","close",{ready:[qr,ce]}),this.once=function(d,p){var g=function(){for(var y=[],E=0;E<arguments.length;E++)y[E]=arguments[E];i.on(d).unsubscribe(g),p.apply(i,y)};return i.on(d,g)},this.on.ready.subscribe=ae(this.on.ready.subscribe,function(d){return function(p,g){e.vip(function(){var y=i._state;if(y.openComplete)y.dbOpenError||N.resolve().then(p),g&&d(p);else if(y.onReadyBeingFired)y.onReadyBeingFired.push(p),g&&d(p);else{d(p);var E=i;g||d(function K(){E.on.ready.unsubscribe(p),E.on.ready.unsubscribe(K)})}})}}),this.Collection=Co(this),this.Table=Ao(this),this.Transaction=Fo(this),this.Version=Zo(this),this.WhereClause=Mo(this),this.on("versionchange",function(d){d.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(d.oldVersion/10))}),this._maxKey=jn(n.IDBKeyRange),this._createTransaction=function(d,p,g,y){return new i.Transaction(d,p,g,i._options.chromeTransactionDurability,y)},this._fireOnBlocked=function(d){i.on("blocked").fire(d),fn.filter(function(p){return p.name===i.name&&p!==i&&!p._state.vcFired}).map(function(p){return p.on("versionchange").fire(d)})},this.use(fs),this.use(ws),this.use(cs),this.use(os),this.use(ss);var f=new Proxy(this,{get:function(d,p,g){if(p==="_vip")return!0;if(p==="table")return function(E){return Or(i.table(E),f)};var y=Reflect.get(d,p,g);return y instanceof Da?Or(y,f):p==="tables"?y.map(function(E){return Or(E,f)}):p==="_createTransaction"?function(){var E=y.apply(this,arguments);return Or(E,f)}:y}});this.vip=f,o.forEach(function(d){return d(i)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new W.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,i=n.filter(function(a){return a._cfg.version===t})[0];return i||(i=new this.Version(t),n.push(i),n.sort(Uo),i.stores({}),this._state.autoSchema=!1,i)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||V.letThrough||this._vip)?t():new N(function(i,a){if(n._state.openComplete)return a(new W.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen){a(new W.DatabaseClosed);return}n.open().catch(ce)}n._state.dbReadyPromise.then(i,a)}).then(t)},e.prototype.use=function(t){var n=t.stack,i=t.create,a=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var l=this._middlewares[n]||(this._middlewares[n]=[]);return l.push({stack:n,create:i,level:a??10,name:o}),l.sort(function(f,d){return f.level-d.level}),this},e.prototype.unuse=function(t){var n=t.stack,i=t.name,a=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return a?o.create!==a:i?o.name!==i:!1})),this},e.prototype.open=function(){var t=this;return Wt(xt,function(){return is(t)})},e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,n=fn.indexOf(this);if(n>=0&&fn.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new N(function(i){t.dbReadyResolve=i}),t.openCanceller=new N(function(i,a){t.cancelOpen=a}))},e.prototype.close=function(t){var n=t===void 0?{disableAutoOpen:!0}:t,i=n.disableAutoOpen,a=this._state;i?(a.isBeingOpened&&a.cancelOpen(new W.DatabaseClosed),this._close(),a.autoOpen=!1,a.dbOpenError=new W.DatabaseClosed):(this._close(),a.autoOpen=this._options.autoOpen||a.isBeingOpened,a.openComplete=!1,a.dbOpenError=null)},e.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var i=arguments.length>0&&typeof arguments[0]!="object",a=this._state;return new N(function(o,l){var f=function(){n.close(t);var d=n._deps.indexedDB.deleteDatabase(n.name);d.onsuccess=ve(function(){ns(n._deps,n.name),o()}),d.onerror=nt(l),d.onblocked=n._fireOnBlocked};if(i)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(f):f()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return S(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=as.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,i){var a=this,o=V.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var l=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var f,d;try{if(d=n.map(function(g){var y=g instanceof a.Table?g.name:g;if(typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),t=="r"||t===oi)f=oi;else if(t=="rw"||t==si)f=si;else throw new W.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===oi&&f===si)if(l)o=null;else throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&d.forEach(function(g){if(o&&o.storeNames.indexOf(g)===-1)if(l)o=null;else throw new W.SubTransaction("Table "+g+" not included in parent transaction.")}),l&&o&&!o.active&&(o=null)}}catch(g){return o?o._promise(null,function(y,E){E(g)}):_e(g)}var p=Wa.bind(null,this,f,d,o,i);return o?o._promise(f,p,"lock"):V.trans?Wt(V.transless,function(){return a._whenReady(p)}):this._whenReady(p)},e.prototype.table=function(t){if(!T(this._allTables,t))throw new W.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e})(),xs=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Es=(function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,i){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:i}:t)},e.prototype[xs]=function(){return this},e})(),Cr;try{Cr={indexedDB:m.indexedDB||m.mozIndexedDB||m.webkitIndexedDB||m.msIndexedDB,IDBKeyRange:m.IDBKeyRange||m.webkitIDBKeyRange}}catch{Cr={indexedDB:null,IDBKeyRange:null}}function Ja(e){var t=!1,n,i=new Es(function(a){var o=Yr(e);function l(k){var O=on();try{o&&ln();var C=Et(e,k);return o&&(C=C.finally(kt)),C}finally{O&&sn()}}var f=!1,d,p={},g={},y={get closed(){return f},unsubscribe:function(){f||(f=!0,d&&d.abort(),E&&Tt.storagemutated.unsubscribe(b))}};a.start&&a.start(y);var E=!1,K=function(){return ii(x)};function _(){return Ei(g,p)}var b=function(k){Sr(p,k),_()&&K()},x=function(){if(!(f||!Cr.indexedDB)){p={};var k={};d&&d.abort(),d=new AbortController;var O={subscr:k,signal:d.signal,requery:K,querier:e,trans:null},C=l(O);Promise.resolve(C).then(function(I){t=!0,n=I,!(f||O.signal.aborted)&&(p={},g=k,!bt(g)&&!E&&(Tt(Fn,b),E=!0),ii(function(){return!f&&a.next&&a.next(I)}))},function(I){t=!1,["DatabaseClosedError","AbortError"].includes(I?.name)||f||ii(function(){f||a.error&&a.error(I)})})}};return setTimeout(K,0),y});return i.hasValue=function(){return t},i.getValue=function(){return n},i}var qt=ht;D(qt,h(h({},ir),{delete:function(e){var t=new qt(e,{addons:[]});return t.delete()},exists:function(e){return new qt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return es(qt.dependencies).then(e)}catch{return _e(new W.MissingAPI)}},defineClass:function(){function e(t){P(this,t)}return e},ignoreTransaction:function(e){return V.trans?Wt(V.transless,e):e()},vip:bi,async:function(e){return function(){try{var t=Ti(e.apply(this,arguments));return!t||typeof t.then!="function"?N.resolve(t):t}catch(n){return _e(n)}}},spawn:function(e,t,n){try{var i=Ti(e.apply(n,t||[]));return!i||typeof i.then!="function"?N.resolve(i):i}catch(a){return _e(a)}},currentTransaction:{get:function(){return V.trans||null}},waitFor:function(e,t){var n=N.resolve(typeof e=="function"?qt.ignoreTransaction(e):e).timeout(t||6e4);return V.trans?V.trans.waitFor(n):n},Promise:N,debug:{get:function(){return tt},set:function(e){pa(e)}},derive:F,extend:P,props:D,override:ae,Events:Rn,on:Tt,liveQuery:Ja,extendObservabilitySet:Sr,getByKeyPath:se,setByKeyPath:ne,delByKeyPath:Se,shallowClone:he,deepClone:ft,getObjectDiff:Oi,cmp:re,asap:de,minKey:ui,addons:[],connections:fn,errnames:Hr,dependencies:Cr,cache:Ht,semVer:ka,version:ka.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),qt.maxKey=jn(qt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Tt(Fn,function(e){if(!Ot){var t;t=new CustomEvent(ci,{detail:e}),Ot=!0,dispatchEvent(t),Ot=!1}}),addEventListener(ci,function(e){var t=e.detail;Ot||Di(t)}));function Di(e){var t=Ot;try{Ot=!0,Tt.storagemutated.fire(e),Ai(e,!0)}finally{Ot=t}}var Ot=!1,Ct,Pi=function(){};typeof BroadcastChannel<"u"&&(Pi=function(){Ct=new BroadcastChannel(ci),Ct.onmessage=function(e){return e.data&&Di(e.data)}},Pi(),typeof Ct.unref=="function"&&Ct.unref(),Tt(Fn,function(e){Ot||Ct.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!ht.disableBfCache&&e.persisted){tt&&console.debug("Dexie: handling persisted pagehide"),Ct?.close();for(var t=0,n=fn;t<n.length;t++){var i=n[t];i.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!ht.disableBfCache&&e.persisted&&(tt&&console.debug("Dexie: handling persisted pageshow"),Pi(),Di({all:new Ae(-1/0,[[]])}))}));function ks(e){return new Kn({add:e})}function Ss(e){return new Kn({remove:e})}function As(e,t){return new Kn({replacePrefix:[e,t]})}N.rejectionMapper=ao,pa(tt);var Ts=Object.freeze({__proto__:null,Dexie:ht,liveQuery:Ja,Entity:Ta,cmp:re,PropModification:Kn,replacePrefix:As,add:ks,remove:Ss,default:ht,RangeSet:Ae,mergeRanges:$n,rangesOverlap:$a});return h(ht,Ts,{default:ht}),ht}))})(Pr)),Pr.exports}var sf=of();const Qi=af(sf),su=Symbol.for("Dexie"),$r=globalThis[su]||(globalThis[su]=Qi);if(Qi.semVer!==$r.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Qi.semVer} and ${$r.semVer}`);const{liveQuery:Vr,mergeRanges:Bf,rangesOverlap:Ff,RangeSet:jf,cmp:Nf,Entity:Lf,PropModification:$f,replacePrefix:Vf,add:zf,remove:Uf,DexieYProvider:Wf}=$r,Pe=new $r("TaskPlannerDB");Pe.version(1).stores({lists:"++id, name, order",tasks:"++id, text, listId, order",preferences:"key",calendarSyncState:"key"});Pe.version(2).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status",preferences:"key",calendarSyncState:"key"}).upgrade(r=>r.tasks.toCollection().modify(u=>{u.status="unchecked"}));Pe.version(3).stores({lists:"++id, name, order",tasks:"++id, text, listId, order, status, archivedAt",preferences:"key",calendarSyncState:"key"}).upgrade(r=>r.tasks.where("status").equals("archived").modify(u=>{u.archivedAt=Date.now()}));async function eo(){return await Pe.lists.orderBy("order").toArray()}async function lf(r){return await Pe.tasks.where("listId").equals(r).filter(u=>u.status!=="archived").sortBy("order")}async function ff(){return(await Pe.tasks.where("status").equals("archived").toArray()).sort((u,s)=>{const c=u.archivedAt||0,h=s.archivedAt||0;return h!==c?h-c:(s.order||0)-(u.order||0)})}async function cf(r,u){const s=await Pe.tasks.where("listId").equals(r).filter(m=>m.status!=="archived").sortBy("order"),h=(s.length>0?Math.max(...s.map(m=>m.order)):-1)+1;return await Pe.tasks.add({text:u.trim(),listId:r,order:h,status:"unchecked"})}async function lu(r,u){if(!["unchecked","checked","archived"].includes(u))throw new Error(`Invalid status: ${u}`);const s={status:u};return u==="archived"?s.archivedAt=Date.now():u!=="archived"&&(s.archivedAt=null),await Pe.tasks.update(r,s)}async function df(r){const u=await Pe.tasks.get(r);if(!u)throw new Error(`Task ${r} not found`);const s=await Pe.tasks.where("listId").equals(u.listId).filter(v=>v.status!=="archived"&&v.id!==r).sortBy("order"),h=(s.length>0?Math.max(...s.map(v=>v.order)):-1)+1;return await Pe.tasks.update(r,{status:"checked",order:h})}async function hf(r){await Pe.tasks.delete(r)}var vf=Le("<p> </p>"),pf=Le("<button>Archive</button>"),yf=Le('<li><input type="checkbox"/> <span> </span> <!></li>'),mf=Le("<ul></ul>"),_f=Le("<p>Loading tasks...</p>"),gf=Le('<div><h2> </h2> <!> <div><input type="text" placeholder="Add new task..."/> <button>Add</button></div></div>');function bf(r,u){Jn(u,!0);const s=()=>Lr(G(v),"$tasksQuery",c),[c,h]=ca();let v=Me(null);ua(()=>{u.listId&&!G(v)&&Yi(Ee(v,Vr(()=>lf(u.listId)),!0),"$tasksQuery",c)});async function m(){const oe=u.newTaskInput?.trim();if(oe)try{await cf(u.listId,oe),u.onInputChange("")}catch(te){console.error("Error creating task:",te)}}async function S(oe,te){try{await lu(oe,te==="unchecked"?"checked":"unchecked")}catch(Z){console.error("Error updating task status:",Z)}}async function w(oe){try{await lu(oe,"archived")}catch(te){console.error("Error archiving task:",te)}}var P=gf(),M=ge(P),R=ge(M),T=Ce(M,2);{var D=oe=>{var te=gn(),Z=Xt(te);{var ae=de=>{var pe=vf(),se=ge(pe);Yn(()=>Mt(se,`No tasks yet for ${u.listName??""}. Add your first task.`)),be(de,pe)},fe=de=>{var pe=mf();Zi(pe,5,s,Ji,(se,ne)=>{var Se=yf(),he=ge(Se);he.__change=()=>S(G(ne).id,G(ne).status);var we=Ce(he,2),We=ge(we),et=Ce(we,2);{var $e=Ge=>{var bt=pf();bt.__click=()=>w(G(ne).id),be(Ge,bt)};yt(et,Ge=>{G(ne).status==="checked"&&Ge($e)})}Yn(()=>{ef(he,G(ne).status==="checked"),Gl(we,1,Hl(G(ne).status==="checked"?"line-through":"")),Mt(We,G(ne).text)}),be(se,Se)}),be(de,pe)};yt(Z,de=>{s().length===0?de(ae):de(fe,!1)})}be(oe,te)},U=oe=>{var te=_f();be(oe,te)};yt(T,oe=>{G(v)&&s()!==void 0?oe(D):oe(U,!1)})}var H=Ce(T,2),F=ge(H);F.__input=oe=>u.onInputChange(oe.target.value),F.__keydown=oe=>{oe.key==="Enter"&&m()};var X=Ce(F,2);X.__click=m,Yn(()=>{Mt(R,u.listName),Zl(F,u.newTaskInput)}),be(r,P),Zn(),h()}fa(["change","click","input","keydown"]);var wf=Le('<div class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50"><div class="bg-white text-gray-900 p-6 rounded-xl shadow-2xl border border-gray-200 max-w-md w-full mx-4"><h3 class="text-lg font-semibold mb-4"> </h3> <p class="mb-6 text-sm text-gray-600"> </p> <div class="flex justify-end gap-3"><button class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete</button></div></div></div>');function xf(r,u){Jn(u,!0);function s(){u.onConfirm()}function c(){u.onCancel()}function h(w){w.target===w.currentTarget&&c()}var v=gn(),m=Xt(v);{var S=w=>{var P=wf(),M=ge(P),R=ge(M),T=ge(R),D=Ce(R,2),U=ge(D),H=Ce(D,2),F=ge(H),X=Ce(F,2);Yn(()=>{Mt(T,u.title),Mt(U,u.message)}),Fi("click",F,c),Fi("click",X,s),Fi("click",P,h),be(w,P)};yt(m,w=>{u.isOpen&&w(S)})}be(r,v),Zn()}var Ef=Le("<p>No archived tasks</p>"),kf=Le('<li class="flex items-center gap-3 mb-2"><span class="line-through"> </span> <span class="text-sm text-gray-500"> </span> <span class="text-sm text-gray-400"> </span> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Restore</button> <button class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm">Delete</button></li>'),Sf=Le("<ul></ul>"),Af=Le('<div class="w-[1056px] mt-8 print:hidden"><h2 class="text-xl font-semibold mb-4">Archived Tasks</h2> <!></div> <!>',1);function Tf(r,u){Jn(u,!0);const s=()=>Lr(G(S),"$listsQuery",h),c=()=>Lr(G(m),"$archivedTasksQuery",h),[h,v]=ca();let m=Me(null),S=Me(null),w=Me(!1),P=Me(null);ua(()=>{Yi(Ee(m,Vr(()=>ff()),!0),"$archivedTasksQuery",h),Yi(Ee(S,Vr(()=>eo()),!0),"$listsQuery",h)});function M(ae){if(!s())return"Unknown List";const fe=s().find(de=>de.id===ae);return fe?fe.name:"Unknown List"}function R(ae){return ae?new Date(ae).toLocaleString():"Unknown"}async function T(ae){try{await df(ae)}catch(fe){console.error("Error restoring task:",fe)}}function D(ae,fe){Ee(P,{id:ae,text:fe},!0),Ee(w,!0)}async function U(){if(G(P))try{await hf(G(P).id),Ee(w,!1),Ee(P,null)}catch(ae){console.error("Error deleting task:",ae)}}function H(){Ee(w,!1),Ee(P,null)}var F=Af(),X=Xt(F),oe=Ce(ge(X),2);{var te=ae=>{var fe=gn(),de=Xt(fe);{var pe=ne=>{var Se=Ef();be(ne,Se)},se=ne=>{var Se=Sf();Zi(Se,5,c,Ji,(he,we)=>{var We=kf(),et=ge(We),$e=ge(et),Ge=Ce(et,2),bt=ge(Ge),wt=Ce(Ge,2),ft=ge(wt),nn=Ce(wt,2);nn.__click=()=>T(G(we).id);var Wr=Ce(nn,2);Wr.__click=()=>D(G(we).id,G(we).text),Yn((Tn,On)=>{Mt($e,G(we).text),Mt(bt,`(${Tn??""})`),Mt(ft,`Archived: ${On??""}`)},[()=>M(G(we).listId),()=>R(G(we).archivedAt)]),be(he,We)}),be(ne,Se)};yt(de,ne=>{c().length===0?ne(pe):ne(se,!1)})}be(ae,fe)};yt(oe,ae=>{G(m)&&c()&&ae(te)})}var Z=Ce(X,2);{let ae=Ou(()=>G(P)?`Are you sure you want to permanently delete "${G(P).text}"? This action cannot be undone.`:"");xf(Z,{get isOpen(){return G(w)},title:"Delete Task",get message(){return G(ae)},onConfirm:U,onCancel:H})}be(r,F),Zn(),v()}fa(["click"]);var Of=Le("<p>Loading...</p>"),Cf=Le("<p>No lists found</p>"),If=Le('<main class="min-h-screen flex flex-col items-center justify-center bg-gray-50 print:bg-white print:min-h-0 print:gap-0 print:py-0 gap-4 py-8 svelte-1n46o8q"><div class="w-[1056px] flex justify-end print:hidden"><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Print</button></div> <div class="w-[1056px] h-[816px] bg-gray-400 print:bg-gray-400 border-2 border-gray-300 shadow-lg print:shadow-none print:border-0 print:mx-auto relative"><div class="absolute inset-[16px] border border-red-600" style="border-color: rgb(220, 38, 38);"><div class="w-full h-full p-4 overflow-auto"><!></div></div></div> <!></main>');function Df(r,u){Jn(u,!0);const s=()=>Lr(v,"$lists",c),[c,h]=ca();let v=Vr(()=>eo()),m=Me(yn({}));ua(()=>{if(s()&&Array.isArray(s())&&s().length>0&&Object.keys(G(m)).length===0){const te={};for(const Z of s())te[Z.id]="";Ee(m,te,!0)}});function S(te,Z){G(m)[te]=Z}function w(){window.print()}var P=If(),M=ge(P),R=ge(M);R.__click=w;var T=Ce(M,2),D=ge(T),U=ge(D),H=ge(U);{var F=te=>{var Z=Of();be(te,Z)},X=te=>{var Z=gn(),ae=Xt(Z);{var fe=pe=>{var se=Cf();be(pe,se)},de=pe=>{var se=gn(),ne=Xt(se);{var Se=he=>{var we=gn(),We=Xt(we);Zi(We,1,s,Ji,(et,$e)=>{{let Ge=Ou(()=>G(m)[G($e).id]||"");bf(et,{get listId(){return G($e).id},get listName(){return G($e).name},get newTaskInput(){return G(Ge)},onInputChange:bt=>S(G($e).id,bt)})}}),be(he,we)};yt(ne,he=>{Array.isArray(s())&&he(Se)},!0)}be(pe,se)};yt(ae,pe=>{Array.isArray(s())&&s().length===0?pe(fe):pe(de,!1)},!0)}be(te,Z)};yt(H,te=>{s()===void 0||s()===null?te(F):te(X,!1)})}var oe=Ce(T,2);Tf(oe,{}),be(r,P),Zn(),h()}fa(["click"]);const Pf=[{name:"Work",order:0},{name:"Personal",order:1},{name:"Shopping",order:2}],Kf=[{text:"Review project proposal",listId:1,order:0,status:"unchecked"},{text:"Team meeting prep",listId:1,order:1,status:"unchecked"},{text:"Update documentation",listId:1,order:2,status:"unchecked"},{text:"Call dentist",listId:2,order:0,status:"unchecked"},{text:"Exercise",listId:2,order:1,status:"unchecked"},{text:"Buy groceries",listId:3,order:0,status:"unchecked"},{text:"Pick up dry cleaning",listId:3,order:1,status:"unchecked"}];async function Rf(){try{if(await Pe.lists.count()>0)return;await Pe.lists.bulkAdd(Pf),await Pe.tasks.bulkAdd(Kf),console.log("Database seeded with mock data")}catch(r){throw console.error("Error seeding database:",r),r}}(async()=>(await Rf().catch(console.error),zl(Df,{target:document.getElementById("app")})))();
